VERSIOON: 0.6.3/20180202

STRUKTUUR:
------------------------------------------------------
README.md - tarne ja installeerimise kirjeldus
/db - andmebaasi skriptide kaust
/hois_back - rakenduse backendi kood
/hois_front - rakenduse frontendi kood
/hois_ws - rakenduse veebiteenuste kood



KIRJELDUS: 
----------------------------------------------------- 
Antud tarne sisaldab järgmist analüüsis kirjeldatud funktsionaalsust:
DOK1 - HOIS_analyys_klassifikaatorid_seaded.docx
		2.1	Õppeasutus
		2.2	Õppeasutuse struktuur
		3.1	Õppeasutuse ja õppeastmete vastavus
		3.2	Õppesutuse hooned ja ruumid
		3.3	Õpetaja ametikoht
		3.4	Automaatsete teadete mallid
		3.5	Õppeaasta ja õppeperiood
		3.6	Käskkirjade kooskõlastaja seadistamine
		4	Klassifikaatorite haldamine
	   
DOK2 - HOIS_analyys_oppekavad_ained.docx
		2.3	Riikliku õppekava sisestamine süsteemi
		2.4	Riikliku õppekava otsing
		2.5	Kutseõppe õppekava ja moodulite rakenduskava sisestamine süsteemi 
		2.6	Kõrgharidusõppe õppekava ja õppekava versiooni sisestamine süsteemi 
		2.7	Kutseõppe ja kõrgharidusõppe õppekava ja versiooni otsing
		2.8	Kõrgharidusõppe õppeainete sisestamine süsteemi
		2.9	Kõrgharidusõppe õppeainete otsing
	   
DOK3 - HOIS_analyys_opilased_liikumised.docx
		2.1	Õppurite otsing
		2.2	Õppuri andmete vaatamine (va välisõppes viibimine)
		2.3	Õppuri andmete muutmine
		2.4	Õppuri esindaja andmete muutmine
		2.5	Õpperühma/grupi moodustamine
		2.6	Õpperühma/grupi otsing ja muutmine
		2.7	Õppuri puudumise tõendi sisestamine
		3.1	Õppurile uue esindaja lisamine
		3.2	Avalduse esitamine õppuri andmete nägemiseks
		3.3	Õppuri esindaja / lapsevanema avalduse läbivaatamine

DOK4 - HOIS_analyys_opetajad_materjalid.docx
		2.1	Õpetaja andmete sisestamine süsteemi
		2.2	Õpetajate otsing 
		2.3 Õpetaja andmete vaatamine
		2.4	Õppuri puudumistõendi aktsepteerimine

DOK5 - HOIS_analyys_avaldused_kaskkirjad.docx
	    2.1	Avalduste otsing
		2.2	Avalduse koostamine
		2.3	Õppuri avalduste nimekirja vaatamine
		2.4	Akadeemilise puhkuse taotlemine
		2.5	Akadeemilise puhkuse katkestamise taotlemine
		2.6	Õppekava vahetamise taotlemine
		2.7	Õppevormi vahetamise taotlemine
		2.8	Finantseerimisallika muutmise taotlemine
		2.9	Välisõpilaseks vormistamise taotlmine
		2.10 Eksmatrikuleerimise taotlemine
		2.11 Avaldusele faili lisamine
		2.12 Avalduse andmete vaatamine
		2.13 Avalduse andmete muutmine
		2.14 Avalduse tagasilükkamine
		2.15 Alaealise või erivajadusega õppuri koostatud avalduse esitamine
		3.1	Käskkirjade otsing
		3.2	Õppuri otsimine
		3.3	Akadeemilisele puhkusele lubamise käskkirja koostamine
		3.4	Akadeemilise puhkuse katkestamise käskkirja koostamine
		3.5	Õppekoormuse muutmise käskkirja koostamine
		3.6	Õppekava vahetamise käskkirja koostamine
		3.7	Finantseerimisallika muutmise käskkirja koostamine
		3.8	Õppevormi vahetamise käskkirja koostamine
		3.9	Välisõpilaseks vormistamise käskkirja koostamine
		3.10 Eksmatrikuleerimise käskkirja koostamine
		3.11 Immatrikuleerimise käskkirja koostamine
		3.12 Lõpetamise käskkirja koostamine
		3.13 Ennistamise käskkirja koostamine 
		3.16 Käskkirja tühistamine
		3.17 Käskkirja andmete vaatamine
		3.18 Käskkirja andmete muutmine
		3.19 Immatrikuleerimise (vastuvõtt) käskkirja koostamine
		4.1	Tõendite otsing
		4.2	Õppuri tõendite nimekirja vaatamine
		4.3	Tõendi tellimine

DOK6 - HOIS_analyys_vastuvott.docx
		2.1	Klassifikaatorite importimine SAISist
		2.2	Konkursside importimine SAISist
		2.3	Konkursi otsing
		2.4	Konkursi andmete vaatamine
		2.5	Vastuvõtu avalduste importimine SAISist
		2.6	Vastuvõtu avalduste otsing
		2.7	Vastuvõtu avalduse andmete vaatamine
		2.8	Vastuvõtu avalduse laadimine csv failist
		2.9	Immatrikuleerimise käskkirja koostamine

DOK7 - HOIS_analyys_kasutajaoigused.docx
		2.1	Kasutaja otsing
		2.2	Kasutaja andmete sisestamine ja kasutajarolli haldamine
		3.1 Avalik kasutaja
		3.2 Õppur
	    3.3 Lapsevanem
	    3.4 Väline ekspert
	    3.5 Peaadministraator
	    3.6 Õpetaja
	    3.7 Administratiivne töötaja

		
DOK8 - HOIS_analyys_teated.docx
		2.1	Üldteate otsing
		2.2	Üldteate lisamine ja muutmine
		2.3	Üldteate vaatamine avalehel
		3.1	Teate otsing
		3.2	Teate saatmine
		3.3	Teate vaatamine ja teatele vastamine

DOK9 - HOIS_analyys_andmevahetus.docx
		Andmevahetuse EKISega
		-------------------------------------------
		2.1	Õppekäskkirjad
		2.2	Tõendid
		2.3	Lepingud
		
		Andmevahetus EHISega
		-------------------------------------------
		3.1 Õppekava
		3.2	Pedagoogide andmed
		3.3	Õppejõudude andmed
		3.4.1.1	Õppekoormuse muutmine
		3.4.1.2	Õppekava vahetamine
		3.4.1.3	Finantseerimisallika muutmine
		3.4.1.4	Õppevormi vahetamine
		3.4.1.5	Eksmatrikuleerimine
		3.4.1.6	Ennistamine 
		3.4.1.7	Akadeemilisele puhkusele lubamine
		3.4.1.8	Akadeemilise puhkuse katkestamine
		3.4.1.9	Akadeemilise puhkuse lõppemine
		3.4.1.10	Immatrikuleerimine 
		3.4.2.2	Õppekava täitmine
		3.4.2.3	Õppeasutuse lõpetamine
		3.5	EHISe andmevahetuse logi
		
		Andmevahetus SAIS-iga
		-------------------------------------------
		4.1	SAISi klassifikaatorid
		4.2	Konkursid
		4.3	Vastuvõtu avaldused
		
		Andmevahetus RTIP-iga
        -------------------------------------------
        6.1 Teenus Z_EMPLOEES
        6.2 Teenus tootajaPohiandmed
		
		Andmevahetus Kutseregistriga
        -------------------------------------------
        7.1          Teenus kutsetunnistus
        7.2          Teenus muutunudKutsestandardid


		
DOK10 - HOIS_analyys_opitulemused_paevikud.docx
		Päevikud ja protokollid kutseõppes
		-----------------------------------
		2.1	Päevikute otsing
		2.2	Päevikusse õppurite lisamine
		2.3	Päeviku kinnitamine
		2.4	Päeviku täitmine
		2.5 Päeviku kuvamine õppuri ja lapsevanema vaates
		2.6	Mooduli protokollid ja mooduli tulemuse sisestamine
		2.7.1	Praktika lepingute otsing
		2.7.2	Praktika lepingu sõlmimine
		2.7.3	Praktika päeviku koostamine ilma lepingu sõlmimiseta
		2.7.4	Praktika päevikute otsing administratiivse töötaja, õpetaja või õppuri töökohal
		2.7.5	Praktika päeviku täitmine - õppur
		2.7.6	Praktika päeviku täitmine – ettevõtte juhendaja
		2.7.7	Praktika päeviku täitmine – administratiivne töötaja, õpetaja
		3.1	Õpingukava koostamine
		3.2	Õpingukava otsing ja massiline kinnitamine
		4	Päevikud ja protokollid kõrgharidusõppes
		4.1	Päeviku ehk kuulajaskonna vaatamine ja tulemuste sisestamine
		4.2	Päeviku vahesoorituste sisestamine
		4.3	Protokolli sisestamine
		4.4	Protokollide otsing
		4.6	Praktika päevikud
		5	Õppetulemused ja õppekava täitmine
		5.1	Õppekava täitmise vaatamine kutseõppes
		5.2	Õppekava täitmise vaatamine kõrgharidusõppes
		5.3	Õppetulemuste vaatamine õppeaastate kaupa kutseõppes
		5.4	Õppetulemuste vaatamine õppeperioodide kaupa kõrgharidusõppes
		5.5	Õppetulemuste vaatamine sooritamise järjekorras kutseõppes
		5.6	Õppetulemuste vaatamine sooritamise järjekorras kõrgharidusõppes
		6.1	Kaitsmiskomisjon kutseõppes ja kõrgharidusõppes
        7.1 VÕTA arvestamine kõrgharidusõppes
        7.2 VÕTA arvestamine kutseõppes


DOK11 - HOIS_analyys_tunniplaan.docx	
		2.1	Tundide aegade sisestamine
		2.2	Tundide aegade otsing
		3	Õppetöögraafik
		4.1	Koormuste planeerimise koondvorm
		4.2	Koormuste sisestamine kutseõppes õpperühmade kaupa
		4.3	Koormuste vaatamine õpetajate kaupa kutseõppes
		4.4	Õppeaine koormuse sisestamine kõrgharidusõppes
		4.5	Koormuste sisestamine õpperühmade kaupa kõrgharidusõppes
		4.6	Koormuste sisestamine õpetajate kaupa kõrgharidusõppes
		4.7	Koormuste sisestamine õppeainete kaupa kõrgharidusõppes
		4.8	Aine-õpetaja paari  otsing
		5.3	Tunniplaani koostamine
		5.4	Sündmuste otsing
        5.5 Üksiksündmuse sisestamine
        5.7 Tunniplaani kuvamine

DOK12 - HOIS_analyys_paringud.docx
		2.1	Õppurid
		2.2	Õppurite statistika õppekavade lõikes
		2.3	Õppurite statistika perioodis
		2.4	Õppekava täitmine
		2.7	Õpetaja koormus (kõrg)
		
DOK13 - HOIS_analyys_oppetoetused_stipendiumid.docx
        2.1 Õppetoetuste tingimuste koostamine
        2.2 Õppetoetuste otsing – administratiivne töötaja
        2.3 Õppetoetuste ja taotluste vaatamine – õppur
        2.4 Õppetoetuse taotlemine
        2.5 Õppetoetuste taotluste otsing, kinnitamine ja staatuste määramine
        3.1 Stipendiumi tingimuste koostamine – administratiivne töötaja
        3.2 Stipendiumite otsing – administratiivne töötaja
        3.3 Stipendiumite ja taotluste vaatamine – õppur
        3.4 Stipendiumi taotlemine – õppur
        3.5 Stipendiumite taotluste otsing ja staatuste määramine – administratiivne töötaja
		3.6	Stipendiumi määramise käskkiri
		3.7	Stipendiumi maksmise lõpetamise käskkiri


MUU:	ID-kaardiga sisselogimine
		Mobiil-IDga sisselogimine
        Active Directory’ga isselogimine
        TAAT
        KRATT

	   

NB! Automaatteadete saatmiseks ÕISi on tekitatud kasutaja Hõis Automaatteade, palume seda mitte kustutada
	   

EELDUS: ver. 0.6.2/20180118
------------------------------------------------------
1. Serveris on installeeritud (opsüsteem Linux, nt CentOS Linux 7.2.x):
	   1. PostgreSQL v 9.5.x
	   2. Java Versioon vähemalt 1.8.144
	   3. Nginx Versioon: 1.10
	   4. Redis 3.2
	   5. Gradle 3.x
	   6. Node.js (viimane versioon)

2. Kasutajab omab kõik vajalikud ligipääsud ja salasõnad

3. Andmebaasi soovitatavad seadistused (vt nt http://pgtune.leopard.in.ua )
	   1. Võiks sisse lülitada andmebaasi päringute statistikat "pg_stat_statements": https://www.postgresql.org/docs/9.5/static/pgstatstatements.html
	   2. Andmebaasis võiks ära seadistada järgmised parameetrid:
			max_connections = 100
			shared_buffers = 256MB
			effective_cache_size = 768MB
			work_mem = 2621kB
			maintenance_work_mem = 64MB
			min_wal_size = 1GB
			max_wal_size = 2GB
			checkpoint_completion_target = 0.7
			wal_buffers = 7864kB
			default_statistics_target = 100


ANDMEBAASI INSTALLEERIMINE:
------------------------------------------------------

KIRJELDUS: olemasolev andmebaas "hois" täiendatakse. Andmebaasi skriptid asuvad "db" kaustas.
EELDUS: kasutaja teab andmebaasi asukohta ja andmebaasi peakasutaja salasõna, oskab kasutada "psql" käsku. Nginx serveris on seadistatud SSL

Andmebaasi installeerimiseks:
1. käivitada install20180202.sql skript, nt
   
   psql -h devhois -f install20180202.sql 2>&1 | tee log.txt
   
   , kus
   
   -h devhois - andmebaasi host, kus devhois on vastava serveri/hosti nimi, selle asemel võib panna ka IP aadressi. NB! kui skripti käivitamine toimub andmebaasi lokaalses masinas, siis -h parameetrit võib ära jätta
   -f install20180202.sql - install faili nimi
   log.txt - andmebaasi installeerimise logi fail
   
   Installeerimise käigus küsitakse andmebaasi peakasutaja salasõna ja viiakse andmebaasi vastavad muudatused sisse




RAKENDUSE INSTALLEERIMINE:
------------------------------------------------------
KIRJELDUS: vajalik kood asub githubis https://github.com/hariduspilv/oppeinfo 
EELDUS: 
	Backend:
		Java8
		Gradle
		yhendus redise serveriga(1 instance puhul saab kasutada muid lahenduse 'spring.session.store-type' m2rks6naks), kontrollimiseks saab kasutada käsku "redis-cli ping", vastus peab olema PONG
		
	Frontend:
		nodejs
		nginx
		nginx on confitud teatud urlil otse l2bi saatma (proxy) pärinugid backendi suunas
	
	SSL tugi
	ID-kaardi tugi (vt www.id.ee)
	
	Võimalik konfigureerimise näide: 
	1) proxy_backend.conf on kirjeldatud 3 serverit: 1 pordiga 80 ja 2 pordiga 443 (ssl). 
	2) Üks ssl server on mõeldud ID-kaardiga autentimiseks (näites idlogin.devhois), serveri kirjeldusse on lisatud ID-kaardiga autentimiseks vajalik juursertifikaat ja selle asukoht
		ssl_client_certificate /opt/hois/certs/id.crt;
	3) Pordiga 80 server on mõeldud EKISe veebiteenuste jaoks. Kuna HÕISi ja EKISe andmevahetus käib otse, siis meil on võimalik kirjeldada kust IP-lt täpsemalt saab pöörduda EKIS HÕISi poole, et nt edastada info käskkirjade kinnitamise kohta
	  (vt proxy_backend.conf'is järgmised read
	      location /hois_back/services/ekis {
				allow all;
				deny all;
				proxy_pass http://backend/hois_back/services/ekis;
			}
	  ), allow all peak olema allow EKIS_SERVER_IP, kus EKIS_SERVER_IP on EKISe serveri IP aadress või host

		
		
	proxy_backend.conf faili näide:
	------------------------------------------------------------
		
		proxy_cache_path /tmp keys_zone=classifier_cache:32k max_size=10m inactive=10m use_temp_path=off;

		server {
			listen       80;
			listen       [::]:80;
			server_name  devhois;
			location /hois_back/services/ekis {
				allow all;
				deny all;
				proxy_pass http://backend/hois_back/services/ekis;
			}
			location / {
				return 301 https://$host$request_uri;
			} 
		}

		server {
			listen 443;
			listen [::]:443;
				root /opt/hois/html;
				server_name devhois;
				ssl on;
				ssl_certificate /opt/hois/certs/nginx.crt;
				ssl_certificate_key /opt/hois/certs/nginx.key;
				ssl_protocols TLSv1 TLSv1.1 TLSv1.2;
				ssl_ciphers "ECDHE-RSA-AES256-GCM-SHA384";
				ssl_prefer_server_ciphers on;
				ssl_session_cache shared:SSL:10m;


			location /hois_back/ {
				proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
				proxy_set_header Host $http_host;
				proxy_redirect off;
				proxy_connect_timeout      240;
				proxy_send_timeout         240;
				proxy_read_timeout         240;
					client_max_body_size 100M;
				proxy_pass http://backend/hois_back/;
			}

			location = /hois_back/autocomplete/classifiers {
				add_header X-Cache-Status $upstream_cache_status;
				proxy_ignore_headers Cache-Control;
				proxy_ignore_headers Expires;
				proxy_cache classifier_cache;
				proxy_cache_lock on;
				proxy_cache_use_stale updating;
				proxy_cache_valid 10m;
				proxy_pass http://backend/hois_back/autocomplete/classifiers;
			}

			location = /hois_back/autocomplete/schools {
				add_header X-Cache-Status $upstream_cache_status;
				proxy_ignore_headers Cache-Control;
				proxy_ignore_headers Expires;
				proxy_cache classifier_cache;
				proxy_cache_lock on;
				proxy_cache_use_stale updating;
				proxy_cache_valid 10m;
				proxy_pass http://backend/hois_back/autocomplete/schools;
			}

			location ~ ^/hois_back/school/[0-9]+/logo$ {
				add_header X-Cache-Status $upstream_cache_status;
				proxy_ignore_headers Cache-Control;
				proxy_ignore_headers Expires;
				proxy_cache classifier_cache;
				proxy_cache_lock on;
				proxy_cache_use_stale updating;
				proxy_cache_valid 10m;
				proxy_pass http://backend/$uri;
			}
			
			location = /hois_back/classifierConnect/all {
				add_header X-Cache-Status $upstream_cache_status;
				proxy_ignore_headers Cache-Control;
				proxy_ignore_headers Expires;
				proxy_cache classifier_cache;
				proxy_cache_lock on;
				proxy_cache_use_stale updating;
				proxy_cache_valid 10m;
				proxy_pass http://backend/hois_back/classifierConnect/all;
			}



			gzip on;
			gzip_disable "msie6";

			gzip_vary on;
			gzip_proxied any;
			gzip_comp_level 6;
			gzip_buffers 16 8k;
			gzip_http_version 1.1;

			gzip_types application/json;
			
			client_max_body_size 100M;

		}

		server {
			listen 443;
			listen [::]:443;
			server_name idlogin.devhois;
			ssl on;
			ssl_certificate /opt/hois/certs/nginx.crt;
			ssl_certificate_key /opt/hois/certs/nginx.key;
			ssl_client_certificate /opt/hois/certs/id.crt;
			ssl_protocols TLSv1 TLSv1.1 TLSv1.2;
			ssl_verify_client on;
			ssl_session_cache off;
			ssl_verify_depth 2;
			#Enabled ciphers
			ssl_ciphers "ECDHE-RSA-AES256-GCM-SHA384";
			ssl_prefer_server_ciphers on;


			location / {
				expires -1;
				proxy_pass http://backend/hois_back/idlogin;
				proxy_set_header Host $http_host;
				proxy_set_header X-Real-IP $remote_addr;
				proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
				proxy_set_header SSL_CLIENT_VERIFY $ssl_client_verify;
				proxy_set_header SSL_CLIENT_CERT $ssl_client_cert;
				add_header 'Access-Control-Allow-Headers' 'Authorization';
				add_header 'Access-Control-Expose-Headers' 'Authorization';
				add_header 'Access-Control-Max-Age' 1;
			}
		}

		upstream backend {
			server devhois:8080 fail_timeout=0;
		}

		
	------------------------------------------------------------------------------------------------
				
		


PAIGALDUS (üks võimalus):
NB! XXX - frontendi server, nt devhoisfront
	YYY - backendi server, nt devhoisback
	Igal pool konfides peaks tegema vastavad muudatused
	
	1. Tekitada uus kaust, kuhu pannakse hois asjad peale, nt /opt/hois
	2. Laadida kood github'st ja pakkida see lahti hois kausta
	3. TAATi jaoks tekitada uus sertifikaat (võib kasutada ka olemasolevat) nt taat.crt ja sertiifikaadi privaatvõti nt taat.key. Privaatvõti peab olema  mitte krüpteeritud PKCS #8 formaadis
	4. Tekitada hois kausta application.properites fail (vt näidist application.properties) ja muuta järgmised parameetrid:
		1. spring.datasource.url - andmebaasi asukoht, vaikimisi lokaalne masin
		2. spring.datasource.username - kasutajanimi, kes pääseb ligi hois andmebaasile
		3. spring.datasource.password - eelnevalt sisestatud andmebaasi kasutaja salasõna
		4. spring.redis.host - redise asukoht, vaikimisi localhost
		5. spring.redis.port - redise port, vaikimisi 6379
		6. spring.mail.host - e-maili saatmise host, vaikimisi mail.neti.ee
		7. server.session.timeout - serveri timout sekundites
		8. hois.frontend.baseUrl - HÕISi frontend url, nt https://devhois/#/
		9. sais.endpoint - SAIS-i veebiteenuste pöördumise url kujul http://TURVASERVER6/cgi-bin/consumer_proxy 
		10. sais.client.xRoadInstance - HITSA x-tee keskkond (arendus e. ee-dev, test e. ee-test või live e. EE), vaikimisi ee-test
		11. sais.client.memberClass - HITSA nn memberClass vastavas keskkonaas (arenduses COM ja testis NGO), vaikimisi NGO
		12. sais.client.memberCode - HITSA reg. kood, vaikimisi 90005872
		13. sais.client.subsystemCode - HITSA allsüsteemi kood, vaikimisi generic-consumer
		14. sais.service.xRoadInstance - SAIS-i x-tee keskkond (arendus e. ee-dev, test e. ee-test või live e. EE), vaikimisi ee-test, peab olema sama mis sais.client.xRoadInstance
		15. sais.service.memberClass - SAIS-i nn memberClass vastavas keskkonnas, testis vaikimisi NGO
		16. sais.service.memberCode - SAIS-i reg. kood, vaikimisi 90005872
		17. sais.service.subsystemCode - SAIS-i allsüsteemi kood, vaikimisis sais2
		18. ehis.client.xRoadInstance - HITSA x-tee keskkond (arendus e. ee-dev, test e. ee-test või live e. EE), vaikimisi ee-test
		19. ehis.client.memberClass - HITSA nn memberClass vastavas keskkonaas (arenduses COM ja testis NGO), vaikimisi NGO
		20. ehis.client.memberCode - HITSA reg. kood, vaikimisi 90005872
		21. ehis.client.subsystemCode - HITSA allsüsteemi kood, vaikimisi generic-consumer
		22. ehis.service.xRoadInstance - EHISe x-tee keskkond (arendus e. ee-dev, test e. ee-test või live e. EE), vaikimisi ee-test, peab olema sama mis ehis.client.xRoadInstance
		23. ehis.service.memberClass - EHISe nn memberClass vastavas keskkonnas, testis vaikimisi GOV
		24. ehis.service.memberCode - EHISe reg. kood, vaikimisi 70000740
		25. ehis.service.subsystemCode - EHISe allsüsteemi kood, vaikimisis ehis
		26. ehis.user - päringu käivitaja kujul EE+ISIKUKOOD, nt EE38002240211
		27. ehis.endpoint - EHISe veebiteenuste pöördumise url kujul (EHISe veebiteenused hetkel realiseeritud vastu x-tee v6) http://TURVASERVER6/cgi-bin/consumer_proxy
		28. ekis.endpoint - EKISe veebiteenuste pöördumise koht
		29. hois.digidoc4j.testMode - digiallkirjastamine viis, vaikimisi true (testimine)
		30. rtip.client.xRoadInstance - HITSA x-tee keskkond (arendus e. ee-dev, test e. ee-test või live e. EE), vaikimisi ee-test
		31. rtip.client.memberClass - HITSA nn memberClass vastavas keskkonaas (arenduses COM ja testis NGO), vaikimisi NGO
		32. rtip.client.memberCode - HITSA reg. kood, vaikimisi 90005872
		33. rtip.client.subsystemCode - HITSA allsüsteemi kood, vaikimisi generic-consumer
		34. rtip.service.xRoadInstance - RTIP-i x-tee keskkond (arendus e. ee-dev, test e. ee-test või live e. EE), vaikimisi ee-test, peab olema sama mis rtip.client.xRoadInstance
		35. rtip.service.memberClass - RTIP-i nn memberClass vastavas keskkonnas, testis vaikimisi GOV
		36. rtip.service.memberCode - RTIP-i reg. kood, vaikimisi 70007340
		37. rtip.service.subsystemCode - RTIP-i allsüsteemi kood, vaikimisis sap
		38. rtip.user - päringu käivitaja kujul EE+ISIKUKOOD, nt EE38002240211
		39. kutseregister.client.xRoadInstance - HITSA x-tee keskkond (arendus e. ee-dev, test e. ee-test või live e. EE), vaikimisi ee-test
		40. kutseregister.client.memberClass - HITSA nn memberClass vastavas keskkonaas (arenduses COM ja testis NGO), vaikimisi NGO
		41. kutseregister.client.memberCode - HITSA reg. kood, vaikimisi 90005872
		42. kutseregister.client.subsystemCode - HITSA allsüsteemi kood, vaikimisi generic-consumer
		43. kutseregister.service.xRoadInstance - kutseregistri x-tee keskkond (arendus e. ee-dev, test e. ee-test või live e. EE), vaikimisi ee-test, peab olema sama mis rtip.client.xRoadInstance
		44. kutseregister.service.memberClass - kutseregistri nn memberClass vastavas keskkonnas, testis vaikimisi COM
		45. kutseregister.service.memberCode - kutseregistri reg. kood, vaikimisi 90006414
		46. kutseregister.service.subsystemCode - kutseregistri allsüsteemi kood, vaikimisis kutseregister
		47. kutseregister.user - päringu käivitaja kujul EE+ISIKUKOOD, nt EE38002240211
		48. mobileid.endpoint - Mobii-ID pöördumise koht, testis https://tsp.demo.sk.ee
		49. mobileid.serviceName - Mobiil-ID-ga autentimiseks kokkulepitud teenus, testis Testimine
		50. mobileid.messageToDisplay - Mobiil-ID-ga autentimisel kuvatav sõnum
		51. idp.entity_id - TAATi jaoks vajaliku entity nimi (kasutatakse Januses konfigureerimisel), nt http://mock-idp
		52. idp.private_key - TAATi jaoks vajaliku sertifikaadi võtme asukoht, nt /opt/hois/certs/taat.key
		53. idp.certificate - TAATi jaoks vajaliku sertifikaadi asukoht, nt /opt/hois/certs/taat.crt
		54. idp.clock_skew - TAATi ja HÕISe lubatud ajavahe sekundites
		55. idp.login_redirect - TAATi jaoks vajalik HÕISi url, kuhu kasutaja sisselogimiseks suunatakse, nt https://devhois.fujitsu.ee/login.html

    4. Tekitada hois kausta frontend.config.js ja muuta järgmised parameetrid:
		apiUrl - frontendi server, nt https://localhost/hois_back
		idCardLoginUrl - ID-kaardiga sisselogimiseks seadistatud server (vt proxy_backend.conf, host peab olema avaliku kasutaja jaoks nime järgi kättesaadav, soovitatav kasutada kehtivat sertifikaati, self-signed sertifikaadiga serveris võivad tekkida mõningad probleemid ID-kaardiga autentimisel), nt https://idlogin.devhois
		ekisUrl - EKISe lepingute, käskkirjade, tõendite asukoht, testimiseks kasutatakse https://kis-test.hm.ee/?wdsturi=3Dpage%3=Dview_dynobj%26pid%3D
		mobileIdInitialDelay - mobiil-ID sisselogimisel mitme millisekundi pärast esimest korda küsitakse (nt 5000)
		mobileIdPollInterval - mobiil-ID sisselogimisel pollimise intervaal millisekundites (nt 4000)
		mobileIdMaxPolls - mobiil-ID sisselogimisel mitu korda maksimaalselt pollitakse, nt 15
	5. Backendi ehitamiseka paigaldamiseks
		1. Teisendada kaasa pandud hois_back.jar /opt/hois kausta
		2. veenduda, et /opt/hois kaustas on olemas muudetud application.properties fail ja käivitada käsk "java -jar hois_back.jar", rakendus läheb käima.
    6. Frontendi ehitamiseks ja paigaldamiseks
		1. Navigeerida hois_front kausta ja kopeerida /opt/hois/frontend.config.js > app/config.js faili, nt
		   cp /opt/hois/frontend.config.js app/config.js
		2. Käivitada käsk "npm install"
		3. Käivitada käsk "bower install" või "bower install --force"
		4. Käivitada käsk "grunt build"  
		5. Käivitada käsk "rm -Rf /opt/hois/html/*" (nginxist vana seisu tühjendamiseks)
		6. Käivitada käsk "cp -r dist/. /opt/hois/html/" (kopeeritakse frontendi uus seis /opt/hois/html kausta)

TAATi seadistamine:
	1. Tekitada uus Connection, mille nimeks panna idp.entity_id parameetris toodud väärtus (nt http://mock-idp), liigiks valida SAML 2.0 IdP
	2. Metadata alajaotuses seadistada järgmised parameetrid:
		1. SingleSignOnService:0:Binding - urn:oasis:names:tc:SAML:2.0:bindings:HTTP-Redirect
		2. SingleSignOnService:0:Location - HÕISi logini asukoht, peab olema kujul https://host/hois_back/SingleSignOnService, nt https://devhois.fujitsu.ee/hois_back/SingleSignOnService
		3. certData - taat.crt faili sisu ilma BEGIN, END ja reavahdeta
		4. Muud parameetrid võib täita vastavalt vajadusele

Sisselogimine Active Directory (AD) kaudu:
	AD kaudu sisselogimise üheks eelduseks on turvalise kanali olemasolu HÕISi backendi ja õppeasutuse AD vahel, lisaks õppeasutuse AD sertifikaat peab olema lisatud java default keystore'sse. Täpsem kirjeldus asub "HOIS_analyys_sisselogimine_AD.docx" dokumendis
	
Usaldusväärsete sertifikaatide lisamine (vajalik x-tee6 https ühenduse jaoks). Antud tegevus tuleb korrata ka java versiooni uuendamisel või pärast käskluse update-ca-trust käivitamist:
		1. Rakendusserverisse tuleb lisada usaldusväärsete sertifikaatide hulka x-tee6 turvaserveri sertifikaat. Selleks tuleb käivitada järgmine käsk:
			keytool -importcert -alias XXX -keystore YYY -storepass ZZZ -file FFF
			, kus
			XXX - sertifikaadi alias, nt xtee6 vms
			YYY - usaldusväärsete sertifikaatide asukoht (cacerts), nt /etc/pki/ca-trust/extracted/java/cacerts
			ZZZ - cacerts salasõna, nt changeit
			FFF - sertifikaadi faili asukoht, nt /opt/hois/ssl/x-tee6.pem
		2. Peale sertifikaatide	lisamist tuleb hois_back.jar ueusti käivitada	
