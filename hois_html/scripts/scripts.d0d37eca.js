"use strict";function calculateSumsForFamilyBlock(a){angular.isArray(a)&&a.forEach(function(a){a.sum=[a.netSalary,a.pension,a.stateBenefit,a.otherIncome,a.unemployedBenefit].reduce(function(a,b){return isNaN(b)?a:a+b},0)})}angular.module("hitsaOis",["ngAnimate","ngAria","ngMessages","ngResource","ngRoute","ngSanitize","ngMaterial","pascalprecht.translate","md.data.table","lfNgMdFileInput","ngStorage","angular-cache"]).config(["$routeProvider",function(a){a.otherwise({redirectTo:"/"})}]).config(["$locationProvider",function(a){a.hashPrefix("")}]).config(["$translateProvider",function(a){a.useStaticFilesLoader({prefix:"i18n/",suffix:".json"}),a.preferredLanguage("et"),a.fallbackLanguage("et"),a.useSanitizeValueStrategy("escapeParameters")}]).config(["$compileProvider",function(a){a.aHrefSanitizationWhitelist(/^\s*(https?|ftp|mailto|tel|file|blob|data):/),a.debugInfoEnabled(!1)}]).config(["$httpProvider",function(a){a.defaults.withCredentials=!0,a.defaults.headers.common["X-Requested-With"]="XMLHttpRequest",a.defaults.xsrfCookieName="XSRF-TOKEN",a.defaults.xsrfHeaderName="X-XSRF-TOKEN"}]).config(["$resourceProvider",function(a){a.defaults.actions.update={method:"PUT",params:{id:"@id"}},a.defaults.actions["delete"]={method:"DELETE",params:{id:"@id",version:"@version"}}}]).config(["$mdThemingProvider",function(a){a.theme("default").primaryPalette("blue",{"default":"900"}).accentPalette("pink").backgroundPalette("grey")}]).config(["$httpProvider",function(a){a.interceptors.push(["$injector",function(a){return a.get("AuthInterceptor")}]),a.interceptors.push(["Session","$rootScope",function(a,b){return{response:function(a){var c=a.config.url;return void 0!==c.indexOf&&-1===c.indexOf("session.timing.out.dialog.html")&&-1===c.indexOf("session.timed.out.dialog.html")&&-1===c.indexOf("/logout")&&b.restartTimeoutDialogCounter(),a}}}]),a.interceptors.push(["$q","$rootScope","$timeout",function(a,b,c){function d(a,d){function f(){b.$emit("backendBusy",{busy:d})}-1!==e.indexOf(a.method)&&(d?f():c(f,200))}var e=["POST","PUT","DELETE"];return{request:function(a){return d(a,!0),a},response:function(a){return d(a.config,!1),a},responseError:function(b){return d(b.config,!1),a.reject(b)}}}])}]).config(["CacheFactoryProvider",function(a){angular.extend(a.defaults,{maxAge:36e5,deleteOnExpire:"passive"})}]).run(["$rootScope","busyHandler",function(a,b){a.$on("backendBusy",function(a,c){b.handle(c)})}]),angular.module("hitsaOis").controller("SimpleListController",["$q","$route","$scope","Classifier","QueryUtils",function(a,b,c,d,e){c.auth=b.current.locals.auth;var f=b.current.locals.clMapping,g=f?d.valuemapper(f):void 0;e.createQueryForm(c,b.current.locals.url,b.current.locals.params,g?g.objectmapper:void 0),g?a.all(g.promises).then(c.loadData):c.loadData()}]),angular.module("hitsaOis").controller("MainController",["$window","$scope","$translate","$location","Menu","AuthService","$mdSidenav","$mdMedia","$mdUtil","$rootScope","$mdDateLocale","$filter","$timeout","USER_ROLES","dialogService","config","$httpParamSerializer","Session","$mdDialog","ArrayUtils",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t){function u(){m(function(){g("left").close()})}function v(){m(function(){g("left").open()})}function w(){return d.path()}function x(){i.animateScrollTo(P,0,200)}function y(){e.selectPage(null,null),d.path("/")}function z(){M.autoFocusContent&&(A(),M.autoFocusContent=!1)}function A(a){a&&a.preventDefault(),m(function(){O.focus()},90)}function B(a){return e.isPageSelected(a)}function C(){var a=i.debounce(function(){g("left").isOpen()?g("left").close():g("left").open()},300);return a}function D(a){var b=!1,c=e.openedSection;return c===a?b=!0:a.children&&a.children.forEach(function(a){a===c&&(b=!0)}),b}function E(a){return e.isSectionSelected(a)}function F(a){e.toggleSelectSection(a)}function G(a){var b=a.substring(a.indexOf("#"),a.length);Q.push(b)}function H(b){var c=Q.pop(),d=c||b;R=!0,a.location.href=d}function I(){s.show({controller:["$scope","$http",function(a,b){a.refresh=function(){b.get(p.apiUrl+"/refresh"),s.hide()}}],templateUrl:"login/session.timing.out.dialog.html",parent:angular.element(document.body),clickOutsideToClose:!1})}function J(){s.show({controller:["$scope","$location",function(a,b){a.ok=function(){j.loggedOut(),f.postLogout(),b.path("/"),s.hide()}}],templateUrl:"login/session.timed.out.dialog.html",parent:angular.element(document.body),clickOutsideToClose:!1})}function K(){angular.isObject(r.timeoutDialog)&&m.cancel(r.timeoutDialog),angular.isObject(r.timeout)&&m.cancel(r.timeout)}function L(a,b){return function(){Date.now()-a<b&&I()}}j.state={};var M=this;b.$mdMedia=h,b.toggleLeft=C("left"),b.lockLeft=!0,b.isLeftOpen=function(){return g("left").isOpen()},b.shouldLeftBeOpen=h("gt-sm"),b.changeLanguage=function(a){c.use(a)},b.currentLanguage=function(){return c.use()},j.currentLanguageNameVariable=function(){switch(b.currentLanguage()){case"en":return"nameEn";case"et":return"nameEt";case"ru":return"nameRu";default:return"nameEt"}};var N=function(a,b){return angular.isObject(b)?b[a]||b.nameEt:void 0};b.currentLanguageNameField=function(a){var c=b.currentLanguageNameVariable();return 0===arguments.length?c:angular.isArray(a)?a.map(function(a){return N(c,a)}).join("; "):N(c,a)},j.currentLanguageNameField=b.currentLanguageNameField,b.leftSideNavToggle=function(){g("left").toggle()},b.leftSideNavSelect=function(a){d.path(a),g("left").close()},b.Menu=e,b.path=w,b.goHome=y,b.openMenu=v,b.closeMenu=u,b.isSectionSelected=D,b.scrollTop=x,j.$on("$locationChangeSuccess",z);var O=document.querySelector("[role='main']"),P=O.querySelector("md-content[md-scroll-y]");b.focusMainContent=A,Object.defineProperty(j,"relatedPage",{get:function(){return null},set:angular.noop,enumerable:!0,configurable:!0}),j.redirectToUrl=function(a){d.path(a),m(function(){j.relatedPage=null},100)},this.isOpen=E,this.isSelected=B,this.toggleOpen=F,this.autoFocusContent=!1,j.state.userRoles=n,j.isAuthorized=f.isAuthorized,j.setCurrentUser=function(a){j.state.currentUser=a},j.$on("$translateChangeSuccess",function(a,b){"et"===b.language?(k.months=["jaanuar","veebruar","märts","aprill","mai","juuni","juuli","august","september","oktoober","november","detsember"],k.shortMonths=["jaan","veebr","märts","apr","mai","juuni","juuli","aug","sept","okt","nov","dets"],k.days=["pühapäev","esmaspäev","teisipäev","kolmapäev","neljapäev","reede","laupäev"],k.shortDays=["P","E","T","K","N","R","L"],k.firstDayOfWeek=1,k.formatDate=function(a){if(angular.isDefined(a)){var b=moment(a);if(b.isValid())return b.format("DD.MM.YYYY")}return null},k.parseDate=function(a){if(angular.isDefined(a)){var b=moment(a,"DD.MM.YYYY");if(b.isValid())return b.toDate()}return new Date(NaN)}):(k.months=["January","February","March","April","May","June","July","August","September","October","November","December"],k.shortMonths=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],k.days=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],k.shortDays=["S","M","T","W","T","F","S"],k.firstDayOfWeek=0,k.formatDate=function(a){if(angular.isDefined(a)){var b=moment(a);return b.isValid()?b.format("M/D/YYYY"):null}return null},k.parseDate=function(a){if(angular.isDefined(a)){var b=moment(a,"M/D/YYYY");return b.isValid()?b.toDate():new Date(NaN)}return new Date(NaN)})});var Q=[],R=!1;j.replaceLastUrl=function(a,b){var c=Q.pop();return angular.isDefined(b)&&b(c)===!1?void Q.push(c):void Q.push(a)},j.removeLastUrlFromHistory=function(a){var b=Q.pop();angular.isDefined(a)&&!a(b)&&Q.push(b)},j.previosFormIsNewForm=function(){if(t.isEmpty(Q))return!1;var a=Q[Q.length-1];return a?a.indexOf("new")===a.length-3:!1},j.$on("$locationChangeSuccess",function(a,b,c){b===c||R||-1!==b.indexOf("_noback")||G(c.replace(/(\?_menu)$/,"")),R=!1}),j.back=function(a,b,c){angular.isDefined(b)&&b.$dirty===!0?o.confirmDialog({prompt:c||"main.messages.confirmFormDataNotSaved"},function(){H(a)}):H(a)},j.excel=function(a,b){return p.apiUrl+"/"+a+(b?"?"+q(b):"")},j.restartTimeoutDialogCounter=function(){if(K(),f.isAuthenticated()){var b=1e3*r.timeoutInSeconds,c=b-1e3*p.timeoutDialogBeforeTimeoutInSeconds;if(c>0){var d=Date.now();r.timeoutDialog=m(function(){a.requestAnimationFrame(L(d,b))},c),r.timeout=m(function(){s.hide(),J()},b)}}}}]).filter("nospace",function(){return function(a){return a?a.replace(/ /g,""):""}}).filter("encodeURIComponent",function(){return function(a){return window.encodeURIComponent(a)}}),angular.module("hitsaOis").controller("ApplicationController",["$scope","dialogService","oisFileService","QueryUtils","message","$location","$route","DataUtils","ArrayUtils","$q","Curriculum","Classifier",function(a,b,c,d,e,f,g,h,i,j,k,l){function m(b){h.convertStringToDates(b,["startDate","endDate"]),angular.isArray(b.plannedSubjects)&&b.plannedSubjects.forEach(function(a){angular.isArray(a.equivalents)&&(a.subjectsSelected=a.equivalents.map(function(a){return a.subject}))}),angular.extend(a.application,b)}function n(b,c){a.isCreate&&(a.application.oldFin=b.fin,a.application.oldFinSpecific=b.finSpecific),a.application.newFin="FINALLIKAS_RE"===b.fin?"FINALLIKAS_REV":"FINALLIKAS_RE",c.resolve()}function o(b,c){a.isCreate&&(a.application.oldStudyForm=b.studyForm),c.resolve()}function p(b,c){function d(){var b,c=a.application.newCurriculumVersion,d=c?e.find(function(a){return a.id===c.id}):void 0,g=angular.isObject(d)?!d.isVocational:a.auth.school.higher,h=angular.isObject(d)?d.isVocational:a.auth.school.vocational;b=d&&angular.isString(d.studyForm)?[d.studyForm]:f.filter(function(a){return g&&a.higher||h&&a.vocational}).map(function(a){return a.code}),a.allowedStudyForms=b}var e=k.queryVersions({valid:!0});a.isCreate&&(a.application.oldStudyForm=b.studyForm,a.application.oldCurriculumVersion=b.curriculumVersion);var f=l.queryForDropdown({mainClassCode:"OPPEVORM"});a.newCurriculumVersionSelected=function(){var b=e.find(function(b){return b.id===a.application.newCurriculumVersion.id});angular.isObject(b)&&f.$promise.then(function(){a.application.newStudyForm=b.studyForm,d()})},e.$promise.then(function(e){a.curriculumVersions=e.filter(function(a){return a.id!==b.curriculumVersion.id}),f.$promise.then(function(){d(),c.resolve()})})}function q(b,c){a.isCreate&&(a.application.isPeriod=!0),a.studyPeriods=d.endpoint("/autocomplete/studyPeriods").query({},c.resolve),a.curriculumVersion=b.curriculumVersion}function r(b){h.convertStringToDates(a.application.academicApplication.directiveStudent,["startDate","endDate"]),a.studyPeriods=d.endpoint("/autocomplete/studyPeriods").query({},b.resolve)}function s(b){a.isAbroadChanged=function(){a.application.isAbroad?a.application.ehisSchool=void 0:(a.application.abroadSchool=void 0,a.application.country=void 0)},a.plannedSubjectLength=function(){return angular.isArray(a.application.plannedSubjects)?a.application.plannedSubjects.length:0},a.addPlannedSubjectRow=function(){angular.isArray(a.application.plannedSubjects)||(a.application.plannedSubjects=[]),a.application.plannedSubjects.push({equivalents:[]})},a.subjectsSelected=function(a){if(angular.isArray(a.subjectsSelected)){var b=[];a.subjectsSelected.forEach(function(c){for(var d=!1,e=0;e<a.equivalents.length&&!d;e++){var f=a.equivalents[e];f.subject===c&&(b.push(f),d=!0)}d||b.push({subject:c})}),a.equivalents=b}else a.equivalents=[]},a.studentEhisSchool=g.current.locals.auth.school.ehisSchool,a.isCreate&&(a.application.isPeriod=!0,a.application.isAbroad=!1),a.studentSubjects=d.endpoint("/students/"+a.application.student.id+"/subjects").query(),a.studyPeriods=d.endpoint("/autocomplete/studyPeriods").query(),j.all([a.studentSubjects.$promise,a.studyPeriods.$promise]).then(b.resolve)}function t(a){a.resolve()}function u(b,c){var f=j.defer();"AVALDUS_LIIK_AKAD"===b||"AVALDUS_LIIK_FINM"===b||"AVALDUS_LIIK_OVORM"===b||"AVALDUS_LIIK_OKAVA"===b?d.endpoint("/students").get({id:c},function(a){"AVALDUS_LIIK_AKAD"===b?q(a,f):"AVALDUS_LIIK_FINM"===b?n(a,f):"AVALDUS_LIIK_OVORM"===b?o(a,f):"AVALDUS_LIIK_OKAVA"===b&&p(a,f)}):"AVALDUS_LIIK_AKADK"===b?a.isCreate?d.endpoint("/applications/student/"+c+"/validAcademicLeave").search(function(b){angular.isObject(b)&&angular.isNumber(b.id)?(a.application.academicApplication=b,r(f)):f.reject("application.messages.academicLeaveApplicationNotfound")}):r(f):"AVALDUS_LIIK_VALIS"===b?s(f):"AVALDUS_LIIK_EKSMAT"===b&&t(f),f.promise.then(function(){a.applicationEditView=!0;var b=a.application.type.substring(a.application.type.lastIndexOf("_")+1).toLowerCase();a.templateUrlByType="application/templates/application.type."+b+"."+(a.isView?"view":"edit")+".html"},function(b){e.error(b),a.applicationEditView=!1})}var v=d.endpoint("/applications");a.removeFromArray=i.remove,a.auth=g.current.locals.auth,a.isCreate=g.current.locals.isCreate,a.isView=g.current.locals.isView,a.now=new Date,a.applicationEditView=!1,a.application={files:[],status:"AVALDUS_STAATUS_KOOST"};var w=g.current.locals.entity;angular.isDefined(w)&&m(w),angular.isDefined(g.current.params.student)&&angular.isDefined(g.current.params.type)&&(a.application.type=g.current.params.type,d.endpoint("/autocomplete/students?id="+g.current.params.student).get({},function(b){b&&1===b.totalElements&&(a.application.student=b.content[0])})),a.studyPeriodView=function(b){if(angular.isArray(a.studyPeriods)&&angular.isNumber(b))for(var c=0;c<a.studyPeriods.length;c++)if(a.studyPeriods[c].id===b)return a.currentLanguageNameField(a.studyPeriods[c])},a.subjectsListView=function(b){if(angular.isDefined(b)&&angular.isArray(b.subjectsSelected)&&angular.isArray(a.studentSubjects)){var c=[];return a.studentSubjects.forEach(function(d){-1!==b.subjectsSelected.indexOf(d.id)&&c.push(a.currentLanguageNameField(d))}),c.join(", ")}return""},a.applicationTypeChange=function(){a.application.student=void 0,"AVALDUS_LIIK_AKAD"===a.application.type?a.studentSearchCriteria={active:!0,nominalStudy:!0}:"AVALDUS_LIIK_AKADK"===a.application.type?a.studentSearchCriteria={active:!0,academicLeave:!0}:"AVALDUS_LIIK_VALIS"===a.application.type?a.studentSearchCriteria={studying:!0,higher:!0}:"AVALDUS_LIIK_OVORM"===a.application.type?a.studentSearchCriteria={studying:!0,higher:!0}:a.studentSearchCriteria={studying:!0}},a.$watch("application.student",function(b){angular.isObject(b)&&(a.isCreate?d.endpoint("/applications/student/"+b.id+"/applicable").search(function(c){angular.isObject(c[a.application.type])&&c[a.application.type].isAllowed===!0?u(a.application.type,b.id):e.error(c[a.application.type].reason)}):u(a.application.type,b.id))}),a.openAddFileDialog=function(){b.showDialog("application/file.add.dialog.html",function(b){b.addedFiles=a.application.files},function(b){var d=b.data;c.getFromLfFile(d.file[0],function(b){d.oisFile=b,a.application.files.push(d)})})},a.getUrl=c.getUrl,a.isStudentRepresentative=function(){return angular.isObject(a.auth)&&angular.isObject(a.application.student)&&a.auth.student===a.application.student.id&&a.auth.isParent()},a.submit=function(){d.endpoint("/applications/"+a.application.id+"/submit/").put().$promise.then(function(b){e.info("application.messages.submitted"),a.auth.isAdmin()||a.isView?m(b):f.url("/applications/"+a.application.id+"/view?_noback")})["catch"](angular.noop)},a.reject=function(){b.showDialog("application/reject.dialog.html",null,function(b){d.endpoint("/applications/"+a.application.id+"/reject/").put({reason:b.rejectReason}).$promise.then(function(a){e.info("application.messages.rejected"),m(a)})["catch"](angular.noop)})},a.save=function(){if(a.applicationForm.$setSubmitted(),a.applicationForm.$valid){var b=new v(a.application);angular.isDefined(a.application.id)?b.$update().then(function(){e.info("main.messages.update.success"),m(b),a.applicationForm.$setPristine()})["catch"](angular.noop):b.$save().then(function(){e.info("main.messages.create.success"),f.url("/applications/"+b.id+"/edit?_noback")})["catch"](angular.noop)}},a["delete"]=function(){b.confirmDialog({prompt:"application.deleteconfirm"},function(){var b=new v(a.application);b.$delete().then(function(){e.info("main.messages.delete.success"),a.auth.isStudent()?f.path("/applications/student"):f.path("/applications")})["catch"](angular.noop)})}}]),angular.module("hitsaOis").config(["$routeProvider","USER_ROLES",function(a,b){a.when("/applications",{templateUrl:"application/application.list.html",controller:"SimpleListController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}],clMapping:function(){return{type:"AVALDUS_LIIK",status:"AVALDUS_STAATUS"}},params:function(){return{order:"-inserted"}},url:function(){return"/applications"}},data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_AVALDUS]}}).when("/applications/new",{templateUrl:"application/application.html",controller:"ApplicationController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}],isCreate:function(){return!0}},data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_AVALDUS]}}).when("/applications/:id/:action",{templateUrl:function(a){return"edit"===a.action?"application/application.html":"application/application.view.html"},controller:"ApplicationController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}],entity:["QueryUtils","$route",function(a,b){return a.endpoint("/applications").get({id:b.current.params.id}).$promise}],isView:["$route",function(a){return"view"===a.current.params.action}]},data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_AVALDUS]}})}]),angular.module("hitsaOis").controller("ApplicationStudentController",["$scope","$route",function(a,b){a.auth=b.current.locals.auth;var c=b.current.locals.auth.student;a.studentApplication={type:b.current.params.type,student:{id:c},files:[],status:"AVALDUS_STAATUS_KOOST"}}]),angular.module("hitsaOis").controller("ApplicationStudentListController",["$scope","$location","$route","$q","QueryUtils","Classifier",function(a,b,c,d,e,f){a.auth=c.current.locals.auth;var g=c.current.locals.auth.student,h=f.valuemapper({type:"AVALDUS_LIIK",status:"AVALDUS_STAATUS"});e.createQueryForm(a,"/students/"+g+"/applications",{order:"type."+a.currentLanguageNameField()},h.objectmapper),d.all(h.promises).then(a.loadData),a.auth.isParent()||(a.applicationTypesApplicable=e.endpoint("/applications/student/"+g+"/applicable").search(),a.applicationTypes=f.queryForDropdown({mainClassCode:"AVALDUS_LIIK"}))}]),angular.module("hitsaOis").config(["$routeProvider","USER_ROLES",function(a,b){a.when("/applications/student",{templateUrl:"application/student/application.student.list.html",controller:"ApplicationStudentListController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}]},data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_AVALDUS]}}).when("/applications/student/new/:type",{templateUrl:"application/student/application.student.new.html",controller:"ApplicationStudentController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}],isCreate:function(){return!0}},data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_AVALDUS]}})}]),angular.module("hitsaOis").controller("AcademicCalendarController",["$scope","$route","QueryUtils",function(a,b,c){a.auth=b.current.locals.auth,a.schoolId=void 0===a.auth?b.current.params.schoolId:a.auth.school.id,a.data=c.endpoint("/academicCalendar/"+a.schoolId).search()}]).controller("AcademicCalendarSchoolListController",["$scope","School","$location",function(a,b,c){a.schools=b.getSchoolsWithLogo(),a.openSchoolAcademicCalendar=function(a){c.path("academicCalendar/"+a)}}]),angular.module("hitsaOis").config(["$routeProvider",function(a){a.when("/academicCalendar/:schoolId?",{templateUrl:"academicCalendar/academic.calendar.view.html",controller:"AcademicCalendarController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}]}}).when("/academicCalendars",{templateUrl:"academicCalendar/academic.calendar.school.list.html",controller:"AcademicCalendarSchoolListController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}]}})}]),angular.module("hitsaOis").controller("BuildingEditController",["dialogService","message","$location","$route","$scope","QueryUtils",function(a,b,c,d,e,f){var g=d.current.params.id,h="/buildings",i=f.endpoint(h);g?e.record=i.get({id:g}):e.record=new i({}),e.update=function(){return e.buildingForm.$setSubmitted(),e.buildingForm.$valid?void(e.record.id?e.record.$update().then(b.updateSuccess)["catch"](angular.noop):e.record.$save().then(function(){b.info("main.messages.create.success"),c.url(h+"/"+e.record.id+"/edit")})["catch"](angular.noop)):void b.error("main.messages.form-has-errors")},e["delete"]=function(){a.confirmDialog({prompt:"building.deleteconfirm"},function(){e.record.$delete().then(function(){b.info("main.messages.delete.success"),c.url("/rooms/search")})["catch"](angular.noop)})}}]),angular.module("hitsaOis").config(["$routeProvider","USER_ROLES",function(a,b){a.when("/buildings/new",{templateUrl:"building/building.edit.html",controller:"BuildingEditController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}]},data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_HOONERUUM]}}).when("/buildings/:id/edit",{templateUrl:"building/building.edit.html",controller:"BuildingEditController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}]},data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_HOONERUUM]}})}]),angular.module("hitsaOis").controller("HomeController",["$scope","School","$location",function(a,b,c){a.schools=b.getSchoolsWithLogo(),a.openSchoolCurriculumSearch=function(a){c.path("curriculums/"+a)}}]).controller("AuthenticatedHomeController",["$rootScope","$scope","AUTH_EVENTS","AuthService","QueryUtils","$resource","config","Session",function(a,b,c,d,e,f,g,h){function i(){b.loadGeneralMessages(),b.loadUnreadMessages(),j(),k(),l()}function j(){-1!==["ROLL_A","ROLL_O"].indexOf(h.roleCode)?e.endpoint("/absences/hasUnaccepted").search().$promise.then(function(a){b.hasUnacceptedAbsences=a.hasUnaccepted}):b.hasUnacceptedAbsences=void 0}function k(){-1!==["ROLL_A","ROLL_O"].indexOf(h.roleCode)?e.endpoint("/journals/unconfirmedJournalsInfo").search().$promise.then(function(a){b.unconfirmedJournals={count:a.unconfirmedJournalCount,anyFinished:a.hasEndedUnconfirmedJournals}}):b.unconfirmedJournals=void 0}function l(){-1!==["ROLL_A"].indexOf(h.roleCode)?b.expiringOccupationStandards=e.endpoint("/curriculumOccupation/expiringOccupationStandards").query():b.expiringOccupationStandards=void 0}b.criteria={size:5,page:1,order:"inserted, title, id"},b.generalmessages={},b.loadGeneralMessages=function(){var a=e.getQueryParams(b.criteria);b.generalmessages.$promise=e.endpoint("/generalmessages/show").search(a,function(a){b.generalmessages.content=a.content,b.generalmessages.totalElements=a.totalElements})},b.unreadMessageCriteria={size:5,page:1,order:"-inserted"},b.unreadMessages={},b.loadUnreadMessages=function(){var a=["ROLL_P","ROLL_L","ROLL_O","ROLL_T","ROLL_A"];if(b.showUnreadMessages=-1!==a.indexOf(h.roleCode),b.showUnreadMessages){var c=e.getQueryParams(b.unreadMessageCriteria);b.unreadMessages.$promise=e.endpoint("/message/received/mainPage").search(c,function(a){b.unreadMessages.content=a.content,b.unreadMessages.totalElements=a.totalElements})}},b.readMessage=function(b){b.clicked=!b.clicked,b.isRead||f(g.apiUrl+"/message/"+b.id).update(null).$promise.then(function(){b.isRead=!0,e.endpoint("/message/received/new").get().$promise.then(function(b){a.unreadMessages=b.unread})})},b.openCloseDetails=function(a){a.clicked=!a.clicked},d.isAuthenticated()&&i(),b.$on(c.loginSuccess,i),b.$on(c.userChanged,i);var m=3;b.numberOfOccupationStandards=m,b.toggleNumberOfOccupationStandards=function(){b.numberOfOccupationStandards=b.numberOfOccupationStandards?void 0:m}}]).controller("StudentHomeController",["$scope","QueryUtils","Session","AUTH_EVENTS",function(a,b,c,d){function e(){c.studentId?(a.sessionStudentId=c.studentId,b.endpoint("/journals/studentJournalTasks/").search({studentId:c.studentId}).$promise.then(function(b){g(),h(b.tasks.reverse()),a.testTaskTypes=["SISSEKANNE_H","SISSEKANNE_L","SISSEKANNE_E","SISSEKANNE_I"]}),a.studentAbsences=b.endpoint("/journals/studentJournalAbsences/").query({studentId:c.studentId}),a.lastResults=b.endpoint("/journals/studentJournalLastResults/").query({studentId:c.studentId}),a.declaration="ROLL_L"===c.roleCode?void 0:b.endpoint("/declarations/current").get()):(a.sessionStudentId=null,a.tasks=[],a.studentAbsences=[],a.lastResults=[])}function f(){e()}function g(){var b,c;b=new Date,b.setHours(0,0,0,0),c=new Date,c.setDate(b.getDate()+1),c.setHours(0,0,0,0),a.todaysDate=b,a.tomorrowsDate=c}function h(b){a.tasks={todayTasks:[],tomorrowTasks:[],laterTasks:[]};for(var c=0;c<b.length;c++){var d=new Date(b[c].date);d.setHours(0,0,0,0),d.getTime()===a.todaysDate.getTime()?a.tasks.todayTasks.push(b[c]):d.getTime()===a.tomorrowsDate.getTime()?a.tasks.tomorrowTasks.push(b[c]):d>a.tomorrowsDate&&a.tasks.laterTasks.push(b[c])}}e(),a.$on(d.userChanged,f)}]),angular.module("hitsaOis").config(["$routeProvider",function(a){a.when("/",{templateUrl:"home/home.html",controller:"HomeController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}]}})}]),angular.module("hitsaOis").controller("LoginController",["message","$rootScope","$scope","AuthService","AUTH_EVENTS","$location","config","$mdDialog","$timeout","ArrayUtils","PUBLIC_ROUTES","$route","QueryUtils",function(a,b,c,d,e,f,g,h,i,j,k,l,m){function n(a){angular.isObject(a)&&"ROLL_V"!==a.roleCode&&m.endpoint("/message/received/new").get().$promise.then(function(a){b.unreadMessages=a.unread}),angular.isObject(a)&&angular.isObject(a.school)?b.state.logo=g.apiUrl+"/school/"+a.school.id+"/logo":b.state.logo="",angular.isObject(a)&&angular.isNumber(a.user)?b.state.userWorkplace=a.user:b.state.userWorkplace=null}function o(a){c.hideDialog&&h.hide(),a?(b.$broadcast(e.loginSuccess),b.setCurrentUser(a),n(a)):(b.setCurrentUser(null),n(null),l.current&&j.contains(k,l.current.originalPath)||f.path("/"))}function p(){b.$broadcast(e.loginFailed),f.path("/"),a.error("main.login.error")}function q(a){c.jwt=a.jwt,a.data.errorCode===t?(p(),c.showMessage("main.login.mobileid.notMobileIdUser")):a.data.errorCode?p():a.data.challengeID?(c.showMobileId(a.data.challengeID),c.mobileIdPolls=0,i(s,g.mobileIdInitialDelay)):p()}function r(a){"USER_AUTHENTICATED"===a.status?(c.hideDialog=!1,h.hide(),d.login().then(o,p)):"OUTSTANDING_TRANSACTION"===a.status?(c.mobileIdPolls++,c.mobileIdPolls<g.mobileIdMaxPolls&&i(s,g.mobileIdPollInterval)):(console.log("mobileIdStatus: "+a.status),h.hide(),p())}function s(){d.pollMobileIdStatus(c.jwt).then(r,p)}var t=301;b.loggedOut=function(){b.setCurrentUser(null),n(null)};var u=function(){c.hideDialog=!1;var a=f.search()._code;a?d.login({Authorization:"Bearer "+a}).then(o,p):d.login().then(o,p)},v=function(a){c.hideDialog=!1,d.loginLdap(a).then(o,p)},w=function(a){d.loginMobileId(a).then(q,p)};u(),b.$on(e.reAuthenticate,function(){u()}),c.logout=function(){d.logout()["finally"](function(){b.loggedOut(),f.path("/")})},c.changeUser=function(){d.changeUser(b.state.userWorkplace).then(function(a){angular.isObject(a)?(n(a),b.setCurrentUser(a),f.path("/"),b.$broadcast(e.userChanged)):(b.loggedOut(),f.path("/"))})},c.showLogin=function(){h.show({controller:["$scope","School","$localStorage","config",function(a,c,d,e){c.getLdap().$promise.then(function(c){a.schools=c,a.schools.sort(function(a,c){return b.currentLanguageNameField(a).localeCompare(b.currentLanguageNameField(c))})}),a.credentials={},d.ldapschool&&(a.credentials.school=d.ldapschool),a.mobilenumber="372",a.cancel=function(){h.hide()},a.currentLanguageNameField=b.currentLanguageNameField,a.login=function(){a.userLoginForm.$setSubmitted(),a.userLoginForm.$valid&&a.credentials.school&&a.credentials.username&&a.credentials.password&&(d.ldapschool=a.credentials.school,v(a.credentials))},a.idCardLoginUrl=e.idCardLoginUrl,a.mIdLogin=function(){a.mobilenumber&&w(a.mobilenumber)}}],templateUrl:"login/login.dialog.html",parent:angular.element(document.body),clickOutsideToClose:!0})},c.showMobileId=function(a){h.show({controller:["$scope",function(b){b.challengeID=a}],templateUrl:"login/m-id.login.dialog.html",parent:angular.element(document.body),clickOutsideToClose:!1})},c.showMessage=function(a){h.show({controller:["$scope",function(b){b.message=a}],templateUrl:"login/message.login.dialog.html",parent:angular.element(document.body),clickOutsideToClose:!0})}}]),angular.module("hitsaOis").controller("CertificateSearchController",["$scope","$sessionStorage","Classifier","DataUtils","QueryUtils","$q","$route","CertificateType","CertificateUtil",function(a,b,c,d,e,f,g,h,i){a.auth=g.current.locals.auth;var j=c.valuemapper({type:"TOEND_LIIK",status:"TOEND_STAATUS"});e.createQueryForm(a,"/certificate",{order:"type."+a.currentLanguageNameField()},j.objectmapper),d.convertStringToDates(a.criteria,["insertedFrom","insertedThru"]),a.auth.isStudent()&&(a.afterLoadData=function(b){a.tabledata.content=b.content,a.tabledata.totalElements=b.totalElements,j.objectmapper(b.content)},a.certificateTypes=c.queryForDropdown({mainClassCode:"TOEND_LIIK",filterValues:[h.TOEND_LIIK_MUU]}),e.endpoint("/certificate/student/status").get({id:a.auth.student}).$promise.then(function(b){a.certificateTypes.$promise.then(function(){var c=i.getForbiddenTypes(b.status);a.certificateTypes=a.certificateTypes.filter(function(a){return-1===c.indexOf(a.code)})})})["catch"](angular.noop)),f.all(j.promises).then(a.loadData)}]).controller("CertificateStudentOrderController",["$scope","Classifier","QueryUtils","$route","$location","dialogService","message","$rootScope",function(a,b,c,d,e,f,g,h){function i(a){var b=document.getElementById("content");b&&(b.innerHTML=a)}var j="/certificate",k=c.endpoint(j+"/order"),l=d.current.params.id;h.removeLastUrlFromHistory(function(a){return a&&(-1!==a.indexOf("certificate/"+l+"/view")||-1!==a.indexOf("certificate/new"))}),a.record=new k({type:d.current.params.typeCode}),b.queryForDropdown({mainClassCode:"TOEND_LIIK"}).$promise.then(function(b){var c=a.record.type,d=b.find(function(a){return a.code===c});a.record.headline=d?d.nameEt:""}),a.record.type&&c.endpoint(j+"/content").search({type:a.record.type}).$promise.then(function(b){a.record.content=b.content,i(a.record.content)})["catch"](angular.noop),a.save=function(){return a.certificateEditForm.$setSubmitted(),a.certificateEditForm.$valid||a.record.signatoryIdcode?void f.confirmDialog({prompt:"certificate.ekisconfirm"},function(){a.record.$save().then(function(){g.info("main.messages.create.success"),e.url(j+"/"+a.record.id+"/view?_noback")})["catch"](function(a){a&&a.data&&a.data.data&&a.data.data.id&&e.url(j+"/"+a.data.data.id+"/view?_noback")})}):void g.error("main.messages.form-has-errors")}}]).controller("CertificateEditController",["$scope","QueryUtils","$route","$location","dialogService","message","$q","CertificateUtil","$rootScope","$timeout",function(a,b,c,d,e,f,g,h,i,j){function k(){a.record.student&&m().then(function(b){var c=b.fullname;a.student={id:b.id,nameEt:c,nameEn:c}}),a.contentEditable()||l(a.record.content),a.otherFound=!0,a.certificateEditForm&&a.certificateEditForm.$setPristine()}function l(a){var b=document.getElementById("content");b&&(b.innerHTML=a)}function m(){return b.endpoint(r+"/otherStudent").search({id:a.record.student}).$promise.then(function(b){
return a.record.otherName=b.fullname,a.record.otherIdcode=b.idcode,a.otherFound=!0,a.forbiddenTypes=h.getForbiddenTypes(b.status),b})["catch"](angular.noop)}function n(){a.record.id||(a.record.content=null,a.record.type&&(a.record.student||a.record.otherIdcode&&a.isOtherCertificate())&&b.endpoint(r+"/content").search({student:a.record.student,type:a.record.type,otherIdcode:a.record.otherIdcode,otherName:a.record.otherName}).$promise.then(function(b){a.record.content=b.content,a.contentEditable()||l(a.record.content)})["catch"](angular.noop))}function o(){return a.certificateEditForm.$setSubmitted(),a.certificateEditForm.$valid?!0:(f.error("main.messages.form-has-errors"),!1)}function p(a){f.info("main.messages.create.success"),d.url(r+"/"+a.id+"/edit?_noback")}function q(){a.record.signatoryName=a.signatories.filter(function(b){return b.idcode===a.record.signatoryIdcode})[0].name}var r="/certificate",s=b.endpoint(r),t=b.endpoint(r+"/order"),u=c.current.params.id,v=!1;a.forbiddenTypes=[],i.removeLastUrlFromHistory(function(a){return a&&(-1!==a.indexOf("certificate/"+u+"/view")||-1!==a.indexOf("certificate/new"))}),a.contentEditable=function(){return h.contentEditable(a.record)},a.isOtherCertificate=function(){return h.isOtherCertificate(a.record)},u?a.record=s.get({id:u},k):(a.record=new s,k()),a.signatories=b.endpoint(r+"/signatories").query(),a.$watch("record.type",n),a.$watch("record.student",function(){a.record.student||(a.forbiddenTypes=[]),n()}),a.$watch("record.otherIdcode",function(){a.record.otherIdcode&&j(n,1e3),a.record&&a.record.otherIdcode&&a.certificateEditForm.idcode&&a.certificateEditForm.idcode.$valid&&a.getNameByIdcode()}),a.$watch("record.otherName",function(){a.record.otherName&&a.record.otherIdcode&&j(n,1e3)});var w=b.endpoint("/autocomplete/students");a.querySearch=function(b){if(b.length>=3){var c=g.defer();return w.search({name:b,active:h.onlyActiveStudents(a.record.type),finished:h.onlyFinishedStudents(a.record.type)},function(a){c.resolve(a.content)}),c.promise}return{}},a.studentChanged=function(){a.student&&a.record.student!==a.student.id?(a.record.student=a.student.id,m()):a.student||(a.record.student=null,a.otherFound=!1,v||(a.record.otherName=null,a.record.otherIdcode=null),v=!1)},a.save=function(){o()&&(q(),a.record.id?a.record.$update(k).then(f.updateSuccess)["catch"](angular.noop):a.record.$save().then(p)["catch"](angular.noop))},a.saveAndOrder=function(){o()&&e.confirmDialog({prompt:"certificate.ekisconfirm"},function(){function b(a){d.url(r+"/"+a.id+"/view?_noback")}q();var c=new t(a.record);a.record.id?c.$update(b).then(f.updateSuccess)["catch"](angular.noop):c.$save(b).then(function(){f.info("main.messages.create.success")})["catch"](function(a){a&&a.data&&a.data.data&&a.data.data.id&&d.url(r+"/"+a.data.data.id+"/edit?_noback")})})},a["delete"]=function(){e.confirmDialog({prompt:"certificate.deleteconfirm"},function(){a.record.$delete().then(function(){f.info("main.messages.delete.success"),d.url(r+"?_noback")})["catch"](angular.noop)})},a.otherFound=!1,a.idcodePattern="^[1-6][0-9]{2}[0-1][0-9][0-3][0-9][0-9]{4}",a.getNameByIdcode=function(){b.endpoint(r+"/otherStudent",{get:{method:"GET"}}).get({idcode:a.record.otherIdcode}).$promise.then(function(b){b.id?(a.record.student=b.id,a.record.otherName=b.fullname,a.otherFound=!0,a.student={id:b.id,nameEt:b.fullname,nameEn:b.fullname,status:b.status},a.forbiddenTypes=h.getForbiddenTypes(b.status)):(v=!0,a.student=null,a.forbiddenTypes=[],b&&b.fullname?(a.record.otherName=b.fullname,a.otherFound=!0):a.otherFound=!1)})}}]).controller("CertificateViewController",["$location","$route","$scope","dialogService","ekisService","message","CertificateUtil","QueryUtils",function(a,b,c,d,e,f,g,h){function i(){c.record.student&&h.endpoint(j+"/otherStudent").search({id:c.record.student}).$promise.then(function(a){var b=a.fullname;c.record.otherName=b,c.record.otherIdcode=a.idcode,c.student={id:a.id,nameEt:b,nameEn:b}});var a=document.getElementById("content");a&&(a.innerHTML=c.record.content)}var j="/certificate",k=h.endpoint(j),l=b.current.params.id;c.auth=b.current.locals.auth,c.getCertificateUrl=e.getCertificateUrl,c.isOtherCertificate=function(){return g.isOtherCertificate(c.record)},c.order=function(){d.confirmDialog({prompt:"certificate.ekisconfirm"},function(){h.endpoint(j+"/orderFromEkis").update({id:l}).$promise.then(function(){b.reload()})["catch"](angular.noop)})},c["delete"]=function(){d.confirmDialog({prompt:"certificate.deleteconfirm"},function(){c.record.$delete().then(function(){f.info("main.messages.delete.success"),a.url(j+"?_noback")})})},c.contentEditable=function(){return g.contentEditable(c.record)},c.record=k.get({id:l},i)}]).constant("CertificateType",{TOEND_LIIK_SOOR:"TOEND_LIIK_SOOR",TOEND_LIIK_OPI:"TOEND_LIIK_OPI",TOEND_LIIK_SESS:"TOEND_LIIK_SESS",TOEND_LIIK_KONTAKT:"TOEND_LIIK_KONTAKT",TOEND_LIIK_LOPET:"TOEND_LIIK_LOPET",TOEND_LIIK_MUU:"TOEND_LIIK_MUU"}).factory("CertificateUtil",["CertificateType","StudentUtil",function(a,b){return{isOtherCertificate:function(b){return b&&b.type===a.TOEND_LIIK_MUU},contentEditable:function(b){return b&&(b.type===a.TOEND_LIIK_MUU||b.type===a.TOEND_LIIK_KONTAKT||b.type===a.TOEND_LIIK_SESS)},onlyActiveStudents:function(b){return a.TOEND_LIIK_KONTAKT===b||a.TOEND_LIIK_OPI===b},onlyFinishedStudents:function(b){return a.TOEND_LIIK_LOPET===b},getForbiddenTypes:function(c){return b.isActive(c)?[a.TOEND_LIIK_LOPET]:b.hasFinished(c)?[a.TOEND_LIIK_OPI,a.TOEND_LIIK_KONTAKT]:[a.TOEND_LIIK_OPI,a.TOEND_LIIK_KONTAKT,a.TOEND_LIIK_LOPET]}}}]),angular.module("hitsaOis").config(["$routeProvider","USER_ROLES",function(a,b){a.when("/certificate",{templateUrl:"certificate/certificate.search.html",controller:"CertificateSearchController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}]},data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_TOEND]}}).when("/certificate/new",{templateUrl:"certificate/certificate.edit.html",controller:"CertificateEditController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}]},data:{authorizedRoles:[b.ROLE_OIGUS_M_TEEMAOIGUS_TOEND]}}).when("/certificate/:typeCode/new",{templateUrl:"certificate/certificate.student.new.html",controller:"CertificateStudentOrderController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}]},data:{authorizedRoles:function(a){return"ROLL_T"===a.roleCode}}}).when("/certificate/:id/edit",{templateUrl:"certificate/certificate.edit.html",controller:"CertificateEditController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}]},data:{authorizedRoles:[b.ROLE_OIGUS_M_TEEMAOIGUS_TOEND]}}).when("/certificate/:id/view",{templateUrl:"certificate/certificate.view.html",controller:"CertificateViewController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}]},data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_TOEND]}})}]),angular.module("hitsaOis").factory("Classifier",["$q","$resource","config","CacheFactory","QueryUtils",function(a,b,c,d,e){function f(){}return new d("classifierCache"),f.get=function(a){var d=b(c.apiUrl+"/classifier/:code");return d.get({code:a})},f.query=function(a,d){var f=b(c.apiUrl+"/classifier"),g=e.getQueryParams(a);return f.get(g,d)},f.queryForAutocomplete=function(a,d){var f=b(c.apiUrl+"/classifier/getPossibleParentClassifiers"),g=e.getQueryParams(a);return f.query(g,d)},f.queryForDropdown=function(e,f){function g(a){for(var b=0,c=a.length;c>b;b++)(void 0===e.higher||void 0!==e.vocational||e.higher===a[b].higher)&&(void 0===e.vocational||void 0!==e.higher||e.vocational===a[b].vocational)&&(void 0===e.vocational||void 0===e.higher||e.vocational===a[b].vocational||e.higher===a[b].higher)&&(void 0===e.filterValues||-1===e.filterValues.indexOf(a[b].code))&&l.push(angular.copy(a[b]));var d=e.order;d&&l.sort(function(a,b){var c=a[d],e=b[d];return e>c?-1:c>e?1:0}),m.resolve(l),l.$resolved=!0,angular.isFunction(f)&&m.promise.then(function(){f(l)})}var h=b(c.apiUrl+"/autocomplete/classifiers"),i={mainClassCode:e.mainClassCode};angular.isDefined(e.mainClassCodes)&&(i={mainClassCodes:e.mainClassCodes});var j=d.get("classifierCache"),k=i.mainClassCodes||i.mainClassCode,l=[],m=a.defer();l.$promise=m.promise;var n=j.get(k);return n&&n.$resolved?g(n):(l.$resolved=!1,n||(n=h.query(i),j.put(k,n)),n.$promise.then(function(){g(n)})),l},f.getChildren=function(a){return b(c.apiUrl+"/classifier/children/:code").query({code:a})},f.getPossibleConnections=function(a){var d=b(c.apiUrl+"/classifier/connections/:code");return d.query({code:a})},f.getParents=function(a){var d=b(c.apiUrl+"/classifier/parents/:code");return d.query({code:a})},f.getParentsWithMainClass=function(a,d){var e=b(c.apiUrl+"/classifier/parents/:parentsMainClassCode/:code");return e.query({parentsMainClassCode:a,code:d})},f.toMap=function(a){return a.reduce(function(a,b){return a[b.code]=b,a},{})},f.getSelectedCodes=function(a){for(var b=[],c=0,d=a.length;d>c;c++){var e=a[c];e._selected&&b.push(e.code)}return b},f.setSelectedCodes=function(a,b){for(var c=0,d=a.length;d>c;c++){var e=a[c];e._selected=-1!==b.indexOf(e.code)}},f.valuemapper=function(a){function b(a){return function(b){d[a]=f.toMap(b)}}function c(a,b){var c=d[a];return angular.isArray(b)?b.map(function(a){return c[a]}):c[b]}var d={},e=[];for(var g in a){var h=a[g];d[h]=f.queryForDropdown({mainClassCode:h}),e.push(d[h].$promise.then(b(h)))}var i=function(b){if(Array.isArray(b))return b.map(i);for(var d in a)b.hasOwnProperty(d)&&(b[d]=c(a[d],b[d]));return b};return{promises:e,objectmapper:i}},f}]),angular.module("hitsaOis").factory("classifierAutocomplete",["$translate","config","$resource",function(a,b,c){var d={},e=c(b.apiUrl+"/classifier/getPossibleParentClassifiers");return d.searchByName=function(b,c){if(!b||b.length<3)return[];var d={mainClassCode:c,name:b,language:"en"===a.use()?"EN":"ET"};return e.query(d).$promise},d}]),angular.module("hitsaOis").factory("ClassifierConnect",["QueryUtils",function(a){function b(a){this.classifierCode=a.classifierCode,this.connectClassifierCode=a.connectClassifierCode}return b.query=function(b,c){var d=a.getQueryParams(b);return a.endpoint("/classifierConnect").search(d,c)},b.queryAll=function(b,c){var d=a.getQueryParams(b);return a.endpoint("/classifierConnect/all").query(d,c)},b.sendListOfParents=function(b,c){return a.endpoint("/classifierConnect/changeParents/"+b.code).save(c)},b}]),angular.module("hitsaOis").controller("ClassifierContentEditController",["$scope","$route","Classifier","classifierAutocomplete","$location","message","ClassifierConnect","dialogService","QueryUtils","DataUtils",function(a,b,c,d,e,f,g,h,i,j){function k(){a.parents=[],s&&(a.classifier=t.get({id:s},function(){j.convertStringToDates(a.classifier,["validFrom","validThru"]),l(a.classifier.code),m(a.classifier.code)})),n()}function l(b){c.getParents(b).$promise.then(function(b){a.parents=b})}function m(b){c.getChildren(b).$promise.then(function(b){a.children=b,a.hasChildren=b.length>0})}function n(){a.mainClassCode=b.current.params.mainClassCode,a.mainClass=c.get(a.mainClassCode).$promise.then(function(b){a.mainClass=b,o()})}function o(){c.getPossibleConnections(a.mainClassCode).$promise.then(function(b){a.possibleConnections=b})}function p(){g.sendListOfParents(a.classifier,a.parents),a.classifier.id=a.classifier.code,a.classifier.$update().then(function(){f.info("main.messages.create.success"),a.classifierForm.$setPristine()})}function q(){a.classifier.value=a.classifier.value.toUpperCase(),a.classifier.mainClassCode=a.mainClassCode,a.classifier.code=a.classifier.mainClassCode+"_"+a.classifier.value,a.classifier.valid=!0,a.classifier.id=a.classifier.code,new t(a.classifier).$save().then(function(b){g.sendListOfParents(b,a.parents),f.info("main.messages.create.success"),e.url("/classifier/"+a.mainClassCode+"/"+b.code+"/edit?_noback")})}function r(b){return 0===a.parents.filter(function(a){return a.code===b.code}).length}var s=b.current.params.codeThis,t=i.endpoint("/classifier");k(),a.save=function(){a.classifierForm.$setSubmitted(),a.classifierForm.$valid?a.classifier.code?p():q():f.error("main.messages.form-has-errors")},a["delete"]=function(){h.confirmDialog({prompt:"classifier.deleteconfirm"},function(){a.classifier.id=a.classifier.code,a.classifier.$delete().then(function(){f.info("main.messages.delete.success"),e.path("/classifier/"+a.mainClassCode)})})},a.querySearch=function(a,b){return d.searchByName(a,b)},a.addParent=function(b){b&&r(b)&&(a.parents.push(b),a.classifierForm.$setDirty())},a.removeParent=function(b){h.confirmDialog({prompt:"classifier.prompt.deleteParent"},function(){a.parents.splice(a.parents.indexOf(b),1),a.classifierForm.$setDirty()})}}]),angular.module("hitsaOis").controller("ClassifierContentListController",["$route","$scope","Classifier","QueryUtils",function(a,b,c,d){b.mainClassCode=a.current.params.code,d.createQueryForm(b,"classifier.list",{order:"value"}),b.mainClass=c.get(b.mainClassCode),b.loadData=function(){var a=angular.extend({},b.criteria,{mainClassCode:b.mainClassCode});b.toStorage("classifier.list",d.getQueryParams(a)),b.tabledata.$promise=c.query(a,b.afterLoadData).$promise},b.isValid=function(a){return(!a.validFrom||new Date(a.validFrom)<=new Date)&&(!a.validThru||new Date(a.validThru)>=new Date)},b.loadData()}]),angular.module("hitsaOis").config(["$routeProvider","USER_ROLES",function(a,b){a.when("/classifier",{templateUrl:"classifier/classifier.list.html",controller:"SimpleListController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],params:["$translate",function(a){return{order:"en"===a.use()?"nameEn":"nameEt"}}],url:function(){return"/classifier/heads"}},data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_KLASSIFIKAATOR]}}).when("/classifier/:code",{templateUrl:"classifier/classifier.content.list.html",controller:"ClassifierContentListController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}]},data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_KLASSIFIKAATOR]}}).when("/classifier/:mainClassCode/new",{templateUrl:"classifier/classifier.content.edit.html",controller:"ClassifierContentEditController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}]},data:{authorizedRoles:[b.ROLE_OIGUS_M_TEEMAOIGUS_KLASSIFIKAATOR]}}).when("/classifier/:mainClassCode/:codeThis/edit",{templateUrl:"classifier/classifier.content.edit.html",controller:"ClassifierContentEditController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}]},data:{authorizedRoles:[b.ROLE_OIGUS_M_TEEMAOIGUS_KLASSIFIKAATOR]}})}]),angular.module("hitsaOis").controller("SaisClassifierListController",["$scope","message","QueryUtils",function(a,b,c){a.saisImport=function(){c.endpoint("/saisClassifier/saisImport").save().$promise.then(function(){b.info("saisClassifier.importFinished")})},c.createQueryForm(a,"/saisClassifier",{order:"en"===a.currentLanguage()?"nameEn":"nameEt"}),a.loadData()}]),angular.module("hitsaOis").config(["$routeProvider","USER_ROLES",function(a,b){a.when("/saisClassifier",{templateUrl:"saisClassifier/saisClassifier.list.html",controller:"SaisClassifierListController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}]},data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_KLASSIFIKAATOR]}}).when("/saisClassifier/:code",{templateUrl:"saisClassifier/saisClassifier.content.list.html",controller:"SimpleListController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],params:function(){return{order:"value"}},url:["$route",function(a){return"/saisClassifier/"+a.current.params.code}]},data:{authorizedRoles:[b.ROLE_OIGUS_M_TEEMAOIGUS_KLASSIFIKAATOR]}})}]),angular.module("hitsaOis").config(["$routeProvider","USER_ROLES",function(a,b){a.when("/committees",{templateUrl:"committee/committee.search.html",controller:"CommitteeSearchController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}]},data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_KOMISJON]}}).when("/committees/new",{templateUrl:"committee/committee.edit.html",controller:"CommitteeEditViewController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}]},data:{authorizedRoles:[b.ROLE_OIGUS_M_TEEMAOIGUS_KOMISJON]}}).when("/committees/:id/edit",{templateUrl:"committee/committee.edit.html",controller:"CommitteeEditViewController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}]},data:{authorizedRoles:[b.ROLE_OIGUS_M_TEEMAOIGUS_KOMISJON]}}).when("/committees/:id/view",{templateUrl:"committee/committee.view.html",controller:"CommitteeEditViewController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}]},data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_KOMISJON]}})}]),angular.module("hitsaOis").controller("CommitteeSearchController",["$scope","QueryUtils","USER_ROLES","AuthService",function(a,b,c,d){a.canEdit=d.isAuthorized(c.ROLE_OIGUS_M_TEEMAOIGUS_KOMISJON);var e="/committees";b.createQueryForm(a,e,{order:"c.id"}),a.loadData();var f;a.criteria&&(f=a.criteria.member),a.members=b.endpoint(e+"/members").query(function(){f&&(a.criteria.member=a.members.find(function(a){return a.id===f.id&&a.nameEt===f.nameEt}))}),a.$watch("criteria.member",function(){a.criteria.member?a.criteria.member.id?(a.criteria.teacher=a.criteria.member.id,a.criteria.memberName=null):(a.criteria.teacher=null,a.criteria.memberName=a.criteria.member.nameEt):(a.criteria.teacher=null,a.criteria.memberName=null)})}]),angular.module("hitsaOis").controller("CommitteeEditViewController",["$scope","dialogService","QueryUtils","message","ArrayUtils","$route","$location","orderByFilter","DataUtils","$rootScope",function(a,b,c,d,e,f,g,h,i,j){function k(){i.convertStringToDates(a.record,["validFrom","validThru"]),a.record.members=h(a.record.members,["memberName"]),a.committeeEditForm&&a.committeeEditForm.$setPristine()}function l(){return 1===a.record.members.filter(m).length}function m(a){return a.isChairman}function n(){return a.committeeEditForm.$setSubmitted(),a.committeeEditForm.$valid?l()?!0:(d.error("committee.error.chairman"),!1):(d.error("main.messages.form-has-errors"),!1)}var o="/committees",p=f.current.params.id,q=c.endpoint(o);j.removeLastUrlFromHistory(function(a){return a&&(-1!==a.indexOf("committees/"+p+"/view")||-1!==a.indexOf("committees/new"))}),p?a.record=q.get({id:p},k):a.record=new q({members:[]}),a.addMember=function(){a.record.members.push({isExternal:!1,isChairman:!1}),a.committeeEditForm.$setDirty()},a.removeMember=function(b){e.remove(a.record.members,b),a.committeeEditForm.$setDirty()},a.assingChairman=function(b){b.isChairman&&a.record.members.forEach(function(a){a!==b&&(a.isChairman=!1)})},a.save=function(){n()&&(a.record.id?a.record.$update().then(function(b){d.info("main.messages.update.success"),a.record=b,k()}):a.record.$save().then(function(a){d.info("main.messages.create.success"),g.path(o+"/"+a.id+"/edit")}))},a["delete"]=function(){b.confirmDialog({prompt:"committee.prompt.deleteconfirm"},function(){a.record.$delete().then(function(){d.info("committee.message.deleted"),g.path(o)})})}}]),angular.module("hitsaOis").directive("oisDrag",function(){return{restrict:"A",link:function(a,b,c){c.$observe("oisDrag",function(a){b.prop("draggable","true"===a)}),b.on("dragstart",function(a){null!==a.target.attributes.getNamedItem("old-event-id")&&a.dataTransfer.setData("oldEventId",a.target.attributes.getNamedItem("old-event-id").value),null!==a.target.attributes.getNamedItem("capacity-type")&&a.dataTransfer.setData("capacityType",a.target.attributes.getNamedItem("capacity-type").value),null!==a.target.attributes.getNamedItem("journal-id")&&a.dataTransfer.setData("journalId",a.target.attributes.getNamedItem("journal-id").value),a.dataTransfer.setData("elementId",a.target.id)})}}}),angular.module("hitsaOis").directive("oisDrop",function(){return{restrict:"A",scope:{dropFn:"&",indexValue:"@"},link:function(a,b,c){b.on("dragover",function(a){"true"===c.oisDrop&&a.preventDefault()}),b.on("drop",function(b){if("true"===c.oisDrop){b.preventDefault();var d={};d.id=b.dataTransfer.getData("elementId"),d.journalId=b.dataTransfer.getData("journalId"),d.oldEventId=b.dataTransfer.getData("oldEventId"),d.capacityType=b.dataTransfer.getData("capacityType"),d.index=a.indexValue,b.target.appendChild(document.getElementById(d.id)),a.dropFn({data:d})}}),b.on("dragenter",function(){"true"===c.oisDrop&&this.classList.add("highlight-drop-area")}),b.on("dragleave",function(){"true"===c.oisDrop&&this.classList.remove("highlight-drop-area")}),b.bind("error",function(){""===c.onErrorSrc?c.ngHide=!0:c.src!==c.onErrorSrc&&c.$set("src",c.onErrorSrc)})}}}),angular.module("hitsaOis").directive("oisHigherDrop",function(){return{restrict:"A",scope:{dropFn:"&"},link:function(a,b,c){b.on("dragover",function(a){"true"===c.oisHigherDrop&&a.preventDefault()}),b.on("drop",function(b){if("true"===c.oisHigherDrop){b.preventDefault();var d={};d.id=b.dataTransfer.getData("elementId"),d.journalId=b.dataTransfer.getData("journalId"),d.oldEventId=b.dataTransfer.getData("oldEventId"),d.capacityType=b.dataTransfer.getData("capacityType"),b.target.appendChild(document.getElementById(d.id).cloneNode(!0)),a.dropFn({data:d})}}),b.on("dragenter",function(){"true"===c.oisHigherDrop&&this.classList.add("highlight-drop-area")}),b.on("dragleave",function(){"true"===c.oisHigherDrop&&this.classList.remove("highlight-drop-area")}),b.bind("error",function(){""===c.onErrorSrc?c.ngHide=!0:c.src!==c.onErrorSrc&&c.$set("src",c.onErrorSrc)})}}}),angular.module("hitsaOis").directive("onErrorSrc",function(){return{restrict:"A",scope:{},link:function(a,b,c){b.bind("error",function(){""===c.onErrorSrc?c.ngHide=!0:c.src!==c.onErrorSrc&&c.$set("src",c.onErrorSrc)})}}}),angular.module("hitsaOis").directive("disallowSameFile",function(){return{restrict:"A",require:"ngModel",link:function(a,b,c,d){var e=a[c.disallowSameFile];a.$watchCollection(c.lfFiles,function(a){if(angular.isArray(e)&&angular.isArray(a)){var b=!1;e.forEach(function(c){if(angular.isObject(c.oisFile)){var d=c.oisFile.fname;a.forEach(function(a){a.lfFileName===d&&(b=!0)})}}),d.$setValidity("samefile",!b)}})}}}),angular.module("hitsaOis").directive("unique",["config","$http",function(a,b){return{restrict:"A",scope:{unique:"="},require:"ngModel",link:function(c,d,e,f){f.$asyncValidators.unique=function(d,e){return c.unique.paramValue=e,b({url:a.apiUrl+c.unique.url,method:"GET",params:c.unique}).then(function(a){return f.$setValidity("notUnique",a.data),a.data})}}}}]),angular.module("hitsaOis").directive("menuLink",function(){return{restrict:"E",scope:{section:"="},templateUrl:"components/menu-link.tmpl.html",link:function(a,b){var c=b.parent().controller();a.isSelected=function(){return c.isSelected(a.section)},a.focusSection=function(){c.autoFocusContent=!0}}}}).directive("menuToggle",["$mdUtil","$animateCss","$$rAF",function(a,b,c){return{restrict:"E",scope:{section:"="},templateUrl:"components/menu-toggle.tmpl.html",link:function(d,e){var f=e.parent().controller();d.renderContent=!1,d.isOpen=function(){return f.isOpen(d.section)},d.toggle=function(){f.toggleOpen(d.section)},a.nextTick(function(){d.$watch(function(){return f.isOpen(d.section)},function(f){var g=e.find("ul");f&&(d.renderContent=!0),c(function(){var c=f?g[0].scrollHeight:0;b(g,{easing:"cubic-bezier(0.35, 0, 0.25, 1)",to:{height:c+"px"},duration:.75}).start().then(function(){var b=g[0].querySelector("a.active");if(d.renderContent=f,f&&b&&0===g[0].scrollTop){var c=b.scrollHeight,e=b.offsetTop,h=b.offsetParent,i=h?h.offsetTop:0,j=2*c,k=e+i-j;a.animateScrollTo(document.querySelector(".docs-menu").parentNode,k)}})})})});var g=e[0].parentNode.parentNode.parentNode;if(g.classList.contains("parent-list-item")){var h=g.querySelector("h2");e[0].firstChild.setAttribute("aria-describedby",h.id)}}}}]),function(){angular.module("hitsaOis").directive("hoisAdsAdapter",["inAadressService","$document",function(a,b){return{restrict:"E",replace:!0,scope:{value:"=ngModel",adsOid:"=adsOidModel",address:"=addressModel",required:"@",ngRequired:"="},link:function(c,d){function e(){a.getInAds().setAddress(c.address)}var f=d[0];a.append(f),a.isLoaded()&&a.getInAds().hideResult(),c.$watch("address",e),b.on("inaadressLoaded",e),b.on("addressSelected",function(b){var d=b.detail[0];c.$apply(function(a){a.value=d.koodaadress,a.adsOid=d.ads_oid,a.address=d.aadress}),a.getInAds().hideResult()})}}}])}(),angular.module("hitsaOis").directive("hoisAutocomplete",["$rootScope","$translate","$q","QueryUtils",function(a,b,c,d){return{templateUrl:function(a,b){return angular.isDefined(b.multiple)?"components/hois.chip.autocomplete.html":angular.isDefined(b.label)&&b.label.length>0?"components/hois.autocomplete.html":"components/hois.autocomplete.nolabel.html"},restrict:"E",require:"ngModel",scope:{maxChips:"@",ngModel:"=",label:"@",method:"@",multiple:"@",required:"=",mdSelectedItemChange:"&?",readonly:"=",additionalQueryParams:"=",noPaging:"@",url:"@"},link:{post:function(e,f,g){var h=e.url?e.url:"/autocomplete/"+e.method,i=d.endpoint(h);angular.isDefined(g.multiple)&&!angular.isArray(e.ngModel)&&(e.ngModel=[]),e.transformChip=function(a){return angular.isObject(a)?a:void 0},e.getChipText=function(b){return a.currentLanguageNameField(b)},e.selectedItemChange=function(){angular.isFunction(e.mdSelectedItemChange)&&(angular.isFunction(e.mdSelectedItemChange())?e.$$postDigest(e.mdSelectedItemChange()):e.$$postDigest(e.mdSelectedItemChange))},e.search=function(a){var d=c.defer(),f={lang:b.use().toUpperCase(),name:a};return e.additionalQueryParams&&angular.extend(f,e.additionalQueryParams),"/autocomplete/curriculumversions"===h?i.query(f,function(a){d.resolve(a)}):"/autocomplete/studentgroups"===h?i.query(f,function(a){d.resolve(a)}):"/autocomplete/curriculumversionomodulesandthemes"===h?i.query(f,function(a){d.resolve(a)}):"true"===e.noPaging?i.query(f,function(a){d.resolve(a)}):i.search(f,function(a){d.resolve(a.content)}),d.promise}}}}}]),angular.module("hitsaOis").directive("hoisCreatedModified",function(){return{restrict:"E",scope:{object:"="},templateUrl:"components/hois.created.modified.html"}}),angular.module("hitsaOis").directive("hoisClassifierAutocomplete",["$rootScope","$translate","$q","Classifier",function(a,b,c,d){return{templateUrl:"components/hois.chip.autocomplete.html",restrict:"E",require:"ngModel",scope:{maxChips:"@",ngModel:"=",label:"@",mainClassCode:"@"},link:function(b){angular.isArray(b.ngModel)||(b.ngModel=[]);var e={};b.transformChip=function(a){return angular.isObject(a)?(e[a.code]=a,a.code):void 0},b.getChipText=function(b){return a.currentLanguageNameField(e[b])},b.search=function(e){var f=c.defer(),g=a.currentLanguageNameVariable(),h=function(a){var b=a.filter(function(a){return a[g].includes(e)});f.resolve(b)};return d.queryForDropdown({mainClassCode:b.mainClassCode,sort:g},h),f.promise}}}}]),function(){function a(a,b,c){var d={},e={order:a.$root.currentLanguageNameField()};if(angular.isDefined(a.mainClassifierCode))e.mainClassCode=a.mainClassifierCode;else{if(!angular.isString(a.mainClassifierCodes))return;e.mainClassCodes=a.mainClassifierCodes.replace(/\s/g,"")}angular.isObject(a.criteria)&&angular.extend(e,a.criteria);var f=function(){function b(){for(var b in a.optionsByCode)a.optionsByCode[b].hide=!1}function e(e){if(!angular.isDefined(e)||null===e||""===e||angular.isArray(e)&&0===e.length)a.value=void 0,b();else{var g={mainClassifierCode:a.connectMainClassifierCode},h=e;angular.isArray(e)?h=e.join(","):angular.isObject(e)&&(h=e.code),angular.isDefined(a.searchFromConnect)?g.connectClassifierCode=h:g.classifierCode=h,c.queryAll(g,function(b){var c=[];if(b.forEach(function(b){var d=angular.isDefined(a.searchFromConnect)?b.classifier.code:b.connectClassifier.code;c.push(d)}),angular.isDefined(a.showOnlyValues)||angular.isDefined(a.filterValues))for(var e in a.optionsByCode)a.optionsByCode[e].hide=-1===c.indexOf(e);if(angular.isDefined(a.selectFirstValue)){var g=c.length>0?c[0]:angular.isDefined(a.defaultValue)?a.defaultValue:null;null!==g&&(angular.isDefined(a.modelValueAttr)?a.value=d[g][a.modelValueAttr]:a.value=d[g])}f()})}!angular.isDefined(a.value)&&angular.isDefined(a.defaultValue)&&(a.value=a.defaultValue)}var f=function(){angular.isArray(a.value)?a.value.forEach(function(b){!angular.isString(b)||angular.isDefined(a.optionsByCode[b])&&!a.optionsByCode[b].hide||(a.value=void 0)}):angular.isObject(a.value)&&angular.isString(a.value.code)&&(!angular.isDefined(a.optionsByCode[a.value.code])||a.optionsByCode[a.value.code].hide)?a.value=void 0:"code"!==a.modelValueAttr||!angular.isString(a.value)||angular.isDefined(a.optionsByCode[a.value])&&!a.optionsByCode[a.value].hide||(a.value=void 0)},g=function(){angular.isDefined(a.showOnlyValues)&&a.$parent.$watchCollection(a.showOnlyValues,function(b){var c=[];angular.isArray(b)&&b.forEach(function(b){var d=b;angular.isDefined(a.byProperty)&&angular.isObject(b)&&(d=b[a.byProperty]),angular.isString(d)?c.push(d):angular.isObject(d)&&angular.isString(d.code)&&c.push(d.code)});for(var d in a.optionsByCode)a.optionsByCode[d].hide=b!==!0&&-1===c.indexOf(d);f()}),angular.isDefined(a.filterValues)&&a.$parent.$watchCollection(a.filterValues,function(b){var c=[];angular.isArray(b)&&b.forEach(function(b){var d=b;angular.isDefined(a.byProperty)&&angular.isObject(b)&&(d=b[a.byProperty]),angular.isString(d)?c.push(d):angular.isObject(d)&&angular.isString(d.code)&&c.push(d.code)});for(var d in a.optionsByCode)a.optionsByCode[d].hide=-1!==c.indexOf(d);f()}),f()};g(),angular.isDefined(a.watchMultiple)?a.$parent.$watchCollection(a.watchModel,e):angular.isDefined(a.watchModel)&&a.$parent.$watch(a.watchModel,e)};if(e.mainClassCode||e.mainClassCodes){var g=b.queryForDropdown(e,function(b){b.forEach(function(a){var b={code:a.code,nameEt:a.nameEt,nameEn:a.nameEn,labelRu:a.labelRu};d[b.code]=b}),a.optionsByCode=d,f()});a.queryPromise=g.$promise}}angular.module("hitsaOis").directive("hoisClassifierSelect",["Classifier","ClassifierConnect",function(b,c){return{template:'<md-select ng-model-options="{ trackBy: !!modelValueAttr ? \'$value\' : \'$value.code\' }" ><md-option ng-if="!isMultiple && !isRequired && !ngRequired" md-option-empty></md-option><md-option ng-repeat="(code, option) in optionsByCode" ng-value="!!modelValueAttr ? option[modelValueAttr] : option" ng-hide="option.hide" aria-label="{{$root.currentLanguageNameField(option)}}">{{$root.currentLanguageNameField(option)}}</md-option></md-select>',restrict:"E",require:["ngModel"],replace:!0,scope:{value:"=ngModel",required:"@",ngRequired:"=",multiple:"@",modelValueAttr:"@",mainClassifierCode:"@",mainClassifierCodes:"@",connectMainClassifierCode:"@",criteria:"=",filterValues:"@",byProperty:"@",showOnlyValues:"@",watchModel:"@",watchMultiple:"@",searchFromConnect:"@",selectFirstValue:"@",defaultValue:"@"},link:function(d,e){d.isMultiple=angular.isDefined(d.multiple),d.isRequired=angular.isDefined(d.required),e.attr("required",d.isRequired),a(d,b,c)}}}]).directive("hoisClassifierRadio",["Classifier","ClassifierConnect",function(b,c){return{template:'<md-radio-group ng-model-options="{ trackBy: !!modelValueAttr ? \'$value\' : \'$value.code\' }"><md-radio-button ng-repeat="(code, option) in optionsByCode" ng-value="!!modelValueAttr ? option[modelValueAttr] : option" ng-hide="option.hide" aria-label="{{$root.currentLanguageNameField(option)}}">{{$root.currentLanguageNameField(option)}}</md-radio-button></md-radio-group>',
restrict:"E",require:["ngModel","^form"],replace:!0,scope:{value:"=ngModel",required:"@",disabled:"@",modelValueAttr:"@",mainClassifierCode:"@",watchModel:"@",connectMainClassifierCode:"@",searchFromConnect:"@",selectFirstValue:"@",defaultValue:"@"},link:function(d,e,f,g){d.isRequired=angular.isDefined(d.required),e.attr("required",d.isRequired),d.isDisabled=angular.isDefined(d.disabled),e.attr("disabled",d.isDisabled);var h=g[0],i=g[1],j=e[0].parentElement,k=j.querySelector("label");"MD-INPUT-CONTAINER"===j.tagName&&null!==j.querySelector("label")&&(e[0].style.marginTop="0.5em",j.style.marginTop="1em",j.style.marginBottom="0.5em",k.style.marginBottom="2em",d.isRequired&&k.classList.add("md-required"),h.$viewChangeListeners.push(function(){angular.isDefined(h.$viewValue)&&null!==h.$viewValue?(k.style.marginBottom="0",j.classList.add("md-input-has-value")):(j.classList.remove("md-input-has-value"),k.style.marginBottom="2em")}),d.form=i,d.$watch("form.$submitted",function(a){h.$valid||a===!1?j.classList.remove("md-input-invalid"):j.classList.add("md-input-invalid")})),a(d,b,c)}}}])}(),angular.module("hitsaOis").directive("hoisClassifierValue",["Classifier","ArrayUtils",function(a,b){return{template:'<div class="hois-classifier-value">{{value}}</div>',restrict:"E",replace:!0,scope:{ngModel:"=",mainClassifierCode:"@",mainClassifierCodes:"@"},link:function(c,d){d[0].parentElement.classList.add("md-input-has-value");var e;c.$watch("ngModel",function(d){var f=null;if(angular.isObject(d))if(angular.isString(d[c.$root.currentLanguageNameField()]))c.value=d[c.$root.currentLanguageNameField()];else if(angular.isArray(d)&&d.length>0)if(angular.isString(d[0]))f={codes:d};else{var g=d.map(function(a){return a.code});f={codes:g}}else f={code:d.code};else angular.isString(d)?f={code:d}:c.value=void 0;if(null!==f){var h=function(a){var d=a.filter(function(a){return f.code?a.code===f.code:f.codes?b.includes(f.codes,a.code):!1});if(d.length>0){var e=d.map(c.$root.currentLanguageNameField);c.value=e.join(", ")}};void 0===e?a.queryForDropdown({mainClassCode:c.mainClassifierCode,mainClassCodes:c.mainClassifierCodes},function(a){e=a,h(a)}):h(e)}})}}}]),angular.module("hitsaOis").directive("hoisCollapsable",function(){return{template:'<div class="hois-collapse-parent"><div layout="row" class="hois-collapse" ng-style="{background: headerBackgroundColor}"><div flex layout="row" layout-align="start center"><div class="hois-collapse-header" flex="90" flex-sm="80" flex-xs="70" ng-transclude="header">{{label}}&nbsp;<a class="md-primary" style="font-size: 13px; font-weight: normal;" ng-click="action()" ng-if="ngif()">{{link}}</a></div></div><div flex="10" flex-sm="20" flex-xs="30"><md-button ng-click="expandCollapse()" class="hois-collapse-button"><md-icon md-font-set="material-icons md-dark">{{expanded ? "keyboard_arrow_up" : "keyboard_arrow_down"}}</md-icon></md-button></div></div><div ng-show="expanded" ng-transclude></div></div>',replace:!0,transclude:{header:"?hoisCollapsableHeader"},scope:{label:"=",link:"=",action:"&",ngif:"&",expanded:"<",headerBackgroundColor:"<"},link:function(a){a.expanded=angular.isDefined(a.expanded)?a.expanded:!0,a.expandCollapse=function(){a.expanded=!a.expanded}}}}),angular.module("hitsaOis").directive("hoisIdcodeLookup",["$q","QueryUtils","message",function(a,b,c){return{template:'<input type="text" ng-blur="lookupPerson()" md-minlength="11" md-maxlength="11">',restrict:"E",replace:!0,require:"ngModel",scope:{afterFailedLookup:"&",afterLookup:"&",noLookup:"&",ngModel:"=",ngReadonly:"=",role:"@"},link:function(d){d.lookupPerson=function(){var e=d.ngModel;!d.ngReadonly&&e&&11===e.length&&e!==d.idcode?b.endpoint("/autocomplete/persons",{search:{method:"GET"}}).search({idcode:e,role:d.role}).$promise.then(function(a){d.idcode=e,d.afterLookup({response:a})})["catch"](function(b){return 404===b.status&&(d.idcode=void 0),412===b.status&&(d.idcode=void 0,c.error("main.messages.error.estonianIdcode")),angular.isDefined(d.afterFailedLookup)&&d.afterFailedLookup({response:b}),a.reject(b)}):angular.isDefined(d.noLookup)&&d.noLookup()}}}}]),angular.module("hitsaOis").directive("oisInputFile",function(){return{template:'<input type="file" />',restrict:"E",require:["ngModel"],replace:!0,scope:{},link:function(a,b,c,d){var e=d[0];b.bind("change",function(){var a=b[0].files[0],c=new FileReader;c.addEventListener("load",function(){var b="base64,";a.data=c.result.substring(c.result.indexOf(b)+b.length),e.$setViewValue(a)},!1),c.readAsDataURL(a)})}}}),angular.module("hitsaOis").directive("oisMultiText",function(){return{template:'<div layout="column"><div layout="row" flex><div layout="row" flex><input type="text" ng-model="itemValue"></div><div layout="row"><a href="" ng-click="add()"><md-icon md-font-set="material-icons">playlist_add</md-icon></a></div></div><div layout="column"><div layout="row" ng-repeat="item in items" flex><div layout="row" layout-align="start center" flex>{{item}}</div><div layout="row"><md-button style="left:10px;" class="md-icon-button" ng-click="remove(item)"><md-icon ng-class="\'md-warn md-hue-2\'" md-font-set="material-icons">close</md-icon></md-button></div></div></div></div>',restrict:"E",require:["ngModel"],replace:!0,scope:{},link:function(a,b,c,d){a.items=[],a.$parent.$watch(c.initialValues,function(b){angular.isArray(b)&&(a.items=b)}),a.add=function(){a.itemValue&&-1===a.items.indexOf(a.itemValue)&&(a.items.push(a.itemValue),a.itemValue="",d[0].$setViewValue(a.items),d[0].$render())},a.remove=function(b){a.items.splice(a.items.indexOf(b),1),d[0].$setViewValue(a.items),d[0].$render()}}}}),angular.module("hitsaOis").directive("hoisSchoolDepartmentSelect",["QueryUtils",function(a){return{template:'<md-select><md-option ng-if="!isMultiple && !isRequired && !ngRequired" md-option-empty></md-option><md-option ng-repeat="option in options" ng-value="option.id"aria-label="{{$root.currentLanguageNameField(option)}}">{{$root.currentLanguageNameField(option)}}</md-option></md-select>',restrict:"E",replace:!0,scope:{excludedId:"@",multiple:"@",ngRequired:"=",required:"@",value:"=ngModel"},link:function(b,c){b.isMultiple=angular.isDefined(b.multiple),b.isRequired=angular.isDefined(b.required),c.attr("required",b.isRequired);var d=function(){b.excludedIdValue?b.options=b.optionValues.filter(function(a){return a.id!==b.excludedIdValue}):b.options=b.optionValues};a.endpoint("/autocomplete/schooldepartments").query(function(a){b.optionValues=a.sort(function(a,b){var c=a.nameEt,d=b.nameEt;return d>c?-1:c>d?1:0}),d()}),angular.isDefined(b.excludedId)&&b.$parent.$watch(b.excludedId,function(a){b.excludedIdValue=a,void 0!==b.optionValues&&d()})}}}]),angular.module("hitsaOis").directive("hoisSelect",["Curriculum","School","QueryUtils","DataUtils",function(a,b,c,d){return{template:'<md-select md-on-open="queryPromise"><md-option ng-if="!isMultiple && !isRequired && !ngRequired" md-option-empty></md-option><md-option ng-repeat="option in filteredOptions | orderBy: showProperty ? showProperty : $root.currentLanguageNameField()" ng-value="option[valueProperty]"aria-label="{{$root.currentLanguageNameField(option)}}">{{showProperty ? option[showProperty] : $root.currentLanguageNameField(option)}}</md-option></md-select>',restrict:"E",replace:!0,scope:{ngModel:"=",criteria:"=",filterValues:"@",multiple:"@",ngRequired:"=",required:"@",values:"@",valueProperty:"@",showProperty:"@",selectCurrentStudyYear:"@",loadAfterDefer:"="},link:function(e,f,g){function h(){e.filteredOptions=(e.options||[]).filter(function(a){return-1===e.hideOptions.indexOf(a[e.valueProperty])})}function i(a){e.options=a.content,h()}function j(){if(angular.isDefined(e.selectCurrentStudyYear)&&!e.ngModel){var a=d.getCurrentStudyYearOrPeriod(e.options);a&&(e.ngModel=a.id)}}function k(){angular.isDefined(g.type)?("building"===g.type?e.options=c.endpoint("/autocomplete/buildings").query():"curriculum"===g.type?e.options=c.endpoint("/autocomplete/curriculumsDropdown").query():"curriculumversion"===g.type?e.options=a.queryVersions(e.criteria):"directivecoordinator"===g.type?e.options=c.endpoint("/autocomplete/directivecoordinators").query(e.criteria):"journal"===g.type?e.options=c.endpoint("/autocomplete/journals").query(e.criteria):"school"===g.type?e.options=b.getAll():"studentgroup"===g.type?e.options=c.endpoint("/autocomplete/studentgroups").query(e.criteria):"studyyear"===g.type?e.options=c.endpoint("/autocomplete/studyYears").query({},j):"teacher"===g.type?e.options=c.endpoint("/autocomplete/teachersList").query(e.criteria):"enterprise"===g.type?e.options=c.endpoint("/autocomplete/enterprises").query():"saisadmissioncode"===g.type?e.options=c.endpoint("/autocomplete/saisAdmissionCodes").query():"subject"===g.type?e.options=c.endpoint("/autocomplete/subjectsList").query():"studyperiod"===g.type?e.options=c.endpoint("/autocomplete/studyPeriods").query():"apelschool"===g.type&&(e.options=c.endpoint("/autocomplete/apelschools").query()),angular.isDefined(e.options)&&angular.isDefined(e.options.$promise)&&(e.queryPromise=e.options.$promise,e.options.$promise.then(h))):angular.isDefined(e.values)&&e.$parent.$watchCollection(e.values,function(a){i({content:a})})}e.isMultiple=angular.isDefined(e.multiple),e.isRequired=angular.isDefined(e.required),e.valueProperty=angular.isString(e.valueProperty)?e.valueProperty:"id",f.attr("required",e.isRequired),e.options=[],e.filteredOptions=[],e.hideOptions=[],angular.isDefined(e.filterValues)&&e.$parent.$watchCollection(e.filterValues,function(a){e.hideOptions=[],angular.isArray(a)&&a.forEach(function(a){var b=angular.isObject(a)?a[e.valueProperty]:a;angular.isDefined(b)&&e.hideOptions.push(b)}),h()}),angular.isDefined(e.loadAfterDefer)?e.loadAfterDefer.promise.then(k):k()}}}]),angular.module("hitsaOis").directive("hoisValue",function(){return{template:'<div class="md-body-1 hois-value"><a ng-if="hrefValue" ng-href="{{hrefValue}}">{{value}}</a><span ng-if="!hrefValue"><div ng-if="value.split" ng-repeat="row in value.split(\'\n\') track by $index">{{row}}</div><div ng-if="!value.split">{{value}}</div></span></div>',restrict:"E",replace:!0,scope:{value:"=",hrefValue:"="},link:function(a,b){b[0].parentElement.classList.add("md-input-has-value")}}}),angular.module("hitsaOis").directive("hoisTime",function(){return{template:'<input style="min-width:3em;" class="md-input" type="text">',restrict:"E",require:["ngModel"],replace:!0,scope:{ngModel:"="},link:{post:function(a,b){function c(a){var b=moment(a,angular.isDate(a)?null:f,!0),c=b.format(f);d(b.isValid()?c:a)}function d(a){b.val(a)}function e(b){var c=moment(b.target.value,f,!0);if(c.isValid())if(a.ngModel){var d=moment(a.ngModel);d.hours(c.hours()),d.minutes(c.minutes()),a.ngModel=d.toDate()}else a.ngModel=c.toDate()}var f="HH:mm";a.$watch("ngModel",function(){c(a.ngModel)}),b.unbind("input").unbind("keydown").unbind("change"),b.bind("blur",function(b){a.$apply(function(){e(b)})})}}}}),angular.module("hitsaOis").filter("hoisDate",["$filter",function(a){return function(b){return a("date")(b,"dd.MM.yyyy")}}]).filter("hoisDateTime",["$filter",function(a){return function(b){return a("date")(b,"dd.MM.yyyy HH:mm:ss")}}]).filter("hoisDateTimeMin",["$filter",function(a){return function(b){return a("date")(b,"dd.MM.yyyy HH:mm")}}]).filter("hoisTime",["$filter",function(a){return function(b){return a("date")(b,"HH:mm:ss")}}]).filter("hoisDayMonth",["$filter",function(a){return function(b){return a("date")(b,"dd.MM")}}]).filter("hoisDayMonthTimeMin",["$filter",function(a){return function(b){return a("date")(b,"dd.MM HH:mm")}}]).filter("hoisTimestamp",["$filter",function(a){return function(b){var c=a("date"),d=c(b,"dd.MM.yyyy HH:mm");return-1===d.lastIndexOf("00:00")?d:c(b,"dd.MM.yyyy")}}]).filter("hoisTimeMin",["$filter",function(a){return function(b){return a("date")(b,"HH:mm")}}]).filter("hoisYear",["$filter",function(a){return function(b){return a("date")(b,"yyyy")}}]),angular.module("hitsaOis").controller("ContractEditController",["$scope","$route","QueryUtils","Classifier","message","$location","dialogService","DataUtils",function(a,b,c,d,e,f,g,h){function i(b){a.formState.isHigher=angular.isObject(b.subject),h.convertObjectToIdentifier(b,["module","theme","enterprise","teacher","contractCoordinator","subject"]),a.contract=b}function j(){return a.formState.enterprisesById={},c.endpoint("/autocomplete/enterprises").query(function(b){b.forEach(function(b){a.formState.enterprisesById[b.id]=b}),a.formState.enterprises=b})}function k(b){c.endpoint("/contracts/studentPracticeModules/"+b.id).query(function(b){a.formState.modulesById={},a.formState.themesById={},b.forEach(function(b){a.formState.modulesById[b.module.id]=b,b.themes.forEach(function(b){a.formState.themesById[b.theme.id]=b})}),a.formState.modules=b.map(function(a){return a.module}),angular.isNumber(a.contract.module)&&a.moduleChanged(a.contract.module)})}function l(b){c.endpoint("/contracts/studentPracticeSubjects/"+b.id).query(function(b){a.formState.subjectsById={},b.forEach(function(b){a.formState.subjectsById[b.id]=b}),a.formState.subjects=b})}function m(){a.contract.module&&!a.contract.theme&&(a.contract.credits=a.formState.modulesById[a.contract.module].credits,a.contract.hours=a.contract.credits*n)}var n=26;a.auth=b.current.locals.auth,a.contract={},a.formState={};var o=b.current.locals.entity;angular.isDefined(o)?i(o):a.formState.isHigher=a.auth.school.higher===!0&&(a.auth.school.vocational===!0&&b.current.params.higher===!0||a.auth.school.vocational===!1),j();var p=d.valuemapper({studyForm:"OPPEVORM"});a.$watch("contract.student",function(b){angular.isObject(b)&&(c.endpoint("/students/"+b.id).search(function(b){a.formState.student=p.objectmapper(b)}),a.formState.isHigher?l(b):k(b))}),a.moduleChanged=function(b){a.formState.modulesById[b]&&(m(),a.formState.themes=a.formState.modulesById[b].themes.map(function(a){return a.theme}),!angular.isDefined(o)&&angular.isString(a.formState.modulesById[b].assessmentMethodsEt)&&(a.contract.practicePlan=a.formState.modulesById[b].assessmentMethodsEt))},a.themeChanged=function(b){a.formState.themesById[b]?(a.contract.credits=a.formState.themesById[b].credits,a.contract.hours=a.contract.credits*n,!angular.isDefined(o)&&angular.isString(a.formState.themesById[b].subthemes)&&(a.contract.practicePlan=a.formState.themesById[b].subthemes)):m()},a.subjectChanged=function(b){a.formState.subjectsById[b]&&(a.contract.credits=a.formState.subjectsById[b].credits,a.contract.hours=a.contract.credits*n,!angular.isDefined(o)&&angular.isString(a.formState.subjectsById[b].outcomesEt)&&(a.contract.practicePlan=a.formState.subjectsById[b].outcomesEt))},a.enterpriseChanged=function(b){var c=a.formState.enterprisesById[b];a.contract.contactPersonName=c.contactPersonName,a.contract.contactPersonEmail=c.contactPersonEmail,a.contract.contactPersonPhone=c.contactPersonPhone};var q=c.endpoint("/enterprises");a.addEnterprise=function(){g.showDialog("contract/enterprise.add.dialog.html",function(a){a.enterprise={}},function(b){var c=new q(b.enterprise);c.$save().then(function(b){e.info("main.messages.create.success"),j().$promise.then(function(){a.contract.enterprise=b.id,a.enterpriseChanged(a.contract.enterprise)})})})};var r=c.endpoint("/contracts");a.save=function(b){if(a.contractForm.$setSubmitted(),!a.contractForm.$valid)return void e.error("main.messages.form-has-errors");a.contract.isHigher=a.formState.isHigher;var c=new r(a.contract);angular.isDefined(a.contract.id)?c.$update().then(function(){e.info("main.messages.create.success"),i(c),angular.isFunction(b)&&b(),a.contractForm.$setPristine()}):c.$save().then(function(){e.info("main.messages.create.success"),f.url("/contracts/"+c.id+"/edit?_noback")})},a["delete"]=function(){g.confirmDialog({prompt:"contract.deleteconfirm"},function(){var b=new r(a.contract);b.$delete().then(function(){e.info("main.messages.delete.success"),f.path("/contracts")})})},a.sendToEkis=function(){return a.contractForm.$setSubmitted(),a.contractForm.$valid?void g.confirmDialog({prompt:"contract.ekisconfirm"},function(){a.save(function(){var b=c.endpoint("/contracts/sendToEkis/"+a.contract.id);(new b).$save().then(function(a){e.info("contract.messages.sendToEkis.success"),f.url("/contracts/"+a.id+"/view?_noback")})})}):void e.error("main.messages.form-has-errors")}}]),angular.module("hitsaOis").controller("ContractViewController",["$scope","$location","$route","QueryUtils","dialogService","ekisService","message",function(a,b,c,d,e,f,g){a.auth=c.current.locals.auth,a.contract=c.current.locals.entity,a.getEkisContractUrl=f.getContractUrl,a["delete"]=function(){e.confirmDialog({prompt:"contract.deleteconfirm"},function(){var c=d.endpoint("/contracts"),e=new c(a.contract);e.$delete().then(function(){g.info("main.messages.delete.success"),b.path("/contracts")})})}}]),angular.module("hitsaOis").controller("ContractListController",["$scope","$route","QueryUtils","Classifier","$q","dialogService","$location",function(a,b,c,d,e,f,g){a.auth=b.current.locals.auth;var h=d.valuemapper({status:"LEPING_STAATUS"});c.createQueryForm(a,"/contracts",{order:"student_person.lastname,student_person.firstname"},h.objectmapper),a.auth.isStudent()&&(a.afterLoadData=function(b){a.tabledata.content=b.content,a.tabledata.totalElements=b.totalElements,h.objectmapper(b.content)}),e.all(h.promises).then(a.loadData),a.newContract=function(){a.auth.school.higher&&a.auth.school.vocational?f.showDialog("contract/vocational.higher.select.dialog.html",function(){},function(a){a.higher===!0?g.path("/contracts/new").search({higher:!0}):g.path("/contracts/new")}):g.path("/contracts/new")}}]),angular.module("hitsaOis").config(["$routeProvider","USER_ROLES",function(a,b){a.when("/contracts",{templateUrl:"contract/contract.list.html",controller:"ContractListController",controllerAs:"contractListController",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}]},data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_LEPING]}}).when("/contracts/new",{templateUrl:"contract/contract.edit.html",controller:"ContractEditController",controllerAs:"contractEditController",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}],isCreate:function(){return!0}},data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_LEPING]}}).when("/contracts/:id/edit",{templateUrl:"contract/contract.edit.html",controller:"ContractEditController",controllerAs:"contractEditController",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}],entity:["QueryUtils","$route",function(a,b){return a.endpoint("/contracts").get({id:b.current.params.id}).$promise}]},data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_LEPING]}}).when("/contracts/:id/view",{templateUrl:"contract/contract.view.html",controller:"ContractViewController",controllerAs:"contractViewController",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}],entity:["QueryUtils","$route",function(a,b){return a.endpoint("/contracts").get({id:b.current.params.id}).$promise}]},data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_LEPING]}})}]),angular.module("hitsaOis").factory("Curriculum",["$resource","config","QueryUtils",function(a,b,c){function d(){}return d.STATUS={ENTERING:"OPPEKAVA_STAATUS_S",PROCEEDING:"OPPEKAVA_STAATUS_M",VERIFIED:"OPPEKAVA_STAATUS_K",CLOSED:"OPPEKAVA_STAATUS_C"},d.VERSION_STATUS={S:"OPPEKAVA_VERSIOON_STAATUS_S",K:"OPPEKAVA_VERSIOON_STAATUS_K",C:"OPPEKAVA_VERSIOON_STAATUS_C"},d.query=function(d,e){var f=a(b.apiUrl+"/curriculum"),g=c.getQueryParams(d);return f.get(g,e)},d.getAreasOfStudyByGroupOfStudy=function(c,d){var e=a(b.apiUrl+"/curriculum/areasOfStudyByGroupOfStudy/"+c);return e.query(d)},d.modulesViewData=function(a){var b={},c={};return a.forEach(function(a){angular.isArray(a.occupations)&&a.occupations.length>0?a.occupations.forEach(function(c){angular.isObject(b[c.code])||(b[c.code]={occupation:c,moduleTypes:{}}),angular.isObject(b[c.code].moduleTypes[a.module.code])||(b[c.code].moduleTypes[a.module.code]={moduleType:a.module,modules:[]}),b[c.code].moduleTypes[a.module.code].modules.push(a)}):(angular.isObject(c[a.module.code])||(c[a.module.code]={moduleType:a.module,modules:[]}),c[a.module.code].modules.push(a))}),{occupationModuleTypesModules:b,modulesWithOutOccupation:c}},d.queryVersions=function(a){return c.endpoint("/autocomplete/curriculumversions").query(a)},d}]),angular.module("hitsaOis").controller("CurriculumListController",["$scope","$sessionStorage","Classifier","DataUtils","QueryUtils","$q","$rootScope","AuthService","$location","$route","Curriculum",function(a,b,c,d,e,f,g,h,i,j,k){function l(){if(a.auth.school){var b=a.criteria.studyLevel;e.endpoint("/school/studyLevels").search().$promise.then(function(c){a.criteria.studyLevel=b,a.studyLevelOptions=c.studyLevels,a.school={higher:a.auth.school.higher,vocational:a.auth.school.vocational}})}else a.school={higher:!0,vocational:!0}}a.auth=j.current.locals.auth;var m=c.valuemapper({origStudyLevel:"OPPEASTE",status:"OPPEKAVA_STAATUS"});e.createQueryForm(a,"/curriculum",{order:a.currentLanguageNameField()},m.objectmapper),f.all(m.promises).then(a.loadData),d.convertStringToDates(a.criteria,["validFrom","validThru"]),l(),e.endpoint("/curriculum/canView").search().$promise.then(function(b){a.canView=b.canView}),e.endpoint("/curriculum/canCreate").search().$promise.then(function(b){a.canCreate=b.canCreate}),a.areasOfStudy=!0,a.$watch("criteria.curriculumGroup",function(){a.criteria.curriculumGroup?k.getAreasOfStudyByGroupOfStudy(a.criteria.curriculumGroup,function(b){a.areasOfStudy=b}):a.areasOfStudy=!0}),a.edit=function(a){a.higher?i.path("/higherCurriculum/"+a.id+"/edit"):i.path("/vocationalCurriculum/"+a.id+"/edit")},a.view=function(a){a.higher?i.path("/higherCurriculum/"+a.id+"/view"):i.path("/vocationalCurriculum/"+a.id+"/view")},a.$watch("criteria.iscedClassCode",function(){a.criteria.iscedClassCode&&!a.criteria.iscedSuun&&a.criteria.iscedVald&&(a.criteria.iscedVald=void 0)}),a.$watch("criteria.iscedSuun",function(){a.criteria.iscedSuun&&!a.criteria.iscedVald&&a.criteria.curriculumGroup&&(a.criteria.curriculumGroup=void 0)})}]),angular.module("hitsaOis").controller("CurriculumPublicListController",["$scope","Classifier","DataUtils","QueryUtils","$q","$route",function(a,b,c,d,e,f){var g=f.current.params.schoolId,h=b.valuemapper({origStudyLevel:"OPPEASTE",status:"OPPEKAVA_STAATUS"});d.createQueryForm(a,"/public/curriculumsearch",{schoolId:g,order:a.currentLanguageNameField()},h.objectmapper),e.all(h.promises).then(a.loadData),c.convertStringToDates(a.criteria,["validFrom","validThru"]),g&&(a.criteria.school=g)}]).controller("CurriculumPublicController",["$scope","QueryUtils","$route",function(a,b,c){function d(b){a.curriculum=b,a.curriculum.studyPeriodMonths=b.studyPeriod%12,a.curriculum.studyPeriodYears=Math.floor(b.studyPeriod/12)}var e=c.current.locals.entity;angular.isDefined(e)&&d(e)}]).controller("CurriculumPublicVersionController",["$scope","Classifier","DataUtils","QueryUtils","$q","$route",function(a,b,c,d,e,f){a.version=f.current.locals.curriculumVersion,a.curriculum=f.current.locals.curriculum}]),angular.module("hitsaOis").config(["$routeProvider","USER_ROLES",function(a,b){a.when("/curriculum",{templateUrl:"curriculum/curriculum.list.html",controller:"CurriculumListController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}]},data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_OPPEKAVA]}}).when("/curriculums/:schoolId?",{templateUrl:"curriculum/curriculum.public.list.html",controller:"CurriculumPublicListController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}]}}).when("/curriculum/:id",{templateUrl:"curriculum/curriculum.public.view.html",controller:"CurriculumPublicController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],entity:["QueryUtils","$route",function(a,b){return a.endpoint("/public/curriculum").get({id:b.current.params.id}).$promise}]}}).when("/curriculum/:curriculumId/version/:id",{templateUrl:"curriculum/curriculum.public.version.html",controller:"CurriculumPublicVersionController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],curriculum:["QueryUtils","$route",function(a,b){return a.endpoint("/public/curriculum").get({id:b.current.params.curriculumId}).$promise}],curriculumVersion:["QueryUtils","$route",function(a,b){return a.endpoint("/public/curriculum/"+b.current.params.curriculumId).get({id:b.current.params.id}).$promise}]}})}]),angular.module("hitsaOis").controller("DeclarationEditController",["$scope","dialogService","QueryUtils","message","ArrayUtils","$route","$location",function(a,b,c,d,e,f,g){var h=c.endpoint("/declarations/subject"),i=c.endpoint("/declarations/confirm"),j=f.current.params.id;a.formState={},a.auth=f.current.locals.auth,a.auth.isStudent()&&!angular.isDefined(j)&&c.endpoint("/declarations/hasPrevious").search().$promise.then(function(b){a.currentNavItem="current",a.formState.showNavBar=b.hasPrevious}),j?a.declaration=c.endpoint("/declarations").get({id:j}):a.declaration=c.endpoint("/declarations/current").get(),a.confirm=function(){b.confirmDialog({prompt:"declaration.prompt.confirm"},function(){new i(a.declaration).$update().then(function(a){d.info("declaration.message.confirmed"),g.path("/declarations/"+a.id+"/view")})})},a.removeConfirmation=function(){b.confirmDialog({prompt:"declaration.prompt.removeConfirmation"},function(){var b=c.endpoint("/declarations/removeConfirm");new b(a.declaration).$update().then(function(b){d.info("declaration.message.confirmationRemoved"),a.declaration=b})})},a.removeSubject=function(b){new h(b).$delete().then(function(){d.info("declaration.message.subjectRemoved"),e.remove(a.declaration.subjects,b)})},a.openAddCurriculumSubject=function(){var e=function(b){b.subjects=c.endpoint("/declarations/subjects/"+a.declaration.id).query(),b.modules=c.endpoint("/declarations/modules/"+a.declaration.id).query(),b.filterSubjectsByModule=function(a){return function(b){return a===b.module.id}},b.filterNotAdded=function(b){return!angular.isDefined(a.declaration.subjects.find(function(a){return a.subject.id===b.subject.id}))},b.addSubject=function(b){var c=new h({subjectStudyPeriod:b.subjectStudyPeriod,declaration:a.declaration.id,curriculumVersionHigherModule:b.module.id,isOptional:b.isOptional});c.$save().then(function(b){d.info("declaration.message.subjectAdded"),b.newlyAdded=!0,a.declaration.subjects.push(b)})}};b.showDialog("declaration/curriculum.subject.add.dialog.html",e,function(){})},a.openAddExtraCurriculumSubject=function(){var e=function(b){function e(){b.subjects=c.endpoint("/declarations/subjects/extracurriculum/"+a.declaration.id).query()}e(),a.getTeachers=function(a){return a.teachers.join(", ")},b.addSubject=function(){if(b.dialogForm.$setSubmitted(),b.subject){var c=new h({subjectStudyPeriod:b.subject.subjectStudyPeriod,declaration:a.declaration.id,curriculumVersionHigherModule:b.subject.module.id,isOptional:!0});c.$save().then(function(c){d.info("declaration.message.subjectAdded"),c.newlyAdded=!0,a.declaration.subjects.push(c),e(),b.subject=void 0})}}};b.showDialog("declaration/extracurriculum.subject.add.dialog.html",e,function(){})},a.hasPrerequisites=function(a){return!e.isEmpty(a.mandatoryPrerequisiteSubjects)||!e.isEmpty(a.recommendedPrerequisiteSubjects)},a.seePrerequisites=function(a){var c=function(b){b.subject=a};b.showDialog("declaration/declaration.subject.prerequisites.html",c,function(){})}}]).controller("DeclarationViewController",["$scope","dialogService","QueryUtils","message","ArrayUtils","$route","$location",function(a,b,c,d,e,f,g){var h=f.current.params.id;a.auth=f.current.locals.auth;var i=c.endpoint("/declarations/confirm");a.formState={},a.auth.isStudent()&&!angular.isDefined(h)&&c.endpoint("/declarations/hasPrevious").search().$promise.then(function(b){a.currentNavItem="current",a.formState.showNavBar=b.hasPrevious}),h?a.declaration=c.endpoint("/declarations").get({id:h},function(){a.formState.declaration=!0}):c.endpoint("/declarations/current").get().$promise.then(function(b){b.id?(a.declaration=b,a.formState.declaration=!0):(a.formState.noDeclaration=!0,c.endpoint("/declarations/isDeclarationPeriod").search().$promise.then(function(b){a.formState.isDeclarationPeriod=b.isDeclarationPeriod,b.declarationPeriodStart?a.formState.declarationPeriodStart=b.declarationPeriodStart:b.declarationPeriodEnd&&(a.formState.declarationPeriodEnd=b.declarationPeriodEnd),a.formState.isDeclarationPeriod&&c.endpoint("/declarations/canCreate").search().$promise.then(function(b){a.formState.canCreateDeclaration=b.canCreate})}))}),a.addDeclaration=function(){var a=c.endpoint("/declarations/create");(new a).$save().then(function(a){g.path("/declarations/"+a.id+"/edit")})},a.confirm=function(){b.confirmDialog({prompt:"declaration.prompt.confirm"},function(){new i(a.declaration).$update().then(function(b){d.info("declaration.message.confirmed"),a.declaration=b})})},a.removeConfirmation=function(){b.confirmDialog({prompt:"declaration.prompt.removeConfirmation"},function(){var b=c.endpoint("/declarations/removeConfirm");new b(a.declaration).$update().then(function(b){d.info("declaration.message.confirmationRemoved"),a.declaration=b})})},a.hasPrerequisites=function(a){return!e.isEmpty(a.mandatoryPrerequisiteSubjects)||!e.isEmpty(a.recommendedPrerequisiteSubjects)},a.seePrerequisites=function(a){var c=function(b){b.subject=a};b.showDialog("declaration/declaration.subject.prerequisites.html",c,function(){})}}]).controller("DeclarationSearchController",["$scope","$route","$q","$timeout","Classifier","DataUtils","QueryUtils","message","dialogService","USER_ROLES","AuthService",function(a,b,c,d,e,f,g,h,i,j,k){var l=b.current.locals.auth;a.canConfirm=k.isAuthorized(j.ROLE_OIGUS_K_TEEMAOIGUS_OPINGUKAVA);var m=e.valuemapper({status:"OPINGUKAVA_STAATUS"});g.createQueryForm(a,"/declarations",{order:"dId"},m.objectmapper),f.convertStringToDates(a.criteria,["inserted","confirmDate"]),a.studyPeriods=g.endpoint("/autocomplete/studyPeriods").query(),a.curriculumVersions=g.endpoint("/autocomplete/curriculumversions").query({higher:!0,valid:!0}),a.studentGroups=g.endpoint("/autocomplete/studentgroups").query();var n=m.promises;n.push(a.studyPeriods.$promise),n.push(a.curriculumVersions.$promise),n.push(a.studentGroups.$promise),a.formState={canCreate:-1!==l.authorizedRoles.indexOf("ROLE_OIGUS_M_TEEMAOIGUS_OPINGUKAVA")};var o=a.loadData;a.loadData=function(){a.declarationSearchForm.$setSubmitted(),a.declarationSearchForm.$valid?o():h.error("main.messages.form-has-errors")},c.all(n).then(function(){if(a.studyPeriods.length>0&&!a.criteria.studyPeriod){var b=f.getCurrentStudyYearOrPeriod(a.studyPeriods);a.criteria.studyPeriod=b?b.id:void 0}a.criteria.studyPeriod?d(a.loadData):0===a.studyPeriods.length&&(a.formState.canCreate=!1,h.error("studyYear.studyPeriod.missing"))}),a.confirmAll=function(){i.confirmDialog({prompt:"declaration.prompt.confirmAll"},function(){g.endpoint("/declarations/confirm/all").put().$promise.then(function(b){h.info("declaration.message.allConfirmed",{numberOfNewlyConfirmedDeclarations:b.numberOfNewlyConfirmedDeclarations}),a.loadData()})})},a.showUncomposed=function(){var a=function(a){g.createQueryForm(a,"/declarations/withoutDeclaration/",{order:"p.lastname,p.firstname"}),a.clearCriteria(),a.loadData()};i.showDialog("declaration/uncomposed.declarations.html",a,function(){})}}]).controller("DeclarationStudentSearchController",["$scope","$q","Classifier","QueryUtils",function(a,b,c,d){a.currentNavItem="previous";var e=c.valuemapper({status:"OPINGUKAVA_STAATUS"});d.createQueryForm(a,"/declarations/previous",{
order:"dId"},e.objectmapper),b.all(e.promises).then(a.loadData)}]).controller("DeclarationNewController",["$scope","QueryUtils","message","$location",function(a,b,c,d){a.studyPeriod=b.endpoint("/declarations/currentStudyPeriod").search(),a.save=function(){if(a.declarationNewForm.$setSubmitted(),a.declarationNewForm.$valid){var e=b.endpoint("/declarations/create/"+a.student.id);(new e).$save().then(function(a){c.info("main.messages.create.success"),d.url("/declarations/"+a.id+"/edit?_noback")})}}}]),angular.module("hitsaOis").config(["$routeProvider","USER_ROLES",function(a,b){a.when("/declarations",{templateUrl:"declaration/declaration.search.html",controller:"DeclarationSearchController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}]},data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_OPINGUKAVA]}}).when("/declarations/:id/view",{templateUrl:"declaration/declaration.view.html",controller:"DeclarationViewController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}]},data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_OPINGUKAVA]}}).when("/declaration/current/edit",{templateUrl:"declaration/declaration.edit.html",controller:"DeclarationEditController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}]},data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_OPINGUKAVA]}}).when("/declarations/:id/edit",{templateUrl:"declaration/declaration.edit.html",controller:"DeclarationEditController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}]},data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_OPINGUKAVA]}}).when("/declaration/current/view",{templateUrl:"declaration/declaration.view.html",controller:"DeclarationViewController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}]},data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_OPINGUKAVA]}}).when("/declarations/previous",{templateUrl:"declaration/declaration.student.search.html",controller:"DeclarationStudentSearchController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}]},data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_OPINGUKAVA]}}).when("/declarations/new",{templateUrl:"declaration/declaration.new.html",controller:"DeclarationNewController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}]},data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_OPINGUKAVA]}})}]),angular.module("hitsaOis").controller("DirectiveEditController",["$location","$mdDialog","$q","$route","$scope","dialogService","message","resourceErrorHandler","Classifier","Curriculum","DataUtils","QueryUtils","Session",function(a,b,c,d,e,f,g,h,i,j,k,l,m){function n(){e.formState.scholarshipEditable=-1!==["STIPTOETUS_ERI","STIPTOETUS_SOIDU","STIPTOETUS_DOKTOR"].indexOf(e.record.scholarshipType)}function o(){var a=e.record.type?e.record.type.substr(9).toLowerCase():"unknown";e.formState.templateUrl="directive/directive.type."+a+".edit.html"}function p(a){return k.convertStringToDates(a,["startDate","endDate"])}function q(a){if(e.formState.cancelSelect=a&&"KASKKIRI_TYHIST"===a.type,e.formState.cancelSelect){var b=a.canceledDirectiveType?a.canceledDirectiveType.substr(9).toLowerCase():"unknown";e.formState.templateUrl="directive/directive.type."+b+".view.html",e.formState.canceledDirective=a.canceledDirectiveData,e.formState.changedStudents=a.changedStudents||[];var c=a.selectedStudents||[];e.record.students=(a.canceledStudents||[]).map(function(a){return a.selectable=-1===e.formState.changedStudents.indexOf(a.student),a}),e.formState.selectedStudents=e.record.students.filter(function(a){return-1!==c.indexOf(a.student)}),delete a.canceledDirectiveType,delete a.canceledDirectiveData,delete a.changedStudents,delete a.canceledStudents,delete a.selectedStudents,e.cancelTypeChanged()}else if(o(),n(),e.record.students=p(e.record.students),a&&"KASKKIRI_IMMAT"===a.type)for(var d=0,f=e.record.students.length;f>d;d++)e.record.students[d]._found=!0,e.record.students[d]._idcode=e.record.students[d].idcode,e.record.students[d]._foreign=!e.record.students[d].idcode}function r(){var a=e.record.type;-1!==["KASKKIRI_ENNIST","KASKKIRI_IMMAT","KASKKIRI_IMMATV","KASKKIRI_OKAVA","KASKKIRI_OVORM"].indexOf(a)&&(e.formState.studentGroups=l.endpoint("/autocomplete/studentgroups").query({valid:!0}),e.formState.curriculumVersions&&c.all([e.formState.studentGroups.$promise,e.formState.curriculumVersions.$promise]).then(function(){function a(a){return a.curriculumVersion?[a.curriculumVersion]:e.formState.curriculumVersions.filter(function(b){return b.curriculum===a.curriculum}).map(function(a){return a.id})}var b=e.formState.studentGroups;e.formState.studentGroupMap={};for(var c=0;c<b.length;c++)for(var d=b[c],f=a(d),g=0;g<f.length;g++){var h=f[g],i=e.formState.studentGroupMap[h];i||(i=[],e.formState.studentGroupMap[h]=i),i.push(d)}})),("KASKKIRI_AKAD"===a||"KASKKIRI_VALIS"===a)&&(e.formState.studyPeriods=l.endpoint("/autocomplete/studyPeriods").query())}function s(a,b){var c={type:e.record.type,scholarshipType:e.record.scholarshipType,canceledDirective:A,curriculumVersion:e.formState.curriculumVersion,studyLevel:e.formState.studyLevel,students:a.map(function(a){return a.id})};l.endpoint(B+"/directivedata").save(c,b)}function t(a){h.responseError(a,e.directiveForm)["catch"](angular.noop)}function u(){return e.directiveForm.$setSubmitted(),e.directiveForm.$valid?!0:(g.error("main.messages.form-has-errors"),!1)}function v(){"KASKKIRI_TYHIST"===e.record.type&&(e.record.selectedStudents=e.formState.selectedStudents.map(function(a){return a.student}))}function w(a,b){a.$serverError=void 0,a.$setValidity(b,null)}function x(){var a=e.directiveForm.$error;a&&Object.keys(a).forEach(function(b){var c=a[b].slice();c.forEach(function(a){w(a,b)})})}function y(a){s(a,function(a){for(var b=0,c=a.students.length;c>b;b++)e.record.students.push(p(a.students[b]))})}var z=d.current.params.id,A=d.current.params.canceledDirective,B="/directives";e.formState={state:z||A?"EDIT":"CHOOSETYPE",students:void 0,changedStudents:[],selectedStudents:[],excludedTypes:["KASKKIRI_KYLALIS"],school:m.school||{},higherStudyForms:i.queryForDropdown({mainClassCode:"OPPEVORM",higher:!0}),scholarshipEditable:!1},A||e.formState.excludedTypes.push("KASKKIRI_TYHIST"),e.formState.school.higher||(e.formState.excludedTypes.push("KASKKIRI_OKOORM"),e.formState.excludedTypes.push("KASKKIRI_OVORM"),e.formState.excludedTypes.push("KASKKIRI_VALIS")),e.formState.curriculumVersionMap={},e.formState.languageMap={},e.formState.curriculumVersions=j.queryVersions({valid:!0,languages:!0}),e.formState.curriculumVersions.$promise.then(function(a){e.formState.curriculumVersionMap=a.reduce(function(a,b){return a[b.id]=b,a},{});for(var b=0;b<a.length;b++){var c=a[b];e.formState.languageMap[c.id]=c.studyLang||[]}});var C=l.endpoint(B);z?e.formState.curriculumVersions.$promise.then(function(){e.record=C.get({id:z}),e.record.$promise.then(q).then(r)}):(e.record=new C({students:[]}),A?(e.record.type="KASKKIRI_TYHIST",s([],function(a){var b=a.toJSON();angular.copy(b,e.record),q(b)})):q()),e.update=function(){x(),u()&&(v(),e.record.id?e.record.$update2().then(q).then(g.updateSuccess)["catch"](t):e.record.$save2().then(function(){g.info("main.messages.create.success"),a.url(B+"/"+e.record.id+"/edit?_noback")})["catch"](t))},e["delete"]=function(){f.confirmDialog({prompt:"directive.deleteconfirm"},function(){e.record.$delete().then(function(){g.info("main.messages.delete.success"),a.url(B+"?_noback")})["catch"](angular.noop)})},e.directiveTypeChanged=function(){var a={type:e.record.type};"KASKKIRI_EKSMAT"===a.type&&(a.application=!0);var b="KASKKIRI_STIPTOET"===a.type||"KASKKIRI_STIPTOETL"===a.type;b&&(a.scholarshipType=e.record.scholarshipType),"KASKKIRI_IMMAT"!==a.type&&"KASKKIRI_IMMATV"!==a.type?(!b||a.scholarshipType)&&l.endpoint(B+"/findstudents").search(a,function(a){e.formState.students=a.content,e.formState.selectedStudents=[],e.formState.students.length||g.info("directive.nostudentsfound")}):(e.formState.students=[],"KASKKIRI_IMMATV"!==a.type||e.formState.saisCurriculumVersions||(e.formState.saisCurriculumVersions=j.queryVersions({sais:!0}))),o()},e.scholarshipTypeChanged=function(){n(),e.record.scholarshipType&&e.directiveTypeChanged()},e.addDirective=function(){e.formState.state="EDIT",s(e.formState.selectedStudents,function(a){angular.copy(a.toJSON(),e.record),e.record.students=p(a.students)}),r()},e.deleteStudent=function(a){for(var b=e.record.students,c=0,d=b.length;d>c;c++)if(b[c]===a){b.splice(c,1);break}},e.addStudents=function(){var a=e.record.type,c=e.record.students;if("KASKKIRI_IMMAT"===a)return void c.push({startDate:null});var d={type:a,directive:z};("KASKKIRI_STIPTOET"===a||"KASKKIRI_STIPTOETL"===a)&&(d.scholarshipType=e.record.scholarshipType),b.show({controller:["$scope",function(a){var e="/directives/findstudents";a.formState={selectedStudents:[],type:d.type},l.createQueryForm(a,e),a.cancel=b.hide,a.select=function(){y(a.formState.selectedStudents),b.hide()},c=c.map(function(a){return a.student}),a.loadData=function(){var b=angular.extend(l.getQueryParams(a.criteria),d);a.tabledata.$promise=l.endpoint(e).search(b,function(b){b.content=b.content.filter(function(a){return-1===c.indexOf(a.id)}),a.afterLoadData(b)})},a.loadData()}],templateUrl:"directive/student.select.dialog.html",clickOutsideToClose:!1})},e.foreignChanged=function(a){a._foreign?(a.foreignIdcode=a.idcode,a.idcode=void 0):(a.idcode=a.foreignIdcode,a.foreignIdcode=void 0),a._idcode=void 0,e.lookupStudent(a)},e.lookupStudent=function(a){var b="students["+e.record.students.indexOf(a)+"].idcode",c=e.directiveForm[b];c&&w(c,"serverside");var d=a._foreign?a.foreignIdcode:a.idcode;d&&(11===d.length||a._foreign)&&d!==a._idcode?(a._idcode=d,l.endpoint("/autocomplete/persons",{search:{method:"GET"}}).search(a._foreign?{foreignIdcode:d,role:"foreignidcode"}:{idcode:d,role:"person"}).$promise.then(function(b){a._found=!0,a.firstname=b.firstname,a.lastname=b.lastname,a.birthdate=b.birthdate,a.sex=b.sex,a.citizenship=b.citizenship})["catch"](function(b){404===b.status?g.info("directive.newperson"):412===b.status?(c.$serverError=c.$serverError||[],c.$serverError.push({code:"InvalidEstonianIdCode"}),c.$setValidity("serverside",!1)):t(b),a._found=!1,a.firstname=void 0,a.lastname=void 0,a._foreign||404!==b.status?(a.birthdate=void 0,a.sex=void 0,a.citizenship=void 0):(a.birthdate=k.birthdayFromIdcode(d),a.sex=k.sexFromIdcode(d),a.citizenship="RIIK_EST")})):d!==a._idcode&&(a._found=!1,!a._foreign&&d&&c&&(c.$serverError=c.$serverError||[],c.$serverError.push({code:"InvalidEstonianIdCode"}),c.$setValidity("serverside",!1)))},e.abroadChanged=function(a){var b="RIIK_EST";a.isAbroad?a.country===b&&(a.country=null):a.country=b},e.curriculumVersionChanged=function(a){var b=e.formState.curriculumVersionMap[a.curriculumVersion];b&&b.isVocational&&(a.studyForm=b.studyForm)},e.visibleStudyForms=function(a){return a?(a=e.formState.curriculumVersionMap[a],a&&a.isVocational?[a.studyForm]:e.formState.higherStudyForms):void 0},e.cancelTypeChanged=function(){if("KASKKIRI_TYHISTAMISE_VIIS_T"===e.record.cancelType){var a=[];e.record.students.forEach(function(b){b.selectable=!1,a.push(b)}),e.formState.selectedStudents=a}else"KASKKIRI_TYHISTAMISE_VIIS_O"===e.record.cancelType&&e.record.students.forEach(function(a){a.selectable=-1===e.formState.changedStudents.indexOf(a.student)})},e.sendToConfirm=function(b){function c(){v(),e.record.$update2().then(q).then(function(){l.endpoint(B+"/sendtoconfirm/"+e.record.id+"?ekis="+b,{put:{method:"PUT"}}).put().$promise.then(function(b){var h=b?b.invalidStudents:void 0;h&&h.length>0?d||f.showDialog("directive/invalid.student.delete.dialog.html",function(a){a.students=h},function(){h.forEach(function(a){e.deleteStudent(a.idcode)}),d=!0,c()}):(g.info("directive.sentToConfirm"),a.url(B+"/"+e.record.id+"/view?_noback"))})["catch"](t)})["catch"](t)}if(x(),e.directiveForm.directiveCoordinator.$setValidity("required",!!e.record.directiveCoordinator),u()){var d=!1;f.confirmDialog({prompt:"directive.ekisconfirm"},c)}}}]).controller("DirectiveViewController",["$location","$route","$scope","dialogService","message","Classifier","QueryUtils","Session",function(a,b,c,d,e,f,g,h){var i=b.current.params.id,j="/directives",k=f.valuemapper({status:"KASKKIRI_STAATUS"});c.formState={school:h.school||{}},c.record=g.endpoint(j+"/:id/view").search({id:i}),c.record.$promise.then(function(){var a="KASKKIRI_TYHIST"===c.record.type?c.record.canceledDirectiveType.substr(9).toLowerCase():c.record.type?c.record.type.substr(9).toLowerCase():"unknown";c.formState.templateUrl="directive/directive.type."+a+".view.html",k.objectmapper(c.record.cancelingDirectives||[]),c.record.students.forEach(function(a){a._foreign=!a.idcode})}),c.cancelDirective=function(){d.confirmDialog({prompt:"directive.cancelconfirm"},function(){a.url("/directives/new?canceledDirective="+c.record.id+"&_noback")})},c.confirmDirective=function(){d.confirmDialog({prompt:"directive.confirmconfirm"},function(){g.endpoint(j+"/confirm").update(c.record).$promise.then(function(){e.info("directive.confirmed"),b.reload()})})}}]).controller("DirectiveListController",["$q","$route","$scope","Classifier","QueryUtils","Session",function(a,b,c,d,e,f){c.formState={excludedTypes:["KASKKIRI_KYLALIS"],school:f.school||{}},c.formState.school.higher||(c.formState.excludedTypes.push("KASKKIRI_OKOORM"),c.formState.excludedTypes.push("KASKKIRI_OVORM"),c.formState.excludedTypes.push("KASKKIRI_VALIS"));var g=b.current.locals.clMapping,h=g?d.valuemapper(g):void 0;e.createQueryForm(c,b.current.locals.url,b.current.locals.params,h?h.objectmapper:void 0),h?a.all(h.promises).then(c.loadData):c.loadData()}]),angular.module("hitsaOis").controller("DirectiveCoordinatorEditController",["$location","$route","$scope","dialogService","message","QueryUtils",function(a,b,c,d,e,f){var g=b.current.params.id,h="/directives/coordinators",i=f.endpoint(h);g?c.record=i.get({id:g}):c.record=new i,c.update=function(){return c.directiveCoordinatorForm.$setSubmitted(),c.directiveCoordinatorForm.$valid?void(c.record.id?c.record.$update().then(e.updateSuccess)["catch"](angular.noop):c.record.$save().then(function(){e.info("main.messages.create.success"),a.url(h+"/"+c.record.id+"/edit?_noback")})["catch"](angular.noop)):void e.error("main.messages.form-has-errors")},c["delete"]=function(){d.confirmDialog({prompt:"directive.coordinator.deleteconfirm"},function(){c.record.$delete().then(function(){e.info("main.messages.delete.success"),a.url(h+"?_noback")})["catch"](angular.noop)})}}]),angular.module("hitsaOis").config(["$routeProvider","USER_ROLES",function(a,b){a.when("/directives/coordinators",{templateUrl:"directive/coordinator.search.html",controller:"SimpleListController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],params:function(){return{order:"name"}},url:function(){return"/directives/coordinators"}},data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_DOKALLKIRI]}}).when("/directives",{templateUrl:"directive/list.html",controller:"DirectiveListController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],clMapping:function(){return{type:"KASKKIRI",status:"KASKKIRI_STAATUS"}},params:function(){return{order:"-inserted"}},url:function(){return"/directives"}},data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_KASKKIRI]}}).when("/directives/new",{templateUrl:"directive/directive.edit.html",controller:"DirectiveEditController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}]},data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_KASKKIRI]}}).when("/directives/:id/edit",{templateUrl:"directive/directive.edit.html",controller:"DirectiveEditController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}]},data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_KASKKIRI]}}).when("/directives/:id/view",{templateUrl:"directive/directive.view.html",controller:"DirectiveViewController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}]},data:{authorizedRoles:function(a,c){return"ROLL_T"===a.roleCode||"ROLL_L"===a.roleCode||("ROLL_A"===a.roleCode||"ROLL_O"===a.roleCode)&&-1!==(c||[]).indexOf(b.ROLE_OIGUS_V_TEEMAOIGUS_KASKKIRI)}}}).when("/directives/coordinators/new",{templateUrl:"directive/coordinator.edit.html",controller:"DirectiveCoordinatorEditController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}]},data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_DOKALLKIRI]}}).when("/directives/coordinators/:id/edit",{templateUrl:"directive/coordinator.edit.html",controller:"DirectiveCoordinatorEditController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}]},data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_DOKALLKIRI]}})}]),angular.module("hitsaOis").controller("ExamSearchController",["$q","$route","$scope","$timeout","message","Classifier","DataUtils","QueryUtils",function(a,b,c,d,e,f,g,h){c.auth=b.current.locals.auth;var i=f.valuemapper({type:"SOORITUS"});h.createQueryForm(c,"/exams",{order:"start"},i.objectmapper),c.formState={studyPeriods:h.endpoint("/autocomplete/studyPeriods").query()};var j=i.promises;j.push(c.formState.studyPeriods.$promise),a.all(j).then(function(){if(c.formState.studyPeriods.length>0&&!c.criteria.studyPeriod){var a=g.getCurrentStudyYearOrPeriod(c.formState.studyPeriods);c.criteria.studyPeriod=a?a.id:void 0}c.criteria.studyPeriod?d(c.loadData):0===c.formState.studyPeriods.length&&e.error("studyYear.studyPeriod.missing")})}]).controller("ExamStudentController",["$q","$scope","dialogService","Classifier","QueryUtils",function(a,b,c,d,e){var f=d.valuemapper({assessment:"HINDAMISVIIS",type:"SOORITUS"});e.createQueryForm(b,"/exams/forregistration",{order:"start"}),b.afterLoadData=function(a){b.tabledata.content=a.content,b.tabledata.totalElements=a.totalElements,f.objectmapper(a.content)},a.all(f.promises).then(b.loadData),b.register=function(){},b.unregister=function(){}}]),angular.module("hitsaOis").config(["$routeProvider","USER_ROLES",function(a,b){a.when("/examTimes",{templateUrl:"exam/search.html",controller:"ExamSearchController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}]},data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_EKSAM]}}).when("/examRegistration",{templateUrl:"exam/registration.student.html",controller:"ExamStudentController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}]},data:{authorizedRoles:function(a){return"ROLL_T"===a.roleCode}}})}]),angular.module("hitsaOis").config(["$routeProvider","USER_ROLES",function(a,b){a.when("/thesisTopics",{templateUrl:"fakePages/fake.html",controller:"fakeController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}]},data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_LOPTEEMA]}}).when("/thesisProtocols",{templateUrl:"fakePages/fake.html",controller:"fakeController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}]},data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_LOPPROTOKOLL]}}).when("/forms",{templateUrl:"fakePages/fake.html",controller:"fakeController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}]},data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_LOPBLANKETT]}}).when("/documentsPreparation",{templateUrl:"fakePages/fake.html",controller:"fakeController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}]},data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_DIPLOM,b.ROLE_OIGUS_V_TEEMAOIGUS_HINNETELEHT]}}).when("/documentsPrint",{templateUrl:"fakePages/fake.html",controller:"fakeController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}]},data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_DIPLOM,b.ROLE_OIGUS_V_TEEMAOIGUS_HINNETELEHT]}}).when("/viewTimetable",{templateUrl:"fakePages/fake.html",controller:"fakeController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}]},data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_TUNNIPLAAN]}}).when("/thesisTopicInput",{templateUrl:"fakePages/fake.html",controller:"fakeController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}]},data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_LOPTEEMA]}}).when("/myData",{templateUrl:"fakePages/fake.html",controller:"fakeController",controllerAs:"controller",resolve:{translationLoaDed:["$translate",function(a){return a.onReady()}]},data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_OPETAJA,b.ROLE_OIGUS_V_TEEMAOIGUS_OPPUR]}}).when("/timetable",{templateUrl:"fakePages/fake.html",controller:"fakeController",controllerAs:"controller",resolve:{translationLoaDed:["$translate",function(a){return a.onReady()}]},data:{authorizedRoles:[]}}).when("/myTimetable",{templateUrl:"fakePages/fake.html",controller:"fakeController",controllerAs:"controller",resolve:{translationLoaDed:["$translate",function(a){return a.onReady()}]},data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_TUNNIPLAAN]}}).when("/loads",{templateUrl:"fakePages/fake.html",controller:"fakeController",controllerAs:"controller",resolve:{translationLoaDed:["$translate",function(a){return a.onReady()}]},data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_KOORMUS]}}).when("/studentInfo",{templateUrl:"fakePages/fake.html",controller:"fakeController",controllerAs:"controller",resolve:{translationLoaDed:["$translate",function(a){return a.onReady()}]},data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_A]}})}]).controller("fakeController",["$scope","QueryUtils",function(a,b){b.endpoint("/fake/get505Error").search()}]),angular.module("hitsaOis").controller("GeneralMessageSearchController",["$scope","$sessionStorage","Classifier","DataUtils","QueryUtils","USER_ROLES","AuthService",function(a,b,c,d,e,f,g){a.canEdit=g.isAuthorized(f.ROLE_OIGUS_M_TEEMAOIGUS_YLDTEADE),a.roleDefs=c.queryForDropdown({mainClassCode:"ROLL"}),a.fromStorage=function(a){var c=JSON.parse(b[a]||"{}");return d.convertStringToDates(c,["validFrom","validThru"]),c};var h=new Date;h.setHours(0,0,0,0),e.createQueryForm(a,"/generalmessages",{validFrom:h,order:"validFrom"},function(b){for(var c=function(b){return a.roleDefs[b]},d=0;d<b.length;d++){var e=b[d];e.targets=(e.targets||[]).map(c)}}),a.roleDefs.$promise.then(function(){a.roleDefs=c.toMap(a.roleDefs),a.loadData()})}]).controller("GeneralMessageEditController",["$location","$route","$scope","dialogService","message","Classifier","QueryUtils",function(a,b,c,d,e,f,g){function h(){f.setSelectedCodes(c.roleDefs,c.record.targets||[])}var i=b.current.params.id,j="/generalmessages";c.roleDefs=f.queryForDropdown({mainClassCode:"ROLL",filterValues:["ROLL_H","ROLL_P","ROLL_V"]},function(){var a=g.endpoint(j);if(i)c.record=a.get({id:i},h);else{var b=new Date;b.setHours(0,0,0,0),c.record=new a({validFrom:b,validThru:null}),h()}}),c.targetChanged=function(){c.generalMessageForm.$submitted&&c.generalMessageForm.$setPristine()},c.isFormValid=function(){return c.generalMessageForm.$valid},c.update=function(){return c.generalMessageForm.$setSubmitted(),c.record.targets=f.getSelectedCodes(c.roleDefs),c.isFormValid()&&0!==c.record.targets.length?void(c.record.id?c.record.$update(h).then(e.updateSuccess):c.record.$save(h).then(function(){e.info("main.messages.create.success"),a.url(j+"/"+c.record.id+"/edit")})):void e.error("main.messages.form-has-errors")},c["delete"]=function(){d.confirmDialog({prompt:"generalmessage.deleteconfirm"},function(){c.record.$delete().then(function(){e.info("main.messages.delete.success"),a.url(j)})})}}]).controller("GeneralMessageViewController",["$route","$scope","QueryUtils","USER_ROLES","AuthService",function(a,b,c,d,e){var f=a.current.params.id;b.canEdit=e.isAuthorized(d.ROLE_OIGUS_M_TEEMAOIGUS_YLDTEADE),b.record=c.endpoint("/generalmessages").get({id:f})}]),angular.module("hitsaOis").config(["$routeProvider","USER_ROLES",function(a,b){a.when("/generalmessages",{templateUrl:"generalMessage/general.message.list.html",controller:"GeneralMessageSearchController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}]},data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_YLDTEADE]}}).when("/generalmessages/new",{templateUrl:"generalMessage/general.message.edit.html",controller:"GeneralMessageEditController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}]},data:{authorizedRoles:[b.ROLE_OIGUS_M_TEEMAOIGUS_YLDTEADE]}}).when("/generalmessages/:id/edit",{templateUrl:"generalMessage/general.message.edit.html",controller:"GeneralMessageEditController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}]},data:{authorizedRoles:[b.ROLE_OIGUS_M_TEEMAOIGUS_YLDTEADE]}}).when("/generalmessages/:id/view",{templateUrl:"generalMessage/general.message.view.html",controller:"GeneralMessageViewController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}]},data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_YLDTEADE]}})}]),angular.module("hitsaOis").controller("HigherCurriculumController",["$scope","Classifier","Curriculum","dialogService","ArrayUtils","message","$route","$location","QueryUtils","oisFileService","DataUtils","$rootScope","config","Session",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){function o(){L?i.endpoint("/curriculum/schoolDepartments/"+L).query().$promise.then(function(b){a.schoolDepartments=b}):D()}function p(){i.endpoint("/curriculum/studyLevels").query({curriculum:L,isHigher:!0}).$promise.then(function(b){a.studyLevels=b})}function q(){a.jointPartnersEhisSchools=[],a.myEhisSchool=a.curriculum.id?a.curriculum.ehisSchool:n.school.ehisSchool,a.jointPartnersEhisSchools.push(a.myEhisSchool),a.curriculum.jointPartners.forEach(function(b){b.ehisSchool&&a.jointPartnersEhisSchools.push(b.ehisSchool)})}function r(){k.convertStringToDates(a.curriculum,["validFrom","validThru","approval","ehisChanged","accreditationDate","accreditationValidDate","merRegDate"]),s(),t(),a.getAreasOfStudy(),F(),a.formState.jointDisabled=E(),q(),a.curriculum.abroad=!1,a.formState.notEditableBasicData=a.curriculum.status===c.STATUS.VERIFIED,a.formState.sentToEhis="OPPEKAVA_EHIS_STAATUS_A"===a.curriculum.ehisStatus||"OPPEKAVA_EHIS_STAATUS_M"===a.curriculum.ehisStatus,a.formState.strictValidation=!1}function s(){var b=12;a.curriculum.studyPeriodYears=Math.floor(a.curriculum.studyPeriod/b),a.curriculum.studyPeriodMonths=a.curriculum.studyPeriod%b}function t(){a.curriculum.iscedClass&&(-1!==a.curriculum.iscedClass.indexOf("ISCED_VALD")?a.curriculum.areaOfStudy=a.curriculum.iscedClass:b.getParentsWithMainClass("ISCED_VALD",a.curriculum.iscedClass).$promise.then(function(b){a.curriculum.areaOfStudy=b[0].code,a.curriculum.fieldOfStudy=a.curriculum.iscedClass}))}function u(){return a.higherCurriculumForm.$valid&&(!a.strictValidation()||a.curriculum.specialities.length>0&&a.jointPartnersAdded())}function v(){if(a.curriculum.joint){if(O(),x()){var b={abroad:a.curriculum.abroad,supervisor:a.curriculum.supervisor,contractEt:a.curriculum.contractEt,contractEn:a.curriculum.contractEn};a.curriculum.jointPartners.push(b)}}else w()}function w(){a.curriculum.abroad=!1,a.curriculum.jointPartners=[],a.curriculum.supervisor=void 0,a.curriculum.jointMentor=void 0,a.curriculum.contractEt=void 0,a.curriculum.contractEn=void 0}function x(){return e.isEmpty(a.curriculum.jointPartners)&&(angular.isDefined(a.curriculum.supervisor)||angular.isDefined(a.curriculum.contractEt)||angular.isDefined(a.curriculum.contractEn))}function y(b){if(a.higherCurriculumForm.$setSubmitted(),!u()){var c=b&&b.errorMessage?b.errorMessage:"main.messages.form-has-errors";return f.error(c),!1}return a.strictValidation()&&!a.hasVerifiedVersions()?(f.error("curriculum.error.noVersion"),!1):!0}function z(){a.formState.readOnly||h.path("/higherCurriculum/"+a.curriculum.id+"/view")}function A(){v(),C(),a.curriculum.iscedClass=a.curriculum.fieldOfStudy?a.curriculum.fieldOfStudy:a.curriculum.areaOfStudy,a.curriculum.studyPeriodMonths=a.curriculum.studyPeriodMonths?a.curriculum.studyPeriodMonths:0,a.curriculum.studyPeriod=a.curriculum.studyPeriodMonths+12*a.curriculum.studyPeriodYears}function B(b){y(b)&&(A(),a.curriculum.id?a.curriculum.$update().then(function(){var c=b&&b.updateSuccess?b.updateSuccess:"main.messages.create.success";f.info(c),r(),a.higherCurriculumForm.$setPristine()}):(a.curriculum.newFiles=a.curriculum.files,a.curriculum.files=void 0,a.curriculum.$save().then(function(a){f.info("main.messages.create.success"),h.path("/higherCurriculum/"+a.id+"/edit")})))}function C(){a.gradeRequired()||(a.curriculum.grades=[])}function D(){i.endpoint("/curriculum/schoolDepartments").query({ehisShools:a.jointPartnersEhisSchools,curriculum:L}).$promise.then(function(b){if(a.schoolDepartments=b,a.curriculum.schoolDepartments){var c=b.map(function(a){return a.id});a.curriculum.schoolDepartments=a.curriculum.schoolDepartments.filter(function(a){return e.includes(c,a)})}})}function E(){return!a.curriculum.joint||e.isEmpty(a.curriculum.jointPartners)?!1:a.curriculum.jointPartners.some(function(a){return a.hasSubjects})}function F(){a.curriculum.jointPartners&&a.curriculum.jointPartners.length>0&&(a.curriculum.abroad=!1,a.curriculum.contractEt=a.curriculum.jointPartners[0].contractEt,a.curriculum.contractEn=a.curriculum.jointPartners[0].contractEn,a.curriculum.supervisor=a.curriculum.jointPartners[0].supervisor,1!==a.curriculum.jointPartners.length||a.curriculum.jointPartners[0].ehisSchool||a.curriculum.jointPartners[0].nameEt||a.curriculum.jointPartners[0].nameEn||(a.curriculum.jointPartners=[]))}function G(b,c,g,h){d.confirmDialog({prompt:"curriculum.itemDeleteConfirm"},function(){c.data.id?new h(c.data).$delete().then(function(){f.info("main.messages.delete.success"),e.remove(b,g)}):(e.remove(b,g),a.higherCurriculumForm.$setDirty()),c.cancel()})}function H(b,c,d,e){if(a.curriculum.id){var g=new b(c);c.id?g.$update().then(function(a){f.info("main.messages.update.success"),angular.extend(e,a)}):g.$save().then(function(a){f.info("main.messages.create.success"),d.push(a)})}else e?angular.extend(e,c):d.push(c),a.higherCurriculumForm.$setDirty()}function I(b,c){new b(a.curriculum).$update().then(function(b){a.curriculum=b,f.info(c.updateSuccess),r(),z(),a.higherCurriculumForm.$setPristine()})}a.STATUS=c.STATUS,a.maxStydyYears={max:100};var J,K="/curriculum",L=g.current.params.id;a.publicUrl=m.apiUrl+"/public/curriculum/"+L+"?format=json",a.formState={readOnly:-1!==g.current.$$route.originalPath.indexOf("view"),curriculumXmlUrl:m.apiUrl+K+"/xml/"+L+"/curriculum.xml",strictValidation:!1},o(),a.removeFromArray=function(a,b){d.confirmDialog({prompt:"curriculum.itemDeleteConfirm"},function(){e.remove(a,b)})};var M=i.endpoint(K),N={files:[],specialities:[],grades:[],studyLanguages:[],departments:[],
versions:[],jointPartners:[],higher:!0,status:c.STATUS.ENTERING,consecution:"OPPEKAVA_TYPE_E",draft:"OPPEKAVA_LOOMISE_VIIS_PUUDUB",joint:!1,abroad:!1,studyPeriodMonths:0,validFrom:new Date};a.studyLevels=[],p(),a.areasOfStudy=[],a.getAreasOfStudy=function(b){b&&(a.curriculum.areaOfStudy=void 0),a.curriculum.group&&c.getAreasOfStudyByGroupOfStudy(a.curriculum.group,function(b){a.areasOfStudy=b})},a.clearIscedClass=function(){a.curriculum.fieldOfStudy=void 0},L?M.get({id:L}).$promise.then(function(b){J=i.endpoint(K+"/"+L+"/file"),a.curriculum=b,r(),l.removeLastUrlFromHistory(function(b){return b==="#/higherCurriculum/"+a.curriculum.id+"/view"||b==="#/higherCurriculum/"+a.curriculum.id+"/edit"||"#/higherCurriculum/new"===b})}):(a.curriculum=new M(N),q(),a.formState.curriculum={status:a.curriculum.status}),a.gradeRequired=function(){return!a.curriculum||!a.curriculum.origStudyLevel||"OPPEASTE_514"!==a.curriculum.origStudyLevel},a.jointPartnersAdded=function(){return!a.curriculum.joint||a.curriculum.jointPartners.length>0},a.codeUniqueQuery={id:L,url:K+"/unique/code"},a.merCodeUniqueQuery={id:L,url:K+"/unique/merCode"},a.hasVerifiedVersions=function(){var b=a.curriculum.versions;return e.isEmpty(b)?!1:!e.isEmpty(b.filter(function(a){return a.status===c.VERSION_STATUS.K}))},a.save=function(){a.formState.strictValidation=!1,setTimeout(B,0)},a.getStar=function(){return a.strictValidation()?"":" *"},a.strictValidation=function(){return a.curriculum&&(a.curriculum.status===c.STATUS.VERIFIED||a.curriculum.status===c.STATUS.PROCEEDING||a.formState.strictValidation)},a.changeJointMentors=function(){a.curriculum.abroad&&(a.jointPartnersEhisSchools=[])},a["delete"]=function(){d.confirmDialog({prompt:"curriculum.deleteconfirmHigher"},function(){a.curriculum.$delete().then(function(){f.info("main.messages.delete.success"),h.path(K)})})},a.$watch("curriculum.joint",function(a,b){b&&!a&&(w(),q(),D())}),a.removejointPartner=function(b){d.confirmDialog({prompt:"curriculum.itemDeleteConfirm"},function(){e.remove(a.curriculum.jointPartners,b),b.abroad||(e.remove(a.jointPartnersEhisSchools,b.ehisSchool),a.curriculum.jointMentor===b.ehisSchool&&(a.curriculum.jointMentor=void 0)),a.higherCurriculumForm.$setDirty(),D()})},a.addJointPartner=function(){var b={abroad:a.curriculum.abroad};if(b.abroad)b.nameEt=a.curriculum.jointPartnerForeignNameEt,b.nameEn=a.curriculum.jointPartnerForeignNameEn;else{for(var c=0;c<a.jointPartnersEhisSchools.length;c++)if(-1!==a.jointPartnersEhisSchools.indexOf(a.curriculum.jointPartnerEhisSchool))return void a.clearJointPartnersFields();b.ehisSchool=a.curriculum.jointPartnerEhisSchool,a.jointPartnersEhisSchools.push(b.ehisSchool)}a.curriculum.jointPartners.push(b),a.clearJointPartnersFields(),D()};var O=function(){a.curriculum.jointPartners.forEach(function(b){b.contractEt=a.curriculum.contractEt,b.contractEn=a.curriculum.contractEn,b.supervisor=a.curriculum.supervisor})};a.clearJointPartnersFields=function(){a.curriculum.jointPartnerForeignNameEt=void 0,a.curriculum.jointPartnerForeignNameEn=void 0,a.curriculum.jointPartnerEhisSchool=void 0},a.filterEmptyJointPartners=function(a){return a.ehisSchool||a.nameEt||a.nameEn},a.openAddSpecialtyDialog=function(b){var c=function(c){b&&(c.data=angular.extend({},b)),c.maxCredits=a.curriculum.credits?a.curriculum.credits:0,c.formState={isNew:!angular.isDefined(b)},c["delete"]=function(){return c.data.addedToVersion?void f.error("curriculum.error.specAddedToVersion"):(G(a.curriculum.specialities,c,b,i.endpoint("/curriculum/"+a.curriculum.id+"/speciality")),void a.higherCurriculumForm.$setDirty())}};d.showDialog("higherCurriculum/higher.curriculum.specialty.add.dialog.html",c,function(c){var d=c.data;d.occupation||(d.occupationEt=void 0,d.occupationEn=void 0),H(i.endpoint("/curriculum/"+a.curriculum.id+"/speciality"),d,a.curriculum.specialities,b)})},a.openViewSpecialtyDialog=function(a){var b=function(b){b.data=angular.extend({},a)};d.showDialog("higherCurriculum/higher.curriculum.specialty.view.dialog.html",b,null)},a.openAddGradeDialog=function(b){var c=null;b&&(c=function(c){c.data=angular.extend({},b),c.editing=angular.isDefined(b),c["delete"]=function(){G(a.curriculum.grades,c,b,i.endpoint("/curriculum/"+a.curriculum.id+"/grade"))}}),d.showDialog("higherCurriculum/higher.curriculum.grade.add.dialog.html",c,function(c){var d=c.data;H(i.endpoint("/curriculum/"+a.curriculum.id+"/grade"),d,a.curriculum.grades,b)})},a.openViewGradeDialog=function(a){var b=function(b){b.data=angular.extend({},a)};d.showDialog("higherCurriculum/higher.curriculum.grade.view.dialog.html",b,null)},a.openAddFileDialog=function(){d.showDialog("curriculum/dialog/file.add.dialog.html",function(a){a.fileTypeCriteria={higher:!0}},function(b){var c=b.data;c.sendEhis=!1,c.ehis=!1,c.oisFile=j.getFromLfFile(c.file[0],function(b){c.oisFile=b;var d=new J(c);d.$save().then(function(b){f.info("main.messages.create.success"),a.curriculum.files.push(b)})})})},a.deleteFile=function(b){d.confirmDialog({prompt:"curriculum.itemDeleteConfirm"},function(){e.remove(a.curriculum.files,b);var c=new J(b);c.$delete().then(function(){f.info("main.messages.delete.success")})})},a.getUrl=j.getUrl,a.saveAndProceed=function(){var b={prompt:"curriculum.statuschange.higher.proceed",errorMessage:"curriculum.error.inputFieldsNotFilledOnProcede",updateSuccess:"curriculum.success.proceed"};a.formState.strictValidation=!0,d.confirmDialog({prompt:b.prompt},function(){setTimeout(function(){if(y(b)){A();var a=i.endpoint("/curriculum/saveAndProceed");I(a,b)}},0)})},a.setStatusClosed=function(){var b={prompt:a.formState.readOnly?"curriculum.statuschangeReadOnly.higher.close":"curriculum.statuschange.higher.close",updateSuccess:"curriculum.success.closed"};d.confirmDialog({prompt:b.prompt},function(){var a=i.endpoint("/curriculum/close");I(a,b)})},a.sendToEhis=function(){d.confirmDialog({prompt:"curriculum.ehisconfirm"},function(){var a=i.endpoint("/curriculum/sendToEhis");I(a,{updateSuccess:"curriculum.sentToEhis"})})},a.updateFromEhis=function(){var a=i.endpoint("/curriculum/updateFromEhis");I(a,{updateSuccess:"curriculum.message.ehisStatusUpdated"})},a.goToEditForm=function(){a.curriculum&&(a.curriculum.status===c.STATUS.VERIFIED?d.confirmDialog({prompt:"curriculum.prompt.editAccepted"},function(){h.path("/higherCurriculum/"+a.curriculum.id+"/edit")}):h.path("/higherCurriculum/"+a.curriculum.id+"/edit"))},a.canBeEdited=function(){var b=a.curriculum?a.curriculum.status:null;return a.formState.readOnly&&(b===c.STATUS.ENTERING||b===c.STATUS.PROCEEDING||b===c.STATUS.VERIFIED)},a.goToVersionNewForm=function(){var b="/higherCurriculum/"+a.curriculum.id+"/version/new";!a.formState.readOnly&&a.higherCurriculumForm.$dirty?d.confirmDialog({prompt:"main.messages.confirmFormDataNotSaved"},function(){h.path(b)}):h.path(b)},a.goToVersionForm=function(b){var e=a.formState.readOnly||b.status!==c.VERSION_STATUS.S?"/higherCurriculum/"+a.curriculum.id+"/version/"+b.id+"/view":"/higherCurriculum/"+a.curriculum.id+"/version/"+b.id+"/edit";!a.formState.readOnly&&a.higherCurriculumForm.$dirty?d.confirmDialog({prompt:"main.messages.confirmFormDataNotSaved"},function(){h.path(e)}):h.path(e)},a.versionCanBeAdded=function(){return a.curriculum&&a.curriculum.canChange&&(a.curriculum.status===c.STATUS.ENTERING&&!a.formState.readOnly||a.curriculum.status===c.STATUS.PROCEEDING||a.curriculum.status===c.STATUS.VERIFIED)}}]),angular.module("hitsaOis").config(["$routeProvider","USER_ROLES",function(a,b){function c(a,b,c,d,e){d.resolve().then(function(d){d.isAdmin()&&c.includes(d.authorizedRoles,e.ROLE_OIGUS_M_TEEMAOIGUS_OPPEKAVA)||(a.error("main.messages.error.nopermission"),b.path(""))})}c.$inject=["message","$location","ArrayUtils","AuthResolver","USER_ROLES"],a.when("/higherCurriculum/new",{templateUrl:"higherCurriculum/higher.curriculum.html",controller:"HigherCurriculumController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],checkAccess:c},data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_OPPEKAVA]}}).when("/higherCurriculum/:id/edit",{templateUrl:"higherCurriculum/higher.curriculum.html",controller:"HigherCurriculumController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],checkAccess:c},data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_OPPEKAVA]}}).when("/higherCurriculum/:id/view",{templateUrl:"higherCurriculum/higher.curriculum.view.html",controller:"HigherCurriculumController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}]},data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_OPPEKAVA]}}).when("/higherCurriculum/:id/version/new",{templateUrl:"higherCurriculum/higher.curriculum.version.html",controller:"HigherCurriculumVersionController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],curriculum:["QueryUtils","$route",function(a,b){return a.endpoint("/curriculumVersion/curriculum").get({id:b.current.params.id}).$promise}],checkAccess:c},data:{authorizedRoles:[b.ROLE_OIGUS_M_TEEMAOIGUS_OPPEKAVA]}}).when("/higherCurriculum/:id/version/:versionId/edit",{templateUrl:"higherCurriculum/higher.curriculum.version.html",controller:"HigherCurriculumVersionController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],curriculum:["QueryUtils","$route",function(a,b){return a.endpoint("/curriculumVersion/curriculum").get({id:b.current.params.id}).$promise}],checkAccess:c},data:{authorizedRoles:[b.ROLE_OIGUS_M_TEEMAOIGUS_OPPEKAVA]}}).when("/higherCurriculum/:id/version/:versionId/view",{templateUrl:"higherCurriculum/higher.curriculum.version.view.html",controller:"HigherCurriculumVersionController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],curriculum:["QueryUtils","$route",function(a,b){return a.endpoint("/curriculumVersion/curriculum").get({id:b.current.params.id}).$promise}]},data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_OPPEKAVA]}}).when("/higherCurriculum/:curriculumId/version/:versionId/module/new",{templateUrl:"higherCurriculum/version/higher.module.edit.html",controller:"HigherModuleController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],checkAccess:c},data:{authorizedRoles:[b.ROLE_OIGUS_M_TEEMAOIGUS_OPPEKAVA]}}).when("/higherCurriculum/:curriculumId/version/:versionId/module/:id/edit",{templateUrl:"higherCurriculum/version/higher.module.edit.html",controller:"HigherModuleController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],checkAccess:c},data:{authorizedRoles:[b.ROLE_OIGUS_M_TEEMAOIGUS_OPPEKAVA]}}).when("/higherCurriculum/:curriculumId/version/:versionId/module/:id/view",{templateUrl:"higherCurriculum/version/higher.module.view.html",controller:"HigherModuleController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}]},data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_OPPEKAVA]}}).when("/higherCurriculum/:curriculumId/version/:versionId/minorSpeciality/new",{templateUrl:"higherCurriculum/version/minor.speciality.edit.html",controller:"MinorSpecialityController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],checkAccess:c},data:{authorizedRoles:[b.ROLE_OIGUS_M_TEEMAOIGUS_OPPEKAVA]}}).when("/higherCurriculum/:curriculumId/version/:versionId/minorSpeciality/:id/edit",{templateUrl:"higherCurriculum/version/minor.speciality.edit.html",controller:"MinorSpecialityController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],checkAccess:c},data:{authorizedRoles:[b.ROLE_OIGUS_M_TEEMAOIGUS_OPPEKAVA]}}).when("/higherCurriculum/:curriculumId/version/:versionId/minorSpeciality/:id/view",{templateUrl:"higherCurriculum/version/minor.speciality.view.html",controller:"MinorSpecialityController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}]},data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_OPPEKAVA]}})}]),angular.module("hitsaOis").controller("HigherCurriculumVersionController",["$scope","Curriculum","dialogService","ArrayUtils","message","$route","$location","QueryUtils","$translate","$rootScope","$routeParams","DataUtils","config",function(a,b,c,d,e,f,g,h,i,j,k,l,m){function n(){l.convertStringToDates(a.version,["validFrom","validThru"]),a.formState.curriculumPdfUrl=m.apiUrl+A+"/print/"+a.version.id+"/curriculum.pdf",a.formState.curriculumXmlUrl=m.apiUrl+A+"/xml/"+a.version.id+"/curriculum.version.xml"}function o(){a.admissionYears=[null];for(var b=(new Date).getFullYear(),c=b-10;b+2>=c;c++)a.admissionYears.push(c)}function p(b){if(a.higherCurriculumVersionForm.$setSubmitted(),!t()){var c=b&&b.errorMessage?b.errorMessage:"main.messages.form-has-errors";return e.error(c),!1}return!0}function q(b){if(p(b)){var c=new E(a.version);angular.isDefined(a.version.id)?c.$update().then(function(c){var d=b&&b.updateSuccess?b.updateSuccess:"main.messages.create.success";e.info(d),a.version=c,l.convertStringToDates(a.version,["validFrom","validThru"]),a.higherCurriculumVersionForm.$setPristine()}):c.$save().then(function(b){e.info("main.messages.create.success"),g.path("/higherCurriculum/"+a.version.curriculum+"/version/"+b.id+"/edit")})}}function r(b,d){p(d)&&setTimeout(function(){c.confirmDialog({prompt:d.prompt},function(){new b(a.version).$update().then(function(b){var c=d&&d.updateSuccess?d.updateSuccess:"main.messages.create.success";e.info(c),a.version=b,l.convertStringToDates(a.version,["validFrom","validThru"]),a.version.curriculum=a.curriculum.id,a.formState.strictValidation=!1,s(b),a.higherCurriculumVersionForm.$setPristine()})})},0)}function s(b){a.formState.readOnly||g.path("/higherCurriculum/"+a.version.curriculum+"/version/"+b.id+"/view")}function t(){return a.higherCurriculumVersionForm.$valid&&(a.versionIsValid()||!a.strictValidation())}function u(b){return a.version.modules.filter(function(a){return!a.minorSpeciality&&d.includes(a.curriculumSpecialities,b)})}function v(a){D.get({id:a.id}).$promise.then(function(b){a.totalCredits=b.totalCredits,a.compulsoryStudyCredits=b.compulsoryStudyCredits})}function w(a,b){return!angular.isDefined(a)&&angular.isDefined(b)||angular.isDefined(a)&&angular.isDefined(b)&&a.length<b.length}function x(a,b){if(!angular.isDefined(a))return b;for(var c=[],e=0;e<b.length;e++)d.contains(a,b[e])||c.push(b[e]);return c}function y(b){var c="";c=b?a.formState.readOnly||!a.version.canChange?"/higherCurriculum/"+a.curriculum.id+"/version/"+a.version.id+"/module/"+b.id+"/view":"/higherCurriculum/"+a.curriculum.id+"/version/"+a.version.id+"/module/"+b.id+"/edit":"/higherCurriculum/"+a.curriculum.id+"/version/"+a.version.id+"/module/new",g.path(c)}function z(b){var c="";c=b?a.formState.readOnly||!a.version.canChange?"/higherCurriculum/"+a.curriculum.id+"/version/"+a.version.id+"/minorSpeciality/"+b.id+"/view":"/higherCurriculum/"+a.curriculum.id+"/version/"+a.version.id+"/minorSpeciality/"+b.id+"/edit":"/higherCurriculum/"+a.curriculum.id+"/version/"+a.version.id+"/minorSpeciality/new",g.path(c)}var A="/curriculum";a.curriculum=f.current.locals.curriculum,a.formState={readOnly:-1!==f.current.$$route.originalPath.indexOf("view"),strictValidation:!1};var B=h.endpoint("/curriculum/"+a.curriculum.id+"/speciality"),C=h.endpoint("/higherModule/subject/"),D=h.endpoint("/higherModule/credits/"),E=h.endpoint("/curriculumVersion"),F=f.current.params.versionId;a.VERSION_STATUS=b.VERSION_STATUS;var G={status:a.VERSION_STATUS.S,validFrom:new Date,code:a.curriculum.code+"/"+(new Date).getFullYear(),curriculum:a.curriculum.id,modules:[],canChange:!0};F?(a.version=E.get({id:F}).$promise.then(function(b){a.version=b,n(),j.removeLastUrlFromHistory(function(b){return b&&-1!==b.indexOf("#/higherCurriculum/"+a.version.curriculum+"/version/")})}),a.publicUrl=m.apiUrl+"/public/curriculum/"+a.curriculum.id+"/"+F+"?format=json"):a.version=angular.extend(G),a.openAddSpecialtyDialog=function(){var b=function(b){b.maxCredits=a.curriculum.credits?a.curriculum.credits:0,b.isNew=!0};c.showDialog("higherCurriculum/higher.curriculum.specialty.add.dialog.html",b,function(b){var c=b.data;c.occupation||(c.occupationEt=void 0,c.occupationEn=void 0);var d=new B(c);d.curriculum=a.curriculum.id,d.$save().then(function(b){e.info("main.messages.create.success"),a.curriculum.specialities.push(b)})})},o(),a.curriculumVersionCodeUniqueQuery={id:f.current.params.versionId,url:"/curriculumVersion/unique/code"},a.save=function(){a.formState.strictValidation=!1,setTimeout(q,0)},a.saveAndConfirm=function(){var b={prompt:a.formState.readOnly?"curriculum.statuschangeReadOnly.version.prompt.verify":"curriculum.statuschange.version.prompt.verify",updateSuccess:"curriculum.statuschange.version.success.verified"},c=h.endpoint("/curriculumVersion/saveAndConfirm");a.formState.strictValidation=!0,r(c,b)},a.confirm=function(){var b={prompt:a.formState.readOnly?"curriculum.statuschangeReadOnly.version.prompt.verify":"curriculum.statuschange.version.prompt.verify",updateSuccess:"curriculum.statuschange.version.success.verified"},c=h.endpoint("/curriculumVersion/confirm");a.formState.strictValidation=!0,r(c,b)},a.setStatusClosed=function(){var b={prompt:a.formState.readOnly?"curriculum.statuschangeReadOnly.version.prompt.close":"curriculum.statuschange.version.prompt.close",updateSuccess:"curriculum.statuschange.version.success.closed"},c=h.endpoint("/curriculumVersion/close");a.formState.strictValidation=!1,r(c,b)},a.goToEditForm=function(){a.curriculum&&(a.version.status===b.VERSION_STATUS.K?c.confirmDialog({prompt:"curriculum.statuschange.version.prompt.editAccepted"},function(){g.path("/higherCurriculum/"+a.version.curriculum+"/version/"+a.version.id+"/edit")}):g.path("/higherCurriculum/"+a.version.curriculum+"/version/"+a.version.id+"/edit"))},a.strictValidation=function(){return a.version.status===b.VERSION_STATUS.K||a.formState.strictValidation},a["delete"]=function(){c.confirmDialog({prompt:"curriculum.version.deleteconfirm"},function(){var b=new E(a.version);b.$delete().then(function(){e.info("main.messages.delete.success"),j.back("#/higherCurriculum/"+a.version.curriculum+"/view")})})},a.copy=function(){var b=h.endpoint("/curriculumVersion/copy");new b({id:F}).$update().then(function(b){e.info("main.messages.create.success"),g.path("/higherCurriculum/"+a.version.curriculum+"/version/"+b.id+"/edit")})},a.versionIsValid=function(){return a.allSpecialitiesValid()&&a.allMinorSpecialitiesValid()},a.allMinorSpecialitiesValid=function(){for(var b=a.version.modules.filter(function(a){return a.minorSpeciality}),c=0;c<b.length;c++)if(!a.moduleValid(b[c]))return!1;return!0},a.allSpecialitiesValid=function(){if(d.isEmpty(a.version.specialitiesReferenceNumbers)||d.isEmpty(a.version.modules))return!1;for(var b=a.version.specialitiesReferenceNumbers,c=0;c<b.length;c++)if(!a.specialityValid(b[c]))return!1;return!0},a.specialityValid=function(b){var c=u(b);if(d.isEmpty(c))return!1;for(var e=0;e<c.length;e++)if(!a.moduleValid(c[e]))return!1;return!0},a.moduleValid=function(b){return a.moduleHasSubjects(b)},a.anyModuleAdded=function(a){return a.modules.filter(function(a){return!a.minorSpeciality}).length>0},a.moduleMustHaveSubjects=function(a){return"KORGMOODUL_V"!==a.type},a.moduleHasSubjects=function(b){return b.minorSpeciality?b.subjects&&b.subjects.length>0:!a.moduleMustHaveSubjects(b)||b.subjects&&b.subjects.length>0},a.filterModulesBySpeciality=function(a){return function(b){return d.includes(b.curriculumSpecialities,a.referenceNumber)}},a.filterSpecialities=function(b){return a.curriculum&&a.version&&a.version.specialitiesReferenceNumbers?d.includes(a.version.specialitiesReferenceNumbers,b.referenceNumber):!1},a.deleteSubject=function(a,b){c.confirmDialog({prompt:"curriculum.itemDeleteConfirm"},function(){new C(b).$delete().then(function(){e.info("main.messages.delete.success"),d.remove(a.subjects,b),v(a)})})},a.$watchCollection("version.specialitiesReferenceNumbers",function(b,c){if(w(b,c))for(var d=x(b,c),f=0;f<d.length;f++)if(u(d[f]).length>0)return e.error("curriculum.error.specAddedToModule"),void(a.version.specialitiesReferenceNumbers=c)}),a.openAddModuleDialog=function(b){a.higherCurriculumVersionForm.$dirty?c.confirmDialog({prompt:"main.messages.confirmFormDataNotSaved"},function(){y(b)}):y(b)},a.openAddMinorSpecialtyDialog=function(b){a.higherCurriculumVersionForm.$dirty?c.confirmDialog({prompt:"main.messages.confirmFormDataNotSaved"},function(){z(b)}):z(b)}}]),angular.module("hitsaOis").controller("HigherModuleController",["$scope","$route","QueryUtils","dialogService","message","ArrayUtils","$location","$rootScope",function(a,b,c,d,e,f,g,h){function i(a){return"KORGMOODUL_V"!==a.type}function j(b){a.data=new t(b),k(),a.getSubjects()}function k(){c.endpoint(s+"/versionHmoduleTypes/"+q).query().$promise.then(function(b){a.moduleTypes=b,a.data.typeObject=a.moduleTypes.find(function(b){return"KORGMOODUL_M"!==a.data.type?b.code===a.data.type:null===b.code&&b.nameEn===a.data.typeNameEn&&b.nameEt===a.data.typeNameEt}),a.higherModuleForm&&a.higherModuleForm.$setPristine()})}function l(){a.data.subjects=[],a.data.electiveModules=[],a.data.compulsoryStudyCredits=0,a.data.electiveModulesNumber=0,a.data.totalCredits=a.data.optionalStudyCredits}function m(){return a.higherModuleForm.$setSubmitted(),a.higherModuleForm.$valid?a.subjectsValid()?!0:(e.error("curriculum.error.noSubject"),!1):(e.error("main.messages.form-has-errors"),!1)}function n(){var b=a.data;"KORGMOODUL_M"!==b.typeObject.code&&null!==b.typeObject.code?(b.typeNameEt=null,b.typeNameEn=null,b.type=b.typeObject.code):null===b.typeObject.code?(b.type="KORGMOODUL_M",b.typeNameEt=b.typeObject.nameEt,b.typeNameEn=b.typeObject.nameEn):b.type="KORGMOODUL_M"}function o(a){for(var b,c=a.map(function(a){return a.referenceNumber});;)if(b=-Math.floor(1e3*Math.random()+1),!f.includes(c,b))break;return b}var p=b.current.params.id,q=b.current.params.versionId,r=b.current.params.curriculumId,s="/higherModule",t=c.endpoint(s);h.removeLastUrlFromHistory(function(a){return a&&-1!==a.indexOf("new")}),a.backToEditForm="#/higherCurriculum/"+r+"/version/"+q+"/edit",a.backToViewForm="#/higherCurriculum/"+r+"/version/"+q+"/view",a.formState={moduleMustHaveSubjects:!a.data||i(scope.data),readOnly:-1!==b.current.$$route.originalPath.indexOf("view")};var u={electiveModules:[],specialitiesReferenceNumbers:[],subjects:[],minorSpeciality:!1,optionalStudyCredits:0,totalCredits:0,compulsoryStudyCredits:0,electiveModulesNumber:0,curriculumVersion:q};p?t.get({id:p}).$promise.then(j):(a.data=new t(angular.extend({},u)),k()),c.endpoint(s+"/version/"+q+"/specialities").query().$promise.then(function(b){a.specialities=b}),a.getSubjects=function(){return f.isEmpty(a.data.specialitiesReferenceNumbers)?void(a.subjects=[]):void c.endpoint(s+"/possibleSubjects").query({module:p,curriculumVersion:q,specialities:a.data.specialitiesReferenceNumbers}).$promise.then(function(b){a.subjects=b})},a.$watch("data.typeObject",function(b){b&&"KORGMOODUL_V"===b.code?(a.formState.moduleMustHaveSubjects=!1,l()):b&&(a.formState.moduleMustHaveSubjects=!0)}),a.addElectiveModule=function(){var b={nameEt:a.optionalNameEt,nameEn:a.optionalNameEn,referenceNumber:o(a.data.electiveModules)};a.data.electiveModules.push(b),a.optionalNameEt=void 0,a.optionalNameEn=void 0},a.editingElectiveModule=!1;var v=null;a.editElectiveModule=function(b){v=b,a.editingElectiveModule=!0,a.optionalNameEt=b.nameEt,a.optionalNameEn=b.nameEn},a.finishEditElectiveModule=function(){a.editingElectiveModule=!1,v.nameEt=a.optionalNameEt,v.nameEn=a.optionalNameEn,a.optionalNameEt=void 0,a.optionalNameEn=void 0},a.deleteElectiveModule=function(b){a.data.subjects.forEach(function(a){a.electiveModule===b.referenceNumber&&(a.electiveModule=void 0)}),f.remove(a.data.electiveModules,b),a.higherModuleForm.$setDirty()},a.subjectsValid=function(){return!a.formState.moduleMustHaveSubjects||a.data.subjects.length>0},a.removeSubject=function(b){f.remove(a.data.subjects,b),a.setCompulsoryStudyCredits(),a.higherModuleForm.$setDirty()},a.addSubject=function(){var b=angular.copy(a.data.selectedSubject);b.optional=!1,a.data.subjects.push(b),a.data.selectedSubject=void 0,a.setCompulsoryStudyCredits(),a.higherModuleForm.$setDirty()},a.setCompulsoryStudyCredits=function(b){a.setCompulsoryAndTotalStudyCredits(a.data),b&&!b.optional&&(b.electiveModule=void 0)},a.setCompulsoryAndTotalStudyCredits=function(a){a.compulsoryStudyCredits=0,a.subjects.forEach(function(b){b.optional||(a.compulsoryStudyCredits+=b.credits)}),a.totalCredits=a.compulsoryStudyCredits+a.optionalStudyCredits},a.save=function(b){m()&&(n(),p?a.data.$update().then(function(b){e.info("main.messages.update.success"),a.higherModuleForm.$setPristine(),j(b)}):a.data.$save().then(function(a){e.info("main.messages.create.success"),g.path("/higherCurriculum/"+r+"/version/"+q+"/module/"+a.id+"/edit")}))},a["delete"]=function(){d.confirmDialog({prompt:"curriculum.moduleDeleteConfirm"},function(){new t(a.data).$delete().then(function(){e.info("main.messages.delete.success"),g.path("/higherCurriculum/"+r+"/version/"+q+"/edit")})})},a.subjectNotAdded=function(b){if(!a.data||f.isEmpty(a.data.subjects))return!0;var c=a.data.subjects.map(function(a){return a.subjectId});return!f.includes(c,b.subjectId)}}]),angular.module("hitsaOis").controller("MinorSpecialityController",["$scope","$route","QueryUtils","dialogService","message","ArrayUtils","$location","$rootScope",function(a,b,c,d,e,f,g,h){function i(b){a.data=new r(b)}function j(){c.endpoint(q+"/minorSpeciality/possibleSubjects").query({curriculumVersion:o}).$promise.then(function(b){a.subjects=b})}function k(){return a.data.subjects.length>0}function l(){return a.minorSpecialityForm.$setSubmitted(),a.minorSpecialityForm.$valid?k()?!0:(e.error("curriculum.error.noSubject"),!1):(e.error("main.messages.form-has-errors"),!1)}function m(a){for(var b,c=a.map(function(a){return a.referenceNumber});;)if(b=-Math.floor(1e3*Math.random()+1),!f.includes(c,b))break;return b}var n=b.current.params.id,o=b.current.params.versionId,p=b.current.params.curriculumId,q="/higherModule",r=c.endpoint(q);h.removeLastUrlFromHistory(function(a){return a&&-1!==a.indexOf("new")}),a.backToEditForm="#/higherCurriculum/"+p+"/version/"+o+"/edit",a.backToViewForm="#/higherCurriculum/"+p+"/version/"+o+"/view",a.formState={readOnly:-1!==b.current.$$route.originalPath.indexOf("view")};var s={electiveModules:[],specialitiesReferenceNumbers:[],subjects:[],minorSpeciality:!0,optionalStudyCredits:0,totalCredits:0,compulsoryStudyCredits:0,electiveModulesNumber:0,type:"KORGMOODUL_M",curriculumVersion:o};n?r.get({id:n}).$promise.then(i):a.data=new r(angular.extend({},s)),j(),a.addElectiveModule=function(){var b={nameEt:a.optionalNameEt,nameEn:a.optionalNameEn,referenceNumber:m(a.data.electiveModules)};a.data.electiveModules.push(b),a.optionalNameEt=void 0,a.optionalNameEn=void 0},a.editingElectiveModule=!1;var t=null;a.editElectiveModule=function(b){t=b,a.editingElectiveModule=!0,a.optionalNameEt=b.nameEt,a.optionalNameEn=b.nameEn},a.finishEditElectiveModule=function(){a.editingElectiveModule=!1,t.nameEt=a.optionalNameEt,t.nameEn=a.optionalNameEn,a.optionalNameEt=void 0,a.optionalNameEn=void 0},a.deleteElectiveModule=function(b){a.data.subjects.forEach(function(a){a.electiveModule===b.referenceNumber&&(a.electiveModule=void 0)}),f.remove(a.data.electiveModules,b),a.minorSpecialityForm.$setDirty()},a.removeSubject=function(b){f.remove(a.data.subjects,b),a.setCompulsoryStudyCredits(),a.minorSpecialityForm.$setDirty()},a.addSubject=function(){var b=angular.copy(a.data.selectedSubject);b.optional=!1,a.data.subjects.push(b),a.data.selectedSubject=void 0,a.setCompulsoryStudyCredits(),a.minorSpecialityForm.$setDirty()},a.setCompulsoryStudyCredits=function(b){a.setCompulsoryAndTotalStudyCredits(a.data),b&&!b.optional&&(b.electiveModule=void 0)},a.setCompulsoryAndTotalStudyCredits=function(a){a.compulsoryStudyCredits=0,a.subjects.forEach(function(b){b.optional||(a.compulsoryStudyCredits+=b.credits)}),a.totalCredits=a.compulsoryStudyCredits+a.optionalStudyCredits},a.save=function(b){l()&&(n?a.data.$update().then(function(b){e.info("main.messages.update.success"),a.minorSpecialityForm.$setPristine(),i(b)}):a.data.$save().then(function(a){e.info("main.messages.create.success"),g.path("/higherCurriculum/"+p+"/version/"+o+"/minorSpeciality/"+a.id+"/edit")}))},a["delete"]=function(){d.confirmDialog({prompt:"curriculum.minorSpecialtyDeleteConfirm"},function(){new r(a.data).$delete().then(function(){e.info("main.messages.delete.success"),g.path("/higherCurriculum/"+p+"/version/"+o+"/edit")})})},a.subjectNotAdded=function(b){if(!a.data||f.isEmpty(a.data.subjects))return!0;var c=a.data.subjects.map(function(a){return a.subjectId});return!f.includes(c,b.subjectId)}}]),angular.module("hitsaOis").config(["$routeProvider","USER_ROLES",function(a,b){a.when("/higherProtocols",{templateUrl:"higherProtocol/higher.protocol.search.html",controller:"HigherProtocolSearchController",controllerAs:"HigherProtocolSearchController",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}]},data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_PROTOKOLL]}}).when("/higherProtocols/new",{templateUrl:"higherProtocol/higher.protocol.new.html",controller:"HigherProtocolNewController",controllerAs:"higherProtocolNewController",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}],isCreate:function(){return!0}},data:{authorizedRoles:[b.ROLE_OIGUS_M_TEEMAOIGUS_PROTOKOLL]}}).when("/higherProtocols/:id/:action",{templateUrl:function(a){return"edit"===a.action?"higherProtocol/higher.protocol.edit.html":"higherProtocol/higher.protocol.view.html"},controller:"HigherProtocolEditViewController",controllerAs:"HigherProtocolEditViewController",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}],entity:["QueryUtils","$route",function(a,b){return a.endpoint("/higherProtocols").get({id:b.current.params.id}).$promise}],isView:["$route",function(a){return"view"===a.current.params.action}]},data:{authorizedRoles:[b.ROLE_OIGUS_M_TEEMAOIGUS_PROTOKOLL]}})}]),angular.module("hitsaOis").controller("HigherProtocolSearchController",["$scope","$route","$q","$timeout","QueryUtils","DataUtils","Classifier","message","USER_ROLES",function(a,b,c,d,e,f,g,h,i){a.auth=b.current.locals.auth;var j="/higherProtocols",k=g.valuemapper({status:"PROTOKOLL_STAATUS",protocolType:"PROTOKOLLI_LIIK"});e.createQueryForm(a,j,{order:"id"},k.objectmapper),f.convertStringToDates(a.criteria,["inserted","confirmDate"]),a.studyPeriods=e.endpoint("/autocomplete/studyPeriods").query();var l=k.promises;l.push(a.studyPeriods.$promise),a.formState={canCreate:-1!==a.auth.authorizedRoles.indexOf(i.ROLE_OIGUS_M_TEEMAOIGUS_PROTOKOLL)};var m=a.loadData;a.loadData=function(){a.higherProtocolSearchForm.$setSubmitted(),a.higherProtocolSearchForm.$valid?m():h.error("main.messages.form-has-errors")},c.all(l).then(function(){if(a.studyPeriods.length>0&&!a.criteria.studyPeriod){var b=f.getCurrentStudyYearOrPeriod(a.studyPeriods);a.criteria.studyPeriod=b?b.id:void 0}a.criteria.studyPeriod?d(a.loadData):0===a.studyPeriods.length&&(a.canCreate=!1,h.error("studyYear.studyPeriod.missing"))})}]),angular.module("hitsaOis").controller("HigherProtocolNewController",["$scope","$route","$location","QueryUtils","DataUtils","Classifier","message","ArrayUtils",function(a,b,c,d,e,f,g,h){function i(){a.record.protocolType&&a.record.subjectStudyPeriod&&d.endpoint(j+"/students").query(a.record).$promise.then(function(b){a.record.students=[],a.students=b})}a.auth=b.current.locals.auth;
var j="/higherProtocols";a.record={protocolType:"PROTOKOLLI_LIIK_P",students:[]},a.subjectStudyPeriods=d.endpoint(j+"/subjectStudyPeriods").query(),a.$watch("record.subjectStudyPeriod",i),a.$watch("record.protocolType",i);var k=d.endpoint(j);a.submit=function(){return h.isEmpty(a.record.students)?void g.error("higherProtocol.error.noStudents"):void new k(a.record).$save().then(function(a){g.info("main.messages.create.success"),c.path(j+"/"+a.id+"/edit")})}}]),angular.module("hitsaOis").controller("HigherProtocolEditViewController",["$scope","$sessionStorage","QueryUtils","DataUtils","$route","$rootScope","message","orderByFilter","$location","config","MidtermTaskUtil","dialogService","ArrayUtils","Classifier",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){function o(a,b){return{midtermTask:b.id,declarationSubject:a.declarationSubject,maxPoints:b.maxPoints,canBeChanged:a.studentResultCanBeChanged,isText:b.studentResultIsText,studentId:a.student.id}}function p(){a.record.subjectStudyPeriodMidtermTaskDto.midtermTasks=C.getSortedMidtermTasks(a.record.subjectStudyPeriodMidtermTaskDto.midtermTasks),s(),C.sortStudentResults(a.record.subjectStudyPeriodMidtermTaskDto.studentResults,a.record.subjectStudyPeriodMidtermTaskDto.midtermTasks),a.formState={protocolPdfUrl:j.apiUrl+y+"/print/"+a.record.id+"/protocol.pdf",canCalculate:"PROTOKOLLI_LIIK_P"===a.record.protocolType&&a.record.canChange&&!a.record.subjectStudyPeriodMidtermTaskDto.subjectStudyPeriod.isPracticeSubject,isConfirmed:"PROTOKOLL_STAATUS_K"===a.record.status,canConfirm:a.record.canConfirm&&q()}}function q(){if(!angular.isDefined(a.record)||!angular.isArray(a.record.protocolStudents))return!1;for(var b=!0,c=0;c<a.record.protocolStudents.length;c++)if(!angular.isString(a.record.protocolStudents[c].grade)||0===a.record.protocolStudents[c].grade.trim().length){b=!1;break}return b}function r(b,c){var d=a.record.subjectStudyPeriodMidtermTaskDto.studentResults.find(function(a){return a.midtermTask===c.id&&a.studentId===b.student.id});return angular.isDefined(d)}function s(){a.record.protocolStudents.forEach(function(b){for(var c=[],d=0;d<a.record.subjectStudyPeriodMidtermTaskDto.midtermTasks.length;d++)r(b,a.record.subjectStudyPeriodMidtermTaskDto.midtermTasks[d])||c.push(o(b,a.record.subjectStudyPeriodMidtermTaskDto.midtermTasks[d]));a.record.subjectStudyPeriodMidtermTaskDto.studentResults=a.record.subjectStudyPeriodMidtermTaskDto.studentResults.concat(c)})}function t(){return a.higherProtocolForm.$setSubmitted(),a.higherProtocolForm.$valid?!0:(g.error("main.messages.form-has-errors"),!1)}function u(){new z(a.record).$update().then(function(b){g.updateSuccess(),a.record=b,p(),a.higherProtocolForm.$setPristine()})}function v(b){var c=a.record.protocolStudents.find(function(a){return a.id===b.protocolStudent});c.grade=b.grade,a.gradeChanged(c)}function w(a){a.forEach(v)}function x(){a.grades=a.grades.filter(function(b){return m.contains(a.record.possibleGrades,b.code)})}a.auth=e.current.locals.auth,a.record=e.current.locals.entity;var y="/higherProtocols",z=c.endpoint(y),A=c.endpoint(y+"/confirm"),B=c.endpoint(y+"/saveAndConfirm"),C=new k;a.calculateGrades={protocolStudents:[]},p(),a.filterStudentResults=function(a){return function(b){return a.student.id===b.studentId}},a.save=function(){t()&&(a.formState.isConfirmed?l.confirmDialog({prompt:"higherProtocol.prompt.saveConfirmedProtocol"},u):u())},a.grades=n.queryForDropdown({mainClassCode:"KORGHINDAMINE"},x),a.calculate=function(){c.endpoint(y+"/"+a.record.id+"/calculate").query(a.calculateGrades).$promise.then(function(b){a.calculateGrades.protocolStudents=[],w(b),g.info("higherProtocol.message.calculated")})},a.confirm=function(){new A(a.record).$update().then(function(b){g.info("higherProtocol.message.confirmed"),a.record=b,p()})},a.saveAndConfirm=function(){new B(a.record).$update().then(function(b){g.info("higherProtocol.message.savedAndConfirmed"),a.record=b,p(),a.higherProtocolForm.$setPristine()})},a.gradeChanged=function(a){a.changed=!0},a.getMidtermTaskHeader=C.getMidtermTaskHeader,a.setFormDirty=function(){a.higherProtocolStudentForm.$setDirty()}}]),angular.module("hitsaOis").controller("JournalController",["$scope","$route","QueryUtils","ArrayUtils","message","$location",function(a,b,c,d,e,f){function g(a){"edit"!==b.current.params.action||a.canEdit||(e.error("main.messages.error.nopermission"),f.path(""))}function h(b){g(b),a.journal=b,angular.isString(b.endDate)||(a.journal.endDate=b.studyYearEndDate)}a.auth=b.current.locals.auth;var i=b.current.locals.entity;angular.isDefined(i)&&h(i),a.showModuleNames=function(b){return b.map(function(b){return a.currentLanguageNameField(b)}).join(", ")},a.saveEndDate=function(){c.endpoint("/journals/"+i.id+"/saveEndDate").save({endDate:a.journal.endDate},function(){e.info("main.messages.create.success"),a.journalForm.$setPristine()})},a.saveMoodleCourseId=function(){c.endpoint("/journals/"+i.id+"/moodle/courseLink").update(a.journal.moodleCourseId,function(){e.info("main.messages.create.success"),a.journalForm.$setPristine()}).$promise["catch"](angular.noop)}}]),angular.module("hitsaOis").controller("JournalListController",["$scope","$route","QueryUtils","Classifier","$q","dialogService","message",function(a,b,c,d,e,f,g){a.auth=b.current.locals.auth,a.search={};var h=d.valuemapper({status:"PAEVIK_STAATUS"}),i=h.promises;a.formState={},c.endpoint("/journals/canConfirmAll").search().$promise.then(function(b){a.formState.canConfirmAll=b.canConfirmAll}),a.confirmAll=function(){f.confirmDialog({prompt:"journal.prompt.confirmAll"},function(){c.endpoint("/journals/confirmAll").put().$promise.then(function(b){g.info("journal.messages.allConfirmed",{numberOfConfirmedJournals:b.numberOfConfirmedJournals}),a.loadData()})})},a.criteriaDefer=e.defer(),c.createQueryForm(a,"/journals",{},h.objectmapper),a.$watch("criteria.studyYear",function(b){angular.isNumber(b)&&e.all(i).then(function(){a.loadData(),a.criteriaDefer.resolve()})}),a.showModuleNames=function(b){return b.map(function(b){return a.currentLanguageNameField(b)}).join(", ")},a.$watch("criteria.teacherObject",function(b){a.criteria.teacher=angular.isObject(b)?b.id:b}),a.$watch("criteria.moduleObject",function(){a.criteria.module=a.criteria.moduleObject?a.criteria.moduleObject.id:null}),a.clearSearch=function(){a.clearCriteria(),a.search={module:[]}}}]),angular.module("hitsaOis").controller("JournalStudentSelectionController",["$scope","$route","QueryUtils","ArrayUtils","message","dialogService",function(a,b,c,d,e,f){var g=b.current.locals.entity;a.selectedStudents=[],a.addSelectedStudents=function(){c.endpoint("/journals/"+g.id+"/addStudentsToJournal").save({students:a.selectedStudents},b.reload)},c.endpoint("/journals/"+g.id+"/suitedStudents").query({},function(b){a.tabledata={content:b},b.forEach(function(b){a.selectedStudents.push(b.studentId)})}),a.searchStudent=function(){f.showDialog("journal/journal.searchStudent.dialog.html",function(d){d.selectedStudents=[];var e=[];a.tabledata.content&&(e=a.tabledata.content.map(function(a){return a.studentId})),b.current.params._menu=!0,c.createQueryForm(d,"/journals/"+g.id+"/otherStudents",{studentId:e}),d.loadData()},function(b){b.tabledata.content.forEach(function(c){-1!==b.selectedStudents.indexOf(c.studentId)&&(a.tabledata.content.push(c),a.selectedStudents.push(c.studentId))})})},a.removeStudent=function(b){d.remove(a.selectedStudents,b.studentId),d.remove(a.tabledata.content,b)}}]),angular.module("hitsaOis").controller("JournalEditController",["$scope","$route","$filter","QueryUtils","ArrayUtils","DataUtils","Classifier","message","dialogService","VocationalGradeUtil","$q","oisFileService",function(a,b,c,d,e,f,g,h,i,j,k,l){function m(){d.endpoint("/journals/"+A.id+"/usedHours").get().$promise.then(function(b){a.journal.usedHours=b.usedHours})}function n(b){var c=d.endpoint("/journals/"+A.id+"/journalStudents").query({allStudents:!!b}).$promise;d.endpoint("/journals/"+A.id+"/journalEntriesByDate").query({allStudents:!!b},function(b){var d=b;x.objectmapper(d),d.forEach(function(a){for(var b in a.journalStudentResults)a.journalStudentResults.hasOwnProperty(b)&&x.objectmapper(a.journalStudentResults[b])}),a.journal.journalEntriesByDate=d,c.then(function(b){a.journal.journalStudents=b})})}function o(b){a.journal=b,a.moodleCourseId=b.moodleCourseId,p(),n(a.showAllStudentsModel)}function p(){a.journalEntriesCriteria={size:20,page:1},angular.isDefined(a.journalEntries)||(a.journalEntries={}),a.loadJournalEntries=function(){var b=d.getQueryParams(a.journalEntriesCriteria);a.journalEntries.$promise=d.endpoint("/journals/"+A.id+"/journalEntry").search(b,a.afterLoadJournalEntries)},a.afterLoadJournalEntries=function(b){a.journalEntriesCriteria.size=b.size,a.journalEntriesCriteria.page=b.number+1,a.journalEntries.content=b.content,a.journalEntries.totalElements=b.totalElements},a.loadJournalEntries()}function q(){o(A)}function r(b){b.journalStudents=A.journalStudents,b.absenceOptions={},b.capacityTypes=g.queryForDropdown({mainClassCode:"MAHT"}),b.lessonPlanDates=a.formState.lessonInfo.lessonPlanDates.map(function(a){var b=c("hoisDate")(a);return{nameEt:b,nameEn:b,id:a}}),b.startLessonNrs=y.map(function(a){return{nameEt:a,nameEn:a,id:a}}),b.journalEntry.startLessonNr=a.formState.lessonInfo.startLessonNr,b.lessons=z.map(function(a){return{nameEt:a,nameEn:a,id:a}}),b.journalEntry.lessons=a.formState.lessonInfo.lessons,g.queryForDropdown({mainClassCode:"PUUDUMINE"},function(a){b.absenceOptions=g.toMap(a)})}function s(a,b){var c=[];if(angular.isObject(a)){for(var d in a)a.hasOwnProperty(d)&&a[d]===!0&&c.push(d);b.journalEntryCapacityTypes=c}}function t(a,b){d.endpoint("/journals/"+A.id+"/hasFinalEntry").search().$promise.then(function(c){c.hasFinalEntry&&(b?"SISSEKANNE_L"!==b.entryType&&a.forbiddenEntryTypes.push("SISSEKANNE_L"):a.forbiddenEntryTypes.push("SISSEKANNE_L"))}),a.forbiddenEntryTypes.push("SISSEKANNE_O")}function u(b){i.showDialog("journal/journal.addEntry.dialog.html",function(c){function i(a){c.journalStudents.forEach(function(b){b.hasAcceptedAbsence=null!==a&&e.contains(a,b.id),c.journalEntryStudents[b.id]||(c.journalEntryStudents[b.id]={}),b.hasAcceptedAbsence?(c.journalEntryStudents[b.id].excused=!0,c.journalEntryStudentAbsenceChanged(c.journalEntryStudents,b,c.journalEntryStudents[b.id].excused,"PUUDUMINE_V")):(c.journalEntryStudents[b.id].excused=!1,"PUUDUMINE_V"===c.journalEntryStudents[b.id].absence&&c.journalEntryStudentAbsenceChanged(c.journalEntryStudents,b,null,null))})}function j(a){switch(a.absence){case"PUUDUMINE_V":a.excused=!0;break;case"PUUDUMINE_H":a.late=!0;break;case"PUUDUMINE_P":a.withoutReason=!0}}function k(){return"SISSEKANNE_O"!==c.journalEntry.entryType&&0===c.journalEntry.journalEntryStudents.length}function l(a,b){for(var d=0;d<c.journalStudents.length;d++)c.journalStudents[d].id===a&&(c.journalStudents[d].hasAcceptedAbsence="PUUDUMINE_V"===b?!0:!1)}function o(a,b,c){switch(c){case"PUUDUMINE_V":a[b.id].withoutReason=!1,a[b.id].late=!1;break;case"PUUDUMINE_H":a[b.id].excused=!1,a[b.id].withoutReason=!1;break;case"PUUDUMINE_P":a[b.id].excused=!1,a[b.id].late=!1}}c.$watch("journalEntry.entryType",function(){"SISSEKANNE_L"===c.journalEntry.entryType?a.journal.isDistinctiveAssessment?c.filterGrades=["KUTSEHINDAMINE_X","KUTSEHINDAMINE_A","KUTSEHINDAMINE_MA"]:c.filterGrades=["KUTSEHINDAMINE_1","KUTSEHINDAMINE_2","KUTSEHINDAMINE_3","KUTSEHINDAMINE_4","KUTSEHINDAMINE_5"]:c.filterGrades=[]}),c.entryDateChanged=function(){return c.journalEntry.entryDate?void d.endpoint("/journals/"+A.id+"/studentsWithAcceptedAbsence").query({entryDate:c.journalEntry.entryDate}).$promise.then(function(a){i(a),c.previousEntryDate=c.journalEntry.entryDate}):void i(null)},c.hasAcceptedAbsence=function(a){var b=c.journalEntryStudents[a.id];return b&&"PUUDUMINE_V"===b.absence||a.hasAcceptedAbsence},c.journalEntry={},c.selectedCapacityTypes={},c.journalEntryStudents={},c.forbiddenEntryTypes=[],r(c),angular.isDefined(b)?(angular.extend(c.journalEntry,b),c.entryDateCalendar=c.journalEntry.entryDate,b.journalEntryStudents.forEach(function(a){c.journalEntryStudents[a.journalStudent]=a,f.convertStringToDates(a.journalEntryStudentHistories,["gradeInserted"]),x.objectmapper(a.journalEntryStudentHistories),j(a),l(a.journalStudent,a.absence)}),c.savedJournalEntryStudents=angular.copy(c.journalEntryStudents),b.journalEntryCapacityTypes.forEach(function(a){c.selectedCapacityTypes[a]=!0}),c.canDeleteEntries=k()):c.journalStudents&&c.journalStudents.forEach(function(a){a.hasAcceptedAbsence=!1}),t(c,b),c.changedJournalEntryStudents=[],c.journalEntryStudentChanged=function(a,b){angular.isObject(a[b.id])||(a[b.id]={}),a[b.id].journalStudent=b.id,-1===c.changedJournalEntryStudents.indexOf(a[b.id])&&c.changedJournalEntryStudents.push(a[b.id])},c.journalEntryStudentAbsenceChanged=function(a,b,d,e){angular.isObject(a[b.id])||(a[b.id]={}),a[b.id].journalStudent=b.id,a[b.id].absence=d?e:null,-1===c.changedJournalEntryStudents.indexOf(a[b.id])&&c.changedJournalEntryStudents.push(a[b.id]),o(a,b,e)},c.setJournalEntryDefaultName=function(a){var b={entryType:a};x.objectmapper(b),c.journalEntry.nameEt=b.entryType.nameEt},c.grades=g.queryForDropdown({mainClassCode:"KUTSEHINDAMINE"}),c["delete"]=function(){new B(c.journalEntry).$delete().then(function(){h.info("main.messages.delete.success"),m(),p(),n(a.showAllStudentsModel)})["catch"](angular.noop),c.cancel()}},function(b){var c=angular.extend({},b.journalEntry);c.journalEntryStudents=b.changedJournalEntryStudents,s(b.selectedCapacityTypes,c),c.entryDate||delete c.entryDate;var d=new B(c);angular.isDefined(c.id)?d.$update().then(function(){h.info("main.messages.create.success"),m(),p(),n(a.showAllStudentsModel)}):d.$save().then(function(){h.info("main.messages.create.success"),m(),p(),n(a.showAllStudentsModel)})})}function v(){new C(a.journal).$update().then(function(b){h.info("journal.messages.confirmed"),a.journal.canBeConfirmed=b.canBeConfirmed,a.journal.canBeUnconfirmed=b.canBeUnconfirmed,a.$parent.journal.status=b.status})}function w(){a.materials=d.endpoint("/studyMaterial/journal/"+a.journal.id+"/materials").query(),a.materials.$promise.then(function(a){k.all(F.promises).then(function(){F.objectmapper(a)})})}a.gradeUtil=j;var x=g.valuemapper({entryType:"SISSEKANNE",grade:"KUTSEHINDAMINE",absence:"PUUDUMINE"}),y=[1,2,3,4,5,6,7,8,9,10],z=[1,2,3,4,5];a.formState={},a.showAllStudentsModel=!0;var A=b.current.locals.entity;angular.isDefined(A)&&(a.formState.lessonInfo=d.endpoint("/journals/"+A.id+"/journalEntry/lessonInfo").get(),a.formState.xlsUrl="journals/"+A.id+"/journal.xls",o(A)),a.searchStudent=function(){i.showDialog("journal/journal.searchStudent.dialog.html",function(a){a.selectedStudents=[],d.createQueryForm(a,"/journals/"+A.id+"/otherStudents",{}),a.loadData()},function(b){d.endpoint("/journals/"+A.id+"/addStudentsToJournal").save({students:b.selectedStudents},function(){h.info("journal.messages.studentSuccesfullyAdded"),n(a.showAllStudentsModel)})})},a.enrollStudents=function(){d.endpoint("/journals/"+A.id+"/moodle/enrollStudents").save(null,function(a){i.showDialog("components/moodle.enroll.dialog.html",function(b){b.moodleResponse=a},q,q)})},a.importGradeItems=function(){d.endpoint("/journals/"+A.id+"/moodle/importGradeItems").save(null,function(){h.info("moodle.messages.gradeItemsImported"),q()})},a.importAllGrades=function(){d.endpoint("/journals/"+A.id+"/moodle/importAllGrades").save(null,function(){h.info("moodle.messages.allGradesImported"),q()})},a.importMissingGrades=function(){d.endpoint("/journals/"+A.id+"/moodle/importMissingGrades").save(null,function(){h.info("moodle.messages.missingGradesImported"),q()})},a.removeStudentFromJournal=function(b){i.confirmDialog({prompt:"journal.studentDeleteconfirm"},function(){d.endpoint("/journals/"+A.id+"/removeStudentsFromJournal").save({students:[b]},function(){h.info("journal.messages.studentSuccesfullyRemoved"),n(a.showAllStudentsModel)})})},a.journalEntryTypeColors={SISSEKANNE_T:"grey-50",SISSEKANNE_E:"amber-100",SISSEKANNE_I:"lime-100",SISSEKANNE_H:"pink-50",SISSEKANNE_L:"pink-300",SISSEKANNE_O:"light-blue-50"},a.journalEntryTypes={},g.queryForDropdown({mainClassCode:"SISSEKANNE"},function(b){a.journalEntryTypes=g.toMap(b)}),a.getEntryColor=function(b){return a.journalEntryTypeColors[b]};var B=d.endpoint("/journals/"+A.id+"/journalEntry");a.addNewEntry=function(){u()},a.editJournalEntry=function(a){B.get({id:a},function(a){u(a)})},a.moduleDescriptionDialog=function(a){i.showDialog("journal/journal.moduleDescription.dialog.html",function(b){b.moduleDescription=a})},a.showAllStudents=function(a){n(a)};var C=d.endpoint("/journals/confirm/"),D=d.endpoint("/journals/unconfirm/");a.confirm=function(){i.confirmDialog({prompt:"journal.prompt.confirm"},function(){d.endpoint("/journals/"+a.journal.id+"/withoutFinalResult/").query().$promise.then(function(a){if(e.isEmpty(a))v();else{var b=a.map(function(a){return a.fullname}).join(", ");i.confirmDialog({prompt:"journal.prompt.someStudentsDoNotHaveFinalResult",students:b},v)}})})},a.unconfirm=function(){i.confirmDialog({prompt:"journal.prompt.unconfirm"},function(){new D(a.journal).$update().then(function(b){h.info("journal.messages.unconfirmed"),a.journal.canBeConfirmed=b.canBeConfirmed,a.journal.canBeUnconfirmed=b.canBeUnconfirmed,a.$parent.journal.status=b.status})})},a.getFileUrl=l.getUrl;var E=d.endpoint("/studyMaterial/connect"),F=g.valuemapper({typeCode:"OPPEMATERJAL"});w(),a.deleteConnection=function(a,b){i.confirmDialog({prompt:b>1?"studyMaterial.deleteconfirm":"studyMaterial.deletelastconfirm"},function(){var b=new E(a);b.$delete().then(function(){h.info("main.messages.delete.success"),w()})["catch"](angular.noop)})},a.addExisting=function(){if(!a.existingMaterial)return void h.error("main.messages.form-has-errors");var b=new E;b.studyMaterial=a.existingMaterial.id,b.journal=a.journal.id,b.$save().then(function(){a.existingMaterial=void 0,w()})}}]),angular.module("hitsaOis").config(["$routeProvider","USER_ROLES",function(a,b){a.when("/journals",{templateUrl:"journal/journal.list.html",controller:"JournalListController",controllerAs:"journalListController",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}]},data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_PAEVIK]}}).when("/journal/:id/:action",{templateUrl:function(a){return"edit"===a.action?"journal/journal.html":"journal/journal.view.html"},controller:"JournalController",controllerAs:"journalController",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}],entity:["QueryUtils","$route",function(a,b){return a.endpoint("/journals").get({id:b.current.params.id}).$promise}],isView:["$route",function(a){return"view"===a.current.params.action}]},data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_PAEVIK,b.ROLE_OIGUS_M_TEEMAOIGUS_PAEVIK]}})}]),function(){function a(a){return a.reduce(function(a,b){return null!==b&&isFinite(b)&&b>0&&(a+=b),a},0)}function b(a){for(var b=[],c=0,d=a.formState.weekNrs.length;d>c;c++)b[c]=0;return b}function c(b,c,d){var e=a(c.hours[d]);b.formState.journalTotals[c.id][d]=e}function d(b,c,d){var e=c.hours[d];b.formState.studyPeriods.forEach(function(b){c.spHours[d][b.arrayIndex]=a(e.slice(b.weekIndex[0],b.weekIndex[1]))})}function e(a,b){angular.isObject(a.formState.journalTotals[b.id]._spTotals)||(a.formState.journalTotals[b.id]._spTotals={}),a.formState.studyPeriods.forEach(function(c,d){a.formState.journalTotals[b.id]._spTotals[d]=Object.values(b.spHours).reduce(function(a,b){return angular.isObject(b)&&!isNaN(b[d])&&(a+=b[d]),a},0)})}function f(b,c){angular.isObject(b.formState.capGrandTotalsSp)||(b.formState.capGrandTotalsSp={},b.formState.grandTotalsSp={}),angular.isObject(b.formState.capGrandTotalsSp[c])||(b.formState.capGrandTotalsSp[c]={}),b.formState.studyPeriods.forEach(function(d){angular.isArray(b.formState.grandTotals[c])&&(b.formState.capGrandTotalsSp[c][d.arrayIndex]=a(b.formState.grandTotals[c].slice(d.weekIndex[0],d.weekIndex[1])),b.formState.grandTotalsSp[d.arrayIndex]=a(b.formState.grandTotals._._.slice(d.weekIndex[0],d.weekIndex[1])))})}function g(b,c,d){var e=b.formState.capacityTypes.reduce(function(a,b){var e=c.hours[b.code];if(void 0!==e){var f=e[d];null!==f&&isFinite(f)&&f>0&&(a+=f)}return a},0),f=b.formState.journalTotals[c.id];f._[d]=e,f.__=a(f._)}function h(b,c,d,e){c._[d]=a(c[d]);var f=b.formState.capacityTypes.reduce(function(a,b){var d=c[b.code];return void 0!==d&&(a+=d[e]),a},0);c._._[e]=f,c.__=a(c._._)}angular.module("hitsaOis").controller("LessonplanSearchController",["$location","$mdDialog","$route","$scope","DataUtils","QueryUtils","Session","USER_ROLES","AuthService",function(a,b,c,d,e,f,g,h,i){function j(a){return function(b){return-1===a.indexOf(b.id)}}d.canEdit=i.isAuthorized([h.ROLE_OIGUS_M_TEEMAOIGUS_TUNNIJAOTUSPLAAN,h.ROLE_OIGUS_M_TEEMAOIGUS_AINEOPPETAJA]);var k=g.school||{};d.formState={higher:k.higher,vocational:k.vocational},d.currentNavItem=c.current.$$route.data.currentNavItem;var l="/lessonplans";d.newLessonplan=function(){var c=d.formState,e=d.criteria.studyYear;b.show({controller:["$scope",function(d){d.formState=c,d.record={studyYear:e},d.create=function(){f.endpoint(l).save(d.record).$promise.then(function(c){b.hide(),a.url(l+"/vocational/"+c.id+"/edit")})},d.cancel=b.hide}],templateUrl:"lessonplan/new.lessonplan.dialog.html",clickOutsideToClose:!0})},f.endpoint(l+"/searchFormData").search().$promise.then(function(a){var b=a.studyYears;if(d.formState.studyYears=b,!d.criteria.studyYear){var c=e.getCurrentStudyYearOrPeriod(d.formState.studyYears);c&&(d.criteria.studyYear=c.id)}d.criteria.studyYear&&d.loadData();for(var f=a.studentGroups,g=a.studentGroupMapping,h={},i=0,k=b.length;k>i;i++){var l=b[i].id,m=g[l]||[];h[l]=f.filter(j(m))}d.formState.studentGroups=f,d.formState.studentGroupMap=h,d.formState.curriculumVersions=a.curriculumVersions}),f.createQueryForm(d,l,{})}]).controller("LessonplanTeacherSearchController",["$route","$scope","DataUtils","QueryUtils","Session","USER_ROLES","AuthService",function(a,b,c,d,e,f,g){b.canEdit=g.isAuthorized([f.ROLE_OIGUS_M_TEEMAOIGUS_TUNNIJAOTUSPLAAN,f.ROLE_OIGUS_M_TEEMAOIGUS_AINEOPPETAJA]);var h=e.school||{};b.formState={higher:h.higher,vocational:h.vocational},b.currentNavItem=a.current.$$route.data.currentNavItem;var i="/lessonplans/byteacher";b.formState.studyYears=d.endpoint("/autocomplete/studyYears").query(),b.formState.studyYears.$promise.then(function(){if(!b.criteria.studyYear){var a=c.getCurrentStudyYearOrPeriod(b.formState.studyYears);a&&(b.criteria.studyYear=a.id)}b.criteria.studyYear&&b.loadData()}),d.createQueryForm(b,i,{})}]).controller("LessonplanEditController",["$location","$mdDialog","$route","$scope","message","Classifier","QueryUtils","dialogService",function(i,j,k,l,m,n,o,p){function q(a,b,c){var d=l.formState.moduleTotals[a.id],e=a.journals.reduce(function(a,d){var e=d.hours[b];return void 0!==e&&void 0!==e[c]&&(a+=e[c]),a},0);d[b][c]=e,h(l,d,b,c)}function r(a,b){var c=Object.keys(l.formState.moduleMap).reduce(function(c,d){var e=l.formState.moduleTotals[d],f=e[a];return void 0!==f&&(c+=f[b]),c},0),d=l.formState.grandTotals;d[a][b]=c,h(l,d,a,b)}function s(){w=angular.toJson(l.record)}function t(){i.path("/lessonplans/vocational")}var u=k.current.params.id,v="/lessonplans";l.formState={capacityTypes:n.queryForDropdown({mainClassCode:"MAHT"}),showWeeks:!0},l.keys=Object.keys,l.getCapacityTypes=function(a){return l.formState.capacityTypes.filter(function(b){return void 0!==a&&void 0!==a[b.code]})};var w;o.endpoint(v).get({id:u}).$promise.then(function(a){l.formState.studyPeriods=a.studyPeriods;var h=0;l.formState.studyPeriods.forEach(function(a,b){a.weekIndex=[h,h+a.weekNrs.length],a.arrayIndex=b,h+=a.weekNrs.length}),l.formState.weekNrs=a.weekNrs,l.formState.weekBeginningDates=a.weekBeginningDates,l.formState.legends=a.legends.reduce(function(a,b){return a[b.weekNr]=b.color,a},{}),delete a.studyPeriods,delete a.weekNrs,delete a.weekBeginningDates,delete a.legends,l.formState.moduleMap={},l.formState.rowTotals={},l.formState.journalTotals={},l.formState.moduleTotals={},l.formState.grandTotals={_:{_:b(l)}},l.formState.capacityTypes.$promise.then(function(){a.modules.forEach(function(a){l.formState.moduleMap[a.id]=a,l.formState.moduleTotals[a.id]={_:{_:b(l)}},a.journals.forEach(function(f){f.spHours={},f.spTotals={},f.lessonPlanModule=a.id,l.formState.journalTotals[f.id]={_:b(l)},l.formState.capacityTypes.forEach(function(e){var g=e.code;f.spHours[g]={};var h=f.hours[g];if(void 0!==h){c(l,f,g),d(l,f,g);var i=l.formState.moduleTotals[a.id];void 0===i[g]&&(i[g]=b(l));var j=l.formState.grandTotals;void 0===j[g]&&(j[g]=b(l))}});for(var h=0,i=l.formState.weekNrs.length;i>h;h++)g(l,f,h);e(l,f),f.requiredLessons={},f.themes.forEach(function(a){for(var b in a.hours)angular.isUndefined(f.requiredLessons[b])&&(f.requiredLessons[b]=0),f.requiredLessons[b]+=a.hours[b]})}),l.formState.capacityTypes.forEach(function(b){var c=b.code,d=l.formState.moduleTotals[a.id];if(void 0!==d[c])for(var e=0,f=l.formState.weekNrs.length;f>e;e++)q(a,c,e)})}),l.formState.capacityTypes.forEach(function(a){var b=a.code,c=l.formState.grandTotals;if(void 0!==c[b])for(var d=0,e=l.formState.weekNrs.length;e>d;d++)r(b,d);f(l,b)}),l.record=a,s()})}),l.updateTotals=function(a,b,d){var f=a.hours[b],h=parseInt(f[d],10);(isNaN(h)||0>h)&&(h=void 0),h!==f[d]&&(f[d]=h),c(l,a,b),g(l,a,d),q(l.formState.moduleMap[a.lessonPlanModule],b,d),r(b,d),l.updateSpRowByWeek(a,b,d),e(l,a),l.updateSpGrandTotals(b,d)},l.getCapacityByCode=function(a){return l.formState.capacityTypes.find(function(b){return b.code===a})},l.updateLessonCountByStudyPeriod=function(a,b,c){var d=l.formState.studyPeriods[c],e=a.spHours[b][c],f=e/d.weekNrs.length;f%1!==0&&(f=Math.ceil(f));for(var g=0,h=d.weekIndex[0],i=0;i<d.weekNrs.length;i++)a.hours[b][h]=f,g+=f,l.updateTotals(a,b,h),g===Number(e)&&(f=0),(e-g)/(d.weekNrs.length-i-1)%1===0&&(f=(e-g)/(d.weekNrs.length-i-1)),h+=1},l.updateSpGrandTotals=function(b,c){angular.isObject(l.formState.capGrandTotalsSp)||(l.formState.capGrandTotalsSp={},l.formState.grandTotalsSp={}),angular.isObject(l.formState.capGrandTotalsSp[b])||(l.formState.capGrandTotalsSp[b]={});var d=l.formState.studyPeriods.find(function(a){return a.weekIndex[0]<=c&&a.weekIndex[1]>=c});l.formState.capGrandTotalsSp[b][d.arrayIndex]=a(l.formState.grandTotals[b].slice(d.weekIndex[0],d.weekIndex[1])),l.formState.grandTotalsSp[d.arrayIndex]=a(l.formState.grandTotals._._.slice(d.weekIndex[0],d.weekIndex[1]))},l.updateSpRowByWeek=function(b,c,d){var e=b.hours[c],f=l.formState.studyPeriods.find(function(a){return a.weekIndex[0]<=d&&a.weekIndex[1]>=d});b.spHours[c][f.arrayIndex]=a(e.slice(f.weekIndex[0],f.weekIndex[1]))},l.newJournal=function(a){i.url(v+"/journals/new?_noback&lessonPlanModule="+a.id)},l.editJournal=function(a){i.url(v+"/journals/"+a.id+"/edit?_noback&lessonPlanModule="+a.lessonPlanModule)},l.update=function(){l.record.$update().then(m.updateSuccess).then(s)},l.getLegendByWeek=function(a){return l.formState.legends[a]},l.back=function(){w===angular.toJson(l.record)?t():p.confirmDialog({prompt:"lessonplan.changed.save",accept:"main.yes",cancel:"main.no"},function(){l.record.$update().then(m.updateSuccess).then(t)},function(){t()})}}]).controller("LessonplanTeacherViewController",["$location","$mdDialog","$route","$scope","message","Classifier","QueryUtils",function(a,i,j,k,l,m,n){var o=j.current.params.id,p=j.current.params.studyYear,q="/lessonplans/byteacher";k.formState={capacityTypes:m.queryForDropdown({mainClassCode:"MAHT"}),showWeeks:!0,showCapacityTypes:!0},k.keys=Object.keys,k.getCapacityTypes=function(a){return k.formState.capacityTypes.filter(function(b){return void 0!==a&&void 0!==a[b.code]})},k.getCapacityByCode=function(a){return k.formState.capacityTypes.find(function(b){return b.code===a})},n.endpoint(q+"/:id/:studyYear").search({id:o,studyYear:p}).$promise.then(function(a){k.formState.studyPeriods=a.studyPeriods;var i=0;k.formState.studyPeriods.forEach(function(a,b){a.weekIndex=[i,i+a.weekNrs.length],a.arrayIndex=b,i+=a.weekNrs.length}),k.formState.weekNrs=a.weekNrs,k.formState.weekBeginningDates=a.weekBeginningDates,k.formState.rowTotals={},k.formState.journalTotals={},k.formState.grandTotals={_:{_:b(k)}},k.formState.capacityTypes.$promise.then(function(){function i(b,c){return a.journals.reduce(function(a,d){var e=d.hours[c];return void 0!==e&&(a+=e[b]),a},0)}a.journals.forEach(function(a){a.spHours={},a.spTotals={},k.formState.journalTotals[a.id]={_:b(k)},k.formState.capacityTypes.forEach(function(e){var f=e.code;a.spHours[f]={};var g=a.hours[f];if(void 0!==g){c(k,a,f),d(k,a,f);var h=k.formState.grandTotals;void 0===h[f]&&(h[f]=b(k))}});for(var f=0,h=k.formState.weekNrs.length;h>f;f++)g(k,a,f);e(k,a)}),k.formState.capacityTypes.forEach(function(a){var b=a.code,c=k.formState.grandTotals;if(void 0!==c[b])for(var d=0,e=k.formState.weekNrs.length;e>d;d++)c[b][d]=i(d,b),h(k,c,b,d);f(k,b)}),k.formState.subjectCapacityTypes=[],k.formState.studyPeriods.forEach(function(a){k.formState.capacityTypes.forEach(function(b){k.formState.subjectCapacityTypes.push({studyPeriod:a.id,code:b.code,value:b.value})})}),k.record=a})})}])}(),angular.module("hitsaOis").controller("LessonplanJournalEditController",["$location","$route","$scope","dialogService","message","Classifier","QueryUtils",function(a,b,c,d,e,f,g){function h(){var a=c.record.journalOccupationModuleThemes;return c.journalForm.theme.$setValidity("required",a&&a.length>0),c.journalForm.$setSubmitted(),c.journalForm.$valid?!0:(e.error("main.messages.form-has-errors"),!1)}function i(){var a={};c.record.journalOccupationModuleThemes.forEach(function(b){var d=c.formState.themes.find(function(a){return a.id===b});for(var e in d.capacities)angular.isDefined(a[e])?a[e]+=d.capacities[e]:a[e]=d.capacities[e]});var b=c.formState.capacityTypes;b.forEach(function(b){angular.isDefined(a[b.code])?(b._selected=!0,angular.isDefined(b.hours)?b.hours=a[b.code]:b.hours=a[b.code]):(b._selected=!1,b.hours=0)})}var j=b.current.params.id,k=b.current.params.lessonPlanModule,l="/lessonplans/journals";c.formState={capacityTypes:f.queryForDropdown({mainClassCode:"MAHT",vocational:!0})},c.record=g.endpoint(l).get({id:j||"new",lessonPlanModule:k}),c.record.$promise.then(function(a){if(c.formState.capacityTypes.$promise.then(function(){f.setSelectedCodes(c.formState.capacityTypes,c.record.journalCapacityTypes)}),g.endpoint("/autocomplete/studentgroups").query({valid:!0,higher:!1}).$promise.then(function(b){c.formState.studentGroups=b.filter(function(b){return b.id!==a.studentGroupId})}),c.formState.themes=a.themes,delete a.themes,c.formState.themeMap=c.formState.themes.reduce(function(a,b){return a[b.id]=b,a},{}),angular.isArray(a.groups))for(var b=0;a.groups.length>b;b++)a.groups[b].group.modules=g.endpoint("/autocomplete/curriculumversionomodules").query({curriculumVersion:a.groups[b].curriculumVersion}),a.groups[b].group.themes=g.endpoint("/autocomplete/curriculumversionomodulethemes").query({curriculumVersionOmoduleId:a.groups[b].curriculumVersionOccupationModule});i(),c.record.lessonPlan=a.lessonPlan}),c.lessonPlanModule=b.current.params.lessonPlanModule,c.update=function(){h()&&(c.record.journalCapacityTypes=f.getSelectedCodes(c.formState.capacityTypes),c.record.id?c.record.$update().then(function(a){e.updateSuccess();for(var b=0;a.groups.length>b;b++)a.groups[b].group.modules=g.endpoint("/autocomplete/curriculumversionomodules").query({curriculumVersion:a.groups[b].curriculumVersion}),a.groups[b].group.themes=g.endpoint("/autocomplete/curriculumversionomodulethemes").query({curriculumVersionOmoduleId:a.groups[b].curriculumVersionOccupationModule})})["catch"](angular.noop):c.record.$save().then(function(){e.info("main.messages.create.success"),a.url(l+"/"+c.record.id+"/edit?_noback&lessonPlanModule="+k)})["catch"](angular.noop));
},c.filter=function(a,b){return b.filter(function(b){return b.id===a})[0]},c["delete"]=function(){d.confirmDialog({prompt:"lessonplan.journal.deleteconfirm"},function(){c.record.$delete().then(function(){e.info("main.messages.delete.success"),a.url("/lessonplans/vocational/"+c.record.lessonPlan+"/edit")})["catch"](angular.noop)})},c.addTheme=function(){var a=c.formState.theme;if(a){if(null===c.record.journalOccupationModuleThemes&&(c.record.journalOccupationModuleThemes=[]),-1!==c.record.journalOccupationModuleThemes.indexOf(a))return void e.error("lessonplan.journal.duplicatetheme");c.record.journalOccupationModuleThemes.push(a),i()}c.formState.theme=null},c.deleteTheme=function(a){var b=c.record.journalOccupationModuleThemes.indexOf(a);-1!==b&&c.record.journalOccupationModuleThemes.splice(b,1),i()},c.deleteRoom=function(a){var b=c.record.journalRooms.indexOf(a);-1!==b&&c.record.journalRooms.splice(b,1)},c.addTeacher=function(){return null===c.record.journalTeachers&&(c.record.journalTeachers=[]),c.record.journalTeachers.some(function(a){return a.teacher.id===c.formState.teacher.id})?void e.error("lessonplan.journal.duplicateteacher"):(c.record.journalTeachers.push({teacher:c.formState.teacher}),void(c.formState.teacher=void 0))},c.deleteTeacher=function(a){var b=-1;c.record.journalTeachers.forEach(function(c,d){c.id===a.id&&(b=d)}),-1!==b&&c.record.journalTeachers.splice(b,1)},c.addGroup=function(){var a=JSON.parse(JSON.stringify(c.filter(c.formState.group,c.formState.studentGroups)));return(null===c.record.groups||"undefined"==typeof c.record.groups)&&(c.record.groups=[]),c.record.groups.some(function(a){return a.group.id===c.formState.group})?void e.error("lessonplan.journal.duplicategroup"):(g.endpoint("/autocomplete/curriculumversionomodules").query({curriculumVersion:a.curriculumVersion}).$promise.then(function(b){a.modules=b,c.record.groups.push({group:a,studentGroup:a.id})}),void(c.formState.group=void 0))},c.$watch("formState.room",function(){if(angular.isDefined(c.formState.room)&&null!==c.formState.room){if(c.record.journalRooms.some(function(a){return a.id===c.formState.room.id}))return e.error("lessonplan.journal.duplicateroom"),void(c.formState.room=void 0);c.record.journalRooms.push(c.formState.room),c.formState.room=void 0}}),c.$watch("formState.theme",function(){angular.isDefined(c.formState.theme)&&null!==c.formState.theme&&c.addTheme()}),c.$watch("formState.teacher",function(){angular.isDefined(c.formState.teacher)&&null!==c.formState.teacher&&c.addTeacher()}),c.$watch("formState.group",function(){angular.isDefined(c.formState.group)&&null!==c.formState.group&&c.addGroup()}),c.newSelectedModule=function(a){null!==a.curriculumVersionOccupationModule&&""!==a.curriculumVersionOccupationModule?(a.curriculumVersionOccupationModuleThemes=null,g.endpoint("/autocomplete/curriculumversionomodulethemes").query({curriculumVersionOmoduleId:a.curriculumVersionOccupationModule}).$promise.then(function(b){a.group.themes=b})):a.group.themes=null},c.deleteGroup=function(a){var b=-1;c.record.groups.forEach(function(c,d){c.id===a.id&&(b=d)}),-1!==b&&c.record.groups.splice(b,1)}}]),angular.module("hitsaOis").config(["$routeProvider","USER_ROLES",function(a,b){a.when("/lessonplans/vocational",{templateUrl:"lessonplan/vocational.search.html",controller:"LessonplanSearchController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}]},data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_TUNNIJAOTUSPLAAN,b.ROLE_OIGUS_V_TEEMAOIGUS_AINEOPPETAJA],currentNavItem:"lessonplan.vocational"}}).when("/lessonplans/vocational/byteacher",{templateUrl:"lessonplan/vocational.teacher.search.html",controller:"LessonplanTeacherSearchController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}]},data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_TUNNIJAOTUSPLAAN,b.ROLE_OIGUS_V_TEEMAOIGUS_AINEOPPETAJA],currentNavItem:"lessonplan.vocational-byteacher"}}).when("/lessonplans/vocational/:id/edit",{templateUrl:"lessonplan/vocational.edit.html",controller:"LessonplanEditController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}]},data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_TUNNIJAOTUSPLAAN],currentNavItem:"lessonplan.vocational"}}).when("/lessonplans/vocational/byteacher/:id/:studyYear",{templateUrl:"lessonplan/vocational.teacher.view.html",controller:"LessonplanTeacherViewController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}]},data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_TUNNIJAOTUSPLAAN,b.ROLE_OIGUS_V_TEEMAOIGUS_AINEOPPETAJA]}}).when("/lessonplans/journals/new",{templateUrl:"lessonplan/journal.edit.html",controller:"LessonplanJournalEditController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}]},data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_TUNNIJAOTUSPLAAN]}}).when("/lessonplans/journals/:id/edit",{templateUrl:"lessonplan/journal.edit.html",controller:"LessonplanJournalEditController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}]},data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_TUNNIJAOTUSPLAAN]}}).when("/lessonplans/events",{templateUrl:"lessonplan/event.search.html",controller:"LessonplanEventSearchController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}]},data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_SYNDMUS]}})}]),angular.module("hitsaOis").controller("LessonplanEventSearchController",["$scope","message","QueryUtils","USER_ROLES","AuthService",function(a,b,c,d,e){a.canEdit=e.isAuthorized(d.ROLE_OIGUS_M_TEEMAOIGUS_SYNDMUS),a.formState={};var f="/timetableevents";c.endpoint(f+"/searchFormData").search().$promise.then(function(b){a.formState.studentGroups=b.studentGroups,a.formState.studyPeriods=b.studyPeriods,a.formState.teachers=b.teachers,a.criteria.singleEvent=!0,a.loadData()}),a.clearCriteria=function(){a.criteria={},a.criteria.singleEvent=!0},a.$watch("criteria.roomObject",function(){a.criteria.room=a.criteria.roomObject?a.criteria.roomObject.id:null}),c.createQueryForm(a,f,{order:"id"}),a.afterNow=function(a,b){a=new Date(a);var c=a.getFullYear(),d=a.getMonth()+1,e=a.getDate(),f=""+c+"-"+d+"-"+e;return new Date(f+" "+b)>new Date}}]),angular.module("hitsaOis").config(["$routeProvider","USER_ROLES",function(a,b){a.when("/ekis/logs",{templateUrl:"logs/logs.view.html",controller:"LogsController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],logType:function(){return"ekis"}},data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_ANDMEVAHETUS_EKIS]}}).when("/kutseregister/logs",{templateUrl:"logs/logs.view.html",controller:"LogsController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],logType:function(){return"kutseregister"}},data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_ANDMEVAHETUS_KUTSEREGISTER]}}).when("/rtip/logs",{templateUrl:"logs/logs.view.html",controller:"LogsController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],logType:function(){return"rtip"}},data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_ANDMEVAHETUS_RTIP]}}).when("/sais/logs",{templateUrl:"logs/logs.view.html",controller:"LogsController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],logType:function(){return"sais"}},data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_ANDMEVAHETUS_SAIS]}})}]),angular.module("hitsaOis").controller("LogsController",["$mdDialog","$route","$scope","QueryUtils",function(a,b,c,d){var e={ekis:["registerDirective","deleteDirective","registerCertificate","registerPracticeContract","enforceContract","enforceDirective","rejectDirective"],kutseregister:["kutseregister.kutsetunnistus"],rtip:["sap.Z_EMPLOEES","sap.tootajaPohiandmed"],sais:["sais2.AllAdmissionsExport","sais2.AllApplicationsExport"]},f=b.current.locals.logType,g="logs."+f+".";c.logType=f,c.messagePrefix=g,c.messageTypes=e[f];var h="/logs/"+f;d.createQueryForm(c,h,{order:"-inserted"}),c.loadData(),c.logentry=function(b){a.show({controller:["$scope",function(c){var e=1e3;c.requestLength=c.responseLength=e,c.cancel=a.hide,c.logType=f,c.messagePrefix=g,c.showAll=function(a){a?c.requestLength=void 0:c.responseLength=void 0},c.record=d.endpoint(h).get({id:b.id,messageType:b.wsName},function(a){(!a.request||a.request.length<e)&&c.showAll(!0),(!a.response||a.response.length<e)&&c.showAll(!1)})}],templateUrl:"logs/logentry.view.dialog.html",clickOutsideToClose:!0})}}]),angular.module("hitsaOis").controller("messageSentController",["$scope","QueryUtils","DataUtils","$route",function(a,b,c,d){a.currentNavItem="message.sent",b.createQueryForm(a,"/message/sent",{order:"-inserted"}),a.loadData(),c.convertStringToDates(a.criteria,["sentFrom","sentThru"]),a.auth=d.current.locals.auth,a.backUrlRef="sent",a.showReceivers=function(a,b){var c="";if(a.receivers){c=a.receivers.join("; ");var d=20;!b&&c.length>d&&(c=c.substring(0,d)+"...")}return c},a.formState={canSend:a.auth.isAdmin()||a.auth.isTeacher()||a.auth.isStudent()||a.auth.isParent()}}]).controller("messageAutomaticSentController",["$scope","QueryUtils","DataUtils","$route",function(a,b,c,d){a.currentNavItem="message.automaticSent",b.createQueryForm(a,"/message/sent/automatic",{order:"-inserted"}),a.loadData(),c.convertStringToDates(a.criteria,["sentFrom","sentThru"]),a.auth=d.current.locals.auth,a.backUrlRef="automaticSent",a.showReceivers=function(a,b){var c="";if(a.receivers){c=a.receivers.join("; ");var d=20;!b&&c.length>d&&(c=c.substring(0,d)+"...")}return c}}]).controller("messageReceivedController",["$scope","QueryUtils","DataUtils","$route","$rootScope",function(a,b,c,d,e){a.currentNavItem="message.received",b.createQueryForm(a,"/message/received",{order:"-inserted"}),a.loadData(),c.convertStringToDates(a.criteria,["sentFrom","sentThru"]),a.auth=d.current.locals.auth,b.endpoint("/message/received/new").get().$promise.then(function(a){e.unreadMessages=a.unread}),a.formState={canSend:a.auth.isAdmin()||a.auth.isTeacher()||a.auth.isStudent()||a.auth.isParent()}}]).controller("messageViewController",["$scope","$route","QueryUtils","DataUtils","$resource","config","$rootScope",function(a,b,c,d,e,f,g){function h(){d.convertStringToDates(a.record,["inserted"]),a.record.receivers=a.record.receiversNames.join("; "),i()}function i(){a.isSent||a.record.isRead?j():c.endpoint("/message/"+a.record.id).update().$promise.then(function(){j()})}function j(){c.endpoint("/message/received/new").get().$promise.then(function(a){g.unreadMessages=a.unread})}var k="/message",l=c.endpoint(k),m=b.current.params.id,n=b.current.params.backUrl;switch(a.formState={},n){case"received":a.formState.backUrl="#/messages/received",a.isSent=!1;break;case"automaticSent":a.formState.backUrl="#/messages/automatic/sent",a.isSent=!0;break;default:a.isSent=!0,a.formState.backUrl="#/messages/sent"}a.record=l.get({id:m},h)}]).controller("messageRespondController",["$scope","QueryUtils","$route","message","$location",function(a,b,c,d,e){function f(){var b={subject:"Re: "+a.respondedMessage.subject,content:"\n>"+a.respondedMessage.content,receivers:[a.respondedMessage.sendersId],responseTo:i};a.record=new h(b),setTimeout(function(){var a=document.getElementById("content");a.focus(),a.selectionStart=0,a.selectionEnd=0},0)}var g="/message",h=b.endpoint(g),i=c.current.params.id,j=c.current.params.backUrl;a.formState={backUrl:j&&"home"===j?"#/":"#/messages/received"},a.respondedMessage=h.get({id:i},f),a.send=function(){function b(){d.info("message.messageSent"),e.path(a.formState.backUrl.substring(1))}return a.messageRespondForm.$setSubmitted(),a.messageRespondForm.$valid?void a.record.$save(b):void d.error("main.messages.form-has-errors")}}]).controller("messageNewController",["$scope","QueryUtils","$route","message","$location","ArrayUtils","$resource","config","$rootScope","$q",function(a,b,c,d,e,f,g,h,i,j){function k(){b.endpoint("/studentgroups").search({curriculums:a.curriculum,studyForm:a.studyForm,size:1e3,sort:"code"}).$promise.then(function(b){a.studentGroups=b.content.map(function(a){return{id:a.id,nameEt:a.code,nameEn:a.code}});var c=b.content.map(function(a){return a.id});a.studentGroup=a.studentGroup.filter(function(a){return-1!==c.indexOf(a)})})}function l(b){g(h.apiUrl+"/message/"+b.studentId+"/parents").query().$promise.then(function(b){var c=u(b,!0).filter(function(a){return!m(a.personId)});a.receivers=a.receivers.concat(c)})}function m(b){return a.receivers.filter(function(a){return a.personId===b}).length>0}function n(b){b.size=1e3,g(h.apiUrl+"/"+x+"/students",b).query().$promise.then(function(b){var c=o(b).filter(function(a){return!m(a.personId)});a.receivers=a.receivers.concat(c)})}function o(a){var b=a.map(function(a){return{studentId:a.id,personId:a.personId,idcode:a.idcode,fullname:a.fullname,role:a.role,studyForm:a.studyForm,curriculum:a.curriculum,studentGroup:a.studentGroup}});return b}function p(){a.receivers=a.receivers.filter(function(b){return(q(b)||r(b.role,a.targetGroup))&&(b.addedWithAutocomplete||r(a.curriculum,b.curriculum?b.curriculum.id:null)&&r(a.studentGroup,b.studentGroup?b.studentGroup.id:null)&&r(a.studyForm,b.studyForm)&&r(a.studyGroupStudentsParents,b.studentGroup?b.studentGroup.id:null))})}function q(b){return"ROLL_T"===a.targetGroup&&r(b.role,"ROLL_L")}function r(a,b){return 0===a.length||f.includes(a,b)}function s(){return a.studyForm.length>0||a.studentGroup.length>0||a.curriculum.length>0||a.studyGroupStudentsParents.length>0}function t(b){g(h.apiUrl+"/message/parents",b).query().$promise.then(function(b){var c=u(b,!1).filter(function(a){return!m(a.personId)});a.receivers=a.receivers.concat(c)})}function u(a,b){var c=a.map(function(a){return{studentId:a.id,personId:a.personId,idcode:a.idcode,fullname:a.fullname,role:["ROLL_L"],studentGroup:a.studentGroup,curriculum:a.curriculum,addedWithAutocomplete:b}});return c}function v(){a.receivers=a.receivers.filter(function(a){return a.addedWithAutocomplete})}function w(){return a.messageNewForm.$valid&&a.receivers.length>0}var x="/message",y=b.endpoint(x);a.record=new y,a.auth=c.current.locals.auth;var z=c.current.params.backUrl;switch(a.formState={},z){case"received":a.formState.backUrl="#/messages/received";break;case"automaticSent":a.formState.backUrl="#/messages/automatic/sent";break;default:a.formState.backUrl="#/messages/sent"}a.targetGroups=[],a.auth.isAdmin()?a.targetGroups=["ROLL_O","ROLL_T","ROLL_L","ROLL_P"]:a.auth.isTeacher()?a.targetGroups=["ROLL_T","ROLL_L"]:(a.auth.isParent()||a.auth.isStudent())&&(a.targetGroups=["ROLL_O"],a.targetGroup="ROLL_O"),a.receivers=[],a.studyForm=[],a.studentGroup=[],a.curriculum=[],a.studyGroupStudentsParents=[],f.includes(a.targetGroups,"ROLL_T")&&k(),a.addReceiver=function(b){if(b&&!m(b.personId)){var c={studentId:b.id,personId:b.personId,idcode:b.idcode,fullname:b.fullname,role:a.targetGroup?[a.targetGroup]:b.role,curriculum:b.curriculum,studentGroup:b.studentGroup,addedWithAutocomplete:!0};a.auth.isTeacher()&&(c.curriculumObject=b.curriculum,c.studentGroupObject=b.studentGroup),a.receivers.push(c),"ROLL_T"===a.targetGroup&&l(c)}a.receiver=void 0},a.removeReceiver=function(b){f.remove(a.receivers,b),1===b.role.length&&"ROLL_T"===b.role[0]&&(a.receivers=a.receivers.filter(function(a){return a.studentId!==b.studentId}))},a.tarGetGroupChanged=function(){a.receivers=[],a.curriculum=[],a.studentGroup=[],a.studyForm=[],a.studyGroupStudentsParents=[]};var A=!1;a.$watch("curriculum",function(){A?(k(),p(),s()?n({studyForm:a.studyForm,studentGroupId:a.studentGroup,curriculum:a.curriculum}):v()):A=!0});var B=!1;a.$watch("studentGroup",function(){B?(p(),s()?n({studyForm:a.studyForm,studentGroupId:a.studentGroup,curriculum:a.curriculum}):v()):B=!0});var C=!1;a.$watch("studyGroupStudentsParents",function(){C?(p(),s()?t({studentGroupId:a.studyGroupStudentsParents}):v()):C=!0});var D=!1;a.$watch("studyForm",function(){D?(k(),p(),s()?n({studyForm:a.studyForm,studentGroupId:a.studentGroup,curriculum:a.curriculum}):v()):D=!0}),a.querySearch=function(c){var d="/message/persons",e=b.endpoint(d),f=j.defer();return e.query({role:a.targetGroup,name:c},function(a){f.resolve(a)}),f.promise},a.send=function(){function b(){d.info("message.messageSent"),e.path(a.formState.backUrl.substring(1))}return a.messageNewForm.$setSubmitted(),w()?(a.record.receivers=a.receivers.map(function(a){return a.personId}),void a.record.$save(b)):void d.error("main.messages.form-has-errors")}}]),angular.module("hitsaOis").config(["$routeProvider","USER_ROLES",function(a,b){function c(a,c){return-1!==d.indexOf(a.roleCode)||-1!==c.indexOf(b.ROLE_OIGUS_V_TEEMAOIGUS_TEADE)}var d=["ROLL_T","ROLL_L","ROLL_P"];a.when("/messages/sent",{templateUrl:"message/message.sent.html",controller:"messageSentController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}]},data:{authorizedRoles:c}}).when("/messages/automatic/sent",{templateUrl:"message/message.sent.html",controller:"messageAutomaticSentController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}]},data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_AUTOTEADE]}}).when("/messages/received",{templateUrl:"message/message.received.html",controller:"messageReceivedController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}]},data:{authorizedRoles:c}}).when("/message/:id/view",{templateUrl:"message/message.view.html",controller:"messageViewController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}]},data:{authorizedRoles:c}}).when("/message/:id/respond",{templateUrl:"message/message.respond.html",controller:"messageRespondController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}]},data:{authorizedRoles:c}}).when("/message/new",{templateUrl:"message/message.new.html",controller:"messageNewController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}]},data:{authorizedRoles:function(a,b){return"ROLL_P"!==a.roleCode&&c(a,b)}}})}]),angular.module("hitsaOis").controller("MessageTemplateListController",["$scope","Classifier","DataUtils","QueryUtils","$q",function(a,b,c,d,e){var f=b.valuemapper({type:"TEATE_LIIK"});d.createQueryForm(a,"/messageTemplate",{order:"type."+a.currentLanguageNameField()},function(a){f.objectmapper(a),c.convertStringToDates(a,["validThru","validFrom"]);for(var b=moment(),d=0;d<a.length;d++){var e=a[d];e._isValid=(!e.validFrom||moment(e.validFrom).isSameOrBefore(b,"day"))&&(!e.validThru||moment(e.validThru).isSameOrAfter(b,"day"))}}),c.convertStringToDates(a.criteria,["validFrom","validThru"]),e.all(f.promises).then(a.loadData)}]).controller("MessageTemplateEditController",["$location","$route","$scope","dialogService","message","DataUtils","QueryUtils","$rootScope",function(a,b,c,d,e,f,g,h){function i(){f.convertStringToDates(c.record,["validFrom","validThru"]),j(),c.getIsValid(),c.messageTemplateForm&&c.messageTemplateForm.$setPristine()}function j(){c.allowedTypes=g.endpoint("/messageTemplate/usedTypeCodes").query({code:c.record.type}).$promise.then(function(a){c.allowedTypes=a})}c.readOnly=-1!==b.current.$$route.originalPath.indexOf("view"),c.getIsValid=function(){c.isValid=(void 0===c.record.validFrom||null===c.record.validFrom||c.record.validFrom<=new Date)&&(void 0===c.record.validThru||null===c.record.validThru||c.record.validThru>=new Date)};var k="/messageTemplate",l=g.endpoint(k),m=b.current.params.id;h.removeLastUrlFromHistory(function(a){return a==="#/messageTemplate/"+m+"/view"||"#/messageTemplate/new"===a}),m?c.record=l.get({id:m},i):(c.record=new l,i()),c.$watch("record.validFrom",function(){c.record.validThru&&c.record.validThru<c.record.validFrom&&(c.record.validThru=null)}),c.usedTypes=[],c.save=function(){return c.messageTemplateForm.$setSubmitted(),c.messageTemplateForm.$valid?void(c.record.id?c.record.$update(i).then(e.updateSuccess):c.record.$save().then(function(){e.info("main.messages.create.success"),a.path(k+"/"+c.record.id+"/edit")})):void e.error("main.messages.form-has-errors")},c["delete"]=function(){d.confirmDialog({prompt:"messageTemplate.deleteconfirm"},function(){c.record.$delete().then(function(){e.info("main.messages.delete.success"),a.path(k)})})}}]),angular.module("hitsaOis").config(["$routeProvider","USER_ROLES",function(a,b){a.when("/messageTemplate",{templateUrl:"messageTemplate/message.template.search.html",controller:"MessageTemplateListController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}]},data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_AUTOTEADE]}}).when("/messageTemplate/new",{templateUrl:"messageTemplate/message.template.edit.html",controller:"MessageTemplateEditController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}]},data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_AUTOTEADE]}}).when("/messageTemplate/:id/edit",{templateUrl:"messageTemplate/message.template.edit.html",controller:"MessageTemplateEditController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}]},data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_AUTOTEADE]}}).when("/messageTemplate/:id/view",{templateUrl:"messageTemplate/message.template.edit.html",controller:"MessageTemplateEditController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}]},data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_AUTOTEADE]}})}]),angular.module("hitsaOis").controller("MidtermTaskStudentResultsController",["$scope","$sessionStorage","QueryUtils","$route","message","MidtermTaskUtil","ArrayUtils","dialogService",function(a,b,c,d,e,f,g,h){function i(b,c){var d=a.record.studentResults.find(function(a){return a.midtermTask===c.id&&a.declarationSubject===b.declarationSubject});return angular.isDefined(d)}function j(a,b){return{midtermTask:b.id,declarationSubject:a.declarationSubject,maxPoints:b.maxPoints,isText:b.studentResultIsText}}function k(){a.record.students.forEach(function(b){for(var c=[],d=0;d<a.record.midtermTasks.length;d++)i(b,a.record.midtermTasks[d])||c.push(j(b,a.record.midtermTasks[d]));a.record.studentResults=a.record.studentResults.concat(c)})}function l(){n.get({id:a.subjectStudyPeriodId}).$promise.then(function(b){a.record=b,a.moodleCourseId=b.subjectStudyPeriod.moodleCourseId,m()})}function m(){a.record.midtermTasks=o.getSortedMidtermTasks(a.record.midtermTasks),a.moodleTasks=o.getMoodleTasks(a.record.midtermTasks),k(),o.sortStudentResults(a.record.studentResults,a.record.midtermTasks)}a.subjectStudyPeriodId=d.current.params.id;var n=c.endpoint("/midtermTasks/studentResults"),o=new f;l(),a.getMidtermTaskHeader=o.getMidtermTaskHeader,a.filterStudentResults=function(a){return function(b){return a.declarationSubject===b.declarationSubject}},a.save=function(){return a.midtermTaskResultForm.$setSubmitted(),a.midtermTaskResultForm.$valid?(a.record.id=a.subjectStudyPeriodId,void new n(a.record).$update().then(function(b){e.updateSuccess(),a.record=b,m()})):void e.error("main.messages.form-has-errors")},a.enrollStudents=function(){c.endpoint("/midtermTasks/"+a.subjectStudyPeriodId+"/moodle/enrollStudents").save(null,function(a){h.showDialog("components/moodle.enroll.dialog.html",function(b){b.moodleResponse=a},l,l)})},a.importGradeItems=function(){c.endpoint("/midtermTasks/"+a.subjectStudyPeriodId+"/moodle/importGradeItems").save(null,function(){e.info("moodle.messages.gradeItemsImported"),l()})},a.importAllGrades=function(){c.endpoint("/midtermTasks/"+a.subjectStudyPeriodId+"/moodle/importAllGrades").save(null,function(){e.info("moodle.messages.allGradesImported"),l()})},a.importMissingGrades=function(){c.endpoint("/midtermTasks/"+a.subjectStudyPeriodId+"/moodle/importMissingGrades").save(null,function(){e.info("moodle.messages.missingGradesImported"),l()})},a.filterProtocols=function(a){return function(b){var c=b.protocolStudents.map(function(a){return a.student.id});return g.contains(c,a.studentId)}},a.filterStudentProtocols=function(a){return function(b){return a.studentId===b.student.id}}}]).controller("MidtermTaskController",["$scope","$sessionStorage","QueryUtils","DataUtils","$route","ArrayUtils","message","dialogService","orderByFilter","$rootScope",function(a,b,c,d,e,f,g,h,i,j){function k(){a.record.midtermTasks||(a.record.midtermTasks=[]),d.convertStringToDates(a.record.midtermTasks,["taskDate"]),a.record.canBeEdited&&(a.record.midtermTasks=i(a.record.midtermTasks,["taskDate",j.currentLanguageNameField()]))}var l=c.endpoint("/midtermTasks");a.subjectStudyPeriodId=e.current.params.id,a.auth=e.current.locals.auth,a.record=l.get({id:a.subjectStudyPeriodId},k),a.addRow=function(){a.record.midtermTasks.push({maxPoints:0,canBeDeleted:!0})},a.removeRow=function(b){b.canBeDeleted?f.remove(a.record.midtermTasks,b):g.error("midtermTask.error.midtermTaskCantBeDeleted")},a.save=function(){return a.midtermTaskForm.$setSubmitted(),a.midtermTaskForm.$valid?(a.record.id=a.subjectStudyPeriodId,void new l(a.record).$update().then(function(b){g.updateSuccess(),a.record=b,k()})):void g.error("main.messages.form-has-errors")},a.getPercentageSum=function(){return a.record&&a.record.midtermTasks?a.record.midtermTasks.reduce(function(a,b){return b&&b.percentage?a+b.percentage:a},0):0},a.clearThresholdPercentage=function(a){a.threshold||(a.thresholdPercentage=null)},a.propertyName=["taskDate",j.currentLanguageNameField()],a.reverse=!1,a.sortBy=function(b){a.reverse=a.propertyName===b?!a.reverse:!1,a.propertyName=b},a.openCopyDialog=function(){var b=function(b){function e(){b.criteria&&!b.criteria.studyPeriod&&(b.criteria.studyPeriod=d.getCurrentStudyYearOrPeriod(b.studyPeriods).id)}b.subjectStudyPeriodSelected=[],b.formState={auth:a.auth},c.createQueryForm(b,"/midtermTasks/subjectStudyPeriods/"+a.subjectStudyPeriodId,{order:"subject."+a.currentLanguageNameField()}),b.clearCriteria(),c.endpoint("/autocomplete/studyPeriods").query().$promise.then(function(a){b.studyPeriods=a,e(),b.criteria.size=10,b.loadData()}),b.$watch("criteria.studyPeriod",function(){f.isEmpty(b.studyPeriods)||b.criteria.studyPeriod||e()}),b.subjectObject=null,b.$watch("criteria.subjectObject",function(){b.criteria&&(b.criteria.subject=b.criteria.subjectObject?b.criteria.subjectObject.id:null)}),b.$watch("criteria.teacherObject",function(){b.criteria&&(b.criteria.teacher=b.criteria.teacherObject?b.criteria.teacherObject.id:null)})};h.showDialog("midtermTask/midtermTask.copy.dialog.html",b,function(b){c.endpoint("/midtermTasks/"+a.subjectStudyPeriodId+"/subjectStudyPeriodCopy/"+b.subjectStudyPeriodSelected[0].id).put().$promise.then(function(b){g.info("midtermTask.message.copied"),b.midtermTasks&&(a.record.midtermTasks=a.record.midtermTasks.concat(b.midtermTasks)),k()})})}}]),angular.module("hitsaOis").factory("MidtermTaskUtil",["$rootScope","DataUtils","orderByFilter",function(a,b,c){var d=function(){function d(a){return 10>a?"0"+a:a}function e(a,b){var c=b.find(function(b){return b.id===a});return b.indexOf(c)}this.getMidtermTaskHeader=function(b){var c=b.taskDate?d(b.taskDate.getDate())+"."+d(b.taskDate.getMonth()+1):"";return a.currentLanguageNameField(b)+" "+c+" ("+b.percentage+"%), max "+b.maxPoints},this.getSortedMidtermTasks=function(d){return b.convertStringToDates(d,["taskDate"]),c(d,["taskDate",a.currentLanguageNameField()])},this.getMoodleTasks=function(a){for(var b={},c=0;c<a.length;c++){var d=a[c];d.moodleGradeItemId&&(b[d.id]=!0)}return b},this.sortStudentResults=function(a,b){a.sort(function(a,c){return e(a.midtermTask,b)-e(c.midtermTask,b)})}};return d}]),angular.module("hitsaOis").config(["$routeProvider","USER_ROLES",function(a,b){a.when("/subjectStudyPeriods/:id/midtermTasks/studentResults",{templateUrl:"midtermTask/midtermTask.studentResults.html",controller:"MidtermTaskStudentResultsController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}]},data:{authorizedRoles:[b.ROLE_OIGUS_M_TEEMAOIGUS_PAEVIK]}}).when("/subjectStudyPeriods/:id/midtermTasks",{templateUrl:"midtermTask/midtermTask.html",controller:"MidtermTaskController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}]},data:{authorizedRoles:[b.ROLE_OIGUS_M_TEEMAOIGUS_PAEVIK]}})}]),angular.module("hitsaOis").controller("OccupationCertificateImportController",["$scope","message","QueryUtils",function(a,b,c){function d(b){a.formState.studentGroups=a.formState.allStudentGroups.filter(function(a){return!b||a.curriculumVersion&&-1!==b.indexOf(a.curriculumVersion)})}a.criteria={},a.formState={allStudentGroups:c.endpoint("/autocomplete/studentgroups").query({higher:!1,valid:!0})},a.formState.allStudentGroups.$promise.then(function(){d(a.criteria.curriculumVersion)}),a.$watchCollection("criteria.curriculumVersion",d),a.importFromKutseregister=function(){return a.occupationCertificateForm.$setSubmitted(),a.occupationCertificateForm.$valid?void c.endpoint("/occupationcertificates/import").post(a.criteria).$promise.then(function(b){a.results=b}):(b.error("main.messages.form-has-errors"),!1)}}]),angular.module("hitsaOis").config(["$routeProvider","USER_ROLES",function(a,b){a.when("/occupationcertificate/import",{templateUrl:"occupationcertificate/import.html",controller:"OccupationCertificateImportController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}]},data:{authorizedRoles:[b.ROLE_OIGUS_M_TEEMAOIGUS_ANDMEVAHETUS_KUTSEREGISTER]}})}]),angular.module("hitsaOis").controller("KutseregisterSyncController",["$scope","message","QueryUtils",function(a,b,c){a.criteria={},a.occupationStandards=function(){return a.kutseregisterSyncForm.$setSubmitted(),a.kutseregisterSyncForm.$valid?void c.endpoint("/logs/kutseregister/sync").post(a.criteria,function(){b.info("occupationcertificate.importDone")}):(b.error("main.messages.form-has-errors"),!1)}}]),angular.module("hitsaOis").config(["$routeProvider",function(a){a.when("/occupationstandard",{templateUrl:"occupationstandard/occupationstandard.html",controller:"KutseregisterSyncController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}]}})}]),angular.module("hitsaOis").controller("ModuleProtocolController",["$scope","$route","Classifier","$q","ArrayUtils","QueryUtils","message","$location","dialogService","$mdDialog","$window","oisFileService","config","$timeout","$filter",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){function p(){J.$promise.then(function(b){a.grades=b.filter(function(b){return"KUTSEHINDAMISVIIS_M"===a.protocol.protocolVdata.assessment?I.indexOf(b.code)>-1:-1===I.indexOf(b.code)})})}function q(){K={};var b={};a.protocol.protocolStudents.forEach(function(a){a.journalResults.forEach(function(c){b[c.journalId]||(b[c.journalId]={id:c.journalId,nameEt:c.nameEt,capacity:c.capacity,hasOutcomes:c.journalHasOutcomes}),K[a.id]||(K[a.id]={}),K[a.id][c.journalId]||(K[a.id][c.journalId]=[]),K[a.id][c.journalId].push(G.objectmapper(c).grade)})});var c=[];a.formState.outcomesAsEntries=!1;for(var d in b)b.hasOwnProperty(d)&&(c.push(b[d]),
!a.formState.outcomesAsEntries&&b[d].hasOutcomes&&(a.formState.outcomesAsEntries=!0));a.journals=c}function r(){L={},a.protocol.protocolStudents.forEach(function(a){var b=[];a.outcomeResults.forEach(function(a){b.push({id:a.curriculumModuleOutcomeId,grade:a.grade,gradeInserted:a.gradeInserted})}),b=t(b),b.forEach(function(b){L[a.id]||(L[a.id]={}),L[a.id][b.id]||(L[a.id][b.id]=G.objectmapper(b).grade)})}),s(a.protocol.protocolVdata.outcomes)}function s(b){var c=0;b.forEach(function(a){null===a.orderNr&&(a.orderNr=c++)}),a.outcomes=b}function t(a){return a.sort(function(a,b){return a=new Date(a.gradeInserted),b=new Date(b.gradeInserted),a>b?-1:b>a?1:0}),a}function u(){if(!angular.isDefined(a.protocol)||!angular.isArray(a.protocol.protocolStudents))return!1;for(var b=!0,c=0;c<a.protocol.protocolStudents.length;c++)if(!angular.isString(a.protocol.protocolStudents[c].grade)||0===a.protocol.protocolStudents[c].grade.trim().length){b=!1;break}return b}function v(){if(!angular.isDefined(a.protocol)||!angular.isArray(a.protocol.protocolStudents))return!1;var b=!0;if(a.formState.canEditConfirmedProtocol)for(var c=0;c<a.protocol.protocolStudents.length;c++)if(a.protocol.protocolStudents[c].gradeHasChanged){var d=a.protocol.protocolStudents[c].addInfo;if(d=void 0!==d&&null!==d?d.split(" ").join(""):null,!d){b=!1;break}}return b}function w(){return x()&&"PROTOKOLL_STAATUS_K"===a.protocol.status.code}function x(){return("LOGIN_TYPE_I"===a.auth.loginMethod||"LOGIN_TYPE_M"===a.auth.loginMethod)&&e.contains(a.auth.authorizedRoles,"ROLE_OIGUS_K_TEEMAOIGUS_MOODULPROTOKOLL")}function y(){return u()&&v()&&("LOGIN_TYPE_I"===a.auth.loginMethod||"LOGIN_TYPE_M"===a.auth.loginMethod)&&e.contains(a.auth.authorizedRoles,"ROLE_OIGUS_K_TEEMAOIGUS_MOODULPROTOKOLL")}function z(b){d.all(G.promises).then(function(){a.protocol=G.objectmapper(b),a.savedStudents=angular.copy(a.protocol.protocolStudents),a.getUrl=l.getUrl,q(),r(),p(),a.formState.canEditConfirmedProtocol=x(),a.formState.canChangeConfirmedProtocolGrade=w(),a.formState.canAddDeleteStudents="PROTOKOLL_STAATUS_K"!==a.protocol.status.code&&a.protocol.canBeEdited,a.formState.canConfirm="PROTOKOLL_STAATUS_K"!==a.protocol.status.code&&y(),a.formState.protocolPdfUrl=m.apiUrl+F+b.id+"/print/protocol.pdf"})}function A(){k.hwcrypto.getCertificate({lang:"en"}).then(function(b){f.endpoint("/moduleProtocols/"+a.protocol.id+"/signToConfirm").save({version:a.protocol.version,protocolStudents:a.protocol.protocolStudents,certificate:b.hex},function(c){k.hwcrypto.sign(b,{type:"SHA-256",hex:c.digestToSign},{lang:"en"}).then(function(b){f.endpoint("/moduleProtocols/"+a.protocol.id+"/signToConfirmFinalize").save({signature:b.hex,version:c.version},function(a){g.info("moduleProtocol.messages.confirmed"),z(a)})})})})["catch"](function(a){"user_cancel"===a.message?g.error("main.messages.error.idCardSigningCancelled"):g.error("main.messages.error.readingIdCardFailed")})}function B(){f.endpoint("/moduleProtocols/"+a.protocol.id+"/mobileSignToConfirm").save({version:a.protocol.version,protocolStudents:a.protocol.protocolStudents},function(b){b.challengeID?(a.signVersion=b.version,j.show({controller:["$scope",function(a){a.challengeID=b.challengeID}],templateUrl:"protocol/module.protocol.mobileSign.dialog.html",parent:angular.element(document.body),clickOutsideToClose:!1}),a.mobileIdPolls=0,n(C,m.mobileIdInitialDelay)):g.error("main.messages.error.mobileIdSignFailed")})}function C(){f.endpoint("/moduleProtocols/"+a.protocol.id+"/mobileSignStatus").get(function(b){"SIGNATURE"===b.status?(j.hide(),f.endpoint("/moduleProtocols/"+a.protocol.id+"/mobileSignFinalize").save({version:a.signVersion},function(a){g.info("moduleProtocol.messages.confirmed"),z(a)})):"OUTSTANDING_TRANSACTION"===b.status?(a.mobileIdPolls++,a.mobileIdPolls<m.mobileIdMaxPolls&&n(C,m.mobileIdPollInterval)):(console.log("mobileSignStatus: "+b.status),j.hide(),g.error("main.messages.error.mobileIdSignFailed"))})}function D(b){var c=a.protocol.protocolStudents.find(function(a){return a.id===b.protocolStudent});c.grade=b.grade}function E(b){b.forEach(D),a.gradeChanged()}var F="/moduleProtocols/";a.auth=b.current.locals.auth;var G=c.valuemapper({grade:"KUTSEHINDAMINE",status:"PROTOKOLL_STAATUS"}),H=c.valuemapper({journalResults:"KUTSEHINDAMINE",status:"OPPURSTAATUS"}),I=["KUTSEHINDAMINE_A","KUTSEHINDAMINE_MA","KUTSEHINDAMINE_X"],J=c.queryForDropdown({mainClassCode:"KUTSEHINDAMINE"});a.formState={},a.calculateGrades={protocolStudents:[]};var K={},L={};a.gradeChanged=function(b){if(b){var c=o("filter")(a.savedStudents,{id:b.id},!0)[0];c.grade!==b.grade?(a.moduleProtocolForm.$setSubmitted(),b.gradeHasChanged=!0):(b.gradeHasChanged=!1,c.addInfo?b.addInfo=c.addInfo:b.addInfo=null)}"PROTOKOLL_STAATUS_K"===a.protocol.status.code&&a.auth.isAdmin()&&(a.formState.canConfirm=y())},a.addInfoChanged=function(b){b.addInfo&&" "===b.addInfo.charAt(0)&&(b.addInfo=null),"PROTOKOLL_STAATUS_K"===a.protocol.status.code&&a.auth.isAdmin()&&(a.formState.canConfirm=y())},b.current.locals.entity?z(b.current.locals.entity):a.protocol&&p(),a.deleteProtocolStudent=function(b){i.confirmDialog({prompt:"moduleProtocol.prompt.deleteStudent"},function(){var c=f.endpoint("/moduleProtocols/"+a.protocol.id+"/removeStudent"),d=new c(b);d.$delete().then(function(a){g.info("main.messages.delete.success"),z(a)})["catch"](angular.noop)})},a.addProtocolStudents=function(){i.showDialog("protocol/module.protocol.addStudent.dialog.html",function(b){b.selectedStudents=[];var c=f.endpoint(F+a.protocol.id+"/otherStudents").query();b.tabledata={$promise:c.$promise},c.$promise.then(function(a){b.tabledata.content=H.objectmapper(a)}),b.journalResultsView=function(a){return a.map(function(a){return a.value}).join(" / ")}},function(b){f.endpoint(F+a.protocol.id+"/addStudents").save({version:a.protocol.version,protocolStudents:b.selectedStudents.map(function(a){return{studentId:a}})},function(a){g.info("moduleProtocol.messages.studentSuccesfullyAdded"),z(a)})})},a.journalResultsView=function(a,b){return K[b.id]&&K[b.id][a]?K[b.id][a].map(function(a){return a.value}).join(" / "):void 0},a.outcomeResultsView=function(a,b){return L[b.id]&&L[b.id][a]?L[b.id][a].value:void 0},a.gradeValue=function(a){var b=G.objectmapper({grade:a}).grade;return b?b.value:void 0},a.confirm=function(){"LOGIN_TYPE_I"===a.auth.loginMethod?A():"LOGIN_TYPE_M"===a.auth.loginMethod&&B()};var M=f.endpoint("/moduleProtocols");a.save=function(){new M({id:a.protocol.id,version:a.protocol.version,protocolStudents:a.protocol.protocolStudents}).$update().then(function(a){g.info("main.messages.create.success"),z(a)})},a.calculate=function(){f.endpoint("/moduleProtocols/"+a.protocol.id+"/calculate").query(a.calculateGrades).$promise.then(function(b){a.calculateGrades.protocolStudents=[],E(b),g.info("moduleProtocol.messages.calculated")})};var N=f.endpoint(F);a["delete"]=function(){i.confirmDialog({prompt:"moduleProtocol.prompt.delete"},function(){new N(a.protocol).$delete().then(function(){g.info("moduleProtocol.messages.deleted"),h.path(F)})})}}]),angular.module("hitsaOis").controller("ModuleProtocolListController",["$scope","$route","QueryUtils","DataUtils","Classifier","$q","ArrayUtils","USER_ROLES",function(a,b,c,d,e,f,g,h){function i(){return(a.auth.isTeacher()||a.auth.isAdmin())&&g.contains(a.auth.authorizedRoles,h.ROLE_OIGUS_M_TEEMAOIGUS_MOODULPROTOKOLL)}a.auth=b.current.locals.auth,a.search={},a.criteria={},a.formState={canCreateProtocol:i()};var j=e.valuemapper({status:"PROTOKOLL_STAATUS"});c.createQueryForm(a,"/moduleProtocols",{},j.objectmapper);var k=a.$watch("criteria.studyYear",function(b){angular.isNumber(b)&&(k(),f.all(j.promises).then(a.loadData))});a.$watch("criteria.moduleObject",function(){a.criteria.module=a.criteria.moduleObject?a.criteria.moduleObject.id:null}),a.clearSearch=function(){a.clearCriteria(),a.search={}},a.curriculumVersionModule=function(b){var c="";return c+=b.curriculumVersions.map(function(b){return a.currentLanguageNameField(b)}).join("; "),c+=", ",c+=b.curriculumVersionOccupationModules.map(function(b){return a.currentLanguageNameField(b)}).join("; ")}}]),angular.module("hitsaOis").controller("ModuleProtocolNewController",["$scope","$route","$location","QueryUtils","DataUtils","Classifier","message","ArrayUtils",function(a,b,c,d,e,f,g,h){a.auth=b.current.locals.auth,a.formState={selectedStudents:[],teachers:d.endpoint("/moduleProtocols/teachers").query()},a.auth.isTeacher()&&(a.formState.teacher=a.auth.teacher);var i=f.valuemapper({journalResults:"KUTSEHINDAMINE",status:"OPPURSTAATUS"});a.curriculumVersionChange=function(){a.formState.curriculumVersionOccupationModule=void 0,a.formState.curriculumVersionOccupationModules=d.endpoint("/moduleProtocols/occupationModules/"+a.formState.curriculumVersion).query()},a.curriculumVersionOccupationModuleChange=function(){var b=d.endpoint("/moduleProtocols/occupationModule/"+a.formState.curriculumVersionOccupationModule).get();a.tabledata={$promise:b.$promise},b.$promise.then(function(b){a.formState.selectedStudents=[],a.tabledata.content=i.objectmapper(b.occupationModuleStudents),b.occupationModuleStudents.forEach(function(b){"OPPURSTAATUS_O"===b.status.code&&a.formState.selectedStudents.push(b.studentId)}),b.teacher&&!a.formState.teacher&&(a.formState.teacher=b.teacher.id)})},a.journalResultsView=function(a){return a.map(function(a){return a.value}).join(" / ")};var j=d.endpoint("/moduleProtocols");a.submit=function(){if(h.isEmpty(a.formState.selectedStudents))return void g.error("moduleProtocol.error.noStudents");var b={};b.protocolVdata={curriculumVersionOccupationModule:a.formState.curriculumVersionOccupationModule,curriculumVersion:a.formState.curriculumVersion,studyYear:a.formState.studyYear,teacher:a.formState.teacher},b.protocolStudents=a.formState.selectedStudents.map(function(a){return{studentId:a}}),new j(b).$save().then(function(a){g.info("main.messages.create.success"),c.path("/moduleProtocols/"+a.id+"/edit")})}}]),angular.module("hitsaOis").config(["$routeProvider","USER_ROLES",function(a,b){a.when("/moduleProtocols",{templateUrl:"protocol/module.protocol.list.html",controller:"ModuleProtocolListController",controllerAs:"moduleProtocolListController",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}]},data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_MOODULPROTOKOLL]}}).when("/moduleProtocols/new",{templateUrl:"protocol/module.protocol.new.html",controller:"ModuleProtocolNewController",controllerAs:"moduleProtocolNewController",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}],isCreate:function(){return!0}},data:{authorizedRoles:[b.ROLE_OIGUS_M_TEEMAOIGUS_MOODULPROTOKOLL]}}).when("/moduleProtocols/:id/:action",{templateUrl:function(a){return"edit"===a.action?"protocol/module.protocol.edit.html":"protocol/module.protocol.view.html"},controller:"ModuleProtocolController",controllerAs:"moduleProtocolController",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}],entity:["QueryUtils","$route",function(a,b){return a.endpoint("/moduleProtocols").get({id:b.current.params.id}).$promise}],isView:["$route",function(a){return"view"===a.current.params.action}]},data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_MOODULPROTOKOLL,b.ROLE_OIGUS_M_TEEMAOIGUS_MOODULPROTOKOLL]}})}]),angular.module("hitsaOis").controller("PracticeJournalEditController",["$scope","$rootScope","$location","$route","QueryUtils","Classifier","message","dialogService","DataUtils","USER_ROLES",function(a,b,c,d,e,f,g,h,i,j){function k(){g.error("main.messages.error.nopermission"),c.path("")}function l(){a.auth.isAdmin()&&-1!==a.auth.authorizedRoles.indexOf(j.ROLE_OIGUS_M_TEEMAOIGUS_PRAKTIKAPAEVIK)||k()}function m(b){b.canEdit&&(a.auth.isTeacher()||a.auth.isAdmin())||k()}function n(b){m(b),a.formState.isHigher=angular.isObject(b.subject),i.convertObjectToIdentifier(b,["module","theme","teacher","subject"]),a.practiceJournal=b}function o(b){e.endpoint("/practiceJournals/studentPracticeModules/"+b.id).query(function(b){a.formState.modulesById={},a.formState.themesById={},b.forEach(function(b){a.formState.modulesById[b.module.id]=b,b.themes.forEach(function(b){a.formState.themesById[b.theme.id]=b})}),a.formState.modules=b.map(function(a){return a.module}),angular.isNumber(a.practiceJournal.module)&&a.moduleChanged(a.practiceJournal.module)})}function p(b){e.endpoint("/practiceJournals/studentPracticeSubjects/"+b.id).query(function(b){a.formState.subjectsById={},b.forEach(function(b){a.formState.subjectsById[b.id]=b}),a.formState.subjects=b})}function q(){a.practiceJournal.module&&!a.practiceJournal.theme&&(a.practiceJournal.credits=a.formState.modulesById[a.practiceJournal.module].credits,a.practiceJournal.hours=a.practiceJournal.credits*r)}var r=26;a.auth=d.current.locals.auth,a.practiceJournal={},a.formState={};var s=d.current.locals.entity;angular.isDefined(s)?(n(s),b.removeLastUrlFromHistory(function(a){return a&&-1!==a.indexOf("/practiceJournals/new")})):(l(),a.formState.isHigher=a.auth.school.higher===!0&&(a.auth.school.vocational===!0&&d.current.params.higher===!0||a.auth.school.vocational===!1));var t=f.valuemapper({studyForm:"OPPEVORM"});a.$watch("practiceJournal.student",function(b){angular.isObject(b)&&(e.endpoint("/students/"+b.id).search(function(b){a.formState.student=t.objectmapper(b)}),a.formState.isHigher?p(b):o(b))}),a.moduleChanged=function(b){a.formState.modulesById[b]&&(q(),a.formState.themes=a.formState.modulesById[b].themes.map(function(a){return a.theme}),!angular.isDefined(s)&&angular.isString(a.formState.modulesById[b].assessmentMethodsEt)&&(a.practiceJournal.practicePlan=a.formState.modulesById[b].assessmentMethodsEt))},a.themeChanged=function(b){a.formState.themesById[b]?(a.practiceJournal.credits=a.formState.themesById[b].credits,a.practiceJournal.hours=a.practiceJournal.credits*r,!angular.isDefined(s)&&angular.isString(a.formState.themesById[b].subthemes)&&(a.practiceJournal.practicePlan=a.formState.themesById[b].subthemes)):q()},a.subjectChanged=function(b){a.formState.subjectsById[b]&&(a.practiceJournal.credits=a.formState.subjectsById[b].credits,a.practiceJournal.hours=a.practiceJournal.credits*r,!angular.isDefined(s)&&angular.isString(a.formState.subjectsById[b].outcomesEt)&&(a.practiceJournal.practicePlan=a.formState.subjectsById[b].outcomesEt))};var u=e.endpoint("/practiceJournals");a.save=function(){a.practiceJournal.isHigher=a.formState.isHigher;var b=new u(a.practiceJournal);angular.isDefined(a.practiceJournal.id)?b.$update().then(function(){g.info("main.messages.create.success"),n(b),a.practiceJournalForm.$setPristine()}):b.$save().then(function(){g.info("main.messages.create.success"),c.path("/practiceJournals/"+b.id+"/edit")})},a["delete"]=function(){h.confirmDialog({prompt:"practiceJournal.deleteconfirm"},function(){var b=new u(a.practiceJournal);b.$delete().then(function(){g.info("main.messages.delete.success"),c.path("/practiceJournals")})})}}]),angular.module("hitsaOis").controller("PracticeJournalListController",["$scope","$route","$location","QueryUtils","dialogService","ArrayUtils","USER_ROLES",function(a,b,c,d,e,f,g){function h(){return a.auth.isAdmin()&&f.includes(a.auth.authorizedRoles,g.ROLE_OIGUS_M_TEEMAOIGUS_PRAKTIKAPAEVIK)}a.auth=b.current.locals.auth,d.createQueryForm(a,"/practiceJournals",{order:"student_person.lastname,student_person.firstname"});var i=a.$watch("criteria.studyYear",function(b){angular.isNumber(b)&&(i(),a.loadData())});a.formState={canCreate:h()},a.newPracticeJournal=function(){a.auth.school.higher&&a.auth.school.vocational?e.showDialog("practiceJournal/vocational.higher.select.dialog.html",function(){},function(a){a.higher===!0?c.path("/practiceJournals/new").search({higher:!0}):c.path("/practiceJournals/new")}):c.path("/practiceJournals/new")}}]),angular.module("hitsaOis").controller("PracticeJournalEntryController",["$scope","$route","$location","dialogService","oisFileService","QueryUtils","message","DataUtils","ArrayUtils",function(a,b,c,d,e,f,g,h,i){function j(a){b.current.locals.isEntryEdit!==!0||a.canEdit||(g.error("main.messages.error.nopermission"),c.path(""))}function k(b){j(b),h.convertStringToDates(b,["startDate","endDate"]),a.practiceJournal=b}a.auth=b.current.locals.auth,a.removeFromArray=i.remove,a.practiceJournal={practiceJournalEntries:[],practiceJournalFiles:[]},a.formState={};var l=b.current.locals.entity;angular.isDefined(l)&&k(l),a.addNewEntryRow=function(){a.practiceJournal.practiceJournalEntries.push({isStudentEntry:a.auth.isStudent()})},a.getEntryColor=function(b){return a.auth.isStudent()&&!b.isStudentEntry?"pink-50":void 0},a.openAddFileDialog=function(){d.showDialog("practiceJournal/practice.journal.entry.add.file.dialog.html",function(b){b.addedFiles=a.practiceJournal.practiceJournalFiles},function(b){var c=b.data;e.getFromLfFile(c.file[0],function(b){c.oisFile=b,a.practiceJournal.practiceJournalFiles.push(c)})})},a.getUrl=e.getUrl;var m="/practiceJournals/"+a.practiceJournal.id+"/saveEntries/";a.save=function(){if(a.practiceJournalEntryForm.$setSubmitted(),!a.practiceJournalEntryForm.$valid)return void g.error("main.messages.form-has-errors");var b;if(a.auth.isStudent()){var c=f.endpoint(m+"student");b=new c({practiceJournalEntries:a.practiceJournal.practiceJournalEntries,practiceReport:a.practiceJournal.practiceReport})}else{var d=f.endpoint(m+"teacher");b=new d({teacherComment:a.practiceJournal.teacherComment,teacherOpinion:a.practiceJournal.teacherOpinion,grade:a.practiceJournal.grade,practiceJournalFiles:a.practiceJournal.practiceJournalFiles,practiceJournalEntries:a.practiceJournal.practiceJournalEntries})}b.$update().then(function(b){g.info("main.messages.create.success"),k(b),a.practiceJournalEntryForm.$setPristine()})};var n=f.endpoint("/practiceJournals");a["delete"]=function(){d.confirmDialog({prompt:"practiceJournal.deleteconfirm"},function(){var b=new n(a.practiceJournal);b.$delete().then(function(){g.info("main.messages.delete.success"),c.path("/practiceJournals")})})},a.deleteFile=function(b){d.confirmDialog({prompt:"practiceJournal.prompt.fileDeleteConfirm"},function(){i.remove(a.practiceJournal.practiceJournalFiles,b)})}}]),angular.module("hitsaOis").controller("PracticeJournalSupervisorEntryController",["$scope","$route","dialogService","oisFileService","QueryUtils","message","DataUtils","ArrayUtils",function(a,b,c,d,e,f,g,h){function i(b){g.convertStringToDates(b,["startDate","endDate"]),a.practiceJournal=b}a.removeFromArray=h.remove,a.practiceJournal={practiceJournalEntries:[],practiceJournalFiles:[]},a.formState={};var j=b.current.locals.entity;angular.isDefined(j)&&i(j),a.openAddFileDialog=function(){c.showDialog("practiceJournal/practice.journal.entry.add.file.dialog.html",function(b){b.addedFiles=a.practiceJournal.practiceJournalFiles},function(b){var c=b.data;d.getFromLfFile(c.file[0],function(b){c.oisFile=b,a.practiceJournal.practiceJournalFiles.push(c)})})},a.getUrl=d.getUrl;var k=e.endpoint("/practiceJournals/supervisor/"+b.current.params.uuid+"/saveEntries/");a.save=function(){var b=new k({supervisorOpinion:a.practiceJournal.supervisorOpinion,supervisorComment:a.practiceJournal.supervisorComment,practiceJournalFiles:a.practiceJournal.practiceJournalFiles,practiceJournalEntries:a.practiceJournal.practiceJournalEntries});b.$update().then(function(a){f.info("main.messages.create.success"),i(a)})}}]),angular.module("hitsaOis").config(["$routeProvider","USER_ROLES",function(a,b){a.when("/practiceJournals",{templateUrl:"practiceJournal/practice.journal.list.html",controller:"PracticeJournalListController",controllerAs:"PracticeJournalListController",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}]},data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_PRAKTIKAPAEVIK]}}).when("/practiceJournals/new",{templateUrl:"practiceJournal/practice.journal.edit.html",controller:"PracticeJournalEditController",controllerAs:"PracticeJournalEditController",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}],isCreate:function(){return!0}},data:{authorizedRoles:[b.ROLE_OIGUS_M_TEEMAOIGUS_PRAKTIKAPAEVIK]}}).when("/practiceJournals/:id/edit",{templateUrl:"practiceJournal/practice.journal.edit.html",controller:"PracticeJournalEditController",controllerAs:"PracticeJournalEditController",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}],entity:["QueryUtils","$route",function(a,b){return a.endpoint("/practiceJournals").get({id:b.current.params.id}).$promise}]},data:{authorizedRoles:[b.ROLE_OIGUS_M_TEEMAOIGUS_PRAKTIKAPAEVIK]}}).when("/practiceJournals/:id/view",{templateUrl:"practiceJournal/practice.journal.view.html",controller:"PracticeJournalEntryController",controllerAs:"PracticeJournalViewController",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}],entity:["QueryUtils","$route",function(a,b){return a.endpoint("/practiceJournals").get({id:b.current.params.id}).$promise}]},data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_PRAKTIKAPAEVIK]}}).when("/practiceJournals/:id/entries/edit",{templateUrl:"practiceJournal/practice.journal.entry.html",controller:"PracticeJournalEntryController",controllerAs:"PracticeJournalEntryController",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}],entity:["QueryUtils","$route",function(a,b){return a.endpoint("/practiceJournals").get({id:b.current.params.id}).$promise}],isEntryEdit:function(){return!0}},data:{authorizedRoles:[b.ROLE_OIGUS_M_TEEMAOIGUS_PRAKTIKAPAEVIK]}}).when("/practiceJournals/supervisor/:uuid",{templateUrl:"practiceJournal/practice.journal.supervisor.entry.html",controller:"PracticeJournalSupervisorEntryController",controllerAs:"PracticeJournalSupervisorEntryController",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],entity:["QueryUtils","$route",function(a,b){return a.endpoint("/practiceJournals/supervisor").get({id:b.current.params.uuid}).$promise}]}}).when("/practiceJournals/student",{templateUrl:"practiceJournal/practice.journal.student.list.html",controller:"SimpleListController",controllerAs:"PracticeJournalStudentListController",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}],url:function(){return"/practiceJournals"}},data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_PRAKTIKAPAEVIK]}})}]),angular.module("hitsaOis").controller("RoomSearchController",["$scope","Classifier","QueryUtils",function(a,b,c){a.equipmentDefs=b.queryForDropdown({mainClassCode:"SEADMED"}),c.createQueryForm(a,"/rooms",{order:"name"},function(b){b.forEach(function(b){b.equipment=(b.roomEquipment||[]).map(function(b){return{equipment:a.equipmentDefs[b.equipment],equipmentCount:b.equipmentCount}})})}),a.equipmentDefs.$promise.then(function(){a.equipmentDefs=b.toMap(a.equipmentDefs),a.loadData()})}]).controller("RoomEditController",["dialogService","message","$location","$route","$scope","Classifier","QueryUtils",function(a,b,c,d,e,f,g){function h(a){e.formState.roomEquipment=(a.roomEquipment||[]).map(function(a){return{equipment:e.equipmentDefs[a.equipment],equipmentCount:a.equipmentCount}})}var i=d.current.params.id,j="/rooms",k=g.endpoint(j);e.equipmentDefs=f.queryForDropdown({mainClassCode:"SEADMED"}),e.formState={},e.equipmentDefs.$promise.then(function(){e.equipmentDefs=f.toMap(e.equipmentDefs),i?e.record=k.get({id:i},h):(e.record=new k({roomEquipment:[],isStudy:!0}),h(e.record))}),e.addEquipment=function(){return e.formState.roomEquipment.some(function(a){return a.equipment.code===e.formState.newEquipment.code})?void b.error("room.duplicateequipment"):(e.formState.roomEquipment.push({equipment:e.formState.newEquipment,equipmentCount:1}),void(e.formState.newEquipment=null))},e.deleteEquipment=function(a){for(var b=e.formState.roomEquipment,c=0,d=b.length;d>c;c++)if(b[c].equipment.code===a){b.splice(c,1);break}},e.update=function(){return e.roomForm.$setSubmitted(),e.roomForm.$valid?(e.record.roomEquipment=e.formState.roomEquipment.map(function(a){return{equipment:a.equipment.code,equipmentCount:a.equipmentCount}}),void(e.record.id?e.record.$update().then(h).then(b.updateSuccess)["catch"](angular.noop):e.record.$save().then(function(){b.info("main.messages.create.success"),c.url(j+"/"+e.record.id+"/edit")})["catch"](angular.noop))):void b.error("main.messages.form-has-errors")},e["delete"]=function(){a.confirmDialog({prompt:"room.deleteconfirm"},function(){e.record.$delete().then(function(){b.info("main.messages.delete.success"),c.url("/rooms/search")})["catch"](angular.noop)})}}]),angular.module("hitsaOis").config(["$routeProvider","USER_ROLES",function(a,b){a.when("/rooms/new",{templateUrl:"room/room.edit.html",controller:"RoomEditController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}]},data:{authorizedRoles:[b.ROLE_OIGUS_M_TEEMAOIGUS_HOONERUUM]}}).when("/rooms/search",{templateUrl:"room/room.search.html",controller:"RoomSearchController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}]},data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_HOONERUUM]}}).when("/rooms/:id/edit",{templateUrl:"room/room.edit.html",controller:"RoomEditController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}]},data:{authorizedRoles:[b.ROLE_OIGUS_M_TEEMAOIGUS_HOONERUUM]}})}]),angular.module("hitsaOis").controller("ReceptionSaisAdmissionController",["$scope","$route","DataUtils",function(a,b,c){function d(b){c.convertStringToDates(b,["periodStart","periodEnd"]),angular.extend(a.saisAdmission,b)}a.saisAdmission={};var e=b.current.locals.entity;angular.isDefined(e)&&d(e)}]),angular.module("hitsaOis").controller("ReceptionSaisAdmissionImportController",["$scope","message","QueryUtils","Classifier",function(a,b,c,d){a.successEmpty=!0,a.failEmpty=!0,a.importAdmissions=function(){a.successEmpty=!0,a.failEmpty=!0;var e=d.valuemapper({studyForm:"OPPEVORM",language:"OPPEKEEL"});a.admissionImportForm.$valid?c.endpoint("/saisAdmissions/saisImport").save(a.criteria).$promise.then(function(c){e.objectmapper(c.content),a.success=[],a.fail=[];for(var d=0;d<c.content.length;d++)c.content[d].failed===!0?(a.fail.push(c.content[d]),a.failEmpty=!1):(a.success.push(c.content[d]),a.successEmpty=!1);b.info("reception.admission.importFinished")}):b.error("main.messages.form-has-errors")}}]),angular.module("hitsaOis").controller("ReceptionSaisApplicationController",["$scope","$route","DataUtils",function(a,b,c){function d(b){c.convertStringToDates(b,["submitted","saisChanged"]),angular.extend(a.saisApplication,b)}a.saisApplication={};var e=b.current.locals.entity;angular.isDefined(e)&&d(e)}]),angular.module("hitsaOis").controller("ReceptionSaisApplicationImportController",["$scope","Classifier","QueryUtils","message",function(a,b,c,d){a.statusList=b.queryForDropdown({mainClassCode:"SAIS_AVALDUSESTAATUS",order:"code"}),a.statusList.$promise.then(function(){b.setSelectedCodes(a.statusList,["SAIS_AVALDUSESTAATUS_T"])});var e=b.valuemapper({applicationStatus:"SAIS_AVALDUSESTAATUS"});a.importApplications=function(){if(a.applicationImportForm.$valid){var f=b.getSelectedCodes(a.statusList);a.criteria.status=f.length>0?f:void 0,c.endpoint("/saisApplications/importSais").save(a.criteria).$promise.then(function(b){e.objectmapper(b.successful),a.failed=b.failed,a.successful=b.successful,a.result=!0,d.info("reception.application.importFinished")})}else d.error("reception.application.form-has-errors")}}]),angular.module("hitsaOis").controller("ReceptionSaisApplicationListController",["$scope","QueryUtils","Classifier","dialogService","oisFileService","config","USER_ROLES","AuthService",function(a,b,c,d,e,f,g,h){function i(c){b.endpoint("/saisApplications/importCsv").save({file:c},function(b){d.showDialog("reception/reception.saisApplication.import.result.dialog.html",function(a){a.result=b},null,function(){a.loadData()},{clickOutsideToClose:!1})})}a.canEdit=h.isAuthorized(g.ROLE_OIGUS_M_TEEMAOIGUS_VASTUVOTT);var j=c.valuemapper({status:"SAIS_AVALDUSESTAATUS"});b.createQueryForm(a,"/saisApplications",{order:"applicationNr"},j.objectmapper),a.loadData(),a.importFromCsvFile=function(){d.showDialog("reception/reception.saisApplication.import.csv.file.dialog.html",null,function(a){var b=a.data;e.getFromLfFile(b.file[0],function(a){d.hide(),i(a)})})},a.csvSampleFileUrl=f.apiUrl+"/saisApplications/sample.csv",a.classifiersFileUrl=f.apiUrl+"/saisApplications/classifiers.csv"}]),angular.module("hitsaOis").config(["$routeProvider","USER_ROLES",function(a,b){a.when("/reception/saisAdmission/search",{templateUrl:"reception/reception.saisAdmission.list.html",controller:"SimpleListController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}],clMapping:function(){return{studyForm:"OPPEVORM",language:"OPPEKEEL"}},params:function(){return{order:"code"}},url:function(){return"/saisAdmissions"}},data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_VASTUVOTT]}}).when("/reception/saisAdmission/:id/view",{templateUrl:"reception/reception.saisAdmission.view.html",controller:"ReceptionSaisAdmissionController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}],entity:["QueryUtils","$route",function(a,b){return a.endpoint("/saisAdmissions").get({id:b.current.params.id}).$promise}]},data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_VASTUVOTT]}}).when("/reception/saisAdmission/import",{templateUrl:"reception/reception.saisAdmission.import.html",controller:"ReceptionSaisAdmissionImportController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}]},data:{authorizedRoles:[b.ROLE_OIGUS_M_TEEMAOIGUS_ANDMEVAHETUS_SAIS]}}).when("/reception/saisApplication/search",{templateUrl:"reception/reception.saisApplication.list.html",controller:"ReceptionSaisApplicationListController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}]},data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_VASTUVOTT]}}).when("/reception/saisApplication/:id/view",{templateUrl:"reception/reception.saisApplication.view.html",controller:"ReceptionSaisApplicationController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}],entity:["QueryUtils","$route",function(a,b){return a.endpoint("/saisApplications").get({id:b.current.params.id}).$promise}]},data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_VASTUVOTT]}}).when("/reception/saisApplication/import",{templateUrl:"reception/reception.saisApplication.import.html",controller:"ReceptionSaisApplicationImportController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}]},data:{authorizedRoles:[b.ROLE_OIGUS_M_TEEMAOIGUS_ANDMEVAHETUS_SAIS]}})}]),function(){function a(a,c,d){for(var e=0;e<a.application.records.length;e++)if(a.application.records[e].isFormalLearning){a.application.records[e].data=[];var f=1;a.application.isVocational&&(f=Math.max(a.application.records[e].formalSubjectsOrModules.length,a.application.records[e].formalReplacedSubjectsOrModules.length));for(var g=0;f>g;g++){
var h=a.application.records[e].formalSubjectsOrModules[g]?a.application.records[e].formalSubjectsOrModules[g]:{},i={};i=a.application.isVocational?a.application.records[e].formalReplacedSubjectsOrModules[g]?a.application.records[e].formalReplacedSubjectsOrModules[g]:{}:a.application.records[e].formalReplacedSubjectsOrModules,b(a,c,d,e,h,i)}}}function b(a,b,c,g,h,i){var j=[];a.application.isVocational?h.curriculumVersionOmodule?d(a,c,b,g,h,i):e(a,b,c,g,h,i,null,null):(j=f(a,c,h,i,a.application.records[g].id),a.application.records[g].data.push(j))}function c(a,b,c,d,e,f,h){var i=f.curriculumVersionOmodule.id;j(b,i).$promise.then(function(f){var i=g(a,b,c,e,a.application.records[d].id,h,f[0]);a.application.records[d].data.push(i)})}function d(a,b,c,d,f,g){var h=f.curriculumVersionOmodule.id;j(c,h).$promise.then(function(h){e(a,c,b,d,f,g,h,null)})}function e(a,b,d,e,f,h,i,j){if(angular.equals(h,{})){var k=g(a,b,d,f,a.application.records[e].id,i,j);a.application.records[e].data.push(k)}else c(a,b,d,e,f,h,i)}function f(a,b,c,d,e){var f=[];return f.recordId=e,f.subjectOrModuleId=c.id,f.school=c.apelSchool?c.apelSchool:a.school,f.subject=c.subject?c.subject:{nameEn:c.nameEn,nameEt:c.nameEt},f.code=c.subjectCode,f.assessment=b.get(c.assessment),f.grade=b.get(c.grade),f.gradeDate=c.gradeDate,f.teachers=c.teachers,f.module=c.curriculumVersionHmodule,f.isOptional=c.isOptional,f.credits=c.credits,f.formalReplacedSubjectsOrModules=d,f.transfer=c.transfer,f}function g(a,b,c,d,e,f,g){var h=[];return h.recordId=e,h.subjectOrModuleId=d.id,d&&!angular.equals(d,{})&&(h.school=d.apelSchool?d.apelSchool:a.school),h.moduleId=d.id,h.module=f?f:{nameEt:d.nameEt,nameEn:d.nameEn},h.credits=d.credits,h.grade=c.get(d.grade),h.gradeDate=d.gradeDate,h.teachers=d.teachers,h.replacedModule=g,g?o(b,g).then(function(a){h.replacedCredits=a}):h.replacedCredits=null,h.transfer=d.transfer,h}function h(a,b,c){for(var d=0;d<a.application.records.length;d++)if(!a.application.records[d].isFormalLearning){a.application.records[d].data=[];for(var e=Math.max(a.application.records[d].informalExperiences.length,a.application.records[d].informalSubjectsOrModules.length),f=0;e>f;f++){var g=a.application.records[d].informalExperiences[f]?a.application.records[d].informalExperiences[f]:{},h=a.application.records[d].informalSubjectsOrModules[f]?a.application.records[d].informalSubjectsOrModules[f]:{};i(a,b,c,d,g,h)}}}function i(a,b,c,d,e,f){var g=[];f.curriculumVersionOmodule?j(b,f.curriculumVersionOmodule.id).$promise.then(function(g){k(a,b,c,e,f,g[0],d)}):f.curriculumVersionOmoduleTheme?b.endpoint("/occupationModule").get({id:f.curriculumVersionOmoduleTheme.module},function(g){j(b,g.id).$promise.then(function(g){k(a,b,c,e,f,g[0],d)})}):f.subject?(g=l(c,f,a.application.records[d].id),a.application.records[d].data.push(angular.extend({},e,g))):a.application.records[d].data.push(e)}function j(a,b){return a.endpoint("/autocomplete/curriculumversionomodulesandthemes").query({id:b})}function k(a,b,c,d,e,f,g){var h=[];h.recordId=a.application.records[g].id,h.moduleId=e.id,h.module=f,h.theme=e.curriculumVersionOmoduleTheme?e.curriculumVersionOmoduleTheme:null,h.isModule=e.curriculumVersionOmoduleTheme?!1:!0,h.schoolResultHours=h.isModule?n(e.curriculumVersionOmodule.themes):e.curriculumVersionOmoduleTheme.hours,h.grade=c.get(e.grade),h.outcomes=e.outcomes,h.skills=e.skills,h.transfer=e.transfer,h.isModule?o(b,f).then(function(b){h.ekap=b,a.application.records[g].data.push(angular.extend({},d,h))}):(h.ekap=e.curriculumVersionOmoduleTheme.credits,a.application.records[g].data.push(angular.extend({},d,h)))}function l(a,b,c){var d=[];return d.recordId=c,d.subjectId=b.id,d.subject=b.subject,d.code=b.subject.code,d.module=b.curriculumVersionHmodule,d.isOptional=m(d.subject.id,d.module),d.credits=b.subject.credits,d.grade=a.get(b.grade),d.skills=b.skills,d.transfer=b.transfer,d}function m(a,b){for(var c=0;c<b.subjects.length;c++)if(b.subjects[c].subjectId===a)return b.subjects[c].optional}function n(a){for(var b=0,c=0;c<a.length;c++)b+=a[c].hours;return b}function o(a,b){return a.endpoint("/autocomplete/curriculumversionomodules").query({id:b.id}).$promise.then(function(a){return a[0].credits})}function p(a,b){for(var c=0;c<b.length;c++)q(a,b[c])}function q(a,b){for(var c=0;c<b.formalSubjectsOrModules.length;c++)a.convertObjectToIdentifier(b.formalSubjectsOrModules[c],["apelSchool","subject","curriculumVersionHmodule","curriculumVersionOmodule"]);for(var d=0;d<b.formalReplacedSubjectsOrModules.length;d++)a.convertObjectToIdentifier(b.formalReplacedSubjectsOrModules[d],["subject","curriculumVersionOmodule"])}function r(a){for(var b=[],c=0;c<a.length;c++)b.push(a[c].subject.id);return b}angular.module("hitsaOis").controller("ApelApplicationEditController",["$scope","$route","QueryUtils","ArrayUtils","oisFileService","dialogService","message","$location","Classifier","DataUtils","config","$q",function(b,c,d,e,f,g,i,k,l,s,t,u){function v(a){b.application=a}function w(){var a=new E(b.application);a.$save().then(function(){i.info("main.messages.create.success"),k.path("/apelApplication/"+a.id+"/edit")})["catch"](angular.noop)}function x(a){return b.application.records[y(a)]}function y(a){for(var c=0;c<b.application.records.length;c++)if(b.application.records[c].id===a)return c}function z(a,b){for(var c=0;c<a.informalSubjectsOrModules.length;c++)if(a.informalSubjectsOrModules[c].id===b)return c}function A(a,b){for(var c=0;c<a.formalSubjectsOrModules.length;c++)if(a.formalSubjectsOrModules[c].id===b)return c}function B(a){for(var b=0;b<a.length;b++){for(var c=[],d=0;d<a[b].outcomes.length;d++){var e=a[b].outcomes[d];e.acquired&&c.push(e)}a[b].outcomes=c}}function C(a){for(var b=0;b<a.length;b++)a[b].grade&&a[b].grade.code&&(a[b].grade=a[b].grade.code)}function D(){for(var a=0;a<b.application.records.length;a++)for(var c=0;c<b.application.records[a].data.length;c++)if(b.application.records[a].data[c].transfer)return!0;return!1}var E=d.endpoint("/apelApplications");b.auth=c.current.locals.auth,b.canConfirmAndRemoveConfirmation=e.contains(b.auth.authorizedRoles,"ROLE_OIGUS_K_TEEMAOIGUS_VOTA"),b.application={},d.endpoint("/autocomplete/schools").query({id:b.auth.school.id}).$promise.then(function(a){b.school=a[0]}),b.$watch("application.status",function(){b.editing=!1,b.auth.isStudent()&&"VOTA_STAATUS_K"===b.application.status?b.editing=!0:!b.auth.isAdmin()||"VOTA_STAATUS_K"!==b.application.status&&"VOTA_STAATUS_E"!==b.application.status||(b.editing=!0),b.canChangeTransferStatus=!1,"VOTA_STAATUS_E"===b.application.status&&b.auth.isAdmin()&&(b.canChangeTransferStatus=!0)});var F=c.current.locals.entity;angular.isDefined(F)?v(F):b.application.status="VOTA_STAATUS_K",b.applicationPdfUrl=t.apiUrl+"/apelApplications/print/"+b.application.id+"/application.pdf",b.auth.isStudent()&&!b.application.student&&d.endpoint("/autocomplete/students?id="+b.auth.student).get({},function(a){a&&1===a.totalElements&&(b.application.student=a.content[0])}),b.$watch("application.student",function(){b.application.student&&d.endpoint("/students/"+b.application.student.id).search(function(c){b.application.person=c.person,b.application.curriculumVersion=c.curriculumVersion,b.application.isVocational=c.curriculumVersion.isVocational,angular.isDefined(b.application.id)?(h(b,d,l),a(b,d,l)):w()})}),b.changeInformalTransferStatus=function(a){var c=a.subjectId||a.moduleId,d=y(a.recordId),e=z(b.application.records[d],c),f=b.application.records[d].informalSubjectsOrModules[e].transfer;b.application.records[d].informalSubjectsOrModules[e].transfer=!f},b.editInformalLearning=function(a){var c="";c=b.application.curriculumVersion.isVocational?"apelApplication/templates/informal.learning.vocational.edit.dialog.html":"apelApplication/templates/informal.learning.higher.edit.dialog.html",g.showDialog(c,function(c){function f(a){for(var b=0;b<a.length;b++)u(function(){var c=a[b];c.isModule=c.curriculumVersionOmoduleTheme?!1:!0,c.grade=l.get(c.grade),j(d,c.curriculumVersionOmodule.id).$promise.then(function(a){var b=z(c.outcomes);if(c.module=a[0],c.hours=c.isModule?n(c.curriculumVersionOmodule.themes):c.curriculumVersionOmoduleTheme.hours,c.isModule)o(d,a[0]).then(function(a){c.EKAP=a,y(c.curriculumVersionOmodule.curriculumModule).then(function(a){w(a,b).then(function(a){c.outcomes=a})})});else{c.EKAP=c.curriculumVersionOmoduleTheme.credits;var e=c.curriculumVersionOmoduleTheme.outcomes;w(e,b).then(function(a){c.outcomes=a})}})})}function g(a){for(var b=0;b<a.length;b++){var c=a[b];c.credits=a[b].subject.credits}}function h(){c.record.informalExperiences.push({nameEt:null,placeTime:null,hours:null,documents:null,type:null})}function k(){c.modulesAndThemes=[],d.endpoint("/autocomplete/curriculumversionomodulesandthemes").query({student:c.student.id,curriculumVersion:c.curriculumVersionId,curriculumVersionStatusCode:"OPPEKAVA_VERSIOON_STAATUS_K"}).$promise.then(function(a){a=q(a);for(var b=0;b<a.length;b++){c.modulesAndThemes.push({id:a[b].id,nameEt:a[b].nameEt,nameEn:a[b].nameEn,isModule:!0});for(var d=q(a[b].themes),e=0;e<d.length;e++)c.modulesAndThemes.push({id:d[e].id,nameEt:a[b].nameEt+"/"+d[e].nameEt,nameEn:a[b].nameEn+"/"+d[e].nameEn,isModule:!1,moduleId:a[b].id})}})}function p(){d.endpoint("/autocomplete/subjectsList").query({student:c.student.id,curriculumSubjects:!0,curriculumVersion:c.curriculumVersionId,withCredits:!0}).$promise.then(function(a){c.subjects=a})}function q(a){return"et"===b.currentLanguage()?a.sort(function(a,b){return a.nameEt.localeCompare(b.nameEt)}):a.sort(function(a,b){return a.nameEn.localeCompare(b.nameEn)}),a}function s(a){for(var b=[],c=0;c<a.length;c++)a[c].isModule&&b.push(a[c].curriculumVersionOmodule.id);return b}function t(a){for(var b=[],c=0;c<a.length;c++)a[c].isModule||b.push(a[c].curriculumVersionOmoduleTheme.id);return b}function w(a,b){for(var c=[],f=0;f<a.length;f++)c.push(d.endpoint("/occupationModule/outcome").get({id:a[f]}).$promise);return u.all(c).then(function(a){for(var c=[],d=0;d<a.length;d++)b&&e.contains(b,a[d].id)?c.push({curriculumModuleOutcomes:a[d],acquired:!0}):c.push({curriculumModuleOutcomes:a[d],acquired:!1});return c})}function y(a){return d.endpoint("/curriculumModule").get({id:a}).$promise.then(function(a){for(var b=[],c=0;c<a.outcomes.length;c++)b.push(a.outcomes[c].id);return b})}function z(a){for(var b=[],c=0;c<a.length;c++)b.push(a[c].curriculumModuleOutcomes.id);return b}function A(a,b,e,f){a.isModule?d.endpoint("/occupationModule").get({id:c.selectedModuleOrTheme.id},function(a){B(null,a,b,e,f)}):d.endpoint("/occupationModule/theme").get({id:c.selectedModuleOrTheme.id},function(a){var c=a;d.endpoint("/occupationModule").get({id:c.module},function(a){B(c,a,b,e,f)})})}function B(a,b,e,f,g){j(d,b.id).$promise.then(function(d){var h=l.get("KUTSEHINDAMINE_A"),i={module:d[0],isModule:c.selectedModuleOrTheme.isModule,curriculumVersionOmoduleTheme:a,curriculumVersionOmodule:b,hours:e,EKAP:f,grade:h,outcomes:g,skills:null};c.record.informalSubjectsOrModules.push(i)})}function C(a,b,d,e){var f=l.get("KORGHINDAMINE_A"),g={subject:a,curriculumVersionHmodule:b,isOptional:d,credits:e,skills:null,grade:f};c.record.informalSubjectsOrModules.push(g)}c.student=b.application.student,c.curriculumVersionId=b.application.curriculumVersion.id,c.isVocational=b.application.curriculumVersion.isVocational,a?(c.record=angular.copy(x(a)),c.isVocational?f(c.record.informalSubjectsOrModules):g(c.record.informalSubjectsOrModules)):(c.record={informalExperiences:[],informalSubjectsOrModules:[]},h()),c.isVocational?k():p(),c.selectedModuleOrThemeChanged=function(){c.selectedModuleOrTheme.isModule?e.contains(s(c.record.informalSubjectsOrModules),c.selectedModuleOrTheme.id)||d.endpoint("/occupationModule").get({id:c.selectedModuleOrTheme.id}).$promise.then(function(a){y(a.curriculumModule).then(function(b){w(b,null).then(function(b){var e=n(a.themes);o(d,a).then(function(a){var d=a;A(c.selectedModuleOrTheme,e,d,b)})})})}):e.contains(s(c.record.informalSubjectsOrModules),c.selectedModuleOrTheme.moduleId)||e.contains(t(c.record.informalSubjectsOrModules),c.selectedModuleOrTheme.id)||d.endpoint("/occupationModule/theme").get({id:c.selectedModuleOrTheme.id}).$promise.then(function(a){w(a.outcomes,null).then(function(b){A(c.selectedModuleOrTheme,a.hours,a.credits,b)})})},c.addSelectedSubject=function(){if(!e.contains(r(c.record.informalSubjectsOrModules),c.selectedSubject.id)){var a=c.selectedSubject.id;d.endpoint("/subject").get({id:a}).$promise.then(function(b){var c=b.credits;d.endpoint("/apelApplications/subjectModule/"+b.id).search().$promise.then(function(d){var e=m(a,d);C(b,d,e,c)})})}},c.submitInformalLearning=function(){c.record.informalExperiences.length<=0?i.error("apel.error.atLeastOneOtherInformalLearning"):c.record.informalSubjectsOrModules.length<=0?c.isVocational?i.error("apel.error.atLeastOneSubstitutableModule"):i.error("apel.error.atLeastOneSubstitutableSubject"):c.submit()},c.removeSubtitutableModuleTheme=function(a){e.remove(c.record.informalSubjectsOrModules,a)},c.addNewInformalExperienceRow=function(){h()},c.removeInformalExperienceRow=function(a){e.remove(c.record.informalExperiences,a)},c["delete"]=function(){var a=d.endpoint("/apelApplications/"+b.application.id+"/record");new a(c.record).$delete().then(function(a){i.info("apel.messages.informalLearningRemoved"),v(a)})["catch"](angular.noop),c.cancel()}},function(a){b.application.curriculumVersion.isVocational&&B(a.record.informalSubjectsOrModules),C(a.record.informalSubjectsOrModules),a.record.isFormalLearning=!1;var c=d.endpoint("/apelApplications/"+b.application.id+"/record"),e=new c(a.record);angular.isDefined(a.record.id)?e.$update().then(function(a){i.info("main.messages.create.success"),v(a)})["catch"](angular.noop):e.$save().then(function(a){i.info("main.messages.create.success"),v(a)})["catch"](angular.noop)})},b.changeFormalTransferStatus=function(a){var c=a.subjectOrModuleId,d=y(a.recordId),e=A(b.application.records[d],c),f=b.application.records[d].formalSubjectsOrModules[e].transfer;b.application.records[d].formalSubjectsOrModules[e].transfer=!f},b.editFormalLearning=function(a){var c,f="";b.application.curriculumVersion.isVocational?(f="apelApplication/templates/formal.learning.vocational.edit.dialog.html",c=l.valuemapper({grade:"KUTSEHINDAMINE"})):(f="apelApplication/templates/formal.learning.higher.edit.dialog.html",c=l.valuemapper({grade:"KORGHINDAMINE"})),g.showDialog(f,function(f){function g(){f.isMySchool=!0,f.grades=null,f.record.assessment=null,f.record.curriculumVersionOmodule=null,f.record.newTransferableSubjectOrModule={isNew:!0,newApelSchool:null,type:"VOTA_AINE_LIIK_V",assessment:null},C(f.record.newTransferableSubjectOrModule.type)}function h(a){for(var b=0;b<a.length;b++)u(function(){var c=a[b];c.curriculumVersionOmodule&&j(d,c.curriculumVersionOmodule.id).$promise.then(function(a){c.module=a[0]}),c.grade.code||(c.grade=l.get(a[b].grade))})}function k(a){f.curriculumModules.$promise.then(function(){for(var b=0;b<a.length;b++)for(var c=0;c<f.curriculumModules.length;c++)f.curriculumModules[c].id===a[b].curriculumVersionOmodule.id&&(f.curriculumModules[c].substitutable=!0)})}function m(a){"VOTA_AINE_LIIK_O"===a?d.endpoint("/autocomplete/curriculumversionomodulesandthemes").query({student:f.student.id,curriculumModules:!0,curriculumVersion:f.curriculumVersionId}).$promise.then(function(a){f.transferableModules=a,n()}):"VOTA_AINE_LIIK_M"===a?d.endpoint("/autocomplete/curriculumversionomodulesandthemes").query({student:f.student.id,curriculumModules:!1,curriculumVersion:f.curriculumVersionId,school:f.auth.school.id}).$promise.then(function(a){f.transferableModules=a,n()}):"VOTA_AINE_LIIK_V"===a&&d.endpoint("/autocomplete/curriculumversionomodulesandthemes").query({student:f.student.id,otherStudents:!0,school:f.auth.school.id}).$promise.then(function(a){f.transferableModules=a,n()})}function n(){var a=!1;if(f.record.newTransferableSubjectOrModule&&f.record.newTransferableSubjectOrModule.curriculumVersionOmodule&&null!==f.transferableModules)for(var b=0;b<f.transferableModules.length;b++)f.transferableModules[b].id===f.record.newTransferableSubjectOrModule.curriculumVersionOmodule.id&&(a=!0);a||(f.record.newTransferableSubjectOrModule.curriculumVersionOmodule=null)}function o(a){"VOTA_AINE_LIIK_O"===a?d.endpoint("/autocomplete/subjectsList").query({student:f.student.id,curriculumSubjects:!0,curriculumVersion:f.curriculumVersionId,withCredits:!1}).$promise.then(function(a){f.transferableSubjects=a,p()}):"VOTA_AINE_LIIK_M"===a?d.endpoint("/autocomplete/subjectsList").query({student:f.student.id,curriculumSubjects:!1,curriculumVersion:f.curriculumVersionId,withCredits:!1}).$promise.then(function(a){f.transferableSubjects=a,p()}):"VOTA_AINE_LIIK_V"===a&&d.endpoint("/autocomplete/subjectsList").query({student:f.student.id,otherStudents:!0,withCredits:!1}).$promise.then(function(a){f.transferableSubjects=a,p()})}function p(){var a=!1;if(f.record.newTransferableSubjectOrModule&&f.record.subject&&null!==f.transferableSubjects)for(var b=0;b<f.transferableSubjects.length;b++)f.transferableSubjects[b].id===f.record.subject.id&&(a=!0);a||(f.record.subject=null)}function t(a){d.endpoint("/subject").get({id:a},function(a){f.record.newTransferableSubjectOrModule.subject=a,f.record.newTransferableSubjectOrModule.subjectCode=a.code,f.record.newTransferableSubjectOrModule.credits=a.credits,l.get(a.assessment).$promise.then(function(a){f.record.newTransferableSubjectOrModule.assessment=a.code,f.record.assessment=a,B(a.code)})})}function w(a){a&&a.gradeCode&&(f.record.newTransferableSubjectOrModule.grade=a.gradeCode,f.record.newTransferableSubjectOrModule.gradeDate=a.gradeDate,f.record.newTransferableSubjectOrModule.teachers=a.teachers)}function y(a){d.endpoint("/autocomplete/curriculumversionomodules").query({id:a.id}).$promise.then(function(a){f.record.newTransferableSubjectOrModule.curriculumVersionOmodule=a[0],f.record.curriculumVersionOmodule=a[0],f.record.newTransferableSubjectOrModule.credits=a[0].credits,l.get(a[0].assessment).$promise.then(function(a){f.record.newTransferableSubjectOrModule&&(f.record.newTransferableSubjectOrModule.assessment=a.code,B(a.code)),f.record.assessment=a})})}function z(a){a&&a.gradeCode&&(f.record.newTransferableSubjectOrModule.grade=a.gradeCode,f.record.newTransferableSubjectOrModule.gradeDate=a.gradeDate,f.record.newTransferableSubjectOrModule.teachers=a.teachers)}function B(a){f.isVocational?"KUTSEHINDAMISVIIS_M"===a?f.grades=l.queryForDropdown({mainClassCode:"KUTSEHINDAMINE",filterValues:["KUTSEHINDAMINE_5","KUTSEHINDAMINE_4","KUTSEHINDAMINE_3","KUTSEHINDAMINE_2","KUTSEHINDAMINE_1","KUTSEHINDAMINE_MA","KUTSEHINDAMINE_X"]}):"KUTSEHINDAMISVIIS_E"===a&&(f.grades=l.queryForDropdown({mainClassCode:"KUTSEHINDAMINE",filterValues:["KUTSEHINDAMINE_1","KUTSEHINDAMINE_2","KUTSEHINDAMINE_MA","KUTSEHINDAMINE_A","KUTSEHINDAMINE_X"]})):"HINDAMISVIIS_H"===a||"HINDAMISVIIS_E"===a?f.grades=l.queryForDropdown({mainClassCode:"KORGHINDAMINE",filterValues:["KORGHINDAMINE_0","KORGHINDAMINE_A","KORGHINDAMINE_M","KORGHINDAMINE_MI"]}):"HINDAMISVIIS_A"===a&&(f.grades=l.queryForDropdown({mainClassCode:"KORGHINDAMINE",filterValues:["KORGHINDAMINE_5","KORGHINDAMINE_4","KORGHINDAMINE_3","KORGHINDAMINE_2","KORGHINDAMINE_1","KORGHINDAMINE_0","KORGHINDAMINE_M","KORGHINDAMINE_MI"]}))}function C(a){f.isVocational?m(a):o(a)}function D(a){for(var b=0;b<f.record.formalReplacedSubjectsOrModules.length;b++)if(f.record.formalReplacedSubjectsOrModules[b].curriculumVersionOmodule.id===a)return b;return null}function E(){var a=F(f.record.formalSubjectsOrModules),b=G(f.record.formalReplacedSubjectsOrModules);return a>=b?!0:!1}function F(a){for(var b=0,c=0;c<a.length;c++)b+=a[c].credits;return b}function G(a){for(var b=0,c=0;c<a.length;c++)j(d,a[c].curriculumVersionOmodule.id).$promise.then(function(a){b+=a[0].credits});return b}function H(){var a=[];angular.forEach(f.record.formalSubjectsOrModules,function(b){a.push(b)}),f.record.formalSubjectsOrModules=a}f.auth=b.auth,f.student=b.application.student,f.currentDate=new Date,f.curriculumVersionId=b.application.curriculumVersion.id,f.isVocational=b.application.curriculumVersion.isVocational,f.apelSchools=d.endpoint("/autocomplete/apelschools").query(),f.isVocational?f.curriculumModules=d.endpoint("/autocomplete/curriculumversionomodules").query({student:f.student.id,curriculumVersion:f.curriculumVersionId}):(f.subjects=d.endpoint("/autocomplete/subjectsList").query({student:f.student.id,curriculumSubjects:!0,curriculumVersion:f.curriculumVersionId,withCredits:!0}),f.curriculumModules=d.endpoint("/autocomplete/curriculumversionhmodules").query({curriculumVersion:f.curriculumVersionId})),a?(f.record=angular.copy(x(a)),f.isVocational?(h(f.record.formalSubjectsOrModules),k(f.record.formalReplacedSubjectsOrModules)):(f.record.newTransferableSubjectOrModule=f.record.formalSubjectsOrModules[0],f.isMySchool=f.record.newTransferableSubjectOrModule.isMySchool,f.record.subject=f.record.newTransferableSubjectOrModule.subject,f.record.nameEt=f.record.newTransferableSubjectOrModule.nameEt,f.record.nameEn=f.record.newTransferableSubjectOrModule.nameEn,f.record.apelSchool=f.record.newTransferableSubjectOrModule.apelSchool)):(f.record={formalSubjectsOrModules:[],formalReplacedSubjectsOrModules:[]},g()),f.$watch("isMySchool",function(){if(f.record.school=b.school,f.record.newTransferableSubjectOrModule&&(f.record.newTransferableSubjectOrModule.isMySchool=f.isMySchool),a){if(f.record.newTransferableSubjectOrModule){var c=angular.copy(f.record.newTransferableSubjectOrModule);f.isNewSchool=c.isNewSchool,f.record.newTransferableSubjectOrModule={id:c.id,isNew:c.isNew,isNewSchool:c.isNewSchool,isMySchool:c.isMySchool,type:c.type,grade:c.grade,gradeDate:c.gradeDate,teachers:c.teachers,assessment:c.assessment,credits:c.credits,subjectCode:c.subjectCode,curriculumVersionHmodule:c.curriculumVersionHmodule,isOptional:c.isOptional},B(f.record.newTransferableSubjectOrModule.assessment),c.isMySchool===!0?c.subject?(o(c.type),t(c.subject.id)):f.record.subject?(o(c.type),t(f.record.subject.id)):c.curriculumVersionOmodule?(m(c.type),y(c.curriculumVersionOmodule)):f.record.curriculumVersionOmodule&&(m(c.type),y(f.record.curriculumVersionOmodule)):(c.isNewSchool?f.record.newTransferableSubjectOrModule.newApelSchool=c.newApelSchool:f.record.newTransferableSubjectOrModule.apelSchool=f.record.apelSchool,f.record.newTransferableSubjectOrModule.nameEt=f.record.nameEt,f.record.newTransferableSubjectOrModule.nameEn=f.record.nameEn,f.record.newTransferableSubjectOrModule.type="VOTA_AINE_LIIK_M")}}else f.record.newTransferableSubjectOrModule={},f.record.newTransferableSubjectOrModule.isNew=!0,f.record.newTransferableSubjectOrModule.apelSchool=null,f.isMySchool?f.record.newTransferableSubjectOrModule.type="VOTA_AINE_LIIK_V":f.record.newTransferableSubjectOrModule.type="VOTA_AINE_LIIK_M"}),f.typeChanged=function(a){f.isVocational?m(a):o(a)},f.gradeValue=function(a){var b=c.objectmapper({grade:a}).grade;return b?b.value:void 0},f.newSchoolCountryChanged=function(a){"RIIK_EST"===a?f.newSchoolEst=!0:f.newSchoolEst=!1},f.ehisSchoolChanged=function(a){l.get(a).$promise.then(function(a){f.record.newTransferableSubjectOrModule.newApelSchool.nameEt=a.nameEt,f.record.newTransferableSubjectOrModule.newApelSchool.nameEn=a.nameEn})},f.apelSchoolChanged=function(a){d.endpoint("/apelSchool").get({id:a.id},function(a){l.get(a.country).$promise.then(function(a){f.record.newTransferableSubjectOrModule.country=a})})},f.subjectChanged=function(a){a&&t(a.id),w(a)},f.moduleChanged=function(a){a&&f.record.curriculumVersionOmodule?a.id!==f.record.curriculumVersionOmodule.id&&y(a):a&&y(a),z(a)},f.assessmentTypeChanged=function(a){f.record.newTransferableSubjectOrModule.grade=null,B(a)},f.addNewSchool=function(){f.isNewSchool=!0},f.addNewTransferableModule=function(){g()},f.addTransferableModule=function(a){f.dialogForm.$setSubmitted(),f.dialogForm.$valid&&(f.record.newTransferableSubjectOrModule=null,a.isMySchool=f.isMySchool,a.isNewSchool=f.isNewSchool,a.isNew=!1,a.isMySchool?a.module=a.curriculumVersionOmodule:a.type="VOTA_AINE_LIIK_M",l.get(a.grade).$promise.then(function(b){a.grade=b,f.record.formalSubjectsOrModules.push(a)}))},f.addSelectedSubject=function(){e.contains(r(f.record.formalReplacedSubjectsOrModules),f.selectedSubject.id)||f.record.formalReplacedSubjectsOrModules.push({subject:f.selectedSubject})},f.removeSubtitutableSubject=function(a){e.remove(f.record.formalReplacedSubjectsOrModules,a)},f.editTransferableModule=function(a){f.record.newTransferableSubjectOrModule=angular.copy(f.record.formalSubjectsOrModules[a]),f.isMySchool=f.record.formalSubjectsOrModules[a].isMySchool,f.isNewSchool=f.record.formalSubjectsOrModules[a].isNewSchool,f.record.apelSchool=f.record.formalSubjectsOrModules[a].apelSchool,f.record.assessment=l.get(f.record.newTransferableSubjectOrModule.assessment),f.record.curriculumVersionOmodule=f.record.newTransferableSubjectOrModule.curriculumVersionOmodule,f.record.nameEt=f.record.formalSubjectsOrModules[a].nameEt,f.record.nameEn=f.record.formalSubjectsOrModules[a].nameEn,f.record.newTransferableSubjectOrModule.curriculumVersionOmodule=f.record.formalSubjectsOrModules[a].curriculumVersionOmodule,f.record.newTransferableSubjectOrModule.grade=f.record.newTransferableSubjectOrModule.grade.code,B(f.record.newTransferableSubjectOrModule.assessment),C(f.record.newTransferableSubjectOrModule.type)},f.changeTransferableModule=function(a){if(f.dialogForm.$setSubmitted(),f.dialogForm.$valid){var b=A(f.record,a.id);f.record.formalSubjectsOrModules[b]=a,f.record.newTransferableSubjectOrModule=null,h(f.record.formalSubjectsOrModules)}},f.deleteTransferableModule=function(a){if(a){var b=A(f.record,a.id);b>=0?f.record.formalSubjectsOrModules.splice(b,1):f.record.newTransferableSubjectOrModule=null}f.record.newTransferableSubjectOrModule=null},f.substitutableModuleChanged=function(a){var b=null;a.substitutable?(b=D(a.id),null===b&&f.record.formalReplacedSubjectsOrModules.push({curriculumVersionOmodule:a})):(b=D(a.id),f.record.formalReplacedSubjectsOrModules.splice(b,1))},f.submitVocationalFormalLearning=function(){f.record.formalSubjectsOrModules.length<=0?i.error("apel.error.atLeastOneTransferableModule"):f.record.formalReplacedSubjectsOrModules.length<=0?i.error("apel.error.atLeastOneSubstitutableModule"):E()?(H(),q(s,f.record),f.submit()):i.error("apel.error.thereMustBeMoreTransferableCreditsThanSubstitutableCredits")},f.submitHigherFormalLearning=function(){f.record.formalReplacedSubjectsOrModules.length<=0?i.error("apel.error.atLeastOneSubstitutableSubject"):(f.record.formalSubjectsOrModules[0]=f.record.newTransferableSubjectOrModule,f.record.formalSubjectsOrModules[0].isMySchool=f.isMySchool,f.record.formalSubjectsOrModules[0].isMySchool||(f.record.formalSubjectsOrModules[0].type="VOTA_AINE_LIIK_M"),H(),q(s,f.record),f.submit())},f["delete"]=function(){var a=d.endpoint("/apelApplications/"+b.application.id+"/record");new a(f.record).$delete().then(function(a){i.info("apel.messages.formalLearningRemoved"),v(a)})["catch"](angular.noop),f.cancel()}},function(a){C(a.record.formalSubjectsOrModules),a.record.isFormalLearning=!0;var c=d.endpoint("/apelApplications/"+b.application.id+"/record"),e=new c(a.record);angular.isDefined(a.record.id)?e.$update().then(function(a){i.info("main.messages.create.success"),v(a)})["catch"](angular.noop):e.$save().then(function(a){i.info("main.messages.create.success"),v(a)})["catch"](angular.noop)})};var G=d.endpoint("/apelApplications/"+b.application.id+"/file");b.openAddFileDialog=function(){g.showDialog("components/file.add.dialog.html",function(a){a.addedFiles=b.application.files},function(a){var c=a.data;f.getFromLfFile(c.file[0],function(a){c.oisFile=a;var d=new G(c);d.$save().then(function(a){i.info("main.messages.create.success"),b.application.files.push(a)})["catch"](angular.noop)})})},b.openEditCommentDialog=function(a){g.showDialog("apelApplication/templates/comment.edit.dialog.html",function(b){a&&(b.comment=angular.copy(a))},function(a){var c=d.endpoint("/apelApplications/"+b.application.id+"/comment"),e=new c(a.comment);angular.isDefined(a.comment.id)?e.$update().then(function(a){i.info("main.messages.create.success"),v(a)})["catch"](angular.noop):e.$save().then(function(a){i.info("main.messages.create.success"),v(a)})["catch"](angular.noop)})},b.deleteFile=function(a){g.confirmDialog({prompt:"apel.deleteFileConfirm"},function(){var c=new G(a);c.$delete().then(function(){i.info("main.messages.delete.success"),e.remove(b.application.files,a)})["catch"](angular.noop)})},b.getUrl=f.getUrl,b.save=function(){p(s,b.application.records);var a=new E(b.application);a.$update().then(function(){i.info("main.messages.create.success"),v(a),b.apelApplicationForm.$setPristine()})["catch"](angular.noop)},b.submit=function(){g.confirmDialog({prompt:"apel.submitConfirm"},function(){d.endpoint("/apelApplications/"+b.application.id+"/submit").put({},function(a){i.info("apel.messages.submitted"),v(a)})})},b.sendBackToCreation=function(){g.confirmDialog({prompt:"apel.sendBackToCreationConfirm"},function(){d.endpoint("/apelApplications/"+b.application.id+"/sendBackToCreation/").put({},function(a){i.info("apel.messages.sentBackToCreation"),v(a)})})},b.sendToConfirm=function(){p(s,b.application.records),g.confirmDialog({prompt:"apel.sendToConfirmConfirm"},function(){d.endpoint("/apelApplications/"+b.application.id+"/sendToConfirm/").put({student:b.application.student,isVocational:b.application.isVocational,records:b.application.records},function(a){i.info("apel.messages.sentToConfirm"),v(a)})})},b.confirm=function(){D()?g.confirmDialog({prompt:"apel.confirmConfirm"},function(){d.endpoint("/apelApplications/"+b.application.id+"/confirm/").put({},function(a){i.info("apel.messages.confirmed"),v(a)})}):i.error("apel.error.atLeastOneLearningMustBeTransferred")},b.sendBack=function(){g.confirmDialog({prompt:"apel.sendBackConfirm"},function(){d.endpoint("/apelApplications/"+b.application.id+"/sendBack/").put({},function(a){i.info("apel.messages.sentBack"),v(a)})})},b.reject=function(){g.showDialog("apelApplication/templates/reject.dialog.html",function(){},function(a){d.endpoint("/apelApplications/"+b.application.id+"/reject/").put({addInfo:a.rejectReason},function(a){v(a)})})},b.removeConfirmation=function(){g.confirmDialog({prompt:"apel.removeConfirmationConfirm"},function(){d.endpoint("/apelApplications/"+b.application.id+"/removeConfirmation/").put({},function(a){i.info("apel.messages.removedConfirmation"),v(a)})})},b["delete"]=function(){g.confirmDialog({prompt:"apel.deleteConfirm"},function(){var a=new E(b.application);a.$delete().then(function(){i.info("main.messages.delete.success"),k.path("/apelApplication")})["catch"](angular.noop)})}}]).controller("ApelApplicationViewController",["$scope","$route","QueryUtils","oisFileService","Classifier","ArrayUtils","DataUtils","dialogService","message","config",function(b,c,d,e,f,g,i,j,k,l){function m(c){b.application=c,d.endpoint("/students/"+b.application.student.id).search(function(c){b.application.person=c.person,b.application.curriculumVersion=c.curriculumVersion,b.application.isVocational=c.curriculumVersion.isVocational,h(b,d,f),a(b,d,f)})}function n(){for(var a=0;a<b.application.records.length;a++)for(var c=0;c<b.application.records[a].data.length;c++)if(b.application.records[a].data[c].transfer)return!0;return!1}b.applicationId=c.current.params.id,b.auth=c.current.locals.auth,b.canConfirmAndRemoveConfirmation=g.contains(b.auth.authorizedRoles,"ROLE_OIGUS_K_TEEMAOIGUS_VOTA"),b.application={},b.formState={},d.endpoint("/autocomplete/schools").query({id:b.auth.school.id}).$promise.then(function(a){b.school=a[0]}),b.getUrl=e.getUrl;var o=c.current.locals.entity;angular.isDefined(o)?m(o):(b.application.insertedBy=b.auth.fullname,b.application.inserted=new Date,b.application.status="VOTA_STAATUS_K"),b.applicationPdfUrl=l.apiUrl+"/apelApplications/print/"+b.application.id+"/application.pdf",
b.removeConfirmation=function(){j.confirmDialog({prompt:"apel.removeConfirmationConfirm"},function(){d.endpoint("/apelApplications/"+b.application.id+"/removeConfirmation/").put({},function(a){k.info("apel.messages.removedConfirmation"),m(a)})})},b.sendBackToCreation=function(){j.confirmDialog({prompt:"apel.sendBackToCreationConfirm"},function(){d.endpoint("/apelApplications/"+b.application.id+"/sendBackToCreation/").put({},function(a){k.info("apel.messages.sentBackToCreation"),m(a)})})},b.sendToConfirm=function(){p(i,b.application.records),j.confirmDialog({prompt:"apel.sendToConfirmConfirm"},function(){d.endpoint("/apelApplications/"+b.application.id+"/sendToConfirm/").put({student:b.application.student,isVocational:b.application.isVocational,records:b.application.records},function(a){k.info("apel.messages.sentToConfirm"),m(a)})})},b.confirm=function(){n()?j.confirmDialog({prompt:"apel.confirmConfirm"},function(){d.endpoint("/apelApplications/"+b.application.id+"/confirm/").put({},function(a){k.info("apel.messages.confirmed"),m(a)})}):k.error("apel.error.atLeastOneLearningMustBeTransferred")},b.sendBack=function(){j.confirmDialog({prompt:"apel.sendBackConfirm"},function(){d.endpoint("/apelApplications/"+b.application.id+"/sendBack/").put({},function(a){k.info("apel.messages.sentBack"),m(a)})})},b.reject=function(){j.showDialog("apelApplication/templates/reject.dialog.html",function(){},function(a){d.endpoint("/apelApplications/"+b.application.id+"/reject/").put({addInfo:a.rejectReason},function(a){m(a)})})},b.removeConfirmation=function(){j.confirmDialog({prompt:"apel.removeConfirmationConfirm"},function(){d.endpoint("/apelApplications/"+b.application.id+"/removeConfirmation/").put({},function(a){k.info("apel.messages.removedConfirmation"),m(a)})})}}])}(),angular.module("hitsaOis").controller("ApelApplicationListController",["$scope","$route","QueryUtils","Classifier","$q",function(a,b,c,d,e){a.auth=b.current.locals.auth;var f=d.valuemapper({status:"VOTA_STAATUS"});c.createQueryForm(a,"/apelApplications",{order:"student_lastname, student_firstname, inserted desc"}),a.auth.isStudent()&&(a.afterLoadData=function(b){a.tabledata.content=b.content,a.tabledata.totalElements=b.totalElements}),a.criteria.status||a.auth.isStudent()||(a.criteria.status=["VOTA_STAATUS_E"]),e.all(f.promises).then(a.loadData),a.$watch("criteria.studentObject",function(){a.criteria.student=a.criteria.studentObject?a.criteria.studentObject.id:null}),a.clearCriteria=function(){a.criteria={}}}]),angular.module("hitsaOis").controller("ApelSchoolListController",["$scope","QueryUtils","$q",function(a,b,c){b.createQueryForm(a,"/apelSchool",{order:"en"===a.currentLanguage()?"nameEn":"nameEt"}),c.all().then(a.loadData),a.clearCriteria=function(){a.criteria={}}}]).controller("ApelSchoolEditController",["$scope","$route","dialogService","message","QueryUtils","$location","Classifier",function(a,b,c,d,e,f,g){var h=b.current.params.id,i="/apelSchool",j=e.endpoint(i);h?a.apelSchool=j.get({id:h}):a.apelSchool=new j,a.update=function(){return a.apelSchoolForm.$setSubmitted(),a.apelSchoolForm.$valid?void(a.apelSchool.id?a.apelSchool.$update().then(d.updateSuccess):a.apelSchool.$save().then(function(){d.info("main.messages.create.success"),f.url("apelSchools/"+a.apelSchool.id+"/edit")})):void d.error("main.messages.form-has-errors")},a.ehisSchoolChanged=function(b){g.get(b).$promise.then(function(b){a.apelSchool.nameEt=b.nameEt,a.apelSchool.nameEn=b.nameEn})},a["delete"]=function(){c.confirmDialog({prompt:"apel.apelSchool.deleteConfirm"},function(){a.apelSchool.$delete().then(function(){d.info("main.messages.delete.success"),f.url("/apelSchools")})})}}]),angular.module("hitsaOis").config(["$routeProvider","USER_ROLES",function(a,b){a.when("/apelApplication",{templateUrl:"apelApplication/apel.application.list.html",controller:"ApelApplicationListController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}]},data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_VOTA]}}).when("/apelApplication/new",{templateUrl:"apelApplication/apel.application.edit.html",controller:"ApelApplicationEditController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}],isCreate:function(){return!0}},data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_VOTA]}}).when("/apelApplication/:id/edit",{templateUrl:"apelApplication/apel.application.edit.html",controller:"ApelApplicationEditController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}],entity:["QueryUtils","$route",function(a,b){return a.endpoint("/apelApplications").get({id:b.current.params.id}).$promise}]},data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_VOTA]}}).when("/apelApplication/:id/view",{templateUrl:"apelApplication/apel.application.view.html",controller:"ApelApplicationViewController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}],entity:["QueryUtils","$route",function(a,b){return a.endpoint("/apelApplications").get({id:b.current.params.id}).$promise}]},data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_VOTA]}}).when("/apelSchools",{templateUrl:"apelApplication/apel.school.list.html",controller:"ApelSchoolListController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}]},data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_VOTA]}}).when("/apelSchools/:id/edit",{templateUrl:"apelApplication/apel.school.edit.html",controller:"ApelSchoolEditController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}]},data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_VOTA]}}).when("/apelSchools/new",{templateUrl:"apelApplication/apel.school.edit.html",controller:"ApelSchoolEditController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}]},data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_VOTA]}})}]),angular.module("hitsaOis").controller("ReportStudentController",["$q","$scope","Classifier","QueryUtils",function(a,b,c,d){function e(a){return g.objectmapper(a),{certificateNr:a.certificateNr,occupation:a.specialityCode||a.partOccupationCode||a.occupationCode}}function f(a){h.objectmapper(a);for(var b=0,c=a.length;c>b;b++)a[b].occupationCertificates=(a[b].occupationCertificates||[]).map(e)}var g=c.valuemapper({occupationCode:"KUTSE",partOccupationCode:"OSAKUTSE",specialityCode:"SPETSKUTSE"}),h=c.valuemapper({fin:"FINALLIKAS",finSpecific:"FINTAPSUSTUS",language:"OPPEKEEL",studyLevel:"OPPEASTE",studyForm:"OPPEVORM",studyLoad:"OPPEKOORMUS",status:"OPPURSTAATUS"});d.createQueryForm(b,"/reports/students",{order:"p.lastname,p.firstname"},f),b.formState={xlsUrl:"reports/students/students.xls"},a.all(g.promises).then(function(){a.all(h.promises).then(b.loadData)})}]).controller("ReportStudentStatisticsController",["$scope","Classifier","QueryUtils",function(a,b,c){a.formState={xlsUrl:"reports/students/statistics/studentstatistics.xls",filterValues:{OPPURSTAATUS:["OPPURSTAATUS_K","OPPURSTAATUS_L"]}},c.createQueryForm(a,"/reports/students/statistics",{result:"OPPEVORM"},function(){var c=a.criteria.result;if(a.formState.resultType!==c)if(a.formState.resultType=c,c){var d=a.formState.filterValues[c];a.formState.resultDef=b.queryForDropdown({mainClassCode:c,filterValues:d}),"FINALLIKAS"===c&&b.queryForDropdown({mainClassCode:"FINTAPSUSTUS"},function(b){a.formState.resultDef.$promise.then(function(){Array.prototype.push.apply(a.formState.resultDef,b)})})}else a.formState.resultDef=[]}),a.loadData()}]).controller("ReportStudentStatisticsByperiodController",["$scope","Classifier","QueryUtils","Session",function(a,b,c,d){var e={OPPURSTAATUS_A:"AKADPUHKUS_POHJUS",OPPURSTAATUS_K:"EKSMAT_POHJUS"},f=d.school||{};a.formState={xlsUrl:"reports/students/statistics/studentstatisticsbyperiod.xls"},c.createQueryForm(a,"/reports/students/statistics/byperiod",{result:"OPPURSTAATUS_A"},function(){var c=a.criteria.result;if(a.formState.resultType!==c){a.formState.resultType=c;var d=e[c];a.formState.resultDef=d?b.queryForDropdown({mainClassCode:d,higher:f.higher,vocational:f.vocational}):void 0}}),a.loadData()}]).controller("ReportCurriculumsCompletionController",["$q","$scope","Classifier","QueryUtils",function(a,b,c,d){var e=c.valuemapper({studyForm:"OPPEVORM",studyLoad:"OPPEKOORMUS",status:"OPPURSTAATUS"});d.createQueryForm(b,"/reports/curriculums/completion",{order:"p.lastname,p.firstname"},e.objectmapper),a.all(e.promises).then(b.loadData)}]).controller("ReportTeacherLoadHigherController",["$scope","DataUtils","QueryUtils",function(a,b,c){c.createQueryForm(a,"/reports/teachers/load/higher",{order:"p.lastname,p.firstname"}),a.formState={studyYears:c.endpoint("/autocomplete/studyYears").query(),studyPeriods:{}},a.formState.allStudyPeriods=c.endpoint("/autocomplete/studyPeriods").query(),a.formState.studyYears.$promise.then(function(){if(a.formState.allStudyPeriods.$promise.then(function(b){for(var c=0;c<b.length;c++){var d=b[c],e=a.formState.studyPeriods[d.studyYear];e||(a.formState.studyPeriods[d.studyYear]=e=[]),e.push(d)}}),!a.criteria.studyYear){var c=b.getCurrentStudyYearOrPeriod(a.formState.studyYears);c&&(a.criteria.studyYear=c.id)}a.criteria.studyYear&&a.loadData()})}]).controller("ReportTeacherLoadVocationalController",["$scope","DataUtils","QueryUtils",function(a,b,c){c.createQueryForm(a,"/reports/teachers/load/vocational",{order:"p.lastname,p.firstname"}),a.formState={studyYears:c.endpoint("/autocomplete/studyYears").query(),studyPeriods:{}},a.formState.allStudyPeriods=c.endpoint("/autocomplete/studyPeriods").query(),a.formState.studyYears.$promise.then(function(){if(a.formState.allStudyPeriods.$promise.then(function(b){for(var c=0;c<b.length;c++){var d=b[c],e=a.formState.studyPeriods[d.studyYear];e||(a.formState.studyPeriods[d.studyYear]=e=[]),e.push(d)}}),!a.criteria.studyYear){var c=b.getCurrentStudyYearOrPeriod(a.formState.studyYears);c&&(a.criteria.studyYear=c.id)}a.criteria.studyYear&&a.loadData()})}]),angular.module("hitsaOis").config(["$routeProvider","USER_ROLES",function(a,b){a.when("/reports/students/students",{templateUrl:"report/student.html",controller:"ReportStudentController",controllerAs:"controller",data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_PARING]},resolve:{translationLoaded:["$translate",function(a){return a.onReady()}]}}).when("/reports/students/statistics",{templateUrl:"report/student.statistics.html",controller:"ReportStudentStatisticsController",controllerAs:"controller",data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_PARING]},resolve:{translationLoaded:["$translate",function(a){return a.onReady()}]}}).when("/reports/students/statistics/byperiod",{templateUrl:"report/student.statistics.byperiod.html",controller:"ReportStudentStatisticsByperiodController",controllerAs:"controller",data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_PARING]},resolve:{translationLoaded:["$translate",function(a){return a.onReady()}]}}).when("/reports/curriculums/completion",{templateUrl:"report/curriculums.completion.html",controller:"ReportCurriculumsCompletionController",controllerAs:"controller",data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_PARING]},resolve:{translationLoaded:["$translate",function(a){return a.onReady()}]}}).when("/reports/teachers/load/higher",{templateUrl:"report/teachers.load.higher.html",controller:"ReportTeacherLoadHigherController",data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_PARING]},resolve:{translationLoaded:["$translate",function(a){return a.onReady()}]}}).when("/reports/teachers/load/vocational",{templateUrl:"report/teachers.load.vocational.html",controller:"ReportTeacherLoadVocationalController",controllerAs:"controller",data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_PARING]},resolve:{translationLoaded:["$translate",function(a){return a.onReady()}]}})}]),angular.module("hitsaOis").controller("RtipSyncController",["$scope","message","QueryUtils",function(a,b,c){a.criteria={},a.rtipSync=function(){c.endpoint("/logs/rtip/sync").post()},a.rtipZemploees=function(){return a.rtipSyncForm.$setSubmitted(),a.rtipSyncForm.$valid?void c.endpoint("/logs/rtip/zemploees").post(a.criteria):(b.error("main.messages.form-has-errors"),!1)}}]),angular.module("hitsaOis").config(["$routeProvider","USER_ROLES",function(a,b){a.when("/rtip/sync",{templateUrl:"rtip/rtip.sync.html",controller:"RtipSyncController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}]},data:{authorizedRoles:[b.ROLE_OIGUS_M_TEEMAOIGUS_ANDMEVAHETUS_RTIP]}})}]),angular.module("hitsaOis").factory("ArrayUtils",function(){return{contains:function(a,b){return-1!==a.indexOf(b)},remove:function(a,b){var c=a.indexOf(b);c>-1&&a.splice(c,1)},isEmpty:function(a){return!angular.isArray(a)||0===a.length},includes:function(a,b,c){if(void 0===c){for(var d=a.length;d--;)if(a[d]===b)return!0}else for(var e=c,f=a.length;e++!==f;)if(a[e]===b)return!0;return!1},intersect:function(a,b){if(this.isEmpty(a)||this.isEmpty(b))return!1;for(var c=0;c<a.length;c++)if(this.includes(b,a[c]))return!0;return!1},intersection:function(a,b){for(var c=[],d=0;d<a.length;d++)this.includes(b,a[d])&&c.push(a[d]);return c}}}),Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(a){if(null===this)throw new TypeError('"this" is null or not defined');var b=Object(this),c=b.length>>>0;if("function"!=typeof a)throw new TypeError("predicate must be a function");for(var d=arguments[1],e=0;c>e;){var f=b[e];if(a.call(d,f,e,b))return f;e++}return void 0}}),angular.module("hitsaOis").factory("AuthService",["$http","$q","Session","Menu","config","Classifier","$rootScope","USER_CONFIRM_RIGHTS",function(a,b,c,d,e,f,g,h){var i="Authorization",j={},k=f.valuemapper({role:"ROLL"}),l=function(a){return d.setMenu(a.data),a.data&&a.data.user?(b.all(k.promises).then(function(){k.objectmapper(a.data.users);for(var b=0;b<a.data.users.length;b++)a.data.users[b].schoolCode?(a.data.users[b].nameEn=a.data.users[b].role.nameEn+" "+a.data.users[b].schoolCode,a.data.users[b].nameEt=a.data.users[b].role.nameEt+" "+a.data.users[b].schoolCode,a.data.users[b].nameRu=a.data.users[b].role.nameRu+" "+a.data.users[b].schoolCode):(a.data.users[b].nameEn=a.data.users[b].role.nameEn,a.data.users[b].nameEt=a.data.users[b].role.nameEt,a.data.users[b].nameRu=a.data.users[b].role.nameRu)}),c.create(a.data),a.data):(c.destroy(),null)};return j.login=function(b){return a.get(e.apiUrl+"/user",{headers:b}).then(function(a){return l(a)})},j.loginMobileId=function(b){return a.post(e.apiUrl+"/mIdLogin",{mobileNumber:b}).then(function(a){return{data:a.data,jwt:a.headers(i)}})},j.pollMobileIdStatus=function(b){var c={};return c[i]=b,a.get(e.apiUrl+"/mIdStatus",{headers:c}).then(function(a){return a.data})},j.loginLdap=function(b){return a.post(e.apiUrl+"/ldap",b).then(function(){return j.login()})},j.postLogout=function(){c.destroy(),d.setMenu({}),g.restartTimeoutDialogCounter()},j.logout=function(){return a.post(e.apiUrl+"/logout",{})["finally"](function(){j.postLogout()})},j.changeUser=function(b){return a.post(e.apiUrl+"/changeUser",{id:b}).then(function(a){return l(a)})},j.isAuthenticated=function(){return!!c.userId},j.isAuthorized=function(a){if(j.isAuthenticated()){if(angular.isFunction(a))return a(c,c.authorizedRoles);angular.isArray(a)||(a=[a]);for(var b=a.length-1;b>-1;b--)if(-1!==c.authorizedRoles.indexOf(a[b]))return!0}return!1},j.matchesRole=function(a){if(j.isAuthenticated()){angular.isArray(a)||(a=[a]);for(var b=a.length-1;b>-1;b--)if(c.roleCode===a[b])return!0}return!1},j.isValidRolePermission=function(a,b,c){return"OIGUS_K"!==c||-1!==h.indexOf(b)},j}]).factory("AuthInterceptor",["$rootScope","$q","AUTH_EVENTS",function(a,b,c){return{responseError:function(d){return a.$broadcast({401:c.notAuthenticated,403:c.notAuthorized,419:c.sessionTimeout,440:c.sessionTimeout}[d.status],d),b.reject(d)}}}]).factory("AuthResolver",["$q","$rootScope","$route","ArrayUtils","PUBLIC_ROUTES","AUTH_EVENTS","AuthService",function(a,b,c,d,e,f,g){function h(a,b){return function(){return angular.isString(a.roleCode)&&angular.isString(b)&&a.roleCode===b}}function i(){if(!angular.isDefined(c.current.data))return!0;var a=c.current.data.authorizedRoles;return g.isAuthorized(a)}return{resolve:function(){var g=a.defer(),j=b.$watch("state.currentUser",function(a){if(angular.isDefined(a)){if(a)if(i()){var k=angular.extend({},a);k.isMainAdmin=h(a,"ROLL_P"),k.isAdmin=h(a,"ROLL_A"),k.isTeacher=h(a,"ROLL_O"),k.isStudent=h(a,"ROLL_T"),k.isParent=h(a,"ROLL_L"),k.isExternalExpert=h(a,"ROLL_V"),g.resolve(k)}else g.reject(),b.$broadcast(f.notAuthorized);else d.contains(e,c.current.originalPath)?g.resolve():g.reject();j()}});return g.promise}}}]).run(["$rootScope","AUTH_EVENTS","message",function(a,b,c){a.$on(b.notAuthorized,function(){c.error("main.messages.error.nopermission")})}]).constant("AUTH_EVENTS",{loginSuccess:"auth-login-success",loginFailed:"auth-login-failed",logoutSuccess:"auth-logout-success",sessionTimeout:"auth-session-timeout",notAuthenticated:"auth-not-authenticated",notAuthorized:"auth-not-authorized",userChanged:"auth-user-changed",reAuthenticate:"auth-re"}).constant("PUBLIC_ROUTES",["/academicCalendars","/academicCalendar/:schoolId?","/curriculums/:schoolId?","/curriculum/:id","/curriculum/:curriculumId/version/:id","/timetables","/timetable/generalTimetableByGroup/:schoolId?","/timetable/generalTimetableByTeacher/:schoolId?","/timetable/generalTimetableByRoom/:schoolId?","/timetable/group/:schoolId/:groupId/:weekIndex?","/timetable/teacher/:schoolId/:teacherId/:weekIndex?","/timetable/room/:schoolId/:roomId/:weekIndex?","/studyMaterial/:schoolId/vocational/:journalId/view","/studyMaterial/:schoolId/higher/:subjectStudyPeriodId/view"]).service("Session",function(){this.school={},this.create=function(a){this.userId=a.user,this.studentId=a.student,this.teacherId=a.teacher,this.authorizedRoles=a.authorizedRoles,this.school=angular.extend(this.school||{},a.school),this.roleCode=a.roleCode,this.vocational=a.vocational,this.higher=a.higher,this.timeoutInSeconds=a.sessionTimeoutInSeconds},this.destroy=function(){this.userId=null,this.studentId=null,this.teacherId=null,this.authorizedRoles=[],this.school={},this.roleCode=null,this.vocational=void 0,this.higher=void 0,this.timeoutInSeconds=null}}).constant("USER_ROLES",{ROLE_OIGUS_V_TEEMAOIGUS_A:"ROLE_OIGUS_V_TEEMAOIGUS_A",ROLE_OIGUS_V_TEEMAOIGUS_P:"ROLE_OIGUS_V_TEEMAOIGUS_P",ROLE_OIGUS_V_TEEMAOIGUS_AINE:"ROLE_OIGUS_V_TEEMAOIGUS_AINE",ROLE_OIGUS_V_TEEMAOIGUS_AINEOPPETAJA:"ROLE_OIGUS_V_TEEMAOIGUS_AINEOPPETAJA",ROLE_OIGUS_V_TEEMAOIGUS_AKADKALENDER:"ROLE_OIGUS_V_TEEMAOIGUS_AKADKALENDER",ROLE_OIGUS_V_TEEMAOIGUS_ANDMEVAHETUS_EHIS:"ROLE_OIGUS_V_TEEMAOIGUS_ANDMEVAHETUS_EHIS",ROLE_OIGUS_V_TEEMAOIGUS_ANDMEVAHETUS_EKIS:"ROLE_OIGUS_V_TEEMAOIGUS_ANDMEVAHETUS_EKIS",ROLE_OIGUS_V_TEEMAOIGUS_ANDMEVAHETUS_KUTSEREGISTER:"ROLE_OIGUS_V_TEEMAOIGUS_ANDMEVAHETUS_KUTSEREGISTER",ROLE_OIGUS_V_TEEMAOIGUS_ANDMEVAHETUS_RTIP:"ROLE_OIGUS_V_TEEMAOIGUS_ANDMEVAHETUS_RTIP",ROLE_OIGUS_V_TEEMAOIGUS_ANDMEVAHETUS_SAIS:"ROLE_OIGUS_V_TEEMAOIGUS_ANDMEVAHETUS_SAIS",ROLE_OIGUS_V_TEEMAOIGUS_AUTOTEADE:"ROLE_OIGUS_V_TEEMAOIGUS_AUTOTEADE",ROLE_OIGUS_V_TEEMAOIGUS_AVALDUS:"ROLE_OIGUS_V_TEEMAOIGUS_AVALDUS",ROLE_OIGUS_V_TEEMAOIGUS_DIPLOM:"ROLE_OIGUS_V_TEEMAOIGUS_DIPLOM",ROLE_OIGUS_V_TEEMAOIGUS_DOKALLKIRI:"ROLE_OIGUS_V_TEEMAOIGUS_DOKALLKIRI",ROLE_OIGUS_V_TEEMAOIGUS_EKSAM:"ROLE_OIGUS_V_TEEMAOIGUS_EKSAM",ROLE_OIGUS_V_TEEMAOIGUS_ESINDAVALDUS:"ROLE_OIGUS_V_TEEMAOIGUS_ESINDAVALDUS",ROLE_OIGUS_V_TEEMAOIGUS_HINNETELEHT:"ROLE_OIGUS_V_TEEMAOIGUS_HINNETELEHT",ROLE_OIGUS_V_TEEMAOIGUS_HOONERUUM:"ROLE_OIGUS_V_TEEMAOIGUS_HOONERUUM",ROLE_OIGUS_V_TEEMAOIGUS_KASKKIRI:"ROLE_OIGUS_V_TEEMAOIGUS_KASKKIRI",ROLE_OIGUS_V_TEEMAOIGUS_KASUTAJA:"ROLE_OIGUS_V_TEEMAOIGUS_KASUTAJA",ROLE_OIGUS_V_TEEMAOIGUS_KLASSIFIKAATOR:"ROLE_OIGUS_V_TEEMAOIGUS_KLASSIFIKAATOR",ROLE_OIGUS_V_TEEMAOIGUS_KOMISJON:"ROLE_OIGUS_V_TEEMAOIGUS_KOMISJON",ROLE_OIGUS_V_TEEMAOIGUS_LEPING:"ROLE_OIGUS_V_TEEMAOIGUS_LEPING",ROLE_OIGUS_V_TEEMAOIGUS_LOPBLANKETT:"ROLE_OIGUS_V_TEEMAOIGUS_LOPBLANKETT",ROLE_OIGUS_V_TEEMAOIGUS_LOPMOODULPROTOKOLL:"ROLE_OIGUS_V_TEEMAOIGUS_LOPMOODULPROTOKOLL",ROLE_OIGUS_V_TEEMAOIGUS_LOPPROTOKOLL:"ROLE_OIGUS_V_TEEMAOIGUS_LOPPROTOKOLL",ROLE_OIGUS_V_TEEMAOIGUS_LOPTEEMA:"ROLE_OIGUS_V_TEEMAOIGUS_LOPTEEMA",ROLE_OIGUS_V_TEEMAOIGUS_MOODULPROTOKOLL:"ROLE_OIGUS_V_TEEMAOIGUS_MOODULPROTOKOLL",ROLE_OIGUS_V_TEEMAOIGUS_OPETAJA:"ROLE_OIGUS_V_TEEMAOIGUS_OPETAJA",ROLE_OIGUS_V_TEEMAOIGUS_OPETAJAAMET:"ROLE_OIGUS_V_TEEMAOIGUS_OPETAJAAMET",ROLE_OIGUS_V_TEEMAOIGUS_OPINGUKAVA:"ROLE_OIGUS_V_TEEMAOIGUS_OPINGUKAVA",ROLE_OIGUS_V_TEEMAOIGUS_OPPEASUTUS:"ROLE_OIGUS_V_TEEMAOIGUS_OPPEASUTUS",ROLE_OIGUS_V_TEEMAOIGUS_OPPEKAVA:"ROLE_OIGUS_V_TEEMAOIGUS_OPPEKAVA",ROLE_OIGUS_V_TEEMAOIGUS_OPPEMATERJAL:"ROLE_OIGUS_V_TEEMAOIGUS_OPPEMATERJAL",ROLE_OIGUS_V_TEEMAOIGUS_OPPEPERIOOD:"ROLE_OIGUS_V_TEEMAOIGUS_OPPEPERIOOD",ROLE_OIGUS_V_TEEMAOIGUS_OPPERYHM:"ROLE_OIGUS_V_TEEMAOIGUS_OPPERYHM",ROLE_OIGUS_V_TEEMAOIGUS_OPPETASE:"ROLE_OIGUS_V_TEEMAOIGUS_OPPETASE",ROLE_OIGUS_V_TEEMAOIGUS_OPPETOOGRAAFIK:"ROLE_OIGUS_V_TEEMAOIGUS_OPPETOOGRAAFIK",ROLE_OIGUS_V_TEEMAOIGUS_OPPETULEMUS:"ROLE_OIGUS_V_TEEMAOIGUS_OPPETULEMUS",ROLE_OIGUS_V_TEEMAOIGUS_OPPUR:"ROLE_OIGUS_V_TEEMAOIGUS_OPPUR",ROLE_OIGUS_V_TEEMAOIGUS_PAEVIK:"ROLE_OIGUS_V_TEEMAOIGUS_PAEVIK",ROLE_OIGUS_V_TEEMAOIGUS_PARING:"ROLE_OIGUS_V_TEEMAOIGUS_PARING",ROLE_OIGUS_V_TEEMAOIGUS_PRAKTIKAPAEVIK:"ROLE_OIGUS_V_TEEMAOIGUS_PRAKTIKAPAEVIK",ROLE_OIGUS_V_TEEMAOIGUS_PROTOKOLL:"ROLE_OIGUS_V_TEEMAOIGUS_PROTOKOLL",ROLE_OIGUS_V_TEEMAOIGUS_PUUDUMINE:"ROLE_OIGUS_V_TEEMAOIGUS_PUUDUMINE",ROLE_OIGUS_V_TEEMAOIGUS_RIIKLIKOPPEKAVA:"ROLE_OIGUS_V_TEEMAOIGUS_RIIKLIKOPPEKAVA",ROLE_OIGUS_V_TEEMAOIGUS_STRUKTUUR:"ROLE_OIGUS_V_TEEMAOIGUS_STRUKTUUR",ROLE_OIGUS_V_TEEMAOIGUS_SYNDMUS:"ROLE_OIGUS_V_TEEMAOIGUS_SYNDMUS",ROLE_OIGUS_V_TEEMAOIGUS_T:"ROLE_OIGUS_V_TEEMAOIGUS_T",ROLE_OIGUS_V_TEEMAOIGUS_TOEND:"ROLE_OIGUS_V_TEEMAOIGUS_TOEND",ROLE_OIGUS_V_TEEMAOIGUS_TUNDAEG:"ROLE_OIGUS_V_TEEMAOIGUS_TUNDAEG",ROLE_OIGUS_V_TEEMAOIGUS_TUNNIJAOTUSPLAAN:"ROLE_OIGUS_V_TEEMAOIGUS_TUNNIJAOTUSPLAAN",ROLE_OIGUS_V_TEEMAOIGUS_TUNNIPLAAN:"ROLE_OIGUS_V_TEEMAOIGUS_TUNNIPLAAN",ROLE_OIGUS_V_TEEMAOIGUS_VASTUVOTT:"ROLE_OIGUS_V_TEEMAOIGUS_VASTUVOTT",ROLE_OIGUS_V_TEEMAOIGUS_VOTA:"ROLE_OIGUS_V_TEEMAOIGUS_VOTA",ROLE_OIGUS_V_TEEMAOIGUS_YLDTEADE:"ROLE_OIGUS_V_TEEMAOIGUS_YLDTEADE",ROLE_OIGUS_V_TEEMAOIGUS_TEADE:"ROLE_OIGUS_V_TEEMAOIGUS_TEADE",ROLE_OIGUS_V_TEEMAOIGUS_STIPTOETUS:"ROLE_OIGUS_V_TEEMAOIGUS_STIPTOETUS",ROLE_OIGUS_M_TEEMAOIGUS_AINE:"ROLE_OIGUS_M_TEEMAOIGUS_AINE",ROLE_OIGUS_M_TEEMAOIGUS_AINEOPPETAJA:"ROLE_OIGUS_M_TEEMAOIGUS_AINEOPPETAJA",ROLE_OIGUS_M_TEEMAOIGUS_AKADKALENDER:"ROLE_OIGUS_M_TEEMAOIGUS_AKADKALENDER",ROLE_OIGUS_M_TEEMAOIGUS_ANDMEVAHETUS_EHIS:"ROLE_OIGUS_M_TEEMAOIGUS_ANDMEVAHETUS_EHIS",ROLE_OIGUS_M_TEEMAOIGUS_ANDMEVAHETUS_EKIS:"ROLE_OIGUS_M_TEEMAOIGUS_ANDMEVAHETUS_EKIS",ROLE_OIGUS_M_TEEMAOIGUS_ANDMEVAHETUS_KUTSEREGISTER:"ROLE_OIGUS_M_TEEMAOIGUS_ANDMEVAHETUS_KUTSEREGISTER",ROLE_OIGUS_M_TEEMAOIGUS_ANDMEVAHETUS_RTIP:"ROLE_OIGUS_M_TEEMAOIGUS_ANDMEVAHETUS_RTIP",ROLE_OIGUS_M_TEEMAOIGUS_ANDMEVAHETUS_SAIS:"ROLE_OIGUS_M_TEEMAOIGUS_ANDMEVAHETUS_SAIS",ROLE_OIGUS_M_TEEMAOIGUS_AUTOTEADE:"ROLE_OIGUS_M_TEEMAOIGUS_AUTOTEADE",ROLE_OIGUS_M_TEEMAOIGUS_AVALDUS:"ROLE_OIGUS_M_TEEMAOIGUS_AVALDUS",ROLE_OIGUS_M_TEEMAOIGUS_DIPLOM:"ROLE_OIGUS_M_TEEMAOIGUS_DIPLOM",ROLE_OIGUS_M_TEEMAOIGUS_DOKALLKIRI:"ROLE_OIGUS_M_TEEMAOIGUS_DOKALLKIRI",ROLE_OIGUS_M_TEEMAOIGUS_EKSAM:"ROLE_OIGUS_M_TEEMAOIGUS_EKSAM",ROLE_OIGUS_M_TEEMAOIGUS_ESINDAVALDUS:"ROLE_OIGUS_M_TEEMAOIGUS_ESINDAVALDUS",ROLE_OIGUS_M_TEEMAOIGUS_HINNETELEHT:"ROLE_OIGUS_M_TEEMAOIGUS_HINNETELEHT",ROLE_OIGUS_M_TEEMAOIGUS_HOONERUUM:"ROLE_OIGUS_M_TEEMAOIGUS_HOONERUUM",ROLE_OIGUS_M_TEEMAOIGUS_KASKKIRI:"ROLE_OIGUS_M_TEEMAOIGUS_KASKKIRI",ROLE_OIGUS_M_TEEMAOIGUS_KASUTAJA:"ROLE_OIGUS_M_TEEMAOIGUS_KASUTAJA",ROLE_OIGUS_M_TEEMAOIGUS_KLASSIFIKAATOR:"ROLE_OIGUS_M_TEEMAOIGUS_KLASSIFIKAATOR",ROLE_OIGUS_M_TEEMAOIGUS_KOMISJON:"ROLE_OIGUS_M_TEEMAOIGUS_KOMISJON",ROLE_OIGUS_M_TEEMAOIGUS_LEPING:"ROLE_OIGUS_M_TEEMAOIGUS_LEPING",ROLE_OIGUS_M_TEEMAOIGUS_LOPBLANKETT:"ROLE_OIGUS_M_TEEMAOIGUS_LOPBLANKETT",ROLE_OIGUS_M_TEEMAOIGUS_LOPMOODULPROTOKOLL:"ROLE_OIGUS_M_TEEMAOIGUS_LOPMOODULPROTOKOLL",ROLE_OIGUS_M_TEEMAOIGUS_LOPPROTOKOLL:"ROLE_OIGUS_M_TEEMAOIGUS_LOPPROTOKOLL",ROLE_OIGUS_M_TEEMAOIGUS_LOPTEEMA:"ROLE_OIGUS_M_TEEMAOIGUS_LOPTEEMA",ROLE_OIGUS_M_TEEMAOIGUS_MOODULPROTOKOLL:"ROLE_OIGUS_M_TEEMAOIGUS_MOODULPROTOKOLL",ROLE_OIGUS_M_TEEMAOIGUS_OPETAJA:"ROLE_OIGUS_M_TEEMAOIGUS_OPETAJA",ROLE_OIGUS_M_TEEMAOIGUS_OPETAJAAMET:"ROLE_OIGUS_M_TEEMAOIGUS_OPETAJAAMET",ROLE_OIGUS_M_TEEMAOIGUS_OPINGUKAVA:"ROLE_OIGUS_M_TEEMAOIGUS_OPINGUKAVA",ROLE_OIGUS_M_TEEMAOIGUS_OPPEASUTUS:"ROLE_OIGUS_M_TEEMAOIGUS_OPPEASUTUS",ROLE_OIGUS_M_TEEMAOIGUS_OPPEKAVA:"ROLE_OIGUS_M_TEEMAOIGUS_OPPEKAVA",ROLE_OIGUS_M_TEEMAOIGUS_OPPEMATERJAL:"ROLE_OIGUS_M_TEEMAOIGUS_OPPEMATERJAL",ROLE_OIGUS_M_TEEMAOIGUS_OPPEPERIOOD:"ROLE_OIGUS_M_TEEMAOIGUS_OPPEPERIOOD",ROLE_OIGUS_M_TEEMAOIGUS_OPPERYHM:"ROLE_OIGUS_M_TEEMAOIGUS_OPPERYHM",ROLE_OIGUS_M_TEEMAOIGUS_OPPETASE:"ROLE_OIGUS_M_TEEMAOIGUS_OPPETASE",ROLE_OIGUS_M_TEEMAOIGUS_OPPETOOGRAAFIK:"ROLE_OIGUS_M_TEEMAOIGUS_OPPETOOGRAAFIK",ROLE_OIGUS_M_TEEMAOIGUS_OPPETULEMUS:"ROLE_OIGUS_M_TEEMAOIGUS_OPPETULEMUS",ROLE_OIGUS_M_TEEMAOIGUS_OPPUR:"ROLE_OIGUS_M_TEEMAOIGUS_OPPUR",ROLE_OIGUS_M_TEEMAOIGUS_PAEVIK:"ROLE_OIGUS_M_TEEMAOIGUS_PAEVIK",ROLE_OIGUS_M_TEEMAOIGUS_PARING:"ROLE_OIGUS_M_TEEMAOIGUS_PARING",ROLE_OIGUS_M_TEEMAOIGUS_PRAKTIKAPAEVIK:"ROLE_OIGUS_M_TEEMAOIGUS_PRAKTIKAPAEVIK",ROLE_OIGUS_M_TEEMAOIGUS_PROTOKOLL:"ROLE_OIGUS_M_TEEMAOIGUS_PROTOKOLL",ROLE_OIGUS_M_TEEMAOIGUS_PUUDUMINE:"ROLE_OIGUS_M_TEEMAOIGUS_PUUDUMINE",ROLE_OIGUS_M_TEEMAOIGUS_RIIKLIKOPPEKAVA:"ROLE_OIGUS_M_TEEMAOIGUS_RIIKLIKOPPEKAVA",ROLE_OIGUS_M_TEEMAOIGUS_STRUKTUUR:"ROLE_OIGUS_M_TEEMAOIGUS_STRUKTUUR",ROLE_OIGUS_M_TEEMAOIGUS_SYNDMUS:"ROLE_OIGUS_M_TEEMAOIGUS_SYNDMUS",ROLE_OIGUS_M_TEEMAOIGUS_T:"ROLE_OIGUS_M_TEEMAOIGUS_T",ROLE_OIGUS_M_TEEMAOIGUS_TOEND:"ROLE_OIGUS_M_TEEMAOIGUS_TOEND",ROLE_OIGUS_M_TEEMAOIGUS_TUNDAEG:"ROLE_OIGUS_M_TEEMAOIGUS_TUNDAEG",ROLE_OIGUS_M_TEEMAOIGUS_TUNNIJAOTUSPLAAN:"ROLE_OIGUS_M_TEEMAOIGUS_TUNNIJAOTUSPLAAN",ROLE_OIGUS_M_TEEMAOIGUS_TUNNIPLAAN:"ROLE_OIGUS_M_TEEMAOIGUS_TUNNIPLAAN",ROLE_OIGUS_M_TEEMAOIGUS_VASTUVOTT:"ROLE_OIGUS_M_TEEMAOIGUS_VASTUVOTT",ROLE_OIGUS_M_TEEMAOIGUS_VOTA:"ROLE_OIGUS_M_TEEMAOIGUS_VOTA",ROLE_OIGUS_M_TEEMAOIGUS_YLDTEADE:"ROLE_OIGUS_M_TEEMAOIGUS_YLDTEADE",ROLE_OIGUS_M_TEEMAOIGUS_TEADE:"ROLE_OIGUS_M_TEEMAOIGUS_TEADE",ROLE_OIGUS_M_TEEMAOIGUS_STIPTOETUS:"ROLE_OIGUS_M_TEEMAOIGUS_STIPTOETUS",ROLE_OIGUS_K_TEEMAOIGUS_OPINGUKAVA:"ROLE_OIGUS_K_TEEMAOIGUS_OPINGUKAVA"}).constant("USER_CONFIRM_RIGHTS",["TEEMAOIGUS_EKSAM","TEEMAOIGUS_ESINDAVALDUS","TEEMAOIGUS_HINNETELEHT","TEEMAOIGUS_KASKKIRI","TEEMAOIGUS_KOMISJON","TEEMAOIGUS_LOPMOODULPROTOKOLL","TEEMAOIGUS_LOPPROTOKOLL","TEEMAOIGUS_LOPTEEMA","TEEMAOIGUS_MOODULPROTOKOLL","TEEMAOIGUS_OPINGUKAVA","TEEMAOIGUS_OPPEKAVA","TEEMAOIGUS_PAEVIK","TEEMAOIGUS_PRAKTIKAPAEVIK","TEEMAOIGUS_PROTOKOLL","TEEMAOIGUS_RIIKLIKOPPEKAVA","TEEMAOIGUS_TUNNIPLAAN","TEEMAOIGUS_VOTA"]),angular.module("hitsaOis").factory("DataUtils",function(){function a(a,c,d){if(angular.isArray(a))return a.map(function(a){return b(a,c)});for(var e=0,f=c.length;f>e;e++){var g=c[e];a.hasOwnProperty(g)&&"string"==typeof a[g]&&(a[g]=moment(a[g],d).toDate())}return a}function b(b,c){return a(b,c,"YYYY-MM-DD'T'hh:mm:ss.SSS'Z'")}function c(b,c){return a(b,c,"hh:mm")}function d(a,b){angular.isArray(b)&&b.forEach(function(b){angular.isObject(a[b])&&(a[b]=a[b].id)})}function e(a){for(var c=0;c<a.length;c++)b(a[c],["startDate","endDate"]);a.sort(function(a,b){return a.endDate-b.endDate})}function f(a,b){return e(b),b.find(function(b){return a<=b.endDate})}function g(a){return f((new Date).withoutTime(),a)}function h(a){return b(a,["endDate"]),(new Date).withoutTime()>a.endDate}function i(a,b){return a.startDate<=b.startDate&&a.endDate>=b.startDate||a.startDate>=b.startDate&&a.startDate<=b.endDate}return{assign:function(a,b,c){return a.split(".").reduce(function(a,b,d,e){return d===e.length-1?a[b]=c:a[b]||(a[b]={}),a[b]},b||{})},convertStringToDates:b,convertStringToTime:c,convertObjectToIdentifier:d,getCurrentStudyYearOrPeriod:g,getStudyYearOrPeriodAt:f,sortStudyYearsOrPeriods:e,isPastStudyYearOrPeriod:h,periodsOverlap:i,sexFromIdcode:function(a){return 11!==a.length||isNaN(a)?null:Number(a.charAt(0))%2===1?"SUGU_M":"SUGU_N"},birthdayFromIdcode:function(a){if(11!==a.length||isNaN(a))return null;var b={1:"18",2:"18",3:"19",4:"19",5:"20",6:"20",7:"21",8:"21"},c=b[a.charAt(0)]+a.substring(1,7);return moment(c).toDate()}}}),Date.prototype.withoutTime=function(){var a=new Date(this);return a.setHours(0,0,0,0),a},angular.module("hitsaOis").service("dialogService",["$mdDialog","ArrayUtils","message",function(a,b,c){var d={accept:"main.yes",cancel:"main.no"};this.showDialog=function(d,e,f,g){var h=!1;a.show({controller:["$scope","$rootScope","$mdDialog",function(a,d,g){a.removeFromArray=b.remove,a.currentLanguageNameField=d.currentLanguageNameField,a.cancel=g.hide,a.submit=function(){var b=!0;a.dialogForm&&(a.dialogForm.$setSubmitted(),b=a.dialogForm.$valid),b?(angular.isFunction(f)&&f(a),h=!0,g.hide()):c.error("main.messages.form-has-errors")},angular.isFunction(e)&&e(a)}],templateUrl:d,clickOutsideToClose:!1,onRemoving:function(){angular.isFunction(g)&&h!==!0&&g()}})},this.hide=a.hide,this.confirmDialog=function(b,c,e){a.show({controller:["$scope",function(f){f.messages=angular.extend({},d,b),f.accept=function(){a.hide(),c()},f.cancel=function(){a.hide(),angular.isFunction(e)&&e()}}],templateUrl:"components/confirm.dialog.html",clickOutsideToClose:!1,skipHide:!0})}}]),angular.module("hitsaOis").factory("resourceErrorHandler",["$q","message",function(a,b){return{responseError:function(c,d){if(404===c.status)b.error("main.messages.record.notFound");else if(409===c.status)b.error("main.messages.record.modified");else if(c.data&&c.data._errors){var e=!1;angular.forEach(c.data._errors,function(a){if(a.field&&d){var c=d[a.field];if(c&&c.$setValidity&&c.$setDirty)return void("required"===a.code?(c.$validators.required||(c.$validators.required=function(a,b){return!c.$isEmpty(b)}),c.$setValidity(a.code,!1)):(c.$serverError=c.$serverError||[],c.$serverError.push(a),c.$setValidity("serverside",!1)))}e=!0,b.error(a.code+(a.field?" "+a.field:""),a.params)}),e||b.error("main.messages.form-has-errors")}else b.error("main.messages.system.failure");return a.reject(c)}}}]),angular.module("hitsaOis").service("inAadressService",["$translate",function(a){var b=document.createElement("div");b.id="InAadressDiv";var c=null;this.getInAds=function(){return c||(c=new InAadress({container:"InAadressDiv",mode:"3",nocss:!0,appartment:1,ihist:"1993",lang:a.use()})),c},this.isLoaded=function(){return!!c},this.append=function(a){a.appendChild(b)}}]),angular.module("hitsaOis").factory("Menu",["config","$location","$rootScope","USER_ROLES","$route",function(a,b,c,d,e){function f(a){x.push({name:"main.menu.academicCalendar.label",type:"link",url:"/academicCalendar"}),x.push({name:"main.menu.viewTimetable.label",type:"link",url:"/timetable/generalTimetableByGroup"}),x.push({name:"main.menu.curriculum.label",type:"toggle",pages:[{name:"main.menu.curriculum.schoolCurriculums",url:"/curriculum?_menu"},{name:"main.menu.curriculum.subjects",url:"/subject?_menu",studyLevel:{higher:!0}},{name:"main.menu.curriculum.stateCurriculums",url:"/stateCurriculum?_menu",studyLevel:{vocational:!0}}]}),x.push({name:"main.menu.student.label",type:"toggle",pages:[{name:"main.menu.student.studentInfo",
url:"/students?_menu"},{name:"main.menu.student.studentGroups",url:"/studentgroups?_menu"},{name:"main.menu.student.absences",url:"/absences?_menu",studyLevel:{vocational:!0}}]}),x.push({name:"main.menu.teachers.label",type:"link",url:"/teachers?_menu"}),x.push({name:"main.menu.documents.label",type:"toggle",pages:[{name:"main.menu.documents.applications",url:"/applications?_menu"},{name:"main.menu.documents.directives",url:"/directives?_menu"},{name:"main.menu.documents.certificates",url:"/certificate?_menu"},{name:"main.menu.documents.practiceContracts",url:"/contracts?_menu"},{name:"main.menu.documents.representativeApplications",url:"/studentrepresentatives/applications?_menu"},{name:"main.menu.documents.apel",url:"/apelApplication?_menu"}]}),x.push({name:"main.menu.study.label",type:"toggle",pages:[{name:"main.menu.study.declarations",url:"/declarations?_menu",studyLevel:{higher:!0}},{name:"main.menu.study.journal.journalsVocational",url:"/journals?_menu",studyLevel:{vocational:!0}},{name:"main.menu.study.practiceJournal.label",url:"/practiceJournals?_menu"},{name:"main.menu.study.material.higher",url:"/studyMaterial/higher?_menu",studyLevel:{higher:!0}},{name:"main.menu.study.material.vocational",url:"/studyMaterial/vocational?_menu",studyLevel:{vocational:!0}},{name:"main.menu.study.examTimes",url:"/examTimes",studyLevel:{higher:!0}},{name:"main.menu.study.moduleProtocol.label",url:"/moduleProtocols?_menu",studyLevel:{vocational:!0}},{name:"main.menu.study.protocol.search",url:"/higherProtocols?_menu",studyLevel:{higher:!0}}]}),x.push({name:"main.menu.studyPreparation.label",type:"toggle",pages:[{name:"main.menu.studyPreparation.subjectTeacher",url:"/subjectStudyPeriods?_menu",studyLevel:{higher:!0}},{name:"main.menu.studyPreparation.studyYearSchedule.legend",url:"/studyYearScheduleLegend?_menu",studyLevel:{vocational:!0}},{name:"main.menu.studyPreparation.studyYearSchedule.edit",url:"/studyYearSchedule?_menu",studyLevel:{vocational:!0}},{name:"main.menu.studyPreparation.lessonTime",id:"timetableLessonTimeSearch",url:"/timetable/lessonTime/search?_menu"},{name:"main.menu.studyPreparation.lessonplans.vocational",id:"timetableLessonTimeSearch",url:"/lessonplans/vocational?_menu",studyLevel:{vocational:!0}},{name:"main.menu.studyPreparation.subjectStudyPeriods.plans",url:"/subjectStudyPeriodPlans?_menu",studyLevel:{higher:!0}},{name:"main.menu.studyPreparation.subjectStudyPeriods.label",url:"/subjectStudyPeriods/studentGroups?_menu",studyLevel:{higher:!0}},{name:"main.menu.studyPreparation.timetableManagement.label",url:"/timetable/timetableManagement?_menu"},{name:"main.menu.studyPreparation.events.label",url:"/lessonplans/events?_menu"}]}),x=x.concat(m(a)),x.push({name:"main.menu.reports.label",type:"toggle",pages:[{name:"main.menu.reports.students",url:"/reports/students/students?_menu"},{name:"main.menu.reports.studentstatistics",url:"/reports/students/statistics?_menu"},{name:"main.menu.reports.studentstatisticsbyperiod",url:"/reports/students/statistics/byperiod?_menu"},{name:"main.menu.reports.curriculumscompletion",url:"/reports/curriculums/completion?_menu"},{name:"main.menu.reports.teachersloadvocational",url:"/reports/teachers/load/vocational?_menu",studyLevel:{vocational:!0}},{name:"main.menu.reports.teachersloadhigher",url:"/reports/teachers/load/higher?_menu",studyLevel:{higher:!0}}]}),x.push({name:"main.menu.graduation.label",type:"toggle",pages:[{name:"main.menu.graduation.committees",url:"/committees?_menu"},{name:"main.menu.graduation.thesisTopics",url:"/thesisTopics"},{name:"main.menu.graduation.thesisProtocols",url:"/thesisProtocols"},{name:"main.menu.graduation.forms",url:"/forms"},{name:"main.menu.graduation.documentsPreparation",url:"/documentsPreparation"},{name:"main.menu.graduation.documentsPrint",url:"/documentsPrint"},{name:"main.menu.graduation.finalExamProtocolsHigher",url:"/finalExamHigherProtocols",studyLevel:{higher:!0}},{name:"main.menu.graduation.finalExamProtocolsVocational",url:"/finalExamVocationalProtocols",studyLevel:{vocational:!0}}]}),x.push({name:"main.menu.dataexchange.label",type:"toggle",pages:[{name:"main.menu.dataexchange.teacherinfoExportHigher",id:"teacherinfoExport",url:"/ehis/teacher/export/higher?_menu",studyLevel:{higher:!0}},{name:"main.menu.dataexchange.teacherinfoExportVocational",id:"teacherinfoExport",url:"/ehis/teacher/export/vocational?_menu",studyLevel:{vocational:!0}},{name:"main.menu.dataexchange.studentinfoExport",url:"/ehis/student/export?_menu"},{name:"main.menu.dataexchange.kutseregister",url:"/occupationcertificate/import?_menu",studyLevel:{vocational:!0}},{name:"main.menu.dataexchange.rtip",url:"/rtip/sync?_menu"},{name:"main.menu.dataexchange.ehisLogs",url:"/ehis/logs?_menu"},{name:"main.menu.dataexchange.ekisLogs",url:"/ekis/logs?_menu"},{name:"main.menu.dataexchange.kutseregisterLogs",url:"/kutseregister/logs?_menu",studyLevel:{vocational:!0}},{name:"main.menu.dataexchange.rtipLogs",url:"/rtip/logs?_menu"},{name:"main.menu.dataexchange.saisLogs",url:"/sais/logs?_menu"}]}),x.push({name:"main.menu.reception.label",type:"toggle",pages:[{name:"main.menu.reception.saisAdmission.label",id:"receptionSaisAdmissionSearch",url:"/reception/saisAdmission/search?_menu"},{name:"main.menu.reception.saisApplication.label",id:"receptionSaisApplicationSearch",url:"/reception/saisApplication/search?_menu"},{name:"main.menu.reception.saisAdmission.importSais",id:"receptionSaisAdmissionImport",url:"/reception/saisAdmission/import?_menu"},{name:"main.menu.reception.saisApplication.importSais",id:"receptionSaisApplicationImport",url:"/reception/saisApplication/import?_menu"}]}),x.push({name:"main.menu.settings.label",type:"toggle",pages:[{name:"main.menu.settings.studyYears",url:"/school/studyYears"},{name:"main.menu.settings.studyLevels",url:"/school/studyLevels"},{name:"main.menu.settings.generalmessages",url:"/generalmessages?_menu"},{name:"main.menu.settings.messageTemplates",url:"/messageTemplate?_menu"},{name:"main.menu.settings.documentcoordinators",url:"/directives/coordinators?_menu"},{name:"main.menu.settings.teacheroccupations",url:"/school/teacheroccupations?_menu"},{name:"main.menu.settings.buildings",url:"/rooms/search?_menu"},{name:"main.menu.settings.departments",url:"/school/departments?_menu"},{name:"main.menu.settings.users",id:"users",url:"/persons?_menu"},{name:"main.menu.settings.apelSchools",url:"/apelSchools?_menu"}]})}function g(){x.push({name:"main.menu.curriculums.label",url:"/curriculum?_menu",type:"link"}),x.push({name:"main.menu.subjects.label",url:"/subject?_menu",type:"link",studyLevel:{higher:!0}}),x.push({name:"main.menu.timetableAndEvents.label",type:"toggle",pages:[{name:"main.menu.timetableAndEvents.timetable",url:"/timetable/personalGeneralTimetable?_menu"},{name:"main.menu.timetableAndEvents.events",url:"/lessonplans/events?_menu"}]}),x.push({name:"main.menu.myData.label",url:"/teachers/myData",type:"link"}),x.push({name:"main.menu.academicCalendar.label",type:"link",url:"/academicCalendar"}),x.push({name:"main.menu.study.label",type:"toggle",pages:[{name:"main.menu.study.exams",url:"/examTimes",studyLevel:{higher:!0}},{name:"main.menu.study.absences",url:"/absences?_menu"},{name:"main.menu.study.journal.journalsVocational",url:"/journals?_menu",studyLevel:{vocational:!0}},{name:"main.menu.study.journal.journalsHigher",url:"/subjectStudyPeriods?_menu",studyLevel:{higher:!0}},{name:"main.menu.study.material.higher",url:"/studyMaterial/higher?_menu",studyLevel:{higher:!0}},{name:"main.menu.study.material.vocational",url:"/studyMaterial/vocational?_menu",studyLevel:{vocational:!0}},{name:"main.menu.study.loads",url:"/lessonplans/vocational"},{name:"main.menu.study.students",url:"/students?_menu"},{name:"main.menu.study.moduleProtocol.label",url:"/moduleProtocols?_menu",studyLevel:{vocational:!0}},{name:"main.menu.study.protocol.search",url:"/higherProtocols?_menu",studyLevel:{higher:!0}}]}),x.push({name:"main.menu.practiceAndGraduation.label",type:"toggle",pages:[{name:"main.menu.practiceAndGraduation.practiceJournals",url:"/practiceJournals?_menu"},{name:"main.menu.practiceAndGraduation.committees",url:"/committees?_menu"},{name:"main.menu.practiceAndGraduation.thesisProtocols",url:"/thesisProtocols"},{name:"main.menu.practiceAndGraduation.thesisTopics",url:"/thesisTopics"},{name:"main.menu.graduation.finalExamProtocolsHigher",url:"/finalExamHigherProtocols",studyLevel:{higher:!0}},{name:"main.menu.graduation.finalExamProtocolsVocational",url:"/finalExamVocationalProtocols",studyLevel:{vocational:!0}}]})}function h(){x.push({name:"main.menu.curriculum.label",type:"toggle",pages:[{name:"main.menu.curriculum.stateCurriculums",url:"/stateCurriculum?_menu"}]}),x.push({name:"main.menu.mainData.label",type:"toggle",pages:[{name:"main.menu.mainData.schools",url:"/school?_menu"},{name:"main.menu.mainData.classifiers",url:"/classifier?_menu"},{name:"main.menu.mainData.saisClassifiers",url:"/saisClassifier?_menu"},{name:"main.menu.mainData.occupationStandards",url:"/occupationstandard?_menu"},{name:"main.menu.mainData.users",url:"/persons?_menu"}]}),x.push({name:"main.menu.timetableLink.label",type:"link",url:"/timetable/generalTimetableByGroup?_menu"})}function i(a){x.push({name:"main.menu.curriculums.label",url:"/curriculum?_menu",type:"link"}),x.push({name:"main.menu.subjects.label",url:"/subject?_menu",type:"link",studyLevel:{higher:!0}}),x.push({name:"main.menu.timetableLink.label",type:"link",url:"/timetable/personalGeneralTimetable?_menu"}),x.push({name:"main.menu.myData.label",url:"/students/myData",type:"link"}),x.push({name:"main.menu.academicCalendar.label",type:"link",url:"/academicCalendar"}),x.push({name:"main.menu.myStudyInformation.label",type:"toggle",pages:[{name:"main.menu.myStudyInformation.journal",url:"/students/journals",studyLevel:{vocational:!0}},{name:"main.menu.myStudyInformation.practiceJournals",url:"/practiceJournals?_menu"},{name:"main.menu.myStudyInformation.results",url:"/students/myResults"},{name:"main.menu.myStudyInformation.declaration",url:"/declaration/current/view",studyLevel:{higher:!0}},{name:"main.menu.myStudyInformation.examRegistration",url:"/examRegistration",studyLevel:{higher:!0}},{name:"main.menu.myStudyInformation.thesisTopicInput",url:"/thesisTopicInput"},{name:"main.menu.myStudyInformation.otherStudents",url:"/students?_menu"}]}),x=x.concat(n(a)),x.push({name:"main.menu.documents.label",type:"toggle",pages:[{name:"main.menu.documents.applications",url:"/applications/student?_menu"},{name:"main.menu.documents.certificates",url:"/certificate?_menu"},{name:"main.menu.documents.practiceContracts",url:"/contracts?_menu"},{name:"main.menu.documents.apel",url:"/apelApplication?_menu"}]})}function j(){x.push({name:"main.menu.curriculum.label",type:"toggle",pages:[{name:"main.menu.curriculum.schoolCurriculums",url:"/curriculum?_menu"},{name:"main.menu.curriculum.stateCurriculums",url:"/stateCurriculum?_menu"}]}),x.push({name:"main.menu.teachers.label",type:"link",url:"/teachers?_menu"})}function k(){x.push({name:"main.menu.curriculums.label",url:"/curriculum?_menu",type:"link"}),x.push({name:"main.menu.subjects.label",url:"/subject?_menu",type:"link",studyLevel:{higher:!0}}),x.push({name:"main.menu.timetableLink.label",type:"link",url:"/timetable/personalGeneralTimetable?_menu"}),x.push({name:"main.menu.studentRepresentative.label",type:"link",url:"/students/myData"}),x.push({name:"main.menu.academicCalendar.label",type:"link",url:"/academicCalendar"}),x.push({name:"main.menu.studentStudyInformation.label",type:"toggle",pages:[{name:"main.menu.studentStudyInformation.journal",url:"/students/journals",studyLevel:{vocational:!0}},{name:"main.menu.studentStudyInformation.practiceJournal",url:"/practiceJournals?_menu"},{name:"main.menu.studentStudyInformation.results",url:"/students/myResults"}]}),x.push({name:"main.menu.documents.label",type:"toggle",pages:[{name:"main.menu.documents.applications",url:"/applications/student?_menu"},{name:"main.menu.documents.certificates",url:"/certificate?_menu"}]})}function l(){x.push({name:"main.menu.academicCalendar.label",type:"link",url:"/academicCalendars"}),x.push({name:"main.menu.timetableLink.label",type:"link",url:"/timetables"}),x.push({name:"main.menu.curriculums.label",type:"link",url:"/curriculums?_menu"})}function m(a){var b=[];return a.higher&&a.vocational?b.push({name:"main.menu.scholarships.label",type:"toggle",pages:[{name:"main.menu.scholarships.grants",url:"/scholarships/grants?_menu"},{name:"main.menu.scholarships.grantApplications",url:"/scholarships/applications/grants?_menu"},{name:"main.menu.scholarships.scholarships",url:"/scholarships/scholarships?_menu"},{name:"main.menu.scholarships.scholarshipApplications",url:"/scholarships/applications/scholarships?_menu"},{name:"main.menu.scholarships.drGrants",url:"/scholarships?_menu"}]}):a.higher?(b.push({name:"main.menu.scholarships.scholarships",type:"link",url:"/scholarships/scholarships?_menu"}),b.push({name:"main.menu.scholarships.scholarshipApplications",type:"link",url:"/scholarships/applications/scholarships?_menu"}),b.push({name:"main.menu.scholarships.drGrants",type:"link",url:"/scholarships?_menu"}),b.push({name:"main.menu.scholarships.grantApplications",type:"link",url:"/scholarships/applications/grants?_menu"})):(b.push({name:"main.menu.scholarships.grants",type:"link",url:"/scholarships/grants?_menu"}),b.push({name:"main.menu.scholarships.grantApplications",type:"link",url:"/scholarships/applications/grants?_menu"})),b}function n(a){var b=[];return a.higher?(b.push({name:"main.menu.scholarships.scholarships",type:"link",url:"/scholarships/myData/scholarships?_menu"}),b.push({name:"main.menu.scholarships.drGrants",type:"link",url:"/scholarships/myData/drGrants?_menu"})):b.push({name:"main.menu.scholarships.grants",type:"link",url:"/scholarships/myData/grants?_menu"}),b}function o(){var a=b.path();if("/"===a)return w.selectSection(null),void w.selectPage(null,null);for(var c=function(b,c){return c.url.replace(/(\?_menu)$/,"")===a?(w.selectSection(b),w.selectPage(b,c),!0):!1},d=!1,e=0;e<y.length&&!d;e++){var f=y[e];if(f.children)for(var g=0;g<f.children.length&&!d;g++){var h=f.children[g];if(h.pages)for(var i=0;i<h.pages.length&&!d;i++)d=c(h,h.pages[i])}else if(f.pages)for(var j=0;j<f.pages.length&&!d;j++)d=c(f,f.pages[j]);else"link"===f.type&&(d=c(f,f))}}function p(a,b,c){var d=!1,f=a.url.replace(/(\?_menu)$/,""),g=e.routes,h=null;for(var i in g)if(g.hasOwnProperty(i)&&g[i].regexp&&g[i].regexp.test(f)){h=g[i];break}if(h&&h.hasOwnProperty("data")){if(h=h.data.authorizedRoles,angular.isFunction(h))d=h(c,b);else if(-1!==h.lastIndexOf(""))d=!0;else for(var j=0;j<h.length;j++)if(-1!==b.indexOf(h[j])){d=!0;break}}else d=!0;return d}function q(a,b){return angular.isDefined(a.studyLevel)&&angular.isDefined(b.school)&&null!==b.school?b.higher&&a.studyLevel.higher||b.vocational&&a.studyLevel.vocational:!0}function r(a,b,c,d){if(b.pages.length>0)for(var e=0;e<b.pages.length;e++)t(a,b.pages[e],c,d);a.length>0&&y.push({name:b.name,type:"toggle",pages:a})}function s(a,b,c){p(a,b,c)&&a.url&&q(a,c)&&y.push({name:a.name,type:a.type,url:a.url})}function t(a,b,c,d){p(b,c,d)&&b.url&&q(b,d)&&a.push({name:b.name,id:b.id,url:b.url})}function u(a){switch(x=[],a.roleCode){case"ROLL_A":f(a);break;case"ROLL_P":h();break;case"ROLL_O":g();break;case"ROLL_T":i(a);break;case"ROLL_L":k();break;case"ROLL_V":j();break;default:l()}}function v(a){var b=a.authorizedRoles||[""];y=[],u(a);for(var c=0;c<x.length;c++){var d=[];"toggle"===x[c].type?r(d,x[c],b,a):"link"===x[c].type&&s(x[c],b,a)}w.sections=y,o()}var w,x=[],y=[];return c.$on("$locationChangeSuccess",o),w={sections:{},setMenu:function(a){v(a)},selectSection:function(a){w.openedSection=a},toggleSelectSection:function(a){w.openedSection=w.openedSection===a?null:a},isSectionSelected:function(a){return w.openedSection===a},selectPage:function(a,b){w.currentSection=a,w.currentPage=b},isPageSelected:function(a){return w.currentPage===a}}}]),angular.module("hitsaOis").factory("message",["$mdToast","$translate",function(a,b){function c(b,c){a.show(a.simple().textContent(b).hideDelay(3e3).position("top").toastClass(c))}function d(a,d,e){b(a,e).then(function(a){c(a,d)})["catch"](function(){c(a,d)})}var e={};return e.info=function(a,b){d(a,"toastInfo",b)},e.warn=function(a,b){d(a,"toastWarn",b)},e.error=function(a,b){d(a,"toastError",b)},e.updateSuccess=function(){d("main.messages.update.success","toastInfo")},e}]),angular.module("hitsaOis").factory("oisFileService",["config",function(a){var b={};return b.getFromLfFile=function(a,b){var c={},d=new FileReader;return d.onloadend=function(){c.fname=a.lfFileName,c.ftype=a.lfFile.type,a.lfFile.size>0?c.fdata=d.result.replace("data:"+c.ftype+";base64,",""):c.fdata="",angular.isFunction(b)&&b(c)},d.readAsDataURL(a.lfFile),c},b.getFileUrl=function(a){return"data:"+a.ftype+";base64,"+a.fdata},b.getUrl=function(c,d){return c?c.oisFile?c.id?a.apiUrl+"/oisfile/get/"+d+"/"+c.oisFile.id:b.getFileUrl(c.oisFile):c.id?a.apiUrl+"/oisfile/get/"+d+"/"+c.id:b.getFileUrl(c):void 0},b}]),angular.module("hitsaOis").factory("QueryUtils",["config","$resource","$route","$translate","message","resourceErrorHandler","$sessionStorage",function(a,b,c,d,e,f,g){var h={size:20,page:1},i=function(a){var b=angular.copy(a,{});angular.isNumber(b.page)&&(b.page=b.page-1),b.lang=d.use().toUpperCase();for(var c in b)b.hasOwnProperty(c)&&""===b[c]&&delete b[c];return b.order&&("-"===b.order[0]?b.sort=a.order.substring(1)+",desc":b.sort=a.order+",asc",delete b.order),b},j=function(a){for(var b in a)a.hasOwnProperty(b)&&"order"!==b&&"size"!==b&&"page"!==b&&delete a[b]},k=function(a,b,d,f){if(a.criteria=angular.extend({},h),a.clearCriteria=function(){j(a.criteria)},void 0===a.fromStorage&&(a.fromStorage=function(a){return JSON.parse(g[a]||"{}")}),a.toStorage=function(a,b){g[a]=JSON.stringify(b)},"_menu"in c.current.params)angular.extend(a.criteria,d);else{var k=a.fromStorage(b);angular.isNumber(k.page)&&(k.page=k.page+1),angular.extend(a.criteria,k)}a.getCriteria=function(){return i(a.criteria)},a.tabledata={},a.afterLoadData=function(b){a.tabledata.content=b.content,a.tabledata.totalElements=b.totalElements,0===b.totalElements&&e.info("main.messages.error.notFound"),angular.isFunction(f)&&f(b.content)},a.loadData=function(){var c=a.getCriteria();a.toStorage(b,c),a.tabledata.$promise=l(b).search(c,a.afterLoadData)}},l=function(c,d){var e=a.apiUrl+c,g=e+"/:id";return b(e,{},d||{save:{method:"POST",interceptor:f},save2:{method:"POST"},post:{method:"POST",isArray:!0,interceptor:f},post2:{method:"POST",isArray:!0},get:{method:"GET",url:g,interceptor:f},update:{method:"PUT",url:g,params:{id:"@id"},interceptor:f},update2:{method:"PUT",url:g,params:{id:"@id"}},"delete":{method:"DELETE",url:g,params:{id:"@id",version:"@version"},interceptor:f},put:{method:"PUT",interceptor:f},put2:{method:"PUT"},search:{method:"GET",interceptor:f},query:{method:"GET",isArray:!0,interceptor:f}})};return{getQueryParams:i,clearQueryParams:j,createQueryForm:k,endpoint:l}}]).factory("busyHandler",["$mdDialog",function(a){var b=0,c=!1;return{handle:function(d){if(d.busy){if(b++,1===b){var e=angular.element(document.body);a.show({parent:e,template:'<md-dialog style="background-color:transparent;box-shadow:none"><div layout="row" layout-sm="column" layout-align="center center" aria-label="wait" style="height:120px;"><md-progress-circular class="md-hue-2 loader" md-diameter="80px"></md-progress-circular></div></md-dialog>',onRemoving:function(){c=!1}}),c=!0}}else b--,0===b&&c&&a.hide()}}}]),function(){function a(a){return 10>a?"0"+a:a}Date.prototype.toISOString=function(){return this.getFullYear()+"-"+a(this.getMonth()+1)+"-"+a(this.getDate())+"T"+a(this.getHours())+":"+a(this.getMinutes())+":"+a(this.getSeconds())+"."+(this.getMilliseconds()/1e3).toFixed(3).slice(2,5)+"Z"}}(),angular.module("hitsaOis").factory("ekisService",["config",function(a){var b="YYYYMMDDHHmmSS",c={};return c.getContractUrl=function(c){return a.ekisUrl+c+"%26u=3D"+moment().format(b)},c.getCertificateUrl=function(c){return a.ekisUrl+c+"%26u=3D"+moment().format(b)},c}]),angular.module("hitsaOis").factory("School",["QueryUtils",function(a){function b(){}return b.getAll=function(){return a.endpoint("/autocomplete/schools").query()},b.getLdap=function(){return a.endpoint("/autocomplete/ldapschools").query()},b.getSchoolsWithLogo=function(){return a.endpoint("/autocomplete/schoolsWithLogo").query()},b}]),angular.module("hitsaOis").controller("SchoolDepartmentEditController",["$location","$route","$scope","dialogService","message","QueryUtils",function(a,b,c,d,e,f){var g=b.current.params.id,h="/school/departments",i=f.endpoint(h);if(g)c.schoolDepartment=i.get({id:g});else{var j=new Date;j.setHours(0,0,0,0),c.schoolDepartment=new i({validFrom:j,validThru:null})}c.update=function(){return c.schoolDepartmentForm.$setSubmitted(),c.schoolDepartmentForm.$valid?void(c.schoolDepartment.id?c.schoolDepartment.$update().then(e.updateSuccess):c.schoolDepartment.$save().then(function(){e.info("main.messages.create.success"),a.url(h+"/"+c.schoolDepartment.id+"/edit")})):void e.error("main.messages.form-has-errors")},c["delete"]=function(){d.confirmDialog({prompt:"school.department.deleteconfirm"},function(){c.schoolDepartment.$delete().then(function(){e.info("main.messages.delete.success"),a.url("/school/departments")})})}}]).controller("SchoolDepartmentListController",["$scope","DataUtils","QueryUtils",function(a,b,c){var d=function(){var c=function(a,b,d){for(var e=0,f=d.length;f>e;e++){var g=d[e];g.indent=b,a.push(g),c(a,b+1,g.children||[])}},d=[];c(d,0,a.tabledata.content),a.tabledata.content=d;var e=new Date;e.setUTCHours(0,0,0,0);for(var f=0,g=d.length;g>f;f++){var h=d[f];b.convertStringToDates(h,["validFrom","validThru"]),h.isValid=h.validFrom<=e&&(!h.validThru||h.validThru>=e)}};c.createQueryForm(a,"/school/departments",{order:"en"===a.currentLanguage()?"nameEn":"nameEt"},d),a.loadData()}]),angular.module("hitsaOis").controller("SchoolEditController",["$scope","$route","School","$location","dialogService","message","QueryUtils","oisFileService","Classifier","classifierAutocomplete",function(a,b,c,d,e,f,g,h,i,j){function k(){a.school.logo?a.school.imageUrl=h.getUrl(a.school.logo,"school"):a.school.imageUrl="?"+(new Date).getTime(),a.school.ehisSchool&&i.get(a.school.ehisSchool).$promise.then(function(b){a.school._ehisSchool=b})}function l(b){a.school.deleteCurrentLogo?(a.school.logo=null,b()):a.logoFiles[0]?a.school.logo=h.getFromLfFile(a.logoFiles[0],b):b()}var m=b.current.params.id,n="/school",o=g.endpoint(n);m?(a.school=o.get({id:m}),a.school.$promise.then(k)):(a.school=new o,k()),a.update=function(){function b(){f.info(c),a.logoFileApi.removeAll(),k()}if(a.schoolForm.$setSubmitted(),!a.schoolForm.$valid)return void f.error("main.messages.form-has-errors");if(!a.school.ehisSchool)return void f.error("school.error.ehisSchoolMissing");var c=a.school.id?"main.messages.update.success":"main.messages.create.success";l(function(){a.school.id?a.school.$update().then(b):a.school.$save().then(b)})},a["delete"]=function(){e.confirmDialog({prompt:"school.deleteconfirm"},function(){a.school.$delete().then(function(){d.url(n)})})},a.querySearch=function(a){return j.searchByName(a,"EHIS_KOOL")},a.setEhisSchool=function(){var b=a.school._ehisSchool||{};a.school.ehisSchool=b.code,a.school.nameEt=b.nameEt,a.school.ehisId=b.value,a.school.regNr=b.value2}}]),angular.module("hitsaOis").controller("SchoolStudyLevelsController",["$q","$scope","$rootScope","Classifier","QueryUtils","AUTH_EVENTS","message","USER_ROLES","AuthService",function(a,b,c,d,e,f,g,h,i){b.studyLevelDefs=d.queryForDropdown({mainClassCode:"OPPEASTE",order:"code"}),b.studyLevels=e.endpoint("/school/studyLevels").search(),b.canEdit=i.isAuthorized(h.ROLE_OIGUS_M_TEEMAOIGUS_OPPETASE),a.all([b.studyLevelDefs.$promise,b.studyLevels.$promise]).then(function(){d.setSelectedCodes(b.studyLevelDefs,b.studyLevels.studyLevels)}),b.update=function(){b.studyLevels.studyLevels=d.getSelectedCodes(b.studyLevelDefs),b.studyLevels.$put().then(function(){g.updateSuccess(),c.$broadcast(f.reAuthenticate)})}}]),angular.module("hitsaOis").config(["$routeProvider","USER_ROLES",function(a,b){a.when("/school",{templateUrl:"school/school.list.html",controller:"SimpleListController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],params:["$translate",function(a){return{order:"en"===a.use()?"nameEn":"nameEt"}}],url:function(){return"/school"}},data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_OPPEASUTUS]}}).when("/school/new",{templateUrl:"school/school.edit.html",controller:"SchoolEditController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}]},data:{authorizedRoles:[b.ROLE_OIGUS_M_TEEMAOIGUS_OPPEASUTUS]}}).when("/school/:id/edit",{templateUrl:"school/school.edit.html",controller:"SchoolEditController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}]},data:{authorizedRoles:[b.ROLE_OIGUS_M_TEEMAOIGUS_OPPEASUTUS]}}).when("/school/:id/view",{templateUrl:"school/school.view.html",controller:"SchoolViewController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}]},data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_OPPEASUTUS]}}).when("/school/departments",{templateUrl:"school/school.department.list.html",controller:"SchoolDepartmentListController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}]},data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_STRUKTUUR]}}).when("/school/departments/new",{templateUrl:"school/school.department.edit.html",controller:"SchoolDepartmentEditController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}]},data:{authorizedRoles:[b.ROLE_OIGUS_M_TEEMAOIGUS_STRUKTUUR]}}).when("/school/departments/:id/edit",{templateUrl:"school/school.department.edit.html",controller:"SchoolDepartmentEditController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}]},data:{authorizedRoles:[b.ROLE_OIGUS_M_TEEMAOIGUS_STRUKTUUR]}}).when("/school/departments/:id/view",{templateUrl:"school/school.department.view.html",controller:"SchoolDepartmentEditController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}]},data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_STRUKTUUR]}}).when("/school/teacheroccupations",{templateUrl:"teacher/teacher.occupation.list.html",controller:"SimpleListController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],params:function(){return{order:"occupationEt"}},url:function(){return"/school/teacheroccupations"}},data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_OPETAJAAMET]}}).when("/school/teacheroccupations/new",{templateUrl:"teacher/teacher.occupation.edit.html",controller:"TeacherOccupationEditController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}]},data:{authorizedRoles:[b.ROLE_OIGUS_M_TEEMAOIGUS_OPETAJAAMET]}}).when("/school/teacheroccupations/:id/edit",{templateUrl:"teacher/teacher.occupation.edit.html",controller:"TeacherOccupationEditController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}]},data:{authorizedRoles:[b.ROLE_OIGUS_M_TEEMAOIGUS_OPETAJAAMET]}}).when("/school/studyLevels",{templateUrl:"school/school.study.levels.html",controller:"SchoolStudyLevelsController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}]},data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_OPPETASE]}})}]),angular.module("hitsaOis").controller("SchoolViewController",["$route","$scope","oisFileService","Classifier","QueryUtils",function(a,b,c,d,e){var f=a.current.params.id;b.school=e.endpoint("/school").get({id:f},function(){b.school.logo?b.school.imageUrl=c.getUrl(b.school.logo,"school"):b.school.imageUrl="?"+(new Date).getTime(),b.school.ehisSchool&&d.get(b.school.ehisSchool).$promise.then(function(a){b.school.ehisSchool=a.code,b.school.nameEt=a.nameEt,b.school.ehisId=a.value,b.school.regNr=a.value2})})}]),angular.module("hitsaOis").config(["$routeProvider","USER_ROLES",function(a,b){a.when("/school/studyYears",{templateUrl:"studyYear/study.year.list.html",controller:"StudyYearsListController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}]},data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_OPPEPERIOOD]}}).when("/school/studyYears/:code/new",{templateUrl:"studyYear/study.year.edit.html",controller:"StudyYearsEditController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}]},data:{authorizedRoles:[b.ROLE_OIGUS_M_TEEMAOIGUS_OPPEPERIOOD]}}).when("/school/studyYears/:id/view",{templateUrl:"studyYear/study.year.view.html",controller:"StudyYearsEditController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}]},data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_OPPEPERIOOD]}}).when("/school/studyYears/:id/edit",{templateUrl:"studyYear/study.year.edit.html",controller:"StudyYearsEditController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}]},data:{authorizedRoles:[b.ROLE_OIGUS_M_TEEMAOIGUS_OPPEPERIOOD]}})}]).controller("StudyYearsListController",["$scope","QueryUtils","USER_ROLES","AuthService",function(a,b,c,d){a.endpoint=b.endpoint("/school/studyYears"),a.tabledata=a.endpoint.query(),a.canEdit=d.isAuthorized(c.ROLE_OIGUS_M_TEEMAOIGUS_OPPEPERIOOD)}]).controller("StudyYearsEditController",["$location","$mdDialog","$route","$scope","$translate","Classifier","dialogService","message","DataUtils","QueryUtils","USER_ROLES","AuthService",function(a,b,c,d,e,f,g,h,i,j,k,l){function m(){i.convertStringToDates(d.studyYear,["startDate","endDate"]),d.studyPeriods=d.studyYear.studyPeriods||[],d.studyPeriodEvents=d.studyYear.studyPeriodEvents||[],q.objectmapper(d.studyPeriods),i.convertStringToDates(d.studyPeriods,["startDate","endDate"]),i.convertStringToDates(d.studyPeriodEvents,["start","end"])}d.canEdit=l.isAuthorized(k.ROLE_OIGUS_M_TEEMAOIGUS_OPPEPERIOOD);var n=c.current.params.id,o=c.current.params.code,p=j.endpoint("/school/studyYears"),q=f.valuemapper({type:"OPPEPERIOOD"});d.eventTypes={},f.queryForDropdown({mainClassCode:"SYNDMUS"},function(a){a.forEach(function(a){var b={code:a.code,nameEt:a.nameEt,nameEn:a.nameEn,labelRu:a.labelRu};d.eventTypes[b.code]=b})}),n?d.studyYear=p.get({id:n},m):o&&(d.studyYear=new p({year:o}),d.studyPeriods=[],d.studyPeriodEvents=[]),d.openStudyPeriodDialog=function(a){var c=j.endpoint("/school/studyYears/"+d.studyYear.id+"/studyPeriods"),e=d,f=function(d){function f(){return k.dialogForm.$setSubmitted(),!k.dialogForm.startDate.$valid&&k.dialogForm.startDate.$error.mindate||!k.dialogForm.endDate.$valid&&k.dialogForm.endDate.$error.maxdate?(h.error("studyYear.studyPeriod.error.notInsideStudyYear"),!1):j(k.studyPeriod)?(h.error("studyYear.studyPeriod.error.overlapWithOtherStudyPeriod"),!1):k.dialogForm.$valid?!0:(h.error("main.messages.form-has-errors"),!1)}function j(a){for(var b=0;b<e.studyPeriods.length;b++)if(e.studyPeriods[b].id!==a.id&&i.periodsOverlap(a,e.studyPeriods[b]))return!0;return!1}var k=d;a?(k.studyPeriod=new c(a),k.studyPeriod.type=k.studyPeriod.type.code):k.studyPeriod=new c({}),k.studyPeriod.year=e.studyYear.year,k.studyYear=e.studyYear,k.typeChange=function(){if(k.studyPeriod.type){var a=q.objectmapper({type:k.studyPeriod.type});angular.isString(k.studyPeriod.nameEt)||(k.studyPeriod.nameEt=a.type.nameEt)}},k["delete"]=function(){g.confirmDialog({prompt:"studyYear.studyPeriod.deleteconfirm"},function(){k.studyPeriod.$delete().then(function(){e.studyPeriods=e.studyPeriods.filter(function(b){
return b!==a}),h.info("main.messages.delete.success"),b.hide()})})};var l=function(c){i.convertStringToDates(c,["startDate","endDate"]),q.objectmapper(c),a?angular.extend(a,c):e.studyPeriods.push(c),b.hide(),h.updateSuccess()};k.submit=function(){if(f()){var a=k.studyPeriod;a.id?a.$update().then(l):a.$save().then(l)}},d.cancel=b.hide};f.$inject=["$scope"],b.show({controller:f,templateUrl:"studyYear/study.period.dialog.html"})},d.openStudyPeriodEventDialog=function(a){var c=["SYNDMUS_AVES","SYNDMUS_DEKP","SYNDMUS_VOTA"],e=j.endpoint("/school/studyYears/"+d.studyYear.id+"/studyPeriodEvents"),f=d,k=function(d){if(a){if(d.studyPeriodEvent=new e(a),d.studyPeriodEvent.studyPeriod)for(var j=0;j<f.studyPeriods.length;j++)if(f.studyPeriods[j].id===d.studyPeriodEvent.studyPeriod.id){d.studyPeriodEvent.studyPeriod=f.studyPeriods[j];break}}else d.studyPeriodEvent=new e({});d.studyPeriods=f.studyPeriods,d.uniqueInStudyPeriod=!1,d.$watch("studyPeriodEvent",function(){-1!==c.indexOf(d.studyPeriodEvent.eventType)?(d.uniqueInStudyPeriod=!0,d.studyPeriodEvent.studyPeriod||(d.studyPeriodEvent.studyPeriod=i.getCurrentStudyYearOrPeriod(d.studyPeriods))):d.uniqueInStudyPeriod=!1},!0),d["delete"]=function(){g.confirmDialog({prompt:"studyYear.studyPeriodEvent.deleteconfirm"},function(){d.studyPeriodEvent.$delete().then(function(){f.studyPeriodEvents=f.studyPeriodEvents.filter(function(b){return b!==a}),h.info("main.messages.delete.success"),b.hide()})})},d.cancel=b.hide,d.submit=function(){d.dialogForm.$setSubmitted();var a=!1;if(-1!==c.indexOf(d.studyPeriodEvent.eventType)&&(angular.isUndefined(d.studyPeriodEvent.studyPeriod)&&(d.studyPeriodEvent.studyPeriod=null),d.studyPeriodEvent.studyPeriod)){var b=f.studyPeriodEvents.filter(function(a){return a.studyPeriod&&d.studyPeriodEvent.studyPeriod.id===a.studyPeriod.id&&d.studyPeriodEvent.id!==a.id&&a.eventType===d.studyPeriodEvent.eventType?!0:void 0});b.length>0&&(a=!0,h.error("studyYear.studyPeriodEvent.error.uniqueInPeriod"))}if(d.studyPeriodEvent.start&&d.studyPeriodEvent.end&&d.studyPeriodEvent.start.getTime()>d.studyPeriodEvent.end.getTime()&&(a=!0,h.error("studyYear.studyPeriod.error.startDateLaterThanEndDate")),d.studyPeriodEvent.studyPeriod){var e,g,i,j;d.studyPeriodEvent.start&&d.studyPeriodEvent.end?(e=d.studyPeriodEvent.start.setHours(0,0,0),g=d.studyPeriodEvent.end.setHours(0,0,0),i=d.studyPeriodEvent.studyPeriod.startDate.setHours(0,0,0),j=d.studyPeriodEvent.studyPeriod.endDate.setHours(0,0,0),e>=i&&j>=g||(a=!0,h.error("studyYear.studyPeriod.error.outsideStudyPeriod"))):d.studyPeriodEvent.start&&(e=d.studyPeriodEvent.start.setHours(0,0,0),i=d.studyPeriodEvent.studyPeriod.startDate.setHours(0,0,0),j=d.studyPeriodEvent.studyPeriod.endDate.setHours(0,0,0),(i>e||e>j)&&(a=!0,h.error("studyYear.studyPeriod.error.outsideStudyPeriod")))}if(d.dialogForm.$valid&&!a){var k=d.studyPeriodEvent;k.id?k.$update().then(l):k.$save().then(l)}}};k.$inject=["$scope"];var l=function(c){i.convertStringToDates(c,["start","end"]),a?angular.extend(a,c):f.studyPeriodEvents.push(c),b.hide(),h.updateSuccess()};b.show({controller:k,templateUrl:"studyYear/study.period.event.dialog.html"})},d.update=function(){d.schoolYearForm.$setSubmitted(),d.schoolYearForm.$valid&&(n?d.studyYear.$update().then(m).then(h.updateSuccess):o&&d.studyYear.$save().then(function(b){a.path("/school/studyYears/"+b.id+"/edit"),h.info("main.messages.create.success")}))}}]),angular.module("hitsaOis").controller("StateCurriculumController",["$route","$scope","message","Classifier","$location","classifierAutocomplete","dialogService","QueryUtils","DataUtils","ArrayUtils","Curriculum","config","$rootScope",function(a,b,c,d,e,f,g,h,i,j,k,l,m){function n(){M?L.get({id:M}).$promise.then(function(a){b.stateCurriculum=a,o(),m.removeLastUrlFromHistory(function(a){return a&&-1!==a.indexOf("/stateCurriculum/"+M)})}):b.stateCurriculum=new L(J)}function o(){i.convertStringToDates(b.stateCurriculum,["validFrom","validThru"]),p(),E(),b.formState.readOnly=-1!==a.current.$$route.originalPath.indexOf("view")}function p(){var a=b.stateCurriculum.iscedClass;d.getParentsWithMainClass("ISCED_SUUN",b.stateCurriculum.iscedClass).$promise.then(function(a){return b.iscedSuun=a[0].code,a[0]}).then(function(c){d.getParentsWithMainClass("ISCED_VALD",c.code).$promise.then(function(c){b.iscedVald=c[0].code,b.stateCurriculum.iscedClass=a})})}function q(a){return b.stateCurriculumForm.$setSubmitted(),u()?!0:(c.error(a.errorMessage),!1)}function r(a){q(a)&&b.stateCurriculum.$save().then(function(){i.convertStringToDates(b.stateCurriculum,["validFrom","validThru"]),c.info("main.messages.create.success"),e.url("/stateCurriculum/"+b.stateCurriculum.id+"/edit?_noback")})}function s(a,d){setTimeout(function(){q(d)&&a.$update().then(function(a){c.info(d.updateSuccess),b.stateCurriculum=a,o(),b.stateCurriculumForm.$setPristine(),b.formState.readOnly||b.stateCurriculum.status===k.STATUS.ENTERING||e.url("/stateCurriculum/"+b.stateCurriculum.id+"/view?_noback")})},0)}function t(a,c){g.confirmDialog({prompt:c.prompt},function(){b.formState.strictValidation?b.occupationCheckBeforeSave(a,c):s(a,c)})}function u(){return b.stateCurriculumForm.$valid&&(!b.strictValidation()||b.stateCurriculum.occupations.length>0&&v()&&w())}function v(){for(var a=0;a<b.stateCurriculum.occupations.length;a++)if(b.hasNoPmodule(b.stateCurriculum.occupations[a]))return!1;return!0}function w(){for(var a=0;a<b.subOccupationsList.length;a++)if(b.hasNoPmodule(b.subOccupationsList[a].code))return!1;return!0}function x(a){for(var c=0,d=B(a,"OSAKUTSE"),e=b.stateCurriculum.modules.filter(function(a){return!a.isAdditional}),f=0;f<e.length;f++){var g=j.intersection(e[f].moduleOccupations,d);if(0!==g.length){var h=j.includes(e[f].moduleOccupations,a)?1:0;c+=e[f].credits*(g.length+h-1)}}return c}function y(){for(var a=D(b.stateCurriculum.occupations),c=0;c<a.length;c++)if(!b.isOccutationValid(a[c]))return!1;return!0}function z(){for(var a=b.stateCurriculum.occupations,c=0;c<a.length;c++)for(var d=B(a[c],"SPETSKUTSE"),e=0;e<d.length;e++)if(!b.isSpetsOccupationValid(d[e],a[c]))return!1;return!0}function A(a){var b=B(a,"OSAKUTSE");return b.reduce(function(a,b){return a+C(b)},0)}function B(a,c){return b.subOccupations[a]?b.subOccupations[a].filter(function(a){return a.mainClassCode===c}).map(function(a){return a.code}):[]}function C(a){return b.stateCurriculum.modules.filter(function(b){return j.includes(b.moduleOccupations,a)}).reduce(function(a,b){return b.isAdditional?a:a+b.credits},0)}function D(a){return a.filter(function(a){return 0===a.indexOf("KUTSE_")})}function E(){if(b.stateCurriculum.occupations)for(var a=0;a<b.stateCurriculum.occupations.length;a++)F(b.stateCurriculum.occupations[a])}function F(a){d.getChildren(a).$promise.then(function(c){b.subOccupations[a]=c.filter(function(a){return"OSAKUTSE"===a.mainClassCode||"SPETSKUTSE"===a.mainClassCode}),b.getSubOccupationsAsList()})}function G(a){return!j.includes(b.stateCurriculum.occupations,a)}function H(a){var c=b.subOccupations[a].map(function(a){return a.code});return b.stateCurriculum.modules.some(function(b){return j.includes(b.moduleOccupations,a)||j.intersect(c,b.moduleOccupations)})}function I(){b.stateCurriculum.modules=b.stateCurriculum.modules.filter(function(a){return!j.isEmpty(a.moduleOccupations)})}b.STATUS=k.STATUS,b.MODULE_TYPE={BASIC:"KUTSEMOODUL_P",GENERAL:"KUTSEMOODUL_Y"};var J={status:b.STATUS.ENTERING,modules:[],occupations:[],validFrom:new Date,optionalStudyCredits:0,canChange:!0},K="/stateCurriculum",L=h.endpoint(K),M=a.current.params.id;b.removeFromArray=j.remove,b.subOccupations={},b.formState={strictValidation:!1,readOnly:-1!==a.current.$$route.originalPath.indexOf("view"),stateCurriculumPdfUrl:l.apiUrl+K+"/print/"+M+"/stateCurriculum.pdf"},n(),b["delete"]=function(){return j.isEmpty(b.stateCurriculum.curricula)?void g.confirmDialog({prompt:"stateCurriculum.deleteconfirm"},function(){b.stateCurriculum.$delete().then(function(){c.info("main.messages.delete.success"),e.path("/stateCurriculum")})}):void c.error("stateCurriculum.error.hasCurricula")},b.occupationCheckBeforeSave=function(a,c){y()?b.allSpetsOccupationsValidBeforeSave(a,c):g.confirmDialog({prompt:"stateCurriculum.occupationsCreditsConfirmConfirm"},function(){b.allSpetsOccupationsValidBeforeSave(a,c)},function(){return!1})},b.allSpetsOccupationsValidBeforeSave=function(a,b){z()?s(a,b):g.confirmDialog({prompt:"stateCurriculum.spetsOccupationsCredidsConfirm"},function(){s(a,b)},function(){return!1})},b.save=function(){var a={errorMessage:"main.messages.form-has-errors",updateSuccess:"main.messages.update.success"};M?(b.formState.strictValidation=!1,s(new L(b.stateCurriculum),a)):r(a)},b.confirmAndSave=function(){b.formState.strictValidation=!0;var a={prompt:"stateCurriculum.prompt.editForm.verify",updateSuccess:"stateCurriculum.statuschange.verified",errorMessage:"stateCurriculum.statuschange.fail.verify"},c=h.endpoint(K+"/confirmAndSave");t(new c(b.stateCurriculum),a)},b.close=function(){b.formState.strictValidation=!1;var a={prompt:b.formState.readOnly?"stateCurriculum.prompt.viewForm.close":"stateCurriculum.prompt.editForm.close",updateSuccess:"stateCurriculum.statuschange.closed",errorMessage:b.formState.readOnly?"stateCurriculum.statuschange.fail.closeReadOnly":"stateCurriculum.statuschange.fail.close"},c=b.formState.readOnly?K+"/close":K+"/closeAndSave",d=h.endpoint(c);t(new d(b.stateCurriculum),a)},b.getStar=function(){return b.strictValidation()?"":" *"},b.strictValidation=function(){return b.stateCurriculum&&b.stateCurriculum.status===b.STATUS.VERIFIED||b.formState.strictValidation},b.hasNoPmodule=function(a){if(!b.stateCurriculum||!b.stateCurriculum.modules)return!0;for(var c=0;c<b.stateCurriculum.modules.length;c++)if(b.stateCurriculum.modules[c].module===b.MODULE_TYPE.BASIC&&j.includes(b.stateCurriculum.modules[c].moduleOccupations,a))return!1;return!0},b.checkValidThru=function(){b.stateCurriculum.validThru<b.stateCurriculum.validFrom&&(b.stateCurriculum.validThru=void 0)},b.nameEtUniqueQuery={id:M,paramName:"nameEt",url:"/stateCurriculum/unique"},b.nameEnUniqueQuery={id:b.nameEtUniqueQuery.id,paramName:"nameEn",url:b.nameEtUniqueQuery.url},b.isOccutationValid=function(a){for(var c=C(a)+b.stateCurriculum.optionalStudyCredits,d=B(a,"OSAKUTSE"),e=0;e<d.length;e++)c+=C(d[e]);c-=x(a);var f=B(a,"SPETSKUTSE");return f[0]&&(c+=C(f[0])),b.stateCurriculum.credits===c},b.isSpetsOccupationValid=function(a,c){var d=C(c),e=C(a),f=A(c),g=d+e+f+b.stateCurriculum.optionalStudyCredits-x(c)===b.stateCurriculum.credits;return g},b.modulesValid=function(){return b.stateCurriculum?!b.strictValidation()||0!==b.stateCurriculum.occupations.length&&0!==b.stateCurriculum.modules.length&&y()&&z():!0},b.querySearch=function(a){return f.searchByName(a,"KUTSE")},b.addOcupation=function(a){a&&G(a.code)&&(b.stateCurriculum.occupations.push(a.code),F(a.code),b.stateCurriculumForm.$setDirty())},b.getSubOccupationsAsList=function(){b.subOccupationsList=[];for(var a in b.subOccupations)b.subOccupationsList=b.subOccupationsList.concat(b.subOccupations[a])},b.removeOcupation=function(a){var c=H(a)?"stateCurriculum.occupationWithModuleDeleteConfirm":"stateCurriculum.occupationdeleteconfirm";g.confirmDialog({prompt:c},function(){b.removeFromArray(b.stateCurriculum.occupations,a);var c=b.subOccupations[a].map(function(a){return a.code});delete b.subOccupations[a],b.getSubOccupationsAsList(),b.stateCurriculum.modules.forEach(function(c){b.removeFromArray(c.moduleOccupations,a)}),c.forEach(function(a){b.stateCurriculum.modules.forEach(function(c){b.removeFromArray(c.moduleOccupations,a)})}),I(),b.stateCurriculumForm.$setDirty()})},b.filterSubOccupations=function(a,c){return function(d){return b.subOccupations[a]&&null!==b.subOccupations[a].length&&j.includes(b.subOccupations[a],d)&&-1!==d.code.indexOf(c)}},b.filterModules=function(a,b){return function(c){return c.module===b&&j.includes(c.moduleOccupations,a)}},b.openViewModuleDialog=function(a){var c=function(c){function d(a){return j.includes(c.data.moduleOccupations,a)}c.data=angular.copy(a),c.occupations=b.stateCurriculum.occupations.map(function(a){var c=b.subOccupations[a];return c.forEach(function(a){a.selected=d(a.code)}),{code:a,selected:d(a),subOccupations:c}})};g.showDialog("stateCurriculum/state.curriculum.module.view.dialog.html",c,function(){})},b.openAddModuleDialog=function(a){var d=function(d){function e(a){return j.includes(d.data.moduleOccupations,a)}a?d.data=angular.copy(a):d.data={moduleOccupations:[],outcomes:[]},d.editing=angular.isDefined(a),d.isEditingOutcome=!1,d.editedOutcome=null,d.occupationsSelectedCorrectly=function(){if(!d.data.moduleOccupations)return!0;for(var a=D(d.data.moduleOccupations),b=0;b<a.length;b++){var c=B(a[b],"SPETSKUTSE");if(j.intersect(c,d.data.moduleOccupations))return!1}return!0},d.addOutcome=function(){angular.isString(d.data.outcomesEt)&&""!==d.data.outcomesEt&&(d.data.outcomes.push({outcomesEt:d.data.outcomesEt,outcomesEn:d.data.outcomesEn}),d.data.outcomesEt=void 0,d.data.outcomesEn=void 0)},d.editOutcome=function(a){d.isEditingOutcome=!0,d.editedOutcome=a,d.data.outcomesEt=a.outcomesEt,d.data.outcomesEn=a.outcomesEn},d.saveOutcome=function(){angular.isString(d.data.outcomesEt)&&""!==d.data.outcomesEt&&(d.isEditingOutcome=!1,d.editedOutcome.outcomesEt=d.data.outcomesEt,d.editedOutcome.outcomesEn=d.data.outcomesEn,d.data.outcomesEt=void 0,d.data.outcomesEn=void 0)},d["delete"]=function(){g.confirmDialog({prompt:"curriculum.moduleDeleteConfirm"},function(){if(d.data.id){var e=h.endpoint("/stateCurriculum/modules"),f=new e(d.data);f.$delete().then(function(){c.info("main.messages.delete.success"),j.remove(b.stateCurriculum.modules,a)})}else j.remove(b.stateCurriculum.modules,a);d.cancel()})},d.suboccupationsSelectedCorrectly=function(){if(!d.data.moduleOccupations)return!0;for(var a=D(b.stateCurriculum.occupations),c=0;c<a.length;c++){var e=B(a[c],"SPETSKUTSE"),f=B(a[c],"OSAKUTSE");if(j.intersect(e,d.data.moduleOccupations)&&j.intersect(f,d.data.moduleOccupations))return!1}return!0},d.validateOccupations=function(){d.occupationsValid=d.occupationsSelectedCorrectly()?!0:null,d.suboccupationsValid=d.suboccupationsSelectedCorrectly()?!0:null},d.validateOccupations(),d.changeOccupation=function(a){a.selected?d.data.moduleOccupations.push(a.code):j.remove(d.data.moduleOccupations,a.code),d.validateOccupations()},d.occupations=b.stateCurriculum.occupations.map(function(a){var c=b.subOccupations[a];return c.forEach(function(a){a.selected=e(a.code)}),{code:a,selected:e(a),subOccupations:c}}),d.allowedModuleTypes=[b.MODULE_TYPE.BASIC,b.MODULE_TYPE.GENERAL]};g.showDialog("stateCurriculum/state.curriculum.module.add.dialog.html",d,function(d){var e=d.data;if(b.stateCurriculum.id){var f=h.endpoint("/stateCurriculum/modules"),g=new f(e);g.stateCurriculumOccupations=b.stateCurriculum.occupations,g.stateCurriculum=b.stateCurriculum.id,e.id?g.$update().then(function(b){c.info("main.messages.update.success"),angular.extend(a,b)}):g.$save().then(function(a){c.info("main.messages.create.success"),b.stateCurriculum.modules.push(a)})}else a?angular.extend(a,e):b.stateCurriculum.modules.push(e)})},b.goToEditForm=function(){b.stateCurriculum&&(b.stateCurriculum.status===b.STATUS.VERIFIED?g.confirmDialog({prompt:"stateCurriculum.prompt.viewForm.editConfirmed"},function(){e.path("/stateCurriculum/"+b.stateCurriculum.id+"/edit")}):e.path("/stateCurriculum/"+b.stateCurriculum.id+"/edit"))}}]),angular.module("hitsaOis").controller("StateCurriculumListController",["$scope","$sessionStorage","Classifier","QueryUtils","$q","DataUtils",function(a,b,c,d,e,f){var g=c.valuemapper({status:"OPPEKAVA_STAATUS",ekrLevel:"EKR"});d.createQueryForm(a,"/stateCurriculum",{order:a.currentLanguageNameField()},g.objectmapper),e.all(g.promises).then(a.loadData),a.filteredOutStatuses=[{code:"OPPEKAVA_STAATUS_M"}],f.convertStringToDates(a.criteria,["validFrom","validThru"]),a.formState={},d.endpoint("/stateCurriculum/canCreate").search().$promise.then(function(b){a.formState.canCreate=b.canCreate}),d.endpoint("/stateCurriculum/canView").search().$promise.then(function(b){a.formState.canView=b.canView})}]),angular.module("hitsaOis").config(["$routeProvider","USER_ROLES",function(a,b){function c(a,b,c,d,e){d.resolve().then(function(d){(d.isMainAdmin()||d.isExternalExpert())&&c.includes(d.authorizedRoles,e.ROLE_OIGUS_M_TEEMAOIGUS_RIIKLIKOPPEKAVA)||(a.error("main.messages.error.nopermission"),b.path(""))})}c.$inject=["message","$location","ArrayUtils","AuthResolver","USER_ROLES"],a.when("/stateCurriculum/new",{templateUrl:"stateCurriculum/state.curriculum.html",controller:"StateCurriculumController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],checkAccess:c},data:{authorizedRoles:[b.ROLE_OIGUS_M_TEEMAOIGUS_RIIKLIKOPPEKAVA]}}).when("/stateCurriculum/:id/edit",{templateUrl:"stateCurriculum/state.curriculum.html",controller:"StateCurriculumController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],checkAccess:c},data:{authorizedRoles:[b.ROLE_OIGUS_M_TEEMAOIGUS_RIIKLIKOPPEKAVA]}}).when("/stateCurriculum/:id/view",{templateUrl:"stateCurriculum/state.curriculum.view.html",controller:"StateCurriculumController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}]},data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_RIIKLIKOPPEKAVA]}}).when("/stateCurriculum",{templateUrl:"stateCurriculum/state.curriculum.list.html",controller:"StateCurriculumListController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}]},data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_RIIKLIKOPPEKAVA]}})}]),angular.module("hitsaOis").constant("StudentStatus",{OPPURSTAATUS_A:"OPPURSTAATUS_A",OPPURSTAATUS_K:"OPPURSTAATUS_K",OPPURSTAATUS_O:"OPPURSTAATUS_O",OPPURSTAATUS_V:"OPPURSTAATUS_V",OPPURSTAATUS_L:"OPPURSTAATUS_L"}).factory("StudentUtil",["StudentStatus",function(a){return{isActive:function(b){return a.OPPURSTAATUS_O===b||a.OPPURSTAATUS_A===b||a.OPPURSTAATUS_V===b},hasFinished:function(b){return a.OPPURSTAATUS_L===b}}}]),angular.module("hitsaOis").controller("StudentViewMainController",["$mdDialog","$q","$route","$scope","dialogService","message","Classifier","QueryUtils","oisFileService",function(a,b,c,d,e,f,g,h,i){function j(a){d.representatives.content=p.objectmapper(a.content),d.representatives.totalElements=a.totalElements}function k(){var a=angular.extend({},h.getQueryParams(d.representativesCriteria),{id:n});d.representatives.$promise=h.endpoint("/studentrepresentatives/:id").search(a,j)}function l(a){d.foreignstudies.content=a.content,d.foreignstudies.totalElements=a.totalElements}var m=c.current.locals.auth,n=m.isStudent()||m.isParent()?m.student:c.current.params.id,o="/students";d.auth=m,d.studentId=n,d.currentNavItem="student.main",h.endpoint(o).get({id:n},function(a){d.student=a,d.student.photo?d.student.imageUrl=i.getUrl(d.student.photo,"student"):d.student.imageUrl="?"+(new Date).getTime()}),d.representativesCriteria={order:"person.lastname",size:5,page:1},d.representatives={};var p=g.valuemapper({relation:"OPPURESINDAJA"});d.loadRepresentatives=k,b.all(p.promises).then(k),d.editRepresentative=function(b){var g=d.student,i=h.endpoint("/studentrepresentatives/"+n);a.show({controller:["$scope",function(d){function j(){var a=d.studentRepresentativeEditForm.idcode;a.$setValidity("notUnique",d.record.person.idcode!==d.formState.student.person.idcode)}d.isParent=c.current.locals.auth.isParent(),d.formState={student:g},b?d.record=i.get({id:b}):d.record=new i({person:{}}),d.cancel=a.hide,d.update=function(){function c(){f.info(b?"main.messages.update.success":"main.messages.create.success"),a.hide(),k()}return j(),d.studentRepresentativeEditForm.$setSubmitted(),d.studentRepresentativeEditForm.$valid?void(d.record.id?d.record.$update().then(c)["catch"](angular.noop):d.record.$save().then(c)["catch"](angular.noop)):void f.error("main.messages.form-has-errors")},d["delete"]=function(){e.confirmDialog({prompt:"student.representative.deleteconfirm"},function(){d.record.$delete().then(function(){f.info("main.messages.delete.success"),a.hide(),k()})["catch"](angular.noop)})},d.lookupPerson=function(){function a(a){d.record.person.firstname=a.firstname,d.record.person.lastname=a.lastname}var b=d.record.person.idcode;b&&11===b.length&&b!==d.formState.idcode?h.endpoint("/autocomplete/persons",{search:{method:"GET"}}).search({idcode:b,role:"forrepresentative"}).$promise.then(function(b){a(b),!d.record.person.phone&&b.phone&&(d.record.person.phone=b.phone),!d.record.person.email&&b.email&&(d.record.person.email=b.email),d.formState.idcode=b.idcode})["catch"](function(){a({})}):b!==d.formState.idcode&&a({}),j()}}],templateUrl:"studentRepresentative/representative.edit.dialog.html",clickOutsideToClose:!1})},d.foreignstudiesCriteria={order:"-3",size:5,page:1},d.foreignstudies={},d.loadForeignstudies=function(){var a=angular.extend({},h.getQueryParams(d.foreignstudiesCriteria),{id:n});d.foreignstudies.$promise=h.endpoint(o+"/:id/foreignstudies").search(a,l)},d.loadForeignstudies()}]).controller("StudentViewResultsController",["$route","$scope","$localStorage","QueryUtils",function(a,b,c,d){function e(){if(c.resultsCurrentNavItems)for(var a=0;a<c.resultsCurrentNavItems.length;a++){var d=c.resultsCurrentNavItems[a];if(b.auth.school.id===d.school&&b.auth.user===d.user)return a+1}return null}function f(){b.auth.isAdmin()?b.canWatchStudentConnectedEntities=!0:b.auth.isTeacher()&&d.endpoint("/studentgroups").get({id:b.student.studentGroup.id}).$promise.then(function(a){a.teacher.id===b.auth.teacher&&(b.canWatchStudentConnectedEntities=!0)})}if(b.auth=a.current.locals.auth,b.studentId=b.auth.isStudent()||b.auth.isParent()?b.auth.student:a.current.params.id,d.endpoint("/students").get({id:b.studentId}).$promise.then(function(a){b.student=a,f()}),b.currentNavItem="student.results",b.changeResultsCurrentNavItem=function(a){b.resultsCurrentNavItem=a;var d=e(),f={school:b.auth.school.id,user:b.auth.user,navItemName:a};d?c.resultsCurrentNavItems[d-1]=f:(c.resultsCurrentNavItems||(c.resultsCurrentNavItems=[]),c.resultsCurrentNavItems.push(f))},c.resultsCurrentNavItems){var g=e();g?b.resultsCurrentNavItem=c.resultsCurrentNavItems[g-1].navItemName:b.changeResultsCurrentNavItem("student.curriculumFulfillment")}else b.changeResultsCurrentNavItem("student.curriculumFulfillment");b.isStudentCurriculumFulfilled=function(a){return a&&angular.isNumber(a.credits)&&a.credits>=a.curriculumCredits}}]).controller("StudentViewResultsVocationalController",["$q","$route","$scope","Classifier","QueryUtils","$rootScope","VocationalGradeUtil","StudentUtil",function(a,b,c,d,e,f,g,h){function i(){"student.curriculumFulfillment"===c.resultsCurrentNavItem?c.loadCurriculumFulfillment():"student.inOrderOfStudyYear"===c.resultsCurrentNavItem?c.loadStudyYearResults():"student.inOrderOfPassing"===c.resultsCurrentNavItem?c.loadModuleThemeResults():"student.journalsAndProtocols"===c.resultsCurrentNavItem?c.loadJournalsAndProtocols():"student.changeModules"===c.resultsCurrentNavItem&&(h.isActive(c.student.status)?c.loadChangeableModules():c.changeResultsCurrentNavItem("student.curriculumFulfillment"))}function j(a){a.forEach(function(a){a.oldCurriculumVersionModuleId=a.curriculumVersionModuleId,c.vocationalCurriculumModules.forEach(function(b){b.id===a.curriculumVersionModuleId&&(a.curriculumVersionModule=b)})}),c.changeableModules=a}function k(){angular.isObject(c.vocationalResults)||e.endpoint("/students/"+c.student.id+"/vocationalResults").get(function(a){a.results=l.objectmapper(a.results),a.curriculumModules.forEach(function(a){a.curriculumModule=m.objectmapper(a.curriculumModule)}),a.extraCurriculaModules.forEach(function(a){a.curriculumModule=m.objectmapper(a.curriculumModule)}),c.vocationalResults=a,i()})}var l=d.valuemapper({grade:"KUTSEHINDAMINE",studyYear:"OPPEAASTA"}),m=d.valuemapper({module:"KUTSEMOODUL"});c.canChangeStudentModules=c.auth.isAdmin()&&h.isActive(c.student.status)&&-1!==c.auth.authorizedRoles.indexOf("ROLE_OIGUS_M_TEEMAOIGUS_OPPUR"),c.$watch("resultsCurrentNavItem",function(){c.vocationalResults&&i()}),c.loadCurriculumFulfillment=function(){if(!angular.isObject(c.vocationalResultsCurriculum)){var a={};c.vocationalResults.curriculumModules.forEach(function(b){a[b.id]=b}),c.vocationalResults.extraCurriculaModules.forEach(function(b){a[b.id]=b});var b=[],d={};c.vocationalResults.results.forEach(function(c){angular.isObject(d[c.module.id])||(d[c.module.id]={themeResultById:{},totalSubmitted:0}),angular.isObject(c.theme)?(d[c.module.id].themeResultById[c.theme.id]=c,d[c.module.id].totalSubmitted+=c.credits):(angular.extend(d[c.module.id],c),angular.isObject(a[c.module.id])||b.push(c))}),c.moduleResultById=d,c.positiveThemeResult=function(a){return angular.isObject(a)&&angular.isObject(a.grade)&&angular.isString(a.grade.code)&&g.isPositive(a.grade.code)},c.vocationalResultsCurriculum={},c.vocationalResultsCurriculum.vocationalResultsModules=c.vocationalResults.curriculumModules.sort(function(a,b){return f.currentLanguageNameField(a.curriculumModule).localeCompare(f.currentLanguageNameField(b.curriculumModule))}),c.vocationalResultsCurriculum.extraCurriculaVocationalResultsModules=c.vocationalResults.extraCurriculaModules.sort(function(a,b){return f.currentLanguageNameField(a.curriculumModule).localeCompare(f.currentLanguageNameField(b.curriculumModule))}),c.allThemesHavePositiveGrade=function(b){var e=a[b.id].themes;if(0===e.length)return!1;for(var f=!0,g=0;g<e.length;g++){var h=e[g];if(!angular.isObject(d[b.id])||!angular.isObject(d[b.id].themeResultById[h.id])||!c.positiveThemeResult(d[b.id].themeResultById[h.id])){f=!1;break}}return f}}},c.loadStudyYearResults=function(){if(!angular.isObject(c.vocationalResultsStudyYear)){var a={};c.vocationalResults.results.forEach(function(b){angular.isObject(a[b.studyYear.code])||(a[b.studyYear.code]={studyYear:b.studyYear,studyYearStartDate:b.studyYearStartDate,kkh:0,credits:0,results:[]}),a[b.studyYear.code].results.push(b)});var b=Object.values(a);b.forEach(function(a){var b=0,c=0,d=0;a.results.forEach(function(a){if(a.grade&&g.isPositive(a.grade.code)){if(g.isDistinctive(a.grade.code)){var e=parseInt(a.grade.value,10);d+=a.credits,c+=a.credits*parseInt(e,10)}b+=a.credits}}),0!==d&&(a.kkh=c/d),a.credits=b}),c.vocationalResultsStudyYear=b.sort(function(a,b){return a.studyYearStartDate<b.studyYearStartDate})}},c.loadModuleThemeResults=function(){angular.isObject(c.vocationalResultsPassing)||(c.vocationalResultsPassing=c.vocationalResults)},c.loadJournalsAndProtocols=function(){e.endpoint("/students/"+c.studentId+"/vocationalConnectedEntities/").query(function(a){c.studentConnectedEntities=a})},c.loadChangeableModules=function(){angular.isArray(c.vocationalResults)||e.endpoint("/students/"+c.student.id+"/vocationalCurriculumModules/").query(function(a){c.vocationalCurriculumModules=a,e.endpoint("/students/"+c.student.id+"/vocationalChangeableModules").query(function(a){j(a)})})},c.saveChangedModules=function(){e.endpoint("/students/"+c.student.id+"/changeVocationalCurriculumModules/").post({modules:c.changeableModules}).$promise.then(function(a){j(a)})},c.displayTeachers=function(a){return angular.isArray(a)?a.map(function(a){return a.nameEt}).sort().join(", "):void 0},c.positiveGrade=function(a){return angular.isNumber(a)&&a>2||angular.isString(a)&&parseInt(a,10)>2},k()}]).controller("StudentViewResultsHigherController",["$q","$route","$scope","Classifier","QueryUtils","StudentUtil","$rootScope",function(a,b,c,d,e,f,g){function h(a){return"KORGMOODUL_V"===a.type}function i(a,b){return h(a)&&!h(b)?1:!h(a)&&h(b)?-1:g.currentLanguageNameField(a).localeCompare(g.currentLanguageNameField(b))}function j(a){a.forEach(function(a){a.oldCurriculumVersionModuleId=a.curriculumVersionModuleId,c.higherCurriculumModules.forEach(function(b){b.id===a.curriculumVersionModuleId&&(a.curriculumVersionModule=b)})}),c.changeableModules=a}var k=b.current.locals.auth;if(c.canChangeStudentModules=c.auth.isAdmin()&&f.isActive(c.student.status)&&-1!==c.auth.authorizedRoles.indexOf("ROLE_OIGUS_M_TEEMAOIGUS_OPPUR"),c.$watch("resultsCurrentNavItem",function(){"student.changeModules"===c.resultsCurrentNavItem&&(f.isActive(c.student.status)?c.loadChangeableModules():c.changeResultsCurrentNavItem("student.curriculumFulfillment"))}),!angular.isDefined(c.higherResults)){var l=k.isStudent()?k.student:b.current.params.id;e.endpoint("/students/"+l+"/higherResults").get().$promise.then(function(a){c.higherResults=a,c.student.higherResults=c.higherResults,c.student.higherResults.modules.sort(i)})}c.hasMandatorySubjects=function(a){return c.higherResults.subjectResults.some(function(b){return b.higherModule.id===a.id&&!b.isOptional})},c.hasOptionalSubjects=function(a){return c.higherResults.subjectResults.some(function(b){return b.higherModule.id===a.id&&b.isOptional})},c.filterSubjectResultsByModule=function(a){return function(b){return a.id===b.higherModule.id}},c.filterSubjectResultsByStudyPeriod=function(a){return function(b){return b.lastGrade&&b.lastGrade.gradeValue&&a.id===b.lastGrade.studyPeriod}},c.loadChangeableModules=function(){e.endpoint("/students/"+c.student.id+"/higherCurriculumModules/").query(function(a){c.higherCurriculumModules=a,e.endpoint("/students/"+c.student.id+"/higherChangeableModules").query(function(a){j(a)})})},c.saveChangedModules=function(){e.endpoint("/students/"+c.student.id+"/changeHigherCurriculumModules/").post({modules:c.changeableModules}).$promise.then(function(a){j(a)})}}]).controller("StudentViewDocumentsController",["$q","$route","$scope","Classifier","QueryUtils","CertificateUtil","CertificateType",function(a,b,c,d,e,f,g){function h(a){c.certificates.totalElements=a.totalElements,c.certificates.content=k.objectmapper(a.content)}c.studentId=b.current.locals.auth.isStudent()?b.current.locals.auth.student:b.current.params.id,c.currentNavItem="student.documents",c.auth=b.current.locals.auth,c.applicationsCriteria={size:5,page:1,order:"submitted",studentId:c.studentId},c.applications={};var i=d.valuemapper({type:"AVALDUS_LIIK",status:"AVALDUS_STAATUS"});c.afterApplicationsLoad=function(a){c.applications.content=i.objectmapper(a.content),c.applications.totalElements=a.totalElements},c.loadApplications=function(){var a=e.getQueryParams(c.applicationsCriteria);c.applications.$promise=e.endpoint("/students/:studentId/applications").search(a,c.afterApplicationsLoad)},c.auth.isStudent()&&(c.applicationTypes=d.queryForDropdown({mainClassCode:"AVALDUS_LIIK"}),c.certificateTypes=d.queryForDropdown({mainClassCode:"TOEND_LIIK",filterValues:[g.TOEND_LIIK_MUU]})),c.directivesCriteria={size:5,page:1,order:"headline",studentId:c.studentId},c.directives={};var j=d.valuemapper({type:"KASKKIRI",status:"KASKKIRI_STAATUS"});c.afterDirectivesLoad=function(a){c.directives.content=j.objectmapper(a.content),c.directives.totalElements=a.totalElements},c.loadDirectives=function(){var a=e.getQueryParams(c.directivesCriteria);c.directives.$promise=e.endpoint("/students/:studentId/directives").search(a,c.afterDirectivesLoad)},c.certificatesCriteria={size:5,page:1,order:"type."+c.currentLanguageNameField(),student:c.studentId},c.certificates={};var k=d.valuemapper({type:"TOEND_LIIK",status:"TOEND_STAATUS"});c.auth.isTeacher()||(c.loadCertificates=function(){var a=e.getQueryParams(c.certificatesCriteria);c.directives.$promise=e.endpoint("/certificate").search(a,h)},c.loadCertificates()),e.endpoint("/students/:studentId/documents").search({studentId:c.studentId},function(b){c.student=b.student,a.all(i.promises).then(function(){c.afterApplicationsLoad(b.applications)}),a.all(j.promises).then(function(){c.afterDirectivesLoad(b.directives)}),c.auth.isStudent()&&(c.applicationTypesApplicable=b.applicationTypesApplicable,c.certificateTypes.$promise.then(function(){var a=f.getForbiddenTypes(b.student.status);
c.certificateTypes=c.certificateTypes.filter(function(b){return-1===a.indexOf(b.code)})}))})}]).controller("StudentViewTimetableController",["$scope","$route","QueryUtils","GeneralTimetableUtils",function(a,b,c,d){a.generalTimetableUtils=new d,a.studentId=b.current.locals.auth.isStudent()?b.current.locals.auth.student:b.current.params.id,a.student=c.endpoint("/students").get({id:a.studentId}),a.typeId=a.studentId,a.currentNavItem="student.timetable",a.auth=b.current.locals.auth,a.schoolId=a.auth.school.id,c.endpoint("/timetables/timetableStudyYearWeeks/"+a.schoolId).query().$promise.then(function(b){a.weeks=b;var c=a.generalTimetableUtils.getCurrentWeekIndex(a.weeks);a.shownWeek=a.weeks[c]})}]).controller("StudentEditController",["$location","$route","$scope","message","QueryUtils",function(a,b,c,d,e){var f=b.current.params.id;c.student=e.endpoint("/students").get({id:f}),c.update=function(){return c.studentEditForm.$setSubmitted(),c.studentEditForm.$valid?void c.student.$update().then(function(){d.updateSuccess(),a.path("/students/"+f+"/main")}):void d.error("main.messages.form-has-errors")}}]).controller("StudentAbsencesController",["$mdDialog","$route","$scope","dialogService","message","QueryUtils",function(a,b,c,d,e,f){c.auth=b.current.locals.auth,c.studentId=b.current.params.id,c.currentNavItem="student.absences",f.createQueryForm(c,"/students/"+c.studentId+"/absences",{order:"validFrom"});var g=c.afterLoadData;c.afterLoadData=function(a){c.tabledata.studentName=a.studentName,c.tabledata.studentGroup=a.studentGroup,c.tabledata.canAddAbsence=a.canAddAbsence,g(a)},c.editAbsence=function(b){var g=f.endpoint("/students/"+c.studentId+"/absences"),h=c.loadData;b=angular.copy(b,{}),b.studentName=c.tabledata.studentName,b.studentGroup=c.tabledata.studentGroup,a.show({controller:["$scope",function(c){c.record=new g(b||{}),c.cancel=a.hide,c.update=function(){function b(){e.info(d),a.hide(),h()}if(c.studentAbsenceForm.$setSubmitted(),!c.studentAbsenceForm.$valid)return void e.error("main.messages.form-has-errors");var d=c.record.id?"main.messages.update.success":"main.messages.create.success";c.record.id?c.record.$update().then(b):c.record.$save().then(b)},c["delete"]=function(){d.confirmDialog({prompt:"student.absence.deleteconfirm"},function(){c.record.$delete().then(function(){e.info("main.messages.delete.success"),a.hide(),h()})})}}],templateUrl:"student/absence.edit.dialog.html",clickOutsideToClose:!1})},c.loadData()}]),angular.module("hitsaOis").config(["$routeProvider","USER_ROLES",function(a,b){var c={authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_OPPUR]};a.when("/students/:id/main",{templateUrl:"student/view.main.html",controller:"StudentViewMainController",controllerAs:"controller",data:c,resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}]}}).when("/students/:id/results",{templateUrl:"student/view.results.html",controller:"StudentViewResultsController",controllerAs:"controller",data:c,resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}]}}).when("/students/:id/documents",{templateUrl:"student/view.documents.html",controller:"StudentViewDocumentsController",controllerAs:"controller",data:c,resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}]}}).when("/students/:id/timetable",{templateUrl:"student/view.timetable.html",controller:"StudentViewTimetableController",controllerAs:"controller",data:c,resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}]}}).when("/students/:id/edit",{templateUrl:"student/edit.main.html",controller:"StudentEditController",controllerAs:"controller",data:c,resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}]}}).when("/students/:id/absences",{templateUrl:"student/view.absences.html",controller:"StudentAbsencesController",controllerAs:"controller",data:c,resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}]}}).when("/students",{templateUrl:"student/list.html",controller:"SimpleListController",controllerAs:"controller",data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_OPPUR]},resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],clMapping:function(){return{studyForm:"OPPEVORM",status:"OPPURSTAATUS"}},params:function(){return{order:"person.lastname,person.firstname"}},url:function(){return"/students"},auth:["AuthResolver",function(a){return a.resolve()}]}}).when("/students/myData",{templateUrl:"student/view.main.html",controller:"StudentViewMainController",controllerAs:"controller",data:c,resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}]}}).when("/students/myResults",{templateUrl:"student/view.results.html",controller:"StudentViewResultsController",controllerAs:"controller",data:c,resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}]}}).when("/students/journals",{templateUrl:"student/student.journal.list.html",controller:"StudentJournalListController",controllerAs:"StudentJournalListController",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}]},data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_OPPUR,b.ROLE_OIGUS_V_TEEMAOIGUS_PAEVIK]}}).when("/students/study",{templateUrl:"student/student.journal.study.html",controller:"StudentJournalStudyController",controllerAs:"StudentJournalStudyController",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}]},data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_OPPUR,b.ROLE_OIGUS_V_TEEMAOIGUS_PAEVIK]}}).when("/students/tasks",{templateUrl:"student/student.journal.tasks.html",controller:"StudentJournalTasksController",controllerAs:"StudentJournalTasksController",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}]},data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_OPPUR,b.ROLE_OIGUS_V_TEEMAOIGUS_PAEVIK]}})}]),angular.module("hitsaOis").constant("VocationalGrade",{KUTSEHINDAMINE_5:"KUTSEHINDAMINE_5",KUTSEHINDAMINE_4:"KUTSEHINDAMINE_4",KUTSEHINDAMINE_3:"KUTSEHINDAMINE_3",KUTSEHINDAMINE_2:"KUTSEHINDAMINE_2",KUTSEHINDAMINE_A:"KUTSEHINDAMINE_A",KUTSEHINDAMINE_MA:"KUTSEHINDAMINE_MA",KUTSEHINDAMINE_X:"KUTSEHINDAMINE_X"}).factory("VocationalGradeUtil",["VocationalGrade","ArrayUtils",function(a,b){var c=[a.KUTSEHINDAMINE_A,a.KUTSEHINDAMINE_3,a.KUTSEHINDAMINE_4,a.KUTSEHINDAMINE_5],d=[a.KUTSEHINDAMINE_2,a.KUTSEHINDAMINE_3,a.KUTSEHINDAMINE_4,a.KUTSEHINDAMINE_5];return{isPositive:function(a){return b.includes(c,a)},isDistinctive:function(a){return b.includes(d,a)}}}]),function(){function a(a,b){for(var c=[],d=1,e=new Date(a),f=new Date(b);f>e;){var g={};g.weekNr=d++,g.start=e,e=new Date(e.getFullYear(),e.getMonth(),e.getDate()+(7-e.getDay())),g.end=e,g.entries=[],c.push(g),e=new Date(e.getFullYear(),e.getMonth(),e.getDate()+1)}return c}function b(b,c,d){for(var e=a(b,c),f=0;f<d.length;f++)for(var g=0;g<e.length;g++){var h=new Date(d[f].date).setHours(0,0,0,0);if(e[g].start.setHours(0,0,0,0)<h&&h<e[g].end.setHours(0,0,0,0)){e[g].entries.push(d[f]);break}}return e}function c(a){for(var b=moment().startOf("isoWeek").toDate(),c=0;c<a.length;c++)if(a[c].start.getTime()===b.getTime())return a[c]}function d(a){for(var b,c=0;c<=a.weeks.length-1;c++)a.weeks[c].weekNr===a.shownWeek.weekNr&&(b=c);a.previousWeekIndex=a.weeks[b-1]?b-1:null,a.nextWeekIndex=a.weeks[b+1]?b+1:null}angular.module("hitsaOis").controller("StudentJournalListController",["$scope","$route","QueryUtils","$mdDialog","Classifier",function(a,b,c,d,e){function f(a){for(var b=0;b<a.length;b++)for(var c=0;c<a[b].journalEntries.length;c++)a[b].journalEntries[c].entryTypeClassifier=e.get(a[b].journalEntries[c].entryType)}function g(a){for(var b=[],c=0;c<a.length;c++)-1===b.indexOf(a[c].yearCode)&&b.push(a[c].yearCode);return b.sort().reverse()}function h(a){for(var b=[],c=0;c<a.length;c++)b.push({yearCode:a[c],journals:[],collapsableOpen:0===c?!0:!1});return b}function i(a){for(var b=g(a),c=h(b),d=0;d<a.length;d++)for(var e=0;e<c.length;e++)a[d].yearCode===c[e].yearCode&&c[e].journals.push(a[d]);return c}a.currentNavItem="journals";var j=b.current.locals.auth.student;c.endpoint("/journals/studentJournals/").query({studentId:j}).$promise.then(function(b){f(b),a.journalsByYears=i(b)});var k=["A","3","4","5"];a.resultIsPostive=function(a){return-1!==k.indexOf(a)};var l=["SISSEKANNE_E","SISSEKANNE_I","SISSEKANNE_H"];a.isTestButNotFinal=function(a){return-1!==l.indexOf(a)},a.showJournal=function(a){d.show({controller:["$scope",function(b){b.journalEntryTypeColors={SISSEKANNE_T:"default-grey-50",SISSEKANNE_E:"default-amber-100",SISSEKANNE_I:"default-lime-100",SISSEKANNE_H:"default-pink-50",SISSEKANNE_L:"default-pink-300",SISSEKANNE_O:"default-light-blue-50"},b.journalEntryTypes={},e.queryForDropdown({mainClassCode:"SISSEKANNE"},function(a){b.journalEntryTypes=e.toMap(a)}),b.getEntryColor=function(a){return b.journalEntryTypeColors[a]},b.journal=a,b.close=d.hide}],templateUrl:"student/student.journal.dialog.html",clickOutsideToClose:!0})}}]).controller("StudentJournalStudyController",["$scope","$route","QueryUtils",function(a,e,f){a.currentNavItem="study";var g=e.current.locals.auth.student;f.endpoint("/journals/studentJournalStudy/").search({studentId:g}).$promise.then(function(e){a.weeks=b(e.studyYearStartDate,e.studyYearEndDate,e.entries),a.shownWeek=c(a.weeks),d(a)}),a.changeWeek=function(b){a.shownWeek=a.weeks[b],d(a)}}]).controller("StudentJournalTasksController",["$scope","$route","QueryUtils",function(a,e,f){a.currentNavItem="tasks";var g=e.current.locals.auth.student;f.endpoint("/journals/studentJournalTasks/").search({studentId:g}).$promise.then(function(e){a.weeks=b(e.studyYearStartDate,e.studyYearEndDate,e.tasks),a.shownWeek=c(a.weeks),d(a)}),a.changeWeek=function(b){a.shownWeek=a.weeks[b],d(a)}}])}(),angular.module("hitsaOis").config(["$routeProvider","USER_ROLES",function(a,b){a.when("/absences",{templateUrl:"studentAbsence/absence.search.html",controller:"StudentAbsenceController",controllerAs:"controller",data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_PUUDUMINE]},resolve:{translationLoaded:["$translate",function(a){return a.onReady()}]}})}]),angular.module("hitsaOis").controller("StudentAbsenceController",["$scope","$route","$timeout","QueryUtils","DataUtils","message",function(a,b,c,d,e,f){d.createQueryForm(a,"/absences",{order:"-sa.inserted",isAccepted:!1}),e.convertStringToDates(a.criteria,["validFrom","validThru"]);var g=a.loadData;a.loadData=function(){a.absencesSearchForm.$setSubmitted(),a.absencesSearchForm.$valid?g():f.error("main.messages.form-has-errors")},a.studyPeriods=d.endpoint("/autocomplete/studyPeriods").query(),a.studyYears=d.endpoint("/autocomplete/studyYears").query(),a.studyYears.$promise.then(function(){var b=e.getCurrentStudyYearOrPeriod(a.studyYears);a.criteria.studyYear=b?b.id:void 0,a.criteria.studyYear?c(a.loadData):0===a.studyYears.length&&f.error("studyYear.missing")});var h=d.endpoint("/absences/accept");a.accept=function(a){new h(a).$update().then(function(b){a.isAccepted=b.isAccepted,a.canAccept=b.canAccept,a.acceptor=b.acceptor,f.info("absence.accepted")})},a.filterByStudyYear=function(a){return function(b){return!a||b.studyYear===a}},a.studyYearChanged=function(){a.criteria.studyPeriod=void 0}}]),angular.module("hitsaOis").controller("StudentGroupSearchController",["$q","$scope","Classifier","Curriculum","QueryUtils","Session",function(a,b,c,d,e,f){function g(){return b.formState.studyForms.length>0?b.formState.allStudyForms.filter(function(a){return-1===b.formState.studyForms.indexOf(a.code)}):void 0}var h="/studentgroups",i=c.valuemapper({studyForm:"OPPEVORM"});e.createQueryForm(b,h,{order:"code"},i.objectmapper);var j=f.school||{},k=j.higher&&!j.vocational;b.formState={allCurriculumVersions:d.queryVersions(),curriculumVersions:[],allStudyForms:c.queryForDropdown({mainClassCode:"OPPEVORM",higher:j.higher||void 0,vocational:j.vocational||void 0}),studyForms:[],curriculumVersionLabel:"studentGroup.curriculumVersionBoth",onlyhigher:k},k?b.formState.curriculumVersionLabel="studentGroup.curriculumVersionHigher":!j.higher&&j.vocational&&(b.formState.curriculumVersionLabel="studentGroup.curriculumVersionVocational"),b.$watch("criteria.curriculum",function(){function a(a){c?(b.formState.curriculumVersions=b.formState.allCurriculumVersions.filter(function(a){return a.curriculum===c}),b.criteria.curriculumVersion=null):b.formState.curriculumVersions=b.formState.allCurriculumVersions,b.formState.studyForms=a.studyForms||[],b.criteria.studyForm=b.formState.studyForm.filter(function(a){return-1!==b.formState.studyForms.indexOf(a)}),b.curriculumVersionChanged()}var c=b.criteria.curriculum?b.criteria.curriculum.id:null;b.formState.studyForm=b.criteria.studyForm||[],c?e.endpoint(h+"/curriculumdata").get({id:c},a):a({studyForms:b.formState.allStudyForms.map(function(a){return a.code})})}),b.curriculumVersionChanged=function(){if(b.criteria.curriculumVersion&&0!==b.criteria.curriculumVersion.length){var a=b.formState.curriculumVersions.reduce(function(a,b){return a[b.id]=b.studyForm,a},{});a=b.criteria.curriculumVersion.map(function(b){return a[b]}),-1!==a.indexOf(null)?b.formState.hiddenStudyForms=g():b.formState.hiddenStudyForms=b.formState.allStudyForms.filter(function(b){return-1===a.indexOf(b.code)})}else b.formState.hiddenStudyForms=g()},a.all(i.promises).then(b.loadData)}]).controller("StudentGroupEditController",["$location","$mdDialog","$q","$route","$scope","dialogService","message","Classifier","Curriculum","QueryUtils","Session",function(a,b,c,d,e,f,g,h,i,j,k){function l(){e.formState.students=q.objectmapper(e.record.members),e.formState.selectedStudents=angular.copy(e.formState.students),e.formState.readonly=e.record.id&&e.formState.students&&e.formState.students.length>0,e.curriculumChanged(),e.record.members.forEach(function(a,b){a.rowno=b+1})}function m(a){e.formState.selectedStudents=e.formState.selectedStudents.concat(a),e.update()}var n=d.current.params.id,o="/studentgroups",p=j.endpoint(o),q=h.valuemapper({studyForm:"OPPEVORM",studyLevel:"OPPEASTE",status:"OPPURSTAATUS"}),r=k.school||{},s=!r.higher&&r.vocational;e.formState={allCurriculumVersions:i.queryVersions(),curriculumVersions:[],languages:[],studyForms:[],specialities:[],selectedStudents:[],order:"rowno",curriculumVersionLabel:"studentGroup.curriculumVersionBoth",onlyvocational:s,isVocational:r.vocational},s?e.formState.curriculumVersionLabel="studentGroup.curriculumVersionVocational":r.higher&&!r.vocational&&(e.formState.curriculumVersionLabel="studentGroup.curriculumVersionHigher"),e.curriculumChanged=function(){var a=e.record.curriculum?e.record.curriculum.id:null;if(e.formState.curriculumId!==a){e.formState.curriculumId=a,e.formState.language=e.record.language,e.formState.studyForm=e.record.studyForm,e.formState.speciality=e.record.speciality,e.formState.curriculumVersion=e.record.curriculumVersion;var b=function(b){e.formState.curriculumVersions=e.formState.allCurriculumVersions.filter(function(b){return b.curriculum===a}),e.formState.languages=b.languages||[],e.formState.studyForms=b.studyForms||[],e.formState.origStudyLevel=b.origStudyLevel,e.formState.specialities=b.specialities||[],e.formState.isVocational=b.isVocational,e.record.language=-1!==e.formState.languages.indexOf(e.formState.language)?e.formState.language:null,e.record.studyForm=-1!==e.formState.studyForms.indexOf(e.formState.studyForm)?e.formState.studyForm:null,e.record.speciality=-1!==e.formState.specialities.indexOf(e.formState.speciality)?e.formState.speciality:null,e.record.curriculumVersion=void 0!==e.formState.curriculumVersions.find(function(a){return a.id===e.formState.curriculumVersion})?e.formState.curriculumVersion:null};a?j.endpoint(o+"/curriculumdata").get({id:a},b):b({})}},e.curriculumVersionChanged=function(){if(e.record.curriculumVersion){var a=e.formState.curriculumVersions.reduce(function(a,b){return a[b.id]=b.studyForm,a},{}),b=a[e.record.curriculumVersion];b&&(e.record.studyForm=b)}},n?e.record=p.get({id:n},l):(e.record=new p,e.formState.readonly=!1),e.update=function(){return e.studentGroupForm.$setSubmitted(),e.studentGroupForm.$valid?(e.record.students=e.formState.selectedStudents.map(function(a){return a.id}),void(e.record.id?e.record.$update().then(l).then(g.updateSuccess)["catch"](angular.noop):e.record.$save().then(function(){g.info("main.messages.create.success"),a.url(o+"/"+e.record.id+"/edit?_noback")})["catch"](angular.noop))):void g.error("main.messages.form-has-errors")},e["delete"]=function(){f.confirmDialog({prompt:"studentGroup.deleteconfirm"},function(){e.record.$delete().then(function(){g.info("main.messages.delete.success"),a.url(o+"?_noback")})["catch"](angular.noop)})},e.addStudents=function(){var a=["id","curriculum","curriculumVersion","language","studyForm"].reduce(function(a,b){return a[b]=e.record[b],a},{}),d=function(b){j.endpoint(o+"/findstudents").query(a,function(a){return 0===a.length?(b.formState.students=void 0,void g.info("studentGroup.nostudentsfound")):void c.all(q.promises).then(function(){var c=q.objectmapper(a);angular.isNumber(e.formState.curriculumVersion)&&(c=c.filter(function(a){return a.curriculumVersion.id===e.formState.curriculumVersion})),c.forEach(function(a,b){a.rowno=b+1}),b.formState.students=c})})};if(e.record.id){var f=e.formState.curriculumVersionLabel;return void b.show({controller:["$scope",function(a){a.formState={selectedStudents:[],curriculumVersionLabel:f,order:"rowno"},a.cancel=b.hide,a.select=function(){m(a.formState.selectedStudents),b.hide()},d(a)}],templateUrl:"studentGroup/student.select.dialog.html",clickOutsideToClose:!1})}return e.studentGroupForm.$setSubmitted(),e.studentGroupForm.$valid?void d(e):void g.info("studentGroup.mandatoryfields")},e.removeStudent=function(a){f.confirmDialog({prompt:"studentGroup.deletestudentconfirm"},function(){function b(b){return b.id!==a}e.formState.students=e.formState.students.filter(b),e.formState.selectedStudents=e.formState.selectedStudents.filter(b)})}}]).controller("StudentGroupViewController",["$route","$scope","$q","Classifier","Curriculum","QueryUtils","Session","USER_ROLES","AuthService",function(a,b,c,d,e,f,g,h,i){b.auth=a.current.locals.auth,b.canEdit=i.isAuthorized(h.ROLE_OIGUS_M_TEEMAOIGUS_OPPERYHM),b.showPersonalData=b.auth.isAdmin()||b.auth.isTeacher();var j=a.current.params.id,k="/studentgroups",l=d.valuemapper({status:"OPPURSTAATUS"}),m=g.school||{},n=!m.higher&&m.vocational;b.formState={curriculumVersionLabel:"studentGroup.curriculumVersionBoth",onlyvocational:n,isVocational:m.vocational,order:"rowno"},n?b.formState.curriculumVersionLabel="studentGroup.curriculumVersionVocational":m.higher&&!m.vocational&&(b.formState.curriculumVersionLabel="studentGroup.curriculumVersionHigher"),b.record=f.endpoint(k).get({id:j},function(a){a&&a.curriculum&&a.curriculum.id&&f.endpoint(k+"/curriculumdata").get({id:a.curriculum.id},function(a){b.formState.origStudyLevel=a.origStudyLevel,b.formState.isVocational=a.isVocational}),a.curriculumVersion&&e.queryVersions().$promise.then(function(c){var d=c.filter(function(b){return b.id===a.curriculumVersion});b.formState.curriculumVersion=d.length>0?d[0]:void 0}),c.all(l.promises).then(l.objectmapper(a.members)),a.members.forEach(function(a,b){a.rowno=b+1})})}]),angular.module("hitsaOis").config(["$routeProvider","USER_ROLES",function(a,b){a.when("/studentgroups",{templateUrl:"studentGroup/student.group.list.html",controller:"StudentGroupSearchController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}]},data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_OPPERYHM]}}).when("/studentgroups/new",{templateUrl:"studentGroup/student.group.edit.html",controller:"StudentGroupEditController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}]},data:{authorizedRoles:[b.ROLE_OIGUS_M_TEEMAOIGUS_OPPERYHM]}}).when("/studentgroups/:id/edit",{templateUrl:"studentGroup/student.group.edit.html",controller:"StudentGroupEditController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}]},data:{authorizedRoles:[b.ROLE_OIGUS_M_TEEMAOIGUS_OPPERYHM]}}).when("/studentgroups/:id/view",{templateUrl:"studentGroup/student.group.view.html",controller:"StudentGroupViewController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}]},data:{authorizedRoles:function(a,c){return"ROLL_T"===a.roleCode||"ROLL_L"===a.roleCode||-1!==c.indexOf(b.ROLE_OIGUS_V_TEEMAOIGUS_OPPERYHM)}}})}]),angular.module("hitsaOis").controller("StudentRepresentativeApplicationSearchController",["$mdDialog","$q","$scope","dialogService","message","Classifier","QueryUtils",function(a,b,c,d,e,f,g){c.formState={status:"AVALDUS_ESINDAJA_STAATUS_E"};var h=f.valuemapper({relation:"OPPURESINDAJA",status:"AVALDUS_ESINDAJA_STAATUS"});g.createQueryForm(c,"/studentrepresentatives/applications",{order:"student.person.lastname,student.person.firstname",status:c.formState.status},h.objectmapper);var i=c.loadData;c.loadData=function(){i(),c.formState.status=c.criteria.status};var j=g.endpoint("/studentrepresentatives/applications/accept");c.accept=function(a){d.confirmDialog({prompt:"student.representative.application.confirm",student:a.studentFullname,representative:a.fullname},function(){j.update({id:a.id,version:a.version}).$promise.then(function(){e.info("student.representative.application.accepted"),i()})["catch"](angular.noop)})},c.decline=function(b){a.show({controller:["$scope",function(c){c.record={id:b.id,version:b.version},c.decline=function(){if(c.studentRepresentativeApplicationDeclineForm.$setSubmitted(),!c.studentRepresentativeApplicationDeclineForm.$valid)return void e.error("main.messages.form-has-errors");var b=c.record;g.endpoint("/studentrepresentatives/applications/decline").update(b).$promise.then(function(){a.hide(),e.info("student.representative.application.declined"),i()})["catch"](angular.noop)},c.cancel=a.hide}],templateUrl:"studentRepresentative/representative.application.decline.dialog.html",clickOutsideToClose:!1})},b.all(h.promises).then(c.loadData)}]).controller("StudentRepresentativeApplicationCreateController",["$location","$scope","message","QueryUtils",function(a,b,c,d){b.record={},b.lookupPerson=function(a){b.record.firstname=a.firstname,b.record.lastname=a.lastname},b.lookupFailure=function(a){a&&412===a.status||c.error("student.representative.studentnotfound"),b.record.firstname=void 0,b.record.lastname=void 0},b.apply=function(){return b.studentRepresentativeApplicationCreateForm.$setSubmitted(),b.studentRepresentativeApplicationCreateForm.$valid?void d.endpoint("/studentrepresentatives/applications").save(b.record).$promise.then(function(){c.info("student.representative.application.applied"),a.url("/?_noback")})["catch"](angular.noop):void c.error("main.messages.form-has-errors")}}]),angular.module("hitsaOis").config(["$routeProvider","USER_ROLES",function(a,b){a.when("/studentrepresentatives/applications",{templateUrl:"studentRepresentative/representative.application.list.html",controller:"StudentRepresentativeApplicationSearchController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}]},data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_ESINDAVALDUS]}}).when("/studentrepresentatives/applications/new",{templateUrl:"studentRepresentative/representative.application.create.html",controller:"StudentRepresentativeApplicationCreateController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}]}})}]),function(){function a(a){return a.isAdmin()||a.isTeacher()}angular.module("hitsaOis").controller("StudyMaterialSubjectStudyPeriodController",["$scope","$route","QueryUtils","ArrayUtils","oisFileService","dialogService","message","Classifier","$q",function(b,c,d,e,f,g,h,i,j){function k(){b.materials=d.endpoint("/studyMaterial/subjectStudyPeriod/"+b.subjectStudyPeriod.id+"/materials").query(),b.materials.$promise.then(function(a){j.all(m.promises).then(function(){m.objectmapper(a)})})}b.auth=c.current.locals.auth,b.canEdit=a(b.auth),b.subjectStudyPeriod=c.current.locals.subjectStudyPeriod,b.teachers=b.subjectStudyPeriod.teachers.map(b.currentLanguageNameField).join(", "),b.getFileUrl=f.getUrl;var l=d.endpoint("/studyMaterial/connect"),m=i.valuemapper({typeCode:"OPPEMATERJAL"});k(),b.deleteConnection=function(a,b){g.confirmDialog({prompt:b>1?"studyMaterial.deleteconfirm":"studyMaterial.deletelastconfirm"},function(){var b=new l(a);b.$delete().then(function(){h.info("main.messages.delete.success"),k()})["catch"](angular.noop)})},b.addExisting=function(){if(!b.existingMaterial)return void h.error("main.messages.form-has-errors");var a=new l;a.studyMaterial=b.existingMaterial.id,a.subjectStudyPeriod=b.subjectStudyPeriod.id,a.$save().then(function(){b.existingMaterial=void 0,k()})}}]).controller("StudyMaterialJournalController",["$scope","$route","QueryUtils","ArrayUtils","oisFileService","dialogService","message","Classifier","$q",function(a,b,c,d,e,f,g,h,i){function j(){a.materials=c.endpoint("/studyMaterial/journal/"+a.journal.id+"/materials").query(),a.materials.$promise.then(function(a){i.all(l.promises).then(function(){l.objectmapper(a)})})}a.auth=b.current.locals.auth,a.journal=b.current.locals.journal,a.teachers=a.journal.teachers.map(a.currentLanguageNameField).join(", "),a.getFileUrl=e.getUrl;var k=c.endpoint("/studyMaterial/connect"),l=h.valuemapper({typeCode:"OPPEMATERJAL"});j(),a.deleteConnection=function(a,b){f.confirmDialog({prompt:b>1?"studyMaterial.deleteconfirm":"studyMaterial.deletelastconfirm"},function(){var b=new k(a);b.$delete().then(function(){g.info("main.messages.delete.success"),j()})["catch"](angular.noop)})},a.addExisting=function(){if(!a.existingMaterial)return void g.error("main.messages.form-has-errors");var b=new k;b.studyMaterial=a.existingMaterial.id,b.journal=a.journal.id,b.$save().then(function(){a.existingMaterial=void 0,j()})}}]).controller("StudyMaterialSubjectStudyPeriodPublicController",["$scope","$route","QueryUtils","oisFileService","dialogService","message","Classifier","$q",function(a,b,c,d,e,f,g,h){function i(){a.materials=c.endpoint("/public/studyMaterial/subjectStudyPeriod/"+a.subjectStudyPeriod.id+"/materials").query(),a.materials.$promise.then(function(a){h.all(j.promises).then(function(){j.objectmapper(a)})})}a.subjectStudyPeriod=b.current.locals.subjectStudyPeriod,a.teachers=a.subjectStudyPeriod.teachers.map(a.currentLanguageNameField).join(", "),a.getFileUrl=d.getUrl;var j=g.valuemapper({typeCode:"OPPEMATERJAL"});i()}]).controller("StudyMaterialJournalPublicController",["$scope","$route","QueryUtils","oisFileService","dialogService","message","Classifier","$q",function(a,b,c,d,e,f,g,h){function i(){a.materials=c.endpoint("/public/studyMaterial/journal/"+a.journal.id+"/materials").query(),a.materials.$promise.then(function(a){h.all(j.promises).then(function(){j.objectmapper(a)})})}a.journal=b.current.locals.journal,a.teachers=a.journal.teachers.map(a.currentLanguageNameField).join(", "),a.getFileUrl=d.getUrl;var j=g.valuemapper({typeCode:"OPPEMATERJAL"});i()}])}(),angular.module("hitsaOis").controller("StudyMaterialHigherListController",["$scope","$route","$timeout","QueryUtils","message","USER_ROLES","AuthService","DataUtils",function(a,b,c,d,e,f,g,h){a.canEdit=g.isAuthorized(f.ROLE_OIGUS_M_TEEMAOIGUS_OPPEMATERJAL),a.auth=b.current.locals.auth,d.createQueryForm(a,"/studyMaterial/subjectStudyPeriods",{order:"subject_name_et"});var i=a.loadData;a.loadData=function(){a.searchForm.$setSubmitted(),a.searchForm.$valid?i():e.error("main.messages.form-has-errors")},a.studyPeriods=d.endpoint("/autocomplete/studyPeriods").query(),a.studyPeriods.$promise.then(function(){if(a.studyPeriods.length>0&&!a.criteria.studyPeriod){var b=h.getCurrentStudyYearOrPeriod(a.studyPeriods);a.criteria.studyPeriod=b?b.id:void 0}c(a.loadData)}),a.$watch("teacher",function(b){a.criteria.teacher=b?b.id:null})}]).controller("StudyMaterialVocationalListController",["$scope","$route","$timeout","QueryUtils","message","USER_ROLES","AuthService","DataUtils",function(a,b,c,d,e,f,g,h){a.canEdit=g.isAuthorized(f.ROLE_OIGUS_M_TEEMAOIGUS_OPPEMATERJAL),a.auth=b.current.locals.auth,d.createQueryForm(a,"/studyMaterial/journals",{order:"journal_name"});var i=a.loadData;a.loadData=function(){a.searchForm.$setSubmitted(),a.searchForm.$valid?i():e.error("main.messages.form-has-errors")},a.studyYears=d.endpoint("/autocomplete/studyYears").query(),a.studyYears.$promise.then(function(){if(a.studyYears.length>0&&!a.criteria.studyYear){var b=h.getCurrentStudyYearOrPeriod(a.studyYears);a.criteria.studyYear=b?b.id:void 0}c(a.loadData)}),a.$watch("teacher",function(b){a.criteria.teacher=b?b.id:null})}]),function(){angular.module("hitsaOis").controller("StudyMaterialHigherEditController",["$scope","$route","QueryUtils","oisFileService","dialogService","message",function(a,b,c,d,e,f){a.auth=b.current.locals.auth,a.subjectStudyPeriod=b.current.locals.subjectStudyPeriod,a.backPath="/#/studyMaterial/higher/"+a.subjectStudyPeriod.id+"/edit";var g=b.current.params.materialId,h=c.endpoint("/studyMaterial");g?(a.material=h.get({id:g}),a.material.$promise.then(function(b){a.teacher=b.teacher})):a.material=new h({isVisibleToStudents:!1,isPublic:!1}),a.$watch("teacher",function(b){a.material.teacher=b?b.id:null}),a.$watch("material.typeCode",function(b){a.material.url="OPPEMATERJAL_L"===b?"http://":null}),a.$watch("material.isPublic",function(b){b===!0&&(a.material.isVisibleToStudents=!0)}),a["delete"]=function(){e.confirmDialog({prompt:"apel.deleteConfirm"},function(){a.material.$delete().then(function(){f.info("main.messages.delete.success"),a.back(a.backPath)})["catch"](angular.noop)})},a.save=function(){function b(){a.material.id?a.material.$update().then(c)["catch"](angular.noop):a.material.$save().then(c)["catch"](angular.noop)}function c(){f.info(g?"main.messages.update.success":"main.messages.create.success"),a.back(a.backPath)}if(a.material.subjectStudyPeriod=a.subjectStudyPeriod.id,a.material.isVocational=!1,a.studyMaterialForm.$setSubmitted(),!a.studyMaterialForm.$valid)return void f.error("main.messages.form-has-errors");if("OPPEMATERJAL_F"!==a.material.typeCode||a.material.id)b();else{if(1!==a.files.length)return void f.error("main.messages.form-has-errors");d.getFromLfFile(a.files[0],function(c){a.material.oisFile=c,b()})}}}]).controller("StudyMaterialVocationalEditController",["$scope","$route","QueryUtils","oisFileService","dialogService","message",function(a,b,c,d,e,f){a.auth=b.current.locals.auth,a.journal=b.current.locals.journal,a.backPath="/#/studyMaterial/vocational/"+a.journal.id+"/edit";var g=b.current.params.materialId,h=c.endpoint("/studyMaterial");g?(a.material=h.get({id:g}),a.material.$promise.then(function(b){a.teacher=b.teacher})):a.material=new h({isVisibleToStudents:!1,isPublic:!1}),a.$watch("teacher",function(b){a.material.teacher=b?b.id:null}),a.$watch("material.typeCode",function(b){a.material.url="OPPEMATERJAL_L"===b?"http://":null}),a.$watch("material.isPublic",function(b){b===!0&&(a.material.isVisibleToStudents=!0)}),a["delete"]=function(){e.confirmDialog({prompt:"apel.deleteConfirm"},function(){a.material.$delete().then(function(){f.info("main.messages.delete.success"),a.back(a.backPath)})["catch"](angular.noop)});
},a.save=function(){function b(){a.material.id?a.material.$update().then(c)["catch"](angular.noop):a.material.$save().then(c)["catch"](angular.noop)}function c(){f.info(g?"main.messages.update.success":"main.messages.create.success"),a.back(a.backPath)}if(a.material.journal=a.journal.id,a.material.isVocational=!0,a.studyMaterialForm.$setSubmitted(),!a.studyMaterialForm.$valid)return void f.error("main.messages.form-has-errors");if("OPPEMATERJAL_F"!==a.material.typeCode||a.material.id)b();else{if(1!==a.files.length)return void f.error("main.messages.form-has-errors");d.getFromLfFile(a.files[0],function(c){a.material.oisFile=c,b()})}}}])}(),angular.module("hitsaOis").config(["$routeProvider","USER_ROLES",function(a,b){a.when("/studyMaterial/higher",{templateUrl:"studyMaterial/study.material.higher.list.html",controller:"StudyMaterialHigherListController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}]},data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_OPPEMATERJAL]}}).when("/studyMaterial/vocational",{templateUrl:"studyMaterial/study.material.vocational.list.html",controller:"StudyMaterialVocationalListController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}]},data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_OPPEMATERJAL]}}).when("/studyMaterial/higher/:subjectStudyPeriodId/edit",{templateUrl:"studyMaterial/study.material.subjectStudyPeriod.edit.html",controller:"StudyMaterialSubjectStudyPeriodController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}],subjectStudyPeriod:["QueryUtils","$route",function(a,b){return a.endpoint("/studyMaterial/subjectStudyPeriod/"+b.current.params.subjectStudyPeriodId).get().$promise}]},data:{authorizedRoles:[b.ROLE_OIGUS_M_TEEMAOIGUS_OPPEMATERJAL]}}).when("/studyMaterial/vocational/:journalId/edit",{templateUrl:"studyMaterial/study.material.journal.edit.html",controller:"StudyMaterialJournalController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}],journal:["QueryUtils","$route",function(a,b){return a.endpoint("/studyMaterial/journal/"+b.current.params.journalId).get().$promise}]},data:{authorizedRoles:[b.ROLE_OIGUS_M_TEEMAOIGUS_OPPEMATERJAL]}}).when("/studyMaterial/higher/:subjectStudyPeriodId/new",{templateUrl:"studyMaterial/study.material.higher.edit.html",controller:"StudyMaterialHigherEditController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}],subjectStudyPeriod:["QueryUtils","$route",function(a,b){return a.endpoint("/studyMaterial/subjectStudyPeriod/"+b.current.params.subjectStudyPeriodId).get().$promise}]},data:{authorizedRoles:[b.ROLE_OIGUS_M_TEEMAOIGUS_OPPEMATERJAL]}}).when("/studyMaterial/vocational/:journalId/new",{templateUrl:"studyMaterial/study.material.vocational.edit.html",controller:"StudyMaterialVocationalEditController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}],journal:["QueryUtils","$route",function(a,b){return a.endpoint("/studyMaterial/journal/"+b.current.params.journalId).get().$promise}]},data:{authorizedRoles:[b.ROLE_OIGUS_M_TEEMAOIGUS_OPPEMATERJAL]}}).when("/studyMaterial/higher/:subjectStudyPeriodId/edit/:materialId",{templateUrl:"studyMaterial/study.material.higher.edit.html",controller:"StudyMaterialHigherEditController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}],subjectStudyPeriod:["QueryUtils","$route",function(a,b){return a.endpoint("/studyMaterial/subjectStudyPeriod/"+b.current.params.subjectStudyPeriodId).get().$promise}]},data:{authorizedRoles:[b.ROLE_OIGUS_M_TEEMAOIGUS_OPPEMATERJAL]}}).when("/studyMaterial/vocational/:journalId/edit/:materialId",{templateUrl:"studyMaterial/study.material.vocational.edit.html",controller:"StudyMaterialVocationalEditController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}],journal:["QueryUtils","$route",function(a,b){return a.endpoint("/studyMaterial/journal/"+b.current.params.journalId).get().$promise}]},data:{authorizedRoles:[b.ROLE_OIGUS_M_TEEMAOIGUS_OPPEMATERJAL]}}).when("/studyMaterial/higher/:subjectStudyPeriodId/view",{templateUrl:"studyMaterial/study.material.subjectStudyPeriod.view.html",controller:"StudyMaterialSubjectStudyPeriodController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}],subjectStudyPeriod:["QueryUtils","$route",function(a,b){return a.endpoint("/studyMaterial/subjectStudyPeriod/"+b.current.params.subjectStudyPeriodId).get().$promise}]}}).when("/studyMaterial/vocational/:journalId/view",{templateUrl:"studyMaterial/study.material.journal.view.html",controller:"StudyMaterialJournalController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}],journal:["QueryUtils","$route",function(a,b){return a.endpoint("/studyMaterial/journal/"+b.current.params.journalId).get().$promise}]}}).when("/studyMaterial/:schoolId/higher/:subjectStudyPeriodId/view",{templateUrl:"studyMaterial/study.material.subjectStudyPeriod.view.html",controller:"StudyMaterialSubjectStudyPeriodPublicController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],subjectStudyPeriod:["QueryUtils","$route",function(a,b){return a.endpoint("/public/studyMaterial/subjectStudyPeriod/"+b.current.params.subjectStudyPeriodId).get().$promise}]}}).when("/studyMaterial/:schoolId/vocational/:journalId/view",{templateUrl:"studyMaterial/study.material.journal.view.html",controller:"StudyMaterialJournalPublicController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],journal:["QueryUtils","$route",function(a,b){return a.endpoint("/public/studyMaterial/journal/"+b.current.params.journalId).get().$promise}]}})}]),angular.module("hitsaOis").controller("studyYearScheduleController",["$scope","QueryUtils","ArrayUtils","message","DataUtils","$mdDialog","dialogService","USER_ROLES","AuthService",function(a,b,c,d,e,f,g,h,i){function j(){a.criteria.studyYear=e.getCurrentStudyYearOrPeriod(a.studyYears),e.sortStudyYearsOrPeriods(a.criteria.studyYear.studyPeriods)}function k(){a.record=b.endpoint("/studyYearSchedule").search(a.criteria),a.record.$promise.then(function(b){a.studyYearSchedules=b.studyYearSchedules})}function l(){function b(b,c){var d=c.studyPeriodId===a.criteria.studyYear.studyPeriods[i].id?1:0;return b+d}for(var c=[],d=1,e=new Date(a.criteria.studyYear.startDate),f=a.criteria.studyYear.endDate;f>e;){var g={};g.start=e,e=new Date(e.getFullYear(),e.getMonth(),e.getDate()+(7-e.getDay())),g.end=e,g.weekNr=d++;var h=m(g);g.studyPeriodId=h?h.id:null,c.push(g),e=new Date(e.getFullYear(),e.getMonth(),e.getDate()+1)}a.weeks=c;for(var i=0;i<a.criteria.studyYear.studyPeriods.length;i++){var j=a.weeks.reduce(b,0);a.criteria.studyYear.studyPeriods[i].weeks=j}}function m(b){return e.getStudyYearOrPeriodAt(b.start,a.criteria.studyYear.studyPeriods)}function n(b){if(!b.studyYearScheduleLegend)return 1;for(var c=0,d=b.studyYearScheduleLegend;b.studyYearScheduleLegend===d;)c++,b=a.getSchedule(b.studentGroup,b.weekNr+1);return c}function o(a,b){return a.studyYearScheduleLegend===b.studyYearScheduleLegend&&a.studentGroup===b.studentGroup&&a.weekNr===b.weekNr&&a.addInfo===b.addInfo}a.canEdit=i.isAuthorized(h.ROLE_OIGUS_M_TEEMAOIGUS_OPPETOOGRAAFIK),a.criteria={schoolDepartments:[],studyYear:null,studyPeriods:[],studentGroups:[]},a.weeks=[],a.studyYearSchedules=[],b.endpoint("/autocomplete/schooldepartments").query().$promise.then(function(b){a.schoolDepartments=b,c.isEmpty(a.criteria.schoolDepartments)&&(a.criteria.schoolDepartments=a.schoolDepartments.map(function(a){return a.id}))}),a.legends=b.endpoint("/school/studyYearScheduleLegends").search(),a.legends.$promise.then(function(b){a.legends=b.legends}),a.studentGroups=b.endpoint("/studyYearSchedule/studentGroups").query(),a.studyYears=b.endpoint("/studyYearSchedule/studyYears").query(j),a.$watch("criteria.studyYear",function(){a.criteria.studyYear&&(a.criteria.studyPeriods=a.criteria.studyYear.studyPeriods.map(function(a){return a.id}),k(),l())}),a.$watch("criteria.schoolDepartments",function(){c.isEmpty(a.studentGroups)||(a.criteria.studentGroups=a.studentGroups.filter(function(b){return c.intersect(b.schoolDepartments,a.criteria.schoolDepartments)}).map(function(a){return a.id}),k())}),a.filterSchoolDepartments=function(b){return!c.isEmpty(a.criteria.schoolDepartments)&&c.includes(a.criteria.schoolDepartments,b.id)},a.filterStudentGroups=function(a){return function(b){return c.includes(b.schoolDepartments,a.id)}},a.getLegendById=function(b){return angular.isArray(a.legends)?a.legends.find(function(a){return a.id===b}):void 0},a.getWeeksPeriod=function(b){return a.weeks.find(function(a){return a.weekNr===b}).studyPeriodId},a.openAddScheduleDialog=function(b,d,e){if(d.studyPeriodId&&a.canEdit){var f=function(c){c.hasValue=e.studyYearScheduleLegend?!0:!1,c.studentGroup=b,c.week=d,c.legends=a.legends,c.data={weeks:n(e),legend:e.studyYearScheduleLegend,addInfo:e.addInfo},c.translationData={weeks:a.weeks.length-d.weekNr+1}};g.showDialog("studyYearSchedule/study.year.schedule.add.dialog.html",f,function(e){if(e.data.legend)for(var f=0;f<e.data.weeks&&!(d.weekNr+f>a.weeks.length);f++){var g=a.getSchedule(b.id,d.weekNr+f),h={studyYearScheduleLegend:e.data.legend,weekNr:d.weekNr+f,studentGroup:b.id,studyPeriod:0===f?d.studyPeriodId:a.getWeeksPeriod(d.weekNr+f),addInfo:e.data.addInfo};o(g,h)||(c.includes(a.studyYearSchedules,g)&&c.remove(a.studyYearSchedules,g),a.studyYearSchedules.push(h))}else for(var i=0;i<e.data.weeks;i++){var j=a.getSchedule(b.id,d.weekNr+i);c.includes(a.studyYearSchedules,j)&&c.remove(a.studyYearSchedules,j)}})}},a.getSchedule=function(b,c){var d=a.studyYearSchedules.find(function(a){return a.weekNr===c&&a.studentGroup===b});return d||(d={studyYearScheduleLegend:null,studentGroup:b,weekNr:c,addInfo:""}),d},a.save=function(){a.record.studyYearSchedules=a.studyYearSchedules,a.record.$put().then(function(b){d.updateSuccess(),a.studyYearSchedules=b.studyYearSchedules})},a.$watch("criteria.studyYear",function(){a.criteria.studyYear?a.isPastStudyYear=e.isPastStudyYearOrPeriod(a.criteria.studyYear):a.isPastStudyYear=!0})}]),angular.module("hitsaOis").config(["$routeProvider","USER_ROLES",function(a,b){a.when("/studyYearScheduleLegend",{templateUrl:"studyYearSchedule/study.year.schedule.legend.html",controller:"studyYearScheduleLegendController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}]},data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_OPPETOOGRAAFIK]}}).when("/studyYearSchedule",{templateUrl:"studyYearSchedule/study.year.schedule.html",controller:"studyYearScheduleController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}]},data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_OPPETOOGRAAFIK]}})}]),angular.module("hitsaOis").controller("studyYearScheduleLegendController",["$scope","QueryUtils","ArrayUtils","message","dialogService","USER_ROLES","AuthService",function(a,b,c,d,e,f,g){function h(){return a.legends.filter(function(a){return!a.code}).length>0}function i(){return a.legends.filter(function(a){return a.code&&a.code.length>2}).length>0}function j(){return a.legends.filter(function(a){return!a.nameEt}).length>0}function k(){return a.legends.filter(function(a){return a.nameEt&&a.nameEt.length>50||a.nameEn&&a.nameEn.length>50}).length>0}a.removedInUseLegend=!1,a.canEdit=g.isAuthorized(f.ROLE_OIGUS_M_TEEMAOIGUS_OPPETOOGRAAFIK);var l=[{code:"E",nameEt:"Eksam",color:"#FF0000"},{code:"Pr",nameEt:"Praktika ettevõtes",color:"#790FFC"},{code:"P",nameEt:"Praktika koolis",color:"#1FF47C"},{code:"V",nameEt:"Vaheaeg",color:"#E6E6E6"},{code:"X",nameEt:"ei osale õppetöös",color:"#8C8C8C"}];a.newLegend={},a.record=b.endpoint("/school/studyYearScheduleLegends").search(function(b){b&&b.legends&&0!==b.legends.length?(a.legends=b.legends,a.defaultLegends=!1):(a.legends=l,a.defaultLegends=!0)}),a.remove=function(b){b.inUse&&(a.removedInUseLegend=!0),c.remove(a.legends,b),a.legends.forEach(function(a){a.edited=!1})},a.save=function(){a.formSubmitted=!0,a.legends.forEach(function(a){a.edited=!1}),a.record.legends=a.legends,a.record.$put().then(function(b){d.updateSuccess(),a.legends=b.legends,angular.isArray(b.legends)&&b.legends.length>0?a.defaultLegends=!1:a.defaultLegends=!0,a.removedInUseLegend=!1})},a.checkErrorsAndSave=function(){return h()?(d.error("studyYearScheduleLegend.error.codeRequired"),!0):i()?(d.error("studyYearScheduleLegend.error.codeLength"),!0):j()?(d.error("studyYearScheduleLegend.error.nameEtRequired"),!0):k()?(d.error("studyYearScheduleLegend.error.nameLength"),!0):void(a.removedInUseLegend?e.confirmDialog({prompt:"studyYearScheduleLegend.error.inUseLegendRemove",accept:"main.yes",cancel:"main.no"},function(){a.save()}):a.save())},a.codeIsValid=function(a){return a.code&&a.code.length<=2},a.nameEtIsValid=function(a){return a.nameEt&&a.nameEt.length<=50},a.nameEnIsValid=function(a){return!a.nameEn||a.nameEn.length<=50},a.changeEditable=function(b){a.canEdit&&(a.legends.forEach(function(a){a.edited=!1}),b.edited=!0)},a.addRow=function(){var b={color:"#FFFFFF"};a.legends.push(b),a.legends.forEach(function(a){a.edited=!1}),b.edited=!0}}]),angular.module("hitsaOis").controller("SubjectEditController",["$scope","$rootScope","$route","$location","$translate","$q","dialogService","message","QueryUtils",function(a,b,c,d,e,f,g,h,i){function j(a){h.error(a)}function k(){a.subjectForm.$setSubmitted();var b=[],c=r(b,a.subject.mandatoryPrerequisiteSubjects)||r(b,a.subject.recommendedPrerequisiteSubjects)||r(b,a.subject.substituteSubjects);return a.subjectForm.$valid&&!c?!0:(h.error("main.messages.form-has-errors"),!1)}function l(b,c){k()&&g.confirmDialog({prompt:c.prompt},function(){new b(a.subject).$update().then(function(b){a.subject=new o(b),h.info(c.success),a.subjectForm.$setPristine()})})}var m=c.current.params.id,n=c.current.params.backUrl;a.formState={backUrl:n?"#/"+n:"#/subject"},a.subjectCodeUniqueQuery={id:m,url:"/subject/unique/code"},i.endpoint("/subject/initEditFormData").search(function(b){angular.extend(a,b.toJSON())});var o=i.endpoint("/subject"),p=i.endpoint("/subject/saveAndConfirm"),q=i.endpoint("/subject/saveAndUnconfirm");m?a.subject=o.get({id:m}):a.subject=new o({status:"AINESTAATUS_S"});var r=function(a,c){for(var d=!1,f=0;f<c.length;f++)a.indexOf(c[f].id)>-1&&(e("subject.alreadyConnected",{subject:b.currentLanguageNameField(c[f])}).then(j),d=!0),a.push(c[f].id);return d};a.update=function(){k()&&(a.subject.id?a.subject.$update().then(function(b){a.subject=new o(b),h.updateSuccess(),a.subjectForm.$setPristine()}):a.subject.$save().then(function(a){d.url("/subject/"+a.id+"/edit?_noback"),h.info("main.messages.create.success")}))},a.saveAndConfirm=function(){var a={prompt:"subject.prompt.saveAndConfirm",success:"subject.message.savedAndConfirmed"};l(p,a)},a.saveAndUnconfirm=function(){var a={prompt:"subject.prompt.saveAndUnconfirm",success:"subject.message.savedAndUnconfirmed"};l(q,a)},a["delete"]=function(){g.confirmDialog({prompt:"subject.deleteconfirm"},function(){a.subject.$delete().then(function(){h.info("main.messages.delete.success"),d.url("/subject?_noback")})})}}]).controller("SubjectViewController",["$scope","$route","config","QueryUtils",function(a,b,c,d){var e=b.current.params.id,f=b.current.params.backUrl;a.formState={backUrl:f?"#/"+f:"#/subject"},a.subject=d.endpoint("/subject").get({id:e}),a.publicUrl=c.apiUrl+"/public/subject/"+e+"?format=json"}]).controller("SubjectListController",["$q","$scope","Classifier","QueryUtils",function(a,b,c,d){var e=c.valuemapper({status:"AINESTAATUS",assessment:"HINDAMISVIIS",languages:"OPPEKEEL"});d.createQueryForm(b,"/subject",{order:"en"===b.currentLanguage()?"nameEn":"nameEt"},e.objectmapper),d.endpoint("/subject/initSearchFormData").search(function(a){angular.extend(b,a.toJSON())}),a.all(e.promises).then(b.loadData),b.subjectLanguages=function(a){return a.map(b.currentLanguageNameField).join(", ")},b.formState={},d.endpoint("/subject/getPermissions").search(function(a){b.formState.canCreate=a.canCreate,b.formState.canViewAll=a.canViewAll})}]),angular.module("hitsaOis").config(["$routeProvider","USER_ROLES",function(a,b){function c(a,b,c,d,e){d.resolve().then(function(d){d.isAdmin()&&c.includes(d.authorizedRoles,e.ROLE_OIGUS_M_TEEMAOIGUS_AINE)||(a.error("main.messages.error.nopermission"),b.path(""))})}c.$inject=["message","$location","ArrayUtils","AuthResolver","USER_ROLES"],a.when("/subject",{templateUrl:"subject/subject.list.html",controller:"SubjectListController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}]},data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_AINE]}}).when("/subject/new",{templateUrl:"subject/subject.edit.html",controller:"SubjectEditController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],checkAccess:c},data:{authorizedRoles:[b.ROLE_OIGUS_M_TEEMAOIGUS_AINE]}}).when("/subject/:id/edit",{templateUrl:"subject/subject.edit.html",controller:"SubjectEditController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],checkAccess:c},data:{authorizedRoles:[b.ROLE_OIGUS_M_TEEMAOIGUS_AINE]}}).when("/subject/:id",{templateUrl:"subject/subject.view.html",controller:"SubjectViewController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}]},data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_AINE]}})}]),angular.module("hitsaOis").controller("SubjectStudyPeriodSearchController",["$scope","QueryUtils","DataUtils","$route","ArrayUtils",function(a,b,c,d,e){function f(){!a.criteria||e.isEmpty(a.studyPeriods)||a.criteria.studyPeriods||(a.criteria.studyPeriods=c.getCurrentStudyYearOrPeriod(a.studyPeriods).id)}b.createQueryForm(a,"/subjectStudyPeriods",{order:"s."+a.currentLanguageNameField()}),a.auth=d.current.locals.auth,b.endpoint("/autocomplete/studyPeriods").query().$promise.then(function(b){a.studyPeriods=b,f(),a.loadData()}),a.$watch("criteria.studyPeriods",function(){f()}),a.$watch("criteria.studentObject",function(){a.criteria&&(a.criteria.student=a.criteria.studentObject?a.criteria.studentObject.id:null)}),a.showTeachers=function(a,b){var c="";if(a.teachers){c=a.teachers.join("; ");var d=30;!b&&c.length>d&&(c=c.substring(0,d)+"...")}return c}}]).controller("SubjectStudyPeriodEditController",["$scope","QueryUtils","ArrayUtils","$route","dialogService","message","$q","$rootScope","DeclarationType",function(a,b,c,d,e,f,g,h,i){function j(b){return a.record.teachers.filter(function(a){return a.teacherId===b.id}).length>0}function k(){return i.DEKLARATSIOON_KOIK===a.record.declarationType||i.DEKLARATSIOON_LISA===a.record.declarationType}function l(){return a.subjectStudyPeriodEditForm.$setSubmitted(),a.subjectStudyPeriodEditForm.$valid?a.record.teachers&&0!==a.record.teachers.length?!0:(f.error("subjectStudyPeriod.error.teacherNotAdded"),!1):(f.error("main.messages.form-has-errors"),!1)}function m(){v&&a.record.studentGroups.push(v),1===a.record.teachers.length&&(a.record.teachers[0].isSignatory=!0)}function n(a){return-1!==a.indexOf("new")}function o(){v&&u?h.replaceLastUrl("#/subjectStudyPeriods/studentGroups/"+v+"/"+u+"/edit",n):x&&u?h.replaceLastUrl("#/subjectStudyPeriods/teachers/"+x+"/"+u+"/edit",n):w&&u&&!v&&!x&&h.replaceLastUrl("#/subjectStudyPeriods/subjects/"+w+"/"+u+"/edit",n)}function p(){f.updateSuccess(),o(),a.subjectStudyPeriodEditForm.$setPristine()}function q(){l()&&(m(),a.record.id?a.record.$update().then(function(){f.updateSuccess(),a.subjectStudyPeriodEditForm.$setPristine()}):a.record.$save().then(p))}var r="/subjectStudyPeriods",s=b.endpoint(r),t=d.current.params.id,u=d.current.params.studyPeriodId?parseInt(d.current.params.studyPeriodId,10):null,v=d.current.params.studentGroupId?parseInt(d.current.params.studentGroupId,10):null,w=d.current.params.subjectId?parseInt(d.current.params.subjectId,10):null,x=d.current.params.teacherId?parseInt(d.current.params.teacherId,10):null;if(a.hasObligatoryStudentGroup=null!==v,a.obligatoryTeacher=x,b.endpoint("/subjectStudyPeriods/studentGroups/list").query(function(b){a.studentGroups=b.filter(function(a){return v?a.id!==v:!0}).map(function(a){var b=a;return b.nameEt=a.code,b.nameEn=a.code,b})}),h.removeLastUrlFromHistory(function(a){return a&&-1!==a.indexOf("subjectStudyPeriod/"+t+"/view")}),v&&(a.studentGroup=b.endpoint("/studentgroups").get({id:v})),t)s.get({id:t}).$promise.then(function(b){a.record=b,v&&c.remove(a.record.studentGroups,v),a.record.groupProportion||(a.record.groupProportion="PAEVIK_GRUPI_JAOTUS_1"),a.disableSubject=!0});else{var y={groupProportion:"PAEVIK_GRUPI_JAOTUS_1",studyPeriod:u,subject:w,teachers:[],studentGroups:[]};a.record=new s(y),a.disableSubject=null!==w,x&&b.endpoint("/subjectStudyPeriods/teacher").get({id:x}).$promise.then(function(b){a.record.teachers.push({teacherId:b.id,name:b.nameEt})})}a.studyPeriods=b.endpoint("/autocomplete/studyPeriods").query(),a.subjects=b.endpoint("/subjectStudyPeriods/subjects/list").query(),a.addTeacher=function(b){b&&!j(b)?a.record.teachers.push({teacherId:b.id,name:b.nameEt,isSignatory:!1}):b&&j(b)&&f.error("subjectStudyPeriodTeacher.teacherAlreadyAdded"),a.teacher=void 0},a.querySearch=function(a){var c=b.endpoint("/subjectStudyPeriods/teachers/page"),d=g.defer();return c.search({name:a},function(a){d.resolve(a.content)}),d.promise},a.removeTeacher=function(b){c.remove(a.record.teachers,b)},a.save=function(){k()?e.confirmDialog({prompt:"subjectStudyPeriod.prompt.addedAutomaticallyToDeclarations"},q):q()},a["delete"]=function(){e.confirmDialog({prompt:"subjectStudyPeriodTeacher.deleteconfirm"},function(){a.record.$delete().then(function(){f.info("main.messages.delete.success"),h.back("#"+r)})})}}]).controller("SubjectStudyPeriodViewController",["$scope","QueryUtils","$route",function(a,b,c){var d=b.endpoint("/subjectStudyPeriods"),e=c.current.params.id;a.record=d.get({id:e}),a.studyPeriods=b.endpoint("/autocomplete/studyPeriods").query(),b.endpoint("/subjectStudyPeriods/studentGroups/list").query(function(b){a.studentGroups=b.map(function(a){var b=a;return b.nameEt=a.code,b.nameEn=a.code,b})}),a.subjects=b.endpoint("/subjectStudyPeriods/subjects/list").query()}]).constant("DeclarationType",{DEKLARATSIOON_EI:"DEKLARATSIOON_EI",DEKLARATSIOON_KOIK:"DEKLARATSIOON_KOIK",DEKLARATSIOON_LISA:"DEKLARATSIOON_LISA"}),angular.module("hitsaOis").factory("SspCapacities",[function(){var a=function(a){function b(){return a&&a.subjectStudyPeriodDtos?a.subjectStudyPeriodDtos:[]}function c(a,b){var c=b&&b.hours?b.hours:0;return a+=c}function d(a){for(var b=0,c=0;c<a.length;c++)b+=g.capacitiesSumBySsp(a[c]);return b}function e(a){return function(b){return b.capacityType===a}}function f(a,b){for(var d=0,f=0;f<b.length;f++)d+=b[f].capacities.filter(e(a)).reduce(c,0);return d}var g=this;this.addEmptyCapacities=function(b){for(var c=0;c<b.length;c++)for(var d=a.subjectStudyPeriodDtos,e=0;e<d.length;e++)this.getCapacity(d[e],b[c].code)},this.getSubjectsCapacityByType=function(b,c){if(!a||!a.subjectStudyPeriodPlans)return 0;var d=a.subjectStudyPeriodPlans.find(function(a){return a.subject===b});if(!d)return 0;var e=d.capacities.find(function(a){return a.capacityType===c});return e&&e.hours?e.hours:0},this.getSubjectsTotalCapacity=function(b,c){if(!a||!a.subjectStudyPeriodPlans||!c)return 0;for(var d=0,e=0;e<c.length;e++)d+=g.getSubjectsCapacityByType(b,c[e].code);return d},this.capacitiesSumBySsp=function(a){return a.capacities.reduce(c,0)},this.capacitiesSumOverall=function(){if(!a||!a.subjectStudyPeriodDtos)return 0;var b=a.subjectStudyPeriodDtos;return d(b)},this.getCapacitiesBySubject=function(a){return b().filter(function(b){return b.subject===a})},this.capacitiesSumBySubjectAndType=function(b,c){if(!a||!a.subjectStudyPeriodDtos)return 0;var d=g.getCapacitiesBySubject(b);return f(c,d)},this.capacitiesSumByType=function(b){if(!a||!a.subjectStudyPeriodDtos)return 0;var c=a.subjectStudyPeriodDtos;return f(b,c)},this.capacitiesSumBySubject=function(b){if(!a||!a.subjectStudyPeriodDtos)return 0;var c=g.getCapacitiesBySubject(b);return d(c)},this.getCapacity=function(a,b){var c=a.capacities.find(function(a){return a.capacityType===b});return c||(c={capacityType:b},a.capacities.push(c)),c},this.filterEmptyCapacities=function(){for(var a=b(),c=0;c<a.length;c++)a[c].capacities=a[c].capacities.filter(function(a){return void 0!==a.hours&&null!==a.hours&&""!==a.hours})},this.teachersLoadOk=function(a){return a.teachers.reduce(function(a,b){return a+=b.scheduleLoad},0)>=g.capacitiesSumBySsp(a)}};return a}]),angular.module("hitsaOis").config(["$routeProvider","USER_ROLES",function(a,b){a.when("/subjectStudyPeriods",{templateUrl:"subjectStudyPeriod/subject.study.period.search.html",controller:"SubjectStudyPeriodSearchController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}]},data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_AINEOPPETAJA,b.ROLE_OIGUS_V_TEEMAOIGUS_PAEVIK]}}).when("/subjectStudyPeriod/:id/edit",{templateUrl:"subjectStudyPeriod/subject.study.period.edit.html",controller:"SubjectStudyPeriodEditController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}]},data:{authorizedRoles:[b.ROLE_OIGUS_M_TEEMAOIGUS_AINEOPPETAJA,b.ROLE_OIGUS_M_TEEMAOIGUS_PAEVIK]}}).when("/subjectStudyPeriod/:id/view",{templateUrl:"subjectStudyPeriod/subject.study.period.view.html",controller:"SubjectStudyPeriodViewController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}]},data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_AINEOPPETAJA,b.ROLE_OIGUS_V_TEEMAOIGUS_PAEVIK]}}).when("/subjectStudyPeriod/new",{templateUrl:"subjectStudyPeriod/subject.study.period.edit.html",controller:"SubjectStudyPeriodEditController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}]},data:{authorizedRoles:[b.ROLE_OIGUS_M_TEEMAOIGUS_AINEOPPETAJA,b.ROLE_OIGUS_M_TEEMAOIGUS_PAEVIK]}}).when("/subjectStudyPeriods/studentGroups",{templateUrl:"subjectStudyPeriod/studentGroup/subject.study.period.student.group.search.html",controller:"SubjectStudyPeriodStudentGroupSearchController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}]},data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_TUNNIJAOTUSPLAAN]}}).when("/subjectStudyPeriods/studentGroups/new",{templateUrl:"subjectStudyPeriod/studentGroup/subject.study.period.student.group.edit.html",controller:"SubjectStudyPeriodStudentGroupEditController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}]},data:{authorizedRoles:[b.ROLE_OIGUS_M_TEEMAOIGUS_TUNNIJAOTUSPLAAN]}}).when("/subjectStudyPeriods/studentGroups/:studentGroupId/:studyPeriodId/edit",{templateUrl:"subjectStudyPeriod/studentGroup/subject.study.period.student.group.edit.html",controller:"SubjectStudyPeriodStudentGroupEditController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}]},data:{authorizedRoles:[b.ROLE_OIGUS_M_TEEMAOIGUS_TUNNIJAOTUSPLAAN]}}).when("/subjectStudyPeriods/studentGroups/:studentGroupId/:studyPeriodId/view",{templateUrl:"subjectStudyPeriod/studentGroup/subject.study.period.student.group.view.html",controller:"SubjectStudyPeriodStudentGroupViewController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}]},data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_TUNNIJAOTUSPLAAN]}}).when("/subjectStudyPeriods/teachers",{templateUrl:"subjectStudyPeriod/teacher/subject.study.period.teacher.search.html",controller:"SubjectStudyPeriodTeacherSearchController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}]},data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_TUNNIJAOTUSPLAAN]}}).when("/subjectStudyPeriods/teachers/new",{templateUrl:"subjectStudyPeriod/teacher/subject.study.period.teacher.edit.html",controller:"SubjectStudyPeriodTeacherEditController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}]},data:{authorizedRoles:[b.ROLE_OIGUS_M_TEEMAOIGUS_TUNNIJAOTUSPLAAN]}}).when("/subjectStudyPeriods/teachers/:teacherId/:studyPeriodId/edit",{templateUrl:"subjectStudyPeriod/teacher/subject.study.period.teacher.edit.html",controller:"SubjectStudyPeriodTeacherEditController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}]},data:{authorizedRoles:[b.ROLE_OIGUS_M_TEEMAOIGUS_TUNNIJAOTUSPLAAN]}}).when("/subjectStudyPeriods/teachers/:teacherId/:studyPeriodId/view",{templateUrl:"subjectStudyPeriod/teacher/subject.study.period.teacher.view.html",controller:"SubjectStudyPeriodTeacherViewController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}]},data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_TUNNIJAOTUSPLAAN]}}).when("/subjectStudyPeriods/subjects",{templateUrl:"subjectStudyPeriod/subject/subject.study.period.subject.search.html",controller:"SubjectStudyPeriodSubjectSearchController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}]},data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_TUNNIJAOTUSPLAAN]}}).when("/subjectStudyPeriods/subjects/new",{templateUrl:"subjectStudyPeriod/subject/subject.study.period.subject.edit.html",controller:"SubjectStudyPeriodSubjectEditController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}]},data:{authorizedRoles:[b.ROLE_OIGUS_M_TEEMAOIGUS_TUNNIJAOTUSPLAAN]}}).when("/subjectStudyPeriods/subjects/:subjectId/:studyPeriodId/edit",{templateUrl:"subjectStudyPeriod/subject/subject.study.period.subject.edit.html",controller:"SubjectStudyPeriodSubjectEditController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}]},data:{authorizedRoles:[b.ROLE_OIGUS_M_TEEMAOIGUS_TUNNIJAOTUSPLAAN]}}).when("/subjectStudyPeriods/subjects/:subjectId/:studyPeriodId/view",{templateUrl:"subjectStudyPeriod/subject/subject.study.period.subject.view.html",controller:"SubjectStudyPeriodSubjectViewController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}]},data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_TUNNIJAOTUSPLAAN]}})}]),angular.module("hitsaOis").controller("SubjectStudyPeriodStudentGroupEditController",["$scope","QueryUtils","ArrayUtils","Classifier","$route","message","dialogService","$rootScope","SspCapacities","DataUtils",function(a,b,c,d,e,f,g,h,i,j){function k(){a.record.studyPeriod||(a.record.studyPeriod=j.getCurrentStudyYearOrPeriod(a.studyPeriods).id,q=a.record.studyPeriod)}function l(){a.record.studyPeriod&&(a.studentGroups=b.endpoint("/subjectStudyPeriods/studentGroups/list/limited/"+a.record.studyPeriod).query());
}function m(){a.curriculum=b.endpoint("/subjectStudyPeriods/studentGroups/curriculum/"+a.studentGroup.curriculum.id).get(n)}function n(){var b=a.curriculum.studyPeriod;a.curriculumStudyPeriod={years:Math.floor(b/12),months:b%12}}function o(){a.studentGroup=a.studentGroups.find(function(b){return b.id===a.record.studentGroup}),a.studentGroup&&(a.course=a.studentGroup.course.toString(),m())}function p(){a.record.studyPeriod=q,a.capacitiesUtil.filterEmptyCapacities(),a.record.$put().then(function(b){f.updateSuccess(),a.record=b,a.capacitiesUtil.addEmptyCapacities(a.capacityTypes),a.subjectStudyPeriodStudentGroupEditForm.$setPristine()})}var q=e.current.params.studyPeriodId?parseInt(e.current.params.studyPeriodId,10):null,r=e.current.params.studentGroupId?parseInt(e.current.params.studentGroupId,10):null;a.isEditing=null===r&&null===q;var s=b.endpoint("/subjectStudyPeriods/studentGroups/container");a.capacityTypes=d.queryForDropdown({mainClassCode:"MAHT",higher:!0}),a.record={},q||(a.studyPeriods=b.endpoint("/autocomplete/studyPeriods").query(k)),r&&(a.record=s.search({studyPeriod:q,studentGroup:r,subjectStudyPeriodDtos:[]}),a.record.$promise.then(function(b){a.capacitiesUtil=new i(b),a.capacityTypes=d.queryForDropdown({mainClassCode:"MAHT"},function(){a.capacitiesUtil.addEmptyCapacities(a.capacityTypes)})}),a.studentGroup=b.endpoint("/studentgroups/"+r).get(function(b){a.studentGroup.nameEt=b.code,a.course=a.studentGroup.course.toString(),m()})),a.$watch("record.studyPeriod",l),a.isEditing||(a.studyPeriod=b.endpoint("/subjectStudyPeriods/studyPeriod").get({id:q})),a.$watch("record.studentGroup",function(){!c.isEmpty(a.studentGroups)&&a.record.studentGroup&&o()}),a.subjectsLoadValid=function(b){for(var c,d,e=a.capacitiesUtil.getCapacitiesBySubject(b),f=function(a){return function(b){return b.capacityType===a}},g=0;g<a.capacityTypes.length;g++){d=a.capacitiesUtil.getSubjectsCapacityByType(b,a.capacityTypes[g].code);for(var h=0;h<e.length;h++){var i=e[h].capacities.find(f(a.capacityTypes[g].code));if(c=i?i.hours:0,c>d)return!1}}return!0},a.save=function(){if(a.subjectStudyPeriodStudentGroupEditForm.$setSubmitted(),!a.subjectStudyPeriodStudentGroupEditForm.$valid)return void f.error("main.messages.form-has-errors");var b=a.record.subjects;if(c.isEmpty(b)||c.isEmpty(a.record.subjectStudyPeriodDtos))return void f.error("subjectStudyPeriod.error.noDataForSaving");var d=a.record.subjects.filter(function(b){return!a.subjectsLoadValid(b.id)});if(!c.isEmpty(d)){var e=d.map(function(a){return h.currentLanguageNameField(a)}).join(", ");return void g.confirmDialog({prompt:"subjectStudyPeriod.error.subjectLoad",subject:e},p)}p()}}]),angular.module("hitsaOis").controller("SubjectStudyPeriodStudentGroupViewController",["$scope","QueryUtils","Classifier","$route","SspCapacities","USER_ROLES","AuthService",function(a,b,c,d,e,f,g){function h(){a.curriculum=b.endpoint("/subjectStudyPeriods/studentGroups/curriculum/"+a.studentGroup.curriculum.id).get(i)}function i(){var b=a.curriculum.studyPeriod;a.curriculumStudyPeriod={years:Math.floor(b/12),months:b%12}}a.canEdit=g.isAuthorized(f.ROLE_OIGUS_M_TEEMAOIGUS_TUNNIJAOTUSPLAAN);var j=parseInt(d.current.params.studyPeriodId,10),k=parseInt(d.current.params.studentGroupId,10);a.isEditing=null===k;var l=b.endpoint("/subjectStudyPeriods/studentGroups/container");a.record=l.search({studyPeriod:j,studentGroup:k,subjectStudyPeriodDtos:[]}),a.record.$promise.then(function(b){a.capacitiesUtil=new e(b)}),b.endpoint("/studentgroups/"+k).get(function(b){a.studentGroup=b,a.studentGroup.nameEt=b.code,a.course=a.studentGroup.course.toString(),h()}),a.capacityTypes=c.queryForDropdown({mainClassCode:"MAHT"}),a.studyPeriod=b.endpoint("/subjectStudyPeriods/studyPeriod").get({id:j})}]),angular.module("hitsaOis").controller("SubjectStudyPeriodStudentGroupSearchController",["$scope","$route","QueryUtils","ArrayUtils","DataUtils","USER_ROLES","AuthService",function(a,b,c,d,e,f,g){function h(){a.criteria&&!a.criteria.studyPeriod&&(a.criteria.studyPeriod=e.getCurrentStudyYearOrPeriod(a.studyPeriods).id),a.loadData()}a.schoolId=b.current.locals.auth.school.id,a.canEdit=g.isAuthorized(f.ROLE_OIGUS_M_TEEMAOIGUS_TUNNIJAOTUSPLAAN),a.currentNavItem="studentGroups",c.createQueryForm(a,"/subjectStudyPeriods/studentGroups",{order:"id"}),a.studyPeriods=c.endpoint("/autocomplete/studyPeriods").query(h),a.$watch("criteria.studyPeriod",function(){d.isEmpty(a.studyPeriods)||a.criteria.studyPeriod||h()}),a.curricula=c.endpoint("/subjectStudyPeriods/studentGroups/curricula").query(),c.endpoint("/subjectStudyPeriods/studentGroups/list").query(function(b){a.studentGroups=b.map(function(a){var b=a;return b.nameEt=a.code,b.nameEn=a.code,b})}),a.filterCurriculums=function(b){return a.criteria.department?d.includes(b.departments,a.criteria.department):!0},a.filterStudentGroups=function(b){return a.criteria.curriculum?b.curriculum.id===a.criteria.curriculum:!0}}]),angular.module("hitsaOis").controller("SubjectStudyPeriodSubjectEditController",["$scope","QueryUtils","ArrayUtils","$route","message","Classifier","SspCapacities","DataUtils",function(a,b,c,d,e,f,g,h){function i(){a.record.studyPeriod||(a.record.studyPeriod=h.getCurrentStudyYearOrPeriod(a.studyPeriods).id,l=a.record.studyPeriod)}function j(){a.record.studyPeriod&&(a.subjects=b.endpoint("/subjectStudyPeriods/subjects/list/limited/"+a.record.studyPeriod).query())}function k(){return a.subjectStudyPeriodSubjectEditForm.$setSubmitted(),a.subjectStudyPeriodSubjectEditForm.$valid?c.isEmpty(a.record.subjectStudyPeriodDtos)?(e.error("subjectStudyPeriod.error.noDataForSaving"),!1):!0:(e.error("main.messages.form-has-errors"),!1)}var l=d.current.params.studyPeriodId?parseInt(d.current.params.studyPeriodId,10):null,m=d.current.params.subjectId?parseInt(d.current.params.subjectId,10):null;a.isNew=null===m&&null===l;var n=b.endpoint("/subjectStudyPeriods/subjects/container");a.record={},l?a.studyPeriod=b.endpoint("/subjectStudyPeriods/studyPeriod").get({id:l}):a.studyPeriods=b.endpoint("/autocomplete/studyPeriods").query(i),m&&(a.record=n.search({studyPeriod:l,subject:m,subjectStudyPeriodDtos:[]}),a.record.$promise.then(function(b){a.capacitiesUtil=new g(b),f.queryForDropdown({mainClassCode:"MAHT"},function(b){a.capacityTypes=b,a.capacitiesUtil.addEmptyCapacities(a.capacityTypes)})}),a.subject=b.endpoint("/subjectStudyPeriods/subject/"+m).get()),a.$watch("record.studyPeriod",j),a.save=function(){k()&&(a.capacitiesUtil.filterEmptyCapacities(),a.record.$put().then(function(b){e.updateSuccess(),a.record=b,a.capacitiesUtil.addEmptyCapacities(a.capacityTypes),a.subjectStudyPeriodSubjectEditForm.$setPristine()}))}}]),angular.module("hitsaOis").controller("SubjectStudyPeriodSubjectViewController",["$scope","QueryUtils","$route","Classifier","SspCapacities","USER_ROLES","AuthService",function(a,b,c,d,e,f,g){a.canEdit=g.isAuthorized(f.ROLE_OIGUS_M_TEEMAOIGUS_TUNNIJAOTUSPLAAN);var h=parseInt(c.current.params.studyPeriodId,10),i=parseInt(c.current.params.subjectId,10),j=b.endpoint("/subjectStudyPeriods/subjects/container");a.capacityTypes=d.queryForDropdown({mainClassCode:"MAHT"}),a.studyPeriod=b.endpoint("/subjectStudyPeriods/studyPeriod").get({id:h}),a.record=j.search({studyPeriod:h,subject:i,subjectStudyPeriodDtos:[]}),a.record.$promise.then(function(b){a.capacitiesUtil=new e(b)}),a.subject=b.endpoint("/subjectStudyPeriods/subject/"+i).get()}]),angular.module("hitsaOis").controller("SubjectStudyPeriodSubjectSearchController",["$scope","$sessionStorage","QueryUtils","DataUtils","ArrayUtils","USER_ROLES","AuthService",function(a,b,c,d,e,f,g){function h(){a.criteria&&!a.criteria.studyPeriod&&(a.criteria.studyPeriod=d.getCurrentStudyYearOrPeriod(a.studyPeriods).id),a.loadData()}a.canEdit=g.isAuthorized(f.ROLE_OIGUS_M_TEEMAOIGUS_TUNNIJAOTUSPLAAN),a.currentNavItem="subjects",c.createQueryForm(a,"/subjectStudyPeriods/subjects",{order:"id"}),a.studyPeriods=c.endpoint("/autocomplete/studyPeriods").query(h),a.$watch("criteria.studyPeriod",function(){e.isEmpty(a.studyPeriods)||a.criteria.studyPeriod||h()}),a.$watch("criteria.teacherObject",function(){a.criteria.teacher=a.criteria.teacherObject?a.criteria.teacherObject.id:null}),a.$watch("criteria.subjectObject",function(){a.criteria.subject=a.criteria.subjectObject?a.criteria.subjectObject.id:null})}]),angular.module("hitsaOis").controller("SubjectStudyPeriodTeacherEditController",["$scope","QueryUtils","ArrayUtils","$route","message","Classifier","SspCapacities","DataUtils",function(a,b,c,d,e,f,g,h){function i(){a.record.studyPeriod||(a.record.studyPeriod=h.getCurrentStudyYearOrPeriod(a.studyPeriods).id,l=a.record.studyPeriod)}function j(){a.record.studyPeriod&&(a.teachers=b.endpoint("/subjectStudyPeriods/teachers/list/limited/"+a.record.studyPeriod).query())}function k(){if(a.subjectStudyPeriodTeacherEditForm.$setSubmitted(),!a.subjectStudyPeriodTeacherEditForm.$valid)return e.error("main.messages.form-has-errors"),!1;var b=a.record.subjects;return c.isEmpty(b)||c.isEmpty(a.record.subjectStudyPeriodDtos)?void e.error("subjectStudyPeriod.error.noDataForSaving"):!0}var l=d.current.params.studyPeriodId?parseInt(d.current.params.studyPeriodId,10):null,m=d.current.params.teacherId?parseInt(d.current.params.teacherId,10):null;a.isNew=null===m&&null===l;var n=b.endpoint("/subjectStudyPeriods/teachers/container");a.record={},l?a.studyPeriod=b.endpoint("/subjectStudyPeriods/studyPeriod").get({id:l}):a.studyPeriods=b.endpoint("/autocomplete/studyPeriods").query(i),m&&(a.record=n.search({studyPeriod:l,teacher:m,subjectStudyPeriodDtos:[]}),a.record.$promise.then(function(b){a.capacitiesUtil=new g(b),f.queryForDropdown({mainClassCode:"MAHT"},function(b){a.capacityTypes=b,a.capacitiesUtil.addEmptyCapacities(a.capacityTypes)})}),a.teacher=b.endpoint("/subjectStudyPeriods/teacher/"+m).get()),a.$watch("record.studyPeriod",j),a.save=function(){k()&&(a.capacitiesUtil.filterEmptyCapacities(),a.record.$put().then(function(b){e.updateSuccess(),a.record=b,a.capacitiesUtil.addEmptyCapacities(a.capacityTypes),a.subjectStudyPeriodTeacherEditForm.$setPristine()}))}}]),angular.module("hitsaOis").controller("SubjectStudyPeriodTeacherViewController",["$scope","QueryUtils","$route","Classifier","SspCapacities","USER_ROLES","AuthService",function(a,b,c,d,e,f,g){a.canEdit=g.isAuthorized(f.ROLE_OIGUS_M_TEEMAOIGUS_TUNNIJAOTUSPLAAN);var h=parseInt(c.current.params.studyPeriodId,10),i=c.current.params.teacherId,j=b.endpoint("/subjectStudyPeriods/teachers/container");a.capacityTypes=d.queryForDropdown({mainClassCode:"MAHT"}),a.studyPeriod=b.endpoint("/subjectStudyPeriods/studyPeriod").get({id:h}),a.record=j.search({studyPeriod:h,teacher:i,subjectStudyPeriodDtos:[]}),a.record.$promise.then(function(b){a.capacitiesUtil=new e(b)}),a.teacher=b.endpoint("/subjectStudyPeriods/teacher/"+i).get()}]),angular.module("hitsaOis").controller("SubjectStudyPeriodTeacherSearchController",["$scope","$route","QueryUtils","DataUtils","ArrayUtils","USER_ROLES","AuthService",function(a,b,c,d,e,f,g){function h(){a.criteria&&!a.criteria.studyPeriod&&(a.criteria.studyPeriod=d.getCurrentStudyYearOrPeriod(a.studyPeriods).id),a.loadData()}a.schoolId=b.current.locals.auth.school.id,a.canEdit=g.isAuthorized(f.ROLE_OIGUS_M_TEEMAOIGUS_TUNNIJAOTUSPLAAN),a.currentNavItem="teachers",c.createQueryForm(a,"/subjectStudyPeriods/teachers",{order:"id"}),a.studyPeriods=c.endpoint("/autocomplete/studyPeriods").query(h),a.$watch("criteria.studyPeriod",function(){e.isEmpty(a.studyPeriods)||a.criteria.studyPeriod||h()}),a.$watch("criteria.teacherObject",function(){a.criteria.teacher=a.criteria.teacherObject?a.criteria.teacherObject.id:null})}]),angular.module("hitsaOis").controller("subjectStudyPeriodPlanSearchController",["$scope","QueryUtils","ArrayUtils","message","DataUtils","Classifier","USER_ROLES","AuthService",function(a,b,c,d,e,f,g,h){function i(){a.criteria&&!a.criteria.studyPeriod&&(a.criteria.studyPeriod=e.getCurrentStudyYearOrPeriod(a.studyPeriods).id),a.loadData(),a.checkIfStudyPeriodIsPast()}a.canEdit=h.isAuthorized(g.ROLE_OIGUS_M_TEEMAOIGUS_AINE),b.createQueryForm(a,"/subjectStudyPeriodPlans",{order:"id"}),b.endpoint("/autocomplete/studyPeriods").query().$promise.then(function(b){a.studyPeriods=b,e.sortStudyYearsOrPeriods(a.studyPeriods),i()}),a.curriculums=b.endpoint("/subjectStudyPeriodPlans/curriculums").query(),a.capacityTypes=f.queryForDropdown({mainClassCode:"MAHT",higher:!0}),a.$watch("criteria.subjectObject",function(){a.criteria.subject=a.criteria.subjectObject?a.criteria.subjectObject.id:null}),a.$watch("criteria.studyPeriod",function(){a.studyPeriods&&!a.criteria.studyPeriod&&i()}),a.getCapacitiesHours=function(a,b){if(b.capacities){var c=b.capacities.find(function(b){return b.capacityType===a});return c&&c.hours?c.hours:"-"}},a.pastStudyPeriodSelected=!1,a.checkIfStudyPeriodIsPast=function(){if(a.studyPeriods){var b=a.studyPeriods.find(function(b){return b.id===a.criteria.studyPeriod});b&&(a.pastStudyPeriodSelected=e.isPastStudyYearOrPeriod(b))}},a.$watch("criteria.curriculum",function(){a.subjectQueryParams=a.criteria.curriculum?{curricula:[a.criteria.curriculum],status:["AINESTAATUS_K"]}:{status:["AINESTAATUS_K"]}})}]).controller("subjectStudyPeriodPlanNewController",["$scope","QueryUtils","ArrayUtils","message","DataUtils","$mdDialog","dialogService","$route","Classifier","$location",function(a,b,c,d,e,f,g,h,i,j){function k(c){b.endpoint(t+"/studyPeriod/"+c).get().$promise.then(function(b){a.studyPeriod=b,a.readOnly=e.isPastStudyYearOrPeriod(a.studyPeriod)})}function l(c){a.subject=b.endpoint(t+"/subject/"+c).get()}function m(){b.endpoint(t+"/curriculums").query({subjects:[a.record.subject]}).$promise.then(function(b){a.curriculums=b,a.curriculums.forEach(function(b){b.selected=c.includes(a.record.curriculums,b.id)})})}function n(){i.queryForDropdown({mainClassCode:"MAHT",higher:!0},function(b){for(var c=[],d=0;d<b.length;d++)c.push({isContact:!1,hours:null,capacityType:b[d].code});a.record.capacities=c})}function o(b){var c=a.record.capacities.find(function(a){return a.capacityType===b});return angular.isDefined(c)&&null!==c}function p(){a.record.capacities||(a.record.capacities=[]),i.queryForDropdown({mainClassCode:"MAHT",higher:!0},function(b){for(var c=0;c<b.length;c++)o(b[c].code)||a.record.capacities.push({isContact:!1,hours:null,capacityType:b[c].code})})}function q(){i.queryForDropdown({mainClassCode:"OPPEVORM",higher:!0},function(b){a.studyForms=b,a.studyForms.forEach(function(b){b.selected=c.includes(a.record.studyForms,b.code)})})}function r(){a.record.id?a.record.$update().then(function(){d.info("main.messages.create.success")}):a.record.$save().then(function(a){d.info("main.messages.create.success"),j.path(t+"/"+a.id+"/edit")})}var s=h.current.params.id,t="/subjectStudyPeriodPlans",u=b.endpoint(t);a.readOnly=!1;var v={studyPeriod:h.current.params.studyPeriodId,subject:h.current.params.subjectId,studyForms:[],curriculums:[]};s?u.get({id:s}).$promise.then(function(b){a.record=b,k(b.studyPeriod),l(b.subject),m(),q(),p()}):(a.record=new u(v),n(),k(a.record.studyPeriod),l(a.record.subject),m(),q()),a.getTotalCapacity=function(){return a.record&&a.record.capacities?a.record.capacities.reduce(function(a,b){return b.hours?a+b.hours:a},0):0},a.save=function(){return a.subjectStudyPeriodPlanEditForm.$valid?(a.record.studyForms=a.studyForms.filter(function(a){return a.selected}).map(function(a){return a.code}),a.record.curriculums=a.curriculums.filter(function(a){return a.selected}).map(function(a){return a.id}),void b.endpoint(t+"/exists").search(a.record).$promise.then(function(a){a.exists?g.confirmDialog({prompt:"subjectStudyPeriodPlan.overrideconfirm"},function(){r()}):r()})):void d.error("main.messages.form-has-errors")},a["delete"]=function(){g.confirmDialog({prompt:"subjectStudyPeriodPlan.deleteconfirm"},function(){a.record.$delete().then(function(){d.info("main.messages.delete.success"),j.path(t)})})}}]),angular.module("hitsaOis").config(["$routeProvider","USER_ROLES",function(a,b){a.when("/subjectStudyPeriodPlans",{templateUrl:"subjectStudyPeriodPlan/subject.study.period.plan.search.html",controller:"subjectStudyPeriodPlanSearchController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}]},data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_AINE]}}).when("/subjectStudyPeriodPlans/:subjectId/:studyPeriodId/new",{templateUrl:"subjectStudyPeriodPlan/subject.study.period.plan.edit.html",controller:"subjectStudyPeriodPlanNewController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}]},data:{authorizedRoles:[b.ROLE_OIGUS_M_TEEMAOIGUS_AINE]}}).when("/subjectStudyPeriodPlans/:id/edit",{templateUrl:"subjectStudyPeriodPlan/subject.study.period.plan.edit.html",controller:"subjectStudyPeriodPlanNewController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}]},data:{authorizedRoles:[b.ROLE_OIGUS_M_TEEMAOIGUS_AINE]}})}]),angular.module("hitsaOis").config(["$routeProvider","USER_ROLES",function(a,b){a.when("/timetable/lessonTime/search",{templateUrl:"timetable/timetable.lessonTime.list.html",controller:"TimetableLessonTimeListController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}]},data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_TUNDAEG]}}).when("/timetable/lessonTime",{templateUrl:"timetable/timetable.lessonTime.html",controller:"TimetableLessonTimeController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}]},data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_TUNDAEG]}}).when("/timetable/lessonTime/:id/:action",{templateUrl:function(a){return"edit"===a.action?"timetable/timetable.lessonTime.html":"timetable/timetable.lessonTime.view.html"},controller:"TimetableLessonTimeController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}],entity:["QueryUtils","$route",function(a,b){return a.endpoint("/lessontimes").get({id:b.current.params.id}).$promise}],isView:["$route",function(a){return"view"===a.current.params.action}]},data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_TUNDAEG]}}).when("/timetable/generalTimetableByGroup/:schoolId?",{templateUrl:"timetable/generalTimetable/timetable.generalTimetable.byGroup.html",controller:"GeneralTimetableByGroupController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}]}}).when("/timetable/generalTimetableByTeacher/:schoolId?",{templateUrl:"timetable/generalTimetable/timetable.generalTimetable.byTeacher.html",controller:"GeneralTimetableByTeacherController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}]},data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_TUNNIPLAAN]}}).when("/timetable/generalTimetableByRoom/:schoolId?",{templateUrl:"timetable/generalTimetable/timetable.generalTimetable.byRoom.html",controller:"GeneralTimetableByRoomController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}]},data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_TUNNIPLAAN]}}).when("/timetable/personalGeneralTimetable",{templateUrl:"timetable/generalTimetable/timetable.generalTimetable.personal.html",controller:"PersonalGeneralTimetableController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}]},data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_TUNNIPLAAN]}}).when("/timetable/searchGeneralTimetable",{templateUrl:"timetable/generalTimetable/timetable.generalTimetable.search.html",controller:"GeneralTimetableSearchController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}]},data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_TUNNIPLAAN]}}).when("/timetable/timetableManagement",{templateUrl:"timetable/timetable.timetableManagement.html",controller:"TimetableManagementController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}]},data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_TUNNIPLAAN]}}).when("/timetable/new",{templateUrl:"timetable/timetable.edit.html",controller:"TimetableEditController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}],isCreate:function(){return!0}},data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_TUNNIPLAAN]}}).when("/timetable/:id/edit",{templateUrl:"timetable/timetable.edit.html",controller:"TimetableEditController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}],entity:["QueryUtils","$route",function(a,b){return a.endpoint("/timetables").get({id:b.current.params.id}).$promise}],isView:["$route",function(a){return"view"===a.current.params.action}]},data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_TUNNIPLAAN]}}).when("/timetable/:id/view",{templateUrl:"timetable/timetable.view.html",controller:"TimetableViewController",controllerAs:"controller",data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_TUNNIPLAAN]}}).when("/timetable/:id/createVocationalPlan/:groupId",{templateUrl:"timetable/timetable.createVocationalPlan.html",controller:"VocationalTimetablePlanController",controllerAs:"controller",data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_TUNNIPLAAN]}}).when("/timetable/:id/createHigherPlan/:groupId",{templateUrl:"timetable/timetable.createHigherPlan.html",controller:"HigherTimetablePlanController",controllerAs:"controller",data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_TUNNIPLAAN]}}).when("/timetable/:id/createHigherPlan",{templateUrl:"timetable/timetable.createHigherPlan.html",controller:"HigherTimetablePlanController",controllerAs:"controller",data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_TUNNIPLAAN]}}).when("/timetable/group/:schoolId/:groupId/:weekIndex?",{templateUrl:"timetable/timetable.week.view.html",controller:"GroupTimetableViewController",controllerAs:"controller",resolve:{auth:["AuthResolver",function(a){return a.resolve()}]}}).when("/timetable/teacher/:schoolId/:teacherId/:weekIndex?",{templateUrl:"timetable/timetable.week.view.html",controller:"TeacherTimetableViewController",controllerAs:"controller",resolve:{auth:["AuthResolver",function(a){return a.resolve()}]}}).when("/timetable/room/:schoolId/:roomId/:weekIndex?",{templateUrl:"timetable/timetable.week.view.html",controller:"RoomTimetableViewController",controllerAs:"controller",resolve:{auth:["AuthResolver",function(a){return a.resolve()}]}}).when("/timetable/student/:schoolId/:studentId",{templateUrl:"timetable/timetable.week.view.html",controller:"StudentTimetableViewController",controllerAs:"controller",resolve:{auth:["AuthResolver",function(a){return a.resolve()}]},data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_TUNNIPLAAN]}}).when("/timetables",{templateUrl:"timetable/generalTimetable/timetable.generalTimetable.school.list.html",controller:"GeneralTimetableSchoolListController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}]}}).when("/timetable/timetableEvent/new",{templateUrl:"timetable/timetable.timetableEvent.edit.html",controller:"TimetableEventEditController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}],isCreate:function(){return!0}},data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_TUNNIPLAAN]}}).when("/timetable/timetableEvent/:id/edit",{templateUrl:"timetable/timetable.timetableEvent.edit.html",controller:"TimetableEventEditController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}],isCreate:function(){return!0}},data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_TUNNIPLAAN]}})}]),angular.module("hitsaOis").controller("TimetableLessonTimeController",["$scope","$q","QueryUtils","Classifier","DataUtils","ArrayUtils","$route","message","$timeout","$location",function(a,b,c,d,e,f,g,h,i,j){function k(b){var d=[];for(var f in b)b.hasOwnProperty(f)&&angular.isDefined(b[f])&&d.push(f);d.length>0?c.endpoint("/lessontimes/minValidFrom").get({buildings:d.join(),lessonTimeId:g.current.params.id},function(b){null===b.minValidFrom?a.minValidFrom=void 0:(e.convertStringToDates(b,["minValidFrom"]),a.minValidFrom=b.minValidFrom,a.validFrom<a.minValidFrom&&(a.validFrom=void 0))}):a.minValidFrom=void 0}function l(b,c,d){d===!1&&angular.isDefined(a.usedBuildings[b.id])?(a.usedBuildings[b.id]=void 0,c.selectedBuildings[b.id]=!1):(a.usedBuildings[b.id]=c,c.selectedBuildings[b.id]=!0)}function m(b){for(var c in b.selectedBuildings)b.selectedBuildings.hasOwnProperty(c)&&b.selectedBuildings[c]===!0&&(a.usedBuildings[c]=void 0)}function n(){for(var b={lessonTimes:[],selectedBuildings:{}},c={dayMon:!0,dayTue:!0,dayWed:!0,dayThu:!0,dayFri:!0,daySat:!0,daySun:!0},d=0;t>d;d++)b.lessonTimes.push(angular.extend({},c));return a.buildings.forEach(function(c){angular.isDefined(a.usedBuildings[c.id])||l(c,b,!0)}),b}function o(b){a.blocks=[],a.usedBuildings={},e.convertStringToDates(b,["validFrom"]),a.validFrom=b.validFrom,angular.isArray(b.lessonTimeBuildingGroups)&&b.lessonTimeBuildingGroups.forEach(function(b){var c={id:b.id,lessonTimes:[],selectedBuildings:{}};a.blocks.push(c),angular.isArray(b.lessonTimes)&&b.lessonTimes.forEach(function(a){e.convertStringToTime(a,["startTime","endTime"]),c.lessonTimes.push(a)}),angular.isArray(b.buildings)&&b.buildings.forEach(function(a){l(a,c,!0)})})}function p(b){for(var c=b.length;c--;)a.isLessonTimeRowFilled(b[c])||b.splice(c,1)}function q(){for(var b=!0,c=0;a.blocks.length>c;c++){for(var d=!1,e=0;a.blocks[c].lessonTimes.length>e;e++)a.isLessonTimeRowFilled(a.blocks[c].lessonTimes[e])&&(d=!0);b=d?b:d}return b}function r(a){var b={validFrom:a.validFrom,lessonTimeBuildingGroups:[]};return angular.isArray(a.blocks)&&a.blocks.forEach(function(a){p(a.lessonTimes);var c={id:a.id,lessonTimes:a.lessonTimes,buildings:[]};if(angular.isObject(a.selectedBuildings))for(var d in a.selectedBuildings)a.selectedBuildings.hasOwnProperty(d)&&a.selectedBuildings[d]===!0&&c.buildings.push({id:parseInt(d,10)});b.lessonTimeBuildingGroups.push(c)}),b}function s(){return angular.isDefined(v)}var t=10;a.buildings=c.endpoint("/autocomplete/buildings").query(),a.blocks=[],a.usedBuildings={};var u;a.$watchCollection("usedBuildings",function(a){angular.isDefined(u)&&!u.resolved&&i.cancel(u),u=i(function(){k(a)},500)}),a.addNewRow=function(a){a.lessonTimes.push({})},a.addNewBlock=function(){a.lessonTimeForm.$setPristine(!0),a.blocks.push(n())},a.deleteBlock=function(b){m(b),f.remove(a.blocks,b)},a.deleteRow=function(a,b){f.remove(a,b)},a.calculateAcademicHours=function(a,b){var c=Math.round((b-a)/27e5*100)/100;return c>=0?c:0},a.buildingChanged=function(a,b){l(a,b,b.selectedBuildings[a.id])},a.isBuildingDisabled=function(b,c){return angular.isDefined(a.usedBuildings[b.id])?!angular.equals(c,a.usedBuildings[b.id]):!1},a.selectedBuildingsLength=function(a){var b=0;for(var c in a.selectedBuildings)a.selectedBuildings.hasOwnProperty(c)&&a.selectedBuildings[c]===!0&&b++;var d=function(){return b};return d},a.isLessonTimeRowFilled=function(a){return angular.isObject(a)?!!a.lessonNr||!!a.startTime||!!a.endTime&&(a.dayMon===!0||a.dayTue===!0||a.dayWed===!0||a.dayThu===!0||a.dayFri===!0||a.daySat===!0||a.daySun===!0):!1};var v=g.current.locals.entity;angular.isDefined(v)?o(v):a.buildings.$promise.then(function(){a.blocks.push(n())}),a.save=function(){if(a.lessonTimeForm.$setSubmitted(),a.lessonTimeForm.$valid&&q()){var b;if(s()){b=c.endpoint("/lessontimes/");var d=r(a);new b(d).$update().then(function(a){h.info("main.messages.create.success"),o(a)})}else{b=c.endpoint("/lessontimes");var e=r(a);new b(e).$save().then(function(a){h.info("main.messages.create.success"),angular.isArray(a.lessonTimeBuildingGroups)&&a.lessonTimeBuildingGroups.forEach(function(a){angular.isArray(a.lessonTimes)&&a.lessonTimes.length>0&&j.path("/timetable/lessonTime/"+a.lessonTimes[0].id+"/edit")})})}}else q()||h.error("timetable.lessonTime.oneRowRequired")}}]),angular.module("hitsaOis").controller("TimetableLessonTimeListController",["$scope","$q","QueryUtils","Classifier","DataUtils","$filter","USER_ROLES","AuthService",function(a,b,c,d,e,f,g,h){function i(a){var b=[];return a.dayMon===!0&&b.push({day:"NADALAPAEV_E"}),a.dayTue===!0&&b.push({day:"NADALAPAEV_T"}),a.dayWed===!0&&b.push({day:"NADALAPAEV_K"}),a.dayThu===!0&&b.push({day:"NADALAPAEV_N"}),a.dayFri===!0&&b.push({day:"NADALAPAEV_R"}),a.daySat===!0&&b.push({day:"NADALAPAEV_L"}),a.daySun===!0&&b.push({day:"NADALAPAEV_P"}),b}a.canEdit=h.isAuthorized(g.ROLE_OIGUS_M_TEEMAOIGUS_TUNDAEG);var j=d.valuemapper({day:"NADALAPAEV"}),k=j.promises;a.days=[];var l=c.endpoint("/lessontimes/currentPeriod").get(function(b){e.convertStringToDates(b,["periodStart"]),a.criteria.from=b.periodStart}).$promise;k.push(l),c.createQueryForm(a,"/lessontimes",{order:"lessonNr"},j.objectmapper),b.all(k).then(function(){var b=[{day:"NADALAPAEV_E"},{day:"NADALAPAEV_T"},{day:"NADALAPAEV_K"},{day:"NADALAPAEV_N"},{day:"NADALAPAEV_R"},{day:"NADALAPAEV_L"},{day:"NADALAPAEV_P"}];j.objectmapper(b).forEach(function(b){a.days.push(b.day)}),a.loadData()}),a.displayWeekdays=function(b){var c=i(b);return j.objectmapper(c).map(function(b){return b.day[a.currentLanguageNameField()].charAt(0)}).join(", ")},a.displayBuildings=function(b){var c=b.map(function(b){return b[a.currentLanguageNameField()]});return f("orderBy")(c).join(", ")},a.hasPassed=function(a){return e.convertStringToDates(a,["validThru"]),null!==a.validThru&&a.validThru<new Date},a.canEditLessonTime=function(b){return!a.hasPassed(b)&&a.canEdit}}]),angular.module("hitsaOis").controller("TimetableManagementController",["$scope","$location","$timeout","message","QueryUtils","DataUtils","Classifier","dialogService","USER_ROLES","AuthService",function(a,b,c,d,e,f,g,h,i,j){function k(){a.formState.studyPeriods=a.allStudyPeriods.filter(function(b){return b.studyYear===a.criteria.studyYear})}function l(b){for(var c=0;c<a.formState.studyPeriods.length;c++){var d=a.formState.studyPeriods[c];if(d.id===b)return!0}return!1}a.canEdit=j.isAuthorized(i.ROLE_OIGUS_M_TEEMAOIGUS_TUNNIPLAAN);var m="/timetables",n=g.valuemapper({status:"TUNNIPLAAN_STAATUS"});e.createQueryForm(a,m+"/searchTimetableForManagement",{order:"start_date"},n.objectmapper),a.formState={xlsDiffUrl:"timetables/timetableDifference.xls",xlsPlanUrl:"timetables/timetablePlan.xlsx"};var o=a.loadData;a.loadData=function(){a.timetableSearchForm.$setSubmitted(),a.timetableSearchForm.$valid?o():d.error("main.messages.form-has-errors")},e.endpoint(m+"/managementSearchFormData").search().$promise.then(function(b){a.formState.studyYears=b.studyYears,a.allStudyPeriods=b.studyPeriods;var e=f.getCurrentStudyYearOrPeriod(a.formState.studyYears);e&&(a.criteria.studyYear=e.id,k(),a.criteria.studyPeriod=b.currentStudyPeriod),a.higher=b.higher,a.vocational=b.vocational,a.higher&&a.vocational||a.higher&&(a.criteria.type="TUNNIPLAAN_LIIK_H"),a.criteria.studyYear&&a.criteria.studyPeriod?c(a.loadData):0===a.formState.studyYears.length?d.error("studyYear.missing"):0===a.allStudyPeriods.length&&d.error("studyYear.studyPeriod.missing")}),a.$watch("criteria.studyYear",function(){
void 0!==a.criteria.studyYear&&a.allStudyPeriods&&(k(),l(a.criteria.studyPeriod)||(a.criteria.studyPeriod=null))}),a.copyTimetable=function(b){e.endpoint(m+"/getPossibleTargetsForCopy").query({id:b}).$promise.then(function(c){c.forEach(function(a){a.formattedStart=new Date(a.start)}),h.showDialog("timetable/timetable.timetableManagement.copyTimetable.html",function(a){a.copyTargets=c},function(c){var f={start:c.copyTarget.start,higher:c.copyTarget.isHigher,id:c.copyTarget.id,originalTimetable:b,studyPeriod:c.copyTarget.studyPeriod};e.endpoint(m+"/copyTimetable").search(f).$promise.then(function(){d.info("main.messages.create.success"),a.loadData()})})})},a.createEvent=function(a){var c=e.endpoint(m),d=new c;d.code=a.isHigher?"TUNNIPLAAN_LIIK_H":"TUNNIPLAAN_LIIK_V",d.studyPeriod=a.studyPeriod,d.startDate=a.start,d.endDate=a.end,d.$save().then(function(a){b.url("/timetable/"+a.id+"/view")})}}]),angular.module("hitsaOis").controller("TimetableEditController",["$scope","message","QueryUtils","DataUtils","$route","$location",function(a,b,c,d,e,f){function g(b,c){for(var d=0;d<a.formState.studyPeriods.length;d++){var e=a.formState.studyPeriods[d];if(e.id===c&&e.studyYear===c)return!0}return!1}function h(a){m=[];for(var b=0;b<a.length;b++)for(var c=0;c<a[b].dates.length;c++){var d=new Date(a[b].dates[c]);d=d.setHours(0,0,0,0),m.push(d)}m=m.sort()}function i(){return void 0!==a.allStudyPeriods?a.allStudyPeriods.filter(function(b){return b.id===a.timetable.studyPeriod})[0]:void 0}function j(){if(void 0!==a.timetable.studyPeriod){var b="studyPeriod="+a.timetable.studyPeriod+"&code="+a.timetable.code;void 0!==k&&(b+="&currentTimetable="+k),c.endpoint(l+"/blockedDatesForPeriod?"+b).query(h);var d=i(),e=new Date(d.startDate),f=new Date(d.endDate);a.firstDateForCurrentRange=e.setDate(d.startDate.getDate()-1),a.lastDateForCurrentRange=f.setDate(d.endDate.getDate()+1),a.studyPeriodStartDate=new Date(d.startDate.getTime()),a.studyPeriodEndDate=new Date(d.endDate.getTime())}a.setEndDateMinDate()}var k=e.current.params.id;a.formState={};var l="/timetables",m=[],n=c.endpoint(l);a.lastDateForCurrentRange=Date.now(),a.firstDateForCurrentRange=Date.now(),k?(a.timetable=n.get({id:k}),a.timetable.$promise.then(function(){a.formState.studyYears=a.timetable.studyYears,a.allStudyPeriods=a.timetable.studyPeriods;var b=d.getCurrentStudyYearOrPeriod(a.formState.studyYears),c=d.getCurrentStudyYearOrPeriod(a.timetable.studyPeriods);a.timetable.studyYear=b.id,a.formState.studyPeriods=a.allStudyPeriods.filter(function(b){return b.studyYear===a.timetable.studyYear}),a.timetable.studyPeriod=c.id,a.timetable.studyYears=null,a.timetable.currentStudyPeriod=null,a.timetable.studyPeriods=null})):(a.timetable=new n,a.timetable.code=e.current.params.type,a.timetable.startDate=e.current.params.from?new Date(e.current.params.from):null,a.timetable.endDate=e.current.params.thru?new Date(e.current.params.thru):null,c.endpoint(l+"/managementSearchFormData").search().$promise.then(function(b){if(a.formState.studyYears=b.studyYears,a.allStudyPeriods=b.studyPeriods,!a.timetable.studyYear){var c,e;a.timetable.startDate?(d.getCurrentStudyYearOrPeriod(a.formState.studyYears),e=d.getStudyYearOrPeriodAt(a.timetable.startDate,b.studyPeriods)):(c=d.getCurrentStudyYearOrPeriod(a.formState.studyYears),e=d.getCurrentStudyYearOrPeriod(b.studyPeriods)),c&&a.allStudyPeriods&&(a.timetable.studyYear=c.id,a.formState.studyPeriods=a.allStudyPeriods.filter(function(b){return b.studyYear===a.timetable.studyYear}),a.timetable.studyPeriod=e.id)}})),a.studyYearChanged=function(){g(a.timetable.studyYear,a.timetable.studyPeriod)||(a.timetable.studyPeriod=null)},a.$watch("timetable.startDate",function(){var b=a.timetable.startDate;if(void 0===b)a.lastDateForCurrentRange=Date.now();else{m.sort(function(a,b){return a-b});for(var c=0;c<m.length;c++)if(m[c]>=b.getTime()){a.lastDateForCurrentRange=m[c];break}if(angular.isObject(b)&&a.lastDateForCurrentRange<b.getTime()){var d=new Date(i().endDate);a.lastDateForCurrentRange=d.setDate(d.getDate()+1)}}a.setEndDateMinDate()}),a.$watch("timetable.endDate",function(){var b=a.timetable.endDate;if(m=m.sort().reverse(),void 0===b){var c=i();void 0!==c&&(a.firstDateForCurrentRange=c.startDate)}else for(var d=0;d<m.length;d++)if(m[d]<=b.getTime()){a.firstDateForCurrentRange=m[d];break}m=m.sort()}),a.$watch("timetable.studyPeriod",function(){a.timetable.studyPeriod&&j()}),a.blockedFromDatesPredicate=function(b){return 0!==m.length&&-1!==m.indexOf(b.getTime())||b.getTime()<a.firstDateForCurrentRange?!1:!0},a.setEndDateMinDate=function(){a.endDateMinDate=a.timetable.startDate?a.timetable.startDate:a.studyPeriodStartDate},a.blockedThruDatesPredicate=function(b){return 0!==m.length&&-1!==m.indexOf(b.getTime())||b.getTime()>a.lastDateForCurrentRange?!1:!0},a.$watch("timetable.studyYear",function(){a.timetable.studyYear&&a.allStudyPeriods&&(a.formState.studyPeriods=a.allStudyPeriods.filter(function(b){return b.studyYear===a.timetable.studyYear}))}),a.save=function(){a.timetableForm.$setSubmitted(),angular.isDefined(k)?(a.timetable.$update({id:k}).then(function(){b.info("main.messages.update.success")}),f.url("/timetable/"+k+"/view")):a.timetable.$save().then(function(a){b.info("timetable.timetableManagement.created"),f.url("/timetable/"+a.id+"/view")})}}]).controller("TimetableViewController",["$scope","message","QueryUtils","DataUtils","$route","$location","$rootScope","Classifier",function(a,b,c,d,e,f,g,h){a.timetableId=e.current.params.id,a.currentLanguageNameField=g.currentLanguageNameField;var i=h.valuemapper({curriculumStudyLevelCode:"OPPEASTE"});c.endpoint("/timetables/:id/view").search({id:a.timetableId},function(b){i.objectmapper(b.curriculums),a.timetable=b,a.timetable.endDate=new Date(a.timetable.endDate),a.timetable.startDate=new Date(a.timetable.startDate)}),a.confirm=function(){c.endpoint("/timetables/"+a.timetableId+"/confirm").put({},function(){e.reload()})},a.publicize=function(){c.endpoint("/timetables/"+a.timetableId+"/publicize").put({},function(){e.reload()})}}]),angular.module("hitsaOis").controller("VocationalTimetablePlanController",["$scope","message","QueryUtils","DataUtils","$route","$location","$rootScope","Classifier","dialogService","ArrayUtils",function(a,b,c,d,e,f,g,h,i,j){function k(b,c,d){if(a.plan=b,a.plan.selectAll=!0,a.plan.journals.sort(function(a,b){return a.id-b.id}),h.setSelectedCodes(a.plan.studentGroups,a.plan.studentGroups.map(function(a){return a.code})),d){a.plan.currentStudentGroups=d;var e=d.map(function(a){return a.code});a.plan.studentGroups.forEach(function(a){-1===e.indexOf(a.code)&&(a._selected=!1)})}else a.plan.currentStudentGroups=a.plan.studentGroups;m(a.plan.studentGroupCapacities,a.plan.studentGroups,a.plan.journals),a.plan.datesForTimetable=[];for(var f=new Date(a.plan.startDate),g=new Date(a.plan.endDate),i=f;g>=i;)a.plan.datesForTimetable.push(i),i=new Date(i.getTime()+864e5);a.plan.lessonTimes.sort(function(a,b){return a.lessonNr-b.lessonNr}),a.lessonsInDay=[];for(var j=0;a.weekday.length>j;j++){var k=a.weekday[j];a.lessonsInDay[k]=a.plan.lessonTimes.filter(function(a){return a[k]===!0});for(var n=[],o=a.lessonsInDay[k].length-1,p=a.lessonsInDay[k];o>=0;)n.includes(p[o].lessonNr)?p.splice(o,1):n.push(p[o].lessonNr),o-=1}for(a.lessonsInDay.sort(function(b,c){return a.weekday.indexOf(b)-a.weekday.indexOf(c)}),a.firstDay=a.weekday[new Date(a.plan.startDate).getDay()],a.dayOrder=a.weekday.slice();a.dayOrder[0]!==a.firstDay;)a.dayOrder[a.dayOrder.length-1]=a.dayOrder.shift();a.currentLessonTimes=[];for(var q=0;a.dayOrder.length>q;q++){for(var r=a.lessonsInDay[a.dayOrder[q]].slice(),s=!1;angular.isDefined(r)&&r.length>0;)s=!0,a.currentLessonTimes.push(r.shift());s||a.currentLessonTimes.push({noLessons:!0})}for(var t={},u={},v=0;a.plan.plannedLessons.length>v;v++){var w=a.plan.plannedLessons[v].studentGroup;angular.isDefined(t[w])||(t[w]={},t[w].id=w,t[w].lessons=[]),t[w].lessons.push(a.plan.plannedLessons[v]),angular.isArray(a.plan.plannedLessons[v].teachers)&&a.plan.plannedLessons[v].teachers.forEach(function(b){angular.isArray(u[b])||(u[b]=[]);var c=u[b].find(function(b){return b.id===a.plan.plannedLessons[v].id});c||u[b].push(a.plan.plannedLessons[v])})}a.plan.plannedLessonsByTeachers=u,a.plan.plannedLessonsByGroup=t,a.plan.selectedGroup=c,l()}function l(){if(angular.isDefined(a.plan.selectedGroup)){a.plan.currentCapacities=a.plan.studentGroupCapacities.filter(function(b){return b.studentGroup===a.plan.selectedGroup}),a.plan.currentCapacities=a.plan.currentCapacities.sort(function(a,b){return a.journal-b.journal});var b=a.plan.currentCapacities.map(function(a){return a.journal});a.plan.currentCapacitiesGrouped=n(a.plan.currentCapacities,"journal"),angular.isDefined(a.plan.journals)&&(a.plan.journals.forEach(function(b,c){b.color=a.journalColors[c]}),a.plan.currentJournals=a.plan.journals.filter(function(a){return-1!==b.indexOf(a.id)})),a.plan.selectedStudentGroupObject=a.plan.studentGroups.find(function(b){return b.id===a.plan.selectedGroup})}}function m(a,b,c){angular.isArray(a)&&angular.isArray(b)&&b.forEach(function(b){b.teachers=[],b.teacherIds=[];var d=a.filter(function(a){return a.studentGroup===b.id});d.forEach(function(a){var d=c.find(function(b){return b.id===a.journal});d.teachers.forEach(function(a){-1===b.teacherIds.indexOf(a.id)&&(b.teacherIds.push(a.id),b.teachers.push(a))})})})}function n(a,b){for(var c,d,e=[],f=[],g=0;g<a.length;g++)c=a[g][b],d=e.indexOf(c),d>-1?f[d].push(a[g]):(e.push(c),f.push([a[g]]));return f}a.isArray=angular.isArray,a.journalColors=["#ffff00","#9fff80","#ff99cc","#E8DAEF","#85C1E9","#D1F2EB","#ABEBC6","#F9E79F","#FAD7A0","#EDBB99","#D5DBDB","#D5D8DC"],a.plan={},a.timetableId=e.current.params.id,a.weekday=["daySun","dayMon","dayTue","dayWed","dayThu","dayFri","daySat"],a.capacityTypes=h.queryForDropdown({mainClassCode:"MAHT"});var o="/timetables";a.currentLanguageNameField=g.currentLanguageNameField,c.endpoint(o+"/:id/createVocationalPlan").search({id:a.timetableId}).$promise.then(function(a){k(a,e.current.params.groupId,null)}),a.$watch("plan.selectedGroup",function(){l()}),a.$watch("plan.selectAll",function(){angular.isDefined(a.plan.selectAll)&&(a.plan.selectAll?h.setSelectedCodes(a.plan.studentGroups,a.plan.studentGroups.map(function(a){return a.code})):h.setSelectedCodes(a.plan.studentGroups,[]),a.updateGroups())}),a.getByJournal=function(b,c){var d=a.plan.currentCapacities.find(function(a){return a.journal===b.id});return d[c]},a.getTotalsByJournal=function(b,c){var d=a.plan.currentCapacities.filter(function(a){return a.journal===b.id}),e=0;return d.forEach(function(a){e+=a[c]}),e},a.getByCapacity=function(b,c){var d=a.plan.currentJournals.find(function(a){return a.id===b.journal});return d[c]},a.getCapacityTypeValue=function(b){var c=a.capacityTypes.find(function(a){return a.code===b});return null!==c?c.value.toUpperCase():""},a.getCapacityType=function(b){return a.capacityTypes.find(function(a){return a.code===b})},a.getCountForCapacity=function(a){return a.thisAllocatedLessons=0,a.thisPlannedLessons-a.thisAllocatedLessons},a.getRoomCodes=function(a){return a.map(function(a){return a.nameEt}).join("-")},a.getEventsForLesson=function(b,c,d){for(var e,f=0,g=0;a.dayOrder.length>g;g++)if(f+=a.lessonsInDay[a.dayOrder[g]].length,f>b){e=a.dayOrder[g];break}if(angular.isDefined(a.plan.plannedLessonsByGroup)&&angular.isDefined(a.plan.plannedLessonsByGroup[d.id])){var h=a.plan.plannedLessonsByGroup[d.id].lessons.filter(function(b){return a.weekday[new Date(b.start).getDay()]===e&&c.lessonNr===b.lessonNr});if(0!==h.length)return h.forEach(function(b){b.journalObject=a.plan.journals.filter(function(a){return a.id===b.journal})[0];var d=a.plan.lessonTimes.filter(function(a){return a[e]===!0&&a.lessonNr===c.lessonNr});if(d.length>1){var f=d.reduce(function(a,b){return a.constructor===Array?a.concat(b.buildingIds):a.buildingIds.concat(b.buildingIds)});f&&(b.buildingIds=f.filter(function(a,b,c){return c.indexOf(a)===b}))}else b.buildingIds=d[0].buildingIds;angular.isArray(b.teachers)||(b.teachers=[]),b.currentTeacherIds=b.journalObject.teachers.filter(function(a){return-1!==b.teachers.indexOf(a.id)}),b.currentTeachers=b.currentTeacherIds.map(function(a){return a.nameEt})}),h}return null},a.getTeacherLesson=function(b,c,d,e){for(var f,g=0,h=0;a.dayOrder.length>h;h++)if(g+=a.lessonsInDay[a.dayOrder[h]].length,g>b){f=a.dayOrder[h];break}var i=[];return d.teachers.forEach(function(b){if(angular.isDefined(a.plan.plannedLessonsByTeachers)&&a.plan.plannedLessonsByTeachers[b.id]){var d=a.plan.plannedLessonsByTeachers[b.id].find(function(b){return a.weekday[new Date(b.start).getDay()]===f&&c.lessonNr===b.lessonNr});d&&(e?i.push(b.nameEt):i.push(b.nameEt.replace(/\b(\S{1,2})\S*/g,"$1").replace(/ /g,"")))}}),i?i:null},a.removeFromArray=j.remove,a.changeEvent=function(d){var e=a.plan.selectedGroup;i.showDialog("timetable/timetable.event.change.dialog.html",function(f){f.lesson=d,f.teachers=d.journalObject.teachers,f.teachers.forEach(function(a){angular.isArray(d.teachers)?a.isTeaching=d.teachers.includes(a.id):a.isTeaching=!0}),f.lessonHeader=d.journalObject.name,f.lessonCapacityName=a.getCapacityType(d.capacityType),f.lesson.startTime=new Date(d.start),f.lesson.endTime=new Date(d.end),d.rooms?f.lesson.eventRooms=d.rooms:f.lesson.eventRooms=[],f.$watch("lesson.eventRoom",function(){if(angular.isDefined(f.lesson.eventRoom)&&null!==f.lesson.eventRoom){if(f.lesson.eventRooms.some(function(a){return a.id===f.lesson.eventRoom.id}))return b.error("timetable.timetablePlan.duplicateroom"),void(f.lesson.eventRoom=void 0);f.lesson.eventRooms.push(f.lesson.eventRoom),f.lesson.eventRoom=null}}),f.deleteEvent=function(b){c.endpoint(o+"/deleteVocationalEvent").save({timetableEventId:b}).$promise.then(function(b){k(b,e,a.plan.currentStudentGroups),f.cancel()})}},function(b){var d={startTime:b.lesson.startTime,endTime:b.lesson.endTime,rooms:b.lesson.eventRooms,timetableEventId:b.lesson.id,teachers:b.teachers.reduce(function(a,b){return b.isTeaching&&a.push(b.id),a},[])};c.endpoint(o+"/saveVocationalEventRoomsAndTimes").save(d).$promise.then(function(b){k(b,e,a.plan.currentStudentGroups)})})},a.saveEvent=function(b){for(var d,e=a.plan.selectedGroup,f=0,g=0;a.dayOrder.length>g;g++)if(f+=a.lessonsInDay[a.dayOrder[g]].length,b.index<f){d=a.dayOrder[g];break}var h=b.journalId,i={journal:h,timetable:a.timetableId,lessonTime:this.lessonTime.id,selectedDay:d,oldEventId:b.oldEventId,capacityType:b.capacityType};c.endpoint(o+"/saveVocationalEvent").save(i).$promise.then(function(b){k(b,e,a.plan.currentStudentGroups)})},a.range=function(a){for(var b=[],c=0;a>c;c++)b.push(c);return b},a.updateGroups=function(){var b=h.getSelectedCodes(a.plan.studentGroups);a.plan.currentStudentGroups=a.plan.studentGroups.filter(function(a){return-1!==b.indexOf(a.code)})}}]),angular.module("hitsaOis").controller("HigherTimetablePlanController",["$scope","message","QueryUtils","DataUtils","$route","$location","$rootScope","Classifier","dialogService","$filter",function(a,b,c,d,e,f,g,h,i,j){function k(b){a.plan=b,a.plan.selectAll=!0,a.plan.capacitiesGrouped=w(a.plan.studentGroupCapacities,"subjectStudyPeriod"),a.plan.colorsBySubjectStudyPeriods=[],a.plan.capacitiesGrouped.forEach(function(b,c){a.plan.colorsBySubjectStudyPeriods.push({subjectStudyPeriod:b[0].subjectStudyPeriod,color:a.colors[c]})}),a.plan.currentStudentGroups=a.plan.studentGroups;var c=o();a.plan.selectedWeek=o()?c:a.plan.weeks[0].start,a.plan.weeks.forEach(function(a){a.startDisplay=j("hoisDate")(a.start)}),a.plan.subjectTeacherPairs.forEach(function(a){a.isSubjectTeacherPair=!0,a.dropdownValue="PAIR-"+a.id,a.originalCode=a.code,a.code=a.code+" - "+a.teacherNamesShort}),a.plan.studentGroups.forEach(function(a){a.dropdownValue="GROU-"+a.id}),l(),u(!0),p(),t(a.plan.studentGroups,!1),t(a.plan.subjectTeacherPairs,!1),s(a.plan.studentGroupCapacities,a.plan.studentGroups),r()}function l(b){angular.isDefined(b)&&(angular.isDefined(b.teacherNamesShort)?a.plan.currentCapacities=a.plan.studentGroupCapacities.filter(function(a){return a.subjectStudyPeriod===b.id}):a.plan.currentCapacities=a.plan.studentGroupCapacities.filter(function(a){return a.studentGroup===b.id}),a.plan.currentCapacities=a.plan.currentCapacities.sort(function(a,b){return a.capacityType-b.capacityType}),a.plan.currentCapacitiesGrouped=w(a.plan.currentCapacities,"subjectStudyPeriod"))}function m(){var b=n();b.sort(function(a,b){return a.code<b.code?-1:a.code>b.code?1:0}),a.plan.currentStudentGroups=b}function n(){var b=[];return a.plan.studentGroups.concat(a.plan.subjectTeacherPairs).forEach(function(a){a._selected&&b.push(a)}),b}function o(){for(var b=new Date,c=0;c<a.plan.weeks.length;c++)if(b.getTime()<new Date(a.plan.weeks[c].end).getTime())return a.plan.weeks[c].start}function p(){a.plan.datesForTimetable=[];var b=new Date(a.plan.selectedWeek),c=new Date(b);c.setDate(b.getDate()+6);for(var d=b;c>=d;)a.plan.datesForTimetable.push(d),d=new Date(d.getTime()+864e5)}function q(){if(angular.isDefined(a.plan.selectedGroup)){var b=a.plan.currentStudentGroups.find(function(b){return b.dropdownValue===a.plan.selectedGroup});l(b),t([b],!0),a.plan.selectedStudentGroupObject=b}}function r(){a.lessonsInDay=[],a.currentLessonTimes=[];for(var b=0;b<a.plan.datesForTimetable.length;b++){var c=0,d=new Date(new Date(a.plan.datesForTimetable[b].getTime()).setHours(7)),e=new Date(d.getTime());for(e=new Date(e.setHours(23));d.getTime()<e.getTime();)a.currentLessonTimes.push(d),c+=1,d=new Date(d.getTime()+y);a.lessonsInDay=c}}function s(a,b){angular.isArray(a)&&angular.isArray(b)&&b.forEach(function(b){b.teachers=[],b.teacherIds=[];var c=a.filter(function(a){return a.studentGroup===b.id});c.forEach(function(a){a.teachers.forEach(function(a){-1===b.teacherIds.indexOf(a.id)&&(b.teacherIds.push(a.id),b.teachers.push(a))})})})}function t(b,c){if(b)for(var d=0;d<b.length;d++){var e=b[d].isSubjectTeacherPair,f=b[d].lessons;if(null!==f)for(var g=0;g<f.length;g++)f[g].start=new Date(f[g].start),f[g].end=new Date(f[g].end);else f=[];var h=new Date(new Date(a.plan.datesForTimetable[0].getTime()).setHours(7)),i=new Date(new Date(a.plan.datesForTimetable[a.plan.datesForTimetable.length-1].getTime()).setHours(23));f=f.filter(function(a){return a.start.getTime()>=h.getTime()&&a.end.getTime()<=i.getTime()}),f=f.sort(function(a,b){return a.start.getTime()-b.start.getTime()});var j={},k=h.getDate()+h.getMonth()+h.getFullYear(),l=0;if(angular.isArray(j[k])||(j[k]=[]),f.length>0)for(var m=0;m<f.length;m++){var n,o=f[m],p=0;if(!(o.start.getHours()<7||o.end.getHours()<7||23===o.start.getHours())){for(;h.toDateString()!==o.start.toDateString();){if(n=new Date(h.getTime()),n.setHours(23),n.setMinutes(0),c)for(;n.getTime()>h.getTime();)j[k].push({start:new Date(h.getTime()),colspan:1,isSubjectTeacherPair:e,subjectStudyPeriod:o.subjectStudyPeriod}),h=new Date(h.getTime()+y);else n.getTime()>h.getTime()&&(p=(n.getTime()-h.getTime())/y,j[k].push({start:new Date(h.getTime()),colspan:p}));h.setDate(h.getDate()+1),h.setHours(7),h.setMinutes(0),k=h.getDate()+h.getMonth()+h.getFullYear(),angular.isArray(j[k])||(j[k]=[])}if(n=new Date(h.getTime()),n.setHours(23),n.setMinutes(0),c)for(;h.getTime()<o.start.getTime();)j[k].push({start:new Date(h.getTime()),colspan:1,isSubjectTeacherPair:e,subjectStudyPeriod:o.subjectStudyPeriod}),h=new Date(h.getTime()+y);else o.start.getTime()>=h.getTime()&&(p=(o.start.getTime()-h.getTime())/y,j[k].push({start:new Date(h.getTime()),colspan:p}));if(o.start.getTime()<=h.getTime()){o.colspan=(o.end.getTime()-o.start.getTime())/y,o.marginleft=(o.start.getTime()-h.getTime())/y;var q=j[k].filter(function(a){return o.start.getTime()>=a.start.getTime()&&o.start.getTime()<a.start.getTime()+a.colspan*y});if(q.length>l){var r=j[k][j[k].length-1];j[k].length>0&&r.topmargin?o.topmargin=r.topmargin+z:o.topmargin=z,l+=1}else l=0}else o.colspan=(o.end.getTime()-o.start.getTime())/y;if(o.end.getTime()>=n.getTime()&&(o.colspan-=(o.end.getTime()-n.getTime())/y),j[k].push(o),h.getTime()<o.end.getTime()&&(h=new Date(o.end.getTime())),f.length-1===m)for(;h.getTime()<i.getTime();){var s=new Date(h.getTime());if(s.setHours(23),s.setMinutes(0),c)for(;s.getTime()>h.getTime();)j[k].push({start:new Date(h.getTime()),colspan:1,isSubjectTeacherPair:e,subjectStudyPeriod:o.subjectStudyPeriod}),h=new Date(h.getTime()+y);else p=(s.getTime()-h.getTime())/y,j[k].push({start:new Date(h.getTime()),colspan:p});h.setDate(h.getDate()+1),h.setHours(7),h.setMinutes(0);var k=h.getDate()+h.getMonth()+h.getFullYear();angular.isArray(j[k])||(j[k]=[])}}}else for(;h.getTime()<=i.getTime();){var t=new Date(h.getTime());if(t.setHours(23),t.setMinutes(0),c)for(;h.getTime()<=t.getTime();)j[k].push({start:new Date(h.getTime()),colspan:1,isSubjectTeacherPair:e}),h=new Date(h.getTime()+y);else{var u=(t.getTime()-h.getTime())/y;j[k].push({start:new Date(h.getTime()),colspan:u})}h.setDate(h.getDate()+1),h.setHours(7),h.setMinutes(0),k=h.getDate()+h.getMonth()+h.getFullYear(),angular.isArray(j[k])||(j[k]=[])}var v;if(angular.isDefined(b[d].teacherNamesShort)){for(var w in j)j[w].forEach(function(a){a.isSubjectTeacherPair=!0});v=a.plan.subjectTeacherPairs.find(function(a){return a.id===b[d].id})}else v=a.plan.studentGroups.find(function(a){return a.id===b[d].id});v.currentLessons=j,v.lessons=b[d].lessons}}function u(b){a.plan.studentGroups.concat(a.plan.subjectTeacherPairs).forEach(function(a){a._selected=b})}function v(b){if(angular.isDefined(a.plan.datesForTimetable)&&a.plan.datesForTimetable.length>0){var c=new Date(new Date(a.plan.datesForTimetable[0].getTime()).setHours(7));a.lessonTimeLegend=[];for(var d=0;d<a.plan.datesForTimetable.length;d++){var e=0,f=a.plan.datesForTimetable[d],g=a.weekday[f.getDay()],h=a.plan.lessonTimes.filter(function(a){return a[g]===!0&&a.buildingIds.includes(Number(b))&&(Number(a.startTime.substr(0,2))<23||7===Number(a.startTime.substr(0,2))&&0===Number(a.startTime.substr(3,2)))&&(Number(a.endTime.substr(0,2))&&0===Number(a.endTime.substr(3,2))||Number(a.endTime.substr(0,2))<23)});h.forEach(function(a){a.lessonDateStart=new Date(f.getTime()),a.lessonDateStart.setHours(a.startTime.substr(0,2),a.startTime.substr(3,2)),a.lessonDateEnd=new Date(f.getTime()),a.lessonDateEnd.setHours(a.endTime.substr(0,2),a.endTime.substr(3,2))}),h=h.sort(function(a,b){return a.lessonDateStart.getTime()-b.lessonDateStart.getTime()});for(var i=0;i<h.length;i++){e=0;var j=h[i];i>0&&j.lessonDateStart.getTime()<h[i-1].lessonDateEnd.getTime()&&j.lessonDateEnd.getTime()<=h[i-1].lessonDateEnd.getTime()||(j.lessonDateStart.getTime()>c.getTime()&&(e=(j.lessonDateStart.getTime()-c.getTime())/y,a.lessonTimeLegend.push({colspan:e})),e=i>0&&j.lessonDateStart.getTime()<h[i-1].lessonDateEnd.getTime()?(h[i-1].lessonDateEnd.getTime()-j.lessonDateEnd.getTime())/y:(j.lessonDateEnd.getTime()-j.lessonDateStart.getTime())/y,a.lessonTimeLegend.push({lessonNr:j.lessonNr,colspan:e}),j.lessonDateEnd.getTime()>c.getTime()&&(c=new Date(j.lessonDateEnd.getTime())))}var k=new Date(c.getTime());k.setHours(23),k.setMinutes(0),e=(k.getTime()-c.getTime())/y,a.lessonTimeLegend.push({colspan:e}),c.setDate(c.getDate()+1),c.setHours(7),c.setMinutes(0)}}}function w(a,b){for(var c,d,e=[],f=[],g=0;g<a.length;g++)c=a[g][b],d=e.indexOf(c),d>-1?f[d].push(a[g]):(e.push(c),f.push([a[g]]));return f}var x=6e4,y=15*x,z=17;a.colors=["#ffff00","#9fff80","#ff99cc","#E8DAEF","#85C1E9","#D1F2EB","#ABEBC6","#F9E79F","#FAD7A0","#EDBB99","#D5DBDB","#D5D8DC"],a.plan={},a.timetableId=e.current.params.id,a.weekday=["daySun","dayMon","dayTue","dayWed","dayThu","dayFri","daySat"],a.capacityTypes=h.queryForDropdown({mainClassCode:"MAHT"});var A="/timetables";a.currentLanguageNameField=g.currentLanguageNameField,c.endpoint(A+"/:id/createHigherPlan").search({id:a.timetableId},k),a.$watch("plan.selectedGroup",function(){q()}),a.$watch("plan.selectAll",function(){angular.isDefined(a.plan.selectAll)&&(u(a.plan.selectAll),m())}),a.$watch("plan.selectedWeek",function(){p(),t(a.plan.studentGroups,!1),t(a.plan.subjectTeacherPairs,!1),r(),q()}),a.$watch("plan.lessonTimeBuilding",function(){v(a.plan.lessonTimeBuilding)}),a.getColorBySubjectStudyPeriod=function(b){var c=a.plan.colorsBySubjectStudyPeriods.find(function(a){return a.subjectStudyPeriod===b});return c?c.color:""},a.getCapacityTypeValue=function(b){var c=a.capacityTypes.find(function(a){return a.code===b});return null!==c?c.value.toUpperCase():""},a.getCapacityType=function(b){return a.capacityTypes.find(function(a){return a.code===b})},a.getCountForCapacity=function(a){return a.thisAllocatedLessons=0,a.thisPlannedLessons-a.thisAllocatedLessons},a.getRoomCodes=function(a){return a.map(function(a){return a.nameEt}).join("-")},a.boldAndRed=function(a){return angular.isArray(a)&&(a=0===a.length?!0:!1),!angular.isDefined(a)||null===a||a?{"font-weight":"bold",color:"red"}:""},a.lessonTimeStyle=function(b){var c={};return c["background-color"]=b.id?a.getColorBySubjectStudyPeriod(b.subjectStudyPeriod):"transparent",c.width=(100/a.lessonsInDay*b.colspan).toString()+"%",b.marginleft&&(c["margin-left"]=(100/a.lessonsInDay*b.marginleft).toString()+"%"),b.topmargin&&(c["margin-top"]=b.topmargin.toString()+"px"),b.id||(c.height="100%"),c},a.getEventForLessonTime=function(a,b){var c;return null!==b&&(c=b.find(function(b){return new Date(b.start).getTime()===a.getTime()})),c},a.changeEvent=function(d){if(d.id){var e=a.plan.studentGroupCapacities.find(function(a){return a.subjectStudyPeriod===d.subjectStudyPeriod});i.showDialog("timetable/timetable.event.change.dialog.html",function(f){f.lesson=d,f.teachers=e.teachers,f.teachers.forEach(function(a){angular.isArray(d.teachers)?a.isTeaching=d.teachers.includes(a.id):a.isTeaching=!0}),f.lessonHeader=e.subjectName+", "+e.teachers.map(function(a){return a.nameEt}).join(", "),f.lessonCapacityName=a.getCapacityType(d.capacityType),f.lesson.startTime=new Date(d.start),f.lesson.endTime=new Date(d.end),f.lesson.eventRooms=d.rooms?d.rooms:[],f.$watch("lesson.eventRoom",function(){if(angular.isDefined(f.lesson.eventRoom)&&null!==f.lesson.eventRoom){if(f.lesson.eventRooms.some(function(a){return a.id===f.lesson.eventRoom.id}))return b.error("timetable.timetablePlan.duplicateroom"),void(f.lesson.eventRoom=void 0);f.lesson.eventRooms.push(f.lesson.eventRoom),f.lesson.eventRoom=null}}),f.deleteEvent=function(b){c.endpoint(A+"/deleteHigherEvent").save({timetableEventId:b}).$promise.then(function(b){var c;c=d.isSubjectTeacherPair?b.subjectTeacherPairs.find(function(a){return a.id===d.subjectStudyPeriod}):b.studentGroups.find(function(a){return a.id===d.studentGroup}),t([c],!0),a.plan.studentGroupCapacities=b.studentGroupCapacities,q(),f.cancel()})}},function(b){var e={startTime:b.lesson.startTime,endTime:b.lesson.endTime,rooms:b.lesson.eventRooms,timetableEventId:b.lesson.id,teachers:b.teachers.reduce(function(a,b){return b.isTeaching&&a.push(b.id),a},[])};c.endpoint(A+"/saveHigherEventRoomsAndTimes").save(e).$promise.then(function(b){var c;c=d.isSubjectTeacherPair?b.subjectTeacherPairs.find(function(a){return a.id===d.subjectStudyPeriod}):b.studentGroups.find(function(a){return a.id===d.studentGroup}),t([c],!0),a.plan.studentGroupCapacities=b.studentGroupCapacities,q()})})}},a.saveEventAfterClashCheck=function(b){var c=this.lessonTime.isSubjectTeacherPair?!0:!1,d=this.lessonTime.start,e=a.plan.studentGroupCapacities.filter(function(a){return a.subjectStudyPeriod===Number(b.journalId)&&a.capacityType===b.capacityType});e.length>1?i.confirmDialog({prompt:"timetable.timetablePlan.addForOtherGroups",accept:"main.yes",cancel:"main.no"},function(){a.saveEventAfterCheck(b,!0,c,d)},function(){a.saveEventAfterCheck(b,!1,c,d)}):a.saveEventAfterCheck(b,!1,c,d)},a.saveEventAfterCheck=function(b,d,e,f){var g={timetable:a.timetableId,oldEventId:b.oldEventId,startTime:f,capacityType:b.capacityType,subjectStudyPeriod:b.journalId,studentGroupId:a.plan.selectedGroup.substr(5),repeatCode:a.plan.repeatCode,lessonAmount:a.plan.lessonAmount,room:a.plan.eventRoom,isSubjectTeacherPair:e,isForAllGroups:d};c.endpoint(A+"/saveHigherEvent").save(g).$promise.then(function(b){var c;c=e?b.subjectTeacherPairs.find(function(b){return b.id===Number(a.plan.selectedGroup.substr(5))}):b.studentGroups.find(function(b){return b.id===Number(a.plan.selectedGroup.substr(5))}),d&&t(b.studentGroups,!1),t([c],!0),a.plan.studentGroupCapacities=b.studentGroupCapacities,q()})},a.range=function(a){for(var b=[],c=0;a>c;c++)b.push(c);return b},a.updateGroups=function(){m()},a.updatePairs=function(){m()}}]),function(){angular.module("hitsaOis").factory("GeneralTimetableUtils",[function(){var a=function(){this.getCurrentWeekIndex=function(a){for(var b=moment(),c=0;c<=a.length-1;c++){var d=moment(a[c].start).set({hour:0,minute:0,second:0,millisecond:0}),e=moment(a[c].end).set({hour:0,minute:0,second:0,millisecond:0});if(moment(b).isBetween(d,e))return c}}};return a}]).controller("GeneralTimetableSearchController",["$scope","$route","message","QueryUtils","GeneralTimetableUtils",function(a,b,c,d,e){a.currentNavItem="search",a.generalTimetableUtils=new e,a.auth=b.current.locals.auth,a.schoolId=a.auth.school.id,a.formState={},d.endpoint("/timetables/timetableStudyYearWeeks/"+a.schoolId).query().$promise.then(function(b){a.weeks=b;var c=a.generalTimetableUtils.getCurrentWeekIndex(a.weeks);a.shownWeek=a.weeks[c]}),a.search=function(){a.shownWeek&&(a.criteria.room||a.criteria.teachers||a.criteria.studentGroups||a.criteria.subject?d.endpoint("/timetableevents/timetableSearch").query({room:a.criteria.room,teachers:a.criteria.teachers,studentGroups:a.criteria.studentGroups,journalOrSubjectId:a.criteria.subject,from:a.shownWeek.start,thru:a.shownWeek.end}).$promise.then(function(b){a.searchResultEvents=b}):a.searchResultEvents=null)},a.clearCriteria=function(){a.criteria={}},a.$watch("criteria.roomObject",function(){a.criteria.room=a.criteria.roomObject?a.criteria.roomObject.id:null}),a.$watch("criteria.teacher",function(){a.criteria.teachers=a.criteria.teacher?a.criteria.teacher.id:null}),a.$watch("criteria.studentGroup",function(){a.criteria.studentGroups=a.criteria.studentGroup?a.criteria.studentGroup.id:null}),a.$watch("criteria.subjectObject",function(){a.criteria.subject=a.criteria.subjectObject?a.criteria.subjectObject.id:null}),d.createQueryForm(a,"/timetableevents",{order:"id"})}]).controller("GeneralTimetableByGroupController",["$scope","$route","QueryUtils","GeneralTimetableUtils",function(a,b,c,d){a.currentNavItem="studentGroup",a.auth=b.current.locals.auth,a.generalTimetableUtils=new d,a.schoolId=null==a.auth?b.current.params.schoolId:a.auth.school.id;var e="/timetables/group/"+a.schoolId;c.endpoint("/timetables/timetableStudyYearWeeks/"+a.schoolId).query().$promise.then(function(b){a.weeks=b;var c=a.generalTimetableUtils.getCurrentWeekIndex(a.weeks);a.shownWeek=a.weeks[c]}),c.endpoint(e).query().$promise.then(function(b){a.groupTimetables=b}),a.showGroupWeek=function(b){a.typeId=b}}]).controller("GeneralTimetableByTeacherController",["$scope","$route","QueryUtils","GeneralTimetableUtils",function(a,b,c,d){a.currentNavItem="teacher",a.auth=b.current.locals.auth,a.generalTimetableUtils=new d,a.schoolId=null==a.auth?b.current.params.schoolId:a.auth.school.id;var e="/timetables/teacher/"+a.schoolId;c.endpoint("/timetables/timetableStudyYearWeeks/"+a.schoolId).query().$promise.then(function(b){a.weeks=b;var c=a.generalTimetableUtils.getCurrentWeekIndex(a.weeks);a.shownWeek=a.weeks[c]}),c.endpoint(e).query().$promise.then(function(b){a.timetablesByTeachers=b}),a.showTeacherWeek=function(b){a.typeId=b}}]).controller("GeneralTimetableByRoomController",["$scope","$route","QueryUtils","GeneralTimetableUtils",function(a,b,c,d){a.currentNavItem="room",a.auth=b.current.locals.auth,a.generalTimetableUtils=new d,a.schoolId=null==a.auth?b.current.params.schoolId:a.auth.school.id;var e="/timetables/room/"+a.schoolId;c.endpoint("/timetables/timetableStudyYearWeeks/"+a.schoolId).query().$promise.then(function(b){
a.weeks=b;var c=a.generalTimetableUtils.getCurrentWeekIndex(a.weeks);a.shownWeek=a.weeks[c]}),c.endpoint(e).query().$promise.then(function(b){a.timetablesByRooms=b}),a.showRoomWeek=function(b){a.typeId=b}}]).controller("PersonalGeneralTimetableController",["$scope","$route","QueryUtils","GeneralTimetableUtils",function(a,b,c,d){if(a.currentNavItem="personal",a.auth=b.current.locals.auth,a.generalTimetableUtils=new d,a.schoolId=a.auth.school.id,a.auth.isStudent()||a.auth.isParent())var e=a.auth.student;else if(a.auth.isTeacher())var e=a.auth.teacher;a.typeId=e,a.$watch("timetableId",function(){a.timetables&&(a.shownTimetableIndex=getShownTimetableIndex(a.timetables,a.timetableId),a.shownStudyPeriodId=a.timetables[a.shownTimetableIndex].studyPeriodId)})}]).controller("GeneralTimetableSchoolListController",["$scope","School","$location",function(a,b,c){a.schools=b.getSchoolsWithLogo(),a.openSchoolGeneralTimetable=function(a){c.path("timetable/generalTimetableByGroup/"+a)}}])}(),function(){function a(a){a.shownWeek&&(a.weekIndex=a.shownWeek.weekNr,a.previousWeekIndex=a.weeks[a.weekIndex-1]?a.weekIndex-1:null,a.nextWeekIndex=a.weeks[a.weekIndex+1]?a.weekIndex+1:null)}function b(a,b){a.timetableEvents=b;for(var c=0;c<b.length;c++){var d=b[c],e=moment(d.date).isoWeekday()-1,f=moment.duration(moment(d.timeEnd,"HH:mm").diff(moment(d.timeStart,"HH:mm"))).asMinutes(),g=l*(f/j),h=moment.duration(moment(d.timeStart,"HH:mm").diff(moment(k,"HH:mm"))).asMinutes(),i=l*(h/j)+m;moment(d.date).isBetween(moment(a.shownWeek.start),moment(a.shownWeek.end),"day","[]")&&a.weekColumns[e].events.push({nameEt:d.nameEt,nameEn:d.nameEn,timeStart:d.timeStart,timeEnd:d.timeEnd,rowHeight:g,top:i,column:1,rooms:d.rooms,teachers:d.teachers,studentGroups:d.studentGroups,"public":d.publicEvent,journalId:d.journalId,subjectStudyPeriodId:d.subjectStudyPeriodId,showStudyMaterials:d.showStudyMaterials})}}function c(a){var b=[];b.push("");for(var c=0;64>=c;c++){var d=moment(k,"HH:mm").add(j*c,"m"),e=moment(d).format("HH:mm");b.push(e)}a.timeColumn=b}function d(a){for(var b=[],c=["dayMon","dayTue","dayWed","dayThu","dayFri","daySat","daySun"],d=0;d<c.length;d++)b.push({name:c[d],column:d+1,events:[],date:moment(a.shownWeek.start).add(d,"days").toDate(),today:moment().format("DD.MM.YYYY")===moment(a.shownWeek.start).add(d,"days").format("DD.MM.YYYY")?!0:!1});a.weekColumns=b}function e(a,b,c){a.directRoute=!1,c&&(a.directRoute=!0,a.$parent.typeId=c,b.current.params.weekIndex&&(a.weekIndex=b.current.params.weekIndex))}function f(a,b,c){a.typeId=b,a.weekIndex=c,a.shownWeek=a.weeks[c]}function g(a,e){c(a),d(a),b(a,e)}function h(a){var b=new Blob([a.content],{type:"text/ics"}),c=a.filename+".ics";i(c,b)}function i(a,b){if(window.navigator.msSaveOrOpenBlob)window.navigator.msSaveBlob(b,a);else{var c=window.document.createElement("a");c.href=window.URL.createObjectURL(b),c.download=a,document.body.appendChild(c),c.click(),document.body.removeChild(c)}}var j=15,k="7:00",l=22,m=50;angular.module("hitsaOis").controller("SearchTimetableViewController",["$scope","$route","QueryUtils","GeneralTimetableUtils",function(b,c,d,i){function j(){b.weekCriteria=[],b.weekCriteria.room=b.criteria.room,b.weekCriteria.teachers=b.criteria.teachers,b.weekCriteria.studentGroups=b.criteria.studentGroups,b.weekCriteria.subject=b.criteria.subject}function k(){b.shownWeek&&d.endpoint("/timetableevents/timetableSearch").query({room:b.weekCriteria.room,teachers:b.weekCriteria.teachers,studentGroups:b.weekCriteria.studentGroups,journalOrSubjectId:b.weekCriteria.subject,from:b.shownWeek.start,thru:b.shownWeek.end}).$promise.then(function(a){b.shownEvents=a,l()})}function l(){b.shownWeek&&b.shownEvents&&g(b,b.shownEvents)}b.generalTimetableUtils=new i,b.timetableSearch=!0,b.$watch("searchResultEvents",function(){b.searchResultEvents&&(e(b,c,c.current.params.groupId),j(),b.shownEvents=b.searchResultEvents,b.weeks?(b.weekIndex||(b.weekIndex=b.generalTimetableUtils.getCurrentWeekIndex(b.weeks)),b.shownWeek=b.weeks[b.weekIndex],a(b),l()):d.endpoint("/timetables/timetableStudyYearWeeks/"+b.schoolId).query().$promise.then(function(c){b.weeks=c,b.weekIndex||(b.weekIndex=b.generalTimetableUtils.getCurrentWeekIndex(b.weeks)),b.shownWeek=b.weeks[b.weekIndex],a(b),l()}))}),b.previousWeek=function(c,d){f(b,c,d),a(b),k()},b.nextWeek=function(c,d){f(b,c,d),a(b),k()},b.generateCalendar=function(){b.shownWeek&&d.endpoint("/timetableevents/timetableSearch/calendar").search({room:b.weekCriteria.room,teachers:b.weekCriteria.teachers,studentGroups:b.weekCriteria.studentGroups,journalOrSubjectId:b.weekCriteria.subject,from:b.shownWeek.start,thru:b.shownWeek.end,lang:b.currentLanguage()}).$promise.then(function(a){h(a)})}}]).controller("GroupTimetableViewController",["$scope","$route","QueryUtils","GeneralTimetableUtils",function(b,c,d,i){function j(){b.shownWeek&&d.endpoint(k).search({studentGroups:[b.$parent.typeId],from:b.shownWeek.start,thru:b.shownWeek.end}).$promise.then(function(a){b.shownTimetable=a.generalTimetable,b.shownTimetableCurriculum=a.generalTimetableCurriculum,g(b,a.timetableEvents)})}b.timetableType="group",b.generalTimetableUtils=new i,b.auth=c.current.locals.auth,b.schoolId=void 0===b.auth?c.current.params.schoolId:b.auth.school.id;var k="/timetableevents/timetableByGroup/"+b.schoolId,l="/timetableevents/timetableByGroup/calendar/"+b.schoolId;b.$watchGroup(["$parent.typeId"],function(){e(b,c,c.current.params.groupId),b.$parent.typeId&&(b.weeks?(b.weekIndex||(b.weekIndex=b.generalTimetableUtils.getCurrentWeekIndex(b.weeks)),b.shownWeek=b.weeks[b.weekIndex],a(b),j()):d.endpoint("/timetables/timetableStudyYearWeeks/"+b.schoolId).query().$promise.then(function(c){b.weeks=c,b.weekIndex||(b.weekIndex=b.generalTimetableUtils.getCurrentWeekIndex(b.weeks)),b.shownWeek=b.weeks[b.weekIndex],a(b),j()}))}),b.previousWeek=function(c,d){f(b,c,d),a(b),j()},b.nextWeek=function(c,d){f(b,c,d),a(b),j()},b.emptyParentVariable=function(){b.$parent.typeId=null},b.generateCalendar=function(){b.shownWeek&&b.$parent.typeId&&d.endpoint(l).search({studentGroups:[b.$parent.typeId],from:b.weeks[0].start,thru:b.weeks[b.weeks.length-1].end,lang:b.currentLanguage()}).$promise.then(function(a){h(a)})}}]).controller("TeacherTimetableViewController",["$scope","$route","QueryUtils","GeneralTimetableUtils",function(b,c,d,i){function j(){b.shownWeek&&d.endpoint(k).search({teachers:[b.$parent.typeId],from:b.shownWeek.start,thru:b.shownWeek.end}).$promise.then(function(a){b.shownTimetable=a.generalTimetable,b.shownTeacher={firstname:a.firstname,lastname:a.lastname},g(b,a.timetableEvents)})}b.timetableType="teacher",b.generalTimetableUtils=new i,b.auth=c.current.locals.auth,b.schoolId=void 0===b.auth?c.current.params.schoolId:b.auth.school.id;var k="/timetableevents/timetableByTeacher/"+b.schoolId,l="/timetableevents/timetableByTeacher/calendar/"+b.schoolId;b.$watchGroup(["$parent.typeId"],function(){e(b,c,c.current.params.teacherId),b.$parent.typeId&&(b.weeks?(b.weekIndex||(b.weekIndex=b.generalTimetableUtils.getCurrentWeekIndex(b.weeks)),b.shownWeek=b.weeks[b.weekIndex],a(b),j()):d.endpoint("/timetables/timetableStudyYearWeeks/"+b.schoolId).query().$promise.then(function(c){b.weeks=c,b.weekIndex||(b.weekIndex=b.generalTimetableUtils.getCurrentWeekIndex(b.weeks)),b.shownWeek=b.weeks[b.weekIndex],a(b),j()}))}),b.previousWeek=function(c,d){f(b,c,d),a(b),j()},b.nextWeek=function(c,d){f(b,c,d),a(b),j()},b.emptyParentVariable=function(){b.$parent.typeId=null},b.generateCalendar=function(){b.shownWeek&&b.$parent.typeId&&d.endpoint(l).search({teachers:[b.$parent.typeId],from:b.weeks[0].start,thru:b.weeks[b.weeks.length-1].end,lang:b.currentLanguage()}).$promise.then(function(a){h(a)})}}]).controller("RoomTimetableViewController",["$scope","$route","QueryUtils","GeneralTimetableUtils",function(b,c,d,i){function j(){b.shownWeek&&d.endpoint(k).search({room:b.$parent.typeId,from:b.shownWeek.start,thru:b.shownWeek.end}).$promise.then(function(a){b.shownTimetable=a.generalTimetable,b.shownRoom={roomCode:a.roomCode,buildingCode:a.buildingCode},g(b,a.timetableEvents)})}b.timetableType="room",b.generalTimetableUtils=new i,b.auth=c.current.locals.auth,b.schoolId=void 0===b.auth?c.current.params.schoolId:b.auth.school.id;var k="/timetableevents/timetableByRoom/"+b.schoolId,l="/timetableevents/timetableByRoom/calendar/"+b.schoolId;b.$watchGroup(["$parent.typeId"],function(){e(b,c,c.current.params.roomId),b.$parent.typeId&&(b.weeks?(b.weekIndex||(b.weekIndex=b.generalTimetableUtils.getCurrentWeekIndex(b.weeks)),b.shownWeek=b.weeks[b.weekIndex],a(b),j()):d.endpoint("/timetables/timetableStudyYearWeeks/"+b.schoolId).query().$promise.then(function(c){b.weeks=c,b.weekIndex||(b.weekIndex=b.generalTimetableUtils.getCurrentWeekIndex(b.weeks)),b.shownWeek=b.weeks[b.weekIndex],a(b),j()}))}),b.previousWeek=function(c,d){f(b,c,d),a(b),j()},b.nextWeek=function(c,d){f(b,c,d),a(b),j()},b.emptyParentVariable=function(){b.$parent.typeId=null},b.generateCalendar=function(){b.shownWeek&&b.$parent.typeId&&d.endpoint(l).search({room:b.$parent.typeId,from:b.weeks[0].start,thru:b.weeks[b.weeks.length-1].end,lang:b.currentLanguage()}).$promise.then(function(a){h(a)})}}]).controller("StudentTimetableViewController",["$scope","$route","QueryUtils","GeneralTimetableUtils",function(b,c,d,e){function i(){b.shownWeek&&d.endpoint("/timetableevents/timetableByStudent").search({student:b.typeId,from:b.shownWeek.start,thru:b.shownWeek.end,higher:b.auth.higher,vocational:b.auth.vocational}).$promise.then(function(a){b.shownTimetable=a.generalTimetable,g(b,a.timetableEvents)})}b.timetableType="student",b.generalTimetableUtils=new e,b.auth=c.current.locals.auth,b.schoolId=b.auth.school.id,b.$watchGroup(["$parent.typeId"],function(){(b.auth.isStudent()||b.auth.isParent()||b.auth.isAdmin())&&b.$parent.typeId&&(b.weeks?(b.weekIndex||(b.weekIndex=b.generalTimetableUtils.getCurrentWeekIndex(b.weeks)),b.shownWeek=b.weeks[b.weekIndex],a(b),i()):d.endpoint("/timetables/timetableStudyYearWeeks/"+b.schoolId).query().$promise.then(function(c){b.weeks=c,b.weekIndex||(b.weekIndex=b.generalTimetableUtils.getCurrentWeekIndex(b.weeks)),b.shownWeek=b.weeks[b.weekIndex],a(b),i()}))}),b.previousWeek=function(c,d){f(b,c,d),a(b),i()},b.nextWeek=function(c,d){f(b,c,d),a(b),i()},b.emptyParentVariable=function(){b.$parent.typeId=null},b.generateCalendar=function(){b.shownWeek&&b.$parent.typeId&&d.endpoint("/timetableevents/timetableByStudent/calendar").search({student:b.typeId,higher:b.auth.higher,vocational:b.auth.vocational,from:b.weeks[0].start,thru:b.weeks[b.weeks.length-1].end,lang:b.currentLanguage()}).$promise.then(function(a){h(a)})}}])}(),angular.module("hitsaOis").controller("TimetableEventEditController",["$scope","message","QueryUtils","DataUtils","$route","$location","$rootScope","Classifier","dialogService",function(a,b,c,d,e,f,g,h,i){function j(b){b.startTime=new Date(b.startTime),b.endTime=new Date(b.endTime),a.timetableEvent=b}var k="/timetableevents",l=c.endpoint(k),m=e.current.params.id;m?(a.timetableEvent=l.get({id:m}),a.timetableEvent.$promise.then(j)):a.timetableEvent=new l,a.save=function(){return a.eventForm.$setSubmitted(),a.eventForm.$valid?void(m?a.timetableEvent.$update().then(j).then(b.updateSuccess):a.timetableEvent.$save().then(function(){b.info("main.messages.create.success"),f.url("/lessonplans/events?_menu")})):void b.error("main.messages.form-has-errors")},a["delete"]=function(){i.confirmDialog({prompt:"timetable.deleteConfirm",accept:"main.yes",cancel:"main.no"},function(){a.timetableEvent.$delete().then(function(){b.info("main.messages.delete.success"),f.url("/lessonplans/events?_noback")})["catch"](angular.noop)})},a.$watch("timetableEvent.teacher",function(){angular.isDefined(a.timetableEvent.teacher)&&null!==a.timetableEvent.teacher&&a.addTeacher()}),a.addTeacher=function(){return angular.isArray(a.timetableEvent.teachers)||(a.timetableEvent.teachers=[]),a.timetableEvent.teachers.some(function(b){return b.id===a.timetableEvent.teacher.id})?void b.error("timetable.timetableEvent.duplicateTeacher"):(a.timetableEvent.teachers.push(a.timetableEvent.teacher),void(a.timetableEvent.teacher=void 0))},a.deleteTeacher=function(b){var c=a.timetableEvent.teachers.indexOf(b);-1!==c&&a.timetableEvent.teachers.splice(c,1)},a.$watch("timetableEvent.room",function(){angular.isDefined(a.timetableEvent.room)&&null!==a.timetableEvent.room&&a.addRoom()}),a.addRoom=function(){return angular.isArray(a.timetableEvent.rooms)||(a.timetableEvent.rooms=[]),a.timetableEvent.rooms.some(function(b){return b.id===a.timetableEvent.room.id})?void b.error("timetable.timetableEvent.duplicateroom"):(a.timetableEvent.rooms.push(a.timetableEvent.room),void(a.timetableEvent.room=void 0))},a.deleteRoom=function(b){var c=a.timetableEvent.rooms.indexOf(b);-1!==c&&a.timetableEvent.rooms.splice(c,1)}}]),function(){function a(a,b){a.vocationalHigher="";var c=[];a.teacher.isVocational&&c.push("teacher.isVocational"),a.teacher.isHigher&&c.push("teacher.isHigher"),b(c).then(function(b){a.vocationalHigher=Object.keys(b).map(function(a){return b[a]}).join("; ")})}function b(a,b,c){a[b]=a[b].filter(function(a){return a!==c})}angular.module("hitsaOis").controller("TeacherEditController",["$location","$route","$translate","$scope","dialogService","message","DataUtils","QueryUtils",function(c,d,e,f,g,h,i,j){function k(){a(f,e),f.currentNavItem="teacher.data",f.teacher.person.idcode&&11===f.teacher.person.idcode.length&&(f.teacher.person.sex=i.sexFromIdcode(f.teacher.person.idcode)),f.teacher.person.idcode&&11===f.teacher.person.idcode.length&&(f.teacher.person.birthdate=i.birthdayFromIdcode(f.teacher.person.idcode)),i.convertStringToDates(f.teacher.teacherPositionEhis,["contractStart","contractEnd"]),f.isHigher=f.teacher.isHigher,i.convertStringToDates(f.teacher.person,["birthdate"]),f.formState={person:!0,id:!0}}var l=d.current.locals.auth,m=d.current.params.id,n="/teachers",o=j.endpoint(n),p=j.endpoint("/teachers/"+m+"/ehisPositions"),q=j.endpoint("/school/generateEmail",{post:{method:"POST"}}),r=l.school,s=r&&r.higher&&!r.vocational;f.occupations=j.endpoint("/school/teacheroccupations/all").query(),f.lookupFailure=function(){f.cleanReadOnly(),f.formState={person:!1,id:!0},f.teacher.person.sex=i.sexFromIdcode(f.teacher.person.idcode),f.teacher.person.birthdate=i.birthdayFromIdcode(f.teacher.person.idcode),f.teacherForm.idcode.$setValidity("teacherIdCode",!0)},m?f.teacher=o.get({id:m},k):f.teacher=new o({isActive:!0,isStudyPeriodScheduleLoad:!0,person:{citizenship:"RIIK_EST"}}),angular.isArray(f.teacher.teacherPositionEhis)||(f.teacher.teacherPositionEhis=[]),f.newTeacherPositionEhis=function(){f.teacher.teacherPositionEhis.push({isVocational:!s,isTeacher:s,language:"EHIS_OPETAJA_KEEL_E"})},f.maxDate=new Date,f.cleanReadOnly=function(){f.formState={person:!1,id:!1},f.teacher.person.citizenship="RIIK_EST",f.teacher.person.firstname="",f.teacher.person.lastname="",f.teacher.person.nativeLanguage="",f.teacher.person.birthdate=null,f.teacher.person.sex=null,f.teacher.email=void 0,f.oldFoundPerson&&f.oldFoundPerson.idcode&&f.oldFoundPerson.idcode===f.teacher.person.idcode&&f.lookupPerson(f.oldFoundPerson)},f.lookupPerson=function(a){f.oldFoundPerson=a,a.citizenship&&(f.teacher.person.citizenship=a.citizenship),f.teacher.person.firstname=a.firstname,f.teacher.person.lastname=a.lastname,f.teacher.person.nativeLanguage=a.nativeLanguage,f.teacher.person.birthdate=a.birthdate,f.teacher.person.sex=a.sex,f.teacher.email=a.schoolEmail||void 0,f.teacherForm.idcode.$setValidity("teacherIdCode",null===a.teacherId),k(),f.generateEmail()},f["delete"]=function(){g.confirmDialog({prompt:"teacher.deleteConfirm"},function(){f.teacher.$delete().then(function(){h.info("main.messages.delete.success"),c.url(n+"?_noback")})["catch"](angular.noop)})},f.update=function(){if(f.teacherForm.$setSubmitted(),!f.teacherForm.$valid)return void h.error("main.messages.form-has-errors");if(f.teacher.id){var a=l.isTeacher()?function(){c.url(n+"/myData?_noback")}:k;f.teacher.$update().then(a).then(h.updateSuccess)["catch"](angular.noop)}else f.teacher.$save().then(function(a){h.info("main.messages.create.success"),c.url(n+"/"+a.id+"/edit?_noback")})["catch"](angular.noop)},f.sendToEhis=function(){return f.teacherForm.$setSubmitted(),f.teacherForm.$valid?void g.confirmDialog({prompt:"teacher.ehisconfirm"},function(){j.endpoint(n+"/"+f.teacher.id+"/sendToEhis").put({},f.teacher).$promise.then(function(){h.info("teacher.sentToEhis"),c.url(n+"/"+f.teacher.id+"/edit?_noback")})["catch"](angular.noop)}):void h.error("main.messages.form-has-errors")},f.deleteEhisPosition=function(a){g.confirmDialog({prompt:"teacher.teacherPositionEhis.deleteConfirm"},function(){a.id?(a=new p(a),a.$delete().then(function(){h.info("main.messages.delete.success"),f.teacher.teacherPositionEhis=f.teacher.teacherPositionEhis.filter(function(b){return b.id!==a.id})})["catch"](angular.noop)):b(f.teacher,"teacherPositionEhis",a)})};var t;f.generateEmail=function(){f.teacher.id||t!==f.teacher.email&&void 0!==f.teacher.email||!f.teacher.person||!f.teacher.person.lastname||q.post({firstname:f.teacher.person.firstname,lastname:f.teacher.person.lastname}).$promise.then(function(a){f.teacher.email=t=a.email},function(){})}}]).controller("TeacherContinuingEducationEditController",["$location","$route","$translate","$scope","dialogService","message","QueryUtils",function(c,d,e,f,g,h,i){function j(){a(f,e),f.currentNavItem="teacher.continuingEducation",f.isHigher=f.teacher.isHigher,k(f.teacher)}function k(a){a.teacherContinuingEducations&&(f.teacherContinuingEducations=new n({continuingEducations:a.teacherContinuingEducations}),a.teacherContinuingEducations=void 0)}var l=d.current.params.id,m=i.endpoint("/teachers"),n=i.endpoint("/teachers/"+l+"/continuingEducations");l?f.teacher=m.get({id:l},j):f.teacher=new m({isActive:!0,isStudyPeriodScheduleLoad:!0,person:{citizenship:"RIIK_EST"}}),f.teacher.teacherContinuingEducations&&angular.isArray(f.continuingEducations)||(f.teacher.teacherContinuingEducations=[],k(f.teacher)),f.newTeacherContinuingEducation=function(){f.teacherContinuingEducations.continuingEducations.push({})},f.updateContinuingEducations=function(){f.continuingEducationsForm.$setSubmitted(),f.continuingEducationsForm.$valid&&f.teacherContinuingEducations.$update().then(function(a){h.updateSuccess(),k(a)})},f.deleteContinuingEducation=function(a){g.confirmDialog({prompt:"teacher.continuingEducation.deleteConfirm"},function(){a.id?(a=new n(a),a.$delete().then(function(){h.info("main.messages.delete.success"),f.teacherContinuingEducations.continuingEducations=f.teacherContinuingEducations.continuingEducations.filter(function(b){return b.id!==a.id})})):b(f.teacherContinuingEducations,"continuingEducations",a)})}}]).controller("TeacherQualificationEditController",["$location","$route","$translate","$scope","dialogService","message","QueryUtils",function(c,d,e,f,g,h,i){function j(){a(f,e),f.currentNavItem="teacher.qualification",f.isHigher=f.teacher.isHigher,k(f.teacher)}function k(a){a.teacherQualifications&&(f.teacherQualifications=new n({qualifications:a.teacherQualifications}),a.teacherQualifications=void 0)}var l=d.current.params.id,m=i.endpoint("/teachers"),n=i.endpoint("/teachers/"+l+"/qualifications");l?f.teacher=m.get({id:l},j):f.teacher=new m({isActive:!0,isStudyPeriodScheduleLoad:!0,person:{citizenship:"RIIK_EST"}}),f.teacher.teacherQualifications&&angular.isArray(f.qualifications)||(f.teacher.teacherQualifications=[],k(f.teacher)),f.newTeacherQualification=function(){f.teacherQualifications.qualifications.push({})},f.updateQualifications=function(){f.qualificationsForm.$setSubmitted(),f.qualificationsForm.$valid&&f.teacherQualifications.$update().then(function(a){h.updateSuccess(),k(a)})},f.deleteQualification=function(a){g.confirmDialog({prompt:"teacher.qualification.deleteConfirm"},function(){a.id?(a=new n(a),a.$delete().then(function(){h.info("main.messages.delete.success"),f.teacherQualifications.qualifications=f.teacherQualifications.qualifications.filter(function(b){return b.id!==a.id})})):b(f.teacherQualifications,"qualifications",a)})}}]).controller("TeacherMobilityEditController",["$location","$route","$translate","$scope","dialogService","message","DataUtils","QueryUtils",function(c,d,e,f,g,h,i,j){function k(){a(f,e),f.currentNavItem="teacher.mobility",f.isHigher=f.teacher.isHigher,l(f.teacher)}function l(a){a.teacherMobility&&(i.convertStringToDates(a.teacherMobility,["start","end"]),f.teacherMobility=new o({mobilities:a.teacherMobility}),a.teacherMobility=void 0)}var m=d.current.params.id,n=j.endpoint("/teachers"),o=j.endpoint("/teachers/"+m+"/mobilities");m?f.teacher=n.get({id:m},k):f.teacher=new n({isActive:!0,isStudyPeriodScheduleLoad:!0,person:{citizenship:"RIIK_EST"}}),f.teacher.teacherMobility&&angular.isArray(f.mobilities)||(f.teacher.teacherMobility=[],l(f.teacher)),f.newTeacherMobility=function(){f.teacherMobility.mobilities.push({})},f.updateTeacherMobility=function(){f.mobilityForm.$setSubmitted(),f.mobilityForm.$valid&&f.teacherMobility.$update().then(function(a){h.updateSuccess(),l(a)})},f.deleteMobility=function(a){g.confirmDialog({prompt:"teacher.mobility.deleteConfirm"},function(){a.id?(a=new o(a),a.$delete().then(function(){h.info("main.messages.delete.success"),f.teacherMobility.mobilities=f.teacherMobility.mobilities.filter(function(b){return b.id!==a.id})})):b(f.teacherMobility,"mobilities",a)})}}]).controller("TeacherListController",["$scope","$route","QueryUtils","USER_ROLES",function(a,b,c,d){c.createQueryForm(a,"/teachers",{order:"p.lastname,p.firstname"}),a.auth=b.current.locals.auth,a.showSchool=a.auth.isExternalExpert(),a.schoolHigher=a.auth.school&&a.auth.school.higher,a.auth.isExternalExpert()||(a.teacherOccupations=c.endpoint("/teachers/teacheroccupations").query()),a.formState={canCreate:a.auth.isAdmin()&&-1!==a.auth.authorizedRoles.indexOf(d.ROLE_OIGUS_M_TEEMAOIGUS_OPETAJA)},a.loadData()}]).controller("TeacherViewController",["$scope","$route","$translate","QueryUtils",function(a,b,c,d){function e(a,b){a.vocationalHigher="";var c=[];a.teacher.isVocational&&c.push("teacher.isVocational"),a.teacher.isHigher&&c.push("teacher.isHigher"),b(c).then(function(b){a.vocationalHigher=c.map(function(a){return b[a]}).join("; ")})}function f(){a.teacher.scheduleLoad=angular.isNumber(a.teacher.scheduleLoad)?String(a.teacher.scheduleLoad):"",e(a,c),a.teacher.teacherPositionEhis.forEach(function(a){a.load=angular.isNumber(a.load)?String(a.load):""}),a.teacher.teacherQualifications.forEach(function(a){a.year=angular.isNumber(a.year)?String(a.year):""})}a.isShowingRtipTab=!1;var g=b.current.locals.auth;a.auth=g;var h=g.isTeacher()?g.teacher:b.current.params.id;a.teacherId=h;var i=d.endpoint("/teachers");d.endpoint("/autocomplete/schooldepartments").query(function(b){a.schoolDepartmentsById=b.reduce(function(a,b){return a[b.id]=b,a},{})}),a.teacher=i.get({id:h},f),d.createQueryForm(a,"/teachers/"+h+"/absences"),a.criteria.order="-startDate",a.afterLoadData=function(b){a.tabledata.content=b.content,a.tabledata.totalElements=b.totalElements},a.changeIsShowingRtipTab=function(){a.isShowingRtipTab=!a.isShowingRtipTab,a.isShowingRtipTab&&a.loadData()},a.updateData=function(){d.endpoint("/teachers/"+h+"/rtip").save(),a.loadData()}}]).controller("TeacherRtipAbsenceEditController",["$scope","$route","$translate","QueryUtils",function(b,c,d,e){function f(){a(b,d),b.currentNavItem="teacher.rtipAbsence",b.isHigher=b.teacher.isHigher,b.loadData()}var g=c.current.params.id,h=e.endpoint("/teachers");b.rtipPage=!0,g?b.teacher=h.get({id:g},f):b.teacher=new h({isActive:!0,isStudyPeriodScheduleLoad:!0,person:{citizenship:"RIIK_EST"}}),e.createQueryForm(b,"/teachers/"+g+"/absences"),b.criteria.order="-startDate",b.afterLoadData=function(a){b.tabledata.content=a.content,b.tabledata.totalElements=a.totalElements},b.updateData=function(){e.endpoint("/teachers/"+g+"/rtip").save(),b.loadData()}}])}(),angular.module("hitsaOis").controller("TeacherOccupationEditController",["$location","$route","$scope","dialogService","message","QueryUtils",function(a,b,c,d,e,f){var g=b.current.params.id,h="/school/teacheroccupations",i=f.endpoint(h);g?c.teacherOccupation=i.get({id:g}):c.teacherOccupation=new i({occupationEt:"",occupationEn:"",isValid:!0}),c.update=function(){return c.teacherOccupationForm.$setSubmitted(),c.teacherOccupationForm.$valid?void(c.teacherOccupation.id?c.teacherOccupation.$update().then(e.updateSuccess):c.teacherOccupation.$save().then(function(){e.info("main.messages.create.success"),a.url(h+"/"+c.teacherOccupation.id+"/edit")})):void e.error("main.messages.form-has-errors")},c["delete"]=function(){d.confirmDialog({prompt:"teacher.occupation.deleteconfirm"},function(){c.teacherOccupation.$delete().then(function(){e.info("main.messages.delete.success"),a.url(h)})})}}]),angular.module("hitsaOis").config(["$routeProvider","USER_ROLES",function(a,b){var c={authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_OPETAJA]};a.when("/teachers",{templateUrl:"teacher/teacher.list.html",controller:"TeacherListController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}]},data:c}).when("/teachers/new",{templateUrl:"teacher/teacher.edit.html",controller:"TeacherEditController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}]},data:{authorizedRoles:[b.ROLE_OIGUS_M_TEEMAOIGUS_OPETAJA]}}).when("/teachers/:id/edit",{templateUrl:"teacher/teacher.edit.html",controller:"TeacherEditController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}]},data:{authorizedRoles:[b.ROLE_OIGUS_M_TEEMAOIGUS_OPETAJA]}}).when("/teachers/:id/editmydata",{templateUrl:"teacher/teacher.edit.mydata.html",controller:"TeacherEditController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}]},data:{authorizedRoles:[b.ROLE_OIGUS_M_TEEMAOIGUS_OPETAJA]}}).when("/teachers/:id/continuingEducation",{templateUrl:"teacher/teacher.continuing.education.edit.html",controller:"TeacherContinuingEducationEditController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}]},data:c}).when("/teachers/:id/qualification",{templateUrl:"teacher/teacher.qualification.edit.html",controller:"TeacherQualificationEditController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}]},data:c}).when("/teachers/:id/mobility",{templateUrl:"teacher/teacher.mobility.edit.html",controller:"TeacherMobilityEditController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}]},data:c}).when("/teachers/:id/rtipAbsence",{templateUrl:"teacher/teacher.rtip.absence.view.html",controller:"TeacherRtipAbsenceEditController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}]},data:c}).when("/teachers/myData",{templateUrl:"teacher/teacher.view.html",controller:"TeacherViewController",controllerAs:"controller",data:c,resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}]}}).when("/teachers/:id",{templateUrl:"teacher/teacher.view.html",controller:"TeacherViewController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}]},data:c})}]),angular.module("hitsaOis").controller("FinalExamHigherProtocolListController",["$scope","$route","$timeout","$q","QueryUtils","DataUtils","Classifier","dialogService","message","$location","USER_ROLES",function(a,b,c,d,e,f,g,h,i,j,k){a.auth=b.current.locals.auth,a.search={},a.criteria={};var l="/finalExamHigherProtocols";a.formState={canCreateProtocol:(a.auth.isTeacher()||a.auth.isAdmin())&&-1!==a.auth.authorizedRoles.indexOf(k.ROLE_OIGUS_M_TEEMAOIGUS_LOPPROTOKOLL)};var m=g.valuemapper({status:"PROTOKOLL_STAATUS"});e.createQueryForm(a,l,{order:"id"},m.objectmapper),f.convertStringToDates(a.criteria,["inserted","confirmDate"]),a.studyPeriods=e.endpoint("/autocomplete/studyPeriods").query();var n=m.promises;n.push(a.studyPeriods.$promise);var o=a.loadData;a.loadData=function(){a.searchForm.$setSubmitted(),a.searchForm.$valid?o():i.error("main.messages.form-has-errors")},d.all(n).then(function(){if(a.studyPeriods.length>0&&!a.criteria.studyPeriod){var b=f.getCurrentStudyYearOrPeriod(a.studyPeriods);a.criteria.studyPeriod=b?b.id:void 0}a.criteria.studyPeriod?c(a.loadData):0===a.studyPeriods.length&&(a.formState.canCreateProtocol=!1,i.error("studyYear.studyPeriod.missing"))}),a.clearSearch=function(){a.clearCriteria(),a.search={}}}]),angular.module("hitsaOis").controller("FinalExamHigherProtocolNewController",["$scope","$route","$location","QueryUtils","DataUtils","Classifier","message","ArrayUtils",function(a,b,c,d,e,f,g,h){function i(){a.formState.subjects=d.endpoint(k+"/subjects/"+a.formState.studyPeriod).query()}function j(b){for(var c=0;a.formState.subjects.length;c++)if(a.formState.subjects[c].id===b)return a.formState.subjects[c].subjectStudyPeriod}var k="/finalExamHigherProtocols";a.auth=b.current.locals.auth,a.formState={selectedStudents:[],subjects:[]};var l=f.valuemapper({status:"OPPURSTAATUS"});d.endpoint("/autocomplete/studyPeriods").query().$promise.then(function(b){a.studyPeriods=b,a.formState.studyPeriod=e.getCurrentStudyYearOrPeriod(b).id,i()}),a.studyPeriodChange=function(){a.formState.subject=void 0,i()},a.subjectChange=function(){var b=d.endpoint(k+"/subject/"+a.formState.subject).get();a.tabledata={$promise:b.$promise},b.$promise.then(function(b){a.formState.selectedStudents=[],a.tabledata.content=l.objectmapper(b.subjectStudents),b.subjectStudents.forEach(function(b){"OPPURSTAATUS_O"===b.status.code&&a.formState.selectedStudents.push(b.studentId)}),b.teacher&&!a.formState.teacher&&(a.formState.teacher=b.teacher.id)})};var m=d.endpoint(k);a.submit=function(){if(h.isEmpty(a.formState.selectedStudents))return void g.error("finalExamProtocol.error.noStudents");var b={};b.subject=a.formState.subject,b.subjectStudyPeriod=j(a.formState.subject),b.protocolType=a.formState.protocolType,b.protocolStudents=a.formState.selectedStudents.map(function(a){return{studentId:a}}),new m(b).$save().then(function(a){g.info("main.messages.create.success"),c.path(k+"/"+a.id+"/edit")})}}]),angular.module("hitsaOis").config(["$routeProvider","USER_ROLES",function(a,b){a.when("/finalExamHigherProtocols",{templateUrl:"finalExamProtocol/higher/final.exam.higher.protocol.list.html",controller:"FinalExamHigherProtocolListController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}]},data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_LOPPROTOKOLL]}}).when("/finalExamHigherProtocols/new",{templateUrl:"finalExamProtocol/higher/final.exam.higher.protocol.new.html",controller:"FinalExamHigherProtocolNewController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}]},data:{authorizedRoles:[b.ROLE_OIGUS_M_TEEMAOIGUS_LOPPROTOKOLL]}}).when("/finalExamHigherProtocols/:id/edit",{templateUrl:"finalExamProtocol/higher/final.exam.higher.protocol.edit.html",controller:"FinalExamHigherProtocolEditController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){
return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}],entity:["QueryUtils","$route",function(a,b){return a.endpoint("/finalExamHigherProtocols").get({id:b.current.params.id}).$promise}],isView:["$route",function(a){return!1}]},data:{authorizedRoles:[b.ROLE_OIGUS_M_TEEMAOIGUS_LOPPROTOKOLL]}}).when("/finalExamHigherProtocols/:id/view",{templateUrl:"finalExamProtocol/higher/final.exam.higher.protocol.view.html",controller:"FinalExamHigherProtocolEditController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}],entity:["QueryUtils","$route",function(a,b){return a.endpoint("/finalExamHigherProtocols").get({id:b.current.params.id}).$promise}],isView:["$route",function(a){return!0}]},data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_LOPPROTOKOLL]}})}]),angular.module("hitsaOis").controller("FinalExamVocationalProtocolListController",["$scope","$route","QueryUtils","DataUtils","Classifier","$q","ArrayUtils","dialogService","message","$location","USER_ROLES",function(a,b,c,d,e,f,g,h,i,j,k){function l(){return(a.auth.isTeacher()||a.auth.isAdmin())&&g.contains(a.auth.authorizedRoles,k.ROLE_OIGUS_M_TEEMAOIGUS_LOPPROTOKOLL)}a.auth=b.current.locals.auth,a.search={},a.criteria={};var m="/finalExamVocationalProtocols";a.formState={canCreateProtocol:l()};var n=e.valuemapper({status:"PROTOKOLL_STAATUS"});c.createQueryForm(a,m,{},n.objectmapper);var o=a.$watch("criteria.studyYear",function(b){angular.isNumber(b)&&(o(),f.all(n.promises).then(a.loadData))});a.$watch("criteria.moduleObject",function(){a.criteria.module=a.criteria.moduleObject?a.criteria.moduleObject.id:null}),a.clearSearch=function(){a.clearCriteria(),a.search={}},a.curriculumVersionModule=function(b){var c="";return c+=b.curriculumVersions.map(function(b){return a.currentLanguageNameField(b)}).join("; "),c+=", ",c+=b.curriculumVersionOccupationModules.map(function(b){return a.currentLanguageNameField(b)}).join("; ")}}]),angular.module("hitsaOis").controller("FinalExamVocationalProtocolNewController",["$scope","$route","$location","QueryUtils","DataUtils","Classifier","message","ArrayUtils",function(a,b,c,d,e,f,g,h){var i="/finalExamVocationalProtocols";a.auth=b.current.locals.auth,a.formState={selectedStudents:[],curriculumVersions:d.endpoint(i+"/curriculumVersions/").query()},a.auth.isTeacher()&&(a.formState.teacher=a.auth.teacher);var j=f.valuemapper({status:"OPPURSTAATUS"});a.curriculumVersionChange=function(){a.formState.curriculumVersionOccupationModule=void 0,a.formState.curriculumVersionOccupationModules=d.endpoint(i+"/occupationModules/"+a.formState.curriculumVersion).query()},a.curriculumVersionOccupationModuleChange=function(){var b=d.endpoint(i+"/occupationModule/"+a.formState.curriculumVersionOccupationModule).get();a.tabledata={$promise:b.$promise},b.$promise.then(function(b){a.formState.selectedStudents=[],a.tabledata.content=j.objectmapper(b.occupationModuleStudents),b.occupationModuleStudents.forEach(function(b){"OPPURSTAATUS_O"===b.status.code&&a.formState.selectedStudents.push(b.studentId)}),b.teacher&&!a.formState.teacher&&(a.formState.teacher=b.teacher.id)})};var k=d.endpoint(i);a.submit=function(){if(h.isEmpty(a.formState.selectedStudents))return void g.error("finalExamProtocol.error.noStudents");var b={};b.protocolVdata={curriculumVersionOccupationModule:a.formState.curriculumVersionOccupationModule,curriculumVersion:a.formState.curriculumVersion,studyYear:a.formState.studyYear,teacher:a.formState.teacher},b.protocolStudents=a.formState.selectedStudents.map(function(a){return{studentId:a}}),new k(b).$save().then(function(a){g.info("main.messages.create.success"),c.path(i+"/"+a.id+"/edit")})["catch"](angular.noop)}}]),angular.module("hitsaOis").controller("FinalExamVocationalProtocolEditController",["$scope","$route","QueryUtils","Classifier","$q","oisFileService","config","message","dialogService","ArrayUtils","$location","$timeout",function(a,b,c,d,e,f,g,h,i,j,k,l){function m(){y.$promise.then(function(b){a.grades=b.filter(function(b){return"KUTSEHINDAMISVIIS_M"===a.protocol.protocolVdata.assessment?x.indexOf(b.code)>-1:-1===x.indexOf(b.code)})})}function n(){if(!angular.isDefined(a.protocol)||!angular.isArray(a.protocol.protocolStudents))return!1;for(var b=!0,c=0;c<a.protocol.protocolStudents.length;c++)if(!angular.isString(a.protocol.protocolStudents[c].grade)||0===a.protocol.protocolStudents[c].grade.trim().length){b=!1;break}return b}function o(){return n()&&("LOGIN_TYPE_I"===a.auth.loginMethod||"LOGIN_TYPE_M"===a.auth.loginMethod)}function p(b){e.all(v.promises).then(function(){a.protocol=v.objectmapper(b),a.getUrl=f.getUrl,m(),a.formState.canConfirm="PROTOKOLL_STAATUS_K"!==a.protocol.status.code&&o(),a.formState.protocolPdfUrl=g.apiUrl+u+b.id+"/print/protocol.pdf"})}function q(){$window.hwcrypto.getCertificate({lang:"en"}).then(function(b){c.endpoint(u+a.protocol.id+"/signToConfirm").save({version:a.protocol.version,protocolStudents:a.protocol.protocolStudents,certificate:b.hex},function(d){$window.hwcrypto.sign(b,{type:"SHA-256",hex:d.digestToSign},{lang:"en"}).then(function(b){c.endpoint(u+a.protocol.id+"/signToConfirmFinalize").save({signature:b.hex,version:d.version},function(a){h.info("finalExamProtocol.messages.confirmed"),p(a)})})})})["catch"](function(a){"user_cancel"===a.message?h.error("main.messages.error.idCardSigningCancelled"):h.error("main.messages.error.readingIdCardFailed")})}function r(){c.endpoint(u+a.protocol.id+"/mobileSignToConfirm").save({version:a.protocol.version,protocolStudents:a.protocol.protocolStudents},function(b){b.challengeID?(a.signVersion=b.version,$mdDialog.show({controller:["$scope",function(a){a.challengeID=b.challengeID}],templateUrl:"finalExamProtocol/final.exam.protocol.mobile.sign.dialog.html",parent:angular.element(document.body),clickOutsideToClose:!1}),a.mobileIdPolls=0,l(s,g.mobileIdInitialDelay)):h.error("main.messages.error.mobileIdSignFailed")})["catch"](angular.noop)}function s(){c.endpoint(u+a.protocol.id+"/mobileSignStatus").get(function(b){"SIGNATURE"===b.status?($mdDialog.hide(),c.endpoint(u+a.protocol.id+"/mobileSignFinalize").save({version:a.signVersion},function(a){h.info("finalExamProtocol.messages.confirmed"),p(a)})):"OUTSTANDING_TRANSACTION"===b.status?(a.mobileIdPolls++,a.mobileIdPolls<g.mobileIdMaxPolls&&l(s,g.mobileIdPollInterval)):($mdDialog.hide(),h.error("main.messages.error.mobileIdSignFailed"))})}function t(a){var b=[];if(a)for(var c=0;c<a.length;c++)a[c].isPresent&&b.push({committeeMemberId:a[c].id});return b}var u="/finalExamVocationalProtocols/";a.auth=b.current.locals.auth;var v=d.valuemapper({grade:"KUTSEHINDAMINE",status:"PROTOKOLL_STAATUS",studyLevel:"OPPEASTE"}),w=d.valuemapper({journalResults:"KUTSEHINDAMINE",status:"OPPURSTAATUS"}),x=["KUTSEHINDAMINE_A","KUTSEHINDAMINE_MA","KUTSEHINDAMINE_X"],y=d.queryForDropdown({mainClassCode:"KUTSEHINDAMINE"});a.formState={},b.current.locals.entity?p(b.current.locals.entity):a.protocol&&m(),a.selectedFinalExamDateChanged=function(){a.committees=c.endpoint(u+"committees").query({finalExamDate:a.protocol.finalExamDate})},a.selectedCommitteeChanged=function(){c.endpoint("/committees").get({id:a.protocol.committee.id}).$promise.then(function(b){a.protocol.committee=b,a.committeeMembers=b.members})},a.deleteProtocolStudent=function(b){i.confirmDialog({prompt:"finalExamProtocol.prompt.deleteStudent"},function(){j.remove(a.protocol.protocolStudents,b)})},a.addProtocolStudents=function(){i.showDialog("protocol/module.protocol.addStudent.dialog.html",function(b){b.selectedStudents=[];var d=c.endpoint(u+a.protocol.id+"/otherStudents").query();b.tabledata={$promise:d.$promise},d.$promise.then(function(a){b.tabledata.content=w.objectmapper(a)}),b.journalResultsView=function(a){return a.map(function(a){return a.value}).join(" / ")}},function(b){c.endpoint(u+a.protocol.id+"/addStudents").save({version:a.protocol.version,protocolStudents:b.selectedStudents.map(function(a){return{studentId:a}})},function(a){h.info("finalExamProtocol.messages.studentSuccesfullyAdded"),p(a)})["catch"](angular.noop)})},a.gradeValue=function(a){var b=v.objectmapper({grade:a}).grade;return b?b.value:void 0},a.confirm=function(){a.auth.isAdmin()?c.endpoint(u+a.protocol.id+"/confirm").save({version:a.protocol.version,protocolStudents:a.protocol.protocolStudents},function(a){h.info("finalExamProtocol.messages.confirmed"),p(a)})["catch"](angular.noop):"LOGIN_TYPE_I"===a.auth.loginMethod?q():"LOGIN_TYPE_M"===a.auth.loginMethod&&r()};var z=c.endpoint(u);a.save=function(){new z({id:a.protocol.id,version:a.protocol.version,committeeId:a.protocol.committee.id,protocolCommitteeMembers:t(a.committeeMembers),protocolStudents:a.protocol.protocolStudents}).$update().then(function(a){h.info("main.messages.create.success"),p(a)})["catch"](angular.noop)},a["delete"]=function(){i.confirmDialog({prompt:"finalExamProtocol.prompt.delete"},function(){new z(a.protocol).$delete().then(function(){h.info("finalExamProtocol.messages.deleted"),k.path(u)})["catch"](angular.noop)})}}]),angular.module("hitsaOis").config(["$routeProvider","USER_ROLES",function(a,b){a.when("/finalExamVocationalProtocols",{templateUrl:"finalExamProtocol/vocational/final.exam.vocational.protocol.list.html",controller:"FinalExamVocationalProtocolListController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}]},data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_LOPPROTOKOLL]}}).when("/finalExamVocationalProtocols/new",{templateUrl:"finalExamProtocol/vocational/final.exam.vocational.protocol.new.html",controller:"FinalExamVocationalProtocolNewController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}]},data:{authorizedRoles:[b.ROLE_OIGUS_M_TEEMAOIGUS_LOPPROTOKOLL]}}).when("/finalExamVocationalProtocols/:id/edit",{templateUrl:"finalExamProtocol/vocational/final.exam.vocational.protocol.edit.html",controller:"FinalExamVocationalProtocolEditController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}],entity:["QueryUtils","$route",function(a,b){return a.endpoint("/finalExamVocationalProtocols").get({id:b.current.params.id}).$promise}],isView:["$route",function(a){return!1}]},data:{authorizedRoles:[b.ROLE_OIGUS_M_TEEMAOIGUS_LOPPROTOKOLL]}}).when("/finalExamVocationalProtocols/:id/view",{templateUrl:"finalExamProtocol/vocational/final.exam.vocational.protocol.view.html",controller:"FinalExamVocationalProtocolEditController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}],entity:["QueryUtils","$route",function(a,b){return a.endpoint("/finalExamVocationalProtocols").get({id:b.current.params.id}).$promise}],isView:["$route",function(a){return!0}]},data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_LOPPROTOKOLL]}})}]),angular.module("hitsaOis").controller("PersonsEditController",["$location","$route","$scope","$rootScope","dialogService","DataUtils","message","PersonService","QueryUtils",function(a,b,c,d,e,f,g,h,i){function j(){f.convertStringToDates(c.person,["birthdate"]),c.users=c.person.users,c.person.users=null,c.person.idcode&&11===c.person.idcode.length&&(c.person.sex=f.sexFromIdcode(c.person.idcode),c.person.birthdate=f.birthdayFromIdcode(c.person.idcode),c.idcodeReadonly=!0),c.users&&h.usersAfterLoad(c.users)}function k(){c.person.firstname="",c.person.lastname="",c.person.email="",c.person.phone=""}var l=b.current.params.id,m="/persons",n=i.endpoint(m);c.auth=b.current.locals.auth,c.maxDate=new Date,c.lookupPerson=function(b){a.path(m+"/"+b.id+"/edit"),g.info("person.exists")},c.lookupFailure=function(){c.person.sex=f.sexFromIdcode(c.person.idcode),c.person.birthdate=f.birthdayFromIdcode(c.person.idcode),k()},c.cleanReadOnly=function(){k(),c.person.sex=void 0,c.person.birthdate=void 0},l?c.person=n.get({id:l},j):c.person=new n,c.orderValue=function(a){return c.currentLanguageNameField(a.role)},c.personBack=function(){c.users&&c.users.length>0||c.auth.isMainAdmin()||!c.person.id?d.back("#"+m):e.confirmDialog({prompt:"person.back"},function(){d.back("#"+m)})},c.update=function(){c.personForm.$setSubmitted(),c.personForm.$valid&&(c.person.id?c.person.$update().then(g.updateSuccess):c.person.$save().then(function(b){a.url(m+"/"+b.id+"/edit?_noback"),g.info("main.messages.create.success")}))},c["delete"]=h.deletePerson}]).controller("PersonsViewController",["$scope","$route","PersonService","QueryUtils",function(a,b,c,d){var e=b.current.params.id,f=d.endpoint("/persons");a.auth=b.current.locals.auth;var g=function(){c.usersAfterLoad(a.person.users),a.users=a.person.users};a.orderValue=function(b){return a.currentLanguageNameField(b.role)},a.person=f.get({id:e},g),a["delete"]=c.deletePerson}]).factory("PersonService",["$location","Classifier","DataUtils","dialogService","message",function(a,b,c,d,e){var f=b.valuemapper({role:"ROLL"}),g="/persons",h=function(b){d.confirmDialog({prompt:"person.deleteconfirm"},function(){b.$delete().then(function(){e.info("main.messages.delete.success"),a.url(g+"?_noback")})})},i=function(a){a&&f.objectmapper(a),c.convertStringToDates(a,["validThru","validFrom"]);for(var b=moment(),d=0;d<a.length;d++){var e=a[d];e.valid=(!e.validFrom||moment(e.validFrom).isSameOrBefore(b,"day"))&&(!e.validThru||moment(e.validThru).isSameOrAfter(b,"day"))}};return{usersAfterLoad:i,deletePerson:h}}]),angular.module("hitsaOis").config(["$routeProvider","USER_ROLES",function(a,b){a.when("/persons",{templateUrl:"persons/persons.search.html",controller:"SimpleListController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}],clMapping:function(){return{role:"ROLL"}},params:function(){return{order:"p.lastname,p.firstname"}},url:function(){return"/users"}},data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_KASUTAJA]}}).when("/persons/new",{templateUrl:"persons/persons.edit.html",controller:"PersonsEditController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}]},authorizedRoles:[b.ROLE_OIGUS_M_TEEMAOIGUS_KASUTAJA]}).when("/persons/:person/users/new",{templateUrl:"persons/users.edit.html",controller:"UsersEditController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}]},authorizedRoles:[b.ROLE_OIGUS_M_TEEMAOIGUS_KASUTAJA]}).when("/persons/:person/users/:user/edit",{templateUrl:"persons/users.edit.html",controller:"UsersEditController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}]},authorizedRoles:[b.ROLE_OIGUS_M_TEEMAOIGUS_KASUTAJA]}).when("/persons/:person/users/:user",{templateUrl:"persons/users.view.html",controller:"UsersViewController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}]},authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_KASUTAJA]}).when("/persons/:id/edit",{templateUrl:"persons/persons.edit.html",controller:"PersonsEditController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}]},authorizedRoles:[b.ROLE_OIGUS_M_TEEMAOIGUS_KASUTAJA]}).when("/persons/:id",{templateUrl:"persons/persons.view.html",controller:"PersonsViewController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}]},authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_KASUTAJA]})}]),angular.module("hitsaOis").controller("UsersEditController",["$location","$q","$rootScope","$route","$scope","dialogService","Classifier","message","QueryUtils","ArrayUtils","AuthService",function(a,b,c,d,e,f,g,h,i,j,k){function l(a){a&&(r[e.user.role]=e.objects.reduce(function(b,c){var d=c.code;return b[d]=e.permissions.reduce(function(b,c){var e=c.code;return b[e]=-1!==(a[d]||[]).indexOf(e),b},{}),b},{}))}function m(){var a=[];for(var b in e.objectsForRole)a.push(e.objectsForRole[b].code);return a}function n(){var a=m();for(var b in e.multiSelects){e.multiSelects[b]=!0;for(var c in e.rights)if(j.contains(a,c)&&!e.rights[c][b]){e.multiSelects[b]=!1;break}}}var o=d.current.params.person,p=d.current.params.user,q=i.endpoint("/persons/"+o+"/users");e.auth=d.current.locals.auth,e.multiSelects={OIGUS_V:!1,OIGUS_M:!1,OIGUS_K:!1},e.noSchool=["ROLL_P","ROLL_V"],e.filterValues=["ROLL_L","ROLL_O","ROLL_T","ROLL_X"],e.auth.isMainAdmin()||e.filterValues.push("ROLL_P"),e.auth.isAdmin()&&e.filterValues.push("ROLL_V"),e.objects=g.queryForDropdown({mainClassCode:"TEEMAOIGUS"}),e.permissions=g.queryForDropdown({mainClassCode:"OIGUS"}),e.userRoleDefaults=i.endpoint("/users/rolesDefaults").search();var r={};e.multiSelectPermission=function(a,b){var c=m();for(var d in e.rights)j.contains(c,d)&&(e.rights[d][a]=b)},e.showPermission=function(a,b){return k.isValidRolePermission(e.user.role,a,b)},e.roleChanged=function(){var a=e.user.role;-1!==e.noSchool.indexOf(a)&&(e.user.school=null);var b=e.userRoleDefaults.defaultRights[a]||{};e.objectsForRole=e.objects.filter(function(a){return b[a.code]}),r[a]||l(b),e.rights=r[a],n()},e["delete"]=function(){f.confirmDialog({prompt:"user.deleteconfirm"},function(){e.user.$delete().then(function(){h.info("main.messages.delete.success"),c.back("#/persons/"+o)})})},e.update=function(){if(e.userForm.$setSubmitted(),e.userForm.$valid){var b=function(a){return a.code};e.user.rights=e.objectsForRole.reduce(function(a,c){var d=c.code;return a[d]=e.permissions.filter(function(a){return e.rights[d][a.code]}).map(b),a},{}),e.user.id?e.user.$update().then(h.updateSuccess).then(function(){l(e.user.rights)}):e.user.$save().then(function(b){a.url("/persons/"+b.person.id+"/users/"+b.id+"/edit?_noback"),h.info("main.messages.create.success")})}},p?e.user=q.get({id:p}):e.user=q.search(),b.all([e.objects.$promise,e.permissions.$promise,e.userRoleDefaults.$promise,e.user.$promise]).then(function(){l(e.user.rights),e.roleChanged()})}]).controller("UsersViewController",["$q","$route","$scope","Classifier","QueryUtils","AuthService",function(a,b,c,d,e,f){var g=b.current.params.person,h=b.current.params.user,i=e.endpoint("/persons/"+g+"/users");c.objects=d.queryForDropdown({mainClassCode:"TEEMAOIGUS"}),c.permissions=d.queryForDropdown({mainClassCode:"OIGUS"}),c.userRoleDefaults=e.endpoint("/users/rolesDefaults").search(),c.user=i.get({id:h}),c.showPermission=function(a,b){return f.isValidRolePermission(c.user.role,a,b)},a.all([c.objects.$promise,c.permissions.$promise,c.userRoleDefaults.$promise,c.user.$promise]).then(function(){var a=c.userRoleDefaults.defaultRights[c.user.role]||{};c.objects=c.objects.filter(function(b){return a[b.code]})})}]),angular.module("hitsaOis").controller("VocationalCurriculumController",["$scope","Classifier","dialogService","ClassifierConnect","ArrayUtils","message","oisFileService","QueryUtils","$route","DataUtils","$location","Curriculum","$q","config","$rootScope","Session",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){function q(){U?h.endpoint("/curriculum/schoolDepartments/"+U).query().$promise.then(function(b){a.schoolDepartments=b,a.vocationalCurriculumForm&&a.vocationalCurriculumForm.$setPristine()}):B()}function r(b){Y(b,a)}function s(){h.endpoint("/curriculum/studyLevels").query({curriculum:U,isHigher:!1}).$promise.then(function(b){a.schoolOrigStudyLevel=b})}function t(a){a.occupationsCount=0;var b=a.stateCurriculumOccupations;b.forEach(function(b){a.selectedStateCurriculumOccupations[b.occupation.code]&&a.occupationsCount++}),a.partOccupationsCount=0,b.forEach(function(b){b.partOccupations.forEach(function(b){a.selectedStateCurriculumPartOccupations[b.code]&&a.partOccupationsCount++})}),a.occupationsAndPartOccupationsCount=a.occupationsCount+a.partOccupationsCount}function u(){a.curriculum.draft="OPPEKAVA_LOOMISE_VIIS_KUTSE"}function v(){a.vocationalCurriculumForm.isOccupation.$setPristine();var b=a.vocationalCurriculumForm.$$controls.find(function(a){return a.$dirty});b||a.vocationalCurriculumForm.$setPristine()}function w(a){var b=angular.copy(a);return b.occupation=b.occupation.code,b.partOccupations&&(b.partOccupations=b.partOccupations.map(function(a){return a.code})),b.specialities&&(b.specialities=b.specialities.map(function(a){return a.code})),b}function x(b){return a.formState.readOnly||a.formState.notEditableBasicData&&"KUTSEMOODUL_V"!==b.module}function y(b){var c="";c=b?x(b)?"/vocationalCurriculum/"+a.curriculum.id+"/module/"+b.id+"/view":"/vocationalCurriculum/"+a.curriculum.id+"/module/"+b.id+"/edit":"/vocationalCurriculum/"+a.curriculum.id+"/module/new",k.path(c)}function z(){return a.curriculum.ehisSchool?a.curriculum.ehisSchool:p.school&&p.school.ehisSchool?p.school.ehisSchool:null}function A(){var b=[];b.push(z()),angular.isArray(a.curriculum.jointPartners)&&(a.validation.jointPartnersLength=a.curriculum.jointPartners.length,a.curriculum.jointPartners.forEach(function(a){a.abroad||b.push(a.ehisSchool)})),a.selectedJointPartners=b}function B(){h.endpoint("/curriculum/schoolDepartments").query({ehisShools:a.selectedJointPartners,curriculum:U}).$promise.then(function(b){if(a.schoolDepartments=b,a.curriculum.schoolDepartments){var c=b.map(function(a){return a.id});a.curriculum.schoolDepartments=a.curriculum.schoolDepartments.filter(function(a){return e.includes(c,a)})}})}function C(){a.curriculum.abroad=!1,a.curriculum.jointPartners=[],a.curriculum.supervisor=void 0,a.curriculum.jointMentor=void 0,a.curriculum.contractEt=void 0,a.curriculum.contractEn=void 0}function D(){return e.isEmpty(a.curriculum.jointPartners)&&(angular.isDefined(a.curriculum.supervisor)||angular.isDefined(a.curriculum.contractEt)||angular.isDefined(a.curriculum.contractEn))}function E(){if(a.curriculum.joint){if(ea(),D()){var b={abroad:a.curriculum.abroad,supervisor:a.curriculum.supervisor,contractEt:a.curriculum.contractEt,contractEn:a.curriculum.contractEn};a.curriculum.jointPartners.push(b)}}else a.curriculum.jointMentor=void 0,a.curriculum.jointPartners=[]}function F(){var b=a.curriculum.modules.filter(function(a){return"KUTSEMOODUL_V"!==a.module}),c=b.reduce(function(a,b){return a+=b.credits},0);return a.curriculum.optionalStudyCredits+c===a.curriculum.credits}function G(){for(var b=a.curriculum.curriculumOccupations,c=0;c<b.length;c++)if(!a.isOccutationsCreditsValid(b[c]))return!1;return!0}function H(b){return a.curriculum.modules.filter(function(a){return"KUTSEMOODUL_V"!==a.module}).filter(function(a){var c=a.occupations.map(function(a){return a});return e.includes(c,b)}).reduce(function(a,b){return b.isAdditional?a:a+b.credits},0)}function I(a){if(e.isEmpty(a.partOccupations))return 0;for(var b=0,c=a.partOccupations,d=0;d<c.length;d++)b+=H(c[d].code);return b}function J(){for(var b=a.curriculum.curriculumOccupations,c=0;c<b.length;c++)if(!e.isEmpty(b[c]).specialities)for(var d=b[c].specialities,f=0;f<d.length;f++)if(!a.isSpetsOccupationValid(d[f],b[c]))return!1;return!0}function K(b){if(e.isEmpty(b.partOccupations))return 0;for(var c=0,d=b.partOccupations.map(function(a){return a.code}),f=a.curriculum.modules.filter(function(a){return"KUTSEMOODUL_V"!==a.module&&!a.isAdditional}),g=0;g<f.length;g++){var h=f[g].occupations.map(function(a){return a}),i=e.intersection(h,d);if(0!==i.length){var j=e.includes(h,b.occupation.code)?1:0;c+=f[g].credits*(i.length+j-1)}}return c}function L(b){if(a.vocationalCurriculumForm.$setSubmitted(),!a.vocationalCurriculumForm.$valid){var c=b&&b.errorMessage?b.errorMessage:"main.messages.form-has-errors";return f.error(c),!1}if(a.strictValidation()){if(a.occupationRequired()&&e.isEmpty(a.curriculum.curriculumOccupations))return f.error("curriculum.error.noOccupation"),!1;if(e.isEmpty(a.curriculum.modules))return f.error("curriculum.error.noModule"),!1;if(!e.isEmpty(a.curriculum.curriculumOccupations)&&!a.allOccupationsHavePModule())return f.error("curriculum.error.noPModules"),!1;if(!e.isEmpty(a.curriculum.curriculumOccupations)&&!a.allModulesHaveOccupation())return f.error("curriculum.error.notAllModulesHaveOccupation"),!1;if(e.isEmpty(a.curriculum.curriculumOccupations)&&!R())return f.error("curriculum.error.noBasicModule"),!1;if(e.isEmpty(a.curriculum.curriculumOccupations)&&!F())return f.error("curriculum.error.modulesCredits"),!1;if(!e.isEmpty(a.curriculum.curriculumOccupations)&&!G())return f.error("curriculum.error.occupationsCredits"),!1;if(!e.isEmpty(a.curriculum.curriculumOccupations)&&!J())return f.error("curriculum.error.spetsOccupationsCredits"),!1;if(!a.hasVerifiedVersions())return f.error("curriculum.error.noImplementationPlan"),!1}return!0}function M(b){if(L(b)){ea(),E();var c=new X(Z(a.curriculum));angular.isDefined(a.curriculum.id)?c.$update().then(function(c){var d=b&&b.updateSuccess?b.updateSuccess:"main.messages.create.success";f.info(d),a.vocationalCurriculumForm.$setPristine(),Y(c,a)},function(){r(c)}):(c.newFiles=c.files,c.files=void 0,c.$save().then(function(){f.info("main.messages.create.success"),a.vocationalCurriculumForm.$setPristine(),k.path("/vocationalCurriculum/"+c.id+"/edit")},function(){r(c)}))}}function N(b,c){new b(a.curriculum).$update().then(function(b){f.info(c.updateSuccess),Y(b,a),a.vocationalCurriculumForm.$setPristine(),O()})}function O(){a.formState.readOnly||k.path("/vocationalCurriculum/"+a.curriculum.id+"/view")}function P(){X.get({id:a.curriculum.id}).$promise.then(function(b){a.curriculum.modules=b.modules})}function Q(){return a.curriculum.modules.filter(function(a){return"KUTSEMOODUL_P"===a.module})}function R(){return!e.isEmpty(Q())}function S(b){return a.curriculum.modules.filter(function(a){var c=a.occupations.map(function(a){return a});return"KUTSEMOODUL_P"===a.module&&e.includes(c,b)})}var T=b.valuemapper({occupations:"KUTSE",partOccupations:"OSAKUTSE",specialities:"SPETSKUTSE"});a.school=i.current.locals.auth?i.current.locals.auth.school:null;var U=i.current.params.id,V=h.endpoint("/curriculumOccupation");a.publicUrl=n.apiUrl+"/public/curriculum/"+U+"?format=json",a.maxStydyYears={max:100},a.STATUS=l.STATUS;var W;a.formState={readOnly:-1!==i.current.$$route.originalPath.indexOf("view")},q();var X=h.endpoint("/curriculum"),Y=function(b,c){a.formState.strictValidation=!1;var e=[],f=angular.extend({},b);if(a.isDraftEmployerSupportLetter="OPPEKAVA_LOOMISE_VIIS_TOOANDJA"===f.draft,f.jointPartners&&1===f.jointPartners.length&&!(f.jointPartners[0].ehisSchool||f.jointPartners[0].nameEt||f.jointPartners[0].nameEn)&&(f.jointPartners=[]),a.formState.notEditableBasicData=f.status===l.STATUS.VERIFIED,a.formState.sentToEhis="OPPEKAVA_EHIS_STAATUS_A"===f.ehisStatus||"OPPEKAVA_EHIS_STAATUS_M"===f.ehisStatus,j.convertStringToDates(f,["validFrom","validThru","approval"]),angular.isArray(b.jointPartners)&&b.jointPartners.length>0&&(f.supervisor=b.jointPartners[0].supervisor,f.contractEt=b.jointPartners[0].contractEt,f.contractEn=b.jointPartners[0].contractEn),f.studyPeriodMonths=b.studyPeriod%12,f.studyPeriodYears=Math.floor(b.studyPeriod/12),angular.isString(b.iscedClass)){var g=m.defer();d.queryAll({classifierCode:b.iscedClass,connectClassifierMainClassCode:"ISCED_SUUN"},function(a){a.length>0&&(f.fieldOfStudy=a[0].connectClassifier.code),d.queryAll({classifierCode:f.fieldOfStudy,connectClassifierMainClassCode:"ISCED_VALD"},function(a){0===a.length?g.reject():(f.areaOfStudy=a[0].connectClassifier.code,g.resolve())})}),e.push(g.promise)}m.all(e).then(function(){angular.extend(c.curriculum,f)})},Z=function(a){var b=angular.extend({},a);return a.studyPeriodMonths=a.studyPeriodMonths?a.studyPeriodMonths:0,b.studyPeriod=a.studyPeriodMonths+12*a.studyPeriodYears,b},$={selectedOccupationsPartOccupations:[],modules:[],occupations:[],files:[],jointPartners:[],studyLanguageClassifiers:[],studyFormClassifiers:[],abroad:!1},_={validFrom:new Date,status:l.STATUS.ENTERING,consecution:"OPPEKAVA_TYPE_E",optionalStudyCredits:0,studyPeriodMonths:0,draft:"OPPEKAVA_LOOMISE_VIIS_KUTSE",higher:!1,joint:!1,abroad:!1,occupation:!1};a.curriculum=angular.extend({},$),a.validation={occupationsLength:0},a.$watchCollection("curriculum.curriculumOccupations",function(){a.validation.occupationsLength=a.curriculum&&a.curriculum.curriculumOccupations?a.curriculum.curriculumOccupations.length:0,a.curriculum&&"OPPEKAVA_LOOMISE_VIIS_TOOANDJA"===a.curriculum.draft&&(a.validation.occupationsLength=1)}),a.schoolOrigStudyLevel=[],s();var aa=angular.isDefined(i.current.locals.entity)?i.current.locals.entity.id:void 0;a.codeUniqueQuery={url:"/curriculum/unique/code",id:aa},a.merCodeUniqueQuery={url:"/curriculum/unique/merCode",id:aa},angular.isDefined(i.current.locals.entity)?(Y(i.current.locals.entity,a),W=h.endpoint("/curriculum/"+i.current.locals.entity.id+"/file"),o.removeLastUrlFromHistory(function(a){return a==="#/vocationalCurriculum/"+i.current.locals.entity.id+"/view"||a==="#/vocationalCurriculum/"+i.current.locals.entity.id+"/edit"||"#/vocationalCurriculum/new"===a})):angular.extend(a.curriculum,_),a.draftOptions={},b.queryForDropdown({mainClassCode:"OPPEKAVA_LOOMISE_VIIS"},function(c){a.draftOptions=b.toMap(c)}),a.draftSelected=function(){"OPPEKAVA_LOOMISE_VIIS_RIIKLIK"===a.curriculum.draft?c.showDialog("vocationalCurriculum/dialog/state.curriculum.selection.dialog.html",function(b){b.selectedStateCurriculumOccupations={},b.selectedStateCurriculumPartOccupations={},b.selectedStateCurriculumSpecialities={},h.endpoint("/stateCurriculum/all").query({sort:a.currentLanguageNameField()+",asc",status:[l.STATUS.VERIFIED]}).$promise.then(function(a){b.stateCurriculums=a}),b.stateCurriculumSelected=function(a){b.selectedStateCurriculumOccupations={},b.selectedStateCurriculumPartOccupations={},b.selectedStateCurriculumSpecialities={},angular.isNumber(a)&&h.endpoint("/stateCurriculum").get({id:a}).$promise.then(function(a){T.objectmapper(a).$promise.then(function(a){var c=[];angular.isArray(a.occupations)&&a.occupations.forEach(function(a){var b={occupation:a};ca(b),c.push(b)}),b.stateCurriculumOccupations=c}),b.stateCurriculum=a}),b.occupationsCount=0,b.partOccupationsCount=0,b.occupationsAndPartOccupationsCount=0},b.countOccupationsAndPartOccupationsSelected=function(){t(b)},b.selectedSpecialitiesCount={},b.occupationSelected=function(a){var c=b.selectedStateCurriculumOccupations[a]===!0;b.stateCurriculumOccupations.forEach(function(d){d.occupation.code===a&&(d.partOccupations.forEach(function(a){b.selectedStateCurriculumPartOccupations[a.code]=c}),angular.isArray(d.specialities)&&d.specialities.length>0&&(b.selectedSpecialitiesCount[a]=c?0:void 0,d.specialities.forEach(function(a){b.selectedStateCurriculumSpecialities[a.code]=!1})))}),t(b)},b.specialitySelected=function(a,c){var d=b.selectedStateCurriculumSpecialities[c]===!0;if(angular.isNumber(b.selectedSpecialitiesCount[a])){var e=d?1:-1;b.selectedSpecialitiesCount[a]+=e}}},function(a){var b={id:a.stateCurriculum.id,occupations:[]};angular.isArray(a.stateCurriculumOccupations)&&a.stateCurriculumOccupations.forEach(function(c){var d;a.selectedStateCurriculumOccupations[c.occupation.code]===!0&&(d={occupation:c.occupation.code,specialities:[]},b.occupations.push(d)),angular.isArray(c.partOccupations)&&c.partOccupations.forEach(function(c){if(a.selectedStateCurriculumPartOccupations[c.code]===!0&&!d){var e={occupation:c.code};b.occupations.push(e)}}),angular.isArray(c.specialities)&&c.specialities.forEach(function(e){a.selectedStateCurriculumSpecialities[e.code]===!0&&(d||(d={occupation:c.occupation.code,
specialities:[],occupationGrant:!1},b.occupations.push(d)),d.specialities.push(e.code))})}),h.endpoint("/curriculum/copy/statecurriculum").put(b).$promise.then(function(a){f.info("main.messages.create.success"),k.path("/vocationalCurriculum/"+a.id+"/edit")},u)},u):"OPPEKAVA_LOOMISE_VIIS_KOOL"===a.curriculum.draft?c.showDialog("vocationalCurriculum/dialog/school.curriculum.selection.dialog.html",function(a){a.curriculumSelected=[],h.createQueryForm(a,"/curriculum");var b=a.getCriteria;a.getCriteria=function(){return angular.extend(b(),{isVocational:!0,isPartnerSchool:!1})},a.loadData()},function(a){var b=h.endpoint("/curriculum/copy/curriculum"),c=new b({id:a.curriculumSelected[0].id});c.$update().then(function(a){f.info("main.messages.create.success"),k.path("/vocationalCurriculum/"+a.id+"/edit")},u)},u):"OPPEKAVA_LOOMISE_VIIS_TOOANDJA"===a.curriculum.draft&&(a.curriculum.curriculumOccupations=[],a.curriculum.occupation=!1),a.isDraftEmployerSupportLetter="OPPEKAVA_LOOMISE_VIIS_TOOANDJA"===a.curriculum.draft};var ba=function(){var b={};angular.isArray(a.curriculum.curriculumOccupations)&&a.curriculum.curriculumOccupations.forEach(function(a){b[a.occupation.code]=!0,angular.isArray(a.partOccupations)&&a.partOccupations.forEach(function(a){b[a.code]=!0}),angular.isArray(a.specialities)&&a.specialities.forEach(function(a){b[a.code]=!0})}),angular.isArray(a.curriculum.modules)&&a.curriculum.modules.forEach(function(a){a.occupations=a.occupations.filter(function(a){return b[a]===!0})})};a.occupationChanged=function(){a.curriculum.curriculumOccupations=[],angular.isArray(a.curriculum.versions)&&a.curriculum.versions.forEach(function(a){a.occupationModules=[]}),ba()};var ca=function(a){angular.isDefined(a.occupation)&&d.queryAll({connectClassifierCode:a.occupation.code,classifierMainClassCode:["SPETSKUTSE","OSAKUTSE"]},function(b){var c=[],d=[];b.forEach(function(a){"SPETSKUTSE"===a.classifier.mainClassCode&&c.push(a.classifier),"OSAKUTSE"===a.classifier.mainClassCode&&d.push(a.classifier)}),a.specialities=c,a.partOccupations=d})};a.openOccupationDialog=function(b){c.showDialog("vocationalCurriculum/dialog/occupation.add.dialog.html",function(c){c.$watch("occupation",function(a,d){angular.isDefined(b)&&a.code!==d.code&&(c.selectedSpecialities={}),ca(c)}),c.formState={readOnly:a.formState.readOnly||a.formState.notEditableBasicData,limitedEditing:!a.occupationCanBeChanged()},c.selectedSpecialities={},angular.isDefined(b)&&(c.occupation=b.occupation,c.occupationGrant=b.occupationGrant,angular.isArray(b.specialities)&&b.specialities.forEach(function(a){c.selectedSpecialities[a.code]=!0}))},function(c){angular.isDefined(b)||(b={curriculum:U}),b.occupation=c.occupation,b.occupationGrant=c.occupationGrant?c.occupationGrant:!1,b.partOccupations=c.partOccupations,b.specialities=[],c.specialities.forEach(function(a){c.selectedSpecialities[a.code]===!0&&b.specialities.push(a)});var d=w(b);d.id?new V(d).$update().then(function(a){f.info("main.messages.update.success"),b=a,P(),v()}):new V(d).$save().then(function(b){f.info("main.messages.create.success"),a.curriculum.curriculumOccupations.push(b),v()})})},a.openPartOccupationsDialog=function(b){c.showDialog("vocationalCurriculum/dialog/partOccupation.add.dialog.html",function(c){m.all([h.endpoint("/autocomplete/classifiers/withparents").query({mainClassCode:"OSAKUTSE"}).$promise,h.endpoint("/autocomplete/classifiers/withparents").query({mainClassCode:"KUTSE"}).$promise]).then(function(a){c.partOccupations=a[0],c.occupations=a[1].filter(function(a){for(var b=0;b<c.partOccupations.length;b++)if(e.includes(c.partOccupations[b].parents,a.code))return!0;return!1}),angular.isDefined(b)&&(c.partOccupationAquired=c.partOccupations.find(function(a){return a.code===b.occupation.code}),c.occupation=c.occupations.find(function(a){return e.includes(c.partOccupationAquired.parents,a.code)}))}),c.filterPartOccupations=function(a){return c.occupation?e.includes(a.parents,c.occupation.code):!0},angular.isDefined(b),c.formState={readOnly:a.formState.readOnly||!a.occupationCanBeChanged()||a.formState.notEditableBasicData}},function(c){angular.isDefined(b)||(b={occupationGrant:!1,curriculum:U}),b.occupation=c.partOccupationAquired;var d=w(b);d.id?new V(d).$update().then(function(a){f.info("main.messages.update.success"),b=a,P(),v()}):new V(d).$save().then(function(b){f.info("main.messages.create.success"),a.curriculum.curriculumOccupations.push(b),v()})})},a.openAddModuleDialog=function(b){!a.formState.readOnly&&a.vocationalCurriculumForm.$dirty?c.confirmDialog({prompt:"main.messages.confirmFormDataNotSaved"},function(){y(b)}):y(b)};var da=function(){if(angular.isArray(a.curriculum.modules)){var b=l.modulesViewData(a.curriculum.modules);a.occupationModuleTypesModules=b.occupationModuleTypesModules,a.modulesWithOutOccupation=b.modulesWithOutOccupation,a.validation.mainModuleCount=0,a.curriculum.modules.forEach(function(b){"KUTSEMOODUL_P"===b.module&&a.validation.mainModuleCount++});var c={};for(var d in a.occupationModuleTypesModules)if(!angular.isDefined(c[d])&&(c[d]=0,angular.isDefined(a.occupationModuleTypesModules[d].moduleTypes)))for(var e in a.occupationModuleTypesModules[d].moduleTypes)if(angular.isArray(a.occupationModuleTypesModules[d].moduleTypes[e].modules))for(var f in a.occupationModuleTypesModules[d].moduleTypes[e].modules)c[d]+=a.occupationModuleTypesModules[d].moduleTypes[e].modules[f].credits;a.creditsPerOccupation=c}};a.$watchCollection("curriculum.modules",da),a.openAddFileDialog=function(){c.showDialog("curriculum/dialog/file.add.dialog.html",function(a){a.fileTypeCriteria={vocational:!0}},function(b){var c=b.data;c.sendEhis=!1,c.ehis=!1,c.oisFile=g.getFromLfFile(c.file[0],function(b){c.oisFile=b;var d=new W(c);d.$save().then(function(b){f.info("main.messages.create.success"),a.curriculum.files.push(b)})})})},a.deleteFile=function(b){c.confirmDialog({prompt:"curriculum.itemDeleteConfirm"},function(){e.remove(a.curriculum.files,b);var c=new W(b);c.$delete().then(function(){f.info("main.messages.delete.success")})})},a.getUrl=g.getUrl,a.addJointPartner=function(){var b={abroad:a.curriculum.abroad};b.abroad?(b.nameEt=a.curriculum.jointPartnerForeignNameEt,b.nameEn=a.curriculum.jointPartnerForeignNameEn):b.ehisSchool=a.curriculum.jointPartnerEhisSchool,a.curriculum.jointPartners.push(b),a.curriculum.jointPartnerForeignNameEt=void 0,a.curriculum.jointPartnerForeignNameEn=void 0,A(),B()},a.validation.jointPartnersLength=0,a.$watch("curriculum.joint",function(a,b){b&&!a?(C(),A(),B()):!b&&a&&A()}),a.removejointPartner=function(b){c.confirmDialog({prompt:"curriculum.itemDeleteConfirm"},function(){e.remove(a.curriculum.jointPartners,b),a.vocationalCurriculumForm.$setDirty(),A(),B()})};var ea=function(){a.curriculum.jointPartners.forEach(function(b){b.contractEt=a.curriculum.contractEt,b.contractEn=a.curriculum.contractEn,b.supervisor=a.curriculum.supervisor})};a.clearJointPartnersFields=function(){a.curriculum.jointPartnerForeignNameEt=void 0,a.curriculum.jointPartnerForeignNameEn=void 0,a.curriculum.jointPartnerEhisSchool=void 0},a.filterEmptyJointPartners=function(a){return a.ehisSchool||a.nameEt||a.nameEn},a.isSpetsOccupationValid=function(b,c){var d=H(c.occupation.code),e=H(b.code),f=I(c),g=K(c),h=d+e+f+a.curriculum.optionalStudyCredits-g===a.curriculum.credits;return h},a.isOccutationsCreditsValid=function(b){var c=H(b.occupation.code),d=I(b);return c+=d,e.isEmpty(b.specialities)||(c+=H(b.specialities[0].code)),c-=K(b),a.curriculum.credits-a.curriculum.optionalStudyCredits===c},a.hasVerifiedVersions=function(){var b=a.curriculum.versions;return e.isEmpty(b)?!1:!e.isEmpty(b.filter(function(a){return a.status===l.VERSION_STATUS.K}))},a.notAllModulesHaveOccupation=function(){return a.vocationalCurriculumForm.$submitted&&a.strictValidation()&&(a.occupationRequired()||!e.isEmpty(a.curriculum.curriculumOccupations))&&!a.allModulesHaveOccupation()},a.save=function(){a.formState.strictValidation=!1,setTimeout(M,0)},a["delete"]=function(){c.confirmDialog({prompt:"curriculum.deleteconfirm"},function(){new X(a.curriculum).$delete().then(function(){f.info("main.messages.delete.success"),k.path("/curriculum")})})},a.goToEditForm=function(){a.curriculum&&(a.curriculum.status===l.STATUS.VERIFIED?c.confirmDialog({prompt:"curriculum.prompt.editAccepted"},function(){k.path("/vocationalCurriculum/"+a.curriculum.id+"/edit")}):k.path("/vocationalCurriculum/"+a.curriculum.id+"/edit"))},a.canBeEdited=function(){var b=a.curriculum?a.curriculum.status:null;return a.formState.readOnly&&(b===l.STATUS.ENTERING||b===l.STATUS.PROCEEDING||b===l.STATUS.VERIFIED)},a.getStar=function(){return a.strictValidation()?"":" *"},a.strictValidation=function(){return a.curriculum&&(a.curriculum.status===l.STATUS.VERIFIED||a.curriculum.status===l.STATUS.PROCEEDING||a.formState.strictValidation)},a.saveAndProceed=function(){var b={prompt:a.formState.readOnly?"curriculum.statuschangeReadOnly.vocational.proceed":"curriculum.statuschange.vocational.proceed",errorMessage:"curriculum.error.inputFieldsNotFilledOnProcede",updateSuccess:"curriculum.success.proceed"};a.formState.strictValidation=!0,c.confirmDialog({prompt:b.prompt},function(){setTimeout(function(){if(L(b)){Z(a.curriculum,a);var c=h.endpoint("/curriculum/saveAndProceed");N(c,b)}},0)})},a.setStatusClosed=function(){var b={prompt:a.formState.readOnly?"curriculum.statuschangeReadOnly.vocational.close":"curriculum.statuschange.vocational.close",updateSuccess:"curriculum.success.closed"};c.confirmDialog({prompt:b.prompt},function(){var a=h.endpoint("/curriculum/close");N(a,b)})},a.sendToEhis=function(){c.confirmDialog({prompt:"curriculum.ehisconfirm"},function(){var a=h.endpoint("/curriculum/sendToEhis");N(a,{updateSuccess:"curriculum.sentToEhis"})})},a.updateFromEhis=function(){var a=h.endpoint("/curriculum/updateFromEhis");N(a,{updateSuccess:"curriculum.message.ehisStatusUpdated"})},a.isOccupationChanged=function(){if(!e.isEmpty(a.curriculum.curriculumOccupations)){var b=a.curriculum.occupation?"curriculum.prompt.hasOccupations":"curriculum.prompt.hasSubOccupations";a.curriculum.occupation=!a.curriculum.occupation,c.confirmDialog({prompt:b},function(){for(var b=0;b<a.curriculum.modules.length;b++)a.curriculum.modules[b].occupations=[];a.curriculum.curriculumOccupations=[],a.curriculum.occupation=!a.curriculum.occupation})}},b.queryForDropdown({mainClassCode:"KUTSEMOODUL"},function(b){a.moduleTypes=b}),a.filterEmptyModulesByType=function(a){return function(b){return b.module===a&&e.isEmpty(b.occupations)}},a.filterModulesByType=function(a,b){return function(c){var d=c.occupations;return c.module===a&&e.includes(d,b)}},a.filterTypesWithoutModules=function(a,b){return function(c){var d=b?b.filter(function(b){var d=b.occupations;return e.includes(d,a)&&b.module===c.code}):[];return!e.isEmpty(d)}},a.filterTypesWithoutEmptyModules=function(b){var c=a.curriculum.modules.filter(function(a){return e.isEmpty(a.occupations)}),d=c?c.filter(function(a){return a.module===b.code}):[];return!e.isEmpty(d)},a.removeOccupation=function(b){c.confirmDialog({prompt:"curriculum.itemDeleteConfirm"},function(){new V(b).$delete().then(function(){f.info("main.messages.delete.success"),e.remove(a.curriculum.curriculumOccupations,b),P()})})},a.goToVersionNewForm=function(){var b="/vocationalCurriculum/"+a.curriculum.id+"/moduleImplementationPlan/new";!a.formState.readOnly&&a.vocationalCurriculumForm.$dirty?c.confirmDialog({prompt:"main.messages.confirmFormDataNotSaved"},function(){k.path(b)}):k.path(b)},a.goToImplementationPlanForm=function(b){var d=a.formState.readOnly||b.status!==l.VERSION_STATUS.S?"/vocationalCurriculum/"+a.curriculum.id+"/moduleImplementationPlan/"+b.id+"/view":"/vocationalCurriculum/"+a.curriculum.id+"/moduleImplementationPlan/"+b.id+"/edit";!a.formState.readOnly&&a.vocationalCurriculumForm.$dirty?c.confirmDialog({prompt:"main.messages.confirmFormDataNotSaved"},function(){k.path(d)}):k.path(d)},a.versionCanBeAdded=function(){return a.curriculum&&a.curriculum.canChange&&(a.curriculum.status===l.STATUS.ENTERING&&!a.formState.readOnly||a.curriculum.status===l.STATUS.PROCEEDING||a.curriculum.status===l.STATUS.VERIFIED)},a.allModulesHaveOccupation=function(){var b=a.getModulesWithoutOccupation();return e.isEmpty(b)},a.getModulesWithoutOccupation=function(){return a.curriculum.modules.filter(function(a){return e.isEmpty(a.occupations)})},a.modulesValid=function(){return e.isEmpty(a.curriculum.modules)?!1:e.isEmpty(a.curriculum.curriculumOccupations)?R()&&F():a.allModulesHaveOccupation()&&a.allOccupationsHavePModule()&&G()&&J()},a.allOccupationsHavePModule=function(){for(var b=a.curriculum.curriculumOccupations,c=0;c<b.length;c++){if(!a.occupationHasPModule(b[c].occupation.code))return!1;var d=b[c].specialities;if(!e.isEmpty(d))for(var f=0;f<d.length;f++)if(!a.occupationHasPModule(d[f].code))return!1;var g=b[c].partOccupations;if(!e.isEmpty(g))for(var h=0;h<g.length;h++)if(!a.occupationHasPModule(g[h].code))return!1}return!0},a.occupationHasPModule=function(a){return!e.isEmpty(S(a))},a.occupationRequired=function(){return"OPPEKAVA_LOOMISE_VIIS_KUTSE"===a.curriculum.draft||"OPPEKAVA_LOOMISE_VIIS_RIIKLIK"===a.curriculum.draft},a.occupationCanBeChanged=function(){return"OPPEKAVA_LOOMISE_VIIS_RIIKLIK"!==a.curriculum.draft}}]),angular.module("hitsaOis").controller("VocationalCurriculumModuleImplementationPlanController",["$scope","Curriculum","Classifier","ClassifierConnect","QueryUtils","DataUtils","message","$location","$route","$q","dialogService","$routeParams","ArrayUtils","$rootScope","$http","config",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){function q(a){var b;return A.occupationModules.forEach(function(c){angular.isDefined(a)&&c.curriculumModule===a.id&&(b=c)}),b}function r(b,c){c=q(b);var d="";d=c?a.formState.readOnly?"/occupationModule/"+x.id+"/"+a.implementationPlan.id+"/"+b.id+"/"+c.id+"/view":"/occupationModule/"+x.id+"/"+a.implementationPlan.id+"/"+b.id+"/"+c.id+"/edit":"/occupationModule/"+x.id+"/"+a.implementationPlan.id+"/"+b.id+"/new",h.path(d)}function s(){return a.vocationalCurriculumModuleImplementationPlanForm.$valid&&(a.allModulesHaveData()||!a.strictValidation())}function t(b){if(a.vocationalCurriculumModuleImplementationPlanForm.$setSubmitted(),!s()){var c=b&&b.errorMessage?b.errorMessage:"main.messages.form-has-errors";return g.error(c),!1}return!0}function u(b){if(t(b)){var c=new z(a.implementationPlan);angular.isDefined(a.implementationPlan.id)?c.$update().then(function(c){var d=b&&b.updateSuccess?b.updateSuccess:"main.messages.create.success";g.info(d),a.implementationPlan.version=c.version,a.vocationalCurriculumModuleImplementationPlanForm.$setPristine()}):c.$save().then(function(a){g.info("main.messages.create.success"),h.path("/vocationalCurriculum/"+x.id+"/moduleImplementationPlan/"+a.id+"/edit")})}}function v(b,c){t(c)&&setTimeout(function(){k.confirmDialog({prompt:c.prompt},function(){new b(a.implementationPlan).$update().then(function(b){var d=c&&c.updateSuccess?c.updateSuccess:"main.messages.create.success";g.info(d),a.implementationPlan=b,f.convertStringToDates(a.implementationPlan,["validFrom","validThru"]),a.implementationPlan.curriculum=x.id,a.formState.strictValidation=!1,w(b),a.vocationalCurriculumModuleImplementationPlanForm.$setPristine()})})},0)}function w(b){a.formState.readOnly||h.path("/vocationalCurriculum/"+x.id+"/moduleImplementationPlan/"+b.id+"/view")}var x=i.current.locals.curriculum;a.initializing=!0,a.auth=i.current.locals.auth;var y=i.current.params.versionId,z=e.endpoint("/curriculumVersion");a.VERSION_STATUS=b.VERSION_STATUS,a.formState={readOnly:-1!==i.current.$$route.originalPath.indexOf("view"),strictValidation:!1};var A={curriculum:x.id,occupationModules:[]},B={status:b.VERSION_STATUS.S,validFrom:new Date,code:x.code+" - "+x.nameEt,curriculum:x.id};if(y)A=i.current.locals.curriculumVersion,a.publicUrl=p.apiUrl+"/public/curriculum/"+x.id+"/"+y+"?format=json",a.implementationPlan=A,f.convertStringToDates(a.implementationPlan,["validFrom","validThru"]),n.removeLastUrlFromHistory(function(b){return b&&-1!==b.indexOf("#/vocationalCurriculum/"+a.implementationPlan.curriculum+"/moduleImplementationPlan/")});else{var C=Math.floor(((x.studyPeriod||0)+11)/12);B.yearCapacities=Array.apply(null,{length:C}).fill(0),angular.extend(A,B),a.implementationPlan=A}a.curriculumVersionCodeUniqueQuery={id:y,url:"/curriculumVersion/unique/code"},a.curriculumId=x.id,a.studyForms=x.studyForms,a.curriculumStudyForms=x.studyForms;for(var D=[null],E=(new Date).getFullYear(),F=E-10;E+2>=F;F++)D.push(F);a.admissionYears=D;var G=[];if(angular.isArray(x.modules)){var H=[];x.modules.forEach(function(a){var b={};if(angular.isString(a.module)){var d=c.get(a.module).$promise.then(function(c){angular.extend(b,a,{module:c})});G.push(d)}if(angular.isArray(a.occupations)){var e=[];a.occupations.forEach(function(a){e.push(c.get(a).$promise)});var f=j.all(e).then(function(a){angular.extend(b,{occupations:a})});G.push(j.all(f))}H.push(b)})}var I=[];angular.isArray(x.occupations)&&x.occupations.forEach(function(a){var b={};b.specialities=a.specialities;var d=c.get(a.occupation).$promise.then(function(c){angular.extend(b,a,{occupation:c})});G.push(d),I.push(b)}),j.all(G).then(function(){var c=b.modulesViewData(H);a.occupations=I,a.modules=x.modules,a.isOccupation=x.occupation,a.occupationModuleTypesModules=c.occupationModuleTypesModules,a.modulesWithOutOccupation=c.modulesWithOutOccupation,a.initializing=!1}),e.endpoint("/curriculumVersion/schoolDepartments/curriculum/"+x.id).query().$promise.then(function(b){a.schoolDepartments=b}),a.openViewModuleDialog=function(a){k.showDialog("vocationalCurriculum/implementationPlan/module.view.dialog.html",function(b){b.occupations=I,b.occupationsSelected={},b.partOccupationsSelected={},b.specialitiesSelected={},b.module={outcomes:[],occupations:[]},angular.isDefined(a)&&(angular.extend(b.module,a),angular.isArray(a.occupations)&&(b.module.occupations=a.occupations,a.occupations.forEach(function(a){angular.isDefined(a)&&(0===a.indexOf("KUTSE")||0===a.indexOf("OSAKUTSE")?b.occupationsSelected[a]=!0:0===a.indexOf("SPETSKUTSE")&&(b.specialitiesSelected[a]=!0))})))},null)},a.openAddModuleDataDialog=function(b,c){a.vocationalCurriculumModuleImplementationPlanForm.$dirty?k.confirmDialog({prompt:"main.messages.confirmFormDataNotSaved"},function(){r(b,c)}):r(b,c)},a.isOccupationModuleDataSaved=function(b){var c=!1;return a.implementationPlan.occupationModules.forEach(function(a){a.curriculumModule===b.id&&(c=!0)}),c},a.isModuleValid=function(b){return a.isOccupationModuleDataSaved(b)||"KUTSEMOODUL_V"===b.module},a.copy=function(){var a=e.endpoint("/curriculumVersion/copy");new a({id:y}).$update().then(function(a){g.info("main.messages.create.success"),h.path("/vocationalCurriculum/"+a.curriculum+"/moduleImplementationPlan/"+a.id+"/edit")})},a.save=function(){a.formState.strictValidation=!1,setTimeout(u,0)},a.strictValidation=function(){return a.implementationPlan.status===b.VERSION_STATUS.K},a.anyModuleAdded=function(){return!m.isEmpty(a.modules)},a.allModulesHaveData=function(){if(!a.anyModuleAdded())return!1;for(var b=0;b<a.modules.length;b++)if(!a.isModuleValid(a.modules[b]))return!1;return!0},a["delete"]=function(){k.confirmDialog({prompt:"curriculum.prompt.deleteImplementationPlan"},function(){var b=new z(a.implementationPlan);b.$delete().then(function(){g.info("main.messages.delete.success"),n.back("#/vocationalCurriculum/"+x.id+"/view")})})},a.saveAndConfirm=function(){var b={prompt:a.formState.readOnly?"curriculum.statuschangeReadOnly.implementationPlan.prompt.verify":"curriculum.statuschange.implementationPlan.prompt.verify",updateSuccess:"curriculum.statuschange.implementationPlan.success.verified"},c=e.endpoint("/curriculumVersion/saveAndConfirm");a.formState.strictValidation=!0,v(c,b)},a.confirm=function(){var b={prompt:a.formState.readOnly?"curriculum.statuschangeReadOnly.implementationPlan.prompt.verify":"curriculum.statuschange.implementationPlan.prompt.verify",updateSuccess:"curriculum.statuschange.implementationPlan.success.verified"},c=e.endpoint("/curriculumVersion/confirm");a.formState.strictValidation=!0,v(c,b)},a.setStatusClosed=function(){var b={prompt:a.formState.readOnly?"curriculum.statuschangeReadOnly.implementationPlan.prompt.close":"curriculum.statuschange.implementationPlan.prompt.close",updateSuccess:"curriculum.statuschange.implementationPlan.success.closed"},c=e.endpoint("/curriculumVersion/close");a.formState.strictValidation=!1,v(c,b)},a.goToEditForm=function(){if(a.curriculumId){var c="/vocationalCurriculum/"+x.id+"/moduleImplementationPlan/"+a.implementationPlan.id+"/edit";a.implementationPlan.status===b.VERSION_STATUS.K?k.confirmDialog({prompt:"curriculum.statuschange.implementationPlan.prompt.editAccepted"},function(){h.path(c)}):h.path(c)}},c.queryForDropdown({mainClassCode:"KUTSEMOODUL"},function(b){a.moduleTypes=b}),a.filterEmptyModulesByType=function(a){return function(b){return b.module===a&&m.isEmpty(b.occupations)}},a.filterModulesByType=function(a,b){return function(c){var d=c.occupations;return c.module===a&&m.includes(d,b)}},a.filterTypesWithoutModules=function(a,b){return function(c){var d=b?b.filter(function(b){var d=b.occupations;return m.includes(d,a)&&b.module===c.code}):[];return!m.isEmpty(d)}},a.filterTypesWithoutEmptyModules=function(b){var c=a.modules?a.modules.filter(function(a){return m.isEmpty(a.occupations)}):[],d=c?c.filter(function(a){return a.module===b.code}):[];return!m.isEmpty(d)},a.codeNameUnique=!0,a.$watch("implementationPlan.code",function(){a.implementationPlan.code?o({url:p.apiUrl+"/curriculumVersion/unique/code",method:"GET",params:{paramName:"nameEt",paramValue:a.implementationPlan.code,id:i.current.params.versionId}}).then(function(b){a.codeNameUnique=b.data}):a.codeNameUnique=!0})}]),angular.module("hitsaOis").controller("VocationalCurriculumVersionOccupationModuleController",["$scope","$route","QueryUtils","Classifier","message","$location","ArrayUtils","dialogService","$rootScope",function(a,b,c,d,e,f,g,h,i){function j(){if(a.studyYears&&a.occupationModule&&a.occupationModule.yearCapacities){var b=a.studyYears.length;a.occupationModule.yearCapacities=a.occupationModule.yearCapacities.filter(function(a){return a.studyYearNumber<=b}).sort(function(a,b){return a.studyYearNumber-b.studyYearNumber})}}function k(){return a.occupationModuleForm.$setSubmitted(),a.occupationModuleForm.$valid?!0:(e.error("main.messages.form-has-errors"),!1)}function l(){a.occupationModule.$update().then(function(b){e.info("main.messages.update.success"),r(b),a.occupationModuleForm.$setPristine()})["catch"](angular.noop)}function m(){a.occupationModule.$save().then(function(a){e.info("main.messages.create.success"),f.path("/occupationModule/"+u+"/"+v+"/"+w+"/"+a.id+"/edit")})["catch"](angular.noop)}function n(){var b=a.occupationModule.capacities.reduce(function(a,b){return a+(b.hours?b.hours:0)},0);return b/A===a.curriculumModule.credits}function o(){var b=a.occupationModule.yearCapacities.reduce(function(a,b){return a+b.credits},0);return b===a.curriculumModule.credits}function p(){a.occupationModule.id?l():m()}function q(a){return{capacityType:a.code,nameEt:a.nameEt,nameEn:a.nameEn}}function r(b){a.occupationModule=new y(b),a.occupationModule.supervisor&&(a.occupationModule.supervisor=a.occupationModule.supervisor.trim()),a.occupationModule.totalGradeDescription&&(a.occupationModule.totalGradeDescription=a.occupationModule.totalGradeDescription.trim()),a.occupationModule.requirementsEt&&(a.occupationModule.requirementsEt=a.occupationModule.requirementsEt.trim()),a.occupationModule.id||B.$promise.then(function(){a.occupationModule.capacities=a.capacities.map(q)}),j()}function s(){y.get({id:t}).$promise.then(function(b){a.occupationModule.capacities=b.capacities,a.occupationModule.yearCapacities=b.yearCapacities,j()})}var t=b.current.params.occupationModule,u=b.current.params.curriculum,v=b.current.params.version,w=b.current.params.curriculumModule,x="/occupationModule",y=c.endpoint(x),z=c.endpoint(x+"/theme");a.formState={readOnly:-1!==b.current.$$route.originalPath.indexOf("view")};var A=26;i.removeLastUrlFromHistory(function(a){return a&&-1!==a.indexOf("new")}),c.endpoint(x+"/curriculumModule").get({id:w}).$promise.then(function(b){a.curriculumModule=b,t||(a.occupationModule.assessmentsEt=b.assessmentsEt);var c=Math.floor(((b.studyPeriod||0)+11)/12);a.studyYears=Array.apply(null,{length:c}).map(function(a,b){return b+1}),t?j():a.occupationModule.yearCapacities=a.studyYears.map(function(a){return{credits:0,studyYearNumber:a}})}),a.backToEditForm="#/vocationalCurriculum/"+u+"/moduleImplementationPlan/"+v+"/edit",a.backToViewForm="#/vocationalCurriculum/"+u+"/moduleImplementationPlan/"+v+"/view";var B=d.queryForDropdown({mainClassCode:"MAHT",order:"nameEt"});B.$promise.then(function(){a.capacities=B.filter(function(a){return a.vocational})});var C={curriculumModule:w,curriculumVersion:v,assessment:"KUTSEHINDAMISVIIS_E",yearCapacities:[{credits:0,studyYearNumber:1}],themes:[],capacities:[]};t?a.occupationModule=y.get({id:t}).$promise.then(r):r(new y(C)),a.save=function(){k()&&(n()||o()?n()?o()?p():h.confirmDialog({prompt:"curriculum.prompt.occupationModuleYearCapacitiesMismatch"},p):h.confirmDialog({prompt:"curriculum.prompt.occupationModuleCapacitiesMismatch"},p):h.confirmDialog({prompt:"curriculum.prompt.capacitiesAndYearCapacitiesMismatch"},p))},a.hasThemes=function(){return a.occupationModule&&!g.isEmpty(a.occupationModule.themes)},a.deleteTheme=function(b){h.confirmDialog({prompt:"curriculum.prompt.deleteTheme"},function(){new z(b).$delete().then(function(){e.info("main.messages.delete.success"),g.remove(a.occupationModule.themes,b),s()})})},a.openAddThemeDialog=function(b){var c=a.formState.readOnly?"vocationalCurriculum/implementationPlan/occupation.module.theme.view.dialog.html":"vocationalCurriculum/implementationPlan/occupation.module.theme.edit.dialog.html";h.showDialog(c,function(c){function f(a){return a.dialogForm.$setSubmitted(),a.dialogForm.$valid?a.occupationModuleTheme.hours!==Math.round(A*a.occupationModuleTheme.credits)&&a.occupationModuleTheme.credits!==Math.round(a.occupationModuleTheme.hours/A*10)/10?(e.error("curriculum.error.themeCreditsAndHoursMismatch"),!1):h()?!0:(e.error("curriculum.error.themeCapacitiesAndHoursMismatch"),!1):(e.error("main.messages.form-has-errors"),!1)}function h(){return c.occupationModuleTheme.hours===c.occupationModuleTheme.capacities.reduce(function(a,b){return angular.isDefined(b.hours)?a+=b.hours:a},0)}var i=a.occupationModule;angular.isArray(i.themes)||(i.themes=[]),angular.isDefined(b)?c.occupationModuleTheme=angular.copy(b):c.occupationModuleTheme={capacities:a.capacities.map(q),assessment:"KUTSEHINDAMISVIIS_E",module:a.occupationModule.id},c.outcomes=a.curriculumModule.outcomes,c.setDefaultHours=function(){angular.isNumber(c.occupationModuleTheme.credits)&&(c.occupationModuleTheme.hours=Math.round(A*c.occupationModuleTheme.credits),c.dialogForm.hours.$setDirty())},c.studyYears=a.studyYears,c.assessments=d.queryForDropdown({mainClassCode:"KUTSEHINDAMISVIIS"}),c.setDefaultCredits=function(){c.occupationModuleTheme.credits=Math.round(c.occupationModuleTheme.hours/A*10)/10,c.dialogForm.credits.$setDirty()},c.saveTheme=function(){var a=c;f(a)&&(angular.isDefined(b)?new z(a.occupationModuleTheme).$update().then(function(a){e.info("main.messages.update.success"),g.remove(i.themes,b),i.themes.push(a),s(),c.cancel()}):new z(a.occupationModuleTheme).$save().then(function(a){e.info("main.messages.create.success"),i.themes.push(a),s(),c.cancel()}))}},function(){})}}]),angular.module("hitsaOis").config(["$routeProvider","USER_ROLES",function(a,b){function c(a,b,c,d,e){d.resolve().then(function(d){d.isAdmin()&&c.includes(d.authorizedRoles,e.ROLE_OIGUS_M_TEEMAOIGUS_OPPEKAVA)||(a.error("main.messages.error.nopermission"),b.path(""))})}c.$inject=["message","$location","ArrayUtils","AuthResolver","USER_ROLES"],a.when("/vocationalCurriculum/new",{templateUrl:"vocationalCurriculum/vocational.curriculum.html",controller:"VocationalCurriculumController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}],checkAccess:c},data:{authorizedRoles:[b.ROLE_OIGUS_M_TEEMAOIGUS_OPPEKAVA]}}).when("/vocationalCurriculum/:id/edit",{templateUrl:"vocationalCurriculum/vocational.curriculum.html",controller:"VocationalCurriculumController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}],entity:["QueryUtils","$route",function(a,b){return a.endpoint("/curriculum").get({id:b.current.params.id}).$promise}],checkAccess:c},data:{authorizedRoles:[b.ROLE_OIGUS_M_TEEMAOIGUS_OPPEKAVA]}}).when("/vocationalCurriculum/:id/view",{templateUrl:"vocationalCurriculum/vocational.curriculum.view.html",controller:"VocationalCurriculumController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}],entity:["QueryUtils","$route",function(a,b){return a.endpoint("/curriculum").get({id:b.current.params.id}).$promise}]},data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_OPPEKAVA,b.ROLE_OIGUS_V_TEEMAOIGUS_RIIKLIKOPPEKAVA]}}).when("/vocationalCurriculum/:id/moduleImplementationPlan/new",{templateUrl:"vocationalCurriculum/implementationPlan/implementation.plan.html",controller:"VocationalCurriculumModuleImplementationPlanController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}],curriculum:["QueryUtils","$route",function(a,b){return a.endpoint("/curriculumVersion/curriculum").get({id:b.current.params.id}).$promise}],checkAccess:c},data:{authorizedRoles:[b.ROLE_OIGUS_M_TEEMAOIGUS_OPPEKAVA]}}).when("/vocationalCurriculum/:id/moduleImplementationPlan/:versionId/edit",{templateUrl:"vocationalCurriculum/implementationPlan/implementation.plan.html",controller:"VocationalCurriculumModuleImplementationPlanController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}],curriculum:["QueryUtils","$route",function(a,b){return a.endpoint("/curriculumVersion/curriculum").get({id:b.current.params.id}).$promise}],curriculumVersion:["QueryUtils","$route",function(a,b){return a.endpoint("/curriculumVersion").get({id:b.current.params.versionId}).$promise}],checkAccess:c},data:{authorizedRoles:[b.ROLE_OIGUS_M_TEEMAOIGUS_OPPEKAVA]}}).when("/vocationalCurriculum/:id/moduleImplementationPlan/:versionId/view",{templateUrl:"vocationalCurriculum/implementationPlan/implementation.plan.view.html",controller:"VocationalCurriculumModuleImplementationPlanController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}],curriculum:["QueryUtils","$route",function(a,b){return a.endpoint("/curriculumVersion/curriculum").get({id:b.current.params.id}).$promise}],curriculumVersion:["QueryUtils","$route",function(a,b){return a.endpoint("/curriculumVersion").get({id:b.current.params.versionId}).$promise}]},data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_OPPEKAVA,b.ROLE_OIGUS_V_TEEMAOIGUS_RIIKLIKOPPEKAVA]}}).when("/vocationalCurriculum/:curriculum/module/new",{templateUrl:"vocationalCurriculum/module/vocational.curriculum.module.edit.html",controller:"VocationalCurriculumModuleController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],checkAccess:c},data:{authorizedRoles:[b.ROLE_OIGUS_M_TEEMAOIGUS_OPPEKAVA]}}).when("/vocationalCurriculum/:curriculum/module/:id/view",{templateUrl:"vocationalCurriculum/module/vocational.curriculum.module.view.html",controller:"VocationalCurriculumModuleController",
controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}]},data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_OPPEKAVA,b.ROLE_OIGUS_V_TEEMAOIGUS_RIIKLIKOPPEKAVA]}}).when("/vocationalCurriculum/:curriculum/module/:id/edit",{templateUrl:"vocationalCurriculum/module/vocational.curriculum.module.edit.html",controller:"VocationalCurriculumModuleController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],checkAccess:c},data:{authorizedRoles:[b.ROLE_OIGUS_M_TEEMAOIGUS_OPPEKAVA]}}).when("/occupationModule/:curriculum/:version/:curriculumModule/new",{templateUrl:"vocationalCurriculum/implementationPlan/occupation.module.edit.html",controller:"VocationalCurriculumVersionOccupationModuleController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],checkAccess:c},data:{authorizedRoles:[b.ROLE_OIGUS_M_TEEMAOIGUS_OPPEKAVA]}}).when("/occupationModule/:curriculum/:version/:curriculumModule/:occupationModule/edit",{templateUrl:"vocationalCurriculum/implementationPlan/occupation.module.edit.html",controller:"VocationalCurriculumVersionOccupationModuleController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],checkAccess:c},data:{authorizedRoles:[b.ROLE_OIGUS_M_TEEMAOIGUS_OPPEKAVA]}}).when("/occupationModule/:curriculum/:version/:curriculumModule/:occupationModule/view",{templateUrl:"vocationalCurriculum/implementationPlan/occupation.module.view.html",controller:"VocationalCurriculumVersionOccupationModuleController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}]},data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_OPPEKAVA,b.ROLE_OIGUS_V_TEEMAOIGUS_RIIKLIKOPPEKAVA]}})}]),angular.module("hitsaOis").controller("VocationalCurriculumModuleController",["$scope","$route","QueryUtils","dialogService","message","ArrayUtils","$location","$rootScope","ClassifierConnect",function(a,b,c,d,e,f,g,h,i){function j(b){a.module=b,a.module.outcomes.forEach(function(b){angular.isDefined(b.orderNr)||(b.orderNr=a.module.outcomes.indexOf(b))}),a.module.outcomes.sort(function(a,b){return a.orderNr-b.orderNr}),angular.isArray(a.module.occupations)&&a.module.occupations.forEach(function(b){0===b.indexOf("KUTSE")||0===b.indexOf("OSAKUTSE")?a.occupationsSelected[b]=!0:0===b.indexOf("SPETSKUTSE")&&(a.specialitiesSelected[b]=!0)})}function k(){return a.vocationalCurriculumModuleForm.$setSubmitted(),a.vocationalCurriculumModuleForm.$valid?!0:(e.error("main.messages.form-has-errors"),!1)}function l(){a.module.$update().then(function(b){e.info("main.messages.update.success"),j(b),a.vocationalCurriculumModuleForm.$setPristine()})}function m(){a.module.$save().then(function(b){e.info("main.messages.create.success"),g.path("/vocationalCurriculum/"+a.module.curriculum+"/module/"+b.id+"/edit")})}function n(){a.module.outcomes.forEach(function(b){b.orderNr=a.module.outcomes.indexOf(b)}),o(a,a.module)}function o(a,b){b.occupations=[],b.curriculumOccupations.forEach(function(c){a.occupationsSelected[c.occupation]===!0&&b.occupations.push(c.occupation),angular.isArray(c.partOccupations)&&c.partOccupations.forEach(function(c){a.occupationsSelected[c]===!0&&b.occupations.push(c)}),angular.isArray(c.specialities)&&c.specialities.forEach(function(c){a.specialitiesSelected[c]===!0&&b.occupations.push(c)})})}function p(b){if(!angular.isArray(b))return!1;for(var c=0;c<b.length;c++)if(a.specialitiesSelected[b[c]])return!0;return!1}function q(b){if(!angular.isArray(b))return!1;for(var c=0;c<b.length;c++)if(a.occupationsSelected[b[c]])return!0;return!1}function r(){if(!a.module||!a.module.curriculumOccupations)return!0;for(var b=a.module.curriculumOccupations,c=0;c<b.length;c++){var d=b[c].occupation,e=a.occupationsSelected[d];if(e){var f=b[c].specialities;if(f)for(var g=0;g<f.length;g++)if(a.specialitiesSelected[f[g]])return null}}for(var h=0;h<b.length;h++){var i=b[h].specialities,j=b[h].partOccupations;if(i&&j&&p(i)&&q(j))return null}return!0}a.curriculumId=b.current.params.curriculum;var s=b.current.params.id,t="/curriculumModule",u=c.endpoint(t);h.removeLastUrlFromHistory(function(a){return a&&-1!==a.indexOf("new")});var v={curriculum:a.curriculumId,occupations:[],competences:[],outcomes:[],practice:!1};a.occupationsSelected={},a.specialitiesSelected={},a.competences=[],c.endpoint(t+"/competences/curriculum/"+a.curriculumId).query().$promise.then(function(b){a.competences=b,a.vocationalCurriculumModuleForm&&a.vocationalCurriculumModuleForm.$setPristine()}),s?u.get({id:s}).$promise.then(j):(a.module=new u(v),c.endpoint(t+"/curriculum/"+a.curriculumId).search().$promise.then(function(b){a.module.curriculumOccupations=b.occupations,a.module.occupation=b.occupation,a.module.canHaveOccupations=b.canHaveOccupations})),a.possibleTypes=[],c.endpoint(t+"/types").query({module:s,curriculum:a.curriculumId}).$promise.then(function(b){a.possibleTypes=b}),a.isEditingOutcome=!1,a.editedOutcome=null,a.removeFromArray=function(b,c){d.confirmDialog({prompt:"curriculum.itemDeleteConfirm"},function(){f.remove(b,c),a.vocationalCurriculumModuleForm.$setDirty()})},a.addOutcome=function(){angular.isString(a.outcomeEt)&&""!==a.outcomeEt&&(a.module.outcomes.push({outcomeEt:a.outcomeEt,outcomeEn:a.outcomeEn,order:a.module.outcomes.length}),a.outcomeEt=void 0,a.outcomeEn=void 0)},a.swap=function(b,c){var d=a.module.outcomes[b];a.module.outcomes[b]=a.module.outcomes[c],a.module.outcomes[c]=d,a.vocationalCurriculumModuleForm.$setDirty()},a.editOutcome=function(b){a.isEditingOutcome=!0,a.editedOutcome=b,a.outcomeEt=b.outcomeEt,a.outcomeEn=b.outcomeEn},a.saveOutcome=function(){angular.isString(a.outcomeEt)&&""!==a.outcomeEt&&(a.isEditingOutcome=!1,a.editedOutcome.outcomeEt=a.outcomeEt,a.editedOutcome.outcomeEn=a.outcomeEn,a.outcomeEt=void 0,a.outcomeEn=void 0)},a.save=function(){k()&&(n(),a.module.id?l():m())},a["delete"]=function(){d.confirmDialog({prompt:"module.messages.prompt.delete"},function(){a.module.$delete().then(function(){e.info("main.messages.delete.success"),h.back("#/vocationalCurriculum/"+a.module.curriculum+"/edit")})})},a.occupationsValid=r(),a.validateOccupations=function(){a.occupationsValid=r()}}]),angular.module("hitsaOis").controller("StudentEhisController",["$scope","message","QueryUtils",function(a,b,c){var d="CURRICULA_FULFILMENT",e="FOREIGN_STUDY",f="GRADUATION",g="VOTA";a.dataTypes=[d,e,f,g],a.displayDates=[e,f,g],a.criteria={from:new Date,thru:new Date},a.exportStudents=function(){a.studentExportForm.$valid?c.endpoint("/students/ehisStudentExport").post(a.criteria).$promise.then(function(c){b.info(c&&c.length>0?"ehis.messages.exportFinished":"ehis.messages.nostudentsfound"),a.result=c})["catch"](angular.noop):b.error("main.messages.form-has-errors")}}]),angular.module("hitsaOis").controller("EhisLogsController",["$mdDialog","$scope","QueryUtils","Session",function(a,b,c,d){var e=d.school||{};b.messageTypes=["laeKorgharidus","oisOppekava","oisOppekavaStaatus"],e.higher&&b.messageTypes.push("laeOppejoud"),e.vocational&&b.messageTypes.push("laePedagoogid");var f="/logs/ehis";c.createQueryForm(b,f,{order:"-inserted"}),b.loadData(),b.logentry=function(b){a.show({controller:["$scope",function(d){var e=1e3;d.requestLength=d.responseLength=e,d.cancel=a.hide,d.showAll=function(a){a?d.requestLength=void 0:d.responseLength=void 0},d.record=c.endpoint(f).get({id:b.id,messageType:b.wsName},function(a){(!a.request||a.request.length<e)&&d.showAll(!0),(!a.response||a.response.length<e)&&d.showAll(!1)})}],templateUrl:"ehis/logentry.view.dialog.html",clickOutsideToClose:!0})}}]),angular.module("hitsaOis").controller("TeacherExportController",["$route","$scope","message","QueryUtils",function(a,b,c,d){b.higher=a.current.locals.higher;var e=b.higher?"/teachers/exportToEhis/higher":"/teachers/exportToEhis/vocational";b.teacher={},b.teacher.allDates=!1,b.exportTeachers=function(){b.teacherExportForm.$valid?d.endpoint(e).post(b.teacher).$promise.then(function(a){c.info(a&&a.length>0?"ehis.messages.exportFinished":"ehis.messages.noteachersfound"),b.result=a})["catch"](angular.noop):c.error("main.messages.form-has-errors")}}]),angular.module("hitsaOis").config(["$routeProvider","USER_ROLES",function(a,b){a.when("/ehis/teacher/export/higher",{templateUrl:"ehis/teacher.export.html",controller:"TeacherExportController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}],higher:function(){return!0}},data:{authorizedRoles:[b.ROLE_OIGUS_M_TEEMAOIGUS_ANDMEVAHETUS_EHIS]}}).when("/ehis/teacher/export/vocational",{templateUrl:"ehis/teacher.export.html",controller:"TeacherExportController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}],higher:function(){return!1}},data:{authorizedRoles:[b.ROLE_OIGUS_M_TEEMAOIGUS_ANDMEVAHETUS_EHIS]}}).when("/ehis/student/export",{templateUrl:"ehis/student.html",controller:"StudentEhisController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}]},data:{authorizedRoles:[b.ROLE_OIGUS_M_TEEMAOIGUS_ANDMEVAHETUS_EHIS]}}).when("/ehis/logs",{templateUrl:"ehis/logs.view.html",controller:"EhisLogsController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}]},data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_ANDMEVAHETUS_EHIS]}})}]),angular.module("hitsaOis").config(["$routeProvider","USER_ROLES",function(a,b){a.when("/scholarships/grant/new",{templateUrl:"scholarship/scholarship.edit.html",controller:"ScholarshipEditController",controllerAs:"controller",resolve:{auth:["AuthResolver",function(a){return a.resolve()}],translationLoaded:["$translate",function(a){return a.onReady()}],params:function(){return{allowedStipendTypes:["STIPTOETUS_POHI","STIPTOETUS_ERI","STIPTOETUS_SOIDU"],typeIsScholarship:!1}}},data:{authorizedRoles:[b.ROLE_OIGUS_M_TEEMAOIGUS_STIPTOETUS]}}).when("/scholarships/scholarship/new",{templateUrl:"scholarship/scholarship.edit.html",controller:"ScholarshipEditController",controllerAs:"controller",resolve:{auth:["AuthResolver",function(a){return a.resolve()}],translationLoaded:["$translate",function(a){return a.onReady()}],params:function(){return{allowedStipendTypes:["STIPTOETUS_TULEMUS","STIPTOETUS_ERIALA","STIPTOETUS_MUU"],typeIsScholarship:!0}}},data:{authorizedRoles:[b.ROLE_OIGUS_M_TEEMAOIGUS_STIPTOETUS]}}).when("/scholarships/drGrant/new",{templateUrl:"scholarship/scholarship.edit.html",controller:"ScholarshipEditController",controllerAs:"controller",resolve:{auth:["AuthResolver",function(a){return a.resolve()}],translationLoaded:["$translate",function(a){return a.onReady()}],params:function(){return{allowedStipendTypes:["STIPTOETUS_DOKTOR"],typeIsScholarship:!0}}},data:{authorizedRoles:[b.ROLE_OIGUS_M_TEEMAOIGUS_STIPTOETUS]}}).when("/scholarships/:id/edit",{templateUrl:"scholarship/scholarship.edit.html",controller:"ScholarshipEditController",controllerAs:"controller",resolve:{auth:["AuthResolver",function(a){return a.resolve()}],translationLoaded:["$translate",function(a){return a.onReady()}]},data:{authorizedRoles:[b.ROLE_OIGUS_M_TEEMAOIGUS_STIPTOETUS]}}).when("/scholarships/:id/view",{templateUrl:"scholarship/scholarship.view.html",controller:"ScholarshipViewController",controllerAs:"controller",resolve:{auth:["AuthResolver",function(a){return a.resolve()}],translationLoaded:["$translate",function(a){return a.onReady()}]},data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_STIPTOETUS]}}).when("/scholarships",{templateUrl:"scholarship/scholarship.search.html",controller:"ScholarshipSearchController",controllerAs:"controller",resolve:{auth:["AuthResolver",function(a){return a.resolve()}],translationLoaded:["$translate",function(a){return a.onReady()}],params:function(){return{allowedStipendTypes:["STIPTOETUS_DOKTOR"],scholarshipType:"drGrant"}}},data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_STIPTOETUS]}}).when("/scholarships/grants",{templateUrl:"scholarship/scholarship.search.html",controller:"ScholarshipSearchController",controllerAs:"controller",resolve:{auth:["AuthResolver",function(a){return a.resolve()}],translationLoaded:["$translate",function(a){return a.onReady()}],params:function(){return{allowedStipendTypes:["STIPTOETUS_POHI","STIPTOETUS_ERI","STIPTOETUS_SOIDU"],grant:!0}}},data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_STIPTOETUS]}}).when("/scholarships/scholarships",{templateUrl:"scholarship/scholarship.search.html",controller:"ScholarshipSearchController",controllerAs:"controller",resolve:{auth:["AuthResolver",function(a){return a.resolve()}],translationLoaded:["$translate",function(a){return a.onReady()}],params:function(){return{allowedStipendTypes:["STIPTOETUS_ERIALA","STIPTOETUS_TULEMUS","STIPTOETUS_MUU"],scholarship:!0}}},data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_STIPTOETUS]}}).when("/scholarships/myData/scholarships",{templateUrl:"scholarship/student/scholarship.scholarship.student.html",controller:"StudentScholarshipController",controllerAs:"controller",resolve:{auth:["AuthResolver",function(a){return a.resolve()}],translationLoaded:["$translate",function(a){return a.onReady()}]},data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_OPPUR]}}).when("/scholarships/myData/grants",{templateUrl:"scholarship/student/scholarship.grants.student.html",controller:"StudentScholarshipController",controllerAs:"controller",resolve:{auth:["AuthResolver",function(a){return a.resolve()}],translationLoaded:["$translate",function(a){return a.onReady()}]},data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_OPPUR]}}).when("/scholarships/myData/drGrants",{templateUrl:"scholarship/student/scholarship.grants.student.html",controller:"StudentScholarshipController",controllerAs:"controller",resolve:{auth:["AuthResolver",function(a){return a.resolve()}],translationLoaded:["$translate",function(a){return a.onReady()}]},data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_OPPUR]}}).when("/scholarships/:id/application",{templateUrl:"scholarship/student/scholarship.application.edit.html",controller:"StudentScholarshipApplicationEditController",controllerAs:"controller",resolve:{auth:["AuthResolver",function(a){return a.resolve()}],translationLoaded:["$translate",function(a){return a.onReady()}]},data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_OPPUR]}}).when("/scholarships/applications/grants",{templateUrl:"scholarship/scholarship.application.list.grants.html",controller:"ScholarshipApplicationController",controllerAs:"controller",resolve:{auth:["AuthResolver",function(a){return a.resolve()}],translationLoaded:["$translate",function(a){return a.onReady()}],params:function(){return{allowedStipendTypes:["STIPTOETUS_POHI","STIPTOETUS_ERI","STIPTOETUS_SOIDU"],stipend:!1}}},data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_STIPTOETUS]}}).when("/scholarships/applications/scholarships",{templateUrl:"scholarship/scholarship.application.list.scho.html",controller:"ScholarshipApplicationController",controllerAs:"controller",resolve:{auth:["AuthResolver",function(a){return a.resolve()}],translationLoaded:["$translate",function(a){return a.onReady()}],params:function(){return{allowedStipendTypes:["STIPTOETUS_TULEMUS","STIPTOETUS_ERIALA","STIPTOETUS_MUU"],stipend:!0}}},data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_STIPTOETUS]}}).when("/scholarships/applications/annul",{templateUrl:"scholarship/scholarship.application.annul.edit.html",controller:"ScholarshipRejectionController",controllerAs:"controller",resolve:{auth:["AuthResolver",function(a){return a.resolve()}],translationLoaded:["$translate",function(a){return a.onReady()}],params:function(){return{type:"annulApplications"}}},data:{authorizedRoles:[b.ROLE_OIGUS_M_TEEMAOIGUS_STIPTOETUS]}}).when("/scholarships/applications/reject",{templateUrl:"scholarship/scholarship.application.reject.edit.html",controller:"ScholarshipRejectionController",controllerAs:"controller",resolve:{auth:["AuthResolver",function(a){return a.resolve()}],translationLoaded:["$translate",function(a){return a.onReady()}],params:function(){return{type:"rejectApplications"}}},data:{authorizedRoles:[b.ROLE_OIGUS_M_TEEMAOIGUS_STIPTOETUS]}}).when("/scholarships/applications/:id",{templateUrl:"scholarship/student/scholarship.application.edit.html",controller:"StudentScholarshipApplicationViewController",controllerAs:"controller",resolve:{auth:["AuthResolver",function(a){return a.resolve()}],translationLoaded:["$translate",function(a){return a.onReady()}]},data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_OPPUR]}})}]),angular.module("hitsaOis").controller("ScholarshipEditController",["$scope","$rootScope","Classifier","$location","message","QueryUtils","dialogService","$route","DataUtils",function(a,b,c,d,e,f,g,h,i){function j(b){a.formState.allowedStipendTypes=[b.type],a.stipend=b,a.stipendTypeChanged(),a.formState.studyPeriods.$promise.then(function(){a.formState.readonlyStudyPeriod=a.formState.studyPeriods.find(function(b){return b.id===a.stipend.studyPeriod})})}function k(){return a.stipendForm.$setSubmitted(),a.stipendForm.$valid?!angular.isArray(a.stipend.curriculums)||a.stipend.curriculums.length<1?(e.error("stipend.messages.error.curriculumsEmtpy"),!1):!0:(e.error("main.messages.form-has-errors"),!1)}var l={STIPTOETUS_POHI:"scholarship/term/scholarship.pohi.edit.html",STIPTOETUS_ERI:"scholarship/term/scholarship.eri.edit.html",STIPTOETUS_SOIDU:"scholarship/term/scholarship.soidu.edit.html",STIPTOETUS_DOKTOR:"scholarship/term/scholarship.doktor.edit.html",STIPTOETUS_ERIALA:"scholarship/term/scholarship.scho.edit.html",STIPTOETUS_MUU:"scholarship/term/scholarship.scho.edit.html",STIPTOETUS_TULEMUS:"scholarship/term/scholarship.scho.edit.html"};a.filteredStudyForm=["OPPEVORM_P","OPPEVORM_Q","OPPEVORM_S","OPPEVORM_MS","OPPEVORM_K","OPPEVORM_M"],a.formState={priorities:c.queryForDropdown({mainClassCode:"PRIORITEET"})},c.queryForDropdown({mainClassCode:"STIPTOETUS"}).$promise.then(function(b){a.formState.typeMap=c.toMap(b)}),a.formState.studyPeriods=f.endpoint("/autocomplete/studyPeriods").query();var m=h.current.params.id,n="/scholarships",o=f.endpoint(n);a.stipendTypeChanged=function(){a.templateName=l[a.stipend.type],a.stipend.nameEt=(a.formState.typeMap[a.stipend.type]||{}).nameEt,angular.isArray(a.formState.allowedStipendTypes)&&1===a.formState.allowedStipendTypes.length&&(a.formState.typeIsScholarship=-1!==["STIPTOETUS_ERIALA","STIPTOETUS_MUU","STIPTOETUS_TULEMUS"].indexOf(a.formState.allowedStipendTypes[0]))},m?a.stipend=o.get({id:m},j):(a.stipend=new o({}),a.formState.allowedStipendTypes=h.current.locals.params.allowedStipendTypes,a.formState.typeIsScholarship=h.current.locals.params.typeIsScholarship,1===a.formState.allowedStipendTypes.length&&(a.stipend.type=a.formState.allowedStipendTypes[0],a.stipendTypeChanged()),a.formState.studyPeriods.$promise.then(function(){if(!a.stipend.studyPeriod){var b=i.getCurrentStudyYearOrPeriod(a.formState.studyPeriods);b&&(a.stipend.studyPeriod=b.id)}}),a.stipend.courses=["KURSUS_1","KURSUS_2","KURSUS_3","KURSUS_4"]),a.update=function(){k()&&(a.stipend.id?a.stipend.$update().then(j).then(e.updateSuccess)["catch"](angular.noop):a.stipend.$save().then(function(){e.info("main.messages.create.success"),d.url(n+"/"+a.stipend.id+"/edit?_noback")})["catch"](angular.noop))},a.$watch("formState.curriculum",function(){if(angular.isDefined(a.formState.curriculum)&&null!==a.formState.curriculum){if(angular.isArray(a.stipend.curriculums)||(a.stipend.curriculums=[]),a.stipend.curriculums.some(function(b){return b.id===a.formState.curriculum.id}))return e.error("stipend.messages.error.duplicateCurriculum"),void(a.formState.curriculum=void 0);a.stipend.curriculums.push(a.formState.curriculum),a.stipend.curriculums.length>0&&(a.missingCurriculums=!1),a.formState.curriculum=void 0}}),a.deleteCurriculum=function(b){var c=a.stipend.curriculums.indexOf(b);-1!==c&&a.stipend.curriculums.splice(c,1),0===a.stipend.curriculums.length&&(a.missingCurriculums=!0)},a.publish=function(){g.confirmDialog({prompt:"stipend.confirmations.saveAndPublish"},function(){k()&&a.stipend.$update({},function(){f.endpoint(n+"/"+a.stipend.id+"/publish").put({},function(){h.reload()})})["catch"](angular.noop)})},a["delete"]=function(){var b,c;-1!==["STIPTOETUS_POHI","STIPTOETUS_ERI","STIPTOETUS_SOIDU"].indexOf(a.stipend.type)?(b="stipend.confirmations.deleteGrant",c="/scholarships/grants"):(b="stipend.confirmations.deleteStipend",c="/scholarships/scholarships"),g.confirmDialog({prompt:b},function(){f.endpoint(n+"/"+a.stipend.id+"/deleteTerm")["delete"]({},function(){d.url(c+"?_noback")})["catch"](angular.noop)})},a.averageMarkPriorityFilter=function(b){var c=[a.stipend.lastPeriodMarkPriority,a.stipend.curriculumCompletionPriority,a.stipend.maxAbsencesPriority];return-1===c.indexOf(b.code)},a.lastPeriodMarkPriorityFilter=function(b){var c=[a.stipend.averageMarkPriority,a.stipend.curriculumCompletionPriority,a.stipend.maxAbsencesPriority];return-1===c.indexOf(b.code)},a.curriculumCompletionPriorityFilter=function(b){var c=[a.stipend.averageMarkPriority,a.stipend.lastPeriodMarkPriority,a.stipend.maxAbsencesPriority];return-1===c.indexOf(b.code)},a.maxAbsencesPriorityFilter=function(b){var c=[a.stipend.averageMarkPriority,a.stipend.lastPeriodMarkPriority,a.stipend.curriculumCompletionPriority];return-1===c.indexOf(b.code)}}]).controller("ScholarshipViewController",["dialogService","Classifier","$scope","$location","message","QueryUtils","$route","AuthService","USER_ROLES",function(a,b,c,d,e,f,g,h,i){function j(a){c.stipend=a,c.templateName=k[a.type],c.formState.typeIsScholarship=-1!==["STIPTOETUS_ERIALA","STIPTOETUS_MUU","STIPTOETUS_TULEMUS"].indexOf(a.type),c.curriculumsDisplay=a.curriculums.map(c.currentLanguageNameField),c.formState.studyPeriods=f.endpoint("/autocomplete/studyPeriods").query(function(){c.formState.readonlyStudyPeriod=c.formState.studyPeriods.find(function(a){return a.id===c.stipend.studyPeriod})})}var k={STIPTOETUS_POHI:"scholarship/term/scholarship.pohi.view.html",STIPTOETUS_ERI:"scholarship/term/scholarship.eri.view.html",STIPTOETUS_SOIDU:"scholarship/term/scholarship.soidu.view.html",STIPTOETUS_DOKTOR:"scholarship/term/scholarship.doktor.view.html",STIPTOETUS_ERIALA:"scholarship/term/scholarship.scho.view.html",STIPTOETUS_MUU:"scholarship/term/scholarship.scho.view.html",STIPTOETUS_TULEMUS:"scholarship/term/scholarship.scho.view.html"};c.canEdit=h.isAuthorized(i.ROLE_OIGUS_M_TEEMAOIGUS_STIPTOETUS),c.formState={};var l=g.current.params.id,m="/scholarships",n=f.endpoint(m);c.publish=function(){a.confirmDialog({prompt:"stipend.confirmations.publish"},function(){f.endpoint(m+"/"+c.stipend.id+"/publish").put({},function(a){j(a)})["catch"](angular.noop)})},l&&(c.stipend=n.get({id:l},j))}]),angular.module("hitsaOis").controller("ScholarshipSearchController",["$scope","$location","$q","$route","$timeout","dialogService","message","Classifier","QueryUtils","DataUtils","USER_ROLES","AuthService",function(a,b,c,d,e,f,g,h,i,j,k,l){a.canEdit=l.isAuthorized(k.ROLE_OIGUS_M_TEEMAOIGUS_STIPTOETUS);var m="/scholarships",n=h.valuemapper({type:"STIPTOETUS"});a.formState={},a.statuses=[{id:0,nameEt:"Sisestamisel"},{id:1,nameEt:"Avalik"}],a.studyPeriods=i.endpoint("/autocomplete/studyPeriods").query(),i.createQueryForm(a,m,{order:"id"},n.objectmapper);var o=n.promises;o.push(a.studyPeriods.$promise),a.criteria.allowedStipendTypes=d.current.locals.params.allowedStipendTypes,d.current.locals.params.scholarship?(a.formState.typeIsScholarship=!0,a.scholarshipType="scholarship"):d.current.locals.params.grant&&(a.scholarshipType="grant"),c.all(o).then(function(){if(!a.criteria.studyPeriod){var b=j.getCurrentStudyYearOrPeriod(a.studyPeriods);b&&(a.criteria.studyPeriod=b.id)}e(a.loadData)}),a.changeStipend=function(a){var c;c=-1!==["STIPTOETUS_POHI","STIPTOETUS_ERI","STIPTOETUS_SOIDU","STIPTOETUS_DOKTOR"].indexOf(a.type.code)?"stipend.confirmations.grantIsPublishedChange":"stipend.confirmations.scholarshipIsPublishedChange",a.isOpen?f.confirmDialog({prompt:c},function(){b.url(m+"/"+a.id+"/edit")}):b.url(m+"/"+a.id+"/edit")}}]),angular.module("hitsaOis").controller("ScholarshipApplicationController",["Classifier","$scope","$location","message","QueryUtils","$route","DataUtils","$q","$sessionStorage","AuthService","USER_ROLES",function(a,b,c,d,e,f,g,h,i,j,k){function l(){return b.applications.filter(function(a){return a._selected}).map(function(a){return a.id})}var m="/scholarships";b.criteria={},b.formState={},b.formState.allowedStipendTypes=f.current.locals.params.allowedStipendTypes;var n=f.current.locals.params.stipend;b.canManage=j.isAuthorized(k.ROLE_OIGUS_M_TEEMAOIGUS_STIPTOETUS),b.studyPeriods=e.endpoint("/autocomplete/studyPeriods").query();var o=a.valuemapper({status:"STIPTOETUS_STAATUS",type:"STIPTOETUS",compensationFrequency:"STIPTOETUS_HYVITAMINE",compensationReason:"STIPTOETUS_HYVITAMINE_POHJUS"}),p=o.promises;p.push(b.studyPeriods.$promise),h.all(p).then(function(){if(b.criteria.studyPeriod=g.getCurrentStudyYearOrPeriod(b.studyPeriods).id,!("_menu"in f.current.params)){b.fromStorage=function(a){return JSON.parse(i[a]||"{}")};var a=b.fromStorage(f.current.originalPath);angular.isNumber(a.page)&&(a.page=a.page+1),angular.extend(b.criteria,a)}}),b.toStorage=function(a,b){i[a]=JSON.stringify(b)},b.reloadTable=function(){return b.applicationSearchForm.$setSubmitted(),b.applicationSearchForm.$valid?void e.endpoint(m+"/applications").search(b.criteria,function(a){angular.isArray(a.applications)?a.applications.length<1?(d.info("main.messages.error.notFound"),b.applications=[],b.allowedCount=0):(b.applications=o.objectmapper(a.applications),b.allowedCount=a.allowedCount):(d.info("main.messages.error.notFound"),b.applications=[],b.allowedCount=0),b.submittedType=b.criteria.type,b.toStorage(f.current.originalPath,b.criteria)}):(d.error("main.messages.form-has-errors"),!1)},b.updateAllApplicationCheckBoxes=function(a){b.applications.forEach(function(b){b._selected=a})},b.clearCriteria=function(){b.criteria={}},b.accept=function(){var a=l();a.length>0?e.endpoint(m+"/acceptApplications").put({applications:b.applications.filter(function(a){return a._selected})},b.reloadTable):d.error("stipend.messages.error.noStudentsSelected")},b.annul=function(){var a=l();a.length>0?c.path("/scholarships/applications/annul").search({ids:a,stipend:n}):d.error("stipend.messages.error.noStudentsSelected")},b.reject=function(){var a=l();a.length>0?c.path("/scholarships/applications/reject").search({ids:a,stipend:n}):d.error("stipend.messages.error.noStudentsSelected")};var q;b.resetCurriculum=function(){"STIPTOETUS_POHI"===q&&(b.criteria.curriculum=[]),q=b.criteria.type}}]).controller("ScholarshipRejectionController",["dialogService","Classifier","$scope","$location","message","QueryUtils","$route","ArrayUtils",function(a,b,c,d,e,f,g,h){var i="/scholarships";c.stipend=g.current.params.stipend,f.endpoint(i+"/studentProfilesRejection").query({id:g.current.params.ids},function(a){angular.isArray(a)&&(a.length<1?e.info("main.messages.error.notFound"):c.rejections=a)}),c.reject=function(){f.endpoint(i+"/rejectApplications").put({applications:c.rejections},function(){e.info("main.messages.update.success"),d.path("/scholarships/applications/"+(stipend?"scholarships":"grants"))})},c.annul=function(){f.endpoint(i+"/annulApplications").put({applications:c.rejections},function(){e.info("main.messages.update.success"),d.path("/scholarships/applications/"+(stipend?"scholarships":"grants"))})},c.removeFromArray=h.remove}]),angular.module("hitsaOis").controller("StudentScholarshipController",["dialogService","Classifier","$scope","$location","message","QueryUtils","$route","DataUtils","ArrayUtils","$q",function(a,b,c,d,e,f,g,h,i,j){var k="/scholarships",l=b.valuemapper({type:"STIPTOETUS",status:"STIPTOETUS_STAATUS"});j.all(l.promises).then(function(){var a=f.endpoint(k+"/availableStipends").query({},function(a){l.objectmapper(a),c.possibleStipends=a}).$promise,b=f.endpoint(k+"/studentStipends").query({},function(a){l.objectmapper(a),c.studentStipends=a}).$promise;j.all([a,b]).then(function(){c.possibleStipends.forEach(function(a){var b=c.studentStipends.find(function(b){return b.id===a.id});b?a.canApply=!1:a.canApply=!0})})})}]),angular.module("hitsaOis").controller("StudentScholarshipApplicationEditController",["dialogService","Classifier","$scope","$location","message","QueryUtils","$route","oisFileService","ArrayUtils",function(a,b,c,d,e,f,g,h,i){function j(a){return a.$setSubmitted(),c.studentSubmitData.family&&c.studentSubmitData.family.length>c.studentSubmitData.familyMembersAdult?(e.error("stipend.family.deleteRows"),!1):a.$valid?!0:(e.error("main.messages.form-has-errors"),!1)}function k(a){a.canApply=null===a.id||"STIPTOETUS_STAATUS_K"===a.status||"STIPTOETUS_STAATUS_T"===a.status,c.studentSubmitData=a}var l={STIPTOETUS_POHI:"scholarship/student/scholarship.application.pohi.edit.html",STIPTOETUS_ERI:"scholarship/student/scholarship.application.eri.edit.html",STIPTOETUS_SOIDU:"scholarship/student/scholarship.application.soidu.edit.html",STIPTOETUS_DOKTOR:"scholarship/student/scholarship.application.doktor.edit.html",STIPTOETUS_ERIALA:"scholarship/student/scholarship.application.scho.edit.html",STIPTOETUS_MUU:"scholarship/student/scholarship.application.scho.edit.html",STIPTOETUS_TULEMUS:"scholarship/student/scholarship.application.scho.edit.html"};c.studentSubmitData={};var m="/scholarships";c.editable=!0;var n=g.current.params.id;f.endpoint(m+"/"+n+"/application").get({},function(a){c.stipend=a.stipend,c.studentInfo=a.studentInfo,c.templateName=l[a.stipend.type],"STIPTOETUS_ERI"===a.stipend.type&&calculateSumsForFamilyBlock(c.studentSubmitData.family),a.studentSubmitData.compensationFrequency||(a.studentSubmitData.compensationFrequency="STIPTOETUS_HYVITAMINE_1"),k(a.studentSubmitData)}),c.openAddFileDialog=function(){a.showDialog("components/file.add.dialog.html",function(a){a.addedFiles=c.studentSubmitData.files},function(a){var b=a.data;h.getFromLfFile(b.file[0],function(a){b.oisFile=a,c.studentSubmitData.files.push(b)})})},c.removeFile=function(a,b){i.remove(a,b)},c.compensationFrequencies=b.queryForDropdown({mainClassCode:"STIPTOETUS_HYVITAMINE"}),c.getUrl=h.getUrl,c.removeFromArray=i.remove,c.apply=function(b){a.confirmDialog({prompt:"stipend.confirmations.apply"},function(){c.update(b,function(a){f.endpoint(m+"/apply").update({id:a.id},function(a){e.info("stipend.messages.applicationSuccessful"),d.url(m+"/applications/"+a.id+"?_noback")})})})},c.update=function(a,b){j(a)&&(c.studentSubmitData.id?f.endpoint(m+"/"+n+"/application").update(c.studentSubmitData,function(a){b?b(a):(k(a),e.updateSuccess())}):f.endpoint(m+"/"+n+"/application").save(c.studentSubmitData,function(a){b?b(a):(e.info("main.messages.create.success"),d.url(m+"/"+c.stipend.id+"/application?_noback"))}))},c.addFamilyMember=function(){angular.isArray(c.studentSubmitData.family)||(c.studentSubmitData.family=[]),c.studentSubmitData.family.length<c.studentSubmitData.familyMembersAdult?a.showDialog("scholarship/student/scholarship.family.addMember.html",function(){},function(a){var b=a.member;a.member.sum=[b.netSalary,b.pension,b.stateBenefit,b.otherIncome,b.unemployedBenefit].reduce(function(a,b){return isNaN(b)?a:a+b},0),c.studentSubmitData.family.push(a.member)}):e.error("stipend.family.errorWithMembers")}}]).controller("StudentScholarshipApplicationViewController",["dialogService","Classifier","$scope","$location","message","QueryUtils","$route","oisFileService","AuthService",function(a,b,c,d,e,f,g,h,i){function j(){f.endpoint(l+"/application/"+m).get({},function(a){c.stipend=a.stipend,c.studentInfo=a.studentInfo,c.studentSubmitData=a.studentSubmitData,c.templateName=k[a.stipend.type],
"STIPTOETUS_ERI"===a.stipend.type&&calculateSumsForFamilyBlock(c.studentSubmitData.family),c.canManage=i.isAuthorized("ROLE_OIGUS_M_TEEMAOIGUS_STIPTOETUS")&&"STIPTOETUS_STAATUS_A"!==a.studentSubmitData.status})}var k={STIPTOETUS_POHI:"scholarship/student/scholarship.application.pohi.view.html",STIPTOETUS_ERI:"scholarship/student/scholarship.application.eri.view.html",STIPTOETUS_SOIDU:"scholarship/student/scholarship.application.soidu.view.html",STIPTOETUS_DOKTOR:"scholarship/student/scholarship.application.doktor.view.html",STIPTOETUS_ERIALA:"scholarship/student/scholarship.application.scho.view.html",STIPTOETUS_MUU:"scholarship/student/scholarship.application.scho.view.html",STIPTOETUS_TULEMUS:"scholarship/student/scholarship.application.scho.view.html"};c.getUrl=h.getUrl,c.editable=!1;var l="/scholarships",m=g.current.params.id;c.isStudent=g.current.locals.auth.isStudent,j(),c.compensationFrequencies=b.queryForDropdown({mainClassCode:"STIPTOETUS_HYVITAMINE"}),c.accept=function(){f.endpoint(l+"/acceptApplications").put({applications:[m]},function(){j()})}}]),angular.module("hitsaOis").run(["$templateCache",function(a){a.put("academicCalendar/academic.calendar.school.list.html",'<div layout-padding> <md-grid-list md-cols="1" md-cols-sm="2" md-cols-md="3" md-cols-gt-md="6" md-row-height-gt-md="1:1" md-row-height="4:3" md-gutter="8px" md-gutter-gt-sm="4px"> <md-grid-tile ng-repeat="school in schools" md-colspan="1"> <button class="schoolTileButton" ng-click="openSchoolAcademicCalendar(school.id)"> <img class="schoolTileImage" ng-src="data:image/JPEG;base64,{{school.logo}}" on-error-src="images/HITSA_innov_logo_03.4e2f45c0.png"> <md-grid-tile-footer class="schoolTileFooter"> <span>{{currentLanguageNameField(school)}}</span> </md-grid-tile-footer> </button> </md-grid-tile> </md-grid-list> </div>'),a.put("academicCalendar/academic.calendar.view.html",'<div layout-padding> <div flex ng-if="data.events.length > 0"> <h2 class="md-title"> <span ng-if="schoolId">{{currentLanguageNameField(data.school)}}</span> <hois-classifier-value ng-model="data.yearCode" main-classifier-code="OPPEAASTA"></hois-classifier-value> {{\'academicCalendar.studyYear\' | translate}} </h2> <md-table-container> <table md-table md-progress="endpoint.$promise"> <thead md-head> <tr md-row> <th md-column width="20%">{{\'academicCalendar.date\' | translate}}</th> <th md-column width="20%">{{\'academicCalendar.description\' | translate}}</th> <th md-column width="60%">{{\'academicCalendar.type\' | translate}}</th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="row in data.events" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell ng-if="!row.endDate">{{row.startDate | hoisTimestamp}}</td> <td md-cell ng-if="row.endDate">{{row.startDate | hoisTimestamp}} - {{row.endDate | hoisTimestamp}}</td> <td md-cell> <span ng-if="!row.eventType">{{currentLanguageNameField(row)}}</span> <span ng-if="row.eventType"> <span ng-if="row.eventType == 1"> {{currentLanguageNameField(row)}} ({{\'academicCalendar.beginning\' | translate}}) </span> <span ng-if="row.eventType == 2"> {{currentLanguageNameField(row)}} ({{\'academicCalendar.end\' | translate}}) </span> </span> </td> <td md-cell> <hois-classifier-value ng-if="!row.eventType" ng-model="row.eventTypeCode" main-classifier-code="SYNDMUS"></hois-classifier-value> <span ng-if="row.eventType">{{\'academicCalendar.studyPeriod\' | translate}}</span> </td> </tr> </tbody> </table> </md-table-container> </div> <div flex ng-if="!data.events || data.events.length == 0"> <md-whiteframe class="md-whiteframe-1dp attention-whiteframe" flex="100" layout layout-align="left center"> <div md-colors="{color: \'warn\'}"> <md-icon md-colors="{color: \'warn\'}" md-font-set="material-icons">info_outline</md-icon> <span>{{\'academicCalendar.notFound\' | translate}}</span> </div> </md-whiteframe> </div> <div ng-if="schoolId" layout="row"> <md-button ng-click="back(\'#/academicCalendars/\')" class="md-raised">{{\'main.button.back\' | translate}}</md-button> </div> </div>'),a.put("apelApplication/apel.application.edit.html",'<div class="ois-form-layout-padding ois-form-layout" ng-cloak> <div flex> <form name="apelApplicationForm" ng-submit="save()" novalidate> <div ng-hide="application.student" layout="row" layout-sm="column" layout-xs="column"> <div flex="45" flex-sm="100" flex-xs="100"> <hois-autocomplete flex ng-model="application.student" method="students" name="student" label="apel.student" additional-query-params="{active: true}"></hois-autocomplete> </div> </div> <div ng-hide="!application.student"> <div ng-include="\'apelApplication/templates/apel.application.information.html\'"></div> </div> <div ng-hide="!application.student"> <fieldset> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'apel.formalLearnings.labelWithSubTitle\' | translate}}</legend> <span ng-if="application.isVocational" ng-repeat="record in application.records | filter:{isFormalLearning: true} | orderBy:\'id\'"> <div ng-include="\'apelApplication/templates/apel.application.formal.learning.vocational.list.html\'" style="margin-bottom: 20px"></div> </span> <div ng-if="!application.isVocational" ng-include="\'apelApplication/templates/apel.application.formal.learning.higher.list.html\'" style="margin-bottom: 20px"></div> <md-button ng-if="application.status === \'VOTA_STAATUS_K\'" class="md-raised md-default" ng-click="editFormalLearning()">{{\'main.button.create\' | translate}}</md-button> </fieldset> </div> <br> <div ng-hide="!application.student"> <fieldset> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'apel.informalLearnings.labelWithSubTitle\' | translate}}</legend> <span ng-repeat="record in application.records | filter:{isFormalLearning: false} | orderBy:\'id\'"> <div ng-if="application.isVocational" ng-include="\'apelApplication/templates/apel.application.informal.learning.vocational.list.html\'" style="margin-bottom: 20px"></div> <div ng-if="!application.isVocational" ng-include="\'apelApplication/templates/apel.application.informal.learning.higher.list.html\'" style="margin-bottom: 20px"></div> </span> <md-button ng-if="application.status === \'VOTA_STAATUS_K\'" class="md-raised md-default" ng-click="editInformalLearning()">{{\'main.button.create\' | translate}}</md-button> </fieldset> </div> <br> <div ng-hide="!application.student" layout="column" flex> <fieldset> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'apel.addInfo.addInfos\' | translate}}</legend> <md-button ng-if="editing" class="md-raised" ng-click="openEditCommentDialog()">{{\'main.button.create\' | translate}}</md-button> <md-table-container> <table md-table md-progress="tabledata.$promise" class="secondary-table"> <thead md-head> <tr md-row> <th md-column width="55%">{{\'apel.addInfo.label\' | translate}}</th> <th md-column width="20%">{{\'apel.addInfo.additionDate\' | translate}}</th> <th md-column width="20%">{{\'apel.addInfo.addedBy\' | translate}}</th> <th md-column width="5%"></th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="comment in application.comments | orderBy: \'inserted\'" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell>{{comment.addInfo}}</td> <td md-cell>{{comment.inserted | hoisDateTime}}</td> <td md-cell>{{comment.insertedBy}}</td> <td md-cell></td> </tr> </tbody> </table> </md-table-container> </fieldset> </div> <br> <div ng-hide="!application.student" layout="column" flex> <fieldset> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'main.relatedFiles\' | translate}}</legend> <md-button class="md-raised" ng-if="editing" ng-click="openAddFileDialog()">{{\'main.button.uploadFile\' | translate}}</md-button> <table md-table class="secondary-table"> <thead md-head> <tr md-row> <th md-column width="55%"> <span>{{\'file.nameAndFile\' | translate}}</span> </th> <th md-column width="20%"> <span>{{\'file.additionDate\' | translate}}</span> </th> <th md-column width="20%">{{\'file.addedBy\' | translate}}</th> <th md-column width="5%"></th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="file in application.files | orderBy: \'id\'" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell> <div layout="row" flex> <div> {{file.oisFile.fname}} </div> <div flex> <a ng-href="{{getUrl(file.oisFile, \'apelapplication\')}}" target="_blank" rel="noopener noreferrer"> <md-icon md-font-set="material-icons">file_download</md-icon> </a> </div> </div> </td> <td md-cell> {{file.inserted | hoisDateTime}} </td> <td md-cell> {{file.insertedBy}} </td> <td md-cell> <a class="remove nomargin" ng-if="editing" ng-click="deleteFile(file)">&times;</a> </td> </tr> </tbody> </table> </fieldset> </div> <div ng-if="application.student" layout="row"> <md-button class="md-raised md-primary" ng-if="canChangeTransferStatus" type="submit">{{\'main.button.save\' | translate}}</md-button> <md-button class="md-raised md-default" ng-if="application.status === \'VOTA_STAATUS_K\'" ng-click="submit()">{{\'main.button.submit\' | translate}}</md-button> <md-button class="md-raised md-default" ng-if="application.status === \'VOTA_STAATUS_K\'" ng-click="delete()">{{\'main.button.delete\' | translate}}</md-button> <md-button class="md-raised md-default" ng-if="application.status === \'VOTA_STAATUS_E\' && auth.isAdmin()" ng-click="sendToConfirm()">{{\'apel.sendToConfirm\' | translate}}</md-button> <md-button class="md-raised md-default" ng-if="application.status === \'VOTA_STAATUS_E\' && auth.isAdmin()" ng-click="sendBackToCreation()">{{\'apel.sendBackToCreation\' | translate}}</md-button> <md-button class="md-raised md-default" ng-if="application.status === \'VOTA_STAATUS_Y\' && auth.isAdmin() && canConfirmAndRemoveConfirmation" ng-click="confirm()">{{\'apel.confirm\' | translate}}</md-button> <md-button class="md-raised md-default" ng-if="application.status === \'VOTA_STAATUS_Y\' && auth.isAdmin()" ng-click="sendBack()">{{\'apel.sendBack\' | translate}}</md-button> <md-button class="md-raised md-default" ng-if="(application.status === \'VOTA_STAATUS_E\' || application.status === \'VOTA_STAATUS_Y\') && auth.isAdmin()" ng-click="reject()">{{\'apel.reject\' | translate}}</md-button> <md-button class="md-raised md-default" ng-if="application.status === \'VOTA_STAATUS_C\' && auth.isAdmin() && canConfirmAndRemoveConfirmation" ng-click="removeConfirmation()">{{\'apel.removeConfirmation\' | translate}}</md-button> <a href="{{applicationPdfUrl}}" target="_blank" class="md-button md-raised">{{\'main.button.print\' | translate}}</a> <md-button class="md-raised md-default" href="/#/apelApplication/">{{\'main.button.back\' | translate}}</md-button> </div> <div ng-if="!application.student" layout="row"> <md-button class="md-raised md-default" href="/#/apelApplication/">{{\'main.button.back\' | translate}}</md-button> </div> </form> </div> </div>'),a.put("apelApplication/apel.application.list.html",'<div ng-if="auth.isAdmin()" class="ois-form-layout-padding ois-form-layout" ng-cloak> <div flex> <fieldset> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'main.searchlabel\' | translate}}</legend> <form name="searchForm" ng-submit="loadData()" novalidate> <div layout="row" layout-sm="column" layout-xs="column"> <div flex="45" flex-sm="100" flex-xs="100"> <hois-autocomplete flex ng-model="criteria.studentObject" method="students" name="student" label="apel.student"></hois-autocomplete> </div> <md-input-container flex="50" flex-sm="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'apel.status\' | translate}}</label> <hois-classifier-select multiple ng-model="criteria.status" main-classifier-code="VOTA_STAATUS" model-value-attr="code"></hois-classifier-select> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <div flex="45" flex-sm="100" flex-xs="100"> <div layout="column" flex> <div layout="row" flex> <md-input-container> <label>{{\'apel.insertedFrom\' | translate}}</label> <md-datepicker ng-model="criteria.insertedFrom"></md-datepicker> </md-input-container> <md-input-container flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'apel.insertedThru\' | translate}}</label> <md-datepicker ng-model="criteria.insertedThru"></md-datepicker> </md-input-container> </div> </div> </div> <div flex="45" flex-sm="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <div layout="column" flex> <div layout="row" flex> <md-input-container> <label>{{\'apel.confirmedFrom\' | translate}}</label> <md-datepicker ng-model="criteria.endFrom"></md-datepicker> </md-input-container> <md-input-container flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'apel.confirmedThru\' | translate}}</label> <md-datepicker ng-model="criteria.endThru" md-min-date="criteria.endFrom"></md-datepicker> </md-input-container> </div> </div> </div> </div> <div layout="row"> <md-button type="submit" class="md-raised md-primary">{{\'main.button.search\' | translate}}</md-button> <md-button class="md-raised" ng-click="clearCriteria()">{{\'main.button.clear\' | translate}}</md-button> <md-button ng-if="isAuthorized(\'ROLE_OIGUS_M_TEEMAOIGUS_VOTA\')" ng-href="#/apelApplication/new" class="md-raised">{{\'main.button.create\' | translate}}</md-button> </div> <div flex-xs="0" flex-gt-xs="0" flex-gt-sm="50"></div> </form> </fieldset> </div> </div> <div layout-padding ng-if="auth.isStudent()"> <div flex> <md-button ng-href="#/apelApplication/new" class="md-raised">{{\'main.button.create\' | translate}}</md-button> </div> </div> <div layout-padding> <div flex> <md-table-container> <table md-table md-progress="tabledata.$promise"> <thead md-head md-order="criteria.order" md-on-reorder="loadData"> <tr md-row> <th md-column ng-if="auth.isAdmin()">{{\'apel.studentName\' | translate}}</th> <th md-column ng-if="auth.isAdmin()">{{\'apel.curriculum\' | translate}}</th> <th md-column>{{\'apel.status\' | translate}}</th> <th md-column>{{\'apel.insertedDate\' | translate}}</th> <th md-column>{{\'apel.confirmedDate\' | translate}}</th> <th md-column ng-if="auth.isStudent()"></th> <th md-column></th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="row in tabledata.content" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell ng-if="auth.isAdmin()"> <a ng-href="#/apelApplication/{{row.id}}/view">{{currentLanguageNameField(row.student)}}</a> </td> <td md-cell ng-if="auth.isAdmin()">{{currentLanguageNameField(row.curriculum)}}</td> <td md-cell> <hois-classifier-value ng-model="row.status" main-classifier-code="VOTA_STAATUS"></hois-classifier-value> </td> <td md-cell>{{row.inserted | hoisDate}}</td> <td md-cell>{{row.confirmed | hoisDate}}</td> <td md-cell ng-if="auth.isStudent()"> <div> <md-button md-no-ink class="md-primary change-button" ng-href="#/apelApplication/{{::row.id}}/view">{{\'main.button.view\' | translate}}</md-button> </div> </td> <td md-cell> <div ng-if="(auth.isStudent() && row.status === \'VOTA_STAATUS_K\') || (auth.isAdmin() && row.status !== \'VOTA_STAATUS_C\' && row.status !== \'VOTA_STAATUS_Y\' && isAuthorized(\'ROLE_OIGUS_M_TEEMAOIGUS_VOTA\'))"> <md-button md-no-ink class="md-primary change-button" ng-href="#/apelApplication/{{::row.id}}/edit">{{\'main.button.change\' | translate}}</md-button> </div> </td> </tr> </tbody> </table> </md-table-container> <md-table-pagination md-limit="criteria.size" md-limit-options="[10, 20, 50]" md-page="criteria.page" md-total="{{tabledata.totalElements}}" md-on-paginate="loadData" md-label="{page: \'{{\'main.page\' | translate}}:\', rowsPerPage: \'{{\'main.rowPerPage\' | translate}}:\', of: \'{{\'main.of\' | translate}}\'}" md-page-select></md-table-pagination> </div> </div>'),a.put("apelApplication/apel.application.view.html",'<div class="ois-form-layout-padding ois-form-layout" ng-cloak> <div flex> <div ng-include="\'apelApplication/templates/apel.application.information.html\'"></div> <div> <fieldset> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'apel.formalLearnings.labelWithSubTitle\' | translate}}</legend> <span ng-if="application.isVocational" ng-repeat="record in application.records | filter:{isFormalLearning: true}"> <div ng-include="\'apelApplication/templates/apel.application.formal.learning.vocational.list.html\'" style="margin-bottom: 20px"></div> </span> <div ng-if="!application.isVocational" ng-include="\'apelApplication/templates/apel.application.formal.learning.higher.list.html\'" style="margin-bottom: 20px"></div> </fieldset> </div> <br> <div> <fieldset> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'apel.informalLearnings.labelWithSubTitle\' | translate}}</legend> <span ng-repeat="record in application.records | filter:{isFormalLearning: false}"> <div ng-if="application.isVocational" ng-include="\'apelApplication/templates/apel.application.informal.learning.vocational.list.html\'" style="margin-bottom: 20px"></div> <div ng-if="!application.isVocational" ng-include="\'apelApplication/templates/apel.application.informal.learning.higher.list.html\'" style="margin-bottom: 20px"></div> </span> </fieldset> </div> <br> <div layout="column" flex> <fieldset> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'apel.addInfo.addInfos\' | translate}}</legend> <md-table-container> <table md-table md-progress="tabledata.$promise" class="secondary-table"> <thead md-head> <tr md-row> <th md-column width="60%">{{\'apel.addInfo.label\' | translate}}</th> <th md-column width="20%">{{\'apel.addInfo.additionDate\' | translate}}</th> <th md-column width="20%">{{\'apel.addInfo.addedBy\' | translate}}</th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="comment in application.comments | orderBy: \'inserted\'" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell>{{comment.addInfo}}</td> <td md-cell>{{comment.inserted | hoisDateTime}}</td> <td md-cell>{{comment.insertedBy}}</td> </tr> </tbody> </table> </md-table-container> </fieldset> </div> <br> <div layout="column" flex> <fieldset> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'main.relatedFiles\' | translate}}</legend> <table md-table class="secondary-table"> <thead md-head> <tr md-row> <th md-column width="60%"> <span>{{\'file.nameAndFile\' | translate}}</span> </th> <th md-column width="20%"> <span>{{\'file.additionDate\' | translate}}</span> </th> <th md-column width="20%">{{\'file.addedBy\' | translate}}</th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="file in application.files | orderBy: \'id\'" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell> <div layout="row" flex> <div> {{file.oisFile.fname}} </div> <div flex> <a ng-href="{{getUrl(file.oisFile, \'apelapplication\')}}" target="_blank" rel="noopener noreferrer"> <md-icon md-font-set="material-icons">file_download</md-icon> </a> </div> </div> </td> <td md-cell> {{file.inserted | hoisDateTime}} </td> <td md-cell> {{file.insertedBy}} </td> </tr> </tbody> </table> </fieldset> <div layout="row"> <md-button ng-if="application.status !== \'VOTA_STAATUS_C\' && application.status !== \'VOTA_STAATUS_Y\' && isAuthorized(\'ROLE_OIGUS_M_TEEMAOIGUS_VOTA\')" class="md-raised md-primary" ng-href="#/apelApplication/{{::applicationId}}/edit">{{\'main.button.edit\' | translate}}</md-button> <md-button class="md-raised md-default" ng-if="application.status === \'VOTA_STAATUS_E\' && auth.isAdmin()" ng-click="sendToConfirm()">{{\'apel.sendToConfirm\' | translate}}</md-button> <md-button class="md-raised md-default" ng-if="application.status === \'VOTA_STAATUS_E\' && auth.isAdmin()" ng-click="sendBackToCreation()">{{\'apel.sendBackToCreation\' | translate}}</md-button> <md-button class="md-raised md-default" ng-if="application.status === \'VOTA_STAATUS_Y\' && auth.isAdmin() && canConfirmAndRemoveConfirmation" ng-click="confirm()">{{\'apel.confirm\' | translate}}</md-button> <md-button class="md-raised md-default" ng-if="application.status === \'VOTA_STAATUS_Y\' && auth.isAdmin()" ng-click="sendBack()">{{\'apel.sendBack\' | translate}}</md-button> <md-button class="md-raised md-default" ng-if="(application.status === \'VOTA_STAATUS_E\' || application.status === \'VOTA_STAATUS_Y\') && auth.isAdmin()" ng-click="reject()">{{\'apel.reject\' | translate}}</md-button> <md-button class="md-raised md-default" ng-if="application.status === \'VOTA_STAATUS_C\' && auth.isAdmin() && canConfirmAndRemoveConfirmation" ng-click="removeConfirmation()">{{\'apel.removeConfirmation\' | translate}}</md-button> <a href="{{applicationPdfUrl}}" target="_blank" class="md-button md-raised">{{\'main.button.print\' | translate}}</a> <md-button class="md-raised md-default" href="/#/apelApplication/">{{\'main.button.back\' | translate}}</md-button> </div> </div> </div> </div>'),a.put("apelApplication/apel.school.edit.html",'<div layout="column" layout-padding> <div> <form name="apelSchoolForm"> <md-input-container class="md-block"> <label>{{\'apel.apelSchool.country\' | translate}}</label> <hois-classifier-select ng-model="apelSchool.country" aria-label="country" model-value-attr="code" main-classifier-code="RIIK" required></hois-classifier-select> </md-input-container> <md-input-container class="md-block" ng-if="apelSchool.country === \'RIIK_EST\'"> <label class="textInput">{{\'apel.apelSchool.schoolEHIS\' | translate}}</label> <hois-classifier-select ng-model="apelSchool.ehisSchool" aria-label="ehisSchool" model-value-attr="code" main-classifier-code="EHIS_KOOL" ng-change="ehisSchoolChanged(apelSchool.ehisSchool)" required></hois-classifier-select> </md-input-container> <md-input-container class="md-block"> <label class="textInput">{{\'apel.apelSchool.schoolNameEt\' | translate}}</label> <input ng-model="apelSchool.nameEt" name="nameEt" type="text" md-maxlength="100" required> </md-input-container> <md-input-container class="md-block"> <label class="textInput">{{\'apel.apelSchool.schoolNameEn\' | translate}}</label> <input ng-model="apelSchool.nameEn" name="nameEn" type="text" md-maxlength="100" required> </md-input-container> </form> <md-button ng-click="update()" class="md-raised md-primary">{{\'main.button.save\' | translate}}</md-button> <md-button ng-click="delete()" ng-if="apelSchool.id" class="md-raised">{{\'main.button.delete\' | translate}}</md-button> <md-button ng-href="#/apelSchools" class="md-raised">{{\'main.button.back\' | translate}}</md-button> </div> </div>'),a.put("apelApplication/apel.school.list.html",'<div class="ois-form-layout-padding ois-form-layout" ng-cloak> <div flex> <fieldset> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'main.searchlabel\' | translate}}</legend> <form name="searchForm" ng-submit="loadData()" novalidate> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="45" flex-sm="100" flex-xs="100"> <label class="textInput">{{\'apel.apelSchool.schoolNameEt\' | translate}}</label> <input ng-model="criteria.name" name="name" type="text" autofocus> </md-input-container> <md-input-container flex="50" flex-sm="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'apel.apelSchool.country\' | translate}}</label> <hois-classifier-select multiple ng-model="criteria.country" main-classifier-code="RIIK" model-value-attr="code"></hois-classifier-select> </md-input-container> </div> <div layout="row"> <md-button type="submit" class="md-raised md-primary">{{\'main.button.search\' | translate}}</md-button> <md-button class="md-raised" ng-click="clearCriteria()">{{\'main.button.clear\' | translate}}</md-button> <md-button class="md-raised" ng-if="isAuthorized(\'ROLE_OIGUS_M_TEEMAOIGUS_VOTA\')" ng-href="#/apelSchools/new">{{\'main.button.create\' | translate}}</md-button> </div> <div flex-xs="0" flex-gt-xs="0" flex-gt-sm="50"></div> </form> </fieldset> </div> </div> <div layout-padding> <div flex> <md-table-container> <table md-table md-progress="tabledata.$promise"> <thead md-head md-order="criteria.order" md-on-reorder="loadData"> <tr md-row> <th md-column md-order-by="nameEt">{{\'apel.apelSchool.schoolNameEt\' | translate}}</th> <th md-column md-order-by="nameEn">{{\'apel.apelSchool.schoolNameEn\' | translate}}</th> <th md-column md-order-by="countryCode">{{\'apel.apelSchool.country\' | translate}}</th> <th md-column md-order-by="ehisSchoolCode">{{\'apel.apelSchool.schoolEHIS\' | translate}}</th> <th md-column></th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="row in tabledata.content" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell>{{row.nameEt}}</td> <td md-cell>{{row.nameEn}}</td> <td md-cell> <hois-classifier-value ng-model="row.country" main-classifier-code="RIIK"></hois-classifier-value> </td> <td md-cell> <hois-classifier-value ng-model="row.ehisSchool" main-classifier-code="EHIS_KOOL"></hois-classifier-value> </td> <td md-cell> <div> <md-button md-no-ink class="md-primary change-button" ng-if="isAuthorized(\'ROLE_OIGUS_M_TEEMAOIGUS_VOTA\')" ng-href="#/apelSchools/{{::row.id}}/edit">{{\'main.button.change\' | translate}}</md-button> </div> </td> </tr> </tbody> </table> </md-table-container> <md-table-pagination md-limit="criteria.size" md-limit-options="[10, 20, 50]" md-page="criteria.page" md-total="{{tabledata.totalElements}}" md-on-paginate="loadData" md-label="{page: \'{{\'main.page\' | translate}}:\', rowsPerPage: \'{{\'main.rowPerPage\' | translate}}:\', of: \'{{\'main.of\' | translate}}\'}" md-page-select></md-table-pagination> </div> </div>'),a.put("application/application.html",'<div class="ois-form-layout-padding" ng-cloak> <div flex> <form ng-submit="loadData()" layout="column" name="applicationForm"> <div ng-show="!applicationEditView"> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="60" flex-sm="100" flex-xs="100"> <label>{{\'application.type\' | translate}}</label> <hois-classifier-select ng-model="application.type" model-value-attr="code" main-classifier-code="AVALDUS_LIIK" criteria="{higher: auth.school.higher ? true : undefined, vocational: auth.school.vocational ? true : undefined}" ng-change="applicationTypeChange()"></hois-classifier-select> </md-input-container> </div> <div ng-hide="!application.type" layout="row" layout-sm="column" layout-xs="column"> <div flex="60" flex-sm="100" flex-xs="100"> <hois-autocomplete ng-model="application.student" method="students" additional-query-params="studentSearchCriteria" name="student" label="student.label"></hois-autocomplete> </div> </div> </div> <div ng-if="applicationEditView" style="padding-top: 1em"> <div ng-include="\'application/templates/application.html\'"></div> </div> <br> <div ng-show="applicationEditView" layout="row"> <md-button ng-if="application.status === \'AVALDUS_STAATUS_KOOST\' || (application.status === \'AVALDUS_STAATUS_YLEVAAT\' && auth.isAdmin())" class="md-raised md-primary" ng-click="save()">{{\'main.button.save\' | translate}}</md-button> <div ng-include="\'application/templates/action.buttons.html\'"></div> <md-button ng-click="back(auth.isStudent() ? \'#/applications/student\' : \'#/applications/\', applicationForm)" class="md-raised">{{\'main.button.back\' | translate}}</md-button> </div> <div ng-hide="applicationEditView" layout="row"> <md-button ng-click="back(\'#/applications/\')" class="md-raised">{{\'main.button.back\' | translate}}</md-button> </div> </form> </div> </div>'),a.put("application/application.list.html",'<div class="ois-form-layout-padding ois-form-layout" ng-cloak> <div flex> <fieldset> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'main.searchlabel\' | translate}}</legend> <form ng-submit="loadData()" layout="column"> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="100"> <label>{{\'application.type\' | translate}}</label> <hois-classifier-select multiple ng-model="criteria.type" criteria="{higher: auth.school.higher ? true : undefined, vocational: auth.school.vocational ? true : undefined}" model-value-attr="code" main-classifier-code="AVALDUS_LIIK"></hois-classifier-select> </md-input-container> </div> <div layout="row" layout-md="column" layout-sm="column" layout-xs="column"> <!--md-input-container flex="20" flex-md="100" flex-sm="100" flex-xs="100">\r\n              <label>{{\'application.insertionDate\' | translate}}</label>\r\n            </md-input-container--> <md-input-container flex="20" flex-md="100" flex-sm="100" flex-xs="100"> <label>{{\'application.insertionDateA\' | translate}}</label> <md-datepicker ng-model="criteria.insertedFrom"></md-datepicker> </md-input-container> <div layout="column" flex="20" flex-md="100" flex-sm="100" flex-xs="100" layout-align="start end" layout-align-md="start start" layout-align-xs="start start" layout-align-sm="start start"> <md-input-container flex> <label>{{\'application.insertionDateK\' | translate}}</label> <md-datepicker ng-model="criteria.insertedThru"></md-datepicker> </md-input-container> </div> </div> <div layout="row" layout-md="column" layout-sm="column" layout-xs="column"> <!--md-input-container flex="20" flex-md="100" flex-sm="100" flex-xs="100">\r\n              <label>{{\'application.submissionDate\' | translate}}</label>\r\n            </md-input-container--> <md-input-container flex="20" flex-md="100" flex-sm="100" flex-xs="100"> <label>{{\'application.submissionDateA\' | translate}}</label> <md-datepicker ng-model="criteria.submittedFrom"></md-datepicker> </md-input-container> <div layout="column" flex="20" flex-md="100" flex-sm="100" flex-xs="100" layout-align="start end" layout-align-md="start start" layout-align-xs="start start" layout-align-sm="start start"> <md-input-container flex> <label>{{\'application.submissionDateK\' | translate}}</label> <md-datepicker ng-model="criteria.submittedThru"></md-datepicker> </md-input-container> </div> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="100"> <label class="textInput">{{\'main.status\' | translate}}</label> <hois-classifier-select multiple ng-model="criteria.status" model-value-attr="code" main-classifier-code="AVALDUS_STAATUS"></hois-classifier-select> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="100"> <label class="textInput">{{\'application.studentName\' | translate}}</label> <input ng-model="criteria.studentName" type="text"> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="100"> <label class="textInput">{{\'application.studentIdCode\' | translate}}</label> <input ng-model="criteria.studentIdCode" type="text"> </md-input-container> </div> <div layout="row"> <md-button type="submit" class="md-raised md-primary">{{\'main.button.search\' | translate}}</md-button> <md-button class="md-raised" ng-click="clearCriteria()">{{\'main.button.clear\' | translate}}</md-button> <md-button ng-href="#/applications/new" ng-if="isAuthorized(\'ROLE_OIGUS_M_TEEMAOIGUS_AVALDUS\')" class="md-raised">{{\'application.makeApplication\' | translate}}</md-button> </div> <div flex-xs="0" flex-gt-xs="0" flex-gt-sm="50"></div> </form> </fieldset> </div> </div> <div layout-padding> <div flex> <md-table-container> <table md-table md-progress="tabledata.$promise"> <thead md-head md-order="criteria.order" md-on-reorder="loadData"> <tr md-row> <th md-column md-order-by="person.lastname,person.firstname">{{\'application.student\' | translate}}</th> <th md-column md-order-by="{{currentLanguage()===\'en\' ? \'type.nameEn\' : \'type.nameEt\'}}">{{\'application.type\' | translate}}</th> <th md-column md-order-by="{{currentLanguage()===\'en\' ? \'status.nameEn\' : \'status.nameEt\'}}">{{\'main.status\' | translate}}</th> <th md-column md-order-by="inserted">{{\'application.insertionDate\' | translate}}</th> <th md-column md-order-by="submitted">{{\'application.submissionDate\' | translate}}</th> <th md-column></th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="row in tabledata.content" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell><a ng-href="/#/students/{{::row.student.id}}/main">{{::row.student.nameEt}}</a></td> <td md-cell><a ng-href="#/applications/{{::row.id}}/view">{{currentLanguageNameField(row.type)}}</a></td> <td md-cell> {{currentLanguageNameField(row.status)}} <md-tooltip ng-if="row.status.code === \'AVALDUS_STAATUS_TAGASI\' && row.rejectReason">{{row.rejectReason}}</md-tooltip> </td> <td md-cell>{{row.inserted | hoisDateTime}}</td> <td md-cell>{{row.submitted | hoisDateTime}}</td> <td md-cell> <md-button ng-if="((row.status.code === \'AVALDUS_STAATUS_KOOST\') || (row.status.code === \'AVALDUS_STAATUS_YLEVAAT\' && auth.isAdmin()))\r\n            && isAuthorized(\'ROLE_OIGUS_M_TEEMAOIGUS_AVALDUS\')" md-no-ink class="md-primary change-button" ng-href="#/applications/{{::row.id}}/edit">{{\'main.button.change\' | translate}}</md-button> </td> </tr> </tbody> </table> </md-table-container> <md-table-pagination md-limit="criteria.size" md-limit-options="[10, 20, 50]" md-page="criteria.page" md-total="{{tabledata.totalElements}}" md-on-paginate="loadData" md-label="{page: \'{{\'main.page\' | translate}}:\', rowsPerPage: \'{{\'main.rowPerPage\' | translate}}:\', of: \'{{\'main.of\' | translate}}\'}" md-page-select></md-table-pagination> </div> </div>'),
a.put("application/application.view.html",'<div class="ois-form-layout-padding form-readonly" ng-cloak> <div flex> <form layout="column"> <div style="padding-top: 1em"> <md-input-container ng-if="!application.isAdult && application.needsRepresentativeConfirm === true && application.status === \'AVALDUS_STAATUS_KOOST\'" flex="60" flex-sm="100" flex-xs="100"> <b>{{\'application.missingRepresentativeConfirmation\' | translate}}</b> </md-input-container> <div ng-include="\'application/templates/application.information.html\'"></div> <div ng-include="templateUrlByType"></div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="60" flex-sm="100" flex-xs="100"> <label class="textInput">{{\'application.additionalInfo\' | translate}}</label> <hois-value value="application.addInfo"></hois-value> </md-input-container> </div> <div layout="column" flex> <fieldset> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'main.relatedFiles\' | translate}}</legend> <table md-table class="secondary-table"> <thead md-head> <tr md-row> <th md-column><span>{{\'file.nameAndFile\' | translate}}</span></th> <th md-column><span>{{\'file.additionDate\' | translate}}</span></th> <th md-column>{{\'file.addedBy\' | translate}}</th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="file in application.files | orderBy: \'id\'" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell> {{file.oisFile.fname}} <a ng-href="{{getUrl(file.oisFile, \'application\')}}" target="_blank" rel="noopener noreferrer"> <md-icon md-font-set="material-icons">file_download</md-icon> </a> </td> <td md-cell> {{file.inserted | hoisDateTime}} </td> <td md-cell> {{file.insertedBy}} </td> </tr> </tbody> </table> </fieldset> </div> </div> <div>&nbsp;</div> <div layout="row"> <md-button ng-if="(application.status === \'AVALDUS_STAATUS_KOOST\' \r\n        && ((auth.isAdmin() && isAuthorized(\'ROLE_OIGUS_M_TEEMAOIGUS_AVALDUS\')) || (auth.isStudent() && !application.needsRepresentativeConfirm))) \r\n        || (application.status === \'AVALDUS_STAATUS_YLEVAAT\' && (auth.isAdmin() && isAuthorized(\'ROLE_OIGUS_M_TEEMAOIGUS_AVALDUS\')))" ng-href="#/applications/{{application.id}}/edit?_noback" class="md-raised md-primary">{{\'main.button.change\' | translate}}</md-button> <div ng-include="\'application/templates/action.buttons.html\'"></div> <md-button ng-if="auth.isStudent()" ng-click="back(\'#/applications/student\')" class="md-raised">{{\'main.button.back\' | translate}}</md-button> <md-button ng-if="!auth.isStudent()" ng-click="back(\'#/applications/\', applicationForm)" class="md-raised">{{\'main.button.back\' | translate}}</md-button> </div> </form> </div> </div>'),a.put("application/file.add.dialog.html",'<md-dialog aria-label="file add dialog" flex="40" flex-xs="100"> <form name="dialogForm" ng-cloak> <md-toolbar> <div class="md-toolbar-tools"> <h2>{{"main.addFile" | translate}}</h2> <span flex></span> <md-button class="md-icon-button" ng-click="cancel()"> <md-icon md-font-set="material-icons">close</md-icon> </md-button> </div> </md-toolbar> <md-dialog-content> <span flex></span> <div class="ois-form-layout" layout="column" layout-margin ng-cloak> <div layout="column"> <md-input-container flex> <lf-ng-md-file-input name="file" lf-files="data.file" lf-browse-label="{{\'main.addFile\' | translate}}" lf-remove-label="{{\'main.button.delete\' | translate}}" lf-placeholder="" lf-filesize="5MB" disallow-same-file="addedFiles" lf-required> </lf-ng-md-file-input> </md-input-container> <div ng-messages="dialogForm.file.$error"> <div class="invalid" ng-message="required">{{\'main.messages.error.selectFile\' | translate}}</div> <div class="invalid" ng-message="filesize">{{\'main.messages.error.fileTooLarge\' | translate}} 5MB!</div> <div class="invalid" ng-message="samefile">{{\'main.messages.error.fileAlreadyExists\' | translate}}</div> </div> </div> </div> </md-dialog-content> <span flex></span> <md-dialog-actions layout="row" layout-align="start center"> <md-button class="md-raised md-primary" ng-click="submit()">{{"main.button.save" | translate}}</md-button> <md-button class="md-raised" ng-click="cancel()">{{"main.button.close" | translate}}</md-button> </md-dialog-actions> </form> </md-dialog>'),a.put("application/reject.dialog.html",'<md-dialog aria-label="reject dialog"> <form name="dialogForm" ng-cloak> <md-toolbar> <div class="md-toolbar-tools"> <h2>{{"application.rejection" | translate}}</h2> <span flex></span> <md-button class="md-icon-button" ng-click="cancel()"> <md-icon md-font-set="material-icons">close</md-icon> </md-button> </div> </md-toolbar> <md-dialog-content> <span flex></span> <div class="ois-form-layout" layout="column" layout-margin ng-cloak> <div layout="column" flex> <md-input-container flex> <label>{{\'application.justification\' | translate}}</label> <textarea ng-model="rejectReason" md-maxlength="1000" max-rows="2" required md-autofocus></textarea> </md-input-container> </div> </div> </md-dialog-content> <span flex></span> <md-dialog-actions layout="row" layout-align="start center"> <md-button class="md-raised" ng-click="submit()">{{"main.button.reject" | translate}}</md-button> <md-button class="md-raised" ng-click="cancel()">{{"main.button.close" | translate}}</md-button> </md-dialog-actions> </form> </md-dialog>'),a.put("building/building.edit.html",'<div layout="column" layout-padding> <div flex> <form name="buildingForm"> <md-input-container class="md-block"> <label>{{\'building.name\' | translate}}</label> <input ng-model="record.name" name="name" type="text" md-maxlength="255" required> </md-input-container> <md-input-container class="md-block"> <label class="textInput">{{\'building.code\' | translate}}</label> <input ng-model="record.code" name="code" type="text" md-maxlength="20" required> </md-input-container> <md-div class="md-block"> <hois-ads-adapter class="md-text" ng-model="record.addressAds" ads-oid-model="record.addressAdsOid" address-model="record.address"></hois-ads-adapter> </md-div> </form> <md-button ng-click="update()" class="md-raised md-primary">{{\'main.button.save\' | translate}}</md-button> <md-button ng-click="delete()" ng-show="record.id" class="md-raised">{{\'main.button.delete\' | translate}}</md-button> <md-button ng-href="#/rooms/search" class="md-raised">{{\'main.button.back\' | translate}}</md-button> </div> </div>'),a.put("certificate/certificate.edit.html",'<div layout="column" layout-padding> <form name="certificateEditForm"> <div layout="column"> <md-input-container> <label>{{\'certificate.type\' | translate}}</label> <hois-classifier-select ng-model="record.type" model-value-attr="code" main-classifier-code="TOEND_LIIK" required ng-disabled="record.id" filter-values="forbiddenTypes"></hois-classifier-select> </md-input-container> <div ng-show="!isOtherCertificate()"> <md-autocomplete md-input-minlength="2" name="student" md-selected-item="student" md-search-text="queryText" md-items="item in querySearch(queryText)" md-item-text="currentLanguageNameField(item)" md-floating-label="{{\'certificate.student\' | translate}}" ng-model="queryText" md-no-cache class="small-margin" md-selected-item-change="studentChanged()" ng-required="!isOtherCertificate()" ng-disabled="record.id"> <md-item-template> <span md-highlight-text="queryText" md-highlight-flags="^i">{{currentLanguageNameField(item)}}</span> </md-item-template> <md-not-found> {{\'main.messages.error.notFound\' | translate}} </md-not-found> </md-autocomplete> </div> <div ng-if="isOtherCertificate()"> <md-input-container class="md-block"> <label>{{\'certificate.otherIdcode\' | translate}}</label> <input type="text" ng-model="record.otherIdcode" name="idcode" required ng-pattern="idcodePattern" md-maxlength="11" ng-disabled="record.id"> <div ng-messages="certificateEditForm.idcode.$error" ng-show="certificateEditForm.idcode.$dirty"> <div ng-message="pattern"> {{\'certificate.invalidIdcode\' | translate}} </div> </div> </md-input-container> <md-input-container class="md-block"> <label>{{\'certificate.otherName\' | translate}}</label> <input type="text" ng-model="record.otherName" required md-maxlength="255" ng-disabled="record.id"> </md-input-container> </div> <md-input-container> <label>{{\'certificate.headline\' | translate}}</label> <textarea ng-model="record.headline" required md-maxlength="1000" max-rows="2"></textarea> </md-input-container> <md-input-container> <label>{{\'certificate.whom\' | translate}}</label> <input type="text" ng-model="record.whom" md-maxlength="255" ng-disabled="record.id"> </md-input-container> <md-input-container> <label>{{\'certificate.signatory\' | translate}}</label> <md-select ng-model="record.signatoryIdcode" aria-label="{{\'certificate.signatory\' | translate}}" required> <md-option ng-value="signatory.idcode" ng-repeat="signatory in signatories"> {{::signatory.name}} </md-option> </md-select> </md-input-container> <md-input-container ng-if="contentEditable()"> <label>{{\'certificate.content\' | translate}}</label> <textarea ng-model="record.content" required md-maxlength="2000" max-rows="2"></textarea> </md-input-container> <br> <div ng-if="!contentEditable()"> <label class="common-label" ng-show="record.content">{{\'certificate.content\' | translate}}</label> <div id="content" class="md-body-1"></div> </div> </div> <div layout="row"> <md-button class="md-raised md-primary" ng-click="save()">{{\'main.button.save\' | translate}}</md-button> <md-button class="md-raised md-default" ng-click="saveAndOrder()">{{\'certificate.saveAndOrder\' | translate}}</md-button> <md-button class="md-raised md-default" ng-click="delete()" ng-if="record.id">{{\'main.button.delete\' | translate}}</md-button> <md-button class="md-raised md-default" ng-click="back(\'#/certificate\', certificateEditForm)">{{\'main.button.back\' | translate}}</md-button> </div> </form> </div>'),a.put("certificate/certificate.search.html",'<div class="ois-form-layout-padding ois-form-layout" ng-cloak> <fieldset ng-if="!auth.isStudent() && !auth.isParent()"> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'main.searchlabel\' | translate}}</legend> <form ng-submit="loadData()" layout="column" novalidate> <md-input-container> <label>{{\'certificate.type\' | translate}}</label> <hois-classifier-select ng-model="criteria.type" model-value-attr="code" main-classifier-code="TOEND_LIIK" multiple></hois-classifier-select> </md-input-container> <md-input-container> <label class="textInput">{{\'certificate.headline\' | translate}}</label> <input ng-model="criteria.headline" type="text"> </md-input-container> <md-input-container> <label class="textInput">{{\'certificate.studentName\' | translate}}</label> <input ng-model="criteria.name" type="text"> </md-input-container> <md-input-container> <label class="textInput">{{\'certificate.idcode\' | translate}}</label> <input ng-model="criteria.idcode" type="text" md-minlength="11" md-maxlength="11"> </md-input-container> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="20" flex-sm="100" flex-xs="100"> <label>{{\'certificate.inserted\' | translate}}</label> <input type="hidden"> </md-input-container> <div flex="33"> <md-input-container flex> <label>{{\'main.from\' | translate}}</label> <md-datepicker ng-model="criteria.insertedFrom"></md-datepicker> </md-input-container> <md-input-container flex> <label>{{\'main.thru\' | translate}}</label> <md-datepicker ng-model="criteria.insertedThru"></md-datepicker> </md-input-container> </div> </div> <md-input-container> <label class="textInput">{{\'certificate.nr\' | translate}}</label> <input ng-model="criteria.certificateNr" type="text"> </md-input-container> <div layout="row"> <md-button type="submit" class="md-raised md-primary">{{\'main.button.search\' | translate}}</md-button> <md-button class="md-raised" ng-click="clearCriteria()">{{\'main.button.clear\' | translate}}</md-button> <md-button class="md-raised" ng-if="isAuthorized(\'ROLE_OIGUS_M_TEEMAOIGUS_TOEND\')" ng-href="#/certificate/new">{{\'certificate.add\' | translate}}</md-button> </div> </form> </fieldset> </div> <div layout-padding> <div flex> <md-table-container> <table md-table md-progress="tabledata.$promise"> <thead md-head md-order="criteria.order" md-on-reorder="loadData"> <tr md-row> <th md-column md-order-by="sortablename" ng-if="!auth.isStudent() && !auth.isParent()">{{\'certificate.studentName\' | translate}}</th> <th md-column md-order-by="c.certificateNr">{{\'certificate.nr\' | translate}}</th> <th md-column md-order-by="type.{{currentLanguageNameField()}}">{{\'certificate.type\' | translate}}</th> <th md-column md-order-by="status.{{currentLanguageNameField()}}">{{\'certificate.status\' | translate}}</th> <th md-column md-order-by="c.headline">{{\'certificate.headline\' | translate}}</th> <th md-column md-order-by="c.inserted">{{\'certificate.inserted\' | translate}}</th> <th md-column ng-if="!auth.isStudent() && !auth.isParent()"></th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="row in tabledata.content" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell ng-if="!auth.isStudent() && !auth.isParent()"> <a ng-disabled="!row.studentId" ng-href="#/students/{{row.studentId}}/main" class="md-primary change-button">{{::row.studentFullname}}</a> </td> <td md-cell>{{::row.certificateNr}}</td> <td md-cell><a ng-href="#/certificate/{{::row.id}}/view">{{currentLanguageNameField(row.type)}}</a></td> <td md-cell>{{currentLanguageNameField(row.status)}}</td> <td md-cell>{{::row.headline}}</td> <td md-cell>{{row.inserted | hoisDate}}</td> <td md-cell ng-if="!auth.isStudent() && !auth.isParent()"> <md-button ng-if="row.canBeChanged && isAuthorized(\'ROLE_OIGUS_M_TEEMAOIGUS_TOEND\')" class="md-primary change-button" ng-href="#/certificate/{{::row.id}}/edit">{{\'main.button.change\' | translate}}</md-button> </td> </tr> </tbody> </table> </md-table-container> <md-table-pagination md-limit="criteria.size" md-limit-options="[10, 20, 50]" md-page="criteria.page" md-total="{{tabledata.totalElements}}" md-on-paginate="loadData" md-label="{page: \'{{\'main.page\' | translate}}:\', rowsPerPage: \'{{\'main.rowPerPage\' | translate}}:\', of: \'{{\'main.of\' | translate}}\'}" md-page-select></md-table-pagination> </div> <md-table-container> <table md-table class="secondary-table" ng-if="auth.isStudent()"> <thead md-head> <tr md-row> <th md-column>{{\'certificate.type\' | translate}}</th> <th md-column></th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="type in certificateTypes" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell>{{currentLanguageNameField(type)}}</td> <td md-cell> <md-button md-no-ink class="md-primary change-button" ng-href="#/certificate/{{::type.code}}/new"> {{\'certificate.order\' | translate}} </md-button> </td> </tr> </tbody> </table> </md-table-container> </div>'),a.put("certificate/certificate.student.new.html",'<div layout="column" layout-padding> <form name="certificateEditForm"> <div layout="column" class="form-readonly"> <md-input-container> <label>{{\'certificate.type\' | translate}}</label> <hois-classifier-value ng-model="record.type" main-classifier-code="TOEND_LIIK"></hois-classifier-value> </md-input-container> <md-input-container> <label>{{\'certificate.headline\' | translate}}</label> <textarea ng-model="record.headline" required md-maxlength="1000" max-rows="2" readonly></textarea> </md-input-container> <md-input-container> <label>{{\'certificate.whom\' | translate}}</label> <input type="text" ng-model="record.whom" md-maxlength="255"> </md-input-container> <md-input-container> <label class="common-label" ng-show="record.content">{{\'certificate.content\' | translate}}</label> <div id="content" class="md-body-1"></div> </md-input-container> </div> <div layout="row"> <md-button class="md-raised md-primary" ng-click="save()">{{\'certificate.order\' | translate}}</md-button> <md-button class="md-raised md-default" ng-click="back(\'#/certificate\', certificateEditForm)">{{\'main.button.back\' | translate}}</md-button> </div> </form> </div>'),a.put("certificate/certificate.view.html",'<div layout-padding ng-cloak class="form-readonly"> <div layout="column"> <md-input-container> <label>{{\'certificate.type\' | translate}}</label> <hois-classifier-value ng-model="record.type" main-classifier-code="TOEND_LIIK"></hois-classifier-value> </md-input-container> <md-input-container ng-if="record.status === \'TOEND_STAATUS_V\'"> <label>{{\'certificate.nr\' | translate}}</label> <hois-value value="record.certificateNr"></hois-value> </md-input-container> <div ng-show="!isOtherCertificate() && !auth.isStudent()" layout="column"> <md-input-container> <label>{{\'certificate.student\' | translate}}</label> <hois-value value="student.nameEt" href-value="\'#/students/\' + student.id + \'/main\'"></hois-value> </md-input-container> </div> <div ng-if="isOtherCertificate() && !auth.isStudent()"> <md-input-container class="md-block"> <label>{{\'certificate.otherIdcode\' | translate}}</label> <hois-value value="record.otherIdcode"></hois-value> </md-input-container> <md-input-container class="md-block"> <label>{{\'certificate.otherName\' | translate}}</label> <hois-value ng-if="student.id" value="record.otherName" href-value="\'#/students/\' + student.id + \'/main\'"></hois-value> <hois-value ng-if="!student.id" value="record.otherName"></hois-value> </md-input-container> </div> <md-input-container> <label>{{\'certificate.headline\' | translate}}</label> <hois-value value="record.headline"></hois-value> </md-input-container> <md-input-container> <label>{{\'certificate.whom\' | translate}}</label> <hois-value value="record.whom"></hois-value> </md-input-container> <md-input-container ng-if="!auth.isStudent()"> <label>{{\'certificate.signatory\' | translate}}</label> <hois-value value="record.signatoryName"></hois-value> </md-input-container> <md-input-container> <label>{{\'certificate.status\' | translate}}</label> <hois-classifier-value ng-model="record.status" main-classifier-code="TOEND_STAATUS"></hois-classifier-value> </md-input-container> <md-input-container> <label>{{\'certificate.inserted\' | translate}}</label> <hois-value value="record.inserted | hoisDate"></hois-value> </md-input-container> <md-input-container ng-if="contentEditable()"> <label>{{\'certificate.content\' | translate}}</label> <hois-value value="record.content"></hois-value> </md-input-container> <div ng-if="!contentEditable()"> <label class="common-label">{{\'certificate.content\' | translate}}</label> <div id="content" class="md-body-1"></div> </div> </div> <div layout="row"> <md-button class="md-raised md-primary" ng-if="record.canBeChanged && isAuthorized(\'ROLE_OIGUS_M_TEEMAOIGUS_TOEND\')" ng-href="/#/certificate/{{::record.id}}/edit">{{\'main.button.change\' | translate}}</md-button> <md-button class="md-raised md-default" ng-if="auth.isStudent() && record.status === \'TOEND_STAATUS_T\'" ng-click="order()">{{\'certificate.orderAgain\' | translate}}</md-button> <md-button class="md-raised md-default" ng-if="record.id && auth.isStudent() && record.status === \'TOEND_STAATUS_T\'" ng-click="delete()">{{\'main.button.delete\' | translate}}</md-button> <md-button class="md-raised md-default" ng-click="back(\'#/certificate\')">{{\'main.button.back\' | translate}}</md-button> <md-button class="md-raised md-default" ng-if="record.canViewFromEkis" ng-href="{{getCertificateUrl(record.wdId)}}" target="_blank">{{\'certificate.viewFromEkis\' | translate}}</md-button> </div> </div>'),a.put("classifier/classifier.content.edit.html",'<div layout="column" layout-padding> <div> <form name="classifierForm"> <h3>{{currentLanguageNameField(mainClass)}}</h3> <md-input-container class="md-block" ng-if="classifier.code"> <label>{{\'classifier.code\' | translate}}</label> <input ng-model="classifier.code" type="text" disabled required> </md-input-container> <md-input-container class="md-block"> <label class="textInput">{{\'classifier.value\' | translate}}</label> <input ng-model="classifier.value" type="text" required ng-disabled="classifier.code" md-maxlength="50"> </md-input-container> <md-input-container class="md-block"> <label class="textInput">{{\'classifier.value2\' | translate}}</label> <input ng-model="classifier.value2" type="text" md-maxlength="50"> </md-input-container> <md-input-container class="md-block"> <label class="textInput">{{\'classifier.nameEt\' | translate}}</label> <input ng-model="classifier.nameEt" type="text" required md-maxlength="1000"> </md-input-container> <md-input-container class="md-block"> <label class="textInput">{{\'classifier.nameEn\' | translate}}</label> <input ng-model="classifier.nameEn" type="text" md-maxlength="1000"> </md-input-container> <md-input-container class="md-block"> <label class="textInput">{{\'classifier.nameRu\' | translate}}</label> <input ng-model="classifier.nameRu" type="text" md-maxlength="1000"> </md-input-container> <md-input-container class="md-block"> <label class="textInput">{{\'classifier.description\' | translate}}</label> <textarea ng-model="classifier.description" md-maxlength="1000" max-rows="2"></textarea> </md-input-container> <md-input-container class="md-block"> <label class="textInput">{{\'classifier.ehisValue\' | translate}}</label> <input ng-model="classifier.ehisValue" type="text" md-maxlength="100"> </md-input-container> <md-input-container class="md-block"> <label class="textInput">{{\'classifier.extraval1\' | translate}}</label> <input ng-model="classifier.extraval1" type="text" md-maxlength="100"> </md-input-container> <md-input-container class="md-block"> <label class="textInput">{{\'classifier.extraval2\' | translate}}</label> <input ng-model="classifier.extraval2" type="text" md-maxlength="100"> </md-input-container> <br> <md-checkbox ng-model="classifier.vocational" aria-label="Is vocational"> {{\'classifier.isVocational\' | translate}} </md-checkbox> <md-checkbox ng-model="classifier.higher" aria-label="Is higher"> {{\'classifier.isHigher\' | translate}} </md-checkbox> <br> <md-input-container> <label class="textInput">{{\'stateCurriculum.enter.validFrom\' | translate}}</label> <md-datepicker ng-model="classifier.validFrom"></md-datepicker> </md-input-container> <md-input-container> <label class="textInput">{{\'stateCurriculum.enter.validThru\' | translate}}</label> <md-datepicker ng-model="classifier.validThru" md-min-date="classifier.validFrom"></md-datepicker> </md-input-container> <div ng-repeat="connection in possibleConnections"> <h3>{{\'classifier.connection\' | translate}}: <span ng-bind="currentLanguageNameField(connection)"></span></h3> <md-autocomplete name="classifiersParentInput$index" md-selected-item="classifiersParent$index" md-search-text="queryName" md-items="item in querySearch(queryName, connection.code)" md-item-text="currentLanguageNameField(item)" md-min-length="0" placeholder="{{\'classifier.connection.add\' | translate}}" ng-model="queryName" md-no-cache md-selected-item-change="addParent(classifiersParent$index)"> <md-item-template> <span md-highlight-text="queryName" md-highlight-flags="^i">{{currentLanguageNameField(item)}}</span> </md-item-template> <md-not-found> {{\'main.messages.error.notFound\' | translate}} </md-not-found> </md-autocomplete> <p ng-repeat="parent in parents | filter:{ mainClassCode: connection.code}"> <a ng-bind="currentLanguageNameField(parent)" ng-href="#/classifier/{{parent.mainClassCode}}/{{parent.code}}/edit"></a> <md-button class="remove" ng-click="removeParent(parent)">&times;</md-button> </p> <br> </div> <h3 ng-if="hasChildren">{{\'classifier.connection.children.label\' | translate}}: </h3> <ul> <li ng-repeat="child in children | orderBy : \'nameEt\'"><a ng-bind="currentLanguageNameField(child)" ng-href="#/classifier/{{child.mainClassCode}}/{{child.code}}/edit"></a></li> </ul> </form> <md-button ng-click="save()" class="md-raised md-primary"> {{\'main.button.save\' | translate}}</md-button> <md-button ng-click="delete()" ng-if="classifier.code" class="md-raised">{{\'main.button.delete\' | translate}}</md-button> <md-button ng-click="back(\'#/classifier/\' + mainClassCode, classifierForm)" class="md-raised">{{\'main.button.back\' | translate}}</md-button> </div> </div>'),a.put("classifier/classifier.content.list.html",'<div layout-padding> <form ng-submit="loadData()" novalidate> <div flex> <div layout="row"> <div flex-xs="100" flex-gt-xs="100" flex-gt-sm="50" layout="column"> <!--div class="indentForToast"></div--> <h3>{{currentLanguageNameField(mainClass)}}</h3> <md-input-container> <label class="textInput">{{\'classifier.name\' | translate}}</label> <input ng-model="criteria.name" type="text" autofocus> </md-input-container> <md-input-container> <label class="textInput">{{\'classifier.value\' | translate}}</label> <input ng-model="criteria.value" type="text"> </md-input-container> <div layout="row"> <md-button type="submit" class="md-raised md-primary">{{\'main.button.search\' | translate}}</md-button> <md-button class="md-raised" ng-click="clearCriteria()">{{\'main.button.clear\' | translate}}</md-button> <md-button class="md-raised" ng-href="#/classifier/{{mainClassCode}}/new">{{\'main.button.create\' | translate}}</md-button> <md-button class="md-raised" ng-href="#/classifier">{{\'main.button.back\' | translate}}</md-button> </div> </div> <div flex-xs="0" flex-gt-xs="0" flex-gt-sm="50"></div> </div> </div> </form> </div> <div layout-padding> <div flex> <md-table-container> <table md-table md-progress="tabledata.$promise"> <thead md-head md-order="criteria.order" md-on-reorder="loadData"> <tr md-row> <th md-column md-order-by="value">{{\'classifier.value\' | translate}}</th> <th md-column md-order-by="{{currentLanguageNameField()}}">{{\'classifier.name\' | translate}}</th> <th md-column>{{\'classifier.valid\' | translate}}</th> <th md-column></th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="row in tabledata.content" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell>{{::row.value}}</td> <td md-cell>{{currentLanguageNameField(row)}}</td> <td md-cell>{{(isValid(row) ? \'classifier.validTrue\' : \'classifier.validFalse\') | translate}}</td> <td md-cell> <md-button md-no-ink class="md-primary change-button" ng-href="#/classifier/{{::mainClassCode}}/{{::row.code}}/edit">{{\'main.button.change\' | translate}}</md-button> </td> </tr> </tbody> </table> </md-table-container> <md-table-pagination md-limit="criteria.size" md-limit-options="[10, 20, 50]" md-page="criteria.page" md-total="{{tabledata.totalElements}}" md-on-paginate="loadData" md-label="{page: \'{{\'main.page\' | translate}}:\', rowsPerPage: \'{{\'main.rowPerPage\' | translate}}:\', of: \'{{\'main.of\' | translate}}\' }" md-page-select></md-table-pagination> </div> </div>'),a.put("classifier/classifier.list.html",'<div layout-padding> <div flex> <fieldset> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'main.searchlabel\' | translate}}</legend> <form ng-submit="loadData()"> <div flex> <div layout="row"> <div flex-xs="100" flex-gt-xs="100" flex-gt-sm="50" layout="column"> <!--div class="indentForToast"></div--> <md-input-container> <label class="textInput">{{\'classifier.name\' | translate}}</label> <input ng-model="criteria.name" type="text" autofocus> </md-input-container> <div layout="row"> <md-button type="submit" class="md-raised md-primary">{{\'main.button.search\' | translate}}</md-button> <md-button class="md-raised" ng-click="clearCriteria()">{{\'main.button.clear\' | translate}}</md-button> </div> </div> <div flex-xs="0" flex-gt-xs="0" flex-gt-sm="50"></div> </div> </div> </form> </fieldset> </div> </div> <div layout-padding> <div flex> <md-table-container> <table md-table md-progress="tabledata.$promise"> <thead md-head md-order="criteria.order" md-on-reorder="loadData"> <tr md-row> <th md-column md-order-by="{{currentLanguage()===\'en\' ? \'nameEn\' : \'nameEt\'}}">{{\'classifier.mainname\' | translate}}</th> <th md-column md-numeric>{{\'classifier.count\' | translate}}</th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="classifier in tabledata.content" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell><a ng-href="#/classifier/{{::classifier.code}}?_menu">{{currentLanguageNameField(classifier)}}</a></td> <td md-cell>{{::classifier.count}}</td> </tr> </tbody> </table> </md-table-container> <md-table-pagination md-limit="criteria.size" md-limit-options="[10, 20, 50]" md-page="criteria.page" md-total="{{tabledata.totalElements}}" md-on-paginate="loadData" md-label="{page: \'{{\'main.page\' | translate}}:\', rowsPerPage: \'{{\'main.rowPerPage\' | translate}}:\', of: \'{{\'main.of\' | translate}}\' }" md-page-select></md-table-pagination> </div> </div>'),a.put("committee/committee.edit.html",'<div class="ois-form-layout-padding" ng-cloak> <form layout="column" name="committeeEditForm"> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex> <label>{{\'committee.addInfo\' | translate}}</label> <textarea ng-model="record.addInfo" md-maxlength="4000" max-rows="10"></textarea> </md-input-container> </div> <div layout="row"> <div layout="column" flex="45"> <label class="common-label">{{\'committee.validDate\' | translate}}</label> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex flex-sm="100" flex-xs="100"> <label>{{\'main.from\' | translate}}</label> <md-datepicker ng-model="record.validFrom" required></md-datepicker> </md-input-container> <md-input-container flex flex-sm="100" flex-xs="100" flex-offset-xs="0" flex-offset-sm="0" flex-offset="5"> <label>{{\'main.thru\' | translate}}</label> <md-datepicker ng-model="record.validThru" md-min-date="record.validFrom" required></md-datepicker> </md-input-container> </div> </div> </div> <label class="md-subhead">{{\'committee.memberIs\' | translate}}</label> <md-table-container> <table md-table> <thead md-head> <tr md-row> <th md-column>{{\'committee.isChairman\' | translate}}</th> <th md-column>{{\'committee.external\' | translate}}</th> <th md-column>{{\'committee.name\' | translate}}</th> <th md-column></th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="member in record.members" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <ng-form name="committeeMemberForm"> <td md-cell> <md-checkbox ng-model="member.isChairman" ng-change="assingChairman(member)" aria-label="{{\'committee.isChairman\' | translate}} {{member.memberName}}"> </md-checkbox> </td> <td md-cell> <md-checkbox ng-model="member.isExternal" aria-label="{{\'committee.external\' | translate}} {{member.memberName}}"> </md-checkbox> </td> <td md-cell> <md-input-container ng-if="member.isExternal"> <input type="text" ng-model="member.memberName" md-maxlength="100" aria-label="{{\'committee.name\' | translate}} {{member.memberName}}" required> </md-input-container> <md-input-container ng-if="!member.isExternal"> <hois-select ng-model="member.teacher" type="teacher" aria-label="{{\'committee.name\' | translate}} {{member.memberName}}" required></hois-select> </md-input-container> </td> <td md-cell><a class="remove nomargin" ng-click="removeMember(member)">&times;</a></td> </ng-form> </tr> </tbody> </table> </md-table-container> <br> <div layout="row"> <md-button class="md-raised" ng-click="addMember()">{{\'committee.addMember\' | translate}}</md-button> </div> <br> <div> <md-button class="md-raised md-primary" ng-click="save()">{{\'main.button.save\' | translate}}</md-button> <md-button class="md-raised" ng-click="delete()" ng-if="record.id">{{\'main.button.delete\' | translate}}</md-button> <md-button class="md-raised" ng-click="back(\'#/committees\', committeeEditForm)">{{\'main.button.back\' | translate}}</md-button> </div> </form> </div>'),a.put("committee/committee.search.html",'<div class="ois-form-layout-padding ois-form-layout" ng-cloak> <div flex> <fieldset> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'main.searchlabel\' | translate}}</legend> <form name="searchForm" ng-submit="loadData()" novalidate class="nomargin"> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex> <label>{{\'committee.member\' | translate}}</label> <!-- <hois-select ng-model="criteria.memberName" values="members" value-property="name" show-property="name"></hois-select> --> <md-select ng-model="criteria.member"> <md-option ng-value=""> </md-option> <md-option ng-value="member" ng-repeat="member in members | orderBy: \'nameEt\'"> {{ member.nameEt }} </md-option> </md-select> </md-input-container> </div> <br> <div layout="row"> <div layout="column" flex="45"> <label class="common-label">{{\'committee.validDate\' | translate}}</label> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex flex-sm="100" flex-xs="100"> <label>{{\'main.from\' | translate}}</label> <md-datepicker ng-model="criteria.validFrom"></md-datepicker> </md-input-container> <md-input-container flex flex-sm="100" flex-xs="100" flex-offset-xs="0" flex-offset-sm="0" flex-offset="5"> <label>{{\'main.thru\' | translate}}</label> <md-datepicker ng-model="criteria.validThru"></md-datepicker> </md-input-container> </div> </div> </div> <md-input-container flex="45" flex-sm="100" flex-xs="100"> <md-checkbox ng-model="criteria.showInvalid" aria-label="{{\'committee.showInvalid\' | translate}}"> {{\'committee.showInvalid\' | translate}} </md-checkbox> </md-input-container> <br><br><br> <div layout="row"> <md-button type="submit" class="md-raised md-primary">{{\'main.button.search\' | translate}}</md-button> <md-button class="md-raised" ng-click="clearCriteria()">{{\'main.button.clear\' | translate}}</md-button> <md-button class="md-raised" ng-if="canEdit" ng-href="#/committees/new">{{\'main.button.create\' | translate}}</md-button> </div> </form> </fieldset> </div> </div> <div layout-padding> <div flex> <md-table-container> <table md-table md-progress="tabledata.$promise"> <thead md-head md-order="criteria.order" md-on-reorder="loadData"> <tr md-row> <th md-column md-order-by="chairman">{{\'committee.chairman\' | translate}}</th> <th md-column md-order-by="c.validFrom">{{\'committee.validFromDate\' | translate}}</th> <th md-column md-order-by="c.validThru">{{\'committee.validThruDate\' | translate}}</th> <th md-column>{{\'committee.members\' | translate}}</th> <th md-column></th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="row in tabledata.content" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell><a ng-href="#/committees/{{row.id}}/view">{{row.chairman}}</a></td> <td md-cell>{{row.validFrom | hoisDate}}</td> <td md-cell>{{row.validThru | hoisDate}}</td> <td md-cell> <table> <tr ng-repeat="member in row.members | orderBy"> <td>{{member}}</td> </tr> </table> </td> <td md-cell> <md-button md-no-ink class="md-primary change-button" ng-if="canEdit" ng-href="#/committees/{{row.id}}/edit"> {{\'main.button.change\' | translate}} </md-button> </td> </tr> </tbody> </table> </md-table-container> <md-table-pagination md-limit="criteria.size" md-limit-options="[10, 20, 50]" md-page="criteria.page" md-total="{{tabledata.totalElements}}" md-on-paginate="loadData" md-label="{page: \'{{\'main.page\' | translate}}:\', rowsPerPage: \'{{\'main.rowPerPage\' | translate}}:\', of: \'{{\'main.of\' | translate}}\'}" md-page-select></md-table-pagination> </div> </div>'),
a.put("committee/committee.view.html",'<div class="ois-form-layout-padding form-readonly" ng-cloak> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex> <label>{{\'committee.addInfo\' | translate}}</label> <hois-value value="record.addInfo"></hois-value> </md-input-container> </div> <div layout="row"> <div layout="column" flex="45"> <label class="common-label">{{\'committee.validDate\' | translate}}</label> <br> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex flex-sm="100" flex-xs="100"> <label>{{\'main.from\' | translate}}</label> <hois-value value="record.validFrom | hoisDate"></hois-value> </md-input-container> <md-input-container flex flex-sm="100" flex-xs="100" flex-offset-xs="0" flex-offset-sm="0" flex-offset="5"> <label>{{\'main.thru\' | translate}}</label> <hois-value value="record.validThru | hoisDate"></hois-value> </md-input-container> </div> </div> </div> <label class="md-subhead">{{\'committee.memberIs\' | translate}}</label> <md-table-container> <table md-table> <thead md-head> <tr md-row> <th md-column>{{\'committee.isChairman\' | translate}}</th> <th md-column>{{\'committee.external\' | translate}}</th> <th md-column>{{\'committee.name\' | translate}}</th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="member in record.members" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell> <i class="material-icons" ng-if="member.isChairman">done</i> </td> <td md-cell> <i class="material-icons" ng-if="member.isExternal">done</i> </td> <td md-cell> <hois-value value="member.memberName"></hois-value> </td> </tr> </tbody> </table> </md-table-container> <br> <div> <md-button class="md-raised md-primary" ng-if="record.canEdit" ng-href="#/committees/{{record.id}}/edit?_noback">{{\'main.button.change\' | translate}}</md-button> <md-button class="md-raised" ng-href="#/committees">{{\'main.button.back\' | translate}}</md-button> </div> </div>'),a.put("components/confirm.dialog.html",'<md-dialog aria-label="grade add dialog" flex="30" flex-xs="100" ng-cloak> <md-dialog-content> <div class="md-dialog-content"> <p translate="{{messages.prompt}}" translate-values="{{messages}}"></p> </div> </md-dialog-content> <md-dialog-actions layout="row" layout-align="start center"> <md-button ng-click="accept()" class="md-raised md-primary">{{messages.accept | translate}}</md-button> <md-button ng-click="cancel()" class="md-raised">{{messages.cancel | translate}}</md-button> </md-dialog-actions> </md-dialog>'),a.put("components/file.add.dialog.html",'<md-dialog aria-label="file add dialog" flex="40" flex-xs="100"> <form name="dialogForm" ng-cloak> <md-toolbar> <div class="md-toolbar-tools"> <h2>{{"main.addFile" | translate}}</h2> <span flex></span> <md-button class="md-icon-button" ng-click="cancel()"> <md-icon md-font-set="material-icons">close</md-icon> </md-button> </div> </md-toolbar> <md-dialog-content> <span flex></span> <div class="ois-form-layout" layout="column" layout-margin ng-cloak> <div layout="column"> <md-input-container flex> <lf-ng-md-file-input name="file" lf-files="data.file" lf-browse-label="{{\'main.addFile\' | translate}}" lf-remove-label="{{\'main.button.delete\' | translate}}" lf-placeholder="" lf-filesize="5MB" disallow-same-file="addedFiles" lf-required> </lf-ng-md-file-input> </md-input-container> <div ng-messages="dialogForm.file.$error"> <div class="invalid" ng-message="required">{{\'main.messages.error.selectFile\' | translate}}</div> <div class="invalid" ng-message="filesize">{{\'main.messages.error.fileTooLarge\' | translate}} 5MB!</div> <div class="invalid" ng-message="samefile">{{\'main.messages.error.fileAlreadyExists\' | translate}}</div> </div> </div> </div> </md-dialog-content> <span flex></span> <md-dialog-actions layout="row" layout-align="start center"> <md-button class="md-raised md-primary" ng-click="submit()">{{"main.button.save" | translate}}</md-button> <md-button class="md-raised" ng-click="cancel()">{{"main.button.close" | translate}}</md-button> </md-dialog-actions> </form> </md-dialog>'),a.put("components/hois.autocomplete.html",'<md-autocomplete flex md-input-minlength="2" md-no-cache="true" md-selected-item="ngModel" md-selected-item-change="selectedItemChange()" md-search-text="searchText" md-items="item in search(searchText)" md-item-text="getChipText(item)" md-require-match ng-required="required" md-floating-label="{{label | translate}}"> <md-item-template> <span md-highlight-text="searchText">{{$root.currentLanguageNameField(item)}}</span> </md-item-template> </md-autocomplete>'),a.put("components/hois.autocomplete.nolabel.html",'<md-autocomplete flex md-input-minlength="2" md-no-cache="true" md-selected-item="ngModel" md-selected-item-change="selectedItemChange()" md-search-text="searchText" md-items="item in search(searchText)" md-item-text="getChipText(item)" md-require-match ng-required="required"> <md-item-template> <span md-highlight-text="searchText">{{$root.currentLanguageNameField(item)}}</span> </md-item-template> </md-autocomplete>'),a.put("components/hois.chip.autocomplete.html",'<md-chips ng-model="ngModel" md-autocomplete-snap md-transform-chip="transformChip($chip)" md-require-match="true" md-max-chips="{{maxChips}}" readonly> <md-autocomplete md-selected-item="selectedItem" md-selected-item-change="selectedItemChange()" md-search-text="searchText" md-min-length="2" md-no-cache="true" md-items="item in search(searchText)" placeholder="{{label | translate}}" ng-hide="ngModel.length > maxChips" flex> <span md-highlight-text="searchText">{{$root.currentLanguageNameField(item)}}</span> </md-autocomplete> <md-chip-template> <span> <strong>{{getChipText($chip)}}</strong> </span> </md-chip-template> </md-chips>'),a.put("components/hois.created.modified.html",'<div layout="column"> <div>&nbsp;</div> <fieldset tabindex="1000"> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'main.insertedOrChanged\' | translate}}</legend> <md-table-container> <table md-table md-progress="promise" class="secondary-table"> <thead md-head md-order="query.order" md-on-reorder="getInformationSection"> <tr md-row> <th md-column><span>{{\'main.state\' | translate}}</span></th> <th md-column><span>{{\'main.insertOrChangeDate\' | translate}}</span></th> <th md-column><span>{{\'main.insertedOrChangedByFirstAndLastName\' | translate}}</span></th> </tr> </thead> <tbody md-body> <tr md-row ng-if="object.inserted" class="odd"> <td md-cell>{{\'main.inserted\' | translate}}</td> <td md-cell>{{object.inserted | hoisDateTime}}</td> <td md-cell>{{object.insertedBy}}</td> </tr> <tr md-row ng-if="object.changed" class="even"> <td md-cell>{{\'main.changed\' | translate}}</td> <td md-cell>{{object.changed | hoisDateTime}}</td> <td md-cell>{{object.changedBy}}</td> </tr> </tbody> </table> </md-table-container> </fieldset> <!--/md-card--> </div>'),a.put("components/menu-link.tmpl.html",'<md-button ng-class="{\'active\' : isSelected()}" ng-href="#{{section.url}}" ng-click="focusSection()"> {{section.name | translate}} <span class="md-visually-hidden" ng-if="isSelected()"> current page </span> </md-button>'),a.put("components/menu-toggle.tmpl.html",'<md-button class="md-button-toggle" ng-click="toggle()" aria-controls="docs-menu-{{section.name | nospace}}" aria-expanded="{{isOpen()}}"> <div flex layout="row"> {{section.name | translate}} <span flex></span> <span aria-hidden="true" class="md-toggle-icon" ng-class="{\'toggled\' : isOpen()}"> <md-icon md-font-set="material-icons">expand_less</md-icon> </span> </div> <span class="md-visually-hidden"> Toggle {{isOpen()? \'expanded\' : \'collapsed\'}} </span> </md-button> <ul id="docs-menu-{{section.name | nospace}}" class="menu-toggle-list" aria-hidden="{{!renderContent}}" ng-style="{ visibility: renderContent ? \'visible\' : \'hidden\' }"> <li ng-repeat="page in section.pages"> <menu-link section="page"></menu-link> </li> </ul>'),a.put("components/moodle.enroll.dialog.html",'<md-dialog aria-label="moodle enroll dialog" flex="50"> <form name="dialogForm" ng-submit="loadData()" novalidate ng-cloak> <md-toolbar> <div class="md-toolbar-tools"> <h2>{{"moodle.enrollStudents" | translate}}</h2> <span flex></span> <md-button class="md-icon-button" ng-click="cancel()"> <md-icon md-font-set="material-icons">close</md-icon> </md-button> </div> </md-toolbar> <md-dialog-content> <div class="md-dialog-content form-readonly"> <div flex> <div layout="row" flex> <h2 flex>{{\'moodle.enroll.enrolled\' | translate}}: {{moodleResponse.enrolled}}</h2> </div> <div layout="row" flex> <h2 flex>{{\'moodle.enroll.failed\' | translate}}: {{moodleResponse.failed.length}}</h2> </div> <ol> <li ng-repeat="user in moodleResponse.failed"> {{user}} </li> </ol> <div layout="row" flex> <h2 flex>{{\'moodle.enroll.missingUser\' | translate}}: {{moodleResponse.missingUser.length}}</h2> </div> <ol> <li ng-repeat="user in moodleResponse.missingUser"> {{user}} </li> </ol> </div> <span flex></span> <md-dialog-actions layout="row" layout-align="start center"> <md-button class="md-raised" ng-click="cancel()">{{"main.button.close" | translate}}</md-button> </md-dialog-actions> </div> </md-dialog-content> </form> </md-dialog>'),a.put("contract/contract.edit.html",'<div class="ois-form-layout-padding" ng-cloak> <div flex> <form name="contractForm" ng-submit="save()" layout="column"> <div flex> <hois-autocomplete ng-model="contract.student" method="students" additional-query-params="{active: true, higher: formState.isHigher}" name="student" label="student.label" required></hois-autocomplete> </div> <div ng-if="contract.student && formState.student" class="form-readonly" layout="column"> <br> <div layout="row" flex> <md-input-container flex> <label>{{\'student.name\' | translate}}</label> <hois-value value="formState.student.person.firstname + \' \' + formState.student.person.lastname"></hois-value> </md-input-container> <md-input-container flex> <label>{{\'student.idcode\' | translate}}</label> <hois-value value="formState.student.person.idcode"></hois-value> </md-input-container> <md-input-container flex> <label>{{\'student.schoolEmail\' | translate}}</label> <hois-value value="formState.student.schoolEmail"></hois-value> </md-input-container> <md-input-container flex> <label>{{\'student.course\' | translate}}</label> <hois-value value="formState.student.course"></hois-value> </md-input-container> </div> <div layout="row" flex> <md-input-container flex> <label>{{\'student.curriculum\' | translate}}</label> <hois-value value="currentLanguageNameField(formState.student.curriculumVersion)"></hois-value> </md-input-container> <md-input-container flex> <label>{{\'student.studyForm\' | translate}}</label> <hois-value value="currentLanguageNameField(formState.student.studyForm)"></hois-value> </md-input-container> </div> </div> <div ng-if="!formState.isHigher" layout="row" layout-sm="column" layout-xs="column" flex> <md-input-container flex> <label>{{\'module.practice\' | translate}}</label> <hois-select ng-model="contract.module" values="formState.modules" ng-change="moduleChanged(contract.module)" required></hois-select> </md-input-container> <md-input-container flex flex-offset-gt-md="5"> <label>{{\'contract.theme\' | translate}}</label> <hois-select ng-model="contract.theme" values="formState.themes" ng-change="themeChanged(contract.theme)"></hois-select> </md-input-container> <md-input-container flex="10" flex-sm="100" flex-xs="100" flex-offset-gt-md="5"> <label>{{\'contract.credits\' | translate}}</label> <input type="number" ng-model="contract.credits" ng-min="0" ng-max="999.9" required> </md-input-container> <md-input-container flex="10" flex-sm="100" flex-xs="100"> <label>{{\'contract.hours\' | translate}}</label> <input type="number" ng-model="contract.hours" ng-min="0" ng-max="32767" required> </md-input-container> </div> <div ng-if="formState.isHigher" layout="row" layout-sm="column" layout-xs="column" flex> <md-input-container flex> <label>{{\'contract.subject\' | translate}}</label> <hois-select ng-model="contract.subject" values="formState.subjects" ng-change="subjectChanged(contract.subject)" required></hois-select> </md-input-container> <md-input-container flex="10" flex-sm="100" flex-xs="100" flex-offset-gt-md="5"> <label>{{\'contract.credits\' | translate}}</label> <input type="number" ng-model="contract.credits" ng-min="0" ng-max="999.9" required> </md-input-container> <md-input-container flex="10" flex-sm="100" flex-xs="100"> <label>{{\'contract.hours\' | translate}}</label> <input type="number" ng-model="contract.hours" ng-min="0" ng-max="32767" required> </md-input-container> </div> <div layout="row" flex> <md-input-container> <label>{{\'contract.start\' | translate}}</label> <md-datepicker ng-model="contract.startDate" required></md-datepicker> </md-input-container> <md-input-container> <label>{{\'contract.end\' | translate}}</label> <md-datepicker ng-model="contract.endDate" md-min-date="contract.startDate" required></md-datepicker> </md-input-container> </div> <div layout="row" flex> <md-input-container flex> <label class="textInput">{{\'contract.practicePlace\' | translate}}</label> <input type="text" ng-model="contract.practicePlace" md-maxlength="255" required> </md-input-container> </div> <div layout="row" flex> <md-input-container flex> <label>{{\'enterprise.label\' | translate}}</label> <hois-select ng-model="contract.enterprise" values="formState.enterprises" ng-change="enterpriseChanged(contract.enterprise)" required></hois-select> </md-input-container> <div layout="row"> <md-button class="md-raised md-default" ng-click="addEnterprise()">{{\'main.button.create\' | translate}}</md-button> </div> </div> <div layout="row" flex> <md-input-container flex> <label class="textInput">{{\'contract.contactPersonName\' | translate}}</label> <input type="text" ng-model="contract.contactPersonName" md-maxlength="100" required> </md-input-container> <md-input-container flex> <label class="textInput">{{\'contract.contactPersonEmail\' | translate}}</label> <input type="email" ng-model="contract.contactPersonEmail" md-maxlength="100" required> </md-input-container> <md-input-container flex> <label class="textInput">{{\'contract.contactPersonPhone\' | translate}}</label> <input type="text" ng-model="contract.contactPersonPhone" md-maxlength="100"> </md-input-container> </div> <div layout="row" flex> <md-input-container flex> <label class="textInput">{{\'contract.supervisorName\' | translate}}</label> <input type="text" ng-model="contract.supervisorName" md-maxlength="100" required> </md-input-container> <md-input-container flex> <label class="textInput">{{\'contract.supervisorEmail\' | translate}}</label> <input type="email" ng-model="contract.supervisorEmail" md-maxlength="100" required> </md-input-container> <md-input-container flex> <label class="textInput">{{\'contract.supervisorPhone\' | translate}}</label> <input type="text" ng-model="contract.supervisorPhone" md-maxlength="100"> </md-input-container> </div> <div layout="row" flex> <md-input-container flex> <label>{{\'contract.schoolSupervisor\' | translate}}</label> <hois-select ng-model="contract.teacher" type="teacher" required criteria="{valid: true}"></hois-select> </md-input-container> </div> <div layout="row" flex> <md-input-container flex> <label class="textInput">{{\'contract.otherSupervisor\' | translate}}</label> <input type="text" ng-model="contract.otherSupervisor" md-maxlength="255"> </md-input-container> </div> <div layout="row" flex> <md-input-container flex> <label>{{\'contract.contractCoordinator\' | translate}}</label> <hois-select ng-model="contract.contractCoordinator" type="directivecoordinator" required></hois-select> </md-input-container> </div> <div layout="row" flex> <md-input-container flex> <label class="textInput">{{\'contract.practicePlan\' | translate}}</label> <textarea ng-model="contract.practicePlan" required md-maxlength="20000" max-rows="4"></textarea> </md-input-container> </div> <div layout="row"> <md-button ng-if="contract.status !== \'LEPING_STAATUS_Y\'" class="md-raised md-primary" type="submit">{{\'main.button.save\' | translate}}</md-button> <md-button ng-if="auth.isAdmin() && contract.id && (contract.status === \'LEPING_STAATUS_Y\' || contract.status === \'LEPING_STAATUS_S\')" class="md-raised md-default" ng-click="delete()">{{\'main.button.delete\' | translate}}</md-button> <md-button class="md-raised md-default" ng-click="back(\'#/contracts/\', contractForm)">{{\'main.button.back\' | translate}}</md-button> <md-button ng-if="contract.id && contract.status === \'LEPING_STAATUS_S\'" class="md-raised md-default" ng-click="sendToEkis()">{{\'main.button.sendToEkis\' | translate}}</md-button> </div> </form> </div> </div>'),a.put("contract/contract.list.html",'<div class="ois-form-layout-padding ois-form-layout" ng-cloak> <div flex> <fieldset ng-if="auth.isAdmin()"> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'main.searchlabel\' | translate}}</legend> <form name="searchForm" ng-submit="searchForm.$valid && loadData()" novalidate class="nomargin"> <div layout="row" layout-sm="column" layout-xs="column"> <div flex="45" flex-sm="100" flex-xs="100"> <div layout="column" flex> <div layout="row" flex> <md-input-container> <label>{{\'contract.startFrom\' | translate}}</label> <md-datepicker ng-model="criteria.startFrom"></md-datepicker> </md-input-container> <md-input-container flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'contract.startThru\' | translate}}</label> <md-datepicker ng-model="criteria.startThru" md-min-date="criteria.startFrom"></md-datepicker> </md-input-container> </div> </div> </div> <div flex="45" flex-sm="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <div layout="column" flex> <div layout="row" flex> <md-input-container> <label>{{\'contract.endFrom\' | translate}}</label> <md-datepicker ng-model="criteria.endFrom"></md-datepicker> </md-input-container> <md-input-container flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'contract.endThru\' | translate}}</label> <md-datepicker ng-model="criteria.endThru" md-min-date="criteria.endFrom"></md-datepicker> </md-input-container> </div> </div> </div> </div> <div layout="row" layout-sm="column" layout-xs="column"> <div flex="45" flex-sm="100" flex-xs="100"> <div layout="column" flex> <md-input-container> <label class="textInput">{{\'student.label\' | translate}}</label> <input ng-model="criteria.studentName" type="text"> </md-input-container> </div> </div> <div flex="45" flex-sm="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <div layout="column" flex> <md-input-container> <label class="textInput">{{\'contract.curriculumVersion\' | translate}}</label> <hois-select ng-model="criteria.curriculumVersion" type="curriculumversion"></hois-select> </md-input-container> </div> </div> </div> <div layout="row" layout-sm="column" layout-xs="column"> <div flex="45" flex-sm="100" flex-xs="100"> <div layout="column" flex> <md-input-container> <label class="textInput">{{\'studentGroup.label\' | translate}}</label> <hois-select ng-model="criteria.studentGroup" type="studentgroup" criteria="{valid: true}"></hois-select> </md-input-container> </div> </div> </div> <div layout="row" layout-sm="column" layout-xs="column"> <div flex="45" flex-sm="100" flex-xs="100"> <div layout="column" flex> <md-input-container> <label class="textInput">{{\'enterprise.label\' | translate}}</label> <input ng-model="criteria.enterpriseName" type="text"> </md-input-container> </div> </div> <div flex="45" flex-sm="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <div layout="column" flex> <md-input-container> <label class="textInput">{{\'enterprise.supervisor\' | translate}}</label> <input ng-model="criteria.enterpriseContactPersonName" type="text"> </md-input-container> </div> </div> </div> <div layout="row" layout-sm="column" layout-xs="column"> <div flex="45" flex-sm="100" flex-xs="100"> <div layout="column" flex> <md-input-container> <label class="textInput">{{\'contract.status\' | translate}}</label> <hois-classifier-select ng-model="criteria.status" main-classifier-code="LEPING_STAATUS" model-value-attr="code"></hois-classifier-select> </md-input-container> </div> </div> <div flex="45" flex-sm="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <div layout="column" flex> <md-input-container> <label class="textInput">{{\'contract.schoolSupervisor\' | translate}}</label> <hois-select ng-model="criteria.teacher" type="teacher"></hois-select> </md-input-container> </div> </div> </div> <div layout="row"> <md-button type="submit" class="md-raised md-primary">{{\'main.button.search\' | translate}}</md-button> <md-button class="md-raised" ng-click="clearCriteria()">{{\'main.button.clear\' | translate}}</md-button> <md-button ng-if="!auth.isStudent() && isAuthorized(\'ROLE_OIGUS_M_TEEMAOIGUS_LEPING\')" class="md-raised" ng-click="newContract()">{{\'main.button.create\' | translate}}</md-button> </div> <div flex-xs="0" flex-gt-xs="0" flex-gt-sm="50"></div> </form> </fieldset> </div> </div> <div layout-padding> <div flex> <md-table-container> <table md-table md-progress="tabledata.$promise"> <thead md-head md-order="criteria.order" md-on-reorder="loadData"> <tr md-row> <th ng-if="auth.isAdmin()" md-column md-order-by="student_person.lastname,student_person.firstname">{{\'student.label\' | translate}}</th> <th md-column>{{\'contract.contractNumber\' | translate}}</th> <th md-column>{{\'contract.validity\' | translate}}</th> <th md-column>{{\'enterprise.label\' | translate}}</th> <th md-column>{{\'enterprise.supervisor\' | translate}}</th> <th md-column>{{\'contract.schoolSupervisor\' | translate}}</th> <th md-column>{{\'contract.contractDate\' | translate}}</th> <th md-column>{{\'main.status\' | translate}}</th> <th md-column></th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="row in tabledata.content" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td ng-if="auth.isAdmin()" md-cell>{{currentLanguageNameField(row.student)}}</td> <td md-cell>{{row.contractNr}}</td> <td md-cell>{{row.startDate | hoisDate}} - {{row.endDate | hoisDate}}</td> <td md-cell>{{row.enterpriseName}}</td> <td md-cell>{{row.enterpriseContactPersonName}}</td> <td md-cell>{{currentLanguageNameField(row.teacher)}}</td> <td md-cell>{{row.confirmDate | hoisDate}}</td> <td md-cell>{{currentLanguageNameField(row.status)}}</td> <td md-cell> <div ng-if="auth.isStudent()"> <md-button md-no-ink class="md-primary change-button" ng-href="#/contracts/{{::row.id}}/view">{{\'main.button.view\' | translate}}</md-button> </div> <div ng-if="!auth.isStudent()"> <md-button ng-if="row.status.code===\'LEPING_STAATUS_S\' && isAuthorized(\'ROLE_OIGUS_M_TEEMAOIGUS_LEPING\')" md-no-ink class="md-primary change-button" ng-href="#/contracts/{{::row.id}}/edit">{{\'main.button.change\' | translate}}</md-button> <md-button ng-if="row.status.code!==\'LEPING_STAATUS_S\' || !isAuthorized(\'ROLE_OIGUS_M_TEEMAOIGUS_LEPING\')" md-no-ink class="md-primary change-button" ng-href="#/contracts/{{::row.id}}/view">{{\'main.button.view\' | translate}}</md-button> </div> </td> </tr> </tbody> </table> </md-table-container> <md-table-pagination md-limit="criteria.size" md-limit-options="[10, 20, 50]" md-page="criteria.page" md-total="{{tabledata.totalElements}}" md-on-paginate="loadData" md-label="{page: \'{{\'main.page\' | translate}}:\', rowsPerPage: \'{{\'main.rowPerPage\' | translate}}:\', of: \'{{\'main.of\' | translate}}\'}" md-page-select></md-table-pagination> </div> </div>'),a.put("contract/contract.view.html",'<div class="ois-form-layout-padding form-readonly" ng-cloak> <div flex> <div layout="column"> <div layout="row" layout-sm="column" layout-xs="column" flex> <md-input-container flex="35"> <label>{{\'student.label\' | translate}}</label> <hois-value value="currentLanguageNameField(contract.student)"></hois-value> </md-input-container> </div> <div ng-if="!contract.subject" layout="row" layout-sm="column" layout-xs="column" flex> <md-input-container flex> <label class="textInput">{{\'module.practice\' | translate}}</label> <hois-value value="currentLanguageNameField(contract.module)"></hois-value> </md-input-container> <md-input-container flex flex-offset-gt-md="5"> <label class="textInput">{{\'contract.theme\' | translate}}</label> <hois-value value="currentLanguageNameField(contract.theme)"></hois-value> </md-input-container> <md-input-container flex="10" flex-sm="100" flex-xs="100" flex-offset-gt-md="5"> <label class="textInput">{{\'contract.credits\' | translate}}</label> <hois-value value="contract.credits"></hois-value> </md-input-container> <md-input-container flex="10" flex-sm="100" flex-xs="100"> <label class="textInput">{{\'contract.hours\' | translate}}</label> <hois-value value="contract.hours"></hois-value> </md-input-container> </div> <div ng-if="contract.subject" layout="row" layout-sm="column" layout-xs="column" flex> <md-input-container flex> <label class="textInput">{{\'contract.subject\' | translate}}</label> <hois-value value="currentLanguageNameField(contract.subject)"></hois-value> </md-input-container> <md-input-container flex="10" flex-sm="100" flex-xs="100" flex-offset-gt-md="5"> <label class="textInput">{{\'contract.credits\' | translate}}</label> <hois-value value="contract.credits"></hois-value> </md-input-container> <md-input-container flex="10" flex-sm="100" flex-xs="100"> <label class="textInput">{{\'contract.hours\' | translate}}</label> <hois-value value="contract.hours"></hois-value> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column" flex> <md-input-container flex="15"> <label>{{\'contract.start\' | translate}}</label> <hois-value value="contract.startDate | hoisDate"></hois-value> </md-input-container> <md-input-container flex="15" flex-offset-gt-md="5"> <label>{{\'contract.end\' | translate}}</label> <hois-value value="contract.endDate | hoisDate"></hois-value> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column" flex> <md-input-container flex> <label class="textInput">{{\'contract.practicePlace\' | translate}}</label> <hois-value value="contract.practicePlace"></hois-value> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column" flex> <md-input-container flex> <label class="textInput">{{\'enterprise.label\' | translate}}</label> <hois-value value="currentLanguageNameField(contract.enterprise)"></hois-value> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column" flex> <md-input-container flex> <label class="textInput">{{\'contract.contactPersonName\' | translate}}</label> <hois-value value="contract.contactPersonName"></hois-value> </md-input-container> <md-input-container flex> <label class="textInput">{{\'contract.contactPersonEmail\' | translate}}</label> <hois-value value="contract.contactPersonEmail"></hois-value> </md-input-container> <md-input-container flex> <label class="textInput">{{\'contract.contactPersonPhone\' | translate}}</label> <hois-value value="contract.contactPersonPhone"></hois-value> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column" flex> <md-input-container flex> <label class="textInput">{{\'contract.supervisorName\' | translate}}</label> <hois-value value="contract.supervisorName"></hois-value> </md-input-container> <md-input-container flex> <label class="textInput">{{\'contract.supervisorEmail\' | translate}}</label> <hois-value value="contract.supervisorEmail"></hois-value> </md-input-container> <md-input-container flex> <label class="textInput">{{\'contract.supervisorPhone\' | translate}}</label> <hois-value value="contract.supervisorPhone"></hois-value> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column" flex> <md-input-container flex> <label class="textInput">{{\'contract.schoolSupervisor\' | translate}}</label> <hois-value value="currentLanguageNameField(contract.teacher)"></hois-value> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column" flex> <md-input-container flex> <label class="textInput">{{\'contract.otherSupervisor\' | translate}}</label> <hois-value value="contract.otherSupervisor"></hois-value> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column" flex> <md-input-container flex> <label class="textInput">{{\'contract.contractCoordinator\' | translate}}</label> <hois-value value="currentLanguageNameField(contract.contractCoordinator)"></hois-value> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column" flex> <md-input-container flex> <label class="textInput">{{\'contract.practicePlan\' | translate}}</label> <hois-value value="contract.practicePlan"></hois-value> </md-input-container> </div> <div layout="row"> <md-button class="md-raised md-default" ng-click="back(\'#/contracts/\')">{{\'main.button.back\' | translate}}</md-button> <md-button ng-if="(auth.isAdmin() && contract.status === \'LEPING_STAATUS_Y\' || contract.status === \'LEPING_STAATUS_S\')\r\n          && isAuthorized(\'ROLE_OIGUS_M_TEEMAOIGUS_LEPING\')" class="md-raised" ng-click="delete()">{{\'main.button.delete\' | translate}}</md-button> <md-button ng-if="contract.wdId && (contract.status === \'LEPING_STAATUS_Y\' || contract.status === \'LEPING_STAATUS_L\' || contract.status === \'LEPING_STAATUS_K\')" class="md-raised md-default" ng-href="{{getEkisContractUrl(contract.wdId)}}" target="_blank">{{\'contract.button.viewContractFromEkis\' | translate}}</md-button> </div> </div> </div> </div>'),a.put("contract/enterprise.add.dialog.html",'<md-dialog aria-label="add enterprise dialog" flex="50"> <form name="dialogForm" ng-submit="dialogForm.$valid && submit()" novalidate ng-cloak> <md-toolbar> <div class="md-toolbar-tools"> <h2 flex>{{"enterprise.create" | translate}}</h2> <md-button class="md-icon-button" ng-click="cancel()"> <md-icon md-font-set="material-icons">close</md-icon> </md-button> </div> </md-toolbar> <md-dialog-content> <div class="md-dialog-content"> <div layout="column" flex> <md-input-container flex> <label class="textInput">{{\'enterprise.name\' | translate}}</label> <input type="text" ng-model="enterprise.name" required> </md-input-container> <md-input-container flex> <label class="textInput">{{\'enterprise.regCode\' | translate}}</label> <input type="text" ng-model="enterprise.regCode" required> </md-input-container> <md-input-container flex> <label class="textInput">{{\'enterprise.contactPersonName\' | translate}}</label> <input type="text" ng-model="enterprise.contactPersonName"> </md-input-container> <md-input-container flex> <label class="textInput">{{\'enterprise.contactPersonPhone\' | translate}}</label> <input type="number" ng-model="enterprise.contactPersonPhone"> </md-input-container> <md-input-container flex> <label class="textInput">{{\'enterprise.contactPersonEmail\' | translate}}</label> <input type="email" ng-model="enterprise.contactPersonEmail"> </md-input-container> </div> </div> </md-dialog-content> <md-dialog-actions layout="row" layout-align="start start"> <md-button class="md-raised md-primary" type="submit">{{\'main.button.save\' | translate}}</md-button> <md-button class="md-raised" ng-click="cancel()">{{"main.button.close" | translate}}</md-button> </md-dialog-actions> </form> </md-dialog>'),a.put("contract/vocational.higher.select.dialog.html",'<md-dialog aria-label="vaocational higher select dialog"> <form name="dialogForm" ng-submit="dialogForm.$valid && submit()" novalidate ng-cloak> <md-toolbar> <div class="md-toolbar-tools"> <h2 flex>{{"contract.vocationalOrHigherSelect" | translate}}</h2> <md-button class="md-icon-button" ng-click="cancel()"> <md-icon md-font-set="material-icons">close</md-icon> </md-button> </div> </md-toolbar> <md-dialog-content> <div class="md-dialog-content"> {{"contract.vocationalOrHigherContract" | translate}} </div> </md-dialog-content> <md-dialog-actions layout="row" layout-align="start start"> <md-button class="md-raised" type="submit">{{\'contract.button.vocational\' | translate}}</md-button> <md-button class="md-raised" type="submit" ng-click="higher=true">{{"contract.button.higher" | translate}}</md-button> </md-dialog-actions> </form> </md-dialog>'),
a.put("curriculum/curriculum.list.html",'<div class="ois-form-layout-padding"> <div flex> <form layout="column" ng-cloak ng-submit="loadData()" class="nomargin"> <fieldset tabindex="1"> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'main.searchlabel\' | translate}}</legend> <div layout="row" layout-sm="column" layout-xs="column" ng-if="!auth.school"> <md-input-container flex="45" flex-sm="100" flex-xs="100"> <label>{{\'school.label\' | translate}}</label> <hois-select ng-model="criteria.school" type="school" multiple></hois-select> </md-input-container> <md-input-container flex="50" flex-sm="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'curriculum.studyLevel\' | translate}}</label> <hois-classifier-select ng-model="criteria.studyLevel" multiple main-classifier-code="OPPEASTE" model-value-attr="code"></hois-classifier-select> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column" ng-if="auth.school"> <md-input-container flex="45" flex-sm="100" flex-xs="100"> <label>{{\'curriculum.studyLevel\' | translate}}</label> <hois-classifier-select ng-model="criteria.studyLevel" multiple main-classifier-code="OPPEASTE" model-value-attr="code" show-only-values="studyLevelOptions"></hois-classifier-select> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column" class="top-margin"> <md-input-container flex="45" flex-sm="100" flex-xs="100"> <label>{{\'curriculum.name\' | translate}}</label> <input ng-model="criteria.name" type="text"> </md-input-container> <md-input-container flex="50" flex-sm="100" flex-xs="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'curriculum.ekrLevel\' | translate}}</label> <hois-classifier-select ng-model="criteria.ekrLevel" multiple main-classifier-code="EKR" model-value-attr="code"></hois-classifier-select> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="45" flex-sm="100" flex-xs="100"> <label>{{\'curriculum.code\' | translate}}</label> <input ng-model="criteria.code" type="text"> </md-input-container> <md-input-container flex="50" flex-sm="100" flex-xs="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'curriculum.merCode\' | translate}}</label> <input ng-model="criteria.merCode" type="text"> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column" ng-if="school.higher && school.vocational"> <md-input-container flex="20" flex-sm="100" flex-xs="100"> <label>{{\'curriculum.curriculumGroup\' | translate}}</label> <hois-classifier-select ng-model="criteria.curriculumGroup" model-value-attr="code" main-classifier-code="OPPEKAVAGRUPP" ng-disabled="criteria.iscedClassCode && criteria.iscedClassCode.length > 0"></hois-classifier-select> </md-input-container> <md-input-container flex="20" flex-sm="100" flex-xs="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'curriculum.areaOfStudy\' | translate}}</label> <hois-classifier-select ng-model="criteria.iscedVald" model-value-attr="code" main-classifier-code="ISCED_VALD" show-only-values="areasOfStudy"></hois-classifier-select> </md-input-container> <md-input-container flex="20" flex-sm="100" flex-xs="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'curriculum.fieldOfStudy\' | translate}}</label> <hois-classifier-select ng-model="criteria.iscedSuun" model-value-attr="code" main-classifier-code="ISCED_SUUN" watch-model="criteria.iscedVald" filter-values search-from-connect connect-main-classifier-code="ISCED_VALD" multiple></hois-classifier-select> </md-input-container> <md-input-container flex="25" flex-sm="100" flex-xs="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'curriculum.group\' | translate}}</label> <hois-classifier-select ng-model="criteria.iscedClassCode" model-value-attr="code" main-classifier-code="ISCED_RYHM" watch-model="criteria.iscedSuun" filter-values search-from-connect connect-main-classifier-code="ISCED_SUUN" multiple ng-disabled="criteria.curriculumGroup"></hois-classifier-select> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column" ng-if="school.vocational && !school.higher"> <md-input-container flex="30" flex-sm="100" flex-xs="100"> <label>{{\'curriculum.areaOfStudy\' | translate}}</label> <hois-classifier-select ng-model="criteria.iscedVald" model-value-attr="code" main-classifier-code="ISCED_VALD" criteria="{vocational: true}"></hois-classifier-select> </md-input-container> <md-input-container flex="30" flex-sm="100" flex-xs="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'curriculum.fieldOfStudy\' | translate}}</label> <hois-classifier-select ng-model="criteria.iscedSuun" model-value-attr="code" main-classifier-code="ISCED_SUUN" watch-model="criteria.iscedVald" filter-values search-from-connect connect-main-classifier-code="ISCED_VALD" multiple criteria="{vocational: true}"></hois-classifier-select> </md-input-container> <md-input-container flex="30" flex-sm="100" flex-xs="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'curriculum.group\' | translate}}</label> <hois-classifier-select ng-model="criteria.iscedClassCode" model-value-attr="code" main-classifier-code="ISCED_RYHM" watch-model="criteria.iscedSuun" filter-values search-from-connect connect-main-classifier-code="ISCED_SUUN" multiple criteria="{vocational: true}"></hois-classifier-select> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column" ng-if="school.higher && !school.vocational"> <md-input-container flex="30" flex-sm="100" flex-xs="100"> <label>{{\'curriculum.curriculumGroup\' | translate}}</label> <hois-classifier-select ng-model="criteria.curriculumGroup" model-value-attr="code" main-classifier-code="OPPEKAVAGRUPP" multiple criteria="{higher: true}"></hois-classifier-select> </md-input-container> <md-input-container flex="30" flex-sm="100" flex-xs="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'curriculum.areaOfStudy\' | translate}}</label> <hois-classifier-select ng-model="criteria.iscedVald" model-value-attr="code" main-classifier-code="ISCED_VALD" criteria="{higher: true}" show-only-values="areasOfStudy"></hois-classifier-select> </md-input-container> <md-input-container flex="30" flex-sm="100" flex-xs="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'curriculum.fieldOfStudy\' | translate}}</label> <hois-classifier-select ng-model="criteria.iscedSuun" model-value-attr="code" main-classifier-code="ISCED_SUUN" watch-model="criteria.iscedVald" filter-values search-from-connect connect-main-classifier-code="ISCED_VALD" multiple criteria="{higher: true}"></hois-classifier-select> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column" class="top-margin"> <md-input-container flex="100" flex-sm="100" flex-xs="100"> <label>{{\'curriculum.studyLanguage2\' | translate}}</label> <hois-classifier-select ng-model="criteria.studyLanguage" multiple main-classifier-code="OPPEKEEL" model-value-attr="code"></hois-classifier-select> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <div layout="column" flex="45"> <label class="common-label"> <span ng-if="school.vocational && !school.higher">{{\'curriculum.creditsRangeEkap\' | translate}}</span> <span ng-if="!school.vocational && school.higher">{{\'curriculum.creditsRangeEap\' | translate}}</span> <span ng-if="school.vocational && school.higher || !school.vocational && !school.higher">{{\'curriculum.creditsEapEkap\' | translate}}</span> </label> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="45" flex-sm="100" flex-xs="100" class=""> <label>{{\'main.from\' | translate}}</label> <input ng-model="criteria.creditsMin" type="number"> </md-input-container> <md-input-container flex="45" flex-sm="100" flex-xs="100" flex-offset="10" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'main.thru\' | translate}}</label> <input ng-model="criteria.creditsMax" type="number"> </md-input-container> </div> </div> <div layout="column" flex="50" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label class="common-label">{{\'main.validityPeriod\' | translate}}</label> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex-sm="100" flex-xs="100"> <label>{{\'main.from\' | translate}}</label> <md-datepicker ng-model="criteria.validFrom"></md-datepicker> </md-input-container> <md-input-container flex-sm="100" flex-xs="100"> <label>{{\'main.thru\' | translate}}</label> <md-datepicker ng-model="criteria.validThru"></md-datepicker> </md-input-container> </div> </div> </div> <div layout="row" layout-sm="column" layout-xs="column" ng-if="canView"> <md-input-container flex="45" flex-sm="100" flex-xs="100"> <label>{{\'main.status\' | translate}}</label> <hois-classifier-select ng-model="criteria.status" multiple main-classifier-code="OPPEKAVA_STAATUS" model-value-attr="code"></hois-classifier-select> </md-input-container> <md-input-container flex="50" flex-sm="100" flex-xs="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'curriculum.ehisStatus\' | translate}}</label> <hois-classifier-select ng-model="criteria.ehisStatus" multiple main-classifier-code="OPPEKAVA_EHIS_STAATUS" model-value-attr="code"></hois-classifier-select> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column" class="top-margin" ng-if="auth.school"> <md-input-container flex="100" flex-sm="100" flex-xs="100"> <label>{{\'school.department.department\' | translate}}</label> <hois-school-department-select ng-model="criteria.department" multiple></hois-school-department-select> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column" class="top-margin"> <md-checkbox ng-model="criteria.isJoint" aria-label="Is vocational"> {{\'curriculum.isJoint\' | translate}} </md-checkbox> </div> <div layout="row"> <md-button type="submit" class="md-raised md-primary">{{\'main.button.search\' | translate}}</md-button> <md-button class="md-raised" ng-click="clearCriteria()">{{\'main.button.clear\' | translate}}</md-button> <md-button class="md-raised" ng-if="auth.school.vocational && canCreate" ng-href="#/vocationalCurriculum/new">{{\'main.button.insertVocationalCurriculum\' | translate}}</md-button> <md-button class="md-raised" ng-if="auth.school.higher && canCreate" ng-href="#/higherCurriculum/new">{{\'main.button.insertHigherCurriculum\' | translate}}</md-button> </div> </fieldset> </form> </div> </div> <md-table-container flex ng-cloak layout-padding> <table md-table md-progress="tabledata.$promise"> <thead md-head md-order="criteria.order" md-on-reorder="loadData"> <tr md-row> <th md-column md-order-by="school.{{currentLanguageNameField()}}" ng-if="!auth.school">{{\'school.label\' | translate}}</th> <th md-column md-order-by="{{currentLanguageNameField()}}">{{\'curriculum.name\' | translate}}</th> <th md-column md-order-by="origStudyLevel.{{currentLanguageNameField()}}">{{\'curriculum.studyLevel\' | translate}}</th> <th md-column md-order-by="credits"> <span ng-if="school.vocational && school.higher || !school.vocational && !school.higher">{{\'curriculum.search.creditsEapEkap\' | translate}}</span> <span ng-if="!school.vocational && school.higher">{{\'curriculum.search.creditsEap\' | translate}}</span> <span ng-if="school.vocational && !school.higher">{{\'curriculum.search.creditsEkap\' | translate}}</span> </th> <th md-column md-order-by="validFrom">{{\'stateCurriculum.validFrom\' | translate}}</th> <th md-column md-order-by="validThru">{{\'stateCurriculum.validThru\' | translate}}</th> <th md-column md-order-by="status.{{currentLanguageNameField()}}" ng-if="canView">{{\'stateCurriculum.status\' | translate}}</th> <th></th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="row in tabledata.content" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell ng-if="!auth.school">{{row.school.nameEt}}</td> <td md-cell><a href="" ng-click="view(row)">{{currentLanguageNameField(row)}}</a></td> <td md-cell>{{currentLanguageNameField(row.origStudyLevel)}}</td> <td md-cell>{{::row.credits}}</td> <td md-cell>{{row.validFrom | hoisDate}}</td> <td md-cell>{{row.validThru | hoisDate}}</td> <td md-cell ng-if="canView">{{currentLanguageNameField(row.status)}}</td> <td md-cell> <md-button md-no-ink class="md-primary change-button" ng-if="row.canChange" ng-click="edit(row)">{{\'main.button.change\' | translate}}</md-button> </td> </tr> </tbody> </table> </md-table-container> <md-table-pagination md-limit="criteria.size" md-limit-options="[10, 20, 50]" md-page="criteria.page" md-total="{{tabledata.totalElements}}" md-on-paginate="loadData" md-label="{page: \'{{\'main.page\' | translate}}:\', rowsPerPage: \'{{\'main.rowPerPage\' | translate}}:\', of: \'{{\'main.of\' | translate}}\' }" md-page-select></md-table-pagination>'),a.put("curriculum/curriculum.public.list.html",'<div layout-padding> <form layout="column" ng-cloak ng-submit="loadData()" class="nomargin"> <fieldset tabindex="1"> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'main.searchlabel\' | translate}}</legend> <div layout="column" flex> <md-input-container> <label>{{\'school.label\' | translate}}</label> <hois-select ng-model="criteria.school" type="school"></hois-select> </md-input-container> <md-input-container> <label>{{\'curriculum.studyLevel\' | translate}}</label> <hois-classifier-select ng-model="criteria.studyLevel" multiple main-classifier-code="OPPEASTE" model-value-attr="code"></hois-classifier-select> </md-input-container> <md-input-container> <label>{{\'curriculum.name\' | translate}}</label> <input ng-model="criteria.name" type="text"> </md-input-container> </div> <div layout="row"> <md-button type="submit" class="md-raised md-primary">{{\'main.button.search\' | translate}}</md-button> <md-button class="md-raised" ng-click="clearCriteria()">{{\'main.button.clear\' | translate}}</md-button> </div> </fieldset> </form> </div> <md-table-container flex ng-cloak layout-padding> <table md-table md-progress="tabledata.$promise"> <thead md-head md-order="criteria.order" md-on-reorder="loadData"> <tr md-row> <th md-column md-order-by="school.{{currentLanguageNameField()}}">{{\'school.label\' | translate}}</th> <th md-column md-order-by="{{currentLanguageNameField()}}">{{\'curriculum.name\' | translate}}</th> <th md-column md-order-by="origStudyLevel.{{currentLanguageNameField()}}">{{\'curriculum.studyLevel\' | translate}}</th> <th md-column md-order-by="credits"> <span>{{\'curriculum.search.creditsEapEkap\' | translate}}</span> </th> <th md-column md-order-by="validFrom">{{\'stateCurriculum.validFrom\' | translate}}</th> <th md-column md-order-by="validThru">{{\'stateCurriculum.validThru\' | translate}}</th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="row in tabledata.content" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell>{{row.school.nameEt}}</td> <td md-cell> <a href="/#/curriculum/{{::row.id}}">{{currentLanguageNameField(row)}}</a> </td> <td md-cell>{{currentLanguageNameField(row.origStudyLevel)}}</td> <td md-cell>{{::row.credits}}</td> <td md-cell>{{row.validFrom | hoisDate}}</td> <td md-cell>{{row.validThru | hoisDate}}</td> </tr> </tbody> </table> </md-table-container> <md-table-pagination md-limit="criteria.size" md-limit-options="[10, 20, 50]" md-page="criteria.page" md-total="{{tabledata.totalElements}}" md-on-paginate="loadData" md-label="{page: \'{{\'main.page\' | translate}}:\', rowsPerPage: \'{{\'main.rowPerPage\' | translate}}:\', of: \'{{\'main.of\' | translate}}\' }" md-page-select></md-table-pagination>'),a.put("curriculum/curriculum.public.version.html",'<div layout-padding ng-cloak class="form-readonly"> <fieldset> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'curriculum.public.versionTitle\' | translate}}</legend> <div layout="column"> <div>&nbsp;</div> <md-input-container flex> <label>{{\'curriculum.public.codeOrName\' | translate}}</label> <hois-value value="version.code"></hois-value> </md-input-container> <div ng-if="curriculum.higher" layout="row"> <md-input-container flex> <label>{{\'module.implementationPlan.admissionYear\' | translate}}</label> <hois-value value="version.admissionYear"></hois-value> </md-input-container> </div> <div ng-if="!curriculum.higher" layout="row"> <md-input-container flex="50" flex-xs="100"> <label>{{\'curriculum.public.studyForm\' | translate}}</label> <hois-value value="version.curriculumStudyForm"></hois-value> </md-input-container> <md-input-container flex="45" flex-offset="5"> <label>{{\'curriculum.public.admissionYear\' | translate}}</label> <hois-value value="version.admissionYear"></hois-value> </md-input-container> </div> <div ng-if="!curriculum.higher" layout="row"> <md-input-container flex="50" flex-xs="100"> <label>{{\'curriculum.public.targetGroup\' | translate}}</label> <hois-value value="version.targetGroup"></hois-value> </md-input-container> </div> </div> <table ng-if="!curriculum.higher" md-table class="secondary-table"> <thead md-head> <tr md-row style="background: #E0E0E0 !important"> <th md-column colspan="{{version.yearCapacities.length}}">{{\'curriculum.yearCapacitiesTable\' | translate}}</th> </tr> <tr md-row> <th md-column ng-repeat="yc in version.yearCapacities track by $index">{{$index+1}}.&nbsp;{{\'module.studyYearLowercase\' | translate}}</th> </tr> </thead> <tbody md-body> <tr md-row> <td md-cell ng-repeat="yc in version.yearCapacities track by $index">{{yc.credits}}</td> </tr> </tbody> </table> </fieldset> <span ng-if="version.modules.length > 0"> <div>&nbsp;</div> <fieldset> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'module.modules\' | translate}}</legend> <hois-collapsable ng-repeat="module in version.modules | orderBy: \'nameEt\'" expanded="false" label="currentLanguageNameField(module) + \' \' + module.totalCredits + \' \' + (\'curriculum.public.higherCreditsUnit\' | translate)"> <table ng-if="(mandatorySubjects = (module.subjects | filter : {optional: false})).length > 0" md-table class="secondary-table"> <thead md-head> <tr md-row style="background: #E0E0E0 !important"> <th md-column colspan="3">{{\'curriculum.public.mandatorySubjects\' | translate}}</th> </tr> <tr md-row> <th md-column width="40%">{{\'curriculum.public.name\' | translate}}</th> <th md-column width="20%">{{\'curriculum.public.higherStudyLoad\' | translate}}</th> <th md-column width="40%">{{\'curriculum.public.assessment\' | translate}}</th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="subject in mandatorySubjects"> <td md-cell>{{currentLanguageNameField(subject.subject)}}</td> <td md-cell>{{subject.subject.credits}}</td> <td md-cell>{{subject.subject.assessment}}</td> </tr> </tbody> </table> <table ng-if="(optionalSubjects = (module.subjects | filter : {optional: true})).length > 0" md-table class="secondary-table"> <thead md-head> <tr md-row style="background: #E0E0E0 !important"> <th md-column colspan="3">{{\'curriculum.public.optionalSubjects\' | translate}}</th> </tr> <tr md-row> <th md-column width="40%">{{\'curriculum.public.name\' | translate}}</th> <th md-column width="20%">{{\'curriculum.public.higherStudyLoad\' | translate}}</th> <th md-column width="40%">{{\'curriculum.public.assessment\' | translate}}</th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="subject in optionalSubjects"> <td md-cell>{{currentLanguageNameField(subject.subject)}}</td> <td md-cell>{{subject.subject.credits}}</td> <td md-cell>{{subject.subject.assessment}}</td> </tr> </tbody> </table> </hois-collapsable> </fieldset> </span> <span ng-if="version.occupationModules.length > 0"> <div>&nbsp;</div> <fieldset> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'module.modules\' | translate}}</legend> <hois-collapsable ng-repeat="module in version.occupationModules | orderBy: \'nameEt\'" expanded="false" label="currentLanguageNameField(module) + \' \' + module.totalCredits + \' \' + (\'curriculum.public.vocationalCreditsUnit\' | translate)"> <div layout="column"> <md-input-container flex> <label>{{\'curriculum.public.assessment\' | translate}}</label> <hois-value value="module.assessment"></hois-value> </md-input-container> </div> <table ng-if="module.themes.length > 0" md-table class="secondary-table"> <thead md-head> <tr md-row style="background: #E0E0E0 !important"> <th md-column colspan="3">{{\'curriculum.public.themes\' | translate}}</th> </tr> <tr md-row> <th md-column width="40%">{{\'curriculum.public.name\' | translate}}</th> <th md-column width="20%">{{\'curriculum.public.vocationalStudyLoad\' | translate}}</th> <th md-column width="40%">{{\'curriculum.public.assessment\' | translate}}</th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="theme in module.themes"> <td md-cell>{{theme.nameEt}}</td> <td md-cell>{{theme.hours}}/{{theme.credits}}</td> <td md-cell>{{theme.assessment}}</td> </tr> </tbody> </table> </hois-collapsable> </fieldset> </span> <div layout="row"> <md-button ng-click="back(\'#/curriculums/\')" class="md-raised">{{\'main.button.back\' | translate}}</md-button> </div> </div>'),a.put("curriculum/curriculum.public.view.html",'<div layout-padding ng-cloak class="form-readonly"> <fieldset> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'curriculum.public.curriculumData\' | translate}}</legend> <div>&nbsp;</div> <div layout="row" layout-sm="column" layout-xs="column" flex> <md-input-container flex-gt-sm="50"> <label>{{\'curriculum.nameEt\' | translate}}</label> <hois-value value="curriculum.nameEt"></hois-value> </md-input-container> <md-input-container flex-gt-sm="45" flex-offset-gt-xs="5"> <label>{{\'curriculum.nameEn\' | translate}}</label> <hois-value value="curriculum.nameEn"></hois-value> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column" flex> <md-input-container flex-gt-sm="50"> <label>{{\'curriculum.code\' | translate}}</label> <hois-value value="curriculum.code"></hois-value> </md-input-container> <md-input-container flex-gt-sm="45" flex-offset-gt-xs="5"> <label>{{\'curriculum.merCode\' | translate}}</label> <hois-value value="curriculum.merCode"></hois-value> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column" flex> <md-input-container flex-gt-sm="25"> <label>{{\'curriculum.credits\' | translate}}</label> <hois-value value="curriculum.credits"></hois-value> </md-input-container> <md-input-container flex-gt-sm="25"> <label>{{\'student.studyLevel\' | translate}}</label> <hois-value value="curriculum.origStudyLevel"></hois-value> </md-input-container> <md-input-container ng-if="curriculum.higher" flex-gt-sm="45" flex-offset-gt-xs="5"> <label>{{\'curriculum.studyPeriod\' | translate}} {{\'main.years\' | translate}}/{{\'main.months\' | translate}}</label> <hois-value value="curriculum.studyPeriodYears + \'/\' + curriculum.studyPeriodMonths"></hois-value> </md-input-container> <md-input-container ng-if="!curriculum.higher" flex-gt-sm="20" flex-offset-gt-xs="5"> <label>{{\'curriculum.studyPeriod\' | translate}} {{\'main.years\' | translate}}/{{\'main.months\' | translate}}</label> <hois-value value="curriculum.studyPeriodYears + \'/\' + curriculum.studyPeriodMonths"></hois-value> </md-input-container> <md-input-container ng-if="!curriculum.higher" flex-gt-sm="25"> <label>{{\'curriculum.consecution.label\' | translate}}</label> <hois-value value="curriculum.consecution"></hois-value> </md-input-container> </div> <div>&nbsp;</div> <div layout="column"> <md-input-container flex> <label>{{\'curriculum.studyOutcomes\' | translate}}</label> <textarea ng-if="currentLanguage() === \'en\'" ng-model="curriculum.outcomesEn" class="textarea-readonly" max-rows="10" md-select-on-focus readonly></textarea> <textarea ng-if="currentLanguage() !== \'en\'" ng-model="curriculum.outcomesEt" class="textarea-readonly" max-rows="10" md-select-on-focus readonly></textarea> </md-input-container> <md-input-container flex> <label>{{\'curriculum.admissionRequirements\' | translate}}</label> <textarea ng-if="currentLanguage() === \'en\'" ng-model="curriculum.admissionRequirementsEn" class="textarea-readonly" max-rows="10" md-select-on-focus readonly></textarea> <textarea ng-if="currentLanguage() !== \'en\'" ng-model="curriculum.admissionRequirementsEt" class="textarea-readonly" max-rows="10" md-select-on-focus readonly></textarea> </md-input-container> <md-input-container flex> <label>{{\'curriculum.graduationRequirements\' | translate}}</label> <textarea ng-if="currentLanguage() === \'en\'" ng-model="curriculum.graduationRequirementsEn" class="textarea-readonly" max-rows="10" md-select-on-focus readonly></textarea> <textarea ng-if="currentLanguage() !== \'en\'" ng-model="curriculum.graduationRequirementsEt" class="textarea-readonly" max-rows="10" md-select-on-focus readonly></textarea> </md-input-container> </div> </fieldset> <span ng-if="curriculum.versions.length > 0"> <div>&nbsp;</div> <fieldset> <legend ng-if="curriculum.higher" md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'curriculum.public.curriculumVersionsHigher\' | translate}}</legend> <legend ng-if="!curriculum.higher" md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'curriculum.public.curriculumVersionsVocational\' | translate}}</legend> <md-table-container> <table md-table md-progress="promise" class="secondary-table"> <thead md-head md-order="query.order"> <tr md-row> <th md-column>{{\'curriculum.public.code\' | translate}}</th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="version in curriculum.versions | orderBy: \'code\'"> <td md-cell> <a href="/#/curriculum/{{::curriculum.id}}/version/{{::version.id}}" class="md-primary">{{version.code}}</a> </td> </tr> </tbody> </table> </md-table-container> </fieldset> </span> <div layout="row"> <md-button ng-click="back(\'#/curriculums/\')" class="md-raised">{{\'main.button.back\' | translate}}</md-button> </div> </div>'),a.put("declaration/curriculum.subject.add.dialog.html",'<md-dialog aria-label="{{\'declaration.addingCurriculumSubject\' | translate}}" flex="70" flex-xs="100"> <form name="dialogForm" ng-cloak> <md-toolbar> <div class="md-toolbar-tools"> <h2>{{"declaration.addingCurriculumSubject" | translate}}</h2> <span flex></span> <md-button class="md-icon-button" ng-click="cancel()"> <md-icon md-font-set="material-icons">close</md-icon> </md-button> </div> </md-toolbar> <md-dialog-content> <span flex></span> <div class="ois-form-layout" layout="column" layout-margin ng-cloak> <md-table-container> <table md-table> <thead md-head> <tr md-row> <th md-column>{{\'declaration.subject\' | translate}}</th> <th md-column>{{\'declaration.teacher\' | translate}}</th> <th md-column>{{\'declaration.eap\' | translate}}</th> <th md-column>{{\'declaration.assessment\' | translate}}</th> <th md-column>{{\'declaration.isRequired\' | translate}}</th> <th md-column></th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat-start="module in modules | orderBy: currentLanguageNameField()" ng-class-odd="\'even\'" ng-class-even="\'even\'"> <td md-cell colspan="6">{{currentLanguageNameField(module)}}</td> </tr> <tr ng-repeat="subject in subjects | filter: filterSubjectsByModule(module.id) | filter: filterNotAdded | orderBy: \'subject.\' + currentLanguageNameField()"> <td md-cell>{{currentLanguageNameField(subject.subject)}}({{subject.subject.code}})</td> <td md-cell> <table> <tr ng-repeat="teacher in subject.teachers | orderBy"> <td>{{teacher}}</td> </tr> </table> </td> <td md-cell>{{subject.subject.credits}}</td> <td md-cell>{{subject.subject.assessment}}</td> <td md-cell>{{subject.isOptional ? \'main.no\' : \'main.yes\' | translate}}</td> <td md-cell><a href="" ng-click="addSubject(subject)">{{\'declaration.addSubject\' | translate}}</a></td> </tr> <tr ng-repeat-end> <td colspan="6"></td> </tr> </tbody> </table> </md-table-container> </div> </md-dialog-content> <md-dialog-actions layout="row" layout-align="start center"> <md-button class="md-raised md-primary" ng-click="cancel()">{{"main.button.close" | translate}}</md-button> </md-dialog-actions> </form> </md-dialog>'),a.put("declaration/declaration.edit.html",'<md-nav-bar md-selected-nav-item="currentNavItem" aria-label="{{\'subjectStudyPeriod.label.options\' | translate}}" ng-show="formState.showNavBar"> <md-nav-item md-nav-href="#/declaration/current/view" name="current">{{\'declaration.myDeclaration\' | translate}}</md-nav-item> <md-nav-item md-nav-href="#/declarations/previous?_menu" name="previous">{{\'declaration.previousDeclarations\' | translate}}</md-nav-item> </md-nav-bar> <div class="ois-form-layout-padding form-readonly" layout="column"> <div layout="row" layout-sm="column" layout-xs="column" ng-show="auth.isAdmin()"> <md-input-container flex="25" flex-sm="100" flex-xs="100"> <label>{{\'declaration.student\' | translate}}</label> <hois-value value="declaration.student.fullname"></hois-value> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="25" flex-sm="100" flex-xs="100"> <label>{{\'declaration.studyPeriod\' | translate}}</label> <hois-value value="currentLanguageNameField(declaration.studyPeriod)"></hois-value> </md-input-container> <md-input-container flex="25" flex-sm="100" flex-xs="100" flex-offset-xs="0" flex-offset-sm="0" flex-offset="5"> <label>{{\'declaration.curriculumVersion\' | translate}}</label> <hois-value value="currentLanguageNameField(declaration.student.curriculumVersion)"></hois-value> </md-input-container> <md-input-container flex="25" flex-sm="100" flex-xs="100" flex-offset-xs="0" flex-offset-sm="0" flex-offset="5"> <label>{{\'declaration.course\' | translate}}</label> <hois-value value="declaration.course.toString()"></hois-value> </md-input-container> <md-input-container flex="25" flex-sm="100" flex-xs="100" flex-offset-xs="0" flex-offset-sm="0" flex-offset="5"> <label>{{\'declaration.studentGroup\' | translate}}</label> <hois-value value="currentLanguageNameField(declaration.student.studentGroup)"></hois-value> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="25" flex-sm="100" flex-xs="100"> <label>{{\'declaration.status\' | translate}}</label> <hois-classifier-value ng-model="declaration.status" main-classifier-code="OPINGUKAVA_STAATUS"></hois-classifier-value> </md-input-container> <md-input-container flex="25" flex-sm="100" flex-xs="100" flex-offset-xs="0" flex-offset-sm="0" flex-offset="5"> <label>{{\'declaration.inserted\' | translate}}</label> <hois-value value="declaration.inserted | hoisDateTime"></hois-value> </md-input-container> <md-input-container flex="25" flex-sm="100" flex-xs="100" flex-offset-xs="0" flex-offset-sm="0" flex-offset="5"> <label>{{\'declaration.confirmDate\' | translate}}</label> <hois-value value="declaration.confirmDate | hoisDate"></hois-value> </md-input-container> <md-input-container flex="25" flex-sm="100" flex-xs="100" flex-offset-xs="0" flex-offset-sm="0" flex-offset="5"> <label>{{\'declaration.confirmer\' | translate}}</label> <hois-value value="declaration.confirmer"></hois-value> </md-input-container> </div> <div layout="row" layout-xs="column"> <md-button class="md-raised" ng-click="openAddCurriculumSubject()">{{\'declaration.addCurriculumSubject\' | translate}}</md-button> <md-button class="md-raised" ng-click="openAddExtraCurriculumSubject()">{{\'declaration.addExtraCurriculumSubject\' | translate}}</md-button> </div> <br> <md-table-container> <table md-table> <thead md-head> <tr md-row> <th md-column>{{\'declaration.subject\' | translate}}</th> <th md-column>{{\'declaration.teacher\' | translate}}</th> <th md-column>{{\'declaration.eap_assessment\' | translate}}</th> <th md-column>{{\'declaration.module_isRequired\' | translate}}</th> <th md-column>{{\'declaration.prerequisites\' | translate}}</th> <th md-column>{{\'studyMaterial.label\' | translate}}</th> <th md-column></th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="subject in declaration.subjects | orderBy: \'subject.\' + currentLanguageNameField()" ng-class="{listItem: subject.newlyAdded}" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell> {{currentLanguageNameField(subject.subject)}} ({{subject.subject.code}}) <span ng-show="subject.isDeclaredRepeatedly">&nbsp;*</span> </td> <td md-cell> <table> <tr ng-repeat="teacher in subject.teachers | orderBy"> <td>{{teacher}}</td> </tr> </table> </td> <td md-cell>{{subject.subject.credits}} / {{subject.subject.assessment}}</td> <td md-cell>{{subject.module != null ? currentLanguageNameField(subject.module) : \' - \'}} / {{subject.isOptional ? \'main.no\' : \'main.yes\' | translate}}</td> <td md-cell> <span ng-show="!hasPrerequisites(subject)"> - </span> <span ng-show="hasPrerequisites(subject)"><a href="" ng-click="seePrerequisites(subject)"> {{\'declaration.seePrerequisites\' | translate}}</a> </span> </td> <td md-cell><a ng-href="/#/studyMaterial/higher/{{subject.subjectStudyPeriod}}/view">{{\'studyMaterial.openfolder\' | translate}}</a></td> <td md-cell> <a ng-if="!subject.isAssessed" class="remove nomargin" ng-click="removeSubject(subject)">&times;</a> </td> </tr> </tbody> </table> </md-table-container> <br> <div layout="row"> <md-button ng-show="declaration.canBeSetConfirmed" class="md-raised md-primary" ng-click="confirm()">{{\'declaration.confirm\' | translate}}</md-button> <md-button ng-show="declaration.canBeSetUnconfirmed" class="md-raised md-primary" ng-click="removeConfirmation()">{{\'declaration.removeConfirmation\' | translate}}</md-button> <md-button class="md-raised md-default" ng-click="back(\'#/declarations\')">{{\'main.button.back\' | translate}}</md-button> </div> </div> <style>.listItem.ng-enter {\r\n    transition: all 2.5s ease;\r\n}\r\n.listItem.ng-enter-active {\r\n    background-color: #84ff8e;\r\n}</style>'),
a.put("declaration/declaration.new.html",'<form layout="column" class="ois-form-layout-padding form-readonly" name="declarationNewForm"> <md-input-container flex="45" flex-sm="100" flex-xs="100"> <label>{{\'declaration.studyPeriod\' | translate}}</label> <hois-value value="currentLanguageNameField(studyPeriod)"></hois-value> </md-input-container> <br> <hois-autocomplete ng-model="student" url="/declarations/students" name="student" label="declaration.student" required> </hois-autocomplete> <div layout="row"> <md-button class="md-raised md-primary" type="submit" ng-click="save()">{{\'main.button.add\' | translate}}</md-button> <md-button class="md-raised md-default" ng-click="back(\'#/declarations\')">{{\'main.button.back\' | translate}}</md-button> </div> </form>'),a.put("declaration/declaration.search.html",'<div class="ois-form-layout-padding ois-form-layout" ng-cloak> <div layout="column"> <fieldset> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'main.searchlabel\' | translate}}</legend> <form name="declarationSearchForm" ng-submit="loadData()" novalidate> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="45" flex-sm="100" flex-xs="100"> <label>{{\'declaration.studyPeriod\' | translate}}</label> <hois-select ng-model="criteria.studyPeriod" values="studyPeriods" required></hois-select> </md-input-container> <md-input-container flex="45" flex-sm="100" flex-xs="100" flex-offset-xs="0" flex-offset-sm="0" flex-offset="5"> <label>{{\'declaration.student\' | translate}}</label> <input ng-model="criteria.studentsName" type="text"> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="45" flex-sm="100" flex-xs="100"> <label>{{\'declaration.curriculumVersion\' | translate}}</label> <hois-select ng-model="criteria.curriculumVersion" values="curriculumVersions"></hois-select> </md-input-container> <md-input-container flex="45" flex-sm="100" flex-xs="100" flex-offset-xs="0" flex-offset-sm="0" flex-offset="5"> <label>{{\'declaration.studentGroup\' | translate}}</label> <hois-select ng-model="criteria.studentGroups" multiple values="studentGroups"></hois-select> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="45" flex-sm="100" flex-xs="100"> <label>{{\'declaration.status\' | translate}}</label> <hois-classifier-select ng-model="criteria.status" main-classifier-code="OPINGUKAVA_STAATUS" model-value-attr="code"></hois-classifier-select> </md-input-container> <md-input-container flex="45" flex-sm="100" flex-xs="100" flex-offset-xs="0" flex-offset-sm="0" flex-offset="5"> <md-checkbox ng-model="criteria.repeatingDeclaration" aria-label="{{\'declaration.repeatingDeclaration\' | translate}}"> {{\'declaration.repeatingDeclaration\' | translate}} </md-checkbox> </md-input-container> </div> <div layout="row"> <div layout="column" flex="45"> <label class="common-label">{{\'declaration.inserted\' | translate}}</label> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex-sm="100" flex-xs="100"> <label>{{\'main.from\' | translate}}</label> <md-datepicker ng-model="criteria.insertedFrom"></md-datepicker> </md-input-container> <md-input-container flex-sm="100" flex-xs="100"> <label>{{\'main.thru\' | translate}}</label> <md-datepicker ng-model="criteria.insertedThru"></md-datepicker> </md-input-container> </div> </div> <div layout="column" flex="50" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label class="common-label">{{\'declaration.confirmDate\' | translate}}</label> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex-sm="100" flex-xs="100"> <label>{{\'main.from\' | translate}}</label> <md-datepicker ng-model="criteria.confirmedFrom"></md-datepicker> </md-input-container> <md-input-container flex-sm="100" flex-xs="100"> <label>{{\'main.thru\' | translate}}</label> <md-datepicker ng-model="criteria.confirmedThru"></md-datepicker> </md-input-container> </div> </div> </div> <div layout="row"> <md-button type="submit" class="md-raised md-primary">{{\'main.button.search\' | translate}}</md-button> <md-button class="md-raised" ng-click="clearCriteria()">{{\'main.button.clear\' | translate}}</md-button> <md-button class="md-raised" ng-if="formState.canCreate" ng-href="#/declarations/new">{{\'main.button.create\' | translate}}</md-button> </div> <div layout="row"> <md-button class="md-raised" ng-click="showUncomposed()">{{\'declaration.showUncomposed\' | translate}}</md-button> <md-button class="md-raised" ng-if="canConfirm" ng-click="confirmAll()">{{\'declaration.confirmAll\' | translate}}</md-button> </div> </form> </fieldset> <br> <md-table-container ng-cloak layout-padding> <table md-table md-progress="tabledata.$promise"> <thead md-head md-order="criteria.order" md-on-reorder="loadData"> <tr md-row> <th md-column md-order-by="p.lastname,p.firstname">{{\'declaration.student\' | translate}}</th> <th md-column md-order-by="p.idcode">{{\'declaration.idcode\' | translate}}</th> <th md-column md-order-by="cv.code">{{\'declaration.curriculumVersion\' | translate}}</th> <th md-column md-order-by="sg.code">{{\'declaration.studentGroup\' | translate}}</th> <th md-column md-order-by="d.inserted">{{\'declaration.inserted\' | translate}}</th> <th md-column md-order-by="status.{{currentLanguageNameField()}}">{{\'declaration.status\' | translate}}</th> <th md-column md-order-by="d.confirmDate">{{\'declaration.confirmDate\' | translate}}</th> <th></th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="row in tabledata.content" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell class="one-row"><a ng-href="#/declarations/{{row.id}}/view">{{::row.student.fullname}}</a></td> <td md-cell>{{::row.student.idcode}}</td> <td md-cell>{{currentLanguageNameField(row.student.curriculumVersion)}}</td> <td md-cell>{{currentLanguageNameField(row.student.studentGroup)}}</td> <td md-cell>{{row.inserted | hoisDate}}</td> <td md-cell>{{currentLanguageNameField(row.status)}}</td> <td md-cell>{{row.confirmDate | hoisDate}}</td> <td md-cell> <md-button md-no-ink class="md-primary change-button" ng-href="#/declarations/{{row.id}}/edit" ng-if="row.canBeChanged && isAuthorized(\'ROLE_OIGUS_M_TEEMAOIGUS_OPINGUKAVA\')"> {{\'main.button.change\' | translate}} </md-button> </td> </tr> </tbody> </table> </md-table-container> <md-table-pagination md-limit="criteria.size" md-limit-options="[10, 20, 50]" md-page="criteria.page" md-total="{{tabledata.totalElements}}" md-on-paginate="loadData" md-label="{page: \'{{\'main.page\' | translate}}:\', rowsPerPage: \'{{\'main.rowPerPage\' | translate}}:\', of: \'{{\'main.of\' | translate}}\' }" md-page-select></md-table-pagination> </div> </div>'),a.put("declaration/declaration.student.search.html",'<md-nav-bar md-selected-nav-item="currentNavItem" aria-label="{{\'subjectStudyPeriod.label.options\' | translate}}"> <md-nav-item md-nav-href="#/declaration/current/view" name="current">{{\'declaration.myDeclaration\' | translate}}</md-nav-item> <md-nav-item md-nav-href="#/declarations/previous?_menu" name="previous">{{\'declaration.previousDeclarations\' | translate}}</md-nav-item> </md-nav-bar> <md-table-container ng-cloak layout-padding> <table md-table md-progress="tabledata.$promise"> <thead md-head md-order="criteria.order" md-on-reorder="loadData"> <tr md-row> <th md-column md-order-by="sp.{{currentLanguageNameField()}}">{{\'declaration.studyPeriod\' | translate}}</th> <th md-column md-order-by="d.inserted">{{\'declaration.inserted\' | translate}}</th> <th md-column md-order-by="status.{{currentLanguageNameField()}}">{{\'declaration.status\' | translate}}</th> <th md-column md-order-by="d.confirmDate">{{\'declaration.confirmDate\' | translate}}</th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="row in tabledata.content" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell><a ng-href="#/declarations/{{row.id}}/view">{{currentLanguageNameField(row.studyPeriod)}}</a></td> <td md-cell>{{row.inserted | hoisDate}}</td> <td md-cell>{{currentLanguageNameField(row.status)}}</td> <td md-cell>{{row.confirmDate | hoisDate}}</td> </tr> </tbody> </table> </md-table-container> <md-table-pagination md-limit="criteria.size" md-limit-options="[10, 20, 50]" md-page="criteria.page" md-total="{{tabledata.totalElements}}" md-on-paginate="loadData" md-label="{page: \'{{\'main.page\' | translate}}:\', rowsPerPage: \'{{\'main.rowPerPage\' | translate}}:\', of: \'{{\'main.of\' | translate}}\' }" md-page-select></md-table-pagination>'),a.put("declaration/declaration.subject.prerequisites.html",'<md-dialog aria-label="grade add dialog" flex="20" flex-xs="100"> <form name="dialogForm" ng-cloak> <md-toolbar> <div class="md-toolbar-tools"> <h2>{{"declaration.prerequisites" | translate}}</h2> <span flex></span> <md-button class="md-icon-button" ng-click="cancel()"> <md-icon md-font-set="material-icons">close</md-icon> </md-button> </div> </md-toolbar> <md-dialog-content> <span flex></span> <div class="ois-form-layout" layout="column" layout-margin ng-cloak> <legend md-colors="{color: \'primary-800\'}" class="md-title-small" ng-show="subject.mandatoryPrerequisiteSubjects.length > 0"> {{"declaration.mandatoryPrerequisiteSubjects" | translate}} </legend> <table md-table class="secondary-table"> <tbody md-body> <tr md-row ng-repeat="s in subject.mandatoryPrerequisiteSubjects" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <th md-cell>{{currentLanguageNameField(s)}}</th> </tr> </tbody> </table> <legend md-colors="{color: \'primary-800\'}" class="md-title-small" ng-show="subject.recommendedPrerequisiteSubjects.length > 0"> {{"declaration.recommendedPrerequisiteSubjects" | translate}} </legend> <table md-table class="secondary-table"> <tbody md-body> <tr md-row ng-repeat="s in subject.recommendedPrerequisiteSubjects" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <th md-cell>{{currentLanguageNameField(s)}}</th> </tr> </tbody> </table> </div> </md-dialog-content> <md-dialog-actions layout="row" layout-align="start center"> <md-button class="md-raised" ng-click="cancel()">{{"main.button.close" | translate}}</md-button> </md-dialog-actions> </form> </md-dialog>'),a.put("declaration/declaration.view.html",'<md-nav-bar md-selected-nav-item="currentNavItem" aria-label="{{\'subjectStudyPeriod.label.options\' | translate}}" ng-show="formState.showNavBar"> <md-nav-item md-nav-href="#/declaration/current/view" name="current">{{\'declaration.myDeclaration\' | translate}}</md-nav-item> <md-nav-item md-nav-href="#/declarations/previous?_menu" name="previous">{{\'declaration.previousDeclarations\' | translate}}</md-nav-item> </md-nav-bar> <div class="ois-form-layout-padding form-readonly" layout="column" ng-show="formState.declaration"> <div layout="row" layout-sm="column" layout-xs="column" ng-show="auth.isAdmin()"> <md-input-container flex="25" flex-sm="100" flex-xs="100"> <label>{{\'declaration.student\' | translate}}</label> <hois-value value="declaration.student.fullname"></hois-value> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="25" flex-sm="100" flex-xs="100"> <label>{{\'declaration.studyPeriod\' | translate}}</label> <hois-value value="currentLanguageNameField(declaration.studyPeriod)"></hois-value> </md-input-container> <md-input-container flex="25" flex-sm="100" flex-xs="100" flex-offset-xs="0" flex-offset-sm="0" flex-offset="5"> <label>{{\'declaration.curriculumVersion\' | translate}}</label> <hois-value value="currentLanguageNameField(declaration.student.curriculumVersion)"></hois-value> </md-input-container> <md-input-container flex="25" flex-sm="100" flex-xs="100" flex-offset-xs="0" flex-offset-sm="0" flex-offset="5"> <label>{{\'declaration.course\' | translate}}</label> <hois-value value="declaration.course.toString()"></hois-value> </md-input-container> <md-input-container flex="25" flex-sm="100" flex-xs="100" flex-offset-xs="0" flex-offset-sm="0" flex-offset="5"> <label>{{\'declaration.studentGroup\' | translate}}</label> <hois-value value="currentLanguageNameField(declaration.student.studentGroup)"></hois-value> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="25" flex-sm="100" flex-xs="100"> <label>{{\'declaration.status\' | translate}}</label> <hois-classifier-value ng-model="declaration.status" main-classifier-code="OPINGUKAVA_STAATUS"></hois-classifier-value> </md-input-container> <md-input-container flex="25" flex-sm="100" flex-xs="100" flex-offset-xs="0" flex-offset-sm="0" flex-offset="5"> <label>{{\'declaration.inserted\' | translate}}</label> <hois-value value="declaration.inserted | hoisDateTime"></hois-value> </md-input-container> <md-input-container flex="25" flex-sm="100" flex-xs="100" flex-offset-xs="0" flex-offset-sm="0" flex-offset="5"> <label>{{\'declaration.confirmDate\' | translate}}</label> <hois-value value="declaration.confirmDate | hoisDate"></hois-value> </md-input-container> <md-input-container flex="25" flex-sm="100" flex-xs="100" flex-offset-xs="0" flex-offset-sm="0" flex-offset="5"> <label>{{\'declaration.confirmer\' | translate}}</label> <hois-value value="declaration.confirmer"></hois-value> </md-input-container> </div> <br> <md-table-container> <table md-table> <thead md-head> <tr md-row> <th md-column>{{\'declaration.subject\' | translate}}</th> <th md-column>{{\'declaration.teacher\' | translate}}</th> <th md-column>{{\'declaration.eap_assessment\' | translate}}</th> <th md-column>{{\'declaration.module_isRequired\' | translate}}</th> <th md-column>{{\'declaration.prerequisites\' | translate}}</th> <th md-column>{{\'studyMaterial.label\' | translate}}</th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="subject in declaration.subjects | orderBy: \'subject.\' + currentLanguageNameField()" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell> {{currentLanguageNameField(subject.subject)}} ({{subject.subject.code}}) <span ng-show="subject.isDeclaredRepeatedly">&nbsp;*</span> </td> <td md-cell> <table> <tr ng-repeat="teacher in subject.teachers | orderBy"> <td>{{teacher}}</td> </tr> </table> </td> <td md-cell>{{subject.subject.credits}} / {{subject.subject.assessment}}</td> <td md-cell>{{subject.module != null ? currentLanguageNameField(subject.module) : \' - \'}} / {{subject.isOptional ? \'main.no\' : \'main.yes\' | translate}}</td> <td md-cell> <span ng-show="!hasPrerequisites(subject)"> - </span> <span ng-show="hasPrerequisites(subject)"><a href="" ng-click="seePrerequisites(subject)"> {{\'declaration.seePrerequisites\' | translate}}</a> </span> </td> <td md-cell><a ng-href="/#/studyMaterial/higher/{{subject.subjectStudyPeriod}}/view">{{\'studyMaterial.openfolder\' | translate}}</a></td> </tr> </tbody> </table> </md-table-container> <br> <div layout="row"> <md-button ng-if="isAuthorized(\'ROLE_OIGUS_M_TEEMAOIGUS_OPINGUKAVA\')" ng-show="declaration.canBeChanged" class="md-raised md-primary" ng-href="#/declarations/{{declaration.id}}/edit?_noback">{{\'main.button.change\' | translate}}</md-button> <md-button ng-if="isAuthorized(\'ROLE_OIGUS_M_TEEMAOIGUS_OPINGUKAVA\')" ng-show="declaration.canBeSetConfirmed" class="md-raised" ng-click="confirm()">{{\'declaration.confirm\' | translate}}</md-button> <md-button ng-if="isAuthorized(\'ROLE_OIGUS_M_TEEMAOIGUS_OPINGUKAVA\')" ng-show="declaration.canBeSetUnconfirmed" class="md-raised" ng-click="removeConfirmation()">{{\'declaration.removeConfirmation\' | translate}}</md-button> <md-button class="md-raised md-default" ng-click="back(\'#/declarations\')">{{\'main.button.back\' | translate}}</md-button> </div> </div> <div layout-padding> <div ng-show="formState.noDeclaration && formState.isDeclarationPeriod"> <md-whiteframe class="md-whiteframe-1dp attention-whiteframe" flex="100" layout layout-align="left center"> <div md-colors="{color: \'warn\'}"> <md-icon md-colors="{color: \'warn\'}" md-font-set="material-icons">info_outline</md-icon> <span>{{\'declaration.noCurrentDeclaration\' | translate}}</span> </div> </md-whiteframe> <div ng-if="isAuthorized(\'ROLE_OIGUS_M_TEEMAOIGUS_OPINGUKAVA\')" layout="row"> <md-button ng-show="formState.canCreateDeclaration" class="md-raised" ng-click="addDeclaration()">{{\'main.button.add\' | translate}}</md-button> </div> </div> <div ng-show="formState.noDeclaration && !formState.isDeclarationPeriod && !formState.declarationPeriodStart && !formState.declarationPeriodEnd"> <md-whiteframe class="md-whiteframe-1dp attention-whiteframe" flex="100" layout layout-align="left center"> <div md-colors="{color: \'accent\'}"> <md-icon md-colors="{color: \'accent\'}" md-font-set="material-icons">info_outline</md-icon> <span>{{\'declaration.notDeclarationPeriod\' | translate}}</span> </div> </md-whiteframe> </div> <div ng-show="formState.noDeclaration && !formState.isDeclarationPeriod && formState.declarationPeriodEnd"> <md-whiteframe class="md-whiteframe-1dp attention-whiteframe" flex="100" layout layout-align="left center"> <div md-colors="{color: \'accent\'}"> <md-icon md-colors="{color: \'accent\'}" md-font-set="material-icons">info_outline</md-icon> <span>{{\'declaration.declarationPeriodHasEnded\' | translate}} {{formState.declarationPeriodEnd | hoisDate}}</span> </div> </md-whiteframe> </div> <div ng-show="formState.noDeclaration && !formState.isDeclarationPeriod && formState.declarationPeriodStart"> <md-whiteframe class="md-whiteframe-1dp attention-whiteframe" flex="100" layout layout-align="left center"> <div md-colors="{color: \'accent\'}"> <md-icon md-colors="{color: \'accent\'}" md-font-set="material-icons">info_outline</md-icon> <span>{{\'declaration.declarationPeriodHasNotStarted\' | translate}} {{formState.declarationPeriodStart | hoisDate}}</span> </div> </md-whiteframe> </div> </div>'),a.put("declaration/extracurriculum.subject.add.dialog.html",'<md-dialog aria-label="{{\'declaration.addingExtraCurriculumSubject\' | translate}}" flex="30" flex-xs="100"> <form name="dialogForm" ng-cloak> <md-toolbar> <div class="md-toolbar-tools"> <h2>{{"declaration.addingExtraCurriculumSubject" | translate}}</h2> <span flex></span> <md-button class="md-icon-button" ng-click="cancel()"> <md-icon md-font-set="material-icons">close</md-icon> </md-button> </div> </md-toolbar> <md-dialog-content> <span flex></span> <div class="ois-form-layout" layout="column" layout-margin ng-cloak> <md-select ng-model="subject" required aria-label="{{\'declaration.addingExtraCurriculumSubject\' | translate}}"> <md-option ng-value="subject" ng-repeat="subject in subjects |\r\n          orderBy: \'subject.\' + currentLanguageNameField()"> {{currentLanguageNameField(subject.subject)}}({{subject.subject.code}}) - {{subject.teachers.join(\', \')}} </md-option> </md-select> </div> </md-dialog-content> <md-dialog-actions layout="row" layout-align="start center"> <md-button class="md-raised md-primary" ng-click="addSubject()">{{"main.button.add" | translate}}</md-button> <md-button class="md-raised" ng-click="cancel()">{{"main.button.close" | translate}}</md-button> </md-dialog-actions> </form> </md-dialog>'),a.put("declaration/uncomposed.declarations.html",'<md-dialog aria-label="{{\'declaration.uncomposedDeclarations\' | translate}}" flex="50" flex-sm="70" flex-xs="100"> <form name="dialogForm" ng-cloak> <md-toolbar> <div class="md-toolbar-tools"> <h2>{{"declaration.uncomposedDeclarations" | translate}}</h2> <span flex></span> <md-button class="md-icon-button" ng-click="cancel()"> <md-icon md-font-set="material-icons">close</md-icon> </md-button> </div> </md-toolbar> <md-dialog-content> <div class="ois-form-layout"> <md-table-container flex> <table md-table md-progress="tabledata.$promise"> <thead md-head md-order="criteria.order" md-on-reorder="loadData"> <tr md-row> <th md-column md-order-by="p.lastname,p.firstname">{{\'declaration.student\' | translate}}</th> <th md-column md-order-by="p.idcode">{{\'declaration.idcode\' | translate}}</th> <th md-column md-order-by="cv.code">{{\'declaration.curriculumVersion\' | translate}}</th> <th md-column md-order-by="sg.code">{{\'declaration.studentGroup\' | translate}}</th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="row in tabledata.content" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell class="one-row">{{::row.fullname}}</td> <td md-cell>{{::row.idcode}}</td> <td md-cell>{{currentLanguageNameField(row.curriculumVersion)}}</td> <td md-cell>{{currentLanguageNameField(row.studentGroup)}}</td> </tr> </tbody> </table> </md-table-container> <md-table-pagination md-limit="criteria.size" md-limit-options="[10, 20, 50]" md-page="criteria.page" md-total="{{tabledata.totalElements}}" md-on-paginate="loadData" md-label="{page: \'{{\'main.page\' | translate}}:\', rowsPerPage: \'{{\'main.rowPerPage\' | translate}}:\', of: \'{{\'main.of\' | translate}}\' }" md-page-select></md-table-pagination> </div> </md-dialog-content> <md-dialog-actions layout="row" layout-align="start center"> <md-button class="md-raised" ng-click="cancel()">{{"main.button.close" | translate}}</md-button> </md-dialog-actions> </form> </md-dialog>'),a.put("directive/coordinator.edit.html",'<div layout="column" layout-padding> <div> <form name="directiveCoordinatorForm"> <md-input-container class="md-block"> <label>{{\'directive.coordinator.name\' | translate}}</label> <input ng-model="record.name" name="name" type="text" required md-maxlength="100"> </md-input-container> <md-input-container class="md-block"> <label class="textInput">{{\'directive.coordinator.idcode\' | translate}}</label> <input ng-model="record.idcode" name="idcode" type="text" required md-minlength="11" md-maxlength="11"> </md-input-container> <div layout="column"> <md-checkbox ng-model="record.isDirective" aria-label="{{\'directive.coordinator.isDirective\' | translate}}"> {{\'directive.coordinator.isDirective\' | translate}} </md-checkbox> <md-checkbox ng-model="record.isCertificate" aria-label="{{\'directive.coordinator.isCertificate\' | translate}}"> {{\'directive.coordinator.isCertificate\' | translate}} </md-checkbox> <md-checkbox ng-model="record.isCertificateDefault" aria-label="{{\'directive.coordinator.isCertificateDefault\' | translate}}"> {{\'directive.coordinator.isCertificateDefault\' | translate}} </md-checkbox> </div> </form> <md-button ng-click="update()" class="md-raised md-primary">{{\'main.button.save\' | translate}}</md-button> <md-button ng-click="delete()" ng-if="record.id" class="md-raised">{{\'main.button.delete\' | translate}}</md-button> <md-button ng-href="#/directives/coordinators" class="md-raised">{{\'main.button.back\' | translate}}</md-button> </div> </div>'),a.put("directive/coordinator.search.html",'<div layout-padding> <div flex> <md-table-container> <table md-table md-progress="tabledata.$promise"> <thead md-head md-order="criteria.order" md-on-reorder="loadData"> <tr md-row> <th md-column md-order-by="name">{{\'directive.coordinator.name\' | translate}}</th> <th md-column md-order-by="idcode">{{\'directive.coordinator.idcode\' | translate}}</th> <th md-column md-order-by="isDirective">{{\'directive.coordinator.directive\' | translate}}</th> <th md-column md-order-by="isCertificate">{{\'directive.coordinator.certificate\' | translate}}</th> <th md-column md-order-by="isCertificateDefault">{{\'directive.coordinator.certificateDefault\' | translate}}</th> <th md-column></th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="row in tabledata.content" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell>{{::row.name}}</td> <td md-cell>{{::row.idcode}}</td> <td md-cell>{{::row.isDirective ? \'main.yes\' : \'main.no\' | translate}}</td> <td md-cell>{{::row.isCertificate ? \'main.yes\' : \'main.no\' | translate}}</td> <td md-cell>{{::row.isCertificateDefault ? \'main.yes\' : \'main.no\' | translate}}</td> <td md-cell> <md-button md-no-ink class="md-primary change-button" ng-if="isAuthorized(\'ROLE_OIGUS_M_TEEMAOIGUS_DOKALLKIRI\')" ng-href="#/directives/coordinators/{{::row.id}}/edit">{{\'main.button.change\' | translate}}</md-button> </td> </tr> </tbody> </table> </md-table-container> <md-table-pagination md-limit="criteria.size" md-limit-options="[10, 20, 50]" md-page="criteria.page" md-total="{{tabledata.totalElements}}" md-on-paginate="loadData" md-label="{page: \'{{\'main.page\' | translate}}:\', rowsPerPage: \'{{\'main.rowPerPage\' | translate}}:\', of: \'{{\'main.of\' | translate}}\'}" md-page-select></md-table-pagination> </div> <div layout="row"> <md-button class="md-raised" ng-if="isAuthorized(\'ROLE_OIGUS_M_TEEMAOIGUS_DOKALLKIRI\')" ng-href="#/directives/coordinators/new">{{\'main.button.create\' | translate}}</md-button> </div> </div>'),a.put("directive/directive.edit.html",'<div class="ois-form-layout-padding ois-form-layout" ng-cloak> <div flex> <form name="directiveForm" class="nomargin"> <div layout="column"> <md-input-container class="md-block"> <label class="textInput">{{\'directive.type\' | translate}}</label> <hois-classifier-select ng-model="record.type" name="type" ng-change="directiveTypeChanged()" ng-disabled="formState.state !== \'CHOOSETYPE\'" model-value-attr="code" main-classifier-code="KASKKIRI" filter-values="formState.excludedTypes" required autofocus></hois-classifier-select> </md-input-container> </div> <div flex ng-if="record.type === \'KASKKIRI_STIPTOET\' || record.type === \'KASKKIRI_STIPTOETL\'"> <md-input-container class="md-block"> <label class="textInput">{{\'directive.scholarshipType\' | translate}}</label> <hois-classifier-select ng-model="record.scholarshipType" name="scholarshipType" ng-change="scholarshipTypeChanged()" ng-disabled="formState.state !== \'CHOOSETYPE\'" model-value-attr="code" main-classifier-code="STIPTOETUS" criteria="{higher: formState.school.higher ? true : undefined, vocational: formState.school.vocational ? true : undefined}" required></hois-classifier-select> </md-input-container> </div> <div flex ng-if="formState.state === \'CHOOSETYPE\' && formState.students && record.type !== \'KASKKIRI_IMMAT\' && record.type !== \'KASKKIRI_IMMATV\'"> <div>&nbsp;</div> <md-table-container> <table md-table md-row-select multiple ng-model="formState.selectedStudents"> <thead md-head> <tr md-row> <th md-column>{{\'directive.student.fullname\' | translate}}</th> <th md-column>{{\'directive.student.idcode\' | translate}}</th> <th md-column ng-show="record.type === \'KASKKIRI_LOPET\'">{{\'directive.student.curriculum\' | translate}}</th> <th md-column ng-show="record.type === \'KASKKIRI_LOPET\'">{{\'directive.student.studentGroup\' | translate}}</th> </tr> </thead> <tbody md-body> <tr md-row md-select="row" md-select-id="id" ng-repeat="row in formState.students" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell> <md-button md-no-ink class="md-primary change-button" ng-href="#/students/{{::row.id}}/main">{{::row.fullname}}</md-button> </td> <td md-cell>{{::row.idcode}}</td> <td md-cell ng-show="record.type === \'KASKKIRI_LOPET\'">{{currentLanguageNameField(row.curriculumVersion)}}</td> <td md-cell ng-show="record.type === \'KASKKIRI_LOPET\'">{{::row.studentGroup}}</td> </tr> </tbody> </table> </md-table-container> </div> <div layout="row" ng-if="formState.state === \'CHOOSETYPE\' && record.type === \'KASKKIRI_IMMATV\'"> <md-input-container flex="45" flex-sm="100" flex-xs="100"> <label class="textInput">{{\'directive.student.curriculumVersion\' | translate}}</label> <hois-select ng-model="formState.curriculumVersion" multiple values="formState.saisCurriculumVersions"></hois-select> </md-input-container> <md-input-container flex="50" flex-sm="100" flex-xs="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label class="textInput">{{\'directive.student.studyLevel\' | translate}}</label> <hois-classifier-select ng-model="formState.studyLevel" multiple main-classifier-code="OPPEASTE" model-value-attr="code"></hois-classifier-select> </md-input-container> </div> <div layout="row" ng-if="formState.state === \'CHOOSETYPE\'"> <md-button class="md-raised" ng-click="addDirective()" ng-if="formState.state === \'CHOOSETYPE\' && formState.students">{{\'directive.addToDirective\' | translate}}</md-button> <md-button ng-click="back(\'#/directives\')" class="md-raised">{{\'main.button.back\' | translate}}</md-button> </div> <div flex-xs="0" flex-gt-xs="0" flex-gt-sm="50"></div> <div flex ng-if="formState.state === \'EDIT\'"> <div class="form-readonly top-margin" ng-if="record.type === \'KASKKIRI_TYHIST\'"> <md-input-container class="md-block"> <label class="textInput">{{\'directive.canceledDirective\' | translate}}</label> <hois-value value="formState.canceledDirective.nameEt" href-value="\'#/directives/\' + formState.canceledDirective.id + \'/view\'"></hois-value> </md-input-container> </div> <md-input-container class="md-block"> <label class="textInput">{{\'directive.headline\' | translate}}</label> <input type="text" ng-model="record.headline" name="headline" required md-maxlength="500"> </md-input-container> <div class="form-readonly top-margin"> <md-input-container class="md-block"> <label class="textInput">{{\'directive.inserted\' | translate}}</label> <hois-value value="record.inserted | hoisDate"></hois-value> </md-input-container> </div> <div class="form-readonly top-margin"> <md-input-container class="md-block"> <label class="textInput">{{\'directive.insertedBy\' | translate}}</label> <hois-value value="record.insertedBy"></hois-value> </md-input-container> </div> <md-input-container class="md-block"> <label class="textInput">{{\'directive.addInfo\' | translate}}</label> <textarea ng-model="record.addInfo" md-maxlength="4000" max-rows="10"></textarea> </md-input-container> <md-input-container class="md-block"> <label class="textInput">{{\'directive.directiveCoordinator\' | translate}}&nbsp;*</label> <hois-select ng-model="record.directiveCoordinator" name="directiveCoordinator" type="directivecoordinator" criteria="{isDirective: true}"></hois-select> </md-input-container> <md-input-container class="md-block" ng-if="record.type === \'KASKKIRI_TYHIST\'"> <label class="textInput">{{\'directive.cancelType\' | translate}}</label> <hois-classifier-select ng-model="record.cancelType" ng-change="cancelTypeChanged()" filter-values="[formState.changedStudents.length > 0 ? \'KASKKIRI_TYHISTAMISE_VIIS_T\' : undefined]" ng-required="record.type === \'KASKKIRI_TYHIST\'" main-classifier-code="KASKKIRI_TYHISTAMISE_VIIS" model-value-attr="code"></hois-classifier-select> </md-input-container> <div>&nbsp;</div> <md-table-container> <fieldset> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'directive.studentList\' | translate}}</legend> <md-button class="md-raised" ng-click="addStudents()" ng-if="record.type !== \'KASKKIRI_TYHIST\' && record.type !== \'KASKKIRI_IMMATV\'">{{\'directive.addStudents\' | translate}}</md-button> <div ng-include="formState.templateUrl" flex></div> </fieldset> </md-table-container> <div layout="row"> <md-button class="md-raised md-primary" ng-click="update()">{{\'main.button.save\' | translate}}</md-button> <md-button class="md-raised" ng-if="record.id" ng-click="sendToConfirm(true)">{{\'directive.sendToConfirm\' | translate}}</md-button> <md-button class="md-raised" ng-if="record.id" ng-click="sendToConfirm(false)">{{\'directive.sendToConfirmWithoutEkis\' | translate}}</md-button> <md-button class="md-raised" ng-if="record.id" ng-click="delete()">{{\'main.button.delete\' | translate}}</md-button> <md-button ng-click="back(\'#/directives\', directiveForm)" class="md-raised">{{\'main.button.back\' | translate}}</md-button> </div> </div> </form> </div> </div>'),a.put("directive/directive.type.akad.edit.html",'<md-table-container> <table md-table class="secondary-table"> <thead md-head> <tr md-row> <th md-column>{{\'directive.student.fullname\' | translate}}</th> <th md-column>{{\'directive.student.idcode\' | translate}}</th> <th md-column class="required">{{\'directive.student.isPeriod\' | translate}}</th> <th md-column class="required">{{\'directive.student.akadStartDate\' | translate}}</th> <th md-column class="required">{{\'directive.student.akadEndDate\' | translate}}</th> <th md-column class="required">{{\'directive.student.reason\' | translate}}</th> <th md-column>{{\'directive.student.applicationAkadStartDate\' | translate}}</th> <th md-column>{{\'directive.student.applicationAkadEndDate\' | translate}}</th> <th></th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="row in record.students" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell>{{::row.fullname}}</td> <td md-cell>{{::row.idcode}}</td> <td md-cell> <md-radio-group name="isPeriod" ng-model="row.isPeriod" layout="row"> <md-radio-button ng-value="true" aria-label="period">{{ \'main.period\' | translate }}</md-radio-button> <md-radio-button ng-value="false" aria-label="date">{{ \'main.date\' | translate }}</md-radio-button> </md-radio-group> </td> <td md-cell> <hois-select ng-if="row.isPeriod" ng-model="row.studyPeriodStart" name="students[{{$index}}].studyPeriodStart" values="formState.studyPeriods" aria-label="{{\'directive.student.akadStartDate\' | translate}}"></hois-select> <md-datepicker ng-if="!row.isPeriod" ng-model="row.startDate" name="students[{{$index}}].startDate"></md-datepicker> <div ng-if="row.isPeriod" class="invalid" ng-messages="directiveForm[\'students[\'+$index+\'].studyPeriodStart\'].$error"> <p ng-message="required">{{\'main.required\' | translate}}</p> </div> <div ng-if="!row.isPeriod" class="invalid" ng-messages="directiveForm[\'students[\'+$index+\'].startDate\'].$error"> <p ng-message="required">{{\'main.required\' | translate}}</p> </div> </td> <td md-cell> <hois-select ng-if="row.isPeriod" ng-model="row.studyPeriodEnd" name="students[{{$index}}].studyPeriodEnd" values="formState.studyPeriods" aria-label="{{\'directive.student.akadEndDate\' | translate}}"></hois-select> <md-datepicker ng-if="!row.isPeriod" ng-model="row.endDate" name="students[{{$index}}].endDate"></md-datepicker> <div ng-if="row.isPeriod" class="invalid" ng-messages="directiveForm[\'students[\'+$index+\'].studyPeriodEnd\'].$error"> <p ng-message="required">{{\'main.required\' | translate}}</p> </div> <div ng-if="!row.isPeriod" class="invalid" ng-messages="directiveForm[\'students[\'+$index+\'].endDate\'].$error"> <p ng-message="required">{{\'main.required\' | translate}}</p> </div> </td> <td md-cell> <hois-classifier-select ng-model="row.reason" name="students[{{$index}}].reason" criteria="{vocational: row.oldCurriculumVersion.isVocational ? true : undefined, higher: !row.oldCurriculumVersion.isVocational ? true : undefined}" model-value-attr="code" main-classifier-code="AKADPUHKUS_POHJUS" aria-label="{{\'directive.student.reason\' | translate}}"></hois-classifier-select> <div class="invalid" ng-messages="directiveForm[\'students[\'+$index+\'].reason\'].$error"> <p ng-message="required">{{\'main.required\' | translate}}</p> </div> </td> <td md-cell> <div ng-if="row.applicationIsPeriod">{{currentLanguageNameField(row.applicationStudyPeriodStart)}}</div> <hois-value ng-if="!row.applicationIsPeriod" value="row.applicationStartDate | hoisDate"></hois-value> </td> <td md-cell> <div ng-if="row.applicationIsPeriod">{{currentLanguageNameField(row.applicationStudyPeriodEnd)}}</div> <hois-value ng-if="!row.applicationIsPeriod" value="row.applicationEndDate | hoisDate"></hois-value> </td> <td md-cell> <a ng-click="deleteStudent(row)" class="remove">&times;</a> </td> </tr> </tbody> </table> </md-table-container>'),
a.put("directive/directive.type.akad.view.html",'<md-table-container> <table md-table md-row-select="formState.cancelSelect" multiple ng-model="formState.selectedStudents" class="secondary-table"> <thead md-head> <tr md-row> <th md-column>{{\'directive.student.fullname\' | translate}}</th> <th md-column>{{\'directive.student.idcode\' | translate}}</th> <th md-column>{{\'directive.student.isPeriod\' | translate}}</th> <th md-column>{{\'directive.student.akadStartDate\' | translate}}</th> <th md-column>{{\'directive.student.akadEndDate\' | translate}}</th> <th md-column>{{\'directive.student.reason\' | translate}}</th> <th md-column>{{\'directive.student.applicationAkadStartDate\' | translate}}</th> <th md-column>{{\'directive.student.applicationAkadEndDate\' | translate}}</th> </tr> </thead> <tbody md-body> <tr md-row ng-disabled="!row.selectable" md-select="row" md-select-id="student" md-auto-select ng-repeat="row in record.students" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell> <a class="md-primary" ng-href="#/students/{{::row.student}}/main">{{::row.fullname}}</a> </td> <td md-cell>{{::row.idcode}}</td> <td md-cell>{{row.isPeriod ? \'main.period\' : \'main.date\' | translate}}</td> <td md-cell> <div ng-if="row.isPeriod">{{currentLanguageNameField(row.newStudyPeriodStart)}}</div> <hois-value ng-if="!row.isPeriod" value="row.startDate | hoisDate"></hois-value> </td> <td md-cell> <div ng-if="row.isPeriod">{{currentLanguageNameField(row.newStudyPeriodEnd)}}</div> <hois-value ng-if="!row.isPeriod" value="row.endDate | hoisDate"></hois-value> </td> <td md-cell> <hois-classifier-value ng-model="row.reason" main-classifier-code="AKADPUHKUS_POHJUS"></hois-classifier-value> </td> <td md-cell> <div ng-if="row.applicationIsPeriod">{{currentLanguageNameField(row.applicationStudyPeriodStart)}}</div> <hois-value ng-if="!row.applicationIsPeriod" value="row.applicationStartDate | hoisDate"></hois-value> </td> <td md-cell> <div ng-if="row.applicationIsPeriod">{{currentLanguageNameField(row.applicationStudyPeriodEnd)}}</div> <hois-value ng-if="!row.applicationIsPeriod" value="row.applicationEndDate | hoisDate"></hois-value> </td> </tr> </tbody> </table> </md-table-container>'),a.put("directive/directive.type.akadk.edit.html",'<md-table-container> <table md-table class="secondary-table"> <thead md-head> <tr md-row> <th md-column>{{\'directive.student.fullname\' | translate}}</th> <th md-column>{{\'directive.student.idcode\' | translate}}</th> <th md-column class="required">{{\'directive.student.akadCancelDate\' | translate}}</th> <th></th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="row in record.students" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell>{{::row.fullname}}</td> <td md-cell>{{::row.idcode}}</td> <td md-cell> <md-datepicker ng-model="row.startDate" name="students[{{$index}}].startDate"></md-datepicker> <div class="invalid" ng-show="directiveForm[\'students[\'+$index+\'].startDate\'].$error.required"> {{\'main.required\' | translate}} </div> <div class="invalid" ng-show="directiveForm[\'students[\'+$index+\'].startDate\'].$error.serverside"> <span ng-repeat="err in directiveForm[\'students[\'+$index+\'].startDate\'].$serverError">{{err.code | translate}}</span> <br ng-if="!$last"> </div> </td> <td md-cell> <a ng-click="deleteStudent(row)" md-no-ink class="remove">&times;</a> </td> </tr> </tbody> </table> </md-table-container>'),a.put("directive/directive.type.akadk.view.html",'<md-table-container> <table md-table md-row-select="formState.cancelSelect" multiple ng-model="formState.selectedStudents" class="secondary-table"> <thead md-head> <tr md-row> <th md-column>{{\'directive.student.fullname\' | translate}}</th> <th md-column>{{\'directive.student.idcode\' | translate}}</th> <th md-column>{{\'directive.student.akadCancelDate\' | translate}}</th> </tr> </thead> <tbody md-body> <tr md-row ng-disabled="!row.selectable" md-select="row" md-select-id="student" md-auto-select ng-repeat="row in record.students" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell> <a class="md-primary" ng-href="#/students/{{::row.student}}/main">{{::row.fullname}}</a> </td> <td md-cell>{{::row.idcode}}</td> <td md-cell> <hois-value value="row.startDate | hoisDate"></hois-value> </td> </tr> </tbody> </table> </md-table-container>'),a.put("directive/directive.type.eksmat.edit.html",'<md-table-container> <table md-table class="secondary-table"> <thead md-head> <tr md-row> <th md-column>{{\'directive.student.fullname\' | translate}}</th> <th md-column>{{\'directive.student.idcode\' | translate}}</th> <th md-column class="required">{{\'directive.student.reason\' | translate}}</th> <th></th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="row in record.students" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell>{{::row.fullname}}</td> <td md-cell>{{::row.idcode}}</td> <td md-cell> <hois-classifier-select ng-model="row.reason" name="students[{{$index}}].reason" model-value-attr="code" main-classifier-code="EKSMAT_POHJUS" aria-label="{{\'directive.student.reason\' | translate}}"></hois-classifier-select> <div class="invalid" ng-show="directiveForm[\'students[\'+$index+\'].reason\'].$error.required"> {{\'main.required\' | translate}} </div> </td> <td md-cell> <a ng-click="deleteStudent(row)" md-no-ink class="remove">&times;</a> </td> </tr> </tbody> </table> </md-table-container>'),a.put("directive/directive.type.eksmat.view.html",'<md-table-container> <table md-table md-row-select="formState.cancelSelect" multiple ng-model="formState.selectedStudents" class="secondary-table"> <thead md-head> <tr md-row> <th md-column>{{\'directive.student.fullname\' | translate}}</th> <th md-column>{{\'directive.student.idcode\' | translate}}</th> <th md-column>{{\'directive.student.reason\' | translate}}</th> </tr> </thead> <tbody md-body> <tr md-row ng-disabled="!row.selectable" md-select="row" md-select-id="student" md-auto-select ng-repeat="row in record.students" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell> <a class="md-primary" ng-href="#/students/{{::row.student}}/main">{{::row.fullname}}</a> </td> <td md-cell>{{::row.idcode}}</td> <td md-cell> <hois-classifier-value ng-model="row.reason" main-classifier-code="EKSMAT_POHJUS"></hois-classifier-value> </td> </tr> </tbody> </table> </md-table-container>'),a.put("directive/directive.type.ennist.edit.html",'<md-table-container> <table md-table class="secondary-table"> <thead md-head> <tr md-row> <th md-column>{{\'directive.student.fullname\' | translate}}</th> <th md-column>{{\'directive.student.idcode\' | translate}}</th> <th md-column>{{\'directive.student.curriculumVersion\' | translate}}</th> <th md-column class="required">{{\'directive.student.studentGroup\' | translate}}</th> <th md-column ng-if="formState.school.higher">{{\'directive.student.studyLoad\' | translate}}</th> <th md-column>{{\'directive.student.studyForm\' | translate}}</th> <th md-column class="required">{{\'directive.student.nominalStudyEnd\' | translate}}</th> <th md-column>{{\'directive.student.fin\' | translate}}</th> <th md-column>{{\'directive.student.finSpecific\' | translate}}</th> <th md-column>{{\'directive.student.language\' | translate}}</th> <th></th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="row in record.students" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell>{{::row.fullname}}</td> <td md-cell>{{::row.idcode}}</td> <td md-cell>{{currentLanguageNameField(row.oldCurriculumVersion)}}</td> <td md-cell> <hois-select ng-model="row.studentGroup" name="students[{{$index}}].studentGroup" values="formState.studentGroupMap[row.oldCurriculumVersion.id]" aria-label="{{\'directive.student.studentGroup\' | translate}}"></hois-select> <div class="invalid" ng-show="directiveForm[\'students[\'+$index+\'].studentGroup\'].$error.required"> {{\'main.required\' | translate}} </div> </td> <td md-cell ng-if="formState.school.higher"> <hois-classifier-value ng-model="row.oldStudyLoad" criteria="{higher: true}" main-classifier-code="OPPEKOORMUS"></hois-classifier-value> </td> <td md-cell> <hois-classifier-value ng-model="row.oldStudyForm" main-classifier-code="OPPEVORM"></hois-classifier-value> </td> <td md-cell> <md-datepicker ng-model="row.nominalStudyEnd" name="students[{{$index}}].nominalStudyEnd"></md-datepicker> <div class="invalid" ng-show="directiveForm[\'students[\'+$index+\'].nominalStudyEnd\'].$error.required"> {{\'main.required\' | translate}} </div> </td> <td md-cell> <hois-classifier-value ng-model="row.oldFin" main-classifier-code="FINALLIKAS"></hois-classifier-value> </td> <td md-cell> <hois-classifier-value ng-model="row.oldFinSpecific" main-classifier-code="FINTAPSUSTUS"></hois-classifier-value> </td> <td md-cell> <hois-classifier-value ng-model="row.oldLanguage" main-classifier-code="OPPEKEEL"></hois-classifier-value> </td> <td md-cell> <a ng-click="deleteStudent(row)" md-no-ink class="remove">&times;</a> </td> </tr> </tbody> </table> </md-table-container>'),a.put("directive/directive.type.ennist.view.html",'<md-table-container> <table md-table md-row-select="formState.cancelSelect" multiple ng-model="formState.selectedStudents" class="secondary-table"> <thead md-head> <tr md-row> <th md-column>{{\'directive.student.fullname\' | translate}}</th> <th md-column>{{\'directive.student.idcode\' | translate}}</th> <th md-column>{{\'directive.student.curriculumVersion\' | translate}}</th> <th md-column>{{\'directive.student.studentGroup\' | translate}}</th> <th md-column ng-if="formState.school.higher">{{\'directive.student.studyLoad\' | translate}}</th> <th md-column>{{\'directive.student.studyForm\' | translate}}</th> <th md-column>{{\'directive.student.nominalStudyEnd\' | translate}}</th> <th md-column>{{\'directive.student.fin\' | translate}}</th> <th md-column>{{\'directive.student.finSpecific\' | translate}}</th> <th md-column>{{\'directive.student.language\' | translate}}</th> </tr> </thead> <tbody md-body> <tr md-row ng-disabled="!row.selectable" md-select="row" md-select-id="student" md-auto-select ng-repeat="row in record.students" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell> <a class="md-primary" ng-href="#/students/{{::row.student}}/main">{{::row.fullname}}</a> </td> <td md-cell>{{::row.idcode}}</td> <td md-cell>{{currentLanguageNameField(row.newCurriculumVersion)}}</td> <td md-cell>{{::row.newStudentGroup}}</td> <td md-cell ng-if="formState.school.higher"> <hois-classifier-value ng-model="row.studyLoad" main-classifier-code="OPPEKOORMUS"></hois-classifier-value> </td> <td md-cell> <hois-classifier-value ng-model="row.studyForm" main-classifier-code="OPPEVORM"></hois-classifier-value> </td> <td md-cell> <hois-value value="row.nominalStudyEnd | hoisDate"></hois-value> </td> <td md-cell> <hois-classifier-value ng-model="row.fin" main-classifier-code="FINALLIKAS"></hois-classifier-value> </td> <td md-cell> <hois-classifier-value ng-model="row.finSpecific" main-classifier-code="FINTAPSUSTUS"></hois-classifier-value> </td> <td md-cell> <hois-classifier-value ng-model="row.language" main-classifier-code="OPPEKEEL"></hois-classifier-value> </td> </tr> </tbody> </table> </md-table-container>'),a.put("directive/directive.type.finm.edit.html",'<md-table-container> <table md-table class="secondary-table"> <thead md-head> <tr md-row> <th md-column>{{\'directive.student.fullname\' | translate}}</th> <th md-column>{{\'directive.student.idcode\' | translate}}</th> <th md-column class="required">{{\'directive.student.fin\' | translate}}</th> <th md-column class="required">{{\'directive.student.finSpecific\' | translate}}</th> <th></th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="row in record.students" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell>{{::row.fullname}}</td> <td md-cell>{{::row.idcode}}</td> <td md-cell> <hois-classifier-value ng-model="row.fin" name="students[{{$index}}].fin" main-classifier-code="FINALLIKAS"></hois-classifier-value> <div class="invalid" ng-show="directiveForm[\'students[\'+$index+\'].fin\'].$error.required"> {{\'main.required\' | translate}} </div> </td> <td md-cell> <hois-classifier-select ng-model="row.finSpecific" name="students[{{$index}}].finSpecific" model-value-attr="code" filter-values="[row.oldFinSpecific]" main-classifier-code="FINTAPSUSTUS" aria-label="{{\'directive.student.finSpecific\' | translate}}"></hois-classifier-select> <div class="invalid" ng-show="directiveForm[\'students[\'+$index+\'].finSpecific\'].$error.required"> {{\'main.required\' | translate}} </div> </td> <td md-cell> <a ng-click="deleteStudent(row)" md-no-ink class="remove">&times;</a> </td> </tr> </tbody> </table> </md-table-container>'),a.put("directive/directive.type.finm.view.html",'<md-table-container> <table md-table md-row-select="formState.cancelSelect" multiple ng-model="formState.selectedStudents" class="secondary-table"> <thead md-head> <tr md-row> <th md-column>{{\'directive.student.fullname\' | translate}}</th> <th md-column>{{\'directive.student.idcode\' | translate}}</th> <th md-column>{{\'directive.student.fin\' | translate}}</th> <th md-column>{{\'directive.student.finSpecific\' | translate}}</th> </tr> </thead> <tbody md-body> <tr md-row ng-disabled="!row.selectable" md-select="row" md-select-id="student" md-auto-select ng-repeat="row in record.students" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell> <a class="md-primary" ng-href="#/students/{{::row.student}}/main">{{::row.fullname}}</a> </td> <td md-cell>{{::row.idcode}}</td> <td md-cell> <hois-classifier-value ng-model="row.fin" main-classifier-code="FINALLIKAS"></hois-classifier-value> </td> <td md-cell> <hois-classifier-value ng-model="row.finSpecific" main-classifier-code="FINTAPSUSTUS"></hois-classifier-value> </td> </tr> </tbody> </table> </md-table-container>'),a.put("directive/directive.type.immat.edit.html",'<md-table-container> <table md-table class="secondary-table"> <thead md-head> <tr md-row> <th md-column>{{\'directive.student.foreign\' | translate}}</th> <th md-column>{{\'directive.student.idcode\' | translate}}</th> <th md-column class="required">{{\'directive.student.firstname\' | translate}}</th> <th md-column class="required">{{\'directive.student.lastname\' | translate}}</th> <th md-column class="required">{{\'directive.student.birthdate\' | translate}}</th> <th md-column class="required">{{\'directive.student.sex\' | translate}}</th> <th md-column class="required">{{\'directive.student.citizenship\' | translate}}</th> <th md-column class="required">{{\'directive.student.curriculumVersion\' | translate}}</th> <th md-column ng-if="formState.school.higher" ng-class="{required: !formState.school.vocational}">{{\'directive.student.studyLoad\' | translate}}</th> <th md-column class="required">{{\'directive.student.studyForm\' | translate}}</th> <th md-column class="required">{{\'directive.student.nominalStudyEnd\' | translate}}</th> <th md-column class="required">{{\'directive.student.fin\' | translate}}</th> <th md-column class="required">{{\'directive.student.finSpecific\' | translate}}</th> <th md-column class="required">{{\'directive.student.language\' | translate}}</th> <th md-column class="required">{{\'directive.student.studentGroup\' | translate}}</th> <th md-column class="required">{{\'directive.student.previousStudyLevel\' | translate}}</th> <th></th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="row in record.students" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell> <md-checkbox ng-model="row._foreign" ng-change="foreignChanged(row)" aria-label="{{\'directive.student.foreign\' | translate}}"></md-checkbox> </td> <td md-cell> <input type="text" ng-if="!row._foreign" ng-blur="lookupStudent(row)" ng-model="row.idcode" name="students[{{$index}}].idcode"> <input type="text" ng-if="row._foreign" ng-blur="lookupStudent(row)" ng-model="row.foreignIdcode" name="students[{{$index}}].idcode"> <div class="invalid" ng-messages="directiveForm[\'students[\'+$index+\'].idcode\'].$error"> <p ng-message="required">{{\'main.required\' | translate}}</p> <p ng-message="serverside"> </p><p ng-repeat="err in directiveForm[\'students[\'+$index+\'].idcode\'].$serverError">{{\'main.messages.error.\' + err.code | translate}}</p>  </div> </td> <td md-cell> <input type="text" ng-readonly="row._found" ng-model="row.firstname" name="students[{{$index}}].firstname"> <div class="invalid" ng-messages="directiveForm[\'students[\'+$index+\'].firstname\'].$error"> <p ng-message="required">{{\'main.required\' | translate}}</p> <p ng-message="serverside"> </p><p ng-repeat="err in directiveForm[\'students[\'+$index+\'].firstname\'].$serverError">{{\'main.messages.error.\' + err.code | translate}}</p>  </div> </td> <td md-cell> <input type="text" ng-readonly="row._found" ng-model="row.lastname" name="students[{{$index}}].lastname"> <div class="invalid" ng-messages="directiveForm[\'students[\'+$index+\'].lastname\'].$error"> <p ng-message="required">{{\'main.required\' | translate}}</p> <p ng-message="serverside"> </p><p ng-repeat="err in directiveForm[\'students[\'+$index+\'].lastname\'].$serverError">{{\'main.messages.error.\' + err.code | translate}}</p>  </div> </td> <td md-cell> <md-datepicker ng-if="!row._found" ng-model="row.birthdate" name="students[{{$index}}].birthdate"></md-datepicker> <hois-value ng-if="row._found" value="row.birthdate | hoisDate" name="students[{{$index}}].birthdate"></hois-value> <div class="invalid" ng-messages="directiveForm[\'students[\'+$index+\'].birthdate\'].$error"> <p ng-message="required">{{\'main.required\' | translate}}</p> </div> </td> <td md-cell> <hois-classifier-select ng-if="!row._found" ng-model="row.sex" name="students[{{$index}}].sex" model-value-attr="code" main-classifier-code="SUGU" aria-label="{{\'directive.student.sex\' | translate}}"></hois-classifier-select> <hois-classifier-value ng-if="row._found" ng-model="row.sex" main-classifier-code="SUGU"></hois-classifier-value> <div class="invalid" ng-messages="directiveForm[\'students[\'+$index+\'].sex\'].$error"> <p ng-message="required">{{\'main.required\' | translate}}</p> </div> </td> <td md-cell> <hois-classifier-select ng-model="row.citizenship" name="students[{{$index}}].citizenship" model-value-attr="code" main-classifier-code="RIIK" aria-label="{{\'directive.student.citizenship\' | translate}}"></hois-classifier-select> <div class="invalid" ng-messages="directiveForm[\'students[\'+$index+\'].citizenship\'].$error"> <p ng-message="required">{{\'main.required\' | translate}}</p> </div> </td> <td md-cell> <hois-select ng-model="row.curriculumVersion" name="students[{{$index}}].curriculumVersion" values="formState.curriculumVersions" ng-change="curriculumVersionChanged(row)" aria-label="{{\'directive.student.curriculumVersion\' | translate}}"></hois-select> <div class="invalid" ng-messages="directiveForm[\'students[\'+$index+\'].curriculumVersion\'].$error"> <p ng-message="required">{{\'main.required\' | translate}}</p> </div> </td> <td md-cell ng-if="formState.school.higher"> <hois-classifier-select ng-model="row.studyLoad" name="students[{{$index}}].studyLoad" criteria="{higher: true}" model-value-attr="code" main-classifier-code="OPPEKOORMUS" aria-label="{{\'directive.student.studyLoad\' | translate}}"></hois-classifier-select> <div class="invalid" ng-messages="directiveForm[\'students[\'+$index+\'].studyLoad\'].$error"> <p ng-message="required">{{\'main.required\' | translate}}</p> </div> </td> <td md-cell> <hois-classifier-select ng-model="row.studyForm" name="students[{{$index}}].studyForm" show-only-values="visibleStudyForms(row.curriculumVersion)" model-value-attr="code" main-classifier-code="OPPEVORM" aria-label="{{\'directive.student.studyForm\' | translate}}"></hois-classifier-select> <div class="invalid" ng-messages="directiveForm[\'students[\'+$index+\'].studyForm\'].$error"> <p ng-message="required">{{\'main.required\' | translate}}</p> </div> </td> <td md-cell> <md-datepicker ng-model="row.nominalStudyEnd" name="students[{{$index}}].nominalStudyEnd"></md-datepicker> <div class="invalid" ng-messages="directiveForm[\'students[\'+$index+\'].nominalStudyEnd\'].$error"> <p ng-message="required">{{\'main.required\' | translate}}</p> </div> </td> <td md-cell> <hois-classifier-select ng-model="row.fin" name="students[{{$index}}].fin" model-value-attr="code" main-classifier-code="FINALLIKAS" aria-label="{{\'directive.student.fin\' | translate}}"></hois-classifier-select> <div class="invalid" ng-messages="directiveForm[\'students[\'+$index+\'].fin\'].$error"> <p ng-message="required">{{\'main.required\' | translate}}</p> </div> </td> <td md-cell> <hois-classifier-select ng-model="row.finSpecific" name="students[{{$index}}].finSpecific" model-value-attr="code" main-classifier-code="FINTAPSUSTUS" aria-label="{{\'directive.student.finSpecific\' | translate}}"></hois-classifier-select> <div class="invalid" ng-messages="directiveForm[\'students[\'+$index+\'].finSpecific\'].$error"> <p ng-message="required">{{\'main.required\' | translate}}</p> </div> </td> <td md-cell> <hois-classifier-select ng-model="row.language" name="students[{{$index}}].language" show-only-values="formState.languageMap[row.curriculumVersion]" model-value-attr="code" main-classifier-code="OPPEKEEL" aria-label="{{\'directive.student.language\' | translate}}"></hois-classifier-select> <div class="invalid" ng-messages="directiveForm[\'students[\'+$index+\'].language\'].$error"> <p ng-message="required">{{\'main.required\' | translate}}</p> </div> </td> <td md-cell> <hois-select ng-model="row.studentGroup" name="students[{{$index}}].studentGroup" values="formState.studentGroupMap[row.curriculumVersion]" aria-label="{{\'directive.student.studentGroup\' | translate}}"></hois-select> <div class="invalid" ng-messages="directiveForm[\'students[\'+$index+\'].studentGroup\'].$error"> <p ng-message="required">{{\'main.required\' | translate}}</p> </div> </td> <td md-cell> <hois-classifier-select ng-model="row.previousStudyLevel" name="students[{{$index}}].previousStudyLevel" model-value-attr="code" main-classifier-code="OPPEASTE" aria-label="{{\'directive.student.previousStudyLevel\' | translate}}"></hois-classifier-select> <div class="invalid" ng-messages="directiveForm[\'students[\'+$index+\'].previousStudyLevel\'].$error"> <p ng-message="required">{{\'main.required\' | translate}}</p> </div> </td> <td md-cell> <a ng-click="deleteStudent(row)" md-no-ink class="remove">&times;</a> </td> </tr> </tbody> </table> </md-table-container>'),a.put("directive/directive.type.immat.view.html",'<md-table-container> <table md-table md-row-select="formState.cancelSelect" multiple ng-model="formState.selectedStudents" class="secondary-table"> <thead md-head> <tr md-row> <th md-column>{{\'directive.student.foreign\' | translate}}</th> <th md-column>{{\'directive.student.fullname\' | translate}}</th> <th md-column>{{\'directive.student.idcode\' | translate}}</th> <th md-column>{{\'directive.student.birthdate\' | translate}}</th> <th md-column>{{\'directive.student.sex\' | translate}}</th> <th md-column>{{\'directive.student.citizenship\' | translate}}</th> <th md-column>{{\'directive.student.curriculumVersion\' | translate}}</th> <th md-column ng-if="formState.school.higher">{{\'directive.student.studyLoad\' | translate}}</th> <th md-column>{{\'directive.student.studyForm\' | translate}}</th> <th md-column>{{\'directive.student.nominalStudyEnd\' | translate}}</th> <th md-column>{{\'directive.student.fin\' | translate}}</th> <th md-column>{{\'directive.student.finSpecific\' | translate}}</th> <th md-column>{{\'directive.student.language\' | translate}}</th> <th md-column>{{\'directive.student.studentGroup\' | translate}}</th> <th md-column>{{\'directive.student.previousStudyLevel\' | translate}}</th> </tr> </thead> <tbody md-body> <tr md-row ng-disabled="!row.selectable" md-select="row" md-select-id="student" md-auto-select ng-repeat="row in record.students" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell> <md-checkbox ng-model="row._foreign" aria-label="{{\'directive.student.foreign\' | translate}}" disabled></md-checkbox> </td> <td md-cell ng-if="row.student"> <a class="md-primary" ng-href="#/students/{{::row.student}}/main">{{::row.fullname}}</a> </td> <td ng-if="!row.student" md-cell>{{::row.fullname}}</td> <td md-cell>{{::(row.idcode || row.foreignIdcode)}}</td> <td md-cell> <hois-value value="row.birthdate | hoisDate"></hois-value> </td> <td md-cell> <hois-classifier-value ng-model="row.sex" main-classifier-code="SUGU"></hois-classifier-value> </td> <td md-cell> <hois-classifier-value ng-model="row.citizenship" main-classifier-code="RIIK"></hois-classifier-value> </td> <td md-cell>{{currentLanguageNameField(row.newCurriculumVersion)}}</td> <td md-cell ng-if="formState.school.higher"> <hois-classifier-value ng-model="row.studyLoad" main-classifier-code="OPPEKOORMUS"></hois-classifier-value> </td> <td md-cell> <hois-classifier-value ng-model="row.studyForm" main-classifier-code="OPPEVORM"></hois-classifier-value> </td> <td md-cell> <hois-value value="row.nominalStudyEnd | hoisDate"></hois-value> </td> <td md-cell> <hois-classifier-value ng-model="row.fin" main-classifier-code="FINALLIKAS"></hois-classifier-value> </td> <td md-cell> <hois-classifier-value ng-model="row.finSpecific" main-classifier-code="FINTAPSUSTUS"></hois-classifier-value> </td> <td md-cell> <hois-classifier-value ng-model="row.language" main-classifier-code="OPPEKEEL"></hois-classifier-value> </td> <td md-cell>{{::row.newStudentGroup}}</td> <td md-cell> <hois-classifier-value ng-model="row.previousStudyLevel" main-classifier-code="OPPEASTE"></hois-classifier-value> </td> </tr> </tbody> </table> </md-table-container>'),a.put("directive/directive.type.immatv.edit.html",'<md-table-container> <table md-table class="secondary-table"> <thead md-head> <tr md-row> <th md-column>{{\'directive.student.idcode\' | translate}}</th> <th md-column>{{\'directive.student.firstname\' | translate}}</th> <th md-column>{{\'directive.student.lastname\' | translate}}</th> <th md-column>{{\'directive.student.curriculumVersion\' | translate}}</th> <th md-column ng-if="formState.school.higher">{{\'directive.student.studyLoad\' | translate}}</th> <th md-column>{{\'directive.student.studyForm\' | translate}}</th> <th md-column>{{\'directive.student.nominalStudyEnd\' | translate}}</th> <th md-column>{{\'directive.student.language\' | translate}}</th> <th md-column>{{\'directive.student.fin\' | translate}}</th> <th md-column class="required">{{\'directive.student.finSpecific\' | translate}}</th> <th md-column class="required">{{\'directive.student.studentGroup\' | translate}}</th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="row in record.students" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell>{{::(row.idcode || row.foreignIdcode)}}</td> <td md-cell>{{::row.firstname}}</td> <td md-cell>{{::row.lastname}}</td> <td md-cell>{{currentLanguageNameField(formState.curriculumVersionMap[row.curriculumVersion])}}</td> <td md-cell ng-if="formState.school.higher"> <hois-classifier-value ng-model="row.studyLoad" main-classifier-code="OPPEKOORMUS"></hois-classifier-value> </td> <td md-cell> <hois-classifier-value ng-model="row.studyForm" main-classifier-code="OPPEVORM"></hois-classifier-value> </td> <td md-cell> <hois-value value="row.nominalStudyEnd | hoisDate"></hois-value> </td> <td md-cell> <hois-classifier-value ng-model="row.language" main-classifier-code="OPPEKEEL"></hois-classifier-value> </td> <td md-cell> <hois-classifier-value ng-model="row.fin" main-classifier-code="FINALLIKAS"></hois-classifier-value> </td> <td md-cell> <hois-classifier-select ng-model="row.finSpecific" name="students[{{$index}}].finSpecific" model-value-attr="code" main-classifier-code="FINTAPSUSTUS" aria-label="{{\'directive.student.finSpecific\' | translate}}"></hois-classifier-select> <div class="invalid" ng-messages="directiveForm[\'students[\'+$index+\'].finSpecific\'].$error"> <p ng-message="required">{{\'main.required\' | translate}}</p> </div> </td> <td md-cell> <hois-select ng-model="row.studentGroup" name="students[{{$index}}].studentGroup" values="formState.studentGroupMap[row.curriculumVersion]" aria-label="{{\'directive.student.studentGroup\' | translate}}"></hois-select> <div class="invalid" ng-messages="directiveForm[\'students[\'+$index+\'].studentGroup\'].$error"> <p ng-message="required">{{\'main.required\' | translate}}</p> </div> </td> </tr> </tbody> </table> </md-table-container>'),a.put("directive/directive.type.immatv.view.html",'<md-table-container> <table md-table md-row-select="formState.cancelSelect" multiple ng-model="formState.selectedStudents" class="secondary-table"> <thead md-head> <tr md-row> <th md-column>{{\'directive.student.fullname\' | translate}}</th> <th md-column>{{\'directive.student.idcode\' | translate}}</th> <th md-column>{{\'directive.student.curriculumVersion\' | translate}}</th> <th md-column ng-if="formState.school.higher">{{\'directive.student.studyLoad\' | translate}}</th> <th md-column>{{\'directive.student.studyForm\' | translate}}</th> <th md-column>{{\'directive.student.nominalStudyEnd\' | translate}}</th> <th md-column>{{\'directive.student.language\' | translate}}</th> <th md-column>{{\'directive.student.fin\' | translate}}</th> <th md-column>{{\'directive.student.finSpecific\' | translate}}</th> <th md-column>{{\'directive.student.studentGroup\' | translate}}</th> </tr> </thead> <tbody md-body> <tr md-row ng-disabled="!row.selectable" md-select="row" md-select-id="student" md-auto-select ng-repeat="row in record.students" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell ng-if="row.student"> <a class="md-primary" ng-href="#/students/{{::row.student}}/main">{{::row.fullname}}</a> </td> <td ng-if="!row.student" md-cell>{{::row.fullname}}</td> <td md-cell>{{::(row.idcode || row.foreignIdcode)}}</td> <td md-cell>{{currentLanguageNameField(row.newCurriculumVersion)}}</td> <td md-cell ng-if="formState.school.higher"> <hois-classifier-value ng-model="row.studyLoad" main-classifier-code="OPPEKOORMUS"></hois-classifier-value> </td> <td md-cell> <hois-classifier-value ng-model="row.studyForm" main-classifier-code="OPPEVORM"></hois-classifier-value> </td> <td md-cell> <hois-value value="row.nominalStudyEnd | hoisDate"></hois-value> </td> <td md-cell> <hois-classifier-value ng-model="row.language" main-classifier-code="OPPEKEEL"></hois-classifier-value> </td> <td md-cell> <hois-classifier-value ng-model="row.fin" main-classifier-code="FINALLIKAS"></hois-classifier-value> </td> <td md-cell> <hois-classifier-value ng-model="row.finSpecific" main-classifier-code="FINTAPSUSTUS"></hois-classifier-value> </td> <td md-cell>{{::row.newStudentGroup}}</td> </tr> </tbody> </table> </md-table-container>'),a.put("directive/directive.type.lopet.edit.html","<md-table-container> <table md-table class=\"secondary-table\"> <thead md-head> <tr md-row> <th md-column>{{'directive.student.fullname' | translate}}</th> <th md-column>{{'directive.student.idcode' | translate}}</th> <th md-column>{{'directive.student.curriculumVersion' | translate}}</th> <th md-column>{{formState.school.vocational ? (formState.school.higher ? 'directive.student.isCumLaudeBoth' : 'directive.student.isCumLaudeVoc') : 'directive.student.isCumLaude' | translate}}</th> <th md-column ng-if=\"formState.school.higher\">{{'directive.student.curriculumGrade' | translate}}</th> <th md-column ng-if=\"formState.school.vocational\">{{'directive.student.isOccupationExamPassed' | translate}}</th> <th></th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat=\"row in record.students\" ng-class-odd=\"'odd'\" ng-class-even=\"'even'\"> <td md-cell>{{::row.fullname}}</td> <td md-cell>{{::row.idcode}}</td> <td md-cell>{{currentLanguageNameField(row.oldCurriculumVersion)}}</td> <td md-cell>{{row.isCumLaude ? 'main.yes' : 'main.no' | translate}}</td> <td md-cell ng-if=\"formState.school.higher\"> <hois-classifier-value ng-model=\"row.curriculumGrade\" main-classifier-code=\"EHIS_KRAAD\"></hois-classifier-value> </td> <td md-cell ng-if=\"formState.school.vocational\"> {{row.isOccupationExamPassed ? 'main.yes' : 'main.no' | translate}} </td> <td md-cell> <a ng-click=\"deleteStudent(row)\" md-no-ink class=\"remove\">&times;</a> </td> </tr> </tbody> </table> </md-table-container>"),
a.put("directive/directive.type.lopet.view.html",'<md-table-container> <table md-table md-row-select="formState.cancelSelect" multiple ng-model="formState.selectedStudents" class="secondary-table"> <thead md-head> <tr md-row> <th md-column>{{\'directive.student.fullname\' | translate}}</th> <th md-column>{{\'directive.student.idcode\' | translate}}</th> <th md-column>{{\'directive.student.curriculumVersion\' | translate}}</th> <th md-column>{{formState.school.vocational ? (formState.school.higher ? \'directive.student.isCumLaudeBoth\' : \'directive.student.isCumLaudeVoc\') : \'directive.student.isCumLaude\' | translate}}</th> <th md-column ng-if="formState.school.higher">{{\'directive.student.curriculumGrade\' | translate}}</th> <th md-column ng-if="formState.school.vocational">{{\'directive.student.isOccupationExamPassed\' | translate}}</th> </tr> </thead> <tbody md-body> <tr md-row ng-disabled="!row.selectable" md-select="row" md-select-id="student" md-auto-select ng-repeat="row in record.students" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell> <a class="md-primary" ng-href="#/students/{{::row.student}}/main">{{::row.fullname}}</a> </td> <td md-cell>{{::row.idcode}}</td> <td md-cell>{{currentLanguageNameField(row.newCurriculumVersion)}}</td> <td md-cell>{{row.isCumLaude ? \'main.yes\' : \'main.no\' | translate}}</td> <td md-cell ng-if="formState.school.higher"> <hois-classifier-value ng-model="row.curriculumGrade" main-classifier-code="EHIS_KRAAD"></hois-classifier-value> </td> <td md-cell ng-if="formState.school.vocational"> {{row.isOccupationExamPassed ? \'main.yes\' : \'main.no\' | translate}} </td> </tr> </tbody> </table> </md-table-container>'),a.put("directive/directive.type.okava.edit.html",'<md-table-container> <table md-table class="secondary-table"> <thead md-head> <tr md-row> <th md-column>{{\'directive.student.fullname\' | translate}}</th> <th md-column>{{\'directive.student.idcode\' | translate}}</th> <th md-column>{{\'directive.student.oldCurriculumVersion\' | translate}}</th> <th md-column>{{\'directive.student.oldStudyForm\' | translate}}</th> <th md-column class="required">{{\'directive.student.newCurriculumVersion\' | translate}}</th> <th md-column class="required">{{\'directive.student.newStudyForm\' | translate}}</th> <th md-column class="required">{{\'directive.student.newStudentGroup\' | translate}}</th> <th></th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="row in record.students" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell>{{::row.fullname}}</td> <td md-cell>{{::row.idcode}}</td> <td md-cell>{{currentLanguageNameField(row.oldCurriculumVersion)}}</td> <td md-cell> <hois-classifier-value ng-model="row.oldStudyForm" main-classifier-code="OPPEVORM"></hois-classifier-value> </td> <td md-cell> <hois-select ng-model="row.curriculumVersion" name="students[{{$index}}].curriculumVersion" values="formState.curriculumVersions" ng-change="curriculumVersionChanged(row)" filter-values="[row.oldCurriculumVersion]" aria-label="{{\'directive.student.newCurriculumVersion\' | translate}}"></hois-select> <div class="invalid" ng-show="directiveForm[\'students[\'+$index+\'].curriculumVersion\'].$error.required"> {{\'main.required\' | translate}} </div> </td> <td md-cell> <hois-classifier-select ng-model="row.studyForm" name="students[{{$index}}].studyForm" show-only-values="visibleStudyForms(row.curriculumVersion)" model-value-attr="code" main-classifier-code="OPPEVORM" aria-label="{{\'directive.student.newStudyForm\' | translate}}"></hois-classifier-select> <div class="invalid" ng-show="directiveForm[\'students[\'+$index+\'].studyForm\'].$error.required"> {{\'main.required\' | translate}} </div> </td> <td md-cell> <hois-select ng-model="row.studentGroup" name="students[{{$index}}].studentGroup" values="formState.studentGroupMap[row.curriculumVersion]" aria-label="{{\'directive.student.newStudentGroup\' | translate}}"></hois-select> <div class="invalid" ng-show="directiveForm[\'students[\'+$index+\'].studentGroup\'].$error.required"> {{\'main.required\' | translate}} </div> </td> <td md-cell> <a ng-click="deleteStudent(row)" md-no-ink class="remove">&times;</a> </td> </tr> </tbody> </table> </md-table-container>'),a.put("directive/directive.type.okava.view.html",'<md-table-container> <table md-table md-row-select="formState.cancelSelect" multiple ng-model="formState.selectedStudents" class="secondary-table"> <thead md-head> <tr md-row> <th md-column>{{\'directive.student.fullname\' | translate}}</th> <th md-column>{{\'directive.student.idcode\' | translate}}</th> <th md-column>{{\'directive.student.oldCurriculumVersion\' | translate}}</th> <th md-column>{{\'directive.student.oldStudyForm\' | translate}}</th> <th md-column>{{\'directive.student.newCurriculumVersion\' | translate}}</th> <th md-column>{{\'directive.student.newStudyForm\' | translate}}</th> <th md-column>{{\'directive.student.newStudentGroup\' | translate}}</th> </tr> </thead> <tbody md-body> <tr md-row ng-disabled="!row.selectable" md-select="row" md-select-id="student" md-auto-select ng-repeat="row in record.students" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell> <a class="md-primary" ng-href="#/students/{{::row.student}}/main">{{::row.fullname}}</a> </td> <td md-cell>{{::row.idcode}}</td> <td md-cell>{{currentLanguageNameField(row.oldCurriculumVersion)}}</td> <td md-cell> <hois-classifier-value ng-model="row.oldStudyForm" main-classifier-code="OPPEVORM"></hois-classifier-value> </td> <td md-cell>{{currentLanguageNameField(row.newCurriculumVersion)}}</td> <td md-cell> <hois-classifier-value ng-model="row.studyForm" main-classifier-code="OPPEVORM"></hois-classifier-value> </td> <td md-cell>{{::row.newStudentGroup}}</td> </tr> </tbody> </table> </md-table-container>'),a.put("directive/directive.type.okoorm.edit.html",'<md-table-container> <table md-table class="secondary-table"> <thead md-head> <tr md-row> <th md-column>{{\'directive.student.fullname\' | translate}}</th> <th md-column>{{\'directive.student.idcode\' | translate}}</th> <th md-column>{{\'directive.student.newStudyLoad\' | translate}}</th> <th md-column class="required">{{\'directive.student.fin\' | translate}}</th> <th md-column class="required">{{\'directive.student.finSpecific\' | translate}}</th> <th></th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="row in record.students" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell>{{::row.fullname}}</td> <td md-cell>{{::row.idcode}}</td> <td md-cell>{{\'directive.student.studyLoad\'+row.studyLoad | translate}}</td> <td md-cell> <hois-classifier-value ng-model="row.fin" name="students[{{$index}}].fin" main-classifier-code="FINALLIKAS"></hois-classifier-value> <div class="invalid" ng-show="directiveForm[\'students[\'+$index+\'].fin\'].$error.required"> {{\'main.required\' | translate}} </div> </td> <td md-cell> <hois-classifier-select ng-model="row.finSpecific" name="students[{{$index}}].finSpecific" filter-values="[row.oldFinSpecific]" model-value-attr="code" main-classifier-code="FINTAPSUSTUS" aria-label="{{\'directive.student.finSpecific\' | translate}}"></hois-classifier-select> <div class="invalid" ng-show="directiveForm[\'students[\'+$index+\'].finSpecific\'].$error.required"> {{\'main.required\' | translate}} </div> </td> <td md-cell> <a ng-click="deleteStudent(row)" md-no-ink class="remove">&times;</a> </td> </tr> </tbody> </table> </md-table-container>'),a.put("directive/directive.type.okoorm.view.html",'<md-table-container> <table md-table md-row-select="formState.cancelSelect" multiple ng-model="formState.selectedStudents" class="secondary-table"> <thead md-head> <tr md-row> <th md-column>{{\'directive.student.fullname\' | translate}}</th> <th md-column>{{\'directive.student.idcode\' | translate}}</th> <th md-column>{{\'directive.student.newStudyLoad\' | translate}}</th> <th md-column>{{\'directive.student.fin\' | translate}}</th> <th md-column>{{\'directive.student.finSpecific\' | translate}}</th> </tr> </thead> <tbody md-body> <tr md-row ng-disabled="!row.selectable" md-select="row" md-select-id="student" md-auto-select ng-repeat="row in record.students" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell> <a class="md-primary" ng-href="#/students/{{::row.student}}/main">{{::row.fullname}}</a> </td> <td md-cell>{{::row.idcode}}</td> <td md-cell>{{\'directive.student.studyLoad\'+row.studyLoad | translate}}</td> <td md-cell> <hois-classifier-value ng-model="row.fin" main-classifier-code="FINALLIKAS"></hois-classifier-value> </td> <td md-cell> <hois-classifier-value ng-model="row.finSpecific" main-classifier-code="FINTAPSUSTUS"></hois-classifier-value> </td> </tr> </tbody> </table> </md-table-container>'),a.put("directive/directive.type.ovorm.edit.html",'<md-table-container> <table md-table class="secondary-table"> <thead md-head> <tr md-row> <th md-column>{{\'directive.student.fullname\' | translate}}</th> <th md-column>{{\'directive.student.idcode\' | translate}}</th> <th md-column>{{\'directive.student.oldStudyForm\' | translate}}</th> <th md-column class="required">{{\'directive.student.newStudyForm\' | translate}}</th> <th md-column>{{\'directive.student.studentGroup\' | translate}}</th> <th></th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="row in record.students" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell>{{::row.fullname}}</td> <td md-cell>{{::row.idcode}}</td> <td md-cell> <hois-classifier-value ng-model="row.oldStudyForm" main-classifier-code="OPPEVORM"></hois-classifier-value> </td> <td md-cell> <hois-classifier-select ng-model="row.studyForm" name="students[{{$index}}].studyForm" criteria="{higher: true}" filter-values="[row.oldStudyForm]" model-value-attr="code" main-classifier-code="OPPEVORM" aria-label="{{\'directive.student.newStudyForm\' | translate}}"></hois-classifier-select> <div class="invalid" ng-show="directiveForm[\'students[\'+$index+\'].studyForm\'].$error.required"> {{\'main.required\' | translate}} </div> </td> <td md-cell> <hois-select ng-model="row.studentGroup" name="students[{{$index}}].studentGroup" values="formState.studentGroupMap[row.oldCurriculumVersion.id]" aria-label="{{\'directive.student.studentGroup\' | translate}}"></hois-select> </td> <td md-cell> <a ng-click="deleteStudent(row)" md-no-ink class="remove">&times;</a> </td> </tr> </tbody> </table> </md-table-container>'),a.put("directive/directive.type.ovorm.view.html",'<md-table-container> <table md-table md-row-select="formState.cancelSelect" multiple ng-model="formState.selectedStudents" class="secondary-table"> <thead md-head> <tr md-row> <th md-column>{{\'directive.student.fullname\' | translate}}</th> <th md-column>{{\'directive.student.idcode\' | translate}}</th> <th md-column>{{\'directive.student.oldStudyForm\' | translate}}</th> <th md-column>{{\'directive.student.newStudyForm\' | translate}}</th> <th md-column>{{\'directive.student.studentGroup\' | translate}}</th> </tr> </thead> <tbody md-body> <tr md-row ng-disabled="!row.selectable" md-select="row" md-select-id="student" md-auto-select ng-repeat="row in record.students" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell> <a class="md-primary" ng-href="#/students/{{::row.student}}/main">{{::row.fullname}}</a> </td> <td md-cell>{{::row.idcode}}</td> <td md-cell> <hois-classifier-value ng-model="row.oldStudyForm" main-classifier-code="OPPEVORM"></hois-classifier-value> </td> <td md-cell> <hois-classifier-value ng-model="row.studyForm" main-classifier-code="OPPEVORM"></hois-classifier-value> </td> <td md-cell>{{::row.newStudentGroup}}</td> </tr> </tbody> </table> </md-table-container>'),a.put("directive/directive.type.stiptoet.edit.html",'<md-table-container> <table md-table class="secondary-table"> <thead md-head> <tr md-row> <th md-column>{{\'directive.student.fullname\' | translate}}</th> <th md-column>{{\'directive.student.idcode\' | translate}}</th> <th md-column>{{\'directive.student.bankAccount\' | translate}}</th> <th md-column ng-class="{required: formState.scholarshipEditable}">{{\'directive.student.amountPaid\' | translate}}</th> <th md-column ng-class="{required: formState.scholarshipEditable}">{{\'directive.student.stipStartDate\' | translate}}</th> <th md-column ng-class="{required: formState.scholarshipEditable}">{{\'directive.student.stipEndDate\' | translate}}</th> <th></th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="row in record.students" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell>{{::row.fullname}}</td> <td md-cell>{{::row.idcode}}</td> <td md-cell>{{::row.bankAccount}}</td> <td md-cell> <hois-value ng-if="!formState.scholarshipEditable" value="row.amountPaid"></hois-value> <input ng-if="formState.scholarshipEditable" type="text" name="students[{{$index}}].amountPaid" ng-model="row.amountPaid"> <div class="invalid" ng-show="directiveForm[\'students[\'+$index+\'].amountPaid\'].$error.required"> {{\'main.required\' | translate}} </div> </td> <td md-cell> <hois-value ng-if="!formState.scholarshipEditable" value="row.startDate | hoisDate"></hois-value> <md-datepicker ng-if="formState.scholarshipEditable" name="students[{{$index}}].startDate" ng-model="row.startDate"></md-datepicker> <div class="invalid" ng-show="directiveForm[\'students[\'+$index+\'].startDate\'].$error.required"> {{\'main.required\' | translate}} </div> </td> <td md-cell> <hois-value ng-if="!formState.scholarshipEditable" value="row.endDate | hoisDate"></hois-value> <md-datepicker ng-if="formState.scholarshipEditable" name="students[{{$index}}].endDate" ng-model="row.endDate"></md-datepicker> <div class="invalid" ng-show="directiveForm[\'students[\'+$index+\'].endDate\'].$error.required"> {{\'main.required\' | translate}} </div> </td> <td md-cell> <a ng-click="deleteStudent(row)" md-no-ink class="remove">&times;</a> </td> </tr> </tbody> </table> </md-table-container>'),a.put("directive/directive.type.stiptoet.view.html",'<md-table-container> <table md-table md-row-select="formState.cancelSelect" multiple ng-model="formState.selectedStudents" class="secondary-table"> <thead md-head> <tr md-row> <th md-column>{{\'directive.student.fullname\' | translate}}</th> <th md-column>{{\'directive.student.idcode\' | translate}}</th> <th md-column>{{\'directive.student.bankAccount\' | translate}}</th> <th md-column>{{\'directive.student.amountPaid\' | translate}}</th> <th md-column>{{\'directive.student.stipStartDate\' | translate}}</th> <th md-column>{{\'directive.student.stipEndDate\' | translate}}</th> </tr> </thead> <tbody md-body> <tr md-row ng-disabled="!row.selectable" md-select="row" md-select-id="student" md-auto-select ng-repeat="row in record.students" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell> <a class="md-primary" ng-href="#/students/{{::row.student}}/main">{{::row.fullname}}</a> </td> <td md-cell>{{::row.idcode}}</td> <td md-cell>{{::row.bankAccount}}</td> <td md-cell> <hois-value value="row.amountPaid"></hois-value> </td> <td md-cell> <hois-value value="row.startDate | hoisDate"></hois-value> </td> <td md-cell> <hois-value value="row.endDate | hoisDate"></hois-value> </td> </tr> </tbody> </table> </md-table-container>'),a.put("directive/directive.type.stiptoetl.edit.html",'<md-table-container> <table md-table class="secondary-table"> <thead md-head> <tr md-row> <th md-column>{{\'directive.student.fullname\' | translate}}</th> <th md-column>{{\'directive.student.idcode\' | translate}}</th> <th md-column>{{\'directive.student.stipStartDate\' | translate}}</th> <th md-column>{{\'directive.student.stipEndDate\' | translate}}</th> <th md-column class="required">{{\'directive.student.stipEndReason\' | translate}}</th> <th></th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="row in record.students" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell>{{::row.fullname}}</td> <td md-cell>{{::row.idcode}}</td> <td md-cell> <hois-value value="row.startDate | hoisDate"></hois-value> </td> <td md-cell> <hois-value value="row.endDate | hoisDate"></hois-value> </td> <td md-cell> <hois-classifier-select ng-model="row.reason" name="students[{{$index}}].reason" criteria="{higher: formState.school.higher ? true : undefined, vocational: formState.school.vocational ? true : undefined}" model-value-attr="code" main-classifier-code="KASKKIRI_STIPTOETL_POHJUS" aria-label="{{\'directive.student.reason\' | translate}}"></hois-classifier-select> <div class="invalid" ng-show="directiveForm[\'students[\'+$index+\'].reason\'].$error.required"> {{\'main.required\' | translate}} </div> </td> <td md-cell> <a ng-click="deleteStudent(row)" md-no-ink class="remove">&times;</a> </td> </tr> </tbody> </table> </md-table-container>'),a.put("directive/directive.type.stiptoetl.view.html",'<md-table-container> <table md-table md-row-select="formState.cancelSelect" multiple ng-model="formState.selectedStudents" class="secondary-table"> <thead md-head> <tr md-row> <th md-column>{{\'directive.student.fullname\' | translate}}</th> <th md-column>{{\'directive.student.idcode\' | translate}}</th> <th md-column>{{\'directive.student.stipStartDate\' | translate}}</th> <th md-column>{{\'directive.student.stipEndDate\' | translate}}</th> <th md-column>{{\'directive.student.stipEndReason\' | translate}}</th> </tr> </thead> <tbody md-body> <tr md-row ng-disabled="!row.selectable" md-select="row" md-select-id="student" md-auto-select ng-repeat="row in record.students" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell> <a class="md-primary" ng-href="#/students/{{::row.student}}/main">{{::row.fullname}}</a> </td> <td md-cell>{{::row.idcode}}</td> <td md-cell> <hois-value value="row.startDate | hoisDate"></hois-value> </td> <td md-cell> <hois-value value="row.endDate | hoisDate"></hois-value> </td> <td md-cell> <hois-classifier-value ng-model="row.reason" main-classifier-code="KASKKIRI_STIPTOETL_POHJUS"></hois-classifier-value> </td> </tr> </tbody> </table> </md-table-container>'),a.put("directive/directive.type.valis.edit.html",'<md-table-container> <table md-table class="secondary-table"> <thead md-head> <tr md-row> <th md-column>{{\'directive.student.fullname\' | translate}}</th> <th md-column>{{\'directive.student.idcode\' | translate}}</th> <th md-column class="required">{{\'directive.student.isAbroad\' | translate}}</th> <th md-column class="required">{{\'directive.student.school\' | translate}}</th> <th md-column class="required">{{\'directive.student.country\' | translate}}</th> <th md-column class="required">{{\'directive.student.isPeriod\' | translate}}</th> <th md-column class="required">{{\'directive.student.valisStartDate\' | translate}}</th> <th md-column class="required">{{\'directive.student.valisEndDate\' | translate}}</th> <th md-column class="required">{{\'directive.student.abroadPurpose\' | translate}}</th> <th md-column class="required">{{\'directive.student.abroadProgramme\' | translate}}</th> <th></th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="row in record.students" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell>{{::row.fullname}}</td> <td md-cell>{{::row.idcode}}</td> <td md-cell> <md-radio-group name="isAbroad" ng-model="row.isAbroad" layout="row" ng-change="abroadChanged(row)"> <md-radio-button ng-value="true" aria-label="foreign">{{ \'directive.student.foreignEducationalInstitute\' | translate }}</md-radio-button> <md-radio-button ng-value="false" aria-label="estonian">{{ \'directive.student.estonianEducationalInstitute\' | translate }}</md-radio-button> </md-radio-group> </td> <td md-cell> <hois-classifier-select ng-if="!row.isAbroad" ng-model="row.ehisSchool" name="students[{{$index}}].ehisSchool" model-value-attr="code" filter-values="[formState.school.ehisSchool]" main-classifier-code="EHIS_KOOL" aria-label="{{\'directive.student.school\' | translate}}"></hois-classifier-select> <div ng-if="!row.isAbroad" class="invalid" ng-messages="directiveForm[\'students[\'+$index+\'].ehisSchool\'].$error"> <p ng-message="required">{{\'main.required\' | translate}}</p> </div> <input type="text" ng-if="row.isAbroad" ng-model="row.abroadSchool" name="students[{{$index}}].abroadSchool"> <div ng-if="row.isAbroad" class="invalid" ng-messages="directiveForm[\'students[\'+$index+\'].abroadSchool\'].$error"> <p ng-message="required">{{\'main.required\' | translate}}</p> </div> </td> <td md-cell> <hois-classifier-select ng-if="row.isAbroad" ng-model="row.country" name="students[{{$index}}].country" model-value-attr="code" filter-values="[\'RIIK_EST\']" main-classifier-code="RIIK" aria-label="{{\'directive.student.country\' | translate}}"></hois-classifier-select> <hois-classifier-value ng-if="!row.isAbroad" ng-model="row.country" main-classifier-code="RIIK"></hois-classifier-value> <div class="invalid" ng-if="row.isAbroad" ng-messages="directiveForm[\'students[\'+$index+\'].country\'].$error"> <p ng-message="required">{{\'main.required\' | translate}}</p> </div> </td> <td md-cell> <md-radio-group name="isPeriod" ng-model="row.isPeriod" layout="row"> <md-radio-button ng-value="true" aria-label="period">{{ \'main.period\' | translate }}</md-radio-button> <md-radio-button ng-value="false" aria-label="date">{{ \'main.date\' | translate }}</md-radio-button> </md-radio-group> </td> <td md-cell> <hois-select ng-if="row.isPeriod" ng-model="row.studyPeriodStart" name="students[{{$index}}].studyPeriodStart" values="formState.studyPeriods" aria-label="{{\'directive.student.valisStartDate\' | translate}}"></hois-select> <md-datepicker ng-if="!row.isPeriod" ng-model="row.startDate" name="students[{{$index}}].startDate"></md-datepicker> <div ng-if="row.isPeriod" class="invalid" ng-messages="directiveForm[\'students[\'+$index+\'].studyPeriodStart\'].$error"> <p ng-message="required">{{\'main.required\' | translate}}</p> </div> <div ng-if="!row.isPeriod" class="invalid" ng-messages="directiveForm[\'students[\'+$index+\'].startDate\'].$error"> <p ng-message="required">{{\'main.required\' | translate}}</p> </div> </td> <td md-cell> <hois-select ng-if="row.isPeriod" ng-model="row.studyPeriodEnd" name="students[{{$index}}].studyPeriodEnd" values="formState.studyPeriods" aria-label="{{\'directive.student.valisEndDate\' | translate}}"></hois-select> <md-datepicker ng-if="!row.isPeriod" ng-model="row.endDate" name="students[{{$index}}].endDate"></md-datepicker> <div ng-if="row.isPeriod" class="invalid" ng-messages="directiveForm[\'students[\'+$index+\'].studyPeriodEnd\'].$error"> <p ng-message="required">{{\'main.required\' | translate}}</p> </div> <div ng-if="!row.isPeriod" class="invalid" ng-messages="directiveForm[\'students[\'+$index+\'].endDate\'].$error"> <p ng-message="required">{{\'main.required\' | translate}}</p> </div> </td> <td md-cell> <hois-classifier-select ng-model="row.abroadPurpose" name="students[{{$index}}].abroadPurpose" model-value-attr="code" main-classifier-code="VALISOPE_EESMARK" aria-label="{{\'directive.student.abroadPurpose\' | translate}}"></hois-classifier-select> <div class="invalid" ng-messages="directiveForm[\'students[\'+$index+\'].abroadPurpose\'].$error"> <p ng-message="required">{{\'main.required\' | translate}}</p> </div> </td> <td md-cell> <hois-classifier-select ng-model="row.abroadProgramme" name="students[{{$index}}].abroadProgramme" model-value-attr="code" main-classifier-code="VALISKOOL_PROGRAMM" aria-label="{{\'directive.student.abroadProgramme\' | translate}}"></hois-classifier-select> <div class="invalid" ng-messages="directiveForm[\'students[\'+$index+\'].abroadProgramme\'].$error"> <p ng-message="required">{{\'main.required\' | translate}}</p> </div> </td> <td md-cell> <a ng-click="deleteStudent(row)" md-no-ink class="remove">&times;</a> </td> </tr> </tbody> </table> </md-table-container>'),a.put("directive/directive.type.valis.view.html",'<md-table-container> <table md-table md-row-select="formState.cancelSelect" multiple ng-model="formState.selectedStudents" class="secondary-table"> <thead md-head> <tr md-row> <th md-column>{{\'directive.student.fullname\' | translate}}</th> <th md-column>{{\'directive.student.idcode\' | translate}}</th> <th md-column>{{\'directive.student.isAbroad\' | translate}}</th> <th md-column>{{\'directive.student.school\' | translate}}</th> <th md-column>{{\'directive.student.country\' | translate}}</th> <th md-column>{{\'directive.student.isPeriod\' | translate}}</th> <th md-column>{{\'directive.student.valisStartDate\' | translate}}</th> <th md-column>{{\'directive.student.valisEndDate\' | translate}}</th> <th md-column>{{\'directive.student.abroadPurpose\' | translate}}</th> <th md-column>{{\'directive.student.abroadProgramme\' | translate}}</th> </tr> </thead> <tbody md-body> <tr md-row ng-disabled="!row.selectable" md-select="row" md-select-id="student" md-auto-select ng-repeat="row in record.students" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell> <a class="md-primary" ng-href="#/students/{{::row.student}}/main">{{::row.fullname}}</a> </td> <td md-cell>{{::row.idcode}}</td> <td md-cell>{{row.isAbroad ? \'directive.student.foreignEducationalInstitute\' : \'directive.student.estonianEducationalInstitute\' | translate}}</td> <td md-cell> <hois-classifier-value ng-if="!row.isAbroad" ng-model="row.ehisSchool" main-classifier-code="EHIS_KOOL"></hois-classifier-value> <div ng-if="row.isAbroad">{{row.abroadSchool}}</div> </td> <td md-cell> <hois-classifier-value ng-model="row.country" main-classifier-code="RIIK"></hois-classifier-value> </td> <td md-cell>{{row.isPeriod ? \'main.period\' : \'main.date\' | translate}}</td> <td md-cell> <div ng-if="row.isPeriod">{{currentLanguageNameField(row.newStudyPeriodStart)}}</div> <hois-value ng-if="!row.isPeriod" value="row.startDate | hoisDate"></hois-value> </td> <td md-cell> <div ng-if="row.isPeriod">{{currentLanguageNameField(row.newStudyPeriodEnd)}}</div> <hois-value ng-if="!row.isPeriod" value="row.endDate | hoisDate"></hois-value> </td> <td md-cell> <hois-classifier-value ng-model="row.abroadPurpose" main-classifier-code="VALISOPE_EESMARK"></hois-classifier-value> </td> <td md-cell> <hois-classifier-value ng-model="row.abroadProgramme" main-classifier-code="VALISKOOL_PROGRAMM"></hois-classifier-value> </td> </tr> </tbody> </table> </md-table-container>'),a.put("directive/directive.view.html",'<div layout-padding ng-cloak class="form-readonly"> <div flex> <div layout="row" layout-xs="column" flex> <div flex="70"> <div layout="row" layout-sm="column" layout-xs="column" ng-if="record.type === \'KASKKIRI_TYHIST\'"> <md-input-container flex="100" flex-sm="100" flex-xs="100"> <label class="textInput">{{\'directive.canceledDirective\' | translate}}</label> <hois-value value="record.canceledDirective.nameEt" href-value="\'#/directives/\' + record.canceledDirective.id + \'/view\'"></hois-value> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="45" flex-sm="100" flex-xs="100"> <label>{{\'directive.headline\' | translate}}</label> <hois-value value="record.headline"></hois-value> </md-input-container> <md-input-container flex="50" flex-sm="100" flex-xs="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'directive.directiveNr\' | translate}}</label> <hois-value value="record.directiveNr"></hois-value> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="45" flex-sm="100" flex-xs="100"> <label>{{\'directive.type\' | translate}}</label> <hois-classifier-value ng-model="record.type" main-classifier-code="KASKKIRI"></hois-classifier-value> </md-input-container> <md-input-container flex="50" flex-sm="100" flex-xs="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'directive.preamble\' | translate}}</label> <hois-value value="record.preamble"></hois-value> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column" ng-if="record.type === \'KASKKIRI_STIPTOET\' || record.type === \'KASKKIRI_STIPTOETL\'"> <md-input-container flex="45" flex-sm="100" flex-xs="100"> <label>{{\'directive.scholarshipType\' | translate}}</label> <hois-classifier-value ng-model="record.scholarshipType" main-classifier-code="STIPTOETUS"></hois-classifier-value> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="45" flex-sm="100" flex-xs="100"> <label>{{\'directive.inserted\' | translate}}</label> <hois-value value="record.inserted | hoisDate"></hois-value> </md-input-container> <md-input-container flex="50" flex-sm="100" flex-xs="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'directive.confirmDate\' | translate}}</label> <hois-value value="record.confirmDate | hoisDate"></hois-value> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="45" flex-sm="100" flex-xs="100"> <label>{{\'directive.addInfo\' | translate}}</label> <hois-value value="record.addInfo"></hois-value> </md-input-container> <md-input-container flex="50" flex-sm="100" flex-xs="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'directive.directiveCoordinator\' | translate}}</label> <hois-value value="record.directiveCoordinator.nameEt"></hois-value> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="45" flex-sm="100" flex-xs="100"> <label>{{\'directive.status\' | translate}}</label> <hois-classifier-value ng-model="record.status" main-classifier-code="KASKKIRI_STAATUS"></hois-classifier-value> </md-input-container> </div> </div> </div> <md-table-container> <fieldset> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'directive.studentList\' | translate}}</legend> <div ng-include="formState.templateUrl" flex></div> </fieldset> </md-table-container> <div>&nbsp;</div> <md-table-container ng-if="record.cancelingDirectives && record.cancelingDirectives.length > 0"> <fieldset> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'directive.cancelingDirectives\' | translate}}</legend> <table md-table> <thead md-head> <tr md-row> <th md-column>{{\'directive.headline\' | translate}}</th> <th md-column>{{\'directive.directiveNr\' | translate}}</th> <th md-column>{{\'directive.status\' | translate}}</th> <th md-column>{{\'directive.inserted\' | translate}}</th> <th md-column>{{\'directive.confirmDate\' | translate}}</th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="row in record.cancelingDirectives" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell> <a md-class="md-primary change-button" ng-href="#/directives/{{::row.id}}/view">{{::row.headline}}</a> </td> <td md-cell>{{::row.directiveNr}}</td> <td md-cell>{{currentLanguageNameField(row.status)}}</td> <td md-cell>{{::row.inserted | hoisDate}}</td> <td md-cell>{{::row.confirmDate | hoisDate}}</td> </tr> </tbody> </table> </fieldset> </md-table-container> <md-button ng-if="record.id && record.userCanEdit" class="md-primary md-raised" ng-href="#/directives/{{record.id}}/edit?_noback">{{\'main.button.change\' | translate}}</md-button> <md-button ng-click="back(\'#/directives\')" class="md-raised">{{\'main.button.back\' | translate}}</md-button> <md-button ng-click="confirmDirective()" ng-if="record.status === \'KASKKIRI_STAATUS_KINNITAMISEL\' && record.userCanConfirm" class="md-raised">{{\'directive.confirmDuringTest\' | translate}}</md-button> <md-button ng-click="cancelDirective()" ng-if="record.userCanCancel" class="md-raised">{{\'directive.cancel\' | translate}}</md-button> </div> </div>'),a.put("directive/invalid.student.delete.dialog.html",'<md-dialog aria-label="grade add dialog" flex="60" flex-sm="100" flex-xs="100"> <md-dialog-content> <div class="md-dialog-content"> <p>{{\'directive.studentsNotValid\' | translate}}</p> <md-table-container> <table md-table> <thead md-head> <tr md-row> <th md-column>{{\'directive.student.fullname\' | translate}}</th> <th md-column>{{\'directive.student.idcode\' | translate}}</th> <th md-column>{{\'directive.student.reason\' | translate}}</th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="row in students" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell>{{::row.fullname}}</td> <td md-cell>{{::row.idcode}}</td> <td md-cell>{{row.reason | translate}}</td> </tr> </tbody> </table> </md-table-container> </div> </md-dialog-content> <md-dialog-actions layout="row" layout-align="start center"> <md-button ng-click="submit()" class="md-raised md-primary">{{\'main.yes\' | translate}}</md-button> <md-button ng-click="cancel()" class="md-raised">{{\'main.no\' | translate}}</md-button> </md-dialog-actions> </md-dialog>'),
a.put("directive/list.html",'<div class="ois-form-layout-padding ois-form-layout" ng-cloak> <div flex> <form ng-submit="loadData()" novalidate class="nomargin"> <fieldset tabindex="1"> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'main.searchlabel\' | translate}}</legend> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="45" flex-sm="100" flex-xs="100"> <label class="textInput">{{\'directive.type\' | translate}}</label> <hois-classifier-select ng-model="criteria.type" name="type" model-value-attr="code" main-classifier-code="KASKKIRI" filter-values="formState.excludedTypes" multiple autofocus></hois-classifier-select> </md-input-container> <md-input-container flex="50" flex-sm="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label class="textInput">{{\'directive.headline\' | translate}}</label> <input ng-model="criteria.headline" name="headline" type="text"> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="45" flex-sm="100" flex-xs="100"> <label>{{\'directive.directiveNr\' | translate}}</label> <input ng-model="criteria.directiveNr" name="directiveNr" type="text"> </md-input-container> <md-input-container flex="20" flex-sm="100" flex-xs="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'directive.confirmDateFrom\' | translate}}</label> <md-datepicker ng-model="criteria.confirmDateFrom"></md-datepicker> </md-input-container> <md-input-container flex="20" flex-sm="100" flex-xs="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'directive.confirmDateThru\' | translate}}</label> <md-datepicker ng-model="criteria.confirmDateThru" md-min-date="directive.confirmDateFrom"></md-datepicker> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="45" flex-sm="100" flex-xs="100"> <label>{{\'directive.status\' | translate}}</label> <hois-classifier-select ng-model="criteria.status" name="status" model-value-attr="code" main-classifier-code="KASKKIRI_STAATUS" multiple></hois-classifier-select> </md-input-container> <md-input-container flex="20" flex-sm="100" flex-xs="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'directive.insertedFrom\' | translate}}</label> <md-datepicker ng-model="criteria.insertedFrom"></md-datepicker> </md-input-container> <md-input-container flex="20" flex-sm="100" flex-xs="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'directive.insertedThru\' | translate}}</label> <md-datepicker ng-model="criteria.insertedThru" md-min-date="directive.insertedFrom"></md-datepicker> </md-input-container> </div> <div layout="row"> <md-button type="submit" class="md-raised md-primary">{{\'main.button.search\' | translate}}</md-button> <md-button class="md-raised" ng-click="clearCriteria()">{{\'main.button.clear\' | translate}}</md-button> <md-button class="md-raised" ng-if="isAuthorized(\'ROLE_OIGUS_M_TEEMAOIGUS_KASKKIRI\')" ng-href="#/directives/new">{{\'directive.create\' | translate}}</md-button> </div> <div flex-xs="0" flex-gt-xs="0" flex-gt-sm="50"></div> </fieldset> </form> </div> </div> <div layout-padding> <div flex> <md-table-container> <table md-table md-progress="tabledata.$promise"> <thead md-head md-order="criteria.order" md-on-reorder="loadData"> <tr md-row> <th md-column md-order-by="headline">{{\'directive.headline\' | translate}}</th> <th md-column md-order-by="directiveNr">{{\'directive.directiveNr\' | translate}}</th> <th md-column md-order-by="{{currentLanguage()===\'en\' ? \'type.nameEn\' : \'type.nameEt\'}}">{{\'directive.type\' | translate}}</th> <th md-column md-order-by="{{currentLanguage()===\'en\' ? \'status.nameEn\' : \'status.nameEt\'}}">{{\'directive.status\' | translate}}</th> <th md-column md-order-by="inserted">{{\'directive.inserted\' | translate}}</th> <th md-column md-order-by="confirmDate">{{\'directive.confirmDate\' | translate}}</th> <th></th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="row in tabledata.content" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell> <a md-class="md-primary change-button" ng-href="#/directives/{{::row.id}}/view">{{::row.headline}}</a> </td> <td md-cell>{{::row.directiveNr}}</td> <td md-cell>{{currentLanguageNameField(row.type)}}</td> <td md-cell>{{currentLanguageNameField(row.status)}}</td> <td md-cell>{{::row.inserted | hoisDate}}</td> <td md-cell>{{::row.confirmDate | hoisDate}}</td> <td md-cell> <md-button ng-if="row.status.code === \'KASKKIRI_STAATUS_KOOSTAMISEL\' && isAuthorized(\'ROLE_OIGUS_M_TEEMAOIGUS_KASKKIRI\')" md-no-ink class="md-primary change-button" ng-href="#/directives/{{::row.id}}/edit">{{\'main.button.change\' | translate}}</md-button> </td> </tr> </tbody> </table> </md-table-container> <md-table-pagination md-limit="criteria.size" md-limit-options="[10, 20, 50]" md-page="criteria.page" md-total="{{tabledata.totalElements}}" md-on-paginate="loadData" md-label="{page: \'{{\'main.page\' | translate}}:\', rowsPerPage: \'{{\'main.rowPerPage\' | translate}}:\', of: \'{{\'main.of\' | translate}}\'}" md-page-select></md-table-pagination> </div> </div>'),a.put("directive/student.select.dialog.html",'<md-dialog aria-label="grade add dialog" flex="60" flex-sm="100" flex-xs="100"> <form name="directiveStudentForm" ng-submit="loadData()" novalidate ng-cloak> <div flex> <md-input-container class="md-block"> <label class="textInput">{{\'directive.student.firstname\' | translate}}</label> <input type="text" ng-model="criteria.firstname" name="firstname" md-autofocus> </md-input-container> <md-input-container class="md-block"> <label class="textInput">{{\'directive.student.lastname\' | translate}}</label> <input type="text" ng-model="criteria.lastname" name="lastname"> </md-input-container> <md-input-container class="md-block"> <label class="textInput">{{\'directive.student.idcode\' | translate}}</label> <input type="text" ng-model="criteria.idcode" name="idcode"> </md-input-container> <div layout="row" class="horizontal-radio-group" ng-if="formState.type === \'KASKKIRI_EKSMAT\'"> <md-input-container flex="20" flex-xs="100"> <label class="textInput">{{\'directive.student.isapplication\' | translate}}</label> </md-input-container> <md-input-container layout="row" layout-align="start center" flex="70"> <md-radio-group ng-model="criteria.application" layout="row"> <md-radio-button ng-value="true" aria-label="yes">{{ \'main.yes\' | translate }}</md-radio-button> <md-radio-button ng-value="false" aria-label="no">{{ \'main.no\' | translate }}</md-radio-button> </md-radio-group> </md-input-container> </div> </div> <div layout="row"> <md-button type="submit" class="md-raised md-primary">{{\'main.button.search\' | translate}}</md-button> <md-button class="md-raised" ng-click="clearCriteria()">{{\'main.button.clear\' | translate}}</md-button> </div> <md-dialog-content> <div class="md-dialog-content"> <md-table-container> <table md-table md-row-select multiple ng-model="formState.selectedStudents" md-progress="tabledata.$promise"> <thead md-head> <tr md-row> <th md-column>{{\'directive.student.fullname\' | translate}}</th> <th md-column>{{\'directive.student.idcode\' | translate}}</th> <th md-column ng-if="formState.type === \'KASKKIRI_LOPET\'">{{\'directive.student.curriculum\' | translate}}</th> <th md-column ng-if="formState.type === \'KASKKIRI_LOPET\'">{{\'directive.student.studentGroup\' | translate}}</th> </tr> </thead> <tbody md-body> <tr md-row md-select="row" md-select-id="id" md-auto-select ng-repeat="row in tabledata.content" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell>{{::row.fullname}}</td> <td md-cell>{{::row.idcode}}</td> <td md-cell ng-if="formState.type === \'KASKKIRI_LOPET\'">{{$root.currentLanguageNameField(row.curriculumVersion)}}</td> <td md-cell ng-if="formState.type === \'KASKKIRI_LOPET\'">{{::row.studentGroup}}</td> </tr> </tbody> </table> </md-table-container> </div> </md-dialog-content> <md-dialog-actions layout="row" layout-align="start center"> <md-button ng-click="select()" class="md-raised md-primary">{{\'main.button.add\' | translate}}</md-button> <md-button ng-click="cancel()" class="md-raised">{{\'main.button.close\' | translate}}</md-button> </md-dialog-actions> </form> </md-dialog>'),a.put("ehis/logentry.view.dialog.html",'<md-dialog aria-label="grade add dialog" flex="75" flex-xs="100"> <md-toolbar> <div class="md-toolbar-tools"> <h2 flex>{{\'ehis.message.\' + record.wsName | translate}}</h2> <span flex> <hois-value class="md-button md-raised" ng-if="record.directive.id" value="record.directive.nameEt" href-value="\'#/directives/\' + record.directive.id + \'/view\'"></hois-value> <hois-value class="md-button md-raised" ng-if="record.teacher.id" value="record.teacher.nameEt" href-value="\'#/teachers/\' + record.teacher.id"></hois-value> </span> <md-button class="md-icon-button" ng-click="cancel()"> <md-icon md-font-set="material-icons">close</md-icon> </md-button> </div> </md-toolbar> <md-dialog-content> <div class="md-dialog-content"> <div layout="row"> <md-input-container> <label>{{\'ehis.message.request\' | translate}}</label>&nbsp; <pre><hois-value value="record.request | limitTo:requestLength"></hois-value></pre> <a ng-click="showAll(true)" ng-if="requestLength">&hellip;</a> </md-input-container> </div> <hr> <div layout="row"> <md-input-container> <label>{{\'ehis.message.response\' | translate}}</label>&nbsp; <pre><hois-value value="record.response | limitTo:responseLength"></hois-value></pre> <a ng-click="showAll(false)" ng-if="responseLength">&hellip;</a> </md-input-container> </div> </div> </md-dialog-content> <md-dialog-actions layout="row" layout-align="start center"> <md-button ng-click="cancel()" class="md-raised">{{\'main.button.back\' | translate}}</md-button> </md-dialog-actions> </md-dialog>'),a.put("ehis/logs.view.html",'<div layout-padding> <div flex> <fieldset> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'main.searchlabel\' | translate}}</legend> <form ng-submit="loadData()" layout="column" name="ehisLogForm"> <div flex> <div layout="row"> <md-input-container flex="45" flex-md="100" flex-sm="100" flex-xs="100"> <label>{{\'ehis.message.name\' | translate}}</label> <md-select ng-model="criteria.messageType"> <md-option md-option-empty></md-option> <md-option ng-repeat="val in messageTypes" ng-value="val"> {{\'ehis.message.\' + val | translate}} </md-option> </md-select> </md-input-container> <div flex="50" flex-offset="5"> <label class="textInput">{{\'ehis.message.sentDatesRange\' | translate}}</label> <md-input-container flex="25" flex-md="100" flex-sm="100" flex-xs="100"> <label>{{\'main.from\' | translate}}</label> <md-datepicker ng-model="criteria.from" md-max-date="criteria.thru"></md-datepicker> </md-input-container> <md-input-container flex flex-offset="5"> <label>{{\'main.thru\' | translate}}</label> <md-datepicker ng-model="criteria.thru" md-min-date="criteria.from"></md-datepicker> </md-input-container> </div> </div> <div layout="row"> <md-checkbox flex="45" ng-model="criteria.errors" aria-label="show only errors"> {{\'ehis.message.onlyErrors\' | translate}} </md-checkbox> <div flex="50" flex-offset="5" ng-if="criteria.messageType !== \'laeKorgharidus\'"> <hois-autocomplete label="teacher.label" ng-model="criteria.teacher" method="teachers"></hois-autocomplete> </div> </div> </div> <div layout="row"> <md-button type="submit" class="md-raised md-primary">{{\'main.button.search\' | translate}}</md-button> <md-button class="md-raised" ng-click="clearCriteria()">{{\'main.button.clear\' | translate}}</md-button> </div> </form> </fieldset> </div> </div> <div layout-padding> <div flex> <md-table-container> <table md-table md-progress="tabledata.$promise"> <thead md-head md-order="criteria.order" md-on-reorder="loadData"> <tr md-row> <th md-column>{{\'ehis.message.name\' | translate}}</th> <th md-column md-order-by="inserted">{{\'ehis.message.time\' | translate}}</th> <th md-column>{{\'ehis.message.directive\' | translate}}</th> <th md-column>{{\'ehis.message.error\' | translate}}</th> <th md-column>{{\'ehis.message.message\' | translate}}</th> <th md-column>{{\'ehis.message.insertedBy\' | translate}}</th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="row in tabledata.content" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell> <a md-no-ink class="md-primary" ng-click="logentry(row)">{{::(\'ehis.message.\' + row.wsName) | translate}}</a> </td> <td md-cell>{{::row.inserted | hoisDateTime}}</td> <td md-cell>{{currentLanguageNameField(row.directive)}}</td> <td md-cell>{{row.error ? \'main.yes\' : \'main.no\' | translate}}</td> <td md-cell>{{::row.logTxt}}</td> <td md-cell>{{::row.insertedBy}}</td> </tr> </tbody> </table> </md-table-container> <md-table-pagination md-limit="criteria.size" md-limit-options="[10, 20, 50]" md-page="criteria.page" md-total="{{tabledata.totalElements}}" md-on-paginate="loadData" md-label="{page: \'{{\'main.page\' | translate}}:\', rowsPerPage: \'{{\'main.rowPerPage\' | translate}}:\', of: \'{{\'main.of\' | translate}}\' }" md-page-select></md-table-pagination> </div> </div>'),a.put("ehis/student.html",'<div layout-padding> <div flex> <form ng-submit="exportStudents()" layout="column" name="studentExportForm"> <div flex> <div layout="row"> <md-input-container flex="25" flex-md="100" flex-sm="100" flex-xs="100"> <label>{{\'ehis.student.dataType\' | translate}}</label> <md-select ng-model="criteria.dataType" required> <md-option ng-repeat="val in dataTypes" ng-value="val"> {{ \'ehis.student.\' + val | translate}} </md-option> </md-select> </md-input-container> </div> <div layout="row"> <md-input-container flex="20" flex-sm="100" flex-xs="100" ng-if="displayDates.indexOf(criteria.dataType) !== -1"> <label>{{\'ehis.student.sentDatesRange\' | translate}}</label> <input type="hidden"> </md-input-container> <div flex="33" ng-if="displayDates.indexOf(criteria.dataType) !== -1"> <md-input-container flex> <label>{{\'main.from\' | translate}}</label> <md-datepicker ng-model="criteria.from" md-max-date="criteria.thru" required></md-datepicker> </md-input-container> <md-input-container flex> <label>{{\'main.thru\' | translate}}</label> <md-datepicker ng-model="criteria.thru" md-min-date="criteria.from" required></md-datepicker> </md-input-container> </div> </div> </div> <div layout="row"> <md-button type="submit" class="md-raised md-primary">{{\'ehis.student.sendToEhis\' | translate}}</md-button> </div> </form> </div> </div> <div ng-if="result.length > 0"> <div layout-padding> <fieldset> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'ehis.student.result\' | translate}}</legend> <div flex> <md-table-container> <table md-table> <thead md-head> <tr md-row> <th md-column>{{\'ehis.student.name\' | translate}}</th> <th md-column>{{\'ehis.student.idcode\' | translate}}</th> <th md-column>{{\'ehis.student.curriculum\' | translate}}</th> <th md-column ng-if="criteria.dataType === \'GRADUATION\'">{{\'ehis.student.docNr\' | translate}}</th> <th md-column ng-if="criteria.dataType === \'GRADUATION\'">{{\'ehis.student.cumLaude\' | translate}}</th> <th md-column ng-if="criteria.dataType === \'GRADUATION\'">{{\'ehis.student.academicNr\' | translate}}</th> <th md-column ng-if="criteria.dataType === \'CURRICULA_FULFILMENT\'">{{\'ehis.student.percentage\' | translate}}</th> <th md-column ng-if="criteria.dataType === \'CURRICULA_FULFILMENT\'">{{\'ehis.student.points\' | translate}}</th> <th md-column ng-if="criteria.dataType === \'FOREIGN_STUDY\'">{{\'ehis.student.fromDate\' | translate}}</th> <th md-column ng-if="criteria.dataType === \'FOREIGN_STUDY\'">{{\'ehis.student.toDate\' | translate}}</th> <th md-column ng-if="criteria.dataType === \'FOREIGN_STUDY\'">{{\'ehis.student.abroadPurpose\' | translate}}</th> <th md-column ng-if="criteria.dataType === \'FOREIGN_STUDY\'">{{\'ehis.student.points\' | translate}}</th> <th md-column ng-if="criteria.dataType === \'FOREIGN_STUDY\'">{{\'ehis.student.schoolName\' | translate}}</th> <th md-column ng-if="criteria.dataType === \'FOREIGN_STUDY\'">{{\'ehis.student.country\' | translate}}</th> <th md-column ng-if="criteria.dataType === \'FOREIGN_STUDY\'">{{\'ehis.student.abroadProgramme\' | translate}}</th> <th md-column>{{\'ehis.student.error\' | translate}}</th> <th md-column>{{\'ehis.student.message\' | translate}}</th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="row in result" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell><a ng-href="/#/students/{{::row.studentId}}/main">{{::row.name}}</a></td> <td md-cell>{{::row.idcode}}</td> <td md-cell>{{::row.curriculum}}</td> <td md-cell ng-if="criteria.dataType === \'GRADUATION\'">{{::row.docNr}}</td> <td md-cell ng-if="criteria.dataType === \'GRADUATION\'">{{row.cumLaude ? \'main.yes\' : \'main.no\' | translate}}</td> <td md-cell ng-if="criteria.dataType === \'GRADUATION\'">{{::row.academicNr}}</td> <td md-cell ng-if="criteria.dataType === \'CURRICULA_FULFILMENT\'">{{::row.percentage}}</td> <td md-cell ng-if="criteria.dataType === \'CURRICULA_FULFILMENT\'">{{::row.points}}</td> <td md-cell ng-if="criteria.dataType === \'FOREIGN_STUDY\'">{{::row.fromDate | hoisDate}}</td> <td md-cell ng-if="criteria.dataType === \'FOREIGN_STUDY\'">{{::row.toDate | hoisDate}}</td> <td md-cell ng-if="criteria.dataType === \'FOREIGN_STUDY\'"> <hois-classifier-value ng-model="row.abroadPurpose" main-classifier-code="VALISOPE_EESMARK"></hois-classifier-value> </td> <td md-cell ng-if="criteria.dataType === \'FOREIGN_STUDY\'">{{::row.points}}</td> <td md-cell ng-if="criteria.dataType === \'FOREIGN_STUDY\'">{{::row.schoolName}}</td> <td md-cell ng-if="criteria.dataType === \'FOREIGN_STUDY\'"> <hois-classifier-value ng-model="row.country" main-classifier-code="RIIK"></hois-classifier-value> </td> <td md-cell ng-if="criteria.dataType === \'FOREIGN_STUDY\'"> <hois-classifier-value ng-model="row.abroadProgramme" main-classifier-code="VALISKOOL_PROGRAMM"></hois-classifier-value> </td> <td md-cell>{{row.error ? \'main.no\' : \'main.yes\' | translate}}</td> <td md-cell>{{::row.message}}</td> </tr> </tbody> </table> </md-table-container> </div> </fieldset> </div> </div>'),a.put("ehis/teacher.export.html",'<div layout-padding> <div flex> <form ng-submit="exportTeachers()" layout="column" name="teacherExportForm"> <div flex> <div flex="60" flex-sm="100" flex-xs="100" layout="row" class="horizontal-radio-group"> <md-input-container flex="20" flex-xs="100"> <label class="md-required common-label">{{\'ehis.teacher.radioData\' | translate}}</label> </md-input-container> <md-input-container layout="row" layout-align="start center" flex="60"> <md-radio-group name="datachoice" ng-model="teacher.allDates" required layout="row"> <md-radio-button ng-value="true">{{ \'ehis.teacher.allData\' | translate }}</md-radio-button> <md-radio-button ng-value="false">{{ \'ehis.teacher.changedData\' | translate }}</md-radio-button> </md-radio-group> </md-input-container> </div> <div flex-xs="100" flex-gt-xs="100" layout="column" ng-if="!teacher.allDates"> <div layout="row"> <md-input-container flex="25" flex-md="100" flex-sm="100" flex-xs="100"> <label>{{\'ehis.teacher.importRange\' | translate}}</label> <input type="hidden"> </md-input-container> <md-input-container flex="15" flex-md="100" flex-sm="100" flex-xs="100"> <label>{{\'main.from\' | translate}}</label> <md-datepicker ng-required="!teacher.allDates" ng-model="teacher.changeDateFrom" md-max-date="teacher.changeDateTo"></md-datepicker> </md-input-container> <md-input-container flex="15" flex-md="100" flex-sm="100" flex-xs="100"> <label>{{\'main.thru\' | translate}}</label> <md-datepicker ng-required="!teacher.allDates" ng-model="teacher.changeDateTo" md-min-date="teacher.changeDateFrom"></md-datepicker> </md-input-container> </div> </div> <div layout="row"> <div flex="60"> <md-checkbox ng-model="teacher.subjectData" class="md-primary"> {{(higher ? \'ehis.teacher.subjectData\' : \'ehis.teacher.moduleData\') | translate}} </md-checkbox> </div> </div> <div layout="row"> <md-button type="submit" class="md-raised md-primary">{{\'ehis.teacher.sendToEhis\' | translate}}</md-button> </div> </div> </form> </div> </div> <div ng-if="result.length > 0"> <div layout-padding> <div flex> {{\'ehis.teacher.response\' | translate}} </div> </div> <div layout-padding> <div flex> <md-table-container> <table md-table md-progress="result"> <thead md-head> <tr md-row> <th md-column>{{\'ehis.teacher.name\' | translate}}</th> <th md-column>{{\'ehis.teacher.message\' | translate}}</th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="row in result" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell>{{::row.fullName}}</td> <td md-cell>{{::row.message}}</td> </tr> </tbody> </table> </md-table-container> </div> </div> </div>'),a.put("exam/registration.student.html",'<div layout-padding> <div flex> <md-table-container> <table md-table md-progress="tabledata.$promise"> <thead md-head md-order="criteria.order" md-on-reorder="loadData"> <tr md-row> <th md-column md-order-by="s.code,{{currentLanguage()===\'en\' ? \'s.nameEn\' : \'s.nameEt\'}}">{{\'exam.subject\' | translate}}</th> <th md-column>{{\'exam.teacher\' | translate}}</th> <th md-column md-order-by="sm.{{currentLanguageNameField()}}">{{\'exam.assessment\' | translate}}</th> <th md-column md-order-by="tp.{{currentLanguageNameField()}}">{{\'exam.type\' | translate}}</th> <th md-column md-order-by="te.start">{{\'exam.date\' | translate}}</th> <th md-column>{{\'exam.room\' | translate}}</th> <th md-column md-order-by="deadline">{{\'exam.deadline\' | translate}}</th> <th md-column>{{\'exam.addInfo\' | translate}}</th> <th></th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="row in tabledata.content" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell>{{currentLanguageNameField(row.subject)}}</td> <td md-cell> <div ng-repeat="it in row.teachers"> {{it}} </div> </td> <td md-cell>{{currentLanguageNameField(row.assessment)}}</td> <td md-cell>{{currentLanguageNameField(row.type)}}</td> <td md-cell>{{row.start | hoisDateTime}}</td> <td md-cell> <div ng-repeat="it in row.rooms"> {{it}} </div> </td> <td md-cell>{{row.deadline | hoisDate}}</td> <td md-cell>{{row.addInfo}}</td> <td> <md-button ng-if="row.registered" md-no-ink class="md-primary change-button" ng-click="register(row)">{{\'exam.register\' | translate}}</md-button> <md-button ng-if="!row.registered" md-no-ink class="md-primary change-button" ng-click="unregister(row)">{{\'exam.unregister\' | translate}}</md-button> </td> </tr> </tbody> </table> </md-table-container> <md-table-pagination md-limit="criteria.size" md-limit-options="[10, 20, 50]" md-page="criteria.page" md-total="{{tabledata.totalElements}}" md-on-paginate="loadData" md-label="{page: \'{{\'main.page\' | translate}}:\', rowsPerPage: \'{{\'main.rowPerPage\' | translate}}:\', of: \'{{\'main.of\' | translate}}\'}" md-page-select></md-table-pagination> </div> </div>'),a.put("exam/search.html",'<div class="ois-form-layout-padding ois-form-layout" ng-cloak> <div flex> <fieldset> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'main.searchlabel\' | translate}}</legend> <form ng-submit="loadData()" novalidate> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="45" flex-sm="100" flex-xs="100"> <label>{{\'exam.studyPeriod\' | translate}}</label> <hois-select ng-model="criteria.studyPeriod" values="formState.studyPeriods"></hois-select> </md-input-container> <md-input-container flex="50" flex-sm="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label class="textInput">{{\'exam.subject\' | translate}}</label> <input ng-model="criteria.subject" type="text"> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="10" flex-sm="100" flex-xs="100" flex-offset="0" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'exam.date\' | translate}}</label> <input type="hidden"> </md-input-container> <div flex> <md-input-container> <label>{{\'main.from\' | translate}}</label> <md-datepicker ng-model="criteria.from" md-max-date="criteria.thru"></md-datepicker> </md-input-container> <md-input-container> <label>{{\'main.thru\' | translate}}</label> <md-datepicker ng-model="criteria.thru" md-min-date="criteria.from"></md-datepicker> </md-input-container> </div> <md-input-container flex="50" flex-sm="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0" ng-if="auth.isAdmin()"> <label class="textInput">{{\'exam.teacher\' | translate}}</label> <input ng-model="criteria.teacher" type="text"> </md-input-container> </div> <div layout="row"> <md-button type="submit" class="md-raised md-primary">{{\'main.button.search\' | translate}}</md-button> <md-button class="md-raised" ng-click="clearCriteria()">{{\'main.button.clear\' | translate}}</md-button> </div> <div flex-xs="0" flex-gt-xs="0" flex-gt-sm="50"></div> </form> </fieldset> </div> </div> <div layout-padding> <div flex> <md-table-container> <table md-table md-progress="tabledata.$promise"> <thead md-head md-order="criteria.order" md-on-reorder="loadData"> <tr md-row> <th md-column md-order-by="s.code,{{currentLanguage()===\'en\' ? \'s.nameEn\' : \'s.nameEt\'}}">{{\'exam.subject\' | translate}}</th> <th md-column>{{\'exam.teacher\' | translate}}</th> <th md-column md-order-by="te.start">{{\'exam.date\' | translate}}</th> <th md-column md-order-by="9">{{\'exam.start\' | translate}}</th> <th md-column md-order-by="tp.{{currentLanguageNameField()}}">{{\'exam.type\' | translate}}</th> <th md-column md-order-by="7">{{\'exam.studentCount\' | translate}}</th> <th></th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="row in tabledata.content" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell> <a md-class="md-primary change-button" ng-href="#/exams/{{::row.id}}/view">{{currentLanguageNameField(row.subject)}}</a> </td> <td md-cell> <div ng-repeat="it in row.teachers"> {{it}} </div> </td> <td md-cell>{{row.start | hoisDate}}</td> <td md-cell>{{row.start | hoisTime}}</td> <td md-cell>{{currentLanguageNameField(row.type)}}</td> <td md-cell>{{::row.studentCount}}</td> <td> <md-button ng-if="row.userCanEdit" md-no-ink class="md-primary change-button" ng-href="#/exams/{{::row.id}}/edit">{{\'main.button.change\' | translate}}</md-button> </td> </tr> </tbody> </table> </md-table-container> <md-table-pagination md-limit="criteria.size" md-limit-options="[10, 20, 50]" md-page="criteria.page" md-total="{{tabledata.totalElements}}" md-on-paginate="loadData" md-label="{page: \'{{\'main.page\' | translate}}:\', rowsPerPage: \'{{\'main.rowPerPage\' | translate}}:\', of: \'{{\'main.of\' | translate}}\'}" md-page-select></md-table-pagination> </div> </div>'),a.put("fakePages/fake.html",""),a.put("generalMessage/general.message.edit.html",'<div layout="column" layout-padding> <div> <form name="generalMessageForm"> <md-input-container class="md-block"> <label class="textInput">{{\'generalmessage.title\' | translate}}</label> <input ng-model="record.title" name="title" type="text" md-maxlength="1000" required autofocus> </md-input-container> <md-input-container class="md-block"> <label class="textInput">{{\'generalmessage.content\' | translate}}</label> <textarea ng-model="record.content" name="content" md-maxlength="4000" required></textarea> </md-input-container> <div layout="row"> <div flex="100"> <md-input-container flex> <label>{{\'generalmessage.validFrom\' | translate}}</label> <md-datepicker ng-model="record.validFrom"></md-datepicker> </md-input-container> <md-input-container flex flex-offset="5"> <label>{{\'generalmessage.validThru\' | translate}}</label> <md-datepicker ng-model="record.validThru" md-min-date="record.validFrom"></md-datepicker> </md-input-container> </div> </div> <div>&nbsp;</div> <fieldset tabindex="1"> <legend ng-class="{invalid: generalMessageForm.$submitted && (!record.targets || record.targets.length === 0)}" md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'generalmessage.targets\' | translate}} *</legend> <div layout="column" class="common-label" ng-repeat="role in roleDefs"> <span> <md-checkbox ng-model="role._selected" ng-change="targetChanged()"> {{currentLanguageNameField(role)}} </md-checkbox> </span> </div> </fieldset> </form> <md-button ng-click="update()" class="md-raised md-primary">{{\'main.button.save\' | translate}}</md-button> <md-button ng-click="delete()" ng-if="record.id" class="md-raised">{{\'main.button.delete\' | translate}}</md-button> <md-button ng-href="#/generalmessages" class="md-raised">{{\'main.button.back\' | translate}}</md-button> </div> </div>'),a.put("generalMessage/general.message.list.html",'<div class="ois-form-layout-padding ois-form-layout" ng-cloak> <div flex> <fieldset tabindex="1"> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'main.searchlabel\' | translate}}</legend> <form ng-submit="loadData()" novalidate> <div flex layout="column"> <md-input-container> <label class="textInput">{{\'generalmessage.title\' | translate}}</label> <input ng-model="criteria.title" type="text" autofocus> </md-input-container> <md-input-container> <label>{{\'generalmessage.targets\' | translate}}</label> <hois-classifier-select ng-model="criteria.targets" model-value-attr="code" main-classifier-code="ROLL" multiple></hois-classifier-select> </md-input-container> <div layout="row" flex> <md-input-container> <label>{{\'generalmessage.validFrom\' | translate}}</label> <md-datepicker ng-model="criteria.validFrom"></md-datepicker> </md-input-container> <md-input-container flex-offset="5"> <label>{{\'generalmessage.validThru\' | translate}}</label> <md-datepicker ng-model="criteria.validThru" md-min-date="criteria.validFrom"></md-datepicker> </md-input-container> </div> <div layout="row"> <md-button type="submit" class="md-raised md-primary">{{\'main.button.search\' | translate}}</md-button> <md-button class="md-raised" ng-click="clearCriteria()">{{\'main.button.clear\' | translate}}</md-button> <md-button class="md-raised" ng-if="canEdit" ng-href="#/generalmessages/new">{{\'main.button.create\' | translate}}</md-button> </div> </div> </form> </fieldset> </div> </div> <div layout-padding> <div flex> <md-table-container> <table md-table md-progress="tabledata.$promise"> <thead md-head md-order="criteria.order" md-on-reorder="loadData"> <tr md-row> <th md-column md-order-by="title">{{\'generalmessage.title\' | translate}}</th> <th md-column md-order-by="validFrom">{{\'generalmessage.validFrom\' | translate}}</th> <th md-column md-order-by="validThru">{{\'generalmessage.validThru\' | translate}}</th> <th md-column>{{\'generalmessage.targets\' | translate}}</th> <th md-column></th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="row in tabledata.content" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell> <a md-no-ink class="md-primary change-button" ng-href="#/generalmessages/{{::row.id}}/view">{{::row.title}}</a> </td> <td md-cell>{{::row.validFrom | hoisDate}}</td> <td md-cell>{{::row.validThru | hoisDate}}</td> <td md-cell> <table> <tr ng-repeat="role in row.targets | orderBy: \'nameEt\'"> <td>{{currentLanguageNameField(role)}}</td> </tr> </table> </td> <td md-cell> <md-button md-no-ink class="md-primary change-button" ng-if="canEdit" ng-href="#/generalmessages/{{::row.id}}/edit">{{\'main.button.change\' | translate}}</md-button> </td> </tr> </tbody> </table> </md-table-container> <md-table-pagination md-limit="criteria.size" md-limit-options="[10, 20, 50]" md-page="criteria.page" md-total="{{tabledata.totalElements}}" md-on-paginate="loadData" md-label="{page: \'{{\'main.page\' | translate}}:\', rowsPerPage: \'{{\'main.rowPerPage\' | translate}}:\', of: \'{{\'main.of\' | translate}}\'}" md-page-select></md-table-pagination> </div> </div>'),a.put("generalMessage/general.message.view.html",'<div layout="column" layout-padding class="form-readonly"> <div> <form name="generalMessageForm"> <md-input-container class="md-block"> <label class="textInput">{{\'generalmessage.title\' | translate}}</label> <hois-value value="record.title"></hois-value> </md-input-container> <md-input-container class="md-block"> <label class="textInput">{{\'generalmessage.content\' | translate}}</label> <hois-value value="record.content"></hois-value> </md-input-container> <div layout="row" flex="100"> <md-input-container flex="20"> <label>{{\'generalmessage.validFrom\' | translate}}</label> <hois-value value="record.validFrom | hoisDate"></hois-value> </md-input-container> <md-input-container flex="20" flex-offset="5"> <label>{{\'generalmessage.validThru\' | translate}}</label> <hois-value value="record.validThru | hoisDate"></hois-value> </md-input-container> </div> <div>&nbsp;</div> <fieldset tabindex="1"> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'generalmessage.targets\' | translate}} *</legend> <div layout="column" class="common-label" ng-repeat="role in record.targets"> <span> <hois-classifier-value ng-model="role" main-classifier-code="ROLL"></hois-classifier-value> </span> </div> </fieldset> <md-button class="md-raised md-primary" ng-if="canEdit" ng-href="#/generalmessages/{{record.id}}/edit?_noback">{{\'main.button.change\' | translate}}</md-button> <md-button ng-href="#/generalmessages" class="md-raised">{{\'main.button.back\' | translate}}</md-button> </form> </div> </div>'),
a.put("higherCurriculum/higher.curriculum.grade.add.dialog.html",'<md-dialog aria-label="grade add dialog" flex="30" flex-xs="100"> <form name="dialogForm" ng-cloak> <md-toolbar> <div class="md-toolbar-tools"> <h2>{{"curriculum.grade.editLabel" | translate}}</h2> <span flex></span> <md-button class="md-icon-button" ng-click="cancel()"> <md-icon md-font-set="material-icons">close</md-icon> </md-button> </div> </md-toolbar> <md-dialog-content> <span flex></span> <div class="ois-form-layout" layout="column" layout-margin ng-cloak> <div layout="column"> <md-input-container flex> <label>{{\'curriculum.grade.nameEt\' | translate}}</label> <input ng-model="data.nameEt" type="text" required md-maxlength="255"> </md-input-container> <md-input-container flex> <label>{{\'curriculum.grade.nameEn\' | translate}}</label> <input ng-model="data.nameEn" type="text" required md-maxlength="255"> </md-input-container> <md-input-container flex> <label>{{\'curriculum.grade.nameEtGenitive\' | translate}}</label> <input ng-model="data.nameGenitiveEt" type="text" required md-maxlength="255"> </md-input-container> <md-input-container flex> <label>{{\'curriculum.grade.ehisGrade\' | translate}}</label> <hois-classifier-select ng-model="data.ehisGrade" main-classifier-code="AKAD_KRAAD" required model-value-attr="code"></hois-classifier-select> </md-input-container> </div> </div> </md-dialog-content> <md-dialog-actions layout="row" layout-align="start center"> <md-button class="md-raised md-primary" ng-click="submit()">{{"main.button.save" | translate}}</md-button> <md-button ng-click="delete()" ng-if="editing" class="md-raised">{{"main.button.delete" | translate}}</md-button> <md-button class="md-raised" ng-click="cancel()">{{"main.button.close" | translate}}</md-button> </md-dialog-actions> </form> </md-dialog>'),a.put("higherCurriculum/higher.curriculum.grade.view.dialog.html",'<md-dialog aria-label="grade add dialog" flex="30" flex-xs="100"> <form name="dialogForm" ng-cloak> <md-toolbar> <div class="md-toolbar-tools"> <h2>{{"curriculum.grade.viewLabel" | translate}}</h2> <span flex></span> <md-button class="md-icon-button" ng-click="cancel()"> <md-icon md-font-set="material-icons">close</md-icon> </md-button> </div> </md-toolbar> <md-dialog-content> <span flex></span> <div class="ois-form-layout" layout="column" layout-margin ng-cloak> <div layout="column"> <md-input-container flex> <label>{{\'curriculum.grade.nameEt\' | translate}}</label> <input ng-model="data.nameEt" type="text" readonly> </md-input-container> <md-input-container flex> <label>{{\'curriculum.grade.nameEn\' | translate}}</label> <input ng-model="data.nameEn" type="text" readonly> </md-input-container> <md-input-container flex> <label>{{\'curriculum.grade.nameEtGenitive\' | translate}}</label> <input ng-model="data.nameGenitiveEt" type="text" readonly> </md-input-container> <md-input-container flex> <label>{{\'curriculum.grade.ehisGrade\' | translate}}</label> <hois-classifier-select ng-model="data.ehisGrade" main-classifier-code="AKAD_KRAAD" model-value-attr="code" disabled></hois-classifier-select> </md-input-container> </div> </div> </md-dialog-content> <md-dialog-actions layout="row" layout-align="start center"> <md-button class="md-raised" ng-click="cancel()">{{"main.button.close" | translate}}</md-button> </md-dialog-actions> </form> </md-dialog>'),a.put("higherCurriculum/higher.curriculum.html",'<div class="ois-form-layout-padding"> <form name="higherCurriculumForm" layout="column" class="nomargin"> <div layout="row" layout-sm="column" layout-xs="column"> <fieldset tabindex="1" layout="column" flex="30" flex-sm="100" flex-xs="100" class="higher-curriculum-top-fieldset"> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'curriculum.nameTitle\' | translate}}</legend> <md-input-container flex="100"> <label>{{\'curriculum.nameEt\' | translate}}</label> <input ng-model="curriculum.nameEt" type="text" required md-maxlength="255" ng-readonly="formState.readOnly || formState.notEditableBasicData"> </md-input-container> <md-input-container flex="100"> <label>{{\'curriculum.nameEn\' | translate}}</label> <input ng-model="curriculum.nameEn" type="text" required md-maxlength="255" ng-readonly="formState.readOnly"> </md-input-container> <md-input-container flex="100"> <label>{{\'curriculum.nameGenitiveEt\' | translate}}</label> <input ng-model="curriculum.nameGenitiveEt" type="text" required md-maxlength="255" ng-readonly="formState.readOnly"> </md-input-container> <md-input-container flex="1000"> <label>{{\'curriculum.nameGenitiveEn\' | translate}}</label> <input ng-model="curriculum.nameGenitiveEn" type="text" required md-maxlength="255" ng-readonly="formState.readOnly"> </md-input-container> </fieldset> <fieldset tabindex="2" flex="66" flex-offset="4" flex-sm="100" flex-xs="100" flex-offset-xs="0" flex-offset-sm="0"> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'curriculum.mainData\' | translate}}</legend> <div layout="row" flex> <div flex="45"> <md-checkbox ng-model="curriculum.joint" aria-label="{{\'curriculum.isJoint\' | translate}}" class="md-primary" ng-disabled="formState.readOnly || formState.notEditableBasicData || formState.jointDisabled"> {{\'curriculum.isJoint\' | translate}} </md-checkbox> </div> <md-input-container flex="50" flex-offset="5"> <label>{{\'curriculum.code\' | translate}}</label> <input ng-model="curriculum.code" name="code" type="text" required md-maxlength="25" ng-model-options="{ debounce: 250 }" unique="codeUniqueQuery" ng-readonly="formState.readOnly || formState.notEditableBasicData"> <div ng-messages="higherCurriculumForm.code.$error" ng-show="higherCurriculumForm.code.$dirty"> <div ng-message="notUnique"> {{\'main.messages.error.mustBeUnique\' | translate}} </div> </div> </md-input-container> </div> <div layout="row" flex> <md-input-container flex="45"> <label>{{\'curriculum.studyLevel\' | translate}}</label> <hois-classifier-select ng-model="curriculum.origStudyLevel" main-classifier-code="OPPEASTE" show-only-values="studyLevels" required model-value-attr="code" ng-disabled="formState.readOnly || formState.notEditableBasicData"></hois-classifier-select> </md-input-container> <md-input-container flex="50" flex-offset="5"> <label>{{\'curriculum.merCode\' | translate}}</label> <input ng-model="curriculum.merCode" name="merCode" type="text" md-maxlength="10" ng-model-options="{ debounce: 250 }" unique="merCodeUniqueQuery" ng-readonly="formState.readOnly || formState.notEditableBasicData"> <div ng-messages="higherCurriculumForm.merCode.$error" ng-show="higherCurriculumForm.merCode.$dirty"> <div ng-message="notUnique"> {{\'main.messages.error.mustBeUnique\' | translate}} </div> </div> </md-input-container> </div> <div layout="row" flex> <md-input-container flex="45"> <label>{{\'curriculum.ekrLevel\' | translate}}</label> <hois-classifier-select ng-model="ekrLevel" main-classifier-code="EKR" watch-model="curriculum.origStudyLevel" filter-values connect-main-classifier-code="EKR" select-first-value disabled></hois-classifier-select> </md-input-container> <md-input-container flex="50" flex-offset="5"> <label>{{\'curriculum.creditsEap\' | translate}}</label> <input ng-model="curriculum.credits" type="number" required min="0" max="999" pattern="^\\d+(\\.\\d{1})?$" name="credits" ng-readonly="formState.readOnly || formState.notEditableBasicData"> <div ng-messages="higherCurriculumForm.credits.$error" ng-show="higherCurriculumForm.credits.$dirty"> <div ng-message="min"> {{\'main.messages.error.positive\' | translate}} </div> <div ng-message="max"> {{\'curriculum.error.max999\' | translate}} </div> <div ng-message="pattern"> {{\'stateCurriculum.error.decimalPresision\' | translate}} </div> </div> </md-input-container> </div> <div layout="row" flex> <md-input-container flex="45"> <label>{{\'curriculum.educationLevel\' | translate}}</label> <hois-classifier-select ng-model="educationLevel" main-classifier-code="HARIDUSTASE" watch-model="curriculum.origStudyLevel" filter-values connect-main-classifier-code="HARIDUSTASE" select-first-value disabled></hois-classifier-select> </md-input-container> <md-input-container flex="25" flex-offset="5"> <input ng-model="curriculum.studyPeriodYears" type="number" name="studyPeriodYears" placeholder="{{\'curriculum.studyPeriod\' | translate}} {{\'main.years\' | translate}}" required min="0" max="{{maxStydyYears.max}}" pattern="^\\d+$" ng-readonly="formState.readOnly || formState.notEditableBasicData"> <div ng-messages="higherCurriculumForm.studyPeriodYears.$error" ng-show="higherCurriculumForm.studyPeriodYears.$dirty"> <div ng-message="min"> {{\'main.messages.error.positive\' | translate}} </div> <div ng-message="max"> {{\'curriculum.error.max\' | translate:maxStydyYears }} </div> <div ng-message="pattern"> {{\'stateCurriculum.enter.credits.integer\' | translate}} </div> </div> </md-input-container> <md-input-container flex="20" flex-offset="5"> <input ng-model="curriculum.studyPeriodMonths" type="number" name="studyPeriodMonths" placeholder="{{\'main.months\' | translate}}" min="0" max="11" pattern="^\\d+$" ng-readonly="formState.readOnly || formState.notEditableBasicData"> <div ng-messages="higherCurriculumForm.studyPeriodMonths.$error" ng-show="higherCurriculumForm.studyPeriodMonths.$dirty"> <div ng-message="min"> {{\'main.messages.error.positive\' | translate}} </div> <div ng-message="max"> {{\'curriculum.error.monthsMax11\' | translate}} </div> <div ng-message="pattern"> {{\'stateCurriculum.enter.credits.integer\' | translate}} </div> </div> </md-input-container> </div> <div layout="row" flex> <md-input-container flex="45"> <label>{{\'curriculum.curriculumGroup\' | translate}}</label> <hois-classifier-select ng-model="curriculum.group" required main-classifier-code="OPPEKAVAGRUPP" ng-change="getAreasOfStudy(true)" model-value-attr="code" ng-disabled="formState.readOnly || formState.notEditableBasicData"></hois-classifier-select> </md-input-container> <md-input-container flex="50" flex-offset="5"> <label>{{\'curriculum.studyLanguage\' | translate}}</label> <hois-classifier-select multiple ng-model="curriculum.studyLanguages" required main-classifier-code="OPPEKEEL" model-value-attr="code" criteria="{higher: true}" ng-disabled="formState.readOnly"></hois-classifier-select> </md-input-container> </div> <div layout="row" flex> <md-input-container flex="45"> <label>{{\'curriculum.areaOfStudy\' | translate}}</label> <hois-classifier-select ng-model="curriculum.areaOfStudy" main-classifier-code="ISCED_VALD" ng-change="clearIscedClass()" model-value-attr="code" show-only-values="areasOfStudy" criteria="{higher: true}" ng-disabled="formState.readOnly || formState.notEditableBasicData"></hois-classifier-select> </md-input-container> <md-input-container flex="50" flex-offset="5"> <label>{{\'curriculum.languageDescription\' | translate}}</label> <textarea ng-model="curriculum.languageDescription" md-maxlength="1000" max-rows="10" ng-readonly="formState.readOnly"></textarea> </md-input-container> </div> <div layout="row" flex> <md-input-container flex="45"> <label>{{\'curriculum.fieldOfStudy\' | translate}}</label> <hois-classifier-select ng-model="curriculum.fieldOfStudy" main-classifier-code="ISCED_SUUN" watch-model="curriculum.areaOfStudy" filter-values search-from-connect connect-main-classifier-code="ISCED_VALD" criteria="{higher: true}" ng-disabled="!curriculum.areaOfStudy || formState.readOnly || formState.notEditableBasicData" model-value-attr="code"></hois-classifier-select> </md-input-container> <!-- hois-school-department-select was not used here as it set form $dirty after page load.\r\n          In addition, extra logic in providing options required --> <md-input-container flex="50" flex-offset="5"> <label> {{\'curriculum.structuralUnitResponsible\' | translate}} {{getStar()}} </label> <hois-select ng-model="curriculum.schoolDepartments" multiple values="schoolDepartments" ng-required="strictValidation()" ng-disabled="formState.readOnly"></hois-select> </md-input-container> </div> </fieldset> </div> <div>&nbsp;</div> <fieldset tabindex="4"> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'curriculum.commonData\' | translate}}</legend> <div layout="column"> <md-input-container flex> <label>{{\'stateCurriculum.enter.objectivesEt\' | translate}}{{getStar()}}</label> <textarea ng-model="curriculum.objectivesEt" ng-required="strictValidation()" md-maxlength="20000" max-rows="10" ng-readonly="formState.readOnly"></textarea> </md-input-container> <md-input-container flex> <label>{{\'stateCurriculum.enter.objectivesEn\' | translate}}{{getStar()}}</label> <textarea ng-model="curriculum.objectivesEn" ng-required="strictValidation()" md-maxlength="20000" max-rows="10" ng-readonly="formState.readOnly"></textarea> </md-input-container> <md-input-container flex> <label>{{\'curriculum.studyOutcomesEt\' | translate}}{{getStar()}}</label> <textarea ng-model="curriculum.outcomesEt" ng-required="strictValidation()" md-maxlength="20000" max-rows="10" ng-readonly="formState.readOnly"></textarea> </md-input-container> <md-input-container flex> <label>{{\'curriculum.studyOutcomesEn\' | translate}}{{getStar()}}</label> <textarea ng-model="curriculum.outcomesEn" ng-required="strictValidation()" md-maxlength="20000" max-rows="10" ng-readonly="formState.readOnly"></textarea> </md-input-container> <md-input-container flex> <label>{{\'curriculum.higherAdmissionRequirementsEt\' | translate}}{{getStar()}}</label> <textarea ng-model="curriculum.admissionRequirementsEt" ng-required="strictValidation()" md-maxlength="20000" max-rows="10" ng-readonly="formState.readOnly"></textarea> </md-input-container> <md-input-container flex> <label>{{\'curriculum.higherAdmissionRequirementsEn\' | translate}}{{getStar()}}</label> <textarea ng-model="curriculum.admissionRequirementsEn" ng-required="strictValidation()" md-maxlength="20000" max-rows="10" ng-readonly="formState.readOnly"></textarea> </md-input-container> <md-input-container flex> <label>{{\'curriculum.higherGraduationRequirementsEt\' | translate}}{{getStar()}}</label> <textarea ng-model="curriculum.graduationRequirementsEt" ng-required="strictValidation()" md-maxlength="20000" max-rows="10" ng-readonly="formState.readOnly"></textarea> </md-input-container> <md-input-container flex> <label>{{\'curriculum.higherGraduationRequirementsEn\' | translate}}{{getStar()}}</label> <textarea ng-model="curriculum.graduationRequirementsEn" ng-required="strictValidation()" md-maxlength="20000" max-rows="10" ng-readonly="formState.readOnly"></textarea> </md-input-container> <md-input-container flex> <label>{{\'curriculum.optionalStudyDescription\' | translate}}</label> <textarea ng-model="curriculum.optionalStudyDescription" md-maxlength="4000" max-rows="10" ng-readonly="formState.readOnly"></textarea> </md-input-container> <md-input-container flex> <label>{{\'curriculum.addInfo\' | translate}}</label> <textarea ng-model="curriculum.addInfo" md-maxlength="20000" max-rows="10" ng-readonly="formState.readOnly"></textarea> </md-input-container> <md-input-container flex> <label>{{\'stateCurriculum.enter.comment\' | translate}}</label> <textarea ng-model="curriculum.description" md-maxlength="20000" max-rows="10" ng-readonly="formState.readOnly"></textarea> </md-input-container> <md-input-container flex> <label>{{\'curriculum.otherLanguages\' | translate}}</label> <textarea ng-model="curriculum.otherLanguages" md-maxlength="1000" max-rows="10" ng-readonly="formState.readOnly"></textarea> </md-input-container> </div> </fieldset> <div>&nbsp;</div> <fieldset tabindex="9"> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'curriculum.approvalInfo\' | translate}}</legend> <div layout="row" flex="100"> <md-input-container flex="30" flex-sm="100" flex-xs="100"> <label>{{\'curriculum.approvalDocumentNr\' | translate}}</label> <input ng-model="curriculum.approvalDokNr" type="text" md-maxlength="50" ng-readonly="formState.readOnly"> </md-input-container> <md-input-container flex="20" flex-offset="4"> <label>{{\'curriculum.approvalDate\' | translate}}</label> <md-datepicker ng-model="curriculum.approval" md-open-on-focus ng-disabled="formState.readOnly"></md-datepicker> </md-input-container> <md-input-container flex="20" flex-offset="5"> <label>{{\'curriculum.htmRegisterDate\' | translate}}</label> <md-datepicker ng-model="curriculum.merRegDate" md-open-on-focus ng-disabled="formState.readOnly"></md-datepicker> </md-input-container> </div> <div layout="row" flex="100"> <md-input-container flex="30" flex-sm="100" flex-xs="100"> <label>{{\'curriculum.accreditationDesision\' | translate}}</label> <input ng-model="curriculum.accreditationResolution" type="text" md-maxlength="1000" ng-readonly="formState.readOnly"> </md-input-container> <md-input-container flex="20" flex-offset="4"> <label>{{\'curriculum.accreditationDate\' | translate}}</label> <md-datepicker ng-model="curriculum.accreditationDate" md-open-on-focus ng-disabled="formState.readOnly"></md-datepicker> </md-input-container> </div> <div layout="row" flex="100"> <md-input-container flex="30" flex-sm="100" flex-xs="100"> <label>{{\'curriculum.accreditationDesisionNumber\' | translate}}</label> <input ng-model="curriculum.accreditationNr" type="text" md-maxlength="1000" ng-readonly="formState.readOnly"> </md-input-container> <md-input-container flex="20" flex-offset="4"> <label>{{\'curriculum.accreditationValidityDate\' | translate}}</label> <md-datepicker ng-model="curriculum.accreditationValidDate" md-open-on-focus ng-disabled="formState.readOnly"></md-datepicker> </md-input-container> </div> </fieldset> <div>&nbsp;</div> <div>&nbsp;</div> <fieldset tabindex="10"> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'curriculum.statuses\' | translate}}</legend> <div layout="row" flex="100"> <md-input-container flex="30" flex-sm="100" flex-xs="100"> <label>{{\'main.validFrom\' | translate}}{{getStar()}}</label> <md-datepicker ng-model="curriculum.validFrom" md-open-on-focus ng-required="strictValidation()" ng-disabled="formState.readOnly"></md-datepicker> </md-input-container> <md-input-container flex="20" flex-sm="100" flex-xs="100" flex-offset-xs="0" flex-offset-sm="0" flex-offset="4"> <label>{{\'main.validTo\' | translate}}</label> <md-datepicker ng-model="curriculum.validThru" md-min-date="curriculum.validFrom" md-open-on-focus ng-disabled="formState.readOnly"></md-datepicker> </md-input-container> </div> <div layout="row" flex="100" class="top-margin form-readonly"> <md-input-container flex="30" flex-sm="100" flex-xs="100" class="readonly"> <label class="label">{{\'main.status\' | translate}}</label> <hois-classifier-value ng-model="curriculum.status" main-classifier-code="OPPEKAVA_STAATUS"></hois-classifier-value> </md-input-container> <md-input-container flex="20" flex-sm="100" flex-xs="100" flex-offset-xs="0" flex-offset-sm="0" flex-offset="4"> <label>{{\'curriculum.statusInEhis\' | translate}}</label> <hois-classifier-value ng-model="curriculum.ehisStatus" main-classifier-code="OPPEKAVA_EHIS_STAATUS"></hois-classifier-value> </md-input-container> <md-input-container flex="40" flex-sm="100" flex-xs="100" flex-offset-xs="0" flex-offset-sm="0" flex-offset="5"> <label>{{\'curriculum.statusChangedDateInEhis\' | translate}}</label> <hois-value value="curriculum.ehisChanged | hoisDate"></hois-value> </md-input-container> </div> </fieldset> <div ng-show="curriculum.joint">&nbsp;</div> <fieldset tabindex="8" ng-show="curriculum.joint"> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'curriculum.jointInfo\' | translate}}</legend> <div layout="column"> <div layout="row" layout-align="start start" ng-show="curriculum.joint"> <label class="md-required common-label" flex="30">{{\'curriculum.jointSchool\' | translate}}</label> <md-radio-group ng-model="curriculum.abroad" flex="50" layout="row" class="align-center" ng-change="clearJointPartnersFields()" flex-offset-xs="0" flex-offset-sm="0" flex-offset="4" ng-disabled="formState.readOnly || formState.notEditableBasicData"> <md-radio-button ng-value="false" aria-label="{{ \'curriculum.estonianEducationalInstitute\' | translate }}"> {{ \'curriculum.estonianEducationalInstitute\' | translate }} </md-radio-button> <md-radio-button ng-value="true" aria-label="{{ \'curriculum.jointPartnerAbroadSchool\' | translate }}"> {{ \'curriculum.foreignEducationalInstitute\' | translate }} </md-radio-button> </md-radio-group> </div> <div layout="row" flex="100" ng-show="curriculum.joint"> <md-input-container flex="64" ng-hide="curriculum.abroad"> <label>{{\'curriculum.estonianEducationalInstitute\' | translate}}&nbsp;*</label> <hois-classifier-select ng-model="curriculum.jointPartnerEhisSchool" main-classifier-code="EHIS_KOOL" filter-values="curriculum.jointPartners" by-property="ehisSchool" model-value-attr="code" ng-disabled="formState.readOnly || formState.notEditableBasicData"></hois-classifier-select> </md-input-container> <md-input-container ng-hide="!curriculum.abroad" flex="30"> <label>{{\'school.name\' | translate}}&nbsp;*</label> <input ng-model="curriculum.jointPartnerForeignNameEt" type="text" md-maxlength="100" ng-readonly="formState.readOnly"> </md-input-container> <md-input-container ng-hide="!curriculum.abroad" flex="30" flex-offset-xs="0" flex-offset-sm="0" flex-offset="4"> <label>{{\'school.nameEn\' | translate}}&nbsp;*</label> <input ng-model="curriculum.jointPartnerForeignNameEn" type="text" md-maxlength="100" ng-readonly="formState.readOnly"> </md-input-container> <md-button class="md-raised" ng-click="addJointPartner()" ng-disabled="(!curriculum.jointPartnerForeignNameEt || !curriculum.jointPartnerForeignNameEn) && !curriculum.jointPartnerEhisSchool">{{\'main.button.add\' | translate}}</md-button> </div> <span class="invalid" ng-show="higherCurriculumForm.$submitted && strictValidation() && (!curriculum.jointPartners || curriculum.jointPartners.length === 0)"> {{\'main.messages.error.atLeastOneShouldBeAdded\' | translate}} </span> <div layout="column" flex ng-show="curriculum.joint" class="common-label"> <div layout="row" ng-repeat="item in curriculum.jointPartners | filter: filterEmptyJointPartners | orderBy: [\'ehisSchool\', \'nameEt\']" class="align-center"> <div flex="5">&nbsp;</div> <div ng-if="item.abroad">{{currentLanguageNameField(item)}}</div> <div ng-if="!item.abroad"> <hois-classifier-value ng-model="item.ehisSchool" main-classifier-code="EHIS_KOOL"></hois-classifier-value></div> <div flex="5">&nbsp;</div> <div flex="5"><a class="remove nomargin" ng-click="removejointPartner(item)" ng-if="!formState.readOnly && !formState.notEditableBasicData && !item.hasSubjects">&times;</a></div> </div> </div> <div layout="row" layout-sm="column" layout-xs="column" ng-show="curriculum.joint"> <md-input-container flex="30" ng-if="curriculum.joint"> <label>{{\'curriculum.jointMentor\' | translate}}{{getStar()}}</label> <hois-classifier-select ng-model="curriculum.jointMentor" main-classifier-code="EHIS_KOOL" model-value-attr="code" show-only-values="jointPartnersEhisSchools" ng-required="strictValidation()" ng-disabled="formState.readOnly || formState.notEditableBasicData"></hois-classifier-select> </md-input-container> <md-input-container flex="66" flex-offset="4"> <label>{{\'curriculum.jointResponsible\' | translate}}</label> <input ng-model="curriculum.supervisor" type="text" md-maxlength="100" ng-readonly="formState.readOnly || formState.notEditableBasicData"> </md-input-container> </div> <md-input-container flex="100"> <label>{{\'curriculum.jointAgreementInfoEt\' | translate}}{{getStar()}}</label> <textarea ng-model="curriculum.contractEt" md-maxlength="1000" max-rows="10" md-select-on-focus ng-required="curriculum.joint && strictValidation()" ng-readonly="formState.readOnly || formState.notEditableBasicData"></textarea> </md-input-container> <md-input-container flex="100"> <label>{{\'curriculum.jointAgreementInfoEn\' | translate}}{{getStar()}}</label> <textarea ng-model="curriculum.contractEn" md-maxlength="1000" max-rows="10" md-select-on-focus ng-required="curriculum.joint && strictValidation()" ng-readonly="formState.readOnly || formState.notEditableBasicData"></textarea> </md-input-container> </div> </fieldset> <div>&nbsp;</div> <fieldset tabindex="12"> <legend md-colors="{color: \'primary-800\'}" ng-class="{invalid: strictValidation() && (!curriculum.specialities || curriculum.specialities.length === 0)}" class="md-title-small">{{\'curriculum.specialty.label\' | translate}} *</legend> <md-button class="md-raised" ng-click="openAddSpecialtyDialog()" ng-show="!formState.readOnly">{{\'curriculum.specialty.add\' | translate}}</md-button> <div ng-repeat="item in curriculum.specialities | orderBy: currentLanguageNameField()" layout="column"> <div layout="row" class="occupation-row align-center" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <div flex="35"><a ng-click="openAddSpecialtyDialog(item)" href="">{{currentLanguageNameField(item)}}</a></div> </div> </div> </fieldset> <div>&nbsp;</div> <fieldset tabindex="12" ng-show="gradeRequired()"> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'curriculum.grade.label\' | translate}}</legend> <md-button class="md-raised" ng-click="openAddGradeDialog()" ng-show="!formState.readOnly">{{\'curriculum.grade.add\' | translate}}</md-button> <div ng-repeat="item in curriculum.grades | orderBy: currentLanguageNameField()" layout="column" ng-show="gradeRequired()"> <div layout="row" class="occupation-row align-center" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <div flex="35"><a ng-click="openAddGradeDialog(item)" href="">{{currentLanguageNameField(item)}}</a></div> </div> </div> </fieldset> <div ng-if="curriculum.id">&nbsp;</div> <fieldset tabindex="11" ng-if="curriculum.id"> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'main.relatedFiles\' | translate}}</legend> <md-button class="md-raised" ng-click="openAddFileDialog()" ng-show="!formState.readOnly">{{\'main.button.uploadFile\' | translate}}</md-button> <table md-table class="secondary-table"> <thead md-head> <tr md-row> <th md-column><span>{{\'file.nameAndFile\' | translate}}</span></th> <th md-column><span>{{\'file.creationLocation\' | translate}}</span></th> <th md-column>{{\'file.type\' | translate}}</th> <th md-column>{{\'curriculum.sendToEhis\' | translate}}</th> <th md-column></th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="file in curriculum.files | orderBy: \'oisFile.fname\'" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell> {{file.oisFile.fname}} <a ng-href="{{getUrl(file, \'curriculum\')}}" download><md-icon md-font-set="material-icons">file_download</md-icon></a> </td> <td md-cell> {{file.ehis ? \'EHIS\' : \'ÕIS\'}} </td> <td md-cell> <hois-classifier-value ng-model="file.ehisFile" main-classifier-code="EHIS_FAIL"></hois-classifier-value> </td> <td md-cell> <md-checkbox ng-model="file.sendEhis" aria-label="send to ehis" ng-disabled="formState.readOnly"></md-checkbox> </td> <td md-cell> <md-button class="remove nomargin" ng-click="deleteFile(file)" ng-if="!formState.readOnly">&times;</md-button> </td> </tr> </tbody> </table> </fieldset> <div ng-if="curriculum.id">&nbsp;</div> <fieldset tabindex="12" ng-if="curriculum.id"> <legend md-colors="{color: \'primary-800\'}" class="md-title-small"><span ng-class="{invalid: higherCurriculumForm.$submitted && strictValidation() && !hasVerifiedVersions()}">{{\'curriculum.versions\' | translate}}</span></legend> <md-button class="md-raised" ng-click="goToVersionNewForm(version)" ng-show="versionCanBeAdded()">{{\'main.button.create\' | translate}}</md-button> <table md-table class="secondary-table"> <thead md-head> <tr md-row> <th md-column><span>{{\'curriculum.versionName\' | translate}}</span></th> <th md-column><span>{{\'main.status\' | translate}}</span></th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="version in curriculum.versions | orderBy: \'code\'" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell> <a ng-click="goToVersionForm(version)" href="">{{version.code}}</a> </td> <td md-cell><hois-classifier-value ng-model="version.status" main-classifier-code="OPPEKAVA_VERSIOON_STAATUS"></hois-classifier-value></td> </tr> </tbody> </table> </fieldset> <hois-created-modified object="curriculum" class="top-margin"></hois-created-modified> <div layout="row"> <div ng-show="curriculum.status === STATUS.ENTERING"> <div ng-show="!curriculum.id"> <md-button class="md-raised md-primary" ng-click="save()">{{\'main.button.save\' | translate}}</md-button> </div> <div ng-show="curriculum.id && !formState.readOnly"> <md-button class="md-raised md-primary" ng-click="save()" ng-if="curriculum.canChange">{{\'main.button.save\' | translate}}</md-button> <md-button class="md-raised" ng-click="saveAndProceed()" ng-if="curriculum.canChange && curriculum.canConfirm">{{\'main.button.status.approving\' | translate}}</md-button> <md-button class="md-raised" ng-click="setStatusClosed()" ng-if="curriculum.canChange && curriculum.canClose">{{\'main.button.status.close\' | translate}}</md-button> <md-button class="md-raised md-default" ng-click="delete()" ng-if="curriculum.canDelete">{{\'main.button.delete\' | translate}}</md-button> </div> <div ng-show="curriculum.id && formState.readOnly"> <md-button class="md-raised md-primary" ng-click="goToEditForm()" ng-if="curriculum.canChange">{{\'main.button.change\' | translate}}</md-button> </div> </div> <div ng-show="curriculum.status === STATUS.PROCEEDING && !formState.sentToEhis"> <div ng-show="!formState.readOnly"> <md-button class="md-raised md-primary" ng-click="save()" ng-if="curriculum.canChange">{{\'main.button.save\' | translate}}</md-button> <md-button class="md-raised md-default" ng-click="delete()" ng-if="curriculum.canDelete">{{\'main.button.delete\' | translate}}</md-button> </div> <div ng-show="formState.readOnly"> <md-button class="md-raised md-primary" ng-click="goToEditForm()" ng-if="curriculum.canChange">{{\'main.button.change\' | translate}}</md-button> <md-button class="md-raised md-default" ng-click="sendToEhis()" ng-if="curriculum.canConfirm">{{\'main.button.sendToEhis\' | translate}}</md-button> <md-button class="md-raised" ng-click="setStatusClosed()" ng-if="curriculum.canClose">{{\'main.button.status.close\' | translate}}</md-button> </div> </div> <div ng-show="curriculum.status === STATUS.PROCEEDING && formState.sentToEhis"> <md-button class="md-raised md-default" ng-click="updateFromEhis()" ng-if="curriculum.canConfirm">{{\'main.button.updateFromEhis\' | translate}}</md-button> </div> <div ng-show="curriculum.status === STATUS.VERIFIED"> <div ng-show="!formState.readOnly"> <md-button class="md-raised md-primary" ng-click="save()" ng-if="curriculum.canChange">{{\'main.button.save\' | translate}}</md-button> </div> <div ng-show="formState.readOnly"> <md-button class="md-raised md-primary" ng-click="goToEditForm()" ng-if="curriculum.canChange">{{\'main.button.change\' | translate}}</md-button> <md-button class="md-raised" ng-click="setStatusClosed()" ng-if="curriculum.canClose">{{\'main.button.status.close\' | translate}}</md-button> </div> </div> <a href="{{formState.curriculumXmlUrl}}" target="_blank" class="md-button md-raised" ng-if="curriculum.id">XML</a> <md-button class="md-raised md-default" ng-click="back(\'#/curriculum\', higherCurriculumForm)">{{\'main.button.back\' | translate}}</md-button> </div> </form> </div>'),a.put("higherCurriculum/higher.curriculum.specialty.add.dialog.html",'<md-dialog aria-label="specialty add dialog" flex="30" flex-xs="100"> <form name="dialogForm" ng-cloak> <md-toolbar> <div class="md-toolbar-tools"> <h2>{{"curriculum.specialty.editLabel" | translate}}</h2> <span flex></span> <md-button class="md-icon-button" ng-click="cancel()"> <md-icon md-font-set="material-icons">close</md-icon> </md-button> </div> </md-toolbar> <md-dialog-content> <span flex></span> <div class="ois-form-layout" layout="column" layout-margin ng-cloak> <div layout="column"> <md-input-container flex> <label>{{\'curriculum.specialty.nameEt\' | translate}}</label> <input ng-model="data.nameEt" type="text" required md-maxlength="100"> </md-input-container> <md-input-container flex> <label>{{\'curriculum.specialty.nameEn\' | translate}}</label> <input ng-model="data.nameEn" type="text" required md-maxlength="100"> </md-input-container> <md-input-container flex> <label>{{\'curriculum.specialty.credits\' | translate}}</label> <input name="credits" ng-model="data.credits" type="number" required min="0" max="{{maxCredits}}" pattern="^\\d+(\\.\\d{1})?$"> <div ng-messages="dialogForm.credits.$error" ng-show="dialogForm.credits.$dirty"> <div ng-message="min"> {{\'main.messages.error.positive\' | translate}} </div> <div ng-message="max"> {{\'curriculum.specialty.creditsError\' | translate}} ({{maxCredits}} EAP) </div> <div ng-message="pattern"> {{\'stateCurriculum.error.decimalPresision\' | translate}} </div> </div> </md-input-container> <md-input-container flex> <label>{{\'main.additionalInfo\' | translate}}</label> <textarea ng-model="data.description" md-maxlength="1000" max-rows="10"></textarea> </md-input-container> <md-input-container flex> <label>{{\'occupation.givenOccupation\' | translate}}</label> <hois-classifier-select ng-model="data.occupation" ng-change="occupationSelected()" main-classifier-code="KUTSE" model-value-attr="code"></hois-classifier-select> </md-input-container> <md-input-container flex ng-show="data.occupation"> <label>{{\'curriculum.specialty.specialtyReferenceEt\' | translate}}</label> <input ng-model="data.occupationEt" type="text" md-maxlength="255" ng-required="data.occupation"> </md-input-container> <md-input-container flex ng-show="data.occupation"> <label>{{\'curriculum.specialty.specialtyReferenceEn\' | translate}}</label> <input ng-model="data.occupationEn" type="text" md-maxlength="255" ng-required="data.occupation"> </md-input-container> </div> </div> </md-dialog-content> <md-dialog-actions layout="row" layout-align="start center"> <md-button class="md-raised md-primary" ng-click="submit()">{{"main.button.save" | translate}}</md-button> <md-button class="md-raised" ng-click="delete()" ng-if="!formState.isNew">{{"main.button.delete" | translate}}</md-button> <md-button class="md-raised" ng-click="cancel()">{{"main.button.close" | translate}}</md-button> </md-dialog-actions> </form> </md-dialog>'),
a.put("higherCurriculum/higher.curriculum.specialty.view.dialog.html",'<md-dialog aria-label="specialty add dialog" flex="30" flex-xs="100"> <form name="dialogForm" ng-cloak> <md-toolbar> <div class="md-toolbar-tools"> <h2>{{"curriculum.specialty.viewLabel" | translate}}</h2> <span flex></span> <md-button class="md-icon-button" ng-click="cancel()"> <md-icon md-font-set="material-icons">close</md-icon> </md-button> </div> </md-toolbar> <md-dialog-content> <span flex></span> <div class="ois-form-layout" layout="column" layout-margin ng-cloak> <div layout="column"> <md-input-container flex> <label>{{\'curriculum.specialty.nameEt\' | translate}}</label> <input ng-model="data.nameEt" type="text" readonly> </md-input-container> <md-input-container flex> <label>{{\'curriculum.specialty.nameEn\' | translate}}</label> <input ng-model="data.nameEn" type="text" readonly> </md-input-container> <md-input-container flex> <label>{{\'curriculum.specialty.credits\' | translate}}</label> <input name="credits" ng-model="data.credits" type="number" readonly> </md-input-container> <md-input-container flex> <label>{{\'main.additionalInfo\' | translate}}</label> <textarea ng-model="data.description" max-rows="10" readonly></textarea> </md-input-container> <md-input-container flex> <label>{{\'occupation.givenOccupation\' | translate}}</label> <hois-classifier-select ng-model="data.occupation" main-classifier-code="KUTSE" model-value-attr="code" disabled></hois-classifier-select> </md-input-container> <md-input-container flex ng-show="data.occupation"> <label>{{\'curriculum.specialty.specialtyReferenceEt\' | translate}}</label> <input ng-model="data.occupationEt" type="text" readonly> </md-input-container> <md-input-container flex ng-show="data.occupation"> <label>{{\'curriculum.specialty.specialtyReferenceEn\' | translate}}</label> <input ng-model="data.occupationEn" type="text" readonly> </md-input-container> </div> </div> </md-dialog-content> <md-dialog-actions layout="row" layout-align="start center"> <md-button class="md-raised" ng-click="cancel()">{{"main.button.close" | translate}}</md-button> </md-dialog-actions> </form> </md-dialog>'),a.put("higherCurriculum/higher.curriculum.version.html",'<div class="ois-form-layout-padding" ng-cloak ng-show="!showMainForm"> <form name="higherCurriculumVersionForm" layout="column" class="nomargin"> <fieldset tabindex="1"> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'curriculum.versionMainData\' | translate}}</legend> <div layout="column"> <md-input-container flex ng-if="!showMainForm"> <label>{{\'curriculum.version.code\' | translate}}</label> <input name="code" ng-model="version.code" type="text" required md-maxlength="100" ng-model-options="{ debounce: 250 }" unique="curriculumVersionCodeUniqueQuery" ng-readonly="formState.readOnly"> <div ng-messages="higherCurriculumVersionForm.code.$error"> <div ng-message="notUnique"> {{\'main.messages.error.mustBeUnique\' | translate}} </div> </div> </md-input-container> <div layout="row" flex> <md-input-container flex="45"> <label>{{\'curriculum.version.firstAdmissionYear\' | translate}}</label> <md-select ng-model="version.admissionYear" required ng-disabled="formState.readOnly"> <md-option ng-repeat="year in ::admissionYears" ng-value="year" aria-label="{{year}}">{{year}}</md-option> </md-select> </md-input-container> <md-input-container flex="50" flex-offset="5"> <label>{{\'curriculum.version.type\' | translate}}</label> <hois-classifier-select ng-model="version.type" main-classifier-code="OPPEKAVA_VERSIOON_LIIK" required model-value-attr="code" ng-disabled="formState.readOnly"></hois-classifier-select> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="45" flex-sm="100" flex-xs="100"> <label>{{\'curriculum.specialty.specialties\' | translate}}</label> <md-select multiple ng-model="version.specialitiesReferenceNumbers" required ng-disabled="formState.readOnly"> <md-option ng-repeat="speciality in curriculum.specialities | orderBy: currentLanguageNameField()" ng-value="speciality.referenceNumber"> {{currentLanguageNameField(speciality)}} </md-option> </md-select> </md-input-container> <div flex="50" flex-offset="5" ng-show="!formState.readOnly" layout="start center"> <md-button class="md-raised" ng-click="openAddSpecialtyDialog()" ng-if="version.canChange">{{\'curriculum.specialty.addNew\' | translate}}</md-button> </div> </div> <br> </div> </fieldset> <div>&nbsp;</div> <fieldset tabindex="2" flex> <legend md-colors="{color: \'primary-800\'}" class="md-title-small" ng-class="{invalid: higherCurriculumVersionForm.$submitted && strictValidation() && !allSpecialitiesValid()}">{{\'module.modules\' | translate}}&nbsp;*</legend> <md-button class="md-raised" ng-click="openAddModuleDialog()" ng-if="!formState.readOnly && version.specialitiesReferenceNumbers.length > 0 && version.id && version.canChange">{{\'module.add\' | translate}}</md-button> <div ng-repeat="spectiality in curriculum.specialities | filter: filterSpecialities | orderBy: currentLanguageNameField()" flex> <h2 class="md-title-small" ng-class="{invalid: higherCurriculumVersionForm.$submitted && strictValidation() && !specialityValid(spectiality.id)}">{{\'curriculum.specialty.specialty\' | translate}} {{$index + 1}}: {{currentLanguageNameField(spectiality)}}</h2> <div flex class="secondary-table-header" layout="row"> <div flex="5">&nbsp;</div> <div flex="35">{{\'subject.name\' | translate}}</div> <div flex="10">{{\'subject.code\' | translate}}</div> <div flex="20">EAP</div> <div></div> </div> <div layout="column" flex ng-repeat="module in version.modules | filter: {minorSpeciality: false} | filter: filterModulesBySpeciality(spectiality) | orderBy: currentLanguageNameField()"> <div layout="row" flex class="occupation-header" layout-align="start center"> <a href="" ng-click="openAddModuleDialog(module)" flex="70" ng-class="{invalid: higherCurriculumVersionForm.$submitted && !moduleHasSubjects(module) && strictValidation()}"> {{\'curriculum.module\' | translate}} {{currentLanguageNameField(module)}} {{module.totalCredits}} EAP <span ng-if="module.type === \'KORGMOODUL_M\'">({{currentLanguage()==\'et\' ? module.typeNameEt : module.typeNameEn}})</span> <span ng-if="module.type !== \'KORGMOODUL_M\'">(<hois-classifier-value ng-model="module.type" main-classifier-code="KORGMOODUL" class="inline module-type"></hois-classifier-value>)</span> </a> </div> <div flex class="sub-header1" layout-align="start center" layout="row" ng-show="moduleMustHaveSubjects(module)"> <div>{{\'subject.mandatory\' | translate}}</div> </div> <div ng-repeat="subject in module.subjects | filter: {optional: false} | orderBy: currentLanguageNameField()" layout="row" flex class="secondary-table-row" layout-align="start center"> <div flex="5">&nbsp;</div> <div flex="35">{{currentLanguageNameField(subject)}}</div> <div flex="10">{{subject.code}}</div> <div flex="20">{{subject.credits}}</div> <div> <a class="remove nomargin" ng-click="deleteSubject(module, subject)" ng-if="!formState.readOnly">&times;</a> </div> </div> <div layout="row" flex layout-align="start center" class="secondary-table-header" ng-show="moduleMustHaveSubjects(module)"> <div flex="5">&nbsp;</div> <div flex="35">{{\'main.OF\' | translate}}</div> <div flex="10">&nbsp;</div> <div flex="20">{{module.compulsoryStudyCredits}}</div> <div></div> </div> <div flex class="sub-header1" layout-align="start center" layout="row" ng-show="moduleMustHaveSubjects(module)"> <div>{{\'subject.optional\' | translate}}</div> </div> <div ng-repeat="subject in module.subjects |\r\n                        filter: {optional: true} | filter: {electiveModule: \'!\'} | orderBy: currentLanguageNameField()" layout="row" flex class="secondary-table-row" layout-align="start center"> <div flex="5">&nbsp;</div> <div flex="35">{{currentLanguageNameField(subject)}}</div> <div flex="10">{{subject.code}}</div> <div flex="20">{{subject.credits}}</div> <div> <a class="remove nomargin" ng-click="deleteSubject(module, subject)" ng-if="!formState.readOnly">&times;</a> </div> </div> <div flex class="sub-header-italic" layout-align="start center" layout="row" style="padding-left: 10px" ng-show="moduleMustHaveSubjects(module)"> <div>{{\'module.optionalsWithMinimum\' | translate}}{{module.electiveModulesNumber}}</div> </div> <div ng-repeat="electiveModule in module.electiveModules | orderBy: currentLanguageNameField()" layout-align="start center" flex> <div class="sub-header2" layout-align="start center" layout="row"> <div class="elective-module">{{\'module.optional\' | translate}}: {{currentLanguageNameField(electiveModule)}}</div> </div> <div ng-repeat="subject in module.subjects | filter: {optional: true} |\r\n                                filter: {electiveModule: electiveModule.referenceNumber} | orderBy: currentLanguageNameField()" layout="row" flex class="secondary-table-row" layout-align="start center"> <div flex="5">&nbsp;</div> <div flex="35">{{currentLanguageNameField(subject)}}</div> <div flex="10">{{subject.code}}</div> <div flex="20">{{subject.credits}}</div> <div> <a class="remove nomargin" ng-click="deleteSubject(module, subject)" ng-if="!formState.readOnly">&times;</a> </div> </div> </div> <div layout="row" flex layout-align="start center" class="secondary-table-header"> <div flex="5">&nbsp;</div> <div flex="35">{{\'module.overallAtLeast\' | translate}}</div> <div flex="10">&nbsp;</div> <div flex="20">{{module.optionalStudyCredits}}</div> <div></div> </div> </div> <!-- end show modules by specialities--> </div> </fieldset> <div>&nbsp;</div> <fieldset tabindex="3"> <legend md-colors="{color: \'primary-800\'}" class="md-title-small" ng-class="{invalid: higherCurriculumVersionForm.$submitted && !allMinorSpecialitiesValid()}">{{\'curriculum.minorSpecialty.minorSpecialties\' | translate}}</legend> <md-button class="md-raised" ng-click="openAddMinorSpecialtyDialog()" ng-if="!formState.readOnly && version.id  && version.canChange">{{\'curriculum.minorSpecialty.add\' | translate}}</md-button> <div layout="column" flex ng-repeat="module in version.modules | filter: {minorSpeciality: true} | orderBy: currentLanguageNameField()"> <div layout="row" flex class="occupation-header" layout-align="start center"> <a href="" ng-click="openAddMinorSpecialtyDialog(module)" flex="70" ng-class="{invalid: higherCurriculumVersionForm.$submitted && !moduleHasSubjects(module) && strictValidation()}"> <span>{{\'curriculum.minorSpecialty.minorSpecialty\' | translate}} {{currentLanguageNameField(module)}} {{module.totalCredits}} EAP</span> </a> </div> <div flex class="sub-header1" layout-align="start center" layout="row"> <div>{{\'subject.mandatory\' | translate}}</div> </div> <div ng-repeat="subject in module.subjects | filter: {optional: false} | orderBy: currentLanguageNameField()" layout="row" flex class="secondary-table-row" layout-align="start center"> <div flex="5">&nbsp;</div> <div flex="35">{{currentLanguageNameField(subject)}}</div> <div flex="10">{{subject.code}}</div> <div flex="20">{{subject.credits}}</div> <div> <a class="remove nomargin" ng-click="deleteSubject(module, subject)" ng-if="!formState.readOnly">&times;</a> </div> </div> <div layout="row" flex layout-align="start center" class="secondary-table-header"> <div flex="5">&nbsp;</div> <div flex="35">{{\'main.OF\' | translate}}</div> <div flex="10">&nbsp;</div> <div flex="20">{{module.compulsoryStudyCredits}}</div> <div></div> </div> <div flex class="sub-header1" layout-align="start center" layout="row"> <div>{{\'subject.optional\' | translate}}</div> </div> <div ng-repeat="subject in module.subjects |\r\n                        filter: {optional: true} | filter: {electiveModule: \'!\'} | orderBy: currentLanguageNameField()" layout="row" flex class="secondary-table-row" layout-align="start center"> <div flex="5">&nbsp;</div> <div flex="35">{{currentLanguageNameField(subject)}}</div> <div flex="10">{{subject.code}}</div> <div flex="20">{{subject.credits}}</div> <div> <a class="remove nomargin" ng-click="deleteSubject(module, subject)" ng-if="!formState.readOnly">&times;</a> </div> </div> <div flex class="sub-header-italic" layout-align="start center" layout="row" style="padding-left: 10px"> <div>{{\'module.optionalsWithMinimum\' | translate}}{{module.electiveModulesNumber}}</div> </div> <div ng-repeat="electiveModule in module.electiveModules | orderBy: currentLanguageNameField()" layout-align="start center" flex> <div class="sub-header2" layout-align="start center" layout="row"> <div class="elective-module">{{\'module.optional\' | translate}}: {{currentLanguageNameField(electiveModule)}}</div> </div> <div ng-repeat="subject in module.subjects | filter: {optional: true} |\r\n                                filter: {electiveModule: electiveModule.referenceNumber} | orderBy: currentLanguageNameField()" layout="row" flex class="secondary-table-row" layout-align="start center"> <div flex="5">&nbsp;</div> <div flex="35">{{currentLanguageNameField(subject)}}</div> <div flex="10">{{subject.code}}</div> <div flex="20">{{subject.credits}}</div> <div> <a class="remove nomargin" ng-click="deleteSubject(module, subject)" ng-if="!formState.readOnly">&times;</a> </div> </div> </div> <div layout="row" flex layout-align="start center" class="secondary-table-header"> <div flex="5">&nbsp;</div> <div flex="35">{{\'module.overallAtLeast\' | translate}}</div> <div flex="10">&nbsp;</div> <div flex="20">{{module.optionalStudyCredits}}</div> <div></div> </div> </div> </fieldset> <div>&nbsp;</div> <fieldset tabindex="4"> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'curriculum.versionStatus\' | translate}}</legend> <div layout="row" flex="100"> <md-input-container flex="30" flex-sm="100" flex-xs="100"> <label>{{\'main.validFrom\' | translate}}</label> <md-datepicker ng-model="version.validFrom" md-open-on-focus required ng-disabled="formState.readOnly"></md-datepicker> </md-input-container> <md-input-container flex="20" flex-sm="100" flex-xs="100" flex-offset-xs="0" flex-offset-sm="0" flex-offset="4"> <label>{{\'main.validTo\' | translate}}</label> <md-datepicker ng-model="version.validThru" md-min-date="version.validFrom" md-open-on-focus ng-disabled="formState.readOnly"></md-datepicker> </md-input-container> </div> <div layout="row" class="top-margin form-readonly"> <md-input-container flex="30" flex-sm="100"> <label>{{\'main.status\' | translate}}</label> <hois-classifier-value ng-model="version.status" main-classifier-code="OPPEKAVA_VERSIOON_STAATUS"></hois-classifier-value> </md-input-container> </div> </fieldset> <hois-created-modified object="version"></hois-created-modified> </form> <div layout="row"> <div ng-show="version.status === VERSION_STATUS.S"> <div ng-show="!version.id"> <md-button class="md-raised md-primary" ng-click="save()">{{\'main.button.save\' | translate}}</md-button> </div> <div ng-show="!formState.readOnly && version.id"> <md-button class="md-raised md-primary" ng-click="save()" ng-if="version.canChange">{{\'main.button.save\' | translate}}</md-button> <md-button class="md-raised" ng-click="saveAndConfirm()" ng-if="version.canChange && version.canConfirm">{{\'curriculum.statuschange.version.button.verify\' | translate}}</md-button> <md-button class="md-raised" ng-click="setStatusClosed()" ng-if="version.canChange && version.canClose">{{\'curriculum.statuschange.version.button.close\' | translate}}</md-button> <md-button class="md-raised md-default" ng-click="copy()" ng-if="version.canChange">{{\'main.button.copy\' | translate}}</md-button> <md-button class="md-raised md-default" ng-click="delete()" ng-if="version.canDelete">{{\'main.button.delete\' | translate}}</md-button> </div> <div ng-show="formState.readOnly"> <md-button class="md-raised md-primary" ng-click="goToEditForm()" ng-if="version.canChange">{{\'main.button.change\' | translate}}</md-button> <md-button class="md-raised" ng-click="confirm()" ng-if="version.canConfirm">{{\'curriculum.statuschange.version.button.verify\' | translate}}</md-button> <md-button class="md-raised" ng-click="setStatusClosed()" ng-if="version.canClose">{{\'curriculum.statuschange.version.button.close\' | translate}}</md-button> <md-button class="md-raised md-default" ng-click="copy()" ng-if="version.canChange">{{\'main.button.copy\' | translate}}</md-button> </div> </div> <div ng-show="version.status === VERSION_STATUS.K"> <div ng-show="!formState.readOnly"> <md-button class="md-raised md-primary" ng-click="save()" ng-if="version.canChange">{{\'main.button.save\' | translate}}</md-button> </div> <div ng-show="formState.readOnly"> <md-button class="md-raised md-primary" ng-if="version.canChange" ng-click="goToEditForm()">{{\'main.button.change\' | translate}}</md-button> <md-button class="md-raised" ng-click="setStatusClosed()" ng-if="version.canClose">{{\'curriculum.statuschange.version.button.close\' | translate}}</md-button> <md-button class="md-raised md-default" ng-if="version.canChange" ng-click="copy()">{{\'main.button.copy\' | translate}}</md-button> </div> </div> <div ng-show="version.status === VERSION_STATUS.C"> <md-button class="md-raised md-default" ng-if="version.canChange" ng-click="copy()">{{\'main.button.copy\' | translate}}</md-button> </div> <a href="{{formState.curriculumPdfUrl}}" target="_blank" class="md-button md-raised" ng-if="version.id">{{\'main.button.print\' | translate}}</a> <a href="{{formState.curriculumXmlUrl}}" target="_blank" class="md-button md-raised" ng-if="version.id">XML</a> <md-button class="md-raised md-default" ng-click="back(\'#/higherCurriculum/\' + version.curriculum + \'/view\', higherCurriculumVersionForm)">{{\'main.button.back\' | translate}}</md-button> </div> </div> <style>.module-type {\r\n  text-decoration: underline;\r\n}</style>'),a.put("higherCurriculum/higher.curriculum.version.view.html",'<div class="ois-form-layout-padding" ng-cloak ng-show="!showMainForm"> <form name="higherCurriculumVersionForm" layout="column" class="nomargin"> <fieldset tabindex="1"> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'curriculum.versionMainData\' | translate}}</legend> <div layout="column"> <md-input-container flex ng-if="!showMainForm"> <label>{{\'curriculum.version.code\' | translate}}</label> <input name="code" ng-model="version.code" type="text" readonly> </md-input-container> <div layout="row" flex> <md-input-container flex="45"> <label>{{\'curriculum.version.firstAdmissionYear\' | translate}}</label> <md-select ng-model="version.admissionYear" disabled> <md-option ng-repeat="year in ::admissionYears" ng-value="year" aria-label="{{year}}">{{year}}</md-option> </md-select> </md-input-container> <md-input-container flex="50" flex-offset="5"> <label>{{\'curriculum.version.type\' | translate}}</label> <hois-classifier-select ng-model="version.type" main-classifier-code="OPPEKAVA_VERSIOON_LIIK" model-value-attr="code" disabled></hois-classifier-select> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="45" flex-sm="100" flex-xs="100"> <label>{{\'curriculum.specialty.specialties\' | translate}}</label> <md-select multiple ng-model="version.specialitiesReferenceNumbers" disabled> <md-option ng-repeat="speciality in curriculum.specialities | orderBy: currentLanguageNameField()" ng-value="speciality.referenceNumber"> {{currentLanguageNameField(speciality)}} </md-option> </md-select> </md-input-container> </div> <md-input-container flex ng-if="version.status === VERSION_STATUS.K"> <label>{{\'public.url\' | translate}}</label> <input ng-model="publicUrl" type="text" readonly> </md-input-container> <br> </div> </fieldset> <div>&nbsp;</div> <fieldset tabindex="2" flex> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'module.modules\' | translate}}</legend> <div ng-repeat="spectiality in curriculum.specialities | filter: filterSpecialities | orderBy: currentLanguageNameField()" flex> <h2 class="md-title-small">{{\'curriculum.specialty.specialty\' | translate}} {{$index + 1}}: {{currentLanguageNameField(spectiality)}}</h2> <div flex class="secondary-table-header" layout="row"> <div flex="5">&nbsp;</div> <div flex="35">{{\'subject.name\' | translate}}</div> <div flex="10">{{\'subject.code\' | translate}}</div> <div flex="20">EAP</div> <div></div> </div> <div layout="column" flex ng-repeat="module in version.modules | filter: {minorSpeciality: false} | filter: filterModulesBySpeciality(spectiality) | orderBy: currentLanguageNameField()"> <div layout="row" flex class="occupation-header" layout-align="start center"> <a href="" ng-click="openAddModuleDialog(module)" flex="70"> {{\'curriculum.module\' | translate}} {{currentLanguageNameField(module)}} {{module.totalCredits}} EAP <span ng-if="module.type === \'KORGMOODUL_M\'">({{currentLanguage()==\'et\' ? module.typeNameEt : module.typeNameEn}})</span> <span ng-if="module.type !== \'KORGMOODUL_M\'">(<hois-classifier-value ng-model="module.type" main-classifier-code="KORGMOODUL" class="inline module-type"></hois-classifier-value>)</span> </a> </div> <div flex class="sub-header1" layout-align="start center" layout="row" ng-show="moduleMustHaveSubjects(module)"> <div>{{\'subject.mandatory\' | translate}}</div> </div> <div ng-repeat="subject in module.subjects | filter: {optional: false} | orderBy: currentLanguageNameField()" layout="row" flex class="secondary-table-row" layout-align="start center"> <div flex="5">&nbsp;</div> <div flex="35">{{currentLanguageNameField(subject)}}</div> <div flex="10">{{subject.code}}</div> <div flex="20">{{subject.credits}}</div> <div></div> </div> <div layout="row" flex layout-align="start center" class="secondary-table-header" ng-show="moduleMustHaveSubjects(module)"> <div flex="5">&nbsp;</div> <div flex="35">{{\'main.OF\' | translate}}</div> <div flex="10">&nbsp;</div> <div flex="20">{{module.compulsoryStudyCredits}}</div> <div></div> </div> <div flex class="sub-header1" layout-align="start center" layout="row" ng-show="moduleMustHaveSubjects(module)"> <div>{{\'subject.optional\' | translate}}</div> </div> <div ng-repeat="subject in module.subjects |\r\n                        filter: {optional: true} | filter: {electiveModule: \'!\'} | orderBy: currentLanguageNameField()" layout="row" flex class="secondary-table-row" layout-align="start center"> <div flex="5">&nbsp;</div> <div flex="35">{{currentLanguageNameField(subject)}}</div> <div flex="10">{{subject.code}}</div> <div flex="20">{{subject.credits}}</div> <div></div> </div> <div flex class="sub-header-italic" layout-align="start center" layout="row" style="padding-left: 10px" ng-show="moduleMustHaveSubjects(module)"> <div>{{\'module.optionalsWithMinimum\' | translate}}{{module.electiveModulesNumber}}</div> </div> <div ng-repeat="electiveModule in module.electiveModules | orderBy: currentLanguageNameField()" layout-align="start center" flex> <div class="sub-header2" layout-align="start center" layout="row"> <div class="elective-module">{{\'module.optional\' | translate}}: {{currentLanguageNameField(electiveModule)}}</div> </div> <div ng-repeat="subject in module.subjects | filter: {optional: true} |\r\n                                filter: {electiveModule: electiveModule.referenceNumber} | orderBy: currentLanguageNameField()" layout="row" flex class="secondary-table-row" layout-align="start center"> <div flex="5">&nbsp;</div> <div flex="35">{{currentLanguageNameField(subject)}}</div> <div flex="10">{{subject.code}}</div> <div flex="20">{{subject.credits}}</div> <div></div> </div> </div> <div layout="row" flex layout-align="start center" class="secondary-table-header"> <div flex="5">&nbsp;</div> <div flex="35">{{\'module.overallAtLeast\' | translate}}</div> <div flex="10">&nbsp;</div> <div flex="20">{{module.optionalStudyCredits}}</div> <div></div> </div> </div> <!-- end show modules by specialities--> </div> </fieldset> <div>&nbsp;</div> <fieldset tabindex="3"> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'curriculum.minorSpecialty.minorSpecialties\' | translate}}</legend> <div layout="column" flex ng-repeat="module in version.modules | filter: {minorSpeciality: true} | orderBy: currentLanguageNameField()"> <div layout="row" flex class="occupation-header" layout-align="start center"> <a href="" ng-click="openAddMinorSpecialtyDialog(module)" flex="70"> <span>{{\'curriculum.minorSpecialty.minorSpecialty\' | translate}} {{currentLanguageNameField(module)}} {{module.totalCredits}} EAP</span> </a> </div> <div flex class="sub-header1" layout-align="start center" layout="row"> <div>{{\'subject.mandatory\' | translate}}</div> </div> <div ng-repeat="subject in module.subjects | filter: {optional: false} | orderBy: currentLanguageNameField()" layout="row" flex class="secondary-table-row" layout-align="start center"> <div flex="5">&nbsp;</div> <div flex="35">{{currentLanguageNameField(subject)}}</div> <div flex="10">{{subject.code}}</div> <div flex="20">{{subject.credits}}</div> <div></div> </div> <div layout="row" flex layout-align="start center" class="secondary-table-header"> <div flex="5">&nbsp;</div> <div flex="35">{{\'main.OF\' | translate}}</div> <div flex="10">&nbsp;</div> <div flex="20">{{module.compulsoryStudyCredits}}</div> <div></div> </div> <div flex class="sub-header1" layout-align="start center" layout="row"> <div>{{\'subject.optional\' | translate}}</div> </div> <div ng-repeat="subject in module.subjects |\r\n                        filter: {optional: true} | filter: {electiveModule: \'!\'} | orderBy: currentLanguageNameField()" layout="row" flex class="secondary-table-row" layout-align="start center"> <div flex="5">&nbsp;</div> <div flex="35">{{currentLanguageNameField(subject)}}</div> <div flex="10">{{subject.code}}</div> <div flex="20">{{subject.credits}}</div> <div></div> </div> <div flex class="sub-header-italic" layout-align="start center" layout="row" style="padding-left: 10px"> <div>{{\'module.optionalsWithMinimum\' | translate}}{{module.electiveModulesNumber}}</div> </div> <div ng-repeat="electiveModule in module.electiveModules | orderBy: currentLanguageNameField()" layout-align="start center" flex> <div class="sub-header2" layout-align="start center" layout="row"> <div class="elective-module">{{\'module.optional\' | translate}}: {{currentLanguageNameField(electiveModule)}}</div> </div> <div ng-repeat="subject in module.subjects | filter: {optional: true} |\r\n                                filter: {electiveModule: electiveModule.referenceNumber} | orderBy: currentLanguageNameField()" layout="row" flex class="secondary-table-row" layout-align="start center"> <div flex="5">&nbsp;</div> <div flex="35">{{currentLanguageNameField(subject)}}</div> <div flex="10">{{subject.code}}</div> <div flex="20">{{subject.credits}}</div> <div></div> </div> </div> <div layout="row" flex layout-align="start center" class="secondary-table-header"> <div flex="5">&nbsp;</div> <div flex="35">{{\'module.overallAtLeast\' | translate}}</div> <div flex="10">&nbsp;</div> <div flex="20">{{module.optionalStudyCredits}}</div> <div></div> </div> </div> </fieldset> <div>&nbsp;</div> <fieldset tabindex="4"> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'curriculum.versionStatus\' | translate}}</legend> <div layout="row" flex="100"> <md-input-container flex="30" flex-sm="100" flex-xs="100"> <label>{{\'main.validFrom\' | translate}}</label> <md-datepicker ng-model="version.validFrom" md-open-on-focus disabled></md-datepicker> </md-input-container> <md-input-container flex="20" flex-sm="100" flex-xs="100" flex-offset-xs="0" flex-offset-sm="0" flex-offset="4"> <label>{{\'main.validTo\' | translate}}</label> <md-datepicker ng-model="version.validThru" md-min-date="version.validFrom" md-open-on-focus disabled></md-datepicker> </md-input-container> </div> <div layout="row" class="top-margin form-readonly"> <md-input-container flex="30" flex-sm="100"> <label>{{\'main.status\' | translate}}</label> <hois-classifier-value ng-model="version.status" main-classifier-code="OPPEKAVA_VERSIOON_STAATUS"></hois-classifier-value> </md-input-container> </div> </fieldset> <hois-created-modified object="version"></hois-created-modified> </form> <div layout="row"> <div ng-show="version.status === VERSION_STATUS.S"> <md-button class="md-raised md-primary" ng-click="goToEditForm()" ng-if="version.canChange">{{\'main.button.change\' | translate}}</md-button> <md-button class="md-raised" ng-click="confirm()" ng-if="version.canConfirm">{{\'curriculum.statuschange.version.button.verify\' | translate}}</md-button> <md-button class="md-raised" ng-click="setStatusClosed()" ng-if="version.canClose">{{\'curriculum.statuschange.version.button.close\' | translate}}</md-button> <md-button class="md-raised md-default" ng-click="copy()" ng-if="version.canChange">{{\'main.button.copy\' | translate}}</md-button> </div> <div ng-show="version.status === VERSION_STATUS.K"> <md-button class="md-raised md-primary" ng-if="version.canChange" ng-click="goToEditForm()">{{\'main.button.change\' | translate}}</md-button> <md-button class="md-raised" ng-click="setStatusClosed()" ng-if="version.canClose">{{\'curriculum.statuschange.version.button.close\' | translate}}</md-button> <md-button class="md-raised md-default" ng-if="version.canChange" ng-click="copy()">{{\'main.button.copy\' | translate}}</md-button> </div> <div ng-show="version.status === VERSION_STATUS.C"> <md-button class="md-raised md-default" ng-if="version.canChange" ng-click="copy()">{{\'main.button.copy\' | translate}}</md-button> </div> <a href="{{formState.curriculumPdfUrl}}" target="_blank" class="md-button md-raised" ng-if="version.id">{{\'main.button.print\' | translate}}</a> <a href="{{formState.curriculumXmlUrl}}" target="_blank" class="md-button md-raised" ng-if="version.id">XML</a> <md-button class="md-raised md-default" ng-click="back(\'#/higherCurriculum/\' + version.curriculum + \'/view\', higherCurriculumVersionForm)">{{\'main.button.back\' | translate}}</md-button> </div> </div> <style>.module-type {\r\n  text-decoration: underline;\r\n}</style>'),a.put("higherCurriculum/higher.curriculum.view.html",'<div class="ois-form-layout-padding"> <form name="higherCurriculumForm" layout="column" class="nomargin"> <div layout="row" layout-sm="column" layout-xs="column"> <fieldset tabindex="1" layout="column" flex="30" flex-sm="100" flex-xs="100" class="higher-curriculum-top-fieldset"> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'curriculum.nameTitle\' | translate}}</legend> <md-input-container flex="100"> <label>{{\'curriculum.nameEt\' | translate}}</label> <input ng-model="curriculum.nameEt" type="text" readonly> </md-input-container> <md-input-container flex="100"> <label>{{\'curriculum.nameEn\' | translate}}</label> <input ng-model="curriculum.nameEn" type="text" readonly> </md-input-container> <md-input-container flex="100"> <label>{{\'curriculum.nameGenitiveEt\' | translate}}</label> <input ng-model="curriculum.nameGenitiveEt" type="text" readonly> </md-input-container> <md-input-container flex="1000"> <label>{{\'curriculum.nameGenitiveEn\' | translate}}</label> <input ng-model="curriculum.nameGenitiveEn" type="text" readonly> </md-input-container> </fieldset> <fieldset tabindex="2" flex="66" flex-offset="4" flex-sm="100" flex-xs="100" flex-offset-xs="0" flex-offset-sm="0"> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'curriculum.mainData\' | translate}}</legend> <div layout="row" flex> <div flex="45"> <md-checkbox ng-model="curriculum.joint" aria-label="{{\'curriculum.isJoint\' | translate}}" class="md-primary" disabled> {{\'curriculum.isJoint\' | translate}} </md-checkbox> </div> <md-input-container flex="50" flex-offset="5"> <label>{{\'curriculum.code\' | translate}}</label> <input ng-model="curriculum.code" name="code" type="text" readonly> </md-input-container> </div> <div layout="row" flex> <md-input-container flex="45"> <label>{{\'curriculum.studyLevel\' | translate}}</label> <hois-classifier-select ng-model="curriculum.origStudyLevel" main-classifier-code="OPPEASTE" model-value-attr="code" disabled></hois-classifier-select> </md-input-container> <md-input-container flex="50" flex-offset="5"> <label>{{\'curriculum.merCode\' | translate}}</label> <input ng-model="curriculum.merCode" name="merCode" type="text" readonly> </md-input-container> </div> <div layout="row" flex> <md-input-container flex="45"> <label>{{\'curriculum.ekrLevel\' | translate}}</label> <hois-classifier-select ng-model="ekrLevel" main-classifier-code="EKR" watch-model="curriculum.origStudyLevel" filter-values connect-main-classifier-code="EKR" select-first-value disabled></hois-classifier-select> </md-input-container> <md-input-container flex="50" flex-offset="5"> <label>{{\'curriculum.creditsEap\' | translate}}</label> <input ng-model="curriculum.credits" type="number" name="credits" readonly> </md-input-container> </div> <div layout="row" flex> <md-input-container flex="45"> <label>{{\'curriculum.educationLevel\' | translate}}</label> <hois-classifier-select ng-model="educationLevel" main-classifier-code="HARIDUSTASE" watch-model="curriculum.origStudyLevel" filter-values connect-main-classifier-code="HARIDUSTASE" select-first-value disabled></hois-classifier-select> </md-input-container> <md-input-container flex="25" flex-offset="5"> <input ng-model="curriculum.studyPeriodYears" type="number" name="studyPeriodYears" placeholder="{{\'curriculum.studyPeriod\' | translate}} {{\'main.years\' | translate}}" readonly> </md-input-container> <md-input-container flex="20" flex-offset="5"> <input ng-model="curriculum.studyPeriodMonths" type="number" name="studyPeriodMonths" placeholder="{{\'main.months\' | translate}}" readonly> </md-input-container> </div> <div layout="row" flex> <md-input-container flex="45"> <label>{{\'curriculum.curriculumGroup\' | translate}}</label> <hois-classifier-select ng-model="curriculum.group" main-classifier-code="OPPEKAVAGRUPP" model-value-attr="code" disabled></hois-classifier-select> </md-input-container> <md-input-container flex="50" flex-offset="5"> <label>{{\'curriculum.studyLanguage\' | translate}}</label> <hois-classifier-select multiple ng-model="curriculum.studyLanguages" main-classifier-code="OPPEKEEL" model-value-attr="code" criteria="{higher: true}" disabled></hois-classifier-select> </md-input-container> </div> <div layout="row" flex> <md-input-container flex="45"> <label>{{\'curriculum.areaOfStudy\' | translate}}</label> <hois-classifier-select ng-model="curriculum.areaOfStudy" main-classifier-code="ISCED_VALD" model-value-attr="code" criteria="{higher: true}" disabled></hois-classifier-select> </md-input-container> <md-input-container flex="50" flex-offset="5"> <label>{{\'curriculum.languageDescription\' | translate}}</label> <textarea ng-model="curriculum.languageDescription" max-rows="10" readonly></textarea> </md-input-container> </div> <div layout="row" flex> <md-input-container flex="45"> <label>{{\'curriculum.fieldOfStudy\' | translate}}</label> <hois-classifier-select ng-model="curriculum.fieldOfStudy" main-classifier-code="ISCED_SUUN" watch-model="curriculum.areaOfStudy" filter-values search-from-connect connect-main-classifier-code="ISCED_VALD" criteria="{higher: true}" disabled model-value-attr="code"></hois-classifier-select> </md-input-container> <!-- hois-school-department-select was not used here as it set form $dirty after page load.\r\n          In addition, extra logic in providing options --> <md-input-container flex="50" flex-offset="5"> <label> {{\'curriculum.structuralUnitResponsible\' | translate}} </label> <hois-select ng-model="curriculum.schoolDepartments" multiple values="schoolDepartments" disabled></hois-select> </md-input-container> </div> </fieldset> </div> <div>&nbsp;</div> <fieldset tabindex="4"> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'curriculum.commonData\' | translate}}</legend> <div layout="column"> <md-input-container flex> <label>{{\'stateCurriculum.enter.objectivesEt\' | translate}}</label> <textarea ng-model="curriculum.objectivesEt" max-rows="10" readonly></textarea> </md-input-container> <md-input-container flex> <label>{{\'stateCurriculum.enter.objectivesEn\' | translate}}</label> <textarea ng-model="curriculum.objectivesEn" max-rows="10" readonly></textarea> </md-input-container> <md-input-container flex> <label>{{\'curriculum.studyOutcomesEt\' | translate}}</label> <textarea ng-model="curriculum.outcomesEt" max-rows="10" readonly></textarea> </md-input-container> <md-input-container flex> <label>{{\'curriculum.studyOutcomesEn\' | translate}}</label> <textarea ng-model="curriculum.outcomesEn" max-rows="10" readonly></textarea> </md-input-container> <md-input-container flex> <label>{{\'curriculum.higherAdmissionRequirementsEt\' | translate}}</label> <textarea ng-model="curriculum.admissionRequirementsEt" max-rows="10" readonly></textarea> </md-input-container> <md-input-container flex> <label>{{\'curriculum.higherAdmissionRequirementsEn\' | translate}}</label> <textarea ng-model="curriculum.admissionRequirementsEn" max-rows="10" readonly></textarea> </md-input-container> <md-input-container flex> <label>{{\'curriculum.higherGraduationRequirementsEt\' | translate}}</label> <textarea ng-model="curriculum.graduationRequirementsEt" max-rows="10" readonly></textarea> </md-input-container> <md-input-container flex> <label>{{\'curriculum.higherGraduationRequirementsEn\' | translate}}</label> <textarea ng-model="curriculum.graduationRequirementsEn" max-rows="10" readonly></textarea> </md-input-container> <md-input-container flex> <label>{{\'curriculum.optionalStudyDescription\' | translate}}</label> <textarea ng-model="curriculum.optionalStudyDescription" max-rows="10" readonly></textarea> </md-input-container> <md-input-container flex> <label>{{\'curriculum.addInfo\' | translate}}</label> <textarea ng-model="curriculum.addInfo" max-rows="10" readonly></textarea> </md-input-container> <md-input-container flex> <label>{{\'stateCurriculum.enter.comment\' | translate}}</label> <textarea ng-model="curriculum.description" max-rows="10" readonly></textarea> </md-input-container> <md-input-container flex> <label>{{\'curriculum.otherLanguages\' | translate}}</label> <textarea ng-model="curriculum.otherLanguages" max-rows="10" readonly></textarea> </md-input-container> <md-input-container flex ng-if="curriculum.status === STATUS.VERIFIED"> <label>{{\'public.url\' | translate}}</label> <input ng-model="publicUrl" type="text" readonly> </md-input-container> </div> </fieldset> <div>&nbsp;</div> <fieldset tabindex="9"> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'curriculum.approvalInfo\' | translate}}</legend> <div layout="row" flex="100"> <md-input-container flex="30" flex-sm="100" flex-xs="100"> <label>{{\'curriculum.approvalDocumentNr\' | translate}}</label> <input ng-model="curriculum.approvalDokNr" type="text" readonly> </md-input-container> <md-input-container flex="20" flex-offset="4"> <label>{{\'curriculum.approvalDate\' | translate}}</label> <md-datepicker ng-model="curriculum.approval" md-open-on-focus disabled></md-datepicker> </md-input-container> <md-input-container flex="20" flex-offset="5"> <label>{{\'curriculum.htmRegisterDate\' | translate}}</label> <md-datepicker ng-model="curriculum.merRegDate" md-open-on-focus disabled></md-datepicker> </md-input-container> </div> <div layout="row" flex="100"> <md-input-container flex="30" flex-sm="100" flex-xs="100"> <label>{{\'curriculum.accreditationDesision\' | translate}}</label> <input ng-model="curriculum.accreditationResolution" type="text" readonly> </md-input-container> <md-input-container flex="20" flex-offset="4"> <label>{{\'curriculum.accreditationDate\' | translate}}</label> <md-datepicker ng-model="curriculum.accreditationDate" md-open-on-focus disabled></md-datepicker> </md-input-container> </div> <div layout="row" flex="100"> <md-input-container flex="30" flex-sm="100" flex-xs="100"> <label>{{\'curriculum.accreditationDesisionNumber\' | translate}}</label> <input ng-model="curriculum.accreditationNr" type="text" readonly> </md-input-container> <md-input-container flex="20" flex-offset="4"> <label>{{\'curriculum.accreditationValidityDate\' | translate}}</label> <md-datepicker ng-model="curriculum.accreditationValidDate" md-open-on-focus disabled></md-datepicker> </md-input-container> </div> </fieldset> <div>&nbsp;</div> <div>&nbsp;</div> <fieldset tabindex="10"> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'curriculum.statuses\' | translate}}</legend> <div layout="row" flex="100"> <md-input-container flex="30" flex-sm="100" flex-xs="100"> <label>{{\'main.validFrom\' | translate}}</label> <md-datepicker ng-model="curriculum.validFrom" md-open-on-focus disabled></md-datepicker> </md-input-container> <md-input-container flex="20" flex-sm="100" flex-xs="100" flex-offset-xs="0" flex-offset-sm="0" flex-offset="4"> <label>{{\'main.validTo\' | translate}}</label> <md-datepicker ng-model="curriculum.validThru" md-min-date="curriculum.validFrom" md-open-on-focus disabled></md-datepicker> </md-input-container> </div> <div layout="row" flex="100" class="top-margin form-readonly"> <md-input-container flex="30" flex-sm="100" flex-xs="100" class="readonly"> <label class="label">{{\'main.status\' | translate}}</label> <hois-classifier-value ng-model="curriculum.status" main-classifier-code="OPPEKAVA_STAATUS"></hois-classifier-value> </md-input-container> <md-input-container flex="20" flex-sm="100" flex-xs="100" flex-offset-xs="0" flex-offset-sm="0" flex-offset="4"> <label>{{\'curriculum.statusInEhis\' | translate}}</label> <hois-classifier-value ng-model="curriculum.ehisStatus" main-classifier-code="OPPEKAVA_EHIS_STAATUS"></hois-classifier-value> </md-input-container> <md-input-container flex="40" flex-sm="100" flex-xs="100" flex-offset-xs="0" flex-offset-sm="0" flex-offset="5"> <label>{{\'curriculum.statusChangedDateInEhis\' | translate}}</label> <hois-value value="curriculum.ehisChanged | hoisDate"></hois-value> </md-input-container> </div> </fieldset> <div ng-show="curriculum.joint">&nbsp;</div> <fieldset tabindex="8" ng-show="curriculum.joint"> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'curriculum.jointInfo\' | translate}}</legend> <div layout="column"> <div layout="column" flex ng-show="curriculum.joint" class="common-label"> <label class="md-required common-label" flex="30">{{\'curriculum.jointSchool\' | translate}}</label> <div>&nbsp;</div> <div layout="row" ng-repeat="item in curriculum.jointPartners | filter: filterEmptyJointPartners | orderBy: [\'ehisSchool\', \'nameEt\']" class="align-center"> <div flex="5">&nbsp;</div> <div ng-if="item.abroad">{{currentLanguageNameField(item)}}</div> <div ng-if="!item.abroad"> <hois-classifier-value ng-model="item.ehisSchool" main-classifier-code="EHIS_KOOL"></hois-classifier-value> </div> <div flex="5">&nbsp;</div> <div flex="5"></div> </div> </div> <div layout="row" layout-sm="column" layout-xs="column" ng-show="curriculum.joint"> <md-input-container flex="30" ng-if="curriculum.joint"> <label>{{\'curriculum.jointMentor\' | translate}}</label> <hois-classifier-select ng-model="curriculum.jointMentor" main-classifier-code="EHIS_KOOL" model-value-attr="code" disabled></hois-classifier-select> </md-input-container> <md-input-container flex="66" flex-offset="4"> <label>{{\'curriculum.jointResponsible\' | translate}}</label> <input ng-model="curriculum.supervisor" type="text" readonly> </md-input-container> </div> <md-input-container flex="100"> <label>{{\'curriculum.jointAgreementInfoEt\' | translate}}</label> <textarea ng-model="curriculum.contractEt" max-rows="10" md-select-on-focus readonly></textarea> </md-input-container> <md-input-container flex="100"> <label>{{\'curriculum.jointAgreementInfoEn\' | translate}}</label> <textarea ng-model="curriculum.contractEn" max-rows="10" md-select-on-focus readonly></textarea> </md-input-container> </div> </fieldset> <div>&nbsp;</div> <fieldset tabindex="12"> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'curriculum.specialty.label\' | translate}}</legend> <div ng-repeat="item in curriculum.specialities | orderBy: currentLanguageNameField()" layout="column"> <div layout="row" class="occupation-row align-center" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <div flex="35"> <a ng-click="openViewSpecialtyDialog(item)" href="">{{currentLanguageNameField(item)}}</a> </div> </div> </div> </fieldset> <div>&nbsp;</div> <fieldset tabindex="12" ng-show="gradeRequired()"> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'curriculum.grade.label\' | translate}}</legend> <div ng-repeat="item in curriculum.grades | orderBy: currentLanguageNameField()" layout="column"> <div layout="row" class="occupation-row align-center" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <div flex="35"> <a ng-click="openViewGradeDialog(item)" href="">{{currentLanguageNameField(item)}}</a> </div> </div> </div> </fieldset> <fieldset tabindex="11"> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'main.relatedFiles\' | translate}}</legend> <table md-table class="secondary-table"> <thead md-head> <tr md-row> <th md-column> <span>{{\'file.nameAndFile\' | translate}}</span> </th> <th md-column> <span>{{\'file.creationLocation\' | translate}}</span> </th> <th md-column>{{\'file.type\' | translate}}</th> <th md-column>{{\'curriculum.sendToEhis\' | translate}}</th> <th md-column></th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="file in curriculum.files | orderBy: \'oisFile.fname\'" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell> {{file.oisFile.fname}} <a ng-href="{{getUrl(file, \'curriculum\')}}" download> <md-icon md-font-set="material-icons">file_download</md-icon> </a> </td> <td md-cell> {{file.ehis ? \'EHIS\' : \'ÕIS\'}} </td> <td md-cell> <hois-classifier-value ng-model="file.ehisFile" main-classifier-code="EHIS_FAIL"></hois-classifier-value> </td> <td md-cell> <md-checkbox ng-model="file.sendEhis" aria-label="send to ehis" disabled></md-checkbox> </td> <td md-cell></td> </tr> </tbody> </table> </fieldset> <div>&nbsp;</div> <fieldset tabindex="12"> <legend md-colors="{color: \'primary-800\'}" class="md-title-small"> <span>{{\'curriculum.versions\' | translate}}</span> </legend> <table md-table class="secondary-table"> <thead md-head> <tr md-row> <th md-column> <span>{{\'curriculum.versionName\' | translate}}</span> </th> <th md-column> <span>{{\'main.status\' | translate}}</span> </th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="version in curriculum.versions | orderBy: \'code\'" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell> <a ng-click="goToVersionForm(version)" href="">{{version.code}}</a> </td> <td md-cell> <hois-classifier-value ng-model="version.status" main-classifier-code="OPPEKAVA_VERSIOON_STAATUS"></hois-classifier-value> </td> </tr> </tbody> </table> </fieldset> <hois-created-modified object="curriculum" class="top-margin"></hois-created-modified> <div layout="row"> <div ng-show="curriculum.status === STATUS.ENTERING"> <md-button class="md-raised md-primary" ng-click="goToEditForm()" ng-if="curriculum.canChange">{{\'main.button.change\' | translate}}</md-button> </div> <div ng-show="curriculum.status === STATUS.PROCEEDING && !formState.sentToEhis"> <md-button class="md-raised md-primary" ng-click="goToEditForm()" ng-if="curriculum.canChange">{{\'main.button.change\' | translate}}</md-button> <md-button class="md-raised md-default" ng-click="sendToEhis()" ng-if="curriculum.canConfirm">{{\'main.button.sendToEhis\' | translate}}</md-button> <md-button class="md-raised" ng-click="setStatusClosed()" ng-if="curriculum.canClose">{{\'main.button.status.close\' | translate}}</md-button> </div> <div ng-show="curriculum.status === STATUS.PROCEEDING && formState.sentToEhis"> <md-button class="md-raised md-default" ng-click="updateFromEhis()" ng-if="curriculum.canConfirm">{{\'main.button.updateFromEhis\' | translate}}</md-button> </div> <div ng-show="curriculum.status === STATUS.VERIFIED"> <md-button class="md-raised md-primary" ng-click="goToEditForm()" ng-if="curriculum.canChange">{{\'main.button.change\' | translate}}</md-button> <md-button class="md-raised" ng-click="setStatusClosed()" ng-if="curriculum.canClose">{{\'main.button.status.close\' | translate}}</md-button> </div> <a href="{{formState.curriculumXmlUrl}}" target="_blank" class="md-button md-raised">XML</a> <md-button class="md-raised md-default" ng-click="back(\'#/curriculum\')">{{\'main.button.back\' | translate}}</md-button> </div> </form> </div>'),
a.put("higherProtocol/higher.protocol.edit.html",'<div class="ois-form-layout-padding" ng-cloak> <div layout="row" layout-sm="column" layout-xs="column" class="ois-form-layout-padding form-readonly"> <md-input-container flex="30" flex-sm="100" flex-xs="100"> <label>{{\'higherProtocol.subject\' | translate}}</label> <hois-value value="currentLanguageNameField(record.subjectStudyPeriodMidtermTaskDto.subjectStudyPeriod.subject)"></hois-value> </md-input-container> <md-input-container flex="30" flex-sm="100" flex-xs="100" flex-offset-xs="0" flex-offset-sm="0" flex-offset="5"> <label>{{\'higherProtocol.teacher\' | translate}}</label> <hois-value value="record.subjectStudyPeriodMidtermTaskDto.subjectStudyPeriod.teachers.join(\', \')"></hois-value> </md-input-container> <md-input-container flex="30" flex-sm="100" flex-xs="100" flex-offset-xs="0" flex-offset-sm="0" flex-offset="5"> <label>{{\'higherProtocol.studyPeriod\' | translate}}</label> <hois-value value="currentLanguageNameField(record.subjectStudyPeriodMidtermTaskDto.subjectStudyPeriod.studyPeriod)"></hois-value> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column" class="ois-form-layout-padding form-readonly"> <md-input-container flex="30" flex-sm="100" flex-xs="100"> <label>{{\'higherProtocol.number\' | translate}}</label> <hois-value value="record.protocolNr"></hois-value> </md-input-container> <md-input-container flex="30" flex-sm="100" flex-xs="100" flex-offset-xs="0" flex-offset-sm="0" flex-offset="5"> <label>{{\'higherProtocol.type\' | translate}}</label> <hois-classifier-value ng-model="record.protocolType" main-classifier-code="PROTOKOLLI_LIIK"></hois-classifier-value> </md-input-container> <md-input-container flex="30" flex-sm="100" flex-xs="100" flex-offset-xs="0" flex-offset-sm="0" flex-offset="5"> <label>{{\'higherProtocol.status\' | translate}}</label> <hois-classifier-value ng-model="record.status" main-classifier-code="PROTOKOLL_STAATUS"></hois-classifier-value> </md-input-container> </div> <form layout="column" name="higherProtocolForm"> <md-table-container> <table md-table md-row-select="formState.canCalculate" multiple ng-model="calculateGrades.protocolStudents"> <thead md-head> <tr md-row> <th md-column>{{\'higherProtocol.student\' | translate}}</th> <th md-column ng-show="record.subjectStudyPeriodMidtermTaskDto.subjectStudyPeriod.isPracticeSubject">{{\'higherProtocol.practiceResult\' | translate}}</th> <th md-column ng-repeat="midtermTask in record.subjectStudyPeriodMidtermTaskDto.midtermTasks"> {{getMidtermTaskHeader(midtermTask)}} </th> <th md-column>{{\'higherProtocol.finalGrade\' | translate}}</th> <th md-column>{{\'higherProtocol.comment\' | translate}}</th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="student in record.protocolStudents | orderBy: \'student.nameEt\'" ng-class-odd="\'odd\'" ng-class-even="\'even\'" md-select="student.id" md-select-id="student.id"> <ng-form name="higherProtocolStudentForm"> <td md-cell>{{student.student.nameEt}}</td> <td md-cell ng-show="record.subjectStudyPeriodMidtermTaskDto.subjectStudyPeriod.isPracticeSubject">{{student.practiceResult}}</td> <td md-cell ng-repeat="result in record.subjectStudyPeriodMidtermTaskDto.studentResults | filter: filterStudentResults(student)"> <span ng-if="!result.isText">{{result.points}}</span> <span ng-if="result.isText">{{result.pointsTxt}}</span> </td> <td md-cell> <md-input-container> <hois-select ng-model="student.grade" values="grades" show-property="value" value-property="code" aria-label="{{\'higherProtocol.finalGrade\' | translate}}" ng-change="setFormDirty()"></hois-select> </md-input-container> </td> <td md-cell> <md-input-container> <input ng-model="student.addInfo" type="text" md-maxlength="255" aria-label="{{\'higherProtocol.comment\' | translate}}" ng-required="formState.isConfirmed && student.changed" ng-change="setFormDirty()"> </md-input-container> </td> </ng-form> </tr> </tbody> </table> </md-table-container> <br> <div layout="row"> <md-button class="md-raised" ng-click="calculate()" ng-show="formState.canCalculate" ng-disabled="calculateGrades.protocolStudents.length === 0">{{\'higherProtocol.calculate\' | translate}}</md-button> </div> <br> <div> <md-button class="md-raised md-primary" ng-click="save()" ng-show="record.canChange">{{\'main.button.save\' | translate}}</md-button> <md-button class="md-raised" ng-click="saveAndConfirm()" ng-show="formState.canConfirm">{{\'main.button.confirm\' | translate}}</md-button> <a href="{{formState.protocolPdfUrl}}" target="_blank" class="md-button md-raised">{{\'main.button.print\' | translate}}</a> <md-button class="md-raised" ng-href="#/higherProtocols">{{\'main.button.back\' | translate}}</md-button> </div> </form> </div>'),a.put("higherProtocol/higher.protocol.new.html",'<div class="ois-form-layout-padding" ng-cloak> <div flex> <form ng-submit="higherProtocolNewForm.$valid && submit()" novalidate layout="column" name="higherProtocolNewForm"> <div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex flex-sm="100"> <label class="textInput">{{\'higherProtocol.subject\' | translate}}</label> <hois-select ng-model="record.subjectStudyPeriod" values="subjectStudyPeriods" required></hois-select> </md-input-container> </div> <br> <div layout="row"> <label flex="10" flex-sm="30" flex-xs="30" class="common-label">{{\'higherProtocol.type\' | translate}}</label> <hois-classifier-radio layout="row" ng-model="record.protocolType" model-value-attr="code" main-classifier-code="PROTOKOLLI_LIIK" required ng-disabled="formState.readOnly" class="md-primary"></hois-classifier-radio> </div> <br> <md-table-container> <table md-table md-row-select="true" multiple ng-model="record.students"> <thead md-head> <tr md-row> <th md-column>{{\'higherProtocol.student\' | translate}}</th> <th md-column>{{\'higherProtocol.studentGroup\' | translate}}</th> <th md-column>{{\'higherProtocol.curriculumCode\' | translate}}</th> </tr> </thead> <tbody md-body> <tr md-row md-select="student.id" md-select-id="student.id" ng-repeat="student in students | orderBy: \'fullname\'" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell>{{student.fullname}}</td> <td md-cell>{{student.studentGroup.nameEt}}</td> <td md-cell>{{student.curriculum.nameEt}}</td> </tr> </tbody> </table> </md-table-container> </div> <br> <div layout="row"> <md-button class="md-raised md-primary" type="submit">{{\'higherProtocol.create\' | translate}}</md-button> <md-button class="md-raised" ng-click="back(\'#/higherProtocols/\')">{{"main.button.back" | translate}}</md-button> </div> </form> </div> </div>'),a.put("higherProtocol/higher.protocol.search.html",'<div class="ois-form-layout-padding ois-form-layout" ng-cloak> <div flex> <fieldset> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'main.searchlabel\' | translate}}</legend> <form name="higherProtocolSearchForm" ng-submit="loadData()" novalidate class="nomargin"> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="50" flex-sm="100" flex-xs="100"> <label class="textInput">{{\'higherProtocol.studyPeriod\' | translate}}</label> <hois-select ng-model="criteria.studyPeriod" values="studyPeriods" required autofocus></hois-select> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="50" flex-sm="100" flex-xs="100"> <label class="textInput">{{\'higherProtocol.subject\' | translate}}</label> <input type="text" ng-model="criteria.subject"> <!-- <hois-select ng-model="criteria.subject" type="subject" criteria="{higher: true}"></hois-select> --> </md-input-container> <md-input-container flex="45" flex-sm="100" flex-xs="100" flex-offset-xs="0" flex-offset-sm="0" flex-offset="5" ng-show="auth.isAdmin()"> <label class="textInput">{{\'higherProtocol.teacher\' | translate}}</label> <hois-select ng-model="criteria.teacher" type="teacher" criteria="{higher: true}"></hois-select> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="50" flex-sm="100" flex-xs="100"> <label class="textInput">{{\'higherProtocol.protocolStatus\' | translate}}</label> <hois-classifier-select ng-model="criteria.status" criteria="{higher: true}" model-value-attr="code" main-classifier-code="PROTOKOLL_STAATUS"></hois-classifier-select> </md-input-container> <md-input-container flex="45" flex-sm="100" flex-xs="100" flex-offset-xs="0" flex-offset-sm="0" flex-offset="5"> <label class="textInput">{{\'higherProtocol.number\' | translate}}</label> <input type="text" ng-model="criteria.protocolNr"> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <div flex="50" flex-sm="100" flex-xs="100"> <div layout="column" flex> <label class="common-label">{{\'higherProtocol.protocolCreatedDate\' | translate}}</label> <div layout="row" flex> <md-input-container> <label>{{\'main.from\' | translate}}</label> <md-datepicker ng-model="criteria.insertedFrom"></md-datepicker> </md-input-container> <md-input-container flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'main.thru\' | translate}}</label> <md-datepicker ng-model="criteria.insertedThru" md-min-date="criteria.insertedFrom"></md-datepicker> </md-input-container> </div> </div> </div> <div flex="45" flex-sm="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <div layout="column" flex> <label class="common-label">{{\'higherProtocol.protocolConfirmedDate\' | translate}}</label> <div layout="row" flex> <md-input-container> <label>{{\'main.from\' | translate}}</label> <md-datepicker ng-model="criteria.confirmDateFrom"></md-datepicker> </md-input-container> <md-input-container flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'main.thru\' | translate}}</label> <md-datepicker ng-model="criteria.confirmDateThru" md-min-date="criteria.confirmDateFrom"></md-datepicker> </md-input-container> </div> </div> </div> </div> <br><br><br> <div layout="row"> <md-button type="submit" class="md-raised md-primary">{{\'main.button.search\' | translate}}</md-button> <md-button class="md-raised" ng-click="clearCriteria()">{{\'main.button.clear\' | translate}}</md-button> <md-button class="md-raised" ng-href="#/higherProtocols/new" ng-if="formState.canCreate">{{\'main.button.create\' | translate}}</md-button> </div> </form> </fieldset> </div> </div> <div layout-padding> <div flex> <md-table-container> <table md-table md-progress="tabledata.$promise"> <thead md-head md-order="criteria.order" md-on-reorder="loadData"> <tr md-row> <th md-column md-order-by="protocolNr">{{\'higherProtocol.number\' | translate}}</th> <th md-column md-order-by="protocolHdata.type.{{currentLanguageNameField()}}">{{\'higherProtocol.type\' | translate}}</th> <th md-column md-order-by="protocolHdata.subjectStudyPeriod.subject.{{currentLanguageNameField()}}">{{\'higherProtocol.subject\' | translate}}</th> <th md-column>{{\'higherProtocol.teacher\' | translate}}</th> <th md-column md-order-by="status.{{currentLanguageNameField()}}">{{\'main.status\' | translate}}</th> <th md-column md-order-by="inserted">{{\'higherProtocol.insertedDate\' | translate}}</th> <th md-column md-order-by="confirmDate">{{\'higherProtocol.confirmedDate\' | translate}}</th> <th md-column md-order-by="confirmer">{{\'higherProtocol.confirmer\' | translate}}</th> <th md-column></th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="row in tabledata.content" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell><a ng-href="#/higherProtocols/{{::row.id}}/view">{{::row.protocolNr}}</a></td> <td md-cell>{{currentLanguageNameField(row.protocolType)}}</td> <td md-cell>{{currentLanguageNameField(row.subject)}}</td> <td md-cell> <table> <tr ng-repeat="teacher in row.teachers | orderBy"> <td>{{teacher}}</td> </tr> </table> </td> <td md-cell>{{currentLanguageNameField(row.status)}}</td> <td md-cell>{{row.inserted | hoisDate}}</td> <td md-cell>{{row.confirmDate | hoisDate}}</td> <td md-cell>{{::row.confirmer}}</td> <td md-cell> <md-button md-no-ink class="md-primary change-button" ng-href="#/higherProtocols/{{::row.id}}/edit" ng-show="row.canChange">{{\'main.button.change\' | translate}}</md-button> </td> </tr> </tbody> </table> </md-table-container> <md-table-pagination md-limit="criteria.size" md-limit-options="[10, 20, 50]" md-page="criteria.page" md-total="{{tabledata.totalElements}}" md-on-paginate="loadData" md-label="{page: \'{{\'main.page\' | translate}}:\', rowsPerPage: \'{{\'main.rowPerPage\' | translate}}:\', of: \'{{\'main.of\' | translate}}\'}" md-page-select></md-table-pagination> </div> </div>'),a.put("higherProtocol/higher.protocol.view.html",'<div class="ois-form-layout-padding" ng-cloak> <div layout="row" layout-sm="column" layout-xs="column" class="ois-form-layout-padding form-readonly"> <md-input-container flex="30" flex-sm="100" flex-xs="100"> <label>{{\'higherProtocol.subject\' | translate}}</label> <hois-value value="currentLanguageNameField(record.subjectStudyPeriodMidtermTaskDto.subjectStudyPeriod.subject)"></hois-value> </md-input-container> <md-input-container flex="30" flex-sm="100" flex-xs="100" flex-offset-xs="0" flex-offset-sm="0" flex-offset="5"> <label>{{\'higherProtocol.teacher\' | translate}}</label> <hois-value value="record.subjectStudyPeriodMidtermTaskDto.subjectStudyPeriod.teachers.join(\', \')"></hois-value> </md-input-container> <md-input-container flex="30" flex-sm="100" flex-xs="100" flex-offset-xs="0" flex-offset-sm="0" flex-offset="5"> <label>{{\'higherProtocol.studyPeriod\' | translate}}</label> <hois-value value="currentLanguageNameField(record.subjectStudyPeriodMidtermTaskDto.subjectStudyPeriod.studyPeriod)"></hois-value> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column" class="ois-form-layout-padding form-readonly"> <md-input-container flex="30" flex-sm="100" flex-xs="100"> <label>{{\'higherProtocol.number\' | translate}}</label> <hois-value value="record.protocolNr"></hois-value> </md-input-container> <md-input-container flex="30" flex-sm="100" flex-xs="100" flex-offset-xs="0" flex-offset-sm="0" flex-offset="5"> <label>{{\'higherProtocol.type\' | translate}}</label> <hois-classifier-value ng-model="record.protocolType" main-classifier-code="PROTOKOLLI_LIIK"></hois-classifier-value> </md-input-container> <md-input-container flex="30" flex-sm="100" flex-xs="100" flex-offset-xs="0" flex-offset-sm="0" flex-offset="5"> <label>{{\'higherProtocol.status\' | translate}}</label> <hois-classifier-value ng-model="record.status" main-classifier-code="PROTOKOLL_STAATUS"></hois-classifier-value> </md-input-container> </div> <md-table-container> <table md-table> <thead md-head> <tr md-row> <th md-column>{{\'higherProtocol.student\' | translate}}</th> <th md-column ng-show="record.subjectStudyPeriodMidtermTaskDto.subjectStudyPeriod.isPracticeSubject">{{\'higherProtocol.practiceResult\' | translate}}</th> <th md-column ng-repeat="midtermTask in record.subjectStudyPeriodMidtermTaskDto.midtermTasks"> {{getMidtermTaskHeader(midtermTask)}} </th> <th md-column>{{\'higherProtocol.finalGrade\' | translate}}</th> <th md-column>{{\'higherProtocol.comment\' | translate}}</th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="student in record.protocolStudents | orderBy: \'student.nameEt\'" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <ng-form name="higherProtocolStudentForm"> <td md-cell>{{student.student.nameEt}}</td> <td md-cell ng-show="record.subjectStudyPeriodMidtermTaskDto.subjectStudyPeriod.isPracticeSubject">{{student.practiceResult}}</td> <td md-cell ng-repeat="result in record.subjectStudyPeriodMidtermTaskDto.studentResults | filter: filterStudentResults(student)"> <span ng-if="!result.isText">{{result.points}}</span> <span ng-if="result.isText">{{result.pointsTxt}}</span> </td> <td md-cell>{{student.gradeValue}}</td> <td md-cell>{{student.addInfo}}</td> </ng-form> </tr> </tbody> </table> </md-table-container> <br> <div> <md-button class="md-raised md-primary" ng-href="#/higherProtocols/{{record.id}}/edit" ng-show="record.canChange">{{\'main.button.change\' | translate}}</md-button> <md-button class="md-raised" ng-click="confirm()" ng-show="formState.canConfirm">{{\'main.button.confirm\' | translate}}</md-button> <a href="{{formState.protocolPdfUrl}}" target="_blank" class="md-button md-raised">{{\'main.button.print\' | translate}}</a> <md-button class="md-raised" ng-click="back(\'#/higherProtocols/\')">{{\'main.button.back\' | translate}}</md-button> </div> </div>'),a.put("home/home.html",'<div layout-padding> <div ng-if="state.currentUser" ng-controller="AuthenticatedHomeController as ctrl"> <!--div style="margin-bottom: 8px;" layout="row" >\r\n      <a style="font-size: 13px; font-weight: normal; min-height: inherit; line-height: inherit; padding: 0;" class="md-primary md-hue-2 md-button md-ink-ripple" ng-href="/#/studentrepresentatives/applications/new?_menu">{{\'home.represantiveApplication\' | translate}}</a>\r\n    </div--> <div ng-if="hasUnacceptedAbsences"> <md-whiteframe class="md-whiteframe-1dp attention-whiteframe" flex="100" layout layout-align="left center"> <div md-colors="{color: \'warn\'}"> <md-icon md-colors="{color: \'warn\'}" md-font-set="material-icons">info_outline</md-icon> <span>{{\'absence.youHaveUnacceptedAbsences\' | translate}} <a ng-href="/#/absences?_menu">{{\'main.button.view\' | translate}}</a></span> </div> </md-whiteframe> </div> <div ng-if="unconfirmedJournals && unconfirmedJournals.count > 0"> <md-whiteframe class="md-whiteframe-1dp attention-whiteframe" flex="100" layout layout-align="left center"> <div md-colors="{color: \'accent\'}"> <md-icon md-colors="{color: \'accent\'}" md-font-set="material-icons">info_outline</md-icon> <span ng-if="unconfirmedJournals.count === 1">{{\'journal.unconfirmedCountOne\' | translate}}</span> <span ng-if="unconfirmedJournals.count > 1">{{\'journal.unconfirmedCount\' | translate:unconfirmedJournals}}</span> </div> </md-whiteframe> <br> </div> <hois-collapsable ng-if="expiringOccupationStandards && expiringOccupationStandards.length > 0" label="(\'home.expiringOccupationStandards.title\' | translate)" link="(numberOfOccupationStandards? \'main.button.view\' : \'main.button.hide\')|translate" action="toggleNumberOfOccupationStandards()" ngif="expiringOccupationStandards && expiringOccupationStandards.length > 3"> <!--span ng-if="expiringOccupationStandards && expiringOccupationStandards.length > 3">\r\n        <md-button class="md-primary" ng-click="toggleNumberOfOccupationStandards()">{{(numberOfOccupationStandards? \'main.button.view\' : \'main.button.hide\')|translate}}</md-button>\r\n      </span--> <!--md-content>\r\n        <md-list>\r\n          <md-list-item class="md-3-line" ng-repeat="row in expiringOccupationStandards | limitTo:numberOfOccupationStandards">\r\n            <div class="md-list-item-text" layout="row" flex>\r\n              <div flex="40">{{::currentLanguageNameField(row)}}</div>\r\n              <div flex="20">{{::row.validThru | hoisDate}}</div>\r\n              <div flex="40">{{\'home.expiringOccupationStandards.curriculum\' | translate}}&nbsp;{{::row.curriculums.join(\', \')}}</div>\r\n            </div>\r\n            <md-divider></md-divider>\r\n          </md-list-item>\r\n        </md-list>\r\n      </md-content--> <md-table-container> <table md-table> <tbody md-body> <tr md-row ng-repeat="row in expiringOccupationStandards | limitTo:numberOfOccupationStandards"> <td md-cell width="40%">{{::currentLanguageNameField(row)}}</td> <td md-cell width="10%">{{::row.validThru | hoisDate}}</td> <td md-cell>{{\'home.expiringOccupationStandards.curriculum\' | translate}}&nbsp;{{::row.curriculums.join(\', \')}}</td> </tr> </tbody> </table> </md-table-container> </hois-collapsable> <hois-collapsable label="(\'home.generalmessages\' | translate)"> <md-table-container> <table md-table md-progress="generalmessages.$promise"> <tbody md-body> <tr md-row ng-repeat="row in generalmessages.content"> <td md-cell width="10%">{{::row.inserted | hoisDate}}</td> <td md-cell width="40%"> <h4>{{::row.title}}</h4> <pre ng-show="row.clicked">{{::row.content}}</pre> </td> <td md-cell> <a class="md-primary" ng-click="openCloseDetails(row)" aria-label="{{row.clicked ? \'main.button.hide\' : \'main.button.view\' | translate}}"> <span>{{row.clicked ? \'main.button.hide\' : \'main.button.view\' | translate}}</span> </a> </td> </tr> </tbody> </table> </md-table-container> <md-table-pagination md-limit="criteria.size" md-limit-options="[5, 10, 15]" ng-if="generalmessages.totalElements > criteria.size" md-page="criteria.page" md-total="{{generalmessages.totalElements}}" md-on-paginate="loadGeneralMessages" md-label="{page: \'{{\'main.page\' | translate}}:\', rowsPerPage: \'{{\'main.rowPerPage\' | translate}}:\', of: \'{{\'main.of\' | translate}}\'}" md-page-select></md-table-pagination> </hois-collapsable> <hois-collapsable ng-show="showUnreadMessages && unreadMessages.content.length > 0" label="(\'message.messages\' | translate)" expanded="false"> <!--h5 ng-show="showUnreadMessages" ng-if="unreadMessages.content.length === 0">{{\'message.noNewMessages\' | translate}}</h5--> <md-table-container ng-show="showUnreadMessages"> <table md-table md-progress="unreadMessages.$promise"> <tbody md-body> <tr md-row ng-repeat="row in unreadMessages.content" ng-click="readMessage(row)"> <td md-cell width="10%">{{::row.dateSent | hoisDateTime}}</td> <td md-cell width="40%"><h4>{{::row.subject}}</h4> <div ng-show="row.clicked"> <pre>{{::row.content}}</pre> <p>{{\'message.messageSender\' | translate}}: {{::row.sender}}</p> </div> </td> <td md-cell> <md-button class="md-primary" ng-href="/#/message/{{row.id}}/respond?backUrl=home" ng-if="row.sendersId !== -1" ng-click="readMessage()"> {{\'message.respond\' | translate}} </md-button> </td> </tr> </tbody> </table> </md-table-container> </hois-collapsable> <div ng-controller="StudentHomeController"> <div ng-if="sessionStudentId" ng-include="\'home/home.student.html\'"></div> </div> </div> <div ng-if="!state.currentUser"> <md-grid-list md-cols="1" md-cols-sm="2" md-cols-md="3" md-cols-gt-md="6" md-row-height-gt-md="1:1" md-row-height="4:3" md-gutter="8px" md-gutter-gt-sm="4px"> <md-grid-tile ng-repeat="school in schools" md-colspan="1"> <button class="schoolTileButton" ng-click="openSchoolCurriculumSearch(school.id)"> <img class="schoolTileImage" ng-src="data:image/JPEG;base64,{{school.logo}}" on-error-src="images/HITSA_innov_logo_03.4e2f45c0.png"> <md-grid-tile-footer class="schoolTileFooter"> <span>{{currentLanguageNameField(school)}}</span> </md-grid-tile-footer> </button> </md-grid-tile> </md-grid-list> </div> </div> <style>pre {\r\n    white-space: pre-wrap;       /* Since CSS 2.1 */\r\n    white-space: -moz-pre-wrap;  /* Mozilla, since 1999 */\r\n    white-space: -pre-wrap;      /* Opera 4-6 */\r\n    white-space: -o-pre-wrap;    /* Opera 7 */\r\n    word-wrap: break-word;       /* Internet Explorer 5.5+ */\r\n  }</style>'),a.put("home/home.student.html",'<hois-collapsable expanded="true" ng-if="tasks.todayTasks.length > 0 || tasks.tomorrowTasks.length > 0 || tasks.laterTasks.length > 0"> <hois-collapsable-header> <span>{{\'home.student.homeworkAndTests\' | translate}}</span> </hois-collapsable-header> <div style="margin:1%" layout="column"> <div ng-if="tasks.todayTasks.length > 0" layout="row" layout-xs="column" flex> <div flex="20" flex-sm="100" flex-xs="100" flex-gt-lg="10">{{\'home.student.today\' | translate}} ({{todaysDate | hoisDayMonth}}):</div> <div layout="column" flex="80" flex-sm="100" flex-xs="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0" style="font-size:13px"> <div ng-repeat="task in tasks.todayTasks"> <span style="font-weight:bold">{{task.journalName}}: </span> <span ng-if="testTaskTypes.indexOf(task.entryType) !== -1">{{\'home.student.test\' | translate}} - </span> <span ng-if="testTaskTypes.indexOf(task.entryType) === -1">{{\'home.student.homework\' | translate}} - </span> <span>{{task.taskContent}}</span> </div> </div> </div> <div layout="row" layout-xs="column" ng-if="tasks.tomorrowTasks.length > 0" style="margin-top:1%" flex="100"> <div flex="20" flex-sm="100" flex-xs="100" flex-gt-lg="10">{{\'home.student.tomorrow\' | translate}} ({{tomorrowsDate | hoisDayMonth}}):</div> <div layout="column" flex="80" flex-sm="100" flex-xs="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0" style="font-size:13px"> <div ng-repeat="task in tasks.tomorrowTasks"> <span style="font-weight:bold">{{task.journalName}}: </span> <span ng-if="testTaskTypes.indexOf(task.entryType) !== -1">{{\'home.student.test\' | translate}} - </span> <span ng-if="testTaskTypes.indexOf(task.entryType) === -1">{{\'home.student.homework\' | translate}} - </span> <span>{{task.taskContent}}</span> </div> </div> </div> <div layout="row" layout-xs="column" ng-if="tasks.laterTasks.length > 0" style="margin-top:1%" flex="100"> <div flex="20" flex-sm="100" flex-xs="100" flex-gt-lg="10">{{\'home.student.later\' | translate}}:</div> <div layout="column" flex="80" flex-sm="100" flex-xs="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0" style="font-size:13px"> <div ng-repeat="task in tasks.laterTasks"> <span>{{task.date | hoisDayMonth}}</span> <span style="font-weight:bold">{{task.journalName}}: </span> <span ng-if="testTaskTypes.indexOf(task.entryType) !== -1">{{\'home.student.test\' | translate}} - </span> <span ng-if="testTaskTypes.indexOf(task.entryType) === -1">{{\'home.student.homework\' | translate}} - </span> <span>{{task.taskContent}}</span> </div> </div> </div> </div> </hois-collapsable> <hois-collapsable expanded="false" ng-if="studentAbsences.length > 0"> <hois-collapsable-header> <span>{{\'home.student.absences\' | translate}}</span> </hois-collapsable-header> <div style="margin:1%"> <div ng-repeat="absence in studentAbsences" style="font-size:13px"> <div layout="row" flex> <div layout="row" layout-xs="column" flex="10" flex-md="15" flex-sm="20" flex-xs="30"> <span>{{absence.entryDate | hoisDayMonth}} &nbsp;</span> <span ng-if="absence.startLessonNr">{{absence.startLessonNr}}. {{\'home.student.lesson\' | translate}} &nbsp;</span> </div> <div layout="row" layout-xs="column"> <span style="font-weight: 500">{{absence.journalName}} &nbsp;</span> <span>{{absence.teachers}}</span> </div> </div> </div> </div> </hois-collapsable> <hois-collapsable expanded="true" ng-if="lastResults.length > 0"> <hois-collapsable-header> <span>{{\'home.student.lastResults\' | translate}}</span> </hois-collapsable-header> <div layout="column" ng-repeat="result in lastResults" style="margin-top:1%"> <div layout="row" ng-if="result.entryCode"> <div layout="column" flex="5" flex-xs="10" layout-align="center center" layout-align-xs="start center" style="font-size:13px; font-weight:bold">{{result.grade}}</div> <div layout="column" flex="95" flex-xs="90"> <div layout="row" layout-xs="column"> <div style="font-size:13px; font-weight:bold">{{result.nameEt}}</div> <div ng-if="result.content" style="font-size:13px"> <span hide-xs>&nbsp</span> <span>({{result.content}})</span> </div> <div style="font-size:13px; color:grey; font-style: italic"> <span hide-xs>&nbsp</span> <span>{{\'home.student.gradeInserted\' | translate}} {{result.gradeInserted | hoisDayMonthTimeMin}}</span> </div> </div> <div layout="row" layout-xs="column" style="font-size:13px">{{result.addInfo}}</div> </div> </div> <div layout="row" ng-if="!result.entryCode"> <div layout="column" flex="5" flex-xs="10" layout-align="center center" layout-align-xs="start center" style="font-weight:bold" ng-class="{goodGrade: result.grade === \'5\', badGrade: result.grade === \'2\'}">{{result.grade}}</div> <div layout="row" layout-xs="column" flex="95" flex-xs="90"> <div style="font-size:18px; font-weight:bold">{{currentLanguageNameField(result)}}</div> <div style="font-size:13px; color:grey; font-style: italic"> <span hide-xs>&nbsp</span> <span>{{\'home.student.gradeInserted\' | translate}} {{result.gradeInserted | hoisDayMonthTimeMin}}</span> </div> </div> </div> </div> </hois-collapsable> <hois-collapsable expanded="true" ng-if="declaration.status"> <hois-collapsable-header> <span>{{\'home.student.declaredSubjects\' | translate}}</span> </hois-collapsable-header> <md-table-container> <table md-table> <thead md-head> <tr md-row> <th md-column>{{\'declaration.subject\' | translate}}</th> <th md-column>{{\'declaration.teacher\' | translate}}</th> <th md-column>{{\'studyMaterial.label\' | translate}}</th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="subject in declaration.subjects | orderBy: \'subject.\' + currentLanguageNameField()" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell> {{currentLanguageNameField(subject.subject)}} ({{subject.subject.code}}) <span ng-show="subject.isDeclaredRepeatedly">&nbsp;*</span> </td> <td md-cell> <table> <tr ng-repeat="teacher in subject.teachers | orderBy"> <td>{{teacher}}</td> </tr> </table> </td> <td md-cell><a ng-href="/#/studyMaterial/higher/{{subject.subjectStudyPeriod}}/view">{{\'studyMaterial.openfolder\' | translate}}</a></td> </tr> </tbody> </table> </md-table-container> </hois-collapsable> <style>.goodGrade {\r\n        color: green;\r\n        font-weight: 500;\r\n        font-size: 18px;\r\n    }\r\n\r\n    .badGrade {\r\n        color: red;\r\n        font-weight: 500;\r\n        font-size: 18px;\r\n    }</style>'),a.put("journal/journal.addEntry.dialog.html",'<md-dialog aria-label="add entry dialog" flex="50"> <form name="dialogForm" ng-submit="loadData()" novalidate ng-cloak> <md-toolbar> <div class="md-toolbar-tools"> <h2>{{journalEntry.id === undefined || journalEntry.id === null ? "journal.entry.new" : "journal.entry.edit" | translate}}</h2> <span flex></span> <md-button class="md-icon-button" ng-click="cancel()"> <md-icon md-font-set="material-icons">close</md-icon> </md-button> </div> </md-toolbar> <md-dialog-content> <div class="md-dialog-content"> <div flex> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container ng-if="journalEntry.entryType !== \'SISSEKANNE_O\'" flex="45"> <label>{{\'journal.entry.type\' | translate}}</label> <hois-classifier-select ng-model="journalEntry.entryType" model-value-attr="code" main-classifier-code="SISSEKANNE" required ng-change="setJournalEntryDefaultName(journalEntry.entryType)" filter-values="forbiddenEntryTypes"></hois-classifier-select> </md-input-container> <md-input-container ng-if="journalEntry.entryType === \'SISSEKANNE_O\'" flex="45"> <label>{{\'journal.entry.type\' | translate}}</label> <hois-classifier-select ng-model="journalEntry.entryType" model-value-attr="code" main-classifier-code="SISSEKANNE" disabled></hois-classifier-select> </md-input-container> <md-input-container flex="45" flex-offset="10"> <label>{{\'journal.entry.name\' | translate}}</label> <input type="text" ng-model="journalEntry.nameEt" md-maxlength="100"> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container layout="row" layout-align="start center" flex> <md-checkbox ng-repeat="type in capacityTypes" ng-model="selectedCapacityTypes[type.code]">{{currentLanguageNameField(type)}}</md-checkbox> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="20"> <label>{{\'journal.entry.selectDate\' | translate}}</label> <hois-select ng-model="entryDateSelect" values="lessonPlanDates" ng-change="entryDateCalendar = undefined;journalEntry.entryDate = entryDateSelect; entryDateChanged(entryDateSelect)" ng-required="journalEntry.entryType === \'SISSEKANNE_T\' && entryDateCalendar === undefined"></hois-select> </md-input-container> <div layout="row" layout-align="center" style="padding-top:8px" flex="5"> <span>{{\'main.or\' | translate}}</span> </div> <md-input-container flex="25"> <label>{{\'journal.entry.selectFromCalendar\' | translate}}</label> <md-datepicker ng-model="entryDateCalendar" md-open-on-focus ng-change="entryDateSelect = undefined;journalEntry.entryDate = entryDateCalendar; entryDateChanged(entryDateCalendar)" ng-required="journalEntry.entryType === \'SISSEKANNE_T\' && entryDateSelect === undefined"></md-datepicker> </md-input-container> <md-input-container flex="20" flex-offset="5"> <label>{{\'journal.entry.startLessonNr\' | translate}}</label> <hois-select ng-model="journalEntry.startLessonNr" values="startLessonNrs" ng-required="journalEntry.entryType === \'SISSEKANNE_T\'"></hois-select> </md-input-container> <md-input-container flex="20" flex-offset="5"> <label>{{\'journal.entry.lessons\' | translate}}</label> <hois-select ng-model="journalEntry.lessons" values="lessons" ng-required="journalEntry.entryType === \'SISSEKANNE_T\'"></hois-select> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex> <label>{{\'journal.entry.content\' | translate}}</label> <textarea ng-model="journalEntry.content" md-maxlength="10000" max-rows="2"></textarea> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="70"> <label>{{\'journal.entry.homework\' | translate}}</label> <textarea ng-model="journalEntry.homework" md-maxlength="10000" max-rows="2"></textarea> </md-input-container> <md-input-container flex flex-offset="5"> <label>{{\'journal.entry.homeworkDuedate\' | translate}}</label> <md-datepicker ng-model="journalEntry.homeworkDuedate" md-open-on-focus ng-required="!!journalEntry.homework"></md-datepicker> </md-input-container> </div> </div> <div layout-padding> <div flex> <md-table-container> <table md-table> <thead md-head> <tr md-row flex> <th md-column><span>{{\'student.label\' | translate}}, {{\'journal.studentGroup\' | translate}}</span></th> <th md-column><span>{{\'journal.entry.student.lateAbsent\' | translate}}</span></th> <th md-column><span>{{\'journal.entry.student.grade\' | translate}}</span></th> <th md-column><span>{{\'journal.entry.student.description\' | translate}}</span></th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="row in journalStudents | orderBy: \'fullname\'" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell> <span>{{::row.fullname}}, {{row.studentGroup}}</span> </td> <td md-cell> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container ng-if="hasAcceptedAbsence(row)"> <md-checkbox ng-model="journalEntryStudents[row.id].excused" aria-label="PUUDUMINE_V" ng-disabled="true"> {{absenceOptions["PUUDUMINE_V"].value}} </md-checkbox> </md-input-container> <md-input-container ng-if="!hasAcceptedAbsence(row)" layout="row" layout-align="start center" flex> <md-checkbox ng-model="journalEntryStudents[row.id].late" aria-label="PUUDUMINE_H" ng-disabled="!row.canEdit" ng-change="journalEntryStudentAbsenceChanged(journalEntryStudents, row, journalEntryStudents[row.id].late, \'PUUDUMINE_H\')"> {{absenceOptions["PUUDUMINE_H"].value}} </md-checkbox> <md-checkbox ng-model="journalEntryStudents[row.id].withoutReason" aria-label="PUUDUMINE_P" ng-disabled="!row.canEdit" style="margin-left: 30px" ng-change="journalEntryStudentAbsenceChanged(journalEntryStudents, row, journalEntryStudents[row.id].withoutReason, \'PUUDUMINE_P\')"> {{absenceOptions["PUUDUMINE_P"].value}} </md-checkbox> </md-input-container> </div> </td> <td md-cell> <span ng-repeat="gradeHistory in journalEntryStudents[row.id].journalEntryStudentHistories | orderBy: \'gradeInserted\'"> {{gradeHistory.grade.value}} <span ng-if="gradeHistory.grade.value && !$last">/</span> </span> &nbsp; <md-input-container> <hois-select ng-model="journalEntryStudents[row.id].grade" values="grades" show-property="value" value-property="code" filter-values="filterGrades" ng-change="journalEntryStudentChanged(journalEntryStudents, row)" aria-label="grade" ng-disabled="!row.canEdit || (journalEntry.moodleGradeItemId && journalEntry.entryType !== \'SISSEKANNE_L\')"></hois-select> </md-input-container> </td> <td md-cell> <md-input-container> <input type="text" ng-model="journalEntryStudents[row.id].addInfo" ng-change="journalEntryStudentChanged(journalEntryStudents, row)" aria-label="additional info" ng-disabled="!row.canEdit"> </md-input-container> </td> </tr> </tbody> </table> </md-table-container> </div> </div> <span flex></span> <md-dialog-actions layout="row" layout-align="start center"> <md-button class="md-raised md-primary" ng-click="submit()">{{\'main.button.save\' | translate}}</md-button> <md-button ng-if="canDeleteEntries" class="md-raised" ng-click="delete()">{{"main.button.delete" | translate}}</md-button> <md-button class="md-raised" ng-click="cancel()">{{"main.button.close" | translate}}</md-button> </md-dialog-actions> </div> </md-dialog-content> </form> </md-dialog>'),
a.put("journal/journal.edit.html",'<div layout-padding> <div flex> <div layout="row" flex> <h2 flex>{{\'journal.entryTabelLegend\' | translate}}</h2> <div flex="50" layout="row" layout-align="end"> <md-input-container> <md-checkbox ng-model="showAllStudentsModel" aria-label="show all students" ng-change="showAllStudents(showAllStudentsModel)"> {{\'journal.showAll\' | translate}} </md-checkbox> </md-input-container> </div> </div> <md-table-container> <table md-table md-progress="entries.$promise"> <thead md-head md-on-reorder="loadEntries"> <tr md-row flex> <th md-column style="padding-right:11em"><span>{{\'student.label\' | translate}}, {{\'journal.studentGroup\' | translate}}</span></th> <th md-column class="bordered" style="padding-left:1em" md-colors="{background: getEntryColor(journalEntry.entryType.code)}" ng-repeat="journalEntry in journal.journalEntriesByDate"> <span ng-if="journalEntry.moodleGradeItemId"><md-icon md-font-set="material-icons">school</md-icon></span> <span ng-if="journalEntry.entryType.code === \'SISSEKANNE_L\'">{{\'journal.finalResult\' | translate}}</span> <span ng-if="journalEntry.entryType.code === \'SISSEKANNE_O\'">{{\'journal.outcome\' | translate}}{{journalEntry.outcomeOrderNr + 1}}</span> <span ng-if="journalEntry.entryType.code !== \'SISSEKANNE_L\' && journalEntry.entryType.code !== \'SISSEKANNE_O\'">{{journalEntry.entryDate ? (journalEntry.entryDate | hoisDayMonth) : \'-\'}}</span> <md-tooltip> <span ng-if="journalEntry.startLessonNr">{{journalEntry.startLessonNr}}. {{\'journal.lesson\' | translate}},&nbsp;</span> {{journalEntry.nameEt}} <span>,&nbsp;</span> {{currentLanguageNameField(journalEntry.entryType)}} <span>,&nbsp;</span> {{journalEntry.teacher}} </md-tooltip> </th> <th md-column></th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="row in journal.journalStudents | orderBy: \'fullname\'" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell> <a ng-href="/#/students/{{::row.studentId}}/main">{{::row.fullname}}</a>, {{row.studentGroup}} <span ng-if="row.isMoodleRegistered"><md-icon md-font-set="material-icons">school</md-icon></span> </td> <td md-cell class="bordered" ng-repeat="journalEntry in journal.journalEntriesByDate"> <div layout="row" style="padding-left:1em"> <div ng-repeat="result in journalEntry.journalStudentResults[row.id] | orderBy: \'gradeInserted\'"> <span> {{result.absence.value}} <md-tooltip ng-if="result.absence.value"> {{journalEntry.entryDate ? (journalEntry.entryDate | hoisDate) : \'-\'}} <span ng-if="result.addInfo">,&nbsp; {{result.addInfo}} </span> <span ng-if="journalEntry.lessons && result.absence.value === \'P\'"> ,&nbsp; {{journalEntry.lessons ? ((\'journal.entry.lessons\' | translate) + \' \' + journalEntry.lessons) : \'\'}} </span> </md-tooltip> </span> <span ng-if="result.absence.value">/</span> <span> <span ng-class="{journalFinalResult: journalEntry.entryType.code === \'SISSEKANNE_L\', \r\n                    journalFinalResultBad: journalEntry.entryType.code === \'SISSEKANNE_L\' && !gradeUtil.isPositive(result.grade.code)}">{{result.grade.value}}</span> <md-tooltip ng-if="result.grade.value"> {{result.gradeInserted | hoisDate}} <span ng-if="result.addInfo">,&nbsp;</span> {{result.addInfo}} </md-tooltip> </span> </div> </div> </td> <td md-cell layout="row" layout-align="end"> <md-button class="remove nomargin" ng-click="removeStudentFromJournal(row.studentId)">&times;</md-button> </td> </tr> </tbody> </table> </md-table-container> </div> </div> <div layout-padding> <div flex> <div layout="row"> <md-button class="md-raised md-primary" ng-click="addNewEntry()">{{\'journal.addNewEntry\' | translate}}</md-button> <md-button class="md-raised" ng-click="searchStudent()">{{\'journal.addStudents\' | translate}}</md-button> <md-button class="md-raised" ng-click="confirm()" ng-if="journal.canBeConfirmed">{{\'journal.confirmJournal\' | translate}}</md-button> <md-button class="md-raised" ng-click="unconfirm()" ng-if="journal.canBeUnconfirmed">{{\'journal.button.unconfirm\' | translate}}</md-button> <md-button class="md-raised" ng-click="back(\'#/journals/\', journalForm)">{{\'main.button.back\' | translate}}</md-button> <a ng-href="{{excel(formState.xlsUrl)}}" target="_blank" class="md-button md-raised">{{\'report.excel\' | translate}}</a> </div> </div> </div> <div layout-padding> <div flex> <div layout="row"> <div flex="10"> <h2>{{\'journal.entries\' | translate}}</h2> </div> <div layout="row" layout-align="start end" layout-sm="column" layout-xs="column" flex="40"> <span class="journal-legend" flex-offset="5" md-colors="{background: getEntryColor(\'SISSEKANNE_T\')}">{{currentLanguageNameField(journalEntryTypes[\'SISSEKANNE_T\'])}}</span> <span class="journal-legend" flex-offset="5" md-colors="{background: getEntryColor(\'SISSEKANNE_E\')}">{{currentLanguageNameField(journalEntryTypes[\'SISSEKANNE_E\'])}}</span> <span class="journal-legend" flex-offset="5" md-colors="{background: getEntryColor(\'SISSEKANNE_I\')}">{{currentLanguageNameField(journalEntryTypes[\'SISSEKANNE_I\'])}}</span> <span class="journal-legend" flex-offset="5" md-colors="{background: getEntryColor(\'SISSEKANNE_H\')}">{{currentLanguageNameField(journalEntryTypes[\'SISSEKANNE_H\'])}}</span> <span ng-if="journal.moduleOutcomesAsEntries" class="journal-legend" flex-offset="5" md-colors="{background: getEntryColor(\'SISSEKANNE_O\')}">{{currentLanguageNameField(journalEntryTypes[\'SISSEKANNE_O\'])}}</span> <span class="journal-legend" flex-offset="5" md-colors="{background: getEntryColor(\'SISSEKANNE_L\')}">{{currentLanguageNameField(journalEntryTypes[\'SISSEKANNE_L\'])}}</span> </div> </div> <md-table-container> <table md-table md-progress="journalEntries.$promise"> <thead md-head md-order="journalEntriesCriteria.order" md-on-reorder="loadJournalEntries"> <tr md-row> <th md-column>{{\'journal.entry.date\' | translate}}</th> <th md-column>{{\'journal.entry.content\' | translate}}</th> <th md-column>{{\'journal.entry.homework\' | translate}}</th> <th md-column>{{\'journal.entry.homeworkDuedate\' | translate}}</th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="row in journalEntries.content" md-auto-select ng-click="editJournalEntry(row.id)" ng-class-odd="\'odd\'" ng-class-even="\'even\'" md-colors="{background: getEntryColor(row.entryType)}"> <td md-cell>{{row.entryDate ? (row.entryDate | hoisDate) : \'-\'}}</td> <td md-cell>{{row.content}}</td> <td md-cell>{{row.homework ? row.homework : \'-\'}}</td> <td md-cell>{{row.homeworkDuedate ? (row.homeworkDuedate | hoisDate) : \'-\' }}</td> </tr> </tbody> </table> </md-table-container> <md-table-pagination md-limit="journalEntriesCriteria.size" md-limit-options="[10, 20, 50]" md-page="journalEntriesCriteria.page" md-total="{{journalEntries.totalElements}}" md-on-paginate="loadJournalEntries" md-label="{page: \'{{\'main.page\' | translate}}:\', rowsPerPage: \'{{\'main.rowPerPage\' | translate}}:\', of: \'{{\'main.of\' | translate}}\'}" md-page-select></md-table-pagination> </div> </div> <div layout-padding> <div flex> <div ng-include="\'studyMaterial/templates/journal.material.edit.tmpl.html\'"></div> </div> </div> <div layout-padding> <hois-collapsable label="(\'journal.curriculumVersionModuleOrThemeDescription\' | translate)" expanded="false"> <div ng-repeat="module in journal.moduleDescriptions"> <a href="" class="md-raised small-link" ng-click="moduleDescriptionDialog(module)">{{currentLanguageNameField(module)}}</a> </div> </hois-collapsable> </div>'),a.put("journal/journal.html",'<div class="ois-form-layout-padding" ng-cloak> <div flex> <form name="journalForm" ng-submit="journalForm.$valid && loadData()" novalidate> <div class="form-readonly" layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="25" flex-sm="100" flex-xs="100"> <label class="textInput">{{\'journal.studyYear\' | translate}}</label> <hois-classifier-value ng-model="journal.studyYear" main-classifier-code="OPPEAASTA"></hois-classifier-value> </md-input-container> <md-input-container flex="30" flex-sm="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label class="textInput">{{\'main.status\' | translate}}</label> <hois-classifier-value ng-model="journal.status" main-classifier-code="PAEVIK_STAATUS"></hois-classifier-value> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <div class="form-readonly" layout="row" flex="25" flex-sm="100" flex-xs="100"> <md-input-container flex> <label class="textInput">{{\'journal.label\' | translate}}</label> <hois-value value="journal.nameEt"></hois-value> </md-input-container> </div> <div ng-if="journal.canBeConfirmed" flex="30" flex-sm="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <md-input-container style="margin-top:-1em"> <label>{{\'journal.endDate\' | translate}}</label> <md-datepicker ng-model="journal.endDate"></md-datepicker> </md-input-container> <a href="" class="md-button md-raised" style="margin-top:-1em" ng-click="saveEndDate()">{{\'journal.saveEndDate\' | translate}}</a> </div> </div> <div class="form-readonly" layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="25" flex-sm="100" flex-xs="100"> <label class="textInput">{{\'journal.studentGroups\' | translate}}</label> <hois-value value="journal.studentGroups.join(\', \')"></hois-value> </md-input-container> <md-input-container flex="30" flex-sm="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label class="textInput">{{\'journal.teachers\' | translate}}</label> <hois-value value="journal.journalTeachers.join(\', \')"></hois-value> </md-input-container> </div> <div class="form-readonly" layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="25" flex-sm="100" flex-xs="100"> <label class="textInput">{{\'journal.modules\' | translate}}</label> <hois-value value="showModuleNames(journal.curriculumModules)"></hois-value> </md-input-container> <md-input-container flex="30" flex-sm="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label class="textInput">{{\'journal.plannedAndEnteredCapacities\' | translate}}</label> <hois-value value="journal.plannedHours + \'/\' + journal.usedHours"></hois-value> </md-input-container> </div> </form> </div> </div> <div ng-if="journal.hasJournalStudents"> <div ng-include="\'journal/journal.edit.html\'" ng-controller="JournalEditController as journalEditController"></div> </div> <div ng-if="!journal.hasJournalStudents"> <div ng-include="\'journal/journal.student.selection.html\'" ng-controller="JournalStudentSelectionController as journalStudentSelectionController"></div> </div>'),a.put("journal/journal.list.html",'<div class="ois-form-layout-padding ois-form-layout" ng-cloak> <div flex> <fieldset> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'main.searchlabel\' | translate}}</legend> <form name="searchForm" ng-submit="searchForm.$valid && loadData()" novalidate class="nomargin"> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="45" flex-sm="100" flex-xs="100"> <label class="textInput">{{\'journal.studyYear\' | translate}}</label> <hois-select ng-model="criteria.studyYear" type="studyyear" select-current-study-year required autofocus></hois-select> </md-input-container> <md-input-container flex="50" flex-sm="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label class="textInput">{{\'journal.studentGroup\' | translate}}</label> <hois-select ng-model="criteria.studentGroup" type="studentgroup"></hois-select> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column" ng-if="auth.isAdmin()"> <div flex="45" flex-sm="100" flex-xs="100"> <hois-autocomplete label="teacher.label" ng-model="criteria.teacherObject" method="teachers"></hois-autocomplete> </div> <div flex="50" flex-sm="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <hois-autocomplete label="module.label" ng-model="criteria.moduleObject" method="vocationalmodules"></hois-autocomplete> </div> </div> <div layout="row" layout-sm="column" layout-xs="column" ng-if="auth.isTeacher()"> <div flex="45" flex-sm="100"> <hois-autocomplete label="module.label" ng-model="criteria.moduleObject" method="vocationalmodules"></hois-autocomplete> </div> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="45" flex-sm="100" flex-xs="100"> <label class="textInput">{{\'journal.label\' | translate}}</label> <hois-select ng-model="criteria.journal" type="journal" criteria="{studyYear: criteria.studyYear}" load-after-defer="criteriaDefer"></hois-select> </md-input-container> <md-input-container flex="50" flex-sm="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label class="textInput">{{\'journal.status\' | translate}}</label> <hois-classifier-select ng-model="criteria.status" main-classifier-code="PAEVIK_STAATUS" model-value-attr="code"></hois-classifier-select> </md-input-container> </div> <div layout="row"> <md-button type="submit" class="md-raised md-primary">{{\'main.button.search\' | translate}}</md-button> <md-button class="md-raised" ng-click="clearSearch()">{{\'main.button.clear\' | translate}}</md-button> <md-button ng-if="formState.canConfirmAll" ng-click="confirmAll()" class="md-raised">{{\'journal.confirmAllJournals\' | translate}}</md-button> </div> <div flex-xs="0" flex-gt-xs="0" flex-gt-sm="50"></div> </form> </fieldset> </div> </div> <div layout-padding> <div flex> <md-table-container> <table md-table md-progress="tabledata.$promise"> <thead md-head md-order="criteria.order" md-on-reorder="loadData"> <tr md-row> <th md-column>{{\'journal.studentGroups\' | translate}}</th> <th md-column md-order-by="{{currentLanguageNameField()}}">{{\'journal.label\' | translate}}</th> <th md-column>{{\'journal.teachers\' | translate}}</th> <th md-column>{{\'journal.modules\' | translate}}</th> <th md-column>{{\'journal.plannedAndEnteredCapacities\' | translate}}</th> <th md-column md-order-by="status.{{currentLanguageNameField()}}">{{\'main.status\' | translate}}</th> <th md-column>{{\'curriculum.code\' | translate}}</th> <th md-column></th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="row in tabledata.content" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell>{{row.studentGroups.join(", ")}}</td> <td md-cell> <a ng-href="/#/journal/{{::row.id}}/view">{{row.nameEt}}</a> </td> <td md-cell>{{row.teachers.join(", ")}}</td> <td md-cell>{{showModuleNames(row.modules)}}</td> <td md-cell>{{row.plannedHours}}/{{row.usedHours}}</td> <td md-cell>{{currentLanguageNameField(row.status)}}</td> <td md-cell>{{row.curriculums.join(", ")}}</td> <td md-cell> <md-button ng-if="row.canEdit" md-no-ink class="md-primary change-button" ng-href="#/journal/{{::row.id}}/edit">{{\'main.button.change\' | translate}}</md-button> </td> </tr> </tbody> </table> </md-table-container> <md-table-pagination md-limit="criteria.size" md-limit-options="[10, 20, 50]" md-page="criteria.page" md-total="{{tabledata.totalElements}}" md-on-paginate="loadData" md-label="{page: \'{{\'main.page\' | translate}}:\', rowsPerPage: \'{{\'main.rowPerPage\' | translate}}:\', of: \'{{\'main.of\' | translate}}\'}" md-page-select></md-table-pagination> </div> </div>'),a.put("journal/journal.moduleDescription.dialog.html",'<md-dialog aria-label="module description dialog" flex="50"> <form name="dialogForm" ng-submit="loadData()" novalidate ng-cloak> <md-toolbar> <div class="md-toolbar-tools"> <h2>{{"journal.moduleDescription" | translate}}</h2> <span flex></span> <md-button class="md-icon-button" ng-click="cancel()"> <md-icon md-font-set="material-icons">close</md-icon> </md-button> </div> </md-toolbar> <md-dialog-content> <div class="md-dialog-content form-readonly"> <div flex> <div layout="column"> <md-input-container flex> <label>{{\'module.subthemes\' | translate}}</label> <hois-value value="moduleDescription.subthemes"></hois-value> </md-input-container> <md-input-container flex> <label>{{\'module.totalGradeDescription\' | translate}}</label> <hois-value value="moduleDescription.totalGradeDescription"></hois-value> </md-input-container> <md-input-container flex> <label>{{\'module.gradeADescription\' | translate}}</label> <hois-value value="moduleDescription.passDescription"></hois-value> </md-input-container> <md-input-container flex> <label>{{\'module.grade5Description\' | translate}}</label> <hois-value value="moduleDescription.grade5Description"></hois-value> </md-input-container> <md-input-container flex> <label>{{\'module.grade4Description\' | translate}}</label> <hois-value value="moduleDescription.grade4Description"></hois-value> </md-input-container> <md-input-container flex> <label>{{\'module.grade3Description\' | translate}}</label> <hois-value value="moduleDescription.grade3Description"></hois-value> </md-input-container> </div> </div> <span flex></span> <md-dialog-actions layout="row" layout-align="start center"> <md-button class="md-raised" ng-click="cancel()">{{"main.button.close" | translate}}</md-button> </md-dialog-actions> </div> </md-dialog-content> </form> </md-dialog>'),a.put("journal/journal.searchStudent.dialog.html",'<md-dialog aria-label="search student dialog"> <form name="dialogForm" ng-submit="loadData()" novalidate ng-cloak> <md-toolbar> <div class="md-toolbar-tools"> <h2>{{"journal.searchForOtherStudent" | translate}}</h2> <span flex></span> <md-button class="md-icon-button" ng-click="cancel()"> <md-icon md-font-set="material-icons">close</md-icon> </md-button> </div> </md-toolbar> <md-dialog-content> <div class="md-dialog-content"> <div flex> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex> <label>{{\'student.name\' | translate}}</label> <input type="text" ng-model="criteria.studentName" md-autofocus> </md-input-container> </div> <div layout="row"> <md-button type="submit" class="md-raised md-primary">{{\'main.button.search\' | translate}}</md-button> <md-button class="md-raised" ng-click="clearCriteria()">{{\'main.button.clear\' | translate}}</md-button> </div> </div> <div layout-padding> <div flex> <md-table-container> <table md-table md-progress="tabledata.$promise" md-row-select multiple ng-model="selectedStudents"> <thead md-head md-order="criteria.order" md-on-reorder="loadData"> <tr md-row flex> <th md-column><span>{{\'student.label\' | translate}}</span></th> <th md-column><span>{{\'journal.studentGroup\' | translate}}</span></th> <th md-column><span>{{\'curriculum.code\' | translate}}</span></th> </tr> </thead> <tbody md-body> <tr md-row md-select="row.studentId" md-auto-select ng-repeat="row in tabledata.content | orderBy: \'fullname\'" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell>{{row.fullname}}</td> <td md-cell>{{row.studentGroup}}</td> <td md-cell>{{row.curriculum}}</td> </tr> </tbody> </table> </md-table-container> <md-table-pagination md-limit="criteria.size" md-limit-options="[10, 20, 50]" md-page="criteria.page" md-total="{{tabledata.totalElements}}" md-on-paginate="loadData" md-label="{page: \'{{\'main.page\' | translate}}:\', rowsPerPage: \'{{\'main.rowPerPage\' | translate}}:\', of: \'{{\'main.of\' | translate}}\'}" md-page-select></md-table-pagination> </div> </div> </div> </md-dialog-content> <span flex></span> <md-dialog-actions layout="row" layout-align="start center"> <md-button class="md-raised md-primary" ng-click="submit()">{{\'journal.addSelectedStudents\' | translate}}</md-button> <md-button class="md-raised" ng-click="cancel()">{{"main.button.close" | translate}}</md-button> </md-dialog-actions> </form> </md-dialog>'),a.put("journal/journal.student.selection.html",'<div class="ois-form-layout" layout="column"> <div layout-padding> <div flex> <md-table-container> <table md-table md-progress="tabledata.$promise" md-row-select multiple ng-model="selectedStudents"> <thead md-head md-order="criteria.order" md-on-reorder="loadData"> <tr md-row flex> <th md-column><span>{{\'student.label\' | translate}}</span></th> <th md-column><span>{{\'journal.studentGroup\' | translate}}</span></th> <th md-column><span>{{\'curriculum.code\' | translate}}</span></th> <th md-column></th> </tr> </thead> <tbody md-body> <tr md-row md-select="row.studentId" ng-repeat="row in tabledata.content | orderBy: \'fullname\'" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell>{{row.fullname}}</td> <td md-cell>{{row.studentGroup}}</td> <td md-cell>{{row.curriculum}}</td> <td md-cell layout="row" layout-align="end"> <md-button class="remove nomargin" ng-click="removeStudent(row)">&times;</md-button> </td> </tr> </tbody> </table> </md-table-container> </div> </div> <div layout="row" layout-margin> <md-button class="md-raised md-primary" ng-click="addSelectedStudents()">{{\'journal.addSelectedStudents\' | translate}}</md-button> <md-button class="md-raised" ng-click="searchStudent()">{{\'journal.searchForOtherStudent\' | translate}}</md-button> <md-button class="md-raised" ng-click="back(\'#/journals/\', journalForm)">{{\'main.button.back\' | translate}}</md-button> </div> </div>'),a.put("journal/journal.view.html",'<div class="ois-form-layout-padding" ng-cloak> <div flex class="form-readonly"> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="25" flex-sm="100" flex-xs="100"> <label class="textInput">{{\'journal.studyYear\' | translate}}</label> <hois-classifier-value ng-model="journal.studyYear" main-classifier-code="OPPEAASTA"></hois-classifier-value> </md-input-container> <md-input-container flex="30" flex-sm="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label class="textInput">{{\'main.status\' | translate}}</label> <hois-classifier-value ng-model="journal.status" main-classifier-code="PAEVIK_STAATUS"></hois-classifier-value> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="25" flex-sm="100" flex-xs="100"> <label class="textInput">{{\'journal.label\' | translate}}</label> <hois-value value="journal.nameEt"></hois-value> </md-input-container> <md-input-container flex="30" flex-sm="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'journal.endDate\' | translate}}</label> <hois-value value="journal.endDate | hoisDate"></hois-value> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="25" flex-sm="100" flex-xs="100"> <label class="textInput">{{\'journal.studentGroups\' | translate}}</label> <hois-value value="journal.studentGroups.join(\', \')"></hois-value> </md-input-container> <md-input-container flex="30" flex-sm="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label class="textInput">{{\'journal.teachers\' | translate}}</label> <hois-value value="journal.journalTeachers.join(\', \')"></hois-value> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="25" flex-sm="100" flex-xs="100"> <label class="textInput">{{\'journal.modules\' | translate}}</label> <hois-value value="showModuleNames(journal.curriculumModules)"></hois-value> </md-input-container> <md-input-container flex="30" flex-sm="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label class="textInput">{{\'journal.plannedAndEnteredCapacities\' | translate}}</label> <hois-value value="journal.plannedHours + \'/\' + journal.usedHours"></hois-value> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="25" flex-sm="100" flex-xs="100"> <label>{{\'moodle.courseId\' | translate}}</label> <hois-value value="journal.moodleCourseId"></hois-value> </md-input-container> </div> </div> </div> <div ng-controller="JournalEditController as journalEditController"> <div layout-padding> <div flex> <div layout="row" flex> <h2 flex>{{\'journal.entryTabelLegend\' | translate}}</h2> <div flex="50" layout="row" layout-align="end"> <md-input-container> <md-checkbox ng-model="showAllStudentsModel" aria-label="show all students" ng-change="showAllStudents(showAllStudentsModel)"> {{\'journal.showAll\' | translate}} </md-checkbox> </md-input-container> </div> </div> <md-table-container> <table md-table md-progress="entries.$promise"> <thead md-head md-on-reorder="loadEntries"> <tr md-row flex> <th md-column style="padding-right:11em"><span>{{\'student.label\' | translate}}, {{\'journal.studentGroup\' | translate}}</span></th> <th md-column class="bordered" style="padding-left:1em" md-colors="{background: getEntryColor(journalEntry.entryType.code)}" ng-repeat="journalEntry in journal.journalEntriesByDate"> <span ng-if="journalEntry.entryType.code === \'SISSEKANNE_L\'">{{\'journal.finalResult\' | translate}}</span> <span ng-if="journalEntry.entryType.code === \'SISSEKANNE_O\'">{{\'journal.outcome\' | translate}}{{journalEntry.outcomeOrderNr + 1}}</span> <span ng-if="journalEntry.entryType.code !== \'SISSEKANNE_L\' && journalEntry.entryType.code !== \'SISSEKANNE_O\'">{{journalEntry.entryDate ? (journalEntry.entryDate | hoisDayMonth) : \'-\'}}</span> <md-tooltip> <span ng-if="journalEntry.startLessonNr">{{journalEntry.startLessonNr}}. {{\'journal.lesson\' | translate}},&nbsp;</span> {{journalEntry.nameEt}} <span>,&nbsp;</span> {{currentLanguageNameField(journalEntry.entryType)}} <span>,&nbsp;</span> {{journalEntry.teacher}} </md-tooltip> </th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="row in journal.journalStudents | orderBy: \'fullname\'" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell><a ng-href="/#/students/{{::row.studentId}}/main">{{::row.fullname}}</a>, {{row.studentGroup}}</td> <td md-cell class="bordered" ng-repeat="journalEntry in journal.journalEntriesByDate"> <div layout="row" style="padding-left:1em"> <span ng-repeat="result in journalEntry.journalStudentResults[row.id] | orderBy: \'gradeInserted\'"> <span> {{result.absence.value}} <md-tooltip ng-if="result.absence.value"> {{journalEntry.entryDate ? (journalEntry.entryDate | hoisDate) : \'-\'}} <span ng-if="result.addInfo">,&nbsp; {{result.addInfo}} </span> <span ng-if="journalEntry.lessons && result.absence.value === \'P\'"> ,&nbsp; {{journalEntry.lessons ? ((\'journal.entry.lessons\' | translate) + \' \' + journalEntry.lessons) : \'\'}} </span> </md-tooltip> </span> <span ng-if="result.absence.value">/</span> <span> <span ng-class="{journalFinalResult: journalEntry.entryType.code === \'SISSEKANNE_L\', \r\n                    journalFinalResultBad: journalEntry.entryType.code === \'SISSEKANNE_L\' && !gradeUtil.isPositive(result.grade.code)}">{{result.grade.value}}</span> <md-tooltip ng-if="result.grade.value"> {{result.gradeInserted | hoisDate}} <span ng-if="result.addInfo">,&nbsp;</span> {{result.addInfo}} </md-tooltip> </span> </span> </div> </td> </tr> </tbody> </table> </md-table-container> </div> </div> <div layout-padding> <div flex> <div layout="row"> <md-button class="md-raised" ng-click="back(\'#/journals/\', journalForm)">{{\'main.button.back\' | translate}}</md-button> <a ng-href="{{excel(formState.xlsUrl)}}" target="_blank" class="md-button md-raised">{{\'report.excel\' | translate}}</a> </div> </div> </div> <div layout-padding> <div flex> <div layout="row"> <div flex="10"> <h2>{{\'journal.entries\' | translate}}</h2> </div> <div layout="row" layout-align="start end" layout-sm="column" layout-xs="column" flex="40"> <span class="journal-legend" flex-offset="5" md-colors="{background: getEntryColor(\'SISSEKANNE_T\')}">{{currentLanguageNameField(journalEntryTypes[\'SISSEKANNE_T\'])}}</span> <span class="journal-legend" flex-offset="5" md-colors="{background: getEntryColor(\'SISSEKANNE_E\')}">{{currentLanguageNameField(journalEntryTypes[\'SISSEKANNE_E\'])}}</span> <span class="journal-legend" flex-offset="5" md-colors="{background: getEntryColor(\'SISSEKANNE_I\')}">{{currentLanguageNameField(journalEntryTypes[\'SISSEKANNE_I\'])}}</span> <span class="journal-legend" flex-offset="5" md-colors="{background: getEntryColor(\'SISSEKANNE_H\')}">{{currentLanguageNameField(journalEntryTypes[\'SISSEKANNE_H\'])}}</span> <span ng-if="journal.moduleOutcomesAsEntries" class="journal-legend" flex-offset="5" md-colors="{background: getEntryColor(\'SISSEKANNE_O\')}">{{currentLanguageNameField(journalEntryTypes[\'SISSEKANNE_O\'])}}</span> <span class="journal-legend" flex-offset="5" md-colors="{background: getEntryColor(\'SISSEKANNE_L\')}">{{currentLanguageNameField(journalEntryTypes[\'SISSEKANNE_L\'])}}</span> </div> </div> <md-table-container> <table md-table md-progress="journalEntries.$promise"> <thead md-head md-order="journalEntriesCriteria.order" md-on-reorder="loadJournalEntries"> <tr md-row> <th md-column>{{\'journal.entry.date\' | translate}}</th> <th md-column>{{\'journal.entry.content\' | translate}}</th> <th md-column>{{\'journal.entry.homework\' | translate}}</th> <th md-column>{{\'journal.entry.homeworkDuedate\' | translate}}</th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="row in journalEntries.content " ng-class-odd="\'odd\'" ng-class-even="\'even\'" md-colors="{background: getEntryColor(row.entryType)}"> <td md-cell>{{row.entryDate ? (row.entryDate | hoisDate) : \'-\'}}</td> <td md-cell>{{row.content}}</td> <td md-cell>{{row.homework ? row.homework : \'-\'}}</td> <td md-cell>{{row.homeworkDuedate ? (row.homeworkDuedate | hoisDate) : \'-\' }}</td> </tr> </tbody> </table> </md-table-container> <md-table-pagination md-limit="journalEntriesCriteria.size" md-limit-options="[10, 20, 50]" md-page="journalEntriesCriteria.page" md-total="{{journalEntries.totalElements}}" md-on-paginate="loadJournalEntries" md-label="{page: \'{{\'main.page\' | translate}}:\', rowsPerPage: \'{{\'main.rowPerPage\' | translate}}:\', of: \'{{\'main.of\' | translate}}\'}" md-page-select></md-table-pagination> </div> </div> <div layout-padding> <div flex> <div ng-include="\'studyMaterial/templates/journal.material.view.tmpl.html\'"></div> </div> </div> <div layout-padding> <hois-collapsable label="(\'journal.curriculumVersionModuleOrThemeDescription\' | translate)" expanded="false"> <div ng-repeat="module in journal.moduleDescriptions"> <a href="" class="md-raised small-link" ng-click="moduleDescriptionDialog(module)">{{currentLanguageNameField(module)}}</a> </div> </hois-collapsable> </div> </div>'),a.put("lessonplan/event.search.html",'<div class="ois-form-layout-padding ois-form-layout" ng-cloak> <div flex> <fieldset> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'main.searchlabel\' | translate}}</legend> <form ng-submit="loadData()" novalidate class="nomargin"> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="50" flex-sm="100" flex-xs="100"> <label>{{\'lessonplan.event.studyPeriod\' | translate}}</label> <hois-select ng-model="criteria.studyPeriod" values="formState.studyPeriods"></hois-select> </md-input-container> <md-input-container flex="50" flex-sm="100" flex-xs="100"> <label>{{\'lessonplan.event.studentGroups\' | translate}}</label> <hois-select ng-model="criteria.studentGroups" values="formState.studentGroups" multiple></hois-select> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="50" flex-sm="100" flex-xs="100"> <label class="textInput">{{\'lessonplan.event.name\' | translate}}</label> <input ng-model="criteria.name" type="text"> </md-input-container> <md-input-container flex="25" flex-sm="100" flex-xs="100"> <label>{{\'main.from\' | translate}}</label> <md-datepicker ng-model="criteria.from"></md-datepicker> </md-input-container> <md-input-container flex="25" flex-sm="100" flex-xs="100"> <label>{{\'main.thru\' | translate}}</label> <md-datepicker ng-model="criteria.thru" md-min-date="criteria.from"></md-datepicker> </md-input-container> </div> <div layout="row"> <md-input-container class="md-block" flex="50"> <label>{{\'lessonplan.event.teachers\' | translate}}</label> <hois-select ng-model="criteria.teachers" values="formState.teachers" flex multiple></hois-select> </md-input-container> <md-input-container flex="50" flex-sm="100" flex-xs="100"> <label class="textInput">{{\'lessonplan.event.otherTeacher\' | translate}}</label> <input ng-model="criteria.otherTeacher" type="text"> </md-input-container> </div> <div layout="row" flex="100"> <div layout="row" flex="50"> <hois-autocomplete flex ng-model="criteria.roomObject" method="rooms" name="student" label="lessonplan.event.room"></hois-autocomplete> </div> <md-input-container flex="50" flex-sm="100" flex-xs="100"> <label class="textInput">{{\'lessonplan.event.otherRoom\' | translate}}</label> <input ng-model="criteria.otherRoom" type="text"> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="30" flex-sm="100" flex-xs="100"> <md-checkbox ng-model="criteria.singleEvent">{{\'lessonplan.event.single-event\' | translate}}</md-checkbox> </md-input-container> </div> <div layout="row"> <md-button type="submit" class="md-raised md-primary">{{\'main.button.search\' | translate}}</md-button> <md-button class="md-raised" ng-click="clearCriteria()">{{\'main.button.clear\' | translate}}</md-button> <md-button class="md-raised" ng-if="canEdit" ng-href="#/timetable/timetableEvent/new">{{\'main.button.create\' | translate}}</md-button> </div> <div flex-xs="0" flex-gt-xs="0" flex-gt-sm="50"></div> </form> </fieldset> </div> </div> <div layout-padding> <div flex> <md-table-container> <table md-table md-progress="tabledata.$promise"> <thead md-head md-order="criteria.order" md-on-reorder="loadData"> <tr md-row> <th md-column>{{\'lessonplan.event.name\' | translate}}</th> <th md-column>{{\'lessonplan.event.date\' | translate}}</th> <th md-column>{{\'lessonplan.event.time\' | translate}}</th> <th md-column>{{\'lessonplan.event.teachers\' | translate}}</th> <th md-column>{{\'lessonplan.event.rooms\' | translate}}</th> <th md-column>{{\'lessonplan.event.studentGroups\' | translate}}</th> <th md-column>{{\'lessonplan.event.single-event\' | translate}}</th> <th></th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="row in tabledata.content" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell>{{row.nameEt}}</td> <td md-cell>{{::row.date | hoisDate}}</td> <td md-cell>{{::row.timeStart | hoisTime}}-{{::row.timeEnd | hoisTime}}</td> <td md-cell><span ng-repeat="teacher in row.teachers">{{::teacher.name}}{{$last ? "" : ", "}}</span></td> <td md-cell><span ng-repeat="room in row.rooms">{{::room.buildingCode}}-{{::room.roomCode}}{{$last ? "" : ", "}}</span></td> <td md-cell><span ng-repeat="group in row.studentGroups">{{::group.code}}{{$last ? "" : ", "}}</span></td> <td md-cell>{{::row.singleEvent ? "jah" : "ei"}}</td> <td md-cell> <md-button md-no-ink class="md-primary change-button" ng-if="canEdit && afterNow(row.date, row.timeStart)" ng-href="#/timetable/timetableEvent/{{::row.id}}/edit">{{\'main.button.change\' | translate}}</md-button> </td> </tr> </tbody> </table> </md-table-container> <md-table-pagination md-limit="criteria.size" md-limit-options="[10, 20, 50]" md-page="criteria.page" md-total="{{tabledata.totalElements}}" md-on-paginate="loadData" md-label="{page: \'{{\'main.page\' | translate}}:\', rowsPerPage: \'{{\'main.rowPerPage\' | translate}}:\', of: \'{{\'main.of\' | translate}}\'}" md-page-select></md-table-pagination> </div> </div>'),
a.put("lessonplan/journal.edit.html",'<div class="ois-form-layout-padding ois-form-layout" ng-cloak> <div flex> <form name="journalForm" class="nomargin"> <div flex="100" layout="row"> <div flex="75"> <div> <div layout="row" flex="100" flex-sm="100" flex-xs="100"> <span class="common-label">{{\'lessonplan.moduleName\' | translate}}: {{record.moduleNameEt}}</span> </div> <div layout="row" flex="100" flex-sm="100" flex-xs="100"> <span class="common-label">{{\'lessonplan.studentGroup\' | translate}}: {{record.studentGroupCode}}</span> </div> </div> <div flex> <br> <md-checkbox ng-model="record.addModuleOutcomes" aria-label="{{\'lessonplan.journal.addModuleOutcomes\' | translate}}"> {{\'lessonplan.journal.addModuleOutcomes\' | translate}} </md-checkbox> </div> <div layout="row" flex="100" flex-sm="100" flex-xs="100"> <md-input-container flex> <label class="textInput">{{\'lessonplan.journal.theme\' | translate}}</label> <hois-select name="theme" ng-model="formState.theme" values="formState.themes"></hois-select> </md-input-container> </div> <div layout="column" class="common-label" flex="95" ng-repeat="theme in record.journalOccupationModuleThemes"> <div layout="row" flex layout-align="start center"> <div flex="5">&nbsp;</div> <div flex="50">{{currentLanguageNameField(formState.themeMap[theme])}}</div> <div> <a ng-click="deleteTheme(theme)" class="remove">&times;</a> </div> </div> </div> <div layout="row" flex="100" flex-sm="100" flex-xs="100"> <md-input-container flex="100" flex-sm="100" flex-xs="100"> <label class="textInput">{{\'lessonplan.journal.assessment\' | translate}}</label> <hois-classifier-select flex="100" flex-sm="100" flex-xs="100" ng-model="record.assessment" required main-classifier-code="KUTSEHINDAMISVIIS" model-value-attr="code"></hois-classifier-select> </md-input-container> </div> <div layout="row"> <md-input-container flex="100" flex-sm="100" flex-xs="100"> <label class="textInput">{{\'lessonplan.journal.name\' | translate}}</label> <input type="text" ng-model="record.nameEt" required> </md-input-container> </div> <div layout="row" flex="100" flex-sm="100" flex-xs="100"> <md-input-container flex="100" flex-sm="100" flex-xs="100"> <label class="textInput">{{\'lessonplan.journal.groupProportion\' | translate}}</label> <hois-classifier-select ng-model="record.groupProportion" required main-classifier-code="PAEVIK_GRUPI_JAOTUS" model-value-attr="code"></hois-classifier-select> </md-input-container> </div> <div layout="row" flex="100" flex-sm="100" flex-xs="100"> <hois-autocomplete label="lessonplan.journal.teacher" ng-model="formState.teacher" method="teachers" flex></hois-autocomplete> </div> <div layout="row"> <md-table-container class="secondary-table"> <table md-table> <thead md-head> <tr md-row> <th md-column></th> <th md-column>{{\'lessonplan.journal.isFiller\' | translate}}</th> <th md-column>{{\'lessonplan.journal.isConfirmer\' | translate}}</th> <th md-column></th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="teacher in record.journalTeachers"> <td md-cell>{{currentLanguageNameField(teacher.teacher)}}</td> <td md-cell> <md-input-container> <md-checkbox ng-model="teacher.isFiller" aria-label="{{\'lessonplan.journal.isFiller\' | translate}}"></md-checkbox> </md-input-container> </td> <td md-cell> <md-input-container> <md-checkbox ng-model="teacher.isConfirmer" aria-label="{{\'lessonplan.journal.isConfirmer\' | translate}}"></md-checkbox> </md-input-container> </td> <td md-cell> <a ng-click="deleteTeacher(teacher)" class="remove">&times;</a> </td> </tr> </tbody> </table> </md-table-container> </div> <div layout="row" flex="100"> <hois-autocomplete flex ng-model="formState.room" method="rooms" label="lessonplan.room"></hois-autocomplete> </div> <div layout="column" class="common-label" flex="95" ng-repeat="room in record.journalRooms"> <div layout="row" flex layout-align="start center"> <div flex="5">&nbsp;</div> <div flex="50">{{room.nameEt}}</div> <div> <a ng-click="deleteRoom(room)" class="remove">&times;</a> </div> </div> </div> <div layout="row" flex="100" flex-sm="100" flex-xs="100"> <md-input-container class="md-block" flex> <label>{{\'lessonplan.journal.group\' | translate}}</label> <hois-select ng-model="formState.group" values="formState.studentGroups" flex></hois-select> </md-input-container> </div> <div layout="row" flex> <md-table-container class="secondary-table"> <table md-table flex="80"> <thead md-head flex> <tr md-row> <th md-column></th> <th md-column>{{\'lessonplan.journal.group-module\' | translate}}</th> <th md-column>{{\'lessonplan.journal.group-theme\' | translate}}</th> <th md-column></th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="moduleTheme in record.groups"> <td md-cell>{{moduleTheme.group.nameEt}}</td> <td md-cell> <md-input-container class="md-block" flex> <label>{{\'lessonplan.journal.group-module\' | translate}}</label> <hois-select ng-change="newSelectedModule(moduleTheme)" required ng-model="moduleTheme.curriculumVersionOccupationModule" values="moduleTheme.group.modules" flex></hois-select> </md-input-container> </td> <td md-cell> <md-input-container class="md-block" flex> <label>{{\'lessonplan.journal.group-theme\' | translate}}</label> <hois-select ng-model="moduleTheme.curriculumVersionOccupationModuleThemes" required values="moduleTheme.group.themes" flex multiple></hois-select> </md-input-container> </td> <td md-cell> <a ng-click="deleteGroup(moduleTheme)" class="remove">&times;</a> </td> </tr> </tbody> </table> </md-table-container> </div> </div> <div layout="column" flex="20" flex-offset="5"> <fieldset flex="100" layout="column"> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'lessonplan.journal.capacity-type\' | translate}}</legend> <div layout="column" ng-repeat="capacityType in formState.capacityTypes" flex="70" flex-sm="100" flex-xs="100"> <div layout="row" flex layout-align="start center"> <div flex="5">&nbsp;</div> <div flex> <md-checkbox ng-model="capacityType._selected"> {{currentLanguageNameField(capacityType)}} <span ng-if="capacityType.hours">({{capacityType.hours}})</span> </md-checkbox> </div> </div> </div> </fieldset> </div> </div> <div layout="row"> <md-button class="md-raised md-primary" ng-click="update()">{{\'main.button.save\' | translate}}</md-button> <md-button class="md-raised" ng-if="record.id" ng-click="delete()">{{\'main.button.delete\' | translate}}</md-button> <md-button ng-click="back(\'#/lessonplans/vocational/\' + record.lessonPlan + \'/edit\', journalForm)" class="md-raised">{{\'main.button.back\' | translate}}</md-button> </div> </form> </div> </div>'),a.put("lessonplan/new.lessonplan.dialog.html",'<md-dialog aria-label="grade add dialog" flex="30" flex-sm="100" flex-xs="100"> <form name="newLessonPlanForm" ng-cloak> <md-toolbar> <div class="md-toolbar-tools"> <h2>{{"lessonplan.addPlanDialog" | translate}}</h2> <span flex></span> <md-button class="md-icon-button" ng-click="cancel()"> <md-icon md-font-set="material-icons">close</md-icon> </md-button> </div> </md-toolbar> <md-dialog-content> <div class="ois-form-layout-padding nomargin" layout="column" ng-cloak> <md-input-container class="md-block"> <label class="textInput">{{\'lessonplan.studyYear\' | translate}}</label> <hois-select values="formState.studyYears" ng-model="record.studyYear" md-autofocus></hois-select> </md-input-container> <md-input-container class="md-block"> <label class="textInput">{{\'lessonplan.studentGroup\' | translate}}</label> <hois-select values="formState.studentGroupMap[record.studyYear]" ng-model="record.studentGroup"></hois-select> </md-input-container> </div> </md-dialog-content> <md-dialog-actions layout="row" layout-align="start center"> <md-button ng-click="create()" class="md-raised md-primary">{{\'main.button.create\' | translate}}</md-button> <md-button ng-click="cancel()" class="md-raised">{{\'main.button.back\' | translate}}</md-button> </md-dialog-actions> </form> </md-dialog>'),a.put("lessonplan/vocational.edit.html",'<div ng-cloak class="ois-form-layout-padding" style="overflow: scroll"> <div layout="column"> <div flex="30" class="md-title"> <hois-classifier-value ng-model="record.studyYearCode" main-classifier-code="OPPEAASTA"></hois-classifier-value> <span>{{\'lessonplan.studentGroup\' | translate}} {{record.studentGroupCode}}</span> </div> <div flex layout="row"> <div flex="50" layout="row" layout-align="start center"> <div flex="20"> <md-checkbox ng-model="record.isUsable"> {{\'lessonplan.isUsable\' | translate}} </md-checkbox> </div> </div> <div flex="70" layout="row" layout-align="end start" class="common-label" md-colors="{color: \'background-400\'}"> <span ng-repeat="c in formState.capacityTypes"> <span ng-if="!$first">|</span> {{::c.value.toUpperCase()}} - {{currentLanguageNameField(c)}} </span> </div> </div> </div> <table class="lessonplan"> <!-- table header --> <tr> <td>&nbsp;</td> <td colspan="2">{{\'lessonplan.total\' | translate}}</td> <td colspan="{{::sp.weekNrs.length}}" ng-repeat="sp in formState.studyPeriods">{{currentLanguageNameField(sp)}} ({{sp.startDate | hoisDayMonth}}-{{sp.endDate | hoisDayMonth}})</td> </tr> <tr> <td colspan="3"> <md-checkbox ng-model="formState.showWeeks">{{\'lessonplan.showWeeks\' | translate}}</md-checkbox> <md-checkbox ng-model="formState.showTotals">{{\'lessonplan.showTotals\' | translate}}</md-checkbox> </td> <td ng-repeat="w in formState.weekNrs track by $index" class="center" ng-style="{ background: true ? getLegendByWeek(w) : \'white\' }" title="{{formState.weekBeginningDates[$index] | hoisDate}}">{{w}}</td> </tr> <!-- modules --> <tbody ng-repeat="module in record.modules"> <tr> <td colspan="{{::formState.weekNrs.length+3}}"> <div flex layout="row"> <div flex="30"> <span md-colors="{color: \'primary-800\'}" class="bold">{{currentLanguageNameField(module)}}</span>&nbsp;&nbsp; <a class="md-primary" ng-click="newJournal(module)">{{\'lessonplan.addjournal\' | translate}}</a> </div> <div flex="70"> <hois-autocomplete label="{{\'lessonplan.responsibleformodule\' | translate}}" ng-model="module.teacher" method="teachers"></hois-autocomplete> </div> </div> </td> </tr> <tr> <td colspan="{{::formState.weekNrs.length+3}}">{{\'lessonplan.modulehours\' | translate}}: {{::module.totalHours}}</td> </tr> <tr ng-repeat-start="journal in module.journals"> <td colspan="{{::formState.weekNrs.length+3}}"> <span class="bold">{{::journal.nameEt}}:</span>&nbsp; <span ng-repeat="theme in journal.themes"> <span ng-if="!$first">,&nbsp;</span>{{::theme.nameEt}}&nbsp;{{::theme.credits}}&nbsp;{{\'lessonplan.credits\' | translate}} &nbsp;(<span ng-repeat="(hourCap, hourCount) in theme.hours">{{::getCapacityByCode(hourCap).value.toUpperCase()}}{{hourCount}}{{$last ? "" : "/"}}</span>)</span> </td> </tr> <tr ng-repeat="ct in getCapacityTypes(journal.hours)"> <td rowspan="{{::keys(journal.hours).length+1}}" ng-if="$first"> <div> <span style="float:left"> <span ng-repeat="teacher in journal.teachers"> <br ng-if="!$first"> {{teacher.teacher.nameEt}} </span> </span> <span style="float:right"> <a class="md-primary change-button" ng-click="editJournal(journal)">{{\'main.button.change\' | translate}}</a> </span> </div> <div ng-if="journal.groupProportion !== \'PAEVIK_GRUPI_JAOTUS_1\'"> <label>{{\'lessonplan.journal.groupProportion\' | translate}}</label> <hois-classifier-value ng-model="journal.groupProportion" main-classifier-code="PAEVIK_GRUPI_JAOTUS"></hois-classifier-value> </div> </td> <td class="center">{{ct.value.toUpperCase()}}</td> <td class="center" ng-style="{ color: formState.journalTotals[journal.id][ct.code] !== journal.requiredLessons[ct.code] ? \'red\' : \'black\' }" title="{{\'lessonplan.planned\' | translate }} {{journal.requiredLessons[ct.code]}}">{{formState.journalTotals[journal.id][ct.code]}}</td> <td ng-if="formState.showWeeks" ng-repeat="h in journal.hours[ct.code] track by $index" class="center"> <input type="text" ng-model="journal.hours[ct.code][$index]" ng-change="updateTotals(journal, ct.code, $index)"> </td> <td ng-if="!formState.showWeeks" colspan="{{::sp.weekNrs.length}}" ng-repeat="sp in formState.studyPeriods track by $index" class="center"> <input type="text" ng-model="journal.spHours[ct.code][$index]" ng-change="updateLessonCountByStudyPeriod(journal, ct.code, $index)"> </td> </tr> <tr ng-repeat-end> <td>{{\'lessonplan.total\' | translate}}</td> <td class="center">{{formState.journalTotals[journal.id].__}}</td> <td ng-if="formState.showWeeks" ng-repeat="w in formState.weekNrs track by $index" class="center">{{formState.journalTotals[journal.id]._[$index]}}</td> <td ng-if="!formState.showWeeks" colspan="{{::sp.weekNrs.length}}" ng-repeat="sp in formState.studyPeriods track by $index" class="center">{{formState.journalTotals[journal.id]._spTotals[$index]}}</td> </tr> <!-- module totals --> <tr ng-show="formState.showTotals" ng-repeat="ct in getCapacityTypes(formState.moduleTotals[module.id])"> <td rowspan="{{keys(formState.moduleTotals[module.id]).length}}" ng-if="$first"> {{currentLanguageNameField(module)}}&nbsp;{{\'lessonplan.moduleTotal\' | translate}} </td> <td>{{ct.value.toUpperCase()}}</td> <td class="center">{{formState.moduleTotals[module.id]._[ct.code]}}</td> <td ng-repeat="h in formState.moduleTotals[module.id][ct.code] track by $index" class="center">{{h}}</td> </tr> <tr ng-show="formState.showTotals"> <td>{{\'lessonplan.total\' | translate}}</td> <td class="center">{{formState.moduleTotals[module.id].__}}</td> <td ng-repeat="h in formState.moduleTotals[module.id]._._ track by $index" class="center">{{h}}</td> </tr> </tbody> <!-- grand totals --> <tbody md-colors="{background: \'background-200\'}"> <tr ng-repeat="ct in getCapacityTypes(formState.grandTotals)"> <td rowspan="{{keys(formState.grandTotals).length+1}}" ng-if="$first"> {{currentLanguageNameField(module)}}&nbsp;{{\'lessonplan.grandTotal\' | translate}} </td> <td class="center">{{ct.value.toUpperCase()}}</td> <td class="center">{{formState.grandTotals._[ct.code]}}</td> <td ng-if="formState.showWeeks" ng-repeat="h in formState.grandTotals[ct.code] track by $index" class="center">{{h}}</td> <td ng-if="!formState.showWeeks" ng-repeat="sp in formState.studyPeriods track by $index" colspan="{{::sp.weekNrs.length}}" class="center">{{formState.capGrandTotalsSp[ct.code][$index]}}</td> </tr> <tr> <td>{{\'lessonplan.total\' | translate}}</td> <td class="center">{{formState.grandTotals.__}}</td> <td ng-if="formState.showWeeks" ng-repeat="h in formState.grandTotals._._ track by $index" class="center">{{h}}</td> <td ng-if="!formState.showWeeks" ng-repeat="sp in formState.studyPeriods track by $index" colspan="{{::sp.weekNrs.length}}" class="center">{{formState.grandTotalsSp[$index]}}</td> </tr> </tbody> </table> </div> <div> <md-button class="md-raised md-primary" ng-click="update()">{{\'main.button.save\' | translate}}</md-button> <md-button ng-click="back()" class="md-raised">{{\'main.button.back\' | translate}}</md-button> </div>'),a.put("lessonplan/vocational.search.html",'<md-nav-bar md-selected-nav-item="currentNavItem"> <md-nav-item ng-if="formState.vocational" md-nav-href="#/lessonplans/vocational" name="lessonplan.vocational">{{\'lessonplan.search.vocational\' | translate}}</md-nav-item> <md-nav-item ng-if="formState.vocational" md-nav-href="#/lessonplans/vocational/byteacher" name="lessonplan.vocational-byteacher">{{\'lessonplan.search.vocational-byteacher\' | translate}}</md-nav-item> <!--  <md-nav-item ng-if="formState.higher" md-nav-href="#/lessonplans/higher" name="lessonplan.higher">{{\'lessonplan.higher\' | translate}}</md-nav-item>\r\n  <md-nav-item ng-if="formState.higher" md-nav-href="#/lessonplans/higher/byteacher" name="lessonplan.higher-byteacher">{{\'lessonplan.higher-byteacher\' | translate}}</md-nav-item>  --> </md-nav-bar> <div class="ois-form-layout-padding ois-form-layout" ng-cloak> <div flex> <fieldset> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'main.searchlabel\' | translate}}</legend> <form ng-submit="loadData()" novalidate class="nomargin"> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="45" flex-sm="100" flex-xs="100"> <label class="textInput">{{\'lessonplan.studyYear\' | translate}}</label> <hois-select ng-model="criteria.studyYear" values="formState.studyYears" required autofocus></hois-select> </md-input-container> <md-input-container flex="50" flex-sm="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label class="textInput">{{\'lessonplan.schoolDepartment\' | translate}}</label> <hois-school-department-select ng-model="criteria.schoolDepartment"></hois-school-department-select> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="45" flex-sm="100" flex-xs="100"> <label>{{\'lessonplan.curriculumVersion\' | translate}}</label> <hois-select ng-model="criteria.curriculumVersion" values="formState.curriculumVersions"></hois-select> </md-input-container> <md-input-container flex="50" flex-sm="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label class="textInput">{{\'lessonplan.studentGroup\' | translate}}</label> <hois-select ng-model="criteria.studentGroup" values="formState.studentGroups"></hois-select> </md-input-container> </div> <div layout="row"> <md-button type="submit" class="md-raised md-primary">{{\'main.button.search\' | translate}}</md-button> <md-button class="md-raised" ng-click="clearCriteria()">{{\'main.button.clear\' | translate}}</md-button> <md-button class="md-raised" ng-if="canEdit" ng-click="newLessonplan()">{{\'main.button.create\' | translate}}</md-button> </div> <div flex-xs="0" flex-gt-xs="0" flex-gt-sm="50"></div> </form> </fieldset> </div> </div> <div layout-padding> <div flex> <md-table-container> <table md-table md-progress="tabledata.$promise"> <thead md-head md-order="criteria.order" md-on-reorder="loadData"> <tr md-row> <th md-column md-order-by="sg.code">{{\'lessonplan.studentGroup\' | translate}}</th> <th md-column md-order-by="cv.code">{{\'lessonplan.curriculumVersion\' | translate}}</th> <th md-column>{{\'lessonplan.journalreference\' | translate}}</th> <th></th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="row in tabledata.content" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell>{{::row.studentGroup}}</td> <td md-cell>{{::row.curriculumVersion}}</td> <td md-cell>vt. tunniplaani</td> <td md-cell> <md-button md-no-ink class="md-primary change-button" ng-href="#/lessonplans/vocational/{{::row.id}}/edit">{{\'main.button.change\' | translate}}</md-button> </td> </tr> </tbody> </table> </md-table-container> <md-table-pagination md-limit="criteria.size" md-limit-options="[10, 20, 50]" md-page="criteria.page" md-total="{{tabledata.totalElements}}" md-on-paginate="loadData" md-label="{page: \'{{\'main.page\' | translate}}:\', rowsPerPage: \'{{\'main.rowPerPage\' | translate}}:\', of: \'{{\'main.of\' | translate}}\'}" md-page-select></md-table-pagination> </div> </div>'),a.put("lessonplan/vocational.teacher.search.html",'<md-nav-bar md-selected-nav-item="currentNavItem"> <md-nav-item ng-if="formState.vocational" md-nav-href="#/lessonplans/vocational" name="lessonplan.vocational">{{\'lessonplan.search.vocational\' | translate}}</md-nav-item> <md-nav-item ng-if="formState.vocational" md-nav-href="#/lessonplans/vocational/byteacher" name="lessonplan.vocational-byteacher">{{\'lessonplan.search.vocational-byteacher\' | translate}}</md-nav-item> <!--  <md-nav-item ng-if="formState.higher" md-nav-href="#/lessonplans/higher" name="lessonplan.higher">{{\'lessonplan.higher\' | translate}}</md-nav-item>\r\n  <md-nav-item ng-if="formState.higher" md-nav-href="#/lessonplans/higher/byteacher" name="lessonplan.higher-byteacher">{{\'lessonplan.higher-byteacher\' | translate}}</md-nav-item>  --> </md-nav-bar> <div class="ois-form-layout-padding ois-form-layout" ng-cloak> <div flex> <fieldset> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'main.searchlabel\' | translate}}</legend> <form ng-submit="loadData()" novalidate class="nomargin"> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="45" flex-sm="100" flex-xs="100"> <label class="textInput">{{\'lessonplan.studyYear\' | translate}}</label> <hois-select ng-model="criteria.studyYear" values="formState.studyYears" required autofocus></hois-select> </md-input-container> <div flex="50" flex-sm="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <hois-autocomplete label="lessonplan.teacher" ng-model="criteria.teacher" method="teachers"></hois-autocomplete> </div> </div> <div layout="row"> <md-button type="submit" class="md-raised md-primary">{{\'main.button.search\' | translate}}</md-button> <md-button class="md-raised" ng-click="clearCriteria()">{{\'main.button.clear\' | translate}}</md-button> </div> <div flex-xs="0" flex-gt-xs="0" flex-gt-sm="50"></div> </form> </fieldset> </div> </div> <div layout-padding> <div flex> <md-table-container> <table md-table md-progress="tabledata.$promise"> <thead md-head md-order="criteria.order" md-on-reorder="loadData"> <tr md-row> <th md-column md-order-by="p.lastname,p.firstname">{{\'lessonplan.teacher\' | translate}}</th> <th md-column>{{\'lessonplan.plannedHoursTotal\' | translate}}</th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="row in tabledata.content" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell> <md-button md-no-ink class="md-primary change-button" ng-href="#/lessonplans/vocational/byteacher/{{::row.id}}/{{::row.studyYear}}">{{::row.teacherFullname}}</md-button> </td> <td md-cell>{{::row.plannedHours}}</td> </tr> </tbody> </table> </md-table-container> <md-table-pagination md-limit="criteria.size" md-limit-options="[10, 20, 50]" md-page="criteria.page" md-total="{{tabledata.totalElements}}" md-on-paginate="loadData" md-label="{page: \'{{\'main.page\' | translate}}:\', rowsPerPage: \'{{\'main.rowPerPage\' | translate}}:\', of: \'{{\'main.of\' | translate}}\'}" md-page-select></md-table-pagination> </div> </div>'),a.put("lessonplan/vocational.teacher.view.html",'<div ng-cloak class="ois-form-layout-padding" style="overflow: scroll"> <div layout="column"> <div flex="30" class="md-title"> <hois-classifier-value ng-model="record.studyYearCode" main-classifier-code="OPPEAASTA"></hois-classifier-value> <span>{{\'lessonplan.teacher\' | translate}} {{record.teacherName}}</span> </div> <div flex layout="row"> <div flex="70" layout="row" layout-align="end start" class="common-label" md-colors="{color: \'background-400\'}"> <span ng-repeat="c in formState.capacityTypes"> <span ng-if="!$first">|</span> {{::c.value.toUpperCase()}} - {{currentLanguageNameField(c)}} </span> </div> </div> </div> <table class="lessonplan"> <!-- table header --> <tbody> <tr> <td>{{\'lessonplan.journals\' | translate}}</td> <td colspan="2">{{\'lessonplan.total\' | translate}}</td> <td colspan="{{::sp.weekNrs.length}}" ng-repeat="sp in formState.studyPeriods">{{currentLanguageNameField(sp)}}</td> </tr> <tr> <td colspan="3"> <md-checkbox ng-model="formState.showWeeks">{{\'lessonplan.showWeeks\' | translate}}</md-checkbox> <md-checkbox ng-model="formState.showCapacityTypes">{{\'lessonplan.showCapacityTypes\' | translate}}</md-checkbox> </td> <td ng-repeat="w in formState.weekNrs track by $index" class="center" ng-style="{background: \'white\'}" title="{{formState.weekBeginningDates[$index] | hoisDate}}">{{w}}</td> </tr> </tbody> <!-- journals --> <tbody ng-repeat="journal in record.journals"> <tr> <td colspan="{{::formState.weekNrs.length+3}}"> <span class="bold">{{::journal.nameEt}}:</span>&nbsp; <span ng-repeat="theme in journal.themes"> <span ng-if="!$first">,&nbsp;</span>{{::theme.nameEt}}&nbsp;{{::theme.credits}}&nbsp;{{\'lessonplan.credits\' | translate}} &nbsp;(<span ng-repeat="(hourCap, hourCount) in theme.hours">{{::getCapacityByCode(hourCap).value.toUpperCase()}}{{hourCount}}{{$last ? "" : "/"}}</span>)</span> <div style="float: right"> <md-checkbox disabled ng-model="journal.isFiller">{{\'lessonplan.isFiller\' | translate}}</md-checkbox> <md-checkbox disabled ng-model="journal.isConfirmer">{{\'lessonplan.isConfirmer\' | translate}}</md-checkbox> </div> </td> </tr> <tr ng-repeat="ct in getCapacityTypes(journal.hours)" ng-if="formState.showCapacityTypes"> <td rowspan="{{::keys(journal.hours).length+1}}" ng-if="$first"> <div> <span style="float:left"> <span ng-repeat="studentGroup in journal.studentGroups"> <br ng-if="!$first"> {{studentGroup}} <br ng-if="$last"> </span> <br> <span ng-repeat="teacher in journal.teachers"> <br ng-if="!$first"> {{teacher.teacher.nameEt}} </span> </span> </div> <div ng-if="journal.groupProportion !== \'PAEVIK_GRUPI_JAOTUS_1\'"> <label>{{\'lessonplan.journal.groupProportion\' | translate}}</label> <hois-classifier-value ng-model="journal.groupProportion" main-classifier-code="PAEVIK_GRUPI_JAOTUS"></hois-classifier-value> </div> </td> <td class="center">{{ct.value.toUpperCase()}}</td> <td class="center">{{formState.journalTotals[journal.id][ct.code]}}</td> <td ng-if="formState.showWeeks" ng-repeat="h in journal.hours[ct.code] track by $index" class="center">{{journal.hours[ct.code][$index]}}</td> <td ng-if="!formState.showWeeks" colspan="{{::sp.weekNrs.length}}" ng-repeat="sp in formState.studyPeriods track by $index" class="center"> {{journal.spHours[ct.code][$index]}} </td> </tr> <tr> <td ng-if="!formState.showCapacityTypes"> <div> <span style="float:left"> <span ng-repeat="teacher in journal.teachers"> <br ng-if="!$first"> {{teacher.teacher.nameEt}} </span> </span> </div> <div ng-if="journal.groupProportion !== \'PAEVIK_GRUPI_JAOTUS_1\'"> <label>{{\'lessonplan.journal.groupProportion\' | translate}}</label> <hois-classifier-value ng-model="journal.groupProportion" main-classifier-code="PAEVIK_GRUPI_JAOTUS"></hois-classifier-value> </div> </td> <td>{{\'lessonplan.total\' | translate}}</td> <td class="center">{{formState.journalTotals[journal.id].__}}</td> <td ng-if="formState.showWeeks" ng-repeat="w in formState.weekNrs track by $index" class="center">{{formState.journalTotals[journal.id]._[$index]}}</td> <td ng-if="!formState.showWeeks" colspan="{{::sp.weekNrs.length}}" ng-repeat="sp in formState.studyPeriods track by $index" class="center">{{formState.journalTotals[journal.id]._spTotals[$index]}}</td> </tr> </tbody> <!-- grand totals --> <tbody md-colors="{background: \'background-200\'}"> <tr ng-repeat="ct in getCapacityTypes(formState.grandTotals)" ng-if="formState.showCapacityTypes"> <td rowspan="{{keys(formState.grandTotals).length+1}}" ng-if="$first"> {{currentLanguageNameField(module)}}&nbsp;{{\'lessonplan.grandTotal\' | translate}} </td> <td class="center">{{ct.value.toUpperCase()}}</td> <td class="center">{{formState.grandTotals._[ct.code]}}</td> <td ng-if="formState.showWeeks" ng-repeat="h in formState.grandTotals[ct.code] track by $index" class="center">{{h}}</td> <td ng-if="!formState.showWeeks" ng-repeat="sp in formState.studyPeriods track by $index" colspan="{{::sp.weekNrs.length}}" class="center">{{formState.capGrandTotalsSp[ct.code][$index]}}</td> </tr> <tr> <td>{{\'lessonplan.total\' | translate}}</td> <td class="center">{{formState.grandTotals.__}}</td> <td ng-if="formState.showWeeks" ng-repeat="h in formState.grandTotals._._ track by $index" class="center">{{h}}</td> <td ng-if="!formState.showWeeks" ng-repeat="sp in formState.studyPeriods track by $index" colspan="{{::sp.weekNrs.length}}" class="center">{{formState.grandTotalsSp[$index]}}</td> </tr> </tbody> </table> <br> <table class="lessonplan" ng-if="record.subjects.length > 0"> <!-- table header --> <tbody> <tr> <td>{{\'lessonplan.subjects\' | translate}}</td> <td colspan="{{formState.capacityTypes.length}}" ng-repeat="sp in formState.studyPeriods">{{currentLanguageNameField(sp)}}</td> </tr> <tr> <td>&nbsp;</td> <td ng-repeat="sct in formState.subjectCapacityTypes track by $index" class="center" ng-style="{background: \'white\'}">{{sct.value.toUpperCase()}}</td> </tr> </tbody> <!-- subjects --> <tbody ng-repeat="subject in record.subjects"> <tr> <td colspan="{{formState.subjectCapacityTypes.length + 1}}">{{currentLanguageNameField(subject)}}</td> </tr> <tr ng-repeat="studentGroup in subject.studentGroups"> <td>{{studentGroup.studentGroups}}</td> <td ng-repeat="sct in formState.subjectCapacityTypes track by $index" class="center" ng-style="{background: \'white\'}">{{(studentGroup.hours[sct.studyPeriod] || {})[sct.code]}}</td> </tr> <tr> <td colspan="{{formState.subjectCapacityTypes.length + 1}}">{{currentLanguageNameField(subject)}} {{\'lessonplan.total\' | translate}}</td> </tr> </tbody> <!-- grand totals --> <tbody md-colors="{background: \'background-200\'}"> </tbody> </table> </div> <div> <md-button ng-href="#/lessonplans/vocational/byteacher" class="md-raised">{{\'main.button.back\' | translate}}</md-button> </div>'),a.put("login/login.dialog.html",'<md-dialog style="width: 400px; height: 320px"> <md-toolbar> <div class="md-toolbar-tools" style="height: 40px"> <span flex></span> <md-button class="md-icon-button" ng-click="cancel()"> <span class="material-icons">close</span> </md-button> </div> </md-toolbar> <md-dialog-content> <md-tabs md-dynamic-height md-border-bottom> <md-tab label="{{ \'main.login.user.title\' | translate }}"> <md-content class="md-padding"> <form name="userLoginForm"> <md-input-container class="md-block"> <label flex>{{ \'main.login.user.school\' | translate }}</label> <md-select flex class="form-control" name="school" ng-model="credentials.school" required> <md-option ng-value="school.id" ng-repeat="school in schools">{{currentLanguageNameField(school)}}</md-option> </md-select> </md-input-container> <md-input-container class="md-block"> <label flex>{{ \'main.login.user.username\' | translate }}</label> <input type="text" flex class="form-control" name="username" ng-model="credentials.username" required> </md-input-container> <md-input-container class="md-block"> <label flex>{{ \'main.login.user.password\' | translate }}</label> <input type="password" flex class="form-control" name="password" ng-model="credentials.password" required> </md-input-container> <md-button class="md-raised md-primary" ng-click="login()">{{ \'main.logIn\' | translate }}</md-button> </form> </md-content> </md-tab> <md-tab label="{{ \'main.login.idcard.title\' | translate }}"> <md-content class="md-padding"> <md-button class="md-raised md-primary" ng-href="{{idCardLoginUrl}}">{{ \'main.logIn\' | translate }}</md-button> </md-content> </md-tab> <md-tab label="{{ \'main.login.mobileid.title\' | translate }}"> <md-content class="md-padding"> <form name="mobileIdLoginForm"> <md-input-container class="md-block"> <label flex>{{ \'main.login.mobileid.mobilenumber\' | translate }}</label> <input type="text" flex class="form-control" name="mobilenumber" ng-model="mobilenumber" required> </md-input-container> <md-button class="md-raised md-primary" ng-click="mIdLogin()">{{ \'main.logIn\' | translate }}</md-button> </form> </md-content> </md-tab> </md-tabs> </md-dialog-content> </md-dialog>'),a.put("login/m-id.login.dialog.html",'<md-dialog> <form> <md-dialog-content> <div class="md-dialog-content" layout="column" layout-align="center center"> <p>{{ \'main.login.mobileid.instructions\' | translate }}</p> <h1>{{challengeID}}</h1> </div> </md-dialog-content> </form> </md-dialog>'),a.put("login/message.login.dialog.html",'<md-dialog> <form> <md-dialog-content> <div class="md-dialog-content"> {{ message | translate }} </div> </md-dialog-content> </form> </md-dialog>'),a.put("login/session.timed.out.dialog.html",'<md-dialog aria-label="grade add dialog" flex="30" flex-xs="100"> <md-dialog-content> <div class="md-dialog-content"> <p translate="main.messages.sessionHasTimedOut"></p> </div> </md-dialog-content> <md-dialog-actions layout="row" layout-align="start center"> <md-button ng-click="ok()" class="md-raised">{{\'main.button.ok\' | translate}}</md-button> </md-dialog-actions> </md-dialog>'),a.put("login/session.timing.out.dialog.html",'<md-dialog aria-label="grade add dialog" flex="30" flex-xs="100"> <md-dialog-content> <div class="md-dialog-content"> <p translate="main.messages.sessionIsTimingOut"></p> </div> </md-dialog-content> <md-dialog-actions layout="row" layout-align="start center"> <md-button ng-click="refresh()" class="md-raised">{{\'main.button.refresh\' | translate}}</md-button> </md-dialog-actions> </md-dialog>'),
a.put("logs/logentry.view.dialog.html",'<md-dialog aria-label="grade add dialog" flex="75" flex-xs="100"> <md-toolbar> <div class="md-toolbar-tools"> <h2 flex>{{messagePrefix + record.wsName | translate}}</h2> <span flex> <hois-value class="md-button md-raised" ng-if="logType === \'ekis\' && record.directive.id" value="record.directive.nameEt" href-value="\'#/directives/\' + record.directive.id + \'/view\'"></hois-value> </span> <md-button class="md-icon-button" ng-click="cancel()"> <md-icon md-font-set="material-icons">close</md-icon> </md-button> </div> </md-toolbar> <md-dialog-content> <div class="md-dialog-content"> <div layout="row"> <md-input-container> <label>{{\'logs.request\' | translate}}</label>&nbsp; <pre><hois-value value="record.request | limitTo:requestLength"></hois-value></pre> <a ng-click="showAll(true)" ng-if="requestLength">&hellip;</a> </md-input-container> </div> <hr> <div layout="row"> <md-input-container> <label>{{\'logs.response\' | translate}}</label>&nbsp; <pre><hois-value value="record.response | limitTo:responseLength"></hois-value></pre> <a ng-click="showAll(false)" ng-if="responseLength">&hellip;</a> </md-input-container> </div> </div> </md-dialog-content> <md-dialog-actions layout="row" layout-align="start center"> <md-button ng-click="cancel()" class="md-raised">{{\'main.button.back\' | translate}}</md-button> </md-dialog-actions> </md-dialog>'),a.put("logs/logs.view.html",'<div layout-padding> <div flex> <fieldset> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'main.searchlabel\' | translate}}</legend> <form ng-submit="loadData()" layout="column" name="logForm"> <div flex> <div layout="row"> <md-input-container flex="45" flex-md="100" flex-sm="100" flex-xs="100"> <label>{{\'logs.name\' | translate}}</label> <md-select ng-model="criteria.messageType"> <md-option md-option-empty></md-option> <md-option ng-repeat="val in messageTypes" ng-value="val"> {{messagePrefix + val | translate}} </md-option> </md-select> </md-input-container> <div flex="50" flex-offset="5"> <label>{{\'logs.sentDatesRange\' | translate}}</label> <md-input-container flex="25" flex-md="100" flex-sm="100" flex-xs="100"> <label>{{\'main.from\' | translate}}</label> <md-datepicker ng-model="criteria.from" md-max-date="criteria.thru"></md-datepicker> </md-input-container> <md-input-container flex flex-offset="5"> <label>{{\'main.thru\' | translate}}</label> <md-datepicker ng-model="criteria.thru" md-min-date="criteria.from"></md-datepicker> </md-input-container> </div> </div> <div layout="row"> <md-checkbox flex="45" ng-model="criteria.errors" aria-label="show only errors"> {{\'logs.onlyErrors\' | translate}} </md-checkbox> </div> </div> <div layout="row"> <md-button type="submit" class="md-raised md-primary">{{\'main.button.search\' | translate}}</md-button> <md-button class="md-raised" ng-click="clearCriteria()">{{\'main.button.clear\' | translate}}</md-button> </div> </form> </fieldset> </div> </div> <div layout-padding> <div flex> <md-table-container> <table md-table md-progress="tabledata.$promise"> <thead md-head md-order="criteria.order" md-on-reorder="loadData"> <tr md-row> <th md-column>{{\'logs.name\' | translate}}</th> <th md-column md-order-by="inserted">{{\'logs.time\' | translate}}</th> <th md-column ng-if="logType === \'ekis\'">{{\'logs.directive\' | translate}}</th> <th md-column>{{\'logs.error\' | translate}}</th> <th md-column>{{\'logs.message\' | translate}}</th> <th md-column>{{\'logs.insertedBy\' | translate}}</th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="row in tabledata.content" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell> <a md-no-ink class="md-primary" ng-click="logentry(row)">{{::(messagePrefix + row.wsName) | translate}}</a> </td> <td md-cell>{{::row.inserted | hoisDateTime}}</td> <td md-cell ng-if="logType === \'ekis\'">{{currentLanguageNameField(row.directive)}}</td> <td md-cell>{{row.error ? \'main.yes\' : \'main.no\' | translate}}</td> <td md-cell>{{::row.logTxt}}</td> <td md-cell>{{::row.insertedBy}}</td> </tr> </tbody> </table> </md-table-container> <md-table-pagination md-limit="criteria.size" md-limit-options="[10, 20, 50]" md-page="criteria.page" md-total="{{tabledata.totalElements}}" md-on-paginate="loadData" md-label="{page: \'{{\'main.page\' | translate}}:\', rowsPerPage: \'{{\'main.rowPerPage\' | translate}}:\', of: \'{{\'main.of\' | translate}}\' }" md-page-select></md-table-pagination> </div> </div>'),a.put("message/message.new.html",'<div layout="column" layout-padding> <form name="messageNewForm"> <div layout="column"> <md-input-container flex="50" flex-sm="100" flex-xs="100"> <label class="textInput">{{\'message.subject\' | translate}}</label> <input ng-model="record.subject" type="text" md-maxlength="1000" required> </md-input-container> <md-input-container flex="50" flex-sm="100" flex-xs="100"> <label class="textInput">{{\'message.content\' | translate}}</label> <textarea ng-model="record.content" max-rows="20" md-maxlength="2000" required></textarea> </md-input-container> <md-input-container flex="50" flex-sm="100" flex-xs="100"> <label>{{\'message.targetGroup\' | translate}}</label> <hois-classifier-select ng-model="targetGroup" model-value-attr="code" main-classifier-code="ROLL" show-only-values="targetGroups" required ng-change="tarGetGroupChanged()"></hois-classifier-select> </md-input-container> <!--hois-autocomplete is not used as query needs additional parameters (school, role)--> <md-autocomplete ng-show="targetGroup" name="receiverInput" md-selected-item="receiver" md-search-text="queryText" md-items="item in querySearch(queryText)" md-item-text="item.fullname" md-min-length="3" md-floating-label="{{\'message.receiver\' | translate}}" ng-model="queryText" md-no-cache class="small-margin" md-selected-item-change="addReceiver(receiver)"> <md-item-template> <span md-highlight-text="queryText" md-highlight-flags="^i">{{item.fullname}}</span> </md-item-template> <md-not-found> {{\'main.messages.error.notFound\' | translate}} </md-not-found> </md-autocomplete> <!--  view for school admin   --> <div ng-show="targetGroup && targetGroup === \'ROLL_T\' && auth.isAdmin()" layout="column"> <md-input-container flex="50" flex-sm="100" flex-xs="100"> <label>{{\'message.curriculumStudents\' | translate}}</label> <hois-select multiple ng-model="curriculum" type="curriculum"></hois-select> </md-input-container> <md-input-container flex="50" flex-sm="100" flex-xs="100"> <label>{{\'message.studyGroupStudents\' | translate}}</label> <hois-select multiple ng-model="studentGroup" values="studentGroups"></hois-select> </md-input-container> <md-input-container flex="50" flex-sm="100" flex-xs="100"> <label>{{\'message.studyFormStudents\' | translate}}</label> <hois-classifier-select multiple ng-model="studyForm" model-value-attr="code" main-classifier-code="OPPEVORM"></hois-classifier-select> </md-input-container> </div> <!--  view for teacher   --> <md-input-container flex="50" flex-sm="100" flex-xs="100" ng-show="targetGroup && targetGroup === \'ROLL_T\' && auth.isTeacher()"> <label>{{\'message.studyGroupStudents\' | translate}}</label> <hois-select multiple ng-model="studentGroup" values="studentGroups"></hois-select> </md-input-container> <md-input-container flex="50" flex-sm="100" flex-xs="100" ng-show="targetGroup && targetGroup === \'ROLL_L\' && auth.isTeacher()"> <label>{{\'message.studyGroupStudentsParents\' | translate}}</label> <hois-select multiple ng-model="studyGroupStudentsParents" values="studentGroups"></hois-select> </md-input-container> <h2 ng-class="{invalid: messageNewForm.$submitted && receivers.length === 0}">{{\'message.messageReceiver\' | translate}} *</h2> <table md-table class="secondary-table"> <thead md-head> <tr md-row> <th md-column>{{\'message.receiver\' | translate}}</th> <th md-column ng-if="auth.isAdmin()">{{\'student.idcode\' | translate}}</th> <th md-column ng-if="auth.isAdmin()">{{\'message.targetGroup\' | translate}}</th> <th md-column ng-if="auth.isTeacher()">{{\'message.curriculum\' | translate}}</th> <th md-column ng-if="auth.isTeacher()">{{\'message.studentGroup\' | translate}}</th> <th md-column></th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="receiver in receivers" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell>{{receiver.fullname}}</td> <td md-cell ng-if="auth.isAdmin()"> <span ng-if="receiver.role.length === 1 && receiver.role[0] === \'ROLL_T\'">{{receiver.idcode}}</span> </td> <td md-cell ng-if="auth.isAdmin()"> <p ng-repeat="role in receiver.role"> <hois-classifier-value ng-model="role" main-classifier-code="ROLL"></hois-classifier-value> </p> </td> <td md-cell ng-if="auth.isTeacher()"> {{currentLanguageNameField(receiver.curriculum)}} </td> <td md-cell ng-if="auth.isTeacher()"> {{currentLanguageNameField(receiver.studentGroup)}} </td> <td md-cell><md-button class="remove nomargin" ng-click="removeReceiver(receiver)">&times;</md-button></td> </tr> </tbody> </table> </div> <div layout="row"> <md-button class="md-raised md-primary" ng-click="send()">{{\'main.button.send\' | translate}}</md-button> <md-button class="md-raised" ng-click="back(formState.backUrl, messageNewForm, \'message.confirmClose\')">{{\'main.button.back\' | translate}}</md-button> </div> </form> </div>'),a.put("message/message.received.html",'<md-nav-bar md-selected-nav-item="currentNavItem"> <md-nav-item md-nav-href="#/messages/received?_menu" name="message.received">{{\'message.received\' | translate}}</md-nav-item> <md-nav-item md-nav-href="#/messages/sent?_menu" name="message.sent">{{\'message.sent\' | translate}}</md-nav-item> <md-nav-item md-nav-href="#/messages/automatic/sent?_menu" name="message.automaticSent" ng-if="auth.isAdmin()">{{\'message.automaticSent\' | translate}}</md-nav-item> </md-nav-bar> <div class="ois-form-layout-padding ois-form-layout" ng-cloak> <form ng-submit="loadData()" layout="column" novalidate> <div layout="row"> <md-input-container flex="50" flex-sm="100" flex-xs="100"> <label class="textInput">{{\'message.subject\' | translate}}</label> <input ng-model="criteria.subject" type="text"> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="20" flex-sm="100" flex-xs="100"> <label>{{\'message.sentDatesRange\' | translate}}</label> <input type="hidden"> </md-input-container> <div flex="33"> <md-input-container flex> <label>{{\'main.from\' | translate}}</label> <md-datepicker ng-model="criteria.sentFrom"></md-datepicker> </md-input-container> <md-input-container flex> <label>{{\'main.thru\' | translate}}</label> <md-datepicker ng-model="criteria.sentThru"></md-datepicker> </md-input-container> </div> </div> <div layout="row"> <md-input-container flex="50" flex-sm="100" flex-xs="100"> <label class="textInput">{{\'message.sender\' | translate}}</label> <input ng-model="criteria.sender" type="text"> </md-input-container> </div> <div layout="row"> <md-button type="submit" class="md-raised md-primary">{{\'main.button.search\' | translate}}</md-button> <md-button class="md-raised" ng-click="clearCriteria()">{{\'main.button.clear\' | translate}}</md-button> <md-button class="md-raised" ng-if="formState.canSend" ng-href="/#/message/new?backUrl=received">{{\'message.send\' | translate}}</md-button> </div> </form> </div> <div layout-padding> <div flex> <md-table-container> <table md-table md-progress="tabledata.$promise"> <thead md-head md-order="criteria.order" md-on-reorder="loadData"> <tr md-row> <th md-column md-order-by="subject">{{\'message.subject\' | translate}}</th> <th md-column md-order-by="inserted">{{\'message.dateSent\' | translate}}</th> <th md-column md-order-by="p.lastname,p.firstname">{{\'message.sender\' | translate}}</th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="row in tabledata.content" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell><a href="#/message/{{row.id}}/view?backUrl=received" ng-class="{bold: !row.isRead}">{{::row.subject}}</a></td> <td md-cell>{{row.dateSent | hoisDateTime}}</td> <td md-cell>{{::row.sender}}</td> </tr> </tbody> </table> </md-table-container> <md-table-pagination md-limit="criteria.size" md-limit-options="[10, 20, 50]" md-page="criteria.page" md-total="{{tabledata.totalElements}}" md-on-paginate="loadData" md-label="{page: \'{{\'main.page\' | translate}}:\', rowsPerPage: \'{{\'main.rowPerPage\' | translate}}:\', of: \'{{\'main.of\' | translate}}\'}" md-page-select></md-table-pagination> </div> </div>'),a.put("message/message.respond.html",'<div class="ois-form-layout-padding ois-form-layout" ng-cloak> <form layout="column" name="messageRespondForm" novalidate> <div layout="row"> <md-input-container flex="50" flex-sm="100" flex-xs="100"> <label class="textInput">{{\'message.subject\' | translate}}</label> <input ng-model="record.subject" type="text" md-maxlength="1000" required> </md-input-container> </div> <div layout="row"> <md-input-container flex="50" flex-sm="100" flex-xs="100"> <label class="textInput">{{\'message.content\' | translate}}</label> <textarea ng-model="record.content" max-rows="20" md-maxlength="2000" required id="content"></textarea> </md-input-container> </div> <div layout="row"> <md-button class="md-raised md-primary" ng-click="send()">{{\'main.button.send\' | translate}}</md-button> <md-button class="md-raised" ng-href="{{::formState.backUrl}}">{{\'main.button.back\' | translate}}</md-button> </div> </form> </div>'),a.put("message/message.sent.html",'<md-nav-bar md-selected-nav-item="currentNavItem"> <md-nav-item md-nav-href="#/messages/received?_menu" name="message.received">{{\'message.received\' | translate}}</md-nav-item> <md-nav-item md-nav-href="#/messages/sent?_menu" name="message.sent">{{\'message.sent\' | translate}}</md-nav-item> <md-nav-item md-nav-href="#/messages/automatic/sent?_menu" name="message.automaticSent" ng-if="auth.isAdmin()">{{\'message.automaticSent\' | translate}}</md-nav-item> </md-nav-bar> <div class="ois-form-layout-padding ois-form-layout" ng-cloak> <form ng-submit="loadData()" layout="column" novalidate> <div layout="row"> <md-input-container flex="50" flex-sm="100" flex-xs="100"> <label class="textInput">{{\'message.subject\' | translate}}</label> <input ng-model="criteria.subject" type="text"> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="20" flex-sm="100" flex-xs="100"> <label>{{\'message.sentDatesRange\' | translate}}</label> <input type="hidden"> </md-input-container> <div flex="33"> <md-input-container flex> <label>{{\'main.from\' | translate}}</label> <md-datepicker ng-model="criteria.sentFrom"></md-datepicker> </md-input-container> <md-input-container flex> <label>{{\'main.thru\' | translate}}</label> <md-datepicker ng-model="criteria.sentThru"></md-datepicker> </md-input-container> </div> </div> <div layout="row"> <md-button type="submit" class="md-raised md-primary">{{\'main.button.search\' | translate}}</md-button> <md-button class="md-raised" ng-click="clearCriteria()">{{\'main.button.clear\' | translate}}</md-button> <md-button class="md-raised" ng-if="formState.canSend" ng-href="/#/message/new?backUrl={{backUrlRef}}">{{\'message.send\' | translate}}</md-button> </div> </form> </div> <div layout-padding> <div flex> <md-table-container> <table md-table md-progress="tabledata.$promise"> <thead md-head md-order="criteria.order" md-on-reorder="loadData"> <tr md-row> <th md-column md-order-by="subject">{{\'message.subject\' | translate}}</th> <th md-column md-order-by="inserted">{{\'message.dateSent\' | translate}}</th> <th md-column>{{\'message.receiver\' | translate}}</th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="row in tabledata.content" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell><a href="#/message/{{row.id}}/view?backUrl={{backUrlRef}}">{{::row.subject}}</a></td> <td md-cell>{{row.dateSent | hoisDateTime}}</td> <td md-cell ng-click="row.clicked = !row.clicked"> <span ng-if="!row.clicked">{{showReceivers(row, false)}}</span> <span ng-if="row.clicked">{{showReceivers(row, true)}}</span> </td> </tr> </tbody> </table> </md-table-container> <md-table-pagination md-limit="criteria.size" md-limit-options="[10, 20, 50]" md-page="criteria.page" md-total="{{tabledata.totalElements}}" md-on-paginate="loadData" md-label="{page: \'{{\'main.page\' | translate}}:\', rowsPerPage: \'{{\'main.rowPerPage\' | translate}}:\', of: \'{{\'main.of\' | translate}}\'}" md-page-select></md-table-pagination> </div> </div>'),a.put("message/message.view.html",'<div layout-padding ng-cloak class="form-readonly"> <form layout="column" novalidate> <div layout="row"> <md-input-container flex> <label class="textInput">{{\'message.subject\' | translate}}</label> <hois-value value="record.subject"> </md-input-container> </div> <div layout="row"> <md-input-container flex> <label class="textInput">{{\'message.content\' | translate}}</label> <hois-value value="record.content"> </md-input-container> </div> <div layout="row" ng-show="!isSent"> <md-input-container flex> <label class="textInput">{{\'message.sender\' | translate}}</label> <hois-value value="record.sendersName"> </md-input-container> </div> <div layout="row" ng-show="isSent"> <md-input-container flex> <label class="textInput">{{\'message.receiver\' | translate}}</label> <hois-value value="record.receivers"> </md-input-container> </div> <div layout="row"> <md-input-container flex> <label>{{\'message.dateSent\' | translate}}</label> <hois-value value="record.inserted | hoisDate"> </md-input-container> </div> <div layout="row"> <md-button class="md-raised md-primary" ng-if="!isSent && record.sendersId !== -1" ng-href="/#/message/{{record.id}}/respond">{{\'message.respond\' | translate}}</md-button> <md-button class="md-raised" ng-href="{{::formState.backUrl}}">{{\'main.button.back\' | translate}}</md-button> </div> </form> </div>'),a.put("messageTemplate/message.template.edit.html",'<div layout="column" layout-padding> <form name="messageTemplateForm"> <div layout="column"> <md-input-container ng-if="isValid"> <label>{{\'messageTemplate.type\' | translate}}</label> <hois-classifier-select ng-if="isValid" ng-model="record.type" model-value-attr="code" main-classifier-code="TEATE_LIIK" required filter-values="allowedTypes" ng-disabled="readOnly"></hois-classifier-select> </md-input-container> <md-input-container ng-if="!isValid"> <label>{{\'messageTemplate.type\' | translate}}</label> <hois-classifier-select ng-if="!isValid" ng-model="record.type" model-value-attr="code" main-classifier-code="TEATE_LIIK" required ng-disabled="readOnly"></hois-classifier-select> </md-input-container> <md-input-container> <label>{{\'generalmessage.title\' | translate}}</label> <textarea ng-model="record.headline" required md-maxlength="1000" max-rows="2" ng-readonly="readOnly"></textarea> </md-input-container> <md-input-container> <label>{{\'generalmessage.content\' | translate}}</label> <textarea ng-model="record.content" required md-maxlength="2000" max-rows="2" ng-readonly="readOnly"></textarea> </md-input-container> <div layout="row"> <md-input-container> <label>{{\'messageTemplate.validFrom\' | translate}}</label> <md-datepicker ng-model="record.validFrom" ng-change="getIsValid()" ng-disabled="readOnly"></md-datepicker> </md-input-container> <md-input-container flex-offset="5"> <label>{{\'messageTemplate.validThru\' | translate}}</label> <md-datepicker ng-model="record.validThru" md-min-date="record.validFrom" ng-change="getIsValid()" ng-disabled="readOnly"></md-datepicker> </md-input-container> </div> </div> <div layout="row"> <md-button class="md-raised md-primary" ng-href="#/messageTemplate/{{::record.id}}/edit" ng-if="readOnly && isAuthorized(\'ROLE_OIGUS_M_TEEMAOIGUS_AUTOTEADE\')">{{\'main.button.change\' | translate}}</md-button> <md-button class="md-raised md-primary" ng-click="save()" ng-if="!readOnly">{{\'main.button.save\' | translate}}</md-button> <md-button class="md-raised md-default" ng-click="delete()" ng-if="record.id && !readOnly">{{\'main.button.delete\' | translate}}</md-button> <md-button class="md-raised md-default" ng-if="!readOnly" ng-click="back(\'#/messageTemplate\', messageTemplateForm)">{{\'main.button.back\' | translate}}</md-button> <md-button class="md-raised md-default" ng-if="readOnly" ng-click="back(\'#/messageTemplate\')">{{\'main.button.back\' | translate}}</md-button> </div> </form> </div>'),a.put("messageTemplate/message.template.search.html",'<div class="ois-form-layout-padding ois-form-layout" ng-cloak> <fieldset> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'main.searchlabel\' | translate}}</legend> <form ng-submit="loadData()" layout="column" novalidate> <md-input-container> <label>{{\'messageTemplate.type\' | translate}}</label> <hois-classifier-select ng-model="criteria.type" model-value-attr="code" main-classifier-code="TEATE_LIIK" multiple></hois-classifier-select> </md-input-container> <md-input-container> <label class="textInput">{{\'generalmessage.title\' | translate}}</label> <input ng-model="criteria.headline" type="text"> </md-input-container> <div layout="row" layout-sm="column" layout-xs="column"> <div flex="1//"> <md-input-container flex> <label>{{\'messageTemplate.validFrom\' | translate}}</label> <md-datepicker ng-model="criteria.validFrom"></md-datepicker> </md-input-container> <md-input-container flex flex-offset="5"> <label>{{\'messageTemplate.validThru\' | translate}}</label> <md-datepicker ng-model="criteria.validThru"></md-datepicker> </md-input-container> </div> </div> <md-checkbox ng-model="criteria.valid" aria-label="{{\'main.valid\' | translate}}"> {{\'main.valid\' | translate}} </md-checkbox> <div layout="row"> <md-button type="submit" class="md-raised md-primary">{{\'main.button.search\' | translate}}</md-button> <md-button class="md-raised" ng-click="clearCriteria()">{{\'main.button.clear\' | translate}}</md-button> <md-button class="md-raised" ng-if="isAuthorized(\'ROLE_OIGUS_M_TEEMAOIGUS_AUTOTEADE\')" ng-href="#/messageTemplate/new">{{\'main.button.create\' | translate}}</md-button> </div> </form> </fieldset> </div> <div layout-padding> <div flex> <md-table-container> <table md-table md-progress="tabledata.$promise"> <thead md-head md-order="criteria.order" md-on-reorder="loadData"> <tr md-row> <th md-column md-order-by="type.{{currentLanguageNameField()}}">{{\'messageTemplate.type\' | translate}}</th> <th md-column md-order-by="headline">{{\'generalmessage.title\' | translate}}</th> <th md-column md-order-by="validFrom">{{\'messageTemplate.validFrom\' | translate}}</th> <th md-column md-order-by="validThru">{{\'messageTemplate.validThru\' | translate}}</th> <th md-column>{{\'main.status\' | translate}}</th> <th md-column></th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="row in tabledata.content" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell><a ng-href="#/messageTemplate/{{::row.id}}/view">{{currentLanguageNameField(row.type)}}</a></td> <td md-cell>{{::row.headline}}</td> <td md-cell>{{::row.validFrom | hoisDate}}</td> <td md-cell>{{::row.validThru | hoisDate}}</td> <td md-cell>{{row._isValid ? \'main.valid\' : \'main.invalid\' | translate}}</td> <td md-cell> <md-button md-no-ink class="md-primary change-button" ng-if="isAuthorized(\'ROLE_OIGUS_M_TEEMAOIGUS_AUTOTEADE\')" ng-href="#/messageTemplate/{{::row.id}}/edit">{{\'main.button.change\' | translate}}</md-button> </td> </tr> </tbody> </table> </md-table-container> <md-table-pagination md-limit="criteria.size" md-limit-options="[10, 20, 50]" md-page="criteria.page" md-total="{{tabledata.totalElements}}" md-on-paginate="loadData" md-label="{page: \'{{\'main.page\' | translate}}:\', rowsPerPage: \'{{\'main.rowPerPage\' | translate}}:\', of: \'{{\'main.of\' | translate}}\'}" md-page-select></md-table-pagination> </div> </div>'),a.put("midtermTask/midtermTask.copy.dialog.html",'<md-dialog aria-label="{{\'midtermTask.copy\' | translate}}" flex="50" flex-sm="70" flex-xs="100"> <form name="dialogForm" ng-cloak> <md-toolbar> <div class="md-toolbar-tools"> <h2>{{\'midtermTask.copy\' | translate}}</h2> <span flex></span> <md-button class="md-icon-button" ng-click="cancel()"> <md-icon md-font-set="material-icons">close</md-icon> </md-button> </div> </md-toolbar> <md-dialog-content> <span flex></span> <div class="ois-form-layout" layout="column" layout-margin ng-cloak> <div layout="column"> <!-- hois-value and disabled attribute have weird behaviour in IE browser --> <md-input-container ng-show="formState.auth.isTeacher()"> <label>{{\'midtermTask.teacher\' | translate}}</label> <input type="text" ng-model="formState.auth.fullname" readonly> </md-input-container> <md-input-container> <label>{{\'midtermTask.studyPeriod\' | translate}}</label> <hois-select ng-model="criteria.studyPeriod" values="studyPeriods"></hois-select> </md-input-container> <hois-autocomplete ng-model="criteria.teacherObject" method="teachers" name="teacher" label="midtermTask.teacher" ng-show="formState.auth.isAdmin()"></hois-autocomplete> <hois-autocomplete ng-model="criteria.subjectObject" method="subjects" name="subject" label="midtermTask.subject"></hois-autocomplete> </div> </div> <div layout="row"> <md-button type="submit" ng-click="loadData()" class="md-raised md-primary">{{\'main.button.search\' | translate}}</md-button> <md-button class="md-raised" ng-click="clearCriteria()">{{\'main.button.clear\' | translate}}</md-button> </div> <md-table-container flex> <table md-table md-row-select="true" md-progress="tabledata.$promise" ng-model="subjectStudyPeriodSelected"> <thead md-head md-order="criteria.order" md-on-reorder="loadData"> <tr md-row> <th md-column md-order-by="subject.{{currentLanguageNameField()}}">{{\'midtermTask.subject\' | translate}}</th> <th md-column ng-show="formState.auth.isAdmin()">{{\'midtermTask.teacher\' | translate}}</th> <th md-column>{{\'midtermTask.midtermTasks\' | translate}}</th> </tr> </thead> <tbody md-body> <tr md-row md-select="row" md-select-id="row.id" ng-repeat="row in tabledata.content" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell>{{currentLanguageNameField(row.subject)}}</td> <td md-cell ng-show="formState.auth.isAdmin()"> <table> <tr ng-repeat="teacher in row.teachers | orderBy"> <td>{{teacher}}</td> </tr> </table> </td> <td md-cell> <table> <tr ng-repeat="midtermTask in row.midtermTasks | orderBy: currentLanguageNameField()"> <td>{{currentLanguageNameField(midtermTask)}}</td> </tr> </table> </td> </tr> </tbody> </table> </md-table-container> <md-table-pagination md-limit="criteria.size" md-limit-options="[10, 20, 50]" md-page="criteria.page" md-total="{{tabledata.totalElements}}" md-on-paginate="loadData" md-label="{page: \'{{\'main.page\' | translate}}:\', rowsPerPage: \'{{\'main.rowPerPage\' | translate}}:\', of: \'{{\'main.of\' | translate}}\' }" md-page-select></md-table-pagination> </md-dialog-content> <md-dialog-actions layout="row" layout-align="start center"> <md-button class="md-raised md-primary" ng-click="submit()" ng-disabled="subjectStudyPeriodSelected.length !== 1">{{"main.button.add" | translate}}</md-button> <md-button class="md-raised" ng-click="cancel()">{{"main.button.close" | translate}}</md-button> </md-dialog-actions> </form> </md-dialog>'),a.put("midtermTask/midtermTask.html",'<div class="ois-form-layout-padding ois-form-layout" ng-cloak> <form name="midtermTaskForm" layout="column" class="nomargin"> <md-table-container> <table md-table> <thead md-head> <tr md-row ng-if="!record.canBeEdited"> <th md-column>{{\'midtermTask.nr\' | translate}}</th> <th md-column ng-click="sortBy(\'nameEt\')"> {{\'midtermTask.nameEt\' | translate}} * <span class="sortorder" ng-show="propertyName === \'nameEt\'" ng-class="{reverse: reverse}"></span> </th> <th md-column ng-click="sortBy(\'nameEn\')"> {{\'midtermTask.nameEn\' | translate}} <span class="sortorder" ng-show="propertyName === \'nameEn\'" ng-class="{reverse: reverse}"></span> </th> <th md-column ng-click="sortBy(\'descriptionEt\')"> {{\'midtermTask.descriptionEt\' | translate}} * <span class="sortorder" ng-show="propertyName === \'descriptionEt\'" ng-class="{reverse: reverse}"></span> </th> <th md-column ng-click="sortBy(\'descriptionEn\')"> {{\'midtermTask.descriptionEn\' | translate}} <span class="sortorder" ng-show="propertyName === \'descriptionEn\'" ng-class="{reverse: reverse}"></span> </th> <th md-column ng-click="sortBy(\'maxPoints\')"> {{\'midtermTask.maxPoints\' | translate}} * <span class="sortorder" ng-show="propertyName === \'maxPoints\'" ng-class="{reverse: reverse}"></span> </th> <th md-column ng-click="sortBy(\'percentage\')"> {{\'midtermTask.percentage\' | translate}} * <span class="sortorder" ng-show="propertyName === \'percentage\'" ng-class="{reverse: reverse}"></span> </th> <th md-column ng-click="sortBy(\'taskDate\')"> {{\'midtermTask.taskDate\' | translate}} <span class="sortorder" ng-show="propertyName === \'taskDate\'" ng-class="{reverse: reverse}"></span> </th> <th md-column ng-click="sortBy(\'threshold\')"> {{\'midtermTask.threshold\' | translate}} <span class="sortorder" ng-show="propertyName === \'threshold\'" ng-class="{reverse: reverse}"></span> </th> <th md-column ng-click="sortBy(\'thresholdPercentage\')"> {{\'midtermTask.thresholdPercentage\' | translate}} <span class="sortorder" ng-show="propertyName === \'thresholdPercentage\'" ng-class="{reverse: reverse}"></span> </th> <th md-column></th> </tr> <tr md-row ng-if="record.canBeEdited"> <th md-column>{{\'midtermTask.nr\' | translate}}</th> <th md-column>{{\'midtermTask.nameEt\' | translate}} *</th> <th md-column>{{\'midtermTask.nameEn\' | translate}}</th> <th md-column>{{\'midtermTask.descriptionEt\' | translate}} *</th> <th md-column>{{\'midtermTask.descriptionEn\' | translate}}</th> <th md-column>{{\'midtermTask.maxPoints\' | translate}} *</th> <th md-column>{{\'midtermTask.percentage\' | translate}} *</th> <th md-column>{{\'midtermTask.taskDate\' | translate}}</th> <th md-column>{{\'midtermTask.threshold\' | translate}}</th> <th md-column>{{\'midtermTask.thresholdPercentage\' | translate}}</th> <th md-column></th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="row in record.midtermTasks" ng-class-odd="\'odd\'" ng-class-even="\'even\'" ng-if="record.canBeEdited"> <ng-form name="midtermTaskUnitForm"> <td md-cell> {{$index + 1}} <span ng-if="row.moodleGradeItemId"><md-icon md-font-set="material-icons">school</md-icon></span> </td> <td md-cell> <md-input-container> <input ng-model="row.nameEt" type="text" md-maxlength="255" required aria-label="{{\'midtermTask.nameEt\' | translate}}"> </md-input-container> </td> <td md-cell> <md-input-container> <input ng-model="row.nameEn" type="text" md-maxlength="255" aria-label="{{\'midtermTask.nameEn\' | translate}}"> </md-input-container> </td> <td md-cell> <md-input-container> <input ng-model="row.descriptionEt" type="text" md-maxlength="4000" aria-label="{{\'midtermTask.descriptionEt\' | translate}}" required> </md-input-container> </td> <td md-cell> <md-input-container> <input ng-model="row.descriptionEn" type="text" md-maxlength="4000" aria-label="{{\'midtermTask.descriptionEn\' | translate}}"> </md-input-container> </td> <td md-cell> <md-input-container> <input ng-model="row.maxPoints" type="number" min="0" max="999" required aria-label="{{\'midtermTask.maxPoints\' | translate}}" pattern="^\\d+(\\.\\d{1})?$" ng-disabled="row.moodleGradeItemId"> </md-input-container> </td> <td md-cell> <md-input-container> <input ng-model="row.percentage" type="number" min="0" max="100" required aria-label="{{\'midtermTask.percentage\' | translate}}" pattern="^\\d+$"> </md-input-container> </td> <td md-cell> <md-input-container> <md-datepicker ng-model="row.taskDate" md-open-on-focus aria-label="{{currentLanguageNameField(row)}} {{\'midtermTask.taskDate\' | translate}}"></md-datepicker> </md-input-container> </td> <td md-cell> <md-checkbox ng-model="row.threshold" ng-change="clearThresholdPercentage(row)" aria-label="{{currentLanguageNameField(row)}} {{\'midtermTask.threshold\' | translate}}" ng-disabled="row.moodleGradeItemId"> </md-checkbox> </td> <td md-cell> <md-input-container> <input ng-model="row.thresholdPercentage" type="number" min="0" max="100" ng-disabled="!row.threshold || row.moodleGradeItemId" ng-required="row.threshold" aria-label="{{\'midtermTask.thresholdPercentage\' | translate}}" pattern="^\\d+$"> </md-input-container> </td> <td md-cell><a class="remove nomargin" ng-click="removeRow(row)">&times;</a></td> </ng-form> </tr> <tr md-row ng-repeat="row in record.midtermTasks | orderBy:propertyName:reverse" ng-class-odd="\'odd\'" ng-class-even="\'even\'" ng-if="!record.canBeEdited"> <ng-form name="midtermTaskUnitForm"> <td md-cell>{{$index + 1}}</td> <td md-cell>{{row.nameEt}}</td> <td md-cell>{{row.nameEn}}</td> <td md-cell>{{row.descriptionEt}}</td> <td md-cell>{{row.descriptionEn}}</td> <td md-cell>{{row.maxPoints}}</td> <td md-cell>{{row.percentage}}</td> <td md-cell>{{row.taskDate | hoisDate}}</td> <td md-cell> <md-checkbox ng-model="row.threshold" aria-label="{{currentLanguageNameField(row)}} {{\'midtermTask.threshold\' | translate}}" disabled> </md-checkbox> </td> <td md-cell>{{row.thresholdPercentage}}</td> <td md-cell></td> </ng-form> </tr> <!-- colspan is not used because of the line under previous row on readOnly form --> <tr md-row> <td md-cell></td> <td md-cell></td> <td md-cell></td> <td md-cell></td> <td md-cell></td> <td md-cell></td> <td md-cell>{{\'midtermTask.percentageSum\' | translate}}: {{getPercentageSum()}}</td> <td md-cell></td> <td md-cell></td> <td md-cell></td> <td md-cell></td> </tr> </tbody> </table> </md-table-container> <div layout="row"> <md-button class="md-primary" ng-click="addRow()" ng-show="record.canBeEdited">{{\'main.button.addNewRow\' | translate}}</md-button> </div> <div layout="row"> <md-button class="md-raised md-primary" ng-click="save()" ng-show="record.canBeEdited">{{\'main.button.save\' | translate}}</md-button> <md-button class="md-raised" ng-click="openCopyDialog()" ng-show="record.canBeEdited">{{\'midtermTask.copy\' | translate}}</md-button> <md-button class="md-raised" ng-click="back(\'#/subjectStudyPeriods/\' + subjectStudyPeriodId + \'/midtermTasks/studentResults\')">{{\'main.button.back\' | translate}}</md-button> </div> </form> </div> <style>.sortorder:after {\r\n    content: \'\\25b2\';\r\n  }\r\n  .sortorder.reverse:after {\r\n    content: \'\\25bc\';\r\n  }</style>'),
a.put("midtermTask/midtermTask.studentResults.html",'<div class="ois-form-layout-padding form-readonly" ng-cloak> <form name="midtermTaskResultForm"> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="20" flex-sm="100" flex-xs="100"> <label class="textInput">{{\'midtermTask.subject\' | translate}}</label> <hois-value value="record.subjectStudyPeriod.subject.nameEt"></hois-value> </md-input-container> <md-input-container flex="20" flex-sm="100" flex-xs="100" flex-offset-xs="0" flex-offset-sm="0" flex-offset="5"> <label class="textInput">{{\'midtermTask.teacher\' | translate}}</label> <hois-value value="record.subjectStudyPeriod.teachers.join(\', \')"></hois-value> </md-input-container> <md-input-container flex="20" flex-sm="100" flex-xs="100" flex-offset-xs="0" flex-offset-sm="0" flex-offset="5"> <label class="textInput">{{\'midtermTask.studyPeriod\' | translate}}</label> <hois-value value="currentLanguageNameField(record.subjectStudyPeriod.studyPeriod)"></hois-value> </md-input-container> <md-input-container flex="20" flex-sm="100" flex-xs="100" flex-offset-xs="0" flex-offset-sm="0" flex-offset="5"> <label class="textInput">{{\'midtermTask.assessment\' | translate}}</label> <hois-value value="currentLanguageNameField(record.assessment)"></hois-value> </md-input-container> </div> <md-table-container> <table md-table> <thead md-head> <tr md-row> <th md-column>{{\'midtermTask.student\' | translate}}</th> <th md-column ng-repeat="midtermTask in record.midtermTasks"> {{getMidtermTaskHeader(midtermTask)}} <span ng-if="midtermTask.moodleGradeItemId"><md-icon md-font-set="material-icons">school</md-icon></span> </th> <th md-column>{{\'midtermTask.finalGrade\' | translate}}</th> <th md-column>{{\'midtermTask.protocols\' | translate}}</th> <th md-column class="one-row">{{\'midtermTask.notes\' | translate}}</th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="student in record.students | orderBy: \'name\'" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <ng-form name="midtermTaskUnitForm"> <td md-cell> {{student.name}} <span ng-if="student.isMoodleRegistered"><md-icon md-font-set="material-icons">school</md-icon></span> </td> <td md-cell ng-repeat="result in record.studentResults | filter: filterStudentResults(student)"> <md-input-container ng-if="result.isText"> <input ng-model="result.pointsTxt" type="text" md-maxlength="10" aria-label="{{\'midtermTask.pointsTxt\' | translate}}" ng-disabled="!student.studentResultCanBeChanged || moodleTasks[result.midtermTask]"> </md-input-container> <md-input-container ng-if="!result.isText"> <input ng-model="result.points" type="number" min="0" max="{{result.maxPoints}}" pattern="^\\d+(\\.\\d{1,2})?$" aria-label="{{\'midtermTask.points\' | translate}}" ng-disabled="!student.studentResultCanBeChanged || moodleTasks[result.midtermTask]"> </md-input-container> </td> <td md-cell> <table> <tr ng-repeat="protocol in record.protocols | orderBy: \'protocolNr\' | filter: filterProtocols(student)"> <td> <table> <tr ng-repeat="protocolStudent in protocol.protocolStudents | filter: filterStudentProtocols(student)"> <td>{{protocolStudent.gradeValue}}</td> </tr> </table> </td> </tr> </table> </td> <td md-cell colspan="2"> <table> <tr ng-repeat="protocol in record.protocols | orderBy: \'protocolNr\' | filter: filterProtocols(student)"> <td class="protocol"> <a ng-href="#/higherProtocols/{{::protocol.id}}/view"> <span>{{protocol.protocolNr}}</span> <hois-classifier-value class="inline" ng-model="protocol.protocolType" main-classifier-code="PROTOKOLLI_LIIK"> </hois-classifier-value> </a> </td> <td> <table> <tr ng-repeat="protocolStudent in protocol.protocolStudents | filter: filterStudentProtocols(student)"> <td>{{protocolStudent.addInfo}}</td> </tr> </table> </td> </tr> </table> </td> </ng-form> </tr> </tbody> </table> </md-table-container> </form> <div layout="row"> <md-button class="md-raised md-primary" ng-click="save()" ng-hide="record.subjectStudyPeriod.isPracticeSubject || record.students.length === 0">{{\'main.button.save\' | translate}}</md-button> <md-button class="md-raised" ng-click="back(\'#/subjectStudyPeriods\')">{{\'main.button.back\' | translate}}</md-button> <md-button class="md-raised" ng-href="#/subjectStudyPeriods/{{subjectStudyPeriodId}}/midtermTasks" ng-hide="record.subjectStudyPeriod.isPracticeSubject">{{\'midtermTask.add\' | translate}}</md-button> </div> </div> <style>.inline {\r\n    display: inline;\r\n  }\r\n\r\n  .protocol {\r\n    min-width: 150px;\r\n    padding-right: 50px;\r\n  }\r\n\r\n  table.md-table th.md-column {\r\n    white-space: unset;\r\n  }\r\n\r\n  table.md-table th.md-column:last-child {\r\n    padding-right: 90px;\r\n    padding-left: 100px;\r\n  }</style>'),a.put("occupationcertificate/import.html",'<div class="ois-form-layout-padding ois-form-layout" ng-cloak> <div flex> <form novalidate name="occupationCertificateForm"> <div layout="row"> <md-input-container flex> <label>{{\'occupationcertificate.curriculum\' | translate}}</label> <hois-select ng-model="criteria.curriculumVersion" criteria="{higher: false, valid: true}" type="curriculumversion" multiple required></hois-select> </md-input-container> </div> <div layout="row"> <md-input-container flex> <label>{{\'occupationcertificate.studentGroup\' | translate}}</label> <hois-select ng-model="criteria.studentGroup" values="formState.studentGroups" multiple></hois-select> </md-input-container> </div> <div layout="row"> <div flex> <hois-autocomplete ng-model="criteria.student" method="students" additional-query-params="{active: true, curriculumVersion: criteria.curriculumVersion, studentGroup: criteria.studentGroup}" label="occupationcertificate.student"></hois-autocomplete> </div> </div> <div layout="row"> <md-input-container flex="20" flex-sm="100" flex-xs="100"> <label>{{\'occupationcertificate.dateRange\' | translate}}</label> <input type="hidden"> </md-input-container> <div flex="33"> <md-input-container flex> <label>{{\'main.from\' | translate}}</label> <md-datepicker ng-model="criteria.from" md-max-date="criteria.thru"></md-datepicker> </md-input-container> <md-input-container flex> <label>{{\'main.thru\' | translate}}</label> <md-datepicker ng-model="criteria.thru" md-min-date="criteria.from"></md-datepicker> </md-input-container> </div> </div> <div layout="row"> <md-button class="md-raised md-primary" ng-click="importFromKutseregister()">{{\'occupationcertificate.import\' | translate}}</md-button> </div> </form> </div> </div> <div ng-if="results"> <div layout-padding> <div flex> <md-table-container> <table md-table> <thead md-head> <tr md-row> <th md-column>{{\'occupationcertificate.certificateNr\' | translate}}</th> <th md-column>{{\'occupationcertificate.idcode\' | translate}}</th> <th md-column>{{\'occupationcertificate.firstname\' | translate}}</th> <th md-column>{{\'occupationcertificate.lastname\' | translate}}</th> <th md-column>{{\'occupationcertificate.typename\' | translate}}</th> <th md-column>{{\'occupationcertificate.occupation\' | translate}}</th> <th md-column>{{\'occupationcertificate.issuer\' | translate}}</th> <th md-column>{{\'occupationcertificate.issueDate\' | translate}}</th> <th md-column>{{\'occupationcertificate.validFrom\' | translate}}</th> <th md-column>{{\'occupationcertificate.validThru\' | translate}}</th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="row in results" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell>{{::row.certificateNr}}</td> <td md-cell>{{::row.idcode}}</td> <td md-cell>{{::row.firstname}}</td> <td md-cell>{{::row.lastname}}</td> <td md-cell>{{row.type | translate}}</td> <td md-cell>{{currentLanguageNameField(row.occupation)}}</td> <td md-cell>{{::row.issuer}}</td> <td md-cell>{{::row.issueDate | hoisDate}}</td> <td md-cell>{{::row.validFrom | hoisDate}}</td> <td md-cell>{{::row.validThru | hoisDate}}</td> </tr> </tbody> </table> </md-table-container> </div> </div> </div>'),a.put("occupationstandard/occupationstandard.html",'<div layout-padding> <div flex> <form layout="column" name="kutseregisterSyncForm"> <div layout="row"> <div flex="33"> <md-input-container flex> <label>{{\'main.from\' | translate}}</label> <md-datepicker ng-model="criteria.from" md-max-date="criteria.thru" required></md-datepicker> </md-input-container> </div> </div> <div layout="row"> <md-button class="md-raised" ng-click="occupationStandards()">{{\'kutseregister.occupationStandards\' | translate}}</md-button> </div> </form> </div> </div>'),a.put("persons/persons.edit.html",'<div class="ois-form-layout-padding" layout="column" ng-cloak> <form name="personForm" class="nomargin"> <div layout="column" flex> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="45" flex-sm="100"> <label>{{\'person.idcode\' | translate}}</label> <hois-idcode-lookup ng-model="person.idcode" name="idcode" role="person" after-lookup="lookupPerson(response)" after-failed-lookup="lookupFailure()" no-lookup="cleanReadOnly()" required ng-disabled="idcodeReadonly"></hois-idcode-lookup> </md-input-container> <md-input-container flex="50" flex-sm="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'person.sex\' | translate}}</label> <hois-classifier-select ng-model="person.sex" main-classifier-code="SUGU" model-value-attr="code" required ng-disabled="idcodeReadonly"></hois-classifier-select> </md-input-container> </div> <div layout="row"> <md-input-container flex="20" flex-sm="100"> <label>{{\'teacher.person.birthdate\' | translate}}</label> <md-datepicker ng-model="person.birthdate" md-max-date="maxDate" required md-open-on-focus ng-disabled="idcodeReadonly"></md-datepicker> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="45" flex-sm="100"> <label>{{\'person.firstname\' | translate}}</label> <input ng-model="person.firstname" type="text" md-maxlength="100" required> </md-input-container> <md-input-container flex="50" flex-sm="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'person.lastname\' | translate}}</label> <input ng-model="person.lastname" type="text" md-maxlength="100" required> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="45" flex-sm="100"> <label>{{\'person.email\' | translate}}</label> <input ng-model="person.email" type="email" md-maxlength="100"> </md-input-container> <md-input-container flex="50" flex-sm="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'person.phone\' | translate}}</label> <input ng-model="person.phone" type="text" md-maxlength="100"> </md-input-container> </div> </div> <md-button ng-click="update()" class="md-raised md-primary">{{\'main.button.save\' | translate}}</md-button> <md-button ng-if="person.id" ng-click="delete(person)" class="md-raised">{{\'main.button.delete\' | translate}}</md-button> <md-button ng-click="personBack()" class="md-raised">{{\'main.button.back\' | translate}}</md-button> </form> <div ng-if="person.id"> <div>&nbsp;</div> <fieldset> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'user.role\' | translate}}</legend> <div layout="row" class="align-center"> <md-button class="md-raised" ng-if="person.id" ng-href="#/persons/{{::person.id}}/users/new">{{\'main.button.create\' | translate}}</md-button> </div> <div layout="row"> <div ng-include="\'persons/users.table.html\'" flex></div> </div> </fieldset> </div> </div>'),a.put("persons/persons.search.html",'<div class="ois-form-layout-padding"> <div flex> <fieldset> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'main.searchlabel\' | translate}}</legend> <form ng-submit="loadData()" class="ois-form-layout nomargin" layout="column"> <div layout="column" flex> <md-input-container ng-if="auth.isMainAdmin()" flex> <label>{{\'school.label\' | translate}}</label> <hois-select ng-if="auth.isMainAdmin()" ng-model="criteria.school" type="school"></hois-select> </md-input-container> <md-input-container flex> <label>{{\'person.name\' | translate}}</label> <input ng-model="criteria.name" type="text"> </md-input-container> <md-input-container flex> <label>{{\'person.idcode\' | translate}}</label> <input ng-model="criteria.idcode" type="text"> </md-input-container> <md-input-container flex> <label>{{\'user.role\' | translate}}</label> <hois-classifier-select ng-model="criteria.role" main-classifier-code="ROLL" model-value-attr="code"></hois-classifier-select> </md-input-container> </div> <div layout="row"> <md-button type="submit" class="md-raised md-primary">{{\'main.button.search\' | translate}}</md-button> <md-button class="md-raised" ng-click="clearCriteria()">{{\'main.button.clear\' | translate}}</md-button> <md-button class="md-raised" ng-if="isAuthorized(\'ROLE_OIGUS_M_TEEMAOIGUS_KASUTAJA\')" ng-href="#/persons/new">{{\'main.button.create\' | translate}}</md-button> </div> </form> </fieldset> </div> </div> <div layout-padding> <div flex> <md-table-container> <table md-table md-progress="tabledata.$promise"> <thead md-head md-order="criteria.order" md-on-reorder="loadData"> <tr md-row> <th md-column md-order-by="p.lastname,p.firstname">{{\'person.name\' | translate}}</th> <th md-column md-order-by="p.idcode">{{\'person.idcode\' | translate}}</th> <th md-column ng-if="auth.isMainAdmin()">{{\'school.label\' | translate}}</th> <th md-column>{{\'user.role\' | translate}}</th> <th md-column></th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="row in tabledata.content" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell><a href="#/persons/{{::row.id}}">{{::row.name}}</a></td> <td md-cell>{{::row.idcode}}</td> <td md-cell ng-if="auth.isMainAdmin()">{{currentLanguageNameField(row.school)}}</td> <td md-cell>{{currentLanguageNameField(row.role)}}</td> <td md-cell><md-button md-no-ink class="md-primary change-button" ng-if="isAuthorized(\'ROLE_OIGUS_M_TEEMAOIGUS_KASUTAJA\')" ng-href="#/persons/{{::row.id}}/edit">{{\'main.button.change\' | translate}}</md-button></td> </tr> </tbody> </table> <md-table-pagination md-limit="criteria.size" md-limit-options="[10, 20, 50]" md-page="criteria.page" md-total="{{tabledata.totalElements}}" md-on-paginate="loadData" md-label="{page: \'{{\'main.page\' | translate}}:\', rowsPerPage: \'{{\'main.rowPerPage\' | translate}}:\', of: \'{{\'main.of\' | translate}}\'}" md-page-select></md-table-pagination> </md-table-container> </div> </div>'),a.put("persons/persons.view.html",'<div class="ois-form-layout-padding form-readonly" ng-cloak> <form name="personForm" class="ois-form-layout"> <div layout="column" flex> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="45" flex-sm="100"> <label>{{\'person.idcode\' | translate}}</label> <hois-value value="person.idcode"></hois-value> </md-input-container> <md-input-container flex="50" flex-sm="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'person.sex\' | translate}}</label> <hois-classifier-value ng-model="person.sex" main-classifier-code="SUGU"></hois-classifier-value> </md-input-container> </div> <div layout="row"> <md-input-container flex="20" flex-sm="100"> <label>{{\'teacher.person.birthdate\' | translate}}</label> <hois-value value="person.birthdate | hoisDate"></hois-value> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="45" flex-sm="100"> <label>{{\'person.firstname\' | translate}}</label> <hois-value value="person.firstname"></hois-value> </md-input-container> <md-input-container flex="50" flex-sm="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'person.lastname\' | translate}}</label> <hois-value value="person.lastname"></hois-value> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="45" flex-sm="100"> <label>{{\'person.email\' | translate}}</label> <hois-value value="person.email"></hois-value> </md-input-container> <md-input-container flex="50" flex-sm="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'person.phone\' | translate}}</label> <hois-value value="person.phone"></hois-value> </md-input-container> </div> </div> <md-button ng-href="#/persons/{{::person.id}}/edit?_noback" ng-if="isAuthorized(\'ROLE_OIGUS_M_TEEMAOIGUS_KASUTAJA\')" class="md-raised md-primary">{{\'main.button.change\' | translate}}</md-button> <md-button ng-click="back(\'#/persons\')" class="md-raised">{{\'main.button.back\' | translate}}</md-button> </form> <div ng-if="person.id"> <div>&nbsp;</div> <fieldset> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'user.role\' | translate}}</legend> <div layout="row" class="align-center"> <md-button class="md-raised" ng-if="person.id && isAuthorized(\'ROLE_OIGUS_M_TEEMAOIGUS_KASUTAJA\')" ng-href="#/persons/{{::person.id}}/users/new">{{\'main.button.create\' | translate}}</md-button> </div> <div layout="row"> <div ng-include="\'persons/users.table.html\'" flex></div> </div> </fieldset> </div> </div>'),a.put("persons/users.edit.html",'<div class="ois-form-layout-padding" layout="column" ng-cloak> <form name="userForm"> <div layout="column" flex> <div layout="row" flex class="form-readonly"> <md-input-container flex="45"> <label>{{\'person.name\' | translate}}</label> <hois-value value="user.person.fullname"> </md-input-container> <md-input-container flex-offset="5" flex="50"> <label>{{\'person.idcode\' | translate}}</label> <hois-value value="user.person.idcode"> </md-input-container> </div> <md-input-container flex> <label>{{\'school.label\' | translate}}</label> <hois-select ng-disabled="noSchool.indexOf(user.role) !== -1 || !auth.isMainAdmin()" ng-model="user.school.id" ng-required="noSchool.indexOf(user.role) === -1" type="school"></hois-select> </md-input-container> <md-input-container flex> <label>{{\'user.role\' | translate}}</label> <hois-classifier-select ng-model="user.role" filter-values="filterValues" ng-change="roleChanged()" main-classifier-code="ROLL" model-value-attr="code" required></hois-classifier-select> </md-input-container> <div layout="row"> <md-input-container flex="15"> <label>{{\'user.validFrom\' | translate}}</label> <md-datepicker ng-model="user.validFrom" md-max-date="user.validThru" required md-open-on-focus></md-datepicker> </md-input-container> <md-input-container flex> <label>{{\'user.validThru\' | translate}}</label> <md-datepicker ng-model="user.validThru" md-min-date="user.validFrom" md-open-on-focus></md-datepicker> </md-input-container> </div> </div> <div> <div flex> <md-table-container> <table md-table ng-show="user.role"> <thead md-head> <tr md-row> <th md-column>{{\'user.rights.right\' | translate}}</th> <th md-column ng-repeat="perm in permissions"> <md-checkbox ng-model="multiSelects[perm.code]" ng-change="multiSelectPermission(perm.code, multiSelects[perm.code])" aria-label="{{currentLanguageNameField(perm)}}" flex>{{currentLanguageNameField(perm)}}</md-checkbox> </th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="object in objectsForRole | orderBy: currentLanguageNameField()" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell>{{currentLanguageNameField(object)}}</td> <td md-cell ng-repeat="perm in permissions"> <md-checkbox ng-if="showPermission(object.code, perm.code)" ng-model="(rights[object.code] || {})[perm.code]" aria-label="{{currentLanguageNameField(object)+\' \'+currentLanguageNameField(perm)}}" flex></md-checkbox> </td> </tr> </tbody> </table> </md-table-container> </div> </div> <md-button ng-click="update()" class="md-raised md-primary">{{\'main.button.save\' | translate}}</md-button> <md-button ng-if="user.id" ng-click="delete()" class="md-raised">{{\'main.button.delete\' | translate}}</md-button> <md-button ng-click="back(\'#/persons/{{user.person.id}}/edit\')" class="md-raised">{{\'main.button.back\' | translate}}</md-button> </form> </div>'),a.put("persons/users.table.html","<table md-table class=\"secondary-table\"> <thead md-head> <tr md-row> <th ng-if=\"auth.isMainAdmin()\" md-column>{{'school.label' | translate}}</th> <th md-column>{{'user.role' | translate}}</th> <th md-column>{{'main.status' | translate}}</th> <th md-column></th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat=\"user in users | orderBy: orderValue\" ng-class-odd=\"'odd'\" ng-class-even=\"'even'\"> <td ng-if=\"auth.isMainAdmin()\" md-cell>{{currentLanguageNameField(user.school)}}</td> <td md-cell><a ng-href=\"#/persons/{{::person.id}}/users/{{::user.id}}\">{{currentLanguageNameField(user.role)}}</a></td> <td md-cell>{{user.valid ? 'main.valid' : 'main.invalid' | translate }}</td> <td md-cell><md-button ng-if=\"user.role.code !== 'ROLL_T' && user.role.code !== 'ROLL_L' && isAuthorized('ROLE_OIGUS_M_TEEMAOIGUS_KASUTAJA')\" class=\"md-primary change-button\" ng-href=\"#/persons/{{::person.id}}/users/{{::user.id}}/edit\">{{'main.button.change' | translate}}</md-button></td> </tr> </tbody> </table>"),a.put("persons/users.view.html",'<div class="ois-form-layout-padding form-readonly" layout="column" ng-cloak> <form name="userForm" class="ois-form-layout"> <div layout="column" flex> <div layout="row" flex> <md-input-container flex> <label>{{\'person.name\' | translate}}</label> <hois-value value="user.person.fullname"></hois-value> </md-input-container> <md-input-container flex> <label>{{\'person.idcode\' | translate}}</label> <hois-value value="user.person.idcode"></hois-value> </md-input-container> </div> <md-input-container flex> <label>{{\'school.label\' | translate}}</label> <hois-value value="currentLanguageNameField(user.school)"></hois-value> </md-input-container> <md-input-container flex> <label>{{\'user.role\' | translate}}</label> <hois-classifier-value ng-model="user.role" main-classifier-code="ROLL"></hois-classifier-value> </md-input-container> <md-input-container flex> <label>{{\'user.validFrom\' | translate}}</label> <hois-value value="user.validFrom | hoisDate"></hois-value> </md-input-container> <md-input-container flex> <label>{{\'user.validThru\' | translate}}</label> <hois-value value="user.validThru | hoisDate"></hois-value> </md-input-container> </div> <div layout-padding> <div flex> <md-table-container> <table md-table ng-show="user.role" class="secondary-table"> <thead md-head> <tr md-row> <th md-column>{{\'user.rights.right\' | translate}}</th> <th md-column ng-repeat="perm in permissions">{{currentLanguageNameField(perm)}}</th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="object in objects | orderBy: currentLanguageNameField()" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell>{{currentLanguageNameField(object)}}</td> <td md-cell ng-repeat="perm in permissions">{{showPermission(object.code, perm.code) ? ((user.rights[object.code] || []).indexOf(perm.code) !== -1 ? \'main.yes\' : \'main.no\' | translate) : \'\'}}</td> </tr> </tbody> </table> </md-table-container> </div> </div> <md-button ng-if="user.role !== \'ROLL_T\' && user.role !== \'ROLL_L\' && isAuthorized(\'ROLE_OIGUS_M_TEEMAOIGUS_KASUTAJA\')" ng-href="#/persons/{{user.person.id}}/users/{{user.id}}/edit?_noback" class="md-raised md-primary">{{\'main.button.change\' | translate}}</md-button> <md-button ng-click="back(\'#/persons/\' + user.person.id)" class="md-raised">{{\'main.button.back\' | translate}}</md-button> </form> </div>'),a.put("practiceJournal/practice.journal.edit.html",'<div class="ois-form-layout-padding" ng-cloak> <div flex> <form name="practiceJournalForm" ng-submit="practiceJournalForm.$valid && save()" novalidate layout="column"> <div flex> <hois-autocomplete ng-model="practiceJournal.student" method="students" additional-query-params="{active: true, higher: formState.isHigher}" name="student" label="student.label" required></hois-autocomplete> </div> <div ng-if="practiceJournal.student && formState.student" class="form-readonly" layout="column"> <br> <div layout="row" flex> <md-input-container flex> <label>{{\'student.name\' | translate}}</label> <hois-value value="formState.student.person.firstname + \' \' + formState.student.person.lastname"></hois-value> </md-input-container> <md-input-container flex> <label>{{\'student.idcode\' | translate}}</label> <hois-value value="formState.student.person.idcode"></hois-value> </md-input-container> <md-input-container flex> <label>{{\'student.schoolEmail\' | translate}}</label> <hois-value value="formState.student.schoolEmail"></hois-value> </md-input-container> <md-input-container flex> <label>{{\'student.course\' | translate}}</label> <hois-value value="formState.student.course"></hois-value> </md-input-container> </div> <div layout="row" flex> <md-input-container flex> <label>{{\'student.curriculum\' | translate}}</label> <hois-value value="currentLanguageNameField(formState.student.curriculumVersion)"></hois-value> </md-input-container> <md-input-container flex> <label>{{\'student.studyForm\' | translate}}</label> <hois-value value="currentLanguageNameField(formState.student.studyForm)"></hois-value> </md-input-container> </div> </div> <div ng-if="!formState.isHigher" layout="row" layout-sm="column" layout-xs="column" flex="50"> <md-input-container flex> <label class="textInput">{{\'module.practice\' | translate}}</label> <hois-select ng-model="practiceJournal.module" values="formState.modules" ng-change="moduleChanged(practiceJournal.module)" required></hois-select> </md-input-container> <md-input-container flex flex-offset-gt-md="5"> <label class="textInput">{{\'practiceJournal.theme\' | translate}}</label> <hois-select ng-model="practiceJournal.theme" values="formState.themes" ng-change="themeChanged(practiceJournal.theme)"></hois-select> </md-input-container> <md-input-container flex="10" flex-sm="100" flex-xs="100" flex-offset-gt-md="5"> <label class="textInput">{{practiceJournal.isHigher ? \'practiceJournal.creditsEAP\' : \'practiceJournal.creditsEKAP\' | translate}}</label> <input type="number" ng-model="practiceJournal.credits" min="0" max="999.9" required> </md-input-container> <md-input-container flex="10" flex-sm="100" flex-xs="100"> <label class="textInput">{{\'practiceJournal.hours\' | translate}}</label> <input type="number" ng-model="practiceJournal.hours" min="0" max="32767" required> </md-input-container> </div> <div ng-if="formState.isHigher" layout="row" layout-sm="column" layout-xs="column" flex="50"> <md-input-container flex> <label class="textInput">{{\'practiceJournal.subject\' | translate}}</label> <hois-select ng-model="practiceJournal.subject" values="formState.subjects" ng-change="subjectChanged(practiceJournal.subject)"></hois-select> </md-input-container> <md-input-container flex="10" flex-sm="100" flex-xs="100" flex-offset-gt-md="5"> <label class="textInput">{{practiceJournal.isHigher ? \'practiceJournal.creditsEAP\' : \'practiceJournal.creditsEKAP\' | translate}}</label> <input type="number" ng-model="practiceJournal.credits" min="0" max="999.9" required> </md-input-container> <md-input-container flex="10" flex-sm="100" flex-xs="100"> <label class="textInput">{{\'practiceJournal.hours\' | translate}}</label> <input type="number" ng-model="practiceJournal.hours" min="0" max="32767" required> </md-input-container> </div> <div layout="row" flex> <md-input-container> <label>{{\'practiceJournal.startDate\' | translate}}</label> <md-datepicker ng-model="practiceJournal.startDate" required></md-datepicker> </md-input-container> <md-input-container> <label>{{\'practiceJournal.endDate\' | translate}}</label> <md-datepicker ng-model="practiceJournal.endDate" md-min-date="practiceJournal.startDate" required></md-datepicker> </md-input-container> </div> <div layout="row" flex> <md-input-container flex> <label class="textInput">{{\'practiceJournal.practicePlace\' | translate}}</label> <input type="text" ng-model="practiceJournal.practicePlace" md-maxlength="255" required> </md-input-container> </div> <div layout="row" flex> <md-input-container flex> <label class="textInput">{{\'practiceJournal.schoolSupervisor\' | translate}}</label> <hois-select ng-model="practiceJournal.teacher" type="teacher" criteria="{valid: true}" required></hois-select> </md-input-container> </div> <div layout="row" flex> <md-input-container flex> <label class="textInput">{{\'practiceJournal.practicePlan\' | translate}}</label> <textarea ng-model="practiceJournal.practicePlan" required md-maxlength="20000" max-rows="2"></textarea> </md-input-container> </div> <div layout="row"> <md-button class="md-raised md-primary" type="submit">{{\'main.button.save\' | translate}}</md-button> <md-button ng-if="practiceJournal.id && practiceJournal.canDelete" class="md-raised md-default" ng-click="delete()">{{\'main.button.delete\' | translate}}</md-button> <md-button class="md-raised md-default" ng-click="back(\'#/practiceJournals/\', practiceJournalForm)">{{\'main.button.back\' | translate}}</md-button> </div> </form> </div> </div>'),a.put("practiceJournal/practice.journal.entry.add.file.dialog.html",'<md-dialog aria-label="file select dialog" flex="40" flex-xs="100"> <form name="dialogForm" ng-cloak> <md-toolbar> <div class="md-toolbar-tools"> <h2>{{"main.button.uploadFile" | translate}}</h2> <span flex></span> <md-button class="md-icon-button" ng-click="cancel()"> <md-icon md-font-set="material-icons">close</md-icon> </md-button> </div> </md-toolbar> <md-dialog-content> <span flex></span> <div class="ois-form-layout" layout="column" layout-margin ng-cloak> <div layout="column"> <md-input-container flex> <lf-ng-md-file-input name="file" lf-files="data.file" lf-browse-label="{{\'main.button.uploadFile\' | translate}}" lf-remove-label="{{\'main.button.delete\' | translate}}" lf-placeholder="" lf-filesize="5MB" disallow-same-file="addedFiles" lf-required> </lf-ng-md-file-input> </md-input-container> <div ng-messages="dialogForm.file.$error"> <div class="invalid" ng-message="required">{{\'main.messages.error.selectFile\' | translate}}</div> <div class="invalid" ng-message="filesize">{{\'main.messages.error.fileTooLarge\' | translate}} 5MB!</div> <div class="invalid" ng-message="samefile">{{\'main.messages.error.fileAlreadyExists\' | translate}}</div> </div> </div> </div> </md-dialog-content> <span flex></span> <md-dialog-actions layout="row" layout-align="start center"> <md-button class="md-raised md-primary" ng-click="submit()">{{"main.button.add" | translate}}</md-button> <md-button class="md-raised" ng-click="cancel()">{{"main.button.close" | translate}}</md-button> </md-dialog-actions> </form> </md-dialog>'),a.put("practiceJournal/practice.journal.entry.html",'<div class="ois-form-layout-padding" ng-cloak> <div flex> <form name="practiceJournalEntryForm" ng-submit="save()" novalidate layout="column"> <div class="form-readonly" layout="column"> <br> <div ng-if="!auth.isStudent()" layout="row" flex> <md-input-container class="label-only" flex> <label>{{\'student.label\' | translate}}</label> <hois-value value="practiceJournal.student.nameEt" href-value="\'#/students/\' + practiceJournal.student.id + \'/main\'"></hois-value> </md-input-container> <md-input-container flex> <label>{{\'student.curriculum\' | translate}}</label> <hois-value value="currentLanguageNameField(practiceJournal.studentCurriculumVersion)"></hois-value> </md-input-container> <md-input-container flex> <label>{{\'student.studyForm\' | translate}}</label> <hois-classifier-value ng-model="practiceJournal.studentStudyForm" main-classifier-code="OPPEVORM"></hois-classifier-value> </md-input-container> <br> </div> <div ng-if="!practiceJournal.subject" layout="row" flex> <md-input-container flex> <label>{{\'practiceJournal.module\' | translate}}</label> <hois-value value="currentLanguageNameField(practiceJournal.module)"></hois-value> </md-input-container> <md-input-container flex> <label>{{\'practiceJournal.theme\' | translate}}</label> <hois-value value="currentLanguageNameField(practiceJournal.theme)"></hois-value> </md-input-container> <md-input-container flex> <label>{{practiceJournal.isHigher ? \'practiceJournal.creditsEAP\' : \'practiceJournal.creditsEKAP\' | translate}}</label> <hois-value value="practiceJournal.credits"></hois-value> </md-input-container> <md-input-container flex> <label>{{\'practiceJournal.hours\' | translate}}</label> <hois-value value="practiceJournal.hours"></hois-value> </md-input-container> </div> <div ng-if="practiceJournal.subject" layout="row" flex> <md-input-container flex> <label>{{\'practiceJournal.subject\' | translate}}</label> <hois-value value="currentLanguageNameField(practiceJournal.subject)"></hois-value> </md-input-container> <md-input-container flex> <label>{{practiceJournal.isHigher ? \'practiceJournal.creditsEAP\' : \'practiceJournal.creditsEKAP\' | translate}}</label> <hois-value value="practiceJournal.credits"></hois-value> </md-input-container> <md-input-container flex> <label>{{\'practiceJournal.hours\' | translate}}</label> <hois-value value="practiceJournal.hours"></hois-value> </md-input-container> </div> <div layout="row" flex> <md-input-container flex> <label>{{\'enterprise.label\' | translate}}</label> <hois-value value="currentLanguageNameField(practiceJournal.contract.enterprise)"></hois-value> </md-input-container> <md-input-container flex> <label>{{\'enterprise.supervisor\' | translate}}</label> <hois-value value="practiceJournal.contract.supervisorName"></hois-value> </md-input-container> </div> <div layout="row" flex> <md-input-container flex> <label>{{\'practiceJournal.startDate\' | translate}}</label> <hois-value value="practiceJournal.startDate | hoisDate"></hois-value> </md-input-container> <md-input-container flex> <label>{{\'practiceJournal.endDate\' | translate}}</label> <hois-value value="practiceJournal.endDate | hoisDate"></hois-value> </md-input-container> <md-input-container flex> <label>{{\'practiceJournal.practicePlace\' | translate}}</label> <hois-value value="practiceJournal.practicePlace"></hois-value> </md-input-container> <md-input-container flex> <label>{{\'practiceJournal.schoolSupervisor\' | translate}}</label> <hois-value value="currentLanguageNameField(practiceJournal.teacher)"></hois-value> </md-input-container> </div> </div> <div flex> <div layout="row" flex> <md-button class="md-primary" ng-click="addNewEntryRow()" ng-if="auth.isStudent()">{{\'main.button.addNewRow\' | translate}}</md-button> </div> <md-table-container> <table md-table md-progress="entries.$promise"> <thead md-head md-on-reorder="loadEntries"> <tr md-row flex> <th md-column>{{\'practiceJournal.practiceJournalEntry.practiceDate\' | translate}}</th> <th md-column>{{\'practiceJournal.practiceJournalEntry.description\' | translate}}</th> <th md-column>{{\'practiceJournal.practiceJournalEntry.hours\' | translate}}</th> <th md-column>{{\'practiceJournal.practiceJournalEntry.supervisorComment\' | translate}}</th> <th md-column>{{\'practiceJournal.practiceJournalEntry.teacherComment\' | translate}}</th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="row in practiceJournal.practiceJournalEntries | orderBy: \'practiceDate\'" ng-class-odd="\'odd\'" ng-class-even="\'even\'" md-colors="{background: getEntryColor(row)}"> <td md-cell> <md-input-container ng-show="row.isStudentEntry && auth.isStudent()"> <md-datepicker ng-model="row.practiceDate" md-min-date="practiceJournal.startDate" md-max-date="practiceJournal.endDate" required aria-label="{{\'practiceJournal.practiceJournalEntry.practiceDate\' | translate}}"></md-datepicker> </md-input-container> <div ng-if="!(row.isStudentEntry && auth.isStudent())"> <hois-value value="row.practiceDate | hoisDate"></hois-value> </div> </td> <td md-cell> <md-input-container ng-if="row.isStudentEntry && auth.isStudent()"> <input ng-model="row.description" type="text" aria-label="{{\'practiceJournal.practiceJournalEntry.description\' | translate}}" md-maxlength="10000"> </md-input-container> <div ng-if="!(row.isStudentEntry && auth.isStudent())"> <hois-value value="row.description"></hois-value> </div> </td> <td md-cell> <md-input-container ng-if="row.isStudentEntry && auth.isStudent()"> <input ng-model="row.hours" type="number" aria-label="{{\'practiceJournal.practiceJournalEntry.hours\' | translate}}" min="0" max="24" name="hours" step="1" pattern="^\\d+$"> <div ng-messages="practiceJournalEntryForm.hours.$error" ng-show="practiceJournalEntryForm.hours.$dirty"> <div ng-message="min"> {{\'practiceJournal.practiceJournalEntry.error.hoursNegative\' | translate}} </div> <div ng-message="max"> {{\'practiceJournal.practiceJournalEntry.error.hourTooLarge\' | translate}} </div> <div ng-message="pattern"> {{\'main.messages.error.integer\' | translate}} </div> </div> </md-input-container> <div ng-if="!(row.isStudentEntry && auth.isStudent())"> <hois-value value="row.hours"></hois-value> </div> </td> <td md-cell> <hois-value value="row.supervisorComment"></hois-value> </td> <td md-cell> <md-input-container ng-if="auth.isTeacher()"> <input ng-model="row.teacherComment" type="text" aria-label="{{\'practiceJournal.practiceJournalEntry.teacherComment\' | translate}}" md-maxlength="10000"> </md-input-container> <div ng-if="!auth.isTeacher()"> <hois-value value="row.teacherComment"></hois-value> </div> </td> </tr> </tbody> </table> </md-table-container> </div> <br> <div ng-if="auth.isStudent()" layout="row" flex> <md-input-container flex> <label>{{\'practiceJournal.myPracticeReport\' | translate}}</label> <textarea ng-model="practiceJournal.practiceReport" md-maxlength="10000" max-rows="5"></textarea> </md-input-container> </div> <div ng-if="!auth.isStudent()" class="form-readonly" layout="row"> <md-input-container flex> <label>{{\'practiceJournal.myPracticeReport\' | translate}}</label> <hois-value value="practiceJournal.practiceReport"></hois-value> </md-input-container> </div> <div ng-if="!auth.isStudent()" layout="row" flex> <md-input-container flex> <label>{{\'practiceJournal.teacherComment\' | translate}}</label> <textarea ng-model="practiceJournal.teacherComment" md-maxlength="10000" max-rows="5"></textarea> </md-input-container> </div> <br> <div class="form-readonly" layout="row"> <md-input-container flex> <label>{{\'practiceJournal.supervisorComment\' | translate}}</label> <hois-value value="practiceJournal.supervisorComment"></hois-value> </md-input-container> </div> <div layout="column" flex> <fieldset> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'practiceJournal.supervisorOpinionFile\' | translate}}</legend> <md-button ng-if="!auth.isStudent()" class="md-raised" href="" ng-click="openAddFileDialog()">{{\'main.button.uploadFile\' | translate}}</md-button> <table md-table class="secondary-table"> <thead md-head> <tr md-row> <th md-column><span>{{\'file.nameAndFile\' | translate}}</span></th> <th md-column><span>{{\'file.additionDate\' | translate}}</span></th> <th md-column>{{\'file.addedBy\' | translate}}</th> <th md-column ng-if="!auth.isStudent()"></th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="file in practiceJournal.practiceJournalFiles | orderBy: \'id\'" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell> {{file.oisFile.fname}} <a ng-href="{{getUrl(file.oisFile, \'practicejournal\')}}" target="_blank" rel="noopener noreferrer"> <md-icon md-font-set="material-icons">file_download</md-icon> </a> </td> <td md-cell> {{file.inserted | hoisDateTime}} </td> <td md-cell> {{file.insertedBy}} </td> <td md-cell ng-if="!auth.isStudent()"> <md-button class="remove nomargin" ng-click="deleteFile(file)">&times;</md-button> </td> </tr> </tbody> </table> </fieldset> </div> <br> <div ng-if="auth.isStudent()" class="form-readonly" layout="row"> <md-input-container flex> <label>{{\'practiceJournal.teacherOpinion\' | translate}}</label> <hois-value value="practiceJournal.teacherOpinion"></hois-value> </md-input-container> </div> <div ng-if="!auth.isStudent()" layout="row"> <md-input-container flex> <label>{{\'practiceJournal.teacherOpinion\' | translate}}</label> <input ng-model="practiceJournal.teacherOpinion" type="text" md-maxlength="10000"> </md-input-container> </div> <br> <div class="form-readonly" layout="row"> <md-input-container flex> <label>{{\'practiceJournal.supervisorOpinion\' | translate}}</label> <hois-value value="practiceJournal.supervisorOpinion"></hois-value> </md-input-container> </div> <div ng-if="!auth.isStudent()" layout="row"> <md-input-container> <label class="textInput">{{\'practiceJournal.grade\' | translate}}</label> <hois-classifier-select ng-if="practiceJournal.subject" ng-model="practiceJournal.grade" main-classifier-code="KORGHINDAMINE" model-value-attr="code"></hois-classifier-select> <hois-classifier-select ng-if="!practiceJournal.subject" ng-model="practiceJournal.grade" main-classifier-code="KUTSEHINDAMINE" model-value-attr="code"></hois-classifier-select> </md-input-container> </div> <br> <div layout="row"> <md-button class="md-raised md-primary" type="submit">{{\'main.button.save\' | translate}}</md-button> <md-button class="md-raised md-default" ng-click="back(\'#/practiceJournals/\', practiceJournalEntryForm)">{{\'main.button.back\' | translate}}</md-button> </div> </form> <br> <div flex> <hois-collapsable label="(\'contract.practicePlan\' | translate)" expanded="false"> <div> {{practiceJournal.contract.practicePlan}} </div> </hois-collapsable> </div> </div> </div>'),
a.put("practiceJournal/practice.journal.list.html",'<div class="ois-form-layout-padding ois-form-layout" ng-cloak> <div flex> <fieldset> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'main.searchlabel\' | translate}}</legend> <form ng-if="auth.isStudent() || auth.isParent()" name="searchForm" ng-submit="searchForm.$valid && loadData()" novalidate class="nomargin"> <div layout="row" layout-sm="column" layout-xs="column"> <div flex="100" flex-sm="100" flex-xs="100"> <div layout="column" flex> <md-input-container> <label class="textInput">{{\'studyYear.label\' | translate}}</label> <hois-select ng-model="criteria.studyYear" type="studyyear" select-current-study-year required autofocus></hois-select> </md-input-container> </div> </div> </div> <div layout="row"> <md-button type="submit" class="md-raised md-primary">{{\'main.button.search\' | translate}}</md-button> </div> <div flex-xs="0" flex-gt-xs="0" flex-gt-sm="50"></div> </form> <form ng-if="!auth.isStudent() && !auth.isParent()" name="searchForm" ng-submit="searchForm.$valid && loadData()" novalidate class="nomargin"> <div layout="row" layout-sm="column" layout-xs="column"> <div flex="45" flex-sm="100" flex-xs="100"> <div layout="column" flex> <md-input-container> <label class="textInput">{{\'studyYear.label\' | translate}}</label> <hois-select ng-model="criteria.studyYear" type="studyyear" select-current-study-year required autofocus></hois-select> </md-input-container> </div> </div> <div flex="45" flex-sm="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <div layout="column" flex> <md-input-container> <label class="textInput">{{\'studentGroup.label\' | translate}}</label> <hois-select ng-model="criteria.studentGroup" type="studentgroup" criteria="{valid: true}"></hois-select> </md-input-container> </div> </div> </div> <div layout="row" layout-sm="column" layout-xs="column" ng-if="!auth.isStudent()"> <div layout="column" flex="95" flex-sm="100"> <div layout="column" flex> <md-input-container> <label class="textInput">{{\'student.label\' | translate}}</label> <input ng-model="criteria.studentName" type="text"> </md-input-container> </div> </div> </div> <div layout="row" layout-sm="column" layout-xs="column"> <div flex="45" flex-sm="100" flex-xs="100"> <div layout="column" flex> <md-input-container> <label class="textInput">{{\'contract.curriculumVersion\' | translate}}</label> <hois-select ng-model="criteria.curriculumVersion" type="curriculumversion"></hois-select> </md-input-container> </div> </div> <div ng-if="!auth.isTeacher()" flex="45" flex-sm="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <div layout="column" flex> <md-input-container> <label class="textInput">{{\'contract.schoolSupervisor\' | translate}}</label> <hois-select ng-model="criteria.teacher" type="teacher"></hois-select> </md-input-container> </div> </div> </div> <div layout="row"> <md-button type="submit" class="md-raised md-primary">{{\'main.button.search\' | translate}}</md-button> <md-button class="md-raised" ng-click="clearCriteria()">{{\'main.button.clear\' | translate}}</md-button> <md-button ng-if="formState.canCreate && isAuthorized(\'ROLE_OIGUS_M_TEEMAOIGUS_PRAKTIKAPAEVIK\')" class="md-raised" ng-click="newPracticeJournal()">{{\'practiceJournal.button.createWithoutContract\' | translate}}</md-button> </div> <div flex-xs="0" flex-gt-xs="0" flex-gt-sm="50"></div> </form> </fieldset> </div> </div> <div layout-padding> <div flex> <md-table-container> <table md-table md-progress="tabledata.$promise"> <thead md-head md-order="criteria.order" md-on-reorder="loadData"> <tr md-row> <th md-column md-order-by="student_person.lastname,student_person.firstname">{{\'student.label\' | translate}}</th> <th md-column>{{\'studentGroup.label\' | translate}}</th> <th md-column ng-if="auth.school.vocational">{{\'practiceJournal.moduleAndTheme\' | translate}}</th> <th md-column ng-if="auth.school.higher">{{\'practiceJournal.subject\' | translate}}</th> <th md-column>{{\'practiceJournal.practiceStartAndEnd\' | translate}}</th> <th md-column>{{\'enterprise.label\' | translate}}</th> <th md-column>{{\'enterprise.supervisor\' | translate}}</th> <th md-column>{{\'practiceJournal.practicePlace\' | translate}}</th> <th md-column ng-if="auth.isAdmin()">{{\'practiceJournal.schoolSupervisor\' | translate}}</th> <th md-column>{{\'practiceJournal.studentLastEntryDate\' | translate}}</th> <th md-column></th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="row in tabledata.content" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell><a ng-href="/#/practiceJournals/{{::row.id}}/view">{{currentLanguageNameField(row.student)}}</a></td> <td md-cell>{{row.studentGroup}}</td> <td md-cell ng-if="auth.school.vocational">{{(row.module || row.theme) ? (currentLanguageNameField(row.module) + \' \' + currentLanguageNameField(row.theme)) : \'-\'}}</td> <td md-cell ng-if="auth.school.higher">{{row.subject ? currentLanguageNameField(row.subject) : \'-\'}}</td> <td md-cell>{{row.startDate | hoisDate}} - {{row.endDate | hoisDate}}</td> <td md-cell>{{row.enterpriseName}}</td> <td md-cell>{{row.enterpriseContactPersonName}}</td> <td md-cell>{{row.practicePlace}}</td> <td md-cell ng-if="auth.isAdmin()">{{currentLanguageNameField(row.teacher)}}</td> <td md-cell>{{row.studentLastEntryDate | hoisDate}}</td> <td md-cell> <div layout="column"> <md-button ng-if="row.canAddEntries" md-no-ink class="md-primary change-button" ng-href="#/practiceJournals/{{::row.id}}/entries/edit">{{\'practiceJournal.button.fill\' | translate}}</md-button> <md-button ng-if="row.canEdit && (auth.isTeacher() || (auth.isAdmin() && isAuthorized(\'ROLE_OIGUS_M_TEEMAOIGUS_PRAKTIKAPAEVIK\')))" md-no-ink class="md-primary change-button" ng-href="#/practiceJournals/{{::row.id}}/edit">{{\'main.button.change\' | translate}}</md-button> </div> </td> </tr> </tbody> </table> </md-table-container> <md-table-pagination md-limit="criteria.size" md-limit-options="[10, 20, 50]" md-page="criteria.page" md-total="{{tabledata.totalElements}}" md-on-paginate="loadData" md-label="{page: \'{{\'main.page\' | translate}}:\', rowsPerPage: \'{{\'main.rowPerPage\' | translate}}:\', of: \'{{\'main.of\' | translate}}\'}" md-page-select></md-table-pagination> </div> </div>'),a.put("practiceJournal/practice.journal.student.list.html","<div layout-padding> <div flex> <md-table-container> <table md-table md-progress=\"tabledata.$promise\"> <thead md-head md-order=\"criteria.order\" md-on-reorder=\"loadData\"> <tr md-row> <th md-column>{{'student.label' | translate}}</th> <th md-column>{{'studentGroup.label' | translate}}</th> <th md-column ng-if=\"auth.school.vocational\">{{'practiceJournal.moduleAndTheme' | translate}}</th> <th md-column ng-if=\"auth.school.higher\">{{'practiceJournal.subject' | translate}}</th> <th md-column>{{'practiceJournal.practiceStartAndEnd' | translate}}</th> <th md-column>{{'enterprise.label' | translate}}</th> <th md-column>{{'enterprise.supervisor' | translate}}</th> <th md-column>{{'practiceJournal.practicePlace' | translate}}</th> <th md-column>{{'practiceJournal.schoolSupervisor' | translate}}</th> <th md-column>{{'practiceJournal.studentLastEntryDate' | translate}}</th> <th md-column></th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat=\"row in tabledata.content\" ng-class-odd=\"'odd'\" ng-class-even=\"'even'\"> <td md-cell><a ng-href=\"/#/practiceJournals/{{::row.id}}/view\">{{currentLanguageNameField(row.student)}}</a></td> <td md-cell>{{row.studentGroup}}</td> <td md-cell ng-if=\"auth.school.vocational\">{{(row.module || row.theme) ? (currentLanguageNameField(row.module) + ' ' + currentLanguageNameField(row.theme)) : '-'}}</td> <td md-cell ng-if=\"auth.school.higher\">{{row.subject ? currentLanguageNameField(row.subject) : '-'}}</td> <td md-cell>{{row.startDate | hoisDate}} - {{row.endDate | hoisDate}}</td> <td md-cell>{{row.enterpriseName}}</td> <td md-cell>{{row.enterpriseContactPersonName}}</td> <td md-cell>{{row.practicePlace}}</td> <td md-cell>{{currentLanguageNameField(row.teacher)}}</td> <td md-cell>{{row.studentLastEntryDate | hoisDate}}</td> <td md-cell> <md-button ng-if=\"(auth.isStudent() && row.canStudentAddEntries) || (auth.isTeacher() && row.canTeacherAddEntries)\" md-no-ink class=\"md-primary change-button\" ng-href=\"#/practiceJournals/{{::row.id}}/entries/edit\">{{'practiceJournal.button.fill' | translate}}</md-button> </td> </tr> </tbody> </table> </md-table-container> <md-table-pagination md-limit=\"criteria.size\" md-limit-options=\"[10, 20, 50]\" md-page=\"criteria.page\" md-total=\"{{tabledata.totalElements}}\" md-on-paginate=\"loadData\" md-label=\"{page: '{{'main.page' | translate}}:', rowsPerPage: '{{'main.rowPerPage' | translate}}:', of: '{{'main.of' | translate}}'}\" md-page-select></md-table-pagination> </div> </div>"),a.put("practiceJournal/practice.journal.supervisor.entry.html",'<div class="ois-form-layout-padding" ng-cloak> <div flex> <form name="practiceJournalEntryForm" ng-submit="practiceJournalEntryForm.$valid && save()" novalidate layout="column"> <div class="form-readonly" layout="column"> <br> <div layout="row" flex> <md-input-container class="label-only" flex> <label>{{\'student.label\' | translate}}</label> <hois-value value="practiceJournal.student.nameEt"></hois-value> </md-input-container> <md-input-container flex> <label>{{\'practiceJournal.school\' | translate}}</label> <hois-value value="currentLanguageNameField(practiceJournal.school)"></hois-value> </md-input-container> <md-input-container flex> <label>{{\'student.curriculum\' | translate}}</label> <hois-value value="currentLanguageNameField(practiceJournal.studentCurriculumVersion)"></hois-value> </md-input-container> <md-input-container flex> <label>{{\'student.studyForm\' | translate}}</label> <hois-classifier-value ng-model="practiceJournal.studentStudyForm" main-classifier-code="OPPEVORM"></hois-classifier-value> </md-input-container> <br> </div> <div ng-if="!practiceJournal.subject" layout="row" flex> <md-input-container flex> <label>{{\'practiceJournal.module\' | translate}}</label> <hois-value value="currentLanguageNameField(practiceJournal.module)"></hois-value> </md-input-container> <md-input-container flex> <label>{{\'practiceJournal.theme\' | translate}}</label> <hois-value value="currentLanguageNameField(practiceJournal.theme)"></hois-value> </md-input-container> <md-input-container flex> <label>{{practiceJournal.isHigher ? \'practiceJournal.creditsEAP\' : \'practiceJournal.creditsEKAP\' | translate}}</label> <hois-value value="practiceJournal.credits"></hois-value> </md-input-container> <md-input-container flex> <label>{{\'practiceJournal.hours\' | translate}}</label> <hois-value value="practiceJournal.hours"></hois-value> </md-input-container> </div> <div ng-if="practiceJournal.subject" layout="row" flex> <md-input-container flex="50"> <label>{{\'practiceJournal.subject\' | translate}}</label> <hois-value value="currentLanguageNameField(practiceJournal.subject)"></hois-value> </md-input-container> <md-input-container flex> <label>{{practiceJournal.isHigher ? \'practiceJournal.creditsEAP\' : \'practiceJournal.creditsEKAP\' | translate}}</label> <hois-value value="practiceJournal.credits"></hois-value> </md-input-container> <md-input-container flex> <label>{{\'practiceJournal.hours\' | translate}}</label> <hois-value value="practiceJournal.hours"></hois-value> </md-input-container> </div> <div layout="row" flex> <md-input-container flex> <label>{{\'enterprise.label\' | translate}}</label> <hois-value value="currentLanguageNameField(practiceJournal.contract.enterprise)"></hois-value> </md-input-container> <md-input-container flex> <label>{{\'enterprise.supervisor\' | translate}}</label> <hois-value value="practiceJournal.contract.supervisorName"></hois-value> </md-input-container> </div> <div layout="row" flex> <md-input-container flex="25"> <label>{{\'practiceJournal.startDate\' | translate}}</label> <hois-value value="practiceJournal.startDate | hoisDate"></hois-value> </md-input-container> <md-input-container flex="25"> <label>{{\'practiceJournal.endDate\' | translate}}</label> <hois-value value="practiceJournal.endDate | hoisDate"></hois-value> </md-input-container> <md-input-container flex="50"> <label>{{\'practiceJournal.schoolSupervisor\' | translate}}</label> <hois-value value="currentLanguageNameField(practiceJournal.teacher)"></hois-value> </md-input-container> </div> </div> <div flex> <md-table-container> <table md-table md-progress="entries.$promise"> <thead md-head md-on-reorder="loadEntries"> <tr md-row flex> <th md-column>{{\'practiceJournal.practiceJournalEntry.practiceDate\' | translate}}</th> <th md-column>{{\'practiceJournal.practiceJournalEntry.description\' | translate}}</th> <th md-column>{{\'practiceJournal.practiceJournalEntry.hours\' | translate}}</th> <th md-column>{{\'practiceJournal.practiceJournalEntry.supervisorComment\' | translate}}</th> <th md-column>{{\'practiceJournal.practiceJournalEntry.teacherComment\' | translate}}</th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="row in practiceJournal.practiceJournalEntries | orderBy: \'practiceDate\'" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell> <div> <hois-value value="row.practiceDate | hoisDate"></hois-value> </div> </td> <td md-cell> <div> <hois-value value="row.description"></hois-value> </div> </td> <td md-cell> <div> <hois-value value="row.hours"></hois-value> </div> </td> <td md-cell> <md-input-container> <input ng-model="row.supervisorComment" type="text" aria-label="{{\'practiceJournal.practiceJournalEntry.supervisorComment\' | translate}}" md-maxlength="10000"> </md-input-container> </td> <td md-cell> <div> <hois-value value="row.teacherComment"></hois-value> </div> </td> </tr> </tbody> </table> </md-table-container> </div> <br><br> <div class="form-readonly" layout="row"> <md-input-container flex> <label>{{\'practiceJournal.myPracticeReport\' | translate}}</label> <hois-value value="practiceJournal.practiceReport"></hois-value> </md-input-container> </div> <div class="form-readonly" layout="row" flex> <md-input-container flex> <label>{{\'practiceJournal.teacherComment\' | translate}}</label> <hois-value value="practiceJournal.teacherComment"></hois-value> </md-input-container> </div> <div class="form-readonly" layout="row" flex> <md-input-container flex> <label>{{\'practiceJournal.supervisorComment\' | translate}}</label> <textarea ng-model="practiceJournal.supervisorComment" md-maxlength="10000" max-rows="5"></textarea> </md-input-container> </div> <div layout="column" flex> <fieldset> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'practiceJournal.supervisorOpinionFile\' | translate}}</legend> <md-button ng-if="!auth.isStudent()" class="md-raised" href="" ng-click="openAddFileDialog()">{{\'main.button.uploadFile\' | translate}}</md-button> <table md-table class="secondary-table"> <thead md-head> <tr md-row> <th md-column><span>{{\'file.nameAndFile\' | translate}}</span></th> <th md-column><span>{{\'file.additionDate\' | translate}}</span></th> <th md-column>{{\'file.addedBy\' | translate}}</th> <th md-column></th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="file in practiceJournal.practiceJournalFiles | orderBy: \'id\'" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell> {{file.oisFile.fname}} <a ng-href="{{getUrl(file.oisFile, \'practicejournal\')}}" target="_blank" rel="noopener noreferrer"> <md-icon md-font-set="material-icons">file_download</md-icon> </a> </td> <td md-cell> {{file.inserted | hoisDateTime}} </td> <td md-cell> {{file.insertedBy}} </td> <td md-cell> <md-button class="remove nomargin" ng-click="removeFromArray(practiceJournal.practiceJournalFiles, file)">&times;</md-button> </td> </tr> </tbody> </table> </fieldset> </div> <br> <div class="form-readonly" layout="row"> <md-input-container flex> <label>{{\'practiceJournal.teacherOpinion\' | translate}}</label> <hois-value value="practiceJournal.teacherOpinion"></hois-value> </md-input-container> </div> <div layout="row"> <md-input-container flex> <label>{{\'practiceJournal.supervisorOpinion\' | translate}}</label> <input ng-model="practiceJournal.supervisorOpinion" type="text" md-maxlength="10000"> </md-input-container> </div> <div layout="row"> <md-button class="md-raised md-primary" type="submit">{{\'main.button.save\' | translate}}</md-button> </div> </form> <br> <div flex> <hois-collapsable label="(\'contract.practicePlan\' | translate)" expanded="false"> <div> {{practiceJournal.contract.practicePlan}} </div> </hois-collapsable> </div> </div> </div>'),a.put("practiceJournal/practice.journal.view.html",'<div class="ois-form-layout-padding" ng-cloak> <div flex> <form name="practiceJournalEntryForm" ng-submit="practiceJournalEntryForm.$valid && save()" novalidate layout="column"> <div class="form-readonly" layout="column"> <br> <div ng-if="!auth.isStudent()" layout="row" flex> <md-input-container class="label-only" flex> <label>{{\'student.label\' | translate}}</label> <hois-value value="practiceJournal.student.nameEt" href-value="\'#/students/\' + practiceJournal.student.id + \'/main\'"></hois-value> </md-input-container> <md-input-container flex> <label>{{\'student.curriculum\' | translate}}</label> <hois-value value="currentLanguageNameField(practiceJournal.studentCurriculumVersion)"></hois-value> </md-input-container> <md-input-container flex> <label>{{\'student.studyForm\' | translate}}</label> <hois-classifier-value ng-model="practiceJournal.studentStudyForm" main-classifier-code="OPPEVORM"></hois-classifier-value> </md-input-container> <br> </div> <div ng-if="!practiceJournal.subject" layout="row" flex> <md-input-container flex> <label>{{\'practiceJournal.module\' | translate}}</label> <hois-value value="currentLanguageNameField(practiceJournal.module)"></hois-value> </md-input-container> <md-input-container flex> <label>{{\'practiceJournal.theme\' | translate}}</label> <hois-value value="currentLanguageNameField(practiceJournal.theme)"></hois-value> </md-input-container> <md-input-container flex> <label>{{practiceJournal.isHigher ? \'practiceJournal.creditsEAP\' : \'practiceJournal.creditsEKAP\' | translate}}</label> <hois-value value="practiceJournal.credits"></hois-value> </md-input-container> <md-input-container flex> <label>{{\'practiceJournal.hours\' | translate}}</label> <hois-value value="practiceJournal.hours"></hois-value> </md-input-container> </div> <div ng-if="practiceJournal.subject" layout="row" flex> <md-input-container flex> <label>{{\'practiceJournal.subject\' | translate}}</label> <hois-value value="currentLanguageNameField(practiceJournal.subject)"></hois-value> </md-input-container> <md-input-container flex> <label>{{practiceJournal.isHigher ? \'practiceJournal.creditsEAP\' : \'practiceJournal.creditsEKAP\' | translate}}</label> <hois-value value="practiceJournal.credits"></hois-value> </md-input-container> <md-input-container flex> <label>{{\'practiceJournal.hours\' | translate}}</label> <hois-value value="practiceJournal.hours"></hois-value> </md-input-container> </div> <div layout="row" flex> <md-input-container flex> <label>{{\'enterprise.label\' | translate}}</label> <hois-value value="currentLanguageNameField(practiceJournal.contract.enterprise)"></hois-value> </md-input-container> <md-input-container flex> <label>{{\'enterprise.supervisor\' | translate}}</label> <hois-value value="practiceJournal.contract.supervisorName"></hois-value> </md-input-container> </div> <div layout="row" flex> <md-input-container flex> <label>{{\'practiceJournal.startDate\' | translate}}</label> <hois-value value="practiceJournal.startDate | hoisDate"></hois-value> </md-input-container> <md-input-container flex> <label>{{\'practiceJournal.endDate\' | translate}}</label> <hois-value value="practiceJournal.endDate | hoisDate"></hois-value> </md-input-container> <md-input-container flex> <label>{{\'practiceJournal.practicePlace\' | translate}}</label> <hois-value value="practiceJournal.practicePlace"></hois-value> </md-input-container> <md-input-container flex> <label>{{\'practiceJournal.schoolSupervisor\' | translate}}</label> <hois-value value="currentLanguageNameField(practiceJournal.teacher)"></hois-value> </md-input-container> </div> </div> <div flex> <md-table-container> <table md-table md-progress="entries.$promise"> <thead md-head md-on-reorder="loadEntries"> <tr md-row flex> <th md-column>{{\'practiceJournal.practiceJournalEntry.practiceDate\' | translate}}</th> <th md-column>{{\'practiceJournal.practiceJournalEntry.description\' | translate}}</th> <th md-column>{{\'practiceJournal.practiceJournalEntry.hours\' | translate}}</th> <th md-column>{{\'practiceJournal.practiceJournalEntry.supervisorComment\' | translate}}</th> <th md-column>{{\'practiceJournal.practiceJournalEntry.teacherComment\' | translate}}</th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="row in practiceJournal.practiceJournalEntries | orderBy: \'practiceDate\'" ng-class-odd="\'odd\'" ng-class-even="\'even\'" md-colors="{background: getEntryColor(row)}"> <td md-cell> <hois-value value="row.practiceDate | hoisDate"></hois-value> </td> <td md-cell> <hois-value value="row.description"></hois-value> </td> <td md-cell> <hois-value value="row.hours"></hois-value> </td> <td md-cell> <hois-value value="row.supervisorComment"></hois-value> </td> <td md-cell> <hois-value value="row.teacherComment"></hois-value> </td> </tr> </tbody> </table> </md-table-container> </div> <br> <div class="form-readonly" layout="row"> <md-input-container flex> <label>{{\'practiceJournal.myPracticeReport\' | translate}}</label> <hois-value value="practiceJournal.practiceReport"></hois-value> </md-input-container> </div> <div class="form-readonly" layout="row" flex> <md-input-container flex> <label>{{\'practiceJournal.teacherComment\' | translate}}</label> <hois-value value="practiceJournal.teacherComment"></hois-value> </md-input-container> </div> <div class="form-readonly" layout="row"> <md-input-container flex> <label>{{\'practiceJournal.supervisorComment\' | translate}}</label> <hois-value value="practiceJournal.supervisorComment"></hois-value> </md-input-container> </div> <br> <div layout="row"> <md-button class="md-raised md-default" ng-click="back(\'#/practiceJournals/\')">{{\'main.button.back\' | translate}}</md-button> <md-button ng-show="practiceJournal.canDelete" class="md-raised md-default" ng-click="delete()">{{\'main.button.delete\' | translate}}</md-button> </div> <br> </form> <div layout="column" flex> <fieldset> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'practiceJournal.supervisorOpinionFile\' | translate}}</legend> <table md-table class="secondary-table"> <thead md-head> <tr md-row> <th md-column> <span>{{\'file.nameAndFile\' | translate}}</span> </th> <th md-column> <span>{{\'file.additionDate\' | translate}}</span> </th> <th md-column>{{\'file.addedBy\' | translate}}</th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="file in practiceJournal.practiceJournalFiles | orderBy: \'id\'" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell> {{file.oisFile.fname}} <a ng-href="{{getUrl(file.oisFile, \'practicejournal\')}}" target="_blank" rel="noopener noreferrer"> <md-icon md-font-set="material-icons">file_download</md-icon> </a> </td> <td md-cell> {{file.inserted | hoisDateTime}} </td> <td md-cell> {{file.insertedBy}} </td> </tr> </tbody> </table> </fieldset> </div> <br> <div class="form-readonly" layout="row"> <md-input-container flex> <label>{{\'practiceJournal.teacherOpinion\' | translate}}</label> <hois-value value="practiceJournal.teacherOpinion"></hois-value> </md-input-container> </div> <div class="form-readonly" layout="row"> <md-input-container flex> <label>{{\'practiceJournal.supervisorOpinion\' | translate}}</label> <hois-value value="practiceJournal.supervisorOpinion"></hois-value> </md-input-container> </div> <div class="form-readonly" layout="row"> <md-input-container flex> <label class="textInput">{{\'practiceJournal.grade\' | translate}}</label> <hois-classifier-value ng-model="practiceJournal.grade" main-classifier-code="KUTSEHINDAMINE" model-value-attr="code"></hois-classifier-value> </md-input-container> </div> <div flex> <hois-collapsable label="(\'contract.practicePlan\' | translate)" expanded="false"> <p class="practice-plan">{{practiceJournal.practicePlan}}</p> </hois-collapsable> </div> </div> </div>'),a.put("practiceJournal/vocational.higher.select.dialog.html",'<md-dialog aria-label="vaocational higher select dialog"> <form name="dialogForm" ng-submit="dialogForm.$valid && submit()" novalidate ng-cloak> <md-toolbar> <div class="md-toolbar-tools"> <h2 flex>{{"practiceJournal.vocationalOrHigherSelect" | translate}}</h2> <md-button class="md-icon-button" ng-click="cancel()"> <md-icon md-font-set="material-icons">close</md-icon> </md-button> </div> </md-toolbar> <md-dialog-content> <div class="md-dialog-content"> {{"practiceJournal.vocationalOrHigherPracticeJournal" | translate}} </div> </md-dialog-content> <md-dialog-actions layout="row" layout-align="start start"> <md-button class="md-raised" type="submit">{{\'practiceJournal.button.vocational\' | translate}}</md-button> <md-button class="md-raised" type="submit" ng-click="higher=true">{{"practiceJournal.button.higher" | translate}}</md-button> </md-dialog-actions> </form> </md-dialog>'),a.put("protocol/module.protocol.addStudent.dialog.html",'<md-dialog aria-label="add student dialog"> <form name="dialogForm" ng-submit="loadData()" novalidate ng-cloak> <md-toolbar> <div class="md-toolbar-tools"> <h2>{{\'moduleProtocol.addStudents\' | translate}}</h2> <span flex></span> <md-button class="md-icon-button" ng-click="cancel()"> <md-icon md-font-set="material-icons">close</md-icon> </md-button> </div> </md-toolbar> <md-dialog-content> <div class="md-dialog-content"> <!--        <div flex>\r\n            <div layout="row" layout-sm="column" layout-xs="column">\r\n              <md-input-container flex>\r\n                <label>{{\'student.name\' | translate}}</label>\r\n                <input type="text" ng-model="criteria.studentName" md-autofocus>\r\n              </md-input-container>\r\n            </div>\r\n            <div layout="row">\r\n              <md-button type="submit" class="md-raised md-primary">{{\'main.button.search\' | translate}}</md-button>\r\n              <md-button class="md-raised" ng-click="clearCriteria()">{{\'main.button.clear\' | translate}}</md-button>\r\n            </div>\r\n        </div>--> <div layout-padding> <div flex> <md-table-container> <table md-table md-progress="tabledata.$promise" md-row-select multiple ng-model="selectedStudents"> <thead md-head md-order="criteria.order" md-on-reorder="loadData"> <tr md-row flex> <th md-column><span>{{\'student.label\' | translate}}</span></th> <th md-column><span>{{\'student.idcode\' | translate}}</span></th> <th md-column><span>{{\'main.status\' | translate}}</span></th> <th md-column><span>{{\'moduleProtocol.journalResults\' | translate}}</span></th> </tr> </thead> <tbody md-body> <tr md-row md-select="row.studentId" ng-repeat="row in tabledata.content | orderBy: \'fullname\'" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell>{{row.fullname}}</td> <td md-cell>{{row.idcode}}</td> <td md-cell>{{currentLanguageNameField(row.status)}}</td> <td md-cell>{{journalResultsView(row.journalResults)}}</td> </tr> </tbody> </table> </md-table-container> <!--            <md-table-pagination md-limit="criteria.size" md-limit-options="[10, 20, 50]"\r\n                         md-page="criteria.page" md-total="{{tabledata.totalElements}}" md-on-paginate="loadData"\r\n                         md-label="{page: \'{{\'main.page\' | translate}}:\', rowsPerPage: \'{{\'main.rowPerPage\' | translate}}:\', of: \'{{\'main.of\' | translate}}\'}" md-page-select></md-table-pagination>--> </div> </div> </div> </md-dialog-content> <span flex></span> <md-dialog-actions layout="row" layout-align="start center"> <md-button class="md-raised md-primary" ng-click="submit()">{{\'moduleProtocol.addStudents\' | translate}}</md-button> <md-button class="md-raised" ng-click="cancel()">{{"main.button.close" | translate}}</md-button> </md-dialog-actions> </form> </md-dialog>'),a.put("protocol/module.protocol.edit.html",'<div class="ois-form-layout-padding" ng-cloak> <div flex> <form ng-submit="moduleProtocolForm.$valid && save()" novalidate layout="column" name="moduleProtocolForm"> <div ng-include="\'protocol/templates/module.protocol.header.tmpl.html\'"></div> <div> <div flex> <md-table-container> <table md-table md-progress="protocol.$promise" md-row-select="formState.canAddDeleteStudents" multiple ng-model="calculateGrades.protocolStudents"> <thead md-head> <tr md-row> <th md-column>{{\'student.label\' | translate}}</th> <th md-column>{{\'student.idcode\' | translate}}</th> <th md-column ng-repeat="journal in journals | orderBy: \'nameEt\'"> <div> <a md-colors="{color: \'grey-50\'}" ng-href="/#/journal/{{::journal.id}}/view">{{\'P\' + ($index + 1)}}</a> <md-tooltip> {{journal.nameEt}} - {{\'moduleProtocol.journalCapacity\' | translate:journal}} </md-tooltip> </div> </th> <th md-column ng-if="formState.outcomesAsEntries" ng-repeat="outcome in outcomes | orderBy: \'orderNr\'"> <div> {{\'moduleProtocol.outcome\' | translate}}{{outcome.orderNr + 1}} <md-tooltip>{{outcome.nameEt}}</md-tooltip> </div> </th> <th md-column>{{\'moduleProtocol.moduleGrade\' | translate}}</th> <th md-column ng-if="formState.canChangeConfirmedProtocolGrade">{{\'moduleProtocol.changeReason\' | translate}}</th> <th md-column></th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="row in protocol.protocolStudents | orderBy: \'fullname\'" ng-class-odd="\'odd\'" ng-class-even="\'even\'" md-select="row.id" md-select-id="row.id"> <td md-cell>{{row.fullname}}</td> <td md-cell>{{row.idcode}}</td> <td md-cell ng-repeat="journal in journals | orderBy: \'nameEt\'"> {{journalResultsView(journal.id, row)}} </td> <td md-cell ng-if="formState.outcomesAsEntries" ng-repeat="outcome in outcomes | orderBy: \'orderNr\'"> {{outcomeResultsView(outcome.id, row)}} </td> <td md-cell> <hois-select style="margin:0px;width:2em" ng-model="row.grade" values="grades" show-property="value" value-property="code" aria-label="grade" ng-change="gradeChanged(row)" ng-disabled="!protocol.canBeEdited"></hois-select> </td> <td md-cell ng-if="formState.canChangeConfirmedProtocolGrade"> <md-input-container ng-if="row.gradeHasChanged"> <input ng-model="row.addInfo" aria-label="addInfo" type="text" md-maxlength="255" ng-change="addInfoChanged(row);" required> </md-input-container> <span ng-if="row.addInfo && !row.gradeHasChanged"> {{row.addInfo}} </span> </td> <td md-cell> <a ng-if="row.canBeDeleted && formState.canAddDeleteStudents" ng-click="deleteProtocolStudent(row)" class="remove">&times;</a> </td> </tr> </tbody> </table> </md-table-container> </div> </div> <br> <div layout="row"> <md-button class="md-raised" ng-click="calculate()" ng-if="formState.canAddDeleteStudents" ng-disabled="calculateGrades.protocolStudents.length === 0">{{\'higherProtocol.calculate\' | translate}}</md-button> </div> <br> <div> <md-button class="md-raised md-primary" type="submit" ng-if="formState.canAddDeleteStudents">{{\'main.button.save\' | translate}}</md-button> <md-button class="md-raised" ng-click="addProtocolStudents()" ng-if="formState.canAddDeleteStudents">{{\'moduleProtocol.addStudents\' | translate}}</md-button> <md-button ng-if="formState.canConfirm===true" class="md-primary md-raised" ng-click="confirm()">{{\'main.button.confirm\' | translate}}</md-button> <md-button ng-if="protocol.canBeDeleted" class="md-raised" ng-click="delete()">{{\'main.button.delete\' | translate}}</md-button> <md-button class="md-raised" ng-href="#/moduleProtocols">{{\'main.button.back\' | translate}}</md-button> <a ng-show="formState.protocolPdfUrl" ng-href="{{formState.protocolPdfUrl}}" target="_blank" class="md-button md-raised">{{\'main.button.print\' | translate}}</a> <a ng-show="protocol.oisFile" ng-href="{{getUrl(protocol.oisFile, \'protocol\')}}" target="_blank" rel="noopener noreferrer" class="md-button md-raised">{{\'moduleProtocol.downloadSigned\' | translate}}</a> </div> </form> </div> <br> <div flex> <fieldset> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'moduleProtocol.studyOutcomes\' | translate}}</legend> <div ng-repeat="outcome in protocol.protocolVdata.outcomes | orderBy: \'orderNr\'" flex> <div>{{currentLanguageNameField(outcome)}}</div> </div> </fieldset> </div> </div>'),
a.put("protocol/module.protocol.list.html",'<div class="ois-form-layout-padding ois-form-layout" ng-cloak> <div flex> <fieldset> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'main.searchlabel\' | translate}}</legend> <form name="searchForm" ng-submit="searchForm.$valid && loadData()" novalidate class="nomargin"> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="50" flex-sm="100" flex-xs="100"> <label class="textInput">{{\'moduleProtocol.studyYear\' | translate}}</label> <hois-select ng-model="criteria.studyYear" type="studyyear" select-current-study-year required autofocus></hois-select> </md-input-container> <md-input-container flex="50" flex-sm="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label class="textInput">{{\'moduleProtocol.studentGroup\' | translate}}</label> <hois-select ng-model="criteria.studentGroup" type="studentgroup" criteria="{valid: true}"></hois-select> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="50" flex-sm="100" flex-xs="100"> <label class="textInput">{{\'moduleProtocol.curriculumVersion\' | translate}}</label> <hois-select ng-model="criteria.curriculumVersion" type="curriculumversion" criteria="{higher: false}"></hois-select> </md-input-container> <div flex="50" flex-sm="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <hois-autocomplete label="module.label" ng-model="criteria.moduleObject" method="vocationalmodules"></hois-autocomplete> </div> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="50" flex-sm="100" flex-xs="100"> <label class="textInput">{{\'moduleProtocol.status\' | translate}}</label> <hois-classifier-select ng-model="criteria.status" main-classifier-code="PROTOKOLL_STAATUS" model-value-attr="code"></hois-classifier-select> </md-input-container> <md-input-container flex="50" flex-sm="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label class="textInput">{{\'moduleProtocol.protocolNumber\' | translate}}</label> <input type="text" ng-model="criteria.protocolNr"> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <div flex="50" flex-sm="100" flex-xs="100"> <div layout="column" flex> <div layout="row" flex> <md-input-container> <label>{{\'moduleProtocol.insertedFrom\' | translate}}</label> <md-datepicker ng-model="criteria.insertedFrom"></md-datepicker> </md-input-container> <md-input-container flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'moduleProtocol.insertedThru\' | translate}}</label> <md-datepicker ng-model="criteria.insertedThru" md-min-date="criteria.insertedFrom"></md-datepicker> </md-input-container> </div> </div> </div> <div flex="50" flex-sm="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <div layout="column" flex> <div layout="row" flex> <md-input-container> <label>{{\'moduleProtocol.confirmedFrom\' | translate}}</label> <md-datepicker ng-model="criteria.confirmDateFrom"></md-datepicker> </md-input-container> <md-input-container flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'moduleProtocol.confirmedThru\' | translate}}</label> <md-datepicker ng-model="criteria.confirmDateThru" md-min-date="criteria.confirmDateFrom"></md-datepicker> </md-input-container> </div> </div> </div> </div> <div layout="row"> <md-button type="submit" class="md-raised md-primary">{{\'main.button.search\' | translate}}</md-button> <md-button class="md-raised" ng-click="clearSearch()">{{\'main.button.clear\' | translate}}</md-button> <md-button class="md-raised" ng-href="#/moduleProtocols/new" ng-if="formState.canCreateProtocol">{{\'main.button.create\' | translate}}</md-button> </div> <div flex-xs="0" flex-gt-xs="0" flex-gt-sm="50"></div> </form> </fieldset> </div> </div> <div layout-padding> <div flex> <md-table-container> <table md-table md-progress="tabledata.$promise"> <thead md-head md-order="criteria.order" md-on-reorder="loadData"> <tr md-row> <th md-column>{{\'moduleProtocol.protocolNr\' | translate}}</th> <th md-column>{{\'moduleProtocol.studentGroup\' | translate}}</th> <th md-column>{{\'moduleProtocol.curriculumVersionModule\' | translate}}</th> <th md-column>{{\'main.status\' | translate}}</th> <th md-column>{{\'moduleProtocol.insertedDate\' | translate}}</th> <th md-column>{{\'moduleProtocol.confirmDate\' | translate}}</th> <th md-column>{{\'moduleProtocol.confirmer\' | translate}}</th> <th md-column></th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="row in tabledata.content" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell><a ng-href="#/moduleProtocols/{{::row.id}}/view">{{::row.protocolNr}}</a></td> <td md-cell>{{row.studentGroups.join(\', \')}}</td> <td md-cell>{{curriculumVersionModule(row)}}</td> <td md-cell>{{currentLanguageNameField(row.status)}}</td> <td md-cell>{{row.inserted | hoisDate}}</td> <td md-cell>{{row.confirmDate | hoisDate}}</td> <td md-cell>{{::row.confirmer}}</td> <td md-cell> <md-button ng-if="row.canEdit && row.status.code !== \'PROTOKOLL_STAATUS_K\'" md-no-ink class="md-primary change-button" ng-href="#/moduleProtocols/{{::row.id}}/edit">{{\'main.button.change\' | translate}}</md-button> </td> </tr> </tbody> </table> </md-table-container> <md-table-pagination md-limit="criteria.size" md-limit-options="[10, 20, 50]" md-page="criteria.page" md-total="{{tabledata.totalElements}}" md-on-paginate="loadData" md-label="{page: \'{{\'main.page\' | translate}}:\', rowsPerPage: \'{{\'main.rowPerPage\' | translate}}:\', of: \'{{\'main.of\' | translate}}\'}" md-page-select></md-table-pagination> </div> </div>'),a.put("protocol/module.protocol.mobileSign.dialog.html",'<md-dialog> <form> <md-dialog-content> <div class="md-dialog-content" layout="column" layout-align="center center"> <p>{{ \'moduleProtocol.mobileSign.instructions\' | translate }}</p> <h1>{{challengeID}}</h1> </div> </md-dialog-content> </form> </md-dialog>'),a.put("protocol/module.protocol.new.html",'<div ng-if="protocol"> <div ng-include="\'/protocol/module.protocol.edit.html\'" ng-controller="ModuleProtocolController as moduleProtocolController" ng-init="entity=protocol"></div> </div> <div ng-if="!protocol" class="ois-form-layout-padding" ng-cloak> <div flex> <form ng-submit="moduleProtocolNewForm.$valid && submit()" novalidate layout="column" name="moduleProtocolNewForm"> <div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="50" flex-sm="100" flex-xs="100"> <label class="textInput">{{\'moduleProtocol.studyYear\' | translate}}</label> <hois-select ng-model="formState.studyYear" type="studyyear" select-current-study-year required autofocus></hois-select> </md-input-container> <md-input-container flex="50" flex-sm="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label class="textInput">{{\'teacher.label\' | translate}}</label> <hois-select ng-model="formState.teacher" values="formState.teachers" required ng-disabled="auth.isTeacher()"></hois-select> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex flex-sm="100"> <label class="textInput">{{\'moduleProtocol.curriculumVersion\' | translate}}</label> <hois-select ng-model="formState.curriculumVersion" type="curriculumversion" criteria="{higher: false}" ng-change="curriculumVersionChange()" required></hois-select> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex flex-sm="100"> <label class="textInput">{{\'module.label\' | translate}}</label> <hois-select ng-model="formState.curriculumVersionOccupationModule" values="formState.curriculumVersionOccupationModules" ng-change="curriculumVersionOccupationModuleChange()" required></hois-select> </md-input-container> </div> <br> <div flex> <md-table-container> <table md-table md-progress="tabledata.$promise" md-row-select multiple ng-model="formState.selectedStudents"> <thead md-head> <tr md-row flex> <th md-column><span>{{\'student.label\' | translate}}</span></th> <th md-column><span>{{\'student.idcode\' | translate}}</span></th> <th md-column><span>{{\'main.status\' | translate}}</span></th> <th md-column><span>{{\'moduleProtocol.journalResults\' | translate}}</span></th> </tr> </thead> <tbody md-body> <tr md-row md-select="row.studentId" ng-repeat="row in tabledata.content | orderBy: \'fullname\'" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell>{{row.fullname}}</td> <td md-cell>{{row.idcode}}</td> <td md-cell>{{currentLanguageNameField(row.status)}}</td> <td md-cell>{{journalResultsView(row.journalResults)}}</td> </tr> </tbody> </table> </md-table-container> </div> <br> <div layout="row"> <md-button class="md-raised md-primary" type="submit">{{\'moduleProtocol.create\' | translate}}</md-button> <md-button class="md-raised" ng-click="back(\'#/moduleProtocols/\')">{{\'main.button.back\' | translate}}</md-button> </div> </div> </form> </div> </div>'),a.put("protocol/module.protocol.view.html",'<div class="ois-form-layout-padding" ng-cloak> <div flex> <div> <div ng-include="\'protocol/templates/module.protocol.header.tmpl.html\'"></div> <div flex> <md-table-container> <table md-table md-progress="protocol.$promise"> <thead md-head> <tr md-row> <th md-column>{{\'student.label\' | translate}}</th> <th md-column>{{\'student.idcode\' | translate}}</th> <th md-column ng-repeat="journal in journals | orderBy: \'nameEt\'"> <div> <a md-colors="{color: \'grey-50\'}" ng-href="/#/journal/{{::journal.id}}/view">{{\'P\' + ($index + 1)}}</a> <md-tooltip> {{journal.nameEt}} - {{\'moduleProtocol.journalCapacity\' | translate:journal}} </md-tooltip> </div> </th> <th md-column ng-if="formState.outcomesAsEntries" ng-repeat="outcome in outcomes | orderBy: \'orderNr\'"> <div> {{\'moduleProtocol.outcome\' | translate}}{{outcome.orderNr + 1}} <md-tooltip>{{outcome.nameEt}}</md-tooltip> </div> </th> <th md-column>{{\'moduleProtocol.moduleGrade\' | translate}}</th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="row in protocol.protocolStudents | orderBy: \'fullname\'" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell>{{row.fullname}}</td> <td md-cell>{{row.idcode}}</td> <td md-cell ng-repeat="journal in journals | orderBy: \'nameEt\'"> {{journalResultsView(journal.id, row)}} </td> <td md-cell ng-if="formState.outcomesAsEntries" ng-repeat="outcome in outcomes | orderBy: \'orderNr\'"> {{outcomeResultsView(outcome.id, row)}} </td> <td md-cell>{{gradeValue(row.grade)}}</td> </tr> </tbody> </table> </md-table-container> </div> <br> <div> <md-button ng-if="formState.canEditConfirmedProtocol" class="md-primary md-raised" ng-href="#/moduleProtocols/{{::protocol.id}}/edit">{{\'main.button.change\' | translate}}</md-button> <a ng-show="formState.protocolPdfUrl" ng-href="{{formState.protocolPdfUrl}}" target="_blank" class="md-button md-raised">{{\'main.button.print\' | translate}}</a> <a ng-show="protocol.oisFile" ng-href="{{getUrl(protocol.oisFile, \'protocol\')}}" target="_blank" rel="noopener noreferrer" class="md-button md-raised">{{\'moduleProtocol.downloadSigned\' | translate}}</a> <md-button class="md-raised" ng-href="#/moduleProtocols">{{\'main.button.back\' | translate}}</md-button> </div> </div> </div> </div>'),a.put("reception/reception.saisAdmission.import.html",'<div layout-padding> <div flex> <form ng-submit="importAdmissions()" layout="column" name="admissionImportForm"> <div flex> <div flex-xs="100" flex-gt-xs="100" layout="column"> <div layout="row"> <md-input-container flex="25" flex-md="100" flex-sm="100" flex-xs="100"> <label>{{\'reception.admission.saisImportRange\' | translate}}</label> <input type="hidden"> </md-input-container> <md-input-container flex="15" flex-md="100" flex-sm="100" flex-xs="100"> <label>{{\'main.from\' | translate}}</label> <md-datepicker required ng-model="criteria.createDateFrom" md-max-date="criteria.createDateTo"></md-datepicker> </md-input-container> <md-input-container flex="15" flex-md="100" flex-sm="100" flex-xs="100"> <label>{{\'main.thru\' | translate}}</label> <md-datepicker required ng-model="criteria.createDateTo" md-min-date="criteria.createDateFrom"></md-datepicker> </md-input-container> </div> <div layout="row"> <md-button type="submit" class="md-raised md-primary">{{\'reception.admission.saisImportAdmissions\' | translate}}</md-button> </div> </div> </div> </form> </div> </div> <div layout-padding ng-hide="failEmpty"> <div flex> {{\'reception.admission.failedImport\' | translate}} </div> </div> <div layout-padding ng-hide="failEmpty"> <div flex> <md-table-container> <table md-table md-progress="fail"> <thead md-head> <tr md-row> <th md-column>{{\'reception.admission.code\' | translate}}</th> <th md-column>{{\'reception.admission.error\' | translate}}</th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="row in fail" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell>{{::row.code}}</td> <td md-cell>{{row.error | translate}}</td> </tr> </tbody> </table> </md-table-container> </div> </div> <div layout-padding ng-hide="successEmpty"> <div flex> {{\'reception.admission.successfullyImported\' | translate}} </div> </div> <div layout-padding ng-hide="successEmpty"> <div flex> <md-table-container> <table md-table> <thead md-head> <tr md-row> <th md-column>{{\'reception.admission.code\' | translate}}</th> <th md-column>{{\'reception.admission.curriculumVersion\' | translate}}</th> <th md-column>{{\'reception.admission.places\' | translate}}</th> <th md-column>{{\'reception.admission.language\' | translate}}</th> <th md-column>{{\'reception.admission.startDate\' | translate}}</th> <th md-column>{{\'reception.admission.endDate\' | translate}}</th> <th md-column>{{\'reception.admission.studyForm\' | translate}}</th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="row in success" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell>{{::row.code}}</td> <td md-cell>{{::row.curriculumVersion.nameEt}}</td> <td md-cell>{{::row.places}}</td> <td md-cell>{{currentLanguageNameField(row.language)}}</td> <td md-cell>{{row.periodStart | hoisDate}}</td> <td md-cell>{{row.periodEnd | hoisDate}}</td> <td md-cell>{{currentLanguageNameField(row.studyForm)}}</td> </tr> </tbody> </table> </md-table-container> </div> </div>'),a.put("reception/reception.saisAdmission.list.html",'<div class="ois-form-layout-padding ois-form-layout" ng-cloak> <div flex> <fieldset> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'main.searchlabel\' | translate}}</legend> <form ng-submit="loadData()" layout="column"> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="100"> <label>{{\'reception.admission.code\' | translate}}</label> <hois-select ng-model="criteria.code" type="saisadmissioncode" value-property="nameEt"></hois-select> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="100"> <label>{{\'student.curriculum\' | translate}}</label> <hois-select ng-model="criteria.curriculumVersion" type="curriculumversion" criteria="{sais: true}"></hois-select> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="100"> <label>{{\'student.studyForm\' | translate}}</label> <hois-classifier-select ng-model="criteria.studyForm" model-value-attr="code" main-classifier-code="OPPEVORM"></hois-classifier-select> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="100"> <label>{{\'student.fin\' | translate}}</label> <hois-classifier-select ng-model="criteria.fin" model-value-attr="code" main-classifier-code="FINALLIKAS"></hois-classifier-select> </md-input-container> </div> <div layout="row"> <md-button type="submit" class="md-raised md-primary">{{\'main.button.search\' | translate}}</md-button> <md-button class="md-raised" ng-click="clearCriteria()">{{\'main.button.clear\' | translate}}</md-button> </div> <div flex-xs="0" flex-gt-xs="0" flex-gt-sm="50"></div> </form> </fieldset> </div> </div> <div layout-padding> <div flex> <md-table-container> <table md-table md-progress="tabledata.$promise"> <thead md-head md-order="criteria.order" md-on-reorder="loadData"> <tr md-row> <th md-column md-order-by="code">{{\'reception.admission.code\' | translate}}</th> <th md-column md-order-by="curriculumVersion.curriculum.{{currentLanguageNameField()}}">{{\'student.curriculum\' | translate}}</th> <th md-column md-order-by="places">{{\'reception.admission.places\' | translate}}</th> <th md-column md-order-by="language.{{currentLanguageNameField()}}">{{\'reception.admission.language\' | translate}}</th> <th md-column md-order-by="periodStart">{{\'studyYear.startDate\' | translate}}</th> <th md-column md-order-by="periodEnd">{{\'studyYear.endDate\' | translate}}</th> <th md-column md-order-by="studyForm.{{currentLanguageNameField()}}">{{\'student.studyForm\' | translate}}</th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="row in tabledata.content" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell><a ng-href="#/reception/saisAdmission/{{::row.id}}/view">{{::row.code}}</a></td> <td md-cell>{{currentLanguageNameField(row.curriculumVersion)}}</td> <td md-cell>{{::row.places}}</td> <td md-cell>{{currentLanguageNameField(row.language)}}</td> <td md-cell>{{row.periodStart | hoisDate}}</td> <td md-cell>{{row.periodEnd | hoisDate}}</td> <td md-cell>{{currentLanguageNameField(row.studyForm)}}</td> </tr> </tbody> </table> </md-table-container> <md-table-pagination md-limit="criteria.size" md-limit-options="[10, 20, 50]" md-page="criteria.page" md-total="{{tabledata.totalElements}}" md-on-paginate="loadData" md-label="{page: \'{{\'main.page\' | translate}}:\', rowsPerPage: \'{{\'main.rowPerPage\' | translate}}:\', of: \'{{\'main.of\' | translate}}\'}" md-page-select></md-table-pagination> </div> </div>'),a.put("reception/reception.saisAdmission.view.html",'<div class="ois-form-layout-padding form-readonly" ng-cloak> <div flex> <form layout="column"> <div style="padding-top: 1em"> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container class="label-only" flex="30" flex-sm="100" flex-xs="100"> <label>{{\'reception.admission.code\' | translate}}</label> <hois-value value="saisAdmission.code"></hois-value> </md-input-container> <md-input-container flex="30" flex-sm="100" flex-xs="100"> <label>{{\'student.curriculum\' | translate}}</label> <hois-value value="currentLanguageNameField(saisAdmission.curriculumVersion)"></hois-value> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="30" flex-sm="100" flex-xs="100"> <label>{{\'student.fin\' | translate}}</label> <hois-classifier-value ng-model="saisAdmission.fin" main-classifier-code="FINALLIKAS"></hois-classifier-value> </md-input-container> <md-input-container flex="30" flex-sm="100" flex-xs="100"> <label>{{\'reception.admission.language\' | translate}}</label> <hois-classifier-value ng-model="saisAdmission.language" main-classifier-code="OPPEKEEL"></hois-classifier-value> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="30" flex-sm="100" flex-xs="100"> <label>{{\'reception.admission.places\' | translate}}</label> <hois-value value="saisAdmission.places"></hois-value> </md-input-container> <md-input-container flex="30" flex-sm="100" flex-xs="100"> <label>{{\'student.studyForm\' | translate}}</label> <hois-classifier-value ng-model="saisAdmission.studyForm" main-classifier-code="OPPEVORM"></hois-classifier-value> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="30" flex-sm="100" flex-xs="100"> <label>{{\'student.studyLoad\' | translate}}</label> <hois-classifier-value ng-model="saisAdmission.studyLoad" main-classifier-code="OPPEKOORMUS"></hois-classifier-value> </md-input-container> <md-input-container flex="30" flex-sm="100" flex-xs="100"> <label>{{\'student.studyLevel\' | translate}}</label> <hois-classifier-value ng-model="saisAdmission.studyLevel" main-classifier-code="OPPEASTE"></hois-classifier-value> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container class="label-only" flex="30" flex-sm="100" flex-xs="100"> <label>{{\'studyYear.startDate\' | translate}}</label> <hois-value value="saisAdmission.periodStart | hoisDate"></hois-value> </md-input-container> <md-input-container flex="30" flex-sm="100" flex-xs="100"> <label>{{\'studyYear.endDate\' | translate}}</label> <hois-value value="saisAdmission.periodEnd | hoisDate"></hois-value> </md-input-container> </div> <br> <div layout="row"> <md-button ng-href="#/reception/saisAdmission/search" class="md-raised">{{\'main.button.back\' | translate}}</md-button> </div> </div> </form> </div> </div>'),a.put("reception/reception.saisApplication.import.csv.file.dialog.html",'<md-dialog aria-label="import csv dialog"> <form name="dialogForm" ng-cloak> <md-toolbar> <div class="md-toolbar-tools"> <h2>{{"main.button.loadCsvFile" | translate}}</h2> <span flex></span> <md-button class="md-icon-button" ng-click="cancel()"> <md-icon md-font-set="material-icons">close</md-icon> </md-button> </div> </md-toolbar> <md-dialog-content> <span flex></span> <div class="ois-form-layout" layout="column" layout-margin ng-cloak> <div layout="column"> <md-input-container flex> <lf-ng-md-file-input name="file" lf-files="data.file" lf-browse-label="{{\'main.addFile\' | translate}}" lf-remove-label="{{\'main.button.delete\' | translate}}" lf-placeholder="" lf-mimetype="application/vnd.ms-excel|text/csv" accept=".csv" lf-required> </lf-ng-md-file-input> </md-input-container> <div ng-messages="dialogForm.file.$error"> <div class="invalid" ng-message="required">{{\'main.messages.error.selectFile\' | translate}}</div> <div class="invalid" ng-message="mimetype">{{\'main.messages.error.wrongExtension\' | translate}} .csv</div> </div> </div> </div> </md-dialog-content> <span flex></span> <md-dialog-actions layout="row" layout-align="start center"> <md-button class="md-raised md-primary" ng-click="submit()">{{"main.button.add" | translate}}</md-button> <md-button class="md-raised" ng-click="cancel()">{{"main.button.close" | translate}}</md-button> </md-dialog-actions> </form> </md-dialog>'),a.put("reception/reception.saisApplication.import.html",'<div layout-padding> <div flex> <form ng-submit="importApplications()" layout="column" name="applicationImportForm" novalidate> <div flex> <div flex-xs="100" flex-gt-xs="100" layout="column"> <!--div class="indentForToast"></div--> <div layout="row"> <md-input-container flex="35" flex-md="100" flex-sm="100" flex-xs="100"> <label>{{\'reception.application.saisImportRange\' | translate}}</label> <input type="hidden"> </md-input-container> <md-input-container flex="15" flex-md="100" flex-sm="100" flex-xs="100"> <label>{{\'main.from\' | translate}}</label> <md-datepicker ng-required="!((criteria.applicationDateFrom && criteria.applicationDateTo)|| criteria.idCode.length || criteria.admissionCode.length)" ng-model="criteria.applicationDateFrom" md-max-date="criteria.applicationDateTo"></md-datepicker> </md-input-container> <md-input-container flex="15" flex-md="100" flex-sm="100" flex-xs="100"> <label>{{\'main.thru\' | translate}}</label> <md-datepicker ng-required="!((criteria.applicationDateFrom && criteria.applicationDateTo)|| criteria.idCode.length || criteria.admissionCode.length)" ng-model="criteria.applicationDateTo" md-min-date="criteria.applicationDateFrom"></md-datepicker> </md-input-container> </div> <div> <md-list flex-xs="100" flex-gt-xs="100" flex="60"> <md-list-item ng-repeat="status in statusList"> <span> <md-checkbox ng-model="status._selected"> {{currentLanguageNameField(status)}} </md-checkbox> </span> </md-list-item> </md-list> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="60" flex-sm="100" flex-xs="100"> <label class="textInput">{{\'reception.application.candidateIdCode\' | translate}}</label> <input ng-model="criteria.idCode" type="text" ng-required="!((criteria.applicationDateFrom && criteria.applicationDateTo)|| criteria.idCode.length || criteria.admissionCode.length)"> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="60" flex-sm="100" flex-xs="100"> <label class="textInput">{{\'reception.admission.code\' | translate}}</label> <hois-select ng-model="criteria.admissionCode" type="saisadmissioncode" value-property="nameEt" ng-required="!((criteria.applicationDateFrom && criteria.applicationDateTo)|| criteria.idCode.length || criteria.admissionCode.length)"></hois-select> </md-input-container> </div> <div layout="row"> <md-button type="submit" class="md-raised md-primary">{{\'reception.application.saisImportApplications\' | translate}}</md-button> </div> </div> </div> </form> </div> </div> <div ng-if="failed.length > 0"> <div layout-padding> <div flex> {{\'reception.admission.failedImport\' | translate}} </div> </div> <div layout-padding> <div flex> <md-table-container> <table md-table md-progress="fail"> <thead md-head> <tr md-row> <th md-column>{{\'reception.application.date\' | translate}}</th> <th md-column>{{\'reception.application.message\' | translate}}</th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="row in failed" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell>{{row.applicationDate | hoisDate}}</td> <td md-cell>{{row.message | translate}}</td> </tr> </tbody> </table> </md-table-container> </div> </div> </div> <div ng-if="successful.length > 0"> <div layout-padding> <div flex> {{\'reception.application.successfullyImported\' | translate}} </div> </div> <div layout-padding> <div flex> <md-table-container> <table md-table> <thead md-head> <tr md-row> <th md-column>{{\'reception.application.nr\' | translate}}</th> <th md-column>{{\'reception.application.idCode\' | translate}}</th> <th md-column>{{\'reception.application.firstName\' | translate}}</th> <th md-column>{{\'reception.application.lastName\' | translate}}</th> <th md-column>{{\'reception.application.admissionCode\' | translate}}</th> <th md-column>{{\'reception.application.status\' | translate}}</th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="row in successful" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell>{{::row.applicationNr}}</td> <td md-cell>{{::row.idCode}}</td> <td md-cell>{{::row.firstName}}</td> <td md-cell>{{::row.lastName}}</td> <td md-cell>{{::row.admissionCode}}</td> <td md-cell>{{currentLanguageNameField(row.applicationStatus)}}</td> </tr> </tbody> </table> </md-table-container> </div> </div> </div>'),a.put("reception/reception.saisApplication.import.result.dialog.html",'<md-dialog aria-label="import csv result dialog"> <form name="dialogForm" ng-cloak> <md-toolbar> <div class="md-toolbar-tools"> <h2>{{"reception.application.importFromCsvFile" | translate}}</h2> </div> </md-toolbar> <md-dialog-content> <span flex></span> <div class="ois-form-layout" layout="column" layout-margin ng-cloak> <div ng-show="!result"> <p>{{"main.proccessingFile" | translate}}</p> <div layout="row" layout-align="space-around"> <md-progress-circular md-mode="indeterminate"></md-progress-circular> </div> </div> <div ng-show="result"> <h2>{{\'reception.application.added\' | translate}}</h2> <md-table-container> <table md-table> <thead md-head> <tr md-row> <th md-column>{{\'reception.application.csvFileRowNr\' | translate}}</th> <th md-column>{{\'reception.application.nr\' | translate}}</th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="row in result.successful" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell>{{::row.rowNr}}</td> <td md-cell>{{::row.message}}</td> </tr> </tbody> </table> </md-table-container> <span flex></span> <h2>{{\'reception.application.failed\' | translate}}</h2> <md-table-container> <table md-table> <thead md-head> <tr md-row> <th md-column>{{\'reception.application.csvFileRowNr\' | translate}}</th> <th md-column>{{\'message.label\' | translate}}</th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="row in result.failed" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell>{{::row.rowNr}}</td> <td md-cell>{{::row.message}}</td> </tr> </tbody> </table> </md-table-container> </div> </div> </md-dialog-content> <span flex></span> <md-dialog-actions layout="row" layout-align="start center"> <md-button ng-if="result" class="md-raised md-primary" ng-click="cancel()">{{"main.button.close" | translate}}</md-button> </md-dialog-actions> </form> </md-dialog>'),a.put("reception/reception.saisApplication.list.html",'<div class="ois-form-layout-padding ois-form-layout" ng-cloak> <div flex> <fieldset> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'main.searchlabel\' | translate}}</legend> <form ng-submit="loadData()" layout="column"> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="100"> <label>{{\'reception.admission.code\' | translate}}</label> <hois-select ng-model="criteria.code" type="saisadmissioncode" value-property="nameEt" multiple></hois-select> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="100"> <label>{{\'reception.application.status\' | translate}}</label> <hois-classifier-select ng-model="criteria.status" model-value-attr="code" main-classifier-code="SAIS_AVALDUSESTAATUS" multiple></hois-classifier-select> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="100"> <label class="textInput">{{\'reception.application.candidateName\' | translate}}</label> <input ng-model="criteria.name" type="text"> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="100"> <label class="textInput">{{\'reception.application.candidateIdCode\' | translate}}</label> <input ng-model="criteria.idcode" type="text"> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="30" flex-sm="100" flex-xs="100"> <md-checkbox ng-model="criteria.showRevoked" aria-label="show revoked"> {{\'reception.application.showRevoked\' | translate}} </md-checkbox> </md-input-container> <md-input-container flex="30" flex-sm="100" flex-xs="100"> <md-checkbox ng-model="criteria.addedToDirective" aria-label="added to directive"> {{\'reception.application.showAddedToDirective\' | translate}} </md-checkbox> </md-input-container> </div> <div layout="row"> <md-button type="submit" class="md-raised md-primary">{{\'main.button.search\' | translate}}</md-button> <md-button class="md-raised" ng-click="clearCriteria()">{{\'main.button.clear\' | translate}}</md-button> <md-button class="md-raised" ng-if="canEdit" ng-click="importFromCsvFile()">{{\'main.button.importFromCsvFile\' | translate}}</md-button> <a ng-href="{{classifiersFileUrl}}" class="md-button md-raised">{{\'main.button.classifiersFile\' | translate}}</a> <a ng-href="{{csvSampleFileUrl}}" class="md-button md-raised">{{\'main.button.csvSampleFile\' | translate}}</a> </div> <div flex-xs="0" flex-gt-xs="0" flex-gt-sm="50"></div> </form> </fieldset> </div> </div> <div layout-padding> <div flex> <md-table-container> <table md-table md-progress="tabledata.$promise"> <thead md-head md-order="criteria.order" md-on-reorder="loadData"> <tr md-row> <th md-column md-order-by="applicationNr">{{\'reception.application.nr\' | translate}}</th> <th md-column md-order-by="idcode">{{\'student.idcode\' | translate}}</th> <th md-column md-order-by="firstname">{{\'student.firstname\' | translate}}</th> <th md-column md-order-by="lastname">{{\'student.lastname\' | translate}}</th> <th md-column md-order-by="saisAdmissionCode">{{\'reception.admission.code\' | translate}}</th> <th md-column md-order-by="statusCode">{{\'reception.application.status\' | translate}}</th> <th md-column md-order-by="addedToDirective">{{\'reception.application.addedToDirective\' | translate}}</th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="row in tabledata.content" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell><a ng-href="/#/reception/saisApplication/{{::row.id}}/view">{{::row.applicationNr}}</a></td> <td md-cell>{{::row.idcode}}</td> <td md-cell>{{::row.firstname}}</td> <td md-cell>{{::row.lastname}}</td> <td md-cell>{{::row.saisAdmissionCode}}</td> <td md-cell>{{currentLanguageNameField(row.status)}}</td> <td md-cell>{{(row.addedToDirective ? \'main.yes\' : \'main.no\') | translate}}</td> </tr> </tbody> </table> </md-table-container> <md-table-pagination md-limit="criteria.size" md-limit-options="[10, 20, 50]" md-page="criteria.page" md-total="{{tabledata.totalElements}}" md-on-paginate="loadData" md-label="{page: \'{{\'main.page\' | translate}}:\', rowsPerPage: \'{{\'main.rowPerPage\' | translate}}:\', of: \'{{\'main.of\' | translate}}\'}" md-page-select></md-table-pagination> </div> </div>'),
a.put("reception/reception.saisApplication.view.html",'<div class="ois-form-layout-padding form-readonly" ng-cloak> <div> <form> <div style="padding-top: 1em"> <div layout="column"> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex> <label>{{\'reception.application.nr\' | translate}}</label> <hois-value value="saisApplication.applicationNr"></hois-value> </md-input-container> <md-input-container flex> <label>{{\'person.idcode\' | translate}}</label> <hois-value value="saisApplication.idcode"></hois-value> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex> <label>{{\'person.firstname\' | translate}}</label> <hois-value value="saisApplication.firstname"></hois-value> </md-input-container> <md-input-container flex> <label>{{\'person.lastname\' | translate}}</label> <hois-value value="saisApplication.lastname"></hois-value> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex> <label>{{\'person.sex\' | translate}}</label> <hois-classifier-value ng-model="saisApplication.sex" main-classifier-code="SUGU"></hois-classifier-value> </md-input-container> <md-input-container flex> <label>{{\'student.residenceCountry\' | translate}}</label> <hois-classifier-value ng-model="saisApplication.residenceCountry" main-classifier-code="RIIK"></hois-classifier-value> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex> <label>{{\'student.citizenship\' | translate}}</label> <hois-classifier-value ng-model="saisApplication.citizenship" main-classifier-code="RIIK"></hois-classifier-value> </md-input-container> <md-input-container flex> <label>{{\'student.studyLanguage\' | translate}}</label> <hois-classifier-value ng-model="saisApplication.language" main-classifier-code="OPPEKEEL"></hois-classifier-value> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex> <label>{{\'reception.application.email\' | translate}}</label> <hois-value value="saisApplication.email"></hois-value> </md-input-container> <md-input-container flex> <label>{{\'reception.application.address\' | translate}}</label> <hois-value value="saisApplication.address"></hois-value> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex> <label>{{\'student.phone\' | translate}}</label> <hois-value value="saisApplication.phone"></hois-value> </md-input-container> <md-input-container flex> <label>{{\'reception.application.status\' | translate}}</label> <hois-classifier-value ng-model="saisApplication.status" main-classifier-code="SAIS_AVALDUSESTAATUS"></hois-classifier-value> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex> <label>{{\'student.studyForm\' | translate}}</label> <hois-classifier-value ng-model="saisApplication.studyForm" main-classifier-code="OPPEVORM"></hois-classifier-value> </md-input-container> <md-input-container ng-if="saisApplication.isHigher" flex> <label>{{\'student.studyLoad\' | translate}}</label> <hois-classifier-value ng-model="saisApplication.studyLoad" main-classifier-code="OPPEKOORMUS"></hois-classifier-value> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex> <label>{{\'reception.application.submissionDate\' | translate}}</label> <hois-value value="saisApplication.submitted | hoisDate"></hois-value> </md-input-container> <md-input-container flex> <label>{{\'reception.application.changeDate\' | translate}}</label> <hois-value value="saisApplication.saisChanged | hoisDate"></hois-value> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex> <label>{{\'reception.admission.code\' | translate}}</label> <hois-value value="saisApplication.saisAdmissionCode"></hois-value> </md-input-container> </div> </div> <div layout="column"> <div layout="row" class="top-margin"> <h2>{{\'reception.application.graduationHistory\' | translate}} </h2> </div> <table md-table> <thead md-head> <tr md-row> <th md-column>{{\'school.label\' | translate}}</th> <th md-column>{{\'student.studyStart\' | translate}}</th> <th md-column>{{\'student.studyEnd\' | translate}}</th> </tr> </thead> <tbody md-body> <tr md-row flex ng-repeat="graduatedSchool in saisApplication.graduatedSchools | orderBy: \'id\'" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell>{{graduatedSchool.name}}</td> <td md-cell>{{graduatedSchool.startDate | hoisDate}}</td> <td md-cell>{{graduatedSchool.endDate | hoisDate}}</td> </tr> </tbody> </table> </div> <div layout="column"> <div layout="row" class="top-margin"> <h2>{{\'reception.application.gradesResults\' | translate}} </h2> </div> <table md-table> <thead md-head> <tr md-row> <th md-column>{{\'subject.name\' | translate}}</th> <th md-column>{{\'subject.type\' | translate}}</th> <th md-column>{{\'main.result\' | translate}}</th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="grade in saisApplication.grades | orderBy: \'id\'" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell>{{grade.subjectName}}</td> <td md-cell>{{grade.subjectType}}</td> <td md-cell>{{grade.grade}}</td> </tr> </tbody> </table> </div> <div layout="column"> <div layout="row" class="top-margin"> <h2>{{\'reception.application.otherData\' | translate}} </h2> </div> <table md-table> <thead md-head> <tr md-row> <th md-column>{{\'main.name\' | translate}}</th> <th md-column>{{\'main.value\' | translate}}</th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="otherData in saisApplication.otherData | orderBy: \'id\'" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell>{{otherData.otherDataName}}</td> <td md-cell>{{otherData.otherDataValue}}</td> </tr> </tbody> </table> </div> <br> <div layout="row"> <md-button ng-href="#/reception/saisApplication/search" class="md-raised">{{\'main.button.back\' | translate}}</md-button> </div> </div> </form> </div> </div>'),a.put("report/curriculums.completion.html",'<div class="ois-form-layout-padding ois-form-layout" ng-cloak> <div flex> <fieldset> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'main.searchlabel\' | translate}}</legend> <form ng-submit="loadData()" novalidate> <div layout="row"> <md-input-container flex="45" flex-sm="100" flex-xs="100"> <label class="textInput">{{\'report.curriculumscompletion.name\' | translate}}</label> <input ng-model="criteria.name" name="name" type="text" autofocus> </md-input-container> <div flex="50" flex-offset="5"> <hois-autocomplete ng-model="criteria.curriculumVersion" method="curriculumversions" label="report.curriculumscompletion.curriculum"></hois-autocomplete> </div> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="45"> <label>{{\'report.curriculumscompletion.studentgroup\' | translate}}</label> <hois-select ng-model="criteria.studentGroup" type="studentgroup"></hois-select> </md-input-container> <md-input-container flex="45" flex-offset="5" flex-sm="100" flex-xs="100"> <label>{{\'report.curriculumscompletion.studyForm\' | translate}}</label> <hois-classifier-select ng-model="criteria.studyForm" model-value-attr="code" main-classifier-code="OPPEVORM"></hois-classifier-select> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="45"> <label>{{\'report.curriculumscompletion.status\' | translate}}</label> <hois-classifier-select ng-model="criteria.studyLoad" model-value-attr="code" main-classifier-code="OPPEKOORMUS"></hois-classifier-select> </md-input-container> </div> <div layout="row"> <md-button type="submit" class="md-raised md-primary">{{\'main.button.search\' | translate}}</md-button> <md-button class="md-raised" ng-click="clearCriteria()">{{\'main.button.clear\' | translate}}</md-button> </div> <div flex-xs="0" flex-gt-xs="0" flex-gt-sm="50"></div> </form> </fieldset> </div> </div> <div layout-padding> <div flex> <md-table-container> <table md-table md-progress="tabledata.$promise"> <thead md-head md-order="criteria.order" md-on-reorder="loadData"> <tr md-row> <th md-column md-order-by="p.lastname,p.firstname">{{\'report.curriculumscompletion.name\' | translate}}</th> <th md-column md-order-by="cv.code">{{\'report.curriculumscompletion.curriculum\' | translate}}</th> <th md-column md-order-by="sg.code">{{\'report.curriculumscompletion.studentgroup\' | translate}}</th> <th md-column>{{\'report.curriculumscompletion.studyLoad\' | translate}}</th> <th md-column>{{\'report.curriculumscompletion.studyForm\' | translate}}</th> <th md-column>{{\'report.curriculumscompletion.status\' | translate}}</th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="row in tabledata.content" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell> <a md-no-ink class="md-primary" ng-href="#/students/{{::row.id}}/main">{{::row.fullName}}</a> </td> <td md-cell>{{currentLanguageNameField(row.curriculumVersion)}}</td> <td md-cell>{{::row.studentGroup}}</td> <td md-cell>{{currentLanguageNameField(row.studyLoad)}}</td> <td md-cell>{{currentLanguageNameField(row.studyForm)}}</td> <td md-cell>{{currentLanguageNameField(row.status)}}</td> </tr> </tbody> </table> </md-table-container> <md-table-pagination md-limit="criteria.size" md-limit-options="[10, 20, 50]" md-page="criteria.page" md-total="{{tabledata.totalElements}}" md-on-paginate="loadData" md-label="{page: \'{{\'main.page\' | translate}}:\', rowsPerPage: \'{{\'main.rowPerPage\' | translate}}:\', of: \'{{\'main.of\' | translate}}\'}" md-page-select></md-table-pagination> </div> </div>'),a.put("report/student.html",'<div class="ois-form-layout-padding ois-form-layout" ng-cloak> <div flex> <fieldset> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'main.searchlabel\' | translate}}</legend> <form ng-submit="loadData()" novalidate> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="45" flex-sm="100" flex-xs="100"> <label class="textInput">{{\'report.student.name\' | translate}}</label> <input ng-model="criteria.name" name="name" type="text" autofocus> </md-input-container> <md-input-container flex="50" flex-sm="100" flex-xs="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label class="textInput">{{\'report.student.idcode\' | translate}}</label> <input ng-model="criteria.idcode" name="idcode" type="text" md-minlength="11" md-maxlength="11"> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <div layout="row" flex="45"> <md-input-container> <label>{{\'report.student.birthdate_from\' | translate}}</label> <md-datepicker ng-model="criteria.birthdateFrom"></md-datepicker> </md-input-container> <md-input-container flex-offset="5"> <label>{{\'report.student.birthdate_thru\' | translate}}</label> <md-datepicker ng-model="criteria.birthdateThru" md-min-date="criteria.birthdateFrom"></md-datepicker> </md-input-container> </div> <div layout="row" flex="50" flex-sm="100" flex-xs="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <md-input-container> <label>{{\'report.student.studyStart_from\' | translate}}</label> <md-datepicker ng-model="criteria.studyStartFrom"></md-datepicker> </md-input-container> <md-input-container flex-offset="5"> <label>{{\'report.student.studyStart_thru\' | translate}}</label> <md-datepicker ng-model="criteria.studyStartThru" md-min-date="criteria.studyStartFrom"></md-datepicker> </md-input-container> </div> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="45" flex-sm="100" flex-xs="100"> <label>{{\'report.student.studyLevel\' | translate}}</label> <hois-classifier-select ng-model="criteria.studyLevel" model-value-attr="code" main-classifier-code="OPPEASTE"></hois-classifier-select> </md-input-container> <div flex="45" flex-offset="5"> <hois-autocomplete ng-model="criteria.curriculumVersion" method="curriculumversions" label="report.student.curriculum"></hois-autocomplete> </div> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="45"> <label class="textInput">{{\'report.student.studentGroup\' | translate}}</label> <input ng-model="criteria.studentGroup" type="text"> </md-input-container> <md-input-container flex="45" flex-offset="5" flex-sm="100" flex-xs="100"> <label>{{\'report.student.studyLoad\' | translate}}</label> <hois-classifier-select ng-model="criteria.studyLoad" model-value-attr="code" main-classifier-code="OPPEKOORMUS"></hois-classifier-select> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="45"> <label class="textInput">{{\'report.student.studyForm\' | translate}}</label> <hois-classifier-select ng-model="criteria.studyForm" model-value-attr="code" main-classifier-code="OPPEVORM"></hois-classifier-select> </md-input-container> <md-input-container flex="45" flex-offset="5" flex-sm="100" flex-xs="100"> <label>{{\'report.student.status\' | translate}}</label> <hois-classifier-select ng-model="criteria.status" model-value-attr="code" main-classifier-code="OPPURSTAATUS"></hois-classifier-select> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="45"> <label class="textInput">{{\'report.student.fin\' | translate}}</label> <hois-classifier-select ng-model="criteria.fin" model-value-attr="code" main-classifier-code="FINALLIKAS"></hois-classifier-select> </md-input-container> <md-input-container flex="45" flex-offset="5" flex-sm="100" flex-xs="100"> <label>{{\'report.student.language\' | translate}}</label> <hois-classifier-select ng-model="criteria.language" model-value-attr="code" main-classifier-code="OPPEKEEL"></hois-classifier-select> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="45"> <label class="textInput">{{\'report.student.finSpecific\' | translate}}</label> <hois-classifier-select ng-model="criteria.finSpecific" model-value-attr="code" main-classifier-code="FINTAPSUSTUS"></hois-classifier-select> </md-input-container> </div> <div layout="row"> <md-button type="submit" class="md-raised md-primary">{{\'main.button.search\' | translate}}</md-button> <md-button class="md-raised" ng-click="clearCriteria()">{{\'main.button.clear\' | translate}}</md-button> <a ng-href="{{excel(formState.xlsUrl, criteria)}}" target="_blank" class="md-button md-raised">{{\'report.excel\' | translate}}</a> </div> <div flex-xs="0" flex-gt-xs="0" flex-gt-sm="50"></div> </form> </fieldset> </div> </div> <div layout-padding> <div flex> <md-table-container> <table md-table md-progress="tabledata.$promise"> <thead md-head md-order="criteria.order" md-on-reorder="loadData"> <tr md-row> <th md-column md-order-by="p.lastname,p.firstname">{{\'report.student.name\' | translate}}</th> <th md-column md-order-by="p.idcode">{{\'report.student.idcode\' | translate}}</th> <th md-column md-order-by="s.studyStart">{{\'report.student.studyStart\' | translate}}</th> <th md-column>{{\'report.student.studyLevel\' | translate}}</th> <th md-column md-order-by="cv.code">{{\'report.student.curriculum\' | translate}}</th> <th md-column md-order-by="sg.code">{{\'report.student.studentGroup\' | translate}}</th> <th md-column>{{\'report.student.studyLoad\' | translate}}</th> <th md-column>{{\'report.student.studyForm\' | translate}}</th> <th md-column>{{\'report.student.status\' | translate}}</th> <th md-column>{{\'report.student.fin\' | translate}}</th> <th md-column>{{\'report.student.finSpecific\' | translate}}</th> <th md-column>{{\'report.student.language\' | translate}}</th> <th md-column>{{\'report.student.credits\' | translate}}</th> <th md-column>{{\'report.student.occupationcertificate\' | translate}}</th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="row in tabledata.content" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell> <a md-no-ink class="md-primary" ng-href="#/students/{{::row.id}}/main">{{::row.fullName}}</a> </td> <td md-cell>{{::row.idcode}}</td> <td md-cell>{{row.studyStart | hoisDate}}</td> <td md-cell>{{currentLanguageNameField(row.studyLevel)}}</td> <td md-cell>{{currentLanguageNameField(row.curriculumVersion)}}</td> <td md-cell>{{::row.studentGroup}}</td> <td md-cell>{{currentLanguageNameField(row.studyLoad)}}</td> <td md-cell>{{currentLanguageNameField(row.studyForm)}}</td> <td md-cell>{{currentLanguageNameField(row.status)}}</td> <td md-cell>{{currentLanguageNameField(row.fin)}}</td> <td md-cell>{{currentLanguageNameField(row.finSpecific)}}</td> <td md-cell>{{currentLanguageNameField(row.language)}}</td> <td md-cell>{{::row.credits}}</td> <td md-cell> <div ng-repeat="cert in row.occupationCertificates"> <hr ng-if="!$first"> {{::cert.certificateNr}}&nbsp;{{currentLanguageNameField(cert.occupation)}} </div> </td> </tr> </tbody> </table> </md-table-container> <md-table-pagination md-limit="criteria.size" md-limit-options="[10, 20, 50]" md-page="criteria.page" md-total="{{tabledata.totalElements}}" md-on-paginate="loadData" md-label="{page: \'{{\'main.page\' | translate}}:\', rowsPerPage: \'{{\'main.rowPerPage\' | translate}}:\', of: \'{{\'main.of\' | translate}}\'}" md-page-select></md-table-pagination> </div> </div>'),a.put("report/student.statistics.byperiod.html",'<div class="ois-form-layout-padding ois-form-layout" ng-cloak> <div flex> <fieldset> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'main.searchlabel\' | translate}}</legend> <form ng-submit="loadData()" novalidate> <div layout="row"> <div layout="row" flex="45"> <md-input-container> <label>{{\'main.from\' | translate}}</label> <md-datepicker ng-model="criteria.from"></md-datepicker> </md-input-container> <md-input-container flex-offset="5"> <label>{{\'main.thru\' | translate}}</label> <md-datepicker ng-model="criteria.thru" md-min-date="criteria.from"></md-datepicker> </md-input-container> </div> </div> <div layout="row"> <div flex="45"> <hois-autocomplete ng-model="criteria.curriculum" method="curriculums" label="report.studentstatisticsbyperiod.curriculum" multiple></hois-autocomplete> </div> <md-input-container flex="50" flex-offset="5"> <label>{{\'report.studentstatisticsbyperiod.result\' | translate}}</label> <md-select ng-model="criteria.result"> <md-option md-option-empty></md-option> <md-option value="OPPURSTAATUS_A">{{\'report.studentstatisticsbyperiod.OPPURSTAATUS_A\' | translate}}</md-option> <md-option value="OPPURSTAATUS_K">{{\'report.studentstatisticsbyperiod.OPPURSTAATUS_K\' | translate}}</md-option> <md-option value="OPPURSTAATUS_L">{{\'report.studentstatisticsbyperiod.OPPURSTAATUS_L\' | translate}}</md-option> </md-select> </md-input-container> </div> <div layout="row"> <md-button type="submit" class="md-raised md-primary">{{\'main.button.search\' | translate}}</md-button> <md-button class="md-raised" ng-click="clearCriteria()">{{\'main.button.clear\' | translate}}</md-button> <a ng-href="{{excel(formState.xlsUrl, criteria)}}" target="_blank" class="md-button md-raised">{{\'report.excel\' | translate}}</a> </div> <div flex-xs="0" flex-gt-xs="0" flex-gt-sm="50"></div> </form> </fieldset> </div> </div> <div layout-padding> <div flex> <md-table-container> <table md-table md-progress="tabledata.$promise"> <thead md-head md-order="criteria.order" md-on-reorder="loadData"> <tr md-row> <th md-column md-order-by="curriculumVersion.code">{{\'report.studentstatisticsbyperiod.curriculum\' | translate}}</th> <th md-column ng-if="formState.resultType !== \'OPPURSTAATUS_L\'" ng-repeat="cl in formState.resultDef">{{currentLanguageNameField(cl)}}</th> <th md-column>{{formState.resultType === \'OPPURSTAATUS_L\' ? \'report.studentstatisticsbyperiod.finished\' : \'report.studentstatisticsbyperiod.total\' | translate}}</th> <th md-column ng-if="formState.resultType === \'OPPURSTAATUS_L\'">{{\'report.studentstatisticsbyperiod.isCumLaude\' | translate}}</th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="row in tabledata.content" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell>{{currentLanguageNameField(row)}}</td> <td md-cell ng-if="formState.resultType !== \'OPPURSTAATUS_L\'" ng-repeat="cl in formState.resultDef">{{::row.result[cl.code] || 0}}</td> <td md-cell>{{::row.total}}</td> <td md-cell ng-if="formState.resultType === \'OPPURSTAATUS_L\'">{{::row.result[\'true\'] || 0}}</td> </tr> </tbody> </table> </md-table-container> <md-table-pagination md-limit="criteria.size" md-limit-options="[10, 20, 50]" md-page="criteria.page" md-total="{{tabledata.totalElements}}" md-on-paginate="loadData" md-label="{page: \'{{\'main.page\' | translate}}:\', rowsPerPage: \'{{\'main.rowPerPage\' | translate}}:\', of: \'{{\'main.of\' | translate}}\'}" md-page-select></md-table-pagination> </div> </div>'),a.put("report/student.statistics.html",'<div class="ois-form-layout-padding ois-form-layout" ng-cloak> <div flex> <fieldset> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'main.searchlabel\' | translate}}</legend> <form ng-submit="loadData()" novalidate> <div layout="row"> <div layout="row" flex="45"> <md-input-container> <label>{{\'main.date\' | translate}}</label> <md-datepicker ng-model="criteria.date"></md-datepicker> </md-input-container> </div> </div> <div layout="row"> <div flex="45"> <hois-autocomplete ng-model="criteria.curriculum" method="curriculums" label="report.studentstatistics.curriculum" multiple></hois-autocomplete> </div> <md-input-container flex="50" flex-offset="5"> <label>{{\'report.studentstatistics.result\' | translate}}</label> <md-select ng-model="criteria.result"> <md-option md-option-empty></md-option> <md-option value="FINALLIKAS">{{\'report.studentstatistics.FINALLIKAS\' | translate}}</md-option> <md-option value="OPPEVORM">{{\'report.studentstatistics.OPPEVORM\' | translate}}</md-option> <md-option value="OPPURSTAATUS">{{\'report.studentstatistics.OPPURSTAATUS\' | translate}}</md-option> </md-select> </md-input-container> </div> <div layout="row"> <md-button type="submit" class="md-raised md-primary">{{\'main.button.search\' | translate}}</md-button> <md-button class="md-raised" ng-click="clearCriteria()">{{\'main.button.clear\' | translate}}</md-button> <a ng-href="{{excel(formState.xlsUrl, criteria)}}" target="_blank" class="md-button md-raised">{{\'report.excel\' | translate}}</a> </div> <div flex-xs="0" flex-gt-xs="0" flex-gt-sm="50"></div> </form> </fieldset> </div> </div> <div layout-padding> <div flex> <md-table-container> <table md-table md-progress="tabledata.$promise"> <thead md-head md-order="criteria.order" md-on-reorder="loadData"> <tr md-row> <th md-column md-order-by="curriculumVersion.code">{{\'report.studentstatistics.curriculum\' | translate}}</th> <th md-column ng-repeat="cl in formState.resultDef">{{currentLanguageNameField(cl)}}</th> <th md-column>{{\'report.studentstatistics.total\' | translate}}</th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="row in tabledata.content" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell>{{currentLanguageNameField(row)}}</td> <td md-cell ng-repeat="cl in formState.resultDef">{{::row.result[cl.code] || 0}}</td> <td md-cell>{{::row.total}}</td> </tr> </tbody> </table> </md-table-container> <md-table-pagination md-limit="criteria.size" md-limit-options="[10, 20, 50]" md-page="criteria.page" md-total="{{tabledata.totalElements}}" md-on-paginate="loadData" md-label="{page: \'{{\'main.page\' | translate}}:\', rowsPerPage: \'{{\'main.rowPerPage\' | translate}}:\', of: \'{{\'main.of\' | translate}}\'}" md-page-select></md-table-pagination> </div> </div>'),a.put("report/teachers.load.higher.html",'<div class="ois-form-layout-padding ois-form-layout" ng-cloak> <div flex> <fieldset> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'main.searchlabel\' | translate}}</legend> <form ng-submit="loadData()" novalidate> <div layout="row"> <md-input-container flex="45" flex-sm="100" flex-xs="100"> <label class="textInput">{{\'report.teachersload.studyYear\' | translate}}</label> <hois-select ng-model="criteria.studyYear" values="formState.studyYears" required autofocus></hois-select> </md-input-container> <md-input-container flex="50" flex-offset="5" flex-sm="100" flex-xs="100"> <label class="textInput">{{\'report.teachersload.studyPeriod\' | translate}}</label> <hois-select ng-model="criteria.studyPeriod" values="criteria.studyYear ? formState.studyPeriods[criteria.studyYear] : formState.allStudyPeriods"></hois-select> </md-input-container> </div> <div layout="row"> <div flex="45" flex-sm="100" flex-xs="100"> <hois-autocomplete ng-model="criteria.subject" method="subjects" label="{{\'report.teachersload.subject\' | translate}}"></hois-autocomplete> </div> <div flex="50" flex-offset="5"> <hois-autocomplete ng-model="criteria.teacher" method="teachers" label="{{\'report.teachersload.teacher\' | translate}}"></hois-autocomplete> </div> </div> <div layout="row"> <md-button type="submit" class="md-raised md-primary">{{\'main.button.search\' | translate}}</md-button> <md-button class="md-raised" ng-click="clearCriteria()">{{\'main.button.clear\' | translate}}</md-button> </div> <div flex-xs="0" flex-gt-xs="0" flex-gt-sm="50"></div> </form> </fieldset> </div> </div> <div layout-padding> <div flex> <md-table-container> <table md-table md-progress="tabledata.$promise"> <thead md-head md-order="criteria.order" md-on-reorder="loadData"> <tr md-row> <th md-column>{{\'report.teachersload.studyYear\' | translate}}</th> <th md-column>{{\'report.teachersload.studyPeriod\' | translate}}</th> <th md-column>{{\'report.teachersload.subject\' | translate}}</th> <th md-column>{{\'report.teachersload.subjectcode\' | translate}}</th> <th md-column>{{\'report.teachersload.teacher\' | translate}}</th> <th md-column>{{\'report.teachersload.plannedhours\' | translate}}</th> <th md-column>{{\'report.teachersload.actualhours\' | translate}}</th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="row in tabledata.content" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell>{{currentLanguageNameField(row.studyYear)}}</td> <td md-cell>{{currentLanguageNameField(row.studyPeriod)}}</td> <td md-cell> <div ng-repeat="subject in row.subjects"> <hr ng-if="!$first"> {{currentLanguageNameField(subject.subject)}} </div> </td> <td md-cell> <div ng-repeat="subject in row.subjects"> <hr ng-if="!$first"> {{::subject.code}} </div> </td> <td md-cell>{{::row.teacher}}</td> <td md-cell>{{::row.plannedhours}}</td> <td md-cell>{{::row.actualhours}}</td> </tr> </tbody> </table> </md-table-container> <md-table-pagination md-limit="criteria.size" md-limit-options="[10, 20, 50]" md-page="criteria.page" md-total="{{tabledata.totalElements}}" md-on-paginate="loadData" md-label="{page: \'{{\'main.page\' | translate}}:\', rowsPerPage: \'{{\'main.rowPerPage\' | translate}}:\', of: \'{{\'main.of\' | translate}}\'}" md-page-select></md-table-pagination> </div> </div>'),a.put("report/teachers.load.vocational.html",'<div class="ois-form-layout-padding ois-form-layout" ng-cloak> <div flex> <fieldset> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'main.searchlabel\' | translate}}</legend> <form ng-submit="loadData()" novalidate> <div layout="row"> <md-input-container flex="45" flex-sm="100" flex-xs="100"> <label class="textInput">{{\'report.teachersload.studyYear\' | translate}}</label> <hois-select ng-model="criteria.studyYear" values="formState.studyYears" required autofocus></hois-select> </md-input-container> <md-input-container flex="50" flex-offset="5" flex-sm="100" flex-xs="100" flex-offset-xs="0" flex-offset-sm="0"> <label class="textInput">{{\'report.teachersload.studyPeriod\' | translate}}</label> <hois-select ng-model="criteria.studyPeriod" values="criteria.studyYear ? formState.studyPeriods[criteria.studyYear] : formState.allStudyPeriods"></hois-select> </md-input-container> </div> <div layout="row"> <div flex="45"> <hois-autocomplete ng-model="criteria.module" method="vocationalmodules" label="{{\'report.teachersload.module\' | translate}}"></hois-autocomplete> </div> <div flex="50" flex-offset="5" flex-sm="100" flex-offset-xs="0" flex-offset-sm="0"> <hois-autocomplete ng-model="criteria.teacher" method="teachers" label="{{\'report.teachersload.teacher\' | translate}}"></hois-autocomplete> </div> </div> <div layout="row"> <md-button type="submit" class="md-raised md-primary">{{\'main.button.search\' | translate}}</md-button> <md-button class="md-raised" ng-click="clearCriteria()">{{\'main.button.clear\' | translate}}</md-button> </div> <div flex-xs="0" flex-gt-xs="0" flex-gt-sm="50"></div> </form> </fieldset> </div> </div> <div layout-padding> <div flex> <md-table-container> <table md-table md-progress="tabledata.$promise"> <thead md-head md-order="criteria.order" md-on-reorder="loadData"> <tr md-row> <th md-column>{{\'report.teachersload.studyYear\' | translate}}</th> <th md-column>{{\'report.teachersload.studyPeriod\' | translate}}</th> <th md-column>{{\'report.teachersload.teacher\' | translate}}</th> <th md-column>{{\'report.teachersload.module\' | translate}}</th> <th md-column>{{\'report.teachersload.plannedhours\' | translate}}</th> <th md-column>{{\'report.teachersload.actualhours\' | translate}}</th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="row in tabledata.content" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell>{{currentLanguageNameField(row.studyYear)}}</td> <td md-cell>{{currentLanguageNameField(row.studyPeriod)}}</td> <td md-cell>{{::row.teacher}}</td> <td md-cell> <div ng-repeat="module in row.modules"> <hr ng-if="!$first"> {{currentLanguageNameField(module.module)}} </div> </td> <td md-cell>{{::row.plannedhours}}</td> <td md-cell>{{::row.actualhours}}</td> </tr> </tbody> </table> </md-table-container> <md-table-pagination md-limit="criteria.size" md-limit-options="[10, 20, 50]" md-page="criteria.page" md-total="{{tabledata.totalElements}}" md-on-paginate="loadData" md-label="{page: \'{{\'main.page\' | translate}}:\', rowsPerPage: \'{{\'main.rowPerPage\' | translate}}:\', of: \'{{\'main.of\' | translate}}\'}" md-page-select></md-table-pagination> </div> </div>'),a.put("room/room.edit.html",'<div class="ois-form-layout-padding ois-form-layout" ng-cloak> <div flex> <form name="roomForm"> <div layout="column"> <md-input-container class="md-block"> <label>{{\'room.building\' | translate}}</label> <hois-select ng-model="record.building" name="building" type="building" required></hois-select> </md-input-container> <div layout="row" flex> <md-input-container class="md-block" flex="20"> <label class="textInput">{{\'room.code\' | translate}}</label> <input ng-model="record.code" name="code" type="text" required md-maxlength="100"> </md-input-container> <md-input-container class="md-block" flex-offset="5" flex> <label>{{\'room.name\' | translate}}</label> <input ng-model="record.name" name="name" type="text" md-maxlength="100"> </md-input-container> </div> <div layout="row" flex> <md-input-container class="md-block" flex="20"> <label class="textInput">{{\'room.seats\' | translate}}</label> <input ng-model="record.seats" name="seats" type="number" min="0"> </md-input-container> <div flex="50" layout-align="start center" layout="row" flex-offset="5"> <md-checkbox ng-model="record.isStudy" name="isStudy"> {{\'room.isStudy\' | translate}} </md-checkbox> </div> </div> <div layout="row"> <md-input-container flex> <label>{{\'room.equipment\' | translate}}</label> <hois-classifier-select ng-model="formState.newEquipment" main-classifier-code="SEADMED"></hois-classifier-select> </md-input-container> <md-input-container flex> <md-button ng-show="formState.newEquipment" ng-click="addEquipment()" class="md-primary"> <md-icon ng-class="\'md-primary md-hue-2\'" md-font-set="material-icons">add</md-icon></md-button> </md-input-container> </div> <md-list> <md-list-item ng-repeat="equipment in formState.roomEquipment"> <md-input-container flex="10"> <label class="textInput">{{currentLanguageNameField(equipment.equipment)}}</label> <input ng-model="equipment.equipmentCount" type="number" min="0" max="100000000"> </md-input-container> <md-input-container flex> &nbsp;<a ng-click="deleteEquipment(equipment.equipment.code)" class="remove">&times;</a> </md-input-container> </md-list-item> </md-list> </div> </form> <md-button ng-click="update()" class="md-raised md-primary">{{\'main.button.save\' | translate}}</md-button> <md-button ng-click="delete()" ng-show="record.id" class="md-raised">{{\'main.button.delete\' | translate}}</md-button> <md-button ng-href="#/rooms/search" class="md-raised">{{\'main.button.back\' | translate}}</md-button> </div> </div>'),
a.put("room/room.search.html",'<div class="ois-form-layout-padding"> <div flex> <form ng-submit="loadData()" novalidate layout="column" class="nomargin"> <fieldset tabindex="1"> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'main.searchlabel\' | translate}}</legend> <div layout="row" layout-sm="column" layout-xs="column"> <!--div class="indentForToast"></div--> <md-input-container flex="45" flex-sm="100" flex-xs="100"> <label class="textInput">{{\'building.name\' | translate}}</label> <input ng-model="criteria.buildingName" name="buildingName" type="text"> </md-input-container> <md-input-container flex="50" flex-sm="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label class="textInput">{{\'building.code\' | translate}}</label> <input ng-model="criteria.buildingCode" name="buildingCode" type="text" autofocus> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="45" flex-sm="100" flex-xs="100"> <label class="textInput">{{\'room.name\' | translate}}</label> <input ng-model="criteria.name" name="name" type="text"> </md-input-container> <md-input-container flex="50" flex-sm="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label class="textInput">{{\'room.code\' | translate}}</label> <input ng-model="criteria.code" name="code" type="text"> </md-input-container> </div> </fieldset> <div layout="row"> <md-button type="submit" class="md-raised md-primary">{{\'main.button.search\' | translate}}</md-button> <md-button class="md-raised" ng-click="clearCriteria()">{{\'main.button.clear\' | translate}}</md-button> <md-button class="md-raised" ng-if="isAuthorized(\'ROLE_OIGUS_M_TEEMAOIGUS_HOONERUUM\')" ng-href="#/rooms/new">{{\'room.add\' | translate}}</md-button> <md-button class="md-raised" ng-if="isAuthorized(\'ROLE_OIGUS_M_TEEMAOIGUS_HOONERUUM\')" ng-href="#/buildings/new">{{\'building.add\' | translate}}</md-button> </div> <div flex-xs="0" flex-gt-xs="0" flex-gt-sm="50"></div> </form> </div> </div> <div layout-padding> <div flex> <md-table-container> <table md-table md-progress="tabledata.$promise"> <thead md-head md-order="criteria.order" md-on-reorder="loadData"> <tr md-row> <th md-column md-order-by="name">{{\'building.name\' | translate}}</th> <th md-column md-order-by="code">{{\'building.code\' | translate}}</th> <th md-column md-order-by="address">{{\'building.address\' | translate}}</th> <th md-column md-order-by="rooms.name">{{\'room.name\' | translate}}</th> <th md-column md-order-by="rooms.code">{{\'room.code\' | translate}}</th> <th md-column md-numeric md-order-by="rooms.seats">{{\'room.seats\' | translate}}</th> <th md-column>{{\'room.isStudyInTable\' | translate}}</th> <th md-column>{{\'room.equipment\' | translate}}</th> <th md-column></th> <th md-column></th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="row in tabledata.content" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell>{{::row.buildingName}}</td> <td md-cell>{{::row.buildingCode}}</td> <td md-cell>{{::row.buildingAddress}}</td> <td md-cell>{{::row.name}}</td> <td md-cell>{{::row.code}}</td> <td md-cell>{{::row.seats}}</td> <td md-cell>{{row.isStudy ? \'main.yes\' : \'main.no\' | translate}}</td> <td md-cell> <table> <tr ng-repeat="device in row.equipment"> <td>{{currentLanguageNameField(device.equipment)}}</td> <td>{{::device.equipmentCount}}</td> </tr> </table> </td> <td md-cell> <md-button md-no-ink class="md-primary change-button" ng-if="row.id && isAuthorized(\'ROLE_OIGUS_M_TEEMAOIGUS_HOONERUUM\')" ng-href="#/rooms/{{::row.id}}/edit">{{\'room.change\' | translate}}</md-button> </td> <td md-cell> <md-button md-no-ink class="md-primary change-button" ng-if="isAuthorized(\'ROLE_OIGUS_M_TEEMAOIGUS_HOONERUUM\')" ng-href="#/buildings/{{::row.building}}/edit">{{\'building.change\' | translate}}</md-button> </td> </tr> </tbody> </table> </md-table-container> <md-table-pagination md-limit="criteria.size" md-limit-options="[10, 20, 50]" md-page="criteria.page" md-total="{{tabledata.totalElements}}" md-on-paginate="loadData" md-label="{page: \'{{\'main.page\' | translate}}:\', rowsPerPage: \'{{\'main.rowPerPage\' | translate}}:\', of: \'{{\'main.of\' | translate}}\'}" md-page-select></md-table-pagination> </div> </div>'),a.put("rtip/rtip.sync.html",'<div layout-padding> <div flex> <form layout="column" name="rtipSyncForm"> <div layout="row"> <md-input-container flex="20" flex-sm="100" flex-xs="100"> <label>{{\'rtip.dateRange\' | translate}}</label> <input type="hidden"> </md-input-container> <div flex="33"> <md-input-container flex> <label>{{\'main.from\' | translate}}</label> <md-datepicker ng-model="criteria.from" md-max-date="criteria.thru" required></md-datepicker> </md-input-container> <md-input-container flex> <label>{{\'main.thru\' | translate}}</label> <md-datepicker ng-model="criteria.thru" md-min-date="criteria.from" required></md-datepicker> </md-input-container> </div> </div> <div layout="row"> <md-button class="md-raised" ng-click="rtipSync()">{{\'rtip.contract\' | translate}}</md-button> <md-button class="md-raised" ng-click="rtipZemploees()">{{\'rtip.sync\' | translate}}</md-button> </div> </form> </div> </div>'),a.put("saisClassifier/saisClassifier.content.list.html",'<div layout-padding> <form ng-submit="loadData()" novalidate> <div flex> <div layout="row"> <div flex-xs="100" flex-gt-xs="100" flex-gt-sm="50" layout="column"> <!--div class="indentForToast"></div--> <h3>{{currentLanguageNameField(mainClass)}}</h3> <md-input-container> <label class="textInput">{{\'saisClassifier.value\' | translate}}</label> <input ng-model="criteria.value" type="text" autofocus> </md-input-container> <md-input-container> <label class="textInput">{{\'saisClassifier.name\' | translate}}</label> <input ng-model="criteria.name" type="text"> </md-input-container> <div layout="row"> <md-button type="submit" class="md-raised md-primary">{{\'main.button.search\' | translate}}</md-button> <md-button class="md-raised" ng-click="clearCriteria()">{{\'main.button.clear\' | translate}}</md-button> <md-button class="md-raised" ng-href="#/saisClassifier">{{\'main.button.back\' | translate}}</md-button> </div> </div> <div flex-xs="0" flex-gt-xs="0" flex-gt-sm="50"></div> </div> </div> </form> </div> <div layout-padding> <div flex> <md-table-container> <table md-table md-progress="tabledata.$promise"> <thead md-head md-order="criteria.order" md-on-reorder="loadData"> <tr md-row> <th md-column md-order-by="value">{{\'saisClassifier.value\' | translate}}</th> <th md-column md-order-by="nameEt">{{\'saisClassifier.nameEt\' | translate}}</th> <th md-column md-order-by="nameEn">{{\'saisClassifier.nameEn\' | translate}}</th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="row in tabledata.content" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell>{{::row.value}}</td> <td md-cell>{{::row.nameEt}}</td> <td md-cell>{{::row.nameEn}}</td> </tr> </tbody> </table> </md-table-container> <md-table-pagination md-limit="criteria.size" md-limit-options="[10, 20, 50]" md-page="criteria.page" md-total="{{tabledata.totalElements}}" md-on-paginate="loadData" md-label="{page: \'{{\'main.page\' | translate}}:\', rowsPerPage: \'{{\'main.rowPerPage\' | translate}}:\', of: \'{{\'main.of\' | translate}}\' }" md-page-select></md-table-pagination> </div> </div>'),a.put("saisClassifier/saisClassifier.list.html",'<div layout-padding> <div flex> <fieldset> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'main.searchlabel\' | translate}}</legend> <form ng-submit="loadData()"> <div flex> <div layout="row"> <div flex-xs="100" flex-gt-xs="100" flex-gt-sm="50" layout="column"> <!--div class="indentForToast"></div--> <md-input-container> <label class="textInput">{{\'saisClassifier.name\' | translate}}</label> <input ng-model="criteria.name" type="text" autofocus> </md-input-container> <div layout="row"> <md-button type="submit" class="md-raised md-primary">{{\'main.button.search\' | translate}}</md-button> <md-button class="md-raised" ng-click="clearCriteria()">{{\'main.button.clear\' | translate}}</md-button> <md-button class="md-raised" ng-click="saisImport()">{{\'saisClassifier.saisImport\' | translate}}</md-button> </div> </div> <div flex-xs="0" flex-gt-xs="0" flex-gt-sm="50"></div> </div> </div> </form> </fieldset> </div> </div> <div layout-padding> <div flex> <md-table-container> <table md-table md-progress="tabledata.$promise"> <thead md-head md-order="criteria.order" md-on-reorder="loadData"> <tr md-row> <th md-column md-order-by="nameEt">{{\'saisClassifier.klassifikaator\' | translate}}</th> <th md-column md-order-by="count">{{\'saisClassifier.count\' | translate}}</th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="row in tabledata.content" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell><a ng-href="#/saisClassifier/{{::row.code}}?_menu">{{::row.nameEt}}</a></td> <td md-cell>{{::row.count}}</td> </tr> </tbody> </table> </md-table-container> <md-table-pagination md-limit="criteria.size" md-limit-options="[10, 20, 50]" md-page="criteria.page" md-total="{{tabledata.totalElements}}" md-on-paginate="loadData" md-label="{page: \'{{\'main.page\' | translate}}:\', rowsPerPage: \'{{\'main.rowPerPage\' | translate}}:\', of: \'{{\'main.of\' | translate}}\' }" md-page-select></md-table-pagination> </div> </div>'),a.put("scholarship/scholarship.application.annul.edit.html",'<div class="ois-form-layout-padding ois-form-layout" ng-cloak> <div layout="column"> <div layout="row" flex="100" flex-sm="100" flex-xs="100"> {{stipend ? \'stipend.annul.stipendStudentList\' : \'stipend.annul.grantStudentList\' | translate}} </div> </div> <table md-table class="secondary-table"> <thead md-head> <tr md-row> <th md-column>{{\'stipend.fullName\' | translate}}</th> <th md-column>{{\'stipend.student.idCode\' | translate}}</th> <th md-column>{{\'stipend.rejectComment\' | translate}}</th> <th md-column>&nbsp;</th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="rejection in rejections" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell>{{rejection.fullName}}</td> <td md-cell>{{rejection.idCode}}</td> <td md-cell> <div flex><input flex type="text" ng-model="rejection.rejectComment" style="width: 100%" autofocus maxlength="100"></div> </td> <td md-cell> <md-button class="remove nomargin" ng-click="removeFromArray(rejections, rejection)">&times;</md-button> </td> </tr> </tbody> </table> <div layout="row" ng-if="rejections.length > 0"> <md-button class="md-raised md-primary" ng-click="annul()">{{\'main.button.annul\' | translate}}</md-button> <md-button class="md-raised" ng-click="back(\'#/scholarships/applications/\' + stipend ? \'scholarships\' : \'grants\')">{{\'main.button.back\' | translate}}</md-button> </div> </div>'),a.put("scholarship/scholarship.application.list.grants.html",'<div class="ois-form-layout-padding ois-form-layout" ng-cloak> <div layout="column"> <fieldset> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'main.searchlabel\' | translate}}</legend> <form ng-submit="reloadTable()" name="applicationSearchForm"> <div layout="row" flex> <md-input-container flex="20"> <label class="textInput">{{\'stipend.grantType\' | translate}}</label> <hois-classifier-select required ng-model="criteria.type" name="type" model-value-attr="code" main-classifier-code="STIPTOETUS" show-only-values="formState.allowedStipendTypes" ng-change="resetCurriculum()"></hois-classifier-select> </md-input-container> <div layout="row" flex="20" flex-offset="5"> <md-input-container flex ng-if="criteria.type !== \'STIPTOETUS_POHI\'"> <label class="textInput">{{\'stipend.curriculums\' | translate}}</label> <hois-select flex ng-model="criteria.curriculum" type="curriculum" label="stipend.curriculum" multiple></hois-select> </md-input-container> <md-input-container flex ng-if="criteria.type === \'STIPTOETUS_POHI\'"> <label class="textInput">{{\'stipend.curriculum\' | translate}}</label> <hois-select flex ng-model="criteria.curriculum" type="curriculum" label="stipend.curriculum" required></hois-select> </md-input-container> </div> <md-input-container flex="20" flex-offset="5"> <label class="textInput">{{\'stipend.courses\' | translate}}</label> <hois-classifier-select ng-model="criteria.courses" name="type" model-value-attr="code" main-classifier-code="KURSUS" multiple></hois-classifier-select> </md-input-container> <div layout="row" flex="20" flex-offset="5"> <md-input-container flex> <label class="textInput">{{\'stipend.applicant\' | translate}}</label> <input type="text" ng-model="criteria.studentName" name="nameEt" md-maxlength="500"> </md-input-container> </div> </div> <div layout="row" flex> <md-input-container flex="20"> <label class="textInput">{{\'stipend.grantName\' | translate}}</label> <input type="text" ng-model="criteria.nameEt" name="nameEt" md-maxlength="500"> </md-input-container> <md-input-container flex="20" flex-offset="5"> <label class="textInput">{{\'stipend.studyPeriod\' | translate}}</label> <hois-select ng-model="criteria.studyPeriod" values="studyPeriods"></hois-select> </md-input-container> <md-input-container flex="20" flex-offset="5"> <label class="textInput">{{\'stipend.status\' | translate}}</label> <hois-classifier-select ng-model="criteria.status" name="type" model-value-attr="code" main-classifier-code="STIPTOETUS_STAATUS"></hois-classifier-select> </md-input-container> </div> <div layout="row"> <md-button ng-click="reloadTable()" class="md-raised md-primary">{{\'main.button.search\' | translate}}</md-button> <md-button class="md-raised" ng-click="clearCriteria()">{{\'main.button.clear\' | translate}}</md-button> </div> </form> </fieldset> <br> <div style="overflow: scroll"> <table md-table class="secondary-table" ng-if="submittedType"> <thead md-head> <tr md-row> <th md-column> <md-input-container> <md-checkbox ng-model="selectAllApplications" aria-label="mySchool" ng-change="updateAllApplicationCheckBoxes(selectAllApplications)"> </md-checkbox> </md-input-container> </th> <th md-column>{{\'stipend.nr\' | translate}}</th> <th md-column>{{\'stipend.type\' | translate}}</th> <th md-column>{{\'stipend.grantName\' | translate}}</th> <th md-column>{{\'stipend.curriculum\' | translate}}</th> <th md-column>{{\'stipend.applicant\' | translate}}</th> <th md-column>{{\'stipend.student.idCode\' | translate}}</th> <!-- only for pohi and eri--> <th md-column ng-if="submittedType !== \'STIPTOETUS_SOIDU\'">{{\'stipend.averageMarkShort\' | translate}}</th> <th md-column ng-if="submittedType !== \'STIPTOETUS_SOIDU\'">{{\'stipend.student.lastPeriodMark\' | translate}}</th> <th md-column ng-if="submittedType !== \'STIPTOETUS_SOIDU\'">{{\'stipend.student.curriculumCompletion\' | translate}}</th> <!-- only for soidu --> <th md-column ng-if="submittedType === \'STIPTOETUS_SOIDU\'">{{\'stipend.compensationReason\' | translate}}</th> <th md-column ng-if="submittedType === \'STIPTOETUS_SOIDU\'">{{\'stipend.compensationFrequency\' | translate}}</th> <th md-column>{{\'stipend.student.isTeacherConfirm\' | translate}}</th> <th md-column>{{\'stipend.status\' | translate}}</th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="application in applications track by $index" ng-class-odd="\'odd\'" ng-class-even="\'even\'" ng-class="{\'scholarship-bottom-border\': $index + 1 === allowedCount}"> <td md-cell> <md-input-container> <md-checkbox ng-model="application._selected" aria-label="mySchool"> </md-checkbox> </md-input-container> </td> <td md-cell>{{$index + 1}}</td> <td md-cell>{{currentLanguageNameField(application.type)}}</td> <td md-cell> <a href="#/scholarships/applications/{{application.id}}">{{application.termNameEt}}</a> </td> <td md-cell>{{application.curriculumCode ? application.curriculumCode : \'-\'}}</td> <td md-cell> <a href="#/students/{{application.studentId}}/main">{{application.studentName ? application.studentName : \'-\'}}</a> </td> <td md-cell>{{application.idcode ? application.idcode : \'-\'}}</td> <!-- only for pohi and eri--> <td md-cell ng-if="submittedType !== \'STIPTOETUS_SOIDU\'">{{application.averageMark ? application.averageMark : \'-\'}}</td> <td md-cell ng-if="submittedType !== \'STIPTOETUS_SOIDU\'">{{application.lastPeriodMark ? application.lastPeriodMark : \'-\'}}</td> <td md-cell ng-if="submittedType !== \'STIPTOETUS_SOIDU\'">{{application.curriculumCompletion ? application.curriculumCompletion : \'-\'}}</td> <!-- only for soidu --> <td md-cell ng-if="submittedType === \'STIPTOETUS_SOIDU\'">{{application.compensationReason ? currentLanguageNameField(application.compensationReason) : \'-\'}}</td> <td md-cell ng-if="submittedType === \'STIPTOETUS_SOIDU\'">{{application.compensationFrequency ? currentLanguageNameField(application.compensationFrequency) : \'-\'}}</td> <td md-cell>{{application.isTeacherConfirm ? \'main.yes\' : \'main.no\' | translate}}</td> <td md-cell>{{currentLanguageNameField(application.status)}} <md-tooltip ng-if="[\'STIPTOETUS_STAATUS_L\', \'STIPTOETUS_STAATUS_T\'].indexOf(application.status.code) !== -1  && application.rejectComment">{{application.rejectComment}}</md-tooltip> </td> </tr> </tbody> </table> </div> <div layout="row" ng-if="applications.length > 0"> <md-button class="md-raised md-primary" ng-click="accept()" ng-if="canManage">{{\'main.button.accept\' | translate}}</md-button> <md-button class="md-raised" ng-click="annul()" ng-if="canManage">{{\'main.button.annul\' | translate}}</md-button> <md-button class="md-raised" ng-click="reject()" ng-if="canManage">{{\'main.button.reject\' | translate}}</md-button> <md-button class="md-raised" ng-click="refreshResults()">{{\'main.button.refreshResults\' | translate}}</md-button> <md-button class="md-raised" ng-click="checkComplies()">{{\'main.button.checkComplies\' | translate}}</md-button> </div> </div> </div>'),a.put("scholarship/scholarship.application.list.scho.html",'<div class="ois-form-layout-padding ois-form-layout" ng-cloak> <div layout="column"> <fieldset> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'main.searchlabel\' | translate}}</legend> <form ng-submit="reloadTable()" name="applicationSearchForm"> <div layout="row" flex> <md-input-container flex="20"> <label class="textInput">{{\'stipend.scholarshipType\' | translate}}</label> <hois-classifier-select required ng-model="criteria.type" name="type" model-value-attr="code" main-classifier-code="STIPTOETUS" show-only-values="formState.allowedStipendTypes" ng-change="resetCurriculum()"></hois-classifier-select> </md-input-container> <div layout="row" flex="20" flex-offset="5"> <md-input-container flex ng-if="criteria.type !== \'STIPTOETUS_ERIALA\'"> <label class="textInput">{{\'stipend.curriculums\' | translate}}</label> <hois-select flex ng-model="criteria.curriculum" type="curriculum" label="stipend.curriculum" multiple></hois-select> </md-input-container> <md-input-container flex ng-if="criteria.type === \'STIPTOETUS_ERIALA\'"> <label class="textInput">{{\'stipend.curriculum\' | translate}}</label> <hois-select flex ng-model="criteria.curriculum" type="curriculum" label="stipend.curriculum" multiple required></hois-select> </md-input-container> </div> <md-input-container flex="20" flex-offset="5"> <label class="textInput">{{\'stipend.courses\' | translate}}</label> <hois-classifier-select ng-model="criteria.courses" name="type" model-value-attr="code" main-classifier-code="KURSUS" multiple></hois-classifier-select> </md-input-container> <div layout="row" flex="20" flex-offset="5"> <md-input-container flex> <label class="textInput">{{\'stipend.applicant\' | translate}}</label> <input type="text" ng-model="criteria.studentName" name="nameEt" md-maxlength="500"> </md-input-container> </div> </div> <div layout="row" flex> <md-input-container flex="20"> <label class="textInput">{{\'stipend.scholarshipName\' | translate}}</label> <input type="text" ng-model="criteria.nameEt" name="nameEt" md-maxlength="500"> </md-input-container> <md-input-container flex="20" flex-offset="5"> <label class="textInput">{{\'stipend.studyPeriod\' | translate}}</label> <hois-select ng-model="criteria.studyPeriod" values="studyPeriods"></hois-select> </md-input-container> <md-input-container flex="20" flex-offset="5"> <label class="textInput">{{\'stipend.status\' | translate}}</label> <hois-classifier-select ng-model="criteria.status" name="type" model-value-attr="code" main-classifier-code="STIPTOETUS_STAATUS"></hois-classifier-select> </md-input-container> </div> <div layout="row"> <md-button ng-click="reloadTable()" class="md-raised md-primary">{{\'main.button.search\' | translate}}</md-button> <md-button class="md-raised" ng-click="clearCriteria()">{{\'main.button.clear\' | translate}}</md-button> </div> </form> </fieldset> <br> <table md-table class="secondary-table" ng-if="submittedType"> <thead md-head> <tr md-row> <th md-column> <md-input-container> <md-checkbox ng-model="selectAllApplications" aria-label="mySchool" ng-change="updateAllApplicationCheckBoxes(selectAllApplications)"> </md-checkbox> </md-input-container> </th> <th md-column>{{\'stipend.nr\' | translate}}</th> <th md-column>{{\'stipend.type\' | translate}}</th> <th md-column>{{\'stipend.scholarshipName\' | translate}}</th> <th md-column>{{\'stipend.curriculum\' | translate}}</th> <th md-column>{{\'stipend.applicant\' | translate}}</th> <th md-column>{{\'stipend.student.idCode\' | translate}}</th> <th md-column>{{\'stipend.student.averageMark\' | translate}}</th> <th md-column>{{\'stipend.student.lastPeriodMark\' | translate}}</th> <th md-column>{{\'stipend.student.credits\' | translate}}</th> <th md-column>{{\'stipend.student.status\' | translate}}</th> <th md-column>&nbsp;</th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="application in applications" ng-class-odd="\'odd\'" ng-class-even="\'even\'" ng-class="{\'scholarship-bottom-border\': $index + 1 === allowedCount}"> <td md-cell> <md-input-container> <md-checkbox ng-model="application._selected" aria-label="mySchool"> </md-checkbox> </md-input-container> </td> <td md-cell>-</td> <td md-cell>{{currentLanguageNameField(application.type)}}</td> <td md-cell> <a href="#/scholarships/applications/{{application.id}}">{{application.termNameEt}}</a> </td> <td md-cell>{{application.curriculumCode ? application.curriculumCode : \'-\'}}</td> <td md-cell> <a href="#/students/{{application.studentId}}/main">{{application.studentName ? application.studentName : \'-\'}}</a> </td> <td md-cell>{{application.idcode ? application.idcode : \'-\'}}</td> <td md-cell>{{application.averageMark ? application.averageMark : \'-\'}}</td> <td md-cell>{{application.lastPeriodMark ? application.lastPeriodMark : \'-\'}}</td> <td md-cell>{{application.credits ? application.curriculumCompletion : \'-\'}}</td> <td md-cell>{{currentLanguageNameField(application.status)}} <md-tooltip ng-if="[\'STIPTOETUS_STAATUS_L\', \'STIPTOETUS_STAATUS_T\'].indexOf(application.status.code) !== -1  && application.rejectComment">{{application.rejectComment}}</md-tooltip> </td> <td md-cell>&nbsp;</td> </tr> </tbody> </table> <div layout="row" ng-if="applications.length > 0"> <md-button ng-click="accept()" class="md-raised md-primary">{{\'main.button.accept\' | translate}}</md-button> <md-button class="md-raised" ng-click="annul()">{{\'main.button.annul\' | translate}}</md-button> <md-button class="md-raised" ng-click="reject()">{{\'main.button.reject\' | translate}}</md-button> <md-button class="md-raised" ng-click="refreshResults()">{{\'main.button.refreshResults\' | translate}}</md-button> <md-button class="md-raised" ng-click="checkComplies()">{{\'main.button.checkComplies\' | translate}}</md-button> </div> </div> </div>'),a.put("scholarship/scholarship.application.reject.edit.html",'<div class="ois-form-layout-padding ois-form-layout" ng-cloak> <div layout="column"> <div layout="row" flex="100" flex-sm="100" flex-xs="100"> {{stipend ? \'stipend.reject.stipendStudentList\' : \'stipend.reject.grantStudentList\' | translate}} </div> </div> <table md-table class="secondary-table"> <thead md-head> <tr md-row> <th md-column>{{\'stipend.fullName\' | translate}}</th> <th md-column>{{\'stipend.student.idCode\' | translate}}</th> <th md-column>{{\'stipend.rejectComment\' | translate}}</th> <th md-column>&nbsp;</th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="rejection in rejections" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell>{{rejection.fullName}}</td> <td md-cell>{{rejection.idCode}}</td> <td md-cell> <div flex><input flex type="text" ng-model="rejection.rejectComment" style="width: 100%" autofocus maxlength="100"></div> </td> <td md-cell> <md-button class="remove nomargin" ng-click="removeFromArray(rejections, rejection)">&times;</md-button> </td> </tr> </tbody> </table> <div layout="row" ng-if="rejections.length > 0"> <md-button class="md-raised md-primary" ng-click="reject()">{{\'main.button.reject\' | translate}}</md-button> <md-button class="md-raised" ng-click="back(\'#/scholarships/applications/\' + stipend ? \'scholarships\' : \'grants\')">{{\'main.button.back\' | translate}}</md-button> </div> </div>'),a.put("scholarship/scholarship.edit.html",'<div class="ois-form-layout-padding ois-form-layout" ng-cloak> <div flex> <form name="stipendForm"> <div layout="row" flex> <md-input-container flex> <label class="textInput">{{formState.typeIsScholarship ? \'stipend.scholarshipType\' : \'stipend.grantType\' | translate}}</label> <hois-classifier-select ng-model="stipend.type" name="type" ng-change="stipendTypeChanged()" model-value-attr="code" main-classifier-code="STIPTOETUS" ng-disabled="stipend.type" required show-only-values="formState.allowedStipendTypes"></hois-classifier-select> </md-input-container> </div> <div ng-include="templateName"></div> </form> </div> <div layout="row" ng-if="!stipend.type"> <md-button class="md-raised" ng-click="back(\'#/scholarships/\' + formState.typeIsScholarship ? \'scholarships\' : \'grants\', stipendForm)">{{\'main.button.back\' | translate}}</md-button> </div> </div>'),a.put("scholarship/scholarship.relatedFiles.edit.html",'<legend ng-if="editable || studentSubmitData.files.length > 0" md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'main.relatedFiles\' | translate}}</legend> <md-button ng-if="editable" class="md-raised" ng-click="openAddFileDialog()">{{\'main.button.uploadFile\' | translate}}</md-button> <br> <table md-table class="secondary-table" ng-if="studentSubmitData.files.length > 0"> <thead md-head> <tr md-row> <th md-column> <span>{{\'file.nameAndFile\' | translate}}</span> </th> <th md-column ng-if="editable"></th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="file in studentSubmitData.files | orderBy: \'id\'" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell> <div layout="row" flex> <div flex="80"> {{file.oisFile.fname ? file.oisFile.fname : file.fname}} </div> <div flex> <a ng-href="{{getUrl(file.oisFile, \'scholarshipapplication\')}}" target="_blank" rel="noopener noreferrer"> <md-icon md-font-set="material-icons">file_download</md-icon> </a> </div> </div> </td> <td md-cell ng-if="editable"> <md-button class="remove nomargin" ng-click="removeFile(studentSubmitData.files, file)">&times;</md-button> </td> </tr> </tbody> </table>'),a.put("scholarship/scholarship.search.html",'<div class="ois-form-layout-padding ois-form-layout" ng-cloak> <div layout="column"> <fieldset> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'main.searchlabel\' | translate}}</legend> <form ng-submit="loadData()" novalidate> <div layout="row" flex> <md-input-container flex> <label class="textInput">{{formState.typeIsScholarship ? \'stipend.scholarshipType\' : \'stipend.grantType\' | translate}}</label> <hois-classifier-select ng-model="criteria.type" name="type" model-value-attr="code" main-classifier-code="STIPTOETUS" show-only-values="criteria.allowedStipendTypes"></hois-classifier-select> </md-input-container> </div> <div layout="row" flex> <md-input-container flex> <label class="textInput">{{\'stipend.studyPeriod\' | translate}}</label> <hois-select ng-model="criteria.studyPeriod" values="studyPeriods"></hois-select> </md-input-container> </div> <div layout="row" flex> <md-input-container flex> <label class="textInput">{{formState.typeIsScholarship ? \'stipend.scholarshipName\' : \'stipend.grantName\' | translate}}</label> <input type="text" ng-model="criteria.nameEt" name="nameEt" md-maxlength="500"> </md-input-container> </div> <div layout="row" flex> <md-input-container flex> <label class="textInput">{{\'stipend.status\' | translate}}</label> <hois-select ng-model="criteria.isOpen" model-value-attr="code" values="statuses"></hois-select> </md-input-container> </div> <div layout="row"> <md-button type="submit" class="md-raised md-primary">{{\'main.button.search\' | translate}}</md-button> <md-button class="md-raised" ng-click="clearCriteria()">{{\'main.button.clear\' | translate}}</md-button> <md-button class="md-raised" ng-if="canEdit" ng-href="#/scholarships/{{scholarshipType}}/new">{{\'main.button.create\' | translate}}</md-button> </div> </form> </fieldset> <br> <md-table-container ng-cloak layout-padding> <table md-table md-progress="tabledata.$promise"> <thead md-head md-order="criteria.order" md-on-reorder="loadData"> <tr md-row> <th md-column md-order-by="st.type_code">{{\'stipend.type\' | translate}}</th> <th md-column md-order-by="st.nameEt">{{\'stipend.name\' | translate}}</th> <th md-column md-order-by="st.applicationStart">{{\'stipend.applicationPeriod\' | translate}}</th> <th md-column md-order-by="st.places">{{\'stipend.places\' | translate}}</th> <th md-column md-order-by="st.isOpen">{{\'stipend.status\' | translate}}</th> <th md-column></th> <th></th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="row in tabledata.content" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell class="one-row">{{currentLanguageNameField(row.type)}}</td> <td md-cell> <a ng-href="#/scholarships/{{row.id}}/view">{{::row.nameEt}}</a> </td> <td md-cell>{{::row.applicationStart | hoisDate}} - {{::row.applicationEnd | hoisDate}}</td> <td md-cell>{{::row.places}}</td> <td md-cell>{{::row.isOpen ? \'stipend.published\' : \'stipend.underRevision\' | translate}}</td> <td md-cell> <md-button md-no-ink class="md-primary change-button" ng-if="canEdit" ng-click="changeStipend(row)"> {{\'main.button.change\' | translate}} </md-button> </td> </tr> </tbody> </table> </md-table-container> <md-table-pagination md-limit="criteria.size" md-limit-options="[10, 20, 50]" md-page="criteria.page" md-total="{{tabledata.totalElements}}" md-on-paginate="loadData" md-label="{page: \'{{\'main.page\' | translate}}:\', rowsPerPage: \'{{\'main.rowPerPage\' | translate}}:\', of: \'{{\'main.of\' | translate}}\' }" md-page-select></md-table-pagination> </div> </div>'),a.put("scholarship/scholarship.view.html",'<div ng-include="templateName"></div>'),a.put("school/school.department.edit.html",'<div layout="column" layout-padding> <div> <form name="schoolDepartmentForm"> <md-input-container class="md-block"> <label>{{\'school.department.code\' | translate}}</label> <input ng-model="schoolDepartment.code" name="code" type="text" required md-maxlength="50"> </md-input-container> <md-input-container class="md-block"> <label class="textInput">{{\'school.department.nameEt\' | translate}}</label> <input ng-model="schoolDepartment.nameEt" name="nameEt" type="text" required md-maxlength="255"> </md-input-container> <md-input-container class="md-block"> <label class="textInput">{{\'school.department.nameEn\' | translate}}</label> <input ng-model="schoolDepartment.nameEn" name="nameEn" type="text" md-maxlength="255"> </md-input-container> <md-input-container class="md-block"> <label>{{\'school.department.parent\' | translate}}</label> <hois-school-department-select ng-model="schoolDepartment.parentSchoolDepartment" name="parentSchoolDepartment" excluded-id="schoolDepartment.id"></hois-school-department-select> </md-input-container> <div layout="row"> <div flex="100"> <md-input-container flex> <label>{{\'school.department.validFrom\' | translate}}</label> <md-datepicker ng-model="schoolDepartment.validFrom" required></md-datepicker> </md-input-container> <md-input-container flex> <label>{{\'school.department.validThru\' | translate}}</label> <md-datepicker ng-model="schoolDepartment.validThru" md-min-date="schoolDepartment.validFrom"></md-datepicker> </md-input-container> </div> </div> </form> <md-button ng-click="update()" class="md-raised md-primary">{{\'main.button.save\' | translate}}</md-button> <md-button ng-click="delete()" ng-if="schoolDepartment.id" class="md-raised">{{\'main.button.delete\' | translate}}</md-button> <md-button ng-href="#/school/departments" class="md-raised">{{\'main.button.back\' | translate}}</md-button> </div> </div>'),
a.put("school/school.department.list.html",'<div class="ois-form-layout-padding"> <div flex> <fieldset> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'main.searchlabel\' | translate}}</legend> <form ng-submit="loadData()" novalidate class="nomargin" layout="column"> <div layout="row" layout-sm="column" layout-xs="column"> <!--div class="indentForToast"></div--> <md-input-container flex="45" flex-sm="100" flex-xs="100"> <label class="textInput">{{\'school.department.code\' | translate}}</label> <input ng-model="criteria.code" name="code" type="text" autofocus> </md-input-container> <md-input-container flex="50" flex-sm="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label class="textInput">{{\'school.department.name\' | translate}}</label> <input ng-model="criteria.name" name="name" type="text"> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container> <md-checkbox ng-model="criteria.valid" name="valid"> {{\'school.department.validTrue\' | translate}} </md-checkbox> </md-input-container> </div> <div layout="row"> <md-button type="submit" class="md-raised md-primary">{{\'main.button.search\' | translate}}</md-button> <md-button class="md-raised" ng-click="clearCriteria()">{{\'main.button.clear\' | translate}}</md-button> <md-button class="md-raised" ng-if="isAuthorized(\'ROLE_OIGUS_M_TEEMAOIGUS_STRUKTUUR\')" ng-href="#/school/departments/new">{{\'main.button.create\' | translate}}</md-button> </div> <div flex-xs="0" flex-gt-xs="0" flex-gt-sm="50"></div> </form> </fieldset> </div> </div> <div layout-padding> <div flex> <md-table-container> <table md-table md-progress="tabledata.$promise"> <thead md-head md-order="criteria.order" md-on-reorder="loadData"> <tr md-row> <th md-column md-order-by="code">{{\'school.department.code\' | translate}}</th> <th md-column md-order-by="{{currentLanguage()===\'en\' ? \'nameEn\' : \'nameEt\'}}">{{\'school.department.name\' | translate}}</th> <th md-column>{{\'school.department.status\' | translate}}</th> <th md-column md-order-by="validFrom">{{\'school.department.validFrom\' | translate}}</th> <th md-column md-order-by="validThru">{{\'school.department.validThru\' | translate}}</th> <th md-column></th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="row in tabledata.content" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell>{{::row.code}}</td> <td md-cell style="padding-left:{{15*row.indent}}px"> <a md-no-ink class="md-primary change-button" ng-href="#/school/departments/{{::row.id}}/view">{{currentLanguageNameField(row)}}</a> </td> <td md-cell>{{row.isValid ? \'school.department.validTrue\' : \'school.department.validFalse\' | translate}}</td> <td md-cell>{{::row.validFrom | hoisDate}}</td> <td md-cell>{{::row.validThru | hoisDate}}</td> <td md-cell> <md-button md-no-ink class="md-primary change-button" ng-if="isAuthorized(\'ROLE_OIGUS_M_TEEMAOIGUS_STRUKTUUR\')" ng-href="#/school/departments/{{::row.id}}/edit">{{\'main.button.change\' | translate}}</md-button> </td> </tr> </tbody> </table> </md-table-container> <md-table-pagination md-limit="criteria.size" md-limit-options="[10, 20, 50]" md-page="criteria.page" md-total="{{tabledata.totalElements}}" md-on-paginate="loadData" md-label="{page: \'{{\'main.page\' | translate}}:\', rowsPerPage: \'{{\'main.rowPerPage\' | translate}}:\', of: \'{{\'main.of\' | translate}}\'}" md-page-select></md-table-pagination> </div> </div>'),a.put("school/school.department.view.html",'<div class="form-readonly" layout="column" layout-padding> <div> <form name="schoolDepartmentForm"> <md-input-container class="md-block"> <label>{{\'school.department.code\' | translate}}</label> <hois-value value="schoolDepartment.code"></hois-value> </md-input-container> <md-input-container class="md-block"> <label class="textInput">{{\'school.department.nameEt\' | translate}}</label> <hois-value value="schoolDepartment.nameEt"></hois-value> </md-input-container> <md-input-container class="md-block"> <label class="textInput">{{\'school.department.nameEn\' | translate}}</label> <hois-value value="schoolDepartment.nameEn"></hois-value> </md-input-container> <md-input-container class="md-block"> <label>{{\'school.department.parent\' | translate}}</label> <hois-value value="schoolDepartment.parentSchoolDepartment"></hois-value> </md-input-container> <div layout="row" flex="100"> <md-input-container flex="20"> <label>{{\'school.department.validFrom\' | translate}}</label> <hois-value value="schoolDepartment.validFrom | hoisDate"></hois-value> </md-input-container> <md-input-container flex="20" flex-offset="5"> <label>{{\'school.department.validThru\' | translate}}</label> <hois-value value="schoolDepartment.validThru | hoisDate"></hois-value> </md-input-container> </div> <md-button ng-if="isAuthorized(\'ROLE_OIGUS_M_TEEMAOIGUS_STRUKTUUR\')" ng-href="#/school/departments/{{::schoolDepartment.id}}/edit" class="md-raised md-primary">{{\'main.button.edit\' | translate}}</md-button> <md-button ng-href="#/school/departments" class="md-raised">{{\'main.button.back\' | translate}}</md-button> </form> </div> </div>'),a.put("school/school.edit.html",'<div class="ois-form-layout-padding ois-form-layout" ng-cloak> <form name="schoolForm"> <!--p class="textInput">{{\'school.name\' | translate}}&nbsp;*</p--> <md-autocomplete md-floating-label="{{\'school.name\' | translate}}" required md-selected-item="school._ehisSchool" md-search-text="queryText" md-items="item in querySearch(queryText)" md-item-text="currentLanguage()===\'en\' ? (item.nameEn || item.nameEt) : item.nameEt" md-min-length="0" md-no-cache md-selected-item-change="setEhisSchool()"> <md-item-template> <span md-highlight-text="queryText" md-highlight-flags="^i">{{currentLanguage()===\'en\' ?(item.nameEn || item.nameEt) : item.nameEt}}</span> </md-item-template> <md-not-found> {{\'main.messages.error.notFound\' | translate}} </md-not-found> </md-autocomplete> <md-input-container class="md-block"> <label class="textInput">{{\'school.code\' | translate}}</label> <input ng-model="school.code" name="code" type="text" required md-maxlength="10"> </md-input-container> <md-input-container class="md-block"> <label class="textInput">{{\'school.regNr\' | translate}}</label> <input ng-model="school.regNr" type="text" readonly> </md-input-container> <md-input-container class="md-block"> <label class="textInput">{{\'school.ehisId\' | translate}}</label> <input ng-model="school.ehisId" type="text" readonly> </md-input-container> <md-input-container class="md-block"> <label class="textInput">{{\'school.nameEn\' | translate}}</label> <input ng-model="school.nameEn" name="nameEn" type="text" required md-maxlength="255"> </md-input-container> <md-input-container class="md-block"> <label class="textInput">{{\'school.email\' | translate}}</label> <input ng-model="school.email" name="email" type="email" required md-maxlength="255"> </md-input-container> <md-input-container class="md-block"> <label class="textInput">{{\'school.phone\' | translate}}</label> <input ng-model="school.phone" name="phone" type="text" md-maxlength="100"> </md-input-container> <div class="md-block"> <hois-ads-adapter class="md-text" ng-model="school.addressAds" ads-oid-model="school.addressAdsOid" address-model="school.address"></hois-ads-adapter> </div> <md-input-container class="md-block"> <md-checkbox ng-model="school.generateUserEmail" name="generateUserEmail"> {{\'school.generateUserEmail\' | translate}} </md-checkbox> </md-input-container> <md-input-container class="md-block"> <label class="textInput">{{\'school.emailDomain\' | translate}}</label> <input ng-model="school.emailDomain" name="emailDomain" type="text" md-maxlength="255"> </md-input-container> <md-input-container class="md-block"> <label class="textInput">{{\'school.rtipSchoolCode\' | translate}}</label> <input ng-model="school.rtipSchoolCode" name="rtipSchoolCode" type="text" md-maxlength="10"> </md-input-container> <md-input-container class="md-block"> <label class="textInput">{{\'school.adUrl\' | translate}}</label> <input ng-model="school.adUrl" name="adUrl" type="text" md-maxlength="255"> </md-input-container> <md-input-container class="md-block"> <label class="textInput">{{\'school.adPort\' | translate}}</label> <input ng-model="school.adPort" name="adPort" type="number" min="0" max="65535"> </md-input-container> <md-input-container class="md-block"> <label class="textInput">{{\'school.adDomain\' | translate}}</label> <input ng-model="school.adDomain" name="adDomain" type="text" md-maxlength="255"> </md-input-container> <md-input-container class="md-block"> <label class="textInput">{{\'school.adBase\' | translate}}</label> <input ng-model="school.adBase" name="adBase" type="text" md-maxlength="255"> </md-input-container> <md-input-container class="md-block"> <label class="textInput">{{\'school.adIdcodeField\' | translate}}</label> <input ng-model="school.adIdcodeField" name="adIdcodeField" type="text" md-maxlength="50"> </md-input-container> <lf-ng-md-file-input name="logoFiles" lf-files="logoFiles" lf-api="logoFileApi" lf-filesize="100KB" accept=".png, .jpg, .jpeg" lf-mimetype="image/*" preview lf-placeholder="{{\'school.logo.notSelected\' | translate}}" lf-browse-label="{{\'school.logo.selectLogo\' | translate}}" lf-remove-label="{{\'main.button.clear\' | translate}}"></lf-ng-md-file-input> <div ng-messages="schoolForm.logoFiles.$error" style="color:red"> <div ng-message="filesize">{{\'main.messages.error.fileTooLarge\' | translate}} 100KB!</div> <div ng-message="mimetype">{{\'main.messages.error.wrongExtension\' | translate}} png, jpg, jpeg</div> </div> </form> <h3 ng-if="school.logo">{{\'school.logo.currentLogo\' | translate}}</h3> <img ng-if="school.logo" ng-src="{{school.imageUrl}}" id="currentLogoView"> <br> <md-checkbox ng-model="school.deleteCurrentLogo" ng-if="school.id && school.logo"> {{\'school.logo.delete\' | translate}} </md-checkbox> <br> <md-button ng-click="update()" class="md-raised md-primary">{{\'main.button.save\' | translate}}</md-button> <md-button ng-click="delete()" ng-if="school.id" class="md-raised">{{\'main.button.delete\' | translate}}</md-button> <md-button ng-href="#/school" class="md-raised">{{\'main.button.back\' | translate}}</md-button> </div>'),a.put("school/school.list.html",'<div layout-padding> <div flex> <fieldset> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'main.searchlabel\' | translate}}</legend> <form ng-submit="loadData()" novalidate> <div layout="row"> <div flex-xs="100" flex-gt-xs="100" flex-gt-sm="50" layout="column"> <!--div class="indentForToast"></div--> <md-input-container> <label class="textInput">{{\'school.name\' | translate}}</label> <input ng-model="criteria.name" name="name" type="text" autofocus> </md-input-container> <div layout="row"> <md-button type="submit" class="md-raised md-primary">{{\'main.button.search\' | translate}}</md-button> <md-button class="md-raised" ng-click="clearCriteria()">{{\'main.button.clear\' | translate}}</md-button> <md-button class="md-raised" ng-href="#/school/new">{{\'main.button.create\' | translate}}</md-button> </div> </div> <div flex-xs="0" flex-gt-xs="0" flex-gt-sm="50"></div> </div> </form> </fieldset> </div> </div> <div layout-padding> <div flex> <md-table-container> <table md-table md-progress="tabledata.$promise"> <thead md-head md-order="criteria.order" md-on-reorder="loadData"> <tr md-row> <th md-column md-order-by="code">{{\'school.code\' | translate}}</th> <th md-column md-order-by="{{currentLanguage()===\'en\' ? \'nameEn\' : \'nameEt\'}}">{{\'school.name\' | translate}}</th> <th md-column md-order-by="email">{{\'school.email\' | translate}}</th> <th md-column></th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="row in tabledata.content" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell> <a md-no-ink class="md-primary" ng-href="#/school/{{::row.id}}/view">{{::row.code}}</a> </td> <td md-cell>{{currentLanguageNameField(row)}}</td> <td md-cell>{{::row.email}}</td> <td md-cell> <md-button md-no-ink class="md-primary change-button" ng-href="#/school/{{::row.id}}/edit">{{\'main.button.change\' | translate}}</md-button> </td> </tr> </tbody> </table> </md-table-container> <md-table-pagination md-limit="criteria.size" md-limit-options="[10, 20, 50]" md-page="criteria.page" md-total="{{tabledata.totalElements}}" md-on-paginate="loadData" md-label="{page: \'{{\'main.page\' | translate}}:\', rowsPerPage: \'{{\'main.rowPerPage\' | translate}}:\', of: \'{{\'main.of\' | translate}}\' }" md-page-select></md-table-pagination> </div> </div>'),a.put("school/school.study.levels.html",'<div layout="column" layout-padding> <div> <form name="schoolStudyLevelsForm"> <!--div class="indentForToast"></div--> <!--h3>{{currentLanguageNameField(studyLevels)}}</h3--> <md-list> <md-list-item ng-repeat="studyLevel in studyLevelDefs"> <span> <md-checkbox ng-model="studyLevel._selected" ng-disabled="!canEdit"> {{currentLanguageNameField(studyLevel)}} </md-checkbox> </span> </md-list-item> </md-list> </form> <md-button ng-if="canEdit" ng-click="update()" class="md-raised md-primary">{{\'main.button.save\' | translate}}</md-button> </div> </div>'),a.put("school/school.view.html",'<div class="ois-form-layout-padding ois-form-layout form-readonly" ng-cloak> <form name="schoolForm"> <md-input-container class="md-block"> <label class="textInput">{{\'school.name\' | translate}}</label> <hois-value value="school.nameEt"></hois-value> </md-input-container> <md-input-container class="md-block"> <label class="textInput">{{\'school.code\' | translate}}</label> <hois-value value="school.code"></hois-value> </md-input-container> <md-input-container class="md-block"> <label class="textInput">{{\'school.regNr\' | translate}}</label> <hois-value value="school.regNr"></hois-value> </md-input-container> <md-input-container class="md-block"> <label class="textInput">{{\'school.ehisId\' | translate}}</label> <hois-value value="school.ehisId"></hois-value> </md-input-container> <md-input-container class="md-block"> <label class="textInput">{{\'school.nameEn\' | translate}}</label> <hois-value value="school.nameEn"></hois-value> </md-input-container> <md-input-container class="md-block"> <label class="textInput">{{\'school.email\' | translate}}</label> <hois-value value="school.email"></hois-value> </md-input-container> <md-input-container class="md-block"> <label class="textInput">{{\'school.phone\' | translate}}</label> <hois-value value="school.phone"></hois-value> </md-input-container> <md-input-container class="md-block"> <label class="textInput">{{\'school.address\' | translate}}</label> <hois-value value="school.address"></hois-value> </md-input-container> <md-input-container class="md-block"> <label class="textInput">{{\'school.generateUserEmail\' | translate}}</label> <hois-value value="school.generateUserEmail ? \'main.yes\' : \'main.no\' | translate"></hois-value> </md-input-container> <md-input-container class="md-block"> <label class="textInput">{{\'school.emailDomain\' | translate}}</label> <hois-value value="school.emailDomain"></hois-value> </md-input-container> <md-input-container class="md-block"> <label class="textInput">{{\'school.rtipSchoolCode\' | translate}}</label> <hois-value value="school.rtipSchoolCode"></hois-value> </md-input-container> </form> <h3 ng-if="school.logo">{{\'school.logo.currentLogo\' | translate}}</h3> <div> <img ng-if="school.logo" ng-src="{{school.imageUrl}}"> </div> <br> <md-button ng-href="#/school/{{school.id}}/edit" class="md-raised md-primary">{{\'main.button.change\' | translate}}</md-button> <md-button ng-href="#/school" class="md-raised">{{\'main.button.back\' | translate}}</md-button> </div>'),a.put("stateCurriculum/state.curriculum.html",'<div class="ois-form-layout-padding"> <div flex> <form name="stateCurriculumForm" layout="column" class="nomargin"> <fieldset tabindex="1" flex> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'curriculum.mainData\' | translate}}</legend> <div layout="column"> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="50" flex-sm="100" flex-xs="100"> <label>{{\'stateCurriculum.enter.nameEt\' | translate}}</label> <input ng-model="stateCurriculum.nameEt" type="text" required md-maxlength="255" name="nameEt" ng-model-options="{ debounce: 250 }" unique="nameEtUniqueQuery"> <div ng-messages="stateCurriculumForm.nameEt.$error" ng-show="stateCurriculumForm.nameEt.$dirty"> <div ng-message="notUnique"> {{\'stateCurriculum.error.unique.name\' | translate}} </div> </div> </md-input-container> <md-input-container flex="45" flex-sm="100" flex-xs="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'stateCurriculum.enter.nameEn\' | translate}}</label> <input ng-model="stateCurriculum.nameEn" type="text" required md-maxlength="255" name="nameEn" ng-model-options="{ debounce: 250 }" unique="nameEnUniqueQuery"> <div ng-messages="stateCurriculumForm.nameEn.$error" ng-show="true"> <div ng-message="notUnique"> {{\'stateCurriculum.error.unique.name\' | translate}} </div> </div> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="25" flex-sm="100" flex-xs="100"> <label>{{\'curriculum.areaOfStudy\' | translate}}</label> <hois-classifier-select ng-model="iscedVald" main-classifier-code="ISCED_VALD" criteria="{vocational: true}" required model-value-attr="code"></hois-classifier-select> </md-input-container> <md-input-container flex="20" flex-sm="100" flex-xs="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'curriculum.fieldOfStudy\' | translate}}</label> <hois-classifier-select ng-model="iscedSuun" main-classifier-code="ISCED_SUUN" criteria="{vocational: true}" watch-model="iscedVald" model-value-attr="code" filter-values search-from-connect connect-main-classifier-code="ISCED_VALD" required></hois-classifier-select> </md-input-container> <md-input-container flex="45" flex-sm="100" flex-xs="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'curriculum.group\' | translate}}</label> <hois-classifier-select ng-model="stateCurriculum.iscedClass" main-classifier-code="ISCED_RYHM" criteria="{vocational: true}" watch-model="iscedSuun" model-value-attr="code" filter-values search-from-connect connect-main-classifier-code="ISCED_SUUN" required></hois-classifier-select> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column" class="top-margin"> <md-input-container flex="25" flex-sm="100" flex-xs="100"> <label>{{\'stateCurriculum.enter.credits.credits\' | translate}}</label> <input ng-model="stateCurriculum.credits" type="number" pattern="^\\d+$" required min="0" max="999" name="credits"> <div ng-messages="stateCurriculumForm.credits.$error" ng-show="stateCurriculumForm.credits.$dirty"> <div ng-message="min"> {{\'stateCurriculum.enter.credits.positive\' | translate}} </div> <div ng-message="max"> {{\'stateCurriculum.enter.credits.max\' | translate}} </div> <div ng-message="pattern"> {{\'stateCurriculum.enter.credits.integer\' | translate}} </div> </div> </md-input-container> <md-input-container flex="20" flex-sm="100" flex-xs="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'stateCurriculum.enter.ROKclassifier\' | translate}}</label> <hois-classifier-select ng-model="stateCurriculum.stateCurrClass" main-classifier-code="EHIS_ROK" criteria="{vocational: true}" required model-value-attr="code"></hois-classifier-select> </md-input-container> </div> </div> </fieldset> <div>&nbsp;</div> <fieldset tabindex="2"> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'curriculum.commonData\' | translate}}</legend> <div layout="column"> <md-input-container flex> <label>{{\'stateCurriculum.enter.objectivesEt\' | translate}}{{getStar()}}</label> <textarea ng-model="stateCurriculum.objectivesEt" ng-required="strictValidation()" md-maxlength="20000" max-rows="10"></textarea> </md-input-container> <md-input-container flex> <label>{{\'stateCurriculum.enter.objectivesEn\' | translate}}</label> <textarea ng-model="stateCurriculum.objectivesEn" md-maxlength="20000" max-rows="10"></textarea> </md-input-container> <md-input-container flex> <label>{{\'stateCurriculum.enter.outcome.outcomeLabelEt\' | translate}}{{getStar()}}</label> <textarea ng-model="stateCurriculum.outcomesEt" ng-required="strictValidation()" md-maxlength="20000" max-rows="10"></textarea> </md-input-container> <md-input-container flex> <label>{{\'stateCurriculum.enter.outcome.outcomeLabelEn\' | translate}}</label> <textarea ng-model="stateCurriculum.outcomesEn" md-maxlength="20000" max-rows="10"></textarea> </md-input-container> <md-input-container flex> <label>{{\'stateCurriculum.enter.admission.requirementsEt\' | translate}}{{getStar()}}</label> <textarea ng-model="stateCurriculum.admissionRequirementsEt" ng-required="strictValidation()" md-maxlength="20000" max-rows="10"></textarea> </md-input-container> <md-input-container flex> <label>{{\'stateCurriculum.enter.admission.requirementsEn\' | translate}}</label> <textarea ng-model="stateCurriculum.admissionRequirementsEn" md-maxlength="20000" max-rows="10"></textarea> </md-input-container> <md-input-container flex> <label>{{\'stateCurriculum.enter.graduation.requirementsEt\' | translate}}{{getStar()}}</label> <textarea ng-model="stateCurriculum.graduationRequirementsEt" ng-required="strictValidation()" md-maxlength="20000" max-rows="10"></textarea> </md-input-container> <md-input-container flex> <label>{{\'stateCurriculum.enter.graduation.requirementsEn\' | translate}}</label> <textarea ng-model="stateCurriculum.graduationRequirementsEn" md-maxlength="20000" max-rows="10"></textarea> </md-input-container> </div> </fieldset> <div>&nbsp;</div> <fieldset tabindex="3" flex> <legend md-colors="{color: \'primary-800\'}" class="md-title-small" ng-class="{invalid: stateCurriculumForm.$submitted && stateCurriculum.occupations.length === 0 && strictValidation()}">{{\'stateCurriculum.enter.occupation.acquiredMany\' | translate}}&nbsp;*</legend> <md-autocomplete name="occupationInput" md-selected-item="occupation" md-search-text="queryText" md-items="item in querySearch(queryText, connection.code)" md-item-text="currentLanguageNameField(item)" md-min-length="0" placeholder="{{\'stateCurriculum.enter.occupation.add\' | translate}}" ng-model="queryText" md-no-cache class="small-margin" md-selected-item-change="addOcupation(occupation)"> <md-item-template> <span md-highlight-text="queryText" md-highlight-flags="^i">{{currentLanguageNameField(item)}}</span> </md-item-template> <md-not-found> {{\'main.messages.error.notFound\' | translate}} </md-not-found> </md-autocomplete> <div> <table md-table class="secondary-table"> <thead md-head> <tr md-row> <th md-column>Jrk</th> <th md-column>Kutse</th> <th md-column>Osakutsed</th> <th md-column>Spetsialiseerumised</th> <th md-column></th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="occupation in stateCurriculum.occupations | orderBy" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell>{{$index + 1}}</td> <td md-cell> <hois-classifier-value ng-model="occupation" main-classifier-code="KUTSE"></hois-classifier-value> </td> <td md-cell><span ng-repeat="subOccupation in subOccupations[occupation] | filter:{ mainClassCode: \'OSAKUTSE\'}"><span ng-if="$index > 0">; </span>{{currentLanguageNameField(subOccupation)}} </span> </td> <td md-cell><span ng-repeat="subOccupation in subOccupations[occupation] | filter:{ mainClassCode: \'SPETSKUTSE\'}"><span ng-if="$index > 0">; </span>{{currentLanguageNameField(subOccupation)}} </span> </td> <td md-cell><a class="remove" ng-click="removeOcupation(occupation)">&times;</a></td> </tr> </tbody> </table> </div> </fieldset> <div>&nbsp;</div> <fieldset tabindex="3" flex> <legend md-colors="{color: \'primary-800\'}" class="md-title-small" ng-class="{invalid: stateCurriculumForm.$submitted && !modulesValid()}">{{\'stateCurriculum.enter.module.modules\' | translate}}&nbsp;*</legend> <div layout="row" ng-if="stateCurriculum.occupations.length > 0"> <md-button class="md-raised" ng-click="openAddModuleDialog()">{{\'stateCurriculum.enter.module.add\' | translate}}</md-button> </div> <!--KUTSETE MOODULID--> <div ng-repeat="occupation in stateCurriculum.occupations | orderBy" layout="column"> <div class="occupation-header align-center"><span ng-class="{invalid: stateCurriculumForm.$submitted && !isOccutationValid(occupation) && strictValidation()}">{{\'stateCurriculum.enter.occupation.occupation\' | translate}} {{$index + 1}}:&nbsp;</span> <hois-classifier-value ng-model="occupation" main-classifier-code="KUTSE" ng-class="{invalid: stateCurriculumForm.$submitted && !isOccutationValid(occupation)  && strictValidation()}"></hois-classifier-value> </div> <div layout="column"> <div layout="row" flex="100" class="occupation-row align-center border-bottom odd"> <div flex="5">&nbsp;</div> <div flex="20">{{\'stateCurriculum.enter.module.modules1\' | translate}}</div> <div layout="column" flex="75"> <div flex="100" ng-repeat="module in stateCurriculum.modules | filter: filterModules(occupation, MODULE_TYPE.GENERAL) | orderBy: \'nameEt\'" layout="row" class="align-center"> <a flex="30" ng-click="openAddModuleDialog(module)" href="">{{currentLanguageNameField(module)}}</a> <span flex="10">{{module.credits}}&nbsp; EKAP</span> </div> </div> </div> <div layout="row" flex="100" class="occupation-row align-center even"> <div flex="5">&nbsp;</div> <div ng-class="{invalid: stateCurriculumForm.$submitted && hasNoPmodule(occupation) && strictValidation()}" flex="20">{{\'stateCurriculum.enter.module.modules2\' | translate}}&nbsp;*</div> <div layout="column" flex="75"> <div flex="100" ng-repeat="module in stateCurriculum.modules | filter: filterModules(occupation, MODULE_TYPE.BASIC) | orderBy: \'nameEt\'" layout="row" class="align-center"> <a flex="30" ng-click="openAddModuleDialog(module)" href="">{{currentLanguageNameField(module)}}</a> <span flex="10">{{module.credits}}&nbsp; EKAP</span> </div> </div> </div> </div> <!--OSAKUTSETE MOODULID--> <div ng-repeat="suboccupation in subOccupationsList | filter: filterSubOccupations(occupation, \'OSAKUTSE\') | orderBy: \'nameEt\'" layout="column"> <div class="occupation-header2 align-center">{{\'stateCurriculum.enter.occupation.partial\' | translate}} {{$index + 1}}: {{currentLanguageNameField(suboccupation)}}</div> <div layout="column"> <div layout="row" flex="100" class="occupation-row align-center border-bottom odd"> <div flex="5">&nbsp;</div> <div flex="20">{{\'stateCurriculum.enter.module.modules1\' | translate}}</div> <div layout="column" flex="75"> <div flex="100" ng-repeat="module in stateCurriculum.modules | filter: filterModules(suboccupation.code, MODULE_TYPE.GENERAL) | orderBy: \'nameEt\'" layout="row" class="align-center"> <a flex="30" ng-click="openAddModuleDialog(module)" href="">{{currentLanguageNameField(module)}}</a> <span flex="10">{{module.credits}}&nbsp; EKAP</span> </div> </div> </div> <div layout="row" flex="100" class="occupation-row align-center even"> <div flex="5">&nbsp;</div> <div ng-class="{invalid: stateCurriculumForm.$submitted && hasNoPmodule(suboccupation.code) && strictValidation()}" flex="20">{{\'stateCurriculum.enter.module.modules2\' | translate}}&nbsp;*</div> <div layout="column" flex="75"> <div flex="100" ng-repeat="module in stateCurriculum.modules | filter: filterModules(suboccupation.code, MODULE_TYPE.BASIC) | orderBy: \'nameEt\'" layout="row" class="align-center"> <a flex="30" ng-click="openAddModuleDialog(module)" href="">{{currentLanguageNameField(module)}}</a> <span flex="10">{{module.credits}}&nbsp; EKAP</span> </div> </div> </div> </div> </div> <!--SPETSKUTSETE MOODULID--> <div ng-repeat="suboccupation in subOccupationsList | filter: filterSubOccupations(occupation, \'SPETSKUTSE\') | orderBy: \'nameEt\'" layout="column"> <div class="occupation-header2 align-center"><span ng-class="{invalid: stateCurriculumForm.$submitted && !isSpetsOccupationValid(suboccupation.code, occupation) && strictValidation()}">{{\'stateCurriculum.enter.occupation.specialty\' | translate}} {{$index + 1}}: {{currentLanguageNameField(suboccupation)}}</span></div> <div layout="column"> <div layout="row" flex="100" class="occupation-row align-center border-bottom odd"> <div flex="5">&nbsp;</div> <div flex="20">{{\'stateCurriculum.enter.module.modules1\' | translate}}</div> <div layout="column" flex="75"> <div flex="100" ng-repeat="module in stateCurriculum.modules | filter: filterModules(suboccupation.code, MODULE_TYPE.GENERAL) | orderBy: \'nameEt\'" layout="row" class="align-center"> <a flex="30" ng-click="openAddModuleDialog(module)" href="">{{currentLanguageNameField(module)}}</a> <span flex="10">{{module.credits}}&nbsp; EKAP</span> </div> </div> </div> <div layout="row" flex="100" class="occupation-row align-center even"> <div flex="5">&nbsp;</div> <div ng-class="{invalid: stateCurriculumForm.$submitted && hasNoPmodule(suboccupation.code) && strictValidation()}" flex="20">{{\'stateCurriculum.enter.module.modules2\' | translate}}&nbsp;*</div> <div layout="column" flex="75"> <div flex="100" ng-repeat="module in stateCurriculum.modules | filter: filterModules(suboccupation.code, MODULE_TYPE.BASIC) | orderBy: \'nameEt\'" layout="row" class="align-center"> <a flex="30" ng-click="openAddModuleDialog(module)" href="">{{currentLanguageNameField(module)}}</a> <span flex="10">{{module.credits}}&nbsp; EKAP</span> </div> </div> </div> </div> </div> </div> </fieldset> <div>&nbsp;</div> <fieldset tabindex="5"> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'curriculum.additionalInfo\' | translate}}</legend> <div layout="column"> <div layout="row"> <md-input-container> <label>{{\'stateCurriculum.enter.module.modules3\' | translate}}{{getStar()}}</label> <input type="number" name="optionalCredits" ng-model="stateCurriculum.optionalStudyCredits" pattern="^\\d+(\\.\\d{1})?$" ng-required="strictValidation()" aria-label="optional credits" min="0" max="999"> <div ng-messages="stateCurriculumForm.optionalCredits.$error" ng-show="stateCurriculumForm.optionalCredits.$dirty"> <div ng-message="min"> {{\'stateCurriculum.enter.credits.positive\' | translate}} </div> <div ng-message="max"> {{\'stateCurriculum.enter.credits.max\' | translate}} </div> <div ng-message="pattern"> {{\'stateCurriculum.error.decimalPresision\' | translate}} </div> </div> </md-input-container> </div> <md-input-container flex> <label>{{\'stateCurriculum.enter.practice\' | translate}}</label> <textarea ng-model="stateCurriculum.practiceDescription" md-maxlength="20000" max-rows="10"></textarea> </md-input-container> <md-input-container flex> <label>{{\'stateCurriculum.enter.finalExam\' | translate}}</label> <textarea ng-model="stateCurriculum.finalExamDescription" md-maxlength="4000" max-rows="10"></textarea> </md-input-container> <md-input-container flex> <label>{{\'stateCurriculum.enter.comment\' | translate}}</label> <textarea ng-model="stateCurriculum.description" md-maxlength="20000" max-rows="10"></textarea> </md-input-container> <md-input-container flex> <label>{{\'stateCurriculum.enter.riigiteataja\' | translate}}</label> <input ng-model="stateCurriculum.riigiteatajaUrl" type="text" md-maxlength="4000"> </md-input-container> </div> </fieldset> <div>&nbsp;</div> <fieldset tabindex="6"> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'curriculum.statuses\' | translate}}</legend> <div layout="column"> <div layout="row" flex> <md-input-container> <label>{{\'stateCurriculum.enter.validFrom\' | translate}}{{getStar()}}</label> <md-datepicker ng-model="stateCurriculum.validFrom" ng-required="strictValidation()" md-open-on-focus ng-change="checkValidThru()"> </md-datepicker> </md-input-container> <md-input-container flex-offset="5"> <label>{{\'stateCurriculum.enter.validThru\' | translate}}</label> <md-datepicker ng-model="stateCurriculum.validThru" md-min-date="stateCurriculum.validFrom" md-open-on-focus> </md-datepicker> </md-input-container> </div> <div class="form-readonly top-margin" flex layout="row"> <md-input-container flex="100"> <label class="label">{{\'main.status\' | translate}}</label> <hois-classifier-value ng-model="stateCurriculum.status" main-classifier-code="OPPEKAVA_STAATUS"></hois-classifier-value> </md-input-container> </div> </div> </fieldset> <div>&nbsp;</div> <fieldset tabindex="11" ng-show="stateCurriculum.curricula && stateCurriculum.curricula.length > 0"> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'stateCurriculum.curricula\' | translate}}</legend> <table md-table class="secondary-table"> <thead md-head> <tr md-row> <th md-column>{{\'school.label\' | translate}}</th> <th md-column>{{\'curriculum.name\' | translate}}</th> <th md-column>{{\'curriculum.studyLevel\' | translate}}</th> <th md-column>{{\'stateCurriculum.creditsEkap\' | translate}}</th> <th md-column>{{\'stateCurriculum.validFrom\' | translate}}</th> <th md-column>{{\'stateCurriculum.validThru\' | translate}}</th> <th md-column>{{\'stateCurriculum.status\' | translate}}</th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="curriculum in stateCurriculum.curricula | orderBy: currentLanguageNameField()" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell>{{currentLanguageNameField(curriculum.school)}}</td> <td md-cell>{{currentLanguageNameField(curriculum)}}</td> <td md-cell> <hois-classifier-value ng-model="curriculum.origStudyLevel" main-classifier-codes="OPPEASTE,EKR"></hois-classifier-value> </td> <td md-cell>{{curriculum.credits}}</td> <td md-cell>{{curriculum.validFrom | hoisDate}}</td> <td md-cell>{{curriculum.validThru | hoisDate}}</td> <td md-cell> <hois-classifier-value ng-model="curriculum.status" main-classifier-code="OPPEKAVA_STAATUS"></hois-classifier-value> </td> </tr> </tbody> </table> </fieldset> <hois-created-modified object="stateCurriculum"></hois-created-modified> </form> <div layout="row"> <div ng-show="stateCurriculum.status === STATUS.ENTERING"> <div ng-show="!stateCurriculum.id"> <md-button class="md-raised md-primary" ng-click="save()">{{\'main.button.save\' | translate}}</md-button> </div> <div ng-show="stateCurriculum.id"> <md-button class="md-raised md-primary" ng-click="save()" ng-if="stateCurriculum.canChange">{{\'main.button.save\' | translate}}</md-button> <md-button class="md-raised md-default" ng-click="confirmAndSave()" ng-if="stateCurriculum.canChange && stateCurriculum.canConfirm"> {{\'stateCurriculum.statusButton.confirm\' | translate}} </md-button> <md-button class="md-raised md-default" ng-click="close()" ng-if="stateCurriculum.canClose && stateCurriculum.canChange"> {{\'stateCurriculum.statusButton.close\' | translate}} </md-button> <md-button ng-click="delete()" class="md-raised" ng-if="stateCurriculum.canDelete">{{\'main.button.delete\' | translate}}</md-button> </div> </div> <div ng-show="stateCurriculum.status === STATUS.VERIFIED"> <div> <md-button class="md-raised md-primary" ng-click="save()" ng-if="stateCurriculum.canChange">{{\'main.button.save\' | translate}}</md-button> </div> </div> <md-button ng-click="back(\'#/stateCurriculum\', stateCurriculumForm)" class="md-raised">{{\'main.button.back\' | translate}}</md-button> </div> </div> </div>'),
a.put("stateCurriculum/state.curriculum.list.html",'<div class="ois-form-layout-padding"> <div flex> <form ng-submit="loadData()" layout="column" class="nomargin"> <fieldset tabindex="1"> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'main.searchlabel\' | translate}}</legend> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="65" flex-sm="100" flex-xs="100"> <label>{{\'curriculum.name\' | translate}}</label> <input ng-model="criteria.name" type="text"> </md-input-container> <md-input-container flex="30" flex-sm="100" flex-xs="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'stateCurriculum.EKR\' | translate}}</label> <hois-classifier-select ng-model="criteria.ekrLevel" model-value-attr="code" main-classifier-code="EKR" criteria="{vocational: true}" multiple></hois-classifier-select> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="30" flex-sm="100" flex-xs="100"> <label>{{\'curriculum.areaOfStudy\' | translate}}</label> <hois-classifier-select ng-model="criteria.iscedVald" model-value-attr="code" main-classifier-code="ISCED_VALD" criteria="{vocational: true}"></hois-classifier-select> </md-input-container> <md-input-container flex="30" flex-sm="100" flex-xs="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'curriculum.fieldOfStudy\' | translate}}</label> <hois-classifier-select ng-model="criteria.iscedSuun" model-value-attr="code" main-classifier-code="ISCED_SUUN" criteria="{vocational: true}" watch-model="criteria.iscedVald" filter-values search-from-connect connect-main-classifier-code="ISCED_VALD" multiple></hois-classifier-select> </md-input-container> <md-input-container flex="30" flex-sm="100" flex-xs="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'curriculum.group\' | translate}}</label> <hois-classifier-select ng-model="criteria.iscedClass" model-value-attr="code" main-classifier-code="ISCED_RYHM" criteria="{vocational: true}" watch-model="criteria.iscedSuun" filter-values search-from-connect connect-main-classifier-code="ISCED_SUUN" multiple></hois-classifier-select> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column" class="top-margin" ng-if="formState.canView"> <md-input-container flex="30" flex-sm="100" flex-xs="100" flex-offset-sm="0" class="top-margin"> <label>{{\'stateCurriculum.status\' | translate}}</label> <hois-classifier-select ng-model="criteria.status" model-value-attr="code" main-classifier-code="OPPEKAVA_STAATUS" multiple filter-values="filteredOutStatuses"></hois-classifier-select> </md-input-container> <md-input-container flex-offset="5" flex-offset-xs="0" flex-offset-sm="0" flex-sm="100" flex-xs="100"> <label>{{\'stateCurriculum.enter.validFrom\' | translate}}</label> <md-datepicker ng-model="criteria.validFrom" md-open-on-focus> </md-datepicker> </md-input-container> <md-input-container flex-sm="100" flex-xs="100" flex-offset="2" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'stateCurriculum.enter.validThru\' | translate}}</label> <md-datepicker ng-model="criteria.validThru" md-open-on-focus> </md-datepicker> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column" class="top-margin" ng-if="!formState.canView"> <md-input-container flex-sm="100" flex-xs="100"> <label>{{\'stateCurriculum.enter.validFrom\' | translate}}</label> <md-datepicker ng-model="criteria.validFrom" md-open-on-focus> </md-datepicker> </md-input-container> <md-input-container flex-sm="100" flex-xs="100" flex-offset="2" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'stateCurriculum.enter.validThru\' | translate}}</label> <md-datepicker ng-model="criteria.validThru" md-open-on-focus> </md-datepicker> </md-input-container> </div> <div layout="row"> <md-button type="submit" class="md-raised md-primary">{{\'main.button.search\' | translate}}</md-button> <md-button class="md-raised" ng-click="clearCriteria()">{{\'main.button.clear\' | translate}}</md-button> <md-button class="md-raised" ng-href="#/stateCurriculum/new" ng-if="formState.canCreate">{{\'main.button.create\' | translate}}</md-button> </div> </fieldset> </form> </div> </div> <md-table-container flex ng-cloak layout-padding> <table md-table md-progress="tabledata.$promise"> <thead md-head md-order="criteria.order" md-on-reorder="loadData"> <tr md-row> <th md-column md-order-by="{{currentLanguageNameField()}}">{{\'curriculum.name\' | translate}}</th> <th md-column md-order-by="ekrLevel">{{\'stateCurriculum.EKR\' | translate}}</th> <th md-column md-order-by="credits">{{\'stateCurriculum.creditsEkap\' | translate}}</th> <th md-column md-order-by="validFrom">{{\'stateCurriculum.validFrom\' | translate}}</th> <th md-column md-order-by="validThru">{{\'stateCurriculum.validThru\' | translate}}</th> <th md-column md-order-by="status.{{currentLanguageNameField()}}" ng-if="formState.canView">{{\'stateCurriculum.status\' | translate}}</th> <th></th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="row in tabledata.content" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell><a ng-href="#/stateCurriculum/{{row.id}}/view">{{currentLanguageNameField(row)}}</a></td> <td md-cell>{{currentLanguageNameField(row.ekrLevel)}}</td> <td md-cell>{{row.credits}}</td> <td md-cell>{{row.validFrom | hoisDate}}</td> <td md-cell>{{row.validThru | hoisDate}}</td> <td md-cell="status" ng-if="formState.canView">{{currentLanguageNameField(row.status)}}</td> <td md-cell> <md-button md-no-ink class="md-primary change-button" ng-href="#/stateCurriculum/{{row.id}}/edit" ng-if="row.canChange">{{\'main.button.change\' | translate}}</md-button> </td> </tr> </tbody> </table> </md-table-container> <md-table-pagination md-limit="criteria.size" md-limit-options="[10, 20, 50]" md-page="criteria.page" md-total="{{tabledata.totalElements}}" md-on-paginate="loadData" md-label="{page: \'{{\'main.page\' | translate}}:\', rowsPerPage: \'{{\'main.rowPerPage\' | translate}}:\', of: \'{{\'main.of\' | translate}}\' }" md-page-select></md-table-pagination>'),a.put("stateCurriculum/state.curriculum.module.add.dialog.html",'<md-dialog aria-label="module add dialog" flex="70" flex-xs="100"> <form name="dialogForm" ng-cloak> <md-toolbar> <div class="md-toolbar-tools"> <h2>{{readOnly ? "module.viewToughtModule" : "module.addToughtModule" | translate}}</h2> <span flex></span> <md-button class="md-icon-button" ng-click="cancel()"> <md-icon md-font-set="material-icons">close</md-icon> </md-button> </div> </md-toolbar> <md-dialog-content> <span flex></span> <div class="ois-form-layout" layout="column" layout-margin ng-cloak> <div layout="column"> <div flex> <fieldset tabindex="1"> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'module.occupationPartOccupationSpecialize\' | translate}}</legend> <div layout="column"> <div ng-repeat="occupation in occupations | orderBy: \'code\'"> <md-checkbox ng-model="occupation.selected" ng-change="changeOccupation(occupation)" ng-disabled="readOnly"> <hois-classifier-value ng-model="occupation.code" main-classifier-codes="KUTSE" class="inline"></hois-classifier-value> </md-checkbox> <div layout="column"> <div ng-repeat="subOccupation in occupation.subOccupations | orderBy: \'code\'" layout="row"> <div flex="5">&nbsp;</div> <md-checkbox ng-model="subOccupation.selected" ng-change="changeOccupation(subOccupation)" ng-disabled="readOnly"> <hois-classifier-value ng-model="subOccupation" main-classifier-code="OSAKUTSE,SPETSKUTSE" class="inline"></hois-classifier-value> </md-checkbox> </div> </div> </div> </div> <input style="display:none" type="number" readonly name="occupationsLength" ng-model="data.moduleOccupations.length" min="1"> <div class="invalid" ng-if="dialogForm.$submitted" ng-messages="dialogForm.occupationsLength.$error"> <div ng-message="min">{{\'main.messages.error.atLeastOneShouldBeAdded\' | translate}}</div> </div> <p class="invalid" ng-show="dialogForm.$submitted && !occupationsValid"> {{\'stateCurriculum.error.specialtiesInvalid\' | translate}} </p> <md-input-container hide> <input ng-model="occupationsValid" type="text" required> </md-input-container> <p class="invalid" ng-show="dialogForm.$submitted && !suboccupationsValid"> {{\'stateCurriculum.error.partAndSpecOccupationsInvalid\' | translate}} </p> <md-input-container hide> <input ng-model="suboccupationsValid" type="text" required> </md-input-container> </fieldset> </div> <div>&nbsp;</div> <div layout="row" flex> <md-input-container flex="45"> <label>{{\'stateCurriculum.enter.module.type\' | translate}}</label> <hois-classifier-select ng-model="data.module" show-only-values="allowedModuleTypes" main-classifier-code="KUTSEMOODUL" required ng-disabled="readOnly" model-value-attr="code"></hois-classifier-select> </md-input-container> <md-input-container flex="20" flex-sm="50" flex-xs="50" flex-offset="5"> <label>{{\'stateCurriculum.enter.module.credits\' | translate}}</label> <input ng-model="data.credits" type="number" min="0" max="999" required name="credits" ng-readonly="readOnly" pattern="^\\d+(\\.\\d{1})?$"> <div ng-messages="dialogForm.credits.$error" ng-show="dialogForm.credits.$dirty"> <div ng-message="min"> {{\'stateCurriculum.enter.credits.positive\' | translate}} </div> <div ng-message="max"> {{\'stateCurriculum.enter.credits.max\' | translate}} </div> <div ng-message="pattern"> {{\'stateCurriculum.error.decimalPresision\' | translate}} </div> </div> </md-input-container> </div> <md-input-container flex> <label>{{\'stateCurriculum.enter.module.nameEt\' | translate}}</label> <input ng-model="data.nameEt" type="text" required md-maxlength="255" ng-readonly="readOnly"> </md-input-container> <md-input-container flex> <label>{{\'stateCurriculum.enter.module.nameEn\' | translate}}</label> <input ng-model="data.nameEn" type="text" md-maxlength="255" ng-readonly="readOnly"> </md-input-container> <md-input-container flex> <label>{{\'stateCurriculum.enter.module.objectiveEt\' | translate}}</label> <textarea ng-model="data.objectivesEt" required md-maxlength="10000" max-rows="10" ng-readonly="readOnly"></textarea> </md-input-container> <md-input-container flex> <label>{{\'stateCurriculum.enter.module.objectiveEn\' | translate}}</label> <textarea ng-model="data.objectivesEn" md-maxlength="10000" max-rows="10" ng-readonly="readOnly"></textarea> </md-input-container> <div flex> <fieldset tabindex="2"> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'module.studyOutcome\' | translate}} *</legend> <input style="display:none" type="number" readonly name="outcomesLength" ng-model="data.outcomes.length" min="1"> <div class="invalid" ng-if="dialogForm.$submitted" ng-messages="dialogForm.outcomesLength.$error"> <div ng-message="min">{{\'main.messages.error.atLeastOneShouldBeAdded\' | translate}}</div> </div> <div layout="row" flex ng-if="!readOnly"> <md-input-container flex="45"> <label>{{\'studyOutcome.nameEt\' | translate}} *</label> <textarea ng-model="data.outcomesEt" md-maxlength="1000" max-rows="10" md-select-on-focus></textarea> </md-input-container> <md-input-container flex="40" flex-offset="5"> <label>{{\'studyOutcome.nameEn\' | translate}}</label> <textarea ng-model="data.outcomesEn" md-maxlength="1000" max-rows="10" md-select-on-focus></textarea> </md-input-container> <md-button class="md-primary" ng-click="addOutcome()" ng-if="!isEditingOutcome">{{\'main.button.add\' | translate}}</md-button> <md-button class="md-primary" ng-click="saveOutcome()" ng-if="isEditingOutcome">{{\'main.button.change\' | translate}}</md-button> </div> <div layout="column"> <div ng-repeat="item in data.outcomes | orderBy: \'id\' track by $index" class="occupation-row align-center" layout="row" flex> <div flex="45"> <a ng-click="editOutcome(item)" ng-if="!readOnly"> <p class="scrollable">{{item.outcomesEt}}</p> </a> <p class="scrollable" ng-if="readOnly">{{item.outcomesEt}}</p> </div> <div flex="40" flex-offset="5"> <a ng-click="editOutcome(item)" ng-if="!readOnly"> <p class="scrollable">{{item.outcomesEn}}</p> </a> <p class="scrollable" ng-if="readOnly">{{item.outcomesEn}}</p> </div> <div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</div> <div> <a class="remove" ng-click="removeFromArray(data.outcomes, item)" ng-if="!readOnly">&times;&nbsp;&nbsp;</a> </div> </div> </div> </fieldset> </div> <div>&nbsp;</div> <md-input-container flex> <label>{{\'stateCurriculum.enter.module.criteriaEt\' | translate}}</label> <textarea ng-model="data.assessmentsEt" required md-maxlength="20000" max-rows="10" ng-readonly="readOnly"></textarea> </md-input-container> <md-input-container flex> <label>{{\'stateCurriculum.enter.module.criteriaEn\' | translate}}</label> <textarea ng-model="data.assessmentsEn" md-maxlength="20000" max-rows="10" ng-readonly="readOnly"></textarea> </md-input-container> <br> <md-checkbox ng-model="data.isAdditional" aria-label="{{\'stateCurriculum.enter.module.isAdditional\' | translate}}" ng-disabled="readOnly"> {{\'stateCurriculum.enter.module.isAdditional\' | translate}} </md-checkbox> </div> </div> </md-dialog-content> <md-dialog-actions layout="row" layout-align="start center"> <md-button class="md-raised md-primary" ng-click="submit()" ng-if="!readOnly">{{"main.button.save" | translate}}</md-button> <md-button ng-click="delete()" ng-if="editing && !readOnly" class="md-raised"> {{\'main.button.delete\' | translate}}</md-button> <md-button class="md-raised" ng-click="cancel()">{{"main.button.close" | translate}}</md-button> </md-dialog-actions> </form> </md-dialog>'),a.put("stateCurriculum/state.curriculum.module.view.dialog.html",'<md-dialog aria-label="module add dialog" flex="70" flex-xs="100"> <form name="dialogForm" ng-cloak> <md-toolbar> <div class="md-toolbar-tools"> <h2>{{"module.viewToughtModule" | translate}}</h2> <span flex></span> <md-button class="md-icon-button" ng-click="cancel()"> <md-icon md-font-set="material-icons">close</md-icon> </md-button> </div> </md-toolbar> <md-dialog-content> <span flex></span> <div class="ois-form-layout" layout="column" layout-margin ng-cloak> <div layout="column"> <div flex> <fieldset tabindex="1"> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'module.occupationPartOccupationSpecialize\' | translate}}</legend> <div layout="column"> <div ng-repeat="occupation in occupations | orderBy: \'code\'"> <md-checkbox ng-model="occupation.selected" disabled> <hois-classifier-value ng-model="occupation.code" main-classifier-codes="KUTSE" class="inline"></hois-classifier-value> </md-checkbox> <div layout="column"> <div ng-repeat="subOccupation in occupation.subOccupations | orderBy: \'code\'" layout="row"> <div flex="5">&nbsp;</div> <md-checkbox ng-model="subOccupation.selected" disabled> <hois-classifier-value ng-model="subOccupation" main-classifier-code="OSAKUTSE,SPETSKUTSE" class="inline"></hois-classifier-value> </md-checkbox> </div> </div> </div> </div> </fieldset> </div> <div>&nbsp;</div> <div layout="row" flex> <md-input-container flex="45"> <label>{{\'stateCurriculum.enter.module.type\' | translate}}</label> <hois-classifier-select ng-model="data.module" main-classifier-code="KUTSEMOODUL" disabled model-value-attr="code"></hois-classifier-select> </md-input-container> <md-input-container flex="20" flex-sm="50" flex-xs="50" flex-offset="5"> <label>{{\'stateCurriculum.enter.module.credits\' | translate}}</label> <input ng-model="data.credits" type="number" name="credits" readonly> </md-input-container> </div> <md-input-container flex> <label>{{\'stateCurriculum.enter.module.nameEt\' | translate}}</label> <input ng-model="data.nameEt" type="text" readonly> </md-input-container> <md-input-container flex> <label>{{\'stateCurriculum.enter.module.nameEn\' | translate}}</label> <input ng-model="data.nameEn" type="text" readonly> </md-input-container> <md-input-container flex> <label>{{\'stateCurriculum.enter.module.objectiveEt\' | translate}}</label> <textarea ng-model="data.objectivesEt" max-rows="10" readonly></textarea> </md-input-container> <md-input-container flex> <label>{{\'stateCurriculum.enter.module.objectiveEn\' | translate}}</label> <textarea ng-model="data.objectivesEn" max-rows="10" readonly></textarea> </md-input-container> <div flex> <fieldset tabindex="2"> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'module.studyOutcome\' | translate}}</legend> <div layout="column"> <div ng-repeat="item in data.outcomes | orderBy: \'id\' track by $index" class="occupation-row align-center" layout="row" flex> <div flex="45"> <p class="scrollable">{{item.outcomesEt}}</p> </div> <div flex="40" flex-offset="5"> <p class="scrollable">{{item.outcomesEn}}</p> </div> <div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</div> <div></div> </div> </div> </fieldset> </div> <div>&nbsp;</div> <md-input-container flex> <label>{{\'stateCurriculum.enter.module.criteriaEt\' | translate}}</label> <textarea ng-model="data.assessmentsEt" max-rows="10" readonly></textarea> </md-input-container> <md-input-container flex> <label>{{\'stateCurriculum.enter.module.criteriaEn\' | translate}}</label> <textarea ng-model="data.assessmentsEn" max-rows="10" readonly></textarea> </md-input-container> <br> <md-checkbox ng-model="data.isAdditional" aria-label="{{\'stateCurriculum.enter.module.isAdditional\' | translate}}" disabled> {{\'stateCurriculum.enter.module.isAdditional\' | translate}} </md-checkbox> </div> </div> </md-dialog-content> <md-dialog-actions layout="row" layout-align="start center"> <md-button class="md-raised" ng-click="cancel()">{{"main.button.close" | translate}}</md-button> </md-dialog-actions> </form> </md-dialog>'),a.put("stateCurriculum/state.curriculum.view.html",'<div class="ois-form-layout-padding"> <div flex> <form name="stateCurriculumForm" layout="column" class="nomargin"> <fieldset tabindex="1" flex> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'curriculum.mainData\' | translate}}</legend> <div layout="column"> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="50" flex-sm="100" flex-xs="100"> <label>{{\'stateCurriculum.enter.nameEt\' | translate}}</label> <input ng-model="stateCurriculum.nameEt" type="text" name="nameEt" readonly> </md-input-container> <md-input-container flex="45" flex-sm="100" flex-xs="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'stateCurriculum.enter.nameEn\' | translate}}</label> <input ng-model="stateCurriculum.nameEn" type="text" name="nameEn" readonly> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="25" flex-sm="100" flex-xs="100"> <label>{{\'curriculum.areaOfStudy\' | translate}}</label> <hois-classifier-select ng-model="iscedVald" main-classifier-code="ISCED_VALD" criteria="{vocational: true}" model-value-attr="code" disabled></hois-classifier-select> </md-input-container> <md-input-container flex="20" flex-sm="100" flex-xs="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'curriculum.fieldOfStudy\' | translate}}</label> <hois-classifier-select ng-model="iscedSuun" main-classifier-code="ISCED_SUUN" criteria="{vocational: true}" watch-model="iscedVald" model-value-attr="code" filter-values search-from-connect connect-main-classifier-code="ISCED_VALD" disabled> </hois-classifier-select> </md-input-container> <md-input-container flex="45" flex-sm="100" flex-xs="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'curriculum.group\' | translate}}</label> <hois-classifier-select ng-model="stateCurriculum.iscedClass" main-classifier-code="ISCED_RYHM" criteria="{vocational: true}" watch-model="iscedSuun" model-value-attr="code" filter-values search-from-connect connect-main-classifier-code="ISCED_SUUN" disabled></hois-classifier-select> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column" class="top-margin"> <md-input-container flex="25" flex-sm="100" flex-xs="100"> <label>{{\'stateCurriculum.enter.credits.credits\' | translate}}</label> <input ng-model="stateCurriculum.credits" type="number" name="credits" readonly> </md-input-container> <md-input-container flex="20" flex-sm="100" flex-xs="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'stateCurriculum.enter.ROKclassifier\' | translate}}</label> <hois-classifier-select ng-model="stateCurriculum.stateCurrClass" main-classifier-code="EHIS_ROK" criteria="{vocational: true}" model-value-attr="code" disabled></hois-classifier-select> </md-input-container> </div> </div> </fieldset> <div>&nbsp;</div> <fieldset tabindex="2"> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'curriculum.commonData\' | translate}}</legend> <div layout="column"> <md-input-container flex> <label>{{\'stateCurriculum.enter.objectivesEt\' | translate}}</label> <textarea ng-model="stateCurriculum.objectivesEt" max-rows="10" readonly></textarea> </md-input-container> <md-input-container flex> <label>{{\'stateCurriculum.enter.objectivesEn\' | translate}}</label> <textarea ng-model="stateCurriculum.objectivesEn" max-rows="10" readonly></textarea> </md-input-container> <md-input-container flex> <label>{{\'stateCurriculum.enter.outcome.outcomeLabelEt\' | translate}}</label> <textarea ng-model="stateCurriculum.outcomesEt" max-rows="10" readonly></textarea> </md-input-container> <md-input-container flex> <label>{{\'stateCurriculum.enter.outcome.outcomeLabelEn\' | translate}}</label> <textarea ng-model="stateCurriculum.outcomesEn" max-rows="10" readonly></textarea> </md-input-container> <md-input-container flex> <label>{{\'stateCurriculum.enter.admission.requirementsEt\' | translate}}</label> <textarea ng-model="stateCurriculum.admissionRequirementsEt" max-rows="10" readonly></textarea> </md-input-container> <md-input-container flex> <label>{{\'stateCurriculum.enter.admission.requirementsEn\' | translate}}</label> <textarea ng-model="stateCurriculum.admissionRequirementsEn" max-rows="10" readonly></textarea> </md-input-container> <md-input-container flex> <label>{{\'stateCurriculum.enter.graduation.requirementsEt\' | translate}}</label> <textarea ng-model="stateCurriculum.graduationRequirementsEt" max-rows="10" readonly></textarea> </md-input-container> <md-input-container flex> <label>{{\'stateCurriculum.enter.graduation.requirementsEn\' | translate}}</label> <textarea ng-model="stateCurriculum.graduationRequirementsEn" max-rows="10" readonly></textarea> </md-input-container> </div> </fieldset> <div>&nbsp;</div> <fieldset tabindex="3" flex> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'stateCurriculum.enter.occupation.acquiredMany\' | translate}}&nbsp;</legend> <div> <table md-table class="secondary-table"> <thead md-head> <tr md-row> <th md-column>Jrk</th> <th md-column>Kutse</th> <th md-column>Osakutsed</th> <th md-column>Spetsialiseerumised</th> <th md-column></th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="occupation in stateCurriculum.occupations | orderBy" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell>{{$index + 1}}</td> <td md-cell> <hois-classifier-value ng-model="occupation" main-classifier-code="KUTSE"></hois-classifier-value> </td> <td md-cell><span ng-repeat="subOccupation in subOccupations[occupation] | filter:{ mainClassCode: \'OSAKUTSE\'}"><span ng-if="$index > 0">; </span>{{currentLanguageNameField(subOccupation)}} </span> </td> <td md-cell><span ng-repeat="subOccupation in subOccupations[occupation] | filter:{ mainClassCode: \'SPETSKUTSE\'}"><span ng-if="$index > 0">; </span>{{currentLanguageNameField(subOccupation)}} </span> </td> <td md-cell></td> </tr> </tbody> </table> </div> </fieldset> <div>&nbsp;</div> <fieldset tabindex="3" flex> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'stateCurriculum.enter.module.modules\' | translate}}&nbsp;</legend> <div layout="row" ng-if="stateCurriculum.occupations.length > 0"> </div> <!--KUTSETE MOODULID--> <div ng-repeat="occupation in stateCurriculum.occupations | orderBy" layout="column"> <div class="occupation-header align-center"><span>{{\'stateCurriculum.enter.occupation.occupation\' | translate}} {{$index + 1}}:&nbsp;</span> <hois-classifier-value ng-model="occupation" main-classifier-code="KUTSE"></hois-classifier-value> </div> <div layout="column"> <div layout="row" flex="100" class="occupation-row align-center border-bottom odd"> <div flex="5">&nbsp;</div> <div flex="20">{{\'stateCurriculum.enter.module.modules1\' | translate}}</div> <div layout="column" flex="75"> <div flex="100" ng-repeat="module in stateCurriculum.modules | filter: filterModules(occupation, MODULE_TYPE.GENERAL) | orderBy: \'nameEt\'" layout="row" class="align-center"> <a flex="30" ng-click="openViewModuleDialog(module)" href="">{{currentLanguageNameField(module)}}</a> <span flex="10">{{module.credits}}&nbsp; EKAP</span> </div> </div> </div> <div layout="row" flex="100" class="occupation-row align-center even"> <div flex="5">&nbsp;</div> <div flex="20">{{\'stateCurriculum.enter.module.modules2\' | translate}}&nbsp;</div> <div layout="column" flex="75"> <div flex="100" ng-repeat="module in stateCurriculum.modules | filter: filterModules(occupation, MODULE_TYPE.BASIC) | orderBy: \'nameEt\'" layout="row" class="align-center"> <a flex="30" ng-click="openViewModuleDialog(module)" href="">{{currentLanguageNameField(module)}}</a> <span flex="10">{{module.credits}}&nbsp; EKAP</span> </div> </div> </div> </div> <!--OSAKUTSETE MOODULID--> <div ng-repeat="suboccupation in subOccupationsList | filter: filterSubOccupations(occupation, \'OSAKUTSE\') | orderBy: \'nameEt\'" layout="column"> <div class="occupation-header2 align-center">{{\'stateCurriculum.enter.occupation.partial\' | translate}} {{$index + 1}}: {{currentLanguageNameField(suboccupation)}}</div> <div layout="column"> <div layout="row" flex="100" class="occupation-row align-center border-bottom odd"> <div flex="5">&nbsp;</div> <div flex="20">{{\'stateCurriculum.enter.module.modules1\' | translate}}</div> <div layout="column" flex="75"> <div flex="100" ng-repeat="module in stateCurriculum.modules | filter: filterModules(suboccupation.code, MODULE_TYPE.GENERAL) | orderBy: \'nameEt\'" layout="row" class="align-center"> <a flex="30" ng-click="openViewModuleDialog(module)" href="">{{currentLanguageNameField(module)}}</a> <span flex="10">{{module.credits}}&nbsp; EKAP</span> </div> </div> </div> <div layout="row" flex="100" class="occupation-row align-center even"> <div flex="5">&nbsp;</div> <div flex="20">{{\'stateCurriculum.enter.module.modules2\' | translate}}&nbsp;</div> <div layout="column" flex="75"> <div flex="100" ng-repeat="module in stateCurriculum.modules | filter: filterModules(suboccupation.code, MODULE_TYPE.BASIC) | orderBy: \'nameEt\'" layout="row" class="align-center"> <a flex="30" ng-click="openViewModuleDialog(module)" href="">{{currentLanguageNameField(module)}}</a> <span flex="10">{{module.credits}}&nbsp; EKAP</span> </div> </div> </div> </div> </div> <!--SPETSKUTSETE MOODULID--> <div ng-repeat="suboccupation in subOccupationsList | filter: filterSubOccupations(occupation, \'SPETSKUTSE\') | orderBy: \'nameEt\'" layout="column"> <div class="occupation-header2 align-center"><span>{{\'stateCurriculum.enter.occupation.specialty\' | translate}} {{$index + 1}}: {{currentLanguageNameField(suboccupation)}}</span></div> <div layout="column"> <div layout="row" flex="100" class="occupation-row align-center border-bottom odd"> <div flex="5">&nbsp;</div> <div flex="20">{{\'stateCurriculum.enter.module.modules1\' | translate}}</div> <div layout="column" flex="75"> <div flex="100" ng-repeat="module in stateCurriculum.modules | filter: filterModules(suboccupation.code, MODULE_TYPE.GENERAL) | orderBy: \'nameEt\'" layout="row" class="align-center"> <a flex="30" ng-click="openViewModuleDialog(module)" href="">{{currentLanguageNameField(module)}}</a> <span flex="10">{{module.credits}}&nbsp; EKAP</span> </div> </div> </div> <div layout="row" flex="100" class="occupation-row align-center even"> <div flex="5">&nbsp;</div> <div flex="20">{{\'stateCurriculum.enter.module.modules2\' | translate}}&nbsp;</div> <div layout="column" flex="75"> <div flex="100" ng-repeat="module in stateCurriculum.modules | filter: filterModules(suboccupation.code, MODULE_TYPE.BASIC) | orderBy: \'nameEt\'" layout="row" class="align-center"> <a flex="30" ng-click="openViewModuleDialog(module)" href="">{{currentLanguageNameField(module)}}</a> <span flex="10">{{module.credits}}&nbsp; EKAP</span> </div> </div> </div> </div> </div> </div> </fieldset> <div>&nbsp;</div> <fieldset tabindex="5"> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'curriculum.additionalInfo\' | translate}}</legend> <div layout="column"> <div layout="row"> <md-input-container> <label>{{\'stateCurriculum.enter.module.modules3\' | translate}}</label> <input type="number" name="optionalCredits" ng-model="stateCurriculum.optionalStudyCredits" aria-label="optional credits" readonly> </md-input-container> </div> <md-input-container flex> <label>{{\'stateCurriculum.enter.practice\' | translate}}</label> <textarea ng-model="stateCurriculum.practiceDescription" max-rows="10" readonly></textarea> </md-input-container> <md-input-container flex> <label>{{\'stateCurriculum.enter.finalExam\' | translate}}</label> <textarea ng-model="stateCurriculum.finalExamDescription" max-rows="10" readonly></textarea> </md-input-container> <md-input-container flex> <label>{{\'stateCurriculum.enter.comment\' | translate}}</label> <textarea ng-model="stateCurriculum.description" max-rows="10" readonly></textarea> </md-input-container> <div>&nbsp;</div> <div class="form-readonly" layout="column" ng-if="stateCurriculum.riigiteatajaUrl"> <br> <md-input-container flex> <label>{{\'stateCurriculum.enter.riigiteataja\' | translate}}</label> <a href="{{stateCurriculum.riigiteatajaUrl}}" target="_blank">{{stateCurriculum.riigiteatajaUrl}}</a> </md-input-container> </div> </div> </fieldset> <div>&nbsp;</div> <fieldset tabindex="6"> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'curriculum.statuses\' | translate}}</legend> <div layout="column"> <div layout="row" flex> <md-input-container> <label>{{\'stateCurriculum.enter.validFrom\' | translate}}</label> <md-datepicker ng-model="stateCurriculum.validFrom" md-open-on-focus disabled> </md-datepicker> </md-input-container> <md-input-container flex-offset="5"> <label>{{\'stateCurriculum.enter.validThru\' | translate}}</label> <md-datepicker ng-model="stateCurriculum.validThru" md-min-date="stateCurriculum.validFrom" md-open-on-focus disabled> </md-datepicker> </md-input-container> </div> <div class="form-readonly top-margin" flex layout="row"> <md-input-container flex="100"> <label class="label">{{\'main.status\' | translate}}</label> <hois-classifier-value ng-model="stateCurriculum.status" main-classifier-code="OPPEKAVA_STAATUS"></hois-classifier-value> </md-input-container> </div> </div> </fieldset> <div>&nbsp;</div> <fieldset tabindex="11" ng-show="stateCurriculum.curricula && stateCurriculum.curricula.length > 0"> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'stateCurriculum.curricula\' | translate}}</legend> <table md-table class="secondary-table"> <thead md-head> <tr md-row> <th md-column>{{\'school.label\' | translate}}</th> <th md-column>{{\'curriculum.name\' | translate}}</th> <th md-column>{{\'curriculum.studyLevel\' | translate}}</th> <th md-column>{{\'stateCurriculum.creditsEkap\' | translate}}</th> <th md-column>{{\'stateCurriculum.validFrom\' | translate}}</th> <th md-column>{{\'stateCurriculum.validThru\' | translate}}</th> <th md-column>{{\'stateCurriculum.status\' | translate}}</th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="curriculum in stateCurriculum.curricula | orderBy: currentLanguageNameField()" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell>{{currentLanguageNameField(curriculum.school)}}</td> <td md-cell><a class="md-primary" ng-href="#/vocationalCurriculum/{{curriculum.id}}/view">{{currentLanguageNameField(curriculum)}}</a></td> <td md-cell> <hois-classifier-value ng-model="curriculum.origStudyLevel" main-classifier-codes="OPPEASTE,EKR"></hois-classifier-value> </td> <td md-cell>{{curriculum.credits}}</td> <td md-cell>{{curriculum.validFrom | hoisDate}}</td> <td md-cell>{{curriculum.validThru | hoisDate}}</td> <td md-cell> <hois-classifier-value ng-model="curriculum.status" main-classifier-code="OPPEKAVA_STAATUS"></hois-classifier-value> </td> </tr> </tbody> </table> </fieldset> <hois-created-modified object="stateCurriculum"></hois-created-modified> </form> <div layout="row"> <div ng-show="stateCurriculum.status === STATUS.ENTERING"> <md-button ng-href="#/stateCurriculum/{{stateCurriculum.id}}/edit?_noback" class="md-raised md-primary" ng-if="stateCurriculum.canChange">{{\'main.button.change\' | translate}} </md-button> </div> <div ng-show="stateCurriculum.status === STATUS.VERIFIED"> <md-button ng-click="goToEditForm()" class="md-raised md-primary" ng-if="stateCurriculum.canChange">{{\'main.button.change\' | translate}} </md-button> <md-button class="md-raised md-default" ng-click="close()" ng-if="stateCurriculum.canClose"> {{\'stateCurriculum.statusButton.close\' | translate}} </md-button> </div> <a href="{{formState.stateCurriculumPdfUrl}}" target="_blank" class="md-button md-raised" ng-if="stateCurriculum.id">{{\'main.button.print\' | translate}}</a> <md-button ng-click="back(\'#/stateCurriculum\')" class="md-raised">{{\'main.button.back\' | translate}}</md-button> </div> </div> </div>'),
a.put("student/absence.edit.dialog.html",'<md-dialog aria-label="grade add dialog" flex="30" flex-xs="100"> <form name="studentAbsenceForm" novalidate ng-cloak> <md-dialog-content> <div class="md-dialog-content"> <div layout="row" class="form-readonly"> <md-input-container flex> <label>{{\'student.name\' | translate}}</label> <hois-value value="record.studentName"></hois-value> </md-input-container> <md-input-container flex> <label>{{\'student.studentGroup\' | translate}}</label> <hois-value value="record.studentGroup"></hois-value> </md-input-container> </div> <div layout="row"> <md-input-container flex> <label>{{\'student.absence.validFrom\' | translate}}</label> <md-datepicker ng-model="record.validFrom" name="validFrom" required></md-datepicker> </md-input-container> <md-input-container flex> <label>{{\'student.absence.validThru\' | translate}}</label> <md-datepicker ng-model="record.validThru" name="validThru" md-min-date="record.validFrom"></md-datepicker> </md-input-container> </div> <md-input-container class="md-block"> <label>{{\'student.absence.cause\' | translate}}</label> <textarea ng-model="record.cause" name="cause" required md-maxlength="1000"></textarea> </md-input-container> </div> </md-dialog-content> <md-dialog-actions layout="row" layout-align="start center"> <md-button ng-click="update()" class="md-raised md-primary">{{\'main.button.save\' | translate}}</md-button> <md-button ng-click="delete()" ng-if="record.id" class="md-raised">{{\'main.button.delete\' | translate}}</md-button> <md-button ng-click="cancel()" class="md-raised">{{\'main.button.back\' | translate}}</md-button> </md-dialog-actions> </form> </md-dialog>'),a.put("student/edit.main.html",'<div layout="column" layout-padding> <div> <form name="studentEditForm" novalidate> <hois-collapsable label="(\'student.contact\' | translate)"> <md-input-container class="md-block"> <label>{{\'student.email\' | translate}}</label> <input ng-model="student.person.email" name="email" type="text" required md-maxlength="255"> </md-input-container> <md-input-container class="md-block"> <label class="textInput">{{\'student.phone\' | translate}}</label> <input ng-model="student.person.phone" name="phone" type="text" required md-maxlength="100"> </md-input-container> <md-input-container class="md-block"> <label>{{\'student.residenceCountry\' | translate}}</label> <hois-classifier-select ng-model="student.person.residenceCountry" name="residenceCountry" main-classifier-code="RIIK" required model-value-attr="code"></hois-classifier-select> </md-input-container> <div class="md-block" ng-if="student.person.residenceCountry === \'RIIK_EST\'"> <hois-ads-adapter class="md-text" ng-model="student.person.addressAds" ads-oid-model="student.person.addressAdsOid" address-model="student.person.address" required></hois-ads-adapter> </div> <md-input-container class="md-block" ng-if="student.person.residenceCountry !== \'RIIK_EST\'"> <label class="textInput">{{\'student.address\' | translate}}</label> <input ng-model="student.person.address" name="address" type="text" required md-maxlength="255"> </md-input-container> <md-input-container class="md-block" ng-if="student.person.residenceCountry !== \'RIIK_EST\'"> <label class="textInput">{{\'student.postcode\' | translate}}</label> <input ng-model="student.person.postcode" name="postcode" type="text" required md-maxlength="10"> </md-input-container> </hois-collapsable> <hois-collapsable label="(\'student.study\' | translate)" ng-if="student.userIsSchoolAdmin"> <md-input-container class="md-block"> <label>{{\'student.studentCard\' | translate}}</label> <input ng-model="student.studentCard" name="studentCard" type="text" md-maxlength="100"> </md-input-container> <md-input-container class="md-block"> <label>{{\'student.schoolEmail\' | translate}}</label> <input ng-model="student.schoolEmail" name="schoolEmail" type="text" md-maxlength="255"> </md-input-container> <md-input-container class="md-block"> <label>{{\'student.previousStudyLevel\' | translate}}</label> <hois-classifier-select ng-model="student.previousStudyLevel" name="previousStudyLevel" main-classifier-code="OPPEASTE" required model-value-attr="code"></hois-classifier-select> </md-input-container> </hois-collapsable> <hois-collapsable label="(\'student.specialNeeds\' | translate)" ng-if="student.userIsSchoolAdmin"> <md-checkbox ng-model="student.isSpecialNeed" name="isSpecialNeed"> {{\'student.isSpecialNeed\' | translate}} </md-checkbox> <md-input-container class="md-block"> <label>{{\'student.specialNeed\' | translate}}</label> <hois-classifier-select ng-model="student.specialNeed" name="specialNeed" main-classifier-code="ERIVAJADUS" model-value-attr="code"></hois-classifier-select> </md-input-container> <md-checkbox ng-model="student.isRepresentativeMandatory" name="isRepresentativeMandatory"> {{\'student.isRepresentativeMandatory\' | translate}} </md-checkbox> </hois-collapsable> </form> <md-button ng-click="update()" class="md-raised md-primary">{{\'main.button.save\' | translate}}</md-button> <md-button ng-href="#/students/{{student.id}}/main?_noback" class="md-raised">{{\'main.button.back\' | translate}}</md-button> </div> </div>'),a.put("student/list.html",'<div class="ois-form-layout-padding ois-form-layout" ng-cloak> <div flex> <fieldset> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'main.searchlabel\' | translate}}</legend> <form ng-submit="loadData()" novalidate> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="45" flex-sm="100" flex-xs="100"> <label class="textInput">{{\'student.name\' | translate}}</label> <input ng-model="criteria.name" name="name" type="text" autofocus> </md-input-container> <md-input-container ng-if="!auth.isStudent()" flex="50" flex-sm="100" flex-xs="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label class="textInput">{{\'student.idcode\' | translate}}</label> <input ng-model="criteria.idcode" name="idcode" type="text" md-minlength="11" md-maxlength="11"> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="45" flex-sm="100" flex-xs="100"> <label>{{\'student.curriculum\' | translate}}</label> <hois-select ng-model="criteria.curriculumVersion" name="curriculumVersion" type="curriculumversion" multiple></hois-select> </md-input-container> <md-input-container flex="50" flex-sm="100" flex-xs="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'student.studentGroup\' | translate}}</label> <input ng-model="criteria.studentGroup" name="studentGroup" type="text"> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="45" flex-sm="100" flex-xs="100"> <label>{{\'student.studyForm\' | translate}}</label> <hois-classifier-select ng-model="criteria.studyForm" criteria="{higher: auth.school.higher ? true : undefined, vocational: auth.school.vocational ? true : undefined}" name="studyForm" model-value-attr="code" main-classifier-code="OPPEVORM" multiple></hois-classifier-select> </md-input-container> <md-input-container flex="50" flex-sm="100" flex-xs="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'student.status\' | translate}}</label> <hois-classifier-select ng-if="auth.isAdmin() || auth.isTeacher()" criteria="{higher: auth.school.higher ? true : undefined, vocational: auth.school.vocational ? true : undefined}" ng-model="criteria.status" name="status" model-value-attr="code" main-classifier-code="OPPURSTAATUS" multiple></hois-classifier-select> <hois-classifier-select ng-if="auth.isStudent()" criteria="{higher: auth.school.higher ? true : undefined, vocational: auth.school.vocational ? true : undefined}" ng-model="criteria.status" name="status" model-value-attr="code" main-classifier-code="OPPURSTAATUS" filter-values="[\'OPPURSTAATUS_K\', \'OPPURSTAATUS_L\']" multiple></hois-classifier-select> </md-input-container> </div> <div layout="row"> <md-button type="submit" class="md-raised md-primary">{{\'main.button.search\' | translate}}</md-button> <md-button class="md-raised" ng-click="clearCriteria()">{{\'main.button.clear\' | translate}}</md-button> </div> <div flex-xs="0" flex-gt-xs="0" flex-gt-sm="50"></div> </form> </fieldset> </div> </div> <div layout-padding> <div flex> <md-table-container> <table md-table md-progress="tabledata.$promise"> <thead md-head md-order="criteria.order" md-on-reorder="loadData"> <tr md-row> <th md-column md-order-by="person.lastname,person.firstname">{{\'student.name\' | translate}}</th> <th ng-if="auth.isAdmin() || auth.isTeacher()" md-column md-order-by="person.idcode">{{\'student.idcode\' | translate}}</th> <th md-column md-order-by="curriculumVersion.code">{{\'student.curriculum\' | translate}}</th> <th md-column md-order-by="studentGroup.code">{{\'student.studentGroup\' | translate}}</th> <th md-column md-order-by="{{currentLanguage()===\'en\' ? \'studyForm.nameEn\' : \'studyForm.nameEt\'}}">{{\'student.studyForm\' | translate}}</th> <th md-column md-order-by="{{currentLanguage()===\'en\' ? \'status.nameEn\' : \'status.nameEt\'}}">{{\'student.status\' | translate}}</th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="row in tabledata.content" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell> <a ng-if="auth.isAdmin() || auth.isTeacher()" md-no-ink class="md-primary" ng-href="#/students/{{::row.id}}/main">{{::row.fullname}}</a> <span ng-if="auth.isStudent()">{{::row.fullname}}</span> </td> <td ng-if="auth.isAdmin() || auth.isTeacher()" md-cell>{{::row.idcode}}</td> <td md-cell>{{currentLanguageNameField(row.curriculumVersion)}}</td> <td md-cell>{{currentLanguageNameField(row.studentGroup)}}</td> <td md-cell>{{currentLanguageNameField(row.studyForm)}}</td> <td md-cell>{{currentLanguageNameField(row.status)}}</td> </tr> </tbody> </table> </md-table-container> <md-table-pagination md-limit="criteria.size" md-limit-options="[10, 20, 50]" md-page="criteria.page" md-total="{{tabledata.totalElements}}" md-on-paginate="loadData" md-label="{page: \'{{\'main.page\' | translate}}:\', rowsPerPage: \'{{\'main.rowPerPage\' | translate}}:\', of: \'{{\'main.of\' | translate}}\'}" md-page-select></md-table-pagination> </div> </div>'),a.put("student/student.journal.dialog.html",'<md-dialog aria-label="student journal dialog" flex="60" flex-xs="100"> <md-toolbar> <div class="md-toolbar-tools"> <h2> <hois-classifier-value ng-model="journal.yearCode" main-classifier-code="OPPEAASTA" style="display:inline-block"></hois-classifier-value> <span>{{\'student.journal.studyYear\' | translate}}</span> <span>{{$parent.currentLanguageNameField(journal)}}</span> </h2> </div> </md-toolbar> <br> <span style="padding-left:1%; padding-right: 1%"> <md-dialog-content> <md-table-container> <table md-table md-progress="journal.$promise"> <thead md-head> <tr md-row> <th md-column>{{\'student.journal.entry.date\' | translate}}</th> <th md-column>{{\'student.journal.entry.content\' | translate}}</th> <th md-column>{{\'student.journal.entry.grade\' | translate}}</th> <th md-column>{{\'student.journal.entry.gradeAddInfo\' | translate}}</th> <th md-column>{{\'student.journal.entry.homework\' | translate}}</th> <th md-column>{{\'student.journal.entry.homeworkDuedate\' | translate}}</th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="row in journal.journalEntries " ng-class-odd="\'odd\'" ng-class-even="\'even\'" md-colors="{background: getEntryColor(row.entryType)}"> <td md-cell>{{row.entryDate ? (row.entryDate | hoisDate) : \'-\'}}</td> <td md-cell>{{row.content}}</td> <td md-cell> <span> <span>{{row.gradeValue}}</span> <md-tooltip md-direction="bottom" style="height: auto"> <div>{{row.gradeInserted | hoisDateTime}}</div> </md-tooltip> </span> <span ng-repeat="previousGrade in row.previousResults track by $index"> <span>{{$first ? \'/\' : \'\'}}</span> <span> <span>{{previousGrade.gradeValue}} </span> <md-tooltip md-direction="bottom" style="height: auto"> <div>{{previousGrade.gradeInserted | hoisDateTime}}</div> </md-tooltip> </span> <span>{{$last ? \'\' : \'/\'}}</span> </span> </td> <td md-cell>{{row.addInfo}}</td> <td md-cell>{{row.homework ? row.homework : \'-\'}}</td> <td md-cell>{{row.homeworkDueDate ? (row.homeworkDueDate | hoisDate) : \'-\' }}</td> </tr> </tbody> </table> </md-table-container> <br> <div layout="row"> <div layout="row" layout-align="end" layout-sm="column" layout-xs="column" flex="100"> <span class="journal-legend" flex-offset="5" md-colors="{background: getEntryColor(\'SISSEKANNE_T\')}">{{$parent.currentLanguageNameField(journalEntryTypes[\'SISSEKANNE_T\'])}}</span> <span class="journal-legend" flex-offset="5" md-colors="{background: getEntryColor(\'SISSEKANNE_E\')}">{{$parent.currentLanguageNameField(journalEntryTypes[\'SISSEKANNE_E\'])}}</span> <span class="journal-legend" flex-offset="5" md-colors="{background: getEntryColor(\'SISSEKANNE_I\')}">{{$parent.currentLanguageNameField(journalEntryTypes[\'SISSEKANNE_I\'])}}</span> <span class="journal-legend" flex-offset="5" md-colors="{background: getEntryColor(\'SISSEKANNE_H\')}">{{$parent.currentLanguageNameField(journalEntryTypes[\'SISSEKANNE_H\'])}}</span> <span ng-show="journal.moduleOutcomesAsEntries" class="journal-legend" flex-offset="5" md-colors="{background: getEntryColor(\'SISSEKANNE_O\')}">{{$parent.currentLanguageNameField(journalEntryTypes[\'SISSEKANNE_O\'])}}</span> <span class="journal-legend" flex-offset="5" md-colors="{background: getEntryColor(\'SISSEKANNE_L\')}">{{$parent.currentLanguageNameField(journalEntryTypes[\'SISSEKANNE_L\'])}}</span> </div> </div> </md-dialog-content> <md-dialog-actions layout="row" layout-align="start center"> <md-button ng-click="close()" class="md-raised">{{\'main.button.close\' | translate}}</md-button> </md-dialog-actions> </span> </md-dialog>'),a.put("student/student.journal.list.html",'<md-nav-bar md-selected-nav-item="currentNavItem" aria-label="{{\'subjectStudyPeriod.label.options\' | translate}}"> <md-nav-item md-nav-href="#/students/journals" name="journals">{{\'student.journal.journals\' | translate}}</md-nav-item> <md-nav-item md-nav-href="#/students/study" name="study">{{\'student.journal.study.label\' | translate}}</md-nav-item> <md-nav-item md-nav-href="#/students/tasks" name="tasks">{{\'student.journal.tasks.label\' | translate}}</md-nav-item> </md-nav-bar> <div layout-padding> <div flex> <hois-collapsable ng-repeat="year in journalsByYears track by $index" expanded="year.collapsableOpen"> <hois-collapsable-header> <span> <hois-classifier-value style="display: inline-block" ng-model="year.yearCode" main-classifier-code="OPPEAASTA"></hois-classifier-value> <span>{{\'student.journal.studyYear\' | translate}}</span> </span> </hois-collapsable-header> <md-table-container> <table md-table> <tbody md-body> <tr md-row ng-repeat="journal in year.journals" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell width="20%"><a ng-click="showJournal(journal)">{{journal.nameEt}}</a></td> <td md-cell> <span ng-repeat="result in journal.journalEntries | filter : {gradeValue: \'\'} | orderBy: [\'!entryDate\', \'-entryDate\']" ng-class="{good: result.entryType === \'SISSEKANNE_L\' && resultIsPostive(result.gradeValue), \r\n                                bad: result.entryType === \'SISSEKANNE_L\' && !resultIsPostive(result.gradeValue),\r\n                                bold: isTestButNotFinal(result.entryType)}"> {{result.gradeValue}} &nbsp <md-tooltip ng-if="result.gradeValue"> {{result.gradeInserted | hoisDate}} <span ng-if="result.entryType">,&nbsp;</span> {{currentLanguageNameField(result.entryTypeClassifier)}} <span ng-if="result.addInfo">,&nbsp;</span> {{result.addInfo}} </md-tooltip> </span> </td> <td md-cell width="20%"> <span>{{\'student.journal.absences\' | translate}}: {{journal.absencePV}}, </span> <span>{{\'student.journal.includingAbsencesWithoutReason\' | translate}}: <span ng-class="{bad: journal.absenceP > 0}">{{journal.absenceP}}</span> </span> </td> <td md-cell>{{\'student.journal.lateForClass\' | translate}}: {{journal.absenceH}}</td> <td md-cell><a ng-href="/#/studyMaterial/vocational/{{journal.id}}/view">{{\'studyMaterial.label\' | translate}}</a></td> </tr> </tbody> </table> </md-table-container> </hois-collapsable> </div> </div> <style>.good {\r\n    color: rgb(13,71,161);\r\n    font-weight: 500;\r\n    font-size: 18px;\r\n}\r\n    \r\n.bad {\r\n    color: red;\r\n    font-weight: 500;\r\n    font-size: 18px;\r\n}\r\n\r\n.bold {\r\n    font-weight: 500;\r\n}</style>'),a.put("student/student.journal.study.html",'<md-nav-bar md-selected-nav-item="currentNavItem" aria-label="{{\'subjectStudyPeriod.label.options\' | translate}}"> <md-nav-item md-nav-href="#/students/journals" name="journals">{{\'student.journal.journals\' | translate}}</md-nav-item> <md-nav-item md-nav-href="#/students/study" name="study">{{\'student.journal.study.label\' | translate}}</md-nav-item> <md-nav-item md-nav-href="#/students/tasks" name="tasks">{{\'student.journal.tasks.label\' | translate}}</md-nav-item> </md-nav-bar> <div layout-padding> <div layout-row style="text-align: center"> <md-button ng-if="previousWeekIndex !== null" ng-click="changeWeek(previousWeekIndex)" class="md-icon-button md-primary"> <md-icon>arrow_back</md-icon> </md-button> <h2 style="display:inline-block">{{shownWeek.start | hoisDayMonth}} - {{shownWeek.end | hoisDayMonth}}</h2> <md-button ng-if="nextWeekIndex !== null" ng-click="changeWeek(nextWeekIndex)" class="md-icon-button md-primary"> <md-icon>arrow_forward</md-icon> </md-button> </div> <md-table-container ng-if="shownWeek.entries.length > 0"> <table md-table md-progress="endpoint.$promise"> <thead md-head> <tr md-row> <th md-column width="10%">{{\'student.journal.study.date\' | translate}}</th> <th md-column width="20%">{{\'student.journal.study.journal\' | translate}}</th> <th md-column width="70%">{{\'student.journal.study.content\' | translate}}</th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="entry in shownWeek.entries" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell>{{entry.date | hoisDate}}</td> <td md-cell>{{entry.journalName}}</td> <td md-cell>{{entry.content}}</td> </tr> </tbody> </table> </md-table-container> <div layout-row ng-if="shownWeek.entries.length === 0" style="text-align: center">{{\'student.journal.study.noEntries\' | translate}}</div> </div>'),a.put("student/student.journal.tasks.html",'<md-nav-bar md-selected-nav-item="currentNavItem" aria-label="{{\'subjectStudyPeriod.label.options\' | translate}}"> <md-nav-item md-nav-href="#/students/journals" name="journals">{{\'student.journal.journals\' | translate}}</md-nav-item> <md-nav-item md-nav-href="#/students/study" name="study">{{\'student.journal.study.label\' | translate}}</md-nav-item> <md-nav-item md-nav-href="#/students/tasks" name="tasks">{{\'student.journal.tasks.label\' | translate}}</md-nav-item> </md-nav-bar> <div layout-padding> <div layout-row style="text-align: center"> <md-button ng-if="previousWeekIndex !== null" ng-click="changeWeek(previousWeekIndex)" class="md-icon-button md-primary"> <md-icon>arrow_back</md-icon> </md-button> <h2 style="display:inline-block">{{shownWeek.start | hoisDayMonth}} - {{shownWeek.end | hoisDayMonth}}</h2> <md-button ng-if="nextWeekIndex !== null" ng-click="changeWeek(nextWeekIndex)" class="md-icon-button md-primary"> <md-icon>arrow_forward</md-icon> </md-button> </div> <md-table-container ng-if="shownWeek.entries.length > 0"> <table md-table md-progress="endpoint.$promise"> <thead md-head> <tr md-row> <th md-column width="10%">{{\'student.journal.tasks.date\' | translate}}</th> <th md-column width="20%">{{\'student.journal.tasks.journal\' | translate}}</th> <th md-column width="70%">{{\'student.journal.tasks.content\' | translate}}</th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="task in shownWeek.entries" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell>{{task.date | hoisDate}}</td> <td md-cell>{{task.journalName}}</td> <td md-cell>{{task.taskContent ? (task.taskContent | hoisDate) : \'-\'}}</td> </tr> </tbody> </table> </md-table-container> <div layout-row ng-if="shownWeek.entries.length === 0" style="text-align: center">{{\'student.journal.tasks.noTasks\' | translate}}</div> </div>'),a.put("student/view.absences.html",'<div ng-cloak> <div ng-include="\'student/templates/view.navbar.vocational.tmpl.html\'"></div> </div> <div layout-padding ng-cloak> <div flex> <md-table-container> <table md-table md-progress="tabledata.$promise" class="secondary-table"> <thead md-head md-order="criteria.order" md-on-reorder="loadData"> <tr md-row> <th md-column md-order-by="validFrom">{{\'student.absence.validFrom\' | translate}}</th> <th md-column md-order-by="validThru">{{\'student.absence.validThru\' | translate}}</th> <th md-column md-order-by="cause">{{\'student.absence.cause\' | translate}}</th> <th md-column md-order-by="isAccepted">{{\'student.absence.isAccepted\' | translate}}</th> <th></th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="row in tabledata.content" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell>{{::row.validFrom | hoisDate}}</td> <td md-cell>{{::row.validThru | hoisDate}}</td> <td md-cell>{{::row.cause}}</td> <td md-cell>{{row.isAccepted ? \'main.yes\' : \'main.no\' | translate}}</td> <td md-cell> <md-button md-no-ink ng-click="editAbsence(row)" class="md-primary change-button" ng-if="row.userCanEdit">{{\'main.button.change\' | translate}}</md-button> </td> </tr> </tbody> </table> </md-table-container> <md-table-pagination md-limit="criteria.size" md-limit-options="[10, 20, 50]" md-page="criteria.page" md-total="{{directives.totalElements}}" md-on-paginate="loadData" md-label="{page: \'{{\'main.page\' | translate}}:\', rowsPerPage: \'{{\'main.rowPerPage\' | translate}}:\', of: \'{{\'main.of\' | translate}}\'}" md-page-select></md-table-pagination> <md-button ng-click="editAbsence({})" class="md-primary md-raised" ng-if="tabledata.canAddAbsence">{{\'main.button.create\' | translate}}</md-button> <md-button ng-if="!auth.isStudent()" ng-click="back(\'#/students\')" class="md-raised">{{\'main.button.back\' | translate}}</md-button> </div> </div>'),a.put("student/view.documents.html",'<div ng-cloak> <div ng-if="student && student.isVocational===true" ng-include="\'student/templates/view.navbar.vocational.tmpl.html\'"></div> <div ng-if="!student || student.isVocational===false" ng-include="\'student/templates/view.navbar.higher.tmpl.html\'"></div> </div> <div layout-padding ng-cloak> <div flex> <hois-collapsable label="(\'student.application.label\' | translate)"> <md-table-container> <table md-table md-progress="applications.$promise" class="secondary-table"> <thead md-head md-order="applicationsCriteria.order" md-on-reorder="loadApplications"> <tr md-row> <th md-column md-order-by="{{currentLanguage()===\'en\' ? \'type.nameEn\' : \'type.nameEt\'}}">{{\'student.application.type\' | translate}}</th> <th md-column md-order-by="submitted">{{\'student.application.created\' | translate}}</th> <th md-column md-order-by="{{currentLanguage()===\'en\' ? \'status.nameEn\' : \'status.nameEt\'}}">{{\'student.application.status\' | translate}}</th> <th md-column md-order-by="5">{{\'student.application.confirmDate\' | translate}}</th> <th md-column></th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="row in applications.content" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell> <a ng-href="#/applications/{{::row.id}}/view">{{currentLanguageNameField(row.type)}}</a> </td> <td md-cell>{{::row.submitted | hoisDate}}</td> <td md-cell>{{currentLanguageNameField(row.status)}}</td> <td md-cell>{{::row.confirmDate | hoisDate}}</td> <td md-cell> <a ng-if="(row.status.code === \'AVALDUS_STAATUS_KOOST\') || (row.status.code === \'AVALDUS_STAATUS_YLEVAAT\' && auth.isAdmin())" md-no-ink class="md-button md-primary change-button" ng-href="#/applications/{{::row.id}}/edit">{{\'main.button.change\' | translate}}</a> </td> </tr> </tbody> </table> </md-table-container> <md-table-pagination ng-if="applications.totalElements > applicationsCriteria.size" md-limit="applicationsCriteria.size" md-limit-options="[5, 10, 20, 50]" md-page="applicationsCriteria.page" md-total="{{applications.totalElements}}" md-on-paginate="loadApplications" md-label="{page: \'{{\'main.page\' | translate}}:\', rowsPerPage: \'{{\'main.rowPerPage\' | translate}}:\', of: \'{{\'main.of\' | translate}}\'}" md-page-select></md-table-pagination> <br ng-if="auth.isStudent()"> <md-table-container ng-if="auth.isStudent()"> <table md-table md-progress="applicationTypes.$promise" class="secondary-table"> <thead md-head> <tr md-row> <th md-column>{{\'application.type\' | translate}}</th> <th md-column></th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="row in applicationTypes" ng-class-odd="\'odd\'" ng-class-even="\'even\'" ng-if="applicationTypesApplicable[row.code]"> <td md-cell>{{currentLanguageNameField(row)}}</td> <td md-cell> <div ng-if="applicationTypesApplicable[row.code].isAllowed === true" layout="row" layout-align="end end"> <a class="md-button md-primary" ng-href="#/applications/new?student={{studentId}}&type={{row.code}}">{{\'main.button.apply\' | translate}}</a> </div> </td> </tr> </tbody> </table> </md-table-container> </hois-collapsable> <br> <hois-collapsable ng-if="!auth.isTeacher()" label="(\'certificate.certificates\' | translate)"> <md-table-container ng-if="!auth.isTeacher()"> <table md-table md-progress="certificates.$promise" class="secondary-table"> <thead md-head md-order="certificatesCriteria.order" md-on-reorder="loadCertificates"> <tr md-row> <th md-column md-order-by="c.certificateNr">{{\'certificate.nr\' | translate}}</th> <th md-column md-order-by="type.{{currentLanguageNameField()}}">{{\'certificate.type\' | translate}}</th> <th md-column md-order-by="status.{{currentLanguageNameField()}}">{{\'certificate.status\' | translate}}</th> <th md-column md-order-by="c.headline">{{\'certificate.headline\' | translate}}</th> <th md-column md-order-by="c.inserted">{{\'certificate.inserted\' | translate}}</th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="row in certificates.content" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell>{{::row.certificateNr}}</td> <td md-cell> <a ng-href="#/certificate/{{::row.id}}/view">{{currentLanguageNameField(row.type)}}</a> </td> <td md-cell>{{currentLanguageNameField(row.status)}}</td> <td md-cell>{{::row.headline}}</td> <td md-cell>{{row.inserted | hoisDate}}</td> </tr> </tbody> </table> </md-table-container> <md-table-pagination ng-if="!auth.isTeacher() && certificates.totalElements > certificatesCriteria.size" md-limit="certificatesCriteria.size" md-limit-options="[5, 10, 15]" md-page="certificatesCriteria.page" md-total="{{certificates.totalElements}}" md-on-paginate="loadCertificates" md-label="{page: \'{{\'main.page\' | translate}}:\', rowsPerPage: \'{{\'main.rowPerPage\' | translate}}:\', of: \'{{\'main.of\' | translate}}\'}" md-page-select></md-table-pagination> <br ng-if="auth.isStudent()"> <md-table-container> <table md-table ng-if="auth.isStudent()" class="secondary-table"> <thead md-head> <tr md-row> <th md-column>{{\'certificate.type\' | translate}}</th> <th md-column></th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="type in certificateTypes" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell>{{currentLanguageNameField(type)}}</td> <td md-cell> <md-button md-no-ink class="md-primary change-button" ng-href="#/certificate/{{::type.code}}/new"> {{\'certificate.order\' | translate}} </md-button> </td> </tr> </tbody> </table> </md-table-container> </hois-collapsable> <br> <hois-collapsable label="(\'student.directive.label\' | translate)"> <md-table-container> <table md-table md-progress="directives.$promise" class="secondary-table"> <thead md-head md-order="directivesCriteria.order" md-on-reorder="loadDirectives"> <tr md-row> <th md-column md-order-by="headline">{{\'student.directive.headline\' | translate}}</th> <th md-column md-order-by="{{currentLanguage()===\'en\' ? \'type.nameEn\' : \'type.nameEt\'}}">{{\'student.directive.type\' | translate}}</th> <th md-column md-order-by="directiveNr">{{\'student.directive.directiveNr\' | translate}}</th> <th md-column md-order-by="confirmDate">{{\'student.directive.confirmDate\' | translate}}</th> <th md-column md-order-by="insertedBy">{{\'student.directive.createdBy\' | translate}}</th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="row in directives.content" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell> <a ng-href="#/directives/{{::row.id}}/view">{{::row.headline}}</a> </td> <td md-cell>{{currentLanguageNameField(row.type)}}</td> <td md-cell>{{::row.directiveNr}}</td> <td md-cell>{{::row.confirmDate | hoisDate}}</td> <td md-cell>{{::row.insertedBy}}</td> </tr> </tbody> </table> </md-table-container> <md-table-pagination ng-if="directives.totalElements > directivesCriteria.size" md-limit="directivesCriteria.size" md-limit-options="[5, 10, 15]" md-page="directivesCriteria.page" md-total="{{directives.totalElements}}" md-on-paginate="loadDirectives" md-label="{page: \'{{\'main.page\' | translate}}:\', rowsPerPage: \'{{\'main.rowPerPage\' | translate}}:\', of: \'{{\'main.of\' | translate}}\'}" md-page-select></md-table-pagination> </hois-collapsable> <md-button ng-if="!auth.isStudent()" ng-click="back(\'#/students\')" class="md-raised">{{\'main.button.back\' | translate}}</md-button> </div> </div>'),a.put("student/view.main.html",'<div ng-cloak> <div ng-if="student && student.isVocational===true" ng-include="\'student/templates/view.navbar.vocational.tmpl.html\'"></div> <div ng-if="!student || student.isVocational===false" ng-include="\'student/templates/view.navbar.higher.tmpl.html\'"></div> </div> <div layout-padding ng-cloak class="form-readonly"> <div flex> <div layout="row" layout-xs="column" flex> <div flex="70"> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="35" flex-sm="100" flex-xs="100"> <label>{{\'student.firstname\' | translate}}</label> <hois-value value="student.person.firstname"></hois-value> </md-input-container> <md-input-container flex="60" flex-sm="100" flex-xs="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'student.lastname\' | translate}}</label> <hois-value value="student.person.lastname"></hois-value> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="35" flex-sm="100" flex-xs="100"> <label>{{\'student.idcode\' | translate}}</label> <hois-value value="student.person.idcode"></hois-value> </md-input-container> <md-input-container flex="60" flex-sm="100" flex-xs="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'student.sex\' | translate}}</label> <hois-classifier-value ng-model="student.person.sex" main-classifier-code="SUGU"></hois-classifier-value> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="35" flex-sm="100" flex-xs="100"> <label>{{\'student.citizenship\' | translate}}</label> <hois-classifier-value ng-model="student.person.citizenship" main-classifier-code="RIIK"></hois-classifier-value> </md-input-container> <md-input-container flex="30" flex-sm="100" flex-xs="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'student.language\' | translate}}</label> <hois-classifier-value ng-model="student.person.language" main-classifier-code="OPPEKEEL"></hois-classifier-value> </md-input-container> <md-input-container flex="25" flex-sm="100" flex-xs="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'student.bankaccount\' | translate}}</label> <hois-value value="student.person.bankaccount"></hois-value> </md-input-container> </div> </div> <div> <img ng-if="student.photo" ng-src="{{student.imageUrl}}"> </div> </div> <div layout="column"> <hois-collapsable label="(\'student.study\' | translate) + \' (\' + currentLanguageNameField(student.school) + \')\'"> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="20" flex-sm="100" flex-xs="100"> <label>{{\'student.status\' | translate}}</label> <hois-classifier-value ng-model="student.status" main-classifier-code="OPPURSTAATUS"></hois-classifier-value> </md-input-container> <md-input-container flex="20" flex-sm="100" flex-xs="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{student.isVocational ? \'student.implementationPlan\' : \'student.curriculumVersion\' | translate}}</label> <hois-value value="currentLanguageNameField(student.curriculumVersion)" href-value="student.isVocational ? \'#/vocationalCurriculum/\' + student.curriculum + \'/moduleImplementationPlan/\' + student.curriculumVersion.id + \'/view\' : \'#/higherCurriculum/\' + student.curriculum + \'/version/\' + student.curriculumVersion.id + \'/view\'"></hois-value> </md-input-container> <md-input-container flex="20" flex-sm="100" flex-xs="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'student.studyLanguage\' | translate}}</label> <hois-classifier-value ng-model="student.studyLanguage" main-classifier-code="OPPEKEEL"></hois-classifier-value> </md-input-container> <md-input-container flex="20" flex-sm="100" flex-xs="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0" ng-if="!student.isVocational"> <label>{{\'student.curriculumSpeciality\' | translate}}</label> <hois-value value="currentLanguageNameField(student.curriculumSpeciality)"></hois-value> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="20" flex-sm="100" flex-xs="100"> <label>{{\'student.studentGroup\' | translate}}</label> <hois-value value="currentLanguageNameField(student.studentGroup)" href-value="!auth.isTeacher() ? (\'#/studentgroups/\' + student.studentGroup.id + \'/view\') : undefined"></hois-value> </md-input-container> <md-input-container flex="20" flex-sm="100" flex-xs="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'student.course\' | translate}}</label> <hois-value value="student.course"></hois-value> </md-input-container> <md-input-container flex="20" flex-sm="100" flex-xs="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'student.studyStart\' | translate}}</label> <hois-value value="student.studyStart | hoisDate"></hois-value> </md-input-container> <md-input-container flex="20" flex-sm="100" flex-xs="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{student.studyEnd ? \'student.studyEnd\' : \'student.nominalStudyEnd\' | translate}}</label> <hois-value value="student.studyEnd ? student.studyEnd : student.nominalStudyEnd | hoisDate"></hois-value> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="20" flex-sm="100" flex-xs="100"> <label>{{\'student.studyForm\' | translate}}</label> <hois-classifier-value ng-model="student.studyForm" main-classifier-code="OPPEVORM"></hois-classifier-value> </md-input-container> <md-input-container flex="20" flex-sm="100" flex-xs="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0" ng-if="!student.isVocational"> <label>{{\'student.studyLoad\' | translate}}</label> <hois-classifier-value ng-model="student.studyLoad" main-classifier-code="OPPEKOORMUS"></hois-classifier-value> </md-input-container> <md-input-container flex="20" flex-sm="100" flex-xs="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'student.fin\' | translate}}</label> <hois-classifier-value ng-model="student.fin" main-classifier-code="FINALLIKAS"></hois-classifier-value> </md-input-container> <md-input-container flex="20" flex-sm="100" flex-xs="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'student.finSpecific\' | translate}}</label> <hois-classifier-value ng-model="student.finSpecific" main-classifier-code="FINTAPSUSTUS"></hois-classifier-value> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="20" flex-sm="100" flex-xs="100"> <label>{{\'student.studentCard\' | translate}}</label> <hois-value value="student.studentCard"></hois-value> </md-input-container> <md-input-container flex="20" flex-sm="100" flex-xs="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'student.previousStudyLevel\' | translate}}</label> <hois-classifier-value ng-model="student.previousStudyLevel" main-classifier-code="OPPEASTE"></hois-classifier-value> </md-input-container> <md-input-container ng-if="student.isVocational" flex="20" flex-sm="100" flex-xs="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'student.studyCompany\' | translate}}</label> <hois-value value="student.studyCompany"></hois-value> </md-input-container> <md-input-container ng-if="student.isVocational" flex="20" flex-sm="100" flex-xs="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'student.boardingSchool\' | translate}}</label> <hois-value value="student.boardingSchool"></hois-value> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="20" flex-sm="100" flex-xs="100"> <label>{{\'student.previousSchoolName\' | translate}}</label> <hois-value value="student.previousSchoolName"></hois-value> </md-input-container> <md-input-container flex="20" flex-sm="100" flex-xs="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'student.previousSchoolEndDate\' | translate}}</label> <hois-value value="student.previousSchoolEndDate | hoisYear"></hois-value> </md-input-container> </div> </hois-collapsable> </div> <div ng-if="student.isVocational && student.occupationCertificates && student.occupationCertificates.length > 0"> <hois-collapsable label="(\'student.occupationcertificate.label\' | translate)"> <div ng-repeat="row in student.occupationCertificates"> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="20" flex-sm="100" flex-xs="100"> <label>{{\'student.occupationcertificate.certificateNr\' | translate}}</label> <hois-value value="row.certificateNr"></hois-value> </md-input-container> <md-input-container flex="20" flex-sm="100" flex-xs="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'student.occupationcertificate.occupation\' | translate}}</label> <hois-classifier-value ng-model="row.occupationCode" main-classifier-code="KUTSE"></hois-classifier-value> </md-input-container> <md-input-container flex="20" flex-sm="100" flex-xs="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'student.occupationcertificate.partOccupation\' | translate}}</label> <hois-classifier-value ng-model="row.partOccupationSpecialityCode" main-classifier-codes="OSAKUTSE,SPETSKUTSE"></hois-classifier-value> </md-input-container> <md-input-container flex="20" flex-sm="100" flex-xs="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'student.occupationcertificate.language\' | translate}}</label> <hois-value value="row.language"></hois-value> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="20" flex-sm="100" flex-xs="100"> <label>{{\'student.occupationcertificate.issuer\' | translate}}</label> <hois-value value="row.issuer"></hois-value> </md-input-container> <md-input-container flex="20" flex-sm="100" flex-xs="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'student.occupationcertificate.issueDate\' | translate}}</label> <hois-value value="row.issueDate | hoisDate"></hois-value> </md-input-container> <md-input-container flex="20" flex-sm="100" flex-xs="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'student.occupationcertificate.validFrom\' | translate}}</label> <hois-value value="row.validFrom | hoisDate"></hois-value> </md-input-container> <md-input-container flex="20" flex-sm="100" flex-xs="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'student.occupationcertificate.validThru\' | translate}}</label> <hois-value value="row.validThru | hoisDate"></hois-value> </md-input-container> </div> </div> </hois-collapsable> </div> <div> <hois-collapsable label="(\'student.contact\' | translate)"> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="35" flex-sm="100" flex-xs="100"> <label>{{\'student.schoolEmail\' | translate}}</label> <hois-value value="student.schoolEmail"></hois-value> </md-input-container> <md-input-container flex="55" flex-sm="100" flex-xs="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'student.phone\' | translate}}</label> <hois-value value="student.person.phone"></hois-value> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="35" flex-sm="100" flex-xs="100"> <label>{{\'student.residenceCountry\' | translate}}</label> <hois-classifier-value ng-model="student.person.residenceCountry" main-classifier-code="RIIK"></hois-classifier-value> </md-input-container> <md-input-container flex="30" flex-sm="100" flex-xs="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'student.address\' | translate}}</label> <hois-value value="student.person.address"></hois-value> </md-input-container> <md-input-container flex="20" flex-sm="100" flex-xs="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'student.postcode\' | translate}}</label> <hois-value value="student.person.postcode"></hois-value> </md-input-container> </div> </hois-collapsable> </div> <div> <hois-collapsable label="(\'student.representatives\' | translate)"> <md-button ng-if="student.userCanAddRepresentative" ng-click="editRepresentative()" class="md-raised"> {{\'student.representative.add\' | translate}} </md-button> <br> <br> <md-table-container> <table md-table md-progress="representatives.$promise" class="secondary-table"> <thead md-head md-order="representativesCriteria.order" md-on-reorder="loadRepresentatives"> <tr md-row> <th md-column md-order-by="person.lastname">{{\'student.representative.name\' | translate}}</th> <th md-column md-order-by="person.idcode">{{\'student.representative.idcode\' | translate}}</th> <th md-column md-order-by="relation.nameEt">{{\'student.representative.relation\' | translate}}</th> <th md-column md-order-by="person.phone">{{\'student.representative.phone\' | translate}}</th> <th md-column md-order-by="person.email">{{\'student.representative.email\' | translate}}</th> <th md-column>{{\'student.representative.studentVisible\' | translate}}</th> <th md-column></th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="row in representatives.content" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell>{{::row.person.fullname}}</td> <td md-cell>{{::row.person.idcode}}</td> <td md-cell>{{currentLanguageNameField(row.relation)}}</td> <td md-cell>{{::row.person.phone}}</td> <td md-cell>{{::row.person.email}}</td> <td md-cell>{{row.isStudentVisible ? \'main.yes\' : \'main.no\' | translate}}</td> <td md-cell> <md-button md-no-ink ng-if="row.userCanEdit" ng-click="editRepresentative(row.id)" class="md-primary change-button">{{\'main.button.change\' | translate}}</md-button> </td> </tr> </tbody> </table> </md-table-container> <md-table-pagination ng-if="representatives.totalElements > representativesCriteria.size" md-limit="representativesCriteria.size" md-limit-options="[10, 20, 50]" md-page="representativesCriteria.page" md-total="{{representatives.totalElements}}" md-on-paginate="loadRepresentatives" md-label="{page: \'{{\'main.page\' | translate}}:\', rowsPerPage: \'{{\'main.rowPerPage\' | translate}}:\', of: \'{{\'main.of\' | translate}}\'}" md-page-select></md-table-pagination> </hois-collapsable> </div> <div class="top-margin"> <hois-collapsable label="(\'student.specialNeeds\' | translate)"> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="35" flex-sm="100" flex-xs="100"> <label>{{\'student.isSpecialNeed\' | translate}}</label> <hois-value value="student.isSpecialNeed ? \'main.yes\' : \'main.no\' | translate"></hois-value> </md-input-container> <md-input-container flex="30" flex-sm="100" flex-xs="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'student.specialNeed\' | translate}}</label> <hois-classifier-value ng-model="student.specialNeed" main-classifier-code="ERIVAJADUS"></hois-classifier-value> </md-input-container> <md-input-container flex="20" flex-sm="100" flex-xs="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'student.isRepresentativeMandatory\' | translate}}</label> <hois-value value="student.isRepresentativeMandatory ? \'main.yes\' : \'main.no\' | translate"></hois-value> </md-input-container> </div> </hois-collapsable> </div> <div ng-if="student.isVocational===false"> <hois-collapsable label="(\'student.foreignStudy\' | translate)"> <md-table-container> <table md-table md-progress="foreignstudies.$promise" class="secondary-table"> <thead md-head md-order="foreignstudiesCriteria.order" md-on-reorder="loadForeignstudies"> <tr md-row> <th md-column md-order-by="1">{{\'student.foreignstudy.school\' | translate}}</th> <th md-column md-order-by="country.{{currentLanguageNameField()}}">{{\'student.foreignstudy.country\' | translate}}</th> <th md-column md-order-by="3">{{\'student.foreignstudy.startDate\' | translate}}</th> <th md-column md-order-by="4">{{\'student.foreignstudy.endDate\' | translate}}</th> <th md-column md-order-by="purpose.{{currentLanguageNameField()}}">{{\'student.foreignstudy.purpose\' | translate}}</th> <th md-column md-order-by="programme.{{currentLanguageNameField()}}">{{\'student.foreignstudy.programme\' | translate}}</th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="row in foreignstudies.content" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell>{{::row.school}}</td> <td md-cell> <hois-classifier-value ng-model="row.country" main-classifier-code="RIIK"></hois-classifier-value> </td> <td md-cell>{{::row.startDate | hoisDate}}</td> <td md-cell>{{::row.endDate | hoisDate}}</td> <td md-cell> <hois-classifier-value ng-model="row.abroadPurpose" main-classifier-code="VALISOPE_EESMARK"></hois-classifier-value> </td> <td md-cell> <hois-classifier-value ng-model="row.abroadProgramme" main-classifier-code="VALISKOOL_PROGRAMM"></hois-classifier-value> </td> </tr> </tbody> </table> </md-table-container> <md-table-pagination ng-if="foreignstudies.totalElements > foreignstudiesCriteria.size" md-limit="foreignstudiesCriteria.size" md-limit-options="[10, 20, 50]" md-page="foreignstudiesCriteria.page" md-total="{{foreignstudies.totalElements}}" md-on-paginate="loadForeignstudies" md-label="{page: \'{{\'main.page\' | translate}}:\', rowsPerPage: \'{{\'main.rowPerPage\' | translate}}:\', of: \'{{\'main.of\' | translate}}\'}" md-page-select></md-table-pagination> </hois-collapsable> </div> <md-button ng-href="#/students/{{student.id}}/edit?_noback" ng-if="student.userCanEditStudent" class="md-primary md-raised">{{\'main.button.change\' | translate}}</md-button> <md-button ng-if="!auth.isStudent()" ng-click="back(\'#/students\')" class="md-raised">{{\'main.button.back\' | translate}}</md-button> </div> </div>'),
a.put("student/view.results.html",'<div ng-cloak> <div> <div ng-if="student && student.isVocational===true" ng-include="\'student/templates/view.navbar.vocational.tmpl.html\'"></div> <div ng-if="student && student.isVocational===false" ng-include="\'student/templates/view.navbar.higher.tmpl.html\'"></div> </div> <div> <div ng-if="student && student.isVocational===true" ng-include="\'student/templates/view.results.vocational.tmpl.html\'"></div> <div ng-if="student && student.isVocational===false" ng-include="\'student/templates/view.results.higher.tmpl.html\'"></div> </div> <div layout="row" layout-margin> <md-button ng-if="!auth.isStudent() && !auth.isParent() && resultsCurrentNavItem !== \'student.changeModules\'" ng-click="back(\'#/students\')" class="md-raised">{{\'main.button.back\' | translate}}</md-button> </div> </div>'),a.put("student/view.timetable.html",'<div ng-cloak> <div ng-if="student && student.isVocational===true" ng-include="\'student/templates/view.navbar.vocational.tmpl.html\'"></div> <div ng-if="student && student.isVocational===false" ng-include="\'student/templates/view.navbar.higher.tmpl.html\'"></div> </div> <div layout-padding ng-cloak> <div flex> <div ng-controller="StudentTimetableViewController"> <div ng-include="\'timetable/timetable.week.view.html\'"></div> </div> <md-button ng-if="!auth.isStudent()" ng-click="back(\'#/students\')" class="md-raised">{{\'main.button.back\' | translate}}</md-button> </div> </div>'),a.put("studentAbsence/absence.search.html",'<div class="ois-form-layout-padding ois-form-layout" ng-cloak> <div layout="column"> <fieldset> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'main.searchlabel\' | translate}}</legend> <form name="absencesSearchForm" ng-submit="loadData()" novalidate class="nomargin"> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="45" flex-sm="100" flex-xs="100"> <label>{{\'absence.studyYear\' | translate}}</label> <hois-select ng-model="criteria.studyYear" ng-change="studyYearChanged()" values="studyYears" required></hois-select> </md-input-container> <md-input-container flex flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'absence.studyPeriod\' | translate}}</label> <md-select ng-model="criteria.studyPeriod"> <md-option ng-value="null"></md-option> <md-option ng-repeat="studyPeriod in studyPeriods | filter: filterByStudyYear(criteria.studyYear)" ng-value="studyPeriod.id"> {{ currentLanguageNameField(studyPeriod) }} </md-option> </md-select> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="45" flex-sm="100" flex-xs="100"> <label>{{\'absence.curriculumVersion\' | translate}}</label> <hois-select ng-model="criteria.curriculumVersions" type="curriculumversion" multiple></hois-select> </md-input-container> <md-input-container flex flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'absence.studentGroup\' | translate}}</label> <input ng-model="criteria.studentGroupCode" type="text" md-maxlength="255"> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="45" flex-sm="100" flex-xs="100"> <label>{{\'absence.student\' | translate}}</label> <input ng-model="criteria.studentName" type="text" md-maxlength="255"> </md-input-container> <md-input-container flex flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'absence.status\' | translate}}</label> <md-select ng-model="criteria.isAccepted"> <md-option ng-value="null"></md-option> <md-option ng-value="true">{{ \'absence.isAccepted\' | translate }}</md-option> <md-option ng-value="false">{{ \'absence.isNotAccepted\' | translate }}</md-option> </md-select> </md-input-container> </div> <div layout="row" layout-sm="row" layout-xs="column"> <md-button type="submit" class="md-raised md-primary">{{\'main.button.search\' | translate}}</md-button> <md-button class="md-raised" ng-click="clearCriteria()">{{\'main.button.clear\' | translate}}</md-button> </div> </form> </fieldset> <md-table-container ng-cloak layout-padding> <table md-table md-progress="tabledata.$promise"> <thead md-head md-order="criteria.order" md-on-reorder="loadData"> <tr md-row> <th md-column md-order-by="p.lastname,p.firstname">{{\'absence.student\' | translate}}</th> <th md-column md-order-by="sa.valid_from">{{\'absence.absenceFrom\' | translate}}</th> <th md-column md-order-by="sa.valid_thru">{{\'absence.absenceThru\' | translate}}</th> <th md-column md-order-by="sa.cause">{{\'absence.absenceCause\' | translate}}</th> <th md-column md-order-by="sa.inserted_by">{{\'absence.applicant\' | translate}}</th> <th md-column md-order-by="sa.is_accepted">{{\'absence.isAccepted\' | translate}}</th> <th md-column md-order-by="sa.changed_by">{{\'absence.absenceAcceptor\' | translate}}</th> <th md-column></th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="row in tabledata.content" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell class="one-row"> <a ng-href="#/students/{{row.student.id}}/main">{{currentLanguageNameField(row.student)}}</a> </td> <td md-cell>{{row.validFrom | hoisDate}}</td> <td md-cell>{{row.validThru | hoisDate}}</td> <td md-cell>{{::row.cause}}</td> <td md-cell>{{::row.applicant}}</td> <td md-cell>{{row.isAccepted ? \'main.yes\' : \'main.no\' | translate}}</td> <td md-cell>{{row.acceptor}}</td> <td md-cell> <md-button ng-if="row.canAccept" md-no-ink class="md-primary change-button" ng-click="accept(row)">{{\'absence.accept\' | translate}}</md-button> </td> </tr> </tbody> </table> </md-table-container> <md-table-pagination md-limit="criteria.size" md-limit-options="[10, 20, 50]" md-page="criteria.page" md-total="{{tabledata.totalElements}}" md-on-paginate="loadData" md-label="{page: \'{{\'main.page\' | translate}}:\', rowsPerPage: \'{{\'main.rowPerPage\' | translate}}:\', of: \'{{\'main.of\' | translate}}\' }" md-page-select></md-table-pagination> </div> </div>'),a.put("studentGroup/student.group.edit.html",'<div layout="column" class="ois-form-layout-padding"> <div> <form name="studentGroupForm"> <div layout="column"> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="45" flex-sm="100" flex-xs="100"> <label>{{\'studentGroup.code\' | translate}}</label> <input ng-model="record.code" name="code" ng-readonly="formState.readonly" type="text" required md-maxlength="100"> </md-input-container> <md-input-container flex="25" flex-sm="100" flex-xs="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label class="textInput">{{\'studentGroup.course\' | translate}}</label> <input ng-model="record.course" name="course" ng-readonly="formState.readonly" type="number" required min="0"> </md-input-container> <md-input-container flex="20" flex-sm="100" flex-xs="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label class="textInput">{{\'studentGroup.places\' | translate}}</label> <input ng-model="record.places" name="places" ng-readonly="formState.readonly" type="number" min="0"> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <div flex="45" flex-sm="100" flex-xs="100" ng-if="!formState.readonly"> <hois-autocomplete ng-model="record.curriculum" method="curriculums" name="curriculum" label="studentGroup.curriculumRequired" md-selected-item-change="curriculumChanged()" required></hois-autocomplete> </div> <md-input-container ng-if="formState.readonly" flex="45" flex-sm="100" flex-xs="100" class="readonly top-margin"> <label ng-if="record.id" class="textInput">{{\'studentGroup.curriculumRequired\' | translate}}</label> <hois-value value="currentLanguageNameField(record.curriculum)"></hois-value> </md-input-container> <md-input-container flex="50" flex-sm="100" flex-xs="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label class="textInput">{{formState.curriculumVersionLabel | translate}}</label> <hois-select ng-model="record.curriculumVersion" name="curriculumVersion" ng-disabled="formState.readonly" values="formState.curriculumVersions" ng-change="curriculumVersionChanged()" ng-required="formState.onlyvocational || formState.isVocational"></hois-select> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="45" flex-sm="100" flex-xs="100"> <label class="textInput">{{\'studentGroup.studyForm\' | translate}}</label> <hois-classifier-select ng-model="record.studyForm" name="studyForm" ng-disabled="formState.readonly" main-classifier-code="OPPEVORM" show-only-values="formState.studyForms" model-value-attr="code" required></hois-classifier-select> </md-input-container> <md-input-container flex="25" flex-sm="100" flex-xs="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label class="textInput">{{\'studentGroup.language\' | translate}}</label> <hois-classifier-select ng-model="record.language" name="language" ng-disabled="formState.readonly" main-classifier-code="OPPEKEEL" show-only-values="formState.languages" model-value-attr="code" required></hois-classifier-select> </md-input-container> <md-input-container flex="20" flex-sm="100" flex-xs="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0" class="readonly top-margin"> <label>{{\'student.studyLevel\' | translate}}</label> <hois-classifier-value ng-model="formState.origStudyLevel" main-classifier-code="OPPEASTE"></hois-classifier-value> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column" ng-if="formState.onlyvocational || formState.isVocational"> <div flex="45" flex-sm="100" flex-xs="100"> <hois-autocomplete ng-model="record.teacher" method="teachers" name="teacher" label="studentGroup.teacher"></hois-autocomplete> </div> <md-input-container flex="50" flex-sm="100" flex-xs="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label class="textInput">{{\'studentGroup.speciality\' | translate}}</label> <hois-classifier-select ng-model="record.speciality" name="speciality" ng-disabled="formState.readonly" main-classifier-code="SPETSKUTSE" show-only-values="formState.specialities" model-value-attr="code"></hois-classifier-select> </md-input-container> </div> <div layout="row"> <div flex="33"> <md-input-container flex> <label>{{\'main.validFrom\' | translate}}</label> <md-datepicker ng-model="record.validFrom"></md-datepicker> </md-input-container> <md-input-container flex> <label>{{\'main.validThru\' | translate}}</label> <md-datepicker ng-model="record.validThru" md-min-date="record.validFrom"></md-datepicker> </md-input-container> </div> </div> </div> </form> <div>&nbsp;</div> <md-table-container ng-if="formState.students"> <table md-table md-row-select="!record.id" multiple ng-model="formState.selectedStudents"> <thead md-head md-order="formState.order"> <tr md-row> <th md-column>{{\'main.rowno\' | translate}}</th> <th md-column md-order-by="rowno">{{\'studentGroup.studentname\' | translate}}</th> <th md-column md-order-by="idcode">{{\'studentGroup.idcode\' | translate}}</th> <th md-column md-order-by="curriculumVersion.{{currentLanguageNameField()}}">{{formState.curriculumVersionLabel | translate}}</th> <th md-column md-order-by="status.{{currentLanguageNameField()}}">{{\'studentGroup.studentstatus\' | translate}}</th> <th></th> </tr> </thead> <tbody md-body> <tr md-row md-select="row" md-select-id="id" md-auto-select ng-repeat="row in formState.students | orderBy: formState.order" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell>{{::row.rowno}}</td> <td md-cell> <a ng-disabled="!record.id" class="md-primary" ng-href="#/students/{{::row.id}}/main">{{::row.fullname}}</a> </td> <td md-cell>{{::row.idcode}}</td> <td md-cell>{{currentLanguageNameField(row.curriculumVersion)}}</td> <td md-cell>{{currentLanguageNameField(row.status)}}</td> <td md-cell> <a ng-if="record.id" md-no-ink class="remove" ng-click="removeStudent(row.id)">&times;</a> </td> </tr> </tbody> </table> </md-table-container> <md-button ng-click="update()" class="md-raised md-primary">{{\'main.button.save\' | translate}}</md-button> <md-button ng-click="delete()" ng-if="record.id && !(formState.students && formState.students.length > 0)" class="md-raised">{{\'main.button.delete\' | translate}}</md-button> <md-button ng-href="#/studentgroups" class="md-raised">{{\'main.button.back\' | translate}}</md-button> <md-button ng-click="addStudents()" class="md-raised">{{\'studentGroup.addStudents\' | translate}}</md-button> </div> </div>'),a.put("studentGroup/student.group.list.html",'<div class="ois-form-layout-padding ois-form-layout" ng-cloak> <div flex> <form ng-submit="loadData()" novalidate> <fieldset tabindex="1"> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'main.searchlabel\' | translate}}</legend> <div flex layout="column"> <md-input-container flex> <label class="textInput">{{\'studentGroup.code\' | translate}}</label> <input ng-model="criteria.code" name="code" type="text" autofocus> </md-input-container> <div layout="row" flex> <div flex="45"> <hois-autocomplete ng-model="criteria.curriculum" method="curriculums" name="curriculum" label="studentGroup.curriculum"></hois-autocomplete> </div> <md-input-container flex="50" flex-offset="5"> <label>{{formState.curriculumVersionLabel | translate}}</label> <hois-select ng-model="criteria.curriculumVersion" values="formState.curriculumVersions" name="curriculumVersion" ng-change="curriculumVersionChanged()" multiple></hois-select> </md-input-container> </div> <div layout="row" flex> <md-input-container flex="45"> <label>{{\'studentGroup.studyForm\' | translate}}</label> <hois-select ng-model="criteria.studyForm" name="studyForm" value-property="code" values="formState.allStudyForms" filter-values="formState.hiddenStudyForms" multiple></hois-select> </md-input-container> <hois-autocomplete label="studentGroup.teacher" ng-if="!formState.onlyhigher" ng-model="criteria.teacher" method="teachers" flex="50" flex-offset="5"></hois-autocomplete> </div> <div layout="row" flex="45"> <md-input-container> <label>{{\'main.validFrom\' | translate}}</label> <md-datepicker ng-model="criteria.validFrom"></md-datepicker> </md-input-container> <md-input-container flex-offset="5"> <label>{{\'main.validThru\' | translate}}</label> <md-datepicker ng-model="criteria.validThru" md-min-date="criteria.validFrom"></md-datepicker> </md-input-container> </div> <div layout="row"> <md-button type="submit" class="md-raised md-primary">{{\'main.button.search\' | translate}}</md-button> <md-button class="md-raised" ng-click="clearCriteria()">{{\'main.button.clear\' | translate}}</md-button> <md-button class="md-raised" ng-if="isAuthorized(\'ROLE_OIGUS_M_TEEMAOIGUS_OPPERYHM\')" ng-href="#/studentgroups/new">{{\'main.button.create\' | translate}}</md-button> </div> </div> </fieldset> </form> </div> </div> <div layout-padding> <div flex> <md-table-container> <table md-table md-progress="tabledata.$promise"> <thead md-head md-order="criteria.order" md-on-reorder="loadData"> <tr md-row> <th md-column md-order-by="code">{{\'studentGroup.code\' | translate}}</th> <th md-column md-order-by="{{currentLanguage()===\'en\' ? \'curriculum.nameEn\' : \'curriculum.nameEt\'}}">{{\'studentGroup.curriculum\' | translate}}</th> <th md-column md-order-by="{{currentLanguage()===\'en\' ? \'studyForm.nameEn\' : \'studyForm.nameEt\'}}">{{\'studentGroup.studyForm\' | translate}}</th> <th md-column md-numeric md-order-by="course">{{\'studentGroup.course\' | translate}}</th> <th md-column md-numeric>{{\'studentGroup.studentCount\' | translate}}</th> <th md-column md-order-by="validFrom">{{\'main.validFrom\' | translate}}</th> <th md-column md-order-by="validThru">{{\'main.validThru\' | translate}}</th> <th></th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="row in tabledata.content" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell><a ng-href="#/studentgroups/{{::row.id}}/view">{{::row.code}}</a></td> <td md-cell>{{currentLanguageNameField(row.curriculum)}}</td> <td md-cell>{{currentLanguageNameField(row.studyForm)}}</td> <td md-cell>{{::row.course}}</td> <td md-cell>{{::row.studentCount}}</td> <td md-cell>{{::row.validFrom | hoisDate}}</td> <td md-cell>{{::row.validThru | hoisDate}}</td> <td md-cell> <md-button md-no-ink class="md-primary change-button" ng-if="isAuthorized(\'ROLE_OIGUS_M_TEEMAOIGUS_OPPERYHM\')" ng-href="#/studentgroups/{{::row.id}}/edit">{{\'main.button.change\' | translate}}</md-button> </td> </tr> </tbody> </table> </md-table-container> <md-table-pagination md-limit="criteria.size" md-limit-options="[10, 20, 50]" md-page="criteria.page" md-total="{{tabledata.totalElements}}" md-on-paginate="loadData" md-label="{page: \'{{\'main.page\' | translate}}:\', rowsPerPage: \'{{\'main.rowPerPage\' | translate}}:\', of: \'{{\'main.of\' | translate}}\'}" md-page-select></md-table-pagination> </div> </div>'),a.put("studentGroup/student.group.view.html",'<div layout="column" class="ois-form-layout-padding form-readonly"> <div> <div layout="column"> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="45" flex-sm="100" flex-xs="100"> <label>{{\'studentGroup.code\' | translate}}</label> <hois-value value="record.code"></hois-value> </md-input-container> <md-input-container flex="25" flex-sm="100" flex-xs="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label class="textInput">{{\'studentGroup.course\' | translate}}</label> <hois-value value="record.course.toString()"></hois-value> </md-input-container> <md-input-container flex="20" flex-sm="100" flex-xs="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label class="textInput">{{\'studentGroup.places\' | translate}}</label> <hois-value value="record.places.toString()"></hois-value> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="45" flex-sm="100" flex-xs="100"> <label class="textInput">{{\'studentGroup.curriculum\' | translate}}</label> <hois-value value="currentLanguageNameField(record.curriculum)"></hois-value> </md-input-container> <md-input-container flex="50" flex-sm="100" flex-xs="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label class="textInput">{{formState.curriculumVersionLabel | translate}}</label> <hois-value value="currentLanguageNameField(formState.curriculumVersion)"></hois-value> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="45" flex-sm="100" flex-xs="100"> <label class="textInput">{{\'studentGroup.studyForm\' | translate}}</label> <hois-classifier-value ng-model="record.studyForm" main-classifier-code="OPPEVORM"></hois-classifier-value> </md-input-container> <md-input-container flex="25" flex-sm="100" flex-xs="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label class="textInput">{{\'studentGroup.language\' | translate}}</label> <hois-classifier-value ng-model="record.language" main-classifier-code="OPPEKEEL"></hois-classifier-value> </md-input-container> <md-input-container flex="20" flex-sm="100" flex-xs="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'student.studyLevel\' | translate}}</label> <hois-classifier-value ng-model="formState.origStudyLevel" main-classifier-code="OPPEASTE"></hois-classifier-value> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column" ng-if="formState.onlyvocational || formState.isVocational"> <md-input-container flex="45" flex-sm="100" flex-xs="100"> <label class="textInput">{{\'studentGroup.teacher\' | translate}}</label> <hois-value value="record.teacher.nameEt"></hois-value> </md-input-container> <md-input-container flex="50" flex-sm="100" flex-xs="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label class="textInput">{{\'studentGroup.speciality\' | translate}}</label> <hois-classifier-value ng-model="record.speciality" main-classifier-code="SPETSKUTSE"></hois-classifier-value> </md-input-container> </div> <div layout="row"> <div layout="column" flex="45"> <br> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex flex-sm="100" flex-xs="100"> <label>{{\'main.validFrom\' | translate}}</label> <hois-value value="record.validFrom | hoisDate"></hois-value> </md-input-container> <md-input-container flex flex-sm="100" flex-xs="100" flex-offset-xs="0" flex-offset-sm="0" flex-offset="5"> <label>{{\'main.validThru\' | translate}}</label> <hois-value value="record.validThru | hoisDate"></hois-value> </md-input-container> </div> </div> </div> </div> <div>&nbsp;</div> <md-table-container ng-if="record.members && record.members.length > 0"> <table md-table> <thead md-head md-order="formState.order"> <tr md-row> <th md-column>{{\'main.rowno\' | translate}}</th> <th md-column md-order-by="rowno">{{\'studentGroup.studentname\' | translate}}</th> <th md-column ng-if="showPersonalData" md-order-by="idcode">{{\'studentGroup.idcode\' | translate}}</th> <th md-column md-order-by="curriculumVersion.{{currentLanguageNameField()}}">{{formState.curriculumVersionLabel | translate}}</th> <th md-column md-order-by="status.{{currentLanguageNameField()}}">{{\'studentGroup.studentstatus\' | translate}}</th> </tr> </thead> <tbody md-body> <tr md-row md-select="row" ng-repeat="row in record.members | orderBy: formState.order" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell>{{::row.rowno}}</td> <td md-cell> <a class="md-primary" ng-if="showPersonalData" ng-href="#/students/{{::row.id}}/main">{{::row.fullname}}</a> <span ng-if="!showPersonalData">{{::row.fullname}}</span> </td> <td md-cell ng-if="showPersonalData">{{::row.idcode}}</td> <td md-cell>{{currentLanguageNameField(row.curriculumVersion)}}</td> <td md-cell>{{currentLanguageNameField(row.status)}}</td> </tr> </tbody> </table> </md-table-container> <md-button ng-href="#/studentgroups/{{record.id}}/edit" class="md-raised md-primary" ng-if="canEdit">{{\'main.button.change\' | translate}}</md-button> <md-button ng-click="back(\'#/studentgroups\')" class="md-raised">{{\'main.button.back\' | translate}}</md-button> </div> </div>'),a.put("studentGroup/student.select.dialog.html",'<md-dialog aria-label="grade add dialog" flex="60" flex-sm="100" flex-xs="100"> <form name="studentGroupStudentForm" novalidate ng-cloak> <md-dialog-content> <div class="md-dialog-content"> <md-table-container> <table md-table md-row-select multiple ng-model="formState.selectedStudents"> <thead md-head md-order="formState.order"> <tr md-row> <th md-column md-order-by="rowno">{{\'studentGroup.studentname\' | translate}}</th> <th md-column md-order-by="idcode">{{\'studentGroup.idcode\' | translate}}</th> <th md-column md-order-by="curriculumVersion.{{$root.currentLanguageNameField()}}">{{formState.curriculumVersionLabel | translate}}</th> <th md-column md-order-by="status.{{$root.currentLanguageNameField()}}">{{\'studentGroup.studentstatus\' | translate}}</th> </tr> </thead> <tbody md-body> <tr md-row md-select="row" md-select-id="id" md-auto-select ng-repeat="row in formState.students | orderBy: formState.order" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell>{{::row.fullname}}</td> <td md-cell>{{::row.idcode}}</td> <td md-cell>{{$root.currentLanguageNameField(row.curriculumVersion)}}</td> <td md-cell>{{$root.currentLanguageNameField(row.status)}}</td> </tr> </tbody> </table> </md-table-container> </div> </md-dialog-content> <md-dialog-actions layout="row" layout-align="start center"> <md-button ng-click="select()" class="md-raised md-primary">{{\'main.button.add\' | translate}}</md-button> <md-button ng-click="cancel()" class="md-raised">{{\'main.button.close\' | translate}}</md-button> </md-dialog-actions> </form> </md-dialog>'),a.put("studentRepresentative/representative.application.create.html",'<div layout="column" class="ois-form-layout-padding ois-form-layout" ng-cloak> <div> <form name="studentRepresentativeApplicationCreateForm" novalidate> <md-input-container class="md-block"> <label>{{\'student.representative.studentIdcode\' | translate}}</label> <hois-idcode-lookup ng-model="record.studentIdcode" name="idcode" role="activestudent" after-lookup="lookupPerson(response)" after-failed-lookup="lookupFailure(response)" required></hois-idcode-lookup> </md-input-container> <md-input-container class="md-block"> <label>{{\'student.representative.firstname\' | translate}}</label> <input ng-model="record.firstname" name="firstname" type="text" readonly> </md-input-container> <md-input-container class="md-block"> <label>{{\'student.representative.lastname\' | translate}}</label> <input ng-model="record.lastname" name="lastname" type="text" readonly> </md-input-container> <md-input-container class="md-block"> <label>{{\'student.representative.relation\' | translate}}</label> <hois-classifier-select ng-model="record.relation" name="relation" main-classifier-code="OPPURESINDAJA" required model-value-attr="code"></hois-classifier-select> </md-input-container> <md-input-container class="md-block"> <label>{{\'student.representative.phone\' | translate}}</label> <input ng-model="record.phone" name="phone" type="text" required md-maxlength="100"> </md-input-container> <md-input-container class="md-block"> <label>{{\'student.representative.email\' | translate}}</label> <input ng-model="record.email" name="email" type="text" required md-maxlength="255"> </md-input-container> </form> <md-button ng-click="apply()" class="md-raised md-primary">{{\'student.representative.application.apply\' | translate}}</md-button> <md-button ng-click="back(\'#/\')" class="md-raised">{{\'main.button.back\' | translate}}</md-button> </div> </div>'),a.put("studentRepresentative/representative.application.decline.dialog.html",'<md-dialog aria-label="grade add dialog" flex="30" flex-xs="100"> <form name="studentRepresentativeApplicationDeclineForm" novalidate ng-cloak> <md-dialog-content> <div class="md-dialog-content"> <md-input-container class="md-block"> <label>{{\'student.representative.application.rejectReason\' | translate}}</label> <textarea ng-model="record.rejectReason" name="rejectReason" required md-maxlength="4000" md-autofocus></textarea> </md-input-container> </div> </md-dialog-content> <md-dialog-actions layout="row" layout-align="start center"> <md-button ng-click="decline()" class="md-raised md-primary">{{\'main.button.decline\' | translate}}</md-button> <md-button ng-click="cancel()" class="md-raised">{{\'main.button.close\' | translate}}</md-button> </md-dialog-actions> </form> </md-dialog>'),a.put("studentRepresentative/representative.application.list.html",'<div class="ois-form-layout-padding ois-form-layout" ng-cloak> <div flex> <fieldset> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'main.searchlabel\' | translate}}</legend> <form ng-submit="loadData()" novalidate class="nomargin"> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="45" flex-sm="100" flex-xs="100"> <label class="textInput">{{\'student.representative.application.applicantname\' | translate}}</label> <input ng-model="criteria.name" name="name" type="text" autofocus> </md-input-container> <md-input-container flex="50" flex-sm="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label class="textInput">{{\'student.representative.application.applicantidcode\' | translate}}</label> <input ng-model="criteria.idcode" name="idcode" type="text" md-minlength="11" md-maxlength="11"> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="45" flex-sm="100" flex-xs="100"> <label>{{\'student.representative.application.status\' | translate}}</label> <hois-classifier-select ng-model="criteria.status" name="status" model-value-attr="code" main-classifier-code="AVALDUS_ESINDAJA_STAATUS"></hois-classifier-select> </md-input-container> </div> <div layout="row"> <md-button type="submit" class="md-raised md-primary">{{\'main.button.search\' | translate}}</md-button> <md-button class="md-raised" ng-click="clearCriteria()">{{\'main.button.clear\' | translate}}</md-button> </div> <div flex-xs="0" flex-gt-xs="0" flex-gt-sm="50"></div> </form> </fieldset> </div> </div> <div layout-padding> <div flex> <md-table-container> <table md-table md-progress="tabledata.$promise"> <thead md-head md-order="criteria.order" md-on-reorder="loadData"> <tr md-row> <th md-column md-order-by="person.lastname,person.firstname">{{\'student.representative.application.applicantname\' | translate}}</th> <th md-column md-order-by="person.idcode">{{\'student.representative.idcode\' | translate}}</th> <th md-column md-order-by="{{currentLanguage()===\'en\' ? \'relation.nameEn\' : \'relation.nameEt\'}}">{{\'student.representative.relation\' | translate}}</th> <th md-column md-order-by="person.phone">{{\'student.representative.phone\' | translate}}</th> <th md-column md-order-by="person.email">{{\'student.representative.email\' | translate}}</th> <th md-column md-order-by="inserted">{{\'student.representative.application.applied\' | translate}}</th> <th md-column md-order-by="{{currentLanguage()===\'en\' ? \'status.nameEn\' : \'status.nameEt\'}}">{{\'student.representative.application.status\' | translate}}</th> <th md-column ng-if="formState.status !== \'AVALDUS_ESINDAJA_STAATUS_E\'" md-order-by="changed">{{(formState.status === \'AVALDUS_ESINDAJA_STAATUS_K\' ? \'student.representative.application.confirmDate\' : (formState.status === \'AVALDUS_ESINDAJA_STAATUS_T\' ? \'student.representative.application.declineDate\' : \'student.representative.application.confirmDeclineDate\')) | translate}}</th> <th md-column md-order-by="student.person.lastname,student.person.firstname">{{\'student.name\' | translate}}</th> <th md-column md-order-by="student.person.idcode">{{\'student.idcode\' | translate}}</th> <th></th> <th></th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="row in tabledata.content" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell>{{::row.fullname}}</td> <td md-cell>{{::row.idcode}}</td> <td md-cell>{{currentLanguageNameField(row.relation)}}</td> <td md-cell>{{::row.phone}}</td> <td md-cell>{{::row.email}}</td> <td md-cell>{{::row.inserted | hoisDate}}</td> <td md-cell> <md-tooltip ng-if="row.status.code === \'AVALDUS_ESINDAJA_STAATUS_T\'">{{::row.rejectReason}}</md-tooltip> {{currentLanguageNameField(row.status)}} </td> <td md-cell ng-if="formState.status !== \'AVALDUS_ESINDAJA_STAATUS_E\'">{{(row.confirmDate || row.declineDate) | hoisDate}}</td> <td md-cell><a md-no-ink class="md-primary" ng-href="#/students/{{::row.studentId}}/main">{{::row.studentFullname}}</a></td> <td md-cell>{{::row.studentIdcode}}</td> <td md-cell> <md-button ng-if="row.status.code === \'AVALDUS_ESINDAJA_STAATUS_E\' && isAuthorized(\'ROLE_OIGUS_M_TEEMAOIGUS_ESINDAVALDUS\')" md-no-ink class="md-primary change-button" ng-click="accept(row)">{{\'main.button.confirm\' | translate}}</md-button> </td> <td md-cell> <md-button ng-if="row.status.code === \'AVALDUS_ESINDAJA_STAATUS_E\' && isAuthorized(\'ROLE_OIGUS_M_TEEMAOIGUS_ESINDAVALDUS\')" md-no-ink class="md-primary change-button" ng-click="decline(row)">{{\'main.button.decline\' | translate}}</md-button> </td> </tr> </tbody> </table> </md-table-container> <md-table-pagination md-limit="criteria.size" md-limit-options="[10, 20, 50]" md-page="criteria.page" md-total="{{tabledata.totalElements}}" md-on-paginate="loadData" md-label="{page: \'{{\'main.page\' | translate}}:\', rowsPerPage: \'{{\'main.rowPerPage\' | translate}}:\', of: \'{{\'main.of\' | translate}}\'}" md-page-select></md-table-pagination> </div> </div>'),a.put("studentRepresentative/representative.edit.dialog.html",'<md-dialog aria-label="grade add dialog" flex="30" flex-xs="100"> <form name="studentRepresentativeEditForm" novalidate ng-cloak> <md-dialog-content> <div class="md-dialog-content"> <fieldset tabindex="1" ng-if="!record.id" class="form-readonly"> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'student.representative.student\' | translate}}</legend> <md-input-container class="md-block"> <label>{{\'student.representative.studentIdcode\' | translate}}</label> <hois-value value="formState.student.person.idcode"></hois-value> </md-input-container> <md-input-container class="md-block"> <label>{{\'student.name\' | translate}}</label> <hois-value value="formState.student.person.fullname"></hois-value> </md-input-container> </fieldset> <fieldset tabindex="2"> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'student.representative.data\' | translate}}</legend> <md-input-container class="md-block"> <label>{{\'student.representative.idcode\' | translate}}</label> <input type="text" name="idcode" ng-model="record.person.idcode" ng-blur="lookupPerson()" md-minlength="11" md-maxlength="11" ng-readonly="record.id" required md-autofocus="!record.id"> <div class="invalid" ng-show="studentRepresentativeEditForm.idcode.$error.notUnique"> {{\'student.representative.samewithstudent\' | translate}} </div> </md-input-container> <md-input-container class="md-block"> <label>{{\'student.representative.firstname\' | translate}}</label> <input ng-model="record.person.firstname" name="firstname" type="text" ng-readonly="record.id || formState.idcode" required md-maxlength="255"> </md-input-container> <md-input-container class="md-block"> <label>{{\'student.representative.lastname\' | translate}}</label> <input ng-model="record.person.lastname" name="lastname" type="text" ng-readonly="record.id || formState.idcode" required md-maxlength="255"> </md-input-container> <md-input-container class="md-block"> <label>{{\'student.representative.relation\' | translate}}</label> <hois-classifier-select ng-model="record.relation" name="relation" ng-disabled="record.id" main-classifier-code="OPPURESINDAJA" required model-value-attr="code"></hois-classifier-select> </md-input-container> <md-input-container class="md-block"> <label>{{\'student.representative.phone\' | translate}}</label> <input ng-model="record.person.phone" name="phone" type="text" required md-maxlength="100" md-autofocus="!!record.id"> </md-input-container> <md-input-container class="md-block"> <label>{{\'student.representative.email\' | translate}}</label> <input ng-model="record.person.email" name="email" type="text" required md-maxlength="255"> </md-input-container> <md-checkbox ng-model="record.isStudentVisible" name="isStudentVisible" ng-disabled="isParent" ng-if="record.id"> {{\'student.representative.studentVisible\' | translate}} </md-checkbox> </fieldset> </div> </md-dialog-content> <md-dialog-actions layout="row" layout-align="start center"> <md-button ng-click="update()" class="md-raised md-primary">{{\'main.button.save\' | translate}}</md-button> <md-button ng-click="delete()" ng-if="record.id && record.userCanDelete" class="md-raised">{{\'main.button.delete\' | translate}}</md-button> <md-button ng-click="cancel()" class="md-raised">{{\'main.button.close\' | translate}}</md-button> </md-dialog-actions> </form> </md-dialog>'),
a.put("studyMaterial/study.material.higher.edit.html",'<div class="ois-form-layout-padding ois-form-layout" ng-cloak> <div flex class="form-readonly"> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="25" flex-sm="100" flex-xs="100"> <label class="textInput">{{\'subjectStudyPeriod.studyPeriod\' | translate}}</label> <hois-value value="currentLanguageNameField(subjectStudyPeriod.studyPeriod)"></hois-value> </md-input-container> <md-input-container flex="30" flex-sm="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label class="textInput">{{\'subjectStudyPeriod.subject\' | translate}}</label> <hois-value value="currentLanguageNameField(subjectStudyPeriod.subject)"></hois-value> </md-input-container> </div> </div> <div flex> <form name="studyMaterialForm" ng-submit="save()" novalidate> <div layout="row"> <hois-autocomplete ng-if="auth.isAdmin()" flex ng-model="$parent.teacher" method="teachers" name="teacher" label="teacher.label" required></hois-autocomplete> </div> <md-input-container layout="row"> <label class="textInput">{{\'studyMaterial.type\' | translate}}</label> <hois-classifier-select ng-model="material.typeCode" main-classifier-code="OPPEMATERJAL" model-value-attr="code" ng-disabled="material.id" required></hois-classifier-select> </md-input-container> <span ng-if="!material.id && material.typeCode === \'OPPEMATERJAL_F\'"> <md-input-container flex> <lf-ng-md-file-input name="file" lf-files="$parent.files" lf-browse-label="{{\'main.addFile\' | translate}}" lf-remove-label="{{\'main.button.delete\' | translate}}" lf-placeholder="" lf-filesize="5MB" disallow-same-file="addedFiles" lf-required> </lf-ng-md-file-input> </md-input-container> <div ng-messages="studyMaterialForm.file.$error"> <div class="invalid" ng-message="required">{{\'main.messages.error.selectFile\' | translate}}</div> <div class="invalid" ng-message="filesize">{{\'main.messages.error.fileTooLarge\' | translate}} 5MB!</div> <div class="invalid" ng-message="samefile">{{\'main.messages.error.fileAlreadyExists\' | translate}}</div> </div> </span> <md-input-container layout="row" ng-if="material.typeCode === \'OPPEMATERJAL_L\'"> <label>{{\'studyMaterial.link\' | translate}}</label> <input ng-model="material.url" type="text" required> </md-input-container> <md-input-container layout="row"> <label>{{\'studyMaterial.name\' | translate}}</label> <input ng-model="material.nameEt" type="text" required> </md-input-container> <md-input-container layout="row"> <label>{{\'studyMaterial.description\' | translate}}</label> <input ng-model="material.descriptionEt" type="text"> </md-input-container> <md-input-container> <md-checkbox ng-model="material.isVisibleToStudents" ng-disabled="material.isPublic === true" aria-label="isVisibleToStudents"> {{\'studyMaterial.isVisibleToStudents\' | translate}} </md-checkbox> </md-input-container> <md-input-container> <md-checkbox ng-model="material.isPublic" aria-label="isPublic"> {{\'studyMaterial.isPublic\' | translate}} </md-checkbox> </md-input-container> <div layout="row"> <md-button class="md-raised md-primary" type="submit">{{\'main.button.save\' | translate}}</md-button> <md-button class="md-raised md-default" ng-click="back(backPath)">{{\'main.button.back\' | translate}}</md-button> </div> </form> </div> </div>'),a.put("studyMaterial/study.material.higher.list.html",'<div class="ois-form-layout-padding ois-form-layout" ng-cloak> <div flex> <fieldset> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'main.searchlabel\' | translate}}</legend> <form name="searchForm" ng-submit="loadData()" novalidate> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="45" flex-sm="100" flex-xs="100"> <label>{{\'subjectStudyPeriod.studyPeriod\' | translate}}</label> <hois-select ng-model="criteria.studyPeriod" values="studyPeriods" ng-required="auth.isAdmin()"></hois-select> </md-input-container> <md-input-container flex="50" flex-sm="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'subjectStudyPeriod.subject\' | translate}}</label> <hois-select ng-model="criteria.subject" type="subject"></hois-select> </md-input-container> </div> <div ng-if="auth.isAdmin()" layout="row" layout-sm="column" layout-xs="column"> <div flex="45" flex-sm="100" flex-xs="100"> <hois-autocomplete flex ng-model="$parent.teacher" method="teachers" name="teacher" label="teacher.label"></hois-autocomplete> </div> </div> <div layout="row"> <md-button type="submit" class="md-raised md-primary">{{\'main.button.search\' | translate}}</md-button> <md-button class="md-raised" ng-click="clearCriteria()">{{\'main.button.clear\' | translate}}</md-button> </div> </form> </fieldset> </div> </div> <div layout-padding> <div flex> <md-table-container> <table md-table md-progress="tabledata.$promise"> <thead md-head md-order="criteria.order" md-on-reorder="loadData"> <tr md-row> <th md-column>{{\'subjectStudyPeriod.subject\' | translate}}</th> <th md-column>{{\'subjectStudyPeriod.studyPeriod\' | translate}}</th> <th md-column>{{\'studyMaterial.count\' | translate}}</th> <th md-column></th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="row in tabledata.content" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell>{{currentLanguageNameField(row.subject)}}</td> <td md-cell>{{currentLanguageNameField(row.studyPeriod)}}</td> <td md-cell>{{row.materialCount}}</td> <td md-cell> <div ng-if="canEdit"> <md-button md-no-ink class="md-primary change-button" ng-href="#/studyMaterial/higher/{{::row.id}}/edit">{{\'main.button.change\' | translate}}</md-button> </div> </td> </tr> </tbody> </table> </md-table-container> <md-table-pagination md-limit="criteria.size" md-limit-options="[10, 20, 50]" md-page="criteria.page" md-total="{{tabledata.totalElements}}" md-on-paginate="loadData" md-label="{page: \'{{\'main.page\' | translate}}:\', rowsPerPage: \'{{\'main.rowPerPage\' | translate}}:\', of: \'{{\'main.of\' | translate}}\'}" md-page-select></md-table-pagination> </div> </div>'),a.put("studyMaterial/study.material.journal.edit.html",'<div class="ois-form-layout-padding ois-form-layout" ng-cloak> <div flex class="form-readonly"> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="25" flex-sm="100" flex-xs="100"> <label class="textInput">{{\'journal.studyYear\' | translate}}</label> <hois-value value="currentLanguageNameField(journal.studyYear)"></hois-value> </md-input-container> <md-input-container flex="30" flex-sm="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label class="textInput">{{\'journal.label\' | translate}}</label> <hois-value value="journal.nameEt"></hois-value> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="25" flex-sm="100" flex-xs="100"> <label class="textInput">{{\'journal.teachers\' | translate}}</label> <hois-value value="teachers"></hois-value> </md-input-container> </div> </div> <div flex> <div ng-include="\'studyMaterial/templates/journal.material.edit.tmpl.html\'"></div> <div layout="row"> <md-button class="md-raised md-default" href="/#/studyMaterial/vocational/">{{\'main.button.back\' | translate}}</md-button> </div> </div> </div>'),a.put("studyMaterial/study.material.journal.view.html",'<div class="ois-form-layout-padding ois-form-layout" ng-cloak> <div flex class="form-readonly"> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="25" flex-sm="100" flex-xs="100"> <label class="textInput">{{\'journal.studyYear\' | translate}}</label> <hois-value value="currentLanguageNameField(journal.studyYear)"></hois-value> </md-input-container> <md-input-container flex="30" flex-sm="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label class="textInput">{{\'journal.label\' | translate}}</label> <hois-value value="journal.nameEt"></hois-value> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="25" flex-sm="100" flex-xs="100"> <label class="textInput">{{\'journal.teachers\' | translate}}</label> <hois-value value="teachers"></hois-value> </md-input-container> </div> </div> <div flex> <div ng-include="\'studyMaterial/templates/journal.material.view.tmpl.html\'"></div> <br> <div layout="row"> <md-button class="md-raised md-default" ng-click="back(\'/#/students/journals\')">{{\'main.button.back\' | translate}}</md-button> </div> </div> </div>'),a.put("studyMaterial/study.material.subjectStudyPeriod.edit.html",'<div class="ois-form-layout-padding ois-form-layout" ng-cloak> <div flex class="form-readonly"> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="25" flex-sm="100" flex-xs="100"> <label class="textInput">{{\'subjectStudyPeriod.studyPeriod\' | translate}}</label> <hois-value value="currentLanguageNameField(subjectStudyPeriod.studyPeriod)"></hois-value> </md-input-container> <md-input-container flex="30" flex-sm="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label class="textInput">{{\'subjectStudyPeriod.subject\' | translate}}</label> <hois-value value="currentLanguageNameField(subjectStudyPeriod.subject)"></hois-value> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="25" flex-sm="100" flex-xs="100"> <label class="textInput">{{\'subjectStudyPeriod.teachers\' | translate}}</label> <hois-value value="teachers"></hois-value> </md-input-container> </div> </div> <div flex> <div ng-include="\'studyMaterial/templates/subjectStudyPeriod.material.edit.tmpl.html\'"></div> <div layout="row"> <md-button class="md-raised md-default" href="/#/studyMaterial/higher/">{{\'main.button.back\' | translate}}</md-button> </div> </div> </div>'),a.put("studyMaterial/study.material.subjectStudyPeriod.view.html",'<div class="ois-form-layout-padding ois-form-layout" ng-cloak> <div flex class="form-readonly"> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="25" flex-sm="100" flex-xs="100"> <label class="textInput">{{\'subjectStudyPeriod.studyPeriod\' | translate}}</label> <hois-value value="currentLanguageNameField(subjectStudyPeriod.studyPeriod)"></hois-value> </md-input-container> <md-input-container flex="30" flex-sm="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label class="textInput">{{\'subjectStudyPeriod.subject\' | translate}}</label> <hois-value value="currentLanguageNameField(subjectStudyPeriod.subject)"></hois-value> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="25" flex-sm="100" flex-xs="100"> <label class="textInput">{{\'subjectStudyPeriod.teachers\' | translate}}</label> <hois-value value="teachers"></hois-value> </md-input-container> </div> </div> <div flex> <div ng-include="\'studyMaterial/templates/subjectStudyPeriod.material.view.tmpl.html\'"></div> <br> <div layout="row"> <md-button class="md-raised md-default" ng-click="back(\'/#/declaration/current/view\')">{{\'main.button.back\' | translate}}</md-button> </div> </div> </div>'),a.put("studyMaterial/study.material.vocational.edit.html",'<div class="ois-form-layout-padding ois-form-layout" ng-cloak> <div flex class="form-readonly"> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="25" flex-sm="100" flex-xs="100"> <label class="textInput">{{\'studyYear.label\' | translate}}</label> <hois-value value="currentLanguageNameField(journal.studyYear)"></hois-value> </md-input-container> <md-input-container flex="30" flex-sm="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label class="textInput">{{\'journal.label\' | translate}}</label> <hois-value value="journal.nameEt"></hois-value> </md-input-container> </div> </div> <div flex> <form name="studyMaterialForm" ng-submit="save()" novalidate> <div layout="row"> <hois-autocomplete ng-if="auth.isAdmin()" flex ng-model="$parent.teacher" method="teachers" name="teacher" label="teacher.label" required></hois-autocomplete> </div> <md-input-container layout="row"> <label class="textInput">{{\'studyMaterial.type\' | translate}}</label> <hois-classifier-select ng-model="material.typeCode" main-classifier-code="OPPEMATERJAL" model-value-attr="code" ng-disabled="material.id" required></hois-classifier-select> </md-input-container> <span ng-if="!material.id && material.typeCode === \'OPPEMATERJAL_F\'"> <md-input-container flex> <lf-ng-md-file-input name="file" lf-files="$parent.files" lf-browse-label="{{\'main.addFile\' | translate}}" lf-remove-label="{{\'main.button.delete\' | translate}}" lf-placeholder="" lf-filesize="5MB" disallow-same-file="addedFiles" lf-required> </lf-ng-md-file-input> </md-input-container> <div ng-messages="studyMaterialForm.file.$error"> <div class="invalid" ng-message="required">{{\'main.messages.error.selectFile\' | translate}}</div> <div class="invalid" ng-message="filesize">{{\'main.messages.error.fileTooLarge\' | translate}} 5MB!</div> <div class="invalid" ng-message="samefile">{{\'main.messages.error.fileAlreadyExists\' | translate}}</div> </div> </span> <md-input-container layout="row" ng-if="material.typeCode === \'OPPEMATERJAL_L\'"> <label>{{\'studyMaterial.link\' | translate}}</label> <input ng-model="material.url" type="text" required> </md-input-container> <md-input-container layout="row"> <label>{{\'studyMaterial.name\' | translate}}</label> <input ng-model="material.nameEt" type="text" required> </md-input-container> <md-input-container layout="row"> <label>{{\'studyMaterial.description\' | translate}}</label> <input ng-model="material.descriptionEt" type="text"> </md-input-container> <md-input-container> <md-checkbox ng-model="material.isVisibleToStudents" ng-disabled="material.isPublic === true" aria-label="isVisibleToStudents"> {{\'studyMaterial.isVisibleToStudents\' | translate}} </md-checkbox> </md-input-container> <md-input-container> <md-checkbox ng-model="material.isPublic" aria-label="isPublic"> {{\'studyMaterial.isPublic\' | translate}} </md-checkbox> </md-input-container> <div layout="row"> <md-button class="md-raised md-primary" type="submit">{{\'main.button.save\' | translate}}</md-button> <md-button class="md-raised md-default" ng-click="back(backPath)">{{\'main.button.back\' | translate}}</md-button> </div> </form> </div> </div>'),a.put("studyMaterial/study.material.vocational.list.html",'<div class="ois-form-layout-padding ois-form-layout" ng-cloak> <div flex> <fieldset> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'main.searchlabel\' | translate}}</legend> <form name="searchForm" ng-submit="loadData()" novalidate> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="45" flex-sm="100" flex-xs="100"> <label>{{\'studyYear.label\' | translate}}</label> <hois-select ng-model="criteria.studyYear" values="studyYears" ng-required="auth.isAdmin()"></hois-select> </md-input-container> <md-input-container flex="50" flex-sm="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'journal.label\' | translate}}</label> <hois-select ng-model="criteria.journal" type="journal"></hois-select> </md-input-container> </div> <div ng-if="auth.isAdmin()" layout="row" layout-sm="column" layout-xs="column"> <div flex="45" flex-sm="100" flex-xs="100"> <hois-autocomplete flex ng-model="$parent.teacher" method="teachers" name="teacher" label="teacher.label"></hois-autocomplete> </div> </div> <div layout="row"> <md-button type="submit" class="md-raised md-primary">{{\'main.button.search\' | translate}}</md-button> <md-button class="md-raised" ng-click="clearCriteria()">{{\'main.button.clear\' | translate}}</md-button> </div> </form> </fieldset> </div> </div> <div layout-padding> <div flex> <md-table-container> <table md-table md-progress="tabledata.$promise"> <thead md-head md-order="criteria.order" md-on-reorder="loadData"> <tr md-row> <th md-column>{{\'journal.label\' | translate}}</th> <th md-column>{{\'studyYear.label\' | translate}}</th> <th md-column>{{\'studyMaterial.count\' | translate}}</th> <th md-column></th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="row in tabledata.content" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell>{{currentLanguageNameField(row)}}</td> <td md-cell>{{currentLanguageNameField(row.studyYear)}}</td> <td md-cell>{{row.materialCount}}</td> <td md-cell> <div ng-if="canEdit"> <md-button md-no-ink class="md-primary change-button" ng-href="#/studyMaterial/vocational/{{::row.id}}/edit">{{\'main.button.change\' | translate}}</md-button> </div> </td> </tr> </tbody> </table> </md-table-container> <md-table-pagination md-limit="criteria.size" md-limit-options="[10, 20, 50]" md-page="criteria.page" md-total="{{tabledata.totalElements}}" md-on-paginate="loadData" md-label="{page: \'{{\'main.page\' | translate}}:\', rowsPerPage: \'{{\'main.rowPerPage\' | translate}}:\', of: \'{{\'main.of\' | translate}}\'}" md-page-select></md-table-pagination> </div> </div>'),a.put("studyYear/study.period.dialog.html",'<md-dialog aria-label="grade add dialog" flex="70" flex-xs="100"> <form name="dialogForm" ng-cloak> <md-toolbar> <div class="md-toolbar-tools"> <h2>{{"studyYear.studyPeriod.heading" | translate}}</h2> <span flex></span> <md-button class="md-icon-button" ng-click="cancel()"> <md-icon md-font-set="material-icons">close</md-icon> </md-button> </div> </md-toolbar> <md-dialog-content> <span flex></span> <div class="ois-form-layout md-dialog-content" layout="column" flex ng-cloak> <div layout="column" flex> <div layout="row" flex layout-align="center center"> <md-input-container flex="45" class="readonly"> <label class="label">{{\'studyYear.studyPeriod.year\' | translate}}</label> <hois-classifier-value ng-model="studyPeriod.year" model-value-attr="code" main-classifier-code="OPPEAASTA"></hois-classifier-value> </md-input-container> <md-input-container flex="50" flex-offset="5"> <label class="textInput">{{\'studyYear.studyPeriod.type\' | translate}}</label> <hois-classifier-select ng-model="studyPeriod.type" model-value-attr="code" ng-change="typeChange()" required main-classifier-code="OPPEPERIOOD"></hois-classifier-select> </md-input-container> </div> <div layout="column" layout-xs="row"> <md-input-container flex> <label>{{\'studyYear.studyPeriod.nameEt\' | translate}}</label> <input ng-model="studyPeriod.nameEt" type="text" md-maxlength="100" required> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="20" flex-sm="100" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'studyYear.studyPeriod.startDate\' | translate}}</label> <md-datepicker ng-model="studyPeriod.startDate" name="startDate" md-max-date="studyPeriod.endDate" md-min-date="studyYear.startDate" required md-open-on-focus></md-datepicker> </md-input-container> <md-input-container flex="20" flex-sm="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'studyYear.studyPeriod.endDate\' | translate}}</label> <md-datepicker ng-model="studyPeriod.endDate" name="endDate" md-min-date="studyPeriod.startDate" md-max-date="studyYear.endDate" required md-open-on-focus></md-datepicker> </md-input-container> </div> </div> </div> </md-dialog-content> <md-dialog-actions layout="row" layout-align="start center"> <md-button class="md-raised md-primary" ng-click="submit()">{{"main.button.save" | translate}}</md-button> <md-button class="md-raised" ng-click="cancel()">{{"main.button.close" | translate}}</md-button> <md-button class="md-raised" ng-click="delete()" ng-if="studyPeriod.id">{{"main.button.delete" | translate}}</md-button> </md-dialog-actions> </form> </md-dialog>'),a.put("studyYear/study.period.event.dialog.html",'<md-dialog aria-label="grade add dialog" flex="70" flex-xs="100"> <form name="dialogForm" ng-cloak> <md-toolbar> <div class="md-toolbar-tools"> <h2>{{"studyYear.studyPeriodEvent.heading" | translate}}</h2> <span flex></span> <md-button class="md-icon-button" ng-click="cancel()"> <md-icon md-font-set="material-icons">close</md-icon> </md-button> </div> </md-toolbar> <md-dialog-content> <span flex></span> <div class="ois-form-layout" layout="column" ng-cloak layout-padding> <div class="ois-form-layout md-dialog-content" layout="column" flex ng-cloak> <div layout="column" flex> <div layout="row" flex> <md-input-container flex="45"> <label class="label">{{\'studyYear.studyPeriodEvent.period\' | translate}}</label> <md-select ng-model="studyPeriodEvent.studyPeriod" ng-required="uniqueInStudyPeriod"> <md-option md-option-empty ng-value="null" ng-if="!uniqueInStudyPeriod"></md-option> <md-option ng-repeat="option in studyPeriods" ng-value="option" aria-label="{{$root.currentLanguageNameField(option)}}">{{$root.currentLanguageNameField(option)}}</md-option> </md-select> </md-input-container> <md-input-container flex="50" flex-offset="5"> <label class="textInput">{{\'studyYear.studyPeriodEvent.eventType\' | translate}}</label> <hois-classifier-select ng-model="studyPeriodEvent.eventType" model-value-attr="code" main-classifier-code="SYNDMUS" required></hois-classifier-select> </md-input-container> </div> </div> <div layout="column" layout-xs="row"> <md-input-container flex> <label>{{\'studyYear.studyPeriodEvent.descriptionEt\' | translate}}</label> <input ng-model="studyPeriodEvent.descriptionEt" type="text" md-maxlength="100" required> </md-input-container> <!--<md-input-container flex>\r\n              <label>{{\'studyYear.studyPeriodEvent.nameEn\' | translate}}</label>\r\n              <input ng-model="studyPeriodEvent.nameEn" type="text" md-maxlength="100">\r\n            </md-input-container>--> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="30" flex-sm="100" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'studyYear.studyPeriodEvent.startDate\' | translate}}</label> <md-datepicker ng-model="studyPeriodEvent.start" md-max-date="studyPeriodEvent.end" required md-open-on-focus></md-datepicker> </md-input-container> <md-input-container flex="30" flex-sm="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'studyYear.studyPeriodEvent.startTime\' | translate}}</label> <hois-time ng-model="studyPeriodEvent.start" placeholder="{{\'main.timePlaceholder\' | translate}}"></hois-time> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="30" flex-sm="100" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'studyYear.studyPeriodEvent.endDate\' | translate}}</label> <md-datepicker ng-model="studyPeriodEvent.end" md-min-date="studyPeriodEvent.start" ng-model-options="{ getterSetter: true }" md-open-on-focus></md-datepicker> </md-input-container> <md-input-container flex="30" flex-sm="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'studyYear.studyPeriodEvent.endTime\' | translate}}</label> <hois-time ng-model="studyPeriodEvent.end" placeholder="{{\'main.timePlaceholder\' | translate}}"></hois-time> </md-input-container> </div> </div> </div> </md-dialog-content> <md-dialog-actions layout="row" layout-align="start center"> <md-button class="md-raised md-primary" ng-click="submit()">{{"main.button.save" | translate}}</md-button> <md-button class="md-raised" ng-click="cancel()">{{"main.button.close" | translate}}</md-button> <md-button class="md-raised" ng-click="delete()" ng-if="studyPeriodEvent.id">{{"main.button.delete" | translate}}</md-button> </md-dialog-actions> </form> </md-dialog>'),a.put("studyYear/study.year.edit.html",'<!--FIXME: IE does not show this form correctly--> <div class="ois-form-layout" layout="column" layout-margin ng-cloak> <form name="schoolYearForm" layout="column"> <div layout="column" flex> <div layout="row" layout-sm="column" layout-xs="column" class="form-readonly"> <md-input-container flex> <label class="label">{{\'studyYear.year\' | translate}}</label> <hois-classifier-value ng-model="studyYear.year" main-classifier-code="OPPEAASTA"></hois-classifier-value> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container> <label>{{\'studyYear.startDate\' | translate}}</label> <md-datepicker ng-model="studyYear.startDate" md-max-date="studyYear.endDate" ng-disabled="!canEdit" required md-open-on-focus></md-datepicker> </md-input-container> <md-input-container> <label>{{\'studyYear.endDate\' | translate}}</label> <md-datepicker ng-model="studyYear.endDate" md-min-date="studyYear.startDate" ng-disabled="!canEdit" required md-open-on-focus></md-datepicker> </md-input-container> <div> <md-button ng-click="update()" ng-if="canEdit" class="md-raised md-primary">{{\'main.button.save\' | translate}}</md-button> </div> </div> </div> <div ng-if="studyYear.id" layout="column" flex> <div>&nbsp;</div> <fieldset tabindex="1"> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'studyYear.studyPeriods\' | translate}}</legend> <md-button class="md-raised" ng-if="canEdit" ng-click="openStudyPeriodDialog()">{{\'main.button.create\' | translate}}</md-button> <div layout="row"> <table md-table class="secondary-table"> <thead md-head> <tr md-row> <th md-column>{{\'studyYear.studyPeriod.type\' | translate}}</th> <th md-column>{{\'studyYear.studyPeriod.name\' | translate}}</th> <th md-column>{{\'studyYear.studyPeriod.startDate\' | translate}}</th> <th md-column>{{\'studyYear.studyPeriod.endDate\' | translate}}</th> <th md-column></th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="item in studyPeriods | orderBy: [\'startDate\', \'endDate\', \'id\']" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell>{{currentLanguageNameField(item.type)}}</td> <td md-cell>{{currentLanguageNameField(item)}}</td> <td md-cell>{{item.startDate | hoisDate}}</td> <td md-cell>{{item.endDate | hoisDate}}</td> <td md-cell><md-button ng-if="canEdit" ng-click="openStudyPeriodDialog(item)" class="md-primary change-button">{{\'main.button.change\' | translate}}</md-button></td> </tr> </tbody> </table> </div> </fieldset> <div>&nbsp;</div> <fieldset> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'studyYear.studyPeriodEvents\' | translate}}</legend> <md-button class="md-raised" ng-if="canEdit" ng-click="openStudyPeriodEventDialog()">{{\'main.button.create\' | translate}}</md-button> <div layout="row"> <table md-table class="secondary-table"> <thead md-head> <tr md-row> <th md-column>{{\'studyYear.studyPeriodEvent.period\' | translate}}</th> <th md-column>{{\'studyYear.studyPeriodEvent.eventType\' | translate}}</th> <th md-column>{{\'studyYear.studyPeriodEvent.description\' | translate}}</th> <th md-column>{{\'studyYear.studyPeriodEvent.start\' | translate}}</th> <th md-column>{{\'studyYear.studyPeriodEvent.end\' | translate}}</th> <th md-column></th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="item in studyPeriodEvents | orderBy: [\'start\', \'end\', \'id\']" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell>{{currentLanguageNameField(item.studyPeriod)}}</td> <td md-cell>{{currentLanguageNameField(eventTypes[item.eventType])}}</td> <td md-cell>{{currentLanguage()===\'en\' ?(item.descriptionEn || item.descriptionEt) : item.descriptionEt}}</td> <td md-cell>{{item.start | hoisDateTimeMin}}</td> <td md-cell>{{item.end | hoisDateTimeMin}}</td> <td md-cell><md-button ng-if="canEdit" ng-click="openStudyPeriodEventDialog(item)" class="md-primary change-button">{{\'main.button.change\' | translate}}</md-button></td> </tr> </tbody> </table> </div> </fieldset> </div> <div layout="row"> <md-button ng-href="#/school/studyYears" class="md-raised">{{\'main.button.back\' | translate}}</md-button> </div> </form> </div>'),a.put("studyYear/study.year.list.html",'<div layout-padding> <div flex> <md-table-container> <table md-table md-progress="endpoint.$promise"> <thead md-head> <tr md-row> <th md-column>{{\'studyYear.year\' | translate}}</th> <th md-column>{{\'studyYear.startDate\' | translate}}</th> <th md-column>{{\'studyYear.endDate\' | translate}}</th> <th md-column>{{\'studyYear.periods\' | translate}}</th> <th md-column></th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="row in tabledata" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell> <span ng-if="!row.id">{{currentLanguageNameField(row)}}</span> <a md-no-ink ng-if="row.id" class="md-primary change-button" ng-href="#/school/studyYears/{{::row.id}}/view">{{currentLanguageNameField(row)}}</a> </td> <td md-cell>{{row.startDate | hoisDate}}</td> <td md-cell>{{row.endDate | hoisDate}}</td> <td md-cell>{{::row.count}}</td> <td md-cell> <md-button md-no-ink class="md-primary change-button" ng-if="!row.id && canEdit" ng-href="#/school/studyYears/{{::row.code}}/new">{{\'main.button.change\' | translate}}</md-button> <md-button md-no-ink class="md-primary change-button" ng-if="row.id && canEdit" ng-href="#/school/studyYears/{{::row.id}}/edit">{{\'main.button.change\' | translate}}</md-button> <md-button md-no-ink class="md-primary change-button" ng-if="row.id && !canEdit" ng-href="#/school/studyYears/{{::row.id}}/view">{{\'main.button.view\' | translate}}</md-button> </td> </tr> </tbody> </table> </md-table-container> </div> </div>'),a.put("studyYear/study.year.view.html",'<!--FIXME: IE does not show this form correctly--> <div class="ois-form-layout form-readonly" layout="column" layout-margin ng-cloak> <form name="schoolYearForm" layout="column"> <div layout="column" flex> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex> <label class="label">{{\'studyYear.year\' | translate}}</label> <hois-classifier-value ng-model="studyYear.year" main-classifier-code="OPPEAASTA"></hois-classifier-value> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column" flex> <md-input-container flex="20"> <label>{{\'studyYear.startDate\' | translate}}</label> <hois-value value="studyYear.startDate | hoisDate"></hois-value> </md-input-container> <md-input-container flex="20" flex-offset="5"> <label>{{\'studyYear.endDate\' | translate}}</label> <hois-value value="studyYear.endDate | hoisDate"></hois-value> </md-input-container> </div> </div> <div ng-if="studyYear.id" layout="column" flex> <div>&nbsp;</div> <fieldset tabindex="1"> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'studyYear.studyPeriods\' | translate}}</legend> <div layout="row"> <table md-table class="secondary-table"> <thead md-head> <tr md-row> <th md-column>{{\'studyYear.studyPeriod.type\' | translate}}</th> <th md-column>{{\'studyYear.studyPeriod.name\' | translate}}</th> <th md-column>{{\'studyYear.studyPeriod.startDate\' | translate}}</th> <th md-column>{{\'studyYear.studyPeriod.endDate\' | translate}}</th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="item in studyPeriods | orderBy: [\'startDate\', \'endDate\', \'id\']" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell>{{currentLanguageNameField(item.type)}}</td> <td md-cell>{{currentLanguageNameField(item)}}</td> <td md-cell>{{item.startDate | hoisDate}}</td> <td md-cell>{{item.endDate | hoisDate}}</td> </tr> </tbody> </table> </div> </fieldset> <div>&nbsp;</div> <fieldset> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'studyYear.studyPeriodEvents\' | translate}}</legend> <div layout="row"> <table md-table class="secondary-table"> <thead md-head> <tr md-row> <th md-column>{{\'studyYear.studyPeriodEvent.period\' | translate}}</th> <th md-column>{{\'studyYear.studyPeriodEvent.eventType\' | translate}}</th> <th md-column>{{\'studyYear.studyPeriodEvent.description\' | translate}}</th> <th md-column>{{\'studyYear.studyPeriodEvent.start\' | translate}}</th> <th md-column>{{\'studyYear.studyPeriodEvent.end\' | translate}}</th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="item in studyPeriodEvents | orderBy: [\'start\', \'end\', \'id\']" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell>{{currentLanguageNameField(item.studyPeriod)}}</td> <td md-cell>{{currentLanguageNameField(eventTypes[item.eventType])}}</td> <td md-cell>{{currentLanguage()===\'en\' ?(item.descriptionEn || item.descriptionEt) : item.descriptionEt}}</td> <td md-cell>{{item.start | hoisDateTimeMin}}</td> <td md-cell>{{item.end | hoisDateTimeMin}}</td> </tr> </tbody> </table> </div> </fieldset> </div> <div layout="row"> <md-button ng-if="canEdit" ng-href="#/school/studyYears/{{::studyYear.id}}/edit" class="md-raised md-primary">{{\'main.button.edit\' | translate}}</md-button> <md-button ng-href="#/school/studyYears" class="md-raised">{{\'main.button.back\' | translate}}</md-button> </div> </form> </div>'),
a.put("studyYearSchedule/study.year.schedule.add.dialog.html",'<md-dialog aria-label="module add dialog" flex="40" flex-sm="80" flex-xs="100"> <form name="dialogForm" ng-cloak> <md-toolbar> <div class="md-toolbar-tools"> <h2>{{"studyYearSchedule.studentGroup" | translate}} {{studentGroup.code}}</h2> <span flex></span> <md-button class="md-icon-button" ng-click="cancel()"> <md-icon md-font-set="material-icons">close</md-icon> </md-button> </div> </md-toolbar> <md-dialog-content> <span flex></span> <div class="ois-form-layout" layout="column" layout-margin ng-cloak> <span flex></span> <h2>{{week.weekNr}}. {{"studyYearSchedule.week" | translate}}: {{week.start | hoisDate}} - {{week.end | hoisDate}}</h2> <br> <md-input-container> <md-radio-group ng-model="data.legend"> <span class="label">{{\'studyYearSchedule.studyType\' | translate}}</span> <md-input-container> <md-input-container> <md-radio-button ng-value="null" aria-label="{{ \'select color\' }}"> <div class="colorCell" style="background: \'white\'"></div> </md-radio-button> </md-input-container> <md-input-container ng-repeat="legend in legends"> <md-radio-button ng-value="legend.id" aria-label="{{ \'select color\' }}"> <div class="colorCell" ng-style="{ background: true ? legend.color : \'white\' }"> <span>&nbsp;{{ legend.code }}</span> </div> </md-radio-button> </md-input-container> </md-input-container> </md-radio-group> </md-input-container> <br> <div layout="row"> <md-input-container flex="35" flex-sm="50" flex-xs="50"> <label>{{\'studyYearSchedule.durationInWeeks\' | translate}}</label> <input type="number" ng-model="data.weeks" min="1" max="{{translationData.weeks}}" required name="weeks" step="1" pattern="^\\d+$"> <div ng-messages="dialogForm.weeks.$error" ng-show="dialogForm.weeks.$dirty"> <div ng-message="min"> {{\'studyYearSchedule.error.minWeeks\' | translate}} </div> <div ng-message="max"> {{\'studyYearSchedule.error.maxWeeks\' | translate:translationData}} </div> <div ng-message="pattern"> {{\'main.messages.error.integer\' | translate}} </div> </div> </md-input-container> </div> <div layout="column" flex> <md-input-container flex> <label>{{\'studyYearSchedule.addInfo\' | translate}}</label> <textarea ng-model="data.addInfo" md-maxlength="4000" md-autofocus></textarea> </md-input-container> </div> <span flex></span> </div> </md-dialog-content> <md-dialog-actions layout="row" layout-align="start center"> <md-button class="md-raised md-primary" ng-click="submit()">{{hasValue ? "main.button.change" : "main.button.add" | translate}}</md-button> <md-button class="md-raised" ng-click="cancel()">{{"main.button.close" | translate}}</md-button> </md-dialog-actions> </form> </md-dialog> <style>.colorCell {\r\n    width: 20px;\r\n    height: 20px;\r\n    border: 1px solid black;\r\n  }\r\n\r\n  md-radio-button {\r\n    padding-right: 20px;\r\n  }</style>'),a.put("studyYearSchedule/study.year.schedule.html",'<!--FIXME: type color is not supported in IE 11--> <table md-table class="secondary-table" ng-if="legends.length > 0"> <thead md-head> <tr md-row> <th md-column>{{\'studyYearScheduleLegend.code\' | translate}}</th> <th md-column>{{\'studyYearScheduleLegend.nameEt\' | translate}}</th> <th md-column>{{\'studyYearScheduleLegend.nameEn\' | translate}}</th> <th md-column>{{\'studyYearScheduleLegend.color\' | translate}}</th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="item in legends" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell>{{item.code}}</td> <td md-cell>{{item.nameEt}}</td> <td md-cell>{{item.nameEn}}</td> <td md-cell><input ng-model="item.color" type="color" disabled></td> </tr> </tbody> </table> <!--FIXME: this form is slow in IE--> <div layout="column" layout-padding> <form name="studyYearScheduleForm"> <div layout="column"> <div layout="row" layout-sm="column" layout-xs="column" ng-if="!auth.school"> <md-input-container flex="50" flex-sm="100" flex-xs="100"> <label>{{\'studyYearSchedule.studyYear\' | translate}}</label> <md-select ng-model="criteria.studyYear"> <md-option ng-value="option" ng-repeat="option in studyYears"> <hois-classifier-value ng-model="option.year" main-classifier-code="OPPEAASTA"></hois-classifier-value> </md-option> </md-select> </md-input-container> <md-input-container flex="45" flex-sm="100" flex-xs="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'studyYearSchedule.schoolDepartment\' | translate}}</label> <hois-select ng-model="criteria.schoolDepartments" values="schoolDepartments" multiple></hois-select> </md-input-container> </div> <br> <md-table-container ng-cloak layout-padding> <table class="schedule"> <thead> <tr class="schedule"> <th class="studentGroup schedule"></th> <th class="schedule" ng-repeat="studyPeriod in criteria.studyYear.studyPeriods" colspan="{{studyPeriod.weeks}}"> {{currentLanguageNameField(studyPeriod)}} </th> </tr> <tr> <th class="schedule studentGroup"></th> <th class="schedule weekCell weekNr" ng-repeat="week in weeks"> {{$index + 1}} <md-tooltip> {{week.start | hoisDate}} - {{week.end | hoisDate}} </md-tooltip> </th> </tr> </thead> <tbody ng-repeat="department in schoolDepartments | filter: filterSchoolDepartments"> <tr> <td colspan="{{weeks.length + 1}}" class="schedule schoolDepartment">{{currentLanguageNameField(department)}}</td> </tr> <tr ng-repeat="sg in studentGroups | filter: filterStudentGroups(department)"> <td class="schedule studentGroup">{{sg.code}}</td> <!--\r\n                                style="background: { getLegendById(getSchedule(sg.id, week.weekNr).studyYearScheduleLegend).color}"\r\n                                Was not used insted of ng-style as VS code marked curly braces as error(css property expected),\r\n                                though it did not cause an error on "grunt build" on local machine\r\n\r\n                                ng-if="!isPastStudyYear" was used, because in case of past study year, it should not become bold when clicked\r\n                            --> <td ng-if="!isPastStudyYear" class="schedule weekCell" ng-repeat="week in weeks" ng-click="openAddScheduleDialog(sg, week, getSchedule(sg.id, week.weekNr))" ng-style="{ background: true ? getLegendById(getSchedule(sg.id, week.weekNr).studyYearScheduleLegend).color : \'white\' }" title="{{getSchedule(sg.id, week.weekNr).addInfo}}"> {{getLegendById(getSchedule(sg.id, week.weekNr).studyYearScheduleLegend).code}} </td> <td ng-if="isPastStudyYear" class="schedule weekCell" ng-repeat="week in weeks" ng-style="{ background: true ? getLegendById(getSchedule(sg.id, week.weekNr).studyYearScheduleLegend).color : \'white\' }" title="{{getSchedule(sg.id, week.weekNr).addInfo}}"> {{getLegendById(getSchedule(sg.id, week.weekNr).studyYearScheduleLegend).code}} </td> </tr> </tbody> </table> </md-table-container> <div layout="row"> <md-button class="md-raised md-primary" ng-if="canEdit" ng-click="save()" ng-show="!isPastStudyYear">{{\'main.button.save\' | translate}}</md-button> </div> </div> </form> </div> <style>table.schedule,\r\n  th.schedule,\r\n  td.schedule {\r\n    border: 1px solid #1cb3ff;\r\n    border-collapse: collapse;\r\n  }\r\n\r\n  .studentGroup {\r\n    width: 100px;\r\n  }\r\n\r\n  .weekCell {\r\n    width: 30px;\r\n  }\r\n\r\n  .schoolDepartment {\r\n    font-weight: bold;\r\n  }\r\n\r\n  .weekNr {\r\n    font-weight: normal;\r\n  }</style>'),a.put("studyYearSchedule/study.year.schedule.legend.html",'<!--FIXME: type color is not supported in IE 11--> <div class="ois-form-layout-padding" layout="row" flex="100" flex-sm="100" flex-xs="100" ng-if="defaultLegends"> <span class="common-label">{{\'studyYearScheduleLegend.defaultLegend\' | translate}}</span> </div> <table md-table class="secondary-table"> <thead md-head> <tr md-row> <th md-column>{{\'studyYearScheduleLegend.code\' | translate}}</th> <th md-column>{{\'studyYearScheduleLegend.nameEt\' | translate}}</th> <th md-column>{{\'studyYearScheduleLegend.nameEn\' | translate}}</th> <th md-column>{{\'studyYearScheduleLegend.color\' | translate}}</th> <th md-column></th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="item in legends" ng-class-odd="\'odd\'" ng-class-even="\'even\'" ng-click="changeEditable(item)"> <td md-cell> <span ng-class="{invalid: formSubmitted && !codeIsValid(item)}" ng-if="!item.edited">{{item.code}}</span> <md-input-container ng-if="item.edited"> <input ng-model="item.code" type="text" max="2" md-max-length="2"> </md-input-container> </td> <td md-cell> <span ng-class="{invalid: formSubmitted && !nameEtIsValid(item)}" ng-if="!item.edited">{{item.nameEt}}</span> <md-input-container ng-if="item.edited"> <input ng-model="item.nameEt" type="text"> </md-input-container> </td> <td md-cell> <span ng-class="{invalid: formSubmitted && !nameEnIsValid(item)}" ng-if="!item.edited">{{item.nameEn}}</span> <md-input-container ng-if="item.edited"> <input ng-model="item.nameEn" type="text"> </md-input-container> </td> <td md-cell> <input ng-model="item.color" type="color" ng-disabled="!canEdit"> </td> <td md-cell> <md-button class="remove nomargin" ng-if="canEdit" ng-click="remove(item)">&times;</md-button> </td> </tr> </tbody> </table> <md-button class="md-primary" ng-if="canEdit" ng-click="addRow()">{{\'main.button.addNewRow\' | translate}}</md-button> <br><br> <md-button class="md-raised md-primary" ng-if="canEdit" ng-click="checkErrorsAndSave()">{{\'main.button.save\' | translate}}</md-button>'),a.put("subject/subject.edit.html",'<div class="ois-form-layout" layout="column" layout-margin ng-cloak> <form name="subjectForm" layout="column"> <md-input-container flex> <label>{{\'subject.code\' | translate}}</label> <input ng-model="subject.code" name="code" type="text" md-maxlength="20" ng-required="true" ng-model-options="{ debounce: 250 }" unique="subjectCodeUniqueQuery"> <div ng-messages="subjectForm.code.$error"> <div ng-message="notUnique"> {{\'subject.alreadyexist\' | translate}} </div> </div> </md-input-container> <md-input-container flex> <label>{{\'subject.nameEt\' | translate}}</label> <input ng-model="subject.nameEt" type="text" md-maxlength="255" ng-required="true"> </md-input-container> <md-input-container flex> <label>{{\'subject.nameEn\' | translate}}</label> <input ng-model="subject.nameEn" type="text" md-maxlength="255" ng-required="true"> </md-input-container> <md-input-container flex> <label>{{\'subject.credits\' | translate}}</label> <input ng-model="subject.credits" type="number" ng-required="true" step="0.1"> </md-input-container> <md-input-container flex> <label>{{\'subject.assessment\' | translate}}</label> <hois-classifier-select ng-model="subject.assessment" model-value-attr="code" main-classifier-code="HINDAMISVIIS" ng-required="true"></hois-classifier-select> </md-input-container> <md-input-container flex> <label>{{\'subject.assessmentDescription\' | translate}}</label> <textarea ng-model="subject.assessmentDescription" md-maxlength="10000" max-rows="2" md-select-on-focus></textarea> </md-input-container> <md-input-container flex> <label>{{\'subject.language\' | translate}}</label> <hois-classifier-select ng-model="subject.languages" model-value-attr="code" main-classifier-code="OPPEKEEL" criteria="{higher: true}" multiple></hois-classifier-select> </md-input-container> <md-input-container flex> <label>{{\'subject.objectivesEt\' | translate}}</label> <textarea ng-model="subject.objectivesEt" md-maxlength="10000" max-rows="2" md-select-on-focus ng-required="true"></textarea> </md-input-container> <md-input-container flex> <label>{{\'subject.objectivesEn\' | translate}}</label> <textarea ng-model="subject.objectivesEn" md-maxlength="10000" max-rows="2" md-select-on-focus ng-required="true"></textarea> </md-input-container> <md-input-container flex> <label>{{\'subject.outcomesEt\' | translate}}</label> <textarea ng-model="subject.outcomesEt" md-maxlength="10000" max-rows="2" md-select-on-focus ng-required="true"></textarea> </md-input-container> <md-input-container flex> <label>{{\'subject.outcomesEn\' | translate}}</label> <textarea ng-model="subject.outcomesEn" md-maxlength="10000" max-rows="2" md-select-on-focus ng-required="true"></textarea> </md-input-container> <md-input-container flex> <label>{{\'subject.descriptionEt\' | translate}}</label> <textarea ng-model="subject.descriptionEt" md-maxlength="4000" max-rows="2" md-select-on-focus></textarea> </md-input-container> <md-input-container flex> <label>{{\'subject.descriptionEn\' | translate}}</label> <textarea ng-model="subject.descriptionEn" md-maxlength="4000" max-rows="2" md-select-on-focus></textarea> </md-input-container> <md-input-container flex> <label>{{\'subject.independentStudyEt\' | translate}}</label> <textarea ng-model="subject.independentStudyEt" md-maxlength="4000" max-rows="2" md-select-on-focus></textarea> </md-input-container> <md-input-container flex> <label>{{\'subject.independentStudyEn\' | translate}}</label> <textarea ng-model="subject.independentStudyEn" md-maxlength="4000" max-rows="2" md-select-on-focus></textarea> </md-input-container> <md-input-container flex> <label>{{\'subject.studyLiterature\' | translate}}</label> <textarea ng-model="subject.studyLiterature" md-maxlength="4000" max-rows="2" md-select-on-focus></textarea> </md-input-container> <md-input-container flex> <label>{{\'subject.evaluationEt\' | translate}}</label> <textarea ng-model="subject.evaluationEt" md-maxlength="10000" max-rows="2" md-select-on-focus></textarea> </md-input-container> <md-input-container flex> <label>{{\'subject.evaluationEn\' | translate}}</label> <textarea ng-model="subject.evaluationEn" md-maxlength="10000" max-rows="2" md-select-on-focus></textarea> </md-input-container> <md-input-container flex> <label>{{\'subject.additionalInfo\' | translate}}</label> <textarea ng-model="subject.additionalInfo" md-maxlength="4000" max-rows="2" md-select-on-focus></textarea> </md-input-container> <hois-autocomplete ng-model="subject.mandatoryPrerequisiteSubjects" label="subject.mandatoryPrerequisiteSubjects" method="subjects" multiple></hois-autocomplete> <hois-autocomplete ng-model="subject.recommendedPrerequisiteSubjects" label="subject.recommendedPrerequisiteSubjects" method="subjects" multiple></hois-autocomplete> <hois-autocomplete ng-model="subject.substituteSubjects" label="subject.substituteSubjects" method="subjects" multiple></hois-autocomplete> <md-input-container flex> <label>{{\'subject.linkDepartment\' | translate}}</label> <hois-select ng-model="subject.schoolDepartment.id" values="departments"></hois-select> </md-input-container> <br> <md-input-container flex> <md-checkbox ng-model="subject.isPractice"> {{\'subject.isPractice\' | translate}} </md-checkbox> </md-input-container> <md-input-container class="top-margin readonly"> <label>{{\'subject.status\' | translate}}</label> <hois-classifier-value ng-model="subject.status" main-classifier-code="AINESTAATUS"></hois-classifier-value> </md-input-container> <!-- info tund --> <h3>{{\'subject.subjectIsPrerequisite\' | translate}}</h3> <div ng-repeat="row in subject.primarySubjects | orderBy: currentLanguageNameField()"> <a ng-href="#/subject/{{row.id}}/edit">{{currentLanguageNameField(row)}}</a> </div> <h3>{{\'subject.belongsCurriculum\' | translate}}</h3> <div ng-repeat="row in subject.curriculumVersions | orderBy: currentLanguageNameField()"> <span>{{currentLanguageNameField(row) }}</span> </div> <hois-created-modified object="subject"></hois-created-modified> <div layout="row"> <md-button ng-click="update()" class="md-raised md-primary">{{\'main.button.save\' | translate}}</md-button> <md-button ng-if="subject.canSetActive" ng-click="saveAndConfirm()" class="md-raised">{{\'subject.activate\' | translate}}</md-button> <md-button ng-if="subject.canSetPassive" ng-click="saveAndUnconfirm()" class="md-raised">{{\'subject.passive\' | translate}}</md-button> <md-button ng-if="subject.canDelete" ng-click="delete()" class="md-raised">{{\'main.button.delete\' | translate}}</md-button> <md-button ng-href="{{::formState.backUrl}}" class="md-raised">{{\'main.button.back\' | translate}}</md-button> </div> </form> </div>'),a.put("subject/subject.list.html",'<div flex-xs="100" flex-gt-xs="100" flex-gt-sm="100" class="ois-form-layout-padding ois-form-layout" ng-cloak> <!--<div class="ois-form-layout" layout="column" layout-margin ng-cloak>--> <fieldset> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'main.searchlabel\' | translate}}</legend> <form ng-submit="loadData()" novalidate> <div layout="column"> <div layout="row"> <md-input-container flex> <label class="textInput">{{\'subject.name\' | translate}}</label> <input ng-model="criteria.name" type="text" autofocus> </md-input-container> </div> <div layout="row"> <md-input-container flex> <label class="textInput">{{\'subject.code\' | translate}}</label> <input ng-model="criteria.code" type="text"> </md-input-container> <div flex-xs="0" flex-gt-sm="10"></div> <md-input-container flex> <label>{{\'subject.assessment\' | translate}}</label> <hois-classifier-select ng-model="criteria.assessments" model-value-attr="code" main-classifier-code="HINDAMISVIIS" multiple></hois-classifier-select> </md-input-container> </div> <div layout="row"> <md-input-container flex> <label>{{\'subject.curriculum\' | translate}}</label> <md-select ng-model="criteria.curriculaVersion" multiple> <md-option ng-repeat="it in curricula" value="{{it.id}}" style="font-size: medium"> {{currentLanguageNameField(it)}} </md-option> </md-select> </md-input-container> </div> <div layout="column"> <label class="common-label" style="padding-bottom:12px"> {{\'subject.credits\' | translate}}</label> <div layout="row" flex> <div layout="column" flex> <div layout-gt-xs="row" flex="45" flex-xs="100"> <md-input-container flex> <label>{{\'main.from\' | translate}}</label> <input type="number" ng-model="criteria.from" min="0" step="0.1"> </md-input-container> <md-input-container flex> <label>{{\'main.thru\' | translate}}</label> <input type="number" ng-model="criteria.thru" min="0" step="0.1"> </md-input-container> </div> </div> <div flex-xs="0" flex-gt-sm="10"></div> <div layout="column" flex> <md-input-container flex> <label>{{\'school.department.department\' | translate}}</label> <md-select ng-model="criteria.departments" multiple> <md-option ng-repeat="department in departments" ng-value="department.id"> {{currentLanguageNameField(department)}} </md-option> </md-select> </md-input-container> </div> </div> <div layout="row" flex> <div layout="column" flex> <md-input-container ng-show="formState.canViewAll"> <label>{{\'subject.status\' | translate}}</label> <hois-classifier-select ng-model="criteria.status" model-value-attr="code" main-classifier-code="AINESTAATUS" multiple></hois-classifier-select> </md-input-container> </div> <div flex-xs="0" flex-gt-sm="10"></div> <div layout="column" flex> <md-input-container> <label>{{\'subject.language\' | translate}}</label> <hois-classifier-select ng-model="criteria.languages" model-value-attr="code" main-classifier-code="OPPEKEEL" criteria="{higher: true}" multiple></hois-classifier-select> </md-input-container> </div> </div> </div> <div layout="row"> <md-button type="submit" class="md-raised md-primary">{{\'main.button.search\' | translate}}</md-button> <md-button class="md-raised" ng-click="clearCriteria()">{{\'main.button.clear\' | translate}}</md-button> <md-button class="md-raised" ng-href="#/subject/new" ng-if="formState.canCreate">{{\'main.button.create\' | translate}}</md-button> </div> </div> </form> </fieldset> </div> <div layout-padding> <div flex> <md-table-container> <table md-table md-progress="tabledata.$promise"> <thead md-head md-order="criteria.order" md-on-reorder="loadData"> <tr md-row> <th md-column md-order-by="{{currentLanguageNameField()}}"><span>{{\'subject.name\' | translate}}</span></th> <th md-column md-order-by="code"><span>{{\'subject.code\' | translate}}</span></th> <th md-column md-order-by="credits"><span>{{\'subject.creditsEap\' | translate}}</span></th> <th md-column md-order-by="{{currentLanguage(\'assessment\')===\'en\' ? \'assessment.nameEn\' : \'assessment.nameEt\'}}">{{\'subject.assessment\' | translate}}</th> <th md-column>{{\'subject.language\' | translate}}</th> <th md-column md-order-by="{{currentLanguage()===\'en\' ? \'status.nameEn\' : \'status.nameEt\'}}" ng-if="formState.canViewAll">{{\'subject.status\' | translate}}</th> <th md-column md-order-by="{{currentLanguage()===\'en\' ? \'schoolDepartment.nameEn\' : \'schoolDepartment.nameEt\'}}">{{\'school.department.department\' | translate}}</th> <th md-column></th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="row in tabledata.content" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell><a ng-href="#/subject/{{::row.id}}">{{currentLanguageNameField(row)}}</a></td> <td md-cell>{{::row.code}}</td> <td md-cell>{{::row.credits}}</td> <td md-cell>{{currentLanguageNameField(row.assessment)}}</td> <td md-cell>{{subjectLanguages(row.languages)}}</td> <td md-cell ng-if="formState.canViewAll">{{currentLanguageNameField(row.status)}}</td> <td md-cell>{{currentLanguageNameField(row.schoolDepartment)}}</td> <td md-cell><md-button ng-if="row.canEdit" md-no-ink class="md-primary change-button" ng-href="#/subject/{{::row.id}}/edit">{{\'main.button.change\' | translate}}</md-button></td> </tr> </tbody> </table> </md-table-container> <md-table-pagination md-limit="criteria.size" md-limit-options="[10, 20, 50]" md-page="criteria.page" md-total="{{tabledata.totalElements}}" md-on-paginate="loadData" md-label="{page: \'{{\'main.page\' | translate}}:\', rowsPerPage: \'{{\'main.rowPerPage\' | translate}}:\', of: \'{{\'main.of\' | translate}}\' }" md-page-select></md-table-pagination> </div> </div>'),a.put("subject/subject.view.html",'<div class="ois-form-layout-padding form-readonly" ng-cloak> <div> <form name="subjectForm" layout="column"> <md-input-container flex> <label>{{\'subject.code\' | translate}}</label> <hois-value value="subject.code"></hois-value> </md-input-container> <md-input-container flex> <label>{{\'subject.nameEt\' | translate}}</label> <hois-value value="subject.nameEt"></hois-value> </md-input-container> <md-input-container flex> <label>{{\'subject.nameEn\' | translate}}</label> <hois-value value="subject.nameEn"></hois-value> </md-input-container> <md-input-container flex> <label>{{\'subject.credits\' | translate}}</label> <hois-value value="subject.credits"></hois-value> </md-input-container> <md-input-container flex> <label>{{\'subject.assessment\' | translate}}</label> <hois-classifier-value ng-model="subject.assessment" main-classifier-code="HINDAMISVIIS"></hois-classifier-value> </md-input-container> <md-input-container flex> <label>{{\'subject.assessmentDescription\' | translate}}</label> <hois-value value="subject.assessmentDescription"></hois-value> </md-input-container> <md-input-container flex> <label>{{\'subject.language\' | translate}}</label> <hois-classifier-value ng-model="subject.languages" main-classifier-code="OPPEKEEL"></hois-classifier-value> </md-input-container> <md-input-container flex> <label>{{\'subject.objectivesEt\' | translate}}</label> <hois-value value="subject.objectivesEt"></hois-value> </md-input-container> <md-input-container flex> <label>{{\'subject.objectivesEn\' | translate}}</label> <hois-value value="subject.objectivesEn"></hois-value> </md-input-container> <md-input-container flex> <label>{{\'subject.outcomesEt\' | translate}}</label> <hois-value value="subject.outcomesEt"></hois-value> </md-input-container> <md-input-container flex> <label>{{\'subject.outcomesEn\' | translate}}</label> <hois-value value="subject.outcomesEn"></hois-value> </md-input-container> <md-input-container flex> <label>{{\'subject.descriptionEt\' | translate}}</label> <hois-value value="subject.descriptionEt"></hois-value> </md-input-container> <md-input-container flex> <label>{{\'subject.descriptionEn\' | translate}}</label> <hois-value value="subject.descriptionEn"></hois-value> </md-input-container> <md-input-container flex> <label>{{\'subject.independentStudyEt\' | translate}}</label> <hois-value value="subject.independentStudyEt"></hois-value> </md-input-container> <md-input-container flex> <label>{{\'subject.independentStudyEn\' | translate}}</label> <hois-value value="subject.independentStudyEn"></hois-value> </md-input-container> <md-input-container flex> <label>{{\'subject.studyLiterature\' | translate}}</label> <hois-value value="subject.studyLiterature"></hois-value> </md-input-container> <md-input-container flex> <label>{{\'subject.evaluationEt\' | translate}}</label> <hois-value value="subject.evaluationEt"></hois-value> </md-input-container> <md-input-container flex> <label>{{\'subject.evaluationEn\' | translate}}</label> <hois-value value="subject.evaluationEn"></hois-value> </md-input-container> <md-input-container flex> <label>{{\'subject.additionalInfo\' | translate}}</label> <hois-value value="subject.additionalInfo"></hois-value> </md-input-container> <md-input-container> <label>{{\'subject.mandatoryPrerequisiteSubjects\' | translate}}</label> <hois-value ng-repeat="it in subject.mandatoryPrerequisiteSubjects" value="currentLanguageNameField(it)" href-value="\'#/subject/\'+it.id"></hois-value> </md-input-container> <md-input-container> <label>{{\'subject.recommendedPrerequisiteSubjects\' | translate}}</label> <hois-value ng-repeat="it in subject.recommendedPrerequisiteSubjects" value="currentLanguageNameField(it)" href-value="\'#/subject/\'+it.id"></hois-value> </md-input-container> <md-input-container> <label>{{\'subject.substituteSubjects\' | translate}}</label> <hois-value ng-repeat="it in subject.substituteSubjects" value="currentLanguageNameField(it)" href-value="\'#/subject/\'+it.id"></hois-value> </md-input-container> <br> <md-input-container flex> <label>{{\'subject.linkDepartment\' | translate}}</label> <hois-value value="currentLanguageNameField(subject.schoolDepartment)"></hois-value> </md-input-container> <md-input-container flex> <label>{{\'subject.isPractice\' | translate}}</label> <hois-value value="subject.isPractice ? \'main.yes\' : \'main.no\' | translate"></hois-value> </md-input-container> <md-input-container> <label>{{\'subject.status\' | translate}}</label> <hois-classifier-value ng-model="subject.status" main-classifier-code="AINESTAATUS"></hois-classifier-value> </md-input-container> <md-input-container ng-if="subject.status === \'AINESTAATUS_K\'"> <label>{{\'public.url\' | translate}}</label> <input ng-model="publicUrl" type="text" readonly> </md-input-container> <h3>{{\'subject.subjectIsPrerequisite\' | translate}}</h3> <div ng-repeat="row in subject.primarySubjects | orderBy: currentLanguageNameField()"> <a ng-href="#/subject/{{row.id}}">{{currentLanguageNameField(row)}}</a> </div> <h3>{{\'subject.belongsCurriculum\' | translate}}</h3> <div ng-repeat="row in subject.curriculumVersions | orderBy: currentLanguageNameField()"> <span>{{currentLanguageNameField(row)}}</span> </div> <hois-created-modified object="subject"></hois-created-modified> <div layout="row"> <md-button ng-if="subject.canEdit" ng-href="#/subject/{{subject.id}}/edit" class="md-raised md-primary">{{\'main.button.change\' | translate}}</md-button> <md-button ng-href="{{::formState.backUrl}}" class="md-raised">{{\'main.button.back\' | translate}}</md-button> </div> </form> </div> </div>'),a.put("subjectStudyPeriod/subject.study.period.edit.html",'<div layout="column" layout-padding> <form name="subjectStudyPeriodEditForm"> <div layout="column"> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="45" flex-sm="100" flex-xs="100"> <label>{{\'subjectStudyPeriod.studyPeriod\' | translate}}</label> <hois-select ng-model="record.studyPeriod" values="studyPeriods" disabled required></hois-select> </md-input-container> <md-input-container flex="50" flex-sm="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'subjectStudyPeriod.nameCode\' | translate}}</label> <hois-select ng-model="record.subject" values="subjects" ng-disabled="disableSubject" required></hois-select> </md-input-container> </div> <!--\r\n                hois-autocomplete is not suitable for this case as it has md-require-match attribute.\r\n                This autocomplete is supposed to be cleared after selecting an item as multiple teachers can be added\r\n            --> <md-autocomplete name="teacherInput" md-selected-item="teacher" md-search-text="queryText" md-items="item in querySearch(queryText)" md-item-text="item.nameEt" md-min-length="3" md-floating-label="{{\'subjectStudyPeriodTeacher.teacher\' | translate}} *" ng-model="queryText" md-no-cache class="small-margin" md-selected-item-change="addTeacher(teacher)"> <md-item-template> <span md-highlight-text="queryText" md-highlight-flags="^i">{{item.nameEt}}</span> </md-item-template> <md-not-found> {{\'main.messages.error.notFound\' | translate}} </md-not-found> </md-autocomplete> <table md-table class="secondary-table"> <tbody md-body> <tr md-row ng-repeat="teacher in record.teachers" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell>{{teacher.name}}</td> <td md-cell ng-hide="record.teachers.length === 1"> <md-checkbox ng-model="teacher.isSignatory" aria-label="{{\'subjectStudyPeriodTeacher.isSignatory\' | translate}}"> {{\'subjectStudyPeriodTeacher.isSignatory\' | translate}} </md-checkbox> </td> <td md-cell> <md-button class="remove nomargin" ng-click="removeTeacher(teacher)" ng-show="obligatoryTeacher !== teacher.teacherId">&times;</md-button> </td> </tr> </tbody> </table> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="45" flex-sm="100" flex-xs="100" ng-if="!hasObligatoryStudentGroup"> <label>{{\'subjectStudyPeriod.studentGroups\' | translate}}</label> <hois-select ng-model="record.studentGroups" values="studentGroups" multiple></hois-select> </md-input-container> <md-input-container flex="10" flex-sm="100" flex-xs="100" ng-if="hasObligatoryStudentGroup"> <label>{{\'subjectStudyPeriod.studentGroupPreselected\' | translate}}</label> <input type="text" ng-model="studentGroup.code" readonly> </md-input-container> <md-input-container flex="30" flex-sm="100" flex-xs="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0" ng-if="hasObligatoryStudentGroup"> <label>{{\'subjectStudyPeriod.otherStudentGroups\' | translate}}</label> <hois-select ng-model="record.studentGroups" values="studentGroups" multiple></hois-select> </md-input-container> <md-input-container flex="50" flex-sm="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'subjectStudyPeriod.proportion\' | translate}}</label> <hois-classifier-select ng-model="record.groupProportion" model-value-attr="code" main-classifier-code="PAEVIK_GRUPI_JAOTUS" required></hois-classifier-select> </md-input-container> </div> <md-input-container> <label>{{\'subjectStudyPeriod.addInfo\' | translate}}</label> <textarea ng-model="record.addInfo" md-maxlength="20000" max-rows="2"></textarea> </md-input-container> <md-input-container> <label>{{\'subjectStudyPeriod.declaration\' | translate}}</label> <hois-classifier-select ng-model="record.declarationType" model-value-attr="code" main-classifier-code="DEKLARATSIOON"></hois-classifier-select> </md-input-container> </div> <div layout="row"> <md-button class="md-raised md-primary" ng-click="save()">{{\'main.button.save\' | translate}}</md-button> <md-button class="md-raised" ng-click="back(\'#/subjectStudyPeriods\', subjectStudyPeriodEditForm)">{{\'main.button.back\' | translate}}</md-button> <md-button class="md-raised md-default" ng-click="delete()" ng-if="record.id">{{\'main.button.delete\' | translate}}</md-button> </div> </form> </div>'),a.put("subjectStudyPeriod/subject.study.period.search.html",'<div class="ois-form-layout-padding ois-form-layout" ng-cloak> <fieldset> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'main.searchlabel\' | translate}}</legend> <form ng-submit="loadData()" layout="column" novalidate> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="45" flex-sm="100" flex-xs="100"> <label class="textInput">{{\'subjectStudyPeriod.nameCode\' | translate}}</label> <input ng-model="criteria.subjectNameAndCode" type="text"> </md-input-container> <md-input-container flex="50" flex-sm="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0" ng-if="auth.isAdmin()"> <label class="textInput">{{\'subjectStudyPeriod.teachersFullname\' | translate}}</label> <input ng-model="criteria.teachersFullname" type="text"> </md-input-container> <div flex="50" flex-sm="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0" ng-if="auth.isTeacher()"> <hois-autocomplete ng-model="criteria.studentObject" method="students" name="student" label="student.label"></hois-autocomplete> </div> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="45" flex-sm="100" flex-xs="100"> <label>{{\'subjectStudyPeriod.studyPeriod\' | translate}}</label> <hois-select ng-model="criteria.studyPeriods" values="studyPeriods" required></hois-select> </md-input-container> <div flex="50" flex-sm="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0" ng-if="auth.isAdmin()"> <hois-autocomplete ng-model="criteria.studentObject" method="students" name="student" label="student.label"></hois-autocomplete> </div> </div> <div layout="row"> <md-button type="submit" class="md-raised md-primary">{{\'main.button.search\' | translate}}</md-button> <md-button class="md-raised" ng-click="clearCriteria()">{{\'main.button.clear\' | translate}}</md-button> </div> </form> </fieldset> </div> <div layout-padding> <div flex> <md-table-container> <table md-table md-progress="tabledata.$promise"> <thead md-head md-order="criteria.order" md-on-reorder="loadData"> <tr md-row> <th md-column md-order-by="s.{{currentLanguageNameField()}},s.code">{{\'subjectStudyPeriod.nameCode\' | translate}}</th> <th md-column>{{\'subjectStudyPeriod.teachersFullname\' | translate}}</th> <th md-column md-order-by="sp.{{currentLanguageNameField()}}">{{\'subjectStudyPeriod.studyPeriod\' | translate}}</th> <th md-column md-order-by="declared_students">{{\'subjectStudyPeriod.declaredStudentsNumber\' | translate}}</th> <th md-column></th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="row in tabledata.content" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell><a href="#/subjectStudyPeriod/{{::row.id}}/view">{{currentLanguageNameField(row.subject)}}</a></td> <td md-cell> <table> <tr ng-repeat="teacher in row.teachers | orderBy"> <td><a href="#/subjectStudyPeriod/{{::row.id}}/view">{{teacher}}</a></td> </tr> </table> </td> <td md-cell>{{currentLanguageNameField(row.studyPeriod)}}</td> <td md-cell><a href="#/subjectStudyPeriods/{{::row.id}}/midtermTasks/studentResults">{{::row.studentsNumber}}</a></td> <td md-cell> <md-button md-no-ink class="md-primary change-button" ng-if="isAuthorized([\'ROLE_OIGUS_M_TEEMAOIGUS_AINEOPPETAJA\', \'ROLE_OIGUS_M_TEEMAOIGUS_PAEVIK\'])" ng-href="#/subjectStudyPeriod/{{::row.id}}/edit">{{\'main.button.change\' | translate}}</md-button> </td> </tr> </tbody> </table> </md-table-container> <md-table-pagination md-limit="criteria.size" md-limit-options="[10, 20, 50]" md-page="criteria.page" md-total="{{tabledata.totalElements}}" md-on-paginate="loadData" md-label="{page: \'{{\'main.page\' | translate}}:\', rowsPerPage: \'{{\'main.rowPerPage\' | translate}}:\', of: \'{{\'main.of\' | translate}}\'}" md-page-select></md-table-pagination> </div> </div>'),
a.put("subjectStudyPeriod/subject.study.period.view.html",'<div layout="column" layout-padding> <form name="subjectStudyPeriodEditForm"> <div layout="column" class="form-readonly"> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="45" flex-sm="100" flex-xs="100"> <label>{{\'subjectStudyPeriod.studyPeriod\' | translate}}</label> <hois-select ng-model="record.studyPeriod" values="studyPeriods" disabled required></hois-select> </md-input-container> <md-input-container flex="50" flex-sm="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'subjectStudyPeriod.nameCode\' | translate}}</label> <hois-select ng-model="record.subject" values="subjects" disabled required></hois-select> </md-input-container> </div> <h2 ng-show="record.teachers.length > 0">{{\'subjectStudyPeriod.teachers\' | translate}}</h2> <table md-table class="secondary-table"> <tbody md-body> <tr md-row ng-repeat="teacher in record.teachers" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell>{{teacher.name}}</td> <td md-cell ng-hide="record.teachers.length === 1"> <md-checkbox ng-model="teacher.isSignatory" disabled aria-label="{{\'subjectStudyPeriodTeacher.isSignatory\' | translate}}"> {{\'subjectStudyPeriodTeacher.isSignatory\' | translate}} </md-checkbox> </td> </tr> </tbody> </table> <br> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="45" flex-sm="100" flex-xs="100"> <label>{{\'subjectStudyPeriod.studentGroups\' | translate}}</label> <hois-select ng-model="record.studentGroups" values="studentGroups" multiple disabled></hois-select> </md-input-container> <md-input-container flex="50" flex-sm="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'subjectStudyPeriod.proportion\' | translate}}</label> <hois-classifier-select ng-model="record.groupProportion" model-value-attr="code" main-classifier-code="PAEVIK_GRUPI_JAOTUS" required disabled></hois-classifier-select> <!--<hois-classifier-value ng-model="record.groupProportion" main-classifier-code="PAEVIK_GRUPI_JAOTUS"></hois-classifier-value>--> </md-input-container> </div> <md-input-container> <label>{{\'subjectStudyPeriod.addInfo\' | translate}}</label> <hois-value value="record.addInfo"></hois-value> </md-input-container> <md-input-container> <label>{{\'subjectStudyPeriod.declaration\' | translate}}</label> <hois-classifier-value ng-model="record.declarationType" main-classifier-code="DEKLARATSIOON"></hois-classifier-value> </md-input-container> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="45" flex-sm="100" flex-xs="100"> <label>{{\'moodle.courseId\' | translate}}</label> <hois-value value="record.moodleCourseId"></hois-value> </md-input-container> </div> </div> <div layout="row"> <md-button class="md-primary md-raised" ng-if="isAuthorized([\'ROLE_OIGUS_M_TEEMAOIGUS_AINEOPPETAJA\', \'ROLE_OIGUS_M_TEEMAOIGUS_PAEVIK\'])" ng-href="#/subjectStudyPeriod/{{::record.id}}/edit">{{\'main.button.change\' | translate}}</md-button> <md-button class="md-raised" ng-click="back(\'#/subjectStudyPeriods\')">{{\'main.button.back\' | translate}}</md-button> </div> </form> </div>'),a.put("subjectStudyPeriodPlan/subject.study.period.plan.edit.html",'<div layout="column" layout-padding> <form name="subjectStudyPeriodPlanEditForm"> <div layout="column"> <div layout="row" layout-sm="column" layout-xs="column" class="form-readonly"> <md-input-container flex="45" flex-sm="100" flex-xs="100"> <label>{{\'subjectStudyPeriodPlan.studyPeriod\' | translate}}</label> <hois-value value="currentLanguageNameField(studyPeriod)"></hois-value> </md-input-container> <md-input-container flex="45" flex-sm="100" flex-xs="100"> <label>{{\'subjectStudyPeriodPlan.subject\' | translate}}</label> <hois-value value="currentLanguageNameField(subject)"></hois-value> </md-input-container> </div> <h2>{{\'subjectStudyPeriodPlan.volumes\' | translate}}</h2> <table md-table class="secondary-table"> <thead md-head> <tr md-row> <th md-column></th> <th md-column>{{\'subjectStudyPeriodPlan.volume\' | translate}}</th> <th md-column>{{\'subjectStudyPeriodPlan.isContact\' | translate}}</th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="capacity in record.capacities | orderBy: \'capacityType\'" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell> <hois-classifier-value ng-model="capacity.capacityType" main-classifier-code="MAHT"></hois-classifier-value> </td> <td md-cell> <md-input-container> <input ng-model="capacity.hours" type="number" min="0" max="1000" pattern="^\\d+$" ng-readonly="readOnly" aria-label="{{\'subjectStudyPeriodPlan.volume\' | translate}}"> </md-input-container> </td> <td md-cell> <md-checkbox ng-model="capacity.isContact" aria-label="{{\'subjectStudyPeriodPlan.isContact\' | translate}}" ng-disabled="readOnly"></md-checkbox> </td> </tr> </tbody> </table> <h2>{{\'subjectStudyPeriodPlan.volumeTotal\' | translate}}: {{getTotalCapacity()}}</h2> <br> <h2>{{\'subjectStudyPeriodPlan.validInCurriculums\' | translate}}</h2> <div layout="row"> <md-checkbox ng-repeat="curriculum in curriculums" ng-model="curriculum.selected" aria-label="{{\'subjectStudyPeriodPlan.validInCurriculums\' | translate}}" ng-disabled="readOnly"> {{currentLanguageNameField(curriculum)}} </md-checkbox> </div> <h2>{{\'subjectStudyPeriodPlan.validInStudyForms\' | translate}}</h2> <div layout="row"> <md-checkbox ng-repeat="studyForm in studyForms" ng-model="studyForm.selected" aria-label="{{\'subjectStudyPeriodPlan.validInCurriculums\' | translate}}" ng-disabled="readOnly"> {{currentLanguageNameField(studyForm)}} </md-checkbox> </div> </div> <div layout="row"> <md-button ng-if="!readOnly" class="md-raised md-primary" ng-click="save()">{{\'main.button.save\' | translate}}</md-button> <md-button ng-if="!readOnly && record.id" class="md-raised md-default" ng-click="delete()">{{\'main.button.delete\' | translate}}</md-button> <md-button class="md-raised" ng-href="/#/subjectStudyPeriodPlans">{{\'main.button.back\' | translate}}</md-button> </div> </form> </div>'),a.put("subjectStudyPeriodPlan/subject.study.period.plan.search.html",'<div class="ois-form-layout-padding ois-form-layout" ng-cloak> <p class="md-body-1"> <span ng-repeat="capacity in capacityTypes"> <span ng-if="$index !== 0">|</span> {{capacity.value.toUpperCase()}} - {{currentLanguageNameField(capacity)}} </span> </p> <br> <fieldset> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'main.searchlabel\' | translate}}</legend> <form ng-submit="loadData()" layout="column" novalidate> <md-input-container> <label class="textInput">{{\'subjectStudyPeriodPlan.studyPeriod\' | translate}}</label> <hois-select ng-model="criteria.studyPeriod" values="studyPeriods" required></hois-select> </md-input-container> <md-input-container> <label class="textInput">{{\'subjectStudyPeriodPlan.curriculum\' | translate}}</label> <hois-select ng-model="criteria.curriculum" values="curriculums"></hois-select> </md-input-container> <hois-autocomplete ng-model="criteria.subjectObject" url="/subjectStudyPeriodPlans/subjects" name="subject" label="subjectStudyPeriodPlan.subject" additional-query-params="subjectQueryParams"></hois-autocomplete> <div layout="row"> <md-button type="submit" class="md-raised md-primary" ng-click="checkIfStudyPeriodIsPast()">{{\'main.button.search\' | translate}}</md-button> <md-button class="md-raised" ng-click="clearCriteria()">{{\'main.button.clear\' | translate}}</md-button> </div> </form> </fieldset> </div> <div layout-padding> <div flex> <md-table-container> <table md-table md-progress="tabledata.$promise"> <thead md-head md-order="criteria.order" md-on-reorder="loadData"> <tr md-row> <th md-column md-order-by="{{currentLanguageNameField()}}">{{\'subjectStudyPeriodPlan.curriculum\' | translate}}</th> <th md-column>{{\'subjectStudyPeriodPlan.studyForm\' | translate}}</th> <th md-column class="center" ng-repeat="capacityType in capacityTypes"> {{capacityType.value.toUpperCase()}} </th> <th md-column></th> </tr> </thead> <tbody md-body ng-repeat="row in tabledata.content"> <tr md-row ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell>{{currentLanguageNameField(row.subject)}}</td> <td md-cell colspan="{{capacityTypes.length + 1}}"></td> <td md-cell> <md-button md-no-ink class="md-primary change-button" ng-if="canEdit" ng-href="#/subjectStudyPeriodPlans/{{::row.subject.id}}/{{criteria.studyPeriod}}/new" ng-disabled="pastStudyPeriodSelected">{{\'subjectStudyPeriodPlan.add\' | translate}} </md-button> </td> </tr> <tr md-row ng-repeat="plan in row.plans | orderBy: \'id\'"> <td md-cell class="cell"> <span ng-repeat="curriculum in plan.curriculums | orderBy: \'id\'"> <span ng-if="$index > 0">, </span> {{currentLanguageNameField(curriculum)}} </span> </td> <td md-cell class="cell"> <span ng-repeat="studyForm in plan.studyForms | orderBy: currentLanguageNameField()"> <span ng-if="$index > 0">, </span> {{currentLanguageNameField(studyForm)}} </span> </td> <td md-cell class="cell center" ng-repeat="capacityType in capacityTypes"> {{getCapacitiesHours(capacityType.code, plan)}} </td> <td md-cell class="cell"> <md-button md-no-ink class="md-primary change-button" ng-if="canEdit" ng-href="#/subjectStudyPeriodPlans/{{::plan.id}}/edit" ng-disabled="pastStudyPeriodSelected">{{\'main.button.change\' | translate}} </md-button> </td> </tr> </tbody> </table> </md-table-container> <md-table-pagination md-limit="criteria.size" md-limit-options="[10, 20, 50]" md-page="criteria.page" md-total="{{tabledata.totalElements}}" md-on-paginate="loadData" md-label="{page: \'{{\'main.page\' | translate}}:\', rowsPerPage: \'{{\'main.rowPerPage\' | translate}}:\', of: \'{{\'main.of\' | translate}}\'}" md-page-select></md-table-pagination> </div> </div> <style>.cell {\r\n        border: 1px solid #e8ebef;\r\n    }\r\n    .center {\r\n        text-align: center !important;\r\n    }</style>'),a.put("teacher/teacher.continuing.education.edit.html",'<md-nav-bar md-selected-nav-item="currentNavItem" nav-bar-aria-label="main selection" ng-cloak> <md-nav-item md-nav-href="#/teachers/{{::teacher.id}}/edit" name="teacher.data"> {{\'teacher.data\' | translate}}</md-nav-item> <md-nav-item ng-if="teacher.id && teacher.isVocational" md-nav-href="#/teachers/{{::teacher.id}}/continuingEducation" name="teacher.continuingEducation"> {{\'teacher.continuingEducation.label\' | translate}}</md-nav-item> <md-nav-item ng-if="teacher.id" md-nav-href="#/teachers/{{::teacher.id}}/qualification" name="teacher.qualification"> {{\'teacher.qualification.qualification\' | translate}}</md-nav-item> <md-nav-item ng-if="teacher.id && teacher.isHigher && isHigher" md-nav-href="#/teachers/{{::teacher.id}}/mobility" name="teacher.mobility"> {{\'teacher.mobility.mobility\' | translate}}</md-nav-item> <md-nav-item ng-if="teacher.id" md-nav-href="#/teachers/{{::teacher.id}}/rtipAbsence" name="teacher.rtipAbsence"> {{\'teacher.rtipAbsence.label\' | translate}}</md-nav-item> </md-nav-bar> <md-content class="md-padding"> <form name="continuingEducationsForm" class="nomargin"> <md-button ng-click="newTeacherContinuingEducation()" class="md-raised">{{\'teacher.continuingEducation.add\' | translate}}</md-button> <div ng-repeat="continuingEducation in teacherContinuingEducations.continuingEducations | orderBy: \'-id\'"> <hois-collapsable label="(\'teacher.continuingEducation.continuingEducation\' | translate)"> <div layout="column" flex> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="25" flex-sm="100" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'teacher.continuingEducation.school\' | translate}}</label> <hois-classifier-select ng-model="continuingEducation.school" main-classifier-code="EHIS_TAIEND_OPPEAS" model-value-attr="code" ng-required="!continuingEducation.otherSchool" ng-disabled="continuingEducation.otherSchool"></hois-classifier-select> </md-input-container> <md-input-container flex="25" flex-sm="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'teacher.continuingEducation.otherSchool\' | translate}}</label> <textarea ng-model="continuingEducation.otherSchool" md-maxlength="1000" max-rows="2" md-select-on-focus ng-required="!continuingEducation.school" ng-disabled="continuingEducation.school"></textarea> </md-input-container> <md-input-container flex="25" flex-sm="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'teacher.continuingEducation.field\' | translate}}</label> <hois-classifier-select ng-model="continuingEducation.field" main-classifier-code="EHIS_TAIEND_VALDKOND" model-value-attr="code" required></hois-classifier-select> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="25" flex-sm="100" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'teacher.continuingEducation.name\' | translate}}</label> <input ng-model="continuingEducation.nameEt" md-maxlength="1000" type="text" required> </md-input-container> <md-input-container flex="25" flex-sm="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'teacher.continuingEducation.capacity\' | translate}}</label> <input ng-model="continuingEducation.capacity" type="number" min="0" max="99999" required> </md-input-container> <md-input-container flex="25" flex-sm="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'teacher.continuingEducation.diplomaCode\' | translate}}</label> <hois-classifier-select ng-model="continuingEducation.diploma" main-classifier-code="EHIS_TAIEND_DOK" model-value-attr="code" required></hois-classifier-select> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="25" flex-sm="100" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'teacher.continuingEducation.diplomaDate\' | translate}}</label> <md-datepicker ng-model="continuingEducation.diplomaDate" required md-open-on-focus></md-datepicker> </md-input-container> <md-input-container flex="25" flex-sm="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'teacher.continuingEducation.diplomaNr\' | translate}}</label> <textarea ng-model="continuingEducation.diplomaNr" md-maxlength="100" max-rows="2" md-select-on-focus></textarea> </md-input-container> <md-input-container flex="25" flex-sm="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <md-checkbox ng-model="continuingEducation.isAbroad">{{\'teacher.continuingEducation.isAbroad\' | translate}}</md-checkbox> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="25" flex-sm="100" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'teacher.continuingEducation.abroadDescription\' | translate}}</label> <textarea ng-model="continuingEducation.abroadDesc" md-maxlength="4000" max-rows="5" md-select-on-focus ng-disabled="!continuingEducation.isAbroad"></textarea> </md-input-container> </div> </div> <md-button ng-click="deleteContinuingEducation(continuingEducation)" class="md-raised">{{\'main.button.delete\' | translate}}</md-button> </hois-collapsable> </div> <md-button ng-click="updateContinuingEducations()" class="md-raised md-primary" ng-if="teacherContinuingEducations.continuingEducations.length > 0"> {{\'main.button.save\' | translate}}</md-button> </form> </md-content> <md-button ng-href="#/teachers" class="md-raised">{{\'main.button.back\' | translate}}</md-button>'),a.put("teacher/teacher.continuing.education.view.html",'<div class="ois-form-layout-padding form-readonly"> <div flex> <div ng-repeat="continuingEducation in teacher.teacherContinuingEducations"> <hois-collapsable label="(\'teacher.continuingEducation.continuingEducation\' | translate)"> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="25" flex-sm="100" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'teacher.continuingEducation.school\' | translate}}</label> <hois-classifier-value ng-model="continuingEducation.school" main-classifier-code="EHIS_TAIEND_OPPEAS"></hois-classifier-value> </md-input-container> <md-input-container flex="25" flex-sm="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'teacher.continuingEducation.otherSchool\' | translate}}</label> <hois-value value="continuingEducation.otherSchool"></hois-value> </md-input-container> <md-input-container flex="25" flex-sm="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'teacher.continuingEducation.field\' | translate}}</label> <hois-classifier-value ng-model="continuingEducation.field" main-classifier-code="EHIS_TAIEND_VALDKOND"></hois-classifier-value> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="25" flex-sm="100" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'teacher.continuingEducation.name\' | translate}}</label> <hois-value value="continuingEducation.nameEt"></hois-value> </md-input-container> <md-input-container flex="25" flex-sm="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'teacher.continuingEducation.capacity\' | translate}}</label> <hois-value value="continuingEducation.capacity"></hois-value> </md-input-container> <md-input-container flex="25" flex-sm="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'teacher.continuingEducation.diplomaCode\' | translate}}</label> <hois-classifier-value ng-model="continuingEducation.diploma" main-classifier-code="EHIS_TAIEND_DOK"></hois-classifier-value> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="25" flex-sm="100" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'teacher.continuingEducation.diplomaDate\' | translate}}</label> <hois-value value="continuingEducation.diplomaDate | hoisDate"></hois-value> </md-input-container> <md-input-container flex="25" flex-sm="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'teacher.continuingEducation.diplomaNr\' | translate}}</label> <hois-value value="continuingEducation.diplomaNr"></hois-value> </md-input-container> <md-input-container flex="25" flex-sm="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <md-checkbox ng-model="continuingEducation.isAbroad" disabled>{{\'teacher.continuingEducation.isAbroad\' | translate}}</md-checkbox> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="25" flex-sm="100" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'teacher.continuingEducation.abroadDescription\' | translate}}</label> <hois-value value="continuingEducation.abroadDesc"></hois-value> </md-input-container> </div> </hois-collapsable> </div> </div> </div>'),a.put("teacher/teacher.edit.html",'<md-nav-bar md-selected-nav-item="currentNavItem" nav-bar-aria-label="main selection" ng-cloak> <md-nav-item md-nav-href="#/teachers/{{::teacher.id}}/edit" name="teacher.data"> {{\'teacher.data\' | translate}}</md-nav-item> <md-nav-item ng-if="teacher.id && teacher.isVocational" md-nav-href="#/teachers/{{::teacher.id}}/continuingEducation" name="teacher.continuingEducation">{{\'teacher.continuingEducation.label\' | translate}}</md-nav-item> <md-nav-item ng-if="teacher.id" md-nav-href="#/teachers/{{::teacher.id}}/qualification" name="teacher.qualification"> {{\'teacher.qualification.qualification\' | translate}}</md-nav-item> <md-nav-item ng-if="teacher.id && teacher.isHigher && isHigher" md-nav-href="#/teachers/{{::teacher.id}}/mobility" name="teacher.mobility"> {{\'teacher.mobility.mobility\' | translate}}</md-nav-item> <md-nav-item ng-if="teacher.id" md-nav-href="#/teachers/{{::teacher.id}}/rtipAbsence" name="teacher.rtipAbsence"> {{\'teacher.rtipAbsence.label\' | translate}}</md-nav-item> </md-nav-bar> <md-content class="md-padding"> <div class="ois-form-layout-padding" layout="column" ng-cloak> <form name="teacherForm" role="form" class="nomargin"> <hois-collapsable label="(\'teacher.data\' | translate)"> <div layout="column" flex> <div layout="row" layout-sm="column" layout-xs="column"> <!--\r\n            different elements are used for entering and displaying as in other case\r\n            teacher\'s unique check will be trigered even with disabled autocomplete\r\n            which can prevent form from saving.\r\n\r\n            hois-value is not used as id did not match whole page design\r\n          --> <md-input-container flex="25" flex-sm="100" flex-xs="100" ng-if="!teacher.id"> <label>{{\'teacher.person.idcode\' | translate}}</label> <hois-idcode-lookup ng-model="teacher.person.idcode" name="idcode" role="forteacher" after-lookup="lookupPerson(response)" after-failed-lookup="lookupFailure()" no-lookup="cleanReadOnly()" ng-required="teacher.person.citizenship === \'RIIK_EST\'"></hois-idcode-lookup> <div ng-messages="teacherForm.idcode.$error" ng-show="teacherForm.idcode.$dirty"> <div ng-message="teacherIdCode"> {{\'teacher.person.alreadyexist\' | translate}} </div> </div> </md-input-container> <md-input-container flex-sm="100" flex-xs="100" flex="25" ng-if="teacher.id"> <label>{{\'teacher.person.idcode\' | translate}}</label> <input type="text" ng-model="teacher.person.idcode" readonly> </md-input-container> <md-input-container flex="20" flex-sm="100" flex-xs="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'teacher.person.birthdate\' | translate}}</label> <md-datepicker ng-model="teacher.person.birthdate" md-max-date="maxDate" ng-disabled="teacher.person.idcode" required md-open-on-focus></md-datepicker> </md-input-container> <md-input-container flex="10" flex-sm="100" flex-xs="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'teacher.person.sex\' | translate}}</label> <hois-classifier-select ng-model="teacher.person.sex" main-classifier-code="SUGU" model-value-attr="code" ng-disabled="teacher.person.idcode" required></hois-classifier-select> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="25" flex-sm="100" flex-xs="100"> <label>{{\'teacher.person.firstname\' | translate}}</label> <input ng-model="teacher.person.firstname" type="text" ng-blur="generateEmail()" required> </md-input-container> <md-input-container flex="20" flex-sm="100" flex-xs="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'teacher.person.lastname\' | translate}}</label> <input ng-model="teacher.person.lastname" type="text" ng-blur="generateEmail()" required> </md-input-container> <md-input-container flex="45" flex-sm="100" flex-xs="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'teacher.person.nativeLanguage\' | translate}}</label> <input ng-model="teacher.person.nativeLanguage" type="text"> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="25" flex-sm="100" flex-xs="100"> <label>{{\'teacher.person.citizenship\' | translate}}</label> <hois-classifier-select ng-model="teacher.person.citizenship" main-classifier-code="RIIK" model-value-attr="code" required></hois-classifier-select> </md-input-container> <md-input-container flex="20" flex-sm="100" flex-xs="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'teacher.person.phone\' | translate}}</label> <input ng-model="teacher.person.phone" type="text"> </md-input-container> <md-input-container flex="45" flex-sm="100" flex-xs="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'teacher.person.email\' | translate}}</label> <input ng-model="teacher.person.email" type="email"> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container class="md-block" flex="25" flex-sm="100" flex-xs="100"> <label>{{\'teacher.occupation.label\' | translate}}</label> <md-select ng-model="teacher.teacherOccupation.id" required> <md-option></md-option> <md-option ng-repeat="occupation in occupations" ng-value="occupation.id"> {{currentLanguage()===\'en\' ? (occupation.occupationEn || occupation.occupationEt) : occupation.occupationEt}} </md-option> </md-select> </md-input-container> <md-input-container flex="20" flex-sm="100" flex-xs="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'teacher.phone\' | translate}}</label> <input ng-model="teacher.phone" type="text" required> </md-input-container> <md-input-container flex="45" flex-sm="100" flex-xs="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'teacher.email\' | translate}}</label> <input ng-model="teacher.email" type="email" required> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="25" flex-sm="100" flex-xs="100" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'teacher.scheduleLoad\' | translate}}</label> <input ng-model="teacher.scheduleLoad" type="number" required> </md-input-container> <!-- todo: alert or check for need for alert --> <div layout="row" flex="70" flex-sm="100" flex-xs="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0" layout-sm="column" layout-xs="column"> <md-radio-group ng-model="teacher.isStudyPeriodScheduleLoad" required class="align-center"> <md-radio-button ng-value="true"> {{\'teacher.studyPeriodLoad\' | translate}}&nbsp;&nbsp;&nbsp; </md-radio-button> <md-radio-button ng-value="false"> {{\'teacher.studyYearLoad\' | translate}} </md-radio-button> </md-radio-group> <div flex-offset="5" flex-offset-xs="0" flex-offset-sm="0" md-colors="{color: \'warn-A400\'}" ng-if="teacherForm.$submitted && teacher.isStudyPeriodScheduleLoad !== true && teacher.isStudyPeriodScheduleLoad !== false" class="md-title-very-small" style="margin-top:12px"> <div>{{\'main.messages.error.inputFieldIsRequired\' | translate}}</div> </div> </div> </div> <!----> <div layout="row" flex layout-align="none center"> <md-checkbox ng-model="teacher.isVocational" ng-required="!teacher.isVocational && !teacher.isHigher"> {{\'teacher.isVocational\' | translate}} </md-checkbox> <md-checkbox ng-model="teacher.isHigher" ng-required="!teacher.isVocational && !teacher.isHigher"> {{\'teacher.isHigher\' | translate}} </md-checkbox> </div> <div md-colors="{color: \'warn-A400\'}" ng-if="teacherForm.$submitted && !teacher.isVocational && !teacher.isHigher" class="md-title-very-small" style="margin-top:-12px"> <div>{{\'main.messages.error.inputFieldIsRequired\' | translate}}</div> </div> <div layout="row" layout-sm="column" layout-xs="column" flex> <div flex="25" flex-sm="100" flex-xs="100" layout-align="none center" layout="row"> <md-checkbox ng-model="teacher.isActive"> {{\'teacher.isActive\' | translate}} </md-checkbox> </div> <md-input-container flex="20" flex-sm="100" flex-xs="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'teacher.rtipNr\' | translate}}</label> <input ng-model="teacher.rtipNr" type="text"> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column" flex> <md-input-container flex> <label>{{\'teacher.addInfo\' | translate}}</label> <textarea ng-model="teacher.addInfo" md-maxlength="1000" max-rows="10" dfs md-select-on-focus></textarea> </md-input-container> </div> </div> </hois-collapsable> <div ng-repeat="teacherPositionEhis in teacher.teacherPositionEhis | orderBy: \'id\'"> <hois-collapsable label="(\'teacher.teacherPositionEhis.label\' | translate)"> <div layout="column" flex> <div layout="row" layout-sm="column" layout-xs="column"> <!--md-button ng-click="remove(teacherPositionEhis)" class="md-raised md-warn">{{\'main.button.delete\' | translate}}</md-button--> <md-radio-group ng-model="teacherPositionEhis.isVocational" required layout="row" layout-sm="column" layout-xs="column" flex="50" flex-sm="100" flex-xs="100" class="align-center"> <md-radio-button ng-value="true" flex="20" flex-sm="100" flex-xs="100"> {{\'teacher.isVocational\' | translate}} </md-radio-button> <md-radio-button ng-value="false" flex="45" flex-sm="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0">{{\'teacher.isHigher\' | translate}} </md-radio-button> </md-radio-group> </div> <!-- TODO: it would be better bo make filterByCriteria attribute, wich works like criteria but filters in front end --> <div layout="row" layout-sm="column" layout-xs="column" class="top-margin"> <md-input-container flex="25" flex-sm="100" flex-xs="100" ng-if="teacherPositionEhis.isVocational"> <label>{{\'teacher.teacherPositionEhis.position\' | translate}}</label> <hois-classifier-select ng-model="teacherPositionEhis.position" main-classifier-code="EHIS_AMETIKOHT" model-value-attr="code" required criteria="{vocational: true}"></hois-classifier-select> </md-input-container> <md-input-container flex="25" flex-sm="100" flex-xs="100" ng-if="!teacherPositionEhis.isVocational"> <label>{{\'teacher.teacherPositionEhis.position\' | translate}}</label> <hois-classifier-select ng-model="teacherPositionEhis.position" main-classifier-code="EHIS_AMETIKOHT" model-value-attr="code" required criteria="{higher: true}"></hois-classifier-select> </md-input-container> <md-input-container flex="20" flex-sm="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'teacher.teacherPositionEhis.positionSpecificationEt\' | translate}}</label> <input ng-model="teacherPositionEhis.positionSpecificationEt" type="text"> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="25" flex-sm="100" flex-xs="100" ng-if="teacherPositionEhis.isVocational"> <label>{{\'teacher.teacherPositionEhis.contractType\' | translate}}</label> <hois-classifier-select ng-model="teacherPositionEhis.contractType" main-classifier-code="EHIS_LEPING" model-value-attr="code" required criteria="{vocational: true}"></hois-classifier-select> </md-input-container> <md-input-container flex="25" flex-sm="100" flex-xs="100" ng-if="!teacherPositionEhis.isVocational"> <label>{{\'teacher.teacherPositionEhis.contractType\' | translate}}</label> <hois-classifier-select ng-model="teacherPositionEhis.contractType" main-classifier-code="EHIS_LEPING" model-value-attr="code" required criteria="{higher: true}"></hois-classifier-select> </md-input-container> <md-input-container flex="20" flex-sm="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'teacher.teacherPositionEhis.contractStart\' | translate}}</label> <md-datepicker ng-model="teacherPositionEhis.contractStart" md-max-date="teacherPositionEhis.contractEnd" required md-open-on-focus></md-datepicker> </md-input-container> <md-input-container flex="20" flex-sm="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'teacher.teacherPositionEhis.contractEnd\' | translate}}</label> <md-datepicker ng-model="teacherPositionEhis.contractEnd" md-min-date="teacherPositionEhis.contractStart" md-open-on-focus></md-datepicker> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="25" flex-sm="100" flex-xs="100"> <label>{{\'teacher.teacherPositionEhis.load\' | translate}}</label> <input ng-model="teacherPositionEhis.load" type="number" required max="5" min="0" step="0.1"> </md-input-container> <md-input-container flex="20" flex-sm="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <md-checkbox ng-model="teacherPositionEhis.isContractEnded"> {{\'teacher.teacherPositionEhis.isContractEnded\' | translate}} </md-checkbox> </md-input-container> <md-input-container ng-if="teacherPositionEhis.isVocational === false" flex="45" flex-sm="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <md-checkbox ng-model="teacherPositionEhis.isTeacher"> {{\'teacher.teacherPositionEhis.isTeacher\' | translate}} </md-checkbox> </md-input-container> </div> <div ng-if="teacherPositionEhis.isVocational === true" layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="25" flex-sm="100" flex-xs="100"> <label>{{\'teacher.teacherPositionEhis.language\' | translate}}</label> <hois-classifier-select ng-model="teacherPositionEhis.language" main-classifier-code="EHIS_OPETAJA_KEEL" model-value-attr="code" required></hois-classifier-select> </md-input-container> </div> <div ng-if="teacherPositionEhis.isVocational === true" layout="row" layout-sm="column" layout-xs="column" class="top-margin"> <md-input-container flex="25" flex-sm="100" flex-offset-xs="0" flex-offset-sm="0"> <md-checkbox ng-model="teacherPositionEhis.meetsQualification"> {{\'teacher.teacherPositionEhis.meetsQualification\' | translate}} </md-checkbox> </md-input-container> <md-input-container flex="20" flex-sm="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <md-checkbox ng-model="teacherPositionEhis.isChildCare"> {{\'teacher.teacherPositionEhis.workHalted\' | translate}} </md-checkbox> </md-input-container> <md-input-container flex="25" flex-offset="5" flex-sm="100" flex-offset-xs="0" flex-offset-sm="0"> <md-checkbox ng-model="teacherPositionEhis.isClassTeacher"> {{\'teacher.teacherPositionEhis.isClassTeacher\' | translate}} </md-checkbox> </md-input-container> <md-button ng-click="deleteEhisPosition(teacherPositionEhis)" class="md-raised" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0">{{\'main.button.delete\' | translate}} </md-button> </div> <div ng-if="teacherPositionEhis.isVocational === false" layout="row"> <md-input-container flex="25" flex-sm="100" flex-xs="100"> <label>{{\'teacher.teacherPositionEhis.employmentType\' | translate}}</label> <hois-classifier-select ng-model="teacherPositionEhis.employmentType" main-classifier-code="EHIS_TOOSUHE" model-value-attr="code" required></hois-classifier-select> </md-input-container> <md-input-container flex="20" flex-sm="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'teacher.teacherPositionEhis.employmentTypeSpecification\' | translate}}</label> <input ng-model="teacherPositionEhis.employmentTypeSpecification" type="text"> </md-input-container> <md-input-container flex="10" flex-sm="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'teacher.teacherPositionEhis.employmentCode\' | translate}}</label> <input ng-model="teacherPositionEhis.employmentCode" type="text"> </md-input-container> </div> <div ng-if="teacherPositionEhis.isVocational === false" layout="row"> <md-input-container class="md-block" flex="25" flex-sm="100" flex-xs="100"> <label>{{\'school.department.department\' | translate}}</label> <hois-school-department-select ng-model="teacherPositionEhis.schoolDepartment"></hois-school-department-select> </md-input-container> <md-input-container flex="20" flex-sm="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'teacher.teacherPositionEhis.positionSpecificationEn\' | translate}}</label> <input ng-model="teacherPositionEhis.positionSpecificationEn" type="text"> </md-input-container> <md-button ng-click="deleteEhisPosition(teacherPositionEhis)" class="md-raised" flex-offset="35" flex-offset-xs="0" flex-offset-sm="0">{{\'main.button.delete\' | translate}} </md-button> </div> </div> </hois-collapsable> </div> <div> <md-button ng-click="newTeacherPositionEhis()" class="md-raised">{{\'teacher.teacherPositionEhis.add\' | translate}} </md-button> </div> </form> </div> <md-button ng-click="update()" class="md-raised md-primary">{{\'main.button.save\' | translate}}</md-button> <md-button ng-href="#/teachers" class="md-raised">{{\'main.button.back\' | translate}}</md-button> <md-button ng-if="teacher.id" ng-click="sendToEhis()" class="md-raised">{{\'main.button.sendToEhis\' | translate}}</md-button> <md-button ng-if="teacher.id" ng-click="delete()" class="md-raised">{{\'main.button.delete\' | translate}}</md-button> </md-content>'),
a.put("teacher/teacher.edit.mydata.html",'<md-tabs md-dynamic-height md-border-bottom> <md-tab label="{{\'teacher.data\' | translate}}"> <md-content class="md-padding"> <form name="teacherForm" role="form" class="form-readonly"> <div style="padding-top: 1em"> <div layout="column"> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="30" flex-sm="100" flex-xs="100"> <label>{{\'teacher.person.idcode\' | translate}}</label> <hois-value value="teacher.person.idcode"></hois-value> </md-input-container> <md-input-container flex="30" flex-sm="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'teacher.person.birthdate\' | translate}}</label> <hois-value value="teacher.person.birthdate | hoisDate"></hois-value> </md-input-container> <md-input-container flex="30" flex-sm="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'teacher.person.sex\' | translate}}</label> <hois-classifier-value ng-model="teacher.person.sex" main-classifier-code="SUGU"></hois-classifier-value> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="30" flex-sm="100" flex-xs="100"> <label>{{\'teacher.person.name\' | translate}}</label> <hois-value value="teacher.person.firstname + \' \' + teacher.person.lastname"></hois-value> </md-input-container> <md-input-container flex="30" flex-sm="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'teacher.person.nativeLanguage\' | translate}}</label> <hois-value value="teacher.person.nativeLanguage"></hois-value> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column" flex> <md-input-container flex="30" flex-sm="100" flex-xs="100"> <label>{{\'teacher.person.citizenship\' | translate}}</label> <hois-classifier-value ng-model="teacher.person.citizenship" main-classifier-code="RIIK"></hois-classifier-value> </md-input-container> <div flex="30" flex-sm="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0" class="active"> <md-input-container flex="100"> <label>{{\'teacher.person.phone\' | translate}}</label> <input ng-model="teacher.person.phone" type="text"> </md-input-container> </div> <div flex="30" flex-sm="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0" class="active"> <md-input-container> <label>{{\'teacher.person.email\' | translate}}</label> <input ng-model="teacher.person.email" type="email"> </md-input-container> </div> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex> <label>{{\'teacher.occupation.label\' | translate}}</label> <hois-value value="currentLanguageNameField(teacher.teacherOccupation)"></hois-value> </md-input-container> <md-input-container flex="30" flex-sm="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'teacher.phone\' | translate}}</label> <hois-value value="teacher.phone"></hois-value> </md-input-container> <md-input-container flex="30" flex-sm="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'teacher.email\' | translate}}</label> <hois-value value="teacher.email"></hois-value> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="30" flex-sm="100" flex-xs="100"> <label>{{\'teacher.scheduleLoad\' | translate}}</label> <hois-value value="teacher.scheduleLoad"></hois-value> </md-input-container> <md-radio-group ng-model="teacher.isStudyPeriodScheduleLoad" layout="row" layout-sm="column" layout-xs="column" flex="30" flex-sm="100" flex-xs="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0" class="align-center" disabled style="margin-top: -18px"> <md-radio-button ng-value="true"> {{\'teacher.studyPeriodLoad\' | translate}} </md-radio-button> <md-radio-button ng-value="false"> {{\'teacher.studyYearLoad\' | translate}} </md-radio-button> </md-radio-group> <md-input-container flex="30" flex-sm="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'teacher.isActive\' | translate}}</label> <hois-value value="teacher.isActive ? \'main.yes\' : \'main.no\' | translate"></hois-value> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="30" flex-sm="100" flex-xs="100"> <label>{{\'teacher.isVocationalOrIsHigher\' | translate}}</label> <hois-value value="vocationalHigher"></hois-value> </md-input-container> <md-input-container flex="30" flex-offset="5" flex-sm="100" flex-xs="100"> <label>{{\'teacher.rtipNr\' | translate}}</label> <hois-value value="teacher.rtipNr"></hois-value> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column" flex> <md-input-container flex> <label>{{\'teacher.addInfo\' | translate}}</label> <hois-value value="teacher.addInfo"></hois-value> </md-input-container> </div> </div> </div> <div ng-repeat="teacherPositionEhis in teacher.teacherPositionEhis | orderBy: \'id\'"> <hois-collapsable label="(\'teacher.teacherPositionEhis.label\' | translate)"> <div layout="column"> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="30" flex-sm="100" flex-xs="100"> <label>{{\'teacher.teacherPositionEhis.teachingLevel\' | translate}}</label> <hois-value value="teacherPositionEhis.isVocational === true ? \'teacher.isVocational\' : \'teacher.isHigher\' | translate"></hois-value> </md-input-container> <md-input-container flex="30" flex-sm="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'teacher.teacherPositionEhis.position\' | translate}}</label> <hois-classifier-value ng-model="teacherPositionEhis.position" main-classifier-code="EHIS_AMETIKOHT"></hois-classifier-value> </md-input-container> <md-input-container flex="30" flex-sm="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'teacher.teacherPositionEhis.positionSpecificationEt\' | translate}}</label> <hois-value value="teacherPositionEhis.positionSpecificationEt"></hois-value> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="30" flex-sm="100" flex-xs="100"> <label>{{\'teacher.teacherPositionEhis.contractType\' | translate}}</label> <hois-classifier-value ng-model="teacherPositionEhis.contractType" main-classifier-code="EHIS_LEPING"></hois-classifier-value> </md-input-container> <md-input-container flex="30" flex-sm="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'teacher.teacherPositionEhis.contractStart\' | translate}}</label> <hois-value value="teacherPositionEhis.contractStart | hoisDate"></hois-value> </md-input-container> <md-input-container flex="30" flex-sm="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'teacher.teacherPositionEhis.contractEnd\' | translate}}</label> <hois-value value="teacherPositionEhis.contractEnd | hoisDate"></hois-value> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="30" flex-sm="100" flex-xs="100"> <label>{{\'teacher.teacherPositionEhis.isContractEnded\' | translate}}</label> <hois-value value="teacherPositionEhis.isContractEnded === true ? \'main.yes\' : \'main.no\' | translate"></hois-value> </md-input-container> <md-input-container flex="30" flex-sm="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'teacher.teacherPositionEhis.load\' | translate}}</label> <hois-value value="teacherPositionEhis.load"></hois-value> </md-input-container> <md-input-container ng-if="teacherPositionEhis.isVocational === true" flex="30" flex-sm="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'teacher.teacherPositionEhis.language\' | translate}}</label> <hois-classifier-value ng-model="teacherPositionEhis.language" main-classifier-code="EHIS_OPETAJA_KEEL"></hois-classifier-value> </md-input-container> <md-input-container ng-if="!teacherPositionEhis.isVocational" flex="30" flex-sm="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'teacher.teacherPositionEhis.isTeacher\' | translate}}</label> <hois-value value="teacherPositionEhis.isTeacher === true ? \'main.yes\' : \'main.no\' | translate"></hois-value> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container ng-if="teacherPositionEhis.isVocational === true" flex="30" flex-sm="100" flex-xs="100"> <label>{{\'teacher.teacherPositionEhis.meetsQualification\' | translate}}</label> <hois-value value="teacherPositionEhis.meetsQualification === true ? \'main.yes\' : \'main.no\' | translate"></hois-value> </md-input-container> <md-input-container ng-if="teacherPositionEhis.isVocational === true" flex="30" flex-sm="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'teacher.teacherPositionEhis.workHalted\' | translate}}</label> <hois-value value="teacherPositionEhis.isChildCare === true ? \'main.yes\' : \'main.no\' | translate"></hois-value> </md-input-container> <md-input-container ng-if="teacherPositionEhis.isVocational === true" flex="30" flex-sm="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'teacher.teacherPositionEhis.isClassTeacher\' | translate}}</label> <hois-value value="teacherPositionEhis.isClassTeacher === true ? \'main.yes\' : \'main.no\' | translate"></hois-value> </md-input-container> </div> <div ng-if="!teacherPositionEhis.isVocational" layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="30" flex-sm="100" flex-xs="100"> <label>{{\'teacher.teacherPositionEhis.employmentType\' | translate}}</label> <hois-classifier-value ng-model="teacherPositionEhis.employmentType" main-classifier-code="EHIS_TOOSUHE"></hois-classifier-value> </md-input-container> <md-input-container flex="30" flex-sm="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'teacher.teacherPositionEhis.employmentTypeSpecification\' | translate}}</label> <hois-value value="teacherPositionEhis.employmentTypeSpecification"></hois-value> </md-input-container> <md-input-container flex="30" flex-sm="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'teacher.teacherPositionEhis.employmentCode\' | translate}}</label> <hois-value value="teacherPositionEhis.employmentCode"></hois-value> </md-input-container> </div> <div ng-if="!teacherPositionEhis.isVocational" layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="30" flex-sm="100" flex-xs="100"> <label>{{\'teacher.teacherPositionEhis.schoolDepartment\' | translate}}</label> <hois-value value="currentLanguageNameField(schoolDepartmentsById[teacherPositionEhis.schoolDepartment])"></hois-value> </md-input-container> <md-input-container flex="30" flex-sm="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'teacher.teacherPositionEhis.positionSpecificationEn\' | translate}}</label> <hois-value value="teacherPositionEhis.positionSpecificationEn"></hois-value> </md-input-container> </div> </div> </hois-collapsable> </div> <md-button ng-click="update()" class="md-raised md-primary">{{\'main.button.save\' | translate}}</md-button> </form> </md-content> </md-tab> <md-tab label="{{\'teacher.continuingEducation.continuingEducation\' | translate}}" ng-if="teacher.teacherContinuingEducations.length > 0 && teacher.isVocational"> <md-content class="md-padding"> <div ng-include="\'teacher/teacher.continuing.education.view.html\'"></div> </md-content> </md-tab> <md-tab label="{{\'teacher.qualification.qualification\' | translate}}" ng-if="teacher.teacherQualifications.length > 0"> <md-content class="md-padding"> <div ng-include="\'teacher/teacher.qualification.view.html\'"></div> </md-content> </md-tab> <md-tab label="{{\'teacher.mobility.mobility\' | translate}}" ng-if="teacher.teacherMobility.length > 0"> <md-content class="md-padding"> <div ng-include="\'teacher/teacher.mobility.view.html\'"></div> </md-content> </md-tab> <md-tab md-on-select="changeIsShowingRtipTab()" md-on-deselect="changeIsShowingRtipTab()" label="{{\'teacher.rtipAbsence.label\' | translate}}"> <md-content class="md-padding"> <div ng-include="\'teacher/teacher.rtip.absence.view.html\'"></div> </md-content> </md-tab> </md-tabs> <div layout="row" layout-margin> <md-button ng-click="back(\'#/teachers/myData\', teacherForm)" class="md-raised">{{\'main.button.back\' | translate}}</md-button> </div>'),a.put("teacher/teacher.list.html",'<div class="ois-form-layout-padding"> <div flex> <fieldset> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'main.searchlabel\' | translate}}</legend> <form ng-submit="loadData()" class="nomargin" layout="column"> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="45" flex-sm="100" flex-xs="100"> <label class="textInput">{{\'teacher.person.name\' | translate}}</label> <input ng-model="criteria.name" type="text" autofocus> </md-input-container> <md-input-container flex="50" flex-sm="100" flex-xs="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label class="textInput">{{\'teacher.person.idcode\' | translate}}</label> <input ng-model="criteria.idcode" type="text"> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column" ng-if="!showSchool"> <md-input-container flex="45" flex-sm="100" flex-xs="100"> <label>{{\'teacher.occupation.label\' | translate}}</label> <hois-select ng-model="criteria.teacherOccupation" values="teacherOccupations"></hois-select> </md-input-container> <md-input-container flex="50" flex-sm="100" flex-xs="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0" ng-show="schoolHigher"> <label>{{\'teacher.occupation.department\' | translate}}</label> <hois-school-department-select ng-model="criteria.schoolDepartment"></hois-school-department-select> </md-input-container> </div> <div layout="row"> <md-input-container flex="45" flex-sm="100" flex-xs="100" ng-if="showSchool"> <label>{{\'school.label\' | translate}}</label> <hois-select ng-model="criteria.school" type="school"></hois-select> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column" class="top-margin" ng-if="!showSchool"> <md-checkbox ng-model="criteria.isActive" aria-label="{{\'teacher.isActive\' | translate}}"> {{\'teacher.isActive\' | translate}} </md-checkbox> </div> <div layout="row"> <md-button type="submit" class="md-raised md-primary">{{\'main.button.search\' | translate}}</md-button> <md-button class="md-raised" ng-click="clearCriteria()">{{\'main.button.clear\' | translate}}</md-button> <md-button ng-href="#/teachers/new" ng-if="formState.canCreate" class="md-raised">{{\'main.button.create\' | translate}}</md-button> </div> <div flex-xs="0" flex-gt-xs="0" flex-gt-sm="50"></div> </form> </fieldset> </div> </div> <div layout-padding> <div flex> <md-table-container> <table md-table md-progress="tabledata.$promise"> <thead md-head md-order="criteria.order" md-on-reorder="loadData"> <tr md-row> <th md-column md-order-by="s.{{currentLanguageNameField()}}" ng-if="showSchool">{{\'school.label\' | translate}}</th> <th md-column md-order-by="p.lastname,p.firstname">{{\'teacher.person.name\' | translate}}</th> <th md-column md-order-by="p.idcode">{{\'teacher.person.idcode\' | translate}}</th> <th md-column md-order-by="t.email">{{\'teacher.email\' | translate}}</th> <th md-column md-order-by="t.phone">{{\'teacher.phone\' | translate}}</th> <th md-column md-order-by="tot.{{currentLanguage() === \'en\' ? \'occupationEn\' : \'occupationEt\'}}" ng-if="!showSchool">{{\'teacher.occupation.label\' | translate}}</th> <th md-column ng-if="schoolHigher && !showSchool">{{\'teacher.occupation.departments\' | translate}}</th> <th md-column ng-if="!showSchool" md-order-by="t.isActive">{{\'teacher.isActive\' | translate}}</th> <th md-column></th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="row in tabledata.content" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell ng-if="showSchool">{{currentLanguageNameField(row.school)}}</td> <td md-cell> <a ng-href="#/teachers/{{::row.id}}" ng-if="auth.school">{{::row.name}}</a> <span ng-if="!auth.school">{{::row.name}}</span> </td> <td md-cell>{{::row.idcode}}</td> <td md-cell>{{::row.email}}</td> <td md-cell>{{::row.phone}}</td> <td md-cell ng-if="!showSchool">{{currentLanguageNameField(row.teacherOccupation)}}</td> <td md-cell ng-if="schoolHigher && !showSchool"> <table> <tr ng-repeat="department in row.schoolDepartments | orderBy: \'nameEt\'"> <td>{{currentLanguageNameField(department)}}</td> </tr> </table> </td> <td md-cell ng-if="!showSchool">{{::row.isActive ? \'main.yes\' : \'main.no\' | translate}}</td> <td md-cell> <md-button md-no-ink class="md-primary change-button" ng-href="#/teachers/{{::row.id}}/edit" ng-if="row.canEdit"> {{\'main.button.change\' | translate}} </md-button> </td> </tr> </tbody> </table> </md-table-container> <md-table-pagination md-limit="criteria.size" md-limit-options="[10, 20, 50]" md-page="criteria.page" md-total="{{tabledata.totalElements}}" md-on-paginate="loadData" md-label="{page: \'{{\'main.page\' | translate}}:\', rowsPerPage: \'{{\'main.rowPerPage\' | translate}}:\', of: \'{{\'main.of\' | translate}}\'}" md-page-select></md-table-pagination> </div> </div>'),a.put("teacher/teacher.mobility.edit.html",'<md-nav-bar md-selected-nav-item="currentNavItem" nav-bar-aria-label="main selection" ng-cloak> <md-nav-item md-nav-href="#/teachers/{{::teacher.id}}/edit" name="teacher.data"> {{\'teacher.data\' | translate}}</md-nav-item> <md-nav-item ng-if="teacher.id && teacher.isVocational" md-nav-href="#/teachers/{{::teacher.id}}/continuingEducation" name="teacher.continuingEducation"> {{\'teacher.continuingEducation.label\' | translate}}</md-nav-item> <md-nav-item ng-if="teacher.id" md-nav-href="#/teachers/{{::teacher.id}}/qualification" name="teacher.qualification"> {{\'teacher.qualification.qualification\' | translate}}</md-nav-item> <md-nav-item ng-if="teacher.id && teacher.isHigher && isHigher" md-nav-href="#/teachers/{{::teacher.id}}/mobility" name="teacher.mobility"> {{\'teacher.mobility.mobility\' | translate}}</md-nav-item> <md-nav-item ng-if="teacher.id" md-nav-href="#/teachers/{{::teacher.id}}/rtipAbsence" name="teacher.rtipAbsence"> {{\'teacher.rtipAbsence.label\' | translate}}</md-nav-item> </md-nav-bar> <md-content class="md-padding"> <form name="mobilityForm" class="nomargin"> <md-button ng-click="newTeacherMobility()" class="md-raised">{{\'teacher.mobility.add\' | translate}}</md-button> <div ng-repeat="mobility in teacherMobility.mobilities  | orderBy: \'-id\'"> <hois-collapsable label="(\'teacher.mobility.mobility\' | translate)"> <div layout="column"> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="25" flex-sm="100" flex-offset-sm="0"> <label>{{\'teacher.mobility.start\' | translate}}</label> <md-datepicker ng-model="mobility.start" md-max-date="mobility.end" required md-open-on-focus></md-datepicker> </md-input-container> <md-input-container flex="20" flex-sm="100" flex-offset="5" flex-offset-sm="0"> <label>{{\'teacher.mobility.end\' | translate}}</label> <md-datepicker ng-model="mobility.end" md-min-date="mobility.start" required md-open-on-focus></md-datepicker> </md-input-container> <md-input-container flex="45" flex-sm="100" flex-offset="5" flex-offset-sm="0"> <label>{{\'teacher.mobility.state\' | translate}}</label> <hois-classifier-select ng-model="mobility.state" main-classifier-code="RIIK" required model-value-attr="code"></hois-classifier-select> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="25" flex-sm="100" flex-offset-sm="0"> <label>{{\'teacher.mobility.target\' | translate}}</label> <hois-classifier-select ng-model="mobility.target" main-classifier-code="EHIS_MOBIILSUS" required model-value-attr="code"></hois-classifier-select> </md-input-container> <md-input-container flex="50" flex-sm="100" flex-offset="5" flex-offset-sm="0"> <label>{{\'teacher.mobility.school\' | translate}}</label> <textarea ng-model="mobility.school" md-maxlength="255" max-rows="2" md-select-on-focus required></textarea> </md-input-container> <md-button ng-click="deleteMobility(mobility)" class="md-raised" flex-sm="100" flex-offset="5" flex-offset-sm="0">{{\'main.button.delete\' | translate}} </md-button> </div> </div> </hois-collapsable> </div> <md-button ng-click="updateTeacherMobility()" class="md-raised md-primary" ng-if="teacherMobility.mobilities.length > 0">{{\'main.button.save\' | translate}} </md-button> </form> </md-content> <md-button ng-href="#/teachers" class="md-raised">{{\'main.button.back\' | translate}}</md-button>'),a.put("teacher/teacher.mobility.view.html",'<!--<div ng-include="\'teacher/teacher.menu.view.html\'"></div>--> <div class="ois-form-layout form-readonly"> <div flex> <div ng-repeat="mobility in teacher.teacherMobility"> <hois-collapsable label="(\'teacher.mobility.mobility\' | translate)"> <div layout="column"> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="25" flex-sm="100" flex-offset-sm="0"> <label>{{\'teacher.mobility.start\' | translate}}</label> <hois-value value="mobility.start | hoisDate"></hois-value> </md-input-container> <md-input-container flex="20" flex-sm="100" flex-offset="5" flex-offset-sm="0"> <label>{{\'teacher.mobility.end\' | translate}}</label> <hois-value value="mobility.end | hoisDate"></hois-value> </md-input-container> <md-input-container flex="45" flex-sm="100" flex-offset="5" flex-offset-sm="0"> <label>{{\'teacher.mobility.state\' | translate}}</label> <hois-classifier-value ng-model="mobility.state" main-classifier-code="RIIK"></hois-classifier-value> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="25" flex-sm="100" flex-offset-sm="0"> <label>{{\'teacher.mobility.target\' | translate}}</label> <hois-classifier-value ng-model="mobility.target" main-classifier-code="EHIS_MOBIILSUS"></hois-classifier-value> </md-input-container> <md-input-container flex="50" flex-sm="100" flex-offset="5" flex-offset-sm="0"> <label>{{\'teacher.mobility.school\' | translate}}</label> <hois-value value="mobility.school"></hois-value> </md-input-container> </div> </div> </hois-collapsable> </div> </div> </div>'),a.put("teacher/teacher.occupation.edit.html",'<div layout="column" layout-padding> <div> <form name="teacherOccupationForm"> <md-input-container class="md-block"> <label>{{\'teacher.occupation.occupationEt\' | translate}}</label> <input ng-model="teacherOccupation.occupationEt" name="occupationEt" type="text" required md-maxlength="100"> </md-input-container> <md-input-container class="md-block"> <label class="textInput">{{\'teacher.occupation.occupationEn\' | translate}}</label> <input ng-model="teacherOccupation.occupationEn" name="occupationEn" type="text" md-maxlength="100"> </md-input-container> <md-checkbox ng-model="teacherOccupation.isValid" name="isValid"> {{\'teacher.occupation.isValid\' | translate}} </md-checkbox> </form> <md-button ng-click="update()" class="md-raised md-primary">{{\'main.button.save\' | translate}}</md-button> <md-button ng-click="delete()" ng-if="teacherOccupation.id" class="md-raised">{{\'main.button.delete\' | translate}}</md-button> <md-button ng-href="#/school/teacheroccupations" class="md-raised">{{\'main.button.back\' | translate}}</md-button> </div> </div>'),a.put("teacher/teacher.occupation.list.html",'<div class="ois-form-layout-padding"> <div flex> <fieldset> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'main.searchlabel\' | translate}}</legend> <form ng-submit="loadData()" novalidate class="nomargin" layout="column"> <div layout="row" layout-sm="column" layout-xs="column"> <!--div class="indentForToast"></div--> <md-input-container flex="45" flex-sm="100" flex-xs="100"> <label class="textInput">{{\'teacher.occupation.occupationEt\' | translate}}</label> <input ng-model="criteria.occupationEt" name="occupationEt" type="text" autofocus> </md-input-container> <md-input-container flex="50" flex-sm="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label class="textInput">{{\'teacher.occupation.occupationEn\' | translate}}</label> <input ng-model="criteria.occupationEn" name="occupationEn" type="text"> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container> <md-checkbox ng-model="criteria.isValid" name="isValid"> {{\'teacher.occupation.isValid\' | translate}} </md-checkbox> </md-input-container> </div> <div layout="row"> <md-button type="submit" class="md-raised md-primary">{{\'main.button.search\' | translate}}</md-button> <md-button class="md-raised" ng-click="clearCriteria()">{{\'main.button.clear\' | translate}}</md-button> <md-button class="md-raised" ng-if="isAuthorized(\'ROLE_OIGUS_M_TEEMAOIGUS_OPETAJAAMET\')" ng-href="#/school/teacheroccupations/new">{{\'main.button.create\' | translate}}</md-button> </div> <div flex-xs="0" flex-gt-xs="0" flex-gt-sm="50"></div> </form> </fieldset> </div> </div> <div layout-padding> <div flex> <md-table-container> <table md-table md-progress="tabledata.$promise"> <thead md-head md-order="criteria.order" md-on-reorder="loadData"> <tr md-row> <th md-column md-order-by="occupationEt">{{\'teacher.occupation.occupationEt\' | translate}}</th> <th md-column md-order-by="occupationEn">{{\'teacher.occupation.occupationEn\' | translate}}</th> <th md-column md-order-by="isValid">{{\'teacher.occupation.status\' | translate}}</th> <th md-column></th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="row in tabledata.content" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell>{{::row.occupationEt}}</td> <td md-cell>{{::row.occupationEn}}</td> <td md-cell>{{row.isValid ? \'teacher.occupation.validTrue\' : \'teacher.occupation.validFalse\' | translate}}</td> <td md-cell> <md-button md-no-ink class="md-primary change-button" ng-if="isAuthorized(\'ROLE_OIGUS_M_TEEMAOIGUS_OPETAJAAMET\')" ng-href="#/school/teacheroccupations/{{::row.id}}/edit">{{\'main.button.change\' | translate}}</md-button> </td> </tr> </tbody> </table> </md-table-container> <md-table-pagination md-limit="criteria.size" md-limit-options="[10, 20, 50]" md-page="criteria.page" md-total="{{tabledata.totalElements}}" md-on-paginate="loadData" md-label="{page: \'{{\'main.page\' | translate}}:\', rowsPerPage: \'{{\'main.rowPerPage\' | translate}}:\', of: \'{{\'main.of\' | translate}}\'}" md-page-select></md-table-pagination> </div> </div>'),a.put("teacher/teacher.qualification.edit.html",'<md-nav-bar md-selected-nav-item="currentNavItem" nav-bar-aria-label="main selection" ng-cloak> <md-nav-item md-nav-href="#/teachers/{{::teacher.id}}/edit" name="teacher.data"> {{\'teacher.data\' | translate}}</md-nav-item> <md-nav-item ng-if="teacher.id && teacher.isVocational" md-nav-href="#/teachers/{{::teacher.id}}/continuingEducation" name="teacher.continuingEducation"> {{\'teacher.continuingEducation.label\' | translate}}</md-nav-item> <md-nav-item ng-if="teacher.id" md-nav-href="#/teachers/{{::teacher.id}}/qualification" name="teacher.qualification"> {{\'teacher.qualification.qualification\' | translate}}</md-nav-item> <md-nav-item ng-if="teacher.id && teacher.isHigher && isHigher" md-nav-href="#/teachers/{{::teacher.id}}/mobility" name="teacher.mobility"> {{\'teacher.mobility.mobility\' | translate}}</md-nav-item> <md-nav-item ng-if="teacher.id" md-nav-href="#/teachers/{{::teacher.id}}/rtipAbsence" name="teacher.rtipAbsence"> {{\'teacher.rtipAbsence.label\' | translate}}</md-nav-item> </md-nav-bar> <md-content class="md-padding"> <form name="qualificationsForm" class="nomargin"> <md-button ng-click="newTeacherQualification()" class="md-raised">{{\'teacher.qualification.add\' | translate}} </md-button> <div ng-repeat="qualification in teacherQualifications.qualifications | orderBy: \'-id\'"> <hois-collapsable label="(\'teacher.qualification.qualification\' | translate)"> <div layout="column" flex> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="50" flex-sm="100"> <label>{{\'teacher.qualification.qualification\' | translate}}</label> <hois-classifier-select ng-model="qualification.qualification" main-classifier-code="EHIS_KVALIFIKATSIOON" model-value-attr="code" required></hois-classifier-select> </md-input-container> <md-input-container flex="45" flex-sm="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'teacher.qualification.qualificationName\' | translate}}</label> <hois-classifier-select ng-model="qualification.qualificationName" main-classifier-code="EHIS_KVALIFIKATSIOON_NIMI" model-value-attr="code" required></hois-classifier-select> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column" class="top-margin"> <md-input-container flex="25" flex-sm="100"> <label>{{\'teacher.qualification.state\' | translate}}</label> <hois-classifier-select ng-model="qualification.state" main-classifier-code="RIIK" model-value-attr="code" ng-change="(qualification.state === \'RIIK_EST\') && (qualification.schoolOther = \'\')" required></hois-classifier-select> </md-input-container> <md-input-container flex="20" flex-offset="5" flex-sm="100" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'teacher.qualification.year\' | translate}}</label> <input ng-model="qualification.year" type="number" min="0" max="99999" required> </md-input-container> <md-input-container flex="45" flex-sm="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'teacher.qualification.qualificationOther\' | translate}}</label> <textarea ng-model="qualification.qualificationOther" md-maxlength="255" max-rows="2" md-select-on-focus></textarea> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="25" flex-sm="100" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'teacher.qualification.school\' | translate}}</label> <hois-classifier-select ng-model="qualification.school" main-classifier-code="EHIS_EESTI_OPPEASUTUS" model-value-attr="code" ng-required="qualification.state === \'RIIK_EST\'"></hois-classifier-select> </md-input-container> <md-input-container flex="20" flex-sm="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'teacher.qualification.exSchool\' | translate}}</label> <hois-classifier-select ng-model="qualification.exSchool" main-classifier-code="EHIS_EESTI_OPPEASUTUS_ENDINE" model-value-attr="code"></hois-classifier-select> </md-input-container> <md-input-container flex="25" flex-sm="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'teacher.qualification.schoolOther\' | translate}}</label> <textarea ng-model="qualification.schoolOther" md-maxlength="255" max-rows="2" md-select-on-focus ng-disabled="qualification.state === \'RIIK_EST\'"></textarea> </md-input-container> </div> <span ng-if="teacher.isVocational"> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="25" flex-sm="100" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'teacher.qualification.diplomaNr\' | translate}}</label> <textarea ng-model="qualification.diplomaNr" md-maxlength="100" md-select-on-focus></textarea> </md-input-container> <md-input-container flex="20" flex-sm="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'teacher.qualification.studyLevel\' | translate}}</label> <hois-classifier-select ng-model="qualification.studyLevel" main-classifier-code="EHIS_EDUCATION_LEVEL" model-value-attr="code"></hois-classifier-select> </md-input-container> <md-input-container flex="20" flex-sm="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'teacher.qualification.endDate\' | translate}}</label> <md-datepicker ng-model="qualification.endDate" md-open-on-focus></md-datepicker> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="25" flex-sm="100" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'teacher.qualification.specialty\' | translate}}</label> <textarea ng-model="qualification.specialty" md-maxlength="255" max-rows="2" md-select-on-focus></textarea> </md-input-container> <md-input-container flex="20" flex-sm="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'teacher.qualification.language\' | translate}}</label> <hois-classifier-select ng-model="qualification.language" main-classifier-code="EHIS_OPETAJA_KEEL" model-value-attr="code"></hois-classifier-select> </md-input-container> <md-input-container flex="20" flex-sm="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'teacher.qualification.addInfo\' | translate}}</label> <textarea ng-model="qualification.addInfo" md-maxlength="4000" max-rows="2" md-select-on-focus></textarea> </md-input-container> </div> </span> </div> <md-button ng-click="deleteQualification(qualification)" class="md-raised">{{\'main.button.delete\' | translate}}</md-button> </hois-collapsable> </div> <md-button ng-click="updateQualifications()" class="md-raised md-primary" ng-if="teacherQualifications.qualifications.length > 0"> {{\'main.button.save\' | translate}} </md-button> </form> </md-content> <md-button ng-href="#/teachers" class="md-raised">{{\'main.button.back\' | translate}}</md-button>'),
a.put("teacher/teacher.qualification.view.html",'<!--<div ng-include="\'teacher/teacher.menu.view.html\'"></div>--> <div class="ois-form-layout-padding form-readonly"> <div flex> <div ng-repeat="qualification in teacher.teacherQualifications | orderBy: \'id\'"> <hois-collapsable label="(\'teacher.qualification.qualification\' | translate)"> <div layout="column" flex> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="50" flex-sm="100"> <label>{{\'teacher.qualification.qualification\' | translate}}</label> <hois-classifier-value ng-model="qualification.qualification" main-classifier-code="EHIS_KVALIFIKATSIOON"></hois-classifier-value> </md-input-container> <md-input-container flex="45" flex-sm="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'teacher.qualification.qualificationName\' | translate}}</label> <hois-classifier-value ng-model="qualification.qualificationName" main-classifier-code="EHIS_KVALIFIKATSIOON_NIMI"></hois-classifier-value> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column" class="top-margin"> <md-input-container flex="25" flex-sm="100"> <label>{{\'teacher.qualification.state\' | translate}}</label> <hois-classifier-value ng-model="qualification.state" main-classifier-code="RIIK"></hois-classifier-value> </md-input-container> <md-input-container flex="20" flex-offset="5" flex-sm="100" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'teacher.qualification.year\' | translate}}</label> <!-- todo fix hois-value--> <hois-value value="qualification.year"></hois-value> </md-input-container> <md-input-container flex="45" flex-sm="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'teacher.qualification.qualificationOther\' | translate}}</label> <hois-value value="qualification.qualificationOther"></hois-value> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="25" flex-sm="100" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'teacher.qualification.school\' | translate}}</label> <hois-classifier-value ng-model="qualification.school" main-classifier-code="EHIS_EESTI_OPPEASUTUS"></hois-classifier-value> </md-input-container> <md-input-container flex="20" flex-sm="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'teacher.qualification.exSchool\' | translate}}</label> <hois-classifier-value ng-model="qualification.exSchool" main-classifier-code="EHIS_EESTI_OPPEASUTUS_ENDINE"></hois-classifier-value> </md-input-container> <md-input-container flex="25" flex-sm="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'teacher.qualification.schoolOther\' | translate}}</label> <hois-value value="qualification.schoolOther"></hois-value> </md-input-container> </div> <span ng-if="teacher.isVocational"> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="25" flex-sm="100" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'teacher.qualification.diplomaNr\' | translate}}</label> <hois-value value="qualification.diplomaNr"></hois-value> </md-input-container> <md-input-container flex="20" flex-sm="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'teacher.qualification.studyLevel\' | translate}}</label> <hois-classifier-value ng-model="qualification.studyLevel" main-classifier-code="EHIS_EDUCATION_LEVEL"></hois-classifier-value> </md-input-container> <md-input-container flex="20" flex-sm="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'teacher.qualification.endDate\' | translate}}</label> <hois-value value="qualification.endDate | hoisDate"></hois-value> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="25" flex-sm="100" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'teacher.qualification.specialty\' | translate}}</label> <hois-value value="qualification.specialty"></hois-value> </md-input-container> <md-input-container flex="20" flex-sm="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'teacher.qualification.language\' | translate}}</label> <hois-classifier-value ng-model="qualification.language" main-classifier-code="EHIS_OPETAJA_KEEL"></hois-classifier-value> </md-input-container> <md-input-container flex="20" flex-sm="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'teacher.qualification.addInfo\' | translate}}</label> <hois-value value="qualification.addInfo"></hois-value> </md-input-container> </div> </span> </div> </hois-collapsable> </div> </div> </div>'),a.put("teacher/teacher.rtip.absence.view.html",'<md-nav-bar ng-if="rtipPage" md-selected-nav-item="currentNavItem" nav-bar-aria-label="main selection" ng-cloak> <md-nav-item md-nav-href="#/teachers/{{::teacher.id}}/edit" name="teacher.data"> {{\'teacher.data\' | translate}}</md-nav-item> <md-nav-item ng-if="teacher.id && teacher.isVocational" md-nav-href="#/teachers/{{::teacher.id}}/continuingEducation" name="teacher.continuingEducation"> {{\'teacher.continuingEducation.label\' | translate}}</md-nav-item> <md-nav-item ng-if="teacher.id" md-nav-href="#/teachers/{{::teacher.id}}/qualification" name="teacher.qualification"> {{\'teacher.qualification.qualification\' | translate}}</md-nav-item> <md-nav-item ng-if="teacher.id && teacher.isHigher && isHigher" md-nav-href="#/teachers/{{::teacher.id}}/mobility" name="teacher.mobility"> {{\'teacher.mobility.mobility\' | translate}}</md-nav-item> <md-nav-item ng-if="teacher.id" md-nav-href="#/teachers/{{::teacher.id}}/rtipAbsence" name="teacher.rtipAbsence"> {{\'teacher.rtipAbsence.label\' | translate}}</md-nav-item> </md-nav-bar> <div layout-padding> <md-table-container> <table md-table md-progress="tabledata.$promise" class="secondary-table"> <thead md-head md-order="criteria.order" md-on-reorder="loadData"> <tr md-row> <th md-column md-order-by="startDate">{{\'teacher.rtipAbsence.absenceFrom\' | translate}}</th> <th md-column md-order-by="endDate">{{\'teacher.rtipAbsence.absenceThru\' | translate}}</th> <th md-column md-order-by="reason">{{\'teacher.rtipAbsence.absenceReason\' | translate}}</th> <th md-column md-order-by="changed">{{\'teacher.rtipAbsence.changed\' | translate}}</th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="row in tabledata.content" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell>{{row.startDate | hoisDate}}</td> <td md-cell>{{row.endDate | hoisDate}}</td> <td md-cell>{{row.reason}}</td> <td md-cell>{{row.changed | hoisDate}}</td> </tr> </tbody> </table> </md-table-container> <md-table-pagination md-limit="criteria.size" md-limit-options="[10, 20, 50]" md-page="criteria.page" md-total="{{tabledata.totalElements}}" md-on-paginate="loadData" md-label="{page: \'{{\'main.page\' | translate}}:\', rowsPerPage: \'{{\'main.rowPerPage\' | translate}}:\', of: \'{{\'main.of\' | translate}}\'}" md-page-select></md-table-pagination> </div> <div layout="row" layout-margin ng-if="!auth.isTeacher() && rtipPage"> <md-button ng-if="teacher.canEdit" ng-click="updateData()" class="md-raised md-primary">{{\'teacher.rtipAbsence.updateData\' | translate}}</md-button> <md-button ng-href="#/teachers" class="md-raised">{{\'main.button.back\' | translate}}</md-button> </div>'),a.put("teacher/teacher.view.html",'<md-tabs md-dynamic-height md-border-bottom> <md-tab label="{{\'teacher.data\' | translate}}"> <md-content class="md-padding form-readonly"> <div style="padding-top: 1em"> <div layout="column"> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="30" flex-sm="100" flex-xs="100"> <label>{{\'teacher.person.idcode\' | translate}}</label> <hois-value value="teacher.person.idcode"></hois-value> </md-input-container> <md-input-container flex="30" flex-sm="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'teacher.person.birthdate\' | translate}}</label> <hois-value value="teacher.person.birthdate | hoisDate"></hois-value> </md-input-container> <md-input-container flex="30" flex-sm="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'teacher.person.sex\' | translate}}</label> <hois-classifier-value ng-model="teacher.person.sex" main-classifier-code="SUGU"></hois-classifier-value> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="30" flex-sm="100" flex-xs="100"> <label>{{\'teacher.person.name\' | translate}}</label> <hois-value value="teacher.person.firstname + \' \' + teacher.person.lastname"></hois-value> </md-input-container> <md-input-container flex="30" flex-sm="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'teacher.person.nativeLanguage\' | translate}}</label> <hois-value value="teacher.person.nativeLanguage"></hois-value> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="30" flex-sm="100" flex-xs="100"> <label>{{\'teacher.person.citizenship\' | translate}}</label> <hois-classifier-value ng-model="teacher.person.citizenship" main-classifier-code="RIIK"></hois-classifier-value> </md-input-container> <md-input-container flex="30" flex-sm="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'teacher.person.phone\' | translate}}</label> <hois-value value="teacher.person.phone"></hois-value> </md-input-container> <md-input-container flex="30" flex-sm="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'teacher.person.email\' | translate}}</label> <hois-value value="teacher.person.email"></hois-value> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex> <label>{{\'teacher.occupation.label\' | translate}}</label> <hois-value value="currentLanguageNameField(teacher.teacherOccupation)"></hois-value> </md-input-container> <md-input-container flex="30" flex-sm="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'teacher.phone\' | translate}}</label> <hois-value value="teacher.phone"></hois-value> </md-input-container> <md-input-container flex="30" flex-sm="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'teacher.email\' | translate}}</label> <hois-value value="teacher.email"></hois-value> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="30" flex-sm="100" flex-xs="100"> <label>{{\'teacher.scheduleLoad\' | translate}}</label> <hois-value value="teacher.scheduleLoad"></hois-value> </md-input-container> <md-radio-group ng-model="teacher.isStudyPeriodScheduleLoad" layout="row" layout-sm="column" layout-xs="column" flex="30" flex-sm="100" flex-xs="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0" class="align-center" disabled style="margin-top: -18px"> <md-radio-button ng-value="true"> {{\'teacher.studyPeriodLoad\' | translate}} </md-radio-button> <md-radio-button ng-value="false"> {{\'teacher.studyYearLoad\' | translate}} </md-radio-button> </md-radio-group> <md-input-container flex="30" flex-sm="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'teacher.isActive\' | translate}}</label> <hois-value value="teacher.isActive ? \'main.yes\' : \'main.no\' | translate"></hois-value> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="30" flex-sm="100" flex-xs="100"> <label>{{\'teacher.isVocationalOrIsHigher\' | translate}}</label> <hois-value value="vocationalHigher"></hois-value> </md-input-container> <md-input-container flex="30" flex-offset="5" flex-sm="100" flex-xs="100"> <label>{{\'teacher.rtipNr\' | translate}}</label> <hois-value value="teacher.rtipNr"></hois-value> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column" flex> <md-input-container flex> <label>{{\'teacher.addInfo\' | translate}}</label> <hois-value value="teacher.addInfo"></hois-value> </md-input-container> </div> </div> </div> <div ng-repeat="teacherPositionEhis in teacher.teacherPositionEhis | orderBy: \'id\'"> <hois-collapsable label="(\'teacher.teacherPositionEhis.label\' | translate)"> <div layout="column"> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="30" flex-sm="100" flex-xs="100"> <label>{{\'teacher.teacherPositionEhis.teachingLevel\' | translate}}</label> <hois-value value="teacherPositionEhis.isVocational === true ? \'teacher.isVocational\' : \'teacher.isHigher\' | translate"></hois-value> </md-input-container> <md-input-container flex="30" flex-sm="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'teacher.teacherPositionEhis.position\' | translate}}</label> <hois-classifier-value ng-model="teacherPositionEhis.position" main-classifier-code="EHIS_AMETIKOHT"></hois-classifier-value> </md-input-container> <md-input-container flex="30" flex-sm="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'teacher.teacherPositionEhis.positionSpecificationEt\' | translate}}</label> <hois-value value="teacherPositionEhis.positionSpecificationEt"></hois-value> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="30" flex-sm="100" flex-xs="100"> <label>{{\'teacher.teacherPositionEhis.contractType\' | translate}}</label> <hois-classifier-value ng-model="teacherPositionEhis.contractType" main-classifier-code="EHIS_LEPING"></hois-classifier-value> </md-input-container> <md-input-container flex="30" flex-sm="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'teacher.teacherPositionEhis.contractStart\' | translate}}</label> <hois-value value="teacherPositionEhis.contractStart | hoisDate"></hois-value> </md-input-container> <md-input-container flex="30" flex-sm="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'teacher.teacherPositionEhis.contractEnd\' | translate}}</label> <hois-value value="teacherPositionEhis.contractEnd | hoisDate"></hois-value> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="30" flex-sm="100" flex-xs="100"> <label>{{\'teacher.teacherPositionEhis.isContractEnded\' | translate}}</label> <hois-value value="teacherPositionEhis.isContractEnded === true ? \'main.yes\' : \'main.no\' | translate"></hois-value> </md-input-container> <md-input-container flex="30" flex-sm="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'teacher.teacherPositionEhis.load\' | translate}}</label> <hois-value value="teacherPositionEhis.load"></hois-value> </md-input-container> <md-input-container ng-if="teacherPositionEhis.isVocational === true" flex="30" flex-sm="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'teacher.teacherPositionEhis.language\' | translate}}</label> <hois-classifier-value ng-model="teacherPositionEhis.language" main-classifier-code="EHIS_OPETAJA_KEEL"></hois-classifier-value> </md-input-container> <md-input-container ng-if="!teacherPositionEhis.isVocational" flex="30" flex-sm="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'teacher.teacherPositionEhis.isTeacher\' | translate}}</label> <hois-value value="teacherPositionEhis.isTeacher === true ? \'main.yes\' : \'main.no\' | translate"></hois-value> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container ng-if="teacherPositionEhis.isVocational === true" flex="30" flex-sm="100" flex-xs="100"> <label>{{\'teacher.teacherPositionEhis.meetsQualification\' | translate}}</label> <hois-value value="teacherPositionEhis.meetsQualification === true ? \'main.yes\' : \'main.no\' | translate"></hois-value> </md-input-container> <md-input-container ng-if="teacherPositionEhis.isVocational === true" flex="30" flex-sm="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'teacher.teacherPositionEhis.workHalted\' | translate}}</label> <hois-value value="teacherPositionEhis.isChildCare === true ? \'main.yes\' : \'main.no\' | translate"></hois-value> </md-input-container> <md-input-container ng-if="teacherPositionEhis.isVocational === true" flex="30" flex-sm="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'teacher.teacherPositionEhis.isClassTeacher\' | translate}}</label> <hois-value value="teacherPositionEhis.isClassTeacher === true ? \'main.yes\' : \'main.no\' | translate"></hois-value> </md-input-container> </div> <div ng-if="!teacherPositionEhis.isVocational" layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="30" flex-sm="100" flex-xs="100"> <label>{{\'teacher.teacherPositionEhis.employmentType\' | translate}}</label> <hois-classifier-value ng-model="teacherPositionEhis.employmentType" main-classifier-code="EHIS_TOOSUHE"></hois-classifier-value> </md-input-container> <md-input-container flex="30" flex-sm="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'teacher.teacherPositionEhis.employmentTypeSpecification\' | translate}}</label> <hois-value value="teacherPositionEhis.employmentTypeSpecification"></hois-value> </md-input-container> <md-input-container flex="30" flex-sm="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'teacher.teacherPositionEhis.employmentCode\' | translate}}</label> <hois-value value="teacherPositionEhis.employmentCode"></hois-value> </md-input-container> </div> <div ng-if="!teacherPositionEhis.isVocational" layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="30" flex-sm="100" flex-xs="100"> <label>{{\'teacher.teacherPositionEhis.schoolDepartment\' | translate}}</label> <hois-value value="currentLanguageNameField(schoolDepartmentsById[teacherPositionEhis.schoolDepartment])"></hois-value> </md-input-container> <md-input-container flex="30" flex-sm="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'teacher.teacherPositionEhis.positionSpecificationEn\' | translate}}</label> <hois-value value="teacherPositionEhis.positionSpecificationEn"></hois-value> </md-input-container> </div> </div> </hois-collapsable> </div> <md-button ng-if="teacher.canEdit && auth.isTeacher()" ng-href="#/teachers/{{teacher.id}}/editmydata" class="md-raised md-primary">{{\'main.button.change\' | translate}}</md-button> </md-content> </md-tab> <md-tab label="{{\'teacher.continuingEducation.continuingEducation\' | translate}}" ng-if="teacher.teacherContinuingEducations.length > 0 && teacher.isVocational"> <md-content class="md-padding"> <div ng-include="\'teacher/teacher.continuing.education.view.html\'"></div> </md-content> </md-tab> <md-tab label="{{\'teacher.qualification.qualification\' | translate}}" ng-if="teacher.teacherQualifications.length > 0"> <md-content class="md-padding"> <div ng-include="\'teacher/teacher.qualification.view.html\'"></div> </md-content> </md-tab> <md-tab label="{{\'teacher.mobility.mobility\' | translate}}" ng-if="teacher.teacherMobility.length > 0"> <md-content class="md-padding"> <div ng-include="\'teacher/teacher.mobility.view.html\'"></div> </md-content> </md-tab> <md-tab md-on-select="changeIsShowingRtipTab()" md-on-deselect="changeIsShowingRtipTab()" label="{{\'teacher.rtipAbsence.label\' | translate}}"> <md-content class="md-padding"> <div ng-include="\'teacher/teacher.rtip.absence.view.html\'"></div> </md-content> </md-tab> </md-tabs> <div layout="row" layout-margin ng-if="!auth.isTeacher()"> <md-button ng-if="!isShowingRtipTab && teacher.canEdit" ng-href="#/teachers/{{teacher.id}}/edit" class="md-raised md-primary">{{\'main.button.change\' | translate}}</md-button> <md-button ng-if="isShowingRtipTab && teacher.canEdit" ng-click="updateData()" class="md-raised md-primary">{{\'teacher.rtipAbsence.updateData\' | translate}}</md-button> <md-button ng-click="back(\'#/teachers\')" class="md-raised">{{\'main.button.back\' | translate}}</md-button> </div>'),a.put("timetable/timetable.createHigherPlan.html",'<div class="ois-form-layout-padding" layout="column" ng-cloak> <!--table md-table>\r\n  <thead md-head>\r\n  <tr md-row>\r\n    <th md-column>{{\'timetable.timetablePlan.createTimetable\' | translate}}</th>\r\n  </tr>\r\n  </thead>\r\n</table--> <div id="groupSelection" layout="column"> <div layout="row" class="form-readonly"> <md-input-container flex="30"> <label class="textInput">{{\'timetable.timetablePlan.timetablePeriod\' | translate}}</label> <hois-value value="(plan.startDate | hoisDate) + \'-\'+(plan.endDate | hoisDate)"> </md-input-container> <div flex layout="row" layout-align="end start" class="common-label" md-colors="{color: \'background-400\'}"> <span ng-repeat="c in capacityTypes"> <span ng-if="!$first">|</span> {{::c.value.toUpperCase()}} - {{currentLanguageNameField(c)}} </span> </div> </div> <!--label>{{\'timetable.timetablePlan.timetablePeriod\' | translate}} {{plan.startDate | hoisDate}} -\r\n    {{plan.endDate | hoisDate}}</label--> <div flex> <fieldset tabindex="1"> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'timetable.timetablePlan.showGroupsSubject\' | translate}}</legend> <div layout="column"> <md-checkbox ng-model="plan.selectAll" flex-offset="5"> {{\'timetable.timetablePlan.selectAll\' | translate}} </md-checkbox> <md-grid-list ng-app="app" md-cols="5" md-gutter="1em" md-row-height="36px" flex> <md-grid-tile ng-repeat="group in plan.studentGroups"> <md-checkbox ng-model="group._selected" ng-change="updateGroups()"> {{group.code}} </md-checkbox> </md-grid-tile> <md-grid-tile ng-repeat="pair in plan.subjectTeacherPairs"> <span> <md-checkbox ng-model="pair._selected" ng-change="updatePairs()"> {{pair.code}}</md-checkbox> </span> </md-grid-tile> </md-grid-list> </div> </fieldset> </div> <div>&nbsp;</div> <div layout="row" flex> <md-input-container flex="30"> <label>{{\'timetable.timetablePlan.planGroupLessonsSubject\' | translate}}</label> <hois-select ng-model="plan.selectedGroup" values="plan.currentStudentGroups" show-property="code" value-property="dropdownValue"></hois-select> </md-input-container> <div flex="10" flex-offset="5"> <hois-autocomplete flex ng-model="plan.eventRoom" method="rooms" label="lessonplan.event.room"></hois-autocomplete> </div> <div flex="10" flex-offset="5"> <md-input-container flex> <label>{{\'timetable.timetablePlan.lessonAmount\' | translate}}</label> <input ng-model="plan.lessonAmount" type="number" autofocus aria-label="lessonamount"> </md-input-container> </div> <md-input-container flex="20" flex-offset="5"> <label>{{\'timetable.timetablePlan.repetition\' | translate}}</label> <hois-classifier-select ng-model="plan.repeatCode" model-value-attr="code" aria-label="repeatcode" main-classifier-code="TUNNIPLAAN_SYNDMUS_KORDUS"> </hois-classifier-select> </md-input-container> </div> <div ng-if="plan.selectedGroup && plan.repeatCode && plan.lessonAmount"> <fieldset tabindex="1"> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'timetable.timetablePlan.plannedLessons\' | translate}}<span ng-if="plan.selectedGroup"> {{\'timetable.timetablePlan.group\' | translate}} {{plan.selectedStudentGroupObject.code}}</span></legend> <md-table-container> <table md-table class="secondary-table"> <thead md-head> <tr md-row> <th md-column ng-repeat="capacity in plan.currentCapacitiesGrouped track by $index" title="{{capacity[0].subjectName}}"> {{capacity[0].subjectCode}} ( <span ng-repeat="current in capacity">{{getCapacityTypeValue(current.capacityType)}}: {{current.totalPlannedLessons}}/{{current.totalAllocatedLessons ? current.totalAllocatedLessons : 0}}{{$last ? \'\' : \', \'}}</span>) </th> </tr> </thead> <tbody md-body> <tr md-row ng-class-odd="\'odd\'" ng-class-even="\'even\'" id="timetable-planned"> <td md-cell ng-repeat="capacity in plan.currentCapacitiesGrouped track by $index" id="timetable-planned-column"> <div ng-repeat="current in capacity" style="background-color: {{getColorBySubjectStudyPeriod(current.subjectStudyPeriod)}}" id="{{current.subjectStudyPeriod}}-{{current.capacityType}}" journal-id="{{current.subjectStudyPeriod}}" ois-drag="true" capacity-type="{{current.capacityType}}" class="timetable-drag timetable-planned-capacity"> <span>{{current.subjectCode}}/{{getCapacityTypeValue(current.capacityType)}}</span> </div> </td> </tr> </tbody> </table> </md-table-container> </fieldset> </div> <div layout="row"> <md-input-container flex="30" flex-sm="100" flex-xs="100"> <label>{{\'timetable.timetablePlan.week\' | translate}}</label> <md-select ng-model="plan.selectedWeek" placeholder="{{\'timetable.timetablePlan.week\' | translate}}"> <md-option ng-value="week.start" ng-repeat="week in plan.weeks">{{ week.start | hoisDate }}-{{ week.end | hoisDate }}</md-option> </md-select> </md-input-container> </div> <div flex="20" flex-sm="100" flex-xs="100" flex-offset="3"> <md-input-container layout-align="start center"> <md-checkbox ng-model="plan.showLessonTimes" flex-offset="5"> {{\'timetable.timetablePlan.showLessonTimes\' | translate}} </md-checkbox> </md-input-container> </div> <div ng-if="plan.showLessonTimes"> <md-radio-group ng-model="plan.lessonTimeBuilding" layout="row" aria-label="absence" ng-change="lessonTimeBuildingChanged(building)"> <md-radio-button ng-repeat="building in plan.buildings" value="{{building.id}}">{{currentLanguageNameField(building)}}</md-radio-button> </md-radio-group> </div> <div>&nbsp;</div> </div> <div id="timetableCreation" ng-if="plan.currentStudentGroups.length > 0"> <md-table-container> <table md-table class="higher"> <thead md-head> <tr md-row> <th md-column></th> <th md-column ng-repeat="date in plan.datesForTimetable" colspan="{{lessonsInDay}}"> {{\'timetable.timetablePlan.\' + weekday[date.getDay()] | translate}} </th> </tr> </thead> <tbody md-body> <tr md-row ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td rowspan="2"></td> <td ng-repeat="lessonTime in currentLessonTimes track by $index" colspan="2" ng-if="$even"> <span> {{lessonTime | hoisTimeMin}} </span> </td> </tr> <tr> <td ng-repeat="lessonTime in currentLessonTimes track by $index" colspan="1"> <span>&nbsp;</span> </td> </tr> <tr md-row ng-class="\'even\'" ng-if="plan.showLessonTimes"> <td>{{\'timetable.timetablePlan.lessonTimes\' | translate}}</td> <td ng-repeat="lessonTime in lessonTimeLegend" colspan="{{lessonTime.colspan}}" class="higher-timetable-lesson-time"> <div layout="center">{{lessonTime.lessonNr}}</div> </td> </tr> <tr md-row ng-repeat="group in plan.currentStudentGroups" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td>{{group.code}}</td> <td ng-repeat="date in plan.datesForTimetable" colspan="{{lessonsInDay}}"> <div ng-repeat="lessonTime in group.currentLessons[date.getDate() + date.getMonth() + date.getFullYear()]" old-event-id="{{lessonTime.id}}" ng-class="{\'timetable-higher-drop\' : (plan.selectedGroup === group.dropdownValue && plan.repeatCode && plan.lessonAmount), \'timetable-higher-drag\' : lessonTime.id ? true : false, \'timetable-higher\' : true}" drop-fn="saveEventAfterClashCheck(data)" ng-click="changeEvent(lessonTime)" ng-attr-ois-higher-drop="{{plan.selectedGroup === group.dropdownValue}}" ng-attr-ois-drag="{{(plan.selectedGroup === group.dropdownValue) && lessonTime.id !== undefined}}" id="{{lessonTime.id}}-{{group.id}}" ng-style="lessonTimeStyle(lessonTime)" title="{{lessonTime.subjectName}}/{{currentLanguageNameField(getCapacityType(lessonTime.capacityType))}}&#10;{{lessonTime.currentTeachers.join(\', \')}}" journal-id="{{lessonTime.subjectStudyPeriod}}" capacity-type="{{lessonTime.capacityType}}"> <span ng-if="lessonTime.id"> {{lessonTime.subjectCode}}/{{getCapacityTypeValue(lessonTime.capacityType)}} </span> <br> <span ng-if="lessonTime.id && lessonTime.rooms && lessonTime.rooms.length > 0">{{getRoomCodes(lessonTime.rooms)}}</span> <span ng-if="lessonTime.id && (!lessonTime.rooms || lessonTime.rooms.length === 0)" ng-style="boldAndRed(lessonTime.rooms)">?</span> <span ng-if="!lessonTime.id">&nbsp;</span> </div> </td> </tr> </tbody> </table> </md-table-container> <md-button ng-href="#/timetable/{{timetableId}}/view" class="md-raised">{{\'main.button.back\' | translate}}</md-button> </div> </div>'),a.put("timetable/timetable.createVocationalPlan.html",'<div class="ois-form-layout-padding" layout="column" ng-cloak> <div layout-padding id="groupSelection"> <div layout="row" class="form-readonly"> <md-input-container flex> <label class="textInput">{{\'timetable.timetablePlan.timetablePeriod\' | translate}}</label> <hois-value value="(plan.startDate | hoisDate) + \'-\'+(plan.endDate | hoisDate)"> </md-input-container> <div flex layout="row" layout-align="end start" class="common-label" md-colors="{color: \'background-400\'}"> <span ng-repeat="c in capacityTypes"> <span ng-if="!$first">|</span> {{::c.value.toUpperCase()}} - {{currentLanguageNameField(c)}} </span> </div> </div> <div flex> <fieldset tabindex="1"> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'timetable.timetablePlan.showGroups\' | translate}}</legend> <div layout="column"> <md-checkbox ng-model="plan.selectAll" flex-offset="5"> {{\'timetable.timetablePlan.selectAll\' | translate}} </md-checkbox> <md-grid-list ng-app="app" md-cols="5" md-gutter="1em" md-row-height="36px" flex> <md-grid-tile ng-repeat="group in plan.studentGroups"> <md-checkbox ng-model="group._selected" ng-change="updateGroups()"> {{group.code}} </md-checkbox> </md-grid-tile> </md-grid-list> </div> </fieldset> </div> <div layout="row"> <md-checkbox ng-model="plan.displayPeriodLessons" flex="10"> {{\'timetable.timetablePlan.displayPeriodLessons\' | translate}} </md-checkbox> <!--label layout-padding>{{\'timetable.timetablePlan.planGroupLessons\'\r\n      | translate}}</label--> <md-input-container flex="85" flex-sm="100" flex-xs="100" flex-offset="5"> <label>{{\'timetable.timetablePlan.planGroupLessons\' | translate}}</label> <hois-select ng-model="plan.selectedGroup" values="plan.studentGroups" show-property="code" value-property="id"></hois-select> </md-input-container> </div> <div> <fieldset tabindex="1"> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'timetable.timetablePlan.plannedLessons\' | translate}}<span ng-if="plan.selectedGroup"> {{\'timetable.timetablePlan.group\' | translate}} {{plan.selectedStudentGroupObject.code}}</span></legend> <table md-table class="secondary-table"> <thead md-head> <tr md-row> <th title="{{journal.name}}" md-column ng-repeat="journal in plan.currentJournals" ng-if="getByJournal(journal, \'thisPlannedLessons\') > 0"> {{journal.name.substring(0, 4)}} <br>{{getTotalsByJournal(journal, \'thisPlannedLessons\')}}/{{getTotalsByJournal(journal, \'thisPlannedLessons\') - getTotalsByJournal(journal, \'lessonsLeft\')}} ({{getTotalsByJournal(journal, \'totalPlannedLessons\')}}/{{getTotalsByJournal(journal, \'totalAllocatedLessons\')}}) </th> </tr> </thead> <tbody md-body> <tr md-row ng-class-odd="\'odd\'" ng-class-even="\'even\'" id="timetable-planned"> <td md-cell ng-repeat="capacity in plan.currentCapacitiesGrouped track by $index" id="timetable-planned-column"> <div ng-repeat="current in capacity" id="timetable-planned-capacity"> <div ng-if="!plan.displayPeriodLessons" ng-repeat="count in range(current.lessonsLeft)" title="{{getByCapacity(current, \'name\')}}/{{currentLanguageNameField(getCapacityType(current.capacityType))}}" style="background-color: {{getByCapacity(current, \'color\')}}" id="{{current.journal}}-{{count}}" ois-drag="true" journal-id="{{current.journal}}" capacity-type="{{current.capacityType}}" class="timetable-drag"> <span>{{getByCapacity(current, \'name\').substring(0, 4)}}/{{getCapacityTypeValue(current.capacityType)}}</span> </div> <div ng-if="plan.displayPeriodLessons" ng-repeat="count in range(current.totalLessonsLeft)" title="{{getByCapacity(current, \'name\')}}/{{currentLanguageNameField(getCapacityType(current.capacityType))}}" style="background-color: {{getByCapacity(current, \'color\')}}" id="{{current.journal}}-{{count}}" ois-drag="true" journal-id="{{current.journal}}" capacity-type="{{current.capacityType}}" class="timetable-drag"> <span>{{getByCapacity(current, \'name\').substring(0, 4)}}/{{getCapacityTypeValue(current.capacityType)}}</span> </div> </div> </td> </tr> </tbody> </table> </fieldset> </div> </div> <div id="timetableCreation"> <md-table-container> <table md-table class="timetableVocationalPlan"> <thead md-head> <tr md-row> <th md-column></th> <th md-column ng-repeat="date in plan.datesForTimetable" colspan="{{lessonsInDay[weekday[date.getDay()]].length}}">{{\'timetable.timetablePlan.\' + weekday[date.getDay()] | translate}} </th> </tr> </thead> <tbody md-body> <tr md-row ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td></td> <td style="text-align: center" ng-repeat="lessonTime in currentLessonTimes track by $index"> <span>{{lessonTime.lessonNr}}</span> </td> </tr> <tr md-row ng-repeat="group in plan.currentStudentGroups" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td>{{group.code}}</td> <td ng-repeat="lessonTime in currentLessonTimes track by $index" ng-class="{noLessonTime: lessonTime.noLessons}"> <span ng-if="!lessonTime.noLessons"> <div index-value="{{$parent.$index}}" drop-fn="saveEvent(data)" ng-attr-ois-drop="{{plan.selectedGroup === group.id}}" ng-repeat="currentEvent in t = angular.equals(t.id, getEventsForLesson($index, lessonTime, group).id) ? t : getEventsForLesson($index, lessonTime, group)" ng-click="changeEvent(currentEvent)" ng-attr-ois-drag="{{plan.selectedGroup === group.id}}" id="{{currentEvent.journalObject.id + \'-\' + $index + group.id}}" journal-id="{{currentEvent.journal}}" class="timetable-drag" style="background-color:{{currentEvent.journalObject.color}}" old-event-id="{{currentEvent.id}}" title="{{currentEvent.journalObject.name}}/{{currentLanguageNameField(getCapacityType(currentEvent.capacityType))}}&#10;{{currentEvent.currentTeachers.join(\', \')}}"> <span>{{currentEvent.journalObject.name.substr(0, 4)}}/{{getCapacityTypeValue(currentEvent.capacityType)}}</span> <br> <span style=";{{currentEvent.rooms.length !== 0 ? \'\' : \'color:red;font-weight: bold;\'}}">{{currentEvent.rooms.length !== 0 ? getRoomCodes(currentEvent.rooms) : "?"}}</span> </div> <!--\r\n                <div ng-if="!getEventsForLesson($index, lessonTime, group)" ng-attr-ois-drop="{{plan.selectedGroup === group.id}}" index-value="{{$index}}"\r\n                  drop-fn="saveEvent(data)" id="{{group.id + \'-\' + $index}}" class="timetable-drop" title="{{getTeacherLesson($index, lessonTime, group, true).join(\', \')}}">\r\n                  {{getTeacherLesson($index, lessonTime, group, false).join(", ")}}\r\n                </div>\r\n                --> <div ng-if="!getEventsForLesson($index, lessonTime, group)" ng-attr-ois-drop="{{plan.selectedGroup === group.id}}" index-value="{{$index}}" drop-fn="saveEvent(data)" id="{{group.id + \'-\' + $index}}" class="timetable-drop"> </div> </span> </td> </tr> </tbody> </table> </md-table-container> <md-button ng-href="#/timetable/{{timetableId}}/view" class="md-raised">{{\'main.button.back\' | translate}}</md-button> </div> </div>'),
a.put("timetable/timetable.edit.html",'<div class="ois-form-layout-padding ois-form-layout" ng-cloak> <div> <form name="timetableForm" novalidate class="nomargin"> <md-input-container layout="row" flex="50" flex-sm="100" flex-xs="100"> <label>{{\'timetable.management.studyYear\' | translate}}</label> <hois-select required ng-model="timetable.studyYear" values="formState.studyYears" ng-change="studyYearChanged()" ng-disabled="timetable.code === \'TUNNIPLAAN_LIIK_V\'"></hois-select> </md-input-container> <md-input-container layout="row" flex="50" flex-sm="100" flex-xs="100"> <label>{{\'timetable.management.studyPeriod\' | translate}}</label> <hois-select required ng-model="timetable.studyPeriod" values="formState.studyPeriods" ng-disabled="timetable.code === \'TUNNIPLAAN_LIIK_V\'"></hois-select> </md-input-container> <div layout="row"> <md-input-container flex="25" flex-md="100" flex-sm="100" flex-xs="100"> <label>{{\'main.from\' | translate}}</label> <md-datepicker required ng-model="timetable.startDate" md-min-date="studyPeriodStartDate" md-max-date="studyPeriodEndDate" md-date-filter="blockedFromDatesPredicate" ng-disabled="timetable.code === \'TUNNIPLAAN_LIIK_V\' || !timetable.studyPeriod"></md-datepicker> </md-input-container> <md-input-container flex="25" flex-md="100" flex-sm="100" flex-xs="100"> <label>{{\'main.thru\' | translate}}</label> <md-datepicker required ng-model="timetable.endDate" md-min-date="endDateMinDate" md-max-date="studyPeriodEndDate" md-date-filter="blockedThruDatesPredicate" ng-disabled="timetable.code === \'TUNNIPLAAN_LIIK_V\' || !timetable.studyPeriod"></md-datepicker> </md-input-container> </div> <md-input-container layout="row" flex="50" flex-sm="100" flex-xs="100"> <label>{{\'timetable.management.type\' | translate}}</label> <hois-classifier-select ng-model="timetable.code" model-value-attr="code" main-classifier-code="TUNNIPLAAN_LIIK" disabled></hois-classifier-select> </md-input-container> </form> <md-button ng-click="save()" class="md-raised md-primary">{{\'main.button.save\' | translate}}</md-button> <md-button ng-href="#/timetable/timetableManagement" class="md-raised">{{\'main.button.back\' | translate}} </md-button> </div> </div>'),a.put("timetable/timetable.event.change.dialog.html",'<md-dialog aria-label="add enterprise dialog" flex="30"> <form name="dialogForm" ng-submit="dialogForm.$valid && submit()" novalidate ng-cloak> <md-toolbar> <div class="md-toolbar-tools"> <h2 flex>{{lessonHeader}}, {{currentLanguageNameField(lessonCapacityName)}}</h2> <md-button class="md-icon-button" ng-click="cancel()"> <md-icon md-font-set="material-icons">close</md-icon> </md-button> </div> </md-toolbar> <md-dialog-content> <span flex></span> <div class="ois-form-layout" layout="column" layout-margin ng-cloak> <div layout="column"> <div flex="100" flex-offset="2" flex-offset-xs="0" flex-offset-sm="0"> <div layout="row" flex="70"> <hois-autocomplete flex ng-model="lesson.eventRoom" method="rooms" label="lessonplan.event.room" additional-query-params="{buildingIds: lesson.buildingIds}"></hois-autocomplete> </div> <div layout="column" class="common-label" flex="65" ng-repeat="room in lesson.eventRooms"> <div layout="row" flex layout-align="start center"> <div flex="5">&nbsp;</div> <div flex="50">{{room.nameEt}}</div> <div><a ng-click="removeFromArray(lesson.eventRooms, room)" class="remove">&times;</a></div> </div> </div> </div> <div layout="row" flex="100"> <md-input-container flex="30" flex-sm="100" flex-offset="2" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'main.start\' | translate}}</label> <hois-time ng-model="lesson.startTime" placeholder="{{\'main.timePlaceholder\' | translate}}"></hois-time> </md-input-container> <md-input-container flex="30" flex-sm="100" flex-offset="2" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'main.end\' | translate}}</label> <hois-time ng-model="lesson.endTime" placeholder="{{\'main.timePlaceholder\' | translate}}"></hois-time> </md-input-container> </div> <div flex="100"> <md-checkbox layout="row" ng-model="teacher.isTeaching" ng-repeat="teacher in teachers">{{teacher.nameEt}}</md-checkbox> </div> </div> </div> </md-dialog-content> <md-dialog-actions layout="row" layout-align="start start"> <md-button class="md-raised md-primary" type="submit">{{\'main.button.save\' | translate}}</md-button> <md-button class="md-raised" ng-click="cancel()">{{"main.button.close" | translate}}</md-button> <md-button class="md-raised" ng-click="deleteEvent(lesson.id)">{{"main.button.delete" | translate}}</md-button> </md-dialog-actions> </form> </md-dialog>'),a.put("timetable/timetable.lessonTime.html",'<div class="ois-form-layout-padding ois-form-layout" ng-cloak> <div flex> <form layout="column" name="lessonTimeForm" novalidate class="nomargin"> <div layout="column" flex> <div> <div layout="row" layout-sm="column" layout-xs="column" flex-sm="100" flex-xs="100"> <md-input-container> <label>{{\'timetable.lessonTime.validFrom\' | translate}}</label> <md-datepicker ng-model="validFrom" md-min-date="minValidFrom" required></md-datepicker> </md-input-container> </div> <div layout-padding ng-repeat="block in blocks | orderBy: \'id\'"> <div layout="row" layout-sm="column" layout-xs="column" flex> <md-input-container flex="10" flex-xs="100"> <label>{{\'timetable.buildings\' | translate}}</label> </md-input-container> <md-input-container layout="row" layout-align="start center"> <md-checkbox ng-model="block.selectedBuildings[building.id]" ng-disabled="isBuildingDisabled(building, block)" ng-change="buildingChanged(building, block)" ng-repeat="building in buildings | orderBy: currentLanguageNameField()">{{ currentLanguageNameField(building) }}</md-checkbox> </md-input-container> </div> <input style="display:none" type="number" readonly name="{{\'buildingsLength\'+$index}}" ng-model="selectedBuildingsLength(block)" ng-model-options="{ getterSetter: true }" min="1"> <div md-colors="{color: \'warn-A400\'}" ng-messages="lessonTimeForm[\'buildingsLength\'+$index].$error"> <div ng-if="lessonTimeForm.$submitted" ng-message="min">{{\'main.messages.error.atLeastOneShouldBeAdded\' | translate}}</div> </div> <md-table-container> <table md-table md-progress="tabledata.$promise"> <thead md-head md-order="criteria.order" md-on-reorder="loadData"> <tr md-row> <th md-column>{{\'main.nr\' | translate}}</th> <th md-column>{{\'main.start\' | translate}}</th> <th md-column>{{\'main.end\' | translate}}</th> <th md-column>{{\'timetable.academicHours\' | translate}}</th> <th md-column>{{\'main.mondayShort\' | translate}}</th> <th md-column>{{\'main.tuesdayShort\' | translate}}</th> <th md-column>{{\'main.wednesdayShort\' | translate}}</th> <th md-column>{{\'main.thursdayShort\' | translate}}</th> <th md-column>{{\'main.fridayShort\' | translate}}</th> <th md-column>{{\'main.saturdayShort\' | translate}}</th> <th md-column>{{\'main.sundayShort\' | translate}}</th> <th md-column></th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="lessonTime in block.lessonTimes | orderBy: \'lessonNr\'" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell> <md-input-container> <input style="width:4em" ng-model="lessonTime.lessonNr" ng-model-options="{ updateOn: \'mousedown blur\' }" aria-label="{{\'main.nr\' | translate}}" type="number" ng-required="isLessonTimeRowFilled(lessonTime)"> </md-input-container> </td> <td md-cell> <md-input-container> <label></label> <hois-time placeholder="{{\'main.timePlaceholder\' | translate}}" ng-model="lessonTime.startTime" ng-max="lessonTime.endTime" aria-label="{{\'main.start\' | translate}}" ng-required="isLessonTimeRowFilled(lessonTime)"></hois-time> </md-input-container> </td> <td md-cell> <md-input-container> <label></label> <hois-time placeholder="{{\'main.timePlaceholder\' | translate}}" ng-model="lessonTime.endTime" ng-min="lessonTime.startTime" aria-label="{{\'main.end\' | translate}}" ng-required="isLessonTimeRowFilled(lessonTime)"></hois-time> </md-input-container> </td> <td md-cell> <md-input-container flex="25"> <input ng-model="lessonTime.academicHours" ng-value="calculateAcademicHours(lessonTime.startTime, lessonTime.endTime)" aria-label="{{\'timetable.academicHours\' | translate}}" type="text" readonly> </md-input-container> </td> <td md-cell> <md-input-container> <md-checkbox ng-model="lessonTime.dayMon" aria-label="{{\'main.mondayShort\' | translate}}"></md-checkbox> </md-input-container> </td> <td md-cell> <md-input-container> <md-checkbox ng-model="lessonTime.dayTue" aria-label="{{\'main.tuesdayShort\' | translate}}"></md-checkbox> </md-input-container> </td> <td md-cell> <md-input-container> <md-checkbox ng-model="lessonTime.dayWed" aria-label="{{\'main.wednesdayShort\' | translate}}"></md-checkbox> </md-input-container> </td> <td md-cell> <md-input-container> <md-checkbox ng-model="lessonTime.dayThu" aria-label="{{\'main.thursdayShort\' | translate}}"></md-checkbox> </md-input-container> </td> <td md-cell> <md-input-container> <md-checkbox ng-model="lessonTime.dayFri" aria-label="{{\'main.fridayShort\' | translate}}"></md-checkbox> </md-input-container> </td> <td md-cell> <md-input-container> <md-checkbox ng-model="lessonTime.daySat" aria-label="{{\'main.saturdayShort\' | translate}}"></md-checkbox> </md-input-container> </td> <td md-cell> <md-input-container> <md-checkbox ng-model="lessonTime.daySun" aria-label="{{\'main.sundayShort\' | translate}}"></md-checkbox> </md-input-container> </td> <td md-cell> <div ng-show="isLessonTimeRowFilled(lessonTime)" class="remove nomargin" ng-click="deleteRow(block.lessonTimes, lessonTime)">&times;</div> </td> </tr> </tbody> </table> </md-table-container> <div layout="row" layout-sm="column" layout-xs="column" flex> <md-button class="md-primary" ng-click="addNewRow(block)">{{\'main.button.addNewRow\' | translate}}</md-button> <md-button class="md-primary" ng-click="deleteBlock(block)">{{\'timetable.lessonTime.deleteBlock\' | translate}}</md-button> </div> </div> <div layout="row" layout-sm="column" layout-xs="column" flex> <md-button class="md-primary" ng-click="addNewBlock()">{{\'timetable.lessonTime.addNewBlock\' | translate}}</md-button> </div> </div> <div> <md-button class="md-raised md-primary" ng-click="save()">{{\'main.button.save\' | translate}}</md-button> <md-button ng-href="#/timetable/lessonTime/search" class="md-raised">{{\'main.button.back\' | translate}}</md-button> </div> </div> </form> </div> </div>'),a.put("timetable/timetable.lessonTime.list.html",'<div class="ois-form-layout-padding ois-form-layout" ng-cloak> <div flex> <fieldset> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'main.searchlabel\' | translate}}</legend> <form name="searchForm" ng-submit="searchForm.$valid && loadData()" novalidate class="nomargin"> <div layout="row" layout-sm="column" layout-xs="column" flex> <div layout="row" layout-sm="column" layout-xs="column" flex="25" flex-sm="100" flex-xs="100"> <md-input-container> <label>{{\'main.from\' | translate}}</label> <md-datepicker ng-model="criteria.from"></md-datepicker> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column" flex="25" flex-sm="100" flex-xs="100"> <md-input-container> <label>{{\'main.thru\' | translate}}</label> <md-datepicker ng-model="criteria.thru" md-min-date="criteria.from"></md-datepicker> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column" flex="20" flex-sm="100" flex-xs="100"> <md-input-container flex> <label>{{\'timetable.weekday\' | translate}}</label> <md-select ng-model="criteria.day" multiple> <md-option ng-repeat="option in days" ng-value="option.code" aria-label="{{currentLanguageNameField(option)}}">{{currentLanguageNameField(option)}}</md-option> </md-select> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column" flex="20" flex-offset="5" flex-sm="100" flex-offset-sm="0" flex-xs="100" flex-offset-xs="0"> <md-input-container flex> <label>{{\'building.label\' | translate}}</label> <hois-select ng-model="criteria.building" type="building" multiple></hois-select> </md-input-container> </div> </div> <div layout="row" flex> <md-button type="submit" class="md-raised md-primary">{{\'main.button.search\' | translate}}</md-button> <md-button class="md-raised" ng-click="clearCriteria()">{{\'main.button.clear\' | translate}}</md-button> <a class="md-button md-raised" ng-if="canEdit" ng-href="#/timetable/lessonTime">{{\'main.button.create\' | translate}}</a> </div> <div flex-xs="0" flex-gt-xs="0" flex-gt-sm="50"></div> </form> </fieldset> </div> </div> <div layout-padding> <div flex> <md-table-container> <table md-table md-progress="tabledata.$promise"> <thead md-head md-order="criteria.order" md-on-reorder="loadData"> <tr md-row> <th md-column md-order-by="lessonNr">{{\'main.nr\' | translate}}</th> <th md-column md-order-by="startTime">{{\'main.start\' | translate}}</th> <th md-column md-order-by="endTime">{{\'main.end\' | translate}}</th> <th md-column>{{\'timetable.weekdays\' | translate}}</th> <th md-column>{{\'timetable.buildings\' | translate}}</th> <th md-column>{{\'main.validFrom\' | translate}}</th> <th md-column>{{\'main.validThru\' | translate}}</th> <th md-column></th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="row in tabledata.content" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell>{{row.lessonNr}}</td> <td md-cell>{{row.startTime}}</td> <td md-cell>{{row.endTime}}</td> <td md-cell>{{displayWeekdays(row)}}</td> <td md-cell>{{displayBuildings(row.buildings)}}</td> <td md-cell>{{row.validFrom | hoisDate}}</td> <td md-cell>{{row.validThru | hoisDate}}</td> <td md-cell> <a class="md-button md-primary" ng-href="/#/timetable/lessonTime/{{::row.id}}/{{!canEditLessonTime(row) ? \'view\' : \'edit\'}}"> {{\'main.button.\' + (!canEditLessonTime(row) ? \'view\' : \'edit\') | translate}}</a> </td> </tr> </tbody> </table> </md-table-container> <md-table-pagination md-limit="criteria.size" md-limit-options="[10, 20, 50]" md-page="criteria.page" md-total="{{tabledata.totalElements}}" md-on-paginate="loadData" md-label="{page: \'{{\'main.page\' | translate}}:\', rowsPerPage: \'{{\'main.rowPerPage\' | translate}}:\', of: \'{{\'main.of\' | translate}}\'}" md-page-select></md-table-pagination> </div> </div>'),a.put("timetable/timetable.lessonTime.view.html",'<div class="ois-form-layout-padding ois-form-layout" ng-cloak> <div flex> <form layout="column"> <div layout="column" layout-sm="column" layout-xs="column" flex> <div layout="row" layout-sm="column" layout-xs="column" flex-sm="100" flex-xs="100"> <md-input-container flex> <label>{{\'timetable.lessonTime.validFrom\' | translate}}</label> <hois-value value="validFrom | hoisDate"></hois-value> </md-input-container> </div> <div layout-padding ng-repeat="block in blocks | orderBy: $index"> <div layout="row" layout-sm="column" layout-xs="column" flex> <md-input-container flex="10" flex-xs="100"> <label>{{\'timetable.buildings\' | translate}}</label> </md-input-container> <md-input-container layout="row" layout-align="start center"> <md-checkbox ng-model="block.selectedBuildings[building.id]" ng-repeat="building in buildings | orderBy: currentLanguageNameField()" disabled>{{ currentLanguageNameField(building) }}</md-checkbox> </md-input-container> </div> <md-table-container> <table md-table md-progress="tabledata.$promise"> <thead md-head md-order="criteria.order" md-on-reorder="loadData"> <tr md-row> <th md-column>{{\'main.nr\' | translate}}</th> <th md-column>{{\'main.start\' | translate}}</th> <th md-column>{{\'main.end\' | translate}}</th> <th md-column>{{\'timetable.academicHours\' | translate}}</th> <th md-column>{{\'main.mondayShort\' | translate}}</th> <th md-column>{{\'main.tuesdayShort\' | translate}}</th> <th md-column>{{\'main.wednesdayShort\' | translate}}</th> <th md-column>{{\'main.thursdayShort\' | translate}}</th> <th md-column>{{\'main.fridayShort\' | translate}}</th> <th md-column>{{\'main.saturdayShort\' | translate}}</th> <th md-column>{{\'main.sundayShort\' | translate}}</th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="lessonTime in block.lessonTimes | orderBy: \'lessonNr\'" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell> <span>{{::lessonTime.lessonNr}}</span> </td> <td md-cell> <span>{{lessonTime.startTime | hoisTime}}</span> </td> <td md-cell> <span>{{lessonTime.endTime | hoisTime}}</span> </td> <td md-cell> <span>{{calculateAcademicHours(lessonTime.startTime, lessonTime.endTime)}}</span> </td> <td md-cell> <md-input-container> <md-checkbox ng-model="lessonTime.dayMon" aria-label="{{\'main.mondayShort\' | translate}}" disabled></md-checkbox> </md-input-container> </td> <td md-cell> <md-input-container> <md-checkbox ng-model="lessonTime.dayTue" aria-label="{{\'main.tuesdayShort\' | translate}}" disabled></md-checkbox> </md-input-container> </td> <td md-cell> <md-input-container> <md-checkbox ng-model="lessonTime.dayWed" aria-label="{{\'main.wednesdayShort\' | translate}}" disabled></md-checkbox> </md-input-container> </td> <td md-cell> <md-input-container> <md-checkbox ng-model="lessonTime.dayThu" aria-label="{{\'main.thursdayShort\' | translate}}" disabled></md-checkbox> </md-input-container> </td> <td md-cell> <md-input-container> <md-checkbox ng-model="lessonTime.dayFri" aria-label="{{\'main.fridayShort\' | translate}}" disabled></md-checkbox> </md-input-container> </td> <td md-cell> <md-input-container> <md-checkbox ng-model="lessonTime.daySat" aria-label="{{\'main.saturdayShort\' | translate}}" disabled></md-checkbox> </md-input-container> </td> <td md-cell> <md-input-container> <md-checkbox ng-model="lessonTime.daySun" aria-label="{{\'main.sundayShort\' | translate}}" disabled></md-checkbox> </md-input-container> </td> </tr> </tbody> </table> </md-table-container> </div> </div> <br> <div layout="row"> <md-button ng-href="#/timetable/lessonTime/search" class="md-raised">{{\'main.button.back\' | translate}}</md-button> </div> </form> </div> </div>'),a.put("timetable/timetable.timetableEvent.edit.html",'<div class="ois-form-layout-padding" ng-cloak> <div flex> <form name="eventForm" ng-submit="eventForm.$valid && loadData()" novalidate> <div layout="row" flex="100"> <md-input-container flex="20" flex-md="100" flex-sm="100" flex-xs="100"> <label>{{\'main.date\' | translate}}</label> <md-datepicker required ng-model="timetableEvent.date"></md-datepicker> </md-input-container> <md-input-container flex="20" flex-sm="100" flex-offset="2" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'main.start\' | translate}}</label> <hois-time required ng-model="timetableEvent.startTime" placeholder="{{\'main.timePlaceholder\' | translate}}"></hois-time> </md-input-container> <md-input-container flex="20" flex-sm="100" flex-offset="2" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'main.end\' | translate}}</label> <hois-time required ng-model="timetableEvent.endTime" placeholder="{{\'main.timePlaceholder\' | translate}}"></hois-time> </md-input-container> </div> <div layout="row" flex="100"> <md-input-container flex="60" flex-sm="100" flex-xs="100"> <label class="textInput">{{\'timetable.timetableEvent.name\' | translate}}</label> <input type="text" ng-model="timetableEvent.name" required md-maxlength="255"> </md-input-container> </div> <div layout="row" flex="100"> <md-input-container flex="20" flex-sm="100" flex-xs="100"> <md-checkbox ng-model="timetableEvent.repeat" aria-label="Is repeat event"> {{\'timetable.timetableEvent.isRepeat\' | translate}} </md-checkbox> </md-input-container> <div ng-if="timetableEvent.repeat" flex="80"> <md-input-container flex="50"> <label>{{\'timetable.timetableEvent.weekAmount\' | translate}}</label> <input flex="100" ng-model="timetableEvent.weekAmount" type="number" autofocus aria-label="weekamount"> </md-input-container> <md-input-container flex="50" flex-offset="5"> <label>{{\'timetable.timetableEvent.repetition\' | translate}}</label> <hois-classifier-select flex="100" ng-model="timetableEvent.repeatCode" model-value-attr="code" aria-label="repeatcode" main-classifier-code="TUNNIPLAAN_SYNDMUS_KORDUS"> </hois-classifier-select> </md-input-container> </div> </div> <div layout="row" flex="60" flex-sm="100" flex-xs="100"> <hois-autocomplete label="timetable.timetableEvent.teacher" ng-model="timetableEvent.teacher" method="teachers" flex></hois-autocomplete> </div> <div layout="column" class="common-label" flex="55" ng-repeat="teacher in timetableEvent.teachers"> <div layout="row" flex layout-align="start center"> <div flex="5">&nbsp;</div> <div flex="50">{{teacher.nameEt}}</div> <div> <a ng-click="deleteTeacher(teacher)" class="remove">&times;</a> </div> </div> </div> <div layout="row" flex="60" flex-sm="100" flex-xs="100"> <hois-autocomplete label="timetable.timetableEvent.room" ng-model="timetableEvent.room" method="rooms" flex></hois-autocomplete> </div> <div layout="column" class="common-label" flex="55" ng-repeat="room in timetableEvent.rooms"> <div layout="row" flex layout-align="start center"> <div flex="5">&nbsp;</div> <div flex="50">{{room.nameEt}}</div> <div> <a ng-click="deleteRoom(room)" class="remove">&times;</a> </div> </div> </div> <div layout="row" flex="100"> <md-button class="md-raised md-primary" ng-click="save()">{{\'main.button.save\' | translate}}</md-button> <md-button ng-if="timetableEvent.id" ng-click="delete()" class="md-raised">{{\'main.button.delete\' | translate}}</md-button> <md-button ng-href="#/lessonplans/events" class="md-raised">{{\'main.button.back\' | translate}}</md-button> </div> </form> </div> </div>'),a.put("timetable/timetable.timetableManagement.copyTimetable.html",'<md-dialog aria-label="add enterprise dialog" flex="30"> <form name="dialogForm" ng-submit="dialogForm.$valid && submit()" novalidate ng-cloak> <md-toolbar> <div class="md-toolbar-tools"> <h2 flex>{{\'timetable.management.selectCopyTarget\' | translate}}</h2> <md-button class="md-icon-button" ng-click="cancel()"> <md-icon md-font-set="material-icons">close</md-icon> </md-button> </div> </md-toolbar> <md-dialog-content> <span flex></span> <div class="ois-form-layout" layout="column" layout-margin ng-cloak> <div layout="column"> <div flex="100" flex-offset="2" flex-offset-xs="0" flex-offset-sm="0"> <div layout="row" flex="70"> <md-input-container flex="100" flex-sm="100" flex-xs="100"> <md-select ng-model="copyTarget" placeholder="{{\'timetable.management.period\' | translate}}"> <md-option ng-value="target" ng-repeat="target in copyTargets">{{ target.start | hoisDate }}-{{ target.end | hoisDate }}</md-option> </md-select> </md-input-container> </div> </div> </div> </div> </md-dialog-content> <md-dialog-actions layout="row" layout-align="start start"> <md-button class="md-raised md-primary" type="submit">{{\'main.button.save\' | translate}}</md-button> <md-button class="md-raised" ng-click="cancel()">{{"main.button.close" | translate}}</md-button> </md-dialog-actions> </form> </md-dialog>'),a.put("timetable/timetable.timetableManagement.html",'<div class="ois-form-layout-padding ois-form-layout" ng-cloak> <div flex> <fieldset> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'main.searchlabel\' | translate}}</legend> <form name="timetableSearchForm" ng-submit="loadData()" novalidate class="nomargin"> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="25" flex-sm="100" flex-xs="100"> <label>{{\'timetable.management.studyYear\' | translate}}</label> <hois-select ng-model="criteria.studyYear" values="formState.studyYears" required></hois-select> </md-input-container> <md-input-container flex="20" flex-sm="100" flex-xs="100" flex-offset="5"> <label>{{\'timetable.management.studyPeriod\' | translate}}</label> <hois-select ng-model="criteria.studyPeriod" values="formState.studyPeriods" required></hois-select> </md-input-container> <md-input-container required ng-show="higher && vocational" flex="45" flex-sm="100" flex-xs="100" flex-offset="5"> <label>{{\'timetable.management.type\' | translate}}</label> <hois-classifier-select ng-model="criteria.type" model-value-attr="code" default-value="TUNNIPLAAN_LIIK_V" filter-values show-only-values="true" watch-model connect-main-classifier-code="TUNNIPLAAN_LIIK" main-classifier-code="TUNNIPLAAN_LIIK"></hois-classifier-select> </md-input-container> </div> <div layout="row"> <md-button type="submit" class="md-raised md-primary">{{\'main.button.search\' | translate}}</md-button> <md-button ng-if="criteria.type === \'TUNNIPLAAN_LIIK_H\'" class="md-raised" ng-href="#/timetable/new?type={{criteria.type}}">{{\'main.button.create\' | translate}} </md-button> </div> <div flex-xs="0" flex-gt-xs="0" flex-gt-sm="50"></div> </form> </fieldset> </div> </div> <div layout-padding> <div flex> <md-table-container> <table md-table md-progress="tabledata.$promise"> <thead md-head md-order="criteria.order" md-on-reorder="loadData"> <tr md-row> <th md-column>{{\'timetable.management.period\' | translate}}</th> <th md-column>{{\'timetable.management.status\' | translate}}</th> <th md-column></th> <th></th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="row in tabledata.content" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell ng-if="row.id"><a ng-href="#/timetable/{{::row.id}}/view">{{row.start | hoisDate}} - {{row.end | hoisDate}}</a></td> <td md-cell ng-if="!row.id">{{row.start | hoisDate}} - {{row.end | hoisDate}}</td> <td md-cell>{{currentLanguageNameField(row.status)}}</td> <td md-cell> <md-button ng-if="!row.id && canEdit" md-no-ink class="md-primary change-button" ng-click="createEvent(row)"> {{\'main.button.create\' | translate}} </md-button> <!--md-button ng-if="row.id && row.isHigher" md-no-ink class="md-primary change-button"\r\n                       ng-href="#/timetable/{{::row.id}}/edit">{{\'main.button.change\' | translate}}\r\n            </md-button--> <md-button ng-if="row.id && !row.isHigher" md-no-ink class="md-primary change-button" ng-href="#/timetable/{{::row.id}}/view">{{\'main.button.change\' | translate}} </md-button> <md-button ng-if="row.id && !row.isHigher" md-no-ink class="md-primary change-button" ng-click="copyTimetable(row.id)">{{\'main.button.copy\' | translate}} </md-button> <md-button ng-if="row.id && !row.isHigher" ng-href="{{excel(formState.xlsDiffUrl, {id: row.id})}}" target="_blank" class="md-primary change-button">{{\'timetable.management.difference\' | translate}} </md-button> <md-button ng-if="row.id && !row.isHigher" ng-href="{{excel(formState.xlsPlanUrl, {id: row.id})}}" target="_blank" class="md-primary change-button">{{\'timetable.management.plan\' | translate}} </md-button> </td> </tr> </tbody> </table> </md-table-container> <md-table-pagination md-limit="criteria.size" md-limit-options="[10, 20, 50]" md-page="criteria.page" md-total="{{tabledata.totalElements}}" md-on-paginate="loadData" md-label="{page: \'{{\'main.page\' | translate}}:\', rowsPerPage: \'{{\'main.rowPerPage\' | translate}}:\', of: \'{{\'main.of\' | translate}}\'}" md-page-select></md-table-pagination> </div> </div>'),a.put("timetable/timetable.view.html",'<div class="ois-form-layout-padding ois-form-layout" ng-cloak> <div> <form name="timetableForm" novalidate class="nomargin form-readonly" layout="column"> <div layout="row" class="form-readonly"> <md-input-container flex="30"> <label class="textInput">{{\'timetable.timetablePlan.timetablePeriod\' | translate}}</label> <hois-value value="(timetable.startDate | hoisDate) + \'-\'+(timetable.endDate | hoisDate)"> </md-input-container> </div> <div flex-xs="0" flex-gt-xs="0" flex-gt-sm="50"></div> <div ng-repeat="curriculum in timetable.curriculums"> <table md-table> <thead md-head> <tr md-row> <th md-column>{{currentLanguageNameField(curriculum)}}{{curriculum.curriculumCode}}, {{currentLanguageNameField(curriculum.curriculumStudyLevelCode)}}</th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="group in curriculum.groups" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell><a href="#/timetable/{{timetable.id}}/{{timetable.higher ? \'createHigherPlan\' : \'createVocationalPlan\'}}/{{group.id}}">{{group.code}}</a></td> </tr> </tbody> </table> </div> <div ng-if="timetable.pairs"> <table md-table> <thead md-head> <tr md-row> <th md-column><label>{{\'timetable.subjectTeacherPairs\' | translate}}</label> </th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="pair in timetable.pairs" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell><a href="#/timetable/{{timetable.id}}/{{timetable.higher ? \'createHigherPlan\' : \'createVocationalPlan\'}}">{{pair.code}} {{currentLanguageNameField(pair)}} / {{pair.teacherNames}}</a></td> </tr> </tbody> </table> </div> </form> <md-button ng-if="timetable.editable && timetable.higher" md-no-ink class="md-primary change-button" ng-href="#/timetable/{{::timetable.id}}/edit">{{\'main.button.change\' | translate}} </md-button> <md-button ng-if="timetable.status === \'TUNNIPLAAN_STAATUS_S\'" ng-click="confirm()" class="md-raised">{{\'main.button.confirm\' | translate}} </md-button> <md-button ng-if="timetable.status === \'TUNNIPLAAN_STAATUS_K\'" ng-click="publicize()" class="md-raised">{{\'timetable.view.publicize\' | translate}} </md-button> <md-button ng-href="#/timetable/timetableManagement" class="md-raised">{{\'main.button.back\' | translate}} </md-button> </div> </div>'),a.put("timetable/timetable.week.view.html",'<div layout-padding ng-if="typeId || searchResultEvents"> <div layout="row" layout-align="center" style="padding: 0px"> <a ng-if="shownTimetableCurriculum || shownTeacher || shownRoom" ng-href="#/timetable/{{timetableType}}/{{::schoolId}}/{{::typeId}}/{{weekIndex}}"> <span ng-if="shownTimetableCurriculum">{{shownTimetableCurriculum.studentGroupCode}}, {{currentLanguageNameField(shownTimetableCurriculum)}}</span> <span ng-if="shownTeacher">{{shownTeacher.lastname}}, {{shownTeacher.firstname}}</span> <span ng-if="shownRoom">{{shownRoom.buildingCode}}, {{shownRoom.roomCode}}</span> </a> </div> <div layout="row" layout-align="center" style="padding: 0px"> <md-button ng-if="previousWeekIndex && directRoute" class="md-icon-button md-primary" ng-href="#/timetable/{{timetableType}}/{{::schoolId}}/{{::typeId}}/{{::previousWeekIndex}}"> <md-icon>arrow_back</md-icon> </md-button> <md-button ng-if="previousWeekIndex && !directRoute" class="md-icon-button md-primary" ng-click="previousWeek(typeId, previousWeekIndex)"> <md-icon>arrow_back</md-icon> </md-button> <h2 ng-if="shownTimetable" style="display:inline-block">{{currentLanguageNameField(shownTimetable)}}. {{shownWeek.start | hoisDate}} - {{shownWeek.end | hoisDate}}</h2> <h2 ng-if="!shownTimetable" style="display:inline-block">{{shownWeek.start | hoisDate}} - {{shownWeek.end | hoisDate}}</h2> <md-button ng-if="nextWeekIndex && directRoute" class="md-icon-button md-primary" ng-href="#/timetable/{{timetableType}}/{{::schoolId}}/{{::typeId}}/{{::nextWeekIndex}}"> <md-icon>arrow_forward</md-icon> </md-button> <md-button ng-if="nextWeekIndex && !directRoute" class="md-icon-button md-primary" ng-click="nextWeek(typeId, nextWeekIndex)"> <md-icon>arrow_forward</md-icon> </md-button> </div> <div hide-xs ng-if="timetableEvents.length > 0" layout="column" flex="90" style="border: 1px solid #ccc; margin-left: auto; margin-right: auto" id="vTimetable"> <div layout="row" style="position:relative"> <div layout="column" flex style="position:absolute;width:100%"> <div style="height:20px;text-align:center">&nbsp;</div> <div ng-repeat="time in timeColumn track by $index" style="height:15px;border-bottom:1px dotted #ccc;border-collapse: collapse" ng-show="$index > 0">&nbsp;</div> </div> <div flex="10" layout="column"> <div style="height:20px;text-align:center">&nbsp;</div> <div ng-repeat="time in timeColumn" style="height:16px"> <span ng-show="($index % 2 != 0)">{{time}}</span> </div> </div> <div ng-repeat="day in weekColumns" flex="20" layout="column" style="position:relative; border-left: 1px solid #ccc;border-collapse: collapse"> <div style="height:32px;text-align:center" md-colors="day.today ?  {background: \'accent-400\'}:{}">{{\'timetable.timetablePlan.\' + day.name | translate}}<br>{{day.date | hoisDate}}</div> <div layout="row"> <div flex ng-repeat="event in day.events track by $index" ng-style="{\'height\': event.rowHeight + \'px\', \'top\': event.top + \'px\', \'z-index\': $index}" style="padding: 0; border: 1px solid; position:absolute; overflow: hidden;width:calc(100% - 10px)" md-colors="event.public ? {background: \'primary-100-0.8\',\'border-color\': \'primary-500\'} : {background: \'accent-100-0.8\',\'border-color\': \'accent-500\'}" class="timetableEvent"> <md-tooltip md-direction="bottom" style="margin: -18px; height: auto"> <div ng-if="event.public">{{event.timeStart}}-{{event.timeEnd}} {{currentLanguageNameField(event)}}</div> <div ng-if="!event.public">{{event.timeStart}}-{{event.timeEnd}} {{\'timetable.timetableEvent.occupied\' | translate}}</div> <div ng-repeat="room in event.rooms track by $index">{{room.buildingCode}}-{{room.roomCode}}</div> <div ng-repeat="teacher in event.teachers track by $index">{{teacher.name}}</div> <div ng-repeat="studentGroup in event.studentGroups track by $index">{{studentGroup.code}}</div> <div>{{event.studentGroup}}</div> </md-tooltip> <div> <div> <span>{{event.timeStart}}-{{event.timeEnd}}</span> <span ng-if="event.public">{{currentLanguageNameField(event)}}</span> <span ng-if="!event.public">{{\'timetable.timetableEvent.occupied\' | translate}}</span> </div> <md-button ng-if="auth != null && event.showStudyMaterials && event.public && event.journalId" ng-href="/#/studyMaterial/vocational/{{event.journalId}}/view" class="studyMaterialsIcon md-icon-button" aria-label="materials"> <md-icon md-font-set="material-icons">folder</md-icon> </md-button> <md-button ng-if="auth != null && event.showStudyMaterials && event.public && event.subjectStudyPeriodId" ng-href="/#/studyMaterial/higher/{{event.subjectStudyPeriodId}}/view" class="studyMaterialsIcon md-icon-button" aria-label="materials"> <md-icon md-font-set="material-icons">folder</md-icon> </md-button> <md-button ng-if="auth == null && event.showStudyMaterials && event.public && event.journalId" ng-href="/#/studyMaterial/{{::schoolId}}/vocational/{{event.journalId}}/view" class="studyMaterialsIcon md-icon-button" aria-label="materials"> <md-icon md-font-set="material-icons">folder</md-icon> </md-button> <md-button ng-if="auth == null && event.showStudyMaterials && event.public && event.subjectStudyPeriodId" ng-href="/#/studyMaterial/{{::schoolId}}/higher/{{event.subjectStudyPeriodId}}/view" class="studyMaterialsIcon md-icon-button" aria-label="materials"> <md-icon md-font-set="material-icons">folder</md-icon> </md-button> </div> <div> <span ng-repeat="teacher in event.teachers track by $index"> <a ng-href="/#/timetable/teacher/{{::schoolId}}/{{::teacher.id}}/{{::weekIndex}}">{{teacher.name}}</a> {{$last ? \'\' : \', \'}} </span> </div> <div> <span ng-repeat="room in event.rooms track by $index"> <a ng-href="/#/timetable/room/{{::schoolId}}/{{::room.id}}/{{::weekIndex}}">{{room.buildingCode}}-{{room.roomCode}}</a> {{$last ? \'\' : \', \'}} </span> </div> <div> <span ng-repeat="studentGroup in event.studentGroups track by $index"> <a ng-href="/#/timetable/group/{{::schoolId}}/{{::studentGroup.id}}/{{::weekIndex}}">{{studentGroup.code}}</a> {{$last ? \'\' : \', \'}} </span> </div> </div> </div> </div> </div> </div> <div hide-gt-xs ng-if="timetableEvents.length > 0"> <span> <hois-collapsable ng-repeat="day in weekColumns" expanded="day.today" header-background-color="day.today ? \'rgb(236, 64, 122)\' : none"> <hois-collapsable-header> <span ng-style="{color: day.today ? \'white\' : none}">{{\'timetable.timetablePlan.\' + day.name | translate}} {{day.date | hoisDate}}</span> </hois-collapsable-header> <div layout="column"> <div flex ng-repeat="event in day.events track by $index"> <div style="border: 1px solid #e8e8e8; min-height: 80px"> <div> <span style="font-weight: bold">{{event.timeStart}}-{{event.timeEnd}}</span> <span ng-if="event.public">{{currentLanguageNameField(event)}}</span> <span ng-if="!event.public">{{\'timetable.timetableEvent.occupied\' | translate}}</span> </div> <div> <span ng-repeat="teacher in event.teachers track by $index"> <a ng-href="/#/timetable/teacher/{{::schoolId}}/{{::teacher.id}}">{{teacher.name}}</a> {{$last ? \'\' : \', \'}} </span> </div> <div> <span ng-repeat="room in event.rooms track by $index"> <a ng-href="/#/timetable/room/{{::schoolId}}/{{::room.id}}">{{room.buildingCode}}-{{room.roomCode}}</a> {{$last ? \'\' : \', \'}} </span> </div> <div> <span ng-repeat="studentGroup in event.studentGroups track by $index"> <a ng-href="/#/timetable/group/{{::schoolId}}/{{::studentGroup.id}}">{{studentGroup.code}}</a> {{$last ? \'\' : \', \'}} </span> </div> </div> </div> </div> </hois-collapsable> </span> </div> <div ng-if="!(timetableEvents.length > 0)"> <div ng-if="!timetableSearch" layout="row" layout-align="center">{{\'timetable.error.noWeekTimetable\' | translate}}</div> <div ng-if="timetableSearch" layout="row" layout-align="center">{{\'timetable.error.noSearchResults\' | translate}}</div> </div> <div> <md-button class="md-icon-button timetableIconButton" ng-click="generateCalendar()"> <md-tooltip md-direction="bottom">{{\'timetable.saveToCalendar\' | translate}}</md-tooltip> <md-icon md-font-set="material-icons md-primary md-48">event</md-icon> </md-button> <md-button ng-if="directRoute && auth != null" ng-click="back(\'#/timetable/generalTimetableByGroup\'); emptyParentVariable()" class="md-raised">{{\'main.button.back\' | translate}}</md-button> <md-button ng-if="directRoute && auth == null" ng-click="back(\'#/timetable/generalTimetableByGroup/\' + schoolId)" class="md-raised">{{\'main.button.back\' | translate}}</md-button> </div> </div> <style>.hois-collapse {\r\n        margin-bottom: 1px;\r\n    }</style>'),
a.put("vocationalCurriculum/vocational.curriculum.html",'<div class="ois-form-layout-padding ois-form-layout" ng-cloak> <form name="vocationalCurriculumForm" layout="column"> <div layout="row" layout-sm="column" layout-xs="column"> <div layout="column" flex="30" flex-sm="100" flex-xs="100"> <fieldset tabindex="1"> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'curriculum.draft\' | translate}} *</legend> <md-input-container flex="70" flex-sm="100" flex-xs="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <md-radio-group ng-model="curriculum.draft" name="draft" ng-change="draftSelected()" required class="md-primary" ng-disabled="curriculum.id || (curriculum.draft && (curriculum.draft === \'OPPEKAVA_LOOMISE_VIIS_RIIKLIK\' || curriculum.draft === \'OPPEKAVA_LOOMISE_VIIS_KOOL\') || curriculum.nameEt)"> <md-radio-button value="OPPEKAVA_LOOMISE_VIIS_KUTSE" aria-label="OPPEKAVA LOOMISE VIIS KUTSE">{{draftOptions["OPPEKAVA_LOOMISE_VIIS_KUTSE"][$root.currentLanguageNameField()]}}</md-radio-button> <md-radio-button value="OPPEKAVA_LOOMISE_VIIS_TOOANDJA" aria-label="OPPEKAVA LOOMISE VIIS TOOANDJA">{{draftOptions["OPPEKAVA_LOOMISE_VIIS_TOOANDJA"][$root.currentLanguageNameField()]}}</md-radio-button> <md-radio-button value="OPPEKAVA_LOOMISE_VIIS_KOOL" aria-label="OPPEKAVA LOOMISE VIIS KOOL">{{draftOptions["OPPEKAVA_LOOMISE_VIIS_KOOL"][$root.currentLanguageNameField()]}}</md-radio-button> <md-radio-button value="OPPEKAVA_LOOMISE_VIIS_RIIKLIK" aria-label="OPPEKAVA LOOMISE VIIS RIIKLIK">{{draftOptions["OPPEKAVA_LOOMISE_VIIS_RIIKLIK"][$root.currentLanguageNameField()]}}</md-radio-button> </md-radio-group> <p class="invalid" ng-if="vocationalCurriculumForm.$submitted && !curriculum.draft">{{\'main.messages.error.inputFieldIsRequired\' | translate}}</p> </md-input-container> </fieldset> <div>&nbsp;</div> <fieldset tabindex="2" layout="column"> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'curriculum.nameTitle\' | translate}}</legend> <md-input-container flex="100"> <label>{{\'curriculum.nameEt\' | translate}}</label> <input name="nameEt" ng-model="curriculum.nameEt" type="text" required ng-readonly="formState.notEditableBasicData" md-maxlength="255"> </md-input-container> <md-input-container flex="100"> <label>{{\'curriculum.nameEn\' | translate}}</label> <input ng-model="curriculum.nameEn" type="text" required ng-readonly="formState.notEditableBasicData" md-maxlength="255"> </md-input-container> <md-input-container flex="100"> <label>{{\'curriculum.nameRu\' | translate}}</label> <input ng-model="curriculum.nameRu" type="text" ng-readonly="formState.notEditableBasicData" md-maxlength="255"> </md-input-container> </fieldset> </div> <fieldset tabindex="3" flex="66" flex-offset="4" flex-sm="100" flex-xs="100" flex-offset-xs="0" flex-offset-sm="0"> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'curriculum.mainData\' | translate}}</legend> <div layout="row" flex> <md-input-container layout="row" flex="45"> <hois-classifier-radio layout="row" name="consecution" ng-model="curriculum.consecution" model-value-attr="code" main-classifier-code="OPPEKAVA_TYPE" filter-values watch-model="curriculum.origStudyLevel" connect-main-classifier-code="OPPEASTE" search-from-connect select-first-value default-value="OPPEKAVA_TYPE_E" required disabled></hois-classifier-radio> </md-input-container> <div md-colors="{color: \'warn-A400\'}" ng-if="vocationalCurriculumForm.$submitted" ng-messages="vocationalCurriculumForm.consecution.$error"> <div ng-message="required">{{\'main.messages.error.inputFieldIsRequired\' | translate}}</div> </div> <md-input-container flex="50" flex-offset="5"> <label>{{\'curriculum.code\' | translate}}</label> <input ng-model="curriculum.code" name="code" type="text" required ng-readonly="formState.notEditableBasicData" md-maxlength="25" unique="codeUniqueQuery" ng-model-options="{ debounce: 250 }"> <div ng-messages="vocationalCurriculumForm.code.$error" ng-show="vocationalCurriculumForm.code.$dirty"> <div ng-message="notUnique"> {{\'main.messages.error.mustBeUnique\' | translate}} </div> </div> </md-input-container> </div> <div layout="row" flex> <div flex="45"> <md-checkbox ng-model="curriculum.joint" aria-label="Is vocational" class="md-primary" ng-disabled="formState.notEditableBasicData"> {{\'curriculum.isJoint\' | translate}} </md-checkbox> </div> <md-input-container flex="50" flex-offset="5"> <label>{{\'curriculum.merCode\' | translate}}</label> <input ng-model="curriculum.merCode" name="merCode" type="text" ng-model-options="{ debounce: 250 }" unique="merCodeUniqueQuery" ng-readonly="formState.notEditableBasicData" md-maxlength="10"> <div ng-messages="vocationalCurriculumForm.merCode.$error" ng-show="vocationalCurriculumForm.merCode.$dirty"> <div ng-message="notUnique"> {{\'main.messages.error.mustBeUnique\' | translate}} </div> </div> </md-input-container> </div> <!-- uus --> <div layout="row" flex> <div flex="45"> <md-checkbox ng-model="curriculum.occupation" ng-click="isOccupationChanged()" aria-label="Is vocational" ng-hide="isDraftEmployerSupportLetter" ng-disabled="formState.notEditableBasicData || !occupationCanBeChanged() || curriculum.curriculumOccupations.length > 0" name="isOccupation"> {{\'curriculum.occupationIsAcquired\' | translate}} </md-checkbox> </div> <md-input-container flex="50" flex-offset="5"> <label>{{\'curriculum.credits\' | translate}}</label> <input ng-model="curriculum.credits" name="credits" type="number" min="0" max="999" pattern="^\\d+(\\.\\d{1})?$" required ng-readonly="formState.notEditableBasicData"> <div ng-messages="vocationalCurriculumForm.credits.$error" ng-show="vocationalCurriculumForm.credits.$dirty"> <div ng-message="min"> {{\'main.messages.error.positive\' | translate}} </div> <div ng-message="max"> {{\'curriculum.error.max999\' | translate}} </div> <div ng-message="pattern"> {{\'stateCurriculum.error.decimalPresision\' | translate}} </div> </div> </md-input-container> </div> <div layout="row" flex> <md-input-container flex="45"> <label>{{\'curriculum.studyLevel\' | translate}}</label> <hois-classifier-select ng-model="curriculum.origStudyLevel" model-value-attr="code" main-classifier-code="OPPEASTE" show-only-values="schoolOrigStudyLevel" required ng-disabled="formState.notEditableBasicData"></hois-classifier-select> </md-input-container> <div layout="row" flex="50" flex-offset="5"> <md-input-container flex="50"> <input ng-model="curriculum.studyPeriodYears" name="studyPeriodYears" type="number" placeholder="{{\'curriculum.studyPeriod\' | translate}} {{\'main.years\' | translate}}" required min="0" max="{{maxStydyYears.max}}" pattern="^\\d+$" ng-readonly="formState.notEditableBasicData"> <div ng-messages="vocationalCurriculumForm.studyPeriodYears.$error" ng-show="vocationalCurriculumForm.studyPeriodYears.$dirty"> <div ng-message="min"> {{\'main.messages.error.positive\' | translate}} </div> <div ng-message="max"> {{\'curriculum.error.max\' | translate:maxStydyYears }} </div> <div ng-message="pattern"> {{\'stateCurriculum.enter.credits.integer\' | translate}} </div> </div> </md-input-container> <md-input-container flex="45" flex-offset="5"> <input ng-model="curriculum.studyPeriodMonths" name="studyPeriodMonths" type="number" placeholder="{{\'main.months\' | translate}}" min="0" max="11" pattern="^\\d+$" ng-readonly="formState.notEditableBasicData"> <div ng-messages="vocationalCurriculumForm.studyPeriodMonths.$error" ng-show="vocationalCurriculumForm.studyPeriodMonths.$dirty"> <div ng-message="min"> {{\'main.messages.error.positive\' | translate}} </div> <div ng-message="max"> {{\'curriculum.error.monthsMax11\' | translate}} </div> <div ng-message="pattern"> {{\'stateCurriculum.enter.credits.integer\' | translate}} </div> </div> </md-input-container> </div> </div> <div layout="row" flex> <md-input-container flex="45"> <label>{{\'curriculum.ekrLevel\' | translate}}</label> <hois-classifier-select ng-model="curriculum.ekrLevel" main-classifier-code="EKR" watch-model="curriculum.origStudyLevel" filter-values connect-main-classifier-code="EKR" select-first-value disabled></hois-classifier-select> </md-input-container> <md-input-container flex="50" flex-offset="5"> <label>{{\'curriculum.studyForm\' | translate}}</label> <hois-classifier-select multiple ng-model="curriculum.studyForms" model-value-attr="code" main-classifier-code="OPPEVORM" criteria="{vocational: true}" required ng-disabled="formState.notEditableBasicData"></hois-classifier-select> </md-input-container> </div> <div layout="row" flex> <md-input-container flex="45"> <label>{{\'curriculum.educationLevel\' | translate}}</label> <hois-classifier-select ng-model="curriculum.educationLevel" main-classifier-code="HARIDUSTASE" watch-model="curriculum.origStudyLevel" filter-values connect-main-classifier-code="HARIDUSTASE" select-first-value disabled ng-disabled="formState.notEditableBasicData"></hois-classifier-select> </md-input-container> <md-input-container flex="50" flex-offset="5"> <label>{{\'curriculum.studyLanguage\' | translate}}</label> <hois-classifier-select multiple ng-model="curriculum.studyLanguages" model-value-attr="code" main-classifier-code="OPPEKEEL" criteria="{vocational: true}" required ng-disabled="formState.notEditableBasicData"></hois-classifier-select> </md-input-container> </div> <div layout="row" flex> <md-input-container flex="45"> <label>{{\'curriculum.areaOfStudy\' | translate}}</label> <hois-classifier-select ng-model="curriculum.areaOfStudy" model-value-attr="code" main-classifier-code="ISCED_VALD" criteria="{vocational: true}" required ng-disabled="formState.notEditableBasicData"></hois-classifier-select> </md-input-container> <!-- hois-school-department-select was not used here as it set form $dirty after page load.\r\n          In addition, extra logic in providing options required --> <md-input-container flex="50" flex-offset="5"> <label> {{\'curriculum.structuralUnitResponsible\' | translate}} {{getStar()}} </label> <hois-select ng-model="curriculum.schoolDepartments" multiple values="schoolDepartments" ng-required="strictValidation()"></hois-select> </md-input-container> </div> <div layout="row" flex> <md-input-container flex="45"> <label>{{\'curriculum.fieldOfStudy\' | translate}}</label> <hois-classifier-select ng-model="curriculum.fieldOfStudy" model-value-attr="code" main-classifier-code="ISCED_SUUN" criteria="{vocational: true}" watch-model="curriculum.areaOfStudy" filter-values search-from-connect connect-main-classifier-code="ISCED_VALD" required ng-disabled="formState.notEditableBasicData"></hois-classifier-select> </md-input-container> <md-input-container flex="50" flex-offset="5" ng-show="curriculum.draft === \'OPPEKAVA_LOOMISE_VIIS_RIIKLIK\'"> <label>{{\'curriculum.ehisRokClassifier\' | translate}}</label> <hois-classifier-select ng-model="curriculum.stateCurrClass" model-value-attr="code" main-classifier-code="EHIS_ROK" disabled></hois-classifier-select> </md-input-container> </div> <div layout="row" flex> <md-input-container flex="45"> <label>{{\'curriculum.group\' | translate}}</label> <hois-classifier-select ng-model="curriculum.iscedClass" model-value-attr="code" main-classifier-code="ISCED_RYHM" criteria="{vocational: true}" watch-model="curriculum.fieldOfStudy" filter-values search-from-connect connect-main-classifier-code="ISCED_SUUN" required ng-disabled="formState.notEditableBasicData"></hois-classifier-select> </md-input-container> </div> </fieldset> </div> <div>&nbsp;</div> <fieldset tabindex="4"> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'curriculum.commonData\' | translate}}</legend> <div layout="column"> <md-input-container flex> <label>{{\'curriculum.studyOutcomesEt\' | translate}}{{getStar()}}</label> <textarea ng-model="curriculum.outcomesEt" md-maxlength="20000" max-rows="10" dfs md-select-on-focus ng-required="strictValidation()"></textarea> </md-input-container> <md-input-container flex> <label>{{\'curriculum.studyOutcomesEn\' | translate}}</label> <textarea ng-model="curriculum.outcomesEn" md-maxlength="20000" max-rows="10" md-select-on-focus></textarea> </md-input-container> <md-input-container flex> <label>{{\'curriculum.structure\' | translate}}{{getStar()}}</label> <textarea ng-model="curriculum.structure" md-maxlength="20000" max-rows="10" md-select-on-focus ng-required="strictValidation()"></textarea> </md-input-container> <md-input-container flex> <label>{{\'curriculum.admissionRequirementsEt\' | translate}}{{getStar()}}</label> <textarea ng-model="curriculum.admissionRequirementsEt" md-maxlength="20000" max-rows="10" md-select-on-focus ng-required="strictValidation()"></textarea> </md-input-container> <md-input-container flex> <label>{{\'curriculum.admissionRequirementsEn\' | translate}}</label> <textarea ng-model="curriculum.admissionRequirementsEn" md-maxlength="20000" max-rows="10" md-select-on-focus></textarea> </md-input-container> <md-input-container flex> <label>{{\'curriculum.graduationRequirementsEt\' | translate}}{{getStar()}}</label> <textarea ng-model="curriculum.graduationRequirementsEt" md-maxlength="20000" max-rows="10" md-select-on-focus ng-required="strictValidation()"></textarea> </md-input-container> <md-input-container flex> <label>{{\'curriculum.graduationRequirementsEn\' | translate}}</label> <textarea ng-model="curriculum.graduationRequirementsEn" md-maxlength="20000" max-rows="10" md-select-on-focus></textarea> </md-input-container> <md-input-container flex> <label>{{\'curriculum.basesOfDraft\' | translate}}</label> <textarea ng-model="curriculum.draftText" md-maxlength="4000" max-rows="10" md-select-on-focus></textarea> </md-input-container> <md-input-container flex> <label>{{\'curriculum.specialityOpportunities\' | translate}}</label> <textarea ng-model="curriculum.specialization" md-maxlength="4000" max-rows="10" md-select-on-focus></textarea> </md-input-container> </div> </fieldset> <div>&nbsp;</div> <fieldset tabindex="5" ng-hide="isDraftEmployerSupportLetter"> <legend md-colors="{color: \'primary-800\'}" class="md-title-small" ng-class="{invalid: vocationalCurriculumForm.$submitted && occupationRequired() && strictValidation() && curriculum.curriculumOccupations.length === 0}">{{curriculum.occupation ? \'curriculum.occupationsAcquired\' : \'curriculum.partOccupationsAcquired\' | translate}}</legend> <md-button class="md-raised" ng-click="curriculum.occupation ? openOccupationDialog() : openPartOccupationsDialog()" ng-if="curriculum.id && !formState.notEditableBasicData && occupationCanBeChanged()">{{curriculum.occupation ? \'curriculum.addOccupation\' : \'curriculum.addPartOccupation\' | translate}}</md-button> <div layout="column"> <div ng-if="vocationalCurriculumForm.$submitted && occupationRequired() && strictValidation()"> <input style="display:none" type="number" readonly name="occupationsLength" ng-model="validation.occupationsLength" min="1"> <div md-colors="{color: \'warn-A400\'}" ng-messages="vocationalCurriculumForm.occupationsLength.$error"> <div ng-message="min">{{\'main.messages.error.atLeastOneShouldBeAdded\' | translate}}</div> </div> </div> </div> <table md-table class="secondary-table"> <thead md-head> <tr md-row> <th md-column>{{\'curriculum.occupationTable.order\' | translate}}</th> <th md-column ng-show="curriculum.occupation">{{\'curriculum.occupationTable.occupation\' | translate}}</th> <th md-column ng-show="!curriculum.occupation">{{\'curriculum.occupationTable.partOccupation\' | translate}}</th> <th md-column ng-show="curriculum.occupation">{{\'curriculum.occupationTable.partOccupations\' | translate}}</th> <th md-column ng-show="curriculum.occupation">{{\'curriculum.occupationTable.speciality\' | translate}}</th> <th md-column ng-show="curriculum.occupation">{{\'occupation.hasOccupationGrant\' | translate}}</th> <th md-column></th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="item in curriculum.curriculumOccupations | orderBy: \'occupation.nameEt\'" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell>{{$index + 1}}</td> <td md-cell> <a href="" ng-click="curriculum.occupation ? openOccupationDialog(item) : openPartOccupationsDialog(item)">{{currentLanguageNameField(item.occupation)}}</a></td> <td md-cell><span ng-hide="!curriculum.occupation" ng-repeat="partOccupation in item.partOccupations">{{currentLanguageNameField(partOccupation)}}{{$last ? \'\' : \', \'}}</span></td> <td md-cell><span ng-hide="!curriculum.occupation || !item.specialities || item.specialities.length == 0" ng-repeat="speciality in item.specialities track by $index"> {{currentLanguageNameField(speciality)}}{{$last ? \'\' : \', \'}}</span></td> <td md-cell><span ng-hide="!curriculum.occupation"> <md-checkbox ng-model="item.occupationGrant" disabled></md-checkbox> </span></td> <td md-cell><a class="remove" ng-click="removeOccupation(item)" ng-if="!formState.notEditableBasicData && occupationCanBeChanged()">&times;</a></td> </tr> </tbody> </table> </fieldset> <div>&nbsp;</div> <fieldset tabindex="6"> <legend md-colors="{color: \'primary-800\'}" class="md-title-small" ng-class="{invalid: vocationalCurriculumForm.$submitted && strictValidation() && !modulesValid()}">{{\'curriculum.modulesTought\' | translate}}</legend> <md-button class="md-raised" ng-click="openAddModuleDialog()" ng-if="curriculum.id">{{\'curriculum.addModule\' | translate}}</md-button> <!--MODULES WITHOUT OCCUPATIONS--> <div class="occupation-header align-center"> <span ng-class="{invalid: notAllModulesHaveOccupation()}">{{\'module.modulesWithoutPartOccupationOccuaptionSpecialization\' | translate}}</span> </div> <div layout="column" ng-repeat="type in moduleTypes | filter: filterTypesWithoutEmptyModules | orderBy: \'nameEt\'" class="lowerBorder"> <div layout="row" flex="100" class="occupation-row align-center border-bottom odd"> <div flex="5">&nbsp;</div> <div flex="20">{{currentLanguageNameField(type)}}</div> <div layout="column" flex="75"> <div flex="100" ng-repeat="module in curriculum.modules | filter: filterEmptyModulesByType(type.code) | orderBy: \'nameEt\' track by $index" layout="row" class="align-center"> <a flex="30" ng-click="openAddModuleDialog(module)" href="">{{currentLanguageNameField(module)}}</a> <span flex="10">{{module.credits}}&nbsp; EKAP</span> </div> </div> </div> </div> <!--KUTSETE/OSAKUTSETE MOODULID--> <div ng-repeat="occupation in curriculum.curriculumOccupations | orderBy: \'occupation.nameEt\'" layout="column"> <div class="occupation-header align-center"> <span ng-show="curriculum.occupation" ng-class="{invalid: vocationalCurriculumForm.$submitted && strictValidation() && (!occupationHasPModule(occupation.occupation.code) || !isOccutationsCreditsValid(occupation))}">{{\'stateCurriculum.enter.occupation.occupation\' | translate}} {{$index + 1}}:&nbsp; {{currentLanguageNameField(occupation.occupation)}}</span> <span ng-show="!curriculum.occupation" ng-class="{invalid: vocationalCurriculumForm.$submitted && strictValidation() && (!occupationHasPModule(occupation.occupation.code) || !isOccutationsCreditsValid(occupation))}">{{\'stateCurriculum.enter.occupation.partial\' | translate}} {{$index + 1}}:&nbsp; {{currentLanguageNameField(occupation.occupation)}}</span> </div> <div layout="column" ng-repeat="type in moduleTypes | filter: filterTypesWithoutModules(occupation.occupation.code, curriculum.modules) | orderBy: \'nameEt\'" class="lowerBorder"> <div layout="row" flex="100" class="occupation-row align-center border-bottom odd"> <div flex="5">&nbsp;</div> <div flex="20">{{currentLanguageNameField(type)}}</div> <div layout="column" flex="75"> <div flex="100" ng-repeat="module in curriculum.modules | filter: filterModulesByType(type.code, occupation.occupation.code) | orderBy: \'nameEt\' track by $index" layout="row" class="align-center"> <a flex="30" ng-click="openAddModuleDialog(module)" href="">{{currentLanguageNameField(module)}}</a> <span flex="10">{{module.credits}}&nbsp; EKAP</span> </div> </div> </div> </div> <!--OSAKUTSETE MOODULID--> <div ng-repeat="partOccupation in occupation.partOccupations | orderBy: \'nameEt\'" layout="column"> <div class="occupation-header2 align-center"> <span ng-class="{invalid: vocationalCurriculumForm.$submitted && strictValidation() && !occupationHasPModule(partOccupation.code)}">{{\'stateCurriculum.enter.occupation.partial\' | translate}} {{$index + 1}}: {{currentLanguageNameField(partOccupation)}}</span></div> <div layout="column" ng-repeat="type in moduleTypes | filter: filterTypesWithoutModules(partOccupation.code, curriculum.modules) | orderBy: \'nameEt\'" class="lowerBorder"> <div layout="row" flex="100" class="occupation-row align-center border-bottom odd"> <div flex="5">&nbsp;</div> <div flex="20">{{currentLanguageNameField(type)}}</div> <div layout="column" flex="75"> <div flex="100" ng-repeat="module in curriculum.modules | filter: filterModulesByType(type.code, partOccupation.code) | orderBy: \'nameEt\' track by $index" layout="row" class="align-center"> <a flex="30" ng-click="openAddModuleDialog(module)" href="">{{currentLanguageNameField(module)}}</a> <span flex="10">{{module.credits}}&nbsp; EKAP</span> </div> </div> </div> </div> </div> <!--SPETSKUTSETE MOODULID--> <div ng-repeat="speciality in occupation.specialities | orderBy: \'nameEt\'" layout="column"> <div class="occupation-header2 align-center"><span ng-class="{invalid: vocationalCurriculumForm.$submitted && strictValidation() && (!occupationHasPModule(speciality.code) || !isSpetsOccupationValid(speciality, occupation))}">{{\'stateCurriculum.enter.occupation.specialty\' | translate}} {{$index + 1}}: {{currentLanguageNameField(speciality)}}</span></div> <div layout="column" ng-repeat="type in moduleTypes | filter: filterTypesWithoutModules(speciality.code, curriculum.modules) | orderBy: \'nameEt\'" class="lowerBorder"> <div layout="row" flex="100" class="occupation-row align-center border-bottom odd"> <div flex="5">&nbsp;</div> <div flex="20">{{currentLanguageNameField(type)}}</div> <div layout="column" flex="75"> <div flex="100" ng-repeat="module in curriculum.modules | filter: filterModulesByType(type.code, speciality.code) | orderBy: \'nameEt\' track by $index" layout="row" class="align-center"> <a flex="30" ng-click="openAddModuleDialog(module)" href="">{{currentLanguageNameField(module)}}</a> <span flex="10">{{module.credits}}&nbsp; EKAP</span> </div> </div> </div> </div> </div> </div> </fieldset> <div>&nbsp;</div> <fieldset tabindex="7"> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'curriculum.additionalInfo\' | translate}}</legend> <md-input-container> <label>{{\'curriculum.optionalStudyCredits\' | translate}}{{getStar()}}</label> <input name="vocationalCredits" type="number" ng-model="curriculum.optionalStudyCredits" ng-required="strictValidation()" aria-label="optional credits" min="0" max="999" pattern="^\\d+(\\.\\d{1})?$" ng-readonly="formState.notEditableBasicData"> <div ng-messages="vocationalCurriculumForm.vocationalCredits.$error" ng-show="vocationalCurriculumForm.vocationalCredits.$dirty"> <div ng-message="min"> {{\'main.messages.error.positive\' | translate}} </div> <div ng-message="max"> {{\'curriculum.error.max999\' | translate}} </div> <div ng-message="pattern"> {{\'stateCurriculum.error.decimalPresision\' | translate}} </div> </div> </md-input-container> <div layout="column"> <md-input-container flex> <label>{{\'curriculum.practiceDescription\' | translate}}</label> <textarea ng-model="curriculum.practiceDescription" md-maxlength="20000" max-rows="2" md-select-on-focus></textarea> </md-input-container> <md-input-container flex> <label>{{\'curriculum.finalExamShortDescription\' | translate}}</label> <textarea ng-model="curriculum.finalExamDescription" md-maxlength="4000" max-rows="2" md-select-on-focus></textarea> </md-input-container> <md-input-container flex> <label>{{\'curriculum.optionalStudyOpportunities\' | translate}}</label> <textarea ng-model="curriculum.optionalStudyDescription" md-maxlength="4000" max-rows="2" md-select-on-focus></textarea> </md-input-container> <md-input-container flex> <label>{{\'curriculum.contactPerson\' | translate}}</label> <input ng-model="curriculum.contactPerson" type="text" md-maxlength="1000"> </md-input-container> <md-input-container flex> <label>{{\'main.notes\' | translate}}</label> <textarea ng-model="curriculum.description" md-maxlength="20000" max-rows="2" md-select-on-focus></textarea> </md-input-container> </div> </fieldset> <div ng-show="curriculum.joint">&nbsp;</div> <fieldset tabindex="8" ng-show="curriculum.joint"> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'curriculum.jointInfo\' | translate}}</legend> <div layout="column"> <div layout="row" layout-align="start start" ng-show="curriculum.joint"> <label class="md-required common-label" flex="30">{{\'curriculum.jointSchool\' | translate}}</label> <md-radio-group ng-model="curriculum.abroad" flex="50" layout="row" class="align-center" ng-change="clearJointPartnersFields()" flex-offset-xs="0" flex-offset-sm="0" flex-offset="4" ng-disabled="formState.notEditableBasicData"> <md-radio-button ng-value="false" aria-label="{{ \'curriculum.estonianEducationalInstitute\' | translate }}"> {{ \'curriculum.estonianEducationalInstitute\' | translate }} </md-radio-button> <md-radio-button ng-value="true" aria-label="{{ \'curriculum.jointPartnerAbroadSchool\' | translate }}"> {{ \'curriculum.foreignEducationalInstitute\' | translate }} </md-radio-button> </md-radio-group> </div> <div layout="row" flex="100" ng-show="curriculum.joint"> <md-input-container flex="64" ng-hide="curriculum.abroad"> <label>{{\'curriculum.estonianEducationalInstitute\' | translate}}&nbsp;*</label> <hois-classifier-select ng-model="curriculum.jointPartnerEhisSchool" main-classifier-code="EHIS_KOOL" filter-values="curriculum.jointPartners" by-property="ehisSchool" model-value-attr="code" ng-disabled="formState.notEditableBasicData"></hois-classifier-select> </md-input-container> <md-input-container ng-hide="!curriculum.abroad" flex="30"> <label>{{\'school.name\' | translate}}&nbsp;*</label> <input ng-model="curriculum.jointPartnerForeignNameEt" type="text" md-maxlength="100"> </md-input-container> <md-input-container ng-hide="!curriculum.abroad" flex="30" flex-offset-xs="0" flex-offset-sm="0" flex-offset="4"> <label>{{\'school.nameEn\' | translate}}&nbsp;*</label> <input ng-model="curriculum.jointPartnerForeignNameEn" type="text" md-maxlength="100"> </md-input-container> <md-button class="md-raised" ng-click="addJointPartner()" ng-disabled="(!curriculum.jointPartnerForeignNameEt || !curriculum.jointPartnerForeignNameEn) && !curriculum.jointPartnerEhisSchool">{{\'main.button.add\' | translate}}</md-button> </div> <input ng-if="curriculum.joint && strictValidation()" style="display:none" type="number" readonly name="jointPartnersLength" ng-model="validation.jointPartnersLength" min="1"> <div md-colors="{color: \'warn-A400\'}" ng-messages="vocationalCurriculumForm.jointPartnersLength.$error"> <div ng-if="vocationalCurriculumForm.$submitted" ng-message="min">{{\'main.messages.error.atLeastOneShouldBeAdded\' | translate}}</div> </div> <div layout="column" flex ng-show="curriculum.joint" class="common-label"> <div layout="row" ng-repeat="item in curriculum.jointPartners | filter: filterEmptyJointPartners | orderBy: [\'ehisSchool\', \'nameEt\']" class="align-center"> <div flex="5">&nbsp;</div> <div ng-if="item.abroad">{{currentLanguageNameField(item)}}</div> <div ng-if="!item.abroad"> <hois-classifier-value ng-model="item.ehisSchool" main-classifier-code="EHIS_KOOL"></hois-classifier-value></div> <div flex="5">&nbsp;</div> <div flex="5"><a class="remove nomargin" ng-click="removejointPartner(item)" ng-if="!formState.notEditableBasicData">&times;</a></div> </div> </div> <div layout="row" layout-sm="column" layout-xs="column" ng-show="curriculum.joint"> <md-input-container flex="30" ng-if="curriculum.joint"> <label>{{\'curriculum.jointMentor\' | translate}}{{getStar()}}</label> <hois-classifier-select ng-model="curriculum.jointMentor" main-classifier-code="EHIS_KOOL" model-value-attr="code" show-only-values="selectedJointPartners" ng-required="strictValidation()" ng-disabled="formState.notEditableBasicData"></hois-classifier-select> </md-input-container> <md-input-container flex="66" flex-offset="4"> <label>{{\'curriculum.jointResponsible\' | translate}}</label> <input ng-model="curriculum.supervisor" type="text" md-maxlength="100" ng-readonly="formState.notEditableBasicData"> </md-input-container> </div> <md-input-container flex="100"> <label>{{\'curriculum.jointAgreementInfoEt\' | translate}}{{getStar()}}</label> <textarea ng-model="curriculum.contractEt" md-maxlength="1000" max-rows="10" md-select-on-focus ng-required="curriculum.joint && strictValidation()" ng-readonly="formState.notEditableBasicData"></textarea> </md-input-container> <md-input-container flex="100"> <label>{{\'curriculum.jointAgreementInfoEn\' | translate}}{{getStar()}}</label> <textarea ng-model="curriculum.contractEn" md-maxlength="1000" max-rows="10" md-select-on-focus ng-required="curriculum.joint && strictValidation()" ng-readonly="formState.notEditableBasicData"></textarea> </md-input-container> </div> </fieldset> <div>&nbsp;</div> <fieldset tabindex="9"> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'curriculum.approvalInfo\' | translate}}</legend> <div layout="row" flex="100"> <md-input-container flex="30" flex-sm="100" flex-xs="100"> <label>{{\'curriculum.approvalDocumentNr\' | translate}}</label> <input ng-model="curriculum.approvalDokNr" type="text" md-maxlength="50"> </md-input-container> <md-input-container flex="20" flex-sm="100" flex-xs="100" flex-offset-xs="0" flex-offset-sm="0" flex-offset="4"> <label>{{\'curriculum.approvalDate\' | translate}}</label> <md-datepicker ng-model="curriculum.approval" md-open-on-focus></md-datepicker> </md-input-container> </div> </fieldset> <div>&nbsp;</div> <fieldset tabindex="10"> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'curriculum.statuses\' | translate}}</legend> <div layout="row" flex="100"> <md-input-container flex="30" flex-sm="100" flex-xs="100"> <label>{{\'main.validFrom\' | translate}}{{getStar()}}</label> <md-datepicker ng-model="curriculum.validFrom" md-open-on-focus ng-required="strictValidation()"></md-datepicker> </md-input-container> <md-input-container flex="20" flex-sm="100" flex-xs="100" flex-offset-xs="0" flex-offset-sm="0" flex-offset="4"> <label>{{\'main.validTo\' | translate}}</label> <md-datepicker ng-model="curriculum.validThru" md-min-date="curriculum.validFrom" md-open-on-focus></md-datepicker> </md-input-container> </div> <div layout="row" flex="100" class="top-margin form-readonly"> <md-input-container flex="30" flex-sm="100" flex-xs="100" class="readonly"> <label class="label">{{\'main.status\' | translate}}</label> <hois-classifier-value ng-model="curriculum.status" main-classifier-code="OPPEKAVA_STAATUS"></hois-classifier-value> </md-input-container> <md-input-container flex="20" flex-sm="100" flex-xs="100" flex-offset-xs="0" flex-offset-sm="0" flex-offset="4"> <label>{{\'curriculum.statusInEhis\' | translate}}</label> <hois-classifier-value ng-model="curriculum.ehisStatus" main-classifier-code="OPPEKAVA_EHIS_STAATUS"></hois-classifier-value> </md-input-container> <md-input-container flex="40" flex-sm="100" flex-xs="100" flex-offset-xs="0" flex-offset-sm="0" flex-offset="5"> <label>{{\'curriculum.statusChangedDateInEhis\' | translate}}</label> <hois-value value="curriculum.ehisChanged | hoisDate"></hois-value> </md-input-container> </div> <div layout="row" flex="100" class="md-body-1 hois-value"> <a ng-show="!!curriculum.stateCurriculum" ng-href="/#/stateCurriculum/{{curriculum.stateCurriculum.id}}/view" class="md-primary" translate="curriculum.referenceToStateCurriculum" translate-values="{{curriculum.stateCurriculum}}"></a> </div> </fieldset> <div ng-if="curriculum.id">&nbsp;</div> <fieldset tabindex="11" ng-if="curriculum.id"> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'main.relatedFiles\' | translate}}</legend> <md-button class="md-raised" ng-click="openAddFileDialog()">{{\'main.button.uploadFile\' | translate}}</md-button> <table md-table class="secondary-table"> <thead md-head> <tr md-row> <th md-column><span>{{\'file.nameAndFile\' | translate}}</span></th> <th md-column><span>{{\'file.creationLocation\' | translate}}</span></th> <th md-column>{{\'file.type\' | translate}}</th> <th md-column>{{\'curriculum.sendToEhis\' | translate}}</th> <th md-column></th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="file in curriculum.files | orderBy: \'oisFile.fname\'" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell> {{file.oisFile.fname}} <a ng-href="{{getUrl(file, \'curriculum\')}}" download><md-icon md-font-set="material-icons">file_download</md-icon></a> </td> <td md-cell> {{file.ehis ? \'EHIS\' : \'ÕIS\'}} </td> <td md-cell> <hois-classifier-value ng-model="file.ehisFile" main-classifier-code="EHIS_FAIL"></hois-classifier-value> </td> <td md-cell> <md-checkbox ng-model="file.sendEhis" aria-label="send to ehis"></md-checkbox> </td> <td md-cell> <a class="remove nomargin" ng-click="deleteFile(file)">&times;</a> </td> </tr> </tbody> </table> </fieldset> <div>&nbsp;</div> <fieldset tabindex="12" ng-if="curriculum.id > 0"> <legend md-colors="{color: \'primary-800\'}" class="md-title-small" ng-class="{invalid: vocationalCurriculumForm.$submitted && strictValidation() && !hasVerifiedVersions()}">{{\'curriculum.moduleImplementationPlans\' | translate}}</legend> <md-button class="md-raised" ng-click="goToVersionNewForm()" ng-show="versionCanBeAdded()">{{\'main.button.create\' | translate}}</md-button> <md-table-container> <table md-table md-progress="promise" class="secondary-table"> <thead md-head md-order="query.order"> <tr md-row> <th md-column>{{\'module.implementationPlan.code\' | translate}}</th> <th md-column>{{\'main.status\' | translate}}</th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="moduleImplementationPlan in curriculum.versions | orderBy: \'code\'"> <td md-cell> <a href="" class="md-primary" ng-click="goToImplementationPlanForm(moduleImplementationPlan)">{{moduleImplementationPlan.code}}</a> </td> <td md-cell><hois-classifier-value ng-model="moduleImplementationPlan.status" main-classifier-code="OPPEKAVA_VERSIOON_STAATUS"></hois-classifier-value></td> </tr> </tbody> </table> </md-table-container> </fieldset> <hois-created-modified object="curriculum"></hois-created-modified> <div> </div> </form> <div layout="row"> <div ng-show="curriculum.status === STATUS.ENTERING"> <div ng-show="!curriculum.id"> <md-button class="md-raised md-primary" ng-click="save()">{{\'main.button.save\' | translate}}</md-button> </div> <div ng-show="curriculum.id"> <md-button class="md-raised md-primary" ng-click="save()" ng-if="curriculum.canChange">{{\'main.button.save\' | translate}}</md-button> <md-button class="md-raised" ng-click="saveAndProceed()" ng-if="curriculum.canChange && curriculum.canConfirm">{{\'main.button.status.approving\' | translate}}</md-button> <md-button class="md-raised" ng-click="setStatusClosed()" ng-if="curriculum.canChange && curriculum.canClose">{{\'main.button.status.close\' | translate}}</md-button> <md-button class="md-raised md-default" ng-click="delete()" ng-if="curriculum.canDelete">{{\'main.button.delete\' | translate}}</md-button> </div> </div> <div ng-show="curriculum.status === STATUS.PROCEEDING && !formState.sentToEhis"> <div> <md-button class="md-raised md-primary" ng-click="save()" ng-if="curriculum.canChange">{{\'main.button.save\' | translate}}</md-button> <md-button class="md-raised md-default" ng-click="delete()" ng-if="curriculum.canDelete">{{\'main.button.delete\' | translate}}</md-button> </div> </div> <div ng-show="curriculum.status === STATUS.PROCEEDING && formState.sentToEhis"> <md-button class="md-raised md-default" ng-click="updateFromEhis()" ng-if="curriculum.canConfirm">{{\'main.button.updateFromEhis\' | translate}}</md-button> </div> <div ng-show="curriculum.status === STATUS.VERIFIED"> <div> <md-button class="md-raised md-primary" ng-click="save()" ng-if="curriculum.canChange">{{\'main.button.save\' | translate}}</md-button> </div> </div> <md-button class="md-raised md-default" ng-click="back(\'#/curriculum\', vocationalCurriculumForm)">{{\'main.button.back\' | translate}}</md-button> </div> </div> <style>.lowerBorder {\r\n    border-bottom: solid 1px #E0E0E0;\r\n  }</style>'),
a.put("vocationalCurriculum/vocational.curriculum.view.html",'<div class="ois-form-layout-padding ois-form-layout" ng-cloak> <form name="vocationalCurriculumForm" layout="column"> <div layout="row" layout-sm="column" layout-xs="column"> <div layout="column" flex="30" flex-sm="100" flex-xs="100"> <fieldset tabindex="1"> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'curriculum.draft\' | translate}}</legend> <md-input-container flex="70" flex-sm="100" flex-xs="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <md-radio-group ng-model="curriculum.draft" name="draft" class="md-primary" ng-disabled="curriculum.id || (curriculum.draft && (curriculum.draft === \'OPPEKAVA_LOOMISE_VIIS_RIIKLIK\' || curriculum.draft === \'OPPEKAVA_LOOMISE_VIIS_KOOL\') || curriculum.nameEt)"> <md-radio-button value="OPPEKAVA_LOOMISE_VIIS_KUTSE" aria-label="OPPEKAVA LOOMISE VIIS KUTSE">{{draftOptions["OPPEKAVA_LOOMISE_VIIS_KUTSE"][$root.currentLanguageNameField()]}}</md-radio-button> <md-radio-button value="OPPEKAVA_LOOMISE_VIIS_TOOANDJA" aria-label="OPPEKAVA LOOMISE VIIS TOOANDJA">{{draftOptions["OPPEKAVA_LOOMISE_VIIS_TOOANDJA"][$root.currentLanguageNameField()]}}</md-radio-button> <md-radio-button value="OPPEKAVA_LOOMISE_VIIS_KOOL" aria-label="OPPEKAVA LOOMISE VIIS KOOL">{{draftOptions["OPPEKAVA_LOOMISE_VIIS_KOOL"][$root.currentLanguageNameField()]}}</md-radio-button> <md-radio-button value="OPPEKAVA_LOOMISE_VIIS_RIIKLIK" aria-label="OPPEKAVA LOOMISE VIIS RIIKLIK">{{draftOptions["OPPEKAVA_LOOMISE_VIIS_RIIKLIK"][$root.currentLanguageNameField()]}}</md-radio-button> </md-radio-group> <p class="invalid" ng-if="vocationalCurriculumForm.$submitted && !curriculum.draft">{{\'main.messages.error.inputFieldIsRequired\' | translate}}</p> </md-input-container> </fieldset> <div>&nbsp;</div> <fieldset tabindex="2" layout="column"> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'curriculum.nameTitle\' | translate}}</legend> <md-input-container flex="100"> <label>{{\'curriculum.nameEt\' | translate}}</label> <input name="nameEt" ng-model="curriculum.nameEt" type="text" readonly> </md-input-container> <md-input-container flex="100"> <label>{{\'curriculum.nameEn\' | translate}}</label> <input ng-model="curriculum.nameEn" type="text" readonly> </md-input-container> <md-input-container flex="100"> <label>{{\'curriculum.nameRu\' | translate}}</label> <input ng-model="curriculum.nameRu" type="text" readonly> </md-input-container> </fieldset> </div> <fieldset tabindex="3" flex="66" flex-offset="4" flex-sm="100" flex-xs="100" flex-offset-xs="0" flex-offset-sm="0"> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'curriculum.mainData\' | translate}}</legend> <div layout="row" flex> <md-input-container layout="row" flex="45"> <hois-classifier-radio layout="row" name="consecution" ng-model="curriculum.consecution" model-value-attr="code" main-classifier-code="OPPEKAVA_TYPE" filter-values watch-model="curriculum.origStudyLevel" connect-main-classifier-code="OPPEASTE" search-from-connect select-first-value default-value="OPPEKAVA_TYPE_E" disabled></hois-classifier-radio> </md-input-container> <md-input-container flex="50" flex-offset="5"> <label>{{\'curriculum.code\' | translate}}</label> <input ng-model="curriculum.code" name="code" type="text" readonly> </md-input-container> </div> <div layout="row" flex> <div flex="45"> <md-checkbox ng-model="curriculum.joint" aria-label="Is vocational" class="md-primary" disabled> {{\'curriculum.isJoint\' | translate}} </md-checkbox> </div> <md-input-container flex="50" flex-offset="5"> <label>{{\'curriculum.merCode\' | translate}}</label> <input ng-model="curriculum.merCode" name="merCode" type="text" readonly> </md-input-container> </div> <!-- uus --> <div layout="row" flex> <div flex="45"> <md-checkbox ng-model="curriculum.occupation" ng-click="isOccupationChanged()" aria-label="Is vocational" ng-hide="isDraftEmployerSupportLetter" disabled> {{\'curriculum.occupationIsAcquired\' | translate}} </md-checkbox> </div> <md-input-container flex="50" flex-offset="5"> <label>{{\'curriculum.credits\' | translate}}</label> <input ng-model="curriculum.credits" name="credits" type="number" readonly> </md-input-container> </div> <div layout="row" flex> <md-input-container flex="45"> <label>{{\'curriculum.studyLevel\' | translate}}</label> <hois-classifier-select ng-model="curriculum.origStudyLevel" model-value-attr="code" main-classifier-code="OPPEASTE" disabled></hois-classifier-select> </md-input-container> <div layout="row" flex="50" flex-offset="5"> <md-input-container flex="50"> <input ng-model="curriculum.studyPeriodYears" name="studyPeriodYears" type="number" placeholder="{{\'curriculum.studyPeriod\' | translate}} {{\'main.years\' | translate}}" readonly> </md-input-container> <md-input-container flex="45" flex-offset="5"> <input ng-model="curriculum.studyPeriodMonths" name="studyPeriodMonths" type="number" placeholder="{{\'main.months\' | translate}}" readonly> </md-input-container> </div> </div> <div layout="row" flex> <md-input-container flex="45"> <label>{{\'curriculum.ekrLevel\' | translate}}</label> <hois-classifier-select ng-model="curriculum.ekrLevel" main-classifier-code="EKR" watch-model="curriculum.origStudyLevel" filter-values connect-main-classifier-code="EKR" select-first-value disabled></hois-classifier-select> </md-input-container> <md-input-container flex="50" flex-offset="5"> <label>{{\'curriculum.studyForm\' | translate}}</label> <hois-classifier-select multiple ng-model="curriculum.studyForms" model-value-attr="code" main-classifier-code="OPPEVORM" criteria="{vocational: true}" disabled></hois-classifier-select> </md-input-container> </div> <div layout="row" flex> <md-input-container flex="45"> <label>{{\'curriculum.educationLevel\' | translate}}</label> <hois-classifier-select ng-model="curriculum.educationLevel" main-classifier-code="HARIDUSTASE" watch-model="curriculum.origStudyLevel" filter-values connect-main-classifier-code="HARIDUSTASE" select-first-value disabled></hois-classifier-select> </md-input-container> <md-input-container flex="50" flex-offset="5"> <label>{{\'curriculum.studyLanguage\' | translate}}</label> <hois-classifier-select multiple ng-model="curriculum.studyLanguages" model-value-attr="code" main-classifier-code="OPPEKEEL" criteria="{vocational: true}" disabled></hois-classifier-select> </md-input-container> </div> <div layout="row" flex> <md-input-container flex="45"> <label>{{\'curriculum.areaOfStudy\' | translate}}</label> <hois-classifier-select ng-model="curriculum.areaOfStudy" model-value-attr="code" main-classifier-code="ISCED_VALD" criteria="{vocational: true}" disabled></hois-classifier-select> </md-input-container> <!-- hois-school-department-select was not used here as it set form $dirty after page load.\r\n          In addition, extra logic in providing options --> <md-input-container flex="50" flex-offset="5"> <label> {{\'curriculum.structuralUnitResponsible\' | translate}} </label> <hois-select ng-model="curriculum.schoolDepartments" multiple values="schoolDepartments" disabled></hois-select> </md-input-container> </div> <div layout="row" flex> <md-input-container flex="45"> <label>{{\'curriculum.fieldOfStudy\' | translate}}</label> <hois-classifier-select ng-model="curriculum.fieldOfStudy" model-value-attr="code" main-classifier-code="ISCED_SUUN" criteria="{vocational: true}" watch-model="curriculum.areaOfStudy" filter-values search-from-connect connect-main-classifier-code="ISCED_VALD" disabled></hois-classifier-select> </md-input-container> <md-input-container flex="50" flex-offset="5" ng-show="curriculum.draft === \'OPPEKAVA_LOOMISE_VIIS_RIIKLIK\'"> <label>{{\'curriculum.ehisRokClassifier\' | translate}}</label> <hois-classifier-select ng-model="curriculum.stateCurrClass" model-value-attr="code" main-classifier-code="EHIS_ROK" disabled></hois-classifier-select> </md-input-container> </div> <div layout="row" flex> <md-input-container flex="45"> <label>{{\'curriculum.group\' | translate}}</label> <hois-classifier-select ng-model="curriculum.iscedClass" model-value-attr="code" main-classifier-code="ISCED_RYHM" criteria="{vocational: true}" watch-model="curriculum.fieldOfStudy" filter-values search-from-connect connect-main-classifier-code="ISCED_SUUN" disabled></hois-classifier-select> </md-input-container> </div> </fieldset> </div> <div>&nbsp;</div> <fieldset tabindex="4"> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'curriculum.commonData\' | translate}}</legend> <div layout="column"> <md-input-container flex> <label>{{\'curriculum.studyOutcomesEt\' | translate}}</label> <textarea ng-model="curriculum.outcomesEt" max-rows="10" md-select-on-focus readonly></textarea> </md-input-container> <md-input-container flex> <label>{{\'curriculum.studyOutcomesEn\' | translate}}</label> <textarea ng-model="curriculum.outcomesEn" max-rows="10" md-select-on-focus readonly></textarea> </md-input-container> <md-input-container flex> <label>{{\'curriculum.structure\' | translate}}</label> <textarea ng-model="curriculum.structure" max-rows="10" md-select-on-focus readonly></textarea> </md-input-container> <md-input-container flex> <label>{{\'curriculum.admissionRequirementsEt\' | translate}}</label> <textarea ng-model="curriculum.admissionRequirementsEt" max-rows="10" md-select-on-focus readonly></textarea> </md-input-container> <md-input-container flex> <label>{{\'curriculum.admissionRequirementsEn\' | translate}}</label> <textarea ng-model="curriculum.admissionRequirementsEn" max-rows="10" md-select-on-focus readonly></textarea> </md-input-container> <md-input-container flex> <label>{{\'curriculum.graduationRequirementsEt\' | translate}}</label> <textarea ng-model="curriculum.graduationRequirementsEt" max-rows="10" md-select-on-focus readonly></textarea> </md-input-container> <md-input-container flex> <label>{{\'curriculum.graduationRequirementsEn\' | translate}}</label> <textarea ng-model="curriculum.graduationRequirementsEn" max-rows="10" md-select-on-focus readonly></textarea> </md-input-container> <md-input-container flex> <label>{{\'curriculum.basesOfDraft\' | translate}}</label> <textarea ng-model="curriculum.draftText" max-rows="10" md-select-on-focus readonly></textarea> </md-input-container> <md-input-container flex> <label>{{\'curriculum.specialityOpportunities\' | translate}}</label> <textarea ng-model="curriculum.specialization" max-rows="10" md-select-on-focus readonly></textarea> </md-input-container> </div> </fieldset> <div>&nbsp;</div> <fieldset tabindex="5" ng-hide="isDraftEmployerSupportLetter"> <legend md-colors="{color: \'primary-800\'}" class="md-title-small"> {{curriculum.occupation ? \'curriculum.occupationsAcquired\' : \'curriculum.partOccupationsAcquired\' | translate}} </legend> <div layout="column"> <div ng-if="vocationalCurriculumForm.$submitted && occupationRequired() && strictValidation()"> <input style="display:none" type="number" readonly name="occupationsLength" ng-model="validation.occupationsLength" min="1"> <div md-colors="{color: \'warn-A400\'}" ng-messages="vocationalCurriculumForm.occupationsLength.$error"> <div ng-message="min">{{\'main.messages.error.atLeastOneShouldBeAdded\' | translate}}</div> </div> </div> </div> <table md-table class="secondary-table"> <thead md-head> <tr md-row> <th md-column>{{\'curriculum.occupationTable.order\' | translate}}</th> <th md-column ng-show="curriculum.occupation">{{\'curriculum.occupationTable.occupation\' | translate}}</th> <th md-column ng-show="!curriculum.occupation">{{\'curriculum.occupationTable.partOccupation\' | translate}}</th> <th md-column ng-show="curriculum.occupation">{{\'curriculum.occupationTable.partOccupations\' | translate}}</th> <th md-column ng-show="curriculum.occupation">{{\'curriculum.occupationTable.speciality\' | translate}}</th> <th md-column ng-show="curriculum.occupation">{{\'occupation.hasOccupationGrant\' | translate}}</th> <th md-column></th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="item in curriculum.curriculumOccupations | orderBy: \'occupation.nameEt\'" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell>{{$index + 1}}</td> <td md-cell> <a href="" ng-click="curriculum.occupation ? openOccupationDialog(item) : openPartOccupationsDialog(item)">{{currentLanguageNameField(item.occupation)}}</a></td> <td md-cell><span ng-hide="!curriculum.occupation" ng-repeat="partOccupation in item.partOccupations">{{currentLanguageNameField(partOccupation)}}{{$last ? \'\' : \', \'}}</span></td> <td md-cell><span ng-hide="!curriculum.occupation || !item.specialities || item.specialities.length == 0" ng-repeat="speciality in item.specialities track by $index"> {{currentLanguageNameField(speciality)}}{{$last ? \'\' : \', \'}}</span></td> <td md-cell> <span ng-hide="!curriculum.occupation"> <md-checkbox ng-model="item.occupationGrant" disabled></md-checkbox> </span></td> <td md-cell></td> </tr> </tbody> </table> </fieldset> <div>&nbsp;</div> <fieldset tabindex="6"> <legend md-colors="{color: \'primary-800\'}" class="md-title-small" ng-class="{invalid: vocationalCurriculumForm.$submitted && strictValidation() && !modulesValid()}">{{\'curriculum.modulesTought\' | translate}}</legend> <!--MODULES WITHOUT OCCUPATIONS--> <div class="occupation-header align-center"> <span ng-class="{invalid: notAllModulesHaveOccupation()}">{{\'module.modulesWithoutPartOccupationOccuaptionSpecialization\' | translate}}</span> </div> <div layout="column" ng-repeat="type in moduleTypes | filter: filterTypesWithoutEmptyModules | orderBy: \'nameEt\'" class="lowerBorder"> <div layout="row" flex="100" class="occupation-row align-center border-bottom odd"> <div flex="5">&nbsp;</div> <div flex="20">{{currentLanguageNameField(type)}}</div> <div layout="column" flex="75"> <div flex="100" ng-repeat="module in curriculum.modules | filter: filterEmptyModulesByType(type.code) | orderBy: \'nameEt\' track by $index" layout="row" class="align-center"> <a flex="30" ng-click="openAddModuleDialog(module)" href="">{{currentLanguageNameField(module)}}</a> <span flex="10">{{module.credits}}&nbsp; EKAP</span> </div> </div> </div> </div> <!--KUTSETE/OSAKUTSETE MOODULID--> <div ng-repeat="occupation in curriculum.curriculumOccupations | orderBy: \'occupation.nameEt\'" layout="column"> <div class="occupation-header align-center"> <span ng-show="curriculum.occupation" ng-class="{invalid: vocationalCurriculumForm.$submitted && strictValidation() && (!occupationHasPModule(occupation.occupation.code) || !isOccutationsCreditsValid(occupation))}">{{\'stateCurriculum.enter.occupation.occupation\' | translate}} {{$index + 1}}:&nbsp; {{currentLanguageNameField(occupation.occupation)}}</span> <span ng-show="!curriculum.occupation" ng-class="{invalid: vocationalCurriculumForm.$submitted && strictValidation() && (!occupationHasPModule(occupation.occupation.code) || !isOccutationsCreditsValid(occupation))}">{{\'stateCurriculum.enter.occupation.partial\' | translate}} {{$index + 1}}:&nbsp; {{currentLanguageNameField(occupation.occupation)}}</span> </div> <div layout="column" ng-repeat="type in moduleTypes | filter: filterTypesWithoutModules(occupation.occupation.code, curriculum.modules) | orderBy: \'nameEt\'" class="lowerBorder"> <div layout="row" flex="100" class="occupation-row align-center border-bottom odd"> <div flex="5">&nbsp;</div> <div flex="20">{{currentLanguageNameField(type)}}</div> <div layout="column" flex="75"> <div flex="100" ng-repeat="module in curriculum.modules | filter: filterModulesByType(type.code, occupation.occupation.code) | orderBy: \'nameEt\' track by $index" layout="row" class="align-center"> <a flex="30" ng-click="openAddModuleDialog(module)" href="">{{currentLanguageNameField(module)}}</a> <span flex="10">{{module.credits}}&nbsp; EKAP</span> </div> </div> </div> </div> <!--OSAKUTSETE MOODULID--> <div ng-repeat="partOccupation in occupation.partOccupations | orderBy: \'nameEt\'" layout="column"> <div class="occupation-header2 align-center"> <span ng-class="{invalid: vocationalCurriculumForm.$submitted && strictValidation() && !occupationHasPModule(partOccupation.code)}">{{\'stateCurriculum.enter.occupation.partial\' | translate}} {{$index + 1}}: {{currentLanguageNameField(partOccupation)}}</span></div> <div layout="column" ng-repeat="type in moduleTypes | filter: filterTypesWithoutModules(partOccupation.code, curriculum.modules) | orderBy: \'nameEt\'" class="lowerBorder"> <div layout="row" flex="100" class="occupation-row align-center border-bottom odd"> <div flex="5">&nbsp;</div> <div flex="20">{{currentLanguageNameField(type)}}</div> <div layout="column" flex="75"> <div flex="100" ng-repeat="module in curriculum.modules | filter: filterModulesByType(type.code, partOccupation.code) | orderBy: \'nameEt\' track by $index" layout="row" class="align-center"> <a flex="30" ng-click="openAddModuleDialog(module)" href="">{{currentLanguageNameField(module)}}</a> <span flex="10">{{module.credits}}&nbsp; EKAP</span> </div> </div> </div> </div> </div> <!--SPETSKUTSETE MOODULID--> <div ng-repeat="speciality in occupation.specialities | orderBy: \'nameEt\'" layout="column"> <div class="occupation-header2 align-center"><span ng-class="{invalid: vocationalCurriculumForm.$submitted && strictValidation() && (!occupationHasPModule(speciality.code) || !isSpetsOccupationValid(speciality, occupation))}">{{\'stateCurriculum.enter.occupation.specialty\' | translate}} {{$index + 1}}: {{currentLanguageNameField(speciality)}}</span></div> <div layout="column" ng-repeat="type in moduleTypes | filter: filterTypesWithoutModules(speciality.code, curriculum.modules) | orderBy: \'nameEt\'" class="lowerBorder"> <div layout="row" flex="100" class="occupation-row align-center border-bottom odd"> <div flex="5">&nbsp;</div> <div flex="20">{{currentLanguageNameField(type)}}</div> <div layout="column" flex="75"> <div flex="100" ng-repeat="module in curriculum.modules | filter: filterModulesByType(type.code, speciality.code) | orderBy: \'nameEt\' track by $index" layout="row" class="align-center"> <a flex="30" ng-click="openAddModuleDialog(module)" href="">{{currentLanguageNameField(module)}}</a> <span flex="10">{{module.credits}}&nbsp; EKAP</span> </div> </div> </div> </div> </div> </div> </fieldset> <div>&nbsp;</div> <fieldset tabindex="7"> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'curriculum.additionalInfo\' | translate}}</legend> <md-input-container> <label>{{\'curriculum.optionalStudyCredits\' | translate}}</label> <input name="vocationalCredits" type="number" ng-model="curriculum.optionalStudyCredits" aria-label="optional credits" min="0" max="999" pattern="^\\d+(\\.\\d{1})?$" readonly> <div ng-messages="vocationalCurriculumForm.vocationalCredits.$error" ng-show="vocationalCurriculumForm.vocationalCredits.$dirty"> <div ng-message="min"> {{\'main.messages.error.positive\' | translate}} </div> <div ng-message="max"> {{\'curriculum.error.max999\' | translate}} </div> <div ng-message="pattern"> {{\'stateCurriculum.error.decimalPresision\' | translate}} </div> </div> </md-input-container> <div layout="column"> <md-input-container flex> <label>{{\'curriculum.practiceDescription\' | translate}}</label> <textarea ng-model="curriculum.practiceDescription" max-rows="2" md-select-on-focus readonly></textarea> </md-input-container> <md-input-container flex> <label>{{\'curriculum.finalExamShortDescription\' | translate}}</label> <textarea ng-model="curriculum.finalExamDescription" max-rows="2" md-select-on-focus readonly></textarea> </md-input-container> <md-input-container flex> <label>{{\'curriculum.optionalStudyOpportunities\' | translate}}</label> <textarea ng-model="curriculum.optionalStudyDescription" max-rows="2" md-select-on-focus readonly></textarea> </md-input-container> <md-input-container flex> <label>{{\'curriculum.contactPerson\' | translate}}</label> <input ng-model="curriculum.contactPerson" type="text" readonly> </md-input-container> <md-input-container flex> <label>{{\'main.notes\' | translate}}</label> <textarea ng-model="curriculum.description" max-rows="2" md-select-on-focus readonly></textarea> </md-input-container> <md-input-container flex ng-if="curriculum.status === STATUS.VERIFIED"> <label>{{\'public.url\' | translate}}</label> <input ng-model="publicUrl" type="text" readonly> </md-input-container> </div> </fieldset> <div ng-show="curriculum.joint">&nbsp;</div> <fieldset tabindex="8" ng-show="curriculum.joint"> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'curriculum.jointInfo\' | translate}}</legend> <div layout="column"> <div layout="row" layout-align="start start" ng-show="curriculum.joint"> <label class="md-required common-label" flex="30">{{\'curriculum.jointSchool\' | translate}}</label> </div> <div>&nbsp;</div> <div layout="column" flex ng-show="curriculum.joint" class="common-label"> <div layout="row" ng-repeat="item in curriculum.jointPartners | filter: filterEmptyJointPartners | orderBy: [\'ehisSchool\', \'nameEt\']" class="align-center"> <div flex="5">&nbsp;</div> <div ng-if="item.abroad">{{currentLanguageNameField(item)}}</div> <div ng-if="!item.abroad"> <hois-classifier-value ng-model="item.ehisSchool" main-classifier-code="EHIS_KOOL"></hois-classifier-value></div> <div flex="5">&nbsp;</div> <div flex="5"></div> </div> </div> <div layout="row" layout-sm="column" layout-xs="column" ng-show="curriculum.joint"> <md-input-container flex="30" ng-if="curriculum.joint"> <label>{{\'curriculum.jointMentor\' | translate}}</label> <hois-classifier-select ng-model="curriculum.jointMentor" main-classifier-code="EHIS_KOOL" model-value-attr="code" disabled></hois-classifier-select> </md-input-container> <md-input-container flex="66" flex-offset="4"> <label>{{\'curriculum.jointResponsible\' | translate}}</label> <input ng-model="curriculum.supervisor" type="text" readonly> </md-input-container> </div> <md-input-container flex="100"> <label>{{\'curriculum.jointAgreementInfoEt\' | translate}}</label> <textarea ng-model="curriculum.contractEt" max-rows="10" md-select-on-focus readonly></textarea> </md-input-container> <md-input-container flex="100"> <label>{{\'curriculum.jointAgreementInfoEn\' | translate}}</label> <textarea ng-model="curriculum.contractEn" max-rows="10" md-select-on-focus readonly></textarea> </md-input-container> </div> </fieldset> <div>&nbsp;</div> <fieldset tabindex="9"> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'curriculum.approvalInfo\' | translate}}</legend> <div layout="row" flex="100"> <md-input-container flex="30" flex-sm="100" flex-xs="100"> <label>{{\'curriculum.approvalDocumentNr\' | translate}}</label> <input ng-model="curriculum.approvalDokNr" type="text" readonly> </md-input-container> <md-input-container flex="20" flex-sm="100" flex-xs="100" flex-offset-xs="0" flex-offset-sm="0" flex-offset="4"> <label>{{\'curriculum.approvalDate\' | translate}}</label> <md-datepicker ng-model="curriculum.approval" md-open-on-focus disabled></md-datepicker> </md-input-container> </div> </fieldset> <div>&nbsp;</div> <fieldset tabindex="10"> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'curriculum.statuses\' | translate}}</legend> <div layout="row" flex="100"> <md-input-container flex="30" flex-sm="100" flex-xs="100"> <label>{{\'main.validFrom\' | translate}}</label> <md-datepicker ng-model="curriculum.validFrom" md-open-on-focus disabled></md-datepicker> </md-input-container> <md-input-container flex="20" flex-sm="100" flex-xs="100" flex-offset-xs="0" flex-offset-sm="0" flex-offset="4"> <label>{{\'main.validTo\' | translate}}</label> <md-datepicker ng-model="curriculum.validThru" md-min-date="curriculum.validFrom" md-open-on-focus disabled></md-datepicker> </md-input-container> </div> <div layout="row" flex="100" class="top-margin form-readonly"> <md-input-container flex="30" flex-sm="100" flex-xs="100" class="readonly"> <label class="label">{{\'main.status\' | translate}}</label> <hois-classifier-value ng-model="curriculum.status" main-classifier-code="OPPEKAVA_STAATUS"></hois-classifier-value> </md-input-container> <md-input-container flex="20" flex-sm="100" flex-xs="100" flex-offset-xs="0" flex-offset-sm="0" flex-offset="4"> <label>{{\'curriculum.statusInEhis\' | translate}}</label> <hois-classifier-value ng-model="curriculum.ehisStatus" main-classifier-code="OPPEKAVA_EHIS_STAATUS"></hois-classifier-value> </md-input-container> <md-input-container flex="40" flex-sm="100" flex-xs="100" flex-offset-xs="0" flex-offset-sm="0" flex-offset="5"> <label>{{\'curriculum.statusChangedDateInEhis\' | translate}}</label> <hois-value value="curriculum.ehisChanged | hoisDate"></hois-value> </md-input-container> </div> <div layout="row" flex="100" class="md-body-1 hois-value"> <a ng-show="!!curriculum.stateCurriculum" ng-href="/#/stateCurriculum/{{curriculum.stateCurriculum.id}}/view" class="md-primary" translate="curriculum.referenceToStateCurriculum" translate-values="{{curriculum.stateCurriculum}}"></a> </div> </fieldset> <div>&nbsp;</div> <fieldset tabindex="11"> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'main.relatedFiles\' | translate}}</legend> <table md-table class="secondary-table"> <thead md-head> <tr md-row> <th md-column><span>{{\'file.nameAndFile\' | translate}}</span></th> <th md-column><span>{{\'file.creationLocation\' | translate}}</span></th> <th md-column>{{\'file.type\' | translate}}</th> <th md-column>{{\'curriculum.sendToEhis\' | translate}}</th> <th md-column></th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="file in curriculum.files | orderBy: \'oisFile.fname\'" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell> {{file.oisFile.fname}} <a ng-href="{{getUrl(file, \'curriculum\')}}" download><md-icon md-font-set="material-icons">file_download</md-icon></a> </td> <td md-cell> {{file.ehis ? \'EHIS\' : \'ÕIS\'}} </td> <td md-cell> <hois-classifier-value ng-model="file.ehisFile" main-classifier-code="EHIS_FAIL"></hois-classifier-value> </td> <td md-cell> <md-checkbox ng-model="file.sendEhis" aria-label="send to ehis" disabled></md-checkbox> </td> <td md-cell> </td> </tr> </tbody> </table> </fieldset> <div>&nbsp;</div> <fieldset tabindex="12"> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'curriculum.moduleImplementationPlans\' | translate}}</legend> <md-table-container> <table md-table class="secondary-table"> <thead md-head> <tr md-row> <th md-column>{{\'module.implementationPlan.code\' | translate}}</th> <th md-column>{{\'main.status\' | translate}}</th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="moduleImplementationPlan in curriculum.versions | orderBy: \'code\'"> <td md-cell> <a href="" class="md-primary" ng-click="goToImplementationPlanForm(moduleImplementationPlan)">{{moduleImplementationPlan.code}}</a> </td> <td md-cell><hois-classifier-value ng-model="moduleImplementationPlan.status" main-classifier-code="OPPEKAVA_VERSIOON_STAATUS"></hois-classifier-value></td> </tr> </tbody> </table> </md-table-container> </fieldset> <hois-created-modified object="curriculum"></hois-created-modified> <div> </div> </form> <div layout="row"> <div ng-show="curriculum.status === STATUS.ENTERING"> <md-button class="md-raised md-primary" ng-click="goToEditForm()" ng-if="curriculum.canChange">{{\'main.button.change\' | translate}}</md-button> </div> <div ng-show="curriculum.status === STATUS.PROCEEDING && !formState.sentToEhis"> <md-button class="md-raised md-primary" ng-click="goToEditForm()" ng-if="curriculum.canChange">{{\'main.button.change\' | translate}}</md-button> <md-button class="md-raised md-default" ng-click="sendToEhis()" ng-if="curriculum.canConfirm">{{\'main.button.sendToEhis\' | translate}}</md-button> <md-button class="md-raised" ng-click="setStatusClosed()" ng-if="curriculum.canClose">{{\'main.button.status.close\' | translate}}</md-button> </div> <div ng-show="curriculum.status === STATUS.PROCEEDING && formState.sentToEhis"> <md-button class="md-raised md-default" ng-click="updateFromEhis()" ng-if="curriculum.canConfirm">{{\'main.button.updateFromEhis\' | translate}}</md-button> </div> <div ng-show="curriculum.status === STATUS.VERIFIED"> <md-button class="md-raised md-primary" ng-click="goToEditForm()" ng-if="curriculum.canChange">{{\'main.button.change\' | translate}}</md-button> <md-button class="md-raised" ng-click="setStatusClosed()" ng-if="curriculum.canClose">{{\'main.button.status.close\' | translate}}</md-button> </div> <md-button class="md-raised md-default" ng-click="back(\'#/curriculum\')">{{\'main.button.back\' | translate}}</md-button> </div> </div> <style>.lowerBorder {\r\n     border-bottom: solid 1px #E0E0E0;\r\n   }</style>'),a.put("apelApplication/templates/apel.application.formal.learning.higher.list.html",'<md-table-container ng-if="application.records.length > 0"> <table md-table md-progress="tabledata.$promise" class="secondary-table"> <thead md-head md-on-reorder="loadData"> <tr md-row> <th md-column ng-if="!(application.status === \'VOTA_STAATUS_K\')" colspan="1">{{\'apel.formalLearnings.transfer\' | translate}}</th> <th md-column>{{\'apel.formalLearnings.school\' | translate}}</th> <th md-column>{{\'apel.formalLearnings.subject\' | translate}} ({{\'apel.formalLearnings.code\' | translate}})</th> <th md-column>{{\'apel.formalLearnings.creditsEAP\' | translate}}</th> <th md-column>{{\'apel.formalLearnings.assessment\' | translate}}</th> <th md-column>{{\'apel.formalLearnings.result\' | translate}}</th> <th md-column>{{\'apel.formalLearnings.resultDate\' | translate}}</th> <th md-column>{{\'apel.formalLearnings.teacher\' | translate}}</th> <th md-column>{{\'apel.formalLearnings.module\' | translate}} ({{\'apel.formalLearnings.required\' | translate}})</th> <th md-column>{{\'apel.formalLearnings.substitutableSubjects\' | translate}}</th> <th md-column ng-if="editing"></th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="row in application.records | filter:{isFormalLearning: true}" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell ng-if="!(application.status === \'VOTA_STAATUS_K\')"> <md-checkbox ng-if="(row.data[0].transfer === false || row.data[0].transfer === true) && canChangeTransferStatus" ng-model="row.data[0].transfer" ng-click="changeFormalTransferStatus(row.data[0])" aria-label="{{\'apel.formalLearnings.transfer\' | translate}}"></md-checkbox> <md-checkbox ng-if="(row.data[0].transfer === false || row.data[0].transfer === true) && !canChangeTransferStatus" ng-model="row.data[0].transfer" ng-click="changeFormalTransferStatus(row.data[0])" aria-label="{{\'apel.formalLearnings.transfer\' | translate}}" ng-disabled="true"></md-checkbox> </td> <td md-cell>{{currentLanguageNameField(row.data[0].school)}}</td> <td md-cell>{{currentLanguageNameField(row.data[0].subject)}} ({{row.data[0].code}})</td> <td md-cell>{{row.data[0].credits}}</td> <td md-cell>{{row.data[0].assessment.value}}</td> <td md-cell>{{row.data[0].grade.value}}</td> <td md-cell>{{row.data[0].gradeDate | hoisDate}}</td> <td md-cell>{{row.data[0].teachers}}</td> <td md-cell> <span ng-if="row.data[0].isOptional === false">{{currentLanguageNameField(row.data[0].module)}} ({{\'main.yes\' | translate}})</span> <span ng-if="row.data[0].isOptional === true">{{currentLanguageNameField(row.data[0].module)}} ({{\'main.no\' | translate}})</span> </td> <td md-cell> <p ng-repeat="replacedSubjectOrModule in row.data[0].formalReplacedSubjectsOrModules">{{currentLanguageNameField(replacedSubjectOrModule.subject)}} ({{replacedSubjectOrModule.subject.code}})</p> </td> <td md-cell ng-if="editing"> <md-button md-no-ink class="md-primary change-button" ng-click="editFormalLearning(row.data[0].recordId)">{{\'main.button.change\' | translate}}</md-button> </td> </tr> </tbody> </table> </md-table-container>'),a.put("apelApplication/templates/apel.application.formal.learning.vocational.list.html",'<md-table-container> <table md-table md-progress="tabledata.$promise" class="secondary-table"> <thead md-head md-on-reorder="loadData"> <tr md-row style="background: #E0E0E0 !important"> <th md-column ng-if="editing" colspan="1"> <a ng-click="editFormalLearning(record.id)">{{\'main.button.change\' | translate}}</a> </th> <th md-column ng-if="editing && application.status === \'VOTA_STAATUS_K\'" colspan="5" style="text-align: center">{{\'apel.formalLearnings.transferableModules\' | translate}}</th> <th md-column ng-if="!editing && application.status === \'VOTA_STAATUS_K\'" colspan="6" style="text-align: center">{{\'apel.formalLearnings.transferableModules\' | translate}}</th> <th md-column ng-if="!(application.status === \'VOTA_STAATUS_K\') && editing" colspan="6" style="text-align: center">{{\'apel.formalLearnings.transferableModules\' | translate}}</th> <th md-column ng-if="!(application.status === \'VOTA_STAATUS_K\') && !editing" colspan="7" style="text-align: center">{{\'apel.formalLearnings.transferableModules\' | translate}}</th> <th md-column style="border-left: 1px rgba(0, 0, 0, 0.12) solid"></th> <th md-column colspan="2" style="text-align: center">{{\'apel.formalLearnings.substitutableModules\' | translate}}</th> </tr> <tr md-row> <th md-column ng-if="!(application.status === \'VOTA_STAATUS_K\')">{{\'apel.formalLearnings.transfer\' | translate}}</th> <th md-column>{{\'apel.formalLearnings.school\' | translate}}</th> <th md-column>{{\'apel.formalLearnings.module\' | translate}}</th> <th md-column>{{\'apel.formalLearnings.creditsEKAP\' | translate}}</th> <th md-column>{{\'apel.formalLearnings.result\' | translate}}</th> <th md-column>{{\'apel.formalLearnings.resultDate\' | translate}}</th> <th md-column>{{\'apel.formalLearnings.teacher\' | translate}}</th> <th md-column style="border-left: 1px rgba(0, 0, 0, 0.12) solid"></th> <th md-column>{{\'apel.formalLearnings.module\' | translate}}</th> <th md-column>{{\'apel.formalLearnings.creditsEKAP\' | translate}}</th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="row in record.data | orderBy:\'moduleId\'" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell ng-if="!(application.status === \'VOTA_STAATUS_K\')"> <md-checkbox ng-if="(row.transfer === false || row.transfer === true) && canChangeTransferStatus" ng-model="row.transfer" ng-click="changeFormalTransferStatus(row)" aria-label="{{\'apel.formalLearnings.transfer\' | translate}}"></md-checkbox> <md-checkbox ng-if="(row.transfer === false || row.transfer === true) && !canChangeTransferStatus" ng-model="row.transfer" ng-click="changeFormalTransferStatus(row)" aria-label="{{\'apel.formalLearnings.transfer\' | translate}}" ng-disabled="true"></md-checkbox> </td> <td md-cell>{{currentLanguageNameField(row.school)}}</td> <td md-cell>{{currentLanguageNameField(row.module)}}</td> <td md-cell>{{row.credits}}</td> <td md-cell>{{row.grade.value}}</td> <td md-cell>{{row.gradeDate | hoisDate}}</td> <td md-cell>{{row.teachers}}</td> <td md-cell style="border-left: 1px rgba(0, 0, 0, 0.12) solid"></td> <td md-cell>{{currentLanguageNameField(row.replacedModule)}}</td> <td md-cell>{{row.replacedCredits}}</td> </tr> </tbody> </table> </md-table-container>'),
a.put("apelApplication/templates/apel.application.informal.learning.higher.list.html",'<md-table-container flex="100"> <table md-table md-progress="tabledata.$promise" class="secondary-table"> <thead md-head md-on-reorder="loadData"> <tr md-row style="background: #E0E0E0 !important"> <th md-column ng-if="editing" colspan="1"> <a ng-click="editInformalLearning(record.id)">{{\'main.button.change\' | translate}}</a> </th> <th md-column ng-if="editing && application.status === \'VOTA_STAATUS_K\'" colspan="4" style="text-align: center">{{\'apel.informalLearnings.schoolResults\' | translate}}</th> <th md-column ng-if="!editing && application.status === \'VOTA_STAATUS_K\'" colspan="5" style="text-align: center">{{\'apel.informalLearnings.schoolResults\' | translate}}</th> <th md-column ng-if="!(application.status === \'VOTA_STAATUS_K\') && editing" colspan="5" style="text-align: center">{{\'apel.informalLearnings.schoolResults\' | translate}}</th> <th md-column ng-if="!(application.status === \'VOTA_STAATUS_K\') && !editing" colspan="6" style="text-align: center">{{\'apel.informalLearnings.schoolResults\' | translate}}</th> <th md-column style="border-left: 1px rgba(0, 0, 0, 0.12) solid"></th> <th md-column colspan="5" style="text-align: center">{{\'apel.informalLearnings.otherInformalLearnings\' | translate}}</th> </tr> <tr md-row> <th md-column ng-if="!(application.status === \'VOTA_STAATUS_K\')" colspan="1">{{\'apel.informalLearnings.transfer\' | translate}}</th> <th md-column>{{\'apel.informalLearnings.subject\' | translate}} ({{\'apel.informalLearnings.code\' | translate}})</th> <th md-column>{{\'apel.informalLearnings.creditsEAP\' | translate}}</th> <th md-column>{{\'apel.informalLearnings.result\' | translate}}</th> <th md-column>{{\'apel.informalLearnings.module\' | translate}} ({{\'apel.informalLearnings.required\' | translate}})</th> <th md-column>{{\'apel.informalLearnings.acquiredSkills\' | translate}}</th> <th md-column style="border-left: 1px rgba(0, 0, 0, 0.12) solid"></th> <th md-column>{{\'apel.informalLearnings.name\' | translate}}</th> <th md-column>{{\'apel.informalLearnings.placeTime\' | translate}}</th> <th md-column>{{\'apel.informalLearnings.hours\' | translate}}</th> <th md-column>{{\'apel.informalLearnings.documents\' | translate}}</th> <th md-column>{{\'apel.informalLearnings.type\' | translate}}</th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="row in record.data | orderBy:\'subjectId\'" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell ng-if="!(application.status === \'VOTA_STAATUS_K\')"> <md-checkbox ng-if="(row.transfer === false || row.transfer === true) && canChangeTransferStatus" ng-model="row.transfer" ng-click="changeInformalTransferStatus(row)" aria-label="{{\'apel.informalLearnings.transfer\' | translate}}"></md-checkbox> <md-checkbox ng-if="(row.transfer === false || row.transfer === true) && !canChangeTransferStatus" ng-model="row.transfer" ng-click="changeInformalTransferStatus(row)" aria-label="{{\'apel.informalLearnings.transfer\' | translate}}" ng-disabled="true"></md-checkbox> </td> <td md-cell> <span ng-if="row.subject">{{currentLanguageNameField(row.subject)}} ({{row.code}})</span> </td> <td md-cell>{{row.credits}}</td> <td md-cell>{{row.grade.value}}</td> <td md-cell> <span ng-if="row.isOptional === true">{{currentLanguageNameField(row.module)}} ({{\'main.yes\' | translate}})</span> <span ng-if="row.isOptional === false">{{currentLanguageNameField(row.module)}} ({{\'main.no\' | translate}})</span> </td> <td md-cell>{{row.skills}}</td> <td md-cell style="border-left: 1px rgba(0, 0, 0, 0.12) solid"></td> <td md-cell>{{row.nameEt}}</td> <td md-cell>{{row.placeTime}}</td> <td md-cell>{{row.hours}}</td> <td md-cell>{{row.documents}}</td> <td md-cell> <hois-classifier-value ng-model="row.type" main-classifier-code="VOTA_INFORMAAL_LIIK"></hois-classifier-value> </td> </tr> </tbody> </table> </md-table-container>'),a.put("apelApplication/templates/apel.application.informal.learning.vocational.list.html",'<md-table-container flex="100"> <table md-table md-progress="tabledata.$promise" class="secondary-table"> <thead md-head md-on-reorder="loadData"> <tr md-row style="background: #E0E0E0 !important"> <th md-column ng-if="editing" colspan="1"> <a ng-click="editInformalLearning(record.id)">{{\'main.button.change\' | translate}}</a> </th> <th md-column ng-if="editing && application.status === \'VOTA_STAATUS_K\'" colspan="5" style="text-align: center">{{\'apel.informalLearnings.transferableModules\' | translate}}</th> <th md-column ng-if="!editing && application.status === \'VOTA_STAATUS_K\'" colspan="6" style="text-align: center">{{\'apel.informalLearnings.transferableModules\' | translate}}</th> <th md-column ng-if="!(application.status === \'VOTA_STAATUS_K\') && editing" colspan="6" style="text-align: center">{{\'apel.informalLearnings.transferableModules\' | translate}}</th> <th md-column ng-if="!(application.status === \'VOTA_STAATUS_K\') && !editing" colspan="7" style="text-align: center">{{\'apel.informalLearnings.transferableModules\' | translate}}</th> <th md-column style="border-left: 1px rgba(0, 0, 0, 0.12) solid"></th> <th md-column colspan="5" style="text-align: center">{{\'apel.informalLearnings.otherInformalLearnings\' | translate}}</th> </tr> <tr md-row> <th md-column ng-if="!(application.status === \'VOTA_STAATUS_K\')">{{\'apel.informalLearnings.transfer\' | translate}}</th> <th md-column>{{\'apel.informalLearnings.module\' | translate}}/{{\'apel.informalLearnings.theme\' | translate}}</th> <th md-column>{{\'apel.informalLearnings.isModule\' | translate}}</th> <th md-column>{{\'apel.informalLearnings.hours\' | translate}}/{{\'apel.informalLearnings.ekap\' | translate}}</th> <th md-column>{{\'apel.informalLearnings.result\' | translate}}</th> <th md-column>{{\'apel.informalLearnings.outcomes\' | translate}}</th> <th md-column>{{\'apel.informalLearnings.acquiredSkills\' | translate}}</th> <th md-column style="border-left: 1px rgba(0, 0, 0, 0.12) solid"></th> <th md-column>{{\'apel.informalLearnings.name\' | translate}}</th> <th md-column>{{\'apel.informalLearnings.placeTime\' | translate}}</th> <th md-column>{{\'apel.informalLearnings.hours\' | translate}}</th> <th md-column>{{\'apel.informalLearnings.documents\' | translate}}</th> <th md-column>{{\'apel.informalLearnings.type\' | translate}}</th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="row in record.data | orderBy:\'moduleId\'" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell ng-if="!(application.status === \'VOTA_STAATUS_K\')"> <md-checkbox ng-if="(row.transfer === false || row.transfer === true) && canChangeTransferStatus" ng-model="row.transfer" ng-click="changeInformalTransferStatus(row)" aria-label="{{\'apel.informalLearnings.transfer\' | translate}}"></md-checkbox> <md-checkbox ng-if="(row.transfer === false || row.transfer === true) && !canChangeTransferStatus" ng-model="row.transfer" ng-click="changeInformalTransferStatus(row)" aria-label="{{\'apel.informalLearnings.transfer\' | translate}}" ng-disabled="true"></md-checkbox> </td> <td md-cell> <span ng-if="row.module && row.isModule">{{currentLanguageNameField(row.module)}}</span> <span ng-if="row.module && !row.isModule">{{currentLanguageNameField(row.module)}}/{{currentLanguageNameField(row.theme)}}</span> </td> <td md-cell> <md-checkbox ng-if="row.isModule === true || row.isModule === false" ng-model="row.isModule" aria-label="{{\'apel.informalLearnings.isModule\' | translate}}" ng-disabled="true"></md-checkbox> </td> <td ng-if="row.ekap" md-cell>{{row.schoolResultHours}}/{{row.ekap}}</td> <td ng-if="!row.ekap" md-cell>{{row.schoolResultHours}}</td> <td md-cell>{{row.grade.value}}</td> <td md-cell> <ul ng-repeat="outcome in row.outcomes | orderBy: [\'curriculumModuleOutcomes.orderNr\', \'curriculumModuleOutcomes.\' + currentLanguage() === \'en\' ? outcomeEn : outcomeEt]" style="padding-left: 15px"> <li>{{currentLanguage() === \'en\' ? outcome.curriculumModuleOutcomes.outcomeEn : outcome.curriculumModuleOutcomes.outcomeEt}}</li> </ul> </td> <td md-cell>{{row.skills}}</td> <td md-cell style="border-left: 1px rgba(0, 0, 0, 0.12) solid"></td> <td md-cell>{{row.nameEt}}</td> <td md-cell>{{row.placeTime}}</td> <td md-cell>{{row.hours}}</td> <td md-cell>{{row.documents}}</td> <td md-cell> <hois-classifier-value ng-model="row.type" main-classifier-code="VOTA_INFORMAAL_LIIK"></hois-classifier-value> </td> </tr> </tbody> </table> </md-table-container>'),a.put("apelApplication/templates/apel.application.information.html",'<div class="form-readonly"> <div flex> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="45" flex-sm="100" flex-xs="100"> <label>{{\'apel.student\' | translate}}</label> <hois-value value="application.person.firstname + \' \' + application.person.lastname"></hois-value> </md-input-container> <md-input-container flex="45" flex-sm="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label ng-if="application.isVocational">{{\'apel.curriculumVersionVocational\' | translate}}</label> <label ng-if="!application.isVocational">{{\'apel.curriculumVersionHigher\' | translate}}</label> <hois-value value="currentLanguageNameField(application.curriculumVersion)"></hois-value> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="20" flex-sm="100"> <label>{{\'apel.insertedDate\' | translate}}</label> <hois-value value="application.inserted | hoisDate"></hois-value> </md-input-container> <md-input-container flex="20" flex-sm="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'apel.inserter\' | translate}}</label> <hois-value value="application.insertedBy"></hois-value> </md-input-container> <md-input-container flex="20" flex-sm="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'apel.confirmedDate\' | translate}}</label> <hois-value value="application.confirmed | hoisDate"></hois-value> </md-input-container> <md-input-container flex="20" flex-sm="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'apel.confirmer\' | translate}}</label> <hois-value value="application.confirmedBy"></hois-value> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="45" flex-sm="100" flex-xs="100"> <label>{{\'apel.status\' | translate}}</label> <hois-classifier-value ng-model="application.status" main-classifier-code="VOTA_STAATUS"></hois-classifier-value> </md-input-container> </div> </div> </div>'),a.put("apelApplication/templates/comment.edit.dialog.html",'<md-dialog aria-label="comment edit dialog" flex="50" flex-sm="50" flex-xs="100"> <form name="dialogForm" novalidate ng-cloak> <md-toolbar> <div class="md-toolbar-tools"> <h2>{{"apel.addInfo.add" | translate}}</h2> <span flex></span> <md-button class="md-icon-button" ng-click="cancel()"> <md-icon md-font-set="material-icons">close</md-icon> </md-button> </div> </md-toolbar> <md-dialog-content> <span flex></span> <div class="ois-form-layout" layout="column" layout-margin ng-cloak> <div layout="column" flex> <md-input-container flex> <label>{{\'apel.addInfo.label\' | translate}}</label> <textarea ng-model="comment.addInfo" md-maxlength="4000" max-rows="5" required md-autofocus></textarea> </md-input-container> </div> </div> </md-dialog-content> <span flex></span> <md-dialog-actions layout="row" layout-align="start center"> <md-button class="md-raised" ng-click="submit()">{{"main.button.save" | translate}}</md-button> <md-button class="md-raised" ng-click="cancel()">{{"main.button.close" | translate}}</md-button> </md-dialog-actions> </form> </md-dialog>'),a.put("apelApplication/templates/formal.learning.higher.edit.dialog.html",'<md-dialog aria-label="formal learning edit dialog" flex="60" flex-sm="80" flex-xs="100"> <form name="dialogForm" ng-submit="dialogForm.$valid && submitHigherFormalLearning()" novalidate ng-cloak> <md-toolbar> <div class="md-toolbar-tools"> <h2>{{"apel.formalLearnings.add" | translate}}</h2> <span flex></span> <md-button class="md-icon-button" ng-click="cancel()"> <md-icon md-font-set="material-icons">close</md-icon> </md-button> </div> </md-toolbar> <md-dialog-content> <div layout-padding> <fieldset> <legend class="md-title-small">{{\'apel.formalLearnings.transferableSubjectEt\' | translate}}</legend> <div layout="row" layout-xs="column" flex> <div flex="100"> <div class="form-readonly" layout="row" layout-sm="column" layout-xs="column"> <md-input-container> <md-checkbox ng-model="isMySchool" aria-label="mySchool"> {{\'apel.formalLearnings.mySchool\' | translate}} </md-checkbox> </md-input-container> </div> <div ng-if="isMySchool" layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="45" flex-sm="100" flex-xs="100"> <label>{{\'apel.formalLearnings.schoolNameEt\' | translate}}</label> <input type="text" ng-model="record.school.nameEt" disabled required> </md-input-container> <md-input-container flex="45" flex-sm="100" flex-xs="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'apel.formalLearnings.schoolNameEn\' | translate}}</label> <input type="text" ng-model="record.school.nameEn" disabled required> </md-input-container> </div> <div ng-if="!isMySchool && !isNewSchool" layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="45" flex-sm="100" flex-xs="100"> <label>{{\'apel.formalLearnings.schoolNameEt\' | translate}}</label> <md-select ng-model="record.newTransferableSubjectOrModule.apelSchool" aria-label="apelSchool" ng-change="apelSchoolChanged(record.newTransferableSubjectOrModule.apelSchool)" ng-model-options="{trackBy: \'$value.id\'}" required> <md-option ng-repeat="val in apelSchools" ng-value="val">{{currentLanguageNameField(val)}}</md-option> </md-select> </md-input-container> <md-input-container flex="45" flex-sm="100" flex-xs="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'apel.formalLearnings.schoolCountry\' | translate}}</label> <input type="text" value="{{currentLanguageNameField(record.newTransferableSubjectOrModule.country)}}" disabled required> </md-input-container> </div> <div ng-if="!isMySchool"> <md-input-container ng-if="!isNewSchool"> <md-button ng-click="addNewSchool()" class="md-raised">{{\'apel.formalLearnings.addNewSchool\' | translate}}</md-button> </md-input-container> <fieldset ng-if="isNewSchool"> <legend class="md-title-small">{{\'apel.formalLearnings.newSchool\' | translate}}</legend> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="45" flex-sm="100" flex-xs="100"> <label>{{\'apel.formalLearnings.schoolCountry\' | translate}}</label> <hois-classifier-select ng-model="record.newTransferableSubjectOrModule.newApelSchool.country" aria-label="country" model-value-attr="code" main-classifier-code="RIIK" ng-change="newSchoolCountryChanged(record.newTransferableSubjectOrModule.newApelSchool.country)" required></hois-classifier-select> </md-input-container> <md-input-container ng-if="newSchoolEst" flex="45" flex-sm="100" flex-xs="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'apel.formalLearnings.schoolEHIS\' | translate}}</label> <hois-classifier-select ng-model="record.newTransferableSubjectOrModule.newApelSchool.ehisSchool" aria-label="EHIS" model-value-attr="code" main-classifier-code="EHIS_KOOL" ng-change="ehisSchoolChanged(record.newTransferableSubjectOrModule.newApelSchool.ehisSchool)" required></hois-classifier-select> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container ng-if="record.newTransferableSubjectOrModule.newApelSchool.country" flex="45" flex-sm="100" flex-xs="100"> <label>{{\'apel.formalLearnings.schoolNameEt\' | translate}}</label> <input type="text" ng-model="record.newTransferableSubjectOrModule.newApelSchool.nameEt" ng-disabled="isMySchool" md-maxlength="100" required> </md-input-container> <md-input-container ng-if="record.newTransferableSubjectOrModule.newApelSchool.country" flex="45" flex-sm="100" flex-xs="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'apel.formalLearnings.schoolNameEn\' | translate}}</label> <input type="text" ng-model="record.newTransferableSubjectOrModule.newApelSchool.nameEn" ng-disabled="isMySchool" md-maxlength="100" required> </md-input-container> </div> </fieldset> </div> <div ng-if="isMySchool" layout="row" layout-sm="column" layout-xs="column"> <md-input-container> <md-radio-group layout-gt-sm="row" ng-model="record.newTransferableSubjectOrModule.type" ng-change="typeChanged(record.newTransferableSubjectOrModule.type)" required> <md-radio-button value="VOTA_AINE_LIIK_V" aria-label="passedSubject"> {{\'apel.formalLearnings.passedSubject\' | translate}} </md-radio-button> <md-radio-button value="VOTA_AINE_LIIK_O" aria-label="curriculumSubject"> {{\'apel.formalLearnings.curriculumSubject\' | translate}} </md-radio-button> <md-radio-button value="VOTA_AINE_LIIK_M" aria-label="otherSubject"> {{\'apel.formalLearnings.otherSubject\' | translate}} </md-radio-button> </md-radio-group> </md-input-container> </div> <div ng-if="isMySchool" layout="row" layout-sm="column" layout-xs="column"> <md-input-container ng-if="record.newTransferableSubjectOrModule.type !== \'VOTA_AINE_LIIK_M\'" flex="45" flex-sm="100" flex-xs="100"> <label>{{\'apel.formalLearnings.transferableSubjectEt\' | translate}}</label> <md-select ng-model="record.subject" aria-label="subject" ng-change="subjectChanged(record.subject)" ng-model-options="{trackBy: \'$value.id\'}" required> <md-option ng-repeat="val in transferableSubjects" ng-value="val">{{currentLanguageNameField(val)}}</md-option> </md-select> </md-input-container> <hois-autocomplete ng-if="record.newTransferableSubjectOrModule.type === \'VOTA_AINE_LIIK_M\'" flex="45" flex-sm="100" flex-xs="100" ng-model="record.subject" method="subjects" name="subject" label="apel.formalLearnings.transferableSubjectEt" additional-query-params="{student: student.id, curriculumSubjects: false, curriculumVersion: curriculumVersionId, withCredits: false}" md-selected-item-change="subjectChanged(record.subject)" ng-model-options="{ debounce: 500 }" required> </hois-autocomplete> <md-input-container flex="45" flex-sm="100" flex-xs="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'apel.formalLearnings.transferableSubjectEn\' | translate}}</label> <input type="text" value="{{record.newTransferableSubjectOrModule.subject.nameEn}}" disabled required> </md-input-container> </div> <div ng-if="!isMySchool" layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="45" flex-sm="100" flex-xs="100"> <label>{{\'apel.formalLearnings.transferableSubjectEt\' | translate}}</label> <input type="text" ng-model="record.newTransferableSubjectOrModule.nameEt" md-maxlength="255" required> </md-input-container> <md-input-container flex="45" flex-sm="100" flex-xs="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'apel.formalLearnings.transferableSubjectEn\' | translate}}</label> <input type="text" ng-model="record.newTransferableSubjectOrModule.nameEn" md-maxlength="255" required> </md-input-container> </div> <div ng-if="isMySchool" layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="45" flex-sm="100" flex-xs="100"> <label>{{\'apel.formalLearnings.subjectCode\' | translate}}</label> <input type="text" value="{{record.newTransferableSubjectOrModule.subjectCode}}" disabled> </md-input-container> <md-input-container flex="45" flex-sm="100" flex-xs="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'apel.formalLearnings.subjectCredits\' | translate}} ({{\'apel.formalLearnings.EAP\' | translate}})</label> <input type="text" value="{{record.newTransferableSubjectOrModule.credits}}" disabled required> </md-input-container> </div> <div ng-if="!isMySchool" layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="45" flex-sm="100" flex-xs="100"> <label>{{\'apel.formalLearnings.subjectCode\' | translate}}</label> <input type="text" ng-model="record.newTransferableSubjectOrModule.subjectCode" md-maxlength="20"> </md-input-container> <md-input-container flex="45" flex-sm="100" flex-xs="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'apel.formalLearnings.subjectCredits\' | translate}} ({{\'apel.formalLearnings.EAP\' | translate}})</label> <input type="number" ng-model="record.newTransferableSubjectOrModule.credits" ng-min="0" ng-max="999.9" required> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container ng-if="isMySchool" flex="45" flex-sm="100" flex-xs="100"> <label>{{\'apel.formalLearnings.assessmentType\' | translate}}</label> <input ng-if="isMySchool" value="{{currentLanguageNameField(record.assessment)}}" disabled> </md-input-container> <md-input-container ng-if="!isMySchool" flex="45" flex-sm="100" flex-xs="100"> <label>{{\'apel.formalLearnings.assessmentType\' | translate}}</label> <hois-classifier-select ng-model="record.newTransferableSubjectOrModule.assessment" aria-label="assessment" model-value-attr="code" main-classifier-code="HINDAMISVIIS" ng-change="assessmentTypeChanged(record.newTransferableSubjectOrModule.assessment)" required></hois-classifier-select> </md-input-container> <md-input-container ng-if="record.newTransferableSubjectOrModule.type !== \'VOTA_AINE_LIIK_V\'" flex="45" flex-sm="100" flex-xs="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'apel.formalLearnings.result\' | translate}}</label> <hois-select ng-model="record.newTransferableSubjectOrModule.grade" values="grades" show-property="value" value-property="code" aria-label="grade" required></hois-select> </md-input-container> <md-input-container ng-if="record.newTransferableSubjectOrModule.type === \'VOTA_AINE_LIIK_V\'" flex="45" flex-sm="100" flex-xs="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'apel.formalLearnings.result\' | translate}}</label> <input value="{{gradeValue(record.newTransferableSubjectOrModule.grade)}}" disabled> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container ng-if="record.newTransferableSubjectOrModule.type !== \'VOTA_AINE_LIIK_V\'" flex="45" flex-sm="100" flex-xs="100"> <label>{{\'apel.formalLearnings.resultDate\' | translate}}</label> <md-datepicker ng-model="record.newTransferableSubjectOrModule.gradeDate" md-max-date="currentDate" md-open-on-focus></md-datepicker> </md-input-container> <md-input-container ng-if="record.newTransferableSubjectOrModule.type === \'VOTA_AINE_LIIK_V\'" flex="45" flex-sm="100" flex-xs="100"> <label>{{\'apel.formalLearnings.resultDate\' | translate}}</label> <input value="{{record.newTransferableSubjectOrModule.gradeDate | hoisDate}}" disabled> </md-input-container> <md-input-container ng-if="record.newTransferableSubjectOrModule.type === \'VOTA_AINE_LIIK_V\'" flex="45" flex-sm="100" flex-xs="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'apel.formalLearnings.teachers\' | translate}}</label> <input type="text" value="{{record.newTransferableSubjectOrModule.teachers}}" disabled> </md-input-container> <md-input-container ng-if="record.newTransferableSubjectOrModule.type !== \'VOTA_AINE_LIIK_V\'" flex="45" flex-sm="100" flex-xs="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'apel.formalLearnings.teachers\' | translate}}</label> <input type="text" ng-model="record.newTransferableSubjectOrModule.teachers" md-maxlength="255"> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="45" flex-sm="100" flex-xs="100"> <label>{{\'apel.formalLearnings.module\' | translate}}</label> <md-select ng-model="record.newTransferableSubjectOrModule.curriculumVersionHmodule" aria-label="module" ng-model-options="{trackBy: \'$value.id\'}" required> <md-option ng-repeat="val in curriculumModules" ng-value="val">{{currentLanguageNameField(val)}}</md-option> </md-select> </md-input-container> <md-input-container flex="45" flex-sm="100" flex-xs="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <md-checkbox ng-model="record.newTransferableSubjectOrModule.isOptional" ng-true-value="false" ng-false-value="true" aria-label="required"> {{\'apel.formalLearnings.required\' | translate}} </md-checkbox> </md-input-container> </div> </div> </div> </fieldset> <br> <fieldset> <legend ng-class="{invalid: dialogForm.$submitted && (!record.formalReplacedSubjectsOrModules || record.formalReplacedSubjectsOrModules.length === 0)}" class="md-title-small">{{\'apel.formalLearnings.substitutableSubjects\' | translate}}</legend> <div flex="50"> <md-input-container style="width: 100%"> <label>{{\'apel.formalLearnings.substitutableSubject\' | translate}}</label> <md-select ng-model="selectedSubject" aria-label="substitutableSubjects" ng-change="addSelectedSubject()"> <md-option ng-repeat="val in subjects" ng-value="val">{{currentLanguageNameField(val)}}</md-option> </md-select> </md-input-container> <md-table-container> <table md-table class="secondary-table"> <tbody md-body> <tr md-row ng-repeat="replacedSubjectOrModule in record.formalReplacedSubjectsOrModules" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell ng-if="!replacedSubjectOrModule.subject.code">{{currentLanguageNameField(replacedSubjectOrModule.subject)}}</td> <td md-cell ng-if="replacedSubjectOrModule.subject.code">{{currentLanguageNameField(replacedSubjectOrModule.subject)}} ({{replacedSubjectOrModule.subject.code}})</td> <td md-cell> <a class="remove nomargin" ng-click="removeSubtitutableSubject(replacedSubjectOrModule)">&times;</a> </td> </tr> </tbody> </table> </md-table-container> </div> </fieldset> </div></md-dialog-content> <md-dialog-actions layout="row" layout-align="start center"> <md-button type="submit" class="md-raised md-primary">{{\'main.button.save\' | translate}}</md-button> <md-button ng-if="record.id" ng-click="delete()" class="md-raised">{{\'main.button.delete\' | translate}}</md-button> <md-button ng-click="cancel()" class="md-raised">{{\'main.button.close\' | translate}}</md-button> </md-dialog-actions>  </form> </md-dialog>'),a.put("apelApplication/templates/formal.learning.vocational.edit.dialog.html",'<md-dialog aria-label="formal learning edit dialog" flex="80" flex-sm="80" flex-xs="100"> <form name="dialogForm" ng-submit="dialogForm.$valid && submitVocationalFormalLearning()" novalidate ng-cloak> <md-toolbar> <div class="md-toolbar-tools"> <h2>{{"apel.formalLearnings.add" | translate}}</h2> <span flex></span> <md-button class="md-icon-button" ng-click="cancel()"> <md-icon md-font-set="material-icons">close</md-icon> </md-button> </div> </md-toolbar> <md-dialog-content> <div layout-padding> <fieldset> <legend ng-class="{invalid: dialogForm.$submitted && (!record.formalSubjectsOrModules || record.formalSubjectsOrModules.length === 0)}" class="md-title-small">{{\'apel.formalLearnings.transferableModules\' | translate}}</legend> <md-input-container> <md-button ng-click="addNewTransferableModule()" class="md-raised">{{\'main.button.addNewRow\' | translate}}</md-button> </md-input-container> <div ng-if="record.newTransferableSubjectOrModule"> <div layout="row" layout-xs="column" flex> <div flex="100"> <div class="form-readonly" layout="row" layout-sm="column" layout-xs="column"> <md-input-container> <md-checkbox ng-model="$parent.isMySchool" aria-label="mySchool"> {{\'apel.formalLearnings.mySchool\' | translate}} </md-checkbox> </md-input-container> </div> <div ng-if="isMySchool" layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="30" flex-sm="100" flex-xs="100"> <label>{{\'apel.formalLearnings.schoolNameEt\' | translate}}</label> <input type="text" ng-model="record.school.nameEt" disabled required> </md-input-container> <md-input-container flex="30" flex-sm="100" flex-xs="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'apel.formalLearnings.schoolNameEn\' | translate}}</label> <input type="text" ng-model="record.school.nameEn" disabled required> </md-input-container> </div> <div ng-if="!isMySchool && !isNewSchool" layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="30" flex-sm="100" flex-xs="100"> <label>{{\'apel.formalLearnings.schoolNameEt\' | translate}}</label> <md-select ng-model="record.newTransferableSubjectOrModule.apelSchool" aria-label="apelSchool" ng-change="apelSchoolChanged(record.newTransferableSubjectOrModule.apelSchool)" ng-model-options="{trackBy: \'$value.id\'}" required> <md-option ng-repeat="val in apelSchools" ng-value="val">{{currentLanguageNameField(val)}}</md-option> </md-select> </md-input-container> <md-input-container flex="30" flex-sm="100" flex-xs="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'apel.formalLearnings.schoolCountry\' | translate}}</label> <input type="text" value="{{currentLanguageNameField(record.newTransferableSubjectOrModule.country)}}" disabled required> </md-input-container> </div> <div ng-if="!isMySchool"> <md-input-container ng-if="!isNewSchool"> <md-button ng-click="addNewSchool()" class="md-raised">{{\'apel.formalLearnings.addNewSchool\' | translate}}</md-button> </md-input-container> <fieldset ng-if="isNewSchool"> <legend class="md-title-small">{{\'apel.formalLearnings.newSchool\' | translate}}</legend> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="30" flex-sm="100" flex-xs="100"> <label>{{\'apel.formalLearnings.schoolCountry\' | translate}}</label> <hois-classifier-select ng-model="record.newTransferableSubjectOrModule.newApelSchool.country" aria-label="country" model-value-attr="code" main-classifier-code="RIIK" ng-change="newSchoolCountryChanged(record.newTransferableSubjectOrModule.newApelSchool.country)" required></hois-classifier-select> </md-input-container> <md-input-container ng-if="newSchoolEst" flex="30" flex-sm="100" flex-xs="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'apel.formalLearnings.schoolEHIS\' | translate}}</label> <hois-classifier-select ng-model="record.newTransferableSubjectOrModule.newApelSchool.ehisSchool" aria-label="EHIS" model-value-attr="code" main-classifier-code="EHIS_KOOL" ng-change="ehisSchoolChanged(record.newTransferableSubjectOrModule.newApelSchool.ehisSchool)" required></hois-classifier-select> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container ng-if="record.newTransferableSubjectOrModule.newApelSchool.country" flex="30" flex-sm="100" flex-xs="100"> <label>{{\'apel.formalLearnings.schoolNameEt\' | translate}}</label> <input type="text" ng-model="record.newTransferableSubjectOrModule.newApelSchool.nameEt" ng-disabled="isMySchool" md-maxlength="100" required> </md-input-container> <md-input-container ng-if="record.newTransferableSubjectOrModule.newApelSchool.country" flex="30" flex-sm="100" flex-xs="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'apel.formalLearnings.schoolNameEn\' | translate}}</label> <input type="text" ng-model="record.newTransferableSubjectOrModule.newApelSchool.nameEn" ng-disabled="isMySchool" md-maxlength="100" required> </md-input-container> </div> </fieldset> </div> <div ng-if="isMySchool" layout="row" layout-sm="column" layout-xs="column"> <md-input-container> <md-radio-group layout-gt-sm="row" ng-model="record.newTransferableSubjectOrModule.type" ng-change="typeChanged(record.newTransferableSubjectOrModule.type)" required> <md-radio-button value="VOTA_AINE_LIIK_V" aria-label="passedModule"> {{\'apel.formalLearnings.passedModule\' | translate}} </md-radio-button> <md-radio-button value="VOTA_AINE_LIIK_O" aria-label="curriculumModule"> {{\'apel.formalLearnings.curriculumModule\' | translate}} </md-radio-button> <md-radio-button value="VOTA_AINE_LIIK_M" aria-label="otherModule"> {{\'apel.formalLearnings.otherModule\' | translate}} </md-radio-button> </md-radio-group> </md-input-container> </div> <div ng-if="isMySchool" layout="row" layout-sm="column" layout-xs="column"> <md-input-container ng-if="record.newTransferableSubjectOrModule.type !== \'VOTA_AINE_LIIK_M\'" flex="30" flex-sm="100" flex-xs="100"> <label>{{\'apel.formalLearnings.transferableModuleEt\' | translate}}</label> <md-select ng-model="record.newTransferableSubjectOrModule.curriculumVersionOmodule" aria-label="module" ng-change="moduleChanged(record.newTransferableSubjectOrModule.curriculumVersionOmodule)" ng-model-options="{trackBy: \'$value.id\'}" required> <md-option ng-repeat="val in transferableModules" ng-value="val">{{currentLanguageNameField(val)}}</md-option> </md-select> </md-input-container> <hois-autocomplete ng-if="record.newTransferableSubjectOrModule.type === \'VOTA_AINE_LIIK_M\'" flex ng-model="record.newTransferableSubjectOrModule.curriculumVersionOmodule" method="curriculumversionomodulesandthemes" name="module" label="apel.formalLearnings.transferableModuleEt" md-selected-item-change="moduleChanged(record.newTransferableSubjectOrModule.curriculumVersionOmodule)" additional-query-params="{student: student.id, curriculumModules: false, curriculumVersion: curriculumVersionId, school: auth.school.id}" ng-model-options="{ debounce: 500 }" required> </hois-autocomplete> <md-input-container flex="30" flex-sm="100" flex-xs="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'apel.formalLearnings.transferableModuleEn\' | translate}}</label> <input type="text" value="{{record.newTransferableSubjectOrModule.curriculumVersionOmodule.nameEn}}" disabled required> </md-input-container> <md-input-container flex="30" flex-sm="100" flex-xs="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'apel.formalLearnings.moduleCredits\' | translate}} ({{\'apel.formalLearnings.EKAP\' | translate}})</label> <input type="text" value="{{record.newTransferableSubjectOrModule.credits}}" disabled required> </md-input-container> </div> <div ng-if="!isMySchool" layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="30" flex-sm="100" flex-xs="100"> <label>{{\'apel.formalLearnings.transferableModuleEt\' | translate}}</label> <input type="text" ng-model="record.newTransferableSubjectOrModule.nameEt" md-maxlength="255" required> </md-input-container> <md-input-container flex="30" flex-sm="100" flex-xs="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'apel.formalLearnings.transferableModuleEn\' | translate}}</label> <input type="text" ng-model="record.newTransferableSubjectOrModule.nameEn" md-maxlength="255"> </md-input-container> <md-input-container flex="30" flex-sm="100" flex-xs="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'apel.formalLearnings.subjectCredits\' | translate}} ({{\'apel.formalLearnings.EKAP\' | translate}})</label> <input type="number" ng-model="record.newTransferableSubjectOrModule.credits" ng-min="0" ng-max="999.9" required> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container ng-if="isMySchool" flex="30" flex-sm="100" flex-xs="100"> <label>{{\'apel.formalLearnings.assessmentType\' | translate}}</label> <input value="{{currentLanguageNameField(record.assessment)}}" disabled> </md-input-container> <md-input-container ng-if="!isMySchool" flex="30" flex-sm="100" flex-xs="100"> <label>{{\'apel.formalLearnings.assessmentType\' | translate}}</label> <hois-classifier-select ng-model="record.newTransferableSubjectOrModule.assessment" aria-label="assessment" model-value-attr="code" main-classifier-code="KUTSEHINDAMISVIIS" ng-change="assessmentTypeChanged(record.newTransferableSubjectOrModule.assessment)" required></hois-classifier-select> </md-input-container> <md-input-container ng-if="record.newTransferableSubjectOrModule.type !== \'VOTA_AINE_LIIK_V\'" flex="30" flex-sm="100" flex-xs="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'apel.formalLearnings.result\' | translate}}</label> <hois-select ng-model="record.newTransferableSubjectOrModule.grade" values="grades" show-property="value" value-property="code" aria-label="grade" required></hois-select> </md-input-container> <md-input-container ng-if="record.newTransferableSubjectOrModule.type === \'VOTA_AINE_LIIK_V\'" flex="30" flex-sm="100" flex-xs="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'apel.formalLearnings.result\' | translate}}</label> <input value="{{gradeValue(record.newTransferableSubjectOrModule.grade)}}" disabled> </md-input-container> <md-input-container ng-if="record.newTransferableSubjectOrModule.type !== \'VOTA_AINE_LIIK_V\'" flex="30" flex-sm="100" flex-xs="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'apel.formalLearnings.resultDate\' | translate}}</label> <md-datepicker ng-model="record.newTransferableSubjectOrModule.gradeDate" md-max-date="currentDate" md-open-on-focus></md-datepicker> </md-input-container> <md-input-container ng-if="record.newTransferableSubjectOrModule.type === \'VOTA_AINE_LIIK_V\'" flex="30" flex-sm="100" flex-xs="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'apel.formalLearnings.resultDate\' | translate}}</label> <input value="{{record.newTransferableSubjectOrModule.gradeDate | hoisDate}}" disabled> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container ng-if="record.newTransferableSubjectOrModule.type === \'VOTA_AINE_LIIK_V\'" flex="30" flex-sm="100" flex-xs="100"> <label>{{\'apel.formalLearnings.teachers\' | translate}}</label> <input type="text" value="{{record.newTransferableSubjectOrModule.teachers}}" disabled> </md-input-container> <md-input-container ng-if="record.newTransferableSubjectOrModule.type !== \'VOTA_AINE_LIIK_V\'" flex="30" flex-sm="100" flex-xs="100"> <label>{{\'apel.formalLearnings.teachers\' | translate}}</label> <input type="text" ng-model="record.newTransferableSubjectOrModule.teachers" md-maxlength="255"> </md-input-container> </div> </div> </div> <md-button ng-if="record.newTransferableSubjectOrModule.isNew" class="md-raised" ng-click="addTransferableModule(record.newTransferableSubjectOrModule)">{{\'main.button.add\' | translate}}</md-button> <md-button ng-if="!record.newTransferableSubjectOrModule.isNew" class="md-raised" ng-click="changeTransferableModule(record.newTransferableSubjectOrModule)">{{\'main.button.edit\' | translate}}</md-button> <md-button class="md-raised" ng-click="deleteTransferableModule(record.newTransferableSubjectOrModule)">{{\'apel.formalLearnings.remove\' | translate}}</md-button> </div> <md-table-container> <table md-table md-progress="tabledata.$promise" class="secondary-table"> <thead md-head> <tr md-row> <th md-column>{{\'apel.formalLearnings.school\' | translate}}</th> <th md-column>{{\'apel.formalLearnings.module\' | translate}}/{{\'apel.formalLearnings.moduleEn\' | translate}}</th> <th md-column>{{\'apel.formalLearnings.creditsEKAP\' | translate}}</th> <th md-column>{{\'apel.formalLearnings.result\' | translate}}</th> <th md-column>{{\'apel.formalLearnings.resultDate\' | translate}}</th> <th md-column>{{\'apel.formalLearnings.teachers\' | translate}}</th> <th md-column></th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="row in record.formalSubjectsOrModules track by $index" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell ng-if="row.apelSchool">{{currentLanguageNameField(row.apelSchool)}}</td> <td md-cell ng-if="!row.apelSchool && !row.newApelSchool">{{currentLanguageNameField(record.school)}}</td> <td md-cell ng-if="row.newApelSchool">{{currentLanguageNameField(row.newApelSchool)}}</td> <td md-cell ng-if="row.module && !row.module.nameEn">{{row.module.nameEt}}</td> <td md-cell ng-if="row.module && row.module.nameEn">{{row.module.nameEt}}/{{row.module.nameEn}}</td> <td md-cell ng-if="!row.module && !row.nameEn">{{row.nameEt}}</td> <td md-cell ng-if="!row.module && row.nameEn">{{row.nameEt}}/{{row.nameEn}}</td> <td md-cell>{{row.credits}}</td> <td md-cell>{{row.grade.value}}</td> <td md-cell>{{row.gradeDate | hoisDate}}</td> <td md-cell>{{row.teachers}}</td> <td md-cell> <md-button md-no-ink class="md-primary change-button" ng-click="editTransferableModule($index)">{{\'main.button.change\' | translate}}</md-button> </td> </tr> </tbody> </table> </md-table-container> </fieldset> <br> <fieldset> <legend ng-class="{invalid: dialogForm.$submitted && (!record.formalReplacedSubjectsOrModules || record.formalReplacedSubjectsOrModules.length === 0)}" class="md-title-small">{{\'apel.formalLearnings.substitutableModules\' | translate}}</legend> <div layout-padding> <div class="substitutableModuleSelect" ng-repeat="module in curriculumModules track by $index"> <md-input-container> <md-checkbox aria-label="module" ng-model="module.substitutable" ng-change="substitutableModuleChanged(module)"> {{currentLanguageNameField(module)}} ({{module.credits}} {{\'apel.formalLearnings.ekap\' | translate}}) </md-checkbox> </md-input-container> </div> </div> </fieldset> </div></md-dialog-content> <md-dialog-actions layout="row" layout-align="start center"> <md-button type="submit" class="md-raised md-primary">{{\'main.button.save\' | translate}}</md-button> <md-button ng-if="record.id" ng-click="delete()" class="md-raised">{{\'main.button.delete\' | translate}}</md-button> <md-button ng-click="cancel()" class="md-raised">{{\'main.button.close\' | translate}}</md-button> </md-dialog-actions>  </form> </md-dialog>'),
a.put("apelApplication/templates/informal.learning.higher.edit.dialog.html",'<md-dialog aria-label="informal learning edit dialog" flex="80" flex-sm="80" flex-xs="100"> <form name="dialogForm" ng-submit="dialogForm.$valid && submitInformalLearning()" novalidate ng-cloak> <md-toolbar> <div class="md-toolbar-tools"> <h2>{{"apel.informalLearnings.add" | translate}}</h2> <span flex></span> <md-button class="md-icon-button" ng-click="cancel()"> <md-icon md-font-set="material-icons">close</md-icon> </md-button> </div> </md-toolbar> <md-dialog-content> <div layout-padding> <fieldset> <legend ng-class="{invalid: dialogForm.$submitted && (!record.informalExperiences || record.informalExperiences.length === 0)}" class="md-title-small">{{\'apel.informalLearnings.otherInformalLearnings\' | translate}}</legend> <md-button class="md-raised" ng-click="addNewInformalExperienceRow()">{{\'main.button.addNewRow\' | translate}}</md-button> <md-table-container> <table md-table md-progress="tabledata.$promise" class="secondary-table"> <thead md-head> <tr md-row> <th md-column width="20%">{{\'apel.informalLearnings.name\' | translate}}</th> <th md-column width="20%">{{\'apel.informalLearnings.placeTime\' | translate}}</th> <th md-column width="10%">{{\'apel.informalLearnings.hours\' | translate}}</th> <th md-column width="20%">{{\'apel.informalLearnings.documents\' | translate}}</th> <th md-column width="25%">{{\'apel.informalLearnings.type\' | translate}}</th> <th md-column width="5%"></th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="experience in record.informalExperiences" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell> <md-input-container> <input ng-model="experience.nameEt" aria-label="nameEt" type="text" md-maxlength="255" required> </md-input-container> </td> <td md-cell> <md-input-container> <input ng-model="experience.placeTime" aria-label="place and time" type="text" md-maxlength="255" required> </md-input-container> </td> <td md-cell> <md-input-container> <input ng-model="experience.hours" aria-label="hours" type="number" ng-min="0" ng-max="99999" required> </md-input-container> </td> <td md-cell> <md-input-container> <textarea ng-model="experience.documents" required md-maxlength="255" max-rows="2" aria-label="documents"></textarea> </md-input-container> </td> <td md-cell> <md-input-container> <hois-classifier-select ng-model="experience.type" aria-label="type" model-value-attr="code" main-classifier-code="VOTA_INFORMAAL_LIIK" md-no-asterisk required></hois-classifier-select> </md-input-container> </td> <td md-cell> <a class="remove nomargin" ng-click="removeInformalExperienceRow(experience)">&times;</a> </td> </tr> </tbody> </table> </md-table-container> </fieldset> <br> <fieldset> <legend ng-class="{invalid: dialogForm.$submitted && (!record.informalSubjectsOrModules || record.informalSubjectsOrModules.length === 0)}" class="md-title-small">{{\'apel.informalLearnings.substitutableSubjects\' | translate}}</legend> <div flex="50"> <md-input-container style="width: 100%"> <label>{{\'apel.informalLearnings.subject\' | translate}}</label> <md-select ng-model="selectedSubject" aria-label="{{\'apel.informalLearnings.substitutableSubjects\' | translate}}" ng-change="addSelectedSubject()"> <md-option ng-repeat="val in subjects" ng-value="val">{{currentLanguageNameField(val)}}</md-option> </md-select> </md-input-container> </div> <md-table-container> <table md-table md-progress="tabledata.$promise" class="secondary-table"> <thead md-head> <tr md-row> <th md-column>{{\'apel.informalLearnings.subject\' | translate}}</th> <th md-column>{{\'apel.informalLearnings.module\' | translate}}</th> <th md-column>{{\'apel.informalLearnings.required\' | translate}}</th> <th md-column>{{\'apel.informalLearnings.creditsEAP\' | translate}}</th> <th md-column>{{\'apel.informalLearnings.acquiredSkills\' | translate}}</th> <th md-column></th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="subjectOrModule in record.informalSubjectsOrModules" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <ng-form name="subjectOrModuleForm"> <td md-cell> <md-input-container> <hois-value ng-if="subjectOrModule.subject" value="currentLanguageNameField(subjectOrModule.subject)"></hois-value> </md-input-container> </td> <td md-cell> <md-input-container> <hois-value ng-if="subjectOrModule.curriculumVersionHmodule" value="currentLanguageNameField(subjectOrModule.curriculumVersionHmodule)"></hois-value> </md-input-container> </td> <td md-cell> <md-input-container> <span ng-if="subjectOrModule.isOptional">{{\'main.yes\' | translate}}</span> <span ng-if="!subjectOrModule.isOptional">{{\'main.no\' | translate}}</span> </md-input-container> </td> <td md-cell> <md-input-container> <hois-value ng-if="subjectOrModule.credits" value="subjectOrModule.credits"></hois-value> </md-input-container> </td> <td md-cell> <md-input-container style="width: 100%"> <textarea ng-model="subjectOrModule.skills" required md-maxlength="4000" max-rows="3" aria-label="{{\'apel.informalLearnings.acquiredSkills\' | translate}}"></textarea> </md-input-container> </td> <td md-cell> <a class="remove nomargin" ng-click="removeSubtitutableModuleTheme(subjectOrModule)">&times;</a> </td> </ng-form> </tr> </tbody> </table> </md-table-container> </fieldset> </div></md-dialog-content> <md-dialog-actions layout="row" layout-align="start center"> <md-button type="submit" class="md-raised md-primary">{{\'main.button.save\' | translate}}</md-button> <md-button ng-if="record.id" ng-click="delete()" class="md-raised">{{\'main.button.delete\' | translate}}</md-button> <md-button ng-click="cancel()" class="md-raised">{{\'main.button.close\' | translate}}</md-button> </md-dialog-actions>  </form> </md-dialog>'),a.put("apelApplication/templates/informal.learning.vocational.edit.dialog.html",'<md-dialog aria-label="informal learning edit dialog" flex="80" flex-sm="80" flex-xs="100"> <form name="dialogForm" ng-submit="dialogForm.$valid && submitInformalLearning()" novalidate ng-cloak> <md-toolbar> <div class="md-toolbar-tools"> <h2>{{"apel.informalLearnings.add" | translate}}</h2> <span flex></span> <md-button class="md-icon-button" ng-click="cancel()"> <md-icon md-font-set="material-icons">close</md-icon> </md-button> </div> </md-toolbar> <md-dialog-content> <div layout-padding> <fieldset> <legend ng-class="{invalid: dialogForm.$submitted && (!record.informalExperiences || record.informalExperiences.length === 0)}" class="md-title-small">{{\'apel.informalLearnings.otherInformalLearnings\' | translate}}</legend> <md-button class="md-raised" ng-click="addNewInformalExperienceRow()">{{\'main.button.addNewRow\' | translate}}</md-button> <md-table-container> <table md-table md-progress="tabledata.$promise" class="secondary-table"> <thead md-head> <tr md-row> <th md-column width="20%">{{\'apel.informalLearnings.name\' | translate}}</th> <th md-column width="20%">{{\'apel.informalLearnings.placeTime\' | translate}}</th> <th md-column width="10%">{{\'apel.informalLearnings.hours\' | translate}}</th> <th md-column width="20%">{{\'apel.informalLearnings.documents\' | translate}}</th> <th md-column width="25%">{{\'apel.informalLearnings.type\' | translate}}</th> <th md-column width="5%"></th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="experience in record.informalExperiences" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell> <md-input-container> <input ng-model="experience.nameEt" aria-label="nameEt" type="text" md-maxlength="255" required> </md-input-container> </td> <td md-cell> <md-input-container> <input ng-model="experience.placeTime" aria-label="place and time" type="text" md-maxlength="255" required> </md-input-container> </td> <td md-cell> <md-input-container> <input ng-model="experience.hours" aria-label="hours" type="number" ng-min="0" ng-max="99999" required> </md-input-container> </td> <td md-cell> <md-input-container> <textarea ng-model="experience.documents" required md-maxlength="255" max-rows="2" aria-label="documents"></textarea> </md-input-container> </td> <td md-cell> <md-input-container> <hois-classifier-select ng-model="experience.type" aria-label="type" model-value-attr="code" main-classifier-code="VOTA_INFORMAAL_LIIK" md-no-asterisk required></hois-classifier-select> </md-input-container> </td> <td md-cell> <a class="remove nomargin" ng-click="removeInformalExperienceRow(experience)">&times;</a> </td> </tr> </tbody> </table> </md-table-container> </fieldset> <br> <fieldset> <legend ng-class="{invalid: dialogForm.$submitted && (!record.informalSubjectsOrModules || record.informalSubjectsOrModules.length === 0)}" class="md-title-small">{{\'apel.informalLearnings.substitutableModulesThemes\' | translate}}</legend> <div flex="50"> <md-input-container style="width: 100%"> <label>{{\'apel.informalLearnings.module\' | translate}}/{{\'apel.informalLearnings.theme\' | translate}}</label> <md-select ng-model="selectedModuleOrTheme" aria-label="substitutable modules/themes" ng-change="selectedModuleOrThemeChanged()"> <md-option ng-repeat="val in modulesAndThemes" ng-value="val">{{currentLanguageNameField(val)}}</md-option> </md-select> </md-input-container> </div> <md-table-container> <table md-table md-progress="tabledata.$promise" class="secondary-table"> <thead md-head> <tr md-row> <th md-column>{{\'apel.informalLearnings.module\' | translate}}/{{\'apel.informalLearnings.theme\' | translate}}</th> <th md-column>{{\'apel.informalLearnings.isModule\' | translate}}</th> <th md-column>{{\'apel.informalLearnings.hours\' | translate}}/{{\'apel.informalLearnings.ekap\' | translate}}</th> <th md-column>{{\'apel.informalLearnings.result\' | translate}}</th> <th md-column>{{\'apel.informalLearnings.outcomes\' | translate}}</th> <th md-column>{{\'apel.informalLearnings.acquiredSkills\' | translate}}</th> <th md-column></th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="subjectOrModule in record.informalSubjectsOrModules" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <ng-form name="subjectOrModuleForm"> <td md-cell> <md-input-container> <hois-value ng-if="subjectOrModule.isModule" value="currentLanguageNameField(subjectOrModule.module)"></hois-value> <hois-value ng-if="!subjectOrModule.isModule" value="currentLanguageNameField(subjectOrModule.module) + \'/\' + currentLanguageNameField(subjectOrModule.curriculumVersionOmoduleTheme)"> </hois-value> </md-input-container> </td> <td md-cell> <md-input-container> <md-checkbox ng-model="subjectOrModule.isModule" aria-label="{{\'apel.informalLearnings.isModule\' | translate}}" ng-disabled="true"> </md-checkbox> </md-input-container> </td> <td md-cell> <md-input-container> <hois-value ng-if="subjectOrModule.EKAP" value="subjectOrModule.hours.toString() + \'/\' + subjectOrModule.EKAP.toString()"></hois-value> <hois-value ng-if="!subjectOrModule.EKAP" value="subjectOrModule.hours"></hois-value> </md-input-container> </td> <td md-cell> <md-input-container> <hois-value value="subjectOrModule.grade.value"></hois-value> </md-input-container> </td> <td md-cell> <md-input-container ng-repeat="outcome in subjectOrModule.outcomes | orderBy: [\'curriculumModuleOutcomes.orderNr\', \'curriculumModuleOutcomes.\' + currentLanguage() === \'en\' ? outcomeEn : outcomeEt]" layout="row"> <md-checkbox ng-model="outcome.acquired" aria-label="{{\'apel.informalLearnings.outcomes\' | translate}}"></md-checkbox> {{currentLanguage() === \'en\' ? outcome.curriculumModuleOutcomes.outcomeEn : outcome.curriculumModuleOutcomes.outcomeEt}} </md-input-container> </td> <td md-cell> <md-input-container style="width: 100%"> <textarea ng-model="subjectOrModule.skills" required md-maxlength="4000" max-rows="3" aria-label="{{\'apel.informalLearnings.acquiredSkills\' | translate}}"></textarea> </md-input-container> </td> <td md-cell> <a class="remove nomargin" ng-click="removeSubtitutableModuleTheme(subjectOrModule)">&times;</a> </td> </ng-form> </tr> </tbody> </table> </md-table-container> </fieldset> </div></md-dialog-content> <md-dialog-actions layout="row" layout-align="start center"> <md-button type="submit" class="md-raised md-primary">{{\'main.button.save\' | translate}}</md-button> <md-button ng-if="record.id" ng-click="delete()" class="md-raised">{{\'main.button.delete\' | translate}}</md-button> <md-button ng-click="cancel()" class="md-raised">{{\'main.button.close\' | translate}}</md-button> </md-dialog-actions>  </form> </md-dialog>'),a.put("apelApplication/templates/reject.dialog.html",'<md-dialog aria-label="reject dialog" flex="50" flex-sm="50" flex-xs="100"> <form name="dialogForm" novalidate ng-cloak> <md-toolbar> <div class="md-toolbar-tools"> <h2>{{"apel.rejection" | translate}}</h2> <span flex></span> <md-button class="md-icon-button" ng-click="cancel()"> <md-icon md-font-set="material-icons">close</md-icon> </md-button> </div> </md-toolbar> <md-dialog-content> <span flex></span> <div class="ois-form-layout" layout="column" layout-margin ng-cloak> <div layout="column" flex> <md-input-container flex> <label>{{\'apel.justification\' | translate}}</label> <textarea ng-model="rejectReason" md-maxlength="4000" max-rows="5" required md-autofocus></textarea> </md-input-container> </div> </div> </md-dialog-content> <span flex></span> <md-dialog-actions layout="row" layout-align="start center"> <md-button class="md-raised" ng-click="submit()">{{"main.button.reject" | translate}}</md-button> <md-button class="md-raised" ng-click="cancel()">{{"main.button.close" | translate}}</md-button> </md-dialog-actions> </form> </md-dialog>'),a.put("application/student/application.student.list.html",'<div layout-padding> <div flex> <md-table-container> <table md-table md-progress="tabledata.$promise"> <thead md-head md-order="criteria.order" md-on-reorder="loadData"> <tr md-row> <th md-column md-order-by="{{currentLanguage()===\'en\' ? \'type.nameEn\' : \'type.nameEt\'}}">{{\'application.type\' | translate}}</th> <th md-column md-order-by="submitted">{{\'application.submissionDate\' | translate}}</th> <th md-column md-order-by="{{currentLanguage()===\'en\' ? \'status.nameEn\' : \'status.nameEt\'}}">{{\'main.status\' | translate}}</th> <th md-column md-order-by="5">{{\'student.application.confirmDate\' | translate}}</th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="row in tabledata.content" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell><a ng-href="#/applications/{{::row.id}}/view">{{currentLanguageNameField(row.type)}}</a></td> <td md-cell>{{row.submitted | hoisDate}}</td> <td md-cell> {{currentLanguageNameField(row.status)}} <md-tooltip ng-if="row.status.code === \'AVALDUS_STAATUS_TAGASI\' && row.rejectReason">{{row.rejectReason}}</md-tooltip> </td> <td md-cell>{{row.confirmDate | hoisDate}}</td> </tr> </tbody> </table> </md-table-container> <md-table-pagination md-limit="criteria.size" md-limit-options="[10, 20, 50]" md-page="criteria.page" md-total="{{tabledata.totalElements}}" md-on-paginate="loadData" md-label="{page: \'{{\'main.page\' | translate}}:\', rowsPerPage: \'{{\'main.rowPerPage\' | translate}}:\', of: \'{{\'main.of\' | translate}}\'}" md-page-select></md-table-pagination> </div> </div> <div layout-padding ng-if="!auth.isParent()"> <div flex> <md-table-container> <table md-table class="secondary-table" md-progress="applicationTypes.$promise"> <thead md-head> <tr md-row> <th md-column>{{\'application.type\' | translate}}</th> <th md-column></th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="row in applicationTypes" ng-class-odd="\'odd\'" ng-class-even="\'even\'" ng-if="applicationTypesApplicable[row.code]"> <td md-cell>{{currentLanguageNameField(row)}}</td> <td md-cell> <md-button md-no-ink ng-if="applicationTypesApplicable[row.code].isAllowed === true && auth.isStudent()" class="md-primary change-button" ng-href="#/applications/student/new/{{row.code}}"> {{\'main.button.apply\' | translate}} </md-button> </td> </tr> </tbody> </table> </md-table-container> </div> </div>'),a.put("application/student/application.student.new.html",'<div class="ois-form-layout-padding ois-form-layout" ng-cloak> <div flex> <form ng-submit="loadData()" layout="column" name="applicationForm" ng-controller="ApplicationController as mainCtrl"> <br> <div ng-include="\'application/templates/application.html\'" ng-init="application=studentApplication"></div> <br> <div layout="row"> <md-button ng-if="application.id" class="md-raised md-primary" ng-click="submit()">{{\'main.button.submit\' | translate}}</md-button> <md-button class="md-raised" ng-click="save()">{{\'main.button.save\' | translate}}</md-button> <md-button ng-href="#/applications/student" class="md-raised">{{\'main.button.back\' | translate}}</md-button> </div> </form> </div> </div>'),a.put("application/templates/action.buttons.html",'<div ng-if="isStudentRepresentative()"> <md-button ng-if="application.id > 0 && application.status === \'AVALDUS_STAATUS_KOOST\' && application.needsRepresentativeConfirm === true" ng-click="submit()" class="md-raised md-primary">{{\'main.button.allowSubmit\' | translate}}</md-button> <md-button ng-if="application.id > 0 && application.status === \'AVALDUS_STAATUS_KOOST\' && application.needsRepresentativeConfirm === true" class="md-raised" ng-click="reject()">{{\'main.button.reject\' | translate}}</md-button> </div> <div ng-if="!isStudentRepresentative()"> <md-button ng-if="application.id > 0 && application.status === \'AVALDUS_STAATUS_KOOST\' && \r\n    ((!auth.isAdmin() && application.needsRepresentativeConfirm === false) || (auth.isAdmin() && isAuthorized(\'ROLE_OIGUS_M_TEEMAOIGUS_AVALDUS\')))" ng-click="submit()" class="md-raised md-primary">{{\'main.button.submit\' | translate}}</md-button> <md-button ng-if="application.id > 0 && (application.status === \'AVALDUS_STAATUS_YLEVAAT\' \r\n    || (application.status === \'AVALDUS_STAATUS_KOOST\' && application.needsRepresentativeConfirm)) \r\n    && (auth.isAdmin() && isAuthorized(\'ROLE_OIGUS_M_TEEMAOIGUS_AVALDUS\'))" class="md-raised" ng-click="reject()">{{\'main.button.reject\' | translate}}</md-button> <md-button ng-if="application.id > 0 && application.status === \'AVALDUS_STAATUS_KOOST\' && application.needsRepresentativeConfirm === false\r\n    && !(auth.isAdmin() && !isAuthorized(\'ROLE_OIGUS_M_TEEMAOIGUS_AVALDUS\'))" ng-click="delete()" class="md-raised">{{\'main.button.delete\' | translate}}</md-button> </div>'),a.put("application/templates/application.html",'<div ng-if="isCreate" layout="row" layout-sm="column" layout-xs="column" class="form-readonly"> <md-input-container class="label-only" flex="60" flex-sm="100" flex-xs="100"> <label>{{\'application.type\' | translate}}</label> <hois-classifier-value ng-model="application.type" main-classifier-code="AVALDUS_LIIK"></hois-classifier-value> </md-input-container> </div> <div ng-if="!isCreate" ng-include="\'application/templates/application.information.html\'" class="form-readonly"></div> <div ng-if="isCreate && !auth.isStudent()" layout="row" layout-sm="column" layout-xs="column" class="form-readonly"> <md-input-container class="label-only" flex="60" flex-sm="100" flex-xs="100"> <label>{{\'student.label\' | translate}}</label> <hois-value value="application.student.nameEt" href-value="\'#/students/\' + application.student.id + \'/main\'"></hois-value> </md-input-container> </div> <div ng-include="templateUrlByType"></div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="100" flex-sm="100" flex-xs="100"> <label class="textInput">{{\'application.additionalInfo\' | translate}}</label> <textarea ng-model="application.addInfo" md-maxlength="4000" max-rows="10"></textarea> </md-input-container> </div> <div layout="column" flex> <fieldset> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'main.relatedFiles\' | translate}}</legend> <md-button ng-if="(auth.isStudent() && application.status === \'AVALDUS_STAATUS_KOOST\') || (auth.isAdmin() && [\'AVALDUS_STAATUS_KOOST\', \'AVALDUS_STAATUS_ESIT\', \'AVALDUS_STAATUS_YLEVAAT\'].indexOf(application.status) !== -1)" class="md-raised" href="" ng-click="openAddFileDialog()">{{\'main.button.uploadFile\' | translate}}</md-button> <table md-table class="secondary-table"> <thead md-head> <tr md-row> <th md-column><span>{{\'file.nameAndFile\' | translate}}</span></th> <th md-column><span>{{\'file.additionDate\' | translate}}</span></th> <th md-column>{{\'file.addedBy\' | translate}}</th> <th md-column></th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="file in application.files | orderBy: \'id\'" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell> <div layout="row" flex> <div flex="60"> {{file.oisFile.fname}} </div> <div flex> <a ng-href="{{getUrl(file.oisFile, \'application\')}}" target="_blank" rel="noopener noreferrer"> <md-icon md-font-set="material-icons">file_download</md-icon> </a> </div> </div> </td> <td md-cell> {{file.inserted | hoisDateTime}} </td> <td md-cell> {{file.insertedBy}} </td> <td md-cell> <md-button class="remove nomargin" ng-click="removeFromArray(application.files, file)">&times;</md-button> </td> </tr> </tbody> </table> </fieldset> </div>'),a.put("application/templates/application.information.html",'<div layout="row" layout-sm="column" layout-xs="column"> <md-input-container class="label-only" flex="60" flex-sm="100" flex-xs="100"> <label>{{\'application.type\' | translate}}</label> <hois-classifier-value ng-model="application.type" main-classifier-code="AVALDUS_LIIK"></hois-classifier-value> </md-input-container> </div> <div ng-if="!auth.isStudent()" layout="row" layout-sm="column" layout-xs="column"> <md-input-container class="label-only" flex="60" flex-sm="100" flex-xs="100"> <label>{{\'student.label\' | translate}}</label> <hois-value value="application.student.nameEt" href-value="\'#/students/\' + application.student.id + \'/main\'"></hois-value> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container class="label-only" flex="60" flex-sm="100" flex-xs="100"> <label>{{\'main.status\' | translate}}</label> <hois-classifier-value ng-model="application.status" main-classifier-code="AVALDUS_STAATUS"></hois-classifier-value> </md-input-container> </div> <div ng-if="!application.isAdult" layout="row" layout-sm="column" layout-xs="column"> <md-input-container class="label-only" flex="60" flex-sm="100" flex-xs="100"> <label>{{\'application.confirmedByRepresentative\' | translate}}</label> <hois-value value="application.needsRepresentativeConfirm === true && application.status === \'AVALDUS_STAATUS_KOOST\' ? \'main.no\' : \'main.yes\' | translate"></hois-value> </md-input-container> </div> <div ng-if="application.status === \'AVALDUS_STAATUS_TAGASI\'" layout="row" layout-sm="column" layout-xs="column"> <md-input-container class="label-only" flex="60" flex-sm="100" flex-xs="100"> <label>{{\'application.rejectReason\' | translate}}</label> <hois-value value="application.rejectReason"></hois-value> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container class="label-only" flex="60" flex-sm="100" flex-xs="100"> <label>{{\'main.createdBy\' | translate}}</label> <hois-value value="application.insertedBy"></hois-value> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container class="label-only" flex="60" flex-sm="100" flex-xs="100"> <label>{{\'application.confirmationDate\' | translate}}</label> <hois-value value="application.status === \'AVALDUS_STAATUS_KINNITATUD\' ? (application.changed | hoisDate) : \'\'"></hois-value> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container class="label-only" flex="60" flex-sm="100" flex-xs="100"> <label>{{\'application.submissionDate\' | translate}}</label> <hois-value value="application.submitted | hoisDate"></hois-value> </md-input-container> </div>'),a.put("application/templates/application.type.akad.edit.html",'<div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="60" flex-sm="100" flex-xs="100"> <label>{{\'application.reason\' | translate}}</label> <hois-classifier-select ng-model="application.reason" model-value-attr="code" required main-classifier-code="AKADPUHKUS_POHJUS" criteria="{higher: !curriculumVersion.isVocational ? true : undefined, vocational: curriculumVersion.isVocational ? true : undefined}"></hois-classifier-select> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <div flex="60" flex-sm="100" flex-xs="100" ng-include="\'application/templates/period.html\'" ng-init="labelStart=\'application.academicLeaveStart\';labelEnd=\'application.academicLeaveEnd\'"></div> </div>'),a.put("application/templates/application.type.akad.view.html",'<div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="60" flex-sm="100" flex-xs="100"> <label>{{\'application.reason\' | translate}}</label> <hois-classifier-value ng-model="application.reason" main-classifier-code="AKADPUHKUS_POHJUS"></hois-classifier-value> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <div flex="60" flex-sm="100" flex-xs="100" ng-include="\'application/templates/period.view.html\'" ng-init="labelStart=\'application.academicLeaveStart\';labelEnd=\'application.academicLeaveEnd\'"></div> </div>'),a.put("application/templates/application.type.akadk.edit.html",'<div> <div class="form-readonly"> <md-input-container flex="60" flex-sm="100" flex-xs="100"> <label>{{\'application.reason\' | translate}}</label> <hois-classifier-value ng-model="application.academicApplication.reason" main-classifier-code="AKADPUHKUS_POHJUS"></hois-classifier-value> </md-input-container> </div> <div ng-show="!application.academicApplication.directiveStudent.isPeriod" layout="row" layout-xs="column" class="form-readonly"> <md-input-container flex="20" flex-sm="100" flex-xs="100"> <label>{{\'application.academicLeaveStart\' | translate}}</label> <hois-value value="application.academicApplication.directiveStudent.startDate | hoisDate"></hois-value> </md-input-container> <md-input-container style="margin-left: 0px" flex="20" flex-sm="100" flex-xs="100" flex-offset-xs="0" flex-offset-sm="0" flex-offset="5"> <label>{{\'application.academicLeaveEnd\' | translate}}</label> <hois-value value="application.academicApplication.directiveStudent.endDate | hoisDate"></hois-value> </md-input-container> </div> <div ng-show="application.academicApplication.directiveStudent.isPeriod" layout="row" layout-xs="column"> <md-input-container flex="20" flex-sm="100" flex-xs="100"> <label>{{\'application.academicLeaveStart\' | translate}}</label> <hois-select ng-model="application.academicApplication.directiveStudent.studyPeriodStart" values="studyPeriods" disabled></hois-select> </md-input-container> <md-input-container flex="20" flex-sm="100" flex-xs="100"> <label>{{\'application.academicLeaveEnd\' | translate}}</label> <hois-select ng-model="application.academicApplication.directiveStudent.studyPeriodEnd" values="studyPeriods" disabled></hois-select> </md-input-container> </div> <md-input-container flex="20" flex-sm="100" flex-xs="100"> <label>{{\'application.academicLeaveRevocationDate\' | translate}}</label> <md-datepicker ng-model="application.startDate" md-open-on-focus md-min-date="application.academicApplication.directiveStudent.startDate" md-max-date="application.academicApplication.directiveStudent.endDate" required></md-datepicker> </md-input-container> </div>'),a.put("application/templates/application.type.akadk.view.html",'<div> <md-input-container flex="60" flex-sm="100" flex-xs="100"> <label>{{\'application.reason\' | translate}}</label> <hois-classifier-value ng-model="application.academicApplication.reason" main-classifier-code="AKADPUHKUS_POHJUS"></hois-classifier-value> </md-input-container> <div ng-show="!application.academicApplication.directiveStudent.isPeriod" layout="row" layout-xs="column"> <md-input-container flex="20" flex-sm="100" flex-xs="100"> <label>{{\'application.academicLeaveStart\' | translate}}</label> <hois-value value="application.academicApplication.directiveStudent.startDate | hoisDate"></hois-value> </md-input-container> <md-input-container style="margin-left: 0px" flex="20" flex-sm="100" flex-xs="100" flex-offset-xs="0" flex-offset-sm="0" flex-offset="5"> <label>{{\'application.academicLeaveEnd\' | translate}}</label> <hois-value value="application.academicApplication.directiveStudent.endDate | hoisDate"></hois-value> </md-input-container> </div> <div ng-show="application.academicApplication.directiveStudent.isPeriod" layout="row" layout-xs="column"> <md-input-container flex="20" flex-sm="100" flex-xs="100"> <label>{{\'application.academicLeaveStart\' | translate}}</label> <hois-select ng-model="application.academicApplication.directiveStudent.studyPeriodStart" values="studyPeriods" disabled></hois-select> </md-input-container> <md-input-container flex="20" flex-sm="100" flex-xs="100"> <label>{{\'application.academicLeaveEnd\' | translate}}</label> <hois-select ng-model="application.academicApplication.directiveStudent.studyPeriodEnd" values="studyPeriods" disabled></hois-select> </md-input-container> </div> <div layout="row" layout-xs="column"> <md-input-container flex="20" flex-sm="100" flex-xs="100"> <label>{{\'application.academicLeaveRevocationDate\' | translate}}</label> <hois-value value="application.startDate | hoisDate"></hois-value> </md-input-container> </div> </div>'),a.put("application/templates/application.type.eksmat.edit.html",'<div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="60" flex-sm="100" flex-xs="100"> <label>{{\'application.reason\' | translate}}</label> <hois-classifier-select ng-model="application.reason" model-value-attr="code" required main-classifier-code="EKSMAT_POHJUS"></hois-classifier-select> </md-input-container> </div>'),a.put("application/templates/application.type.eksmat.view.html",'<div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="60" flex-sm="100" flex-xs="100"> <label>{{\'application.reason\' | translate}}</label> <hois-classifier-value ng-model="application.reason" main-classifier-code="EKSMAT_POHJUS"></hois-classifier-value> </md-input-container> </div>'),a.put("application/templates/application.type.finm.edit.html",'<div> <div layout="row" layout-sm="column" layout-xs="column" class="form-readonly"> <md-input-container class="label-only" flex="60" flex-sm="100" flex-xs="100"> <label>{{\'application.validFinancialSource\' | translate}}</label> <hois-classifier-value ng-model="application.oldFin" model-value-attr="code" main-classifier-code="FINALLIKAS"></hois-classifier-value> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column" class="form-readonly"> <md-input-container class="label-only" flex="60" flex-sm="100" flex-xs="100"> <label>{{\'application.validFinancialSourceSpecification\' | translate}}</label> <hois-classifier-value ng-model="application.oldFinSpecific" model-value-attr="code" main-classifier-code="FINTAPSUSTUS"></hois-classifier-value> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column" class="form-readonly"> <md-input-container class="label-only" flex="60" flex-sm="100" flex-xs="100"> <label>{{\'application.newFinancialSource\' | translate}}</label> <hois-classifier-value ng-model="application.newFin" model-value-attr="code" main-classifier-code="FINALLIKAS"></hois-classifier-value> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="60" flex-sm="100" flex-xs="100"> <label>{{\'application.newFinancialSourceSpecification\' | translate}}</label> <hois-classifier-select ng-model="application.newFinSpecific" model-value-attr="code" main-classifier-code="FINTAPSUSTUS" filter-values="[application.oldFinSpecific]" required></hois-classifier-select> </md-input-container> </div> </div>'),
a.put("application/templates/application.type.finm.view.html",'<div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container class="label-only" flex="60" flex-sm="100" flex-xs="100"> <label>{{\'application.validFinancialSource\' | translate}}</label> <hois-classifier-value ng-model="application.oldFin" main-classifier-code="FINALLIKAS"></hois-classifier-value> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container class="label-only" flex="60" flex-sm="100" flex-xs="100"> <label>{{\'application.validFinancialSourceSpecification\' | translate}}</label> <hois-classifier-value ng-model="application.oldFinSpecific" main-classifier-code="FINTAPSUSTUS"></hois-classifier-value> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container class="label-only" flex="60" flex-sm="100" flex-xs="100"> <label>{{\'application.newFinancialSource\' | translate}}</label> <hois-classifier-value ng-model="application.newFin" main-classifier-code="FINALLIKAS"></hois-classifier-value> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="60" flex-sm="100" flex-xs="100"> <label>{{\'application.newFinancialSourceSpecification\' | translate}}</label> <hois-classifier-value ng-model="application.newFinSpecific" main-classifier-code="FINTAPSUSTUS"></hois-classifier-value> </md-input-container> </div> </div>'),a.put("application/templates/application.type.okava.edit.html",'<div> <div layout="row" layout-sm="column" layout-xs="column" class="form-readonly"> <md-input-container class="label-only" flex="60" flex-sm="100" flex-xs="100"> <label>{{\'application.validCurriculumVersion\' | translate}}</label> <hois-value value="currentLanguageNameField(application.oldCurriculumVersion)"></hois-value> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column" class="form-readonly"> <md-input-container class="label-only" flex="60" flex-sm="100" flex-xs="100"> <label>{{\'application.validStudyForm\' | translate}}</label> <hois-classifier-value ng-model="application.oldStudyForm" model-value-attr="code" main-classifier-code="OPPEVORM"></hois-classifier-value> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="60" flex-sm="100" flex-xs="100"> <label>{{\'application.newCurriculumVersion\' | translate}}</label> <hois-select ng-model="application.newCurriculumVersion.id" ng-change="newCurriculumVersionSelected()" values="curriculumVersions" ng-required="application.type === \'AVALDUS_LIIK_OKAVA\'"></hois-select> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="60" flex-sm="100" flex-xs="100"> <label>{{\'application.newStudyForm\' | translate}}</label> <hois-classifier-select ng-model="application.newStudyForm" main-classifier-code="OPPEVORM" show-only-values="allowedStudyForms" model-value-attr="code" required></hois-classifier-select> </md-input-container> </div> </div>'),a.put("application/templates/application.type.okava.view.html",'<div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container class="label-only" flex="60" flex-sm="100" flex-xs="100"> <label>{{\'application.validCurriculumVersion\' | translate}}</label> <hois-value value="currentLanguageNameField(application.oldCurriculumVersion)"></hois-value> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container class="label-only" flex="60" flex-sm="100" flex-xs="100"> <label>{{\'application.validStudyForm\' | translate}}</label> <hois-classifier-value ng-model="application.oldStudyForm" main-classifier-code="OPPEVORM"></hois-classifier-value> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="60" flex-sm="100" flex-xs="100"> <label>{{\'application.newCurriculumVersion\' | translate}}</label> <hois-value value="currentLanguageNameField(application.newCurriculumVersion)"></hois-value> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="60" flex-sm="100" flex-xs="100"> <label>{{\'application.newStudyForm\' | translate}}</label> <hois-classifier-value ng-model="application.newStudyForm" main-classifier-code="OPPEVORM"></hois-classifier-value> </md-input-container> </div> </div>'),a.put("application/templates/application.type.ovorm.edit.html",'<div> <div layout="row" layout-sm="column" layout-xs="column" class="form-readonly"> <md-input-container class="label-only" flex="60" flex-sm="100" flex-xs="100"> <label>{{\'application.validStudyForm\' | translate}}</label> <hois-classifier-value ng-model="application.oldStudyForm" model-value-attr="code" main-classifier-code="OPPEVORM"></hois-classifier-value> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="60" flex-sm="100" flex-xs="100"> <label>{{\'application.newStudyForm\' | translate}}</label> <hois-classifier-select ng-model="application.newStudyForm" model-value-attr="code" main-classifier-code="OPPEVORM" criteria="{higher: true}" filter-values="[application.oldStudyForm]" required></hois-classifier-select> </md-input-container> </div> </div>'),a.put("application/templates/application.type.ovorm.view.html",'<div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container class="label-only" flex="60" flex-sm="100" flex-xs="100"> <label>{{\'application.validStudyForm\' | translate}}</label> <hois-classifier-value ng-model="application.oldStudyForm" main-classifier-code="OPPEVORM"></hois-classifier-value> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="60" flex-sm="100" flex-xs="100"> <label>{{\'application.newStudyForm\' | translate}}</label> <hois-classifier-value ng-model="application.newStudyForm" main-classifier-code="OPPEVORM"></hois-classifier-value> </md-input-container> </div> </div>'),a.put("application/templates/application.type.valis.edit.html",'<div> <div flex> <fieldset tabindex="1"> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'main.abroadStudies\' | translate}} *</legend> <div layout="column"> <md-input-container layout="row" layout-align="start center" flex="60"> <md-radio-group name="isAbroad" ng-model="application.isAbroad" ng-change="isAbroadChanged()" required layout="row"> <md-radio-button ng-value="false" aria-label="estonian educational institution">{{ \'application.inEstonianEducationalInstitution\' | translate }}</md-radio-button> <md-radio-button ng-value="true" aria-label="abroad educational institution">{{ \'application.inAbroadEducationalInstitution\' | translate }}</md-radio-button> </md-radio-group> </md-input-container> <div layout="row" flex="20" md-colors="{color: \'warn-A400\'}" ng-if="applicationForm.$submitted" ng-messages="applicationForm.isAbroad.$error"> <div ng-message="required">{{\'main.messages.error.inputFieldIsRequired\' | translate}}</div> </div> <div layout="row" layout-sm="column" layout-xs="column" ng-hide="application.isAbroad"> <md-input-container flex="60" flex-sm="100" flex-xs="100"> <label>{{\'main.educationInstitution\' | translate}}</label> <hois-classifier-select ng-model="application.ehisSchool" main-classifier-code="EHIS_KOOL" filter-values="[studentEhisSchool]" by-property="ehisSchool" model-value-attr="code" ng-required="!application.isAbroad"></hois-classifier-select> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column" ng-hide="!application.isAbroad"> <md-input-container flex="60" flex-sm="100" flex-xs="100"> <label class="textInput">{{\'main.educationInstitution\' | translate}}</label> <input type="text" ng-model="application.abroadSchool" ng-required="application.isAbroad"> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column" ng-hide="!application.isAbroad"> <md-input-container flex="60" flex-sm="100" flex-xs="100"> <label>{{\'main.country\' | translate}}</label> <hois-classifier-select ng-model="application.country" main-classifier-code="RIIK" filter-values="[\'RIIK_EST\']" model-value-attr="code" ng-required="application.isAbroad"></hois-classifier-select> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <div flex="60" flex-sm="100" flex-xs="100" ng-include="\'application/templates/period.html\'" ng-init="labelStart=\'application.abroadStudiesStart\';labelEnd=\'application.abroadStudiesEnd\'"></div> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="60" flex-sm="100" flex-xs="100"> <label>{{\'main.purposeOfStudies\' | translate}}</label> <hois-classifier-select ng-model="application.abroadPurpose" main-classifier-code="VALISOPE_EESMARK" model-value-attr="code" required></hois-classifier-select> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="60" flex-sm="100" flex-xs="100"> <label>{{\'main.programmeOfStudies\' | translate}}</label> <hois-classifier-select ng-model="application.abroadProgramme" main-classifier-code="VALISKOOL_PROGRAMM" model-value-attr="code" required></hois-classifier-select> </md-input-container> </div> </div> </fieldset> </div> <div>&nbsp;<div> <div layout="column" flex> <fieldset tabindex="1"> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'main.subjects\' | translate}}</legend> <md-button class="md-raised" href="" ng-click="addPlannedSubjectRow()">{{\'main.button.addRow\' | translate}}</md-button> <div layout="row" class="top-margin"> <input style="display:none" type="number" readonly name="plannedSubjectLength" ng-model="plannedSubjectLength" ng-model-options="{ getterSetter: true }" min="1"> <div md-colors="{color: \'warn-A400\'}" ng-messages="applicationForm.plannedSubjectLength.$error"> <div ng-if="applicationForm.$submitted" ng-message="min">{{\'main.messages.error.atLeastOneShouldBeAdded\' | translate}}</div> </div> </div> <table md-table class="secondary-table"> <thead md-head> <tr md-row> <th md-column><span>{{\'application.plannedSubject\' | translate}} *</span></th> <th md-column><span>{{\'application.substitutableSubject\' | translate}} *</span></th> <th md-column></th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="plannedSubject in application.plannedSubjects | orderBy: \'id\'" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell> <md-input-container> <input type="text" ng-model="plannedSubject.name" aria-label="planned subject name" required> </md-input-container> </td> <td md-cell> <md-input-container> <hois-select multiple ng-model="plannedSubject.subjectsSelected" ng-change="subjectsSelected(plannedSubject)" aria-label="planned subject equivalent subject" values="studentSubjects" required></hois-select> </md-input-container> </td> <td md-cell> <md-button class="remove nomargin" ng-click="removeFromArray(application.plannedSubjects, plannedSubject)">&times;</md-button> </td> </tr> </tbody> </table> </fieldset> </div> </div> <div>&nbsp;<div></div></div></div></div>'),a.put("application/templates/application.type.valis.view.html",'<div> <div layout="row"> <md-input-container flex="20" flex-xs="100"> <label>{{\'main.abroadStudies\' | translate}}</label> <hois-value value="application.isAbroad ? (\'main.yes\' | translate) : (\'main.no\' | translate)"></hois-value> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column" ng-hide="application.isAbroad"> <md-input-container flex="60" flex-sm="100" flex-xs="100"> <label>{{\'main.educationInstitution\' | translate}}</label> <hois-classifier-value ng-model="application.ehisSchool" main-classifier-code="EHIS_KOOL"></hois-classifier-value> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column" ng-hide="!application.isAbroad"> <md-input-container flex="60" flex-sm="100" flex-xs="100"> <label class="textInput">{{\'main.educationInstitution\' | translate}}</label> <hois-value value="application.abroadSchool"></hois-value> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column" ng-hide="!application.isAbroad"> <md-input-container flex="60" flex-sm="100" flex-xs="100"> <label>{{\'main.country\' | translate}}</label> <hois-classifier-value ng-model="application.country" main-classifier-code="RIIK"></hois-classifier-value> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <div flex="60" flex-sm="100" flex-xs="100" ng-include="\'application/templates/period.view.html\'" ng-init="labelStart=\'application.abroadStudiesStart\';labelEnd=\'application.abroadStudiesEnd\'"></div> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="60" flex-sm="100" flex-xs="100"> <label>{{\'main.purposeOfStudies\' | translate}}</label> <hois-classifier-value ng-model="application.abroadPurpose" main-classifier-code="VALISOPE_EESMARK"></hois-classifier-value> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="60" flex-sm="100" flex-xs="100"> <label>{{\'main.programmeOfStudies\' | translate}}</label> <hois-classifier-value ng-model="application.abroadProgramme" main-classifier-code="VALISKOOL_PROGRAMM"></hois-classifier-value> </md-input-container> </div> </div> <div> <div layout="column" flex> <div layout="row" class="top-margin"> <h2>{{\'main.subjects\' | translate}} </h2> </div> <table md-table class="secondary-table"> <thead md-head> <tr md-row> <th md-column><span>{{\'application.plannedSubject\' | translate}} *</span></th> <th md-column><span>{{\'application.substitutableSubject\' | translate}} *</span></th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="plannedSubject in application.plannedSubjects | orderBy: \'id\'" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell> {{plannedSubject.name}} </td> <td md-cell> {{subjectsListView(plannedSubject)}} </td> </tr> </tbody> </table> </div> </div>'),a.put("application/templates/period.html",'<div layout="row" class="horizontal-radio-group"> <md-input-container flex="20" flex-xs="100"> <label class="md-required common-label">{{\'application.periodType\' | translate}}</label> </md-input-container> <md-input-container layout="row" layout-align="start center" flex="20"> <md-radio-group name="isPeriod" ng-model="application.isPeriod" required ng-change="application.startDate=undefined;application.endDate=undefined;application.studyPeriodStart=undefined;application.studyPeriodEnd=undefined" layout="row"> <md-radio-button ng-value="true" aria-label="period">{{ \'main.period\' | translate }}</md-radio-button> <md-radio-button ng-value="false" aria-label="date">{{ \'main.date\' | translate }}</md-radio-button> </md-radio-group> </md-input-container> <div layout="row" flex="20" md-colors="{color: \'warn-A400\'}" ng-if="applicationForm.$submitted" ng-messages="applicationForm.isPeriod.$error"> <div ng-message="required">{{\'main.messages.error.inputFieldIsRequired\' | translate}}</div> </div> </div> <div ng-show="!application.isPeriod" layout="row" layout-xs="column"> <md-input-container flex="20"> <label>{{labelStart | translate}}</label> <md-datepicker ng-model="application.startDate" md-min-date="now" md-open-on-focus ng-required="!application.isPeriod"></md-datepicker> </md-input-container> <md-input-container style="margin-left: 0px" flex="20" flex-offset-xs="0" flex-offset-sm="0" flex-offset="5"> <label>{{labelEnd | translate}}</label> <md-datepicker ng-model="application.endDate" md-min-date="application.startDate" md-open-on-focus ng-required="!application.isPeriod"></md-datepicker> </md-input-container> </div> <div ng-show="application.isPeriod" layout="row" layout-xs="column"> <md-input-container flex="20"> <label>{{labelStart | translate}}</label> <hois-select ng-model="application.studyPeriodStart" values="studyPeriods" ng-required="application.isPeriod"></hois-select> </md-input-container> <md-input-container flex="20" flex-offset-xs="0" flex-offset-sm="0" flex-offset="5"> <label>{{labelEnd | translate}}</label> <hois-select ng-model="application.studyPeriodEnd" values="studyPeriods" ng-required="application.isPeriod"></hois-select> </md-input-container> </div>'),a.put("application/templates/period.view.html",'<div layout="row" layout-sm="column" layout-xs="column"> <md-input-container class="label-only" flex="60" flex-sm="100" flex-xs="100"> <label>{{\'application.periodType\' | translate}}</label> <hois-value value="application.isPeriod ? (\'main.period\' | translate) : (\'main.date\' | translate)"></hois-value> </md-input-container> </div> <div ng-show="!application.isPeriod" layout="row" layout-xs="column"> <md-input-container flex> <label>{{labelStart | translate}}</label> <hois-value value="application.startDate | hoisDate"></hois-value> </md-input-container> <md-input-container style="margin-left: 0px" flex flex-offset-xs="0" flex-offset-sm="0" flex-offset="5"> <label>{{labelEnd | translate}}</label> <hois-value value="application.endDate | hoisDate"></hois-value> </md-input-container> </div> <div ng-show="application.isPeriod" layout="row" layout-xs="column"> <md-input-container flex> <label>{{labelStart | translate}}</label> <hois-value value="studyPeriodView(application.studyPeriodStart)"></hois-value> </md-input-container> <md-input-container flex> <label>{{labelEnd | translate}}</label> <hois-value value="studyPeriodView(application.studyPeriodEnd)"></hois-value> </md-input-container> </div>'),a.put("curriculum/dialog/file.add.dialog.html",'<md-dialog aria-label="file add dialog" flex="40" flex-xs="100"> <form name="dialogForm" ng-cloak> <md-toolbar> <div class="md-toolbar-tools"> <h2>{{"main.addFile" | translate}}</h2> <span flex></span> <md-button class="md-icon-button" ng-click="cancel()"> <md-icon md-font-set="material-icons">close</md-icon> </md-button> </div> </md-toolbar> <md-dialog-content> <span flex></span> <div class="ois-form-layout" layout="column" layout-margin ng-cloak> <div layout="column"> <md-input-container flex> <label>{{\'ehis.fileType\' | translate}}</label> <hois-classifier-select ng-model="data.ehisFile" main-classifier-code="EHIS_FAIL" required model-value-attr="code" criteria="fileTypeCriteria"></hois-classifier-select> </md-input-container> <md-input-container flex> <lf-ng-md-file-input name="file" lf-files="data.file" lf-browse-label="{{\'main.addFile\' | translate}}" lf-remove-label="{{\'main.button.delete\' | translate}}" lf-placeholder="" lf-required lf-filesize="10MB"> </lf-ng-md-file-input> </md-input-container> <div ng-messages="dialogForm.file.$error"> <div class="invalid" ng-message="required">{{\'main.messages.error.selectFile\' | translate}}</div> <div ng-message="filesize" class="invalid">{{\'curriculum.error.fileSize\' | translate}}</div> </div> </div> </div> </md-dialog-content> <span flex></span> <md-dialog-actions layout="row" layout-align="start center"> <md-button class="md-raised md-primary" ng-click="submit()">{{"main.button.save" | translate}}</md-button> <md-button class="md-raised" ng-click="cancel()">{{"main.button.close" | translate}}</md-button> </md-dialog-actions> </form> </md-dialog>'),a.put("finalExamProtocol/higher/final.exam.higher.protocol.edit.html",'<div class="ois-form-layout-padding" ng-cloak> <div flex> <form ng-submit="finalExamProtocolForm.$valid && save()" novalidate layout="column" name="finalExamProtocolForm"> <div ng-include="\'finalExamProtocol/templates/final.exam.vocational.protocol.header.tmpl.html\'"></div> <div ng-if="!protocol.finalExam.date && !protocol.finalExam.committee" layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="20" flex-sm="100" flex-xs="100"> <label>{{\'finalExamProtocol.finalExamDate\' | translate}}</label> <md-datepicker ng-model="protocol.finalExamDate" ng-change="selectedFinalExamDateChanged()"></md-datepicker> </md-input-container> <md-input-container flex="30" flex-offset-gt-lg="10" flex-sm="100" flex-xs="100"> <label>{{\'finalExamProtocol.committee\' | translate}}</label> <md-select ng-model="protocol.committee" aria-label="committee" ng-change="selectedCommitteeChanged()"> <md-option ng-repeat="val in committees" ng-value="val">{{val.members}}</md-option> </md-select> </md-input-container> </div> <div ng-if="committeeMembers"> <md-table-container> <table md-table md-progress="protocol.$promise"> <thead md-head> <tr md-row> <th md-column>{{\'finalExamProtocol.name\' | translate}}</th> <th md-column>{{\'finalExamProtocol.role\' | translate}}</th> <th md-column>{{\'finalExamProtocol.present\' | translate}}</th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="row in committeeMembers | orderBy: \'memberName\'" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell>{{row.memberName}}</td> <td md-cell ng-if="row.isChairman">{{\'finalExamProtocol.chairman\' | translate}}</td> <td md-cell ng-if="!row.isChairman">{{\'finalExamProtocol.member\' | translate}}</td> <td md-cell> <md-checkbox aria-label="module" ng-model="row.isPresent"></md-checkbox> </td> </tr> </tbody> </table> </md-table-container> </div> <br> <div> <div flex> <md-table-container> <table md-table md-progress="protocol.$promise" multiple> <thead md-head> <tr md-row> <th md-column>{{\'finalExamProtocol.id\' | translate}}</th> <th md-column>{{\'student.label\' | translate}}</th> <th md-column>{{\'finalExamProtocol.finalGrade\' | translate}}</th> <th md-column></th> <th md-column></th> <th md-column></th> <th md-column></th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="row in protocol.protocolStudents | orderBy: \'fullname\'" ng-class-odd="\'odd\'" ng-class-even="\'even\'" md-select="row.id" md-select-id="row.id"> <td md-cell>{{row.id}}</td> <td md-cell>{{row.fullname}}</td> <td md-cell> </td><td md-cell> <md-button class="md-raised md-primary" type="submit">{{\'main.button.calculate\' | translate}}</md-button> </td> <td md-cell> <a ng-if="row.canBeDeleted && protocol.canBeEdited" ng-click="deleteProtocolStudent(row)" class="remove">&times;</a> </td> </tr> </tbody> </table> </md-table-container> </div> </div> <br> <div layout="row"> <md-button class="md-raised md-primary" type="submit">{{\'main.button.save\' | translate}}</md-button> <md-button class="md-raised md-primary" ng-click="confirm()">{{\'main.button.confirm\' | translate}}</md-button> <md-button class="md-raised" ng-click="back(\'#/finalExamVocationalProtocol/\')">{{\'main.button.back\' | translate}}</md-button> </div> </form> </div> </div>'),a.put("finalExamProtocol/higher/final.exam.higher.protocol.list.html",'<div class="ois-form-layout-padding ois-form-layout" ng-cloak> <div flex> <fieldset> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'main.searchlabel\' | translate}}</legend> <form name="searchForm" ng-submit="loadData()" novalidate class="nomargin"> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="50" flex-sm="100" flex-xs="100"> <label class="textInput">{{\'finalExamProtocol.studyPeriod\' | translate}}</label> <hois-select ng-model="criteria.studyPeriod" values="studyPeriods" required autofocus></hois-select> </md-input-container> <md-input-container flex="50" flex-sm="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"></md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="50" flex-sm="100" flex-xs="100"> <label class="textInput">{{\'finalExamProtocol.subject\' | translate}}</label> <hois-select ng-model="criteria.subject" type="subject"></hois-select> </md-input-container> <md-input-container flex="50" flex-sm="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label class="textInput">{{\'finalExamProtocol.teacher\' | translate}}</label> <hois-select ng-model="criteria.teacher" type="teacher"></hois-select> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="50" flex-sm="100" flex-xs="100"> <label class="textInput">{{\'finalExamProtocol.status\' | translate}}</label> <hois-classifier-select ng-model="criteria.status" main-classifier-code="PROTOKOLL_STAATUS" model-value-attr="code"></hois-classifier-select> </md-input-container> <md-input-container flex="50" flex-sm="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label class="textInput">{{\'finalExamProtocol.protocolNr\' | translate}}</label> <input type="text" ng-model="criteria.protocolNr"> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <div flex="50" flex-sm="100" flex-xs="100"> <div layout="column" flex> <div layout="row" flex> <md-input-container> <label>{{\'finalExamProtocol.insertedFrom\' | translate}}</label> <md-datepicker ng-model="criteria.insertedFrom"></md-datepicker> </md-input-container> <md-input-container flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'finalExamProtocol.insertedThru\' | translate}}</label> <md-datepicker ng-model="criteria.insertedThru" md-min-date="criteria.insertedFrom"></md-datepicker> </md-input-container> </div> </div> </div> <div flex="50" flex-sm="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <div layout="column" flex> <div layout="row" flex> <md-input-container> <label>{{\'finalExamProtocol.confirmedFrom\' | translate}}</label> <md-datepicker ng-model="criteria.confirmDateFrom"></md-datepicker> </md-input-container> <md-input-container flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'finalExamProtocol.confirmedThru\' | translate}}</label> <md-datepicker ng-model="criteria.confirmDateThru" md-min-date="criteria.confirmDateFrom"></md-datepicker> </md-input-container> </div> </div> </div> </div> <div layout="row"> <md-button type="submit" class="md-raised md-primary">{{\'main.button.search\' | translate}}</md-button> <md-button class="md-raised" ng-click="clearSearch()">{{\'main.button.clear\' | translate}}</md-button> <md-button class="md-raised" ng-href="#/finalExamHigherProtocols/new" ng-if="formState.canCreateProtocol">{{\'main.button.create\' | translate}}</md-button> </div> <div flex-xs="0" flex-gt-xs="0" flex-gt-sm="50"></div> </form> </fieldset> </div> </div> <div layout-padding> <div flex> <md-table-container> <table md-table md-progress="tabledata.$promise"> <thead md-head md-order="criteria.order" md-on-reorder="loadData"> <tr md-row> <th md-column>{{\'finalExamProtocol.protocolNr\' | translate}}</th> <th md-column>{{\'finalExamProtocol.protocolType\' | translate}}</th> <th md-column>{{\'finalExamProtocol.subject\' | translate}}</th> <th md-column>{{\'finalExamProtocol.teacher\' | translate}}</th> <th md-column>{{\'finalExamProtocol.status\' | translate}}</th> <th md-column>{{\'finalExamProtocol.insertedDate\' | translate}}</th> <th md-column>{{\'finalExamProtocol.confirmedDate\' | translate}}</th> <th md-column>{{\'finalExamProtocol.confirmer\' | translate}}</th> <th md-column></th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="row in tabledata.content" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell> <a ng-href="#/finalExamHigherProtocol/{{::row.id}}/view">{{::row.protocolNr}}</a> </td> <td md-cell>{{currentLanguageNameField(row.protocolType)}}</td> <td md-cell>{{currentLanguageNameField(row.subject)}}</td> <td md-cell>{{row.teachers.join(\', \')}}</td> <td md-cell>{{currentLanguageNameField(row.status)}}</td> <td md-cell>{{row.inserted | hoisDate}}</td> <td md-cell>{{row.confirmDate | hoisDate}}</td> <td md-cell>{{::row.confirmer}}</td> <td md-cell> <md-button ng-if="!row.confirmDate || (row.confirmDate && auth.isAdmin())" md-no-ink class="md-primary change-button" ng-href="#/finalExamHigherProtocol/{{::row.id}}/edit">{{\'main.button.change\' | translate}}</md-button> </td> </tr> </tbody> </table> </md-table-container> <md-table-pagination md-limit="criteria.size" md-limit-options="[10, 20, 50]" md-page="criteria.page" md-total="{{tabledata.totalElements}}" md-on-paginate="loadData" md-label="{page: \'{{\'main.page\' | translate}}:\', rowsPerPage: \'{{\'main.rowPerPage\' | translate}}:\', of: \'{{\'main.of\' | translate}}\'}" md-page-select></md-table-pagination> </div> </div>'),a.put("finalExamProtocol/higher/final.exam.higher.protocol.new.html",'<div class="ois-form-layout-padding" ng-cloak> <div flex> <form ng-submit="finalExamProtocolNewForm.$valid && submit()" novalidate layout="column" name="finalExamProtocolNewForm"> <div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="100" flex-sm="100" flex-xs="100"> <label class="textInput">{{\'finalExamProtocol.studyPeriod\' | translate}}</label> <hois-select ng-model="formState.studyPeriod" values="studyPeriods" ng-change="studyPeriodChange()" required autofocus></hois-select> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex flex-sm="100"> <label class="textInput">{{\'finalExamProtocol.subject\' | translate}}</label> <hois-select ng-model="formState.subject" values="formState.subjects" ng-change="subjectChange()" required></hois-select> </md-input-container> </div> <br> <div layout="row"> <label flex="10" flex-sm="30" flex-xs="30" class="common-label">{{\'finalExamProtocol.type\' | translate}}</label> <hois-classifier-radio layout="row" ng-model="formState.protocolType" model-value-attr="code" main-classifier-code="PROTOKOLLI_LIIK" required ng-disabled="formState.readOnly" class="md-primary" required></hois-classifier-radio> </div> <br> <div flex> <md-table-container> <table md-table md-progress="tabledata.$promise" md-row-select multiple ng-model="formState.selectedStudents"> <thead md-head> <tr md-row flex> <th md-column> <span>{{\'student.label\' | translate}}</span> </th> <th md-column> <span>{{\'student.idcode\' | translate}}</span> </th> <th md-column> <span>{{\'finalExamProtocol.curriculumCode\' | translate}}</span> </th> </tr> </thead> <tbody md-body> <tr md-row md-select="row.studentId" ng-repeat="row in tabledata.content | orderBy: \'fullname\'" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell>{{row.fullname}}</td> <td md-cell>{{row.idcode}}</td> <td md-cell>{{row.curriculumCode}}</td> </tr> </tbody> </table> </md-table-container> </div> <br> <div layout="row"> <md-button class="md-raised md-primary" type="submit">{{\'finalExamProtocol.create\' | translate}}</md-button> <md-button class="md-raised" ng-click="back(\'#/finalExamHigherProtocols/\')">{{\'main.button.back\' | translate}}</md-button> </div> </div> </form> </div> </div>'),a.put("finalExamProtocol/templates/final.exam.higher.protocol.header.tmpl.html",'<div class="form-readonly"> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex flex-sm="100" flex-xs="100"> <label>{{\'finalExamProtocol.protocolNr\' | translate}}</label> <hois-value value="protocol.protocolNr"></hois-value> </md-input-container> <md-input-container flex flex-sm="100" flex-xs="100"> <label>{{\'finalExamProtocol.inserted\' | translate}} / {{\'moduleProtocol.confirmDate\' | translate}}</label> <hois-value value="protocol.inserted | hoisDate"></hois-value> </md-input-container> <md-input-container flex flex-sm="100" flex-xs="100"> <label>{{\'finalExamProtocol.studyLevel\' | translate}}</label> <hois-value value=""></hois-value> </md-input-container> <md-input-container flex flex-sm="100" flex-xs="100"> <label>{{\'finalExamProtocol.subject\' | translate}}</label> <hois-value value=""></hois-value> </md-input-container> <md-input-container flex flex-sm="100" flex-xs="100"> <label>{{\'finalExamProtocol.subjectEt\' | translate}}</label> <hois-value value=""></hois-value> </md-input-container> <md-input-container flex flex-sm="100" flex-xs="100"> <label>{{\'finalExamProtocol.studyPeriod\' | translate}}</label> <hois-value value=""></hois-value> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex flex-sm="100" flex-xs="100"> <label>{{\'finalExamProtocol.status\' | translate}}</label> <hois-value value="currentLanguageNameField(protocol.status)"></hois-value> </md-input-container> <md-input-container flex flex-sm="100" flex-xs="100"> </md-input-container> <md-input-container flex flex-sm="100" flex-xs="100"> <label>{{\'finalExamProtocol.teacher\' | translate}}</label> <hois-value value=""></hois-value> </md-input-container> <md-input-container flex flex-sm="100" flex-xs="100"> <label>{{\'finalExamProtocol.credits\' | translate}}</label> <hois-value value="\' \' + (\'finalExamProtocol.higherCreditsUnit\' | translate)"></hois-value> </md-input-container> <md-input-container flex flex-sm="100" flex-xs="100"> <label>{{\'finalExamProtocol.subjectEn\' | translate}}</label> <hois-value value=""></hois-value> </md-input-container> <md-input-container flex flex-sm="100" flex-xs="100"> <label>{{\'finalExamProtocol.assessment\' | translate}}</label> <hois-classifier-value ng-model="" main-classifier-code="KORGHINDAMISVIIS"></hois-classifier-value> </md-input-container> </div> <br> <div ng-if="protocol.finalExam.date" layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex flex-sm="100" flex-xs="100"> <label>{{\'finalExamProtocol.finalExamDate\' | translate}}</label> <hois-value value="protocol.finalExamDate"></hois-value> </md-input-container> </div> <div ng-if="protocol.finalExam.committee" layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex flex-sm="100" flex-xs="100"> <label>{{\'finalExamProtocol.teacher\' | translate}}</label> <hois-value value="protocol.teacher"></hois-value> </md-input-container> </div> </div>'),
a.put("finalExamProtocol/templates/final.exam.protocol.mobile.sign.dialog.html",'<md-dialog> <form> <md-dialog-content> <div class="md-dialog-content" layout="column" layout-align="center center"> <p>{{ \'finalExamProtocol.mobileSign.instructions\' | translate }}</p> <h1>{{challengeID}}</h1> </div> </md-dialog-content> </form> </md-dialog>'),a.put("finalExamProtocol/templates/final.exam.vocational.protocol.header.tmpl.html",'<div class="form-readonly" ng-if="protocol.finalExamDate !== null || route.current.locals.isView"> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex flex-sm="100" flex-xs="100"> <label>{{\'finalExamProtocol.protocolNr\' | translate}}</label> <hois-value value="protocol.protocolNr"></hois-value> </md-input-container> <md-input-container flex flex-sm="100" flex-xs="100"> <label>{{\'finalExamProtocol.inserted\' | translate}} / {{\'moduleProtocol.confirmDate\' | translate}}</label> <hois-value ng-if="protocol.confirmed" value="(protocol.inserted | hoisDate).concat(\' / \').concat(protocol.confirmed | hoisDate)"></hois-value> <hois-value ng-if="!protocol.confirmed" value="protocol.inserted | hoisDate"></hois-value> </md-input-container> <md-input-container flex flex-sm="100" flex-xs="100"> <label>{{\'finalExamProtocol.studyLevel\' | translate}}</label> <hois-value value="currentLanguageNameField(protocol.studyLevel)"></hois-value> </md-input-container> <md-input-container flex flex-sm="100" flex-xs="100"> <label>{{\'finalExamProtocol.module\' | translate}}</label> <hois-value value="currentLanguageNameField(protocol.protocolVdata.curriculumVersionOccupationModule)" href-value="\'#/occupationModule/\' + protocol.protocolVdata.curriculum + \'/\' + protocol.protocolVdata.curriculumVersion.id + \'/\' + protocol.protocolVdata.curriculumModule + \'/\' + protocol.protocolVdata.curriculumVersionOccupationModule.id + \'/view\'"></hois-value> </md-input-container> <md-input-container flex flex-sm="100" flex-xs="100"> <label>{{\'finalExamProtocol.studyPeriod\' | translate}}</label> <hois-value value="currentLanguageNameField(protocol.protocolVdata.studyYear)"></hois-value> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex flex-sm="100" flex-xs="100"> <label>{{\'finalExamProtocol.status\' | translate}}</label> <hois-value value="currentLanguageNameField(protocol.status)"></hois-value> </md-input-container> <md-input-container flex flex-sm="100" flex-xs="100"> <label>{{\'finalExamProtocol.confirmer\' | translate}}</label> <hois-value value="protocol.confirmedBy"></hois-value> </md-input-container> <md-input-container flex flex-sm="100" flex-xs="100"> <label>{{\'finalExamProtocol.implementationPlan\' | translate}}</label> <hois-value value="currentLanguageNameField(protocol.protocolVdata.curriculumVersion)"></hois-value> </md-input-container> <md-input-container flex flex-sm="100" flex-xs="100"> <label>{{\'finalExamProtocol.credits\' | translate}}</label> <hois-value value="protocol.protocolVdata.moduleCredits + \' \' + (\'finalExamProtocol.vocationalCreditsUnit\' | translate)"></hois-value> </md-input-container> <md-input-container flex flex-sm="100" flex-xs="100"> <label>{{\'finalExamProtocol.assessment\' | translate}}</label> <hois-classifier-value ng-model="protocol.protocolVdata.assessment" main-classifier-code="KUTSEHINDAMISVIIS"></hois-classifier-value> </md-input-container> </div> <br> <div ng-if="protocol.finalExam.date" layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex flex-sm="100" flex-xs="100"> <label>{{\'finalExamProtocol.finalExamDate\' | translate}}</label> <hois-value value="protocol.finalExamDate"></hois-value> </md-input-container> </div> <div ng-if="protocol.finalExam.committee" layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex flex-sm="100" flex-xs="100"> <label>{{\'finalExamProtocol.teacher\' | translate}}</label> <hois-value value="protocol.teacher"></hois-value> </md-input-container> <md-input-container flex flex-sm="100" flex-xs="100"> <label>{{\'finalExamProtocol.committeeChairman\' | translate}}</label> <hois-value value="protocol.committeeChairman"></hois-value> </md-input-container> </div> </div> <div class="form-readonly" ng-if="protocol.finalExamDate === null && !route.current.locals.isView"> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex flex-sm="100" flex-xs="100"> <label>{{\'finalExamProtocol.protocolNr\' | translate}}</label> <hois-value value="protocol.protocolNr"></hois-value> </md-input-container> <md-input-container flex flex-sm="100" flex-xs="100"> <label>{{\'finalExamProtocol.inserted\' | translate}}</label> <hois-value value="protocol.inserted | hoisDate"></hois-value> </md-input-container> <md-input-container flex flex-sm="100" flex-xs="100"> <label>{{\'finalExamProtocol.implementationPlan\' | translate}}</label> <hois-value value="currentLanguageNameField(protocol.protocolVdata.curriculumVersion)"></hois-value> </md-input-container> <md-input-container flex flex-sm="100" flex-xs="100"> <label>{{\'finalExamProtocol.module\' | translate}}</label> <hois-value value="currentLanguageNameField(protocol.protocolVdata.curriculumVersionOccupationModule)" href-value="\'#/occupationModule/\' + protocol.protocolVdata.curriculum + \'/\' + protocol.protocolVdata.curriculumVersion.id + \'/\' + protocol.protocolVdata.curriculumModule + \'/\' + protocol.protocolVdata.curriculumVersionOccupationModule.id + \'/view\'"></hois-value> </md-input-container> <md-input-container flex flex-sm="100" flex-xs="100"> <label>{{\'finalExamProtocol.studyPeriod\' | translate}}</label> <hois-value value="currentLanguageNameField(protocol.protocolVdata.studyYear)"></hois-value> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex flex-sm="100" flex-xs="100"> <label>{{\'finalExamProtocol.status\' | translate}}</label> <hois-value value="currentLanguageNameField(protocol.status)"></hois-value> </md-input-container> <md-input-container flex flex-sm="100" flex-xs="100"> <label>{{\'finalExamProtocol.studyLevel\' | translate}}</label> <hois-value value="currentLanguageNameField(protocol.studyLevel)"></hois-value> </md-input-container> <md-input-container flex flex-sm="100" flex-xs="100"> <label>{{\'finalExamProtocol.teacher\' | translate}}</label> <hois-value value="currentLanguageNameField(protocol.protocolVdata.teacher)"></hois-value> </md-input-container> <md-input-container flex flex-sm="100" flex-xs="100"> <label>{{\'finalExamProtocol.credits\' | translate}}</label> <hois-value value="protocol.protocolVdata.moduleCredits + \' \' + (\'finalExamProtocol.vocationalCreditsUnit\' | translate)"></hois-value> </md-input-container> <md-input-container flex flex-sm="100" flex-xs="100"> <label>{{\'finalExamProtocol.assessment\' | translate}}</label> <hois-classifier-value ng-model="protocol.protocolVdata.assessment" main-classifier-code="KUTSEHINDAMISVIIS"></hois-classifier-value> </md-input-container> </div> <br> <br> <div ng-if="protocol.committeeChairman !== null" class="form-readonly"> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="20" flex-sm="100" flex-xs="100"> <label>{{\'finalExamProtocol.finalExamDate\' | translate}}</label> <hois-value value="protocol.finalExamDate"></hois-value> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="20" flex-sm="100" flex-xs="100"> <label>{{\'finalExamProtocol.teacher\' | translate}}</label> <hois-value value="currentLanguageNameField(protocol.protocolVdata.teacher)"></hois-value> </md-input-container> <md-input-container flex="30" flex-sm="100" flex-xs="100"> <label>{{\'finalExamProtocol.committeeChairman\' | translate}}</label> <hois-value value="protocol.committeeChairman"></hois-value> </md-input-container> </div> </div> </div>'),a.put("finalExamProtocol/vocational/final.exam.vocational.protocol.edit.html",'<div class="ois-form-layout-padding" ng-cloak> <div flex> <form ng-submit="finalExamProtocolForm.$valid && save()" novalidate layout="column" name="finalExamProtocolForm"> <div ng-include="\'finalExamProtocol/templates/final.exam.vocational.protocol.header.tmpl.html\'"></div> <div ng-if="protocol.committeeChairman === null"> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="10" flex-lg="20" flex-md="20" flex-sm="100" flex-xs="100"> <label>{{\'finalExamProtocol.finalExamDate\' | translate}}</label> <md-datepicker ng-model="protocol.finalExamDate" ng-change="selectedFinalExamDateChanged()"></md-datepicker> </md-input-container> <md-input-container flex="30" flex-offset-gt-lg="10" flex-sm="100" flex-xs="100"> <label>{{\'finalExamProtocol.committee\' | translate}}</label> <md-select ng-model="protocol.committee" aria-label="committee" ng-change="selectedCommitteeChanged()"> <md-option ng-repeat="val in committees" ng-value="val">{{val.members}}</md-option> </md-select> </md-input-container> </div> <div ng-if="committeeMembers"> <md-table-container> <table md-table md-progress="protocol.$promise"> <thead md-head> <tr md-row> <th md-column>{{\'finalExamProtocol.name\' | translate}}</th> <th md-column>{{\'finalExamProtocol.role\' | translate}}</th> <th md-column>{{\'finalExamProtocol.present\' | translate}}</th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="row in committeeMembers | orderBy: \'memberName\'" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell>{{row.memberName}}</td> <td md-cell ng-if="row.isChairman">{{\'finalExamProtocol.chairman\' | translate}}</td> <td md-cell ng-if="!row.isChairman">{{\'finalExamProtocol.member\' | translate}}</td> <td md-cell> <md-checkbox aria-label="module" ng-model="row.isPresent"></md-checkbox> </td> </tr> </tbody> </table> </md-table-container> </div> </div> <br> <div> <div flex> <md-table-container> <table md-table md-progress="protocol.$promise" multiple> <thead md-head> <tr md-row> <th md-column>{{\'finalExamProtocol.id\' | translate}}</th> <th md-column>{{\'student.label\' | translate}}</th> <th md-column>{{\'finalExamProtocol.grade\' | translate}}</th> <th md-column></th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="row in protocol.protocolStudents | orderBy: \'fullname\' track by $index" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell>{{$index + 1}}</td> <td md-cell>{{row.fullname}}</td> <td md-cell> <hois-select style="margin:0px;width:2em" ng-model="row.grade" values="grades" show-property="value" value-property="code" aria-label="grade" ng-change="gradeChanged()" ng-disabled="!protocol.canBeEdited"></hois-select> </td> <td md-cell> <a ng-if="row.canBeDeleted && protocol.canBeEdited" ng-click="deleteProtocolStudent(row)" class="remove">&times;</a> </td> </tr> </tbody> </table> </md-table-container> </div> </div> <br> <div layout="row"> <md-button class="md-raised md-primary" type="submit" ng-if="protocol.canBeEdited">{{\'main.button.save\' | translate}}</md-button> <md-button ng-if="formState.canConfirm===true" class="md-raised" ng-click="confirm()">{{\'main.button.confirm\' | translate}}</md-button> <md-button ng-if="protocol.canBeDeleted" class="md-raised" ng-click="delete()">{{\'main.button.delete\' | translate}}</md-button> <md-button class="md-raised" ng-href="#/finalExamVocationalProtocols">{{\'main.button.back\' | translate}}</md-button> <a ng-show="formState.protocolPdfUrl" ng-href="{{formState.protocolPdfUrl}}" target="_blank" class="md-button md-raised">{{\'main.button.print\' | translate}}</a> <a ng-show="protocol.oisFile" ng-href="{{getUrl(protocol.oisFile, \'protocol\')}}" target="_blank" rel="noopener noreferrer" class="md-button md-raised">{{\'moduleProtocol.downloadSigned\' | translate}}</a> </div> </form> </div> </div>'),a.put("finalExamProtocol/vocational/final.exam.vocational.protocol.list.html",'<div class="ois-form-layout-padding ois-form-layout" ng-cloak> <div flex> <fieldset> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'main.searchlabel\' | translate}}</legend> <form name="searchForm" ng-submit="searchForm.$valid && loadData()" novalidate class="nomargin"> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="50" flex-sm="100" flex-xs="100"> <label class="textInput">{{\'finalExamProtocol.studyYear\' | translate}}</label> <hois-select ng-model="criteria.studyYear" type="studyyear" select-current-study-year required autofocus></hois-select> </md-input-container> <md-input-container ng-if="auth.isAdmin()" flex="50" flex-sm="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label class="textInput">{{\'finalExamProtocol.teacher\' | translate}}</label> <hois-select ng-model="criteria.teacher" type="teacher"></hois-select> </md-input-container> <div ng-if="!auth.isAdmin()" flex="50" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"></div> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="50" flex-sm="100" flex-xs="100"> <label class="textInput">{{\'finalExamProtocol.curriculumVersion\' | translate}}</label> <hois-select ng-model="criteria.curriculumVersion" type="curriculumversion" criteria="{higher: false}"></hois-select> </md-input-container> <div flex="50" flex-sm="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <hois-autocomplete label="finalExamProtocol.module" ng-model="criteria.moduleObject" method="vocationalmodules"></hois-autocomplete> </div> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="50" flex-sm="100" flex-xs="100"> <label class="textInput">{{\'finalExamProtocol.status\' | translate}}</label> <hois-classifier-select ng-model="criteria.status" main-classifier-code="PROTOKOLL_STAATUS" model-value-attr="code"></hois-classifier-select> </md-input-container> <md-input-container flex="50" flex-sm="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label class="textInput">{{\'finalExamProtocol.protocolNr\' | translate}}</label> <input type="text" ng-model="criteria.protocolNr"> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <div flex="50" flex-sm="100" flex-xs="100"> <div layout="column" flex> <div layout="row" flex> <md-input-container> <label>{{\'finalExamProtocol.insertedFrom\' | translate}}</label> <md-datepicker ng-model="criteria.insertedFrom"></md-datepicker> </md-input-container> <md-input-container flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'finalExamProtocol.insertedThru\' | translate}}</label> <md-datepicker ng-model="criteria.insertedThru" md-min-date="criteria.insertedFrom"></md-datepicker> </md-input-container> </div> </div> </div> <div flex="50" flex-sm="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <div layout="column" flex> <div layout="row" flex> <md-input-container> <label>{{\'finalExamProtocol.confirmedFrom\' | translate}}</label> <md-datepicker ng-model="criteria.confirmDateFrom"></md-datepicker> </md-input-container> <md-input-container flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'finalExamProtocol.confirmedThru\' | translate}}</label> <md-datepicker ng-model="criteria.confirmDateThru" md-min-date="criteria.confirmDateFrom"></md-datepicker> </md-input-container> </div> </div> </div> </div> <div layout="row"> <md-button type="submit" class="md-raised md-primary">{{\'main.button.search\' | translate}}</md-button> <md-button class="md-raised" ng-click="clearSearch()">{{\'main.button.clear\' | translate}}</md-button> <md-button class="md-raised" ng-href="#/finalExamVocationalProtocols/new" ng-if="formState.canCreateProtocol">{{\'main.button.create\' | translate}}</md-button> </div> <div flex-xs="0" flex-gt-xs="0" flex-gt-sm="50"></div> </form> </fieldset> </div> </div> <div layout-padding> <div flex> <md-table-container> <table md-table md-progress="tabledata.$promise"> <thead md-head md-order="criteria.order" md-on-reorder="loadData"> <tr md-row> <th md-column>{{\'finalExamProtocol.protocolNr\' | translate}}</th> <th md-column>{{\'finalExamProtocol.teacher\' | translate}}</th> <th md-column>{{\'finalExamProtocol.curriculumVersionModule\' | translate}}</th> <th md-column>{{\'finalExamProtocol.status\' | translate}}</th> <th md-column>{{\'finalExamProtocol.insertedDate\' | translate}}</th> <th md-column>{{\'finalExamProtocol.confirmedDate\' | translate}}</th> <th md-column>{{\'finalExamProtocol.confirmer\' | translate}}</th> <th md-column></th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="row in tabledata.content" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell> <a ng-href="#/finalExamVocationalProtocols/{{::row.id}}/view">{{::row.protocolNr}}</a> </td> <td md-cell>{{row.teacher}}</td> <td md-cell>{{curriculumVersionModule(row)}}</td> <td md-cell>{{currentLanguageNameField(row.status)}}</td> <td md-cell>{{row.inserted | hoisDate}}</td> <td md-cell>{{row.confirmDate | hoisDate}}</td> <td md-cell>{{::row.confirmer}}</td> <td md-cell> <md-button ng-if="!row.confirmDate || (row.confirmDate && auth.isAdmin())" md-no-ink class="md-primary change-button" ng-href="#/finalExamVocationalProtocols/{{::row.id}}/edit">{{\'main.button.change\' | translate}}</md-button> </td> </tr> </tbody> </table> </md-table-container> <md-table-pagination md-limit="criteria.size" md-limit-options="[10, 20, 50]" md-page="criteria.page" md-total="{{tabledata.totalElements}}" md-on-paginate="loadData" md-label="{page: \'{{\'main.page\' | translate}}:\', rowsPerPage: \'{{\'main.rowPerPage\' | translate}}:\', of: \'{{\'main.of\' | translate}}\'}" md-page-select></md-table-pagination> </div> </div>'),a.put("finalExamProtocol/vocational/final.exam.vocational.protocol.new.html",'<div class="ois-form-layout-padding" ng-cloak> <div flex> <form ng-submit="finalExamProtocolNewForm.$valid && submit()" novalidate layout="column" name="finalExamProtocolNewForm"> <div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="50" flex-sm="100" flex-xs="100"> <label class="textInput">{{\'finalExamProtocol.studyYear\' | translate}}</label> <hois-select ng-model="formState.studyYear" type="studyyear" select-current-study-year required autofocus></hois-select> </md-input-container> <md-input-container flex="50" flex-sm="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label class="textInput">{{\'finalExamProtocol.teacher\' | translate}}</label> <hois-select ng-model="formState.teacher" type="teacher" required ng-disabled="auth.isTeacher()"></hois-select> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex flex-sm="100"> <label class="textInput">{{\'finalExamProtocol.implementationPlan\' | translate}}</label> <hois-select ng-model="formState.curriculumVersion" values="formState.curriculumVersions" ng-change="curriculumVersionChange()" required></hois-select> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex flex-sm="100"> <label class="textInput">{{\'finalExamProtocol.module\' | translate}}</label> <hois-select ng-model="formState.curriculumVersionOccupationModule" values="formState.curriculumVersionOccupationModules" ng-change="curriculumVersionOccupationModuleChange()" required></hois-select> </md-input-container> </div> <br> <div flex> <md-table-container> <table md-table md-progress="tabledata.$promise" md-row-select multiple ng-model="formState.selectedStudents"> <thead md-head> <tr md-row flex> <th md-column> <span>{{\'student.label\' | translate}}</span> </th> <th md-column> <span>{{\'student.idcode\' | translate}}</span> </th> <th md-column> <span>{{\'finalExamProtocol.studentGroup\' | translate}}</span> </th> </tr> </thead> <tbody md-body> <tr md-row md-select="row.studentId" ng-repeat="row in tabledata.content | orderBy: \'fullname\'" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell>{{row.fullname}}</td> <td md-cell>{{row.idcode}}</td> <td md-cell>{{row.studentGroup}}</td> </tr> </tbody> </table> </md-table-container> </div> <br> <div layout="row"> <md-button class="md-raised md-primary" type="submit">{{\'finalExamProtocol.create\' | translate}}</md-button> <md-button class="md-raised" ng-click="back(\'#/finalExamVocationalProtocols/\')">{{\'main.button.back\' | translate}}</md-button> </div> </div> </form> </div> </div>'),a.put("finalExamProtocol/vocational/final.exam.vocational.protocol.view.html",'<div class="ois-form-layout-padding" ng-cloak> <div flex> <form layout="column" name="finalExamProtocolForm"> <div ng-include="\'finalExamProtocol/templates/final.exam.vocational.protocol.header.tmpl.html\'"></div> <div> <div flex> <md-table-container> <table md-table md-progress="protocol.$promise" multiple> <thead md-head> <tr md-row> <th md-column>{{\'finalExamProtocol.id\' | translate}}</th> <th md-column>{{\'student.label\' | translate}}</th> <th md-column>{{\'finalExamProtocol.grade\' | translate}}</th> <th md-column>{{\'finalExamProtocol.occupationAndCertificateNr\' | translate}}</th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="row in protocol.protocolStudents | orderBy: \'fullname\' track by $index" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell>{{$index + 1}}</td> <td md-cell>{{row.fullname}}</td> <td md-cell>{{gradeValue(row.grade)}}</td> <td md-cell></td> </tr> </tbody> </table> </md-table-container> </div> </div> <br> <div layout="row"> <md-button class="md-raised" ng-click="back(\'#/finalExamVocationalProtocols/\')">{{\'main.button.back\' | translate}}</md-button> </div> </form> </div> </div>'),a.put("higherCurriculum/version/higher.module.edit.html",'<div class="ois-form-layout-padding"> <form name="higherModuleForm" ng-cloak> <div> <h2>{{"module.addToughtModule" | translate}}</h2> <span flex></span> </div> <span flex></span> <div class="ois-form-layout" layout="column" layout-margin ng-cloak> <div layout="column"> <div layout="row"> <md-input-container flex> <label>{{\'curriculum.specialty.specialty\' | translate}}</label> <md-select multiple ng-model="data.specialitiesReferenceNumbers" required ng-change="getSubjects()"> <md-option ng-repeat="speciality in specialities | orderBy: \'nameEt\'" ng-value="speciality.id"> {{currentLanguageNameField(speciality)}} </md-option> </md-select> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex> <label>{{\'module.type\' | translate}}</label> <md-select ng-model="data.typeObject" required> <md-option ng-repeat="type in moduleTypes | filter: {\'code\': \'KORGMOODUL_M\'}" ng-value="type"> {{currentLanguageNameField(type)}} </md-option> <md-option ng-repeat="type in moduleTypes | filter: {\'code\': \'!KORGMOODUL_M\'} | orderBy: \'nameEt\'" ng-value="type"> {{currentLanguageNameField(type)}} </md-option> </md-select> </md-input-container> </div> <div ng-if="data.typeObject.code === \'KORGMOODUL_M\'" layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex> <label>{{\'module.typeNameEt\' | translate}}</label> <input ng-model="data.typeNameEt" type="text" required md-maxlength="255"> </md-input-container> <md-input-container flex> <label>{{\'module.typeNameEn\' | translate}}</label> <input ng-model="data.typeNameEn" type="text" required md-maxlength="255"> </md-input-container> </div> <md-input-container flex> <label>{{\'module.nameEt\' | translate}}</label> <input ng-model="data.nameEt" type="text" required md-maxlength="255"> </md-input-container> <md-input-container flex> <label>{{\'module.nameEn\' | translate}}</label> <input ng-model="data.nameEn" type="text" required md-maxlength="255"> </md-input-container> <md-input-container> <label>{{\'module.objectivesEt\' | translate}}</label> <textarea ng-model="data.objectivesEt" md-maxlength="20000" max-rows="10"></textarea> </md-input-container> <md-input-container> <label>{{\'module.objectivesEn\' | translate}}</label> <textarea ng-model="data.objectivesEn" md-maxlength="20000" max-rows="10"></textarea> </md-input-container> <md-input-container> <label>{{\'module.studyOutcomesEt\' | translate}}</label> <textarea ng-model="data.outcomesEt" md-maxlength="20000" max-rows="10"></textarea> </md-input-container> <md-input-container> <label>{{\'module.studyOutcomesEn\' | translate}}</label> <textarea ng-model="data.outcomesEn" md-maxlength="20000" max-rows="10"></textarea> </md-input-container> <div flex> <fieldset ng-show="formState.moduleMustHaveSubjects"> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'module.optionals\' | translate}}</legend> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="45" flex-sm="100" flex-xs="100"> <label>{{\'module.optionalNameEt\' | translate}}</label> <input ng-model="optionalNameEt" type="text" md-maxlength="255"> </md-input-container> <md-input-container flex="45" flex-sm="100" flex-xs="100"> <label>{{\'module.optionalNameEn\' | translate}}</label> <input ng-model="optionalNameEn" type="text" md-maxlength="255"> </md-input-container> <md-button class="md-icon-button" ng-click="addElectiveModule()" ng-if="!editingElectiveModule" ng-disabled="!optionalNameEt || !optionalNameEn"> <md-icon ng-class="\'md-primary md-hue-2\'" md-font-set="material-icons">add</md-icon> </md-button> <md-button class="md-icon-button" ng-click="finishEditElectiveModule()" ng-if="editingElectiveModule" ng-disabled="!optionalNameEt || !optionalNameEn"> <md-icon ng-class="\'md-primary md-hue-2\'" md-font-set="material-icons">done</md-icon> </md-button> </div> <div ng-repeat="electiveModule in data.electiveModules | orderBy: \'nameEt\'" class="secondary-table-row" flex layout="row"> <div flex="45" class="elective-module"> <a href="" ng-click="editElectiveModule(electiveModule)">{{electiveModule.nameEt}}</a> </div> <div flex="45" class="elective-module"> <a href="" ng-click="editElectiveModule(electiveModule)">{{electiveModule.nameEn}}</a> </div> <div> <a class="remove nomargin" ng-click="deleteElectiveModule(electiveModule)">&times;</a> </div> </div> </fieldset> </div> <div>&nbsp;</div> <md-input-container flex ng-show="formState.moduleMustHaveSubjects"> <label>{{\'module.optionalModulesNumber\' | translate}}</label> <input name="electiveModulesNumber" ng-model="data.electiveModulesNumber" pattern="^\\d+$" type="number" required min="0" max="999"> <div ng-messages="higherModuleForm.electiveModulesNumber.$error" ng-show="higherModuleForm.electiveModulesNumber.$dirty"> <div ng-message="min"> {{\'main.messages.error.positive\' | translate}} </div> <div ng-message="min"> {{\'stateCurriculum.enter.credits.positive\' | translate}} </div> <div ng-message="max"> {{\'curriculum.error.max999\' | translate}} </div> <div ng-message="pattern"> {{\'stateCurriculum.enter.credits.integer\' | translate}} </div> </div> </md-input-container> <div flex> <fieldset ng-show="formState.moduleMustHaveSubjects"> <legend md-colors="{color: \'primary-800\'}" ng-class="{invalid: higherModuleForm.$submitted && !subjectsValid()}" class="md-title-small">{{\'curriculum.version.subjects\' | translate}}&nbsp;*</legend> <div layout="row"> <md-input-container flex> <label>{{\'curriculum.version.subjectsName\' | translate}}</label> <md-select ng-model="data.selectedSubject" ng-change="addSubject()" ng-disabled="!data.specialitiesReferenceNumbers ||\r\n                data.specialitiesReferenceNumbers.length === 0"> <md-option ng-repeat="option in subjects | filter: subjectNotAdded | orderBy: \'code\'" ng-value="option"> {{option.code}} - {{currentLanguageNameField(option)}} </md-option> </md-select> </md-input-container> </div> <table md-table class="secondary-table" ng-show="data.subjects.length > 0"> <thead md-head> <tr md-row> <th md-column>{{\'curriculum.version.subjectsName\' | translate}}</th> <th md-column>EAP</th> <th md-column>{{\'module.optionalSubject\' | translate}}</th> <th md-column>{{\'module.linkOptional\' | translate}}</th> <th md-column></th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="subject in data.subjects | orderBy: \'code\'"> <td md-cell>{{subject.code}} - {{currentLanguageNameField(subject)}}</td> <td md-cell>{{subject.credits}}</td> <td md-cell> <md-checkbox ng-model="subject.optional" aria-label="subject is mandatory" ng-change="setCompulsoryStudyCredits(subject)"></md-checkbox> </td> <td md-cell> <div ng-if="subject.optional && data.electiveModules.length > 0" layout="row" flex> <md-input-container flex class="elective-module-subject"> <label>{{\'module.optional\' | translate}}</label> <md-select ng-model="subject.electiveModule"> <md-option ng-value="null"> </md-option> <md-option ng-repeat="option in data.electiveModules | orderBy: \'nameEt\'" ng-value="option.referenceNumber"> {{currentLanguageNameField(option)}} </md-option> </md-select> </md-input-container> </div> </td> <td md-cell> <md-button flex="20" class="remove nomargin" ng-click="removeSubject(subject)">&times;</md-button> </td> </tr> </tbody> </table> </fieldset> </div> <div>&nbsp;</div> <md-input-container flex> <label>{{\'module.optionalEap\' | translate}}</label> <input name="optionalStudyCredits" ng-model="data.optionalStudyCredits" type="number" required ng-change="data.totalCredits = data.optionalStudyCredits + data.compulsoryStudyCredits" min="0" max="999" pattern="^\\d+(\\.\\d{1})?$"> <div ng-messages="higherModuleForm.optionalStudyCredits.$error" ng-show="higherModuleForm.optionalStudyCredits.$dirty"> <div ng-message="min"> {{\'main.messages.error.positive\' | translate}} </div> <div ng-message="max"> {{\'curriculum.error.max999\' | translate}} </div> <div ng-message="pattern"> {{\'stateCurriculum.error.decimalPresision\' | translate}} </div> </div> </md-input-container> <md-input-container flex ng-show="formState.moduleMustHaveSubjects"> <label>{{\'module.mandatoryEap\' | translate}}</label> <input ng-model="data.compulsoryStudyCredits" type="number" readonly> </md-input-container> <md-input-container flex ng-show="formState.moduleMustHaveSubjects"> <label>{{\'module.overallEap\' | translate}}</label> <input name="totalCredits" ng-model="data.totalCredits" type="number" readonly max="999"> <div ng-messages="higherModuleForm.totalCredits.$error" ng-show="higherModuleForm.totalCredits.$error"> <div ng-message="max"> {{\'curriculum.error.max999\' | translate}} </div> </div> </md-input-container> <span flex></span> </div> </div> <md-button class="md-raised md-primary" ng-click="save()">{{"main.button.save" | translate}}</md-button> <md-button ng-click="delete()" ng-if="data.id" class="md-raised">{{"main.button.delete" | translate}}</md-button> <md-button class="md-raised" ng-click="back(backToEditForm, higherModuleForm)">{{"main.button.back" | translate}}</md-button> </form> </div>'),a.put("higherCurriculum/version/higher.module.view.html",'<div class="ois-form-layout-padding"> <div> <h2>{{"module.viewToughtModule" | translate}}</h2> <span flex></span> </div> <span flex></span> <div class="ois-form-layout" layout="column" layout-margin ng-cloak> <div layout="column"> <div layout="row"> <md-input-container flex> <label>{{\'curriculum.specialty.specialty\' | translate}}</label> <md-select multiple ng-model="data.specialitiesReferenceNumbers" disabled> <md-option ng-repeat="speciality in specialities | orderBy: \'nameEt\'" ng-value="speciality.id"> {{currentLanguageNameField(speciality)}} </md-option> </md-select> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex> <label>{{\'module.type\' | translate}}</label> <md-select ng-model="data.typeObject" disabled> <md-option ng-repeat="type in moduleTypes | filter: {\'code\': \'KORGMOODUL_M\'}" ng-value="type"> {{currentLanguageNameField(type)}} </md-option> <md-option ng-repeat="type in moduleTypes | filter: {\'code\': \'!KORGMOODUL_M\'} | orderBy: \'nameEt\'" ng-value="type"> {{currentLanguageNameField(type)}} </md-option> </md-select> </md-input-container> </div> <div ng-if="data.typeObject.code === \'KORGMOODUL_M\'" layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex> <label>{{\'module.typeNameEt\' | translate}}</label> <input ng-model="data.typeNameEt" type="text" readonly> </md-input-container> <md-input-container flex> <label>{{\'module.typeNameEn\' | translate}}</label> <input ng-model="data.typeNameEn" type="text" readonly> </md-input-container> </div> <md-input-container flex> <label>{{\'module.nameEt\' | translate}}</label> <input ng-model="data.nameEt" type="text" readonly> </md-input-container> <md-input-container flex> <label>{{\'module.nameEn\' | translate}}</label> <input ng-model="data.nameEn" type="text" readonly> </md-input-container> <md-input-container> <label>{{\'module.objectivesEt\' | translate}}</label> <textarea ng-model="data.objectivesEt" readonly></textarea> </md-input-container> <md-input-container> <label>{{\'module.objectivesEn\' | translate}}</label> <textarea ng-model="data.objectivesEn" readonly></textarea> </md-input-container> <md-input-container> <label>{{\'module.studyOutcomesEt\' | translate}}</label> <textarea ng-model="data.outcomesEt" readonly></textarea> </md-input-container> <md-input-container> <label>{{\'module.studyOutcomesEn\' | translate}}</label> <textarea ng-model="data.outcomesEn" readonly></textarea> </md-input-container> <div flex> <fieldset ng-show="formState.moduleMustHaveSubjects"> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'module.optionals\' | translate}}</legend> <div ng-repeat="electiveModule in data.electiveModules | orderBy: \'nameEt\'" class="secondary-table-row" flex layout="row"> <div flex> <p class="elective-module">{{currentLanguageNameField(electiveModule)}}</p> </div> </div> </fieldset> </div> <div>&nbsp;</div> <md-input-container flex ng-show="formState.moduleMustHaveSubjects"> <label>{{\'module.optionalModulesNumber\' | translate}}</label> <input name="electiveModulesNumber" ng-model="data.electiveModulesNumber" type="number" readonly> </md-input-container> <div flex> <fieldset ng-show="formState.moduleMustHaveSubjects"> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'curriculum.version.subjects\' | translate}}&nbsp;</legend> <table md-table class="secondary-table" ng-show="data.subjects.length > 0"> <thead md-head> <tr md-row> <th md-column>{{\'curriculum.version.subjectsName\' | translate}}</th> <th md-column>EAP</th> <th md-column>{{\'module.optionalSubject\' | translate}}</th> <th md-column>{{\'module.linkOptional\' | translate}}</th> <th md-column></th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="subject in data.subjects | orderBy: \'code\'"> <td md-cell>{{subject.code}} - {{currentLanguageNameField(subject)}}</td> <td md-cell>{{subject.credits}}</td> <td md-cell> <md-checkbox ng-model="subject.optional" aria-label="subject is mandatory" disabled></md-checkbox> </td> <td md-cell> <div ng-if="subject.optional && data.electiveModules.length > 0" layout="row" flex> <md-input-container flex class="elective-module-subject"> <label>{{\'module.optional\' | translate}}</label> <md-select ng-model="subject.electiveModule" disabled> <md-option ng-value="null"> </md-option> <md-option ng-repeat="option in data.electiveModules | orderBy: \'nameEt\'" ng-value="option.referenceNumber"> {{currentLanguageNameField(option)}} </md-option> </md-select> </md-input-container> </div> </td> <td md-cell></td> </tr> </tbody> </table> </fieldset> </div> <div>&nbsp;</div> <md-input-container flex> <label>{{\'module.optionalEap\' | translate}}</label> <input name="optionalStudyCredits" ng-model="data.optionalStudyCredits" readonly> </md-input-container> <md-input-container flex ng-show="formState.moduleMustHaveSubjects"> <label>{{\'module.mandatoryEap\' | translate}}</label> <input ng-model="data.compulsoryStudyCredits" type="number" readonly> </md-input-container> <md-input-container flex ng-show="formState.moduleMustHaveSubjects"> <label>{{\'module.overallEap\' | translate}}</label> <input name="totalCredits" ng-model="data.totalCredits" type="number" readonly> </md-input-container> <span flex></span> </div> </div> <md-button class="md-raised" ng-click="back(backToViewForm)">{{"main.button.back" | translate}}</md-button> </div>'),
a.put("higherCurriculum/version/minor.speciality.edit.html",'<div class="ois-form-layout-padding"> <form name="minorSpecialityForm" ng-cloak> <span flex></span> <div class="ois-form-layout" layout="column" layout-margin ng-cloak> <div layout="column"> <md-input-container flex> <label>{{\'curriculum.minorSpecialty.nameEt\' | translate}}</label> <input ng-model="data.nameEt" type="text" required md-maxlength="255"> </md-input-container> <md-input-container flex> <label>{{\'curriculum.minorSpecialty.nameEn\' | translate}}</label> <input ng-model="data.nameEn" type="text" required md-maxlength="255"> </md-input-container> <md-input-container> <label>{{\'curriculum.minorSpecialty.objectivesEt\' | translate}}</label> <textarea ng-model="data.objectivesEt" md-maxlength="20000" max-rows="10"></textarea> </md-input-container> <md-input-container> <label>{{\'curriculum.minorSpecialty.objectivesEn\' | translate}}</label> <textarea ng-model="data.objectivesEn" md-maxlength="20000" max-rows="10"></textarea> </md-input-container> <md-input-container> <label>{{\'curriculum.minorSpecialty.outcomesEt\' | translate}}</label> <textarea ng-model="data.outcomesEt" md-maxlength="20000" max-rows="10"></textarea> </md-input-container> <md-input-container> <label>{{\'curriculum.minorSpecialty.outcomesEn\' | translate}}</label> <textarea ng-model="data.outcomesEn" md-maxlength="20000" max-rows="10"></textarea> </md-input-container> <div flex> <fieldset> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'module.optionals\' | translate}}</legend> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="45" flex-sm="100" flex-xs="100"> <label>{{\'module.optionalNameEt\' | translate}}</label> <input ng-model="optionalNameEt" type="text" md-maxlength="255"> </md-input-container> <md-input-container flex="45" flex-sm="100" flex-xs="100"> <label>{{\'module.optionalNameEn\' | translate}}</label> <input ng-model="optionalNameEn" type="text" md-maxlength="255"> </md-input-container> <md-button class="md-icon-button" ng-click="addElectiveModule()" ng-if="!editingElectiveModule" ng-disabled="!optionalNameEt || !optionalNameEn"> <md-icon ng-class="\'md-primary md-hue-2\'" md-font-set="material-icons">add</md-icon> </md-button> <md-button class="md-icon-button" ng-click="finishEditElectiveModule()" ng-if="editingElectiveModule" ng-disabled="!optionalNameEt || !optionalNameEn"> <md-icon ng-class="\'md-primary md-hue-2\'" md-font-set="material-icons">done</md-icon> </md-button> </div> <div ng-repeat="electiveModule in data.electiveModules | orderBy: currentLanguageNameField()" class="secondary-table-row" flex layout="row"> <div flex="45" class="elective-module"> <a href="" ng-click="editElectiveModule(electiveModule)">{{electiveModule.nameEt}}</a> </div> <div flex="45" class="elective-module"> <a href="" ng-click="editElectiveModule(electiveModule)">{{electiveModule.nameEn}}</a> </div> <div> <a flex="5" class="remove nomargin" ng-click="deleteElectiveModule(electiveModule)">&times;</a> </div> </div> </fieldset> </div> <div>&nbsp;</div> <md-input-container> <label>{{\'module.optionalModulesNumber\' | translate}}</label> <input name="electiveModulesNumber" ng-model="data.electiveModulesNumber" type="number" required min="0" max="999" pattern="^\\d+$"> <div ng-messages="minorSpecialityForm.electiveModulesNumber.$error" ng-show="minorSpecialityForm.electiveModulesNumber.$dirty"> <div ng-message="min"> {{\'main.messages.error.positive\' | translate}} </div> <div ng-message="max"> {{\'curriculum.error.max999\' | translate}} </div> <div ng-message="pattern"> {{\'stateCurriculum.enter.credits.integer\' | translate}} </div> </div> </md-input-container> <div> <fieldset> <legend md-colors="{color: \'primary-800\'}" ng-class="{invalid: minorSpecialityForm.$submitted && data.subjects.length == 0}" class="md-title-small">{{\'curriculum.version.subjects\' | translate}}&nbsp;*</legend> <div layout="row"> <md-input-container flex> <label>{{\'curriculum.version.subjectsName\' | translate}}</label> <md-select ng-model="data.selectedSubject" ng-change="addSubject()"> <md-option ng-repeat="option in subjects | filter: subjectNotAdded | orderBy: \'code\'" ng-value="option"> {{option.code}} - {{currentLanguageNameField(option)}} </md-option> </md-select> </md-input-container> </div> <table md-table class="secondary-table" ng-show="data.subjects.length > 0"> <thead md-head> <tr md-row> <th md-column>{{\'curriculum.version.subjectsName\' | translate}}</th> <th md-column>EAP</th> <th md-column>{{\'module.optionalSubject\' | translate}}</th> <th md-column>{{\'module.linkOptional\' | translate}}</th> <th md-column></th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="subject in data.subjects | orderBy: \'code\'"> <td md-cell>{{subject.code}} - {{currentLanguageNameField(subject)}}</td> <td md-cell>{{subject.credits}}</td> <td md-cell> <md-checkbox ng-model="subject.optional" aria-label="subject is mandatory" ng-change="setCompulsoryStudyCredits(subject)"></md-checkbox> </td> <td md-cell> <div ng-if="subject.optional && data.electiveModules.length > 0" layout="row"> <md-input-container flex class="elective-module-subject"> <label>{{\'module.optional\' | translate}}</label> <md-select ng-model="subject.electiveModule"> <md-option ng-value="null"> </md-option> <md-option ng-repeat="option in data.electiveModules | orderBy: \'nameEt\'" ng-value="option.referenceNumber"> {{currentLanguageNameField(option)}} </md-option> </md-select> </md-input-container> </div> </td> <td md-cell> <md-button flex="20" class="remove nomargin" ng-click="removeSubject(subject)">&times;</md-button> </td> </tr> </tbody> </table> </fieldset> </div> <div>&nbsp;</div> <md-input-container flex> <label>{{\'module.optionalEap\' | translate}}</label> <input name="optionalStudyCredits" ng-model="data.optionalStudyCredits" type="number" required ng-change="data.totalCredits = data.optionalStudyCredits + data.compulsoryStudyCredits" min="0" max="999" pattern="^\\d+(\\.\\d{1})?$"> <div ng-messages="minorSpecialityForm.optionalStudyCredits.$error" ng-show="minorSpecialityForm.optionalStudyCredits.$dirty"> <div ng-message="min"> {{\'main.messages.error.positive\' | translate}} </div> <div ng-message="max"> {{\'curriculum.error.max999\' | translate}} </div> <div ng-message="pattern"> {{\'stateCurriculum.error.decimalPresision\' | translate}} </div> </div> </md-input-container> <md-input-container flex> <label>{{\'module.mandatoryEap\' | translate}}</label> <input ng-model="data.compulsoryStudyCredits" type="number" readonly> </md-input-container> <md-input-container flex> <label>{{\'module.overallEap\' | translate}}</label> <input ng-model="data.totalCredits" type="number" readonly> </md-input-container> <span flex></span> </div> </div> <md-button class="md-raised md-primary" ng-click="save()">{{"main.button.save" | translate}}</md-button> <md-button ng-click="delete()" ng-if="data.id" class="md-raised">{{"main.button.delete" | translate}}</md-button> <md-button class="md-raised" ng-click="back(backToEditForm, minorSpecialityForm)">{{"main.button.back" | translate}}</md-button> </form> </div>'),a.put("higherCurriculum/version/minor.speciality.view.html",'<div class="ois-form-layout-padding"> <span flex></span> <div class="ois-form-layout" layout="column" layout-margin ng-cloak> <div layout="column"> <md-input-container flex> <label>{{\'curriculum.minorSpecialty.nameEt\' | translate}}</label> <input ng-model="data.nameEt" type="text" readonly> </md-input-container> <md-input-container flex> <label>{{\'curriculum.minorSpecialty.nameEn\' | translate}}</label> <input ng-model="data.nameEn" type="text" readonly> </md-input-container> <md-input-container> <label>{{\'curriculum.minorSpecialty.objectivesEt\' | translate}}</label> <textarea ng-model="data.objectivesEt" readonly></textarea> </md-input-container> <md-input-container> <label>{{\'curriculum.minorSpecialty.objectivesEn\' | translate}}</label> <textarea ng-model="data.objectivesEn" readonly></textarea> </md-input-container> <md-input-container> <label>{{\'curriculum.minorSpecialty.outcomesEt\' | translate}}</label> <textarea ng-model="data.outcomesEt" readonly></textarea> </md-input-container> <md-input-container> <label>{{\'curriculum.minorSpecialty.outcomesEn\' | translate}}</label> <textarea ng-model="data.outcomesEn" readonly></textarea> </md-input-container> <div flex> <fieldset> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'module.optionals\' | translate}}</legend> <div ng-repeat="electiveModule in data.electiveModules | orderBy: currentLanguageNameField()" class="secondary-table-row" flex layout="row"> <div flex> <p class="elective-module">{{currentLanguageNameField(electiveModule)}}</p> </div> </div> </fieldset> </div> <div>&nbsp;</div> <md-input-container> <label>{{\'module.optionalModulesNumber\' | translate}}</label> <input name="electiveModulesNumber" ng-model="data.electiveModulesNumber" type="number" readonly> </md-input-container> <div> <fieldset> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'curriculum.version.subjects\' | translate}}&nbsp;</legend> <table md-table class="secondary-table" ng-show="data.subjects.length > 0"> <thead md-head> <tr md-row> <th md-column>{{\'curriculum.version.subjectsName\' | translate}}</th> <th md-column>EAP</th> <th md-column>{{\'module.optionalSubject\' | translate}}</th> <th md-column>{{\'module.linkOptional\' | translate}}</th> <th md-column></th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="subject in data.subjects | orderBy: \'code\'"> <td md-cell>{{subject.code}} - {{currentLanguageNameField(subject)}}</td> <td md-cell>{{subject.credits}}</td> <td md-cell> <md-checkbox ng-model="subject.optional" aria-label="subject is mandatory" disabled></md-checkbox> </td> <td md-cell> <div ng-if="subject.optional && data.electiveModules.length > 0" layout="row"> <md-input-container flex class="elective-module-subject"> <label>{{\'module.optional\' | translate}}</label> <md-select ng-model="subject.electiveModule" disabled> <md-option ng-value="null"> </md-option> <md-option ng-repeat="option in data.electiveModules | orderBy: \'nameEt\'" ng-value="option.referenceNumber"> {{currentLanguageNameField(option)}} </md-option> </md-select> </md-input-container> </div> </td> <td md-cell></td> </tr> </tbody> </table> </fieldset> </div> <div>&nbsp;</div> <md-input-container flex> <label>{{\'module.optionalEap\' | translate}}</label> <input name="optionalStudyCredits" ng-model="data.optionalStudyCredits" type="number" readonly> </md-input-container> <md-input-container flex> <label>{{\'module.mandatoryEap\' | translate}}</label> <input ng-model="data.compulsoryStudyCredits" type="number" readonly> </md-input-container> <md-input-container flex> <label>{{\'module.overallEap\' | translate}}</label> <input ng-model="data.totalCredits" type="number" readonly> </md-input-container> <span flex></span> </div> </div> <md-button class="md-raised" ng-click="back(backToViewForm)">{{"main.button.back" | translate}}</md-button> </div>'),a.put("protocol/templates/module.protocol.header.tmpl.html",'<div class="form-readonly"> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex flex-sm="100" flex-xs="100"> <label>{{\'moduleProtocol.protocolNumber\' | translate}}</label> <hois-value value="protocol.protocolNr"></hois-value> </md-input-container> <md-input-container flex flex-sm="100" flex-xs="100"> <label>{{\'main.status\' | translate}}</label> <hois-value value="currentLanguageNameField(protocol.status)"></hois-value> </md-input-container> <md-input-container flex flex-sm="100" flex-xs="100"> <label>{{\'moduleProtocol.studyYear\' | translate}}</label> <hois-value value="currentLanguageNameField(protocol.protocolVdata.studyYear)"></hois-value> </md-input-container> <md-input-container flex flex-sm="100" flex-xs="100"> <label>{{\'moduleProtocol.insertedDate\' | translate}} / {{\'moduleProtocol.confirmDate\' | translate}}</label> <hois-value value="(protocol.inserted ? (protocol.inserted | hoisDate) : \'-\')  + \' / \' + (protocol.confirmDate ? (protocol.confirmDate | hoisDate) : \'-\')"></hois-value> </md-input-container> <md-input-container flex flex-sm="100" flex-xs="100"> <label>{{\'moduleProtocol.confirmer\' | translate}}</label> <hois-value value="protocol.confirmer ? protocol.confirmer : \'-\' "></hois-value> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex flex-sm="100" flex-xs="100"> <label>{{\'moduleProtocol.curriculumVersion\' | translate}}</label> <hois-value value="currentLanguageNameField(protocol.protocolVdata.curriculumVersion)"></hois-value> </md-input-container> <md-input-container flex flex-sm="100" flex-xs="100"> <label>{{\'moduleProtocol.module\' | translate}}</label> <hois-value value="currentLanguageNameField(protocol.protocolVdata.curriculumVersionOccupationModule)" href-value="\'#/occupationModule/\' + protocol.protocolVdata.curriculum + \'/\' + protocol.protocolVdata.curriculumVersion.id + \'/\' + protocol.protocolVdata.curriculumModule + \'/\' + protocol.protocolVdata.curriculumVersionOccupationModule.id + \'/view\'"></hois-value> </md-input-container> <md-input-container flex flex-sm="100" flex-xs="100"> <label>{{\'moduleProtocol.moduleCredits\' | translate}}</label> <hois-value value="protocol.protocolVdata.moduleCredits + \' \' + (\'moduleProtocol.creditsUnit\' | translate)"></hois-value> </md-input-container> <md-input-container flex flex-sm="100" flex-xs="100"> <label>{{\'moduleProtocol.moduleGrading\' | translate}}</label> <hois-classifier-value ng-model="protocol.protocolVdata.assessment" main-classifier-code="KUTSEHINDAMISVIIS"></hois-classifier-value> </md-input-container> <md-input-container flex flex-sm="100" flex-xs="100"> <label>{{\'teacher.label\' | translate}}</label> <hois-value value="currentLanguageNameField(protocol.protocolVdata.teacher)"></hois-value> </md-input-container> </div> </div>'),a.put("scholarship/student/scholarship.application.doktor.edit.html",'<div class="ois-form-layout-padding" ng-cloak> <fieldset tabindex="1"> <div class="form-readonly ois-form-layout-padding"> <div layout="row" flex> <md-input-container flex="45"> <label class="textInput">{{\'stipend.grantType\' | translate}}</label> <hois-classifier-value ng-model="stipend.type" main-classifier-code="STIPTOETUS"></hois-classifier-value> </md-input-container> <md-input-container flex="50" flex-offset="5"> <label>{{\'stipend.places\' | translate}}</label> <hois-value value="stipend.places"></hois-value> </md-input-container> </div> <div layout="row" flex> <md-input-container flex="45"> <label class="textInput">{{\'stipend.studyPeriod\' | translate}}</label> <hois-value value="currentLanguageNameField(stipend.studyPeriod)"></hois-value> </md-input-container> <md-input-container flex="50" flex-offset="5"> <label>{{\'stipend.amountPaid\' | translate}}</label> <hois-value value="stipend.amountPaid"></hois-value> </md-input-container> </div> <div layout="row" flex> <md-input-container flex="45"> <label class="textInput">{{\'stipend.studyForm\' | translate}}</label> <hois-classifier-value ng-model="stipend.studyForms" main-classifier-code="OPPEVORM" multiple></hois-classifier-value> </md-input-container> </div> <div layout="row" flex> <md-input-container flex="45"> <label class="textInput">{{\'stipend.studyPeriodDates\' | translate}}</label> <hois-value value="stipend.matriculationRange"></hois-value> </md-input-container> </div> </div> </fieldset></div>  <br> <fieldset tabindex="1"> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'stipend.student.myData\' | translate}}</legend> <div class="ois-form-layout-padding ois-form-layout" ng-cloak> <div flex> <form name="studentSubmitDataForm"> <div layout="column" flex> <div layout="row" flex> <md-input-container flex="45"> <label>{{\'stipend.student.bankAccount\' | translate}}</label> <input type="text" ng-model="studentSubmitData.bankAccount" name="bankAccount" required md-maxlength="50"> </md-input-container> </div> <div layout="row" flex> <md-input-container flex="100" flex-md="100" flex-sm="100" flex-xs="100"> <label>{{\'stipend.student.grantReason\' | translate}}</label> <textarea ng-model="studentSubmitData.addInfo" name="addInfo" md-maxlength="4000"></textarea> </md-input-container> </div> <br> <div layout="row"> <md-button class="md-raised md-primary" ng-if="studentSubmitData.canApply" ng-click="update(studentSubmitDataForm)">{{\'main.button.save\' | translate}}</md-button> <md-button class="md-raised" ng-if="studentSubmitData.canApply" ng-click="apply(studentSubmitDataForm)">{{\'stipend.student.apply\' | translate}}</md-button> <md-button class="md-raised" ng-click="back(\'#/scholarships/myData/grants\', studentSubmitDataForm)">{{\'main.button.back\' | translate}}</md-button> </div> </div> </form> </div> </div> </fieldset> '),a.put("scholarship/student/scholarship.application.doktor.view.html",'<div class="ois-form-layout-padding" ng-cloak> <fieldset tabindex="1"> <div class="form-readonly ois-form-layout-padding"> <div layout="row" flex> <md-input-container flex="45"> <label class="textInput">{{\'stipend.grantType\' | translate}}</label> <hois-classifier-value ng-model="stipend.type" main-classifier-code="STIPTOETUS"></hois-classifier-value> </md-input-container> <md-input-container flex="50" flex-offset="5"> <label>{{\'stipend.places\' | translate}}</label> <hois-value value="stipend.places"></hois-value> </md-input-container> </div> <div layout="row" flex> <md-input-container flex="45"> <label class="textInput">{{\'stipend.studyPeriod\' | translate}}</label> <hois-value value="currentLanguageNameField(stipend.studyPeriod)"></hois-value> </md-input-container> <md-input-container flex="50" flex-offset="5"> <label>{{\'stipend.amountPaid\' | translate}}</label> <hois-value value="stipend.amountPaid"></hois-value> </md-input-container> </div> <div layout="row" flex> <md-input-container flex="45"> <label class="textInput">{{\'stipend.studyForm\' | translate}}</label> <hois-classifier-value ng-model="stipend.studyForms" main-classifier-code="OPPEVORM" multiple></hois-classifier-value> </md-input-container> </div> <div layout="row" flex> <md-input-container flex="45"> <label class="textInput">{{\'stipend.studyPeriodDates\' | translate}}</label> <hois-value value="stipend.matriculationRange"></hois-value> </md-input-container> </div> </div> </fieldset> <br> <fieldset tabindex="1"> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{isStudent ? \'stipend.student.myData\' : \'stipend.student.studentData\' | translate}}</legend> <div class="form-readonly ois-form-layout-padding"> <div flex> <div layout="column" flex> <div layout="row" flex> <md-input-container flex="45"> <label>{{\'stipend.student.bankAccount\' | translate}}</label> <hois-value value="studentSubmitData.bankAccount"></hois-value> </md-input-container> </div> <div layout="row" flex> <md-input-container flex="100" flex-md="100" flex-sm="100" flex-xs="100"> <label>{{\'stipend.student.grantReason\' | translate}}</label> <hois-value value="studentSubmitData.addInfo"></hois-value> </md-input-container> </div> <br> <div layout="row"> <md-button class="md-raised md-primary" ng-if="canManage" ng-click="accept()">{{\'main.button.accept\' | translate}}</md-button> <md-button class="md-raised" ng-click="back(isStudent ? \'#/scholarships/myData/drGrants\' : \'#/scholarships/applications/grants\')">{{\'main.button.back\' | translate}}</md-button> </div> </div> </div> </div> </fieldset> </div>'),a.put("scholarship/student/scholarship.application.edit.html",'<div ng-include="templateName"></div>'),a.put("scholarship/student/scholarship.application.eri.edit.html",'<div class="ois-form-layout-padding" ng-cloak> <fieldset tabindex="1"> <div class="form-readonly ois-form-layout-padding"> <div layout="row" flex> <md-input-container flex="45"> <label class="textInput">{{\'stipend.grantType\' | translate}}</label> <hois-classifier-value ng-model="stipend.type" main-classifier-code="STIPTOETUS"></hois-classifier-value> </md-input-container> <md-input-container flex="50" flex-offset="5"> <label>{{\'stipend.places\' | translate}}</label> <hois-value value="stipend.places"></hois-value> </md-input-container> </div> <div layout="row" flex> <md-input-container flex="45"> <label class="textInput">{{\'stipend.studyPeriod\' | translate}}</label> <hois-value value="currentLanguageNameField(stipend.studyPeriod)"></hois-value> </md-input-container> <md-input-container flex="50" flex-offset="5"> <label>{{\'stipend.amountPaid\' | translate}}</label> <hois-value value="stipend.amountPaid"></hois-value> </md-input-container> </div> <div layout="row" flex> <md-input-container flex="45"> <label class="textInput">{{\'stipend.studyForm\' | translate}}</label> <hois-classifier-value ng-model="stipend.studyForms" main-classifier-code="OPPEVORM" multiple></hois-classifier-value> </md-input-container> <md-input-container flex="50" flex-offset="5"> <label class="textInput">{{\'stipend.averageMark\' | translate}}</label> <hois-value value="stipend.averageMark"></hois-value> </md-input-container> </div> <div layout="row" flex> <md-input-container flex="45"> <label class="textInput">{{\'stipend.curriculumCompletion\' | translate}}</label> <hois-value value="stipend.curriculumCompletion"></hois-value> </md-input-container> <md-input-container flex="50" flex-offset="5"> <label class="textInput">{{\'stipend.lastPeriodMark\' | translate}}</label> <hois-value value="stipend.lastPeriodMark"></hois-value> </md-input-container> </div> <div layout="row" flex> <md-input-container flex="45"> <label class="textInput">{{\'stipend.maxAbsences\' | translate}}</label> <hois-value value="stipend.maxAbsences"></hois-value> </md-input-container> <div flex="50" flex-offset="5"> <md-checkbox ng-model="stipend.isTeacherConfirm" disabled aria-label="Is teacher confirm"> {{\'stipend.isTeacherConfirm\' | translate}} </md-checkbox> </div> </div> <div layout="row" flex> <md-input-container flex="45"> <label class="textInput">{{\'stipend.studyPeriodDates\' | translate}}</label> <hois-value value="stipend.matriculationRange"></hois-value> </md-input-container> </div> </div> </fieldset> <br> <fieldset tabindex="1"> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'stipend.student.myData\' | translate}}</legend> <div class="form-readonly ois-form-layout-padding"> <div layout="row" flex> <md-input-container flex="45"> <label class="textInput">{{\'stipend.averageMark\' | translate}}</label> <hois-value value="studentInfo.averageMark"></hois-value> </md-input-container> <md-input-container flex="50" flex-offset="5"> <label>{{\'stipend.lastPeriodMark\' | translate}}</label> <hois-value value="studentInfo.lastPeriodMark"></hois-value> </md-input-container> </div> <div layout="row" flex> <md-input-container flex="45"> <label class="textInput">{{\'stipend.curriculumCompletion\' | translate}}</label> <hois-value value="studentInfo.curriculumCompletion"></hois-value> </md-input-container> <md-input-container flex="50" flex-offset="5"> <label>{{\'stipend.maxAbsences\' | translate}}</label> <hois-value value="studentInfo.absences"></hois-value> </md-input-container> </div> <div layout="row" flex> <md-input-container flex="45"> <label class="textInput">{{\'stipend.student.studentGroup\' | translate}}</label> <hois-value value="studentInfo.studentGroupCode"></hois-value> </md-input-container> <md-input-container flex="50" flex-offset="5"> <label class="textInput">{{\'main.contactNumber\' | translate}}</label> <input ng-model="studentSubmitData.phone" type="text" md-maxlength="100"> </md-input-container> </div> <div layout="row" flex> <md-input-container flex="45"> <label class="textInput">{{\'stipend.student.address\' | translate}}</label> <hois-value value="studentSubmitData.address"></hois-value> </md-input-container> <md-input-container flex="50" flex-offset="5"> <label class="textInput">{{\'main.email\' | translate}}</label> <input ng-model="studentSubmitData.email" type="email" md-maxlength="100"> </md-input-container> </div> </div> <div class="ois-form-layout-padding ois-form-layout" ng-cloak> <div flex> <ng-form name="studentSubmitDataForm"> <div layout="row" flex> <md-input-container flex="45" flex-md="100" flex-sm="100" flex-xs="100"> <label>{{\'stipend.student.bankAccount\' | translate}}</label> <input type="text" ng-model="studentSubmitData.bankAccount" name="bankAccount" required md-maxlength="50"> </md-input-container> <md-input-container flex="50" flex-md="100" flex-sm="100" flex-xs="100" flex-offset="5"> <label>{{\'stipend.student.bankAccountOwnerName\' | translate}}</label> <input type="text" ng-model="studentSubmitData.bankAccountOwnerName" name="bankAccount" required md-maxlength="100"> </md-input-container> </div> <div layout="row" flex> <md-input-container flex="45" flex-md="100" flex-sm="100" flex-xs="100"> <label>{{\'stipend.student.bankAccountOwnerIdcode\' | translate}}</label> <input type="text" ng-model="studentSubmitData.bankAccountOwnerIdcode" name="bankAccount" required md-maxlength="20"> </md-input-container> </div> <div layout="row"> <md-input-container flex="20" flex-md="100" flex-sm="100" flex-xs="100"> <label>{{\'stipend.student.stipToetusEriPeriod\' | translate}}</label> <input type="hidden"> </md-input-container> <md-input-container flex="35" flex-md="100" flex-sm="100" flex-xs="100" flex-offset="5"> <md-datepicker ng-model="studentSubmitData.scholarshipFrom" md-max-date="studentSubmitData.scholarshipThru" md-placeholder="{{\'main.from\' | translate}}"></md-datepicker> </md-input-container> <md-input-container flex="35" flex-md="100" flex-sm="100" flex-xs="100" flex-offset="5"> <md-datepicker ng-model="studentSubmitData.scholarshipThru" md-min-date="studentSubmitData.scholarshipFrom" md-placeholder="{{\'main.thru\' | translate}}"></md-datepicker> </md-input-container> </div> <div layout="row" flex> <md-input-container flex="100" flex-md="100" flex-sm="100" flex-xs="100"> <label>{{\'stipend.student.grantReason\' | translate}}</label> <textarea ng-model="studentSubmitData.addInfo" name="addInfo" md-maxlength="4000"></textarea> </md-input-container> </div> <br> <div ng-include="\'scholarship/student/scholarship.family.table.edit.html\'"></div> <br> <div ng-include="\'scholarship/scholarship.relatedFiles.edit.html\'"></div> <div layout="row"> <md-button class="md-raised md-primary" ng-if="studentSubmitData.canApply" ng-click="update(studentSubmitDataForm)">{{\'main.button.save\' | translate}}</md-button> <md-button class="md-raised" ng-if="studentSubmitData.canApply" ng-click="apply(studentSubmitDataForm)">{{\'stipend.student.apply\' | translate}}</md-button> <md-button class="md-raised" ng-click="back(\'#/scholarships/myData/grants\', studentSubmitDataForm)">{{\'main.button.back\' | translate}}</md-button> </div> </ng-form> </div> </div> </fieldset> </div>'),a.put("scholarship/student/scholarship.application.eri.view.html",'<div class="ois-form-layout-padding" ng-cloak> <fieldset tabindex="1"> <div class="form-readonly ois-form-layout-padding"> <div layout="row" flex> <md-input-container flex="45"> <label class="textInput">{{\'stipend.grantType\' | translate}}</label> <hois-classifier-value ng-model="stipend.type" main-classifier-code="STIPTOETUS"></hois-classifier-value> </md-input-container> <md-input-container flex="50" flex-offset="5"> <label>{{\'stipend.places\' | translate}}</label> <hois-value value="stipend.places"></hois-value> </md-input-container> </div> <div layout="row" flex> <md-input-container flex="45"> <label class="textInput">{{\'stipend.studyPeriod\' | translate}}</label> <hois-value value="currentLanguageNameField(stipend.studyPeriod)"></hois-value> </md-input-container> <md-input-container flex="50" flex-offset="5"> <label>{{\'stipend.amountPaid\' | translate}}</label> <hois-value value="stipend.amountPaid"></hois-value> </md-input-container> </div> <div layout="row" flex> <md-input-container flex="45"> <label class="textInput">{{\'stipend.studyForm\' | translate}}</label> <hois-classifier-value ng-model="stipend.studyForms" main-classifier-code="OPPEVORM" multiple></hois-classifier-value> </md-input-container> <md-input-container flex="50" flex-offset="5"> <label class="textInput">{{\'stipend.averageMark\' | translate}}</label> <hois-value value="stipend.averageMark"></hois-value> </md-input-container> </div> <div layout="row" flex> <md-input-container flex="45"> <label class="textInput">{{\'stipend.curriculumCompletion\' | translate}}</label> <hois-value value="stipend.curriculumCompletion"></hois-value> </md-input-container> <md-input-container flex="50" flex-offset="5"> <label class="textInput">{{\'stipend.lastPeriodMark\' | translate}}</label> <hois-value value="stipend.lastPeriodMark"></hois-value> </md-input-container> </div> <div layout="row" flex> <md-input-container flex="45"> <label class="textInput">{{\'stipend.maxAbsences\' | translate}}</label> <hois-value value="stipend.maxAbsences"></hois-value> </md-input-container> <div flex="50" flex-offset="5"> <md-checkbox ng-model="stipend.isTeacherConfirm" disabled aria-label="Is teacher confirm"> {{\'stipend.isTeacherConfirm\' | translate}} </md-checkbox> </div> </div> <div layout="row" flex> <md-input-container flex="45"> <label class="textInput">{{\'stipend.studyPeriodDates\' | translate}}</label> <hois-value value="stipend.matriculationRange"></hois-value> </md-input-container> </div> </div> </fieldset> <br> <fieldset tabindex="1"> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{isStudent() ? \'stipend.student.myData\' : \'stipend.student.studentData\' | translate}}</legend> <div class="form-readonly ois-form-layout-padding"> <div layout="row" flex> <md-input-container flex="45"> <label class="textInput">{{\'stipend.averageMark\' | translate}}</label> <hois-value value="studentInfo.averageMark"></hois-value> </md-input-container> <md-input-container flex="50" flex-offset="5"> <label>{{\'stipend.lastPeriodMark\' | translate}}</label> <hois-value value="studentInfo.lastPeriodMark"></hois-value> </md-input-container> </div> <div layout="row" flex> <md-input-container flex="45"> <label class="textInput">{{\'stipend.curriculumCompletion\' | translate}}</label> <hois-value value="studentInfo.curriculumCompletion"></hois-value> </md-input-container> <md-input-container flex="50" flex-offset="5"> <label>{{\'stipend.maxAbsences\' | translate}}</label> <hois-value value="studentInfo.absences"></hois-value> </md-input-container> </div> <div layout="row" flex> <md-input-container flex="45"> <label class="textInput">{{\'stipend.student.studentGroup\' | translate}}</label> <hois-value value="studentInfo.studentGroupCode"></hois-value> </md-input-container> <md-input-container flex="50" flex-offset="5"> <label class="textInput">{{\'main.contactNumber\' | translate}}</label> <hois-value value="studentSubmitData.phone"></hois-value> </md-input-container> </div> <div layout="row" flex> <md-input-container flex="45"> <label class="textInput">{{\'stipend.student.address\' | translate}}</label> <hois-value value="studentSubmitData.address"></hois-value> </md-input-container> <md-input-container flex="50" flex-offset="5"> <label class="textInput">{{\'main.email\' | translate}}</label> <hois-value value="studentSubmitData.email"></hois-value> </md-input-container> </div> </div> <div class="form-readonly ois-form-layout-padding" ng-cloak> <div flex> <div layout="row" flex> <md-input-container flex="45" flex-md="100" flex-sm="100" flex-xs="100"> <label>{{\'stipend.student.bankAccount\' | translate}}</label> <hois-value value="studentSubmitData.bankAccount"></hois-value> </md-input-container> <md-input-container flex="50" flex-md="100" flex-sm="100" flex-xs="100" flex-offset="5"> <label>{{\'stipend.student.bankAccountOwnerName\' | translate}}</label> <hois-value value="studentSubmitData.bankAccountOwnerName"></hois-value> </md-input-container> </div> <div layout="row" flex> <md-input-container flex="45" flex-md="100" flex-sm="100" flex-xs="100"> <label>{{\'stipend.student.bankAccountOwnerIdcode\' | translate}}</label> <hois-value value="studentSubmitData.bankAccountOwnerIdcode"></hois-value> </md-input-container> </div> <div layout="row"> <md-input-container flex="20" flex-md="100" flex-sm="100" flex-xs="100"> <label>{{\'stipend.student.stipToetusEriPeriod\' | translate}}</label> <input type="hidden"> </md-input-container> <md-input-container flex="35" flex-md="100" flex-sm="100" flex-xs="100" flex-offset="5"> <label>{{\'main.from\' | translate}}</label> <hois-value value="studentSubmitData.scholarshipFrom | hoisDate"></hois-value> </md-input-container> <md-input-container flex="35" flex-md="100" flex-sm="100" flex-xs="100" flex-offset="5"> <label>{{\'main.thru\' | translate}}</label> <hois-value value="studentSubmitData.scholarshipThru | hoisDate"></hois-value> </md-input-container> </div> <div layout="row" flex> <md-input-container flex="100" flex-md="100" flex-sm="100" flex-xs="100"> <label>{{\'stipend.student.grantReason\' | translate}}</label> <hois-value value="studentSubmitData.addInfo"></hois-value> </md-input-container> </div> <div ng-include="\'scholarship/student/scholarship.family.table.view.html\'"></div> <br> <div ng-include="\'scholarship/scholarship.relatedFiles.edit.html\'"></div> <div layout="row"> <md-button class="md-raised md-primary" ng-if="canManage" ng-click="accept()">{{\'main.button.accept\' | translate}}</md-button> <md-button class="md-raised" ng-click="back(isStudent ? \'#/scholarships/myData/grants\' : \'#/scholarships/applications/grants\')">{{\'main.button.back\' | translate}}</md-button> </div> </div> </div> </fieldset> </div>'),
a.put("scholarship/student/scholarship.application.pohi.edit.html",'<div class="ois-form-layout-padding" ng-cloak> <fieldset tabindex="1"> <div class="form-readonly ois-form-layout-padding"> <div layout="row" flex> <md-input-container flex="45"> <label class="textInput">{{\'stipend.grantType\' | translate}}</label> <hois-classifier-value ng-model="stipend.type" main-classifier-code="STIPTOETUS"></hois-classifier-value> </md-input-container> <md-input-container flex="50" flex-offset="5"> <label>{{\'stipend.places\' | translate}}</label> <hois-value value="stipend.places"></hois-value> </md-input-container> </div> <div layout="row" flex> <md-input-container flex="45"> <label class="textInput">{{\'stipend.studyPeriod\' | translate}}</label> <hois-value value="currentLanguageNameField(stipend.studyPeriod)"></hois-value> </md-input-container> <md-input-container flex="50" flex-offset="5"> <label>{{\'stipend.amountPaid\' | translate}}</label> <hois-value value="stipend.amountPaid"></hois-value> </md-input-container> </div> <div layout="row" flex> <md-input-container flex="45"> <label class="textInput">{{\'stipend.studyForm\' | translate}}</label> <hois-classifier-value ng-model="stipend.studyForms" main-classifier-code="OPPEVORM" multiple></hois-classifier-value> </md-input-container> <md-input-container flex="50" flex-offset="5"> <label class="textInput">{{\'stipend.averageMark\' | translate}}</label> <hois-value value="stipend.averageMark"></hois-value> </md-input-container> </div> <div layout="row" flex> <md-input-container flex="45"> <label class="textInput">{{\'stipend.curriculumCompletion\' | translate}}</label> <hois-value value="stipend.curriculumCompletion"></hois-value> </md-input-container> <md-input-container flex="50" flex-offset="5"> <label class="textInput">{{\'stipend.lastPeriodMark\' | translate}}</label> <hois-value value="stipend.lastPeriodMark"></hois-value> </md-input-container> </div> <div layout="row" flex> <md-input-container flex="45"> <label class="textInput">{{\'stipend.maxAbsences\' | translate}}</label> <hois-value value="stipend.maxAbsences"></hois-value> </md-input-container> <div flex="50" flex-offset="5"> <md-checkbox ng-model="stipend.isTeacherConfirm" disabled aria-label="Is teacher confirm"> {{\'stipend.isTeacherConfirm\' | translate}} </md-checkbox> </div> </div> <div layout="row" flex> <md-input-container flex="45"> <label class="textInput">{{\'stipend.studyPeriodDates\' | translate}}</label> <hois-value value="stipend.matriculationRange"></hois-value> </md-input-container> </div> </div> </fieldset> <br> <fieldset tabindex="1"> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'stipend.student.myData\' | translate}}</legend> <div class="form-readonly ois-form-layout-padding"> <div layout="row" flex> <md-input-container flex="45"> <label class="textInput">{{\'stipend.averageMark\' | translate}}</label> <hois-value value="studentInfo.averageMark"></hois-value> </md-input-container> <md-input-container flex="50" flex-offset="5"> <label>{{\'stipend.lastPeriodMark\' | translate}}</label> <hois-value value="studentInfo.lastPeriodMark"></hois-value> </md-input-container> </div> <div layout="row" flex> <md-input-container flex="45"> <label class="textInput">{{\'stipend.curriculumCompletion\' | translate}}</label> <hois-value value="studentInfo.curriculumCompletion"></hois-value> </md-input-container> <md-input-container flex="50" flex-offset="5"> <label>{{\'stipend.maxAbsences\' | translate}}</label> <hois-value value="studentInfo.absences"></hois-value> </md-input-container> </div> <div layout="row" flex> <md-input-container flex="45"> <label class="textInput">{{\'stipend.student.studentGroup\' | translate}}</label> <hois-value value="studentInfo.studentGroupCode"></hois-value> </md-input-container> <md-input-container flex="50" flex-offset="5"> <label class="textInput">{{\'main.contactNumber\' | translate}}</label> <input ng-model="studentSubmitData.phone" type="text" md-maxlength="100"> </md-input-container> </div> <div layout="row" flex> <md-input-container flex="45"> <label class="textInput">{{\'stipend.student.address\' | translate}}</label> <hois-value value="studentSubmitData.address"></hois-value> </md-input-container> <md-input-container flex="50" flex-offset="5"> <label class="textInput">{{\'main.email\' | translate}}</label> <input ng-model="studentSubmitData.email" type="email" md-maxlength="100"> </md-input-container> </div> </div> <div class="ois-form-layout-padding ois-form-layout" ng-cloak> <div flex> <form name="studentSubmitDataForm"> <div layout="row" flex> <md-input-container flex="45" flex-md="100" flex-sm="100" flex-xs="100"> <label>{{\'stipend.student.bankAccount\' | translate}}</label> <input type="text" ng-model="studentSubmitData.bankAccount" name="bankAccount" required md-maxlength="50"> </md-input-container> </div> <div layout="row" flex> <md-input-container flex="100" flex-md="100" flex-sm="100" flex-xs="100"> <label>{{\'stipend.student.grantReason\' | translate}}</label> <textarea ng-model="studentSubmitData.addInfo" name="addInfo" md-maxlength="4000"></textarea> </md-input-container> </div> <div ng-include="\'scholarship/scholarship.relatedFiles.edit.html\'"></div> <br> <div layout="row"> <md-button class="md-raised md-primary" ng-if="studentSubmitData.canApply" ng-click="update(studentSubmitDataForm)">{{\'main.button.save\' | translate}}</md-button> <md-button class="md-raised" ng-if="studentSubmitData.canApply" ng-click="apply(studentSubmitDataForm)">{{\'stipend.student.apply\' | translate}}</md-button> <md-button class="md-raised" ng-click="back(\'#/scholarships/myData/grants\', studentSubmitDataForm)">{{\'main.button.back\' | translate}}</md-button> </div> </form> </div> </div> </fieldset> </div>'),a.put("scholarship/student/scholarship.application.pohi.view.html",'<div class="ois-form-layout-padding" ng-cloak> <fieldset tabindex="1"> <div class="form-readonly ois-form-layout-padding"> <div layout="row" flex> <md-input-container flex="45"> <label class="textInput">{{\'stipend.grantType\' | translate}}</label> <hois-classifier-value ng-model="stipend.type" main-classifier-code="STIPTOETUS"></hois-classifier-value> </md-input-container> <md-input-container flex="50" flex-offset="5"> <label>{{\'stipend.places\' | translate}}</label> <hois-value value="stipend.places"></hois-value> </md-input-container> </div> <div layout="row" flex> <md-input-container flex="45"> <label class="textInput">{{\'stipend.studyPeriod\' | translate}}</label> <hois-value value="currentLanguageNameField(stipend.studyPeriod)"></hois-value> </md-input-container> <md-input-container flex="50" flex-offset="5"> <label>{{\'stipend.amountPaid\' | translate}}</label> <hois-value value="stipend.amountPaid"></hois-value> </md-input-container> </div> <div layout="row" flex> <md-input-container flex="45"> <label class="textInput">{{\'stipend.studyForm\' | translate}}</label> <hois-classifier-value ng-model="stipend.studyForms" main-classifier-code="OPPEVORM" multiple></hois-classifier-value> </md-input-container> <md-input-container flex="50" flex-offset="5"> <label class="textInput">{{\'stipend.averageMark\' | translate}}</label> <hois-value value="stipend.averageMark"></hois-value> </md-input-container> </div> <div layout="row" flex> <md-input-container flex="45"> <label class="textInput">{{\'stipend.curriculumCompletion\' | translate}}</label> <hois-value value="stipend.curriculumCompletion"></hois-value> </md-input-container> <md-input-container flex="50" flex-offset="5"> <label class="textInput">{{\'stipend.lastPeriodMark\' | translate}}</label> <hois-value value="stipend.lastPeriodMark"></hois-value> </md-input-container> </div> <div layout="row" flex> <md-input-container flex="45"> <label class="textInput">{{\'stipend.maxAbsences\' | translate}}</label> <hois-value value="stipend.maxAbsences"></hois-value> </md-input-container> <div flex="50" flex-offset="5"> <md-checkbox ng-model="stipend.isTeacherConfirm" disabled aria-label="Is teacher confirm"> {{\'stipend.isTeacherConfirm\' | translate}} </md-checkbox> </div> </div> <div layout="row" flex> <md-input-container flex="45"> <label class="textInput">{{\'stipend.studyPeriodDates\' | translate}}</label> <hois-value value="stipend.matriculationRange"></hois-value> </md-input-container> </div> </div> </fieldset> <br> <fieldset tabindex="1"> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{isStudent() ? \'stipend.student.myData\' : \'stipend.student.studentData\' | translate}}</legend> <div class="form-readonly ois-form-layout-padding"> <div layout="row" flex> <md-input-container flex="45"> <label class="textInput">{{\'stipend.averageMark\' | translate}}</label> <hois-value value="studentInfo.averageMark"></hois-value> </md-input-container> <md-input-container flex="50" flex-offset="5"> <label>{{\'stipend.lastPeriodMark\' | translate}}</label> <hois-value value="studentInfo.lastPeriodMark"></hois-value> </md-input-container> </div> <div layout="row" flex> <md-input-container flex="45"> <label class="textInput">{{\'stipend.curriculumCompletion\' | translate}}</label> <hois-value value="studentInfo.curriculumCompletion"></hois-value> </md-input-container> <md-input-container flex="50" flex-offset="5"> <label>{{\'stipend.maxAbsences\' | translate}}</label> <hois-value value="studentInfo.absences"></hois-value> </md-input-container> </div> <div layout="row" flex> <md-input-container flex="45"> <label class="textInput">{{\'stipend.student.studentGroup\' | translate}}</label> <hois-value value="studentInfo.studentGroupCode"></hois-value> </md-input-container> <md-input-container flex="50" flex-offset="5"> <label class="textInput">{{\'main.contactNumber\' | translate}}</label> <hois-value value="studentSubmitData.phone"></hois-value> </md-input-container> </div> <div layout="row" flex> <md-input-container flex="45"> <label class="textInput">{{\'stipend.student.address\' | translate}}</label> <hois-value value="studentSubmitData.address"></hois-value> </md-input-container> <md-input-container flex="50" flex-offset="5"> <label class="textInput">{{\'main.email\' | translate}}</label> <hois-value value="studentSubmitData.email"></hois-value> </md-input-container> </div> </div> <div class="form-readonly ois-form-layout-padding"> <div flex> <div layout="row" flex> <md-input-container flex="45" flex-md="100" flex-sm="100" flex-xs="100"> <label>{{\'stipend.student.bankAccount\' | translate}}</label> <hois-value value="studentSubmitData.bankAccount"></hois-value> </md-input-container> </div> <div layout="row" flex> <md-input-container flex="100" flex-md="100" flex-sm="100" flex-xs="100"> <label>{{\'stipend.student.grantReason\' | translate}}</label> <hois-value value="studentSubmitData.addInfo"></hois-value> </md-input-container> </div> <div ng-include="\'scholarship/scholarship.relatedFiles.edit.html\'"></div> <br> <div layout="row"> <md-button class="md-raised md-primary" ng-if="canManage" ng-click="accept()">{{\'main.button.accept\' | translate}}</md-button> <md-button class="md-raised" ng-click="back(isStudent ? \'#/scholarships/myData/grants\' : \'#/scholarships/applications/grants\')">{{\'main.button.back\' | translate}}</md-button> </div> </div> </div> </fieldset> </div>'),a.put("scholarship/student/scholarship.application.scho.edit.html",'<div class="ois-form-layout-padding" ng-cloak> <fieldset tabindex="1"> <div class="form-readonly ois-form-layout-padding"> <div layout="row" flex> <md-input-container flex="45"> <label class="textInput">{{\'stipend.scholarshipType\' | translate}}</label> <hois-classifier-value ng-model="stipend.type" main-classifier-code="STIPTOETUS"></hois-classifier-value> </md-input-container> <md-input-container flex="50" flex-offset="5"> <label>{{\'stipend.places\' | translate}}</label> <hois-value value="stipend.places"></hois-value> </md-input-container> </div> <div layout="row" flex> <md-input-container flex="45"> <label class="textInput">{{\'stipend.studyPeriod\' | translate}}</label> <hois-value value="currentLanguageNameField(stipend.studyPeriod)"></hois-value> </md-input-container> <md-input-container flex="50" flex-offset="5"> <label>{{\'stipend.amountPaid\' | translate}}</label> <hois-value value="stipend.amountPaid"></hois-value> </md-input-container> </div> <div layout="row" flex> <md-input-container flex="45"> <label class="textInput">{{\'stipend.studyLoad\' | translate}}</label> <hois-classifier-value ng-model="stipend.studyLoads" main-classifier-code="OPPEKOORMUS" multiple></hois-classifier-value> </md-input-container> <md-input-container flex="50" flex-offset="5"> <label class="textInput">{{\'stipend.averageMark\' | translate}}</label> <hois-value value="stipend.averageMark"></hois-value> </md-input-container> </div> <div layout="row" flex> <md-input-container flex="45"> <label class="textInput">{{\'stipend.curriculumCompletion\' | translate}}</label> <hois-value value="stipend.curriculumCompletion"></hois-value> </md-input-container> <md-input-container flex="50" flex-offset="5"> <label class="textInput">{{\'stipend.lastPeriodMark\' | translate}}</label> <hois-value value="stipend.lastPeriodMark"></hois-value> </md-input-container> </div> <div layout="row" flex> <md-input-container flex="45"> <label class="textInput">{{\'stipend.studyPeriodDates\' | translate}}</label> <hois-value value="stipend.matriculationRange"></hois-value> </md-input-container> <div flex="50" flex-offset="5"> <md-checkbox ng-model="stipend.isAcademicLeave" disabled aria-label="Is academic leave"> {{\'stipend.isAcademicLeave\' | translate}} </md-checkbox> </div> </div> </div> </fieldset> <br> <fieldset tabindex="1"> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'stipend.student.myData\' | translate}}</legend> <div class="form-readonly ois-form-layout-padding"> <div layout="row" flex> <md-input-container flex="45"> <label class="textInput">{{\'stipend.averageMark\' | translate}}</label> <hois-value value="studentInfo.averageMark"></hois-value> </md-input-container> <md-input-container flex="50" flex-offset="5"> <label>{{\'stipend.lastPeriodMark\' | translate}}</label> <hois-value value="studentInfo.lastPeriodMark"></hois-value> </md-input-container> </div> <div layout="row" flex> <md-input-container flex="45"> <label class="textInput">{{\'stipend.curriculumCompletion\' | translate}}</label> <hois-value value="studentInfo.curriculumCompletion"></hois-value> </md-input-container> <md-input-container flex="50" flex-offset="5"> <label class="textInput">{{\'stipend.credits\' | translate}}</label> <hois-value value="studentInfo.credits"></hois-value> </md-input-container> </div> </div> <ng-form name="studentSubmitDataForm"> <div layout="row" flex> <md-input-container flex="45" flex-md="100" flex-sm="100" flex-xs="100"> <label>{{\'stipend.student.bankAccount\' | translate}}</label> <input type="text" ng-model="studentSubmitData.bankAccount" name="bankAccount" required md-maxlength="50"> </md-input-container> </div> <div layout="row" flex> <md-input-container flex="100" flex-md="100" flex-sm="100" flex-xs="100"> <label>{{\'stipend.student.professionalAchievements\' | translate}}</label> <textarea ng-model="studentSubmitData.addInfo" name="addInfo" md-maxlength="4000"></textarea> </md-input-container> </div> <br> <div ng-include="\'scholarship/scholarship.relatedFiles.edit.html\'"></div> <br> <div layout="row"> <md-button class="md-raised md-primary" ng-if="studentSubmitData.canApply" ng-click="update(studentSubmitDataForm)">{{\'main.button.save\' | translate}}</md-button> <md-button class="md-raised" ng-if="studentSubmitData.canApply" ng-click="apply(studentSubmitDataForm)">{{\'stipend.student.apply\' | translate}}</md-button> <md-button class="md-raised" ng-click="back(\'#/scholarships/myData/grants\', studentSubmitDataForm)">{{\'main.button.back\' | translate}}</md-button> </div> </ng-form> </fieldset> </div>'),a.put("scholarship/student/scholarship.application.scho.view.html",'<div class="ois-form-layout-padding" ng-cloak> <fieldset tabindex="1"> <div class="form-readonly ois-form-layout-padding"> <div layout="row" flex> <md-input-container flex="45"> <label class="textInput">{{\'stipend.scholarshipType\' | translate}}</label> <hois-classifier-value ng-model="stipend.type" main-classifier-code="STIPTOETUS"></hois-classifier-value> </md-input-container> <md-input-container flex="50" flex-offset="5"> <label>{{\'stipend.places\' | translate}}</label> <hois-value value="stipend.places"></hois-value> </md-input-container> </div> <div layout="row" flex> <md-input-container flex="45"> <label class="textInput">{{\'stipend.studyPeriod\' | translate}}</label> <hois-value value="currentLanguageNameField(stipend.studyPeriod)"></hois-value> </md-input-container> <md-input-container flex="50" flex-offset="5"> <label>{{\'stipend.amountPaid\' | translate}}</label> <hois-value value="stipend.amountPaid"></hois-value> </md-input-container> </div> <div layout="row" flex> <md-input-container flex="45"> <label class="textInput">{{\'stipend.studyLoad\' | translate}}</label> <hois-classifier-value ng-model="stipend.studyLoads" main-classifier-code="OPPEKOORMUS" multiple></hois-classifier-value> </md-input-container> <md-input-container flex="50" flex-offset="5"> <label class="textInput">{{\'stipend.averageMark\' | translate}}</label> <hois-value value="stipend.averageMark"></hois-value> </md-input-container> </div> <div layout="row" flex> <md-input-container flex="45"> <label class="textInput">{{\'stipend.curriculumCompletion\' | translate}}</label> <hois-value value="stipend.curriculumCompletion"></hois-value> </md-input-container> <md-input-container flex="50" flex-offset="5"> <label class="textInput">{{\'stipend.lastPeriodMark\' | translate}}</label> <hois-value value="stipend.lastPeriodMark"></hois-value> </md-input-container> </div> <div layout="row" flex> <md-input-container flex="45"> <label class="textInput">{{\'stipend.studyPeriodDates\' | translate}}</label> <hois-value value="stipend.matriculationRange"></hois-value> </md-input-container> <div flex="50" flex-offset="5"> <md-checkbox ng-model="stipend.isAcademicLeave" disabled aria-label="Is academic leave"> {{\'stipend.isAcademicLeave\' | translate}} </md-checkbox> </div> </div> </div> </fieldset> <br> <fieldset tabindex="1"> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{isStudent() ? \'stipend.student.myData\' : \'stipend.student.studentData\' | translate}}</legend> <div class="form-readonly ois-form-layout-padding"> <div layout="row" flex> <md-input-container flex="45"> <label class="textInput">{{\'stipend.averageMark\' | translate}}</label> <hois-value value="studentInfo.averageMark"></hois-value> </md-input-container> <md-input-container flex="50" flex-offset="5"> <label>{{\'stipend.lastPeriodMark\' | translate}}</label> <hois-value value="studentInfo.lastPeriodMark"></hois-value> </md-input-container> </div> <div layout="row" flex> <md-input-container flex="45"> <label class="textInput">{{\'stipend.curriculumCompletion\' | translate}}</label> <hois-value value="studentInfo.curriculumCompletion"></hois-value> </md-input-container> <md-input-container flex="50" flex-offset="5"> <label class="textInput">{{\'stipend.credits\' | translate}}</label> <hois-value value="studentInfo.credits"></hois-value> </md-input-container> </div> </div> <div class="form-readonly ois-form-layout-padding"> <div layout="row" flex> <md-input-container flex="45" flex-md="100" flex-sm="100" flex-xs="100"> <label>{{\'stipend.student.bankAccount\' | translate}}</label> <hois-value value="studentSubmitData.bankAccount"></hois-value> </md-input-container> </div> <div layout="row" flex> <md-input-container flex="100" flex-md="100" flex-sm="100" flex-xs="100"> <label>{{\'stipend.student.professionalAchievements\' | translate}}</label> <hois-value value="studentSubmitData.addInfo"></hois-value> </md-input-container> </div> <br> <div ng-include="\'scholarship/scholarship.relatedFiles.edit.html\'"></div> <br> <div layout="row"> <md-button class="md-raised md-primary" ng-if="canManage" ng-click="accept()">{{\'main.button.accept\' | translate}}</md-button> <md-button class="md-raised" ng-click="back(isStudent ? \'#/scholarships/myData/scholarships\' : \'#/scholarships/applications/grants\')">{{\'main.button.back\' | translate}}</md-button> </div> </div> </fieldset> </div>'),a.put("scholarship/student/scholarship.application.soidu.edit.html",'<div class="ois-form-layout-padding" ng-cloak> <fieldset tabindex="1"> <div class="form-readonly ois-form-layout-padding"> <div layout="row" flex> <md-input-container flex="45"> <label class="textInput">{{\'stipend.grantType\' | translate}}</label> <hois-classifier-value ng-model="stipend.type" main-classifier-code="STIPTOETUS"></hois-classifier-value> </md-input-container> </div> <div layout="row" flex> <md-input-container flex="45"> <label class="textInput">{{\'stipend.studyPeriod\' | translate}}</label> <hois-value value="currentLanguageNameField(stipend.studyPeriod)"></hois-value> </md-input-container> <md-input-container flex="50" flex-offset="5"> <label>{{\'stipend.amountPaid\' | translate}}</label> <hois-value value="stipend.amountPaid"></hois-value> </md-input-container> </div> <div layout="row" flex> <md-input-container flex="45"> <label class="textInput">{{\'stipend.studyForm\' | translate}}</label> <hois-classifier-value ng-model="stipend.studyForms" main-classifier-code="OPPEVORM" multiple></hois-classifier-value> </md-input-container> <div flex="50" flex-offset="5"> <md-checkbox ng-model="stipend.isTeacherConfirm" disabled aria-label="Is teacher confirm"> {{\'stipend.isTeacherConfirm\' | translate}} </md-checkbox> </div> </div> <div layout="row" flex> <md-input-container flex="45"> <label class="textInput">{{\'stipend.studyPeriodDates\' | translate}}</label> <hois-value value="stipend.matriculationRange"></hois-value> </md-input-container> </div> </div> </fieldset> <br> <fieldset tabindex="1"> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'stipend.student.myData\' | translate}}</legend> <div class="form-readonly ois-form-layout-padding"> <div layout="row" flex> <md-input-container flex="45"> <label class="textInput">{{\'stipend.student.studentGroup\' | translate}}</label> <hois-value value="studentInfo.studentGroupCode"></hois-value> </md-input-container> <md-input-container flex="50" flex-offset="5"> <label class="textInput">{{\'main.contactNumber\' | translate}}</label> <input ng-model="studentSubmitData.phone" type="text" md-maxlength="100"> </md-input-container> </div> <div layout="row" flex> <md-input-container flex="45"> <label class="textInput">{{\'stipend.student.address\' | translate}}</label> <hois-value value="studentSubmitData.address"></hois-value> </md-input-container> <md-input-container flex="50" flex-offset="5"> <label class="textInput">{{\'main.email\' | translate}}</label> <input ng-model="studentSubmitData.email" type="email" md-maxlength="100"> </md-input-container> </div> </div> <div class="ois-form-layout-padding ois-form-layout" ng-cloak> <div flex> <form name="studentSubmitDataForm"> <div layout="row"> <div layout="column" flex="45"> <div layout="row" flex> <md-input-container flex> <label>{{\'stipend.student.bankAccount\' | translate}}</label> <input type="text" ng-model="studentSubmitData.bankAccount" name="bankAccount" required md-maxlength="50"> </md-input-container> </div> <div layout="row" flex> <md-input-container flex> <label class="textInput">{{\'stipend.compensationReason\' | translate}}</label> <hois-classifier-select required ng-model="studentSubmitData.compensationReason" name="type" model-value-attr="code" main-classifier-code="STIPTOETUS_HYVITAMINE_POHJUS"></hois-classifier-select> </md-input-container> </div> <div layout="row" ng-if="studentSubmitData.compensationReason === \'STIPTOETUS_HYVITAMINE_POHJUS_I\'"> <md-input-container flex> <label>{{\'stipend.routeKm\' | translate}}</label> <input ng-model="studentSubmitData.routeKm" type="number" aria-label="routeKm" min="0"> </md-input-container> </div> </div> <div layout="column" flex="50" flex-offset="5"> <fieldset flex="100" layout="column"> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'stipend.compensationFrequency\' | translate}}</legend> <md-input-container> <md-radio-group layout="column" ng-model="studentSubmitData.compensationFrequency" required> <md-radio-button flex layout="row" ng-repeat="frequency in compensationFrequencies" value="{{frequency.code}}" aria-label="passedSubject"> {{currentLanguageNameField(frequency)}} </md-radio-button> </md-radio-group> </md-input-container> </fieldset> </div> </div> <div layout="row" flex ng-if="studentSubmitData.compensationReason === \'STIPTOETUS_HYVITAMINE_POHJUS_M\'"> <md-input-container flex="100" flex-md="100" flex-sm="100" flex-xs="100"> <label>{{\'stipend.student.specificReason\' | translate}}</label> <textarea required ng-model="studentSubmitData.addInfo" name="addInfo" md-maxlength="4000"></textarea> </md-input-container> </div> <br> <div ng-include="\'scholarship/scholarship.relatedFiles.edit.html\'"></div> <br> <div layout="row"> <md-button class="md-raised md-primary" ng-if="studentSubmitData.canApply" ng-click="update(studentSubmitDataForm)">{{\'main.button.save\' | translate}}</md-button> <md-button class="md-raised" ng-if="studentSubmitData.canApply" ng-click="apply(studentSubmitDataForm)">{{\'stipend.student.apply\' | translate}}</md-button> <md-button class="md-raised" ng-click="back(\'#/scholarships/myData/grants\', studentSubmitDataForm)">{{\'main.button.back\' | translate}}</md-button> </div> </form> </div> </div> </fieldset> </div>'),a.put("scholarship/student/scholarship.application.soidu.view.html",'<div class="ois-form-layout-padding" ng-cloak> <fieldset tabindex="1"> <div class="form-readonly ois-form-layout-padding"> <div layout="row" flex> <md-input-container flex="45"> <label class="textInput">{{\'stipend.grantType\' | translate}}</label> <hois-classifier-value ng-model="stipend.type" main-classifier-code="STIPTOETUS"></hois-classifier-value> </md-input-container> </div> <div layout="row" flex> <md-input-container flex="45"> <label class="textInput">{{\'stipend.studyPeriod\' | translate}}</label> <hois-value value="currentLanguageNameField(stipend.studyPeriod)"></hois-value> </md-input-container> <md-input-container flex="50" flex-offset="5"> <label>{{\'stipend.amountPaid\' | translate}}</label> <hois-value value="stipend.amountPaid"></hois-value> </md-input-container> </div> <div layout="row" flex> <md-input-container flex="45"> <label class="textInput">{{\'stipend.studyForm\' | translate}}</label> <hois-classifier-value ng-model="stipend.studyForms" main-classifier-code="OPPEVORM" multiple></hois-classifier-value> </md-input-container> <div flex="50" flex-offset="5"> <md-checkbox ng-model="stipend.isTeacherConfirm" disabled aria-label="Is teacher confirm"> {{\'stipend.isTeacherConfirm\' | translate}} </md-checkbox> </div> </div> <div layout="row" flex> <md-input-container flex="45"> <label class="textInput">{{\'stipend.studyPeriodDates\' | translate}}</label> <hois-value value="stipend.matriculationRange"></hois-value> </md-input-container> </div> </div> </fieldset> <br> <fieldset tabindex="1"> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{isStudent() ? \'stipend.student.myData\' : \'stipend.student.studentData\' | translate}}</legend> <div class="form-readonly ois-form-layout-padding"> <div layout="row" flex> <md-input-container flex="45"> <label class="textInput">{{\'stipend.student.studentGroup\' | translate}}</label> <hois-value value="studentInfo.studentGroupCode"></hois-value> </md-input-container> <md-input-container flex="50" flex-offset="5"> <label class="textInput">{{\'main.contactNumber\' | translate}}</label> <hois-value value="studentSubmitData.phone"></hois-value> </md-input-container> </div> <div layout="row" flex> <md-input-container flex="45"> <label class="textInput">{{\'stipend.student.address\' | translate}}</label> <hois-value value="studentSubmitData.address"></hois-value> </md-input-container> <md-input-container flex="50" flex-offset="5"> <label class="textInput">{{\'main.email\' | translate}}</label> <hois-value value="studentSubmitData.email"></hois-value> </md-input-container> </div> </div> <div class="form-readonly ois-form-layout-padding"> <div flex> <div layout="row"> <div layout="column" flex="45"> <div layout="row" flex> <md-input-container flex> <label>{{\'stipend.student.bankAccount\' | translate}}</label> <hois-value value="studentSubmitData.bankAccount"> </hois-value></md-input-container> </div> <div layout="row" flex> <md-input-container flex> <label class="textInput">{{\'stipend.compensationReason\' | translate}}</label> <hois-classifier-value ng-model="studentSubmitData.compensationReason" main-classifier-code="STIPTOETUS_HYVITAMINE_POHJUS"></hois-classifier-value> </md-input-container> </div> <div layout="row" ng-if="studentSubmitData.compensationReason === \'STIPTOETUS_HYVITAMINE_POHJUS_I\'"> <md-input-container flex> <label>{{\'stipend.routeKm\' | translate}}</label> <hois-value value="studentSubmitData.routeKm"></hois-value> </md-input-container> </div> </div> <div layout="column" flex="50" flex-offset="5"> <fieldset flex="100" layout="column"> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'stipend.compensationFrequency\' | translate}}</legend> <md-input-container> <md-radio-group layout="column" ng-model="studentSubmitData.compensationFrequency" required> <md-radio-button flex layout="row" disabled ng-repeat="frequency in compensationFrequencies" value="{{frequency.code}}" aria-label="passedSubject"> {{currentLanguageNameField(frequency)}} </md-radio-button> </md-radio-group> </md-input-container> </fieldset> </div> </div> <div layout="row" flex ng-if="studentSubmitData.compensationReason === \'STIPTOETUS_HYVITAMINE_POHJUS_M\'"> <md-input-container flex="100" flex-md="100" flex-sm="100" flex-xs="100"> <label>{{\'stipend.student.specificReason\' | translate}}</label> <hois-value value="studentSubmitData.addInfo"></hois-value> </md-input-container> </div> <br> <div ng-include="\'scholarship/scholarship.relatedFiles.edit.html\'"></div> <br> <div layout="row"> <md-button class="md-raised md-primary" ng-if="canManage" ng-click="accept()">{{\'main.button.accept\' | translate}}</md-button> <md-button class="md-raised" ng-click="back(isStudent ? \'#/scholarships/myData/grants\' : \'#/scholarships/applications/grants\')">{{\'main.button.back\' | translate}}</md-button> </div> </div> </div> </fieldset> </div>'),a.put("scholarship/student/scholarship.family.addMember.html",'<md-dialog aria-label="add enterprise dialog" flex="30"> <form name="dialogForm" ng-submit="dialogForm.$valid && submit()" novalidate ng-cloak> <md-toolbar> <div class="md-toolbar-tools"> <h2 flex>{{\'stipend.student.addFamilyMember\' | translate}}</h2> <md-button class="md-icon-button" ng-click="cancel()"> <md-icon md-font-set="material-icons">close</md-icon> </md-button> </div> </md-toolbar> <md-dialog-content> <span flex></span> <div class="ois-form-layout" layout="column" layout-margin ng-cloak> <div layout="row" flex> <md-input-container flex="80" flex-md="100" flex-sm="100" flex-xs="100"> <label>{{\'stipend.family.name\' | translate}}</label> <input type="text" ng-model="member.name" name="name" required md-maxlength="100"> </md-input-container> </div> <div layout="row"> <md-input-container flex="80"> <label>{{\'stipend.family.netSalary\' | translate}}</label> <input ng-model="member.netSalary" type="number" aria-label="places" min="0"> </md-input-container> </div> <div layout="row"> <md-input-container flex="80"> <label>{{\'stipend.family.pension\' | translate}}</label> <input ng-model="member.pension" type="number" aria-label="places" min="0"> </md-input-container> </div> <div layout="row"> <md-input-container flex="80"> <label>{{\'stipend.family.stateBenefit\' | translate}}</label> <input ng-model="member.stateBenefit" type="number" aria-label="places" min="0"> </md-input-container> </div> <div layout="row"> <md-input-container flex="80"> <label>{{\'stipend.family.otherIncome\' | translate}}</label> <input ng-model="member.otherIncome" type="number" aria-label="places" min="0"> </md-input-container> </div> <div layout="row"> <md-input-container flex="80"> <label>{{\'stipend.family.unemployedBenefit\' | translate}}</label> <input ng-model="member.unemployedBenefit" type="number" aria-label="places" min="0"> </md-input-container> </div> </div> </md-dialog-content> <md-dialog-actions layout="row" layout-align="start start"> <md-button class="md-raised md-primary" type="submit">{{\'main.button.add\' | translate}}</md-button> <md-button class="md-raised" ng-click="cancel()">{{"main.button.close" | translate}}</md-button> </md-dialog-actions> </form> </md-dialog>'),
a.put("scholarship/student/scholarship.family.table.edit.html",'<legend md-colors="{color: \'primary-800\'}" class="md-title-small"> {{\'stipend.student.familyIncome\' | translate}}</legend> <div layout="row" flex> <md-input-container flex="45"> <label>{{\'stipend.student.familyMembers\' | translate}}</label> <input ng-model="studentSubmitData.familyMembers" type="number" autofocus aria-label="familyMembers" min="0"> </md-input-container> <md-input-container flex="50" flex-offset="5"> <label>{{\'stipend.student.familyMembersAdult\' | translate}}</label> <input ng-model="studentSubmitData.familyMembersAdult" type="number" autofocus aria-label="familyMembersAdult" min="0" max="{{studentSubmitData.familyMembers ? studentSubmitData.familyMembers : 0}}"> </md-input-container> </div> <md-button class="md-raised" ng-click="addFamilyMember()" ng-if="editable">{{\'stipend.student.addFamilyMember\' | translate}}</md-button> <table md-table class="secondary-table"> <thead md-head> <tr md-row> <th md-column>{{\'stipend.family.name\' | translate}}</th> <th md-column>{{\'stipend.family.netSalary\' | translate}}</th> <th md-column>{{\'stipend.family.pension\' | translate}}</th> <th md-column>{{\'stipend.family.stateBenefit\' | translate}}</th> <th md-column>{{\'stipend.family.otherIncome\' | translate}}</th> <th md-column>{{\'stipend.family.unemployedBenefit\' | translate}}</th> <th md-column>{{\'main.sum\' | translate}}</th> <th md-column ng-if="editable"></th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="member in studentSubmitData.family" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell>{{member.name}}</td> <td md-cell>{{member.netSalary ? member.netSalary : \'-\'}}</td> <td md-cell>{{member.pension ? member.pension : \'-\'}}</td> <td md-cell>{{member.stateBenefit ? member.stateBenefit : \'-\'}}</td> <td md-cell>{{member.otherIncome ? member.otherIncome : \'-\'}}</td> <td md-cell>{{member.unemployedBenefit ? member.unemployedBenefit : \'-\'}}</td> <td md-cell>{{member.sum ? member.sum : \'-\'}}</td> <td md-cell ng-if="editable"> <md-button class="remove nomargin" ng-click="removeFromArray(studentSubmitData.family, member)">&times;</md-button> </td> </tr> </tbody> </table>'),a.put("scholarship/student/scholarship.family.table.view.html","<legend md-colors=\"{color: 'primary-800'}\" class=\"md-title-small\"> {{'stipend.student.familyIncome' | translate}}</legend> <div layout=\"row\" flex> <md-input-container flex=\"45\"> <label>{{'stipend.student.familyMembers' | translate}}</label> <hois-value value=\"studentSubmitData.familyMembers\"> </hois-value></md-input-container> <md-input-container flex=\"50\" flex-offset=\"5\"> <label>{{'stipend.student.familyMembersAdult' | translate}}</label> <hois-value value=\"studentSubmitData.familyMembersAdult\"> </hois-value></md-input-container> </div> <table md-table class=\"secondary-table\"> <thead md-head> <tr md-row> <th md-column>{{'stipend.family.name' | translate}}</th> <th md-column>{{'stipend.family.netSalary' | translate}}</th> <th md-column>{{'stipend.family.pension' | translate}}</th> <th md-column>{{'stipend.family.stateBenefit' | translate}}</th> <th md-column>{{'stipend.family.otherIncome' | translate}}</th> <th md-column>{{'stipend.family.unemployedBenefit' | translate}}</th> <th md-column>{{'main.sum' | translate}}</th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat=\"member in studentSubmitData.family\" ng-class-odd=\"'odd'\" ng-class-even=\"'even'\"> <td md-cell>{{member.name}}</td> <td md-cell>{{member.netSalary ? member.netSalary : '-'}}</td> <td md-cell>{{member.pension ? member.pension : '-'}}</td> <td md-cell>{{member.stateBenefit ? member.stateBenefit : '-'}}</td> <td md-cell>{{member.otherIncome ? member.otherIncome : '-'}}</td> <td md-cell>{{member.unemployedBenefit ? member.unemployedBenefit : '-'}}</td> <td md-cell>{{member.sum ? member.sum : '-'}}</td> </tr> </tbody> </table>"),a.put("scholarship/student/scholarship.grants.student.html","<div class=\"ois-form-layout-padding\" ng-cloak> <fieldset tabindex=\"1\"> <legend md-colors=\"{color: 'primary-800'}\" class=\"md-title-small\">{{'stipend.student.grants' | translate}}</legend> <table md-table class=\"secondary-table\"> <thead md-head> <tr md-row> <th md-column>{{'stipend.type' | translate}}</th> <th md-column>{{'stipend.applicationPeriod' | translate}}</th> <th md-column>{{'stipend.places' | translate}}</th> <th md-column>{{'stipend.student.averageMark' | translate}}</th> <th md-column>{{'stipend.student.lastPeriodMark' | translate}}</th> <th md-column>{{'stipend.student.curriculumCompletion' | translate}}</th> <th md-column>{{'stipend.student.maxAbsences' | translate}}</th> <th md-column>{{'stipend.student.isTeacherConfirm' | translate}}</th> <th md-column>&nbsp;</th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat=\"stipend in possibleStipends\" ng-class-odd=\"'odd'\" ng-class-even=\"'even'\"> <td md-cell>{{currentLanguageNameField(stipend.type)}}</td> <td md-cell>{{stipend.applicationStart | hoisDate}}-{{stipend.applicationEnd | hoisDate}}</td> <td md-cell>{{stipend.places ? stipend.places : '-'}}</td> <td md-cell>{{stipend.averageMark ? stipend.averageMark : '-'}}</td> <td md-cell>{{stipend.lastPeriodMark ? stipend.lastPeriodMark : '-'}}</td> <td md-cell>{{stipend.curriculumCompletion ? stipend.curriculumCompletion : '-'}}</td> <td md-cell>{{stipend.maxAbsences ? stipend.maxAbsences : '-'}}</td> <td md-cell>{{stipend.isTeacherConfirm ? 'main.yes' : 'main.no' | translate}}</td> <td md-cell> <span ng-if=\"stipend.canApply\"> <a href=\"#/scholarships/{{stipend.id}}/application\">{{'stipend.student.apply' | translate}}</a> </span> </td> </tr> </tbody> </table> </fieldset> <br> <fieldset tabindex=\"1\"> <legend md-colors=\"{color: 'primary-800'}\" class=\"md-title-small\">{{'stipend.student.applications' | translate}}</legend> <table md-table class=\"secondary-table\"> <thead md-head> <tr md-row> <th md-column>{{'stipend.type' | translate}}</th> <th md-column>{{'stipend.student.averageMark' | translate}}</th> <th md-column>{{'stipend.student.lastPeriodMark' | translate}}</th> <th md-column>{{'stipend.student.curriculumCompletion' | translate}}</th> <th md-column>{{'stipend.student.maxAbsences' | translate}}</th> <th md-column>{{'stipend.student.isTeacherConfirm' | translate}}</th> <th md-column>{{'stipend.student.status' | translate}}</th> <th md-column>{{'stipend.student.decisionDate' | translate}}</th> <th md-column>&nbsp;</th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat=\"stipend in studentStipends\" ng-class-odd=\"'odd'\" ng-class-even=\"'even'\"> <td md-cell> <a href=\"#/scholarships/applications/{{stipend.applicationId}}\">{{currentLanguageNameField(stipend.type)}}</a> </td> <td md-cell>{{stipend.averageMark ? stipend.averageMark : '-'}}</td> <td md-cell>{{stipend.lastPeriodMark ? stipend.lastPeriodMark : '-'}}</td> <td md-cell>{{stipend.curriculumCompletion ? stipend.curriculumCompletion : '-'}}</td> <td md-cell>{{stipend.maxAbsences ? stipend.maxAbsences : '-'}}</td> <td md-cell>{{stipend.isTeacherConfirm ? 'main.yes' : 'main.no' | translate}}</td> <td md-cell>{{currentLanguageNameField(stipend.status)}} <md-tooltip ng-if=\"['STIPTOETUS_STAATUS_L', 'STIPTOETUS_STAATUS_T'].indexOf(stipend.status.code) !== -1  && stipend.rejectComment\">{{stipend.rejectComment}}</md-tooltip> </td> <td md-cell>{{stipend.decisionDate ? (stipend.decisionDate | hoisDate) : '-'}}</td> <td md-cell> <span ng-if=\"stipend.status.code === 'STIPTOETUS_STAATUS_K' || stipend.status.code === 'STIPTOETUS_STAATUS_T'\"> <a href=\"#/scholarships/{{stipend.id}}/application\">{{'stipend.student.edit' | translate}}</a> </span> </td> </tr> </tbody> </table> </fieldset> </div>"),a.put("scholarship/student/scholarship.scholarship.student.html","<div class=\"ois-form-layout-padding\" ng-cloak> <fieldset tabindex=\"1\"> <legend md-colors=\"{color: 'primary-800'}\" class=\"md-title-small\">{{'stipend.student.scholarships' | translate}}</legend> <table md-table class=\"secondary-table\"> <thead md-head> <tr md-row> <th md-column>{{'stipend.type' | translate}}</th> <th md-column>{{'stipend.applicationPeriod' | translate}}</th> <th md-column>{{'stipend.places' | translate}}</th> <th md-column>{{'stipend.student.averageMark' | translate}}</th> <th md-column>{{'stipend.student.lastPeriodMark' | translate}}</th> <th md-column>{{'stipend.student.curriculumCompletion' | translate}}</th> <th md-column>&nbsp;</th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat=\"stipend in possibleStipends\" ng-class-odd=\"'odd'\" ng-class-even=\"'even'\"> <td md-cell>{{currentLanguageNameField(stipend.type)}}</td> <td md-cell>{{stipend.applicationStart | hoisDate}}-{{stipend.applicationEnd | hoisDate}}</td> <td md-cell>{{stipend.places ? stipend.places : '-'}}</td> <td md-cell>{{stipend.averageMark ? stipend.averageMark : '-'}}</td> <td md-cell>{{stipend.lastPeriodMark ? stipend.lastPeriodMark : '-'}}</td> <td md-cell>{{stipend.curriculumCompletion ? stipend.curriculumCompletion : '-'}}</td> <td md-cell> <span ng-if=\"stipend.canApply\"> <a href=\"#/scholarships/{{stipend.id}}/application\">{{'stipend.student.apply' | translate}}</a> </span> </td> </tr> </tbody> </table> </fieldset> <br> <fieldset tabindex=\"1\"> <legend md-colors=\"{color: 'primary-800'}\" class=\"md-title-small\">{{'stipend.student.applications' | translate}}</legend> <table md-table class=\"secondary-table\"> <thead md-head> <tr md-row> <th md-column>{{'stipend.type' | translate}}</th> <th md-column>{{'stipend.student.averageMark' | translate}}</th> <th md-column>{{'stipend.student.lastPeriodMark' | translate}}</th> <th md-column>{{'stipend.student.curriculumCompletion' | translate}}</th> <th md-column>{{'stipend.student.status' | translate}}</th> <th md-column>{{'stipend.student.decisionDate' | translate}}</th> <th md-column>&nbsp;</th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat=\"stipend in studentStipends\" ng-class-odd=\"'odd'\" ng-class-even=\"'even'\"> <td md-cell> <a href=\"#/scholarships/applications/{{stipend.applicationId}}\">{{currentLanguageNameField(stipend.type)}}</a> </td> <td md-cell>{{stipend.averageMark ? stipend.averageMark : '-'}}</td> <td md-cell>{{stipend.lastPeriodMark ? stipend.lastPeriodMark : '-'}}</td> <td md-cell>{{stipend.curriculumCompletion ? stipend.curriculumCompletion : '-'}}</td> <td md-cell>{{currentLanguageNameField(stipend.status)}} <md-tooltip ng-if=\"['STIPTOETUS_STAATUS_L', 'STIPTOETUS_STAATUS_T'].indexOf(stipend.status.code) !== -1  && stipend.rejectComment\">{{stipend.rejectComment}}</md-tooltip> </td> <td md-cell>{{stipend.decisionDate ? (stipend.decisionDate | hoisDate) : '-'}}</td> <td md-cell> <span ng-if=\"stipend.status.code === 'STIPTOETUS_STAATUS_K' || stipend.status.code === 'STIPTOETUS_STAATUS_T'\"> <a href=\"#/scholarships/{{stipend.id}}/application\">{{'stipend.student.edit' | translate}}</a> </span> </td> </tr> </tbody> </table> </fieldset> </div>"),a.put("scholarship/term/scholarship.doktor.edit.html",'<div layout="row" flex> <md-input-container flex> <label class="textInput">{{\'stipend.grantName\' | translate}}</label> <input type="text" ng-model="stipend.nameEt" name="nameEt" required md-maxlength="500"> </md-input-container> </div> <div layout="row" flex> <md-input-container flex> <label class="textInput">{{\'stipend.studyPeriod\' | translate}}</label> <hois-select required ng-model="stipend.studyPeriod" values="formState.studyPeriods"></hois-select> </md-input-container> </div> <div layout="row"> <md-input-container flex="20" flex-md="100" flex-sm="100" flex-xs="100"> <label class="required">{{\'stipend.applicationPeriod\' | translate}}</label> <input type="hidden"> </md-input-container> <md-input-container flex="35" flex-md="100" flex-sm="100" flex-xs="100" flex-offset="5"> <md-datepicker required ng-model="stipend.applicationStart" md-max-date="stipend.applicationEnd" md-placeholder="{{\'main.from\' | translate}}"></md-datepicker> </md-input-container> <md-input-container flex="35" flex-md="100" flex-sm="100" flex-xs="100" flex-offset="5"> <md-datepicker required ng-model="stipend.applicationEnd" md-min-date="stipend.applicationStart" md-placeholder="{{\'main.thru\' | translate}}"></md-datepicker> </md-input-container> </div> <div layout="row"> <md-input-container flex="20" flex-md="100" flex-sm="100" flex-xs="100"> <label class="required">{{\'stipend.paymentPeriod\' | translate}}</label> <input type="hidden"> </md-input-container> <md-input-container flex="35" flex-md="100" flex-sm="100" flex-xs="100" flex-offset="5"> <md-datepicker required ng-model="stipend.paymentStart" md-max-date="stipend.paymentEnd" md-placeholder="{{\'main.from\' | translate}}"></md-datepicker> </md-input-container> <md-input-container flex="35" flex-md="100" flex-sm="100" flex-xs="100" flex-offset="5"> <md-datepicker required ng-model="stipend.paymentEnd" md-min-date="stipend.paymentStart" md-placeholder="{{\'main.thru\' | translate}}"></md-datepicker> </md-input-container> </div> <div layout="row" flex> <md-input-container flex="45"> <label>{{\'stipend.places\' | translate}}</label> <input ng-model="stipend.places" type="number" autofocus aria-label="places" min="0" max="99999"> </md-input-container> <md-input-container flex="50" flex-offset="5"> <label>{{\'stipend.amountPaid\' | translate}}</label> <input required ng-model="stipend.amountPaid" type="number" autofocus aria-label="amountPaid" min="0" max="9999"> </md-input-container> </div> <div> <div layout="row" flex="100"> <hois-autocomplete flex ng-model="formState.curriculum" method="curriculums" label="stipend.curriculums" ng-required="missingCurriculums"></hois-autocomplete> </div> <div layout="column" class="common-label" flex="95" ng-repeat="curriculum in stipend.curriculums"> <div layout="row" flex layout-align="start center"> <div flex="5">&nbsp;</div> <div flex="50">{{curriculum.nameEt}}</div> <div> <a ng-click="deleteCurriculum(curriculum)" class="remove">&times;</a> </div> </div> </div> <div layout="row" flex> <md-input-container flex="45"> <label class="textInput">{{\'stipend.studyLoad\' | translate}}</label> <hois-classifier-select required ng-model="stipend.studyLoads" name="type" model-value-attr="code" main-classifier-code="OPPEKOORMUS" criteria="{higher: true}" multiple></hois-classifier-select> </md-input-container> <md-input-container flex="50" flex-offset="5"> <label class="textInput">{{\'stipend.courses\' | translate}}</label> <hois-classifier-select required ng-model="stipend.courses" name="type" model-value-attr="code" main-classifier-code="KURSUS" multiple></hois-classifier-select> </md-input-container> </div> <div layout="row"> <md-input-container flex="20" flex-md="100" flex-sm="100" flex-xs="100"> <label>{{\'stipend.studyPeriodDates\' | translate}}</label> <input type="hidden"> </md-input-container> <md-input-container flex="35" flex-md="100" flex-sm="100" flex-xs="100" flex-offset="5"> <md-datepicker ng-model="stipend.studyStartPeriodStart" md-max-date="stipend.studyStartPeriodEnd" md-placeholder="{{\'main.from\' | translate}}"></md-datepicker> </md-input-container> <md-input-container flex="35" flex-md="100" flex-sm="100" flex-xs="100" flex-offset="5"> <md-datepicker ng-model="stipend.studyStartPeriodEnd" md-min-date="stipend.studyStartPeriodStart" md-placeholder="{{\'main.thru\' | translate}}"></md-datepicker> </md-input-container> </div> </div> <div layout="row"> <md-button class="md-raised md-primary" ng-click="update()">{{\'main.button.save\' | translate}}</md-button> <md-button class="md-raised" ng-if="!stipend.isOpen && stipend.id" ng-click="publish()">{{\'main.button.publishtoStudents\' | translate}}</md-button> <md-button class="md-raised" ng-if="stipend.id && !stipend.isOpen" ng-click="delete()">{{\'main.button.delete\' | translate}}</md-button> <md-button class="md-raised" ng-click="back(\'#/scholarships/grants\', stipendForm)">{{\'main.button.back\' | translate}}</md-button> </div>'),a.put("scholarship/term/scholarship.doktor.view.html",'<div class="ois-form-layout-padding" ng-cloak> <div flex> <form name="stipendForm"> <div class="form-readonly"> <div layout="row" flex> <md-input-container flex> <label class="textInput">{{formState.typeIsScholarship ? \'stipend.scholarshipType\' : \'stipend.grantType\' | translate}}</label> <hois-classifier-value ng-model="stipend.type" main-classifier-code="STIPTOETUS"></hois-classifier-value> </md-input-container> </div> <div layout="row" flex> <md-input-container flex> <label class="textInput">{{formState.typeIsScholarship ? \'stipend.scholarshipName\' : \'stipend.grantName\' | translate}}</label> <hois-value value="stipend.nameEt"></hois-value> </md-input-container> </div> <div layout="row" flex> <md-input-container flex> <label class="textInput">{{\'stipend.studyPeriod\' | translate}}</label> <hois-value value="currentLanguageNameField(formState.readonlyStudyPeriod)"></hois-value> </md-input-container> </div> <div layout="row"> <md-input-container flex="20" flex-md="100" flex-sm="100" flex-xs="100"> <label>{{\'stipend.applicationPeriod\' | translate}}</label> <input type="hidden"> </md-input-container> <md-input-container flex="35" flex-md="100" flex-sm="100" flex-xs="100" flex-offset="5"> <label>{{\'main.from\' | translate}}</label> <hois-value value="stipend.applicationStart | hoisDate"></hois-value> </md-input-container> <md-input-container flex="35" flex-md="100" flex-sm="100" flex-xs="100" flex-offset="5"> <label>{{\'main.thru\' | translate}}</label> <hois-value value="stipend.applicationEnd | hoisDate"></hois-value> </md-input-container> </div> <div layout="row"> <md-input-container flex="20" flex-md="100" flex-sm="100" flex-xs="100"> <label>{{\'stipend.paymentPeriod\' | translate}}</label> <input type="hidden"> </md-input-container> <md-input-container flex="35" flex-md="100" flex-sm="100" flex-xs="100" flex-offset="5"> <label>{{\'main.from\' | translate}}</label> <hois-value value="stipend.paymentStart | hoisDate"></hois-value> </md-input-container> <md-input-container flex="35" flex-md="100" flex-sm="100" flex-xs="100" flex-offset="5"> <label>{{\'main.thru\' | translate}}</label> <hois-value value="stipend.paymentEnd | hoisDate"></hois-value> </md-input-container> </div> <div layout="row" flex> <md-input-container flex="45"> <label>{{\'stipend.places\' | translate}}</label> <hois-value value="stipend.places"></hois-value> </md-input-container> <md-input-container flex="50" flex-offset="5"> <label>{{\'stipend.amountPaid\' | translate}}</label> <hois-value value="stipend.amountPaid"></hois-value> </md-input-container> </div> <div> <div layout="row" flex> <md-input-container flex> <label>{{\'stipend.curriculums\' | translate}}</label> <hois-value value="curriculumsDisplay.join(\', \')"></hois-value> </md-input-container> </div> <div layout="row" flex> <md-input-container flex="45"> <label class="textInput">{{\'stipend.studyLoad\' | translate}}</label> <hois-classifier-value ng-model="stipend.studyLoads" main-classifier-code="OPPEKOORMUS" multiple></hois-classifier-value> </md-input-container> <md-input-container flex="50" flex-offset="5"> <label class="textInput">{{\'stipend.courses\' | translate}}</label> <hois-classifier-value ng-model="stipend.courses" main-classifier-code="KURSUS" multiple></hois-classifier-value> </md-input-container> </div> <div layout="row"> <md-input-container flex="20" flex-md="100" flex-sm="100" flex-xs="100"> <label>{{\'stipend.studyPeriodDates\' | translate}}</label> <input type="hidden"> </md-input-container> <md-input-container flex="35" flex-md="100" flex-sm="100" flex-xs="100" flex-offset="5"> <label>{{\'main.from\' | translate}}</label> <hois-value value="stipend.studyStartPeriodStart | hoisDate"></hois-value> </md-input-container> <md-input-container flex="35" flex-md="100" flex-sm="100" flex-xs="100" flex-offset="5"> <label>{{\'main.thru\' | translate}}</label> <hois-value value="stipend.studyStartPeriodEnd | hoisDate"></hois-value> </md-input-container> </div> <div layout="row"> <div layout="row"> <md-button class="md-raised md-primary" href="#/scholarships/{{stipend.id}}/edit" ng-if="canEdit">{{\'main.button.edit\' | translate}}</md-button> <md-button class="md-raised" ng-if="!stipend.isOpen && stipend.id && canEdit" ng-click="publish()">{{\'main.button.publishtoStudents\' | translate}}</md-button> <md-button class="md-raised" ng-click="back(\'#/scholarships/\', stipendForm)">{{\'main.button.back\' | translate}}</md-button> </div> </div> </div> </div> </form> </div> </div>'),a.put("scholarship/term/scholarship.eri.edit.html",'<div layout="row" flex> <md-input-container flex> <label class="textInput">{{\'stipend.grantName\' | translate}}</label> <input type="text" ng-model="stipend.nameEt" name="nameEt" required md-maxlength="500"> </md-input-container> </div> <div layout="row" flex> <md-input-container flex> <label class="textInput">{{\'stipend.studyPeriod\' | translate}}</label> <hois-select required ng-model="stipend.studyPeriod" values="formState.studyPeriods"></hois-select> </md-input-container> </div> <div layout="row"> <md-input-container flex="20" flex-md="100" flex-sm="100" flex-xs="100"> <label>{{\'stipend.applicationPeriod\' | translate}}</label> <input type="hidden"> </md-input-container> <md-input-container flex="35" flex-md="100" flex-sm="100" flex-xs="100" flex-offset="5"> <md-datepicker ng-model="stipend.applicationStart" md-max-date="stipend.applicationEnd" md-placeholder="{{\'main.from\' | translate}}"></md-datepicker> </md-input-container> <md-input-container flex="35" flex-md="100" flex-sm="100" flex-xs="100" flex-offset="5"> <md-datepicker ng-model="stipend.applicationEnd" md-min-date="stipend.applicationStart" md-placeholder="{{\'main.thru\' | translate}}"></md-datepicker> </md-input-container> </div> <div layout="row"> <md-input-container flex="20" flex-md="100" flex-sm="100" flex-xs="100"> <label>{{\'stipend.paymentPeriod\' | translate}}</label> <input type="hidden"> </md-input-container> <md-input-container flex="35" flex-md="100" flex-sm="100" flex-xs="100" flex-offset="5"> <md-datepicker ng-model="stipend.paymentStart" md-max-date="stipend.paymentEnd" md-placeholder="{{\'main.from\' | translate}}"></md-datepicker> </md-input-container> <md-input-container flex="35" flex-md="100" flex-sm="100" flex-xs="100" flex-offset="5"> <md-datepicker ng-model="stipend.paymentEnd" md-min-date="stipend.paymentStart" md-placeholder="{{\'main.thru\' | translate}}"></md-datepicker> </md-input-container> </div> <div layout="row" flex> <md-input-container flex="45"> <label>{{\'stipend.places\' | translate}}</label> <input ng-model="stipend.places" type="number" autofocus aria-label="places" min="0" max="99999"> </md-input-container> <md-input-container flex="50" flex-offset="5"> <label>{{\'stipend.amountPaid\' | translate}}</label> <input ng-model="stipend.amountPaid" type="number" autofocus aria-label="amountPaid" min="0" max="9999"> </md-input-container> </div> <div> <div layout="row" flex="100"> <hois-autocomplete flex ng-model="formState.curriculum" method="curriculums" label="stipend.curriculums"></hois-autocomplete> </div> <div layout="column" class="common-label" flex="95" ng-repeat="curriculum in stipend.curriculums"> <div layout="row" flex layout-align="start center"> <div flex="5">&nbsp;</div> <div flex="50">{{curriculum.nameEt}}</div> <div> <a ng-click="deleteCurriculum(curriculum)" class="remove">&times;</a> </div> </div> </div> <div layout="row" flex> <md-input-container flex="45"> <label class="textInput">{{\'stipend.studyForm\' | translate}}</label> <hois-classifier-select ng-model="stipend.studyForms" name="type" model-value-attr="code" main-classifier-code="OPPEVORM" criteria="{vocational: true}" multiple></hois-classifier-select> </md-input-container> <md-input-container flex="50" flex-offset="5"> <label class="textInput">{{\'stipend.courses\' | translate}}</label> <hois-classifier-select required ng-model="stipend.courses" name="type" model-value-attr="code" main-classifier-code="KURSUS" multiple></hois-classifier-select> </md-input-container> </div> <div layout="row" flex> <md-input-container flex="45"> <label class="textInput">{{\'stipend.averageMark\' | translate}}</label> <input ng-model="stipend.averageMark" type="number" autofocus aria-label="averageMark" min="0"> </md-input-container> <md-input-container flex="50" flex-offset="5"> <label class="textInput">{{\'stipend.priority\' | translate}}</label> <hois-select ng-model="stipend.averageMarkPriority" values="formState.priorities | filter: averageMarkPriorityFilter" show-property="value" value-property="code"></hois-select> </md-input-container> </div> <div layout="row" flex> <md-input-container flex="45"> <label class="textInput">{{\'stipend.lastPeriodMark\' | translate}}</label> <input ng-model="stipend.lastPeriodMark" type="number" autofocus aria-label="averageMark" min="0"> </md-input-container> <md-input-container flex="50" flex-offset="5"> <label class="textInput">{{\'stipend.priority\' | translate}}</label> <hois-select ng-model="stipend.lastPeriodMarkPriority" values="formState.priorities | filter: lastPeriodMarkPriorityFilter" show-property="value" value-property="code"></hois-select> </md-input-container> </div> <div layout="row" flex> <md-input-container flex="45"> <label class="textInput">{{\'stipend.curriculumCompletion\' | translate}}</label> <input ng-model="stipend.curriculumCompletion" type="number" autofocus aria-label="curriculumCompletion" min="0"> </md-input-container> <md-input-container flex="50" flex-offset="5"> <label class="textInput">{{\'stipend.priority\' | translate}}</label> <hois-select ng-model="stipend.curriculumCompletionPriority" values="formState.priorities | filter: curriculumCompletionPriorityFilter" show-property="value" value-property="code"></hois-select> </md-input-container> </div> <div layout="row"> <md-input-container flex="20" flex-md="100" flex-sm="100" flex-xs="100"> <label>{{\'stipend.studyPeriodDates\' | translate}}</label> <input type="hidden"> </md-input-container> <md-input-container flex="35" flex-md="100" flex-sm="100" flex-xs="100" flex-offset="5"> <md-datepicker ng-model="stipend.studyStartPeriodStart" md-max-date="stipend.studyStartPeriodEnd" md-placeholder="{{\'main.from\' | translate}}"></md-datepicker> </md-input-container> <md-input-container flex="35" flex-md="100" flex-sm="100" flex-xs="100" flex-offset="5"> <md-datepicker ng-model="stipend.studyStartPeriodEnd" md-min-date="stipend.studyStartPeriodStart" md-placeholder="{{\'main.thru\' | translate}}"></md-datepicker> </md-input-container> </div> <div layout="row" flex> <md-checkbox ng-model="stipend.isStudyBacklog" aria-label="Is study backlog" flex="50"> {{\'stipend.isStudyBacklog\' | translate}} </md-checkbox> <md-checkbox ng-model="stipend.isTeacherConfirm" aria-label="Is teache confirm" flex="50"> {{\'stipend.isTeacherConfirm\' | translate}} </md-checkbox> </div> <div layout="row"> <md-checkbox ng-model="stipend.isFamilyIncomes" aria-label="Is family incomes" flex="50"> {{\'stipend.isFamilyIncomes\' | translate}} </md-checkbox> </div> </div> <div layout="row"> <md-button class="md-raised md-primary" ng-click="update()">{{\'main.button.save\' | translate}}</md-button> <md-button class="md-raised" ng-if="!stipend.isOpen && stipend.id" ng-click="publish()">{{\'main.button.publishtoStudents\' | translate}}</md-button> <md-button class="md-raised" ng-if="stipend.id && !stipend.isOpen" ng-click="delete()">{{\'main.button.delete\' | translate}}</md-button> <md-button class="md-raised" ng-click="back(\'#/scholarships/grants\', stipendForm)">{{\'main.button.back\' | translate}}</md-button> </div>'),a.put("scholarship/term/scholarship.eri.view.html",'<div class="ois-form-layout-padding" ng-cloak> <div flex> <form name="stipendForm"> <div class="form-readonly"> <div layout="row" flex> <md-input-container flex> <label class="textInput">{{formState.typeIsScholarship ? \'stipend.scholarshipType\' : \'stipend.grantType\' | translate}}</label> <hois-classifier-value ng-model="stipend.type" main-classifier-code="STIPTOETUS"></hois-classifier-value> </md-input-container> </div> <div layout="row" flex> <md-input-container flex> <label class="textInput">{{formState.typeIsScholarship ? \'stipend.scholarshipName\' : \'stipend.grantName\' | translate}}</label> <hois-value value="stipend.nameEt"></hois-value> </md-input-container> </div> <div layout="row" flex> <md-input-container flex> <label class="textInput">{{\'stipend.studyPeriod\' | translate}}</label> <hois-value value="currentLanguageNameField(formState.readonlyStudyPeriod)"></hois-value> </md-input-container> </div> <div layout="row"> <md-input-container flex="20" flex-md="100" flex-sm="100" flex-xs="100"> <label>{{\'stipend.applicationPeriod\' | translate}}</label> <input type="hidden"> </md-input-container> <md-input-container flex="35" flex-md="100" flex-sm="100" flex-xs="100" flex-offset="5"> <label>{{\'main.from\' | translate}}</label> <hois-value value="stipend.applicationStart | hoisDate"></hois-value> </md-input-container> <md-input-container flex="35" flex-md="100" flex-sm="100" flex-xs="100" flex-offset="5"> <label>{{\'main.thru\' | translate}}</label> <hois-value value="stipend.applicationEnd | hoisDate"></hois-value> </md-input-container> </div> <div layout="row"> <md-input-container flex="20" flex-md="100" flex-sm="100" flex-xs="100"> <label>{{\'stipend.paymentPeriod\' | translate}}</label> <input type="hidden"> </md-input-container> <md-input-container flex="35" flex-md="100" flex-sm="100" flex-xs="100" flex-offset="5"> <label>{{\'main.from\' | translate}}</label> <hois-value value="stipend.paymentStart | hoisDate"></hois-value> </md-input-container> <md-input-container flex="35" flex-md="100" flex-sm="100" flex-xs="100" flex-offset="5"> <label>{{\'main.thru\' | translate}}</label> <hois-value value="stipend.paymentEnd | hoisDate"></hois-value> </md-input-container> </div> <div layout="row" flex> <md-input-container flex="45"> <label>{{\'stipend.places\' | translate}}</label> <hois-value value="stipend.places"></hois-value> </md-input-container> <md-input-container flex="50" flex-offset="5"> <label>{{\'stipend.amountPaid\' | translate}}</label> <hois-value value="stipend.amountPaid"></hois-value> </md-input-container> </div> <div> <div layout="row" flex> <md-input-container flex> <label>{{\'stipend.curriculums\' | translate}}</label> <hois-value value="curriculumsDisplay.join(\', \')"></hois-value> </md-input-container> </div> <div layout="row" flex> <md-input-container flex="45"> <label class="textInput">{{\'stipend.studyForm\' | translate}}</label> <hois-classifier-value ng-model="stipend.studyForms" main-classifier-code="OPPEVORM" multiple></hois-classifier-value> </md-input-container> <md-input-container flex="50" flex-offset="5"> <label class="textInput">{{\'stipend.courses\' | translate}}</label> <hois-classifier-value ng-model="stipend.courses" main-classifier-code="KURSUS" multiple></hois-classifier-value> </md-input-container> </div> <div layout="row" flex> <md-input-container flex="45"> <label class="textInput">{{\'stipend.averageMark\' | translate}}</label> <hois-value value="stipend.averageMark"></hois-value> </md-input-container> <md-input-container flex="50" flex-offset="5"> <label class="textInput">{{\'stipend.priority\' | translate}}</label> <hois-classifier-value ng-model="stipend.averageMarkPriority" main-classifier-code="PRIORITEET"></hois-classifier-value> </md-input-container> </div> <div layout="row" flex> <md-input-container flex="45"> <label class="textInput">{{\'stipend.lastPeriodMark\' | translate}}</label> <hois-value value="stipend.lastPeriodMark"></hois-value> </md-input-container> <md-input-container flex="50" flex-offset="5"> <label class="textInput">{{\'stipend.priority\' | translate}}</label> <hois-classifier-value ng-model="stipend.lastPeriodMarkPriority" main-classifier-code="PRIORITEET"></hois-classifier-value> </md-input-container> </div> <div layout="row" flex> <md-input-container flex="45"> <label class="textInput">{{\'stipend.curriculumCompletion\' | translate}}</label> <hois-value value="stipend.curriculumCompletion"></hois-value> </md-input-container> <md-input-container flex="50" flex-offset="5"> <label class="textInput">{{\'stipend.priority\' | translate}}</label> <hois-classifier-value ng-model="stipend.curriculumCompletionPriority" main-classifier-code="PRIORITEET"></hois-classifier-value> </md-input-container> </div> <div layout="row"> <md-input-container flex="20" flex-md="100" flex-sm="100" flex-xs="100"> <label>{{\'stipend.studyPeriodDates\' | translate}}</label> <input type="hidden"> </md-input-container> <md-input-container flex="35" flex-md="100" flex-sm="100" flex-xs="100" flex-offset="5"> <label>{{\'main.from\' | translate}}</label> <hois-value value="stipend.studyStartPeriodStart | hoisDate"></hois-value> </md-input-container> <md-input-container flex="35" flex-md="100" flex-sm="100" flex-xs="100" flex-offset="5"> <label>{{\'main.thru\' | translate}}</label> <hois-value value="stipend.studyStartPeriodEnd | hoisDate"></hois-value> </md-input-container> </div> <div layout="row"> <md-checkbox ng-model="stipend.isTeacherConfirm" disabled aria-label="Is academic leave"> {{\'stipend.isTeacherConfirm\' | translate}} </md-checkbox> </div> <div layout="row"> <md-checkbox ng-model="stipend.isStudyBacklog" disabled aria-label="Is academic leave"> {{\'stipend.isStudyBacklog\' | translate}} </md-checkbox> </div> <div layout="row"> <md-checkbox ng-model="stipend.isFamilyIncomes" disabled aria-label="Is family incomes"> {{\'stipend.isFamilyIncomes\' | translate}} </md-checkbox> </div> <div layout="row"> <div layout="row"> <md-button class="md-raised md-primary" href="#/scholarships/{{stipend.id}}/edit" ng-if="canEdit">{{\'main.button.edit\' | translate}}</md-button> <md-button class="md-raised" ng-if="!stipend.isOpen && stipend.id && canEdit" ng-click="publish()">{{\'main.button.publishtoStudents\' | translate}}</md-button> <md-button class="md-raised" ng-click="back(\'#/scholarships/\', stipendForm)">{{\'main.button.back\' | translate}}</md-button> </div> </div> </div> </div> </form> </div> </div>'),
a.put("scholarship/term/scholarship.pohi.edit.html",'<div layout="row" flex> <md-input-container flex> <label class="textInput">{{\'stipend.grantName\' | translate}}</label> <input type="text" ng-model="stipend.nameEt" name="nameEt" required md-maxlength="500"> </md-input-container> </div> <div layout="row" flex> <md-input-container flex> <label class="textInput">{{\'stipend.studyPeriod\' | translate}}</label> <hois-select required ng-model="stipend.studyPeriod" values="formState.studyPeriods"></hois-select> </md-input-container> </div> <div layout="row"> <md-input-container flex="20" flex-md="100" flex-sm="100" flex-xs="100"> <label class="required">{{\'stipend.applicationPeriod\' | translate}}</label> <input type="hidden"> </md-input-container> <md-input-container flex="35" flex-md="100" flex-sm="100" flex-xs="100" flex-offset="5"> <md-datepicker required ng-model="stipend.applicationStart" md-max-date="stipend.applicationEnd" md-placeholder="{{\'main.from\' | translate}}"></md-datepicker> </md-input-container> <md-input-container flex="35" flex-md="100" flex-sm="100" flex-xs="100" flex-offset="5"> <md-datepicker required ng-model="stipend.applicationEnd" md-min-date="stipend.applicationStart" md-placeholder="{{\'main.thru\' | translate}}"></md-datepicker> </md-input-container> </div> <div layout="row"> <md-input-container flex="20" flex-md="100" flex-sm="100" flex-xs="100"> <label class="required">{{\'stipend.paymentPeriod\' | translate}}</label> <input type="hidden"> </md-input-container> <md-input-container flex="35" flex-md="100" flex-sm="100" flex-xs="100" flex-offset="5"> <md-datepicker required ng-model="stipend.paymentStart" md-max-date="stipend.paymentEnd" md-placeholder="{{\'main.from\' | translate}}"></md-datepicker> </md-input-container> <md-input-container flex="35" flex-md="100" flex-sm="100" flex-xs="100" flex-offset="5"> <md-datepicker required ng-model="stipend.paymentEnd" md-min-date="stipend.paymentStart" md-placeholder="{{\'main.thru\' | translate}}"></md-datepicker> </md-input-container> </div> <div layout="row" flex> <md-input-container flex="45"> <label>{{\'stipend.places\' | translate}}</label> <input ng-model="stipend.places" type="number" autofocus aria-label="places" min="0" max="99999"> </md-input-container> <md-input-container flex="50" flex-offset="5"> <label>{{\'stipend.amountPaid\' | translate}}</label> <input required ng-model="stipend.amountPaid" type="number" autofocus aria-label="amountPaid" min="0" max="9999"> </md-input-container> </div> <div> <div layout="row" flex="100"> <hois-autocomplete flex ng-model="formState.curriculum" method="curriculums" label="stipend.curriculums"></hois-autocomplete> </div> <div layout="column" class="common-label" flex="95" ng-repeat="curriculum in stipend.curriculums"> <div layout="row" flex layout-align="start center"> <div flex="5">&nbsp;</div> <div flex="50">{{curriculum.nameEt}}</div> <div> <a ng-click="deleteCurriculum(curriculum)" class="remove">&times;</a> </div> </div> </div> <div layout="row" flex> <md-input-container flex="45"> <label class="textInput">{{\'stipend.studyForm\' | translate}}</label> <hois-classifier-select required ng-model="stipend.studyForms" name="type" model-value-attr="code" main-classifier-code="OPPEVORM" multiple filter-values="filteredStudyForm" criteria="{vocational: true}"></hois-classifier-select> </md-input-container> <md-input-container flex="50" flex-offset="5"> <label class="textInput">{{\'stipend.courses\' | translate}}</label> <hois-classifier-select required ng-model="stipend.courses" name="type" model-value-attr="code" main-classifier-code="KURSUS" multiple></hois-classifier-select> </md-input-container> </div> <div layout="row" flex> <md-input-container flex="45"> <label class="textInput">{{\'stipend.averageMark\' | translate}}</label> <input ng-model="stipend.averageMark" type="number" autofocus aria-label="averageMark" min="0"> </md-input-container> <md-input-container flex="50" flex-offset="5"> <label class="textInput">{{\'stipend.priority\' | translate}}</label> <hois-select ng-model="stipend.averageMarkPriority" values="formState.priorities | filter: averageMarkPriorityFilter" show-property="value" value-property="code"></hois-select> </md-input-container> </div> <div layout="row" flex> <md-input-container flex="45"> <label class="textInput">{{\'stipend.lastPeriodMark\' | translate}}</label> <input ng-model="stipend.lastPeriodMark" type="number" autofocus aria-label="averageMark" min="0"> </md-input-container> <md-input-container flex="50" flex-offset="5"> <label class="textInput">{{\'stipend.priority\' | translate}}</label> <hois-select ng-model="stipend.lastPeriodMarkPriority" values="formState.priorities | filter: lastPeriodMarkPriorityFilter" model-value-attr="code" show-property="value" value-property="code"></hois-select> </md-input-container> </div> <div layout="row" flex> <md-input-container flex="45"> <label class="textInput">{{\'stipend.curriculumCompletion\' | translate}}</label> <input ng-model="stipend.curriculumCompletion" type="number" autofocus aria-label="curriculumCompletion" min="0"> </md-input-container> <md-input-container flex="50" flex-offset="5"> <label class="textInput">{{\'stipend.priority\' | translate}}</label> <hois-select ng-model="stipend.curriculumCompletionPriority" values="formState.priorities | filter: curriculumCompletionPriorityFilter" model-value-attr="code" show-property="value" value-property="code"></hois-select> </md-input-container> </div> <div layout="row" flex> <md-input-container flex="45"> <label class="textInput">{{\'stipend.maxAbsences\' | translate}}</label> <input ng-model="stipend.maxAbsences" type="number" autofocus aria-label="curriculumCompletion" min="0"> </md-input-container> <md-input-container flex="50" flex-offset="5"> <label class="textInput">{{\'stipend.priority\' | translate}}</label> <hois-select ng-model="stipend.maxAbsencesPriority" values="formState.priorities | filter: maxAbsencesPriorityFilter" model-value-attr="code" show-property="value" value-property="code"></hois-select> </md-input-container> </div> <div layout="row"> <md-input-container flex="20" flex-md="100" flex-sm="100" flex-xs="100"> <label>{{\'stipend.studyPeriodDates\' | translate}}</label> <input type="hidden"> </md-input-container> <md-input-container flex="35" flex-md="100" flex-sm="100" flex-xs="100" flex-offset="5"> <md-datepicker ng-model="stipend.studyStartPeriodStart" md-max-date="stipend.studyStartPeriodEnd" md-placeholder="{{\'main.from\' | translate}}"></md-datepicker> </md-input-container> <md-input-container flex="35" flex-md="100" flex-sm="100" flex-xs="100" flex-offset="5"> <md-datepicker ng-model="stipend.studyStartPeriodEnd" md-min-date="stipend.studyStartPeriodStart" md-placeholder="{{\'main.thru\' | translate}}"></md-datepicker> </md-input-container> </div> <div layout="row" flex> <md-checkbox ng-model="stipend.isStudyBacklog" aria-label="Is study backlog" ng-disabled="display.isStudyBacklogRead" flex="50"> {{\'stipend.isStudyBacklog\' | translate}} </md-checkbox> <md-checkbox ng-model="stipend.isTeacherConfirm" aria-label="Is teache confir" ng-disabled="display.isTeacherConfirmRead" flex="50"> {{\'stipend.isTeacherConfirm\' | translate}} </md-checkbox> </div> </div> <div layout="row"> <md-button class="md-raised md-primary" ng-click="update()">{{\'main.button.save\' | translate}}</md-button> <md-button class="md-raised" ng-if="!stipend.isOpen && stipend.id" ng-click="publish()">{{\'main.button.publishtoStudents\' | translate}}</md-button> <md-button class="md-raised" ng-if="stipend.id && !stipend.isOpen" ng-click="delete()">{{\'main.button.delete\' | translate}}</md-button> <md-button class="md-raised" ng-click="back(\'#/scholarships/grants\', stipendForm)">{{\'main.button.back\' | translate}}</md-button> </div>'),a.put("scholarship/term/scholarship.pohi.view.html",'<div class="ois-form-layout-padding" ng-cloak> <div flex> <form name="stipendForm"> <div class="form-readonly"> <div layout="row" flex> <md-input-container flex> <label class="textInput">{{formState.typeIsScholarship ? \'stipend.scholarshipType\' : \'stipend.grantType\' | translate}}</label> <hois-classifier-value ng-model="stipend.type" main-classifier-code="STIPTOETUS"></hois-classifier-value> </md-input-container> </div> <div layout="row" flex> <md-input-container flex> <label class="textInput">{{formState.typeIsScholarship ? \'stipend.scholarshipName\' : \'stipend.grantName\' | translate}}</label> <hois-value value="stipend.nameEt"></hois-value> </md-input-container> </div> <div layout="row" flex> <md-input-container flex> <label class="textInput">{{\'stipend.studyPeriod\' | translate}}</label> <hois-value value="currentLanguageNameField(formState.readonlyStudyPeriod)"></hois-value> </md-input-container> </div> <div layout="row"> <md-input-container flex="20" flex-md="100" flex-sm="100" flex-xs="100"> <label>{{\'stipend.applicationPeriod\' | translate}}</label> <input type="hidden"> </md-input-container> <md-input-container flex="35" flex-md="100" flex-sm="100" flex-xs="100" flex-offset="5"> <label>{{\'main.from\' | translate}}</label> <hois-value value="stipend.applicationStart | hoisDate"></hois-value> </md-input-container> <md-input-container flex="35" flex-md="100" flex-sm="100" flex-xs="100" flex-offset="5"> <label>{{\'main.thru\' | translate}}</label> <hois-value value="stipend.applicationEnd | hoisDate"></hois-value> </md-input-container> </div> <div layout="row"> <md-input-container flex="20" flex-md="100" flex-sm="100" flex-xs="100"> <label>{{\'stipend.paymentPeriod\' | translate}}</label> <input type="hidden"> </md-input-container> <md-input-container flex="35" flex-md="100" flex-sm="100" flex-xs="100" flex-offset="5"> <label>{{\'main.from\' | translate}}</label> <hois-value value="stipend.paymentStart | hoisDate"></hois-value> </md-input-container> <md-input-container flex="35" flex-md="100" flex-sm="100" flex-xs="100" flex-offset="5"> <label>{{\'main.thru\' | translate}}</label> <hois-value value="stipend.paymentEnd | hoisDate"></hois-value> </md-input-container> </div> <div layout="row" flex> <md-input-container flex="45"> <label>{{\'stipend.places\' | translate}}</label> <hois-value value="stipend.places"></hois-value> </md-input-container> <md-input-container flex="50" flex-offset="5"> <label>{{\'stipend.amountPaid\' | translate}}</label> <hois-value value="stipend.amountPaid"></hois-value> </md-input-container> </div> <div> <div layout="row" flex> <md-input-container flex> <label>{{\'stipend.curriculums\' | translate}}</label> <hois-value value="curriculumsDisplay.join(\', \')"></hois-value> </md-input-container> </div> <div layout="row" flex> <md-input-container flex="45"> <label class="textInput">{{\'stipend.studyForm\' | translate}}</label> <hois-classifier-value ng-model="stipend.studyForms" main-classifier-code="OPPEVORM" multiple></hois-classifier-value> </md-input-container> <md-input-container flex="50" flex-offset="5"> <label class="textInput">{{\'stipend.courses\' | translate}}</label> <hois-classifier-value ng-model="stipend.courses" main-classifier-code="KURSUS" multiple></hois-classifier-value> </md-input-container> </div> <div layout="row" flex> <md-input-container flex="45"> <label class="textInput">{{\'stipend.averageMark\' | translate}}</label> <hois-value value="stipend.averageMark"></hois-value> </md-input-container> <md-input-container flex="50" flex-offset="5"> <label class="textInput">{{\'stipend.priority\' | translate}}</label> <hois-classifier-value ng-model="stipend.averageMarkPriority" main-classifier-code="PRIORITEET"></hois-classifier-value> </md-input-container> </div> <div layout="row" flex> <md-input-container flex="45"> <label class="textInput">{{\'stipend.lastPeriodMark\' | translate}}</label> <hois-value value="stipend.lastPeriodMark"></hois-value> </md-input-container> <md-input-container flex="50" flex-offset="5"> <label class="textInput">{{\'stipend.priority\' | translate}}</label> <hois-classifier-value ng-model="stipend.lastPeriodMarkPriority" main-classifier-code="PRIORITEET"></hois-classifier-value> </md-input-container> </div> <div layout="row" flex> <md-input-container flex="45"> <label class="textInput">{{\'stipend.curriculumCompletion\' | translate}}</label> <hois-value value="stipend.curriculumCompletion"></hois-value> </md-input-container> <md-input-container flex="50" flex-offset="5"> <label class="textInput">{{\'stipend.priority\' | translate}}</label> <hois-classifier-value ng-model="stipend.curriculumCompletionPriority" main-classifier-code="PRIORITEET"></hois-classifier-value> </md-input-container> </div> <div layout="row" flex> <md-input-container flex="45"> <label class="textInput">{{\'stipend.maxAbsences\' | translate}}</label> <hois-value value="stipend.maxAbsences"></hois-value> </md-input-container> <md-input-container flex="50" flex-offset="5"> <label class="textInput">{{\'stipend.priority\' | translate}}</label> <hois-classifier-value ng-model="stipend.maxAbsencesPriority" main-classifier-code="PRIORITEET"></hois-classifier-value> </md-input-container> </div> <div layout="row"> <md-input-container flex="20" flex-md="100" flex-sm="100" flex-xs="100"> <label>{{\'stipend.studyPeriodDates\' | translate}}</label> <input type="hidden"> </md-input-container> <md-input-container flex="35" flex-md="100" flex-sm="100" flex-xs="100" flex-offset="5"> <label>{{\'main.from\' | translate}}</label> <hois-value value="stipend.studyStartPeriodStart | hoisDate"></hois-value> </md-input-container> <md-input-container flex="35" flex-md="100" flex-sm="100" flex-xs="100" flex-offset="5"> <label>{{\'main.thru\' | translate}}</label> <hois-value value="stipend.studyStartPeriodEnd | hoisDate"></hois-value> </md-input-container> </div> <div layout="row"> <md-checkbox ng-model="stipend.isTeacherConfirm" disabled aria-label="Is academic leave"> {{\'stipend.isTeacherConfirm\' | translate}} </md-checkbox> </div> <div layout="row"> <md-checkbox ng-model="stipend.isStudyBacklog" disabled aria-label="Is academic leave"> {{\'stipend.isStudyBacklog\' | translate}} </md-checkbox> </div> <div layout="row"> <div layout="row"> <md-button class="md-raised md-primary" href="#/scholarships/{{stipend.id}}/edit" ng-if="canEdit">{{\'main.button.edit\' | translate}}</md-button> <md-button class="md-raised" ng-if="!stipend.isOpen && stipend.id && canEdit" ng-click="publish()">{{\'main.button.publishtoStudents\' | translate}}</md-button> <md-button class="md-raised" ng-click="back(\'#/scholarships/\', stipendForm)">{{\'main.button.back\' | translate}}</md-button> </div> </div> </div> </div> </form> </div> </div>'),a.put("scholarship/term/scholarship.scho.edit.html",'<div layout="row" flex> <md-input-container flex> <label class="textInput">{{\'stipend.scholarshipName\' | translate}}</label> <input type="text" ng-model="stipend.nameEt" name="nameEt" required md-maxlength="500"> </md-input-container> </div> <div layout="row" flex> <md-input-container flex> <label class="textInput">{{\'stipend.studyPeriod\' | translate}}</label> <hois-select required ng-model="stipend.studyPeriod" values="formState.studyPeriods"></hois-select> </md-input-container> </div> <div layout="row"> <md-input-container flex="20" flex-md="100" flex-sm="100" flex-xs="100"> <label class="required">{{\'stipend.applicationPeriod\' | translate}}</label> <input type="hidden"> </md-input-container> <md-input-container flex="35" flex-md="100" flex-sm="100" flex-xs="100" flex-offset="5"> <md-datepicker required ng-model="stipend.applicationStart" md-max-date="stipend.applicationEnd" md-placeholder="{{\'main.from\' | translate}}"></md-datepicker> </md-input-container> <md-input-container flex="35" flex-md="100" flex-sm="100" flex-xs="100" flex-offset="5"> <md-datepicker required ng-model="stipend.applicationEnd" md-min-date="stipend.applicationStart" md-placeholder="{{\'main.thru\' | translate}}"></md-datepicker> </md-input-container> </div> <div layout="row"> <md-input-container flex="20" flex-md="100" flex-sm="100" flex-xs="100"> <label class="required">{{\'stipend.paymentPeriod\' | translate}}</label> <input type="hidden"> </md-input-container> <md-input-container flex="35" flex-md="100" flex-sm="100" flex-xs="100" flex-offset="5"> <md-datepicker required ng-model="stipend.paymentStart" md-max-date="stipend.paymentEnd" md-placeholder="{{\'main.from\' | translate}}"></md-datepicker> </md-input-container> <md-input-container flex="35" flex-md="100" flex-sm="100" flex-xs="100" flex-offset="5"> <md-datepicker required ng-model="stipend.paymentEnd" md-min-date="stipend.paymentStart" md-placeholder="{{\'main.thru\' | translate}}"></md-datepicker> </md-input-container> </div> <div layout="row" flex> <md-input-container flex="45"> <label>{{\'stipend.places\' | translate}}</label> <input ng-model="stipend.places" type="number" autofocus aria-label="places" min="0" max="99999"> </md-input-container> <md-input-container flex="50" flex-offset="5"> <label>{{\'stipend.amountPaid\' | translate}}</label> <input required ng-model="stipend.amountPaid" type="number" autofocus aria-label="amountPaid" min="0" max="9999"> </md-input-container> </div> <div> <div layout="row" flex="100"> <hois-autocomplete flex ng-model="formState.curriculum" method="curriculums" label="stipend.curriculums"></hois-autocomplete> </div> <div layout="column" class="common-label" flex="95" ng-repeat="curriculum in stipend.curriculums"> <div layout="row" flex layout-align="start center"> <div flex="5">&nbsp;</div> <div flex="50">{{curriculum.nameEt}}</div> <div> <a ng-click="deleteCurriculum(curriculum)" class="remove">&times;</a> </div> </div> </div> <div layout="row" flex> <md-input-container flex="45"> <label class="textInput">{{\'stipend.studyLoad\' | translate}}</label> <hois-classifier-select required ng-model="stipend.studyLoads" name="type" model-value-attr="code" main-classifier-code="OPPEKOORMUS" criteria="{higher: true}" multiple></hois-classifier-select> </md-input-container> <md-input-container flex="50" flex-offset="5"> <label class="textInput">{{\'stipend.courses\' | translate}}</label> <hois-classifier-select required ng-model="stipend.courses" name="type" model-value-attr="code" main-classifier-code="KURSUS" multiple></hois-classifier-select> </md-input-container> </div> <div layout="row" flex> <md-input-container flex="45"> <label class="textInput">{{\'stipend.averageMark\' | translate}}</label> <input ng-model="stipend.averageMark" type="number" autofocus aria-label="averageMark" min="0"> </md-input-container> <md-input-container flex="50" flex-offset="5"> <label class="textInput">{{\'stipend.priority\' | translate}}</label> <hois-select ng-model="stipend.averageMarkPriority" values="formState.priorities | filter: averageMarkPriorityFilter" show-property="value" value-property="code"></hois-select> </md-input-container> </div> <div layout="row" flex> <md-input-container flex="45"> <label class="textInput">{{\'stipend.lastPeriodMark\' | translate}}</label> <input ng-model="stipend.lastPeriodMark" type="number" autofocus aria-label="averageMark" min="0"> </md-input-container> <md-input-container flex="50" flex-offset="5"> <label class="textInput">{{\'stipend.priority\' | translate}}</label> <hois-select ng-model="stipend.lastPeriodMarkPriority" values="formState.priorities | filter: lastPeriodMarkPriorityFilter" show-property="value" value-property="code"></hois-select> </md-input-container> </div> <div layout="row" flex> <md-input-container flex="45"> <label class="textInput">{{\'stipend.curriculumCompletion\' | translate}}</label> <input ng-model="stipend.curriculumCompletion" type="number" autofocus aria-label="curriculumCompletion" min="0"> </md-input-container> <md-input-container flex="50" flex-offset="5"> <label class="textInput">{{\'stipend.priority\' | translate}}</label> <hois-select ng-model="stipend.curriculumCompletionPriority" values="formState.priorities | filter: curriculumCompletionPriorityFilter" show-property="value" value-property="code"></hois-select> </md-input-container> </div> <div layout="row"> <md-input-container flex="20" flex-md="100" flex-sm="100" flex-xs="100"> <label>{{\'stipend.studyPeriodDates\' | translate}}</label> <input type="hidden"> </md-input-container> <md-input-container flex="35" flex-md="100" flex-sm="100" flex-xs="100" flex-offset="5"> <md-datepicker ng-model="stipend.studyStartPeriodStart" md-max-date="stipend.studyStartPeriodEnd" md-placeholder="{{\'main.from\' | translate}}"></md-datepicker> </md-input-container> <md-input-container flex="35" flex-md="100" flex-sm="100" flex-xs="100" flex-offset="5"> <md-datepicker ng-model="stipend.studyStartPeriodEnd" md-min-date="stipend.studyStartPeriodStart" md-placeholder="{{\'main.thru\' | translate}}"></md-datepicker> </md-input-container> </div> <div layout="row" flex> <md-checkbox ng-model="stipend.isAcademicLeave" aria-label="Is academic leave" flex="50"> {{\'stipend.isAcademicLeave\' | translate}} </md-checkbox> </div> </div> <div layout="row"> <md-button class="md-raised md-primary" ng-click="update()">{{\'main.button.save\' | translate}}</md-button> <md-button class="md-raised" ng-if="!stipend.isOpen && stipend.id" ng-click="publish()">{{\'main.button.publishtoStudents\' | translate}}</md-button> <md-button class="md-raised" ng-if="stipend.id && !stipend.isOpen" ng-click="delete()">{{\'main.button.delete\' | translate}}</md-button> <md-button class="md-raised" ng-click="back(\'#/scholarships/scholarships\', stipendForm)">{{\'main.button.back\' | translate}}</md-button> </div>'),a.put("scholarship/term/scholarship.scho.view.html",'<div class="ois-form-layout-padding" ng-cloak> <div flex> <form name="stipendForm"> <div class="form-readonly"> <div layout="row" flex> <md-input-container flex> <label class="textInput">{{formState.typeIsScholarship ? \'stipend.scholarshipType\' : \'stipend.grantType\' | translate}}</label> <hois-classifier-value ng-model="stipend.type" main-classifier-code="STIPTOETUS"></hois-classifier-value> </md-input-container> </div> <div layout="row" flex> <md-input-container flex> <label class="textInput">{{formState.typeIsScholarship ? \'stipend.scholarshipName\' : \'stipend.grantName\' | translate}}</label> <hois-value value="stipend.nameEt"></hois-value> </md-input-container> </div> <div layout="row" flex> <md-input-container flex> <label class="textInput">{{\'stipend.studyPeriod\' | translate}}</label> <hois-value value="currentLanguageNameField(formState.readonlyStudyPeriod)"></hois-value> </md-input-container> </div> <div layout="row"> <md-input-container flex="20" flex-md="100" flex-sm="100" flex-xs="100"> <label>{{\'stipend.applicationPeriod\' | translate}}</label> <input type="hidden"> </md-input-container> <md-input-container flex="35" flex-md="100" flex-sm="100" flex-xs="100" flex-offset="5"> <label>{{\'main.from\' | translate}}</label> <hois-value value="stipend.applicationStart | hoisDate"></hois-value> </md-input-container> <md-input-container flex="35" flex-md="100" flex-sm="100" flex-xs="100" flex-offset="5"> <label>{{\'main.thru\' | translate}}</label> <hois-value value="stipend.applicationEnd | hoisDate"></hois-value> </md-input-container> </div> <div layout="row"> <md-input-container flex="20" flex-md="100" flex-sm="100" flex-xs="100"> <label>{{\'stipend.paymentPeriod\' | translate}}</label> <input type="hidden"> </md-input-container> <md-input-container flex="35" flex-md="100" flex-sm="100" flex-xs="100" flex-offset="5"> <label>{{\'main.from\' | translate}}</label> <hois-value value="stipend.paymentStart | hoisDate"></hois-value> </md-input-container> <md-input-container flex="35" flex-md="100" flex-sm="100" flex-xs="100" flex-offset="5"> <label>{{\'main.thru\' | translate}}</label> <hois-value value="stipend.paymentEnd | hoisDate"></hois-value> </md-input-container> </div> <div layout="row" flex> <md-input-container flex="45"> <label>{{\'stipend.places\' | translate}}</label> <hois-value value="stipend.places"></hois-value> </md-input-container> <md-input-container flex="50" flex-offset="5"> <label>{{\'stipend.amountPaid\' | translate}}</label> <hois-value value="stipend.amountPaid"></hois-value> </md-input-container> </div> <div> <div layout="row" flex> <md-input-container flex> <label>{{\'stipend.curriculums\' | translate}}</label> <hois-value value="curriculumsDisplay.join(\', \')"></hois-value> </md-input-container> </div> <div layout="row" flex> <md-input-container flex="45"> <label class="textInput">{{\'stipend.studyLoad\' | translate}}</label> <hois-classifier-value ng-model="stipend.studyLoads" main-classifier-code="OPPEKOORMUS" multiple></hois-classifier-value> </md-input-container> <md-input-container flex="50" flex-offset="5"> <label class="textInput">{{\'stipend.courses\' | translate}}</label> <hois-classifier-value ng-model="stipend.courses" main-classifier-code="KURSUS" multiple></hois-classifier-value> </md-input-container> </div> <div layout="row" flex> <md-input-container flex="45"> <label class="textInput">{{\'stipend.averageMark\' | translate}}</label> <hois-value value="stipend.averageMark"></hois-value> </md-input-container> <md-input-container flex="50" flex-offset="5"> <label class="textInput">{{\'stipend.priority\' | translate}}</label> <hois-classifier-value ng-model="stipend.averageMarkPriority" main-classifier-code="PRIORITEET"></hois-classifier-value> </md-input-container> </div> <div layout="row" flex> <md-input-container flex="45"> <label class="textInput">{{\'stipend.lastPeriodMark\' | translate}}</label> <hois-value value="stipend.lastPeriodMark"></hois-value> </md-input-container> <md-input-container flex="50" flex-offset="5"> <label class="textInput">{{\'stipend.priority\' | translate}}</label> <hois-classifier-value ng-model="stipend.lastPeriodMarkPriority" main-classifier-code="PRIORITEET"></hois-classifier-value> </md-input-container> </div> <div layout="row" flex> <md-input-container flex="45"> <label class="textInput">{{\'stipend.curriculumCompletion\' | translate}}</label> <hois-value value="stipend.curriculumCompletion"></hois-value> </md-input-container> <md-input-container flex="50" flex-offset="5"> <label class="textInput">{{\'stipend.priority\' | translate}}</label> <hois-classifier-value ng-model="stipend.curriculumCompletionPriority" main-classifier-code="PRIORITEET"></hois-classifier-value> </md-input-container> </div> <div layout="row"> <md-input-container flex="20" flex-md="100" flex-sm="100" flex-xs="100"> <label>{{\'stipend.studyPeriodDates\' | translate}}</label> <input type="hidden"> </md-input-container> <md-input-container flex="35" flex-md="100" flex-sm="100" flex-xs="100" flex-offset="5"> <label>{{\'main.from\' | translate}}</label> <hois-value value="stipend.studyStartPeriodStart | hoisDate"></hois-value> </md-input-container> <md-input-container flex="35" flex-md="100" flex-sm="100" flex-xs="100" flex-offset="5"> <label>{{\'main.thru\' | translate}}</label> <hois-value value="stipend.studyStartPeriodEnd | hoisDate"></hois-value> </md-input-container> </div> <div layout="row" flex> <md-checkbox ng-model="stipend.isAcademicLeave" aria-label="Is academic leave" disabled flex="50"> {{\'stipend.isAcademicLeave\' | translate}} </md-checkbox> </div> <div layout="row"> <div layout="row"> <md-button class="md-raised md-primary" href="#/scholarships/{{stipend.id}}/edit" ng-if="canEdit">{{\'main.button.edit\' | translate}}</md-button> <md-button class="md-raised" ng-if="!stipend.isOpen && stipend.id && canEdit" ng-click="publish()">{{\'main.button.publishtoStudents\' | translate}}</md-button> <md-button class="md-raised" ng-click="back(\'#/scholarships/\', stipendForm)">{{\'main.button.back\' | translate}}</md-button> </div> </div> </div> </div> </form> </div> </div>'),a.put("scholarship/term/scholarship.soidu.edit.html",'<div layout="row" flex> <md-input-container flex> <label class="textInput">{{\'stipend.grantName\' | translate}}</label> <input type="text" ng-model="stipend.nameEt" name="nameEt" required md-maxlength="500"> </md-input-container> </div> <div layout="row" flex> <md-input-container flex> <label class="textInput">{{\'stipend.studyPeriod\' | translate}}</label> <hois-select required ng-model="stipend.studyPeriod" values="formState.studyPeriods"></hois-select> </md-input-container> </div> <div layout="row"> <md-input-container flex="20" flex-md="100" flex-sm="100" flex-xs="100"> <label>{{\'stipend.applicationPeriod\' | translate}}</label> <input type="hidden"> </md-input-container> <md-input-container flex="35" flex-md="100" flex-sm="100" flex-xs="100" flex-offset="5"> <md-datepicker ng-model="stipend.applicationStart" md-max-date="stipend.applicationEnd" md-placeholder="{{\'main.from\' | translate}}"></md-datepicker> </md-input-container> <md-input-container flex="35" flex-md="100" flex-sm="100" flex-xs="100" flex-offset="5"> <md-datepicker ng-model="stipend.applicationEnd" md-min-date="stipend.applicationStart" md-placeholder="{{\'main.thru\' | translate}}"></md-datepicker> </md-input-container> </div> <div layout="row"> <md-input-container flex="20" flex-md="100" flex-sm="100" flex-xs="100"> <label>{{\'stipend.paymentPeriod\' | translate}}</label> <input type="hidden"> </md-input-container> <md-input-container flex="35" flex-md="100" flex-sm="100" flex-xs="100" flex-offset="5"> <md-datepicker ng-model="stipend.paymentStart" md-max-date="stipend.paymentEnd" md-placeholder="{{\'main.from\' | translate}}"></md-datepicker> </md-input-container> <md-input-container flex="35" flex-md="100" flex-sm="100" flex-xs="100" flex-offset="5"> <md-datepicker ng-model="stipend.paymentEnd" md-min-date="stipend.paymentStart" md-placeholder="{{\'main.thru\' | translate}}"></md-datepicker> </md-input-container> </div> <div layout="row" flex> <md-input-container flex="100"> <label>{{\'stipend.amountPaid\' | translate}}</label> <input ng-model="stipend.amountPaid" type="number" autofocus aria-label="amountPaid" min="0" max="9999"> </md-input-container> </div> <div> <div layout="row" flex="100"> <hois-autocomplete flex ng-model="formState.curriculum" method="curriculums" label="stipend.curriculums"></hois-autocomplete> </div> <div layout="column" class="common-label" flex="95" ng-repeat="curriculum in stipend.curriculums"> <div layout="row" flex layout-align="start center"> <div flex="5">&nbsp;</div> <div flex="50">{{curriculum.nameEt}}</div> <div> <a ng-click="deleteCurriculum(curriculum)" class="remove">&times;</a> </div> </div> </div> <div layout="row" flex> <md-input-container flex="45"> <label class="textInput">{{\'stipend.studyForm\' | translate}}</label> <hois-classifier-select required ng-model="stipend.studyForms" name="type" model-value-attr="code" main-classifier-code="OPPEVORM" criteria="{vocational: true}" multiple filter-values="filteredStudyForm"></hois-classifier-select> </md-input-container> <md-input-container flex="50" flex-offset="5"> <label class="textInput">{{\'stipend.courses\' | translate}}</label> <hois-classifier-select required ng-model="stipend.courses" name="type" model-value-attr="code" main-classifier-code="KURSUS" multiple></hois-classifier-select> </md-input-container> </div> <div layout="row"> <md-input-container flex="20" flex-md="100" flex-sm="100" flex-xs="100"> <label>{{\'stipend.studyPeriodDates\' | translate}}</label> <input type="hidden"> </md-input-container> <md-input-container flex="35" flex-md="100" flex-sm="100" flex-xs="100" flex-offset="5"> <md-datepicker ng-model="stipend.studyStartPeriodStart" md-max-date="stipend.studyStartPeriodEnd" md-placeholder="{{\'main.from\' | translate}}"></md-datepicker> </md-input-container> <md-input-container flex="35" flex-md="100" flex-sm="100" flex-xs="100" flex-offset="5"> <md-datepicker ng-model="stipend.studyStartPeriodEnd" md-min-date="stipend.studyStartPeriodStart" md-placeholder="{{\'main.thru\' | translate}}"></md-datepicker> </md-input-container> </div> <div layout="row" flex> <md-checkbox ng-model="stipend.isStudyBacklog" aria-label="Is study backlog" ng-disabled="display.isStudyBacklogRead" flex="50"> {{\'stipend.isStudyBacklog\' | translate}} </md-checkbox> <md-checkbox ng-model="stipend.isTeacherConfirm" aria-label="Is teache confir" ng-disabled="display.isTeacherConfirmRead" flex="50"> {{\'stipend.isTeacherConfirm\' | translate}} </md-checkbox> </div> </div> <div layout="row"> <md-button class="md-raised md-primary" ng-click="update()">{{\'main.button.save\' | translate}}</md-button> <md-button class="md-raised" ng-if="!stipend.isOpen && stipend.id" ng-click="publish()">{{\'main.button.publishtoStudents\' | translate}}</md-button> <md-button class="md-raised" ng-if="stipend.id && !stipend.isOpen" ng-click="delete()">{{\'main.button.delete\' | translate}}</md-button> <md-button class="md-raised" ng-click="back(\'#/scholarships?grants\', stipendForm)">{{\'main.button.back\' | translate}}</md-button> </div>'),
a.put("scholarship/term/scholarship.soidu.view.html",'<div class="ois-form-layout-padding" ng-cloak> <div flex> <form name="stipendForm"> <div class="form-readonly"> <div layout="row" flex> <md-input-container flex> <label class="textInput">{{formState.typeIsScholarship ? \'stipend.scholarshipType\' : \'stipend.grantType\' | translate}}</label> <hois-classifier-value ng-model="stipend.type" main-classifier-code="STIPTOETUS"></hois-classifier-value> </md-input-container> </div> <div layout="row" flex> <md-input-container flex> <label class="textInput">{{formState.typeIsScholarship ? \'stipend.scholarshipName\' : \'stipend.grantName\' | translate}}</label> <hois-value value="stipend.nameEt"></hois-value> </md-input-container> </div> <div layout="row" flex> <md-input-container flex> <label class="textInput">{{\'stipend.studyPeriod\' | translate}}</label> <hois-value value="currentLanguageNameField(formState.readonlyStudyPeriod)"></hois-value> </md-input-container> </div> <div layout="row"> <md-input-container flex="20" flex-md="100" flex-sm="100" flex-xs="100"> <label>{{\'stipend.applicationPeriod\' | translate}}</label> <input type="hidden"> </md-input-container> <md-input-container flex="35" flex-md="100" flex-sm="100" flex-xs="100" flex-offset="5"> <label>{{\'main.from\' | translate}}</label> <hois-value value="stipend.applicationStart | hoisDate"></hois-value> </md-input-container> <md-input-container flex="35" flex-md="100" flex-sm="100" flex-xs="100" flex-offset="5"> <label>{{\'main.thru\' | translate}}</label> <hois-value value="stipend.applicationEnd | hoisDate"></hois-value> </md-input-container> </div> <div layout="row"> <md-input-container flex="20" flex-md="100" flex-sm="100" flex-xs="100"> <label>{{\'stipend.paymentPeriod\' | translate}}</label> <input type="hidden"> </md-input-container> <md-input-container flex="35" flex-md="100" flex-sm="100" flex-xs="100" flex-offset="5"> <label>{{\'main.from\' | translate}}</label> <hois-value value="stipend.paymentStart | hoisDate"></hois-value> </md-input-container> <md-input-container flex="35" flex-md="100" flex-sm="100" flex-xs="100" flex-offset="5"> <label>{{\'main.thru\' | translate}}</label> <hois-value value="stipend.paymentEnd | hoisDate"></hois-value> </md-input-container> </div> <div layout="row" flex> <md-input-container flex> <label>{{\'stipend.amountPaid\' | translate}}</label> <hois-value value="stipend.amountPaid"></hois-value> </md-input-container> </div> <div> <div layout="row" flex> <md-input-container flex> <label>{{\'stipend.curriculums\' | translate}}</label> <hois-value value="curriculumsDisplay.join(\', \')"></hois-value> </md-input-container> </div> <div layout="row" flex> <md-input-container flex="45"> <label class="textInput">{{\'stipend.studyForm\' | translate}}</label> <hois-classifier-value ng-model="stipend.studyForms" main-classifier-code="OPPEVORM" multiple></hois-classifier-value> </md-input-container> <md-input-container flex="50" flex-offset="5"> <label class="textInput">{{\'stipend.courses\' | translate}}</label> <hois-classifier-value ng-model="stipend.courses" main-classifier-code="KURSUS" multiple></hois-classifier-value> </md-input-container> </div> <div layout="row"> <md-input-container flex="20" flex-md="100" flex-sm="100" flex-xs="100"> <label>{{\'stipend.studyPeriodDates\' | translate}}</label> <input type="hidden"> </md-input-container> <md-input-container flex="35" flex-md="100" flex-sm="100" flex-xs="100" flex-offset="5"> <label>{{\'main.from\' | translate}}</label> <hois-value value="stipend.studyStartPeriodStart | hoisDate"></hois-value> </md-input-container> <md-input-container flex="35" flex-md="100" flex-sm="100" flex-xs="100" flex-offset="5"> <label>{{\'main.thru\' | translate}}</label> <hois-value value="stipend.studyStartPeriodEnd | hoisDate"></hois-value> </md-input-container> </div> <div layout="row"> <md-checkbox ng-model="stipend.isTeacherConfirm" disabled aria-label="Is academic leave"> {{\'stipend.isTeacherConfirm\' | translate}} </md-checkbox> </div> <div layout="row"> <md-checkbox ng-model="stipend.isStudyBacklog" disabled aria-label="Is academic leave"> {{\'stipend.isStudyBacklog\' | translate}} </md-checkbox> </div> <div layout="row"> <div layout="row"> <md-button class="md-raised md-primary" href="#/scholarships/{{stipend.id}}/edit" ng-if="canEdit">{{\'main.button.edit\' | translate}}</md-button> <md-button class="md-raised" ng-if="!stipend.isOpen && stipend.id && canEdit" ng-click="publish()">{{\'main.button.publishtoStudents\' | translate}}</md-button> <md-button class="md-raised" ng-click="back(\'#/scholarships/\', stipendForm)">{{\'main.button.back\' | translate}}</md-button> </div> </div> </div> </div> </form> </div> </div>'),a.put("student/templates/change.modules.tmpl.html",'<md-table-container> <table md-table class="secondary-table"> <thead md-head> <tr md-row> <th md-column>{{\'student.result.module\' | translate}}</th> <th ng-if="student.curriculumVersion.isVocational" md-column>{{\'student.result.ekap\' | translate}}</th> <th ng-if="!student.curriculumVersion.isVocational" md-column>{{\'student.result.higher.credits\' | translate}}</th> <th md-column>{{\'student.result.grade\' | translate}}</th> <th md-column>{{\'student.result.date\' | translate}}</th> <th md-column>{{\'student.result.oldModule\' | translate}}</th> <th md-column>{{\'student.result.newModule\' | translate}}</th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="module in changeableModules | orderBy: currentLanguageNameField()" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell>{{currentLanguageNameField(module)}}</td> <td md-cell>{{module.credits}}</td> <td md-cell>{{module.grade}}</td> <td md-cell>{{module.gradeDate | hoisDate}}</td> <td md-cell>{{currentLanguageNameField(module.curriculumVersionModule)}}</td> <td md-cell> <md-select ng-model="module.curriculumVersionModuleId" aria-label="new module select" ng-change="ngchangetest(module)"> <md-option ng-if="student.curriculumVersion.isVocational" ng-repeat="val in vocationalCurriculumModules" ng-value="val.id">{{currentLanguageNameField(val)}}</md-option> <md-option ng-if="!student.curriculumVersion.isVocational" ng-repeat="val in higherCurriculumModules" ng-value="val.id">{{currentLanguageNameField(val)}}</md-option> </md-select> </td> </tr> </tbody> </table> </md-table-container> <br><br> <div layout="row" layout-margin> <md-button class="md-raised md-primary" ng-click="saveChangedModules()">{{\'main.button.save\' | translate}}</md-button> <md-button ng-click="back(\'#/students\')" class="md-raised">{{\'main.button.back\' | translate}}</md-button> </div>'),a.put("student/templates/journals.and.protocols.tmpl.html",'<md-table-container> <table md-table class="secondary-table"> <thead md-head> <tr md-row> <th md-column>{{\'student.result.name\' | translate}}</th> <th md-column>{{\'student.result.studyYear\' | translate}}</th> <th md-column>{{\'student.result.protocolNr\' | translate}}</th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="entity in studentConnectedEntities" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell> <a ng-if="entity.type === \'journal\'" ng-href="#/journal/{{entity.entityId}}/view">{{currentLanguageNameField(entity)}}</a> <a ng-if="entity.type === \'protocol\'" ng-href="#/moduleProtocols/{{entity.entityId}}/view"><b>{{currentLanguageNameField(entity)}}</b></a> <a ng-if="entity.type === \'apel\'" ng-href="#/apelApplication/{{entity.entityId}}/view">{{currentLanguageNameField(entity)}}</a> </td> <td md-cell> <hois-classifier-value ng-if="entity.type !== \'apel\'" ng-model="entity.yearCode" main-classifier-code="OPPEAASTA"></hois-classifier-value> <span ng-if="entity.type === \'apel\'">{{entity.date | hoisDate}}</span> </td> <td md-cell>{{entity.protocolNr}}</td> </tr> </tbody> </table> </md-table-container>'),a.put("student/templates/view.navbar.higher.tmpl.html",'<md-nav-bar hide-xs md-selected-nav-item="currentNavItem" nav-bar-aria-label="main selection" ng-cloak> <md-nav-item md-nav-href="#/students/{{::studentId}}/main?_noback" name="student.main">{{\'student.main\' | translate}}</md-nav-item> <md-nav-item md-nav-href="#/students/{{::studentId}}/results?_noback" name="student.results">{{\'student.results\' | translate}}</md-nav-item> <md-nav-item md-nav-href="#/students/{{::studentId}}/documents?_noback" name="student.documents">{{\'student.documents\' | translate}}</md-nav-item> <md-nav-item ng-if="auth.isAdmin()" md-nav-href="#/students/{{::studentId}}/timetable?_noback" name="student.timetable">{{\'student.studentTimetable\' | translate}}</md-nav-item> </md-nav-bar> <div hide-gt-xs layout="column"> <md-button class="md-raised" flex ng-href="#/students/{{::studentId}}/main?_noback" name="student.main" ng-class="{\'md-accent\': currentNavItem === \'student.main\'}" name="student.main">{{\'student.main\' | translate}}</md-button> <md-button class="md-raised" ng-href="#/students/{{::studentId}}/results?_noback" ng-class="{\'md-accent\': currentNavItem === \'student.results\'}" name="student.results">{{\'student.results\' | translate}}</md-button> <md-button class="md-raised" ng-href="#/students/{{::studentId}}/documents?_noback" ng-class="{\'md-accent\': currentNavItem === \'student.documents\'}" name="student.documents">{{\'student.documents\' | translate}}</md-button> <md-button class="md-raised" ng-if="auth.isAdmin()" ng-class="{\'md-accent\': currentNavItem === \'student.timetable\'}" ng-href="#/students/{{::studentId}}/timetable?_noback" name="student.timetable">{{\'student.studentTimetable\' | translate}}</md-button> </div>'),a.put("student/templates/view.navbar.vocational.tmpl.html",'<md-nav-bar hide-xs md-selected-nav-item="currentNavItem" nav-bar-aria-label="main selection"> <md-nav-item md-nav-href="#/students/{{::studentId}}/main?_noback" name="student.main">{{\'student.main\' | translate}}</md-nav-item> <md-nav-item md-nav-href="#/students/{{::studentId}}/results?_noback" name="student.results">{{\'student.results\' | translate}}</md-nav-item> <md-nav-item md-nav-href="#/students/{{::studentId}}/absences?_noback" name="student.absences">{{\'student.absences\' | translate}}</md-nav-item> <md-nav-item md-nav-href="#/students/{{::studentId}}/documents?_noback" name="student.documents">{{\'student.documents\' | translate}}</md-nav-item> <md-nav-item ng-if="auth.isAdmin()" md-nav-href="#/students/{{::studentId}}/timetable?_noback" name="student.timetable">{{\'student.studentTimetable\' | translate}}</md-nav-item> </md-nav-bar> <div hide-gt-xs layout="column"> <md-button class="md-raised" flex ng-href="#/students/{{::studentId}}/main?_noback" ng-class="{\'md-accent\': currentNavItem === \'student.main\'}" name="student.main">{{\'student.main\' | translate}}</md-button> <md-button class="md-raised" ng-href="#/students/{{::studentId}}/results?_noback" ng-class="{\'md-accent\': currentNavItem === \'student.results\'}" name="student.results">{{\'student.results\' | translate}}</md-button> <md-button class="md-raised" ng-href="#/students/{{::studentId}}/absences?_noback" ng-class="{\'md-accent\': currentNavItem === \'student.absences\'}" name="student.absences">{{\'student.absences\' | translate}}</md-button> <md-button class="md-raised" ng-href="#/students/{{::studentId}}/documents?_noback" ng-class="{\'md-accent\': currentNavItem === \'student.documents\'}" name="student.documents">{{\'student.documents\' | translate}}</md-button> <md-button class="md-raised" ng-if="auth.isAdmin()" ng-class="{\'md-accent\': currentNavItem === \'student.timetable\'}" ng-href="#/students/{{::studentId}}/timetable?_noback" name="student.timetable">{{\'student.studentTimetable\' | translate}}</md-button> </div>'),a.put("student/templates/view.results.higher.curriculumfulfillment.tmpl.html",'<hois-collapsable ng-repeat="module in higherResults.modules" expanded="false"> <hois-collapsable-header> <div layout="row"> <div flex="30"> <span>{{\'curriculum.module\' | translate}} {{currentLanguageNameField(module)}} {{module.totalCredits}} EAP</span> <span ng-if="module.type !== \'KORGMOODUL_M\'">(<hois-classifier-value class="inline" ng-model="module.type" main-classifier-code="KORGMOODUL"></hois-classifier-value>)</span> <span ng-if="module.type === \'KORGMOODUL_M\'">({{currentLanguage()==\'et\' ? module.typeNameEt : module.typeNameEn}})</span> </div> <b ng-if="!module.isOk" flex-offset="10" md-colors="{color: \'accent\'}">&nbsp;{{ module.totalDifference }}</b> <i class="material-icons" flex-offset="10" md-colors="{color: \'green-600\'}" ng-if="module.isOk">done</i> </div> </hois-collapsable-header> <md-table-container> <table md-table> <tbody md-body> <tr md-row ng-if="hasMandatorySubjects(module)"> <td colspan="7" class="sub-header1"> &nbsp;{{\'subject.mandatory\' | translate}} <i class="material-icons green" ng-if="module.mandatoryDifference >= 0">done</i> </td> </tr> <tr md-row class="secondary-table-header" ng-if="hasMandatorySubjects(module)"> <td md-cell>{{\'student.result.higher.subject\' | translate}}</td> <td md-cell>{{\'student.result.higher.subjectCode\' | translate}}</td> <td md-cell>{{\'student.result.higher.credits\' | translate}}</td> <td md-cell>{{\'student.result.higher.grade\' | translate}}</td> <td md-cell>{{\'student.result.higher.date\' | translate}}</td> <td md-cell>{{\'student.result.higher.teacher\' | translate}}</td> <td md-cell>{{\'student.result.isOk\' | translate}}</td> </tr> <tr md-row ng-repeat="subjectResult in higherResults.subjectResults | filter: filterSubjectResultsByModule(module) | filter: {isOptional: false} | orderBy: currentLanguageNameField()"> <td md-cell>{{currentLanguageNameField(subjectResult.subject)}}</td> <td md-cell>{{subjectResult.subject.code}}</td> <td md-cell>{{subjectResult.subject.credits}}</td> <td md-cell> <table> <tr> <td ng-repeat="grade in subjectResult.grades | orderBy: \'gradeDate\'"> <span ng-if="$index !== 0">/</span> {{grade.gradeValue}} </td> </tr> </table> </td> <td md-cell>{{subjectResult.lastGrade.gradeDate | hoisDate}}</td> <td md-cell> <table> <tr ng-repeat="teacher in subjectResult.lastGrade.teachers | orderBy"> <td>{{teacher}}</td> </tr> </table> </td> <td md-cell>{{subjectResult.isOk ? \'main.yes\' : \'main.no\' | translate}}</td> </tr> <tr md-row class="secondary-table-header" ng-if="hasMandatorySubjects(module)"> <td colspan="2">{{\'student.result.totalRequired\' | translate}}: {{module.compulsoryStudyCredits}}</td> <td colspan="2">{{\'student.result.totalSubmitted\' | translate}}: {{module.mandatoryCreditsSubmitted}}</td> <td colspan="3"> {{\'student.result.difference\' | translate}}: <span ng-class="{\'red\': module.mandatoryDifference < 0}">{{module.mandatoryDifference}}</span> </td> </tr> <tr md-row ng-if="hasOptionalSubjects(module)"> <td colspan="7" class="sub-header1"> {{\'subject.optional\' | translate}} <i class="material-icons green" ng-if="module.optionalDifference >= 0">done</i> </td> </tr> <tr md-row class="secondary-table-header" ng-if="hasOptionalSubjects(module)"> <td md-cell>{{\'student.result.higher.subject\' | translate}}</td> <td md-cell>{{\'student.result.higher.subjectCode\' | translate}}</td> <td md-cell>{{\'student.result.higher.credits\' | translate}}</td> <td md-cell>{{\'student.result.higher.grade\' | translate}}</td> <td md-cell>{{\'student.result.higher.date\' | translate}}</td> <td md-cell>{{\'student.result.higher.teacher\' | translate}}</td> <td md-cell>{{\'student.result.isOk\' | translate}}</td> </tr> <tr md-row ng-repeat="subjectResult in higherResults.subjectResults\r\n          | filter: filterSubjectResultsByModule(module) | filter: {isOptional: true} | filter: {electiveModule: \'!\'}\r\n          | orderBy: currentLanguageNameField()"> <td md-cell>{{currentLanguageNameField(subjectResult.subject)}}</td> <td md-cell>{{subjectResult.subject.code}}</td> <td md-cell>{{subjectResult.subject.credits}}</td> <td md-cell> <table> <tr> <td ng-repeat="grade in subjectResult.grades | orderBy: \'gradeDate\'"> <span ng-if="$index !== 0">/</span> {{grade.gradeValue}} </td> </tr> </table> </td> <td md-cell>{{subjectResult.lastGrade.gradeDate | hoisDate}}</td> <td md-cell> <table> <tr ng-repeat="teacher in subjectResult.lastGrade.teachers | orderBy"> <td>{{teacher}}</td> </tr> </table> </td> <td md-cell>{{subjectResult.isOk ? \'main.yes\' : \'main.no\' | translate}}</td> </tr> <tr md-row ng-if="module.electiveModulesResults.length > 0"> <td colspan="1" class="sub-header2"> {{\'student.result.higher.electiveModules\' | translate}} <i class="material-icons green" ng-if="module.electiveModulesNumber <= module.electiveModulesCompleted">done</i> </td> <td colspan="2" class="sub-header2">{{\'student.result.higher.electiveModulesRequired\' | translate}}: {{module.electiveModulesNumber}}</td> <td colspan="4" class="sub-header2">{{\'student.result.higher.electiveModulesCompleted\' | translate}}: {{module.electiveModulesCompleted}}</td> </tr> <tr md-row ng-repeat-start="electiveModule in module.electiveModulesResults | orderBy: currentLanguageNameField()"> <td md-cell colspan="7" class="sub-header2"> {{\'module.optional\' | translate}}: {{currentLanguageNameField(electiveModule)}} <i class="material-icons green" ng-if="electiveModule.isOk">done</i> </td> </tr> <tr md-row ng-repeat="subjectResult in higherResults.subjectResults | filter: filterSubjectResultsByModule(module) | filter: {isOptional: true} |\r\n                                filter: {electiveModule: electiveModule.referenceNumber} | orderBy: currentLanguageNameField()"> <td md-cell>{{currentLanguageNameField(subjectResult.subject)}}</td> <td md-cell>{{subjectResult.subject.code}}</td> <td md-cell>{{subjectResult.subject.credits}}</td> <td md-cell> <table> <tr> <td ng-repeat="grade in subjectResult.grades | orderBy: \'gradeDate\'"> <span ng-if="$index !== 0">/</span> {{grade.gradeValue}} </td> </tr> </table> </td> <td md-cell>{{subjectResult.lastGrade.gradeDate | hoisDate}}</td> <td md-cell> <table> <tr ng-repeat="teacher in subjectResult.lastGrade.teachers | orderBy"> <td>{{teacher}}</td> </tr> </table> </td> <td md-cell>{{subjectResult.isOk ? \'main.yes\' : \'main.no\' | translate}}</td> </tr> <tr ng-repeat-end></tr> <tr md-row class="secondary-table-header" ng-if="hasOptionalSubjects(module)"> <td colspan="2">{{\'student.result.totalRequired\' | translate}}: {{module.optionalStudyCredits}}</td> <td colspan="2">{{\'student.result.totalSubmitted\' | translate}}: {{module.optionalCreditsSubmitted}}</td> <td colspan="3"> {{\'student.result.difference\' | translate}}: <span ng-class="{\'red\': optionalDifference < 0}">{{module.optionalDifference}}</span> </td> </tr> </tbody> </table> </md-table-container> </hois-collapsable> <style>.inline {\r\n    display: inline;\r\n  }\r\n\r\n  .red {\r\n    color: red;\r\n  }</style>'),a.put("student/templates/view.results.higher.orderofpassing.tmpl.html","<md-table-container> <table md-table class=\"secondary-table\"> <thead md-head> <tr md-row> <th md-column>{{'student.result.higher.subject' | translate}}</th> <th md-column>{{'student.result.higher.subjectCode' | translate}}</th> <th md-column>{{'student.result.higher.module' | translate}}</th> <th md-column>{{'student.result.higher.required' | translate}}</th> <th md-column>{{'student.result.higher.credits' | translate}}</th> <th md-column>{{'student.result.higher.grade' | translate}}</th> <th md-column>{{'student.result.higher.date' | translate}}</th> <th md-column>{{'student.result.higher.teacher' | translate}}</th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat=\"subjectResult in higherResults.subjectResults | orderBy: 'lastGrade.gradeDate'\" ng-if=\"subjectResult.lastGrade !== null && subjectResult.lastGrade.gradeValue !== null\"> <td md-cell>{{currentLanguageNameField(subjectResult.subject)}}</td> <td md-cell>{{subjectResult.subject.code}}</td> <td md-cell>{{currentLanguageNameField(subjectResult.higherModule)}}</td> <td md-cell>{{subjectResult.isOptional ? 'main.no' : 'main.yes' | translate}}</td> <td md-cell>{{subjectResult.subject.credits}}</td> <td md-cell> <table> <tr> <td ng-repeat=\"grade in subjectResult.grades | orderBy: 'gradeDate'\"> <span ng-if=\"$index !== 0\">/</span> {{grade.gradeValue}} </td> </tr> </table> </td> <td md-cell>{{subjectResult.lastGrade.gradeDate | hoisDate}}</td> <td md-cell> <table> <tr ng-repeat=\"teacher in subjectResult.lastGrade.teachers | orderBy\"> <td>{{teacher}}</td> </tr> </table> </td> </tr> </tbody> </table> </md-table-container>"),a.put("student/templates/view.results.higher.orderofstudyperiod.tmpl.html","<div ng-repeat=\"studyPeriodResult in higherResults.studyPeriodResults | orderBy: 'studyPeriod.endDate'\"> <hois-collapsable label=\"currentLanguageNameField(studyPeriodResult.studyPeriod)\" expanded=\"false\"> <md-table-container> <table md-table> <tbody md-body> <tr md-row class=\"secondary-table-header hideable\"> <td md-cell>{{'student.result.higher.subject' | translate}}</td> <td md-cell>{{'student.result.higher.subjectCode' | translate}}</td> <td md-cell>{{'student.result.higher.module' | translate}}</td> <td md-cell>{{'student.result.higher.required' | translate}}</td> <td md-cell>{{'student.result.higher.credits' | translate}}</td> <td md-cell>{{'student.result.higher.grade' | translate}}</td> <td md-cell>{{'student.result.higher.date' | translate}}</td> <td md-cell>{{'student.result.higher.teacher' | translate}}</td> </tr> <tr md-row ng-repeat=\"subjectResult in higherResults.subjectResults | filter: filterSubjectResultsByStudyPeriod(studyPeriodResult.studyPeriod) | orderBy: 'lastGrade.gradeDate'\"> <td md-cell>{{currentLanguageNameField(subjectResult.subject)}}</td> <td md-cell>{{subjectResult.subject.code}}</td> <td md-cell>{{currentLanguageNameField(subjectResult.higherModule)}}</td> <td md-cell>{{subjectResult.isOptional ? 'main.no' : 'main.yes' | translate}}</td> <td md-cell>{{subjectResult.subject.credits}}</td> <td md-cell> <table> <tr> <td ng-repeat=\"grade in subjectResult.grades | orderBy: 'gradeDate'\"> <span ng-if=\"$index !== 0\">/</span> {{grade.gradeValue}} </td> </tr> </table> </td> <td md-cell>{{subjectResult.lastGrade.gradeDate | hoisDate}}</td> <td md-cell> <table> <tr ng-repeat=\"teacher in subjectResult.lastGrade.teachers | orderBy\"> <td>{{teacher}}</td> </tr> </table> </td> </tr> <tr md-row class=\"secondary-table-header\"> <td md-cell>{{'student.result.higher.overallCredits' | translate}}: {{studyPeriodResult.total}}</td> <td md-cell colspan=\"7\">{{'student.result.kkh' | translate}}: {{studyPeriodResult.averageGrade}}</td> </tr> </tbody> </table> </md-table-container> </hois-collapsable> </div> <div ng-if=\"higherResults.studyPeriodResults && higherResults.studyPeriodResults.length==0\"> <span>{{'student.result.missing' | translate}}</span> </div>"),a.put("student/templates/view.results.higher.tmpl.html",'<div layout-padding ng-cloak class="form-readonly"> <div flex> <div layout="row" layout-xs="column" flex> <div flex="90"> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="20" flex-sm="100" flex-xs="100"> <label>{{\'student.label\' | translate}}</label> <hois-value value="student.person.firstname + \' \' + student.person.lastname"></hois-value> </md-input-container> <md-input-container flex="15" flex-sm="100" flex-xs="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'student.idcode\' | translate}}</label> <hois-value value="student.person.idcode"></hois-value> </md-input-container> <md-input-container flex="15" flex-sm="100" flex-xs="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'student.studyForm\' | translate}}</label> <hois-classifier-value ng-model="student.studyForm" main-classifier-code="OPPEVORM"></hois-classifier-value> </md-input-container> <md-input-container flex="35" flex-sm="100" flex-xs="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'student.result.higher.consideredCredits\' | translate}}</label> <hois-value value="student.higherResults.creditsSubmitted.toString() + \' / \' + student.higherResults.creditsSubmittedConsidered.toString()"></hois-value> </md-input-container> </div> </div> </div> <div layout="row" layout-xs="column" flex> <div flex="90"> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="20" flex-sm="100" flex-xs="100"> <label>{{\'student.result.higher.curriculumVersion\' | translate}}</label> <hois-value value="currentLanguageNameField(student.curriculumVersion)"></hois-value> </md-input-container> <md-input-container flex="15" flex-sm="100" flex-xs="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'student.result.curriculumCredits\' | translate}}</label> <hois-value value="student.curriculumCredits != null ? student.curriculumCredits + \' EAP\' : \'\'"></hois-value> </md-input-container> <md-input-container flex="15" flex-sm="100" flex-xs="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'student.result.studyLoad\' | translate}}</label> <hois-classifier-value ng-model="student.studyLoad" main-classifier-code="OPPEKOORMUS"></hois-classifier-value> </md-input-container> <md-input-container flex="15" flex-sm="100" flex-xs="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'student.result.kkh\' | translate}}</label> <hois-value value="student.higherResults.averageGrade.toString()"></hois-value> </md-input-container> <md-input-container flex="15" flex-sm="100" flex-xs="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'student.result.curriculumFulfilled\' | translate}}</label> <hois-value value="student.higherResults.isCurriculumFulfilled ? (\'student.result.fulfilled\' | translate) : (\'student.result.notFulfilled\' | translate)"></hois-value> </md-input-container> </div> </div> </div> <div ng-controller="StudentViewResultsHigherController as controller" flex="90" ng-cloak> <md-content> <md-nav-bar md-selected-nav-item="resultsCurrentNavItem" nav-bar-aria-label="results selection"> <md-nav-item md-nav-click="changeResultsCurrentNavItem(\'student.curriculumFulfillment\')" name="student.curriculumFulfillment"> {{\'student.result.curriculumFulfillment\' | translate}} </md-nav-item> <md-nav-item md-nav-click="changeResultsCurrentNavItem(\'student.inOrderOfStudyPeriod\')" name="student.inOrderOfStudyPeriod"> {{\'student.result.inOrderOfStudyPeriod\' | translate}} </md-nav-item> <md-nav-item md-nav-click="changeResultsCurrentNavItem(\'student.inOrderOfPassing\')" name="student.inOrderOfPassing"> {{\'student.result.inOrderOfPassing\' | translate}} </md-nav-item> <md-nav-item ng-if="canChangeStudentModules" md-nav-click="changeResultsCurrentNavItem(\'student.changeModules\')" name="student.changeModules"> {{\'student.result.changeModules\' | translate}} </md-nav-item> </md-nav-bar> <div layout-margin> <div ng-show="resultsCurrentNavItem === \'student.curriculumFulfillment\'"> <div ng-include="\'student/templates/view.results.higher.curriculumfulfillment.tmpl.html\'"></div> </div> <div ng-show="resultsCurrentNavItem === \'student.inOrderOfStudyPeriod\'"> <div ng-include="\'student/templates/view.results.higher.orderofstudyperiod.tmpl.html\'"></div> </div> <div ng-show="resultsCurrentNavItem === \'student.inOrderOfPassing\'"> <div ng-include="\'student/templates/view.results.higher.orderofpassing.tmpl.html\'"></div> </div> <div ng-if="canChangeStudentModules" ng-show="resultsCurrentNavItem === \'student.changeModules\'"> <div ng-include="\'student/templates/change.modules.tmpl.html\'"></div> </div> </div> </md-content> </div> </div> </div>'),a.put("student/templates/view.results.vocational.curriculumfulfillment.list.tmpl.html",'<hois-collapsable expanded="false"> <hois-collapsable-header> <div layout="row"> <div flex="30">{{currentLanguageNameField(module.curriculumModule) + \' (\' + currentLanguageNameField(module.curriculumModule.module) + \')\'}}</div> <div ng-if="moduleResultById[module.id] && moduleResultById[module.id].grade && positiveGrade(moduleResultById[module.id].grade.value)" flex-offset="10" class="bold" md-colors="{color: \'green-600\'}">{{moduleResultById[module.id].grade.value}}</div> <div ng-if="!moduleResultById[module.id] || !moduleResultById[module.id].grade" flex-offset="10" md-colors="{color: \'accent\'}">{{(moduleResultById[module.id] ? moduleResultById[module.id].totalSubmitted : 0) - module.curriculumModule.credits}} {{\'student.result.ekap\' | translate}}</div> <div ng-if="!moduleResultById[module.id] && allThemesHavePositiveGrade(module)" flex-offset="10" md-colors="{color: \'accent\'}">{{\'student.result.moduleNotGraded\' | translate}}</div> </div> </hois-collapsable-header> <md-table-container> <table md-table class="secondary-table"> <thead md-head> <tr md-row> <th md-column>{{\'student.result.theme\' | translate}}</th> <th md-column>{{\'student.result.ekap\' | translate}}</th> <th md-column>{{\'student.result.grade\' | translate}}</th> <th md-column>{{\'student.result.date\' | translate}}</th> <th md-column>{{\'student.result.teacher\' | translate}}</th> <th md-column>{{\'student.result.isOk\' | translate}}</th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="row in module.themes" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell><span>{{row.nameEt}}</span></td> <td md-cell>{{row.credits}}</td> <td md-cell><span>{{moduleResultById[module.id].themeResultById[row.id].grade.value}}</span></td> <td md-cell>{{moduleResultById[module.id].themeResultById[row.id].date | hoisDate}}</td> <td md-cell>{{displayTeachers(moduleResultById[module.id].themeResultById[row.id].teachers)}}</td> <td md-cell>{{positiveThemeResult(moduleResultById[module.id].themeResultById[row.id]) ? \'main.yes\' : \'main.no\' | translate}}</td> </tr> </tbody> </table> </md-table-container> <div class="md-body-2 bold" layout="row"> <div>{{\'student.result.totalRequired\' | translate}}: {{module.curriculumModule.credits}}</div> <div flex-offset="10">{{\'student.result.totalSubmitted\' | translate}}: {{moduleResultById[module.id] ? moduleResultById[module.id].totalSubmitted : 0}}</div> <div ng-if="!moduleResultById[module.id] || module.curriculumModule.credits > moduleResultById[module.id].totalSubmitted" flex-offset="10">{{\'student.result.difference\' | translate}}: <span md-colors="{color: \'warn-A400\'}">-{{module.curriculumModule.credits - (moduleResultById[module.id] ? moduleResultById[module.id].totalSubmitted : 0)}}</span></div> <div ng-if="module.curriculumModule.credits <= moduleResultById[module.id].totalSubmitted" flex-offset="10">{{\'student.result.difference\' | translate}}: {{(moduleResultById[module.id] ? moduleResultById[module.id].totalSubmitted : 0) - module.curriculumModule.credits}}</div> </div> <br><br> </hois-collapsable>'),a.put("student/templates/view.results.vocational.curriculumfulfillment.tmpl.html",'<div ng-repeat="module in ::vocationalResultsCurriculum.vocationalResultsModules"> <div ng-include="\'student/templates/view.results.vocational.curriculumfulfillment.list.tmpl.html\'"></div> </div> <div ng-if="vocationalResultsCurriculum.extraCurriculaVocationalResultsModules && vocationalResultsCurriculum.extraCurriculaVocationalResultsModules.length!=0"> <h3>{{\'student.result.otherModuleResults\' | translate}}</h3> <div ng-repeat="module in ::vocationalResultsCurriculum.extraCurriculaVocationalResultsModules"> <div ng-include="\'student/templates/view.results.vocational.curriculumfulfillment.list.tmpl.html\'"></div> </div> </div> <div ng-if="vocationalResultsCurriculum.vocationalResultsModules && vocationalResultsCurriculum.vocationalResultsModules.length==0 && vocationalResultsCurriculum.extraCurriculaVocationalResultsModules && vocationalResultsCurriculum.extraCurriculaVocationalResultsModules.length==0"> <span>{{\'student.result.missing\' | translate}}</span> </div>'),a.put("student/templates/view.results.vocational.orderofpassing.tmpl.html","<div ng-if=\"vocationalResultsPassing.results && vocationalResultsPassing.results.length!=0\"> <md-table-container> <table md-table class=\"secondary-table\"> <thead md-head> <tr md-row> <th md-column>{{'student.result.moduleTheme' | translate}}</th> <th md-column>{{'student.result.ekap' | translate}}</th> <th md-column>{{'student.result.grade' | translate}}</th> <th md-column>{{'student.result.date' | translate}}</th> <th md-column>{{'student.result.teacher' | translate}}</th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat=\"row in vocationalResultsPassing.results\" ng-class-odd=\"'odd'\" ng-class-even=\"'even'\"> <td md-cell><span ng-class=\"!row.theme ? 'md-body-2 bold' : ''\"><span ng-if=\"!row.theme\">M: </span>{{!row.theme ? currentLanguageNameField(row.module) : currentLanguageNameField(row.theme) + \" (\" +currentLanguageNameField(row.module) + \")\"}}</span></td> <td md-cell>{{row.credits}}</td> <td md-cell><span ng-class=\"!row.theme ? 'md-body-2 bold' : ''\">{{row.grade.value}}</span></td> <td md-cell>{{row.date | hoisDate}}</td> <td md-cell>{{displayTeachers(row.teachers)}}</td> </tr> </tbody> </table> </md-table-container> </div> <div ng-if=\"vocationalResultsPassing.results && vocationalResultsPassing.results.length==0\"> <span>{{'student.result.missing' | translate}}</span> </div>"),
a.put("student/templates/view.results.vocational.orderofstudyyear.tmpl.html","<div ng-repeat=\"studyYearResult in vocationalResultsStudyYear\"> <hois-collapsable label=\"currentLanguageNameField(studyYearResult.studyYear) + ' ' + ('studyYear.label' | translate)\" expanded=\"false\"> <md-table-container> <table md-table class=\"secondary-table\"> <thead md-head> <tr md-row> <th md-column>{{'student.result.moduleTheme' | translate}}</th> <th md-column>{{'student.result.ekap' | translate}}</th> <th md-column>{{'student.result.grade' | translate}}</th> <th md-column>{{'student.result.date' | translate}}</th> <th md-column>{{'student.result.teacher' | translate}}</th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat=\"row in studyYearResult.results\" ng-class-odd=\"'odd'\" ng-class-even=\"'even'\"> <td md-cell><span ng-class=\"!row.theme ? 'md-body-2 bold' : ''\"><span ng-if=\"!row.theme\">M: </span>{{!row.theme ? currentLanguageNameField(row.module) : currentLanguageNameField(row.theme) + \" (\" +currentLanguageNameField(row.module) + \")\"}}</span></td> <td md-cell>{{row.credits}}</td> <td md-cell><span ng-class=\"!row.theme ? 'md-body-2 bold' : ''\">{{row.grade.value}}</span></td> <td md-cell>{{row.date | hoisDate}}</td> <td md-cell>{{displayTeachers(row.teachers)}}</td> </tr> </tbody> </table> </md-table-container> <div class=\"md-body-2 bold\" layout=\"row\"> <div>{{'student.result.totalCredits' | translate}}: {{studyYearResult.credits}}</div> <div flex-offset=\"10\">{{'student.result.kkh' | translate}}: {{studyYearResult.kkh.toFixed(2)}}</div> </div> <br><br> </hois-collapsable> </div> <div ng-if=\"vocationalResultsStudyYear && vocationalResultsStudyYear.length==0\"> <span>{{'student.result.missing' | translate}}</span> </div>"),a.put("student/templates/view.results.vocational.tmpl.html",'<div layout-padding ng-cloak class="form-readonly"> <div flex> <div layout="row" layout-xs="column" flex> <div flex="90"> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex> <label>{{\'student.label\' | translate}}</label> <hois-value value="student.person.firstname + \' \' + student.person.lastname"></hois-value> </md-input-container> <md-input-container flex flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'student.idcode\' | translate}}</label> <hois-value value="student.person.idcode"></hois-value> </md-input-container> <md-input-container flex flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'student.studyForm\' | translate}}</label> <hois-classifier-value ng-model="student.studyForm" main-classifier-code="OPPEVORM"></hois-classifier-value> </md-input-container> </div> </div> </div> <div layout="row" layout-xs="column" flex> <div flex="90"> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex> <label>{{\'student.curriculum\' | translate}}</label> <hois-value value="currentLanguageNameField(student.curriculumVersion)"></hois-value> </md-input-container> <md-input-container flex flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'student.result.curriculumCredits\' | translate}}</label> <hois-value value="student.curriculumCredits != null ? student.curriculumCredits + \' EKAP\' : \'\'"></hois-value> </md-input-container> <md-input-container flex flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'student.result.totalCredits\' | translate}}</label> <hois-value value="student.credits != null ? student.credits + \' EKAP\' : \'\'"></hois-value> </md-input-container> <md-input-container flex flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'student.result.kkh\' | translate}}</label> <hois-value value="student.kkh"></hois-value> </md-input-container> <md-input-container flex flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'student.result.curriculumFulfilled\' | translate}}</label> <hois-value value="isStudentCurriculumFulfilled(student) ? (\'student.result.fulfilled\' | translate) : (\'student.result.notFulfilled\' | translate)"></hois-value> </md-input-container> </div> </div> </div> <div ng-controller="StudentViewResultsVocationalController as controller" flex="90" ng-cloak> <md-content> <md-nav-bar md-selected-nav-item="resultsCurrentNavItem" nav-bar-aria-label="results selection"> <md-nav-item md-nav-click="changeResultsCurrentNavItem(\'student.curriculumFulfillment\')" name="student.curriculumFulfillment"> {{\'student.result.curriculumFulfillment\' | translate}} </md-nav-item> <md-nav-item md-nav-click="changeResultsCurrentNavItem(\'student.inOrderOfStudyYear\')" name="student.inOrderOfStudyYear"> {{\'student.result.inOrderOfStudyYear\' | translate}} </md-nav-item> <md-nav-item md-nav-click="changeResultsCurrentNavItem(\'student.inOrderOfPassing\')" name="student.inOrderOfPassing"> {{\'student.result.inOrderOfPassing\' | translate}} </md-nav-item> <md-nav-item ng-if="canWatchStudentConnectedEntities" md-nav-click="changeResultsCurrentNavItem(\'student.journalsAndProtocols\')" name="student.journalsAndProtocols"> {{\'student.result.journalsAndProtocols\' | translate}} </md-nav-item> <md-nav-item ng-if="canChangeStudentModules" md-nav-click="changeResultsCurrentNavItem(\'student.changeModules\')" name="student.changeModules"> {{\'student.result.changeModules\' | translate}} </md-nav-item> </md-nav-bar> <div layout-margin> <div ng-show="resultsCurrentNavItem === \'student.curriculumFulfillment\'"> <div ng-include="\'student/templates/view.results.vocational.curriculumfulfillment.tmpl.html\'"></div> </div> <div ng-show="resultsCurrentNavItem === \'student.inOrderOfStudyYear\'"> <div ng-include="\'student/templates/view.results.vocational.orderofstudyyear.tmpl.html\'"></div> </div> <div ng-show="resultsCurrentNavItem === \'student.inOrderOfPassing\'"> <div ng-include="\'student/templates/view.results.vocational.orderofpassing.tmpl.html\'"></div> </div> <div ng-if="canWatchStudentConnectedEntities" ng-show="resultsCurrentNavItem === \'student.journalsAndProtocols\'"> <div ng-include="\'student/templates/journals.and.protocols.tmpl.html\'"></div> </div> <div ng-if="canChangeStudentModules" ng-show="resultsCurrentNavItem === \'student.changeModules\'"> <div ng-include="\'student/templates/change.modules.tmpl.html\'"></div> </div> </div> </md-content> </div> </div> </div>'),a.put("studyMaterial/templates/journal.material.edit.tmpl.html",'<fieldset> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'studyMaterial.label\' | translate}}</legend> <div layout="row"> <md-button class="md-button md-raised" ng-href="/#/studyMaterial/vocational/{{journal.id}}/new">{{\'main.button.create\' | translate}}</md-button> <div class="middle-text">{{\'studyMaterial.orChooseExisting\' | translate}}</div> <hois-autocomplete flex ng-model="$parent.$parent.existingMaterial" method="studyMaterials" name="existingMaterial" label="studyMaterial.name" additional-query-params="{teacher: auth.teacher, journal: journal.id}" no-paging="true"></hois-autocomplete> <md-button class="md-button md-raised" ng-click="addExisting()" ng-disabled="!existingMaterial">{{\'main.button.add\' | translate}}</md-button> </div> <md-table-container> <table md-table class="secondary-table"> <thead md-head> <tr md-row> <th md-column>{{\'studyMaterial.type\' | translate}}</th> <th md-column>{{\'studyMaterial.name\' | translate}}</th> <th md-column>{{\'studyMaterial.fileorlink\' | translate}}</th> <th md-column>{{\'studyMaterial.isVisibleToStudents\' | translate}}</th> <th md-column>{{\'studyMaterial.isPublic\' | translate}}</th> <th md-column>{{\'studyMaterial.journalCount\' | translate}}</th> <th md-column></th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="material in materials | orderBy: \'id\'" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell>{{currentLanguageNameField(material.typeCode)}}</td> <td md-cell> <a ng-href="/#/studyMaterial/vocational/{{journal.id}}/edit/{{material.id}}">{{currentLanguageNameField(material)}}</a> </td> <td md-cell ng-if="material.typeCode.code === \'OPPEMATERJAL_F\'"> <div layout="row" flex> <div>{{material.oisFile.fname}}</div> <div flex> <a ng-href="{{getFileUrl(material.oisFile, \'studymaterial\')}}" target="_blank" rel="noopener noreferrer"> <md-icon md-font-set="material-icons">file_download</md-icon> </a> </div> </div> </td> <td md-cell ng-if="material.typeCode.code === \'OPPEMATERJAL_L\'"> <a ng-href="{{material.url}}" target="_blank" rel="noopener noreferrer">{{material.url}}</a> </td> <td md-cell> <md-checkbox ng-model="material.isVisibleToStudents" aria-label="isVisibleToStudents" disabled></md-checkbox> </td> <td md-cell> <md-checkbox ng-model="material.isPublic" aria-label="isVisibleToStudents" disabled></md-checkbox> </td> <td md-cell>{{material.journalCount}}</td> <td md-cell> <a class="remove nomargin" ng-click="deleteConnection(material.connect, material.journalCount)">&times;</a> </td> </tr> </tbody> </table> </md-table-container> </fieldset>'),a.put("studyMaterial/templates/journal.material.view.tmpl.html",'<fieldset> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'studyMaterial.label\' | translate}}</legend> <md-table-container> <table md-table class="secondary-table"> <thead md-head> <tr md-row> <th md-column>{{\'studyMaterial.type\' | translate}}</th> <th md-column>{{\'studyMaterial.name\' | translate}}</th> <th md-column>{{\'studyMaterial.fileorlink\' | translate}}</th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="material in materials | orderBy: \'id\'" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell>{{currentLanguageNameField(material.typeCode)}}</td> <td md-cell>{{currentLanguageNameField(material)}}</td> <td md-cell ng-if="material.typeCode.code === \'OPPEMATERJAL_F\'"> <div layout="row" flex> <div>{{material.oisFile.fname}}</div> <div flex> <a ng-href="{{getFileUrl(material.oisFile, \'studymaterial\')}}" target="_blank" rel="noopener noreferrer"> <md-icon md-font-set="material-icons">file_download</md-icon> </a> </div> </div> </td> <td md-cell ng-if="material.typeCode.code === \'OPPEMATERJAL_L\'"> <a ng-href="{{material.url}}" target="_blank" rel="noopener noreferrer">{{material.url}}</a> </td> </tr> </tbody> </table> </md-table-container> </fieldset>'),a.put("studyMaterial/templates/subjectStudyPeriod.material.edit.tmpl.html",'<fieldset> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'studyMaterial.label\' | translate}}</legend> <div layout="row"> <md-button class="md-button md-raised" ng-href="/#/studyMaterial/higher/{{subjectStudyPeriod.id}}/new">{{\'main.button.create\' | translate}}</md-button> <div class="middle-text">{{\'studyMaterial.orChooseExisting\' | translate}}</div> <hois-autocomplete flex ng-model="$parent.existingMaterial" method="studyMaterials" name="existingMaterial" label="studyMaterial.name" additional-query-params="{teacher: auth.teacher, subjectStudyPeriod: subjectStudyPeriod.id}" no-paging="true"></hois-autocomplete> <md-button class="md-button md-raised" ng-click="addExisting()" ng-disabled="!existingMaterial">{{\'main.button.add\' | translate}}</md-button> </div> <md-table-container> <table md-table class="secondary-table"> <thead md-head> <tr md-row> <th md-column>{{\'studyMaterial.type\' | translate}}</th> <th md-column>{{\'studyMaterial.name\' | translate}}</th> <th md-column>{{\'studyMaterial.fileorlink\' | translate}}</th> <th md-column>{{\'studyMaterial.isVisibleToStudents\' | translate}}</th> <th md-column>{{\'studyMaterial.isPublic\' | translate}}</th> <th md-column>{{\'studyMaterial.journalCount\' | translate}}</th> <th md-column></th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="material in materials | orderBy: \'id\'" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell>{{currentLanguageNameField(material.typeCode)}}</td> <td md-cell> <a ng-href="/#/studyMaterial/higher/{{subjectStudyPeriod.id}}/edit/{{material.id}}">{{currentLanguageNameField(material)}}</a> </td> <td md-cell ng-if="material.typeCode.code === \'OPPEMATERJAL_F\'"> <div layout="row" flex> <div>{{material.oisFile.fname}}</div> <div flex> <a ng-href="{{getFileUrl(material.oisFile, \'studymaterial\')}}" target="_blank" rel="noopener noreferrer"> <md-icon md-font-set="material-icons">file_download</md-icon> </a> </div> </div> </td> <td md-cell ng-if="material.typeCode.code === \'OPPEMATERJAL_L\'"> <a ng-href="{{material.url}}" target="_blank" rel="noopener noreferrer">{{material.url}}</a> </td> <td md-cell> <md-checkbox ng-model="material.isVisibleToStudents" aria-label="isVisibleToStudents" disabled></md-checkbox> </td> <td md-cell> <md-checkbox ng-model="material.isPublic" aria-label="isVisibleToStudents" disabled></md-checkbox> </td> <td md-cell>{{material.journalCount}}</td> <td md-cell> <a class="remove nomargin" ng-click="deleteConnection(material.connect, material.journalCount)">&times;</a> </td> </tr> </tbody> </table> </md-table-container> </fieldset>'),a.put("studyMaterial/templates/subjectStudyPeriod.material.view.tmpl.html",'<fieldset> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'studyMaterial.label\' | translate}}</legend> <md-table-container> <table md-table class="secondary-table"> <thead md-head> <tr md-row> <th md-column>{{\'studyMaterial.type\' | translate}}</th> <th md-column>{{\'studyMaterial.name\' | translate}}</th> <th md-column>{{\'studyMaterial.fileorlink\' | translate}}</th> <th md-column></th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="material in materials | orderBy: \'id\'" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell>{{currentLanguageNameField(material.typeCode)}}</td> <td md-cell>{{currentLanguageNameField(material)}}</td> <td md-cell ng-if="material.typeCode.code === \'OPPEMATERJAL_F\'"> <div layout="row" flex> <div>{{material.oisFile.fname}}</div> <div flex> <a ng-href="{{getFileUrl(material.oisFile, \'studymaterial\')}}" target="_blank" rel="noopener noreferrer"> <md-icon md-font-set="material-icons">file_download</md-icon> </a> </div> </div> </td> <td md-cell ng-if="material.typeCode.code === \'OPPEMATERJAL_L\'"> <a ng-href="{{material.url}}" target="_blank" rel="noopener noreferrer">{{material.url}}</a> </td> </tr> </tbody> </table> </md-table-container> </fieldset>'),a.put("subjectStudyPeriod/studentGroup/subject.study.period.student.group.edit.html",'<div class="ois-form-layout-padding" ng-cloak> <form name="subjectStudyPeriodStudentGroupEditForm"> <div flex layout="row" layout-align="start start" class="common-label" md-colors="{color: \'background-400\'}"> <span ng-repeat="capacity in capacityTypes"> <span ng-if="$index !== 0">|</span> {{capacity.value.toUpperCase()}} - {{currentLanguageNameField(capacity)}} </span> </div> <div layout="column"> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container ng-if="!isEditing" flex="25" flex-sm="100" flex-xs="100" class="readonly top-margin"> <label>{{\'subjectStudyPeriod.studyPeriod\' | translate}}</label> <hois-value value="currentLanguageNameField(studyPeriod)"></hois-value> </md-input-container> <md-input-container ng-if="isEditing" flex="25" flex-sm="100" flex-xs="100"> <label>{{\'subjectStudyPeriod.studyPeriod\' | translate}}</label> <hois-select ng-model="record.studyPeriod" values="studyPeriods" required></hois-select> </md-input-container> <md-input-container ng-if="isEditing" flex="25" flex-sm="100" flex-xs="100" flex-offset-xs="0" flex-offset-sm="0" flex-offset="5"> <label>{{\'subjectStudyPeriod.studentGroup\' | translate}}</label> <md-select ng-model="record.studentGroup" required> <md-option ng-value="option.id" ng-repeat="option in studentGroups"> {{ option.code }} </md-option> </md-select> </md-input-container> <md-input-container ng-if="!isEditing" flex="25" flex-sm="100" flex-xs="100" flex-offset-xs="0" flex-offset-sm="0" flex-offset="5" class="readonly top-margin"> <label>{{\'subjectStudyPeriod.studentGroup\' | translate}}</label> <hois-value value="studentGroup.code"></hois-value> </md-input-container> <md-input-container class="readonly top-margin" flex="25" flex-sm="100" flex-xs="100" flex-offset-xs="0" flex-offset-sm="0" flex-offset="5"> <label>{{\'subjectStudyPeriod.course\' | translate}}</label> <hois-value value="course"></hois-value> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column" class="form-readonly"> <md-input-container flex="25" flex-sm="100" flex-xs="100"> <label>{{\'subjectStudyPeriod.curriculum\' | translate}}</label> <hois-value value="currentLanguageNameField(curriculum)"></hois-value> </md-input-container> <md-input-container flex="25" flex-sm="100" flex-xs="100" flex-offset-xs="0" flex-offset-sm="0" flex-offset="5"> <label>{{\'subjectStudyPeriod.curriculumStudyPeriod.label\' | translate}}</label> <hois-value value="\'subjectStudyPeriod.curriculumStudyPeriod.value\' | translate:curriculumStudyPeriod"></hois-value> </md-input-container> </div> <md-table-container> <table class="subject-study-period"> <thead> <tr> <th> <span>{{\'subjectStudyPeriod.subjects\' | translate}}</span> <a ng-href="#/subjectStudyPeriod/new?studentGroupId={{record.studentGroup}}&studyPeriodId={{record.studyPeriod}}" ng-if="record.studentGroup">{{\'subjectStudyPeriod.addSubjects\' | translate}}</a> </th> <th ng-repeat="capacityType in capacityTypes">{{capacityType.value.toUpperCase()}}</th> <th>{{\'subjectStudyPeriod.overall\' | translate}}</th> </tr> </thead> <tbody ng-repeat="subject in record.subjects"> <tr> <td> <span class="bold">{{currentLanguageNameField(subject)}}</span> <a ng-href="#/subjectStudyPeriod/new?subjectId={{subject.id}}&studentGroupId={{record.studentGroup}}&studyPeriodId={{record.studyPeriod}}">{{\'subjectStudyPeriod.addTeachers\' | translate}}</a> </td> <td ng-repeat="type in capacityTypes">{{capacitiesUtil.getSubjectsCapacityByType(subject.id, type.code)}}</td> <td class="bold">{{capacitiesUtil.getSubjectsTotalCapacity(subject.id, capacityTypes)}}</td> </tr> <tr ng-repeat="ssp in record.subjectStudyPeriodDtos | filter:{ subject: subject.id }"> <td> <span ng-repeat="teacher in ssp.teachers" ng-class="{\'invalid\': !capacitiesUtil.teachersLoadOk(ssp)}"> <span ng-if="$index > 0">, </span> {{teacher.name}} </span> <span ng-if="ssp.groupProportion !== \'PAEVIK_GRUPI_JAOTUS_1\'"> <span class="subject-study-period-proportion">{{\'subjectStudyPeriod.proportion\' | translate | lowercase}}: <hois-classifier-value ng-model="ssp.groupProportion" main-classifier-code="PAEVIK_GRUPI_JAOTUS"></hois-classifier-value> </span> </span> <a ng-href="#/subjectStudyPeriod/{{ssp.id}}/edit?studentGroupId={{record.studentGroup}}">{{\'main.button.change\' | translate}}</a> </td> <td ng-repeat="type in capacityTypes"> <span ng-repeat="capacity in ssp.capacities | filter:{ capacityType: type.code }"> <input type="number" ng-model="capacity.hours" min="0" max="1000" aria-label="{{\'subjectStudyPeriod.changeLoad\' | translate}}" pattern="^\\d+$"> </span> </td> <td class="bold">{{capacitiesUtil.capacitiesSumBySsp(ssp)}}</td> </tr> <tr> <td>{{\'subjectStudyPeriod.overall\' | translate}}</td> <td ng-repeat="type in capacityTypes">{{capacitiesUtil.capacitiesSumBySubjectAndType(subject.id, type.code)}}</td> <td class="bold">{{capacitiesUtil.capacitiesSumBySubject(subject.id)}}</td> </tr> </tbody> <tr class="bold" md-colors="{background: \'background-200\'}"> <td>{{\'subjectStudyPeriod.overall\' | translate | uppercase}}</td> <td ng-repeat="type in capacityTypes">{{capacitiesUtil.capacitiesSumByType(type.code)}}</td> <td>{{capacitiesUtil.capacitiesSumOverall()}}</td> </tr> </table> </md-table-container> <br> </div> <div layout="row"> <md-button class="md-raised md-primary" ng-click="save()">{{\'main.button.save\' | translate}}</md-button> <md-button class="md-raised" ng-click="back(\'#/subjectStudyPeriods/studentGroups\', subjectStudyPeriodStudentGroupEditForm)">{{\'main.button.back\' | translate}}</md-button> </div> </form> </div>'),a.put("subjectStudyPeriod/studentGroup/subject.study.period.student.group.search.html",'<md-nav-bar md-selected-nav-item="currentNavItem" aria-label="{{\'subjectStudyPeriod.label.options\' | translate}}"> <md-nav-item md-nav-href="#/subjectStudyPeriods/studentGroups?_menu" name="studentGroups">{{\'subjectStudyPeriod.label.studentGroups\' | translate}}</md-nav-item> <md-nav-item md-nav-href="#/subjectStudyPeriods/teachers?_menu" name="teachers">{{\'subjectStudyPeriod.label.teachers\' | translate}}</md-nav-item> <md-nav-item md-nav-href="#/subjectStudyPeriods/subjects?_menu" name="subjects">{{\'subjectStudyPeriod.label.subjects\' | translate}}</md-nav-item> </md-nav-bar> <div class="ois-form-layout-padding ois-form-layout" ng-cloak> <fieldset> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'main.searchlabel\' | translate}}</legend> <form ng-submit="loadData()" layout="column" novalidate> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="50" flex-sm="100" flex-xs="100"> <label>{{\'subjectStudyPeriod.studyPeriod\' | translate}}</label> <hois-select ng-model="criteria.studyPeriod" values="studyPeriods" required></hois-select> </md-input-container> <md-input-container flex="50" flex-sm="100" flex-xs="100" flex-offset-xs="0" flex-offset-sm="0" flex-offset="5"> <label>{{\'subjectStudyPeriod.department\' | translate}}</label> <hois-school-department-select ng-model="criteria.department"></hois-school-department-select> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="50" flex-sm="100" flex-xs="100"> <label>{{\'subjectStudyPeriod.curriculum\' | translate}}</label> <md-select ng-model="criteria.curriculum"> <md-option ng-value="null"> </md-option> <md-option ng-value="option.id" ng-repeat="option in curricula | filter: filterCurriculums | orderBy: currentLanguageNameField()"> {{option.code}} - {{currentLanguageNameField(option)}} </md-option> </md-select> </md-input-container> <md-input-container flex="50" flex-sm="100" flex-xs="100" flex-offset-xs="0" flex-offset-sm="0" flex-offset="5"> <label>{{\'subjectStudyPeriod.studentGroup\' | translate}}</label> <md-select ng-model="criteria.studentGroup"> <md-option ng-value="null"> </md-option> <md-option ng-value="option.id" ng-repeat="option in studentGroups | filter: filterStudentGroups | orderBy: currentLanguageNameField()"> {{currentLanguageNameField(option)}} </md-option> </md-select> </md-input-container> </div> <div layout="row"> <md-button type="submit" class="md-raised md-primary">{{\'main.button.search\' | translate}}</md-button> <md-button class="md-raised" ng-click="clearCriteria()">{{\'main.button.clear\' | translate}}</md-button> <md-button class="md-raised" ng-if="canEdit" href="#/subjectStudyPeriods/studentGroups/new">{{\'main.button.create\' | translate}}</md-button> </div> </form> </fieldset> </div> <div layout-padding> <div flex> <md-table-container> <table md-table md-progress="tabledata.$promise"> <thead md-head md-order="criteria.order" md-on-reorder="loadData"> <tr md-row> <th md-column md-order-by="code">{{\'subjectStudyPeriod.studentGroupCode\' | translate}}</th> <th md-column md-order-by="curriculum.{{currentLanguageNameField()}}">{{\'subjectStudyPeriod.curriculum\' | translate}}</th> <th md-column>{{\'subjectStudyPeriod.hoursTotal\' | translate}}</th> <th md-column>{{\'subjectStudyPeriod.linkToTimetable\' | translate}}</th> <th md-column></th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="row in tabledata.content" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell><a ng-href="#/subjectStudyPeriods/studentGroups/{{row.id}}/{{criteria.studyPeriod}}/view">{{row.code}}</a></td> <td md-cell>{{currentLanguageNameField(row.curriculum)}}</td> <td md-cell>{{row.hours}}</td> <td md-cell> <a href="#/timetable/group/{{schoolId}}/{{row.id}}">{{\'subjectStudyPeriod.timetable\' | translate}}</a> </td> <td md-cell> <md-button md-no-ink class="md-primary change-button" ng-if="canEdit" ng-href="#/subjectStudyPeriods/studentGroups/{{row.id}}/{{criteria.studyPeriod}}/edit">{{\'main.button.change\' | translate}} </md-button> </td> </tr> </tbody> </table> </md-table-container> <md-table-pagination md-limit="criteria.size" md-limit-options="[10, 20, 50]" md-page="criteria.page" md-total="{{tabledata.totalElements}}" md-on-paginate="loadData" md-label="{page: \'{{\'main.page\' | translate}}:\', rowsPerPage: \'{{\'main.rowPerPage\' | translate}}:\', of: \'{{\'main.of\' | translate}}\'}" md-page-select></md-table-pagination> </div> </div>'),a.put("subjectStudyPeriod/studentGroup/subject.study.period.student.group.view.html",'<div layout="column" layout-padding> <form name="subjectStudyPeriodPlanStudentGroupEditForm"> <p class="md-body-1"> <span ng-repeat="capacity in capacityTypes"> <span ng-if="$index !== 0">|</span> {{capacity.value.toUpperCase()}} - {{currentLanguageNameField(capacity)}} </span> </p> <br> <div layout="column" class="form-readonly"> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="25" flex-sm="100" flex-xs="100"> <label>{{\'subjectStudyPeriod.studyPeriod\' | translate}}</label> <hois-value value="currentLanguageNameField(studyPeriod)"></hois-value> </md-input-container> <md-input-container ng-if="isEditing" flex="25" flex-sm="100" flex-xs="100" flex-offset-xs="0" flex-offset-sm="0" flex-offset="5"> <label>{{\'subjectStudyPeriod.studentGroup\' | translate}}</label> <md-select ng-model="record.studentGroup" required ng-disabled="studentGroupDisabled"> <md-option ng-value="option.id" ng-repeat="option in studentGroups"> {{ option.code }} </md-option> </md-select> </md-input-container> <md-input-container ng-if="!isEditing" flex="25" flex-sm="100" flex-xs="100" flex-offset-xs="0" flex-offset-sm="0" flex-offset="5"> <label>{{\'subjectStudyPeriod.studentGroup\' | translate}}</label> <hois-value value="studentGroup.code"></hois-value> </md-input-container> <md-input-container flex="25" flex-sm="100" flex-xs="100" flex-offset-xs="0" flex-offset-sm="0" flex-offset="5"> <label>{{\'subjectStudyPeriod.course\' | translate}}</label> <hois-value value="course"></hois-value> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="25" flex-sm="100" flex-xs="100"> <label>{{\'subjectStudyPeriod.curriculum\' | translate}}</label> <hois-value value="currentLanguageNameField(curriculum)"></hois-value> </md-input-container> <md-input-container flex="25" flex-sm="100" flex-xs="100" flex-offset-xs="0" flex-offset-sm="0" flex-offset="5"> <label>{{\'subjectStudyPeriod.curriculumStudyPeriod.label\' | translate}}</label> <hois-value value="\'subjectStudyPeriod.curriculumStudyPeriod.value\' | translate:curriculumStudyPeriod"></hois-value> </md-input-container> </div> <br> <md-table-container> <table class="subject-study-period"> <thead> <tr> <th> <span>{{\'subjectStudyPeriod.subjects\' | translate}}</span> </th> <th ng-repeat="capacityType in capacityTypes">{{capacityType.value.toUpperCase()}}</th> <th>{{\'subjectStudyPeriod.overall\' | translate}}</th> </tr> </thead> <tbody ng-repeat="subject in record.subjects"> <tr> <td class="bold"> <span>{{currentLanguageNameField(subject)}}</span> </td> <td ng-repeat="type in capacityTypes">{{capacitiesUtil.getSubjectsCapacityByType(subject.id, type.code)}}</td> <td>{{capacitiesUtil.getSubjectsTotalCapacity(subject.id, capacityTypes)}}</td> </tr> <tr ng-repeat="ssp in record.subjectStudyPeriodDtos | filter:{ subject: subject.id }"> <td> <span ng-repeat="teacher in ssp.teachers"> <span ng-if="$index > 0">, </span> {{teacher.name}} </span> <span ng-if="ssp.groupProportion !== \'PAEVIK_GRUPI_JAOTUS_1\'"> <span class="subject-study-period-proportion">{{\'subjectStudyPeriod.proportion\' | translate | lowercase}}: <hois-classifier-value ng-model="ssp.groupProportion" main-classifier-code="PAEVIK_GRUPI_JAOTUS"></hois-classifier-value> </span> </span> </td> <td ng-repeat="type in capacityTypes"> <span ng-repeat="capacity in ssp.capacities | filter:{ capacityType: type.code }"> <span>{{capacity.hours}}</span> </span> </td> <td>{{capacitiesUtil.capacitiesSumBySsp(ssp)}}</td> </tr> <tr> <td>{{\'subjectStudyPeriod.overall\' | translate}}</td> <td ng-repeat="type in capacityTypes">{{capacitiesUtil.capacitiesSumBySubjectAndType(subject.id, type.code)}}</td> <td>{{capacitiesUtil.capacitiesSumBySubject(subject.id)}}</td> </tr> </tbody> <tr class="bold" md-colors="{background: \'background-200\'}"> <td>{{\'subjectStudyPeriod.overall\' | translate | uppercase}}</td> <td ng-repeat="type in capacityTypes">{{capacitiesUtil.capacitiesSumByType(type.code)}}</td> <td>{{capacitiesUtil.capacitiesSumOverall()}}</td> </tr> </table> </md-table-container> <br> </div> <div layout="row"> <md-button ng-if="!readOnly" class="md-raised md-primary" ng-href="#/subjectStudyPeriods/studentGroups/{{record.studentGroup}}/{{studyPeriod.id}}/edit?_noback">{{\'main.button.change\' | translate}}</md-button> <md-button class="md-raised" ng-click="back(\'#/subjectStudyPeriods/studentGroups\')">{{\'main.button.back\' | translate}}</md-button> </div> </form> </div>'),a.put("subjectStudyPeriod/subject/subject.study.period.subject.edit.html",'<div layout="column" layout-padding> <form name="subjectStudyPeriodSubjectEditForm"> <div flex layout="row" layout-align="start start" class="common-label" md-colors="{color: \'background-400\'}"> <span ng-repeat="capacity in capacityTypes"> <span ng-if="$index !== 0">|</span> {{capacity.value.toUpperCase()}} - {{currentLanguageNameField(capacity)}} </span> </div> <br> <div layout="column" class="form-readonly"> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container ng-if="isNew" flex="25" flex-sm="100" flex-xs="100"> <label>{{\'subjectStudyPeriod.studyPeriod\' | translate}}</label> <hois-select ng-model="record.studyPeriod" values="studyPeriods" required></hois-select> </md-input-container> <md-input-container ng-if="!isNew" flex="25" flex-sm="100" flex-xs="100"> <label>{{\'subjectStudyPeriod.studyPeriod\' | translate}}</label> <hois-value value="currentLanguageNameField(studyPeriod)"></hois-value> </md-input-container> <md-input-container ng-if="isNew" flex="25" flex-sm="100" flex-xs="100" flex-offset-xs="0" flex-offset-sm="0" flex-offset="5"> <label>{{\'subjectStudyPeriod.subject\' | translate}}</label> <hois-select ng-model="record.subject" values="subjects" required></hois-select> </md-input-container> <md-input-container ng-if="!isNew" flex="25" flex-sm="100" flex-xs="100" flex-offset-xs="0" flex-offset-sm="0" flex-offset="5"> <label>{{\'subjectStudyPeriod.subject\' | translate}}</label> <hois-value value="subject.nameEt"></hois-value> </md-input-container> </div> <br> <md-table-container> <table class="subject-study-period"> <thead> <tr> <th> <span>{{\'subjectStudyPeriod.teachers\' | translate}}</span> <a ng-href="#/subjectStudyPeriod/new?subjectId={{record.subject}}&studyPeriodId={{record.studyPeriod}}" ng-if="record.subject">{{\'subjectStudyPeriod.addTeachers\' | translate}}</a> </th> <th ng-repeat="capacityType in capacityTypes">{{capacityType.value.toUpperCase()}}</th> <th>{{\'subjectStudyPeriod.overall\' | translate}}</th> </tr> </thead> <tbody> <tr ng-repeat="ssp in record.subjectStudyPeriodDtos | filter:{ subject: subject.id }"> <td> <span ng-repeat="teacher in ssp.teachers" ng-class="{\'invalid\': !capacitiesUtil.teachersLoadOk(ssp)}"> <span ng-if="$index > 0">, </span> {{teacher.name}} </span> <span ng-show="ssp.studentGroupObjects && ssp.studentGroupObjects.length > 0"> ( <span ng-repeat="sg in ssp.studentGroupObjects"> <span ng-if="$index > 0">, </span> {{sg.nameEt}} </span> ) </span> <span ng-if="ssp.groupProportion !== \'PAEVIK_GRUPI_JAOTUS_1\'"> <span class="subject-study-period-proportion">{{\'subjectStudyPeriod.proportion\' | translate | lowercase}}: <hois-classifier-value ng-model="ssp.groupProportion" main-classifier-code="PAEVIK_GRUPI_JAOTUS"></hois-classifier-value> </span> </span> <a ng-href="#/subjectStudyPeriod/{{ssp.id}}/edit?subjectId={{record.subject}}">{{\'main.button.change\' | translate}}</a> </td> <td ng-repeat="type in capacityTypes"> <span ng-repeat="capacity in ssp.capacities | filter:{ capacityType: type.code }"> <input type="number" ng-model="capacity.hours" min="0" max="1000" aria-label="{{\'subjectStudyPeriod.changeLoad\' | translate}}" pattern="^\\d+$"> </span> </td> <td>{{capacitiesUtil.capacitiesSumBySsp(ssp)}}</td> </tr> </tbody> <tr class="bold" md-colors="{background: \'background-200\'}"> <td>{{\'subjectStudyPeriod.overall\' | translate | uppercase}}</td> <td ng-repeat="type in capacityTypes">{{capacitiesUtil.capacitiesSumByType(type.code)}}</td> <td>{{capacitiesUtil.capacitiesSumOverall()}}</td> </tr> </table> </md-table-container> <br> </div> <div layout="row"> <md-button class="md-raised md-primary" ng-click="save()">{{\'main.button.save\' | translate}}</md-button> <md-button class="md-raised" ng-click="back(\'#/subjectStudyPeriods/subjects\', subjectStudyPeriodSubjectEditForm)">{{\'main.button.back\' | translate}}</md-button> </div> </form> </div>'),
a.put("subjectStudyPeriod/subject/subject.study.period.subject.search.html",'<md-nav-bar md-selected-nav-item="currentNavItem" aria-label="{{\'subjectStudyPeriod.label.options\' | translate}}"> <md-nav-item md-nav-href="#/subjectStudyPeriods/studentGroups?_menu" name="studentGroups">{{\'subjectStudyPeriod.label.studentGroups\' | translate}}</md-nav-item> <md-nav-item md-nav-href="#/subjectStudyPeriods/teachers?_menu" name="teachers">{{\'subjectStudyPeriod.label.teachers\' | translate}}</md-nav-item> <md-nav-item md-nav-href="#/subjectStudyPeriods/subjects?_menu" name="subjects">{{\'subjectStudyPeriod.label.subjects\' | translate}}</md-nav-item> </md-nav-bar> <div class="ois-form-layout-padding ois-form-layout" ng-cloak> <fieldset> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'main.searchlabel\' | translate}}</legend> <form ng-submit="loadData()" layout="column" novalidate> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="25" flex-sm="100" flex-xs="100"> <label>{{\'subjectStudyPeriod.studyPeriod\' | translate}}</label> <hois-select ng-model="criteria.studyPeriod" values="studyPeriods" required></hois-select> </md-input-container> <hois-autocomplete flex="25" flex-sm="100" flex-xs="100" flex-offset-xs="0" flex-offset-sm="0" flex-offset="5" ng-model="criteria.teacherObject" url="/subjectStudyPeriods/teachers/page" name="teacher" label="subjectStudyPeriod.teacher"></hois-autocomplete> <hois-autocomplete flex="25" flex-sm="100" flex-xs="100" flex-offset-xs="0" flex-offset-sm="0" flex-offset="5" ng-model="criteria.subjectObject" url="/autocomplete/subjects" name="subject" label="subjectStudyPeriod.subject"></hois-autocomplete> </div> <div layout="row"> <md-button type="submit" class="md-raised md-primary">{{\'main.button.search\' | translate}}</md-button> <md-button class="md-raised" ng-click="clearCriteria()">{{\'main.button.clear\' | translate}}</md-button> <md-button class="md-raised" ng-if="canEdit" href="#/subjectStudyPeriods/subjects/new">{{\'main.button.create\' | translate}}</md-button> </div> </form> </fieldset> </div> <div layout-padding> <div flex> <md-table-container> <table md-table md-progress="tabledata.$promise"> <thead md-head md-order="criteria.order" md-on-reorder="loadData"> <tr md-row> <th md-column md-order-by="code,{{currentLanguageNameField()}}">{{\'subjectStudyPeriod.nameCode\' | translate}}</th> <th md-column>{{\'subjectStudyPeriod.hoursTotal\' | translate}}</th> <th md-column>{{\'subjectStudyPeriod.teacher\' | translate}}</th> <th md-column>{{\'subjectStudyPeriod.linkToTimetable\' | translate}}</th> <th md-column></th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="row in tabledata.content" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell><a ng-href="#/subjectStudyPeriods/subjects/{{row.subject.id}}/{{criteria.studyPeriod}}/view">{{currentLanguageNameField(row.subject)}}</a></td> <td md-cell>{{row.hours}}</td> <td md-cell> <table> <tr ng-repeat="teacher in row.teachers | orderBy"> <td>{{teacher}}</td> </tr> </table> </td> <td md-cell><a href=""></a></td> <td md-cell> <md-button md-no-ink class="md-primary change-button" ng-if="canEdit" ng-href="#/subjectStudyPeriods/subjects/{{row.subject.id}}/{{criteria.studyPeriod}}/edit">{{\'main.button.change\' | translate}} </md-button> </td> </tr> </tbody> </table> </md-table-container> <md-table-pagination md-limit="criteria.size" md-limit-options="[10, 20, 50]" md-page="criteria.page" md-total="{{tabledata.totalElements}}" md-on-paginate="loadData" md-label="{page: \'{{\'main.page\' | translate}}:\', rowsPerPage: \'{{\'main.rowPerPage\' | translate}}:\', of: \'{{\'main.of\' | translate}}\'}" md-page-select></md-table-pagination> </div> </div>'),a.put("subjectStudyPeriod/subject/subject.study.period.subject.view.html",'<div layout="column" layout-padding> <form name="subjectStudyPeriodSubjectEditForm"> <p class="md-body-1"> <span ng-repeat="capacity in capacityTypes"> <span ng-if="$index !== 0">|</span> {{capacity.value.toUpperCase()}} - {{currentLanguageNameField(capacity)}} </span> </p> <br> <div layout="column" class="form-readonly"> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="25" flex-sm="100" flex-xs="100"> <label>{{\'subjectStudyPeriod.studyPeriod\' | translate}}</label> <hois-value value="currentLanguageNameField(studyPeriod)"></hois-value> </md-input-container> <md-input-container flex="25" flex-sm="100" flex-xs="100" flex-offset-xs="0" flex-offset-sm="0" flex-offset="5"> <label>{{\'subjectStudyPeriod.subject\' | translate}}</label> <hois-value value="subject.nameEt"></hois-value> </md-input-container> </div> <br> <md-table-container> <table class="subject-study-period"> <thead> <tr> <th> <span>{{\'subjectStudyPeriod.teachers\' | translate}}</span> </th> <th ng-repeat="capacityType in capacityTypes">{{capacityType.value.toUpperCase()}}</th> <th>{{\'subjectStudyPeriod.overall\' | translate}}</th> </tr> </thead> <tbody> <tr ng-repeat="ssp in record.subjectStudyPeriodDtos | filter:{ subject: subject.id }"> <td> <span ng-repeat="teacher in ssp.teachers" ng-class="{\'invalid\': !capacitiesUtil.teachersLoadOk(ssp)}"> <span ng-if="$index > 0">, </span> {{teacher.name}} </span> <span ng-show="ssp.studentGroupObjects && ssp.studentGroupObjects.length > 0"> ( <span ng-repeat="sg in ssp.studentGroupObjects"> <span ng-if="$index > 0">, </span> {{sg.nameEt}} </span> ) </span> <span ng-if="ssp.groupProportion !== \'PAEVIK_GRUPI_JAOTUS_1\'"> <span class="subject-study-period-proportion">{{\'subjectStudyPeriod.proportion\' | translate | lowercase}}: <hois-classifier-value ng-model="ssp.groupProportion" main-classifier-code="PAEVIK_GRUPI_JAOTUS"></hois-classifier-value> </span> </span> </td> <td ng-repeat="type in capacityTypes"> <span ng-repeat="capacity in ssp.capacities | filter:{ capacityType: type.code }"> <span>{{capacity.hours}}</span> </span> </td> <td>{{capacitiesUtil.capacitiesSumBySsp(ssp)}}</td> </tr> </tbody> <tr class="bold" md-colors="{background: \'background-200\'}"> <td>{{\'subjectStudyPeriod.overall\' | translate | uppercase}}</td> <td ng-repeat="type in capacityTypes">{{capacitiesUtil.capacitiesSumByType(type.code)}}</td> <td>{{capacitiesUtil.capacitiesSumOverall()}}</td> </tr> </table> </md-table-container> <br> </div> <div layout="row"> <md-button ng-if="!readOnly" class="md-raised md-primary" ng-href="#/subjectStudyPeriods/subjects/{{subject.id}}/{{studyPeriod.id}}/edit?_noback">{{\'main.button.change\' | translate}}</md-button> <md-button class="md-raised" ng-click="back(\'#/subjectStudyPeriods/subjects\')">{{\'main.button.back\' | translate}}</md-button> </div> </form> </div>'),a.put("subjectStudyPeriod/teacher/subject.study.period.teacher.edit.html",'<div layout="column" layout-padding> <form name="subjectStudyPeriodTeacherEditForm"> <div flex layout="row" layout-align="start start" class="common-label" md-colors="{color: \'background-400\'}"> <span ng-repeat="capacity in capacityTypes"> <span ng-if="$index !== 0">|</span> {{capacity.value.toUpperCase()}} - {{currentLanguageNameField(capacity)}} </span> </div> <br> <div layout="column"> <div layout="row" layout-sm="column" layout-xs="column" class="form-readonly"> <md-input-container ng-if="isNew" flex="25" flex-sm="100" flex-xs="100"> <label>{{\'subjectStudyPeriod.teacher\' | translate}}</label> <hois-select ng-model="record.studyPeriod" values="studyPeriods" required></hois-select> </md-input-container> <md-input-container ng-if="!isNew" flex="25" flex-sm="100" flex-xs="100"> <label>{{\'subjectStudyPeriod.studyPeriod\' | translate}}</label> <hois-value value="currentLanguageNameField(studyPeriod)"></hois-value> </md-input-container> <md-input-container ng-if="isNew" flex="25" flex-sm="100" flex-xs="100" flex-offset-xs="0" flex-offset-sm="0" flex-offset="5"> <label>{{\'subjectStudyPeriod.teacher\' | translate}}</label> <hois-select ng-model="record.teacher" values="teachers" required></hois-select> </md-input-container> <md-input-container ng-if="!isNew" flex="25" flex-sm="100" flex-xs="100" flex-offset-xs="0" flex-offset-sm="0" flex-offset="5"> <label>{{\'subjectStudyPeriod.teacher\' | translate}}</label> <hois-value value="teacher.nameEt"></hois-value> </md-input-container> </div> <br> <md-table-container> <table class="subject-study-period"> <thead> <tr> <th> <span>{{\'subjectStudyPeriod.subjects\' | translate}}</span> <a ng-href="#/subjectStudyPeriod/new?teacherId={{record.teacher}}&studyPeriodId={{record.studyPeriod}}" ng-if="record.teacher">{{\'subjectStudyPeriod.addSubjects\' | translate}}</a> </th> <th ng-repeat="capacityType in capacityTypes">{{capacityType.value.toUpperCase()}}</th> <th>{{\'subjectStudyPeriod.overall\' | translate}}</th> </tr> </thead> <tbody ng-repeat="subject in record.subjects"> <tr> <td class="bold"> <span>{{currentLanguageNameField(subject)}}</span> </td> <td ng-repeat="type in capacityTypes">{{capacitiesUtil.getSubjectsCapacityByType(subject.id, type.code)}}</td> <td>{{capacitiesUtil.getSubjectsTotalCapacity(subject.id, capacityTypes)}}</td> </tr> <tr ng-repeat="ssp in record.subjectStudyPeriodDtos | filter:{ subject: subject.id }"> <td> <span ng-repeat="studentGroup in ssp.studentGroupObjects"> <span ng-if="$index > 0">, </span> {{studentGroup.nameEt}} </span> <span ng-if="ssp.groupProportion !== \'PAEVIK_GRUPI_JAOTUS_1\'"> <span class="subject-study-period-proportion">{{\'subjectStudyPeriod.proportion\' | translate | lowercase}}: <hois-classifier-value ng-model="ssp.groupProportion" main-classifier-code="PAEVIK_GRUPI_JAOTUS"></hois-classifier-value> </span> </span> <a ng-href="#/subjectStudyPeriod/{{ssp.id}}/edit?teacherId={{record.teacher}}">{{\'main.button.change\' | translate}}</a> </td> <td ng-repeat="type in capacityTypes" ng-click="capacitiesUtil.setCapacityEditable(ssp, type.code)" ng-mouseleave="capacitiesUtil.unsetCapacityEditable(ssp, type.code)"> <span ng-repeat="capacity in ssp.capacities | filter:{ capacityType: type.code }"> <input type="number" ng-model="capacity.hours" min="0" max="1000" aria-label="{{\'subjectStudyPeriod.changeLoad\' | translate}}" pattern="^\\d+$"> </span> </td> <td>{{capacitiesUtil.capacitiesSumBySsp(ssp)}}</td> </tr> <tr> <td>{{\'subjectStudyPeriod.overall\' | translate}}</td> <td ng-repeat="type in capacityTypes">{{capacitiesUtil.capacitiesSumBySubjectAndType(subject.id, type.code)}}</td> <td>{{capacitiesUtil.capacitiesSumBySubject(subject.id)}}</td> </tr> </tbody> <tr class="bold"> <td>{{\'subjectStudyPeriod.overall\' | translate | uppercase}}</td> <td ng-repeat="type in capacityTypes">{{capacitiesUtil.capacitiesSumByType(type.code)}}</td> <td>{{capacitiesUtil.capacitiesSumOverall()}}</td> </tr> </table> </md-table-container> <br> </div> <div layout="row"> <md-button class="md-raised md-primary" ng-click="save()">{{\'main.button.save\' | translate}}</md-button> <md-button class="md-raised" ng-click="back(\'#/subjectStudyPeriods/teachers\', subjectStudyPeriodTeacherEditForm)">{{\'main.button.back\' | translate}}</md-button> </div> </form> </div>'),a.put("subjectStudyPeriod/teacher/subject.study.period.teacher.search.html",'<md-nav-bar md-selected-nav-item="currentNavItem" aria-label="{{\'subjectStudyPeriod.label.options\' | translate}}"> <md-nav-item md-nav-href="#/subjectStudyPeriods/studentGroups?_menu" name="studentGroups">{{\'subjectStudyPeriod.label.studentGroups\' | translate}}</md-nav-item> <md-nav-item md-nav-href="#/subjectStudyPeriods/teachers?_menu" name="teachers">{{\'subjectStudyPeriod.label.teachers\' | translate}}</md-nav-item> <md-nav-item md-nav-href="#/subjectStudyPeriods/subjects?_menu" name="subjects">{{\'subjectStudyPeriod.label.subjects\' | translate}}</md-nav-item> </md-nav-bar> <div class="ois-form-layout-padding ois-form-layout" ng-cloak> <fieldset> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'main.searchlabel\' | translate}}</legend> <form ng-submit="loadData()" layout="column" novalidate> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="50" flex-sm="100" flex-xs="100"> <label>{{\'subjectStudyPeriod.studyPeriod\' | translate}}</label> <hois-select ng-model="criteria.studyPeriod" values="studyPeriods" required></hois-select> </md-input-container> <hois-autocomplete flex="50" flex-sm="100" flex-xs="100" flex-offset-xs="0" flex-offset-sm="0" flex-offset="5" ng-model="criteria.teacherObject" url="/subjectStudyPeriods/teachers/page" name="teacher" label="subjectStudyPeriod.teacher"></hois-autocomplete> </div> <div layout="row"> <md-button type="submit" class="md-raised md-primary">{{\'main.button.search\' | translate}}</md-button> <md-button class="md-raised" ng-click="clearCriteria()">{{\'main.button.clear\' | translate}}</md-button> <md-button class="md-raised" ng-if="canEdit" href="#/subjectStudyPeriods/teachers/new">{{\'main.button.create\' | translate}}</md-button> </div> </form> </fieldset> </div> <div layout-padding> <div flex> <md-table-container> <table md-table md-progress="tabledata.$promise"> <thead md-head md-order="criteria.order" md-on-reorder="loadData"> <tr md-row> <th md-column md-order-by="person.lastname,person.firstname">{{\'subjectStudyPeriod.teacher\' | translate}}</th> <th md-column>{{\'subjectStudyPeriod.hoursTotal\' | translate}}</th> <th md-column>{{\'subjectStudyPeriod.linkToTimetable\' | translate}}</th> <th md-column></th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="row in tabledata.content" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell><a ng-href="#/subjectStudyPeriods/teachers/{{row.id}}/{{criteria.studyPeriod}}/view">{{row.name}}</a></td> <td md-cell>{{row.hours}}</td> <td md-cell> <a href="#/timetable/teacher/{{schoolId}}/{{row.id}}/">{{\'subjectStudyPeriod.timetable\' | translate}}</a> </td> <td md-cell> <md-button md-no-ink class="md-primary change-button" ng-if="canEdit" ng-href="#/subjectStudyPeriods/teachers/{{row.id}}/{{criteria.studyPeriod}}/edit">{{\'main.button.change\' | translate}} </md-button></td> </tr> </tbody> </table> </md-table-container> <md-table-pagination md-limit="criteria.size" md-limit-options="[10, 20, 50]" md-page="criteria.page" md-total="{{tabledata.totalElements}}" md-on-paginate="loadData" md-label="{page: \'{{\'main.page\' | translate}}:\', rowsPerPage: \'{{\'main.rowPerPage\' | translate}}:\', of: \'{{\'main.of\' | translate}}\'}" md-page-select></md-table-pagination> </div> </div>'),a.put("subjectStudyPeriod/teacher/subject.study.period.teacher.view.html",'<div layout="column" layout-padding> <form name="subjectStudyPeriodTeacherEditForm"> <p class="md-body-1"> <span ng-repeat="capacity in capacityTypes"> <span ng-if="$index !== 0">|</span> {{capacity.value.toUpperCase()}} - {{currentLanguageNameField(capacity)}} </span> </p> <br> <div layout="column"> <div layout="row" layout-sm="column" layout-xs="column" class="form-readonly"> <md-input-container flex="25" flex-sm="100" flex-xs="100"> <label>{{\'subjectStudyPeriod.studyPeriod\' | translate}}</label> <hois-value value="currentLanguageNameField(studyPeriod)"></hois-value> </md-input-container> <md-input-container flex="25" flex-sm="100" flex-xs="100" flex-offset-xs="0" flex-offset-sm="0" flex-offset="5"> <label>{{\'subjectStudyPeriod.teacher\' | translate}}</label> <hois-value value="teacher.nameEt"></hois-value> </md-input-container> </div> <br> <md-table-container> <table class="subject-study-period"> <thead> <tr> <th> <span>{{\'subjectStudyPeriod.subjects\' | translate}}</span> </th> <th ng-repeat="capacityType in capacityTypes">{{capacityType.value.toUpperCase()}}</th> <th>{{\'subjectStudyPeriod.overall\' | translate}}</th> </tr> </thead> <tbody ng-repeat="subject in record.subjects"> <tr> <td class="bold"> <span>{{currentLanguageNameField(subject)}}</span> </td> <td ng-repeat="type in capacityTypes">{{capacitiesUtil.getSubjectsCapacityByType(subject.id, type.code)}}</td> <td>{{capacitiesUtil.getSubjectsTotalCapacity(subject.id, capacityTypes)}}</td> </tr> <tr ng-repeat="ssp in record.subjectStudyPeriodDtos | filter:{ subject: subject.id }"> <td> <span ng-repeat="studentGroup in ssp.studentGroupObjects"> <span ng-if="$index > 0">, </span> {{studentGroup.nameEt}} </span> <span ng-if="ssp.groupProportion !== \'PAEVIK_GRUPI_JAOTUS_1\'"> <span class="subject-study-period-proportion">{{\'subjectStudyPeriod.proportion\' | translate | lowercase}}: <hois-classifier-value ng-model="ssp.groupProportion" main-classifier-code="PAEVIK_GRUPI_JAOTUS"></hois-classifier-value> </span> </span> </td> <td ng-repeat="type in capacityTypes"> <span ng-repeat="capacity in ssp.capacities | filter:{ capacityType: type.code }"> <span>{{capacity.hours}}</span> </span> </td> <td>{{capacitiesUtil.capacitiesSumBySsp(ssp)}}</td> </tr> <tr> <td>{{\'subjectStudyPeriod.overall\' | translate}}</td> <td ng-repeat="type in capacityTypes">{{capacitiesUtil.capacitiesSumBySubjectAndType(subject.id, type.code)}}</td> <td>{{capacitiesUtil.capacitiesSumBySubject(subject.id)}}</td> </tr> </tbody> <tr class="bold" md-colors="{background: \'background-200\'}"> <td>{{\'subjectStudyPeriod.overall\' | translate | uppercase}}</td> <td ng-repeat="type in capacityTypes">{{capacitiesUtil.capacitiesSumByType(type.code)}}</td> <td>{{capacitiesUtil.capacitiesSumOverall()}}</td> </tr> </table> </md-table-container> <br> </div> <div layout="row"> <md-button class="md-raised md-primary" ng-href="#/subjectStudyPeriods/teachers/{{teacher.id}}/{{studyPeriod.id}}/edit?_noback">{{\'main.button.change\' | translate}}</md-button> <md-button class="md-raised" ng-click="back(\'#/subjectStudyPeriods/teachers\')">{{\'main.button.back\' | translate}}</md-button> </div> </form> </div>'),a.put("timetable/generalTimetable/timetable.generalTimetable.byGroup.html",'<div ng-include="\'timetable/generalTimetable/timetable.generalTimetable.navbar.html\'"></div> <div> <div ng-if="groupTimetables"> <md-grid-list ng-app="app" md-cols-xs="1" md-cols-sm="2" md-cols-md="4" md-cols-lg="8" md-cols-gt-lg="8" md-gutter="1em" md-row-height="40px" flex> <md-grid-tile ng-repeat="row in groupTimetables" style="text-align: left"> <md-button class="md-button" md-colors="{background: \'background-200\'}" ng-click="showGroupWeek(row.groupId)"> {{row.groupCode}} </md-button> </md-grid-tile> </md-grid-list> </div> <div ng-controller="GroupTimetableViewController"> <div ng-include="\'timetable/timetable.week.view.html\'"></div> </div> </div>'),a.put("timetable/generalTimetable/timetable.generalTimetable.byRoom.html",'<div ng-include="\'timetable/generalTimetable/timetable.generalTimetable.navbar.html\'"></div> <div> <div ng-if="timetablesByRooms"> <md-grid-list ng-app="app" md-cols-xs="1" md-cols-sm="2" md-cols-md="4" md-cols-lg="8" md-cols-gt-lg="8" md-gutter="1em" md-row-height="40px" flex> <md-grid-tile ng-repeat="row in timetablesByRooms" style="text-align: left"> <md-button class="md-button" md-colors="{background: \'background-200\'}" ng-click="showRoomWeek(row.roomId)"> {{row.roomCode}} </md-button> </md-grid-tile> </md-grid-list> </div> <div ng-controller="RoomTimetableViewController"> <div ng-include="\'timetable/timetable.week.view.html\'"></div> </div> </div>'),a.put("timetable/generalTimetable/timetable.generalTimetable.byTeacher.html",'<div ng-include="\'timetable/generalTimetable/timetable.generalTimetable.navbar.html\'"></div> <div> <div ng-if="timetablesByTeachers"> <md-grid-list ng-app="app" md-cols-xs="1" md-cols-sm="2" md-cols-md="4" md-cols-lg="8" md-cols-gt-lg="8" md-gutter="1em" md-row-height="40px" flex> <md-grid-tile ng-repeat="row in timetablesByTeachers" style="text-align: left"> <md-button class="md-button" md-colors="{background: \'background-200\'}" ng-click="showTeacherWeek(row.teacherId)"> {{row.lastname}}, {{row.firstname}} </md-button> </md-grid-tile> </md-grid-list> </div> <div ng-controller="TeacherTimetableViewController"> <div ng-include="\'timetable/timetable.week.view.html\'"></div> </div> </div>'),a.put("timetable/generalTimetable/timetable.generalTimetable.navbar.html",'<md-nav-bar hide-xs ng-if="auth != null" md-selected-nav-item="currentNavItem" aria-label="{{\'timetable.options\' | translate}}"> <md-nav-item ng-if="auth.isStudent() || auth.isTeacher()" md-nav-href="#/timetable/personalGeneralTimetable?_menu" name="personal"> {{\'timetable.myTimetable\' | translate}}</md-nav-item> <md-nav-item ng-if="auth.isParent()" md-nav-href="#/timetable/personalGeneralTimetable?_menu" name="personal"> {{\'timetable.parentTimetable\' | translate}}</md-nav-item> <md-nav-item md-nav-href="#/timetable/generalTimetableByGroup?_menu" name="studentGroup">{{\'timetable.studentGroups\' | translate}}</md-nav-item> <md-nav-item md-nav-href="#/timetable/generalTimetableByTeacher?_menu" name="teacher">{{\'timetable.teachers\' | translate}}</md-nav-item> <md-nav-item md-nav-href="#/timetable/generalTimetableByRoom?_menu" name="room">{{\'timetable.rooms\' | translate}}</md-nav-item> <md-nav-item md-nav-href="#/timetable/searchGeneralTimetable?_menu" name="search"> <md-icon md-font-set="material-icons" ng-style="currentNavItem === \'search\' ? {\'color\': \'rgb(13,71,161)\'} : {\'color\': \'rgba(0,0,0,0.54)\'}">search</md-icon> </md-nav-item> </md-nav-bar> <md-nav-bar hide-xs ng-if="auth == null" md-selected-nav-item="currentNavItem" aria-label="{{\'timetable.options\' | translate}}"> <md-nav-item md-nav-href="#/timetable/generalTimetableByGroup/{{::schoolId}}" name="studentGroup">{{\'timetable.studentGroups\' | translate}}</md-nav-item> <md-nav-item md-nav-href="#/timetable/generalTimetableByTeacher/{{::schoolId}}" name="teacher">{{\'timetable.teachers\' | translate}}</md-nav-item> <md-nav-item md-nav-href="#/timetable/generalTimetableByRoom/{{::schoolId}}" name="room">{{\'timetable.rooms\' | translate}}</md-nav-item> </md-nav-bar> <div hide-gt-xs layout="column" ng-if="auth != null"> <md-button ng-if="auth.isStudent() || auth.isTeacher()" class="md-raised" flex ng-href="#/timetable/personalGeneralTimetable?_menu" ng-class="{\'md-accent\': currentNavItem === \'personal\'}" name="personal">{{\'timetable.myTimetable\' | translate}}</md-button> <md-button class="md-raised" ng-if="auth.isParent()" ng-href="#/timetable/personalGeneralTimetable?_menu" ng-class="{\'md-accent\': currentNavItem === \'personal\'}" name="personal">{{\'timetable.parentTimetable\' | translate}}</md-button> <md-button class="md-raised" ng-href="#/timetable/generalTimetableByGroup?_menu" ng-class="{\'md-accent\': currentNavItem === \'studentGroup\'}" name="studentGroup">{{\'timetable.teachers\' | translate}}</md-button> <md-button class="md-raised" ng-href="#/timetable/generalTimetableByTeacher?_menu" ng-class="{\'md-accent\': currentNavItem === \'teacher\'}" name="teacher">{{\'timetable.studentGroups\' | translate}}</md-button> <md-button class="md-raised" ng-href="#/timetable/generalTimetableByRoom?_menu" ng-class="{\'md-accent\': currentNavItem === \'room\'}" name="room">{{\'timetable.rooms\' | translate}}</md-button> <md-button class="md-raised" ng-class="{\'md-accent\': currentNavItem === \'search\'}" ng-href="#/timetable/searchGeneralTimetable?_menu" name="student.timetable"> <md-icon md-font-set="material-icons">search</md-icon> </md-button> </div> <div hide-gt-xs layout="column" ng-if="auth == null"> <md-button class="md-raised" ng-href="#/timetable/generalTimetableByGroup?_menu" ng-class="{\'md-accent\': currentNavItem === \'studentGroup\'}" name="studentGroup">{{\'timetable.teachers\' | translate}}</md-button> <md-button class="md-raised" ng-href="#/timetable/generalTimetableByTeacher?_menu" ng-class="{\'md-accent\': currentNavItem === \'teacher\'}" name="teacher">{{\'timetable.studentGroups\' | translate}}</md-button> <md-button class="md-raised" ng-href="#/timetable/generalTimetableByRoom?_menu" ng-class="{\'md-accent\': currentNavItem === \'room\'}" name="room">{{\'timetable.rooms\' | translate}}</md-button> </div>'),a.put("timetable/generalTimetable/timetable.generalTimetable.personal.html",'<div ng-include="\'timetable/generalTimetable/timetable.generalTimetable.navbar.html\'"></div> <div ng-if="auth.isStudent() || auth.isParent()" ng-controller="StudentTimetableViewController"> <div ng-include="\'timetable/timetable.week.view.html\'"></div> </div> <div ng-if="auth.isTeacher()" ng-controller="TeacherTimetableViewController"> <div ng-include="\'timetable/timetable.week.view.html\'"></div> </div> <div layout-padding> <div flex> <div ng-repeat="row in timetables track by $index"> <a ng-class="{shownTimetable: $index === shownTimetableIndex}" ng-click="showTimetable(row.id, row.studyPeriodId, $index)"> {{currentLanguageNameField(row)}} {{row.startDate | hoisDate}}-{{row.endDate | hoisDate}}</a> </div> </div> </div>'),a.put("timetable/generalTimetable/timetable.generalTimetable.school.list.html",'<div layout-padding> <md-grid-list md-cols="1" md-cols-sm="2" md-cols-md="3" md-cols-gt-md="6" md-row-height-gt-md="1:1" md-row-height="4:3" md-gutter="8px" md-gutter-gt-sm="4px"> <md-grid-tile ng-repeat="school in schools" md-colspan="1"> <button class="schoolTileButton" ng-click="openSchoolGeneralTimetable(school.id)"> <img class="schoolTileImage" ng-src="data:image/JPEG;base64,{{school.logo}}" on-error-src="images/HITSA_innov_logo_03.4e2f45c0.png"> <md-grid-tile-footer class="schoolTileFooter"> <span>{{currentLanguageNameField(school)}}</span> </md-grid-tile-footer> </button> </md-grid-tile> </md-grid-list> </div>'),a.put("timetable/generalTimetable/timetable.generalTimetable.search.html",'<div ng-include="\'timetable/generalTimetable/timetable.generalTimetable.navbar.html\'"></div> <div class="ois-form-layout-padding ois-form-layout" ng-cloak> <div flex> <fieldset> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'main.searchlabel\' | translate}}</legend> <form ng-submit="loadData()" novalidate class="nomargin"> <div layout="row" layout-sm="column" layout-xs="column"> <div flex="50" flex-sm="100" flex-xs="100"> <hois-autocomplete flex ng-model="criteria.teacher" method="teachers" name="teacher" label="timetable.search.teacher"></hois-autocomplete> </div> <div flex="50" flex-sm="100" flex-xs="100"> <hois-autocomplete flex ng-model="criteria.studentGroup" method="studentgroups" name="studentGroups" label="timetable.search.studentGroup"></hois-autocomplete> </div> </div> <div layout="row" layout-sm="column" layout-xs="column"> <div flex="50" flex-sm="100" flex-xs="100"> <hois-autocomplete flex ng-model="criteria.roomObject" method="rooms" name="rooms" label="timetable.search.room"></hois-autocomplete> </div> <div flex="50" flex-sm="100" flex-xs="100"> <hois-autocomplete flex ng-model="criteria.subjectObject" method="journalsAndSubjects" name="subject" label="timetable.search.subject"></hois-autocomplete> </div> </div> <div layout="row"> <md-button ng-click="search()" class="md-raised md-primary">{{\'main.button.search\' | translate}}</md-button> <md-button class="md-raised" ng-click="clearCriteria()">{{\'main.button.clear\' | translate}}</md-button> </div> <div flex-xs="0" flex-gt-xs="0" flex-gt-sm="50"></div> </form> </fieldset> </div> <div ng-controller="SearchTimetableViewController"> <div ng-include="\'timetable/timetable.week.view.html\'"></div> </div> </div>'),a.put("vocationalCurriculum/dialog/occupation.add.dialog.html",'<md-dialog aria-label="occupation add dialog" flex="40" flex-xs="100"> <form name="dialogForm" ng-cloak> <md-toolbar> <div class="md-toolbar-tools"> <h2>{{formState.readOnly ? "occupation.viewAquiredOccupation" : "occupation.addAquiredOccupation" | translate}}</h2> <span flex></span> <md-button class="md-icon-button" ng-click="cancel()"> <md-icon md-font-set="material-icons">close</md-icon> </md-button> </div> </md-toolbar> <md-dialog-content> <span flex></span> <div class="ois-form-layout" layout="column" layout-margin ng-cloak> <div layout="row"> <md-input-container flex> <label>{{\'occupation.aquiredOccupation\' | translate}}</label> <hois-classifier-select ng-model="occupation" main-classifier-code="KUTSE" required ng-disabled="formState.readOnly || formState.limitedEditing"></hois-classifier-select> </md-input-container> </div> <div class="occupation-header align-center">{{\'occupation.specialities\' | translate}}</div> <div ng-repeat="occupationSpeciality in specialities" flex layout="row" class="nomargin"> <div flex="5">&nbsp;</div> <md-checkbox ng-model="selectedSpecialities[occupationSpeciality.code]" aria-label="{{currentLanguageNameField(occupationSpeciality)}}" ng-disabled="formState.readOnly || formState.limitedEditing"> {{currentLanguageNameField(occupationSpeciality)}} </md-checkbox> </div> <div class="occupation-header align-center">{{\'occupation.partOccupations\' | translate}}</div> <div ng-repeat="partOccupation in partOccupations" class="common-label" flex layout="row"> <div flex="5">&nbsp;</div> <div>{{currentLanguageNameField(partOccupation)}}</div> </div> <div>&nbsp;</div> <div layout="row"> <md-checkbox ng-model="occupationGrant" aria-label="occupationGrant" ng-disabled="formState.readOnly"> {{\'occupation.schoolHasOccupationGrant\' | translate}} </md-checkbox> </div> </div> </md-dialog-content> <span flex></span> <md-dialog-actions layout="row" layout-align="start center"> <md-button class="md-raised md-primary" ng-click="submit()" ng-if="!formState.readOnly">{{"main.button.save" | translate}}</md-button> <md-button class="md-raised" ng-click="cancel()">{{"main.button.close" | translate}}</md-button> </md-dialog-actions> </form> </md-dialog>'),a.put("vocationalCurriculum/dialog/partOccupation.add.dialog.html",'<md-dialog aria-label="occupation add dialog" flex="40" flex-xs="100"> <form name="dialogForm" ng-cloak> <md-toolbar> <div class="md-toolbar-tools"> <h2>{{formState.readOnly ? "occupation.viewAquiredPartOccupation" : "occupation.addAquiredPartOccupation" | translate}}</h2> <span flex></span> <md-button class="md-icon-button" ng-click="cancel()"> <md-icon md-font-set="material-icons">close</md-icon> </md-button> </div> </md-toolbar> <md-dialog-content> <span flex></span> <div class="ois-form-layout" layout="column" layout-margin ng-cloak> <div layout="column"> <md-input-container flex> <label>{{\'occupation.occupationStandard\' | translate}}</label> <!--<hois-classifier-select ng-model="occupation" main-classifier-code="KUTSE" required ng-disabled="formState.readOnly"></hois-classifier-select>--> <md-select ng-model="occupation" required ng-disabled="formState.readOnly"> <md-option ng-value="option" ng-repeat="option in occupations | orderBy: currentLanguageNameField()"> {{ currentLanguageNameField(option) }} </md-option> </md-select> </md-input-container> <md-input-container flex> <label>{{\'occupation.aquiredPartOccupation\' | translate}}</label> <!--<hois-classifier-select ng-model="partOccupationAquired" main-classifier-code="OSAKUTSE" watch-model="occupation"\r\n                        connect-main-classifier-code="KUTSE" search-from-connect required ng-disabled="formState.readOnly"></hois-classifier-select>--> <md-select ng-model="partOccupationAquired" required ng-disabled="formState.readOnly"> <md-option ng-value="option" ng-repeat="option in partOccupations | filter: filterPartOccupations | orderBy: currentLanguageNameField()"> {{ currentLanguageNameField(option) }} </md-option> </md-select> </md-input-container> </div> </div> </md-dialog-content> <span flex></span> <md-dialog-actions layout="row" layout-align="start center"> <md-button class="md-raised md-primary" ng-click="submit()" ng-if="!formState.readOnly">{{"main.button.save" | translate}}</md-button> <md-button class="md-raised" ng-click="cancel()">{{"main.button.close" | translate}}</md-button> </md-dialog-actions> </form> </md-dialog>'),a.put("vocationalCurriculum/dialog/school.curriculum.selection.dialog.html",'<md-dialog aria-label="state curriculum selection dialog"> <form name="dialogForm" ng-cloak> <md-toolbar> <div class="md-toolbar-tools"> <h2>{{"curriculum.selectSchoolCurriculum" | translate}}</h2> <span flex></span> <md-button class="md-icon-button" ng-click="cancel()"> <md-icon md-font-set="material-icons">close</md-icon> </md-button> </div> </md-toolbar> <md-dialog-content> <md-table-container flex> <table md-table md-row-select="true" ng-model="curriculumSelected" md-progress="tabledata.$promise"> <thead md-head md-order="criteria.order" md-on-reorder="loadData"> <tr md-row> <th md-column md-order-by="{{currentLanguageNameField()}}">{{\'curriculum.name\' | translate}}</th> <th md-column md-order-by="code">{{\'curriculum.code\' | translate}}</th> <th md-column md-order-by="merCode">{{\'curriculum.merCode\' | translate}}</th> <th md-column md-order-by="credits">{{\'stateCurriculum.credits\' | translate}}</th> </tr> </thead> <tbody md-body> <tr md-row md-select="curriculum" md-select-id="curriculum.id" ng-repeat="curriculum in tabledata.content" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell>{{currentLanguageNameField(curriculum)}}</td> <td md-cell>{{curriculum.code}}</td> <td md-cell>{{curriculum.merCode}}</td> <td md-cell>{{curriculum.credits}}</td> </tr> </tbody> </table> </md-table-container> <md-table-pagination md-limit="criteria.size" md-limit-options="[10, 20, 50]" md-page="criteria.page" md-total="{{tabledata.totalElements}}" md-on-paginate="loadData" md-label="{page: \'{{\'main.page\' | translate}}:\', rowsPerPage: \'{{\'main.rowPerPage\' | translate}}:\', of: \'{{\'main.of\' | translate}}\' }" md-page-select></md-table-pagination> </md-dialog-content> <md-dialog-actions layout="row" layout-align="start center"> <md-button class="md-primary md-raised" ng-disabled="curriculumSelected.length !== 1" ng-click="submit()">{{"main.button.choose" | translate}}</md-button> <md-button class="md-raised" ng-click="cancel()">{{"main.button.close" | translate}}</md-button> </md-dialog-actions> </form> </md-dialog>'),
a.put("vocationalCurriculum/dialog/state.curriculum.selection.dialog.html",'<md-dialog aria-label="state curriculum selection dialog" flex="40" flex-xs="100"> <form name="dialogForm" ng-cloak> <md-toolbar> <div class="md-toolbar-tools"> <h2>{{"stateCurriculum.select" | translate}}</h2> <span flex></span> <md-button class="md-icon-button" ng-click="cancel()"> <md-icon md-font-set="material-icons">close</md-icon> </md-button> </div> </md-toolbar> <md-dialog-content> <span flex></span> <div class="ois-form-layout" layout="column" layout-margin ng-cloak> <md-input-container flex> <label>{{\'stateCurriculum.name\' | translate}}</label> <md-select ng-model="stateCurriculumSelect" aria-label="state curriculum selection" ng-change="stateCurriculumSelected(stateCurriculumSelect)" required> <md-option ng-repeat="option in stateCurriculums" ng-value="option.id"> {{option[$root.currentLanguageNameField()]}} </md-option> </md-select> </md-input-container> <div ng-show="stateCurriculumSelect"> <md-input-container> <input style="display:none" readonly ng-model="occupationsAndPartOccupationsCount" name="occupationsAndPartOccupationsCount" type="number" min="1"> <div ng-messages="dialogForm.occupationsAndPartOccupationsCount.$error"> <div ng-if="dialogForm.$submitted" ng-message="min">{{\'curriculum.error.occupationNotSelected\' | translate}}</div> </div> </md-input-container> </div> <div style="height: 100%"> <div layout="column"> <div ng-repeat="item in stateCurriculumOccupations"> <md-checkbox ng-model="selectedStateCurriculumOccupations[item.occupation.code]" ng-change="occupationSelected(item.occupation.code)" aria-label="{{currentLanguageNameField(item.occupation)}}" ng-disabled="occupationsCount === 0 && partOccupationsCount !== 0"> {{currentLanguageNameField(item.occupation)}} </md-checkbox> <div layout="column"> <!--span ng-show="item.partOccupations.length!=0">\r\n                    {{\'occupation.partOccupations\' | translate}}\r\n                  </span--> <div ng-show="item.partOccupations.length!=0" class="occupation-header align-center">{{\'occupation.partOccupations\' | translate}}</div> <md-input-container style="height: 100%"> <div layout="column"> <div ng-repeat="partOccupation in item.partOccupations" flex layout="row"> <div flex="5">&nbsp;</div> <md-checkbox ng-model="selectedStateCurriculumPartOccupations[partOccupation.code]" aria-label="{{currentLanguageNameField(partOccupation)}}" ng-disabled="selectedStateCurriculumOccupations[item.occupation.code] || occupationsCount !== 0" ng-change="countOccupationsAndPartOccupationsSelected()"> {{currentLanguageNameField(partOccupation)}} </md-checkbox> </div> </div> </md-input-container> </div> <div layout="column"> <div ng-show="item.specialities.length!=0" class="occupation-header align-center">{{\'occupation.specialities\' | translate}}</div> <div ng-show="item.specialities.length!=0"> <input style="display:none" type="number" readonly name="{{\'selectedSpecialitiesCount_\'+item.occupation.code}}" ng-model="selectedSpecialitiesCount[item.occupation.code]" min="1"> <div class="invalid" ng-messages="dialogForm[\'selectedSpecialitiesCount_\'+item.occupation.code].$error"> <div ng-if="dialogForm.$submitted" ng-message="min">{{\'main.messages.error.atLeastOneMustBeSelected\' | translate}}</div> </div> </div> <md-input-container style="height: 100%"> <div layout="column"> <div ng-repeat="speciality in item.specialities" flex layout="row"> <div flex="5">&nbsp;</div> <md-checkbox ng-model="selectedStateCurriculumSpecialities[speciality.code]" ng-change="specialitySelected(item.occupation.code, speciality.code)" aria-label="{{currentLanguageNameField(speciality)}}" ng-disabled="!selectedStateCurriculumOccupations[item.occupation.code]"> {{currentLanguageNameField(speciality)}} </md-checkbox> </div> </div> </md-input-container> </div> </div> </div> </div> <!--        <div ng-repeat="stateCurriculumOccupation in stateCurriculumOccupations" flex>\r\n          <md-checkbox ng-model="selectedStateCurriculumOccupation[stateCurriculumOccupation.occupation.code]"\r\n            aria-label="{{stateCurriculumOccupation.occupation[$root.currentLanguageNameField()]}}">\r\n            {{stateCurriculumOccupation.occupation[$root.currentLanguageNameField()]}}\r\n          </md-checkbox>\r\n        </div>--> </div> </md-dialog-content> <md-dialog-actions layout="row" layout-align="start center"> <md-button class="md-primary md-raised" ng-click="submit()">{{"main.button.choose" | translate}}</md-button> <md-button class="md-raised" ng-click="cancel()">{{"main.button.close" | translate}}</md-button> </md-dialog-actions> </form> </md-dialog>'),a.put("vocationalCurriculum/implementationPlan/implementation.plan.html",'<div class="ois-form-layout-padding ois-form-layout" ng-cloak> <form name="vocationalCurriculumModuleImplementationPlanForm" layout="column"> <fieldset tabindex="1"> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'module.implementationPlan.subTitle\' | translate}}</legend> <div layout="column"> <md-input-container flex> <label>{{\'module.implementationPlan.codeOrName\' | translate}}</label> <input ng-model="implementationPlan.code" name="code" type="text" md-maxlength="255" required ng-readonly="formState.readOnly" unique="curriculumVersionCodeUniqueQuery" ng-model-options="{ debounce: 250 }"> <div ng-messages="vocationalCurriculumModuleImplementationPlanForm.code.$error"> <div ng-message="notUnique"> {{\'main.messages.error.mustBeUnique\' | translate}} </div> </div> </md-input-container> <div layout="row"> <md-input-container flex="45" flex-xs="100"> <label>{{\'module.implementationPlan.studyForm\' | translate}}</label> <hois-classifier-select ng-model="implementationPlan.curriculumStudyForm" show-only-values="curriculumStudyForms" model-value-attr="code" main-classifier-code="OPPEVORM" required ng-disabled="formState.readOnly"></hois-classifier-select> </md-input-container> <md-input-container flex="20" flex-offset="5"> <label>{{\'module.implementationPlan.admissionYear\' | translate}}</label> <md-select ng-model="implementationPlan.admissionYear" ng-disabled="formState.readOnly"> <md-option ng-repeat="year in ::admissionYears" ng-value="year" aria-label="{{year}}">{{year}}</md-option> </md-select> </md-input-container> <md-input-container flex="25" flex-offset="5"> <label>{{\'module.implementationPlan.type\' | translate}}</label> <hois-classifier-select ng-model="implementationPlan.type" model-value-attr="code" main-classifier-code="OPPEKAVA_VERSIOON_LIIK" required ng-disabled="formState.readOnly"></hois-classifier-select> </md-input-container> </div> <md-input-container flex> <label>{{\'module.implementationPlan.targetGroup\' | translate}}</label> <input ng-model="implementationPlan.targetGroup" type="text" md-maxlength="1000" required ng-readonly="formState.readOnly"> </md-input-container> <md-input-container flex> <label>{{\'module.implementationPlan.teachers\' | translate}}</label> <input ng-model="implementationPlan.teachers" type="text" md-maxlength="1000" required ng-readonly="formState.readOnly"> </md-input-container> <!-- Cannot use hois-school-department-select here as options may be not only from user\'s school,\r\n        but also must be limited to curriculum school departments --> <md-input-container flex> <label>{{\'module.implementationPlan.teachingDepartment\' | translate}}</label> <hois-select ng-model="implementationPlan.schoolDepartment" values="schoolDepartments" ng-disabled="formState.readOnly"></hois-select> </md-input-container> <md-input-container flex> <label>{{\'main.notes\' | translate}}</label> <textarea ng-model="implementationPlan.description" md-maxlength="20000" dfs max-rows="10" md-select-on-focus ng-readonly="formState.readOnly"></textarea> </md-input-container> <div layout="row" layout-xs="column"> <md-input-container flex-xs="100"> <div layout="row" layout-align="end" flex> <md-checkbox ng-model="implementationPlan.individual" aria-label="individual" ng-disabled="formState.readOnly">{{\'module.implementationPlan.individualCurriculum\' | translate}}</md-checkbox> </div> </md-input-container> </div> </div> </fieldset> <div>&nbsp;</div> <fieldset tabindex="2"> <legend md-colors="{color: \'primary-800\'}" class="md-title-small" ng-class="{invalid: vocationalCurriculumModuleImplementationPlanForm.$submitted && strictValidation() && !allModulesHaveData()}">{{\'module.modules\' | translate}}</legend> <div layout="row" flex class="secondary-table-header"> <div flex="50"> {{\'module.implementationPlan.moduleName\' | translate}} </div> <div flex="30"> &nbsp;&nbsp; {{\'module.implementationPlan.moduleCapacity\' | translate}} </div> <div flex="15"> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {{\'module.implementationPlan.moduleOK\' | translate}} </div> </div> <!--MODULES WITHOUT OCCUPATIONS--> <div class="occupation-header align-center">{{\'module.modulesWithoutPartOccupationOccuaptionSpecialization\' | translate}} </div> <div layout="column" ng-repeat="type in moduleTypes | filter: filterTypesWithoutEmptyModules | orderBy: \'nameEt\'" class="lowerBorder"> <div layout="row" flex="100" class="occupation-row align-center border-bottom odd"> <div flex="5">&nbsp;</div> <div flex="15">{{currentLanguageNameField(type)}}</div> <div layout="column" flex="75"> <div flex="100" ng-repeat="module in modules | filter: filterEmptyModulesByType(type.code) | orderBy: \'nameEt\'" layout="row" class="align-center"> <a flex="50" ng-click="openViewModuleDialog(module)" href="" ng-class="{invalid: vocationalCurriculumModuleImplementationPlanForm.$submitted && strictValidation() && !isModuleValid(module)}">{{currentLanguageNameField(module)}}</a> <span flex="15">{{module.credits}}&nbsp; EKAP</span> <div flex="30"> <a class="md-primary" ng-click="openAddModuleDataDialog(module)" ng-if="!formState.readOnly  && implementationPlan.id && implementationPlan.canChange"> {{isOccupationModuleDataSaved(module) ? \'module.implementationPlan.viewUpdateModuleData\' : \'module.implementationPlan.insertModuleData\' | translate}} </a> <a class="md-primary" ng-click="openAddModuleDataDialog(module)" ng-if="formState.readOnly && isOccupationModuleDataSaved(module) "> {{\'module.implementationPlan.viewModuleData\' | translate}} </a> </div> <div flex="15" ng-class="{invalid: vocationalCurriculumModuleImplementationPlanForm.$submitted && strictValidation() && !isModuleValid(module)}"> {{isOccupationModuleDataSaved(module) ? \'main.yes\' : \'main.no\' | translate}} </div> </div> </div> </div> </div> <!--KUTSETE/OSAKUTSETE MOODULID--> <div ng-repeat="occupation in occupations | orderBy: \'occupation.nameEt\'" layout="column"> <div class="occupation-header align-center"> <span ng-show="isOccupation">{{\'stateCurriculum.enter.occupation.occupation\' | translate}} {{$index + 1}}:&nbsp; {{currentLanguageNameField(occupation.occupation)}}</span> <span ng-show="!isOccupation">{{\'stateCurriculum.enter.occupation.partial\' | translate}} {{$index + 1}}:&nbsp; {{currentLanguageNameField(occupation.occupation)}}</span> </div> <div layout="column" ng-repeat="type in moduleTypes | filter: filterTypesWithoutModules(occupation.occupation.code, modules) | orderBy: \'nameEt\'" class="lowerBorder"> <div layout="row" flex="100" class="occupation-row align-center border-bottom odd"> <div flex="5">&nbsp;</div> <div flex="15">{{currentLanguageNameField(type)}}</div> <div layout="column" flex="75"> <div flex="100" ng-repeat="module in modules | filter: filterModulesByType(type.code, occupation.occupation.code) | orderBy: \'nameEt\'" layout="row" class="align-center"> <a flex="50" ng-click="openViewModuleDialog(module)" href="" ng-class="{invalid: vocationalCurriculumModuleImplementationPlanForm.$submitted && strictValidation() && !isModuleValid(module)}">{{currentLanguageNameField(module)}}</a> <span flex="15">{{module.credits}}&nbsp; EKAP</span> <div flex="30"> <a class="md-primary" ng-click="openAddModuleDataDialog(module)" ng-if="!formState.readOnly && implementationPlan.id && implementationPlan.canChange"> {{isOccupationModuleDataSaved(module) ? \'module.implementationPlan.viewUpdateModuleData\' : \'module.implementationPlan.insertModuleData\' | translate}} </a> <a class="md-primary" ng-click="openAddModuleDataDialog(module)" ng-if="formState.readOnly && isOccupationModuleDataSaved(module)"> {{\'module.implementationPlan.viewModuleData\' | translate}} </a> </div> <div flex="15" ng-class="{invalid: vocationalCurriculumModuleImplementationPlanForm.$submitted && strictValidation() && !isModuleValid(module)}"> {{isOccupationModuleDataSaved(module) ? \'main.yes\' : \'main.no\' | translate}} </div> </div> </div> </div> </div> <!--OSAKUTSETE MOODULID--> <div ng-repeat="partOccupation in occupation.partOccupations | orderBy" layout="column"> <div class="occupation-header2 align-center">{{\'stateCurriculum.enter.occupation.partial\' | translate}} {{$index + 1}}:&nbsp; <hois-classifier-value ng-model="partOccupation" main-classifier-code="OSAKUTSE"></hois-classifier-value> </div> <div layout="column" ng-repeat="type in moduleTypes | filter: filterTypesWithoutModules(partOccupation, modules) | orderBy: \'nameEt\'" class="lowerBorder"> <div layout="row" flex="100" class="occupation-row align-center border-bottom odd"> <div flex="5">&nbsp;</div> <div flex="15">{{currentLanguageNameField(type)}}</div> <div layout="column" flex="75"> <div flex="100" ng-repeat="module in modules | filter: filterModulesByType(type.code, partOccupation) | orderBy: \'nameEt\'" layout="row" class="align-center"> <a flex="50" ng-click="openViewModuleDialog(module)" href="" ng-class="{invalid: vocationalCurriculumModuleImplementationPlanForm.$submitted && strictValidation() && !isModuleValid(module)}">{{currentLanguageNameField(module)}}</a> <span flex="15">{{module.credits}}&nbsp; EKAP</span> <div flex="30"> <a class="md-primary" ng-click="openAddModuleDataDialog(module)" ng-if="!formState.readOnly && implementationPlan.id && implementationPlan.canChange"> {{isOccupationModuleDataSaved(module) ? \'module.implementationPlan.viewUpdateModuleData\' : \'module.implementationPlan.insertModuleData\' | translate}} </a> <a class="md-primary" ng-click="openAddModuleDataDialog(module)" ng-if="formState.readOnly && isOccupationModuleDataSaved(module) "> {{\'module.implementationPlan.viewModuleData\' | translate}} </a> </div> <div flex="15" ng-class="{invalid: vocationalCurriculumModuleImplementationPlanForm.$submitted && strictValidation() && !isModuleValid(module)}"> {{isOccupationModuleDataSaved(module) ? \'main.yes\' : \'main.no\' | translate}} </div> </div> </div> </div> </div> </div> <!--SPETSKUTSETE MOODULID--> <div ng-repeat="speciality in occupation.specialities | orderBy" layout="column"> <div class="occupation-header2 align-center">{{\'stateCurriculum.enter.occupation.specialty\' | translate}} {{$index + 1}}: &nbsp; <hois-classifier-value ng-model="speciality" main-classifier-code="SPETSKUTSE"></hois-classifier-value> </div> <div layout="column" ng-repeat="type in moduleTypes | filter: filterTypesWithoutModules(speciality, modules) | orderBy: \'nameEt\'" class="lowerBorder"> <div layout="row" flex="100" class="occupation-row align-center border-bottom odd"> <div flex="5">&nbsp;</div> <div flex="15">{{currentLanguageNameField(type)}}</div> <div layout="column" flex="75"> <div flex="100" ng-repeat="module in modules | filter: filterModulesByType(type.code, speciality) | orderBy: \'nameEt\'" layout="row" class="align-center"> <a flex="50" ng-click="openViewModuleDialog(module)" href="" ng-class="{invalid: vocationalCurriculumModuleImplementationPlanForm.$submitted && strictValidation() && !isModuleValid(module)}">{{currentLanguageNameField(module)}}</a> <span flex="15">{{module.credits}}&nbsp; EKAP</span> <div flex="30"> <a class="md-primary" ng-click="openAddModuleDataDialog(module)" ng-if="!formState.readOnly && implementationPlan.id && implementationPlan.canChange"> {{isOccupationModuleDataSaved(module) ? \'module.implementationPlan.viewUpdateModuleData\' : \'module.implementationPlan.insertModuleData\' | translate}} </a> <a class="md-primary" ng-click="openAddModuleDataDialog(module)" ng-if="formState.readOnly && isOccupationModuleDataSaved(module) "> {{\'module.implementationPlan.viewModuleData\' | translate}} </a> </div> <div flex="15" ng-class="{invalid: vocationalCurriculumModuleImplementationPlanForm.$submitted && strictValidation() && !isModuleValid(module)}"> {{isOccupationModuleDataSaved(module) ? \'main.yes\' : \'main.no\' | translate}} </div> </div> </div> </div> </div> </div> </div> </fieldset> <div>&nbsp;</div> <fieldset tabindex="10"> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'curriculum.yearCapacitiesTable\' | translate}}</legend> <table md-table class="secondary-table"> <thead md-head> <tr md-row> <th md-column ng-repeat="yc in implementationPlan.yearCapacities track by $index">{{$index+1}}.&nbsp;{{\'module.studyYearLowercase\' | translate}}</th> </tr> </thead> <tbody md-body> <tr md-row> <td md-cell ng-repeat="yc in implementationPlan.yearCapacities track by $index">{{yc}}</td> </tr> </tbody> </table> </fieldset> <div>&nbsp;</div> <fieldset tabindex="11"> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'curriculum.implementationPlanStatus\' | translate}}</legend> <div layout="row" flex="100"> <md-input-container flex="30" flex-sm="100" flex-xs="100"> <label>{{\'main.validFrom\' | translate}}</label> <md-datepicker ng-model="implementationPlan.validFrom" md-open-on-focus required ng-disabled="formState.readOnly"></md-datepicker> </md-input-container> <md-input-container flex="20" flex-sm="100" flex-xs="100" flex-offset-xs="0" flex-offset-sm="0" flex-offset="4"> <label>{{\'main.validTo\' | translate}}</label> <md-datepicker ng-model="implementationPlan.validThru" md-min-date="implementationPlan.validFrom" md-open-on-focus ng-disabled="formState.readOnly"></md-datepicker> </md-input-container> </div> <div layout="row" class="top-margin form-readonly"> <md-input-container flex="30" flex-sm="100"> <label>{{\'main.status\' | translate}}</label> <hois-classifier-value ng-model="implementationPlan.status" main-classifier-code="OPPEKAVA_VERSIOON_STAATUS"></hois-classifier-value> </md-input-container> </div> </fieldset> <hois-created-modified object="implementationPlan"></hois-created-modified> </form> <div layout="row"> <div ng-show="implementationPlan.status === VERSION_STATUS.S"> <div ng-show="!implementationPlan.id"> <md-button class="md-raised md-primary" ng-click="save()">{{\'main.button.save\' | translate}}</md-button> </div> <div ng-show="!formState.readOnly && implementationPlan.id"> <md-button class="md-raised md-primary" ng-click="save()" ng-if="implementationPlan.canChange">{{\'main.button.save\' | translate}}</md-button> <md-button ng-click="saveAndConfirm()" class="md-raised" ng-if="implementationPlan.canChange && implementationPlan.canConfirm">{{\'curriculum.statuschange.implementationPlan.button.verify\' | translate}}</md-button> <md-button ng-click="setStatusClosed()" class="md-raised" ng-if="implementationPlan.canChange && implementationPlan.canClose">{{\'curriculum.statuschange.implementationPlan.button.close\' | translate}}</md-button> <md-button class="md-raised md-default" ng-if="implementationPlan.canChange" ng-click="copy()">{{\'main.button.copy\' | translate}}</md-button> <md-button class="md-raised md-default" ng-click="delete()" ng-if="implementationPlan.canDelete">{{\'main.button.delete\' | translate}}</md-button> </div> <div ng-show="formState.readOnly"> <md-button class="md-raised md-primary" ng-click="goToEditForm()" ng-if="implementationPlan.canChange">{{\'main.button.change\' | translate}}</md-button> <md-button ng-click="confirm()" class="md-raised" ng-if="implementationPlan.canConfirm">{{\'curriculum.statuschange.implementationPlan.button.verify\' | translate}}</md-button> <md-button ng-click="setStatusClosed()" class="md-raised" ng-if="implementationPlan.canClose">{{\'curriculum.statuschange.implementationPlan.button.close\' | translate}}</md-button> <md-button class="md-raised md-default" ng-click="copy()" ng-if="implementationPlan.canChange">{{\'main.button.copy\' | translate}}</md-button> </div> </div> <div ng-show="implementationPlan.status === VERSION_STATUS.K"> <div ng-show="!formState.readOnly"> <md-button class="md-raised md-primary" ng-click="save()" ng-if="implementationPlan.canChange">{{\'main.button.save\' | translate}}</md-button> </div> <div ng-show="formState.readOnly"> <md-button class="md-raised md-primary" ng-click="goToEditForm()" ng-if="implementationPlan.canChange">{{\'main.button.change\' | translate}}</md-button> <md-button ng-click="setStatusClosed()" class="md-raised" ng-if="implementationPlan.canClose">{{\'curriculum.statuschange.implementationPlan.button.close\' | translate}}</md-button> <md-button class="md-raised md-default" ng-click="copy()" ng-if="implementationPlan.canChange">{{\'main.button.copy\' | translate}}</md-button> </div> </div> <div ng-show="implementationPlan.status === VERSION_STATUS.C"> <md-button class="md-raised md-default" ng-click="copy()" ng-if="implementationPlan.canChange">{{\'main.button.copy\' | translate}}</md-button> </div> <md-button class="md-raised md-default" ng-click="back(\'#/vocationalCurriculum/\' + curriculumId + \'/view\', vocationalCurriculumModuleImplementationPlanForm)">{{\'main.button.back\' | translate}}</md-button> </div> </div> <style>.lowerBorder {\r\n    border-bottom: solid 1px #E0E0E0;\r\n  }</style>'),a.put("vocationalCurriculum/implementationPlan/implementation.plan.view.html",'<div class="ois-form-layout-padding ois-form-layout" ng-cloak> <form name="vocationalCurriculumModuleImplementationPlanForm" layout="column"> <fieldset tabindex="1"> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'module.implementationPlan.subTitle\' | translate}}</legend> <div layout="column"> <md-input-container flex> <label>{{\'module.implementationPlan.codeOrName\' | translate}}</label> <input ng-model="implementationPlan.code" name="code" type="text" readonly> </md-input-container> <div layout="row"> <md-input-container flex="45" flex-xs="100"> <label>{{\'module.implementationPlan.studyForm\' | translate}}</label> <hois-classifier-select ng-model="implementationPlan.curriculumStudyForm" show-only-values="curriculumStudyForms" model-value-attr="code" main-classifier-code="OPPEVORM" disabled></hois-classifier-select> </md-input-container> <md-input-container flex="20" flex-offset="5"> <label>{{\'module.implementationPlan.admissionYear\' | translate}}</label> <md-select ng-model="implementationPlan.admissionYear" disabled> <md-option ng-repeat="year in ::admissionYears" ng-value="year" aria-label="{{year}}">{{year}}</md-option> </md-select> </md-input-container> <md-input-container flex="25" flex-offset="5"> <label>{{\'module.implementationPlan.type\' | translate}}</label> <hois-classifier-select ng-model="implementationPlan.type" model-value-attr="code" main-classifier-code="OPPEKAVA_VERSIOON_LIIK" disabled></hois-classifier-select> </md-input-container> </div> <md-input-container flex> <label>{{\'module.implementationPlan.targetGroup\' | translate}}</label> <input ng-model="implementationPlan.targetGroup" type="text" readonly> </md-input-container> <md-input-container flex> <label>{{\'module.implementationPlan.teachers\' | translate}}</label> <input ng-model="implementationPlan.teachers" type="text" readonly> </md-input-container> <!-- Cannot use hois-school-department-select here as options may be not only from user\'s school,\r\n        but also must be limited to curriculum school departments --> <md-input-container flex> <label>{{\'module.implementationPlan.teachingDepartment\' | translate}}</label> <hois-select ng-model="implementationPlan.schoolDepartment" values="schoolDepartments" disabled></hois-select> </md-input-container> <md-input-container flex> <label>{{\'main.notes\' | translate}}</label> <textarea ng-model="implementationPlan.description" max-rows="10" md-select-on-focus readonly></textarea> </md-input-container> <md-input-container flex ng-if="implementationPlan.status === VERSION_STATUS.K"> <label>{{\'public.url\' | translate}}</label> <input ng-model="publicUrl" type="text" readonly> </md-input-container> <div layout="row" layout-xs="column"> <md-input-container flex-xs="100"> <div layout="row" layout-align="end" flex> <md-checkbox ng-model="implementationPlan.individual" aria-label="individual" disabled>{{\'module.implementationPlan.individualCurriculum\' | translate}}</md-checkbox> </div> </md-input-container> </div> </div> </fieldset> <div>&nbsp;</div> <fieldset tabindex="2"> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'module.modules\' | translate}}</legend> <div layout="row" flex class="secondary-table-header"> <div flex="50"> {{\'module.implementationPlan.moduleName\' | translate}} </div> <div flex="30"> &nbsp;&nbsp; {{\'module.implementationPlan.moduleCapacity\' | translate}} </div> <div flex="15"> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {{\'module.implementationPlan.moduleOK\' | translate}} </div> </div> <!--MODULES WITHOUT OCCUPATIONS--> <div class="occupation-header align-center">{{\'module.modulesWithoutPartOccupationOccuaptionSpecialization\' | translate}} </div> <div layout="column" ng-repeat="type in moduleTypes | filter: filterTypesWithoutEmptyModules | orderBy: \'nameEt\'" class="lowerBorder"> <div layout="row" flex="100" class="occupation-row align-center border-bottom odd"> <div flex="5">&nbsp;</div> <div flex="15">{{currentLanguageNameField(type)}}</div> <div layout="column" flex="75"> <div flex="100" ng-repeat="module in modules | filter: filterEmptyModulesByType(type.code) | orderBy: \'nameEt\'" layout="row" class="align-center"> <a flex="50" ng-click="openViewModuleDialog(module)" href="">{{currentLanguageNameField(module)}}</a> <span flex="15">{{module.credits}}&nbsp; EKAP</span> <div flex="30"> <a class="md-primary" ng-click="openAddModuleDataDialog(module)" ng-if="isOccupationModuleDataSaved(module) "> {{\'module.implementationPlan.viewModuleData\' | translate}} </a> </div> <div flex="15"> {{isOccupationModuleDataSaved(module) ? \'main.yes\' : \'main.no\' | translate}} </div> </div> </div> </div> </div> <!--KUTSETE/OSAKUTSETE MOODULID--> <div ng-repeat="occupation in occupations | orderBy: \'occupation.nameEt\'" layout="column"> <div class="occupation-header align-center"> <span ng-show="isOccupation">{{\'stateCurriculum.enter.occupation.occupation\' | translate}} {{$index + 1}}:&nbsp; {{currentLanguageNameField(occupation.occupation)}}</span> <span ng-show="!isOccupation">{{\'stateCurriculum.enter.occupation.partial\' | translate}} {{$index + 1}}:&nbsp; {{currentLanguageNameField(occupation.occupation)}}</span> </div> <div layout="column" ng-repeat="type in moduleTypes | filter: filterTypesWithoutModules(occupation.occupation.code, modules) | orderBy: \'nameEt\'" class="lowerBorder"> <div layout="row" flex="100" class="occupation-row align-center border-bottom odd"> <div flex="5">&nbsp;</div> <div flex="15">{{currentLanguageNameField(type)}}</div> <div layout="column" flex="75"> <div flex="100" ng-repeat="module in modules | filter: filterModulesByType(type.code, occupation.occupation.code) | orderBy: \'nameEt\'" layout="row" class="align-center"> <a flex="50" ng-click="openViewModuleDialog(module)" href="">{{currentLanguageNameField(module)}}</a> <span flex="15">{{module.credits}}&nbsp; EKAP</span> <div flex="30"> <a class="md-primary" ng-click="openAddModuleDataDialog(module)" ng-if="isOccupationModuleDataSaved(module)"> {{\'module.implementationPlan.viewModuleData\' | translate}} </a> </div> <div flex="15"> {{isOccupationModuleDataSaved(module) ? \'main.yes\' : \'main.no\' | translate}} </div> </div> </div> </div> </div> <!--OSAKUTSETE MOODULID--> <div ng-repeat="partOccupation in occupation.partOccupations | orderBy" layout="column"> <div class="occupation-header2 align-center">{{\'stateCurriculum.enter.occupation.partial\' | translate}} {{$index + 1}}:&nbsp; <hois-classifier-value ng-model="partOccupation" main-classifier-code="OSAKUTSE"></hois-classifier-value> </div> <div layout="column" ng-repeat="type in moduleTypes | filter: filterTypesWithoutModules(partOccupation, modules) | orderBy: \'nameEt\'" class="lowerBorder"> <div layout="row" flex="100" class="occupation-row align-center border-bottom odd"> <div flex="5">&nbsp;</div> <div flex="15">{{currentLanguageNameField(type)}}</div> <div layout="column" flex="75"> <div flex="100" ng-repeat="module in modules | filter: filterModulesByType(type.code, partOccupation) | orderBy: \'nameEt\'" layout="row" class="align-center"> <a flex="50" ng-click="openViewModuleDialog(module)" href="">{{currentLanguageNameField(module)}}</a> <span flex="15">{{module.credits}}&nbsp; EKAP</span> <div flex="30"> <a class="md-primary" ng-click="openAddModuleDataDialog(module)" ng-if="isOccupationModuleDataSaved(module) "> {{\'module.implementationPlan.viewModuleData\' | translate}} </a> </div> <div flex="15"> {{isOccupationModuleDataSaved(module) ? \'main.yes\' : \'main.no\' | translate}} </div> </div> </div> </div> </div> </div> <!--SPETSKUTSETE MOODULID--> <div ng-repeat="speciality in occupation.specialities | orderBy" layout="column"> <div class="occupation-header2 align-center">{{\'stateCurriculum.enter.occupation.specialty\' | translate}} {{$index + 1}}: &nbsp; <hois-classifier-value ng-model="speciality" main-classifier-code="SPETSKUTSE"></hois-classifier-value> </div> <div layout="column" ng-repeat="type in moduleTypes | filter: filterTypesWithoutModules(speciality, modules) | orderBy: \'nameEt\'" class="lowerBorder"> <div layout="row" flex="100" class="occupation-row align-center border-bottom odd"> <div flex="5">&nbsp;</div> <div flex="15">{{currentLanguageNameField(type)}}</div> <div layout="column" flex="75"> <div flex="100" ng-repeat="module in modules | filter: filterModulesByType(type.code, speciality) | orderBy: \'nameEt\'" layout="row" class="align-center"> <a flex="50" ng-click="openViewModuleDialog(module)" href="">{{currentLanguageNameField(module)}}</a> <span flex="15">{{module.credits}}&nbsp; EKAP</span> <div flex="30"> <a class="md-primary" ng-click="openAddModuleDataDialog(module)" ng-if="isOccupationModuleDataSaved(module) "> {{\'module.implementationPlan.viewModuleData\' | translate}} </a> </div> <div flex="15"> {{isOccupationModuleDataSaved(module) ? \'main.yes\' : \'main.no\' | translate}} </div> </div> </div> </div> </div> </div> </div> </fieldset> <div>&nbsp;</div> <fieldset tabindex="10"> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'curriculum.yearCapacitiesTable\' | translate}}</legend> <table md-table class="secondary-table"> <thead md-head> <tr md-row> <th md-column ng-repeat="yc in implementationPlan.yearCapacities track by $index">{{$index+1}}.&nbsp;{{\'module.studyYearLowercase\' | translate}}</th> </tr> </thead> <tbody md-body> <tr md-row> <td md-cell ng-repeat="yc in implementationPlan.yearCapacities track by $index">{{yc}}</td> </tr> </tbody> </table> </fieldset> <div>&nbsp;</div> <fieldset tabindex="11"> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'curriculum.implementationPlanStatus\' | translate}}</legend> <div layout="row" flex="100"> <md-input-container flex="30" flex-sm="100" flex-xs="100"> <label>{{\'main.validFrom\' | translate}}</label> <md-datepicker ng-model="implementationPlan.validFrom" md-open-on-focus disabled></md-datepicker> </md-input-container> <md-input-container flex="20" flex-sm="100" flex-xs="100" flex-offset-xs="0" flex-offset-sm="0" flex-offset="4"> <label>{{\'main.validTo\' | translate}}</label> <md-datepicker ng-model="implementationPlan.validThru" md-min-date="implementationPlan.validFrom" md-open-on-focus disabled></md-datepicker> </md-input-container> </div> <div layout="row" class="top-margin form-readonly"> <md-input-container flex="30" flex-sm="100"> <label>{{\'main.status\' | translate}}</label> <hois-classifier-value ng-model="implementationPlan.status" main-classifier-code="OPPEKAVA_VERSIOON_STAATUS"></hois-classifier-value> </md-input-container> </div> </fieldset> <hois-created-modified object="implementationPlan"></hois-created-modified> </form> <div layout="row"> <div ng-show="implementationPlan.status === VERSION_STATUS.S"> <md-button class="md-raised md-primary" ng-click="goToEditForm()" ng-if="implementationPlan.canChange">{{\'main.button.change\' | translate}}</md-button> <md-button ng-click="confirm()" class="md-raised" ng-if="implementationPlan.canConfirm">{{\'curriculum.statuschange.implementationPlan.button.verify\' | translate}}</md-button> <md-button ng-click="setStatusClosed()" class="md-raised" ng-if="implementationPlan.canClose">{{\'curriculum.statuschange.implementationPlan.button.close\' | translate}}</md-button> <md-button class="md-raised md-default" ng-click="copy()" ng-if="implementationPlan.canChange">{{\'main.button.copy\' | translate}}</md-button> </div> <div ng-show="implementationPlan.status === VERSION_STATUS.K"> <md-button class="md-raised md-primary" ng-click="goToEditForm()" ng-if="implementationPlan.canChange">{{\'main.button.change\' | translate}}</md-button> <md-button ng-click="setStatusClosed()" class="md-raised" ng-if="implementationPlan.canClose">{{\'curriculum.statuschange.implementationPlan.button.close\' | translate}}</md-button> <md-button class="md-raised md-default" ng-click="copy()" ng-if="implementationPlan.canChange">{{\'main.button.copy\' | translate}}</md-button> </div> <div ng-show="implementationPlan.status === VERSION_STATUS.C"> <md-button class="md-raised md-default" ng-click="copy()" ng-if="implementationPlan.canChange">{{\'main.button.copy\' | translate}}</md-button> </div> <md-button class="md-raised md-default" ng-click="back(\'#/vocationalCurriculum/\' + curriculumId + \'/view\')">{{\'main.button.back\' | translate}}</md-button> </div> </div> <style>.lowerBorder {\r\n    border-bottom: solid 1px #E0E0E0;\r\n  }</style>'),
a.put("vocationalCurriculum/implementationPlan/module.view.dialog.html",'<md-dialog aria-label="module add dialog" flex="60" flex-xs="100" class="form-readonly"> <form ng-cloak name="dialogForm"> <md-toolbar> <div class="md-toolbar-tools"> <h2 flex>{{"module.viewToughtModule" | translate}}</h2> <md-button class="md-icon-button" ng-click="cancel()"> <md-icon md-font-set="material-icons">close</md-icon> </md-button> </div> </md-toolbar> <md-dialog-content> <span flex></span> <div class="ois-form-layout" layout="column" layout-margin ng-cloak> <fieldset tabindex="1" ng-if="module.canHaveOccupations"> <legend md-colors="{color: \'primary-800\'}" class="md-title-small"> {{module.occupation ? \'module.occupationPartOccupationSpecialize\' : \'module.partOccupation\' | translate}} </legend> <div layout="column"> <div ng-repeat="speciality in item.specialities" layout="row"> <div flex="5">&nbsp;</div> <md-checkbox ng-model="specialitiesSelected[speciality.code]" aria-label="{{currentLanguageNameField(speciality)}}" disabled> {{currentLanguageNameField(speciality)}} </md-checkbox> </div> </div> <div layout="column"> <div ng-repeat="item in module.curriculumOccupations | orderBy: \'occupation\'"> <md-checkbox ng-model="occupationsSelected[item.occupation]" disabled> <hois-classifier-value ng-model="item.occupation" main-classifier-codes="KUTSE,OSAKUTSE" class="inline"></hois-classifier-value> </md-checkbox> <div layout="column"> <div ng-repeat="partOccupation in item.partOccupations | orderBy" flex layout="row"> <div flex="5">&nbsp;</div> <md-checkbox ng-model="occupationsSelected[partOccupation]" disabled> <hois-classifier-value ng-model="partOccupation" main-classifier-code="OSAKUTSE" class="inline"></hois-classifier-value> </md-checkbox> </div> </div> <div layout="column"> <div ng-repeat="speciality in item.specialities | orderBy" layout="row"> <div flex="5">&nbsp;</div> <md-checkbox ng-model="specialitiesSelected[speciality]" disabled> <hois-classifier-value ng-model="speciality" main-classifier-code="SPETSKUTSE" class="inline"></hois-classifier-value> </md-checkbox> </div> </div> </div> </div> </fieldset> <div>&nbsp;</div> <div layout="row" flex> <md-input-container flex="45"> <label>{{\'module.type\' | translate}}</label> <hois-classifier-value name="module" ng-model="module.module" main-classifier-code="KUTSEMOODUL"></hois-classifier-value> </md-input-container> <md-input-container flex="10" flex-offset="5"> <label>{{\'module.credits\' | translate}}</label> <hois-value value="module.credits.toString()"></hois-value> </md-input-container> </div> <md-input-container flex> <label>{{\'module.nameEt\' | translate}}</label> <hois-value value="module.nameEt"></hois-value> </md-input-container> <md-input-container flex> <label>{{\'module.nameEn\' | translate}}</label> <hois-value value="module.nameEn"></hois-value> </md-input-container> <md-input-container flex> <label>{{\'module.objectivesEt\' | translate}}</label> <hois-value value="module.objectivesEt" class="scrollable"></hois-value> </md-input-container> <md-input-container flex> <label>{{\'module.objectivesEn\' | translate}}</label> <hois-value value="module.objectivesEt" class="scrollable"></hois-value> </md-input-container> <fieldset tabindex="1"> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'module.studyOutcome\' | translate}}</legend> <div layout="column"> <div ng-repeat="item in module.outcomes | orderBy: \'orderNr\'" class="occupation-row align-center" layout="row" flex> <div flex="45"> <p class="scrollable">{{item.outcomeEt}}</p> </div> <div flex="50" flex-offset="5"> <p class="scrollable">{{item.outcomeEn}}</p> </div> </div> </div> </fieldset> <div>&nbsp;</div> <md-input-container flex> <label>{{\'stateCurriculum.enter.module.criteriaEt\' | translate}}</label> <hois-value value="module.assessmentsEt" class="scrollable"></hois-value> </md-input-container> <md-input-container flex> <label>{{\'stateCurriculum.enter.module.criteriaEn\' | translate}}</label> <hois-value value="module.assessmentsEn" class="scrollable"></hois-value> </md-input-container> <md-input-container flex> <label>{{\'module.competencesAquired\' | translate}}</label> <hois-classifier-value ng-model="module.competences" main-classifier-code="KOMPETENTS"></hois-classifier-value> </md-input-container> <md-input-container flex> <md-checkbox ng-model="module.practice" disabled>{{\'module.practice\' | translate}}</md-checkbox> </md-input-container> <md-input-container> <md-checkbox ng-model="module.isAdditional" aria-label="{{\'stateCurriculum.enter.module.isAdditional\' | translate}}" disabled> {{\'stateCurriculum.enter.module.isAdditional\' | translate}} </md-checkbox> </md-input-container> </div> </md-dialog-content> <span flex></span> <md-dialog-actions layout="row" layout-align="start center"> <md-button class="md-raised" ng-click="cancel()">{{"main.button.close" | translate}}</md-button> </md-dialog-actions> </form> </md-dialog>'),a.put("vocationalCurriculum/implementationPlan/occupation.module.edit.html",'<div class="ois-form-layout-padding nomargin"> <form name="occupationModuleForm" ng-cloak> <div> <h2 translate="module.occupationalModuleDataInsertion" translate-values="{{curriculumModule}}"></h2> </div> <div layout="column"> <div flex> <fieldset tabindex="1"> <legend md-colors="{color: \'default-primary-800\'}" class="md-title-small">{{\'module.capacityDistribution\' | translate}}</legend> <div layout="row" style="padding-bottom:1em" flex class="secondary-table-header"> <div flex="30">&nbsp;</div> <div flex="30">{{\'module.capacity\' | translate}}</div> <div flex="40" layout="row">{{\'module.contactStudy\' | translate}}</div> </div> <div ng-repeat="item in occupationModule.capacities | orderBy: \'nameEt\' track by item.capacityType" layout="row" class="secondary-table-row"> <div flex="30" class="occupation-module-capacity">{{currentLanguageNameField(item)}}</div> <div flex="30"> <md-input-container flex> <input ng-model="item.hours" type="number" min="0" max="999" pattern="^\\d+$" aria-label="capacity hours" class="small-input" ng-readonly="hasThemes()" ng-required="item.contact"> </md-input-container> </div> <div flex="40" layout="row"> <md-checkbox ng-model="item.contact" aria-label="capacity contact" ng-disabled="hasThemes()" class="occupation-module-capacity-contact"></md-checkbox> </div> </div> </fieldset> </div> <div>&nbsp;</div> <md-input-container flex> <label>{{\'module.requirements\' | translate}}</label> <textarea ng-model="occupationModule.requirementsEt" md-maxlength="20000" max-rows="10" md-select-on-focus required></textarea> </md-input-container> <md-input-container flex> <label>{{\'module.assessments\' | translate}}</label> <textarea ng-model="occupationModule.assessmentsEt" md-maxlength="20000" max-rows="10" md-select-on-focus required></textarea> </md-input-container> <md-input-container flex> <label>{{\'module.learningMethods\' | translate}}</label> <textarea ng-model="occupationModule.learningMethodsEt" md-maxlength="20000" max-rows="10" md-select-on-focus></textarea> </md-input-container> <md-input-container flex> <label>{{\'module.assessmentMethodsAndTasks\' | translate}}</label> <textarea ng-model="occupationModule.assessmentMethodsEt" md-maxlength="20000" max-rows="10" md-select-on-focus></textarea> </md-input-container> <md-input-container flex> <label>{{\'module.independentStudyDescription\' | translate}}</label> <textarea ng-model="occupationModule.independentStudyEt" md-maxlength="20000" max-rows="2" md-select-on-focus></textarea> </md-input-container> <md-input-container flex> <label>{{\'module.studyMaterials\' | translate}}</label> <textarea ng-model="occupationModule.studyMaterials" md-maxlength="20000" max-rows="2" md-select-on-focus></textarea> </md-input-container> <div>&nbsp;</div> <div flex> <fieldset tabindex="2" layout="column"> <legend md-colors="{color: \'default-primary-800\'}" class="md-title-small">{{\'module.gradeFormation\' | translate}}</legend> <div flex layout="row"> <span flex="30" class="common-label">{{\'module.assessmentType\' | translate}}</span> <hois-classifier-radio layout="row" ng-model="occupationModule.assessment" model-value-attr="code" main-classifier-code="KUTSEHINDAMISVIIS" required class="md-primary"></hois-classifier-radio> </div> <div>&nbsp;</div> <md-input-container flex> <label>{{\'module.totalGradeDescription\' | translate}}</label> <textarea ng-model="occupationModule.totalGradeDescription" md-maxlength="20000" max-rows="2" md-select-on-focus required></textarea> </md-input-container> <div>&nbsp;</div> <div ng-show="occupationModule.assessment === \'KUTSEHINDAMISVIIS_E\'" layout="column"> <md-input-container flex> <label>{{\'module.grade3Description\' | translate}}</label> <textarea ng-model="occupationModule.grade3Description" md-maxlength="20000" max-rows="2" md-select-on-focus ng-required="occupationModule.assessment === \'KUTSEHINDAMISVIIS_E\'"></textarea> </md-input-container> <md-input-container flex> <label>{{\'module.grade4Description\' | translate}}</label> <textarea ng-model="occupationModule.grade4Description" md-maxlength="20000" max-rows="2" md-select-on-focus ng-required="occupationModule.assessment === \'KUTSEHINDAMISVIIS_E\'"></textarea> </md-input-container> <md-input-container flex> <label>{{\'module.grade5Description\' | translate}}</label> <textarea ng-model="occupationModule.grade5Description" md-maxlength="20000" max-rows="2" md-select-on-focus ng-required="occupationModule.assessment === \'KUTSEHINDAMISVIIS_E\'"></textarea> </md-input-container> </div> <div ng-show="occupationModule.assessment === \'KUTSEHINDAMISVIIS_M\'" layout="column" flex> <md-input-container flex> <label>{{\'module.gradeADescription\' | translate}}</label> <textarea ng-model="occupationModule.passDescription" md-maxlength="20000" max-rows="10" md-select-on-focus ng-required="occupationModule.assessment === \'KUTSEHINDAMISVIIS_M\'"></textarea> </md-input-container> </div> </fieldset> </div> <div>&nbsp;</div> <div flex> <fieldset tabindex="3"> <legend md-colors="{color: \'default-primary-800\'}" class="md-title-small">{{\'module.themes\' | translate}}</legend> <div layout="column"> <div flex="10"> <md-button class="md-raised" ng-click="openAddThemeDialog()" ng-if="occupationModule.id">{{\'main.button.add\' | translate}}</md-button> </div> <div flex> <table md-table class="secondary-table"> <thead md-head> <tr md-row> <th md-column>{{\'module.themeName\' | translate}}</th> <th md-column>{{\'module.capacityEkapPerHour\' | translate}}</th> <th md-column>{{\'module.subthemes\' | translate}}</th> <th md-column>{{\'module.studyYear\' | translate}}</th> <th md-column></th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="theme in occupationModule.themes | orderBy: currentLanguageNameField()"> <td md-cell> <a class="md-primary one-row" ng-click="openAddThemeDialog(theme)">{{currentLanguageNameField(theme)}}</a> </td> <td md-cell> {{theme.credits}}/{{theme.hours}} </td> <td md-cell> <p class="scrollable">{{theme.subthemes}}</p> </td> <td md-cell> {{theme.studyYearNumber}} </td> <td md-cell> <a class="remove" ng-click="deleteTheme(theme)"> &times; </a> </td> </tr> </tbody> </table> </div> </div> </fieldset> </div> <div flex>&nbsp;</div> <div flex> <fieldset tabindex="4" layout="column"> <legend md-colors="{color: \'default-primary-800\'}" class="md-title-small">{{\'module.proportionPerStudyYear\' | translate}}</legend> <div layout="row"> <md-input-container flex ng-repeat="yc in studyYears track by $index"> <label>{{$index+1}}.&nbsp;{{\'module.studyYearLowercase\' | translate}}</label> <input ng-disabled="occupationModule.themes.length > 0" ng-model="occupationModule.yearCapacities[$index].credits" type="number" min="0" max="999" pattern="^\\d+(\\.\\d{1})?$" aria-label="year capacity credits" name="yearCapacities{{$index}}" required> <div ng-messages="dialogForm[\'yearCapacities\'+$index].$error" ng-show="dialogForm[\'yearCapacities\'+$index].$dirty"> <div ng-message="min"> {{\'main.messages.error.positive\' | translate}} </div> <div ng-message="max"> {{\'curriculum.error.max999\' | translate}} </div> <div ng-message="pattern"> {{\'stateCurriculum.error.decimalPresision\' | translate}} </div> </div> </md-input-container> </div> </fieldset> </div> <br> <md-input-container flex> <label>{{\'module.supervisor\' | translate}}</label> <input ng-model="occupationModule.supervisor" type="text" md-maxlength="100" required> </md-input-container> </div> <span flex></span> <md-button class="md-raised md-primary" ng-click="save()">{{"main.button.save" | translate}}</md-button> <md-button class="md-raised" ng-click="back(backToEditForm, occupationModuleForm)">{{"main.button.back" | translate}}</md-button> </form> </div>'),a.put("vocationalCurriculum/implementationPlan/occupation.module.theme.edit.dialog.html",'<md-dialog aria-label="vocational curriculum implementation plan module theme add dialog" flex="60" flex-xs="100"> <form name="dialogForm" ng-cloak> <md-toolbar> <div class="md-toolbar-tools"> <h2>{{"module.addingTheme" | translate}}</h2> <span flex></span> <md-button class="md-icon-button" ng-click="cancel()"> <md-icon md-font-set="material-icons">close</md-icon> </md-button> </div> </md-toolbar> <md-dialog-content> <div class="ois-form-layout-padding nomargin" layout="column" ng-cloak> <md-input-container> <label>{{\'theme.name\' | translate}}</label> <input ng-model="occupationModuleTheme.nameEt" type="text" required> </md-input-container> <div layout="row"> <md-input-container flex="30"> <label>{{\'theme.capacityAndUnit\' | translate}}</label> </md-input-container> <md-input-container flex="10"> <label>EKAP</label> <input ng-model="occupationModuleTheme.credits" name="credits" type="number" min="0" max="999" pattern="^\\d+(\\.\\d{1})?$" ng-change="setDefaultHours()" required> <div ng-messages="dialogForm.credits.$error" ng-show="dialogForm.credits.$dirty"> <div ng-message="min"> {{\'main.messages.error.positive\' | translate}} </div> <div ng-message="max"> {{\'curriculum.error.max999\' | translate}} </div> <div ng-message="pattern"> {{\'stateCurriculum.error.decimalPresision\' | translate}} </div> </div> </md-input-container> <md-input-container flex="10"> <label>{{\'main.hour\' | translate}}</label> <input ng-model="occupationModuleTheme.hours" name="hours" type="number" min="0" max="999" pattern="^\\d+$" required ng-change="setDefaultCredits()"> <div ng-messages="dialogForm.hours.$error" ng-show="dialogForm.hours.$dirty"> <div ng-message="min"> {{\'main.messages.error.positive\' | translate}} </div> <div ng-message="max"> {{\'curriculum.error.max999\' | translate}} </div> <div ng-message="pattern"> {{\'stateCurriculum.enter.credits.integer\' | translate}} </div> </div> </md-input-container> <md-input-container flex="30"> <label>{{\'theme.proportionInModule\' | translate}}</label> <input ng-model="occupationModuleTheme.proportion" type="number" name="proportion" min="0" max="999" pattern="^\\d+(\\.\\d{1})?$"> <div ng-messages="dialogForm.proportion.$error" ng-show="dialogForm.proportion.$dirty"> <div ng-message="min"> {{\'main.messages.error.positive\' | translate}} </div> <div ng-message="max"> {{\'curriculum.error.max999\' | translate}} </div> <div ng-message="pattern"> {{\'stateCurriculum.error.decimalPresision\' | translate}} </div> </div> </md-input-container> <md-input-container flex="20"> <label>{{\'module.studyYear\' | translate}}</label> <md-select ng-model="occupationModuleTheme.studyYearNumber"> <md-option ng-value="null"></md-option> <md-option ng-repeat="studyYearNumber in studyYears" ng-value="studyYearNumber" aria-label="{{studyYearNumber}}">{{studyYearNumber}}</md-option> </md-select> </md-input-container> </div> <div flex> <fieldset tabindex="1"> <legend md-colors="{color: \'default-primary-800\'}" class="md-title-small">{{\'theme.capacityDistribution\' | translate}}</legend> <div layout="row" style="padding-bottom:1em" flex class="secondary-table-header"> <div flex="30">&nbsp;</div> <div flex="30">{{\'module.capacity\' | translate}}</div> <div flex="40" layout="row">{{\'module.contactStudy\' | translate}}</div> </div> <div ng-repeat="item in occupationModuleTheme.capacities | orderBy: \'nameEt\' track by item.capacityType" layout="row" class="secondary-table-row"> <div flex="30" class="occupation-module-capacity">{{currentLanguageNameField(item)}}</div> <div flex="30"> <md-input-container flex> <input ng-model="item.hours" type="number" min="0" max="999" pattern="^\\d+$" aria-label="capacity hours" class="small-input" ng-required="item.contact"> </md-input-container> </div> <div flex="40" layout="row"> <md-checkbox ng-model="item.contact" aria-label="capacity contact" class="occupation-module-capacity-contact"></md-checkbox> </div> </div> </fieldset> </div> <div>&nbsp;</div> <md-input-container flex> <label>{{\'module.subthemes\' | translate}}</label> <textarea ng-model="occupationModuleTheme.subthemes" md-maxlength="10000" max-rows="10" md-select-on-focus></textarea> </md-input-container> <md-input-container flex> <label>{{\'theme.connectionToStudyOutcome\' | translate}}</label> <md-select ng-model="occupationModuleTheme.outcomes" multiple> <md-option ng-repeat="outcome in outcomes" ng-value="outcome.id" aria-label="{{currentLanguage() === \'en\' ? outcome.outcomeEn : outcome.outcomeEt}}">{{currentLanguage() === \'en\' ? outcome.outcomeEn : outcome.outcomeEt}}</md-option> </md-select> </md-input-container> <div>&nbsp;</div> <div flex> <fieldset tabindex="2"> <legend md-colors="{color: \'default-primary-800\'}" class="md-title-small">{{\'module.themeGradeFormation\' | translate}}</legend> <div layout="column"> <div flex layout="row"> <span flex="30" class="common-label">{{\'theme.assessmentType\' | translate}}</span> <md-radio-group ng-model="occupationModuleTheme.assessment" layout="row"> <md-radio-button ng-repeat="option in assessments | orderBy: \'nameEt\' track by option.code" ng-value="option.code" aria-label="{{ currentLanguageNameField(option) }}"> {{ currentLanguageNameField(option) }} </md-radio-button> <md-radio-button ng-value="null" aria-label="{{\'module.noAssessment\' | translate}}"> {{\'module.noAssessment\' | translate}} </md-radio-button> </md-radio-group> </div> <div>&nbsp;</div> <md-input-container flex ng-show="occupationModuleTheme.assessment"> <label>{{\'module.totalGradeDescription\' | translate}}</label> <textarea ng-model="occupationModuleTheme.totalGradeDescription" md-maxlength="10000" max-rows="10" md-select-on-focus ng-required="occupationModuleTheme.assessment"></textarea> </md-input-container> <div ng-show="occupationModuleTheme.assessment === \'KUTSEHINDAMISVIIS_E\'" layout="column" flex> <md-input-container flex> <label>{{\'module.grade3Description\' | translate}}</label> <textarea ng-model="occupationModuleTheme.grade3Description" md-maxlength="10000" max-rows="10" md-select-on-focus ng-required="occupationModuleTheme.assessment === \'KUTSEHINDAMISVIIS_E\'"></textarea> </md-input-container> <md-input-container flex> <label>{{\'module.grade4Description\' | translate}}</label> <textarea ng-model="occupationModuleTheme.grade4Description" md-maxlength="10000" max-rows="10" md-select-on-focus ng-required="occupationModuleTheme.assessment === \'KUTSEHINDAMISVIIS_E\'"></textarea> </md-input-container> <md-input-container flex> <label>{{\'module.grade5Description\' | translate}}</label> <textarea ng-model="occupationModuleTheme.grade5Description" md-maxlength="10000" max-rows="10" md-select-on-focus ng-required="occupationModuleTheme.assessment === \'KUTSEHINDAMISVIIS_E\'"></textarea> </md-input-container> </div> <div ng-show="occupationModuleTheme.assessment === \'KUTSEHINDAMISVIIS_M\'" layout="column" flex> <md-input-container flex> <label>{{\'module.gradeADescription\' | translate}}</label> <textarea ng-model="occupationModuleTheme.passDescription" md-maxlength="10000" max-rows="2" md-select-on-focus ng-required="occupationModuleTheme.assessment === \'KUTSEHINDAMISVIIS_M\'"></textarea> </md-input-container> </div> </div> </fieldset> </div> <div>&nbsp;</div> </div> </md-dialog-content> <span flex></span> <md-dialog-actions layout="row" layout-align="start center"> <md-button class="md-raised md-primary" ng-click="saveTheme()">{{"main.button.save" | translate}}</md-button> <md-button class="md-raised" ng-click="cancel()">{{"main.button.close" | translate}}</md-button> </md-dialog-actions> </form> </md-dialog>'),a.put("vocationalCurriculum/implementationPlan/occupation.module.theme.view.dialog.html",'<md-dialog aria-label="vocational curriculum implementation plan module theme add dialog" flex="60" flex-xs="100"> <form name="dialogForm" ng-cloak> <md-toolbar> <div class="md-toolbar-tools"> <h2>{{"module.viewingTheme" | translate}}</h2> <span flex></span> <md-button class="md-icon-button" ng-click="cancel()"> <md-icon md-font-set="material-icons">close</md-icon> </md-button> </div> </md-toolbar> <md-dialog-content> <div class="ois-form-layout-padding nomargin" layout="column" ng-cloak> <md-input-container> <label>{{\'theme.name\' | translate}}</label> <input ng-model="occupationModuleTheme.nameEt" type="text" readonly> </md-input-container> <div layout="row"> <md-input-container flex="30"> <label>{{\'theme.capacityAndUnit\' | translate}}</label> </md-input-container> <md-input-container flex="10"> <label>EKAP</label> <input ng-model="occupationModuleTheme.credits" name="credits" type="number" readonly> </md-input-container> <md-input-container flex="10"> <label>{{\'main.hour\' | translate}}</label> <input ng-model="occupationModuleTheme.hours" name="hours" type="number" readonly> </md-input-container> <md-input-container flex="30"> <label>{{\'theme.proportionInModule\' | translate}}</label> <input ng-model="occupationModuleTheme.proportion" type="number" name="proportion" readonly> </md-input-container> <md-input-container flex="20"> <label>{{\'module.studyYear\' | translate}}</label> <input ng-model="occupationModuleTheme.studyYearNumber" readonly> </md-input-container> </div> <div flex> <fieldset tabindex="1"> <legend md-colors="{color: \'default-primary-800\'}" class="md-title-small">{{\'theme.capacityDistribution\' | translate}}</legend> <table flex class="module-capacities"> <tr style="padding-bottom:1em" flex class="secondary-table-header"> <td> </td><td>{{\'module.capacity\' | translate}} </td><td>{{\'module.contactStudy\' | translate}} </td></tr> <tr ng-repeat="item in occupationModuleTheme.capacities | orderBy: \'nameEt\' track by item.capacityType" class="secondary-table-row"> <td>{{currentLanguageNameField(item)}}</td> <td>{{item.hours}}</td> <td>{{item.contact ? \'main.yes\' : \'main.no\' | translate}}</td> </tr> </table> </fieldset> </div> <div>&nbsp;</div> <md-input-container flex> <label>{{\'module.subthemes\' | translate}}</label> <textarea ng-model="occupationModuleTheme.subthemes" max-rows="10" readonly></textarea> </md-input-container> <md-input-container flex> <label>{{\'theme.connectionToStudyOutcome\' | translate}}</label> <md-select ng-model="occupationModuleTheme.outcomes" multiple disabled> <md-option ng-repeat="outcome in outcomes" ng-value="outcome.id" aria-label="{{currentLanguage() === \'en\' ? outcome.outcomeEn : outcome.outcomeEt}}">{{currentLanguage() === \'en\' ? outcome.outcomeEn : outcome.outcomeEt}}</md-option> </md-select> </md-input-container> <div>&nbsp;</div> <div flex> <fieldset tabindex="2"> <legend md-colors="{color: \'default-primary-800\'}" class="md-title-small">{{\'module.themeGradeFormation\' | translate}}</legend> <div layout="column"> <div flex layout="row"> <span flex="30" class="common-label">{{\'theme.assessmentType\' | translate}}</span> <md-radio-group ng-model="occupationModuleTheme.assessment" layout="row" disabled> <md-radio-button ng-repeat="option in assessments | orderBy: \'nameEt\' track by option.code" ng-value="option.code" aria-label="{{ currentLanguageNameField(option) }}"> {{ currentLanguageNameField(option) }} </md-radio-button> <md-radio-button ng-value="null" aria-label="{{\'module.noAssessment\' | translate}}"> {{\'module.noAssessment\' | translate}} </md-radio-button> </md-radio-group> </div> <div>&nbsp;</div> <md-input-container flex ng-show="occupationModuleTheme.assessment"> <label>{{\'module.totalGradeDescription\' | translate}}</label> <textarea ng-model="occupationModuleTheme.totalGradeDescription" max-rows="10" readonly></textarea> </md-input-container> <div ng-show="occupationModuleTheme.assessment === \'KUTSEHINDAMISVIIS_E\'" layout="column" flex> <md-input-container flex> <label>{{\'module.grade3Description\' | translate}}</label> <textarea ng-model="occupationModuleTheme.grade3Description" max-rows="10" readonly></textarea> </md-input-container> <md-input-container flex> <label>{{\'module.grade4Description\' | translate}}</label> <textarea ng-model="occupationModuleTheme.grade4Description" max-rows="10" readonly></textarea> </md-input-container> <md-input-container flex> <label>{{\'module.grade5Description\' | translate}}</label> <textarea ng-model="occupationModuleTheme.grade5Description" max-rows="10" readonly></textarea> </md-input-container> </div> <div ng-show="occupationModuleTheme.assessment === \'KUTSEHINDAMISVIIS_M\'" layout="column" flex> <md-input-container flex> <label>{{\'module.gradeADescription\' | translate}}</label> <textarea ng-model="occupationModuleTheme.passDescription" max-rows="2" readonly></textarea> </md-input-container> </div> </div> </fieldset> </div> <div>&nbsp;</div> </div> </md-dialog-content> <span flex></span> <md-dialog-actions layout="row" layout-align="start center"> <md-button class="md-raised" ng-click="cancel()">{{"main.button.close" | translate}}</md-button> </md-dialog-actions> </form> </md-dialog>'),a.put("vocationalCurriculum/implementationPlan/occupation.module.view.html",'<div class="ois-form-layout-padding nomargin"> <form name="occupationModuleForm" ng-cloak> <div> <h2 translate="module.occupationalModuleDataView" translate-values="{{curriculumModule}}"></h2> </div> <div layout="column"> <div flex> <fieldset tabindex="1"> <legend md-colors="{color: \'default-primary-800\'}" class="md-title-small">{{\'module.capacityDistribution\' | translate}}</legend> <div layout="row" style="padding-bottom:1em" flex class="secondary-table-header"> <div flex="30">&nbsp;</div> <div flex="30">{{\'module.capacity\' | translate}}</div> <div flex="40" layout="row">{{\'module.contactStudy\' | translate}}</div> </div> <div ng-repeat="item in occupationModule.capacities | orderBy: \'nameEt\' track by item.capacityType" layout="row" class="secondary-table-row"> <div flex="30" class="occupation-module-capacity">{{currentLanguageNameField(item)}}</div> <div flex="30"> <md-input-container flex> <input ng-model="item.hours" type="number" aria-label="capacity hours" class="small-input" readonly> </md-input-container> </div> <div flex="40" layout="row"> <md-checkbox ng-model="item.contact" aria-label="capacity contact" disabled class="occupation-module-capacity-contact"></md-checkbox> </div> </div> </fieldset> </div> <div>&nbsp;</div> <md-input-container flex> <label>{{\'module.requirements\' | translate}}</label> <textarea ng-model="occupationModule.requirementsEt" max-rows="10" readonly></textarea> </md-input-container> <md-input-container flex> <label>{{\'module.assessments\' | translate}}</label> <textarea ng-model="occupationModule.assessmentsEt" max-rows="10" readonly></textarea> </md-input-container> <md-input-container flex> <label>{{\'module.learningMethods\' | translate}}</label> <textarea ng-model="occupationModule.learningMethodsEt" max-rows="10" readonly></textarea> </md-input-container> <md-input-container flex> <label>{{\'module.assessmentMethodsAndTasks\' | translate}}</label> <textarea ng-model="occupationModule.assessmentMethodsEt" max-rows="10" readonly></textarea> </md-input-container> <md-input-container flex> <label>{{\'module.independentStudyDescription\' | translate}}</label> <textarea ng-model="occupationModule.independentStudyEt" max-rows="2" readonly></textarea> </md-input-container> <md-input-container flex> <label>{{\'module.studyMaterials\' | translate}}</label> <textarea ng-model="occupationModule.studyMaterials" max-rows="2" readonly></textarea> </md-input-container> <div>&nbsp;</div> <div flex> <fieldset tabindex="2" layout="column"> <legend md-colors="{color: \'default-primary-800\'}" class="md-title-small">{{\'module.gradeFormation\' | translate}}</legend> <div flex layout="row"> <span flex="30" class="common-label">{{\'module.assessmentType\' | translate}}</span> <hois-classifier-radio layout="row" ng-model="occupationModule.assessment" model-value-attr="code" main-classifier-code="KUTSEHINDAMISVIIS" disabled class="md-primary"></hois-classifier-radio> </div> <div>&nbsp;</div> <md-input-container flex> <label>{{\'module.totalGradeDescription\' | translate}}</label> <textarea ng-model="occupationModule.totalGradeDescription" max-rows="2" readonly></textarea> </md-input-container> <div>&nbsp;</div> <div ng-show="occupationModule.assessment === \'KUTSEHINDAMISVIIS_E\'" layout="column"> <md-input-container flex> <label>{{\'module.grade3Description\' | translate}}</label> <textarea ng-model="occupationModule.grade3Description" max-rows="2" readonly></textarea> </md-input-container> <md-input-container flex> <label>{{\'module.grade4Description\' | translate}}</label> <textarea ng-model="occupationModule.grade4Description" max-rows="2" readonly></textarea> </md-input-container> <md-input-container flex> <label>{{\'module.grade5Description\' | translate}}</label> <textarea ng-model="occupationModule.grade5Description" max-rows="2" readonly></textarea> </md-input-container> </div> <div ng-show="occupationModule.assessment === \'KUTSEHINDAMISVIIS_M\'" layout="column" flex> <md-input-container flex> <label>{{\'module.gradeADescription\' | translate}}</label> <textarea ng-model="occupationModule.passDescription" max-rows="10" readonly></textarea> </md-input-container> </div> </fieldset> </div> <div>&nbsp;</div> <div flex> <fieldset tabindex="3"> <legend md-colors="{color: \'default-primary-800\'}" class="md-title-small">{{\'module.themes\' | translate}}</legend> <div layout="column"> <div flex="10"> </div> <div flex> <table md-table class="secondary-table"> <thead md-head> <tr md-row> <th md-column>{{\'module.themeName\' | translate}}</th> <th md-column>{{\'module.capacityEkapPerHour\' | translate}}</th> <th md-column>{{\'module.subthemes\' | translate}}</th> <th md-column>{{\'module.studyYear\' | translate}}</th> <th md-column></th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="theme in occupationModule.themes | orderBy: currentLanguageNameField()"> <td md-cell> <a class="md-primary one-row" ng-click="openAddThemeDialog(theme)">{{currentLanguageNameField(theme)}}</a> </td> <td md-cell> {{theme.credits}}/{{theme.hours}} </td> <td md-cell> <p class="scrollable">{{theme.subthemes}}</p> </td> <td md-cell> {{theme.studyYearNumber}} </td> <td md-cell></td> </tr> </tbody> </table> </div> </div> </fieldset> </div> <div flex>&nbsp;</div> <div flex> <fieldset tabindex="4" layout="column"> <legend md-colors="{color: \'default-primary-800\'}" class="md-title-small">{{\'module.proportionPerStudyYear\' | translate}}</legend> <div layout="row"> <md-input-container flex ng-repeat="yc in occupationModule.yearCapacities track by $index"> <label>{{$index+1}}.&nbsp;{{\'module.studyYearLowercase\' | translate}}</label> <input disabled ng-model="yc.credits" type="number"> </md-input-container> </div> </fieldset> </div> <br> <md-input-container flex> <label>{{\'module.supervisor\' | translate}}</label> <input ng-model="occupationModule.supervisor" type="text" readonly> </md-input-container> </div> <span flex></span> <md-button class="md-raised" ng-click="back(backToViewForm)">{{"main.button.back" | translate}}</md-button> </form> </div>'),a.put("vocationalCurriculum/module/vocational.curriculum.module.edit.html",'<div class="ois-form-layout-padding nomargin"> <form ng-cloak name="vocationalCurriculumModuleForm"> <div layout="column" ng-cloak> <div flex> <fieldset tabindex="1" ng-if="module.canHaveOccupations"> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{module.occupation ? \'module.occupationPartOccupationSpecialize\' : \'module.partOccupation\' | translate}}</legend> <div layout="column"> <div ng-repeat="item in module.curriculumOccupations | orderBy: \'occupation\'"> <md-checkbox ng-model="occupationsSelected[item.occupation]" ng-change="validateOccupations()"> <hois-classifier-value ng-model="item.occupation" main-classifier-codes="KUTSE,OSAKUTSE" class="inline"></hois-classifier-value> </md-checkbox> <div layout="column"> <div ng-repeat="partOccupation in item.partOccupations | orderBy" flex layout="row"> <div flex="5">&nbsp;</div> <md-checkbox ng-model="occupationsSelected[partOccupation]" ng-change="validateOccupations()"> <hois-classifier-value ng-model="partOccupation" main-classifier-code="OSAKUTSE" class="inline"></hois-classifier-value> </md-checkbox> </div> </div> <div layout="column"> <div ng-repeat="speciality in item.specialities | orderBy" layout="row"> <div flex="5">&nbsp;</div> <md-checkbox ng-model="specialitiesSelected[speciality]" ng-change="validateOccupations()"> <hois-classifier-value ng-model="speciality" main-classifier-code="SPETSKUTSE" class="inline"></hois-classifier-value> </md-checkbox> </div> </div> </div> </div> <md-input-container hide> <input ng-model="occupationsValid" type="text" required> </md-input-container> <p ng-show="vocationalCurriculumModuleForm.$submitted && !occupationsValid" class="invalid">{{\'curriculum.error.moduleOccupations\' | translate}}</p> </fieldset> </div> <div>&nbsp;</div> <div layout="row" flex> <md-input-container flex="45"> <label>{{\'module.type\' | translate}}</label> <hois-classifier-select name="module" ng-model="module.module" show-only-values="possibleTypes" main-classifier-code="KUTSEMOODUL" required ng-disabled="module.id && !module.basicDataCanBeEdited" model-value-attr="code"></hois-classifier-select> </md-input-container> <md-input-container flex="10" flex-sm="50" flex-xs="50" flex-offset="5"> <label>{{\'module.credits\' | translate}}</label> <input ng-model="module.credits" type="number" name="credits" min="0" max="999" pattern="^\\d+(\\.\\d{1})?$" required> <div ng-messages="vocationalCurriculumModuleForm.credits.$error" ng-show="vocationalCurriculumModuleForm.credits.$dirty"> <div ng-message="min"> {{\'main.messages.error.positive\' | translate}} </div> <div ng-message="max"> {{\'curriculum.error.max999\' | translate}} </div> <div ng-message="pattern"> {{\'stateCurriculum.error.decimalPresision\' | translate}} </div> </div> </md-input-container> </div> <md-input-container flex> <label>{{\'module.nameEt\' | translate}}</label> <input ng-model="module.nameEt" type="text" md-maxlength="255" required> </md-input-container> <md-input-container flex> <label>{{\'module.nameEn\' | translate}}</label> <input ng-model="module.nameEn" type="text" md-maxlength="255"> </md-input-container> <md-input-container flex> <label>{{\'module.objectivesEt\' | translate}}</label> <textarea ng-model="module.objectivesEt" md-maxlength="10000" max-rows="10" md-select-on-focus required></textarea> </md-input-container> <md-input-container flex> <label>{{\'module.objectivesEn\' | translate}}</label> <textarea ng-model="module.objectivesEn" md-maxlength="10000" max-rows="10" md-select-on-focus></textarea> </md-input-container> <div flex> <fieldset tabindex="4"> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'module.studyOutcome\' | translate}} *</legend> <input style="display:none" type="number" readonly name="outcomesLength" ng-model="module.outcomes.length" min="1"> <div class="invalid" ng-if="vocationalCurriculumModuleForm.$submitted" ng-messages="vocationalCurriculumModuleForm.outcomesLength.$error"> <div ng-message="min">{{\'main.messages.error.atLeastOneShouldBeAdded\' | translate}}</div> </div> <div layout="row" flex> <md-input-container flex="45"> <label>{{\'studyOutcome.nameEt\' | translate}} *</label> <textarea ng-model="outcomeEt" md-maxlength="1000" max-rows="10" md-select-on-focus></textarea> </md-input-container> <md-input-container flex="40" flex-offset="5"> <label>{{\'studyOutcome.nameEn\' | translate}}</label> <textarea ng-model="outcomeEn" md-maxlength="1000" max-rows="10" md-select-on-focus></textarea> </md-input-container> <md-button class="md-primary" ng-click="addOutcome()" ng-if="!isEditingOutcome">{{\'main.button.add\' | translate}}</md-button> <md-button class="md-primary" ng-click="saveOutcome()" ng-if="isEditingOutcome">{{\'main.button.change\' | translate}}</md-button> </div> <div layout="column"> <div ng-repeat="item in module.outcomes track by $index" class="occupation-row align-center" layout="row" flex> <div flex="45"> <a ng-click="editOutcome(item)"> <p class="scrollable">{{item.outcomeEt}}</p> </a> </div> <div flex="40" flex-offset="5"> <a ng-click="editOutcome(item)"> <p class="scrollable">{{item.outcomeEn}}</p> </a> </div> <div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</div> <div> <a class="remove" ng-click="removeFromArray(module.outcomes, item)">&times;&nbsp;&nbsp;</a> </div> <div> <p ng-if="$first" class="link-disabled">&#9650;&nbsp;</p> <a ng-if="!$first" class="link-no-underline" ng-click="swap($index, $index - 1)">&#9650;&nbsp;</a> </div> <div> <p ng-if="$last" class="link-disabled">&#9660;&nbsp;</p> <a ng-if="!$last" class="link-no-underline" ng-click="swap($index, $index + 1)">&#9660;&nbsp;</a> </div> </div> </div> </fieldset> </div> <div>&nbsp;</div> <md-input-container flex> <label>{{\'stateCurriculum.enter.module.criteriaEt\' | translate}}</label> <textarea ng-model="module.assessmentsEt" required md-maxlength="20000" max-rows="10"></textarea> </md-input-container> <md-input-container flex> <label>{{\'stateCurriculum.enter.module.criteriaEn\' | translate}}</label> <textarea ng-model="module.assessmentsEn" md-maxlength="20000" max-rows="10"></textarea> </md-input-container> <md-input-container flex> <label>{{\'module.competencesAquired\' | translate}}</label> <md-select multiple ng-model="module.competences" ng-disabled="module.module !== \'KUTSEMOODUL_P\' || competences.length === 0"> <md-option ng-repeat="option in competences | orderBy: currentLanguageNameField() track by $index" ng-value="option.code" aria-label="{{currentLanguageNameField(option)}}"> {{currentLanguageNameField(option)}}</md-option> </md-select> </md-input-container> <!-- <md-input-container flex>\r\n        <label>{{\'module.competencesAquired\' | translate}}</label>\r\n        <hois-select ng-model="module.competences" values="studyPeriods"\r\n        ng-disabled="module.module !== \'KUTSEMOODUL_P\' || competences.length === 0"\r\n        valueProperty="code"></hois-select>\r\n      </md-input-container> --> <!-- <md-input-container flex>\r\n          <label>{{\'module.competencesAquired\' | translate}}</label>\r\n          <hois-classifier-select  ng-model="module.competences" show-only-values="competences" main-classifier-code="KOMPETENTS"\r\n          ng-disabled="module.module !== \'KUTSEMOODUL_P\' || competences.length === 0" model-value-attr="code"></hois-classifier-select>\r\n        </md-input-container> --> <br> <md-input-container flex> <md-checkbox ng-model="module.practice" ng-disabled="module.module === \'KUTSEMOODUL_L\'">{{\'module.practice\' | translate}}</md-checkbox> </md-input-container> <md-input-container> <md-checkbox ng-model="module.isAdditional" aria-label="{{\'stateCurriculum.enter.module.isAdditional\' | translate}}"> {{\'stateCurriculum.enter.module.isAdditional\' | translate}} </md-checkbox> </md-input-container> </div> <span flex></span> <md-button class="md-raised md-primary" ng-click="save()">{{"main.button.save" | translate}}</md-button> <md-button class="md-raised" ng-click="delete()" ng-if="module.id && !module.addedToImplementationPlan">{{"main.button.delete" | translate}}</md-button> <md-button class="md-raised" ng-click="back(\'#/vocationalCurriculum/\' + curriculumId + \'/edit\', vocationalCurriculumModuleForm)">{{"main.button.back" | translate}}</md-button> </form> </div> <style>.link-no-underline {\r\n    text-decoration: none;\r\n  }\r\n\r\n  .link-disabled {\r\n    color: #d7dde5;\r\n  }</style>'),
a.put("vocationalCurriculum/module/vocational.curriculum.module.view.html",'<div class="ois-form-layout-padding nomargin"> <div layout="column" ng-cloak> <div flex> <fieldset tabindex="1" ng-if="module.canHaveOccupations"> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{module.occupation ? \'module.occupationPartOccupationSpecialize\' : \'module.partOccupation\' | translate}}</legend> <div layout="column"> <div ng-repeat="item in module.curriculumOccupations | orderBy: \'occupation\'"> <md-checkbox ng-model="occupationsSelected[item.occupation]" disabled> <hois-classifier-value ng-model="item.occupation" main-classifier-codes="KUTSE,OSAKUTSE" class="inline"></hois-classifier-value> </md-checkbox> <div layout="column"> <div ng-repeat="partOccupation in item.partOccupations | orderBy" flex layout="row"> <div flex="5">&nbsp;</div> <md-checkbox ng-model="occupationsSelected[partOccupation]" disabled> <hois-classifier-value ng-model="partOccupation" main-classifier-code="OSAKUTSE" class="inline"></hois-classifier-value> </md-checkbox> </div> </div> <div layout="column"> <div ng-repeat="speciality in item.specialities | orderBy" layout="row"> <div flex="5">&nbsp;</div> <md-checkbox ng-model="specialitiesSelected[speciality]" disabled> <hois-classifier-value ng-model="speciality" main-classifier-code="SPETSKUTSE" class="inline"></hois-classifier-value> </md-checkbox> </div> </div> </div> </div> <md-input-container hide> <input ng-model="occupationsValid" readonly> </md-input-container> </fieldset> </div> <div>&nbsp;</div> <div layout="row" flex> <md-input-container flex="45"> <label>{{\'module.type\' | translate}}</label> <hois-classifier-select name="module" ng-model="module.module" show-only-values="possibleTypes" main-classifier-code="KUTSEMOODUL" disabled model-value-attr="code"></hois-classifier-select> </md-input-container> <md-input-container flex="10" flex-sm="50" flex-xs="50" flex-offset="5"> <label>{{\'module.credits\' | translate}}</label> <input ng-model="module.credits" type="number" name="credits" readonly> </md-input-container> </div> <md-input-container flex> <label>{{\'module.nameEt\' | translate}}</label> <input ng-model="module.nameEt" type="text" readonly> </md-input-container> <md-input-container flex> <label>{{\'module.nameEn\' | translate}}</label> <input ng-model="module.nameEn" type="text" readonly> </md-input-container> <md-input-container flex> <label>{{\'module.objectivesEt\' | translate}}</label> <textarea ng-model="module.objectivesEt" max-rows="10" md-select-on-focus readonly></textarea> </md-input-container> <md-input-container flex> <label>{{\'module.objectivesEn\' | translate}}</label> <textarea ng-model="module.objectivesEn" max-rows="10" md-select-on-focus readonly></textarea> </md-input-container> <div flex> <fieldset tabindex="4"> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'module.studyOutcome\' | translate}}</legend> <div layout="column"> <div ng-repeat="item in module.outcomes track by $index" class="occupation-row align-center" layout="row" flex> <div flex="45"> <p class="scrollable">{{item.outcomeEt}}</p> </div> <div flex="40" flex-offset="5"> <p class="scrollable">{{item.outcomeEn}}</p> </div> </div> </div> </fieldset> </div> <div>&nbsp;</div> <md-input-container flex> <label>{{\'stateCurriculum.enter.module.criteriaEt\' | translate}}</label> <textarea ng-model="module.assessmentsEt" readonly max-rows="10"></textarea> </md-input-container> <md-input-container flex> <label>{{\'stateCurriculum.enter.module.criteriaEn\' | translate}}</label> <textarea ng-model="module.assessmentsEn" readonly max-rows="10"></textarea> </md-input-container> <md-input-container flex> <label>{{\'module.competencesAquired\' | translate}}</label> <md-select multiple ng-model="module.competences" disabled> <md-option ng-repeat="option in competences | orderBy: currentLanguageNameField() track by $index" ng-value="option.code" aria-label="{{currentLanguageNameField(option)}}"> {{currentLanguageNameField(option)}}</md-option> </md-select> </md-input-container> <br> <md-input-container flex> <md-checkbox ng-model="module.practice" disabled>{{\'module.practice\' | translate}}</md-checkbox> </md-input-container> <md-input-container> <md-checkbox ng-model="module.isAdditional" aria-label="{{\'stateCurriculum.enter.module.isAdditional\' | translate}}" disabled> {{\'stateCurriculum.enter.module.isAdditional\' | translate}} </md-checkbox> </md-input-container> </div> <span flex></span> <md-button class="md-raised" ng-click="back(\'#/vocationalCurriculum/\' + curriculumId + \'/view\')">{{"main.button.back" | translate}}</md-button> </div> <style>.link-no-underline {\r\n      text-decoration: none;\r\n    }\r\n\r\n    .link-disabled {\r\n      color: #d7dde5;\r\n    }</style>')}]);