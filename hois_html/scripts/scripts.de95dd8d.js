"use strict";function calculateSumsForFamilyBlock(a){angular.isArray(a)&&a.forEach(function(a){a.sum=[a.netSalary,a.pension,a.stateBenefit,a.otherIncome,a.unemployedBenefit].reduce(function(a,b){return isNaN(b)?a:a+b},0)})}angular.module("hitsaOis",["ngAnimate","ngAria","ngMessages","ngResource","ngRoute","ngSanitize","ngMaterial","pascalprecht.translate","md.data.table","lfNgMdFileInput","ngStorage","angular-cache","color.picker"]).config(["$routeProvider",function(a){a.otherwise({redirectTo:"/"})}]).config(["$locationProvider",function(a){a.hashPrefix("")}]).config(["$translateProvider",function(a){a.useStaticFilesLoader({prefix:"i18n/",suffix:".json"}),a.preferredLanguage("et"),a.fallbackLanguage("et"),a.useSanitizeValueStrategy("escapeParameters")}]).config(["$compileProvider",function(a){a.aHrefSanitizationWhitelist(/^\s*(https?|ftp|mailto|tel|file|blob|data):/),a.debugInfoEnabled(!1)}]).config(["$httpProvider",function(a){a.defaults.withCredentials=!0,a.defaults.headers.common["X-Requested-With"]="XMLHttpRequest",a.defaults.xsrfCookieName="XSRF-TOKEN",a.defaults.xsrfHeaderName="X-XSRF-TOKEN"}]).config(["$resourceProvider",function(a){a.defaults.actions.update={method:"PUT",params:{id:"@id"}},a.defaults.actions["delete"]={method:"DELETE",params:{id:"@id",version:"@version"}}}]).config(["$mdThemingProvider",function(a){a.theme("default").primaryPalette("blue",{"default":"900"}).accentPalette("pink").backgroundPalette("grey")}]).config(["$httpProvider",function(a){a.interceptors.push(["$injector",function(a){return a.get("AuthInterceptor")}]),a.interceptors.push(["Session","$rootScope",function(a,b){return{response:function(a){var c=a.config.url;return void 0!==c.indexOf&&-1===c.indexOf("session.timing.out.dialog.html")&&-1===c.indexOf("session.timed.out.dialog.html")&&-1===c.indexOf("/logout")&&b.restartTimeoutDialogCounter(),a}}}]),a.interceptors.push(["$q","$rootScope","$timeout",function(a,b,c){function d(a,d){function f(){b.$emit("backendBusy",{busy:d})}-1!==e.indexOf(a.method)&&(d?f():c(f,200))}var e=["POST","PUT","DELETE"];return{request:function(a){return d(a,!0),a},response:function(a){return d(a.config,!1),a},responseError:function(b){return d(b.config,!1),a.reject(b)}}}])}]).config(["CacheFactoryProvider",function(a){angular.extend(a.defaults,{maxAge:36e5,deleteOnExpire:"passive"})}]).run(["$rootScope","busyHandler",function(a,b){a.$on("backendBusy",function(a,c){b.handle(c)})}]).config(["$provide",function(a){a.decorator("ColorPickerOptions",["$delegate",function(a){var b=angular.copy(a);return b.placeholder="Vali värv",b.format="hex",b["case"]="upper",b.hue=!0,b.saturation=!1,b.lightness=!1,b.alpha=!1,b.restrictToForma=!0,b.preserveInputFormat=!0,b.swatch=!0,b.swatchOnly=!0,b.round=!1,b}])}]),angular.module("hitsaOis").controller("SimpleListController",["$q","$route","$scope","Classifier","QueryUtils",function(a,b,c,d,e){c.auth=b.current.locals.auth;var f=b.current.locals.clMapping,g=f?d.valuemapper(f):void 0;e.createQueryForm(c,b.current.locals.url,b.current.locals.params,g?g.objectmapper:void 0),g?a.all(g.promises).then(c.loadData):c.loadData()}]),angular.module("hitsaOis").controller("MainController",["$window","$scope","$translate","$location","Menu","AuthService","$mdSidenav","$mdMedia","$mdUtil","$rootScope","$mdDateLocale","$filter","$timeout","USER_ROLES","dialogService","config","$httpParamSerializer","Session","$mdDialog","ArrayUtils",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t){function u(){m(function(){g("left").close()})}function v(){m(function(){g("left").open()})}function w(){return d.path()}function x(){i.animateScrollTo(P,0,200)}function y(){e.selectPage(null,null),d.path("/")}function z(){M.autoFocusContent&&(A(),M.autoFocusContent=!1)}function A(a){a&&a.preventDefault(),m(function(){O.focus()},90)}function B(a){return e.isPageSelected(a)}function C(){var a=i.debounce(function(){g("left").isOpen()?g("left").close():g("left").open()},300);return a}function D(a){var b=!1,c=e.openedSection;return c===a?b=!0:a.children&&a.children.forEach(function(a){a===c&&(b=!0)}),b}function E(a){return e.isSectionSelected(a)}function F(a){e.toggleSelectSection(a)}function G(a){var b=a.substring(a.indexOf("#"),a.length);Q.push(b)}function H(b){for(var c=Q.pop();angular.isDefined(c)&&(c===a.location.hash||a.location.hash.endsWith("?_noback")&&a.location.hash.slice(0,-8)===c);)c=Q.pop();var d=c||b;R=!0,a.location.href=d}function I(){s.show({controller:["$scope","$http",function(a,b){a.refresh=function(){b.get(p.apiUrl+"/refresh"),s.hide()}}],templateUrl:"login/session.timing.out.dialog.html",parent:angular.element(document.body),clickOutsideToClose:!1})}function J(){s.show({controller:["$scope","$location",function(a,b){a.ok=function(){j.loggedOut(),f.postLogout(),b.path("/"),s.hide()}}],templateUrl:"login/session.timed.out.dialog.html",parent:angular.element(document.body),clickOutsideToClose:!1})}function K(){angular.isObject(r.timeoutDialog)&&m.cancel(r.timeoutDialog),angular.isObject(r.timeout)&&m.cancel(r.timeout)}function L(a,b){return function(){Date.now()-a<b&&I()}}j.state={};var M=this;b.windowWidth=a.innerWidth,a.onresize=function(){m(function(){b.windowWidth=a.innerWidth})},b.$mdMedia=h,b.toggleLeft=C("left"),b.lockLeft=!0,b.isLeftOpen=function(){return window.innerWidth>800?g("left").isOpen():!1},b.shouldLeftBeOpen=h("gt-sm"),b.changeLanguage=function(a){c.use(a)},b.currentLanguage=function(){return c.use()},j.currentLanguageNameVariable=function(){switch(b.currentLanguage()){case"en":return"nameEn";case"et":return"nameEt";case"ru":return"nameRu";default:return"nameEt"}};var N=function(a,b){return angular.isObject(b)?b[a]||b.nameEt:void 0};b.currentLanguageNameField=function(a){var c=b.currentLanguageNameVariable();return 0===arguments.length?c:angular.isArray(a)?a.map(function(a){return N(c,a)}).join("; "):N(c,a)},j.currentLanguageNameField=b.currentLanguageNameField,b.leftSideNavToggle=function(){g("left").toggle()},b.leftSideNavSelect=function(a){d.path(a),g("left").close()},b.Menu=e,b.path=w,b.goHome=y,b.openMenu=v,b.closeMenu=u,b.isSectionSelected=D,b.scrollTop=x,j.$on("$locationChangeSuccess",z),b.openTerms=function(){o.showDialog("components/terms."+b.currentLanguage()+".dialog.html")};var O=document.querySelector("[role='main']"),P=O.querySelector("md-content[md-scroll-y]");b.focusMainContent=A,Object.defineProperty(j,"relatedPage",{get:function(){return null},set:angular.noop,enumerable:!0,configurable:!0}),j.redirectToUrl=function(a){d.path(a),m(function(){j.relatedPage=null},100)},this.isOpen=E,this.isSelected=B,this.toggleOpen=F,this.autoFocusContent=!1,j.state.userRoles=n,j.isAuthorized=f.isAuthorized,j.setCurrentUser=function(a){j.state.currentUser=a},j.$on("$translateChangeSuccess",function(a,b){"et"===b.language?(k.months=["jaanuar","veebruar","märts","aprill","mai","juuni","juuli","august","september","oktoober","november","detsember"],k.shortMonths=["jaan","veebr","märts","apr","mai","juuni","juuli","aug","sept","okt","nov","dets"],k.days=["pühapäev","esmaspäev","teisipäev","kolmapäev","neljapäev","reede","laupäev"],k.shortDays=["P","E","T","K","N","R","L"],k.firstDayOfWeek=1,k.formatDate=function(a){if(angular.isDefined(a)){var b=moment(a);if(b.isValid())return b.format("DD.MM.YYYY")}return null},k.parseDate=function(a){if(angular.isDefined(a)){var b=moment(a,"DD.MM.YYYY");if(b.isValid())return b.toDate()}return new Date(NaN)}):(k.months=["January","February","March","April","May","June","July","August","September","October","November","December"],k.shortMonths=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],k.days=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],k.shortDays=["S","M","T","W","T","F","S"],k.firstDayOfWeek=0,k.formatDate=function(a){if(angular.isDefined(a)){var b=moment(a);return b.isValid()?b.format("M/D/YYYY"):null}return null},k.parseDate=function(a){if(angular.isDefined(a)){var b=moment(a,"M/D/YYYY");return b.isValid()?b.toDate():new Date(NaN)}return new Date(NaN)})});var Q=[],R=!1;j.replaceLastUrl=function(a,b){var c=Q.pop();return angular.isDefined(b)&&b(c)===!1?void Q.push(c):void Q.push(a)},j.removeLastUrlFromHistory=function(a){var b=Q.pop();angular.isDefined(a)&&!a(b)&&Q.push(b)},j.previosFormIsNewForm=function(){if(t.isEmpty(Q))return!1;var a=Q[Q.length-1];return a?a.indexOf("new")===a.length-3:!1},j.$on("$locationChangeSuccess",function(a,b,c){b===c||R||-1!==b.indexOf("_noback")||G(c.replace(/(\?_menu)$/,"")),R=!1}),j.back=function(a,b,c){angular.isDefined(b)&&b.$dirty===!0?o.confirmDialog({prompt:c||"main.messages.confirmFormDataNotSaved"},function(){H(a)}):H(a)},j.excel=function(a,b){return p.apiUrl+"/"+a+(b?"?"+q(b):"")},j.restartTimeoutDialogCounter=function(){if(K(),f.isAuthenticated()){var b=1e3*r.timeoutInSeconds,c=b-1e3*p.timeoutDialogBeforeTimeoutInSeconds;if(c>0){var d=Date.now();r.timeoutDialog=m(function(){a.requestAnimationFrame(L(d,b))},c),r.timeout=m(function(){s.hide(),J()},b)}}}}]).filter("nospace",function(){return function(a){return a?a.replace(/ /g,""):""}}).filter("encodeURIComponent",function(){return function(a){return window.encodeURIComponent(a)}}),angular.module("hitsaOis").controller("ApplicationController",["$scope","dialogService","oisFileService","QueryUtils","message","$location","$route","DataUtils","ArrayUtils","$q","Curriculum","Classifier",function(a,b,c,d,e,f,g,h,i,j,k,l){function m(b){h.convertStringToDates(b,["startDate","endDate"]),angular.isArray(b.plannedSubjects)&&b.plannedSubjects.forEach(function(a){angular.isArray(a.equivalents)&&(a.subjectsSelected=a.equivalents.map(function(a){return a.subject}))}),angular.extend(a.application,b)}function n(b){return a.currentLanguageNameField(b.studyYear)+" "+a.currentLanguageNameField(b)}function o(b,c){a.isCreate&&(a.application.oldFin=b.fin,a.application.oldFinSpecific=b.finSpecific),a.application.newFin="FINALLIKAS_RE"===b.fin?"FINALLIKAS_REV":"FINALLIKAS_RE",c.resolve()}function p(b,c){a.isCreate&&(a.application.oldStudyForm=b.studyForm),c.resolve()}function q(b,c){function d(){var b,c=a.application.newCurriculumVersion,d=c?e.find(function(a){return a.id===c.id}):void 0,g=angular.isObject(d)?!d.isVocational:a.auth.school.higher,h=angular.isObject(d)?d.isVocational:a.auth.school.vocational;b=d&&angular.isString(d.studyForm)?[d.studyForm]:f.filter(function(a){return g&&a.higher||h&&a.vocational}).map(function(a){return a.code}),a.allowedStudyForms=b}var e=k.queryVersions({valid:!0});a.isCreate&&(a.application.oldStudyForm=b.studyForm,a.application.oldCurriculumVersion=b.curriculumVersion);var f=l.queryForDropdown({mainClassCode:"OPPEVORM"});a.newCurriculumVersionSelected=function(){var b=e.find(function(b){return b.id===a.application.newCurriculumVersion.id});angular.isObject(b)&&f.$promise.then(function(){a.application.newStudyForm=b.studyForm,d()})},e.$promise.then(function(e){a.curriculumVersions=e.filter(function(a){return a.id!==b.curriculumVersion.id}),f.$promise.then(function(){d(),c.resolve()})})}function r(b,c){a.isCreate&&(a.application.isPeriod=!0),a.studyPeriods=d.endpoint("/autocomplete/studyPeriodsWithYear").query({},function(a){a.forEach(function(a){a.display=n(a)}),c.resolve()}),a.curriculumVersion=b.curriculumVersion}function s(b){h.convertStringToDates(a.application.validAcademicLeave,["startDate","endDate"]),a.studyPeriods=d.endpoint("/autocomplete/studyPeriods").query({},b.resolve)}function t(b){a.isAbroadChanged=function(){a.application.isAbroad?a.application.ehisSchool=void 0:(a.application.abroadSchool=void 0,a.application.country=void 0)},a.plannedSubjectLength=function(){return angular.isArray(a.application.plannedSubjects)?a.application.plannedSubjects.length:0},a.addPlannedSubjectRow=function(){angular.isArray(a.application.plannedSubjects)||(a.application.plannedSubjects=[]),a.application.plannedSubjects.push({equivalents:[]})},a.subjectsSelected=function(a){if(angular.isArray(a.subjectsSelected)){var b=[];a.subjectsSelected.forEach(function(c){for(var d=!1,e=0;e<a.equivalents.length&&!d;e++){var f=a.equivalents[e];f.subject===c&&(b.push(f),d=!0)}d||b.push({subject:c})}),a.equivalents=b}else a.equivalents=[]},a.studentEhisSchool=g.current.locals.auth.school.ehisSchool,a.isCreate&&(a.application.isPeriod=!0,a.application.isAbroad=!1),a.studentSubjects=d.endpoint("/students/"+a.application.student.id+"/subjects").query(),a.studyPeriods=d.endpoint("/autocomplete/studyPeriods").query(),j.all([a.studentSubjects.$promise,a.studyPeriods.$promise]).then(b.resolve)}function u(a){a.resolve()}function v(a){a.resolve()}function w(b,c){var f=j.defer();"AVALDUS_LIIK_AKAD"===b||"AVALDUS_LIIK_FINM"===b||"AVALDUS_LIIK_OVORM"===b||"AVALDUS_LIIK_OKAVA"===b?d.endpoint("/students").get({id:c},function(a){"AVALDUS_LIIK_AKAD"===b?r(a,f):"AVALDUS_LIIK_FINM"===b?o(a,f):"AVALDUS_LIIK_OVORM"===b?p(a,f):"AVALDUS_LIIK_OKAVA"===b&&q(a,f)}):"AVALDUS_LIIK_AKADK"===b?a.isCreate?d.endpoint("/applications/student/"+c+"/validAcademicLeave").search(function(b){angular.isObject(b)&&angular.isNumber(b.id)?(a.application.validAcademicLeave=b,s(f)):f.reject("application.messages.academicLeaveApplicationNotfound")}):s(f):"AVALDUS_LIIK_VALIS"===b?t(f):"AVALDUS_LIIK_EKSMAT"===b?u(f):"AVALDUS_LIIK_MUU"===b&&v(f),f.promise.then(function(){a.applicationEditView=!0;var b=a.application.type.substring(a.application.type.lastIndexOf("_")+1).toLowerCase();a.templateUrlByType="application/templates/application.type."+b+"."+(a.isView?"view":"edit")+".html"},function(b){e.error(b),a.applicationEditView=!1})}var x=d.endpoint("/applications");a.removeFromArray=i.remove,a.auth=g.current.locals.auth,a.isCreate=g.current.locals.isCreate,a.isView=g.current.locals.isView,a.now=new Date,a.applicationEditView=!1,a.application={files:[],status:"AVALDUS_STAATUS_KOOST"};var y=g.current.locals.entity;angular.isDefined(y)&&m(y),angular.isDefined(g.current.params.student)&&angular.isDefined(g.current.params.type)&&(a.application.type=g.current.params.type,d.endpoint("/autocomplete/students?id="+g.current.params.student).get({},function(b){b&&1===b.totalElements&&(a.application.student=b.content[0])})),a.studyPeriodView=function(b){if(angular.isArray(a.studyPeriods)&&angular.isNumber(b))for(var c=0;c<a.studyPeriods.length;c++)if(a.studyPeriods[c].id===b)return n(a.studyPeriods[c])},a.subjectsListView=function(b){if(angular.isDefined(b)&&angular.isArray(b.subjectsSelected)&&angular.isArray(a.studentSubjects)){var c=[];return a.studentSubjects.forEach(function(d){-1!==b.subjectsSelected.indexOf(d.id)&&c.push(a.currentLanguageNameField(d))}),c.join(", ")}return""},a.applicationTypeChange=function(){a.application.student=void 0,"AVALDUS_LIIK_AKAD"===a.application.type?a.studentSearchCriteria={active:!0,nominalStudy:!0}:"AVALDUS_LIIK_AKADK"===a.application.type?a.studentSearchCriteria={active:!0,academicLeave:!0}:"AVALDUS_LIIK_VALIS"===a.application.type?a.studentSearchCriteria={studying:!0,higher:!0}:"AVALDUS_LIIK_OVORM"===a.application.type?a.studentSearchCriteria={studying:!0,higher:!0}:a.studentSearchCriteria={studying:!0}},a.$watch("application.student",function(b){angular.isObject(b)&&(a.isCreate?d.endpoint("/applications/student/"+b.id+"/applicable").search(function(c){angular.isObject(c[a.application.type])&&c[a.application.type].isAllowed===!0?w(a.application.type,b.id):e.error(c[a.application.type].reason)}):w(a.application.type,b.id))}),a.openAddFileDialog=function(){b.showDialog("application/file.add.dialog.html",function(b){b.addedFiles=a.application.files},function(b){var d=b.data;c.getFromLfFile(d.file[0],function(b){d.oisFile=b,a.application.files.push(d)})})},a.getUrl=c.getUrl,a.isStudentRepresentative=function(){return angular.isObject(a.auth)&&angular.isObject(a.application.student)&&a.auth.student===a.application.student.id&&a.auth.isParent()},a.submit=function(){d.endpoint("/applications/"+a.application.id+"/submit/").put().$promise.then(function(b){e.info("application.messages.submitted"),a.auth.isAdmin()||a.isView?m(b):f.url("/applications/"+a.application.id+"/view?_noback")})["catch"](angular.noop)},a.confirm=function(){d.endpoint("/applications/"+a.application.id+"/confirm/").put().$promise.then(function(b){e.info("application.messages.confirmed"),a.isView?m(b):f.url("/applications/"+a.application.id+"/view?_noback")})["catch"](angular.noop)},a.reject=function(){b.showDialog("application/reject.dialog.html",null,function(b){d.endpoint("/applications/"+a.application.id+"/reject/").put({reason:b.rejectReason}).$promise.then(function(b){e.info("application.messages.rejected"),a.isView?m(b):f.url("/applications/"+a.application.id+"/view?_noback")})["catch"](angular.noop)})},a.save=function(){if(a.applicationForm.$setSubmitted(),a.applicationForm.$valid){var b=new x(a.application);angular.isDefined(a.application.id)?b.$update().then(function(){e.info("main.messages.update.success"),m(b),a.applicationForm.$setPristine()})["catch"](angular.noop):b.$save().then(function(){e.info("main.messages.create.success"),f.url("/applications/"+b.id+"/edit?_noback")})["catch"](angular.noop)}},a["delete"]=function(){b.confirmDialog({prompt:"application.deleteconfirm"},function(){var b=new x(a.application);b.$delete().then(function(){e.info("main.messages.delete.success"),a.auth.isStudent()?a.back("#/applications/student"):a.back("#/applications")})["catch"](angular.noop)})},a.periodTypeChanged=function(){a.application.startDate=void 0,a.application.endDate=void 0,a.application.studyPeriodStart=void 0,a.application.studyPeriodEnd=void 0}}]),angular.module("hitsaOis").config(["$routeProvider","USER_ROLES",function(a,b){a.when("/applications",{templateUrl:"application/application.list.html",controller:"SimpleListController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}],clMapping:function(){return{type:"AVALDUS_LIIK",status:"AVALDUS_STAATUS"}},params:function(){return{order:"-inserted"}},url:function(){return"/applications"}},data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_AVALDUS]}}).when("/applications/new",{templateUrl:"application/application.html",controller:"ApplicationController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}],isCreate:function(){return!0}},data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_AVALDUS]}}).when("/applications/:id/:action",{templateUrl:function(a){return"edit"===a.action?"application/application.html":"application/application.view.html"},controller:"ApplicationController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}],entity:["QueryUtils","$route",function(a,b){return a.endpoint("/applications").get({id:b.current.params.id}).$promise}],isView:["$route",function(a){return"view"===a.current.params.action}]},data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_AVALDUS]}})}]),angular.module("hitsaOis").controller("ApplicationStudentController",["$scope","$route",function(a,b){a.auth=b.current.locals.auth;var c=b.current.locals.auth.student;a.studentApplication={type:b.current.params.type,student:{id:c},files:[],status:"AVALDUS_STAATUS_KOOST"}}]),angular.module("hitsaOis").controller("ApplicationStudentListController",["$scope","$location","$route","$q","QueryUtils","Classifier",function(a,b,c,d,e,f){a.auth=c.current.locals.auth;var g=c.current.locals.auth.student,h=f.valuemapper({type:"AVALDUS_LIIK",status:"AVALDUS_STAATUS"});e.createQueryForm(a,"/students/"+g+"/applications",{order:"type."+a.currentLanguageNameField()},h.objectmapper),d.all(h.promises).then(a.loadData),a.auth.isParent()||(a.applicationTypesApplicable=e.endpoint("/applications/student/"+g+"/applicable").search(),a.applicationTypes=f.queryForDropdown({mainClassCode:"AVALDUS_LIIK"}))}]),angular.module("hitsaOis").config(["$routeProvider","USER_ROLES",function(a,b){a.when("/applications/student",{templateUrl:"application/student/application.student.list.html",controller:"ApplicationStudentListController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}]},data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_AVALDUS]}}).when("/applications/student/new/:type",{templateUrl:"application/student/application.student.new.html",controller:"ApplicationStudentController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}],isCreate:function(){return!0}},data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_AVALDUS]}})}]),angular.module("hitsaOis").controller("AcademicCalendarController",["$scope","$route","QueryUtils",function(a,b,c){a.auth=b.current.locals.auth,a.schoolId=void 0!==a.auth&&a.auth.school?a.auth.school.id:b.current.params.schoolId,a.data=c.endpoint("/academicCalendar/"+a.schoolId).search()}]).controller("AcademicCalendarSchoolListController",["$scope","School","$location",function(a,b,c){a.schools=b.getSchoolsWithLogo(),a.openSchoolAcademicCalendar=function(a){c.path("academicCalendar/"+a)}}]),angular.module("hitsaOis").config(["$routeProvider",function(a){a.when("/academicCalendar/:schoolId?",{templateUrl:"academicCalendar/academic.calendar.view.html",controller:"AcademicCalendarController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}]}}).when("/academicCalendars",{templateUrl:"academicCalendar/academic.calendar.school.list.html",controller:"AcademicCalendarSchoolListController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}]}})}]),angular.module("hitsaOis").controller("BuildingEditController",["$route","$scope","FormUtils","QueryUtils",function(a,b,c,d){var e=a.current.params.id,f="/buildings",g=d.endpoint(f);e?b.record=g.get({id:e}):b.record=new g({}),b.buildingUniqueQuery={url:f+"/unique",id:e},b.update=function(){c.saveRecord(b.buildingForm,b.record,f),b.buildingForm.$setPristine()},b["delete"]=function(){c.deleteRecord(b.record,"/rooms/search?_noback",{prompt:"building.deleteconfirm"})}}]),angular.module("hitsaOis").config(["$routeProvider","USER_ROLES",function(a,b){a.when("/buildings/new",{templateUrl:"building/building.edit.html",controller:"BuildingEditController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}]},data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_HOONERUUM]}}).when("/buildings/:id/edit",{templateUrl:"building/building.edit.html",controller:"BuildingEditController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}]},data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_HOONERUUM]}})}]),angular.module("hitsaOis").controller("BaseModuleListController",["$scope","QueryUtils","$route",function(a,b,c){b.createQueryForm(a,"/basemodule"),a.auth=c.current.locals.auth;var d=b.endpoint("/autocomplete/curriculumsauto"),e=b.endpoint("/autocomplete/curriculumversions");a.formState={canCreate:a.auth.isAdmin()},a.searchCurriculums=function(a){return d.query({name:a}).$promise},a.searchCurriculumVersions=function(a){return e.query({name:a}).$promise},a.criteria.order="b."+a.currentLanguageNameField(),a.loadData()}]).controller("BaseModuleEditController",["$scope","QueryUtils","$route","message","ArrayUtils","dialogService","$location","$rootScope","$q",function(a,b,c,d,e,f,g,h,i){function j(){a.baseModuleId?(a.baseModule=s.get({id:a.baseModuleId}),a.baseModule.$promise.then(function(){p()})):a.baseModule=new s(v)}function k(){a.baseModule.$save().then(function(a){d.info("main.messages.create.success"),g.url("/basemodule/"+a.id+"/edit")})}function l(){a.baseModule.$update().then(function(){p(),d.info("main.messages.update.success"),a.baseModuleForm.$setPristine()})["catch"](function(a){"basemodule.errors.outcomehasconnections"===a.data._errors[0].code&&j()})}function m(b){angular.isDefined(b)?g.url("/basemodule/"+a.baseModuleId+"/"+b.id+"/edit"):g.url("/basemodule/"+a.baseModuleId+"/new")}function n(){return a.baseModuleForm.$setSubmitted(),a.baseModuleForm.$valid?!0:(d.error("main.messages.form-has-errors"),!1)}function o(){a.baseModule.outcomes.forEach(function(b){b.orderNr=a.baseModule.outcomes.indexOf(b)})}function p(){a.baseModule.outcomes?a.baseModule.outcomes.sort(function(a,b){return a.orderNr-b.orderNr}):a.baseModule.outcomes=[],a.baseModule.validFrom=new Date(a.baseModule.validFrom),a.baseModule.validThru&&(a.baseModule.validThru=new Date(a.baseModule.validThru)),u.promise.then(function(){a.baseModule.capacities?a.baseModule.capacities=q(a.baseModule.capacities.concat(a.capacities)):a.baseModule.capacities=a.capacities})}function q(a){for(var b=a.concat(),c=0;c<b.length;++c)for(var d=c+1;d<b.length;++d)b[c].capacityType===b[d].capacityType&&b.splice(d--,1);return b}var r="/basemodule",s=b.endpoint(r),t=b.endpoint(r+"/teachers"),u=i.defer();a.auth=c.current.locals.auth,a.baseModuleId=c.current.params.baseModuleId,a.capacities=b.endpoint("/autocomplete/schoolCapacityTypes").query({isHigher:!1}),a.capacities.$promise.then(function(a){a=a.map(function(a){a.capacityType=a.code}),u.resolve(a)})["catch"](function(a){u.reject(a)}),h.removeLastUrlFromHistory(function(a){return a&&-1!==a.indexOf("new")});var v={cvAssessment:"KUTSEHINDAMISVIIS_E",outcomes:[],capacities:a.capacities,themes:[]};a.isEditingOutcome=!1,a.editedOutcome=null,a.addOutcome=function(){angular.isString(a.outcomeEt)&&""!==a.outcomeEt&&(a.baseModule.outcomes.push({outcomeEt:a.outcomeEt,outcomeEn:a.outcomeEn,orderNr:a.baseModule.outcomes.length}),a.outcomeEt=void 0,a.outcomeEn=void 0)},a.editOutcome=function(b){a.isEditingOutcome=!0,a.editedOutcome=b,a.outcomeEt=b.outcomeEt,a.outcomeEn=b.outcomeEn},a.swap=function(b,c){var d=a.baseModule.outcomes[b];a.baseModule.outcomes[b]=a.baseModule.outcomes[c],a.baseModule.outcomes[c]=d,a.baseModuleForm.$setDirty()},a.saveOutcome=function(){angular.isString(a.outcomeEt)&&""!==a.outcomeEt&&(a.isEditingOutcome=!1,a.editedOutcome.outcomeEt=a.outcomeEt,a.editedOutcome.outcomeEn=a.outcomeEn,a.outcomeEt=void 0,a.outcomeEn=void 0)},a.removeFromArray=function(b,c){f.confirmDialog({prompt:"curriculum.itemDeleteConfirm"},function(){e.remove(b,c),a.baseModuleForm.$setDirty()})},a.hasThemes=function(){return a.baseModule&&a.baseModule.themes&&a.baseModule.themes.length>0},a.editTheme=function(b){angular.isDefined(a.baseModuleForm)&&a.baseModuleForm.$dirty===!0?f.confirmDialog({prompt:"main.messages.confirmFormDataNotSaved"},function(){m(b)}):m(b)},a.viewTheme=function(b){angular.isDefined(b)&&a.baseModuleId&&g.url("/basemodule/"+a.baseModuleId+"/"+b.id+"/view")},a.searchTeacher=function(a){return t.query({name:a}).$promise},a.edit=function(){g.url("/basemodule/"+a.baseModule.id+"/edit")},a["delete"]=function(){f.confirmDialog({prompt:"curriculum.prompt.deleteModule"},function(){a.baseModule.$delete().then(function(){d.info("main.messages.delete.success"),g.url("/basemodule")})})},a.save=function(){n()&&(o(),a.baseModule.id?l():k())},j()}]),angular.module("hitsaOis").config(["$routeProvider","USER_ROLES",function(a,b){function c(a,b,c){c.resolve().then(function(c){c.vocational||(a.error("main.messages.error.nopermission"),b.path("/"))})}function d(a,b,c){c.resolve().then(function(c){c.vocational||(a.error("main.messages.error.nopermission"),b.path("/"))})}c.$inject=["message","$location","AuthResolver"],d.$inject=["message","$location","AuthResolver"],a.when("/basemodule",{templateUrl:"baseModule/basemodule.list.html",controller:"BaseModuleListController",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}],checkAccess:d},data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_BAASMOODUL]}}).when("/basemodule/new",{templateUrl:"baseModule/basemodule.edit.html",controller:"BaseModuleEditController",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}],checkAccess:c},data:{authorizedRoles:[b.ROLE_OIGUS_M_TEEMAOIGUS_BAASMOODUL]}}).when("/basemodule/:baseModuleId/edit",{templateUrl:"baseModule/basemodule.edit.html",controller:"BaseModuleEditController",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}],checkAccess:c},data:{authorizedRoles:[b.ROLE_OIGUS_M_TEEMAOIGUS_BAASMOODUL]}}).when("/basemodule/:baseModuleId/view",{templateUrl:"baseModule/basemodule.view.html",controller:"BaseModuleEditController",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}],checkAccess:d},data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_BAASMOODUL]}})}]),angular.module("hitsaOis").controller("baseModuleThemeEditController",["$scope","QueryUtils","$route","message","Classifier","$location","$rootScope","dialogService","$q","$timeout",function(a,b,c,d,e,f,g,h,i,j){function k(a){for(var b=a.concat(),c=0;c<b.length;++c)for(var d=c+1;d<b.length;++d)b[c].capacityType===b[d].capacityType&&b.splice(d--,1);return b}function l(){return a.themeForm.$setSubmitted(),a.themeForm.$valid?a.theme.hours!==Math.round(r*a.theme.credits)&&a.theme.credits!==Math.round(a.theme.hours/r*10)/10?(d.error("curriculum.error.themeCreditsAndHoursMismatch"),!1):m()?!0:(d.error("curriculum.error.themeCapacitiesAndHoursMismatch"),!1):(d.error("main.messages.form-has-errors"),!1)}function m(){return a.theme.hours===a.theme.capacities.reduce(function(a,b){return angular.isDefined(b.hours)?a+=b.hours:a},0)}a.auth=c.current.locals.auth,a.baseModuleId=c.current.params.baseModuleId,a.themeId=c.current.params.baseModuleThemeId;var n="/basemodule/theme",o=b.endpoint(n),p=b.endpoint(n+"/basemodule"),q=i.defer(),r=26;a.capacities=b.endpoint("/autocomplete/schoolCapacityTypes").query({isHigher:!1}),a.capacities.$promise.then(function(a){a=a.map(function(a){a.capacityType=a.code}),q.resolve(a)})["catch"](function(a){q.reject(a)}),g.removeLastUrlFromHistory(function(a){return a&&-1!==a.indexOf("new")}),a.themeId?(a.theme=o.get({id:a.themeId}),a.theme.$promise.then(function(b){q.promise.then(function(){b.capacities?b.capacities=k(b.capacities.concat(a.capacities)):b.capacities=a.capacities}),j(function(){a.themeForm.$setPristine()})})):(a.theme=p.get({id:a.baseModuleId}),a.theme.$promise.then(function(b){b.capacities=a.capacities,b.assessment="KUTSEHINDAMISVIIS_E",b.outcomes=[],a.theme=new o(a.theme)})),a.setDefaultHours=function(){angular.isNumber(a.theme.credits)&&(a.theme.hours=Math.round(r*a.theme.credits),a.themeForm.hours.$setDirty())},a.assessments=e.queryForDropdown({mainClassCode:"KUTSEHINDAMISVIIS"}),a.setDefaultCredits=function(){a.theme.credits=Math.round(a.theme.hours/r*10)/10,a.themeForm.credits.$setDirty()},a.getDefaultUrl=function(){return"#/basemodule/"+a.baseModuleId+"/view"},a.save=function(){l()&&(angular.isDefined(a.themeId)?a.theme.$update().then(function(b){b.capacities=k(b.capacities.concat(a.capacities)),d.info("main.messages.update.success"),j(function(){a.themeForm.$setPristine()})}):a.theme.$save().then(function(b){d.info("main.messages.create.success"),f.url("/basemodule/"+a.baseModuleId+"/"+b.id+"/edit")}))},a.edit=function(){f.url("/basemodule/"+a.baseModuleId+"/"+a.themeId+"/edit")},a["delete"]=function(){h.confirmDialog({prompt:"curriculum.prompt.deleteTheme"},function(){a.theme.$delete().then(function(){d.info("main.messages.delete.success"),f.url("/basemodule/"+a.baseModuleId+"/edit?_noback")})})}}]),angular.module("hitsaOis").config(["$routeProvider","USER_ROLES",function(a){function b(a,b,c,d,e){d.resolve().then(function(d){
c.includes(d.authorizedRoles,e.ROLE_OIGUS_M_TEEMAOIGUS_BAASMOODUL)&&d.vocational||(a.error("main.messages.error.nopermission"),b.path("/"))})}function c(a,b,c,d,e){d.resolve().then(function(d){c.includes(d.authorizedRoles,e.ROLE_OIGUS_V_TEEMAOIGUS_BAASMOODUL)&&d.vocational||(a.error("main.messages.error.nopermission"),b.path("/"))})}b.$inject=["message","$location","ArrayUtils","AuthResolver","USER_ROLES"],c.$inject=["message","$location","ArrayUtils","AuthResolver","USER_ROLES"],a.when("/basemodule/:baseModuleId/new",{templateUrl:"baseModule/theme/basemodule.theme.edit.html",controller:"baseModuleThemeEditController",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}],checkAccess:b}}).when("/basemodule/:baseModuleId/:baseModuleThemeId/edit",{templateUrl:"baseModule/theme/basemodule.theme.edit.html",controller:"baseModuleThemeEditController",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}],checkAccess:b}}).when("/basemodule/:baseModuleId/:baseModuleThemeId/view",{templateUrl:"baseModule/theme/basemodule.theme.view.html",controller:"baseModuleThemeEditController",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}],checkAccess:c}})}]),angular.module("hitsaOis").controller("HomeController",["$scope","School","$location",function(a,b,c){a.schools=b.getSchoolsWithLogo(),a.openSchoolCurriculumSearch=function(a){c.path("curriculums/"+a)}}]).controller("AuthenticatedHomeController",["$rootScope","$scope","$timeout","AUTH_EVENTS","AuthService","USER_ROLES","ArrayUtils","QueryUtils","$resource","config","Session","$filter",function(a,b,c,d,e,f,g,h,i,j,k,l){function m(a){this.promises={},this.lock=!0,this.finishEvent=a,this.addPromise=function(a,b,c,d){var e="function"==typeof b.then;e&&(b.then(c),null!==d||void 0!==d?(b["catch"](function(b){throw this.setFinish(a),b}),b["catch"](d)):b["catch"](function(){this.setFinish(a)}),this.promises[a]=b)},this.setFinish=function(a){a in this.promises&&delete this.promises[a],this.finish()},this.enable=function(){this.lock=!1,this.finish()},this.reset=function(){this.lock=!0,this.promises={}},this.finish=function(){!this.lock&&angular.equals(this.promises,{})&&(this.finishEvent(),this.lock=!0)}}function n(){b.pageLoadingHandler.reset(),b.loadGeneralMessages(),b.loadUnreadMessages(),p(),q(),r(),s(),t(),o(),b.pageLoadingHandler.enable()}function o(){k.studentId?(b.sessionStudentId=k.studentId,u()):(b.sessionStudentId=null,b.tasks=[],b.studentAbsences=[],b.absenceGroups=[],b.lastResults=[])}function p(){-1!==["ROLL_O"].indexOf(k.roleCode)?(b.hasUnconfirmedPrograms=h.endpoint("/subject/subjectProgram/hasunconfirmed").get(),b.hasUncompletedPrograms=h.endpoint("/subject/subjectProgram/hasuncompleted").get()):(b.hasUnconfirmedPrograms=void 0,b.hasUncompletedPrograms=void 0)}function q(){-1!==["ROLL_A"].indexOf(k.roleCode)&&g.includes(k.authorizedRoles,f.ROLE_OIGUS_M_TEEMAOIGUS_BAASMOODUL)?b.hasExpiredBaseModules=h.endpoint("/basemodule/expiredhascurriculums").query():b.hasExpiredBaseModules=void 0}function r(){-1!==["ROLL_A","ROLL_O"].indexOf(k.roleCode)?h.endpoint("/absences/hasUnaccepted").search().$promise.then(function(a){b.hasUnacceptedAbsences=a.hasUnaccepted}):b.hasUnacceptedAbsences=void 0}function s(){-1!==["ROLL_A","ROLL_O"].indexOf(k.roleCode)?h.endpoint("/journals/unconfirmedJournalsInfo").search().$promise.then(function(a){b.unconfirmedJournals={count:a.unconfirmedJournalCount,anyFinished:a.hasEndedUnconfirmedJournals}}):b.unconfirmedJournals=void 0}function t(){-1!==["ROLL_A"].indexOf(k.roleCode)?b.pageLoadingHandler.addPromise("expiringOccupationStandards",h.endpoint("/curriculumOccupation/expiringOccupationStandards").query().$promise,function(a){b.expiringOccupationStandards=a,0===a.length&&b.pageLoadingHandler.setFinish("expiringOccupationStandards")}):b.expiringOccupationStandards=void 0}function u(){b.pageLoadingHandler.addPromise("studentTasks",h.endpoint("/journals/studentJournalTasks/").search({studentId:k.studentId}).$promise,function(a){b.tasks={todayTasks:[],tomorrowTasks:[],laterTasks:[]},angular.isDefined(a.tasks)&&a.tasks.length>0?(v(),w(a.tasks.reverse()),b.tasks.todayTasks.length>0||b.tasks.tomorrowTasks.length>0||b.tasks.laterTasks.length>0||b.pageLoadingHandler.setFinish("studentTasks")):b.pageLoadingHandler.setFinish("studentTasks")}),b.testTaskTypes=["SISSEKANNE_H","SISSEKANNE_L","SISSEKANNE_E","SISSEKANNE_I","SISSEKANNE_P","SISSEKANNE_R"],b.pageLoadingHandler.addPromise("studentAbsences",h.endpoint("/journals/studentJournalAbsences/").query({studentId:k.studentId}).$promise,function(a){b.studentAbsences=a,b.absenceGroups=b.getGroupedValues(b.studentAbsences,"entryDate","hoisDate");for(var c in b.absenceGroups){var d=0,e=0;for(var f in b.absenceGroups[c])"PUUDUMINE_H"===b.absenceGroups[c][f].absenceCode?d++:"PUUDUMINE_P"===b.absenceGroups[c][f].absenceCode&&e++;b.absenceGroups[c].PUUDUMINE_H=d>0?d:null,b.absenceGroups[c].PUUDUMINE_P=e>0?e:null}0===a.length&&b.pageLoadingHandler.setFinish("studentAbsences")}),b.pageLoadingHandler.addPromise("lastResults",h.endpoint("/journals/studentJournalLastResults/").query({studentId:k.studentId}).$promise,function(a){b.lastResults=a,0===a.length&&b.pageLoadingHandler.setFinish("lastResults")}),b.declaration=void 0,"ROLL_L"!==k.roleCode&&b.pageLoadingHandler.addPromise("declaration",h.endpoint("/declarations/current").get().$promise,function(a){b.declaration=a,(angular.isUndefined(a.subjects)||0===a.subjects.length)&&b.pageLoadingHandler.setFinish("declaration")})}function v(){var a,c;a=new Date,a.setHours(0,0,0,0),c=new Date,c.setDate(a.getDate()+1),c.setHours(0,0,0,0),b.todaysDate=a,b.tomorrowsDate=c}function w(a){b.tasks={todayTasks:[],tomorrowTasks:[],laterTasks:[]};for(var c=0;c<a.length;c++){var d=new Date(a[c].date);d.setHours(0,0,0,0),d.getTime()===b.todaysDate.getTime()?b.tasks.todayTasks.push(a[c]):d.getTime()===b.tomorrowsDate.getTime()?b.tasks.tomorrowTasks.push(a[c]):d>b.tomorrowsDate&&b.tasks.laterTasks.push(a[c])}}function x(a,b){0===b.children.length?b.appendChild(a):b.insertBefore(a,b.children[0])}function y(a){for(var b=0,c=0;c<a.children.length;c++)b+=a.children[c].clientHeight;return b}b.finish=function(){return c(function(){b.balance()},100),!1},b.pageLoadingHandler=new m(b.finish),b.criteria={size:5,page:1,order:"inserted, title, id"},b.generalmessages={},b.loadGeneralMessages=function(){if(b.showGeneralMessages=-1===["ROLL_P","ROLL_V"].indexOf(k.roleCode),b.showGeneralMessages){var a=h.getQueryParams(b.criteria);b.generalmessages.$promise=h.endpoint("/generalmessages/show").search(a),b.pageLoadingHandler.addPromise("generalMessages",b.generalmessages.$promise.$promise,function(a){b.generalmessages.content=a.content,b.generalmessages.totalElements=a.totalElements,0===a.totalElements&&b.pageLoadingHandler.setFinish("generalMessages")})}},b.unreadMessageCriteria={size:5,page:1,order:"-inserted"},b.unreadMessages={},b.loadUnreadMessages=function(){var a=["ROLL_P","ROLL_L","ROLL_O","ROLL_T","ROLL_A"];if(b.showUnreadMessages=-1!==a.indexOf(k.roleCode),b.showUnreadMessages){var c=h.getQueryParams(b.unreadMessageCriteria);b.unreadMessages.$promise=h.endpoint("/message/received/mainPage").search(c),b.pageLoadingHandler.addPromise("unreadMessages",b.unreadMessages.$promise.$promise,function(a){b.unreadMessages.content=a.content,b.unreadMessages.totalElements=a.totalElements,0===a.totalElements&&b.pageLoadingHandler.setFinish("unreadMessages")})}},b.readMessage=function(b){b.clicked=!b.clicked,b.isRead||i(j.apiUrl+"/message/"+b.id).update(null).$promise.then(function(){b.isRead=!0,h.endpoint("/message/received/new").get().$promise.then(function(b){a.unreadMessages=b.unread})})},b.openCloseDetails=function(a){a.clicked=!a.clicked},e.isAuthenticated()&&n(),b.$on(d.loginSuccess,n),b.$on(d.userChanged,n);var z=3;b.numberOfOccupationStandards=z,b.toggleNumberOfOccupationStandards=function(){b.numberOfOccupationStandards=b.numberOfOccupationStandards?void 0:z},b.getGroupedValues=function(a,b,c){for(var d={},e=0;e<a.length;e++){var f=null===c?a[e][b]:l(c)(a[e][b]);null===f&&(f=""),f in d?d[f].push(a[e]):d[f]=[a[e]]}return d},b.translateObjectToArray=function(a){var b=[];for(var c in a)for(var d in a[c])b.push(a[c][d]);return b},b.balance=function(){var a=document.getElementById("column-1"),b=document.getElementById("column-2");if(null!==a&&null!==b){if(0!==b.children.length)for(var c=b.children.length,d=0;c>d;d++)a.appendChild(b.children[0]);for(var e=a.children.length,f=y(a),g=f/2,h=e-1;h>=0;h--){var i=y(b);if(!(i+a.children[h].clientHeight<g)){var j=Math.abs(i-g),k=Math.abs(i+a.children[h].clientHeight-g);j>k&&x(a.children[h],b);break}x(a.children[h],b)}}return!1}}]),angular.module("hitsaOis").config(["$routeProvider",function(a){a.when("/",{templateUrl:"home/home.html",controller:"HomeController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}]}})}]),angular.module("hitsaOis").controller("LoginController",["message","$rootScope","$scope","AuthService","AUTH_EVENTS","$location","config","$mdDialog","$timeout","ArrayUtils","PUBLIC_ROUTES","$route","QueryUtils",function(a,b,c,d,e,f,g,h,i,j,k,l,m){function n(a){angular.isObject(a)&&-1===["ROLL_V","ROLL_X"].indexOf(a.roleCode)&&m.endpoint("/message/received/new").get().$promise.then(function(a){b.unreadMessages=a.unread}),angular.isObject(a)&&angular.isObject(a.school)&&a.school.logo?b.state.logo="data:image/JPEG;base64,"+a.school.logo:b.state.logo="",angular.isObject(a)&&angular.isNumber(a.user)?b.state.userWorkplace=a.user:b.state.userWorkplace=null}function o(a){c.hideDialog&&h.hide(),a?(b.$broadcast(e.loginSuccess),b.setCurrentUser(a),n(a)):(b.setCurrentUser(null),n(null),l.current&&j.contains(k,l.current.originalPath)||f.path("/"))}function p(){b.$broadcast(e.loginFailed),f.path("/"),a.error("main.login.error")}function q(a){c.jwt=a.jwt,a.data.errorCode===t?(p(),c.showMessage("main.login.mobileid.notMobileIdUser")):a.data.errorCode?p():a.data.challengeID?(c.showMobileId(a.data.challengeID),c.mobileIdPolls=0,i(s,g.mobileIdInitialDelay)):p()}function r(a){"USER_AUTHENTICATED"===a.status?(c.hideDialog=!1,h.hide(),d.login().then(o,p)):"OUTSTANDING_TRANSACTION"===a.status?(c.mobileIdPolls++,c.mobileIdPolls<g.mobileIdMaxPolls&&i(s,g.mobileIdPollInterval)):(console.log("mobileIdStatus: "+a.status),h.hide(),p())}function s(){d.pollMobileIdStatus(c.jwt).then(r,p)}var t=301;b.loggedOut=function(){b.setCurrentUser(null),n(null)};var u=function(){c.hideDialog=!1;var a=f.search()._code;a?d.login({Authorization:"Bearer "+a}).then(o,p):d.login().then(o,p)},v=function(a){c.hideDialog=!1,d.loginLdap(a).then(o,p)},w=function(a){d.loginMobileId(a).then(q,p)};u(),b.$on(e.reAuthenticate,function(){u()}),c.logout=function(){d.logout()["finally"](function(){b.loggedOut(),f.path("/")})},c.changeUser=function(){d.changeUser(b.state.userWorkplace).then(function(a){angular.isObject(a)?(n(a),b.setCurrentUser(a),f.path("/"),b.$broadcast(e.userChanged)):(b.loggedOut(),f.path("/"))})},c.showLogin=function(){h.show({controller:["$scope","School","$localStorage","config",function(a,c,d,e){c.getLdap().$promise.then(function(c){a.schools=c,a.schools.sort(function(a,c){return b.currentLanguageNameField(a).localeCompare(b.currentLanguageNameField(c))})}),a.credentials={},d.ldapschool&&(a.credentials.school=d.ldapschool),a.mobilenumber="372",a.cancel=function(){h.hide()},a.currentLanguageNameField=b.currentLanguageNameField,a.login=function(){a.userLoginForm.$setSubmitted(),a.userLoginForm.$valid&&a.credentials.school&&a.credentials.username&&a.credentials.password&&(d.ldapschool=a.credentials.school,v(a.credentials))},a.idCardLoginUrl=e.idCardLoginUrl,a.mIdLogin=function(){a.mobilenumber&&w(a.mobilenumber)}}],templateUrl:"login/login.dialog.html",parent:angular.element(document.body),clickOutsideToClose:!0})},c.showMobileId=function(a){h.show({controller:["$scope",function(b){b.challengeID=a}],templateUrl:"login/m-id.login.dialog.html",parent:angular.element(document.body),clickOutsideToClose:!1})},c.showMessage=function(a){h.show({controller:["$scope",function(b){b.message=a}],templateUrl:"login/message.login.dialog.html",parent:angular.element(document.body),clickOutsideToClose:!0})}}]),angular.module("hitsaOis").controller("CertificateSearchController",["$scope","$sessionStorage","Classifier","DataUtils","QueryUtils","$q","$route","CertificateType","CertificateUtil",function(a,b,c,d,e,f,g,h,i){a.auth=g.current.locals.auth;var j=c.valuemapper({type:"TOEND_LIIK",status:"TOEND_STAATUS"});e.createQueryForm(a,"/certificate",{order:"type."+a.currentLanguageNameField()},j.objectmapper),d.convertStringToDates(a.criteria,["insertedFrom","insertedThru"]),a.auth.isStudent()&&(a.afterLoadData=function(b){a.tabledata.content=b.content,a.tabledata.totalElements=b.totalElements,j.objectmapper(b.content)},a.certificateTypes=c.queryForDropdown({mainClassCode:"TOEND_LIIK",filterValues:[h.TOEND_LIIK_MUU]}),e.endpoint("/certificate/student/status").get({id:a.auth.student}).$promise.then(function(b){a.certificateTypes.$promise.then(function(){var c=i.getForbiddenTypes(b.status);a.certificateTypes=a.certificateTypes.filter(function(a){return-1===c.indexOf(a.code)})})})["catch"](angular.noop)),f.all(j.promises).then(a.loadData)}]).controller("CertificateStudentOrderController",["$scope","Classifier","QueryUtils","$route","$location","dialogService","message","$rootScope",function(a,b,c,d,e,f,g,h){function i(a){var b=document.getElementById("content");b&&(b.innerHTML=a)}function j(){c.endpoint(k+"/content").search({type:a.record.type,addOutcomes:a.record.addOutcomes}).$promise.then(function(b){a.record.content=b.content,i(a.record.content)})["catch"](angular.noop)}var k="/certificate",l=c.endpoint(k+"/order"),m=d.current.params.id;h.removeLastUrlFromHistory(function(a){return a&&(-1!==a.indexOf("certificate/"+m+"/view")||-1!==a.indexOf("certificate/new"))}),a.record=new l({type:d.current.params.typeCode}),b.queryForDropdown({mainClassCode:"TOEND_LIIK"}).$promise.then(function(b){var c=a.record.type,d=b.find(function(a){return a.code===c});a.record.headline=d?d.nameEt:""}),a.record.type&&j(),a.addOutcomesChanged=function(){a.record.type&&j()},a.save=function(){return a.certificateEditForm.$setSubmitted(),a.certificateEditForm.$valid||a.record.signatoryIdcode?void f.confirmDialog({prompt:"certificate.ekisconfirm"},function(){a.record.$save().then(function(){g.info("main.messages.create.success"),e.url(k+"/"+a.record.id+"/view?_noback")})["catch"](function(a){a&&a.data&&a.data.data&&a.data.data.id&&e.url(k+"/"+a.data.data.id+"/view?_noback")})}):void g.error("main.messages.form-has-errors")}}]).controller("CertificateEditController",["$scope","QueryUtils","$route","$location","dialogService","message","$q","CertificateUtil","$rootScope","$timeout",function(a,b,c,d,e,f,g,h,i,j){function k(){a.record.student&&m().then(function(b){var c=b.fullname;a.student={id:b.id,nameEt:c,nameEn:c}}),a.contentEditable()||l(a.record.content),a.otherFound=!0,a.certificateEditForm&&a.certificateEditForm.$setPristine()}function l(a){var b=document.getElementById("content");b&&(b.innerHTML=a)}function m(){return b.endpoint(r+"/otherStudent").search({id:a.record.student}).$promise.then(function(b){return a.record.otherName=b.fullname,a.record.otherIdcode=b.idcode,a.otherFound=!0,a.forbiddenTypes=h.getForbiddenTypes(b.status),b})["catch"](angular.noop)}function n(){a.record.id||(a.record.content=null,a.record.type&&(a.record.student||a.record.otherIdcode&&a.isOtherCertificate())&&b.endpoint(r+"/content").search({student:a.record.student,type:a.record.type,otherIdcode:a.record.otherIdcode,otherName:a.record.otherName,addOutcomes:a.record.addOutcomes}).$promise.then(function(b){a.record.content=b.content,a.contentEditable()||l(a.record.content)})["catch"](angular.noop))}function o(){return a.certificateEditForm.$setSubmitted(),a.certificateEditForm.$valid?!0:(f.error("main.messages.form-has-errors"),!1)}function p(a){f.info("main.messages.create.success"),d.url(r+"/"+a.id+"/edit?_noback")}function q(){a.record.signatoryName=a.signatories.filter(function(b){return b.idcode===a.record.signatoryIdcode})[0].name}var r="/certificate",s=b.endpoint(r),t=b.endpoint(r+"/order"),u=c.current.params.id,v=!1;a.forbiddenTypes=[],i.removeLastUrlFromHistory(function(a){return a&&(-1!==a.indexOf("certificate/"+u+"/view")||-1!==a.indexOf("certificate/new"))}),a.contentEditable=function(){return h.contentEditable(a.record)},a.isOtherCertificate=function(){return h.isOtherCertificate(a.record)},u?a.record=s.get({id:u},k):(a.record=new s,k()),a.signatories=b.endpoint(r+"/signatories").query(),a.$watch("record.type",n),a.$watch("record.student",function(){a.record.student||(a.forbiddenTypes=[]),n()}),a.$watch("record.otherIdcode",function(){a.record.otherIdcode&&j(n,1e3),a.record&&a.record.otherIdcode&&a.certificateEditForm.idcode&&a.certificateEditForm.idcode.$valid&&a.getNameByIdcode()}),a.$watch("record.otherName",function(){a.record.otherName&&a.record.otherIdcode&&j(n,1e3)}),a.addOutcomesChanged=function(){a.record.student&&j(n,1e3)};var w=b.endpoint("/autocomplete/students");a.querySearch=function(b){if(b.length>=3){var c=g.defer();return w.search({name:b,active:h.onlyActiveStudents(a.record.type),finished:h.onlyFinishedStudents(a.record.type)},function(a){c.resolve(a.content)}),c.promise}return{}},a.studentChanged=function(){a.student&&a.record.student!==a.student.id?(a.record.student=a.student.id,m()):a.student||(a.record.student=null,a.otherFound=!1,v||(a.record.otherName=null,a.record.otherIdcode=null),v=!1)},a.save=function(){o()&&(q(),a.record.id?a.record.$update(k).then(f.updateSuccess)["catch"](angular.noop):a.record.$save().then(p)["catch"](angular.noop))},a.saveAndOrder=function(){o()&&e.confirmDialog({prompt:"certificate.ekisconfirm"},function(){function b(a){d.url(r+"/"+a.id+"/view?_noback")}q();var c=new t(a.record);a.record.id?c.$update(b).then(f.updateSuccess)["catch"](angular.noop):c.$save(b).then(function(){f.info("main.messages.create.success")})["catch"](function(a){a&&a.data&&a.data.data&&a.data.data.id&&d.url(r+"/"+a.data.data.id+"/edit?_noback")})})},a["delete"]=function(){e.confirmDialog({prompt:"certificate.deleteconfirm"},function(){a.record.$delete().then(function(){f.info("main.messages.delete.success"),i.back(r+"?_noback")})["catch"](angular.noop)})},a.otherFound=!1,a.idcodePattern="^[1-6][0-9]{2}[0-1][0-9][0-3][0-9][0-9]{4}",a.getNameByIdcode=function(){b.endpoint(r+"/otherStudent",{get:{method:"GET"}}).get({idcode:a.record.otherIdcode}).$promise.then(function(b){b.id?(a.record.student=b.id,a.record.otherName=b.fullname,a.otherFound=!0,a.student={id:b.id,nameEt:b.fullname,nameEn:b.fullname,status:b.status},a.forbiddenTypes=h.getForbiddenTypes(b.status)):(v=!0,a.student=null,a.forbiddenTypes=[],b&&b.fullname?(a.record.otherName=b.fullname,a.otherFound=!0):a.otherFound=!1)})}}]).controller("CertificateViewController",["$location","$route","$scope","dialogService","ekisService","message","CertificateUtil","QueryUtils",function(a,b,c,d,e,f,g,h){function i(){c.record.student&&h.endpoint(j+"/otherStudent").search({id:c.record.student}).$promise.then(function(a){var b=a.fullname;c.record.otherName=b,c.record.otherIdcode=a.idcode,c.student={id:a.id,nameEt:b,nameEn:b}});var a=document.getElementById("content");a&&(a.innerHTML=c.record.content)}var j="/certificate",k=h.endpoint(j),l=b.current.params.id;c.auth=b.current.locals.auth,c.getCertificateUrl=e.getCertificateUrl,c.isOtherCertificate=function(){return g.isOtherCertificate(c.record)},c.order=function(){d.confirmDialog({prompt:"certificate.ekisconfirm"},function(){h.endpoint(j+"/orderFromEkis").update({id:l}).$promise.then(function(){b.reload()})["catch"](angular.noop)})},c["delete"]=function(){d.confirmDialog({prompt:"certificate.deleteconfirm"},function(){c.record.$delete().then(function(){f.info("main.messages.delete.success"),c.back("#"+j+"?_noback")})})},c.contentEditable=function(){return g.contentEditable(c.record)},c.record=k.get({id:l},i)}]).constant("CertificateType",{TOEND_LIIK_SOOR:"TOEND_LIIK_SOOR",TOEND_LIIK_OPI:"TOEND_LIIK_OPI",TOEND_LIIK_SESS:"TOEND_LIIK_SESS",TOEND_LIIK_KONTAKT:"TOEND_LIIK_KONTAKT",TOEND_LIIK_LOPET:"TOEND_LIIK_LOPET",TOEND_LIIK_MUU:"TOEND_LIIK_MUU"}).factory("CertificateUtil",["CertificateType","StudentUtil",function(a,b){return{isOtherCertificate:function(b){return b&&b.type===a.TOEND_LIIK_MUU},contentEditable:function(b){return b&&(b.type===a.TOEND_LIIK_MUU||b.type===a.TOEND_LIIK_KONTAKT||b.type===a.TOEND_LIIK_SESS)},onlyActiveStudents:function(b){return a.TOEND_LIIK_KONTAKT===b||a.TOEND_LIIK_OPI===b},onlyFinishedStudents:function(b){return a.TOEND_LIIK_LOPET===b},getForbiddenTypes:function(c){return b.isActive(c)?[a.TOEND_LIIK_LOPET]:b.hasFinished(c)?[a.TOEND_LIIK_OPI,a.TOEND_LIIK_KONTAKT]:[a.TOEND_LIIK_OPI,a.TOEND_LIIK_KONTAKT,a.TOEND_LIIK_LOPET]}}}]),angular.module("hitsaOis").config(["$routeProvider","USER_ROLES",function(a,b){a.when("/certificate",{templateUrl:"certificate/certificate.search.html",controller:"CertificateSearchController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}]},data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_TOEND]}}).when("/certificate/new",{templateUrl:"certificate/certificate.edit.html",controller:"CertificateEditController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}]},data:{authorizedRoles:[b.ROLE_OIGUS_M_TEEMAOIGUS_TOEND]}}).when("/certificate/:typeCode/new",{templateUrl:"certificate/certificate.student.new.html",controller:"CertificateStudentOrderController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}]},data:{authorizedRoles:function(a){return"ROLL_T"===a.roleCode}}}).when("/certificate/:id/edit",{templateUrl:"certificate/certificate.edit.html",controller:"CertificateEditController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}]},data:{authorizedRoles:[b.ROLE_OIGUS_M_TEEMAOIGUS_TOEND]}}).when("/certificate/:id/view",{templateUrl:"certificate/certificate.view.html",controller:"CertificateViewController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}]},data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_TOEND]}})}]),angular.module("hitsaOis").factory("Classifier",["$q","$resource","config","CacheFactory","QueryUtils",function(a,b,c,d,e){function f(){}return new d("classifierCache"),f.get=function(a){var d=b(c.apiUrl+"/classifier/:code");return d.get({code:a})},f.query=function(a,d){var f=b(c.apiUrl+"/classifier"),g=e.getQueryParams(a);return f.get(g,d)},f.queryForAutocomplete=function(a,d){var f=b(c.apiUrl+"/classifier/getPossibleParentClassifiers"),g=e.getQueryParams(a);return f.query(g,d)},f.queryForDropdown=function(e,f){function g(a){for(var b=0,c=a.length;c>b;b++)(void 0===e.higher||void 0!==e.vocational||e.higher===a[b].higher)&&(void 0===e.vocational||void 0!==e.higher||e.vocational===a[b].vocational)&&(void 0===e.vocational||void 0===e.higher||e.vocational===a[b].vocational||e.higher===a[b].higher)&&(void 0===e.filterValues||-1===e.filterValues.indexOf(a[b].code))&&l.push(angular.copy(a[b]));var d=e.order;d&&l.sort(function(a,b){var c=a[d],e=b[d];return e>c?-1:c>e?1:0}),m.resolve(l),l.$resolved=!0,angular.isFunction(f)&&m.promise.then(function(){f(l)})}var h=b(c.apiUrl+"/autocomplete/classifiers"),i={mainClassCode:e.mainClassCode};angular.isDefined(e.mainClassCodes)&&(i={mainClassCodes:e.mainClassCodes});var j=d.get("classifierCache"),k=i.mainClassCodes||i.mainClassCode,l=[],m=a.defer();l.$promise=m.promise;var n=j.get(k);return n&&n.$resolved?g(n):(l.$resolved=!1,n||(n=h.query(i),j.put(k,n)),n.$promise.then(function(){g(n)})),l},f.getChildren=function(a){return b(c.apiUrl+"/classifier/children/:code").query({code:a})},f.getPossibleConnections=function(a){var d=b(c.apiUrl+"/classifier/connections/:code");return d.query({code:a})},f.getParents=function(a){var d=b(c.apiUrl+"/classifier/parents/:code");return d.query({code:a})},f.getParentsWithMainClass=function(a,d){var e=b(c.apiUrl+"/classifier/parents/:parentsMainClassCode/:code");return e.query({parentsMainClassCode:a,code:d})},f.toMap=function(a){return a.reduce(function(a,b){return a[b.code]=b,a},{})},f.getSelectedCodes=function(a){for(var b=[],c=0,d=a.length;d>c;c++){var e=a[c];e._selected&&b.push(e.code)}return b},f.setSelectedCodes=function(a,b){for(var c=0,d=a.length;d>c;c++){var e=a[c];e._selected=-1!==b.indexOf(e.code)}},f.valuemapper=function(a){function b(a){return function(b){d[a]=f.toMap(b)}}function c(a,b){var c=d[a];return angular.isArray(b)?b.map(function(a){return c[a]}):c[b]}var d={},e=[];for(var g in a){var h=a[g];d[h]=f.queryForDropdown({mainClassCode:h}),e.push(d[h].$promise.then(b(h)))}var i=function(b){if(Array.isArray(b))return b.map(i);for(var d in a)b.hasOwnProperty(d)&&(b[d]=c(a[d],b[d]));return b};return{promises:e,objectmapper:i}},f.isValid=function(a){var b=(new Date).withoutTime();return(!a.validFrom||new Date(a.validFrom)<=b)&&(!a.validThru||new Date(a.validThru)>=b)},f}]),angular.module("hitsaOis").factory("classifierAutocomplete",["$translate","config","$resource",function(a,b,c){var d={},e=c(b.apiUrl+"/classifier/getPossibleParentClassifiers");return d.searchByName=function(b,c){if(!b||b.length<3)return[];var d={mainClassCode:c,name:b,language:"en"===a.use()?"EN":"ET"};return e.query(d).$promise},d}]),angular.module("hitsaOis").factory("ClassifierConnect",["QueryUtils",function(a){function b(a){this.classifierCode=a.classifierCode,this.connectClassifierCode=a.connectClassifierCode}return b.query=function(b,c){var d=a.getQueryParams(b);return a.endpoint("/classifierConnect").search(d,c)},b.queryAll=function(b,c){var d=a.getQueryParams(b);return a.endpoint("/classifierConnect/all").query(d,c)},b.sendListOfParents=function(b,c){return a.endpoint("/classifierConnect/changeParents/"+b.code).save(c)},b}]),angular.module("hitsaOis").controller("ClassifierContentEditController",["$scope","$route","Classifier","classifierAutocomplete","$location","message","ClassifierConnect","dialogService","QueryUtils","DataUtils",function(a,b,c,d,e,f,g,h,i,j){function k(){a.parents=[],s&&(a.classifier=t.get({id:s},function(){j.convertStringToDates(a.classifier,["validFrom","validThru"]),l(a.classifier.code),m(a.classifier.code)})),n()}function l(b){c.getParents(b).$promise.then(function(b){a.parents=b})}function m(b){c.getChildren(b).$promise.then(function(b){a.children=b,a.hasChildren=b.length>0})}function n(){a.mainClassCode=b.current.params.mainClassCode,a.mainClass=c.get(a.mainClassCode).$promise.then(function(b){a.mainClass=b,o()})}function o(){c.getPossibleConnections(a.mainClassCode).$promise.then(function(b){a.possibleConnections=b})}function p(){g.sendListOfParents(a.classifier,a.parents),a.classifier.id=a.classifier.code,a.classifier.$update().then(function(){f.info("main.messages.create.success"),a.classifierForm.$setPristine()})}function q(){a.classifier.value=a.classifier.value.toUpperCase(),a.classifier.mainClassCode=a.mainClassCode,a.classifier.code=a.classifier.mainClassCode+"_"+a.classifier.value,a.classifier.valid=!0,a.classifier.id=a.classifier.code,new t(a.classifier).$save().then(function(b){g.sendListOfParents(b,a.parents),f.info("main.messages.create.success"),e.url("/classifier/"+a.mainClassCode+"/"+b.code+"/edit?_noback")})}function r(b){return 0===a.parents.filter(function(a){return a.code===b.code}).length}var s=b.current.params.codeThis,t=i.endpoint("/classifier");k(),a.save=function(){a.classifierForm.$setSubmitted(),a.classifierForm.$valid?a.classifier.code?p():q():f.error("main.messages.form-has-errors")},a["delete"]=function(){h.confirmDialog({prompt:"classifier.deleteconfirm"},function(){a.classifier.id=a.classifier.code,a.classifier.$delete().then(function(){f.info("main.messages.delete.success"),e.path("/classifier/"+a.mainClassCode)})})},a.querySearch=function(a,b){return d.searchByName(a,b)},a.addParent=function(b){b&&r(b)&&(a.parents.push(b),a.classifierForm.$setDirty())},a.removeParent=function(b){h.confirmDialog({prompt:"classifier.prompt.deleteParent"},function(){a.parents.splice(a.parents.indexOf(b),1),a.classifierForm.$setDirty()})}}]),angular.module("hitsaOis").controller("ClassifierContentListController",["$route","$scope","Classifier","QueryUtils",function(a,b,c,d){b.mainClassCode=a.current.params.code,d.createQueryForm(b,"classifier.list",{order:"value"}),b.mainClass=c.get(b.mainClassCode),b.loadData=function(){var a=angular.extend({},b.criteria,{mainClassCode:b.mainClassCode});b.toStorage("classifier.list",d.getQueryParams(a)),b.tabledata.$promise=c.query(a,b.afterLoadData).$promise},b.isValid=function(a){return(!a.validFrom||new Date(a.validFrom)<=new Date)&&(!a.validThru||new Date(a.validThru)>=new Date)},b.loadData()}]),angular.module("hitsaOis").config(["$routeProvider","USER_ROLES",function(a,b){a.when("/classifier",{templateUrl:"classifier/classifier.list.html",controller:"SimpleListController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}],params:["$translate",function(a){return{order:"en"===a.use()?"nameEn":"nameEt"}}],url:function(){return"/classifier/heads"}},data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_KLASSIFIKAATOR]}}).when("/classifier/:code",{templateUrl:"classifier/classifier.content.list.html",controller:"ClassifierContentListController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}]},data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_KLASSIFIKAATOR]}}).when("/classifier/:mainClassCode/new",{templateUrl:"classifier/classifier.content.edit.html",controller:"ClassifierContentEditController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}]},data:{authorizedRoles:[b.ROLE_OIGUS_M_TEEMAOIGUS_KLASSIFIKAATOR]}}).when("/classifier/:mainClassCode/:codeThis/edit",{templateUrl:"classifier/classifier.content.edit.html",controller:"ClassifierContentEditController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}]},data:{authorizedRoles:[b.ROLE_OIGUS_M_TEEMAOIGUS_KLASSIFIKAATOR]}})}]),angular.module("hitsaOis").controller("SaisClassifierListController",["$scope","message","QueryUtils",function(a,b,c){a.saisImport=function(){c.endpoint("/saisClassifier/saisImport").save().$promise.then(function(){b.info("saisClassifier.importFinished")})},c.createQueryForm(a,"/saisClassifier",{order:"en"===a.currentLanguage()?"nameEn":"nameEt"}),a.loadData()}]),angular.module("hitsaOis").config(["$routeProvider","USER_ROLES",function(a,b){a.when("/saisClassifier",{templateUrl:"saisClassifier/saisClassifier.list.html",controller:"SaisClassifierListController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}]},data:{authorizedRoles:function(a,c){var d=c||[];return-1!==d.indexOf(b.ROLE_OIGUS_V_TEEMAOIGUS_KLASSIFIKAATOR)&&-1!==d.indexOf(b.ROLE_OIGUS_V_TEEMAOIGUS_ANDMEVAHETUS_SAIS)}}}).when("/saisClassifier/:code",{templateUrl:"saisClassifier/saisClassifier.content.list.html",
controller:"SimpleListController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}],params:function(){return{order:"value"}},url:["$route",function(a){return"/saisClassifier/"+a.current.params.code}]},data:{authorizedRoles:[b.ROLE_OIGUS_M_TEEMAOIGUS_KLASSIFIKAATOR]}})}]),angular.module("hitsaOis").config(["$routeProvider","USER_ROLES",function(a,b){a.when("/committees/:type",{templateUrl:"committee/committee.search.html",controller:"CommitteeSearchController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}]},data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_KOMISJON]}}).when("/committees/:type/new",{templateUrl:"committee/committee.edit.html",controller:"CommitteeEditViewController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}]},data:{authorizedRoles:[b.ROLE_OIGUS_M_TEEMAOIGUS_KOMISJON]}}).when("/committees/:type/:id/edit",{templateUrl:"committee/committee.edit.html",controller:"CommitteeEditViewController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}]},data:{authorizedRoles:[b.ROLE_OIGUS_M_TEEMAOIGUS_KOMISJON]}}).when("/committees/:type/:id/view",{templateUrl:"committee/committee.view.html",controller:"CommitteeEditViewController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}]},data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_KOMISJON]}})}]),angular.module("hitsaOis").controller("CommitteeSearchController",["$scope","$route","QueryUtils","USER_ROLES","AuthService",function(a,b,c,d,e){a.canEdit=e.isAuthorized(d.ROLE_OIGUS_M_TEEMAOIGUS_KOMISJON);var f="/committees";a.committeeType=b.current.params.type,a.showName=-1!==["KOMISJON_T","KOMISJON_V"].indexOf(a.committeeType),a.showPersonSearch=-1!==["KOMISJON_T","KOMISJON_V"].indexOf(a.committeeType),c.createQueryForm(a,f,{type:a.committeeType,order:"c.id"});var g=a.clearCriteria;a.clearCriteria=function(){g(),a.criteria.type=a.committeeType},a.loadData();var h;a.criteria&&(h=a.criteria.member),a.members=c.endpoint(f+"/members").query(function(){h&&(a.criteria.member=a.members.find(function(a){return a.id===h.id&&a.nameEt===h.nameEt}))}),a.$watch("criteria.member",function(){a.criteria.member?a.criteria.member.id?(a.criteria.teacher=a.criteria.member.id,a.criteria.memberName=null):(a.criteria.teacher=null,a.criteria.memberName=a.criteria.member.nameEt):(a.criteria.teacher=null,a.criteria.memberName=null)})}]),angular.module("hitsaOis").controller("CommitteeEditViewController",["$scope","dialogService","QueryUtils","message","ArrayUtils","$route","$location","orderByFilter","DataUtils","$rootScope","$q","Classifier","ScholarshipUtils",function(a,b,c,d,e,f,g,h,i,j,k,l,m){function n(){i.convertStringToDates(a.record,["validFrom","validThru"]),a.record.members=h(a.record.members,["memberName"]),k.all(u.promises).then(function(){a.record.scholarshipDecisions&&u.objectmapper(a.record.scholarshipDecisions)}),a.committeeEditForm&&a.committeeEditForm.$setPristine()}function o(){return 1===a.record.members.filter(p).length}function p(a){return a.isChairman}function q(){return a.committeeEditForm.$setSubmitted(),a.committeeEditForm.$valid?o()?!0:(d.error("committee.error.chairman"),!1):(d.error("main.messages.form-has-errors"),!1)}var r="/committees",s=f.current.params.id;a.committeeType=f.current.params.type,a.showName=-1!==["KOMISJON_T","KOMISJON_V"].indexOf(a.committeeType),a.showPersonSearch=-1!==["KOMISJON_T","KOMISJON_V"].indexOf(a.committeeType),a.formState={};var t=c.endpoint(r),u=l.valuemapper({scholarshipType:"STIPTOETUS"});j.removeLastUrlFromHistory(function(a){return a&&(-1!==a.indexOf("committees/"+s+"/view")||-1!==a.indexOf("committees/new"))}),s?a.record=t.get({id:s},n):a.record=new t({type:a.committeeType,members:[]}),a.addMember=function(){a.record.members.push({isExternal:!1,isChairman:!1}),a.committeeEditForm.$setDirty()},a.removeMember=function(b){e.remove(a.record.members,b),a.committeeEditForm.$setDirty()},a.assingChairman=function(b){b.isChairman&&a.record.members.forEach(function(a){a!==b&&(a.isChairman=!1)})},a.save=function(){q()&&(a.record.id?a.record.$update().then(function(b){d.info("main.messages.update.success"),a.record=b,n()})["catch"](angular.noop):a.record.$save().then(function(b){d.info("main.messages.create.success"),g.url(r+"/"+a.committeeType+"/"+b.id+"/edit?_noback")})["catch"](angular.noop))},a["delete"]=function(){b.confirmDialog({prompt:"committee.prompt.deleteconfirm"},function(){a.record.$delete().then(function(){d.info("committee.message.deleted"),g.path(r+"/"+a.committeeType)})})},a.curriculumSelected=function(){if(a.formState.curriculum){if(angular.isArray(a.record.curriculums)||(a.record.curriculums=[]),a.record.curriculums.some(function(b){return b.id===a.formState.curriculum.id}))return d.error("committee.error.duplicateCurriculum"),void(a.formState.curriculum=void 0);a.record.curriculums.push(a.formState.curriculum),a.formState.curriculum=void 0}},a.deleteCurriculum=function(b){var c=a.record.curriculums.indexOf(b);-1!==c&&a.record.curriculums.splice(c,1)},a.getScholarshipTypeForUrl=m.getScholarshipTypeGroup}]),angular.module("hitsaOis").directive("oisDrag",function(){return{restrict:"A",link:function(a,b,c){c.$observe("oisDrag",function(a){b.prop("draggable","true"===a)}),b.on("dragstart",function(a){null!==a.target.attributes.getNamedItem("old-event-id")&&a.dataTransfer.setData("oldEventId",a.target.attributes.getNamedItem("old-event-id").value),null!==a.target.attributes.getNamedItem("capacity-type")&&a.dataTransfer.setData("capacityType",a.target.attributes.getNamedItem("capacity-type").value),null!==a.target.attributes.getNamedItem("journal-id")&&a.dataTransfer.setData("journalId",a.target.attributes.getNamedItem("journal-id").value),a.dataTransfer.setData("elementId",a.target.id)})}}}),angular.module("hitsaOis").directive("oisDrop",function(){return{restrict:"A",scope:{dropFn:"&",indexValue:"@"},link:function(a,b,c){b.on("dragover",function(a){"true"===c.oisDrop&&a.preventDefault()}),b.on("drop",function(b){if("true"===c.oisDrop){b.preventDefault();var d={};d.id=b.dataTransfer.getData("elementId"),d.journalId=b.dataTransfer.getData("journalId"),d.oldEventId=b.dataTransfer.getData("oldEventId"),d.capacityType=b.dataTransfer.getData("capacityType"),d.index=a.indexValue,b.target.appendChild(document.getElementById(d.id)),a.dropFn({data:d})}}),b.on("dragenter",function(){"true"===c.oisDrop&&this.classList.add("highlight-drop-area")}),b.on("dragleave",function(){"true"===c.oisDrop&&this.classList.remove("highlight-drop-area")}),b.bind("error",function(){""===c.onErrorSrc?c.ngHide=!0:c.src!==c.onErrorSrc&&c.$set("src",c.onErrorSrc)})}}}),angular.module("hitsaOis").directive("oisHigherDrop",function(){return{restrict:"A",scope:{dropFn:"&"},link:function(a,b,c){b.on("dragover",function(a){"true"===c.oisHigherDrop&&a.preventDefault()}),b.on("drop",function(b){if("true"===c.oisHigherDrop){b.preventDefault();var d={};d.id=b.dataTransfer.getData("elementId"),d.journalId=b.dataTransfer.getData("journalId"),d.oldEventId=b.dataTransfer.getData("oldEventId"),d.capacityType=b.dataTransfer.getData("capacityType"),b.target.appendChild(document.getElementById(d.id).cloneNode(!0)),a.dropFn({data:d})}}),b.on("dragenter",function(){"true"===c.oisHigherDrop&&this.classList.add("highlight-drop-area")}),b.on("dragleave",function(){"true"===c.oisHigherDrop&&this.classList.remove("highlight-drop-area")}),b.bind("error",function(){""===c.onErrorSrc?c.ngHide=!0:c.src!==c.onErrorSrc&&c.$set("src",c.onErrorSrc)})}}}),angular.module("hitsaOis").directive("onErrorSrc",function(){return{restrict:"A",scope:{},link:function(a,b,c){b.bind("error",function(){""===c.onErrorSrc?c.ngHide=!0:c.src!==c.onErrorSrc&&c.$set("src",c.onErrorSrc)})}}}),angular.module("hitsaOis").directive("disallowSameFile",function(){return{restrict:"A",require:"ngModel",link:function(a,b,c,d){var e=a[c.disallowSameFile];a.$watchCollection(c.lfFiles,function(a){if(angular.isArray(e)&&angular.isArray(a)){var b=!1;e.forEach(function(c){if(angular.isObject(c.oisFile)){var d=c.oisFile.fname;a.forEach(function(a){a.lfFileName===d&&(b=!0)})}}),d.$setValidity("samefile",!b)}})}}}),angular.module("hitsaOis").directive("unique",["config","$http",function(a,b){return{restrict:"A",scope:{unique:"="},require:"ngModel",link:function(c,d,e,f){f.$asyncValidators.unique=function(d,e){return c.unique.paramValue=e,b({url:a.apiUrl+c.unique.url,method:"GET",params:c.unique}).then(function(a){return f.$setValidity("notUnique",a.data),a.data})}}}}]),angular.module("hitsaOis").directive("menuLink",function(){return{restrict:"E",scope:{section:"="},templateUrl:"components/menu-link.tmpl.html",link:function(a,b){var c=b.parent().controller();a.isSelected=function(){return c.isSelected(a.section)},a.focusSection=function(){c.autoFocusContent=!0}}}}).directive("menuToggle",["$mdUtil","$animateCss","$$rAF",function(a,b,c){return{restrict:"E",scope:{section:"="},templateUrl:"components/menu-toggle.tmpl.html",link:function(d,e){var f=e.parent().controller();d.renderContent=!1,d.isOpen=function(){return f.isOpen(d.section)},d.toggle=function(){f.toggleOpen(d.section)},a.nextTick(function(){d.$watch(function(){return f.isOpen(d.section)},function(f){var g=e.find("ul");f&&(d.renderContent=!0),c(function(){var c=f?g[0].scrollHeight:0;b(g,{easing:"cubic-bezier(0.35, 0, 0.25, 1)",to:{height:c+"px"},duration:.75}).start().then(function(){var b=g[0].querySelector("a.active");if(d.renderContent=f,f&&b&&0===g[0].scrollTop){var c=b.scrollHeight,e=b.offsetTop,h=b.offsetParent,i=h?h.offsetTop:0,j=2*c,k=e+i-j;a.animateScrollTo(document.querySelector(".docs-menu").parentNode,k)}})})})});var g=e[0].parentNode.parentNode.parentNode;if(g.classList.contains("parent-list-item")){var h=g.querySelector("h2");e[0].firstChild.setAttribute("aria-describedby",h.id)}}}}]),function(){angular.module("hitsaOis").directive("hoisAdsAdapter",["inAadressService","$document",function(a,b){return{restrict:"E",replace:!0,scope:{value:"=ngModel",adsOid:"=adsOidModel",address:"=addressModel",ov:"=?ovModel",required:"@",ngRequired:"="},link:function(c,d){function e(){a.getInAds().setAddress(c.address)}var f=d[0];a.append(f),a.isLoaded()&&a.getInAds().hideResult(),c.$watch("address",e),b.on("inaadressLoaded",e),b.on("addressSelected",function(b){var d=b.detail[0];c.$apply(function(a){a.value=d.koodaadress,a.adsOid=d.ads_oid,a.address=d.aadress,a.ov=d.ehakov}),a.getInAds().hideResult()})}}}])}(),angular.module("hitsaOis").directive("hoisAutocomplete",["$rootScope","$translate","$q","QueryUtils",function(a,b,c,d){return{templateUrl:function(a,b){return angular.isDefined(b.multiple)?"components/hois.chip.autocomplete.html":angular.isDefined(b.label)&&b.label.length>0?"components/hois.autocomplete.html":"components/hois.autocomplete.nolabel.html"},restrict:"E",require:"ngModel",scope:{maxChips:"@",ngModel:"=",label:"@",method:"@",multiple:"@",ngRequired:"=",required:"@",ngDisabled:"=",disabled:"@",mdSelectedItemChange:"&?",readonly:"=",additionalQueryParams:"=",warningParam:"@",noPaging:"@",url:"@"},link:{post:function(e,f,g){var h=e.url?e.url:"/autocomplete/"+e.method,i=d.endpoint(h);e.isRequired=angular.isDefined(e.required),f.attr("required",e.isRequired),e.isDisabled=angular.isDefined(e.disabled),f.attr("disabled",e.isDisabled),angular.isDefined(g.multiple)&&!angular.isArray(e.ngModel)&&(e.ngModel=[]),e.transformChip=function(a){return angular.isObject(a)?a:void 0},e.getChipText=function(b){return a.currentLanguageNameField(b)},e.selectedItemChange=function(){angular.isFunction(e.mdSelectedItemChange)&&(angular.isFunction(e.mdSelectedItemChange())?e.$$postDigest(e.mdSelectedItemChange()):e.$$postDigest(e.mdSelectedItemChange))},e.search=function(a){var d=c.defer(),f={lang:b.use().toUpperCase(),name:a};return e.additionalQueryParams&&angular.extend(f,e.additionalQueryParams),"/autocomplete/curriculumversions"===h?i.query(f,function(a){d.resolve(a)}):"/autocomplete/studentgroups"===h?i.query(f,function(a){d.resolve(a)}):"/autocomplete/curriculumversionomodulesandthemes"===h?i.query(f,function(a){d.resolve(a)}):"/autocomplete/journals"===h?i.query(f,function(a){d.resolve(a)}):"true"===e.noPaging?i.query(f,function(a){d.resolve(a)}):i.search(f,function(a){d.resolve(a.content)}),d.promise}}}}}]),angular.module("hitsaOis").directive("hoisCreatedModified",function(){return{restrict:"E",scope:{object:"="},templateUrl:"components/hois.created.modified.html"}}),angular.module("hitsaOis").directive("hoisClassifierAutocomplete",["$rootScope","$translate","$q","Classifier",function(a,b,c,d){return{templateUrl:"components/hois.chip.autocomplete.html",restrict:"E",require:"ngModel",scope:{maxChips:"@",ngModel:"=",label:"@",mainClassCode:"@"},link:function(b){angular.isArray(b.ngModel)||(b.ngModel=[]);var e={};b.transformChip=function(a){return angular.isObject(a)?(e[a.code]=a,a.code):void 0},b.getChipText=function(b){return a.currentLanguageNameField(e[b])},b.search=function(e){var f=c.defer(),g=a.currentLanguageNameVariable(),h=function(a){var b=a.filter(function(a){return a[g].includes(e)});f.resolve(b)};return d.queryForDropdown({mainClassCode:b.mainClassCode,sort:g},h),f.promise}}}}]),function(){function a(a,b,c){var d={},e={order:a.$root.currentLanguageNameField()};if(angular.isDefined(a.mainClassifierCode))e.mainClassCode=a.mainClassifierCode;else{if(!angular.isString(a.mainClassifierCodes))return;e.mainClassCodes=a.mainClassifierCodes.replace(/\s/g,"")}angular.isObject(a.criteria)&&angular.extend(e,a.criteria);var f=function(){function e(){for(var b in a.optionsByCode)a.optionsByCode[b].hide=!1}function f(b){if(!angular.isDefined(b)||null===b||""===b||angular.isArray(b)&&0===b.length)a.value=void 0,e();else{var f={mainClassifierCode:a.connectMainClassifierCode},h=b;angular.isArray(b)?h=b.join(","):angular.isObject(b)&&(h=b.code),angular.isDefined(a.searchFromConnect)?f.connectClassifierCode=h:f.classifierCode=h,c.queryAll(f,function(b){var c=[];if(b.forEach(function(b){var d=angular.isDefined(a.searchFromConnect)?b.classifier.code:b.connectClassifier.code;c.push(d)}),angular.isDefined(a.showOnlyValues)||angular.isDefined(a.filterValues))for(var e in a.optionsByCode)a.optionsByCode[e].hide=-1===c.indexOf(e);if(angular.isDefined(a.selectFirstValue)){var f=c.length>0?c[0]:angular.isDefined(a.defaultValue)?a.defaultValue:null;null!==f&&(angular.isDefined(a.modelValueAttr)?a.value=d[f][a.modelValueAttr]:a.value=d[f])}g()})}!angular.isDefined(a.value)&&angular.isDefined(a.defaultValue)&&(a.value=a.defaultValue)}var g=function(){angular.isArray(a.value)?a.value.forEach(function(b){!angular.isString(b)||angular.isDefined(a.optionsByCode[b])&&!a.optionsByCode[b].hide||(a.value=void 0)}):angular.isObject(a.value)&&angular.isString(a.value.code)&&(!angular.isDefined(a.optionsByCode[a.value.code])||a.optionsByCode[a.value.code].hide)?a.value=void 0:"code"!==a.modelValueAttr||!angular.isString(a.value)||angular.isDefined(a.optionsByCode[a.value])&&!a.optionsByCode[a.value].hide||(a.value=void 0)},h=function(){if(angular.isDefined(a.showOnlyValues)&&a.$parent.$watchCollection(a.showOnlyValues,function(b){var c=[];angular.isArray(b)&&b.forEach(function(b){var d=b;angular.isDefined(a.byProperty)&&angular.isObject(b)&&(d=b[a.byProperty]),angular.isString(d)?c.push(d):angular.isObject(d)&&angular.isString(d.code)&&c.push(d.code)});for(var d in a.optionsByCode)a.optionsByCode[d].hide=b!==!0&&-1===c.indexOf(d);g()}),angular.isDefined(a.filterValues)&&a.$parent.$watchCollection(a.filterValues,function(b){var c=[];angular.isArray(b)&&b.forEach(function(b){var d=b;angular.isDefined(a.byProperty)&&angular.isObject(b)&&(d=b[a.byProperty]),angular.isString(d)?c.push(d):angular.isObject(d)&&angular.isString(d.code)&&c.push(d.code)});for(var d in a.optionsByCode)a.optionsByCode[d].hide=-1!==c.indexOf(d);g()}),angular.isDefined(a.onlyValid))for(var c in a.optionsByCode){var d=a.optionsByCode[c];angular.isDefined(a.ignoreCodeValidation)&&a.ignoreCodeValidation===d.code||(d.hide=!b.isValid(d))}g()};h(),angular.isDefined(a.watchMultiple)?a.$parent.$watchCollection(a.watchModel,f):angular.isDefined(a.watchModel)&&a.$parent.$watch(a.watchModel,f)};if(e.mainClassCode||e.mainClassCodes){var g=b.queryForDropdown(e,function(b){b.forEach(function(a){var b={code:a.code,nameEt:a.nameEt,nameEn:a.nameEn,labelRu:a.labelRu,validFrom:a.validFrom,validThru:a.validThru};d[b.code]=b}),a.optionsByCode=d,f()});a.queryPromise=g.$promise}}angular.module("hitsaOis").directive("hoisClassifierSelect",["Classifier","ClassifierConnect","hoisValidDatesFilter",function(b,c,d){return{template:'<md-select ng-model-options="{ trackBy: !!modelValueAttr ? \'$value\' : \'$value.code\' }" ><md-option ng-if="!isMultiple && ((!isRequired && !ngRequired) || isShowEmpty)" md-option-empty></md-option><md-option ng-repeat="(code, option) in optionsByCode" ng-value="!!modelValueAttr ? option[modelValueAttr] : option" ng-hide="option.hide" aria-label="{{getLabel(option)}}">{{getLabel(option)}}</md-option></md-select>',restrict:"E",require:["ngModel"],replace:!0,scope:{value:"=ngModel",required:"@",ngRequired:"=",multiple:"@",modelValueAttr:"@",mainClassifierCode:"@",mainClassifierCodes:"@",connectMainClassifierCode:"@",criteria:"=",filterValues:"@",byProperty:"@",showEmpty:"@",showOnlyValues:"@",watchModel:"@",watchMultiple:"@",searchFromConnect:"@",selectFirstValue:"@",defaultValue:"@",onlyValid:"@",ignoreCodeValidation:"<"},link:function(e,f){e.isMultiple=angular.isDefined(e.multiple),e.isRequired=angular.isDefined(e.required),e.isShowEmpty=angular.isDefined(e.showEmpty),f.attr("required",e.isRequired),e.getLabel=angular.isDefined(e.onlyValid)?d:e.$root.currentLanguageNameField,a(e,b,c)}}}]).directive("hoisClassifierRadio",["Classifier","ClassifierConnect",function(b,c){return{template:'<md-radio-group ng-model-options="{ trackBy: !!modelValueAttr ? \'$value\' : \'$value.code\' }"><md-radio-button ng-repeat="(code, option) in optionsByCode" ng-value="!!modelValueAttr ? option[modelValueAttr] : option" ng-hide="option.hide" aria-label="{{$root.currentLanguageNameField(option)}}">{{$root.currentLanguageNameField(option)}}</md-radio-button></md-radio-group>',restrict:"E",require:["ngModel","^form"],replace:!0,scope:{value:"=ngModel",required:"@",disabled:"@",modelValueAttr:"@",mainClassifierCode:"@",watchModel:"@",connectMainClassifierCode:"@",searchFromConnect:"@",selectFirstValue:"@",defaultValue:"@"},link:function(d,e,f,g){d.isRequired=angular.isDefined(d.required),e.attr("required",d.isRequired),d.isDisabled=angular.isDefined(d.disabled),e.attr("disabled",d.isDisabled);var h=g[0],i=g[1],j=e[0].parentElement,k=j.querySelector("label");"MD-INPUT-CONTAINER"===j.tagName&&null!==j.querySelector("label")&&(e[0].style.marginTop="0.5em",j.style.marginTop="1em",j.style.marginBottom="0.5em",k.style.marginBottom="2em",d.isRequired&&k.classList.add("md-required"),h.$viewChangeListeners.push(function(){angular.isDefined(h.$viewValue)&&null!==h.$viewValue?(k.style.marginBottom="0",j.classList.add("md-input-has-value")):(j.classList.remove("md-input-has-value"),k.style.marginBottom="2em")}),d.form=i,d.$watch("form.$submitted",function(a){h.$valid||a===!1?j.classList.remove("md-input-invalid"):j.classList.add("md-input-invalid")})),a(d,b,c)}}}])}(),angular.module("hitsaOis").directive("hoisClassifierValue",["Classifier","ArrayUtils",function(a,b){return{template:'<div class="hois-classifier-value">{{value}}</div>',restrict:"E",replace:!0,scope:{ngModel:"=",mainClassifierCode:"@",mainClassifierCodes:"@"},link:function(c,d){d[0].parentElement.classList.add("md-input-has-value");var e;c.$watch("ngModel",function(d){var f=null;if(angular.isObject(d))if(angular.isString(d[c.$root.currentLanguageNameField()]))c.value=d[c.$root.currentLanguageNameField()];else if(angular.isArray(d)&&d.length>0)if(angular.isString(d[0]))f={codes:d};else{var g=d.map(function(a){return a.code});f={codes:g}}else f={code:d.code};else angular.isString(d)?f={code:d}:c.value=void 0;if(null!==f){var h=function(a){var d=a.filter(function(a){return f.code?a.code===f.code:f.codes?b.includes(f.codes,a.code):!1});if(d.length>0){var e=d.map(c.$root.currentLanguageNameField);c.value=e.join(", ")}};void 0===e?a.queryForDropdown({mainClassCode:c.mainClassifierCode,mainClassCodes:c.mainClassifierCodes},function(a){e=a,h(a)}):h(e)}})}}}]),angular.module("hitsaOis").directive("hoisCollapsable",function(){return{template:'<div class="hois-collapse-parent"><div layout="row" class="hois-collapse" ng-style="{background: headerBackgroundColor}"><div flex layout="row" layout-align="start center"><div class="hois-collapse-header" flex ng-transclude="header">{{label}}&nbsp;<a class="md-primary" style="font-size: 13px; font-weight: normal;" ng-click="action()" ng-if="ngif()">{{link}}</a></div></div><div flex="15" flex-sm="20" flex-xs="30"><md-button ng-click="expandCollapse()" class="hois-collapse-button"><md-icon md-font-set="material-icons md-dark">{{expanded ? "keyboard_arrow_up" : "keyboard_arrow_down"}}</md-icon></md-button></div></div><div ng-show="expanded" ng-transclude></div></div>',replace:!0,transclude:{header:"?hoisCollapsableHeader"},scope:{label:"=",link:"=",action:"&",ngif:"&",expanded:"<",headerBackgroundColor:"<"},link:function(a){a.expanded=angular.isDefined(a.expanded)?a.expanded:!0,a.expandCollapse=function(){a.expanded=!a.expanded}}}}),angular.module("hitsaOis").directive("fixedColumnTable",["$timeout",function(a){return{restrict:"A",scope:{fixedColumns:"@"},link:function(b,c){function d(a,c,d){var e,g,h,i=[].concat.apply([],f.querySelectorAll(a));i.forEach(function(a){h=angular.element(a);for(var f=b.fixedColumns,i=0;f>i;i++)e=angular.element(a).find(d)[i],void 0!==e&&(!h.hasClass("fix")||h.hasClass("fix")&&e.classList.contains("fix"))&&(e.classList.add(c),e.hasAttribute("colspan")&&(g=e.getAttribute("colspan"),f-=parseInt(g)-1))})}function e(){function a(a,b){return"translate("+a+"px, "+b+"px)"}d("thead tr","cross","th"),d("tbody tr","fixed-cell","td"),f.addEventListener("scroll",function(){var b=f.scrollLeft,c=f.scrollTop,d=[].concat.apply([],f.querySelectorAll("tbody td.fixed-cell")),e=[].concat.apply([],f.querySelectorAll("thead th.cross")),g=[].concat.apply([],f.querySelectorAll("thead th"));d.forEach(function(c){c.style.transform=a(b,0)}),g.forEach(function(b){b.style.transform=a(0,c)}),e.forEach(function(d){d.style.transform=a(b,c)})})}var f=c[0];a(function(){e()},0),b.$on("refreshFixedColumns",function(){a(function(){e(),f.scrollLeft=0},0)})}}}]),angular.module("hitsaOis").directive("hoisFreeForms",function(){return{template:'<span class="middle-text label"><span ng-if="value && value.length > 0">{{value.join(", ")}}</span><span class="invalid" ng-if="!(value && value.length > 0)">{{"document.noFreeForms" | translate}}</span></span>',restrict:"E",replace:!0,scope:{value:"="}}}),angular.module("hitsaOis").directive("hoisIdcodeLookup",["$q","QueryUtils","message",function(a,b,c){return{template:'<input type="text" ng-blur="lookupPerson()" md-minlength="11" md-maxlength="11">',restrict:"E",replace:!0,require:"ngModel",scope:{afterFailedLookup:"&",afterLookup:"&",noLookup:"&",ngModel:"=",ngReadonly:"=",role:"@"},link:function(d,e,f,g){function h(){g.$setValidity("estonianIdcode",!0)}function i(){g.$setValidity("estonianIdcode",!1),c.error("main.messages.error.estonianIdcode")}d.lookupPerson=function(){var c=d.ngModel;!d.ngReadonly&&c&&c!==d.idcode?11===c.length?b.endpoint("/autocomplete/persons",{search:{method:"GET"}}).search({idcode:c,role:d.role}).$promise.then(function(a){h(),d.idcode=c,d.afterLookup({response:a})})["catch"](function(b){return 404===b.status&&(h(),d.idcode=void 0),412===b.status&&(i(),d.idcode=void 0),angular.isDefined(d.afterFailedLookup)&&d.afterFailedLookup({response:b}),a.reject(b)}):i():angular.isDefined(d.noLookup)&&d.noLookup()}}}}]),angular.module("hitsaOis").directive("oisInputFile",function(){return{template:'<input type="file" />',restrict:"E",require:["ngModel"],replace:!0,scope:{},link:function(a,b,c,d){var e=d[0];b.bind("change",function(){var a=b[0].files[0],c=new FileReader;c.addEventListener("load",function(){var b="base64,";a.data=c.result.substring(c.result.indexOf(b)+b.length),e.$setViewValue(a)},!1),c.readAsDataURL(a)})}}}),angular.module("hitsaOis").directive("oisMultiText",function(){return{template:'<div layout="column"><div layout="row" flex><div layout="row" flex><input type="text" ng-model="itemValue"></div><div layout="row"><a href="" ng-click="add()"><md-icon md-font-set="material-icons">playlist_add</md-icon></a></div></div><div layout="column"><div layout="row" ng-repeat="item in items" flex><div layout="row" layout-align="start center" flex>{{item}}</div><div layout="row"><md-button style="left:10px;" class="md-icon-button" ng-click="remove(item)"><md-icon ng-class="\'md-warn md-hue-2\'" md-font-set="material-icons">close</md-icon></md-button></div></div></div></div>',restrict:"E",require:["ngModel"],replace:!0,scope:{},link:function(a,b,c,d){a.items=[],a.$parent.$watch(c.initialValues,function(b){angular.isArray(b)&&(a.items=b)}),a.add=function(){a.itemValue&&-1===a.items.indexOf(a.itemValue)&&(a.items.push(a.itemValue),a.itemValue="",d[0].$setViewValue(a.items),d[0].$render())},a.remove=function(b){a.items.splice(a.items.indexOf(b),1),d[0].$setViewValue(a.items),d[0].$render()}}}}),angular.module("hitsaOis").filter("hoisNumber",["$filter",function(a){return function(b,c){var d=b%1?a("number")(b,c):a("number")(b,0);return d.split(",").join("")}}]),angular.module("hitsaOis").directive("hoisSchoolDepartmentSelect",["QueryUtils",function(a){return{template:'<md-select><md-option ng-if="!isMultiple && !isRequired && !ngRequired" md-option-empty></md-option><md-option ng-repeat="option in options" ng-value="option.id"aria-label="{{$root.currentLanguageNameField(option)}}">{{$root.currentLanguageNameField(option)}}</md-option></md-select>',restrict:"E",replace:!0,scope:{excludedId:"@",multiple:"@",ngRequired:"=",required:"@",value:"=ngModel"},link:function(b,c){b.isMultiple=angular.isDefined(b.multiple),b.isRequired=angular.isDefined(b.required),c.attr("required",b.isRequired);var d=function(){b.excludedIdValue?b.options=b.optionValues.filter(function(a){return a.id!==b.excludedIdValue}):b.options=b.optionValues};a.endpoint("/autocomplete/schooldepartments").query(function(a){b.optionValues=a.sort(function(a,b){var c=a.nameEt,d=b.nameEt;return d>c?-1:c>d?1:0}),d()}),angular.isDefined(b.excludedId)&&b.$parent.$watch(b.excludedId,function(a){b.excludedIdValue=a,void 0!==b.optionValues&&d()})}}}]),angular.module("hitsaOis").directive("hoisSelect",["Curriculum","School","QueryUtils","DataUtils",function(a,b,c,d){return{templateUrl:"components/hois.select.html",restrict:"E",replace:!0,scope:{ngModel:"=",criteria:"=",filterValues:"@",multiple:"@",ngRequired:"=",required:"@",values:"@",valueProperty:"@",showProperty:"@",preselectCurrent:"@",selectCurrentStudyYear:"@",loadAfterDefer:"=",warningParam:"@"},link:function(e,f,g){function h(){e.filteredOptions=(e.options||[]).filter(function(a){return-1===e.hideOptions.indexOf(a[e.valueProperty])})}function i(a){e.options=a.content,h()}function j(){if(!e.ngModel){var a=d.getCurrentStudyYearOrPeriod(e.options);a&&(e.ngModel=a.id)}}function k(){angular.isDefined(e.selectCurrentStudyYear)&&j()}function l(){e.options.forEach(function(a){a.display=e.$root.currentLanguageNameField(a.studyYear)+" "+e.$root.currentLanguageNameField(a)}),angular.isDefined(e.preselectCurrent)&&j()}function m(){angular.isDefined(g.type)?("building"===g.type?e.options=c.endpoint("/autocomplete/buildings").query():"curriculum"===g.type?e.options=c.endpoint("/autocomplete/curriculumsDropdown").query():"curriculumversion"===g.type?e.options=a.queryVersions(e.criteria):"directivecoordinator"===g.type?e.options=c.endpoint("/autocomplete/directivecoordinators").query(e.criteria):"journal"===g.type?e.options=c.endpoint("/autocomplete/journals").query(e.criteria):"school"===g.type?e.options=b.getAll():"studentgroup"===g.type?e.options=c.endpoint("/autocomplete/studentgroups").query(e.criteria):"studyyear"===g.type?e.options=c.endpoint("/autocomplete/studyYears").query({},k):"teacher"===g.type?e.options=c.endpoint("/autocomplete/teachersList").query(e.criteria):"enterprise"===g.type?e.options=c.endpoint("/autocomplete/enterprises").query():"saisadmissioncode"===g.type?e.options=c.endpoint("/autocomplete/saisAdmissionCodes").query():"saisCurriculumClassifiers"===g.type?e.options=c.endpoint("/autocomplete/saisCurriculumClassifiers").query():"saisadmissioncodearchived"===g.type?e.options=c.endpoint("/autocomplete/saisAdmissionCodesArchived").query():"subject"===g.type?e.options=c.endpoint("/autocomplete/subjectsList").query(e.criteria):"studyperiod"===g.type?e.options=c.endpoint("/autocomplete/studyPeriods").query():"studyperiodyear"===g.type?(e.showProperty||(e.showProperty="display"),e.options=c.endpoint("/autocomplete/studyPeriodsWithYear").query(l)):"apelschool"===g.type&&(e.options=c.endpoint("/autocomplete/apelschools").query()),angular.isDefined(e.options)&&angular.isDefined(e.options.$promise)&&(e.queryPromise=e.options.$promise,e.options.$promise.then(h))):angular.isDefined(e.values)&&e.$parent.$watchCollection(e.values,function(a){i({content:a})})}e.isMultiple=angular.isDefined(e.multiple),e.isRequired=angular.isDefined(e.required),e.valueProperty=angular.isString(e.valueProperty)?e.valueProperty:"id",f.attr("required",e.isRequired),e.options=[],e.filteredOptions=[],e.hideOptions=[],angular.isDefined(e.filterValues)&&e.$parent.$watchCollection(e.filterValues,function(a){e.hideOptions=[],angular.isArray(a)&&a.forEach(function(a){var b=angular.isObject(a)?a[e.valueProperty]:a;angular.isDefined(b)&&e.hideOptions.push(b)}),h()}),angular.isDefined(e.loadAfterDefer)?e.loadAfterDefer.promise.then(m):m()}}}]),angular.module("hitsaOis").directive("hoisValue",function(){return{template:'<div class="md-body-1 hois-value"><a ng-if="hrefValue" ng-href="{{hrefValue}}">{{value}}</a><span ng-if="!hrefValue"><div ng-if="value.split" ng-repeat="row in value.split(\'\n\') track by $index">{{row}}</div><div ng-if="!value.split">{{value}}</div></span></div>',restrict:"E",replace:!0,scope:{value:"=",hrefValue:"="},link:function(a,b){b[0].parentElement.classList.add("md-input-has-value")}}}),angular.module("hitsaOis").directive("hoisTime",function(){return{template:'<input style="min-width:3em;" class="md-input" type="text">',restrict:"E",require:"ngModel",replace:!0,scope:{ngModel:"="},link:{post:function(a,b,c,d){function e(a){var b=moment(a,angular.isDate(a)?null:h,!0),c=b.format(h);f(b.isValid()?c:a)}function f(a){b.val(a)}function g(b){var c=b.target.value,e=moment(c,h,!0);if(e.isValid())if(a.ngModel){var f=moment(a.ngModel,"string"==typeof a.ngModel&&5===a.ngModel.length?h:void 0);f.hours(e.hours()),f.minutes(e.minutes()),a.ngModel=f.toDate()}else a.ngModel=e.toDate();d.$setValidity("time",c?e.isValid():!0)}var h="HH:mm";a.$watch("ngModel",function(){e(a.ngModel)}),b.unbind("input").unbind("keydown").unbind("change"),b.bind("blur",function(b){a.$apply(function(){g(b)})})}}}}),angular.module("hitsaOis").filter("hoisUrl",function(){var a=/^((http|https|ftp):\/\/)/;return function(b){return a.test(b)?b:"http://"+b}}),angular.module("hitsaOis").filter("hoisDate",["$filter",function(a){return function(b){return a("date")(b,"dd.MM.yyyy")}}]).filter("hoisDateTime",["$filter",function(a){return function(b){return a("date")(b,"dd.MM.yyyy HH:mm:ss")}}]).filter("hoisDateTimeMin",["$filter",function(a){
return function(b){return a("date")(b,"dd.MM.yyyy HH:mm")}}]).filter("hoisTime",["$filter",function(a){return function(b){return a("date")(b,"HH:mm:ss")}}]).filter("hoisDayMonth",["$filter",function(a){return function(b){return a("date")(b,"dd.MM")}}]).filter("hoisDayMonthTimeMin",["$filter",function(a){return function(b){return a("date")(b,"dd.MM HH:mm")}}]).filter("hoisTimestamp",["$filter",function(a){return function(b){var c=a("date"),d=c(b,"dd.MM.yyyy HH:mm");return-1===d.lastIndexOf("00:00")?d:c(b,"dd.MM.yyyy")}}]).filter("hoisTimeMin",["$filter",function(a){return function(b){return a("date")(b,"HH:mm")}}]).filter("hoisYear",["$filter",function(a){return function(b){return a("date")(b,"yyyy")}}]),angular.module("hitsaOis").filter("hoisValidDates",["$rootScope","hoisDateFilter",function(a,b){return function(c){function d(a){return a?b(a):"..."}var e=a.currentLanguageNameField(c),f=c.validFrom,g=c.validThru;return f||g?e+" ("+d(f)+" - "+d(g)+")":e}}]),angular.module("hitsaOis").filter("hoisStudyPeriod",["$rootScope",function(a){return function(b){var c="";return angular.isObject(b)?(c=a.currentLanguageNameField(b),angular.isObject(b.studyYear)?a.currentLanguageNameField(b.studyYear)+" "+c:c):c}}]),angular.module("hitsaOis").directive("mdMaxlength",function(){return{restrict:"A",require:["ngModel","^mdInputContainer"],link:{post:function(a,b,c){var d=c.$set;c.$set=function(a,b,e,f){"ngTrim"!==a&&d.call(c,a,b,e,f)}}}}}),angular.module("hitsaOis").controller("ContractEditController",["$location","$scope","$route","dialogService","message","Classifier","DataUtils","FormUtils","QueryUtils",function(a,b,c,d,e,f,g,h,i){function j(a){b.formState.isHigher=angular.isObject(a.subject),g.convertObjectToIdentifier(a,["module","theme","enterprise","teacher","contractCoordinator","subject"]),b.contract=a}function k(){return b.formState.enterprisesById={},i.endpoint("/autocomplete/enterprises").query(function(a){b.formState.enterprisesById=a.reduce(function(a,b){return a[b.id]=b,a},{}),b.formState.enterprises=a})}function l(a){i.endpoint("/contracts/studentPracticeModules/"+a.id).query(function(a){b.formState.modulesById={},b.formState.themesById={},a.forEach(function(a){b.formState.modulesById[a.module.id]=a,a.themes.forEach(function(a){b.formState.themesById[a.theme.id]=a})}),b.formState.modules=a.map(function(a){return a.module}),angular.isNumber(b.contract.module)&&n(b.contract.module)})}function m(a){i.endpoint("/contracts/studentPracticeSubjects/"+a.id).query(function(a){b.formState.subjectsById={},a.forEach(function(a){b.formState.subjectsById[a.id]=a}),b.formState.subjects=a})}function n(a){var c=b.formState.modulesById[a];c&&(b.formState.themes=c.themes.map(function(a){return a.theme}))}function o(){b.contract.module&&!b.contract.theme&&(b.contract.credits=b.formState.modulesById[b.contract.module].credits,b.contract.hours=b.contract.credits*p)}var p=26;b.auth=c.current.locals.auth,b.contract={},b.formState={};var q=c.current.locals.entity;angular.isDefined(q)?j(q):b.formState.isHigher=b.auth.school.higher===!0&&(b.auth.school.vocational===!0&&c.current.params.higher===!0||b.auth.school.vocational===!1),k();var r=f.valuemapper({studyForm:"OPPEVORM"});b.$watch("contract.student",function(a){angular.isObject(a)&&(i.endpoint("/students/"+a.id).search(function(a){b.formState.student=r.objectmapper(a)}),b.formState.isHigher?m(a):l(a))}),b.moduleChanged=function(a){b.formState.modulesById[a]&&(o(),n(a),!angular.isDefined(q)&&angular.isString(b.formState.modulesById[a].assessmentMethodsEt)&&(b.contract.practicePlan=b.formState.modulesById[a].assessmentMethodsEt))},b.themeChanged=function(a){b.formState.themesById[a]?(b.contract.credits=b.formState.themesById[a].credits,b.contract.hours=b.contract.credits*p,!angular.isDefined(q)&&angular.isString(b.formState.themesById[a].subthemes)&&(b.contract.practicePlan=b.formState.themesById[a].subthemes)):o()},b.subjectChanged=function(a){b.formState.subjectsById[a]&&(b.contract.credits=b.formState.subjectsById[a].credits,b.contract.hours=b.contract.credits*p,!angular.isDefined(q)&&angular.isString(b.formState.subjectsById[a].outcomesEt)&&(b.contract.practicePlan=b.formState.subjectsById[a].outcomesEt))},b.updateHours=function(){angular.isNumber(b.contract.credits)&&(b.contract.hours=g.creditsToHours(b.contract.credits),b.contractForm.hours.$setDirty())},b.updateCredits=function(){b.contract.credits=g.hoursToCredits(b.contract.hours),b.contractForm.credits.$setDirty()},b.enterpriseChanged=function(a){var c=b.formState.enterprisesById[a];b.contract.contactPersonName=c.contactPersonName,b.contract.contactPersonEmail=c.contactPersonEmail,b.contract.contactPersonPhone=c.contactPersonPhone};var s=i.endpoint("/enterprises");b.addEnterprise=function(){d.showDialog("contract/enterprise.add.dialog.html",function(a){a.enterprise={}},function(a){var c=new s(a.enterprise);c.$save().then(function(a){e.info("main.messages.create.success"),k().$promise.then(function(){b.contract.enterprise=a.id,b.enterpriseChanged(b.contract.enterprise)})})["catch"](angular.noop)})};var t=i.endpoint("/contracts");b.save=function(c){h.withValidForm(b.contractForm,function(){b.contract.isHigher=b.formState.isHigher;var d=new t(b.contract);angular.isDefined(b.contract.id)?d.$update().then(function(){e.updateSuccess(),j(d),angular.isFunction(c)&&c(),b.contractForm.$setPristine()})["catch"](angular.noop):d.$save().then(function(){e.info("main.messages.create.success"),a.url("/contracts/"+d.id+"/edit?_noback")})["catch"](angular.noop)})},b["delete"]=function(){d.confirmDialog({prompt:"contract.deleteconfirm"},function(){var c=new t(b.contract);c.$delete().then(function(){e.info("main.messages.delete.success"),a.path("/contracts")})["catch"](angular.noop)})},b.sendToEkis=function(){h.withValidForm(b.contractForm,function(){i.endpoint("/contracts/checkForEkis").get({id:b.contract.id}).$promise.then(function(c){d.confirmDialog({prompt:c.templateExists?"contract.ekisconfirm":"contract.ekisconfirmTemplateMissing",template:c.templateName},function(){b.save(function(){var c=i.endpoint("/contracts/sendToEkis/"+b.contract.id);(new c).$save().then(function(b){e.info("contract.messages.sendToEkis.success"),a.url("/contracts/"+b.id+"/view?_noback")})["catch"](angular.noop)})})})})}}]),angular.module("hitsaOis").controller("ContractViewController",["$scope","$location","$route","QueryUtils","dialogService","ekisService","message",function(a,b,c,d,e,f,g){a.auth=c.current.locals.auth,a.contract=c.current.locals.entity,a.getEkisContractUrl=f.getContractUrl,a["delete"]=function(){e.confirmDialog({prompt:"contract.deleteconfirm"},function(){var c=d.endpoint("/contracts"),e=new c(a.contract);e.$delete().then(function(){g.info("main.messages.delete.success"),b.path("/contracts")})})}}]),angular.module("hitsaOis").controller("ContractListController",["$scope","$route","QueryUtils","Classifier","$q","dialogService","$location",function(a,b,c,d,e,f,g){a.auth=b.current.locals.auth;var h=d.valuemapper({status:"LEPING_STAATUS"});c.createQueryForm(a,"/contracts",{order:"student_person.lastname,student_person.firstname"},h.objectmapper),a.auth.isStudent()&&(a.afterLoadData=function(b){a.tabledata.content=b.content,a.tabledata.totalElements=b.totalElements,h.objectmapper(b.content)}),e.all(h.promises).then(a.loadData),a.newContract=function(){a.auth.school.higher&&a.auth.school.vocational?f.showDialog("contract/vocational.higher.select.dialog.html",function(){},function(a){a.higher===!0?g.path("/contracts/new").search({higher:!0}):g.path("/contracts/new")}):g.path("/contracts/new")}}]),angular.module("hitsaOis").config(["$routeProvider","USER_ROLES",function(a,b){a.when("/contracts",{templateUrl:"contract/contract.list.html",controller:"ContractListController",controllerAs:"contractListController",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}]},data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_LEPING]}}).when("/contracts/new",{templateUrl:"contract/contract.edit.html",controller:"ContractEditController",controllerAs:"contractEditController",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}],isCreate:function(){return!0}},data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_LEPING]}}).when("/contracts/:id/edit",{templateUrl:"contract/contract.edit.html",controller:"ContractEditController",controllerAs:"contractEditController",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}],entity:["QueryUtils","$route",function(a,b){return a.endpoint("/contracts").get({id:b.current.params.id}).$promise}]},data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_LEPING]}}).when("/contracts/:id/view",{templateUrl:"contract/contract.view.html",controller:"ContractViewController",controllerAs:"contractViewController",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}],entity:["QueryUtils","$route",function(a,b){return a.endpoint("/contracts").get({id:b.current.params.id}).$promise}]},data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_LEPING]}})}]),angular.module("hitsaOis").factory("Curriculum",["$resource","config","QueryUtils",function(a,b,c){function d(){}return d.STATUS={ENTERING:"OPPEKAVA_STAATUS_S",PROCEEDING:"OPPEKAVA_STAATUS_M",VERIFIED:"OPPEKAVA_STAATUS_K",CLOSED:"OPPEKAVA_STAATUS_C"},d.VERSION_STATUS={S:"OPPEKAVA_VERSIOON_STAATUS_S",K:"OPPEKAVA_VERSIOON_STAATUS_K",C:"OPPEKAVA_VERSIOON_STAATUS_C"},d.query=function(d,e){var f=a(b.apiUrl+"/curriculum"),g=c.getQueryParams(d);return f.get(g,e)},d.getAreasOfStudyByGroupOfStudy=function(c,d){var e=a(b.apiUrl+"/curriculum/areasOfStudyByGroupOfStudy/"+c);return e.query(d)},d.modulesViewData=function(a){var b={},c={};return a.forEach(function(a){angular.isArray(a.occupations)&&a.occupations.length>0?a.occupations.forEach(function(c){angular.isObject(b[c.code])||(b[c.code]={occupation:c,moduleTypes:{}}),angular.isObject(b[c.code].moduleTypes[a.module.code])||(b[c.code].moduleTypes[a.module.code]={moduleType:a.module,modules:[]}),b[c.code].moduleTypes[a.module.code].modules.push(a)}):(angular.isObject(c[a.module.code])||(c[a.module.code]={moduleType:a.module,modules:[]}),c[a.module.code].modules.push(a))}),{occupationModuleTypesModules:b,modulesWithOutOccupation:c}},d.queryVersions=function(a){return c.endpoint("/autocomplete/curriculumversions").query(a)},d}]),angular.module("hitsaOis").controller("CurriculumListController",["$scope","$sessionStorage","Classifier","DataUtils","QueryUtils","$q","$rootScope","AuthService","$location","$route","Curriculum",function(a,b,c,d,e,f,g,h,i,j,k){function l(){if(a.auth.school){var b=a.criteria.studyLevel;e.endpoint("/school/studyLevels").search().$promise.then(function(c){a.criteria.studyLevel=b,a.studyLevelOptions=c.studyLevels,a.school={higher:a.auth.school.higher,vocational:a.auth.school.vocational}})}else a.school={higher:!0,vocational:!0}}a.auth=j.current.locals.auth;var m=c.valuemapper({origStudyLevel:"OPPEASTE",status:"OPPEKAVA_STAATUS"});e.createQueryForm(a,"/curriculum",{order:a.currentLanguageNameField()},m.objectmapper),f.all(m.promises).then(a.loadData),d.convertStringToDates(a.criteria,["validFrom","validThru"]),a.criteria.status||(a.criteria.status=["OPPEKAVA_STAATUS_M","OPPEKAVA_STAATUS_S","OPPEKAVA_STAATUS_K"]),l(),e.endpoint("/curriculum/canView").search().$promise.then(function(b){a.canView=b.canView}),e.endpoint("/curriculum/canCreate").search().$promise.then(function(b){a.canCreate=b.canCreate}),a.areasOfStudy=!0,a.$watch("criteria.curriculumGroup",function(){a.criteria.curriculumGroup?k.getAreasOfStudyByGroupOfStudy(a.criteria.curriculumGroup,function(b){a.areasOfStudy=b}):a.areasOfStudy=!0}),a.edit=function(a){a.higher?i.path("/higherCurriculum/"+a.id+"/edit"):i.path("/vocationalCurriculum/"+a.id+"/edit")},a.view=function(a){a.higher?i.path("/higherCurriculum/"+a.id+"/view"):i.path("/vocationalCurriculum/"+a.id+"/view")},a.$watch("criteria.iscedClassCode",function(){a.criteria.iscedClassCode&&!a.criteria.iscedSuun&&a.criteria.iscedVald&&(a.criteria.iscedVald=void 0)}),a.$watch("criteria.iscedSuun",function(){a.criteria.iscedSuun&&!a.criteria.iscedVald&&a.criteria.curriculumGroup&&(a.criteria.curriculumGroup=void 0)})}]),angular.module("hitsaOis").controller("CurriculumPublicListController",["$scope","Classifier","DataUtils","QueryUtils","$q","$route",function(a,b,c,d,e,f){var g=f.current.params.schoolId,h=b.valuemapper({origStudyLevel:"OPPEASTE",status:"OPPEKAVA_STAATUS"});d.createQueryForm(a,"/public/curriculumsearch",{schoolId:g,order:a.currentLanguageNameField()},h.objectmapper),e.all(h.promises).then(a.loadData),c.convertStringToDates(a.criteria,["validFrom","validThru"]),g&&(a.criteria.school=g)}]).controller("CurriculumPublicController",["$scope","QueryUtils","$route",function(a,b,c){function d(b){a.curriculum=b,a.curriculum.studyPeriodMonths=b.studyPeriod%12,a.curriculum.studyPeriodYears=Math.floor(b.studyPeriod/12)}var e=c.current.locals.entity;angular.isDefined(e)&&d(e)}]).controller("CurriculumPublicVersionController",["$scope","Classifier","DataUtils","QueryUtils","$q","$route",function(a,b,c,d,e,f){a.version=f.current.locals.curriculumVersion,a.curriculum=f.current.locals.curriculum}]),angular.module("hitsaOis").config(["$routeProvider","USER_ROLES",function(a,b){a.when("/curriculum",{templateUrl:"curriculum/curriculum.list.html",controller:"CurriculumListController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}]},data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_OPPEKAVA]}}).when("/curriculums/:schoolId?",{templateUrl:"curriculum/curriculum.public.list.html",controller:"CurriculumPublicListController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}]}}).when("/curriculum/:id",{templateUrl:"curriculum/curriculum.public.view.html",controller:"CurriculumPublicController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],entity:["QueryUtils","$route",function(a,b){return a.endpoint("/public/curriculum").get({id:b.current.params.id}).$promise}]}}).when("/curriculum/:curriculumId/version/:id",{templateUrl:"curriculum/curriculum.public.version.html",controller:"CurriculumPublicVersionController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],curriculum:["QueryUtils","$route",function(a,b){return a.endpoint("/public/curriculum").get({id:b.current.params.curriculumId}).$promise}],curriculumVersion:["QueryUtils","$route",function(a,b){return a.endpoint("/public/curriculum/"+b.current.params.curriculumId).get({id:b.current.params.id}).$promise}]}})}]),angular.module("hitsaOis").controller("DeclarationEditController",["$scope","dialogService","QueryUtils","message","ArrayUtils","$route","$location",function(a,b,c,d,e,f,g){function h(){a.subjects=c.endpoint("/declarations/subjects/extracurriculum/"+k).query()}var i=c.endpoint("/declarations/subject"),j=c.endpoint("/declarations/confirm"),k=f.current.params.id;a.formState={},a.auth=f.current.locals.auth,a.addCurriculumSubjectForm=!1,a.addExtraCurriculumSubjectFrom=!1,a.auth.isStudent()&&!angular.isDefined(k)&&c.endpoint("/declarations/hasPrevious").search().$promise.then(function(b){a.currentNavItem="current",a.formState.showNavBar=b.hasPrevious}),k?a.declaration=c.endpoint("/declarations").get({id:k}):a.declaration=c.endpoint("/declarations/current").get(),a.confirm=function(){b.confirmDialog({prompt:"declaration.prompt.confirm"},function(){new j(a.declaration).$update().then(function(a){d.info("declaration.message.confirmed"),g.path("/declarations/"+a.id+"/view")})})},a.removeConfirmation=function(){b.confirmDialog({prompt:"declaration.prompt.removeConfirmation"},function(){var b=c.endpoint("/declarations/removeConfirm");new b(a.declaration).$update().then(function(b){d.info("declaration.message.confirmationRemoved"),a.declaration=b})})},a.removeSubject=function(b){new i(b).$delete().then(function(){d.info("declaration.message.subjectRemoved"),e.remove(a.declaration.subjects,b),a.loadData()})},c.createQueryForm(a,"/declarations/subjects/"+k),a.afterLoadData=function(b){a.tabledata.content=b.content,a.tabledata.totalElements=b.totalElements},a.criteria={order:"cvhm."+a.currentLanguageNameField(),size:10,page:1},a.openAddCurriculumSubject=function(){a.addCurriculumSubject=!0,a.addExtraCurriculumSubject=!1,a.loadData()},a.addCurriculumSubject=function(b){var c=new i({subjectStudyPeriod:b.subjectStudyPeriod,declaration:a.declaration.id,curriculumVersionHigherModule:b.module.id,isOptional:b.isOptional});c.$save().then(function(b){d.info("declaration.message.subjectAdded"),b.newlyAdded=!0,a.declaration.subjects.push(b),a.loadData()})},a.openAddCurriculumSubject=function(){a.addCurriculumSubjectForm=!0,a.addExtraCurriculumSubjectForm=!1,a.loadData()},a.openAddExtraCurriculumSubject=function(){a.addCurriculumSubjectForm=!1,a.addExtraCurriculumSubjectForm=!0,h()},a.addExtraCurriculumSubject=function(){if(a.extraCurriculumForm.$setSubmitted(),a.subject){var b=new i({subjectStudyPeriod:a.subject.subjectStudyPeriod,declaration:a.declaration.id,curriculumVersionHigherModule:null!==a.subject.module?a.subject.module.id:null,isOptional:!0});b.$save().then(function(b){d.info("declaration.message.subjectAdded"),b.newlyAdded=!0,a.declaration.subjects.push(b),h(),a.subject=void 0})}},a.hasPrerequisites=function(a){return!e.isEmpty(a.mandatoryPrerequisiteSubjects)||!e.isEmpty(a.recommendedPrerequisiteSubjects)},a.seePrerequisites=function(a){var c=function(b){b.subject=a};b.showDialog("declaration/declaration.subject.prerequisites.html",c,function(){})}}]).controller("DeclarationViewController",["$scope","dialogService","QueryUtils","message","ArrayUtils","$route","$location",function(a,b,c,d,e,f,g){var h=f.current.params.id;a.currentDeclarationPage="/declaration/current/view"===g.path(),a.auth=f.current.locals.auth;var i=c.endpoint("/declarations/confirm");a.formState={},a.auth.isStudent()&&!angular.isDefined(h)&&c.endpoint("/declarations/hasPrevious").search().$promise.then(function(b){a.currentNavItem="current",a.formState.showNavBar=b.hasPrevious}),h?a.declaration=c.endpoint("/declarations").get({id:h},function(){a.formState.declaration=!0}):c.endpoint("/declarations/current").get().$promise.then(function(b){b.id?(a.declaration=b,a.formState.declaration=!0):(a.formState.noDeclaration=!0,c.endpoint("/declarations/isDeclarationPeriod").search().$promise.then(function(b){a.formState.isDeclarationPeriod=b.isDeclarationPeriod,b.declarationPeriodStart?a.formState.declarationPeriodStart=b.declarationPeriodStart:b.declarationPeriodEnd&&(a.formState.declarationPeriodEnd=b.declarationPeriodEnd),a.formState.isDeclarationPeriod&&c.endpoint("/declarations/canCreate").search().$promise.then(function(b){a.formState.canCreateDeclaration=b.canCreate})}))}),a.addDeclaration=function(){var a=c.endpoint("/declarations/create");(new a).$save().then(function(a){g.path("/declarations/"+a.id+"/edit")})},a.confirm=function(){b.confirmDialog({prompt:"declaration.prompt.confirm"},function(){new i(a.declaration).$update().then(function(b){d.info("declaration.message.confirmed"),a.declaration=b})})},a.removeConfirmation=function(){b.confirmDialog({prompt:"declaration.prompt.removeConfirmation"},function(){var b=c.endpoint("/declarations/removeConfirm");new b(a.declaration).$update().then(function(b){d.info("declaration.message.confirmationRemoved"),a.declaration=b})})},a.hasPrerequisites=function(a){return!e.isEmpty(a.mandatoryPrerequisiteSubjects)||!e.isEmpty(a.recommendedPrerequisiteSubjects)},a.seePrerequisites=function(a){var c=function(b){b.subject=a};b.showDialog("declaration/declaration.subject.prerequisites.html",c,function(){})}}]).controller("DeclarationSearchController",["$scope","$route","$q","$timeout","Classifier","DataUtils","QueryUtils","message","dialogService","USER_ROLES","AuthService",function(a,b,c,d,e,f,g,h,i,j,k){var l=b.current.locals.auth;a.canConfirm=k.isAuthorized(j.ROLE_OIGUS_K_TEEMAOIGUS_OPINGUKAVA);var m=e.valuemapper({status:"OPINGUKAVA_STAATUS"});g.createQueryForm(a,"/declarations",{order:"dId"},m.objectmapper),f.convertStringToDates(a.criteria,["inserted","confirmDate"]),a.studyPeriods=g.endpoint("/autocomplete/studyPeriods").query(),a.curriculumVersions=g.endpoint("/autocomplete/curriculumversions").query({higher:!0,valid:!0}),a.studentGroups=g.endpoint("/autocomplete/studentgroups").query();var n=m.promises;n.push(a.studyPeriods.$promise),n.push(a.curriculumVersions.$promise),n.push(a.studentGroups.$promise),a.formState={canCreate:-1!==l.authorizedRoles.indexOf("ROLE_OIGUS_M_TEEMAOIGUS_OPINGUKAVA")};var o=a.loadData;a.loadData=function(){a.declarationSearchForm.$setSubmitted(),a.declarationSearchForm.$valid?o():h.error("main.messages.form-has-errors")},c.all(n).then(function(){if(a.studyPeriods.length>0&&!a.criteria.studyPeriod){var b=f.getCurrentStudyYearOrPeriod(a.studyPeriods);a.criteria.studyPeriod=b?b.id:void 0}a.criteria.studyPeriod?d(a.loadData):0===a.studyPeriods.length&&(a.formState.canCreate=!1,h.error("studyYear.studyPeriod.missing"))}),a.confirmAll=function(){i.confirmDialog({prompt:"declaration.prompt.confirmAll"},function(){g.endpoint("/declarations/confirm/all").put().$promise.then(function(b){h.info("declaration.message.allConfirmed",{numberOfNewlyConfirmedDeclarations:b.numberOfNewlyConfirmedDeclarations}),a.loadData()})})},a.showUncomposed=function(){var a=function(a){g.createQueryForm(a,"/declarations/withoutDeclaration/",{order:"p.lastname,p.firstname"}),a.clearCriteria(),a.loadData()};i.showDialog("declaration/uncomposed.declarations.html",a,function(){})}}]).controller("DeclarationStudentSearchController",["$scope","$q","Classifier","QueryUtils",function(a,b,c,d){a.currentNavItem="previous";var e=c.valuemapper({status:"OPINGUKAVA_STAATUS"});d.createQueryForm(a,"/declarations/previous",{order:"dId"},e.objectmapper),b.all(e.promises).then(a.loadData)}]).controller("DeclarationNewController",["$scope","$location","FormUtils","QueryUtils","message",function(a,b,c,d,e){function f(){var b=!!a.studyPeriod.id;return b||e.error("studyYear.studyPeriod.missingCurrent"),b}a.studyPeriod=d.endpoint("/declarations/currentStudyPeriod").search(),a.studyPeriod.$promise.then(f),a.save=function(){c.withValidForm(a.declarationNewForm,function(){if(f()){var c=d.endpoint("/declarations/create/"+a.student.id);(new c).$save().then(function(a){e.info("main.messages.create.success"),b.url("/declarations/"+a.id+"/edit?_noback")})["catch"](angular.noop)}})}}]),angular.module("hitsaOis").config(["$routeProvider","USER_ROLES",function(a,b){a.when("/declarations",{templateUrl:"declaration/declaration.search.html",controller:"DeclarationSearchController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}]},data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_OPINGUKAVA]}}).when("/declarations/:id/view",{templateUrl:"declaration/declaration.view.html",controller:"DeclarationViewController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}]},data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_OPINGUKAVA]}}).when("/declaration/current/edit",{templateUrl:"declaration/declaration.edit.html",controller:"DeclarationEditController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}]},data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_OPINGUKAVA]}}).when("/declarations/:id/edit",{templateUrl:"declaration/declaration.edit.html",controller:"DeclarationEditController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}]},data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_OPINGUKAVA]}}).when("/declaration/current/view",{templateUrl:"declaration/declaration.view.html",controller:"DeclarationViewController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}]},data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_OPINGUKAVA]}}).when("/declarations/previous",{templateUrl:"declaration/declaration.student.search.html",controller:"DeclarationStudentSearchController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}]},data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_OPINGUKAVA]}}).when("/declarations/new",{templateUrl:"declaration/declaration.new.html",controller:"DeclarationNewController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}]},data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_OPINGUKAVA]}})}]),angular.module("hitsaOis").controller("DirectiveEditController",["$location","$mdDialog","$q","$route","$scope","dialogService","message","resourceErrorHandler","Classifier","Curriculum","DataUtils","FormUtils","QueryUtils","Session",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){function o(){e.formState.scholarshipEditable=-1!==["STIPTOETUS_ERI","STIPTOETUS_SOIDU","STIPTOETUS_DOKTOR"].indexOf(e.record.scholarshipType)}function p(){var a=e.record.type?e.record.type.substr(9).toLowerCase():"unknown";e.formState.templateUrl="directive/directive.type."+a+".edit.html"}function q(a){a.occupations&&(a.occupations=a.occupations.map(function(a){return D[a]}))}function r(a){var b=k.convertStringToDates(a,["startDate","endDate"]);return D&&(angular.isArray(b)?b.forEach(q):q(b)),b}function s(a){if(e.formState.cancelSelect=a&&"KASKKIRI_TYHIST"===a.type,e.formState.cancelSelect){var b=a.canceledDirectiveType?a.canceledDirectiveType.substr(9).toLowerCase():"unknown";e.formState.templateUrl="directive/directive.type."+b+".view.html",e.formState.canceledDirective=a.canceledDirectiveData,e.formState.changedStudents=a.changedStudents||[];var c=a.selectedStudents||[];e.record.students=(a.canceledStudents||[]).map(function(a){return a.selectable=-1===e.formState.changedStudents.indexOf(a.student),a}),e.formState.selectedStudents=e.record.students.filter(function(a){return-1!==c.indexOf(a.student)}),delete a.canceledDirectiveType,delete a.canceledDirectiveData,delete a.changedStudents,delete a.canceledStudents,delete a.selectedStudents,e.cancelTypeChanged()}else if(p(),o(),e.record.students=r(e.record.students),a&&"KASKKIRI_IMMAT"===a.type)for(var d=0,f=e.record.students.length;f>d;d++)e.record.students[d]._found=!0,e.record.students[d]._idcode=e.record.students[d].idcode,e.record.students[d]._foreign=!e.record.students[d].idcode}function t(){var a=e.record.type;-1!==["KASKKIRI_ENNIST","KASKKIRI_IMMAT","KASKKIRI_IMMATV","KASKKIRI_OKAVA","KASKKIRI_OVORM"].indexOf(a)&&(e.formState.studentGroups=m.endpoint("/autocomplete/studentgroups").query({valid:!0}),e.formState.curriculumVersions&&c.all([e.formState.studentGroups.$promise,e.formState.curriculumVersions.$promise]).then(function(){function a(a){return a.curriculumVersion?[a.curriculumVersion]:e.formState.curriculumVersions.filter(function(b){return b.curriculum===a.curriculum}).map(function(a){return a.id})}var b=e.formState.studentGroups;e.formState.studentGroupMap={};for(var c=0;c<b.length;c++)for(var d=b[c],f=a(d),g=0;g<f.length;g++){var h=f[g],i=e.formState.studentGroupMap[h];i||(i=[],e.formState.studentGroupMap[h]=i),i.push(d)}})),("KASKKIRI_AKAD"===a||"KASKKIRI_VALIS"===a)&&(e.formState.studyPeriods=m.endpoint("/autocomplete/studyPeriods").query())}function u(a,b){var c={type:e.record.type,scholarshipType:e.record.scholarshipType,canceledDirective:B,curriculumVersion:e.formState.curriculumVersion,studyLevel:e.formState.studyLevel,students:a.map(function(a){return a.id}),isHigher:e.record.isHigher};m.endpoint(C+"/directivedata").save(c,b)}function v(a){h.responseError(a,e.directiveForm)["catch"](angular.noop)}function w(){"KASKKIRI_TYHIST"===e.record.type&&(e.record.selectedStudents=e.formState.selectedStudents.map(function(a){return a.student}))}function x(a,b){a.$serverError=void 0,a.$setValidity(b,null)}function y(){var a=e.directiveForm.$error;a&&Object.keys(a).forEach(function(b){var c=a[b].slice();c.forEach(function(a){x(a,b)})})}function z(a){u(a,function(a){for(var b=0,c=a.students.length;c>b;b++)e.record.students.push(r(a.students[b]))})}var A=d.current.params.id,B=d.current.params.canceledDirective,C="/directives";e.formState={state:A||B?"EDIT":"CHOOSETYPE",students:void 0,changedStudents:[],selectedStudents:[],excludedTypes:["KASKKIRI_KYLALIS"],school:n.school||{},higherStudyForms:i.queryForDropdown({mainClassCode:"OPPEVORM",higher:!0}),scholarshipEditable:!1},B||e.formState.excludedTypes.push("KASKKIRI_TYHIST");var D;if(!e.formState.school.higher){e.formState.excludedTypes.push("KASKKIRI_OKOORM"),e.formState.excludedTypes.push("KASKKIRI_OVORM"),e.formState.excludedTypes.push("KASKKIRI_VALIS");var E=i.queryForDropdown({mainClassCodes:"KUTSE,OSAKUTSE"});E.$promise.then(function(){D=i.toMap(E)})}e.formState.curriculumVersionMap={},e.formState.languageMap={},e.formState.curriculumVersions=j.queryVersions({languages:!0}),e.formState.curriculumVersions.$promise.then(function(a){e.formState.curriculumVersionMap=a.reduce(function(a,b){return a[b.id]=b,a},{});for(var b=0;b<a.length;b++){var c=a[b];e.formState.languageMap[c.id]=c.studyLang||[]}});var F=m.endpoint(C);A?e.formState.curriculumVersions.$promise.then(function(){e.record=F.get({id:A}),e.record.$promise.then(s).then(t)}):(e.record=new F({students:[]}),B?(e.record.type="KASKKIRI_TYHIST",u([],function(a){var b=a.toJSON();angular.copy(b,e.record),s(b)})):s()),e.update=function(){y(),l.withValidForm(e.directiveForm,function(){w(),e.record.id?e.record.$update2().then(function(a){s(a),e.directiveForm.$setPristine(),g.updateSuccess()})["catch"](v):e.record.$save2().then(function(){g.info("main.messages.create.success"),a.url(C+"/"+e.record.id+"/edit?_noback")})["catch"](v)})},e["delete"]=function(){l.deleteRecord(e.record,C+"?_noback",{prompt:"directive.deleteconfirm"})},e.directiveTypeChanged=function(){var a={type:e.record.type};if("KASKKIRI_EKSMAT"===a.type)a.application=!0;else if("KASKKIRI_LOPET"===a.type){if(!angular.isDefined(e.record.isHigher)){var b=e.formState.school;if(b.higher&&b.vocational)return;e.record.isHigher=b.higher}a.isHigher=e.record.isHigher}var c="KASKKIRI_STIPTOET"===a.type||"KASKKIRI_STIPTOETL"===a.type;c&&(a.scholarshipType=e.record.scholarshipType),"KASKKIRI_IMMAT"!==a.type&&"KASKKIRI_IMMATV"!==a.type?(!c||a.scholarshipType)&&m.endpoint(C+"/findstudents").search(a,function(a){e.formState.students=a.content,e.formState.selectedStudents=[],e.formState.students.length||g.info("directive.nostudentsfound")}):(e.formState.students=[],"KASKKIRI_IMMATV"!==a.type||e.formState.saisCurriculumVersions||(e.formState.saisCurriculumVersions=j.queryVersions({sais:!0}))),p()},e.scholarshipTypeChanged=function(){o(),e.record.scholarshipType&&e.directiveTypeChanged()},e.addDirective=function(){e.formState.state="EDIT",u(e.formState.selectedStudents,function(a){angular.copy(a.toJSON(),e.record),e.record.students=r(a.students)}),t()},e.deleteStudent=function(a){for(var b=e.record.students,c=0,d=b.length;d>c;c++)if(b[c]===a){b.splice(c,1);break}},e.addStudents=function(){var a=e.record.type,c=e.record.students;if("KASKKIRI_IMMAT"===a)return void c.push({startDate:null});var d={type:a,directive:A};("KASKKIRI_STIPTOET"===a||"KASKKIRI_STIPTOETL"===a)&&(d.scholarshipType=e.record.scholarshipType),b.show({
controller:["$scope",function(a){var e="/directives/findstudents";a.formState={selectedStudents:[],type:d.type},m.createQueryForm(a,e),a.cancel=b.hide,a.select=function(){z(a.formState.selectedStudents),b.hide()},c=c.map(function(a){return a.student}),a.loadData=function(){var b=angular.extend(m.getQueryParams(a.criteria),d);a.tabledata.$promise=m.endpoint(e).search(b,function(b){b.content=b.content.filter(function(a){return-1===c.indexOf(a.id)}),a.afterLoadData(b)})},a.loadData()}],templateUrl:"directive/student.select.dialog.html",clickOutsideToClose:!1})},e.foreignChanged=function(a){a._foreign?(a.foreignIdcode=a.idcode,a.idcode=void 0):(a.idcode=a.foreignIdcode,a.foreignIdcode=void 0),a._idcode=void 0,e.lookupStudent(a)},e.lookupStudent=function(a){var b="students["+e.record.students.indexOf(a)+"].idcode",c=e.directiveForm[b];c&&x(c,"serverside");var d=a._foreign?a.foreignIdcode:a.idcode;d&&(11===d.length||a._foreign)&&d!==a._idcode?(a._idcode=d,m.endpoint("/autocomplete/persons",{search:{method:"GET"}}).search(a._foreign?{foreignIdcode:d,role:"foreignidcode"}:{idcode:d,role:"person"}).$promise.then(function(b){a._found=!0,a.firstname=b.firstname,a.lastname=b.lastname,a.birthdate=b.birthdate||k.birthdayFromIdcode(d),a.sex=b.sex||k.sexFromIdcode(d),a.citizenship=b.citizenship})["catch"](function(b){404===b.status?g.info("directive.newperson"):412===b.status?(c.$serverError=c.$serverError||[],c.$serverError.push({code:"InvalidEstonianIdCode"}),c.$setValidity("serverside",!1)):v(b),a._found=!1,a.firstname=void 0,a.lastname=void 0,a._foreign||404!==b.status?(a.birthdate=void 0,a.sex=void 0,a.citizenship=void 0):(a.birthdate=k.birthdayFromIdcode(d),a.sex=k.sexFromIdcode(d),a.citizenship="RIIK_EST")})):d!==a._idcode&&(a._found=!1,!a._foreign&&d&&c&&(a.birthdate=void 0,a.sex=void 0,c.$serverError=c.$serverError||[],c.$serverError.push({code:"InvalidEstonianIdCode"}),c.$setValidity("serverside",!1)))},e.abroadChanged=function(a){var b="RIIK_EST";a.isAbroad?a.country===b&&(a.country=null):a.country=b},e.curriculumVersionChanged=function(a){var b=e.formState.curriculumVersionMap[a.curriculumVersion];b&&b.isVocational&&(a.studyForm=b.studyForm)},e.visibleStudyForms=function(a){return a?(a=e.formState.curriculumVersionMap[a],a&&a.isVocational?[a.studyForm]:e.formState.higherStudyForms):void 0},e.cancelTypeChanged=function(){if("KASKKIRI_TYHISTAMISE_VIIS_T"===e.record.cancelType){var a=[];e.record.students.forEach(function(b){b.selectable=!1,a.push(b)}),e.formState.selectedStudents=a}else"KASKKIRI_TYHISTAMISE_VIIS_O"===e.record.cancelType&&e.record.students.forEach(function(a){a.selectable=-1===e.formState.changedStudents.indexOf(a.student)})},e.sendToConfirm=function(b){y(),e.directiveForm.directiveCoordinator.$setValidity("required",!!e.record.directiveCoordinator),l.withValidForm(e.directiveForm,function(){function c(){w(),e.record.$update2().then(function(h){s(h),e.directiveForm.$setPristine(),m.endpoint(C+"/sendtoconfirm/"+e.record.id+"?ekis="+b,{put:{method:"PUT"}}).put().$promise.then(function(b){var h=b?b.invalidStudents:void 0;h&&h.length>0?d||f.showDialog("directive/invalid.student.delete.dialog.html",function(a){a.students=h},function(){h.forEach(function(a){var b=e.record.students.find(function(b){return b.student===a.student});b&&e.deleteStudent(b)}),d=!0,c()}):(g.info("directive.sentToConfirm"),a.url(C+"/"+e.record.id+"/view?_noback"))})["catch"](v)})["catch"](v)}var d=!1;m.endpoint(C+"/checkForConfirm").get({id:e.record.id}).$promise.then(function(a){var b=(a.templateName||[]).join('", "');f.confirmDialog({prompt:a.templateExists?"directive.ekisconfirm":"directive.ekisconfirmTemplateMissing",template:b},c)})["catch"](angular.noop)})}}]).controller("DirectiveViewController",["$location","$route","$scope","dialogService","message","Classifier","QueryUtils","FormUtils","Session",function(a,b,c,d,e,f,g,h,i){var j=b.current.params.id,k="/directives",l=f.valuemapper({status:"KASKKIRI_STAATUS"});c.formState={school:i.school||{}};var m,n;c.formState.school.higher||(m=f.queryForDropdown({mainClassCodes:"KUTSE,OSAKUTSE"}),m.$promise.then(function(){n=f.toMap(m)})),c.record=g.endpoint(k+"/:id/view").search({id:j}),c.record.$promise.then(function(){var a="KASKKIRI_TYHIST"===c.record.type?c.record.canceledDirectiveType.substr(9).toLowerCase():c.record.type?c.record.type.substr(9).toLowerCase():"unknown";c.formState.templateUrl="directive/directive.type."+a+".view.html",l.objectmapper(c.record.cancelingDirectives||[]),c.record.students.forEach(function(a){a._foreign=!a.idcode}),m&&m.$promise.then(function(){n&&c.record.students.forEach(function(a){a.occupations&&(a.occupations=a.occupations.map(function(a){return n[a]}))})})}),c.cancelDirective=function(){d.confirmDialog({prompt:"directive.cancelconfirm"},function(){a.url("/directives/new?canceledDirective="+c.record.id+"&_noback")})},c.userCanConfirm=function(){return"KASKKIRI_STAATUS_KINNITAMISEL"===c.record.status&&c.record.userCanConfirm},c.confirmDirective=function(){h.withValidForm(c.directiveForm,function(){g.endpoint(k+"/checkForConfirm").get({id:c.record.id}).$promise.then(function(a){var f=(a.templateName||[]).join('", "');d.confirmDialog({prompt:a.templateExists?"directive.confirmconfirm":"directive.confirmconfirmTemplateMissing",template:f},function(){g.endpoint(k+"/confirm/"+c.record.id).update(c.confirmRecord).$promise.then(function(){e.info("directive.confirmed"),b.reload()})["catch"](angular.noop)})})["catch"](angular.noop)})}}]).controller("DirectiveListController",["$q","$scope","Classifier","QueryUtils","Session",function(a,b,c,d,e){b.formState={excludedTypes:["KASKKIRI_KYLALIS"],school:e.school||{}},b.formState.school.higher||(b.formState.excludedTypes.push("KASKKIRI_OKOORM"),b.formState.excludedTypes.push("KASKKIRI_OVORM"),b.formState.excludedTypes.push("KASKKIRI_VALIS"));var f=c.valuemapper({type:"KASKKIRI",status:"KASKKIRI_STAATUS"});d.createQueryForm(b,"/directives",{order:"-inserted"},f.objectmapper),a.all(f.promises).then(b.loadData)}]),angular.module("hitsaOis").controller("DirectiveCoordinatorEditController",["$location","$route","$scope","dialogService","message","QueryUtils",function(a,b,c,d,e,f){var g=b.current.params.id,h="/directives/coordinators",i=f.endpoint(h);g?c.record=i.get({id:g}):c.record=new i,c.update=function(){return c.directiveCoordinatorForm.$setSubmitted(),c.directiveCoordinatorForm.$valid?void(c.record.id?c.record.$update().then(e.updateSuccess)["catch"](angular.noop):c.record.$save().then(function(){e.info("main.messages.create.success"),a.url(h+"/"+c.record.id+"/edit?_noback")})["catch"](angular.noop)):void e.error("main.messages.form-has-errors")},c["delete"]=function(){d.confirmDialog({prompt:"directive.coordinator.deleteconfirm"},function(){c.record.$delete().then(function(){e.info("main.messages.delete.success"),a.url(h+"?_noback")})["catch"](angular.noop)})}}]),angular.module("hitsaOis").config(["$routeProvider","USER_ROLES",function(a,b){a.when("/directives/coordinators",{templateUrl:"directive/coordinator.search.html",controller:"SimpleListController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}],params:function(){return{order:"name"}},url:function(){return"/directives/coordinators"}},data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_DOKALLKIRI]}}).when("/directives",{templateUrl:"directive/list.html",controller:"DirectiveListController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}]},data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_KASKKIRI]}}).when("/directives/new",{templateUrl:"directive/directive.edit.html",controller:"DirectiveEditController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}]},data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_KASKKIRI]}}).when("/directives/:id/edit",{templateUrl:"directive/directive.edit.html",controller:"DirectiveEditController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}]},data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_KASKKIRI]}}).when("/directives/:id/view",{templateUrl:"directive/directive.view.html",controller:"DirectiveViewController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}]},data:{authorizedRoles:function(a,c){return"ROLL_T"===a.roleCode||"ROLL_L"===a.roleCode||("ROLL_A"===a.roleCode||"ROLL_O"===a.roleCode)&&-1!==(c||[]).indexOf(b.ROLE_OIGUS_V_TEEMAOIGUS_KASKKIRI)}}}).when("/directives/coordinators/new",{templateUrl:"directive/coordinator.edit.html",controller:"DirectiveCoordinatorEditController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}]},data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_DOKALLKIRI]}}).when("/directives/coordinators/:id/edit",{templateUrl:"directive/coordinator.edit.html",controller:"DirectiveCoordinatorEditController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}]},data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_DOKALLKIRI]}})}]),angular.module("hitsaOis").controller("DiplomaSearchController",["$scope","$route","$q","Classifier","QueryUtils","config",function(a,b,c,d,e,f){var g="/documents";a.auth=b.current.locals.auth,a.formState={xlsUrl:"documents/documents.xls",pdfBaseUrl:f.apiUrl+g+"/view"};var h=d.valuemapper({type:"LOPUBLANKETT",diplomaStatus:"LOPUDOK_STAATUS",supplementStatus:"LOPUDOK_STAATUS",supplementStatusEn:"LOPUDOK_STAATUS"});e.createQueryForm(a,g,{order:"p.lastname",isHigher:a.auth.higher},function(a){c.all(h.promises).then(function(){h.objectmapper(a)})});var i=a.clearCriteria;a.clearCriteria=function(){i(),a.criteria.isHigher=a.auth.higher},a.loadData()}]).controller("DiplomaController",["$scope","$route","$q","$httpParamSerializer","$window","Classifier","config","QueryUtils","DataUtils","DocumentUtils","dialogService","message",function(a,b,c,d,e,f,g,h,i,j,k,l){function m(){h.endpoint(t+"/signers").query(function(b){j.mapSignerDisplay(b),a.formState.signers=b,a.formState.firstsigners=b.filter(function(a){return a.isFirst}),1===a.formState.firstsigners.length&&(a.criteria.signer1Id=a.formState.firstsigners[0].id)})}function n(a){return a.fullCode}function o(){h.endpoint(t+"/diploma/forms").query({formType:a.criteria.formType},function(b){b&&b.length>0&&(a.criteria.numeral=b.shift().numeral,a.formState.freeForms=b.map(n))})}function p(){return a.formState.students.filter(function(a){return a.selected}).map(function(a){return a.id})}function q(){return 0===a.criteria.studentIds.length?!1:a.criteria.signer1Id&&a.criteria.signer2Id?a.isHigher&&!a.criteria.city?!1:!0:!1}function r(){return a.criteria.studentIds=p(),g.apiUrl+t+"/diploma/print.pdf?"+d(a.criteria)}function s(){var b=a.formState.directives.filter(function(b){return b.id===a.criteria.directiveId});return b.length>0?b[0]:void 0}var t="/documents";a.isHigher=b.current.locals.params.isHigher,a.currentNavItem="document.diplomas"+(a.isHigher?"":".vocational"),a.criteria={};var u=f.valuemapper({status:"KASKKIRI_STAATUS"});a.formState={directives:h.endpoint(t+"/diploma/directives").query({isHigher:a.isHigher},function(a){i.convertStringToDates(a,["date"]),c.all(u.promises).then(function(){u.objectmapper(a),j.mapDirectiveDisplay(a)})}),students:[]},a.directiveChanged=function(){a.formState.students=[],a.updatePdfUrl(),h.endpoint(t+"/formtypes").query(a.criteria,function(b){a.formState.formTypes=b,1===b.length&&(a.criteria.formType=b[0],a.formTypeChanged())})},a.formTypeChanged=function(){h.endpoint(t+"/diploma/students").query(a.criteria,function(b){i.convertStringToDates(b,["birthdate"]),a.formState.students=b,a.updatePdfUrl(),b.length>0&&(m(),o())})},a.selectAllStudents=function(b){a.formState.students.forEach(function(a){a.selected=b}),a.updatePdfUrl()},a.updatePdfUrl=function(){return a.criteria.studentIds=p(),q()?void(a.viewPdfUrl=g.apiUrl+t+"/diploma/print/view.pdf?"+d(a.criteria)):void(a.viewPdfUrl=void 0)},a.canPrintConfirm=function(){var b=s();return a.viewPdfUrl&&"KASKKIRI_STAATUS_KINNITATUD"===b.status.code},a.print=function(){a.criteria.studentIds=p(),h.endpoint(t+"/diploma/calculate").query(a.criteria,function(b){e.location=r(),k.showDialog("document/templates/diploma.confirm.dialog.html",function(c){c.forms=b,a.formState.students.filter(function(a){return a.selected}).forEach(function(a,b){c.forms[b].fullname=a.fullname})},function(){h.endpoint(t+"/diploma/confirm").save({directiveId:a.criteria.directiveId,formType:a.criteria.formType,studentIds:a.criteria.studentIds,numerals:b.map(function(a){return a.numeral})},function(){l.updateSuccess(),a.formTypeChanged()}).$promise["catch"](angular.noop)})}).$promise["catch"](angular.noop)}}]).controller("SupplementSearchController",["$scope","$route","$q","Classifier","QueryUtils","DataUtils","DocumentUtils",function(a,b,c,d,e,f,g){var h="/documents";a.isHigher=b.current.locals.params.isHigher,a.currentNavItem="document.supplements"+(a.isHigher?"":".vocational");var i=d.valuemapper({status:"KASKKIRI_STAATUS",diplomaStatus:"LOPUDOK_STAATUS",supplementStatus:"LOPUDOK_STAATUS",supplementStatusEn:"LOPUDOK_STAATUS"});a.formState={directives:e.endpoint(h+"/supplement/directives").query({isHigher:a.isHigher},function(a){f.convertStringToDates(a,["date"]),c.all(i.promises).then(function(){i.objectmapper(a),g.mapDirectiveDisplay(a)})})},a.autocomplete={},e.createQueryForm(a,h+"/supplement/students",{isHigher:a.isHigher,order:"p.lastname, p.firstname"},i.objectmapper);var j=a.clearCriteria;a.clearCriteria=function(){j(),a.autocomplete={},a.criteria.isHigher=a.isHigher},c.all(i.promises).then(a.loadData),a.$watch("autocomplete.student",function(){a.criteria.studentId=a.autocomplete.student?a.autocomplete.student.id:null}),a.$watch("autocomplete.curriculumVersion",function(){a.criteria.curriculumVersionId=a.autocomplete.curriculumVersion?a.autocomplete.curriculumVersion.id:null})}]).controller("SupplementController",["$scope","$route","$httpParamSerializer","$window","config","QueryUtils","DocumentUtils","dialogService","message",function(a,b,c,d,e,f,g,h,i){function j(a){return a.fullCode}function k(b){return"EN"===b?a.record.supplementStatusEn&&"LOPUDOK_STAATUS_K"!==a.record.supplementStatusEn:a.record.supplementStatus&&"LOPUDOK_STAATUS_K"!==a.record.supplementStatus}function l(){return!a.contentData.signer1Id||a.isHigher&&!a.contentData.signer2Id?!1:!0}function m(b){var c=angular.extend({},a.contentData,"EN"===b?a.formDataEn:a.formData);return b&&angular.extend(c,{lang:b}),c}function n(a){return e.apiUrl+o+"/supplement/"+p+"/print.pdf?"+c(m(a))}var o="/documents",p=b.current.params.id;a.isHigher=b.current.locals.params.isHigher,a.contentData={showSubjectCode:!0,showTeacher:!0},a.formData={},a.formDataEn={},a.formState={signers:f.endpoint(o+"/signers").query(function(a){g.mapSignerDisplay(a)})},a.record=f.endpoint(o+"/supplement").get({id:p},function(b){if(b.forms&&b.forms.length>0&&("LOPUDOK_STAATUS_T"!==b.supplementStatus&&(a.formData.numeral=b.forms.shift().numeral),b.forms=b.forms.map(j)),b.formsEn&&b.formsEn.length>0&&("LOPUDOK_STAATUS_T"!==b.supplementStatusEn&&(a.formDataEn.numeral=b.formsEn.shift().numeral),b.formsEn=b.formsEn.map(j)),b.freeExtraForms&&b.freeExtraForms.length>0){var c=b.freeExtraForms.shift().numeral;a.formData.additionalNumeral=c,a.formDataEn.additionalNumeral=c,b.freeExtraForms=b.freeExtraForms.map(j)}}),a.updatePdfUrl=function(){if(!l())return a.viewPdfUrl=void 0,void(a.viewPdfUrlEn=void 0);var b=e.apiUrl+o+"/supplement/"+p+"/print/view.pdf?"+c(a.contentData);a.viewPdfUrl=k("ET")?void 0:b,a.viewPdfUrlEn=k("EN")?void 0:b+"&lang=EN"},a.print=function(b){f.endpoint(o+"/supplement/"+p+"/calculate").query(m(b),function(c){d.location=n(b),h.confirmDialog({prompt:"document.confirm.print",forms:c.map(j).join(", "),accept:"document.confirm.yes",cancel:"document.confirm.no"},function(){f.endpoint(o+"/supplement/"+p+"/confirm"+(b?"?lang="+b:"")).save(c.map(function(a){return a.id}),function(){i.updateSuccess(),d.location.href="#/documents/supplements"+(a.isHigher?"":"/vocational")})})}).$promise["catch"](angular.noop)}}]).factory("DocumentUtils",["$rootScope","$filter",function(a,b){return{mapDirectiveDisplay:function(c){var d=b("hoisDate");c.forEach(function(b){b.display=(b.number||"-")+"/"+d(b.date)+"/"+a.currentLanguageNameField(b.status)})},mapSignerDisplay:function(a){a.forEach(function(a){a.display=a.name+", "+a.position})}}}]),angular.module("hitsaOis").config(["$routeProvider","USER_ROLES",function(a,b){a.when("/documents",{templateUrl:"document/diploma.search.html",controller:"DiplomaSearchController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}]},data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_LOPTUNNISTUS_TRUKKIMINE]}}).when("/documents/diplomas",{templateUrl:"document/diploma.html",controller:"DiplomaController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}],params:function(){return{isHigher:!0}}},data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_LOPTUNNISTUS_TRUKKIMINE]}}).when("/documents/diplomas/vocational",{templateUrl:"document/diploma.html",controller:"DiplomaController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}],params:function(){return{isHigher:!1}}},data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_LOPTUNNISTUS_TRUKKIMINE]}}).when("/documents/supplements",{templateUrl:"document/supplement.search.html",controller:"SupplementSearchController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}],params:function(){return{isHigher:!0}}},data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_HINNETELEHT_TRUKKIMINE]}}).when("/documents/supplements/vocational",{templateUrl:"document/supplement.search.html",controller:"SupplementSearchController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}],params:function(){return{isHigher:!1}}},data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_HINNETELEHT_TRUKKIMINE]}}).when("/documents/supplements/:id",{templateUrl:"document/supplement.html",controller:"SupplementController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}],params:function(){return{isHigher:!0}}},data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_HINNETELEHT_TRUKKIMINE]}}).when("/documents/supplements/vocational/:id",{templateUrl:"document/supplement.vocational.html",controller:"SupplementController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}],params:function(){return{isHigher:!1}}},data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_HINNETELEHT_TRUKKIMINE]}})}]),angular.module("hitsaOis").controller("ExamSearchController",["$q","$route","$scope","$timeout","message","Classifier","DataUtils","QueryUtils","USER_ROLES",function(a,b,c,d,e,f,g,h,i){c.auth=b.current.locals.auth;var j=f.valuemapper({type:"SOORITUS"});h.createQueryForm(c,"/exams",{order:"te.start"},j.objectmapper),c.formState={studyPeriods:h.endpoint("/autocomplete/studyPeriods").query(),canAdd:-1!==c.auth.authorizedRoles.indexOf(i.ROLE_OIGUS_M_TEEMAOIGUS_EKSAM)};var k=j.promises;k.push(c.formState.studyPeriods.$promise),a.all(k).then(function(){if(c.formState.studyPeriods.length>0&&!c.criteria.studyPeriod){var a=g.getCurrentStudyYearOrPeriod(c.formState.studyPeriods);c.criteria.studyPeriod=a?a.id:void 0}c.criteria.studyPeriod?d(c.loadData):0===c.formState.studyPeriods.length&&e.error("studyYear.studyPeriod.missing")})}]).controller("ExamStudentRegistrationController",["$q","$rootScope","$scope","$timeout","dialogService","message","Classifier","DataUtils","QueryUtils",function(a,b,c,d,e,f,g,h,i){var j="/exams",k=g.valuemapper({assessment:"HINDAMISVIIS",type:"SOORITUS"});i.createQueryForm(c,j+"/forregistration",{order:"te.start"}),c.afterLoadData=function(a){c.tabledata.content=a.content,c.tabledata.totalElements=a.totalElements,k.objectmapper(a.content)},c.formState={studyPeriods:i.endpoint("/autocomplete/studyPeriods").query()};var l=k.promises;l.push(c.formState.studyPeriods.$promise),a.all(l).then(function(){if(c.formState.studyPeriods.length>0&&!c.criteria.studyPeriod){var a=h.getCurrentStudyYearOrPeriod(c.formState.studyPeriods);c.criteria.studyPeriod=a?a.id:void 0}c.criteria.studyPeriod&&d(c.loadData)}),c.studyPeriodChanged=function(){c.criteria.studyPeriod&&c.loadData()},c.register=function(a){e.confirmDialog({prompt:"exam.message.registerconfirmation",exam:b.currentLanguageNameField(a.subject)},function(){i.endpoint(j+"/register").update({id:a.id}).$promise.then(function(){f.info("exam.message.registered"),c.loadData()})["catch"](angular.noop)})},c.unregister=function(a){e.confirmDialog({prompt:"exam.message.unregisterconfirmation",exam:b.currentLanguageNameField(a.subject)},function(){i.endpoint(j+"/unregister").update({id:a.id}).$promise.then(function(){f.info("exam.message.unregistered"),c.loadData()})["catch"](angular.noop)})}}]).controller("ExamEditController",["$location","$route","$scope","dialogService","message","Classifier","DataUtils","FormUtils","QueryUtils",function(a,b,c,d,e,f,g,h,i){function j(){var a=c.formState.subjectStudyPeriod;a&&c.record.type?s.$promise.then(function(){c.record.name=a.subject.nameEt+" "+(o[c.record.type].nameEt||"").toLowerCase()}):c.record.name=""}function k(){c.formState.allEditable=!c.record.id||!c.record.students||!c.record.students.length,c.formState.canDelete=!c.record.students||!c.record.students.length}function l(){var a=c.record.studentRecords||[];a.forEach(function(a,b){a.rowno=b+1}),c.formState.students=a,delete c.record.studentRecords,c.formState.subjectStudyPeriod=c.record.subjectStudyPeriodDto,delete c.record.subjectStudyPeriodDto,k()}function m(){var a={rooms:c.record.room.id,subjectStudyPeriod:c.record.subjectStudyPeriod,exam:c.record.id},b=moment(c.record.startDate),d=moment(c.record.startTime,"HH:mm"),e=moment(c.record.endTime,"HH:mm");return a.startTime=new Date(b.year(),b.month(),b.date(),d.hours(),d.minutes()),a.endTime=new Date(b.year(),b.month(),b.date(),e.hours(),e.minutes()),a}function n(){c.record.id?(c.record.$update().then(e.updateSuccess).then(l)["catch"](angular.noop),c.examForm.$setPristine()):c.record.$save().then(function(){e.info("main.messages.create.success"),a.url(q+"/"+c.record.id+"/edit?_noback")})["catch"](angular.noop)}c.auth=b.current.locals.auth;var o,p=b.current.params.id,q="/exams",r=i.endpoint(q),s=f.queryForDropdown({mainClassCode:"SOORITUS"});if(s.$promise.then(function(){o=f.toMap(s)}),c.formState={minDate:moment().subtract(1,"days").startOf("day").toDate()},c.examTypeChanged=function(){var a=c.record.type;c.record.id&&a?c.formState.availableStudents=i.endpoint(q+"/studentsforregistration/"+p).query({type:a}):c.formState.availableStudents=[],j()},p?(c.record=r.get({id:p},l),c.record.$promise.then(c.examTypeChanged)):(c.record=new r({students:[],studentRecords:[]}),l()),c.update=function(){h.withValidForm(c.examForm,function(){var a=m();i.endpoint("/timetableevents/timetableTimeOccupied").get(a).$promise.then(function(a){a.occupied?d.confirmDialog(g.occupiedEventTimePrompts(c,c.auth.higher,a),function(){n()}):n()})})},c.getLocalDateTime=function(a){var b=moment(c.record.startDate);return a=moment(a,"HH:mm"),new Date(b.year(),b.month(),b.date(),a.hours(),a.minutes())},c["delete"]=function(){h.deleteRecord(c.record,"/examTimes?_noback",{prompt:"exam.message.deleteconfirm"})},c.lookupStudents=function(a){return a=(a||"").toUpperCase(),c.formState.availableStudents.filter(function(b){return-1!==b.fullname.toUpperCase().indexOf(a)&&-1===c.record.students.indexOf(b.id)})},c.addStudent=function(){var a=c.formState.selectedStudent?c.formState.selectedStudent.id:void 0;if(a){var b=c.formState.availableStudents.find(function(b){return b.id===a});b.rowno=c.formState.students.length+1,c.formState.students.push(b),c.record.students.push(b.id)}c.formState.selectedStudent=void 0,k()},c.deleteStudent=function(a){d.confirmDialog({prompt:"exam.message.deletestudentconfirm"},function(){for(var b=c.formState.students,d=0,e=b.length;e>d;d++)if(b[d]===a){b.splice(d,1);var f=c.record.students.indexOf(a.id);-1!==f&&c.record.students.splice(f,1),c.examForm.$setDirty();break}k()})},!p){var t=i.endpoint("/autocomplete/studyPeriods").query(),u=i.endpoint(q+"/subjectstudyperiods");c.formState.studyPeriods=t,c.formState.subjectStudyPeriods=[],c.studyPeriodChanged=function(){if(c.formState.studyPeriod){var a={studyPeriod:c.formState.studyPeriod};c.formState.subjectStudyPeriods=u.query(a)}else c.formState.subjectStudyPeriods=[];c.formState.subjectStudyPeriodId=void 0,c.formState.subjectStudyPeriod=void 0,c.record.subjectStudyPeriod=void 0,c.subjectStudyPeriodChanged()},t.$promise.then(function(){if(t.length>0){var a=g.getCurrentStudyYearOrPeriod(t);c.formState.studyPeriod=a?a.id:void 0}c.studyPeriodChanged()}),c.subjectStudyPeriodChanged=function(){if(c.formState.subjectStudyPeriodId){var a=c.formState.subjectStudyPeriods.find(function(a){return a.id===c.formState.subjectStudyPeriodId});c.formState.subjectStudyPeriod=a,c.record.subjectStudyPeriod=a.id}j()}}}]).controller("ExamViewController",["$route","$scope","QueryUtils",function(a,b,c){var d=c.endpoint("/exams"),e=a.current.params.id;b.formState={},b.record=d.get({id:e},function(){b.record.studentRecords.forEach(function(a,b){a.rowno=b+1})})}]),angular.module("hitsaOis").config(["$routeProvider","USER_ROLES",function(a,b){a.when("/examTimes",{templateUrl:"exam/search.html",controller:"ExamSearchController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}]},data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_EKSAM]}}).when("/examRegistration",{templateUrl:"exam/registration.student.html",controller:"ExamStudentRegistrationController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}]},data:{authorizedRoles:function(a){return"ROLL_T"===a.roleCode}}}).when("/exams/new",{templateUrl:"exam/edit.html",controller:"ExamEditController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}]},data:{authorizedRoles:[b.ROLE_OIGUS_M_TEEMAOIGUS_EKSAM]}}).when("/exams/:id/edit",{templateUrl:"exam/edit.html",controller:"ExamEditController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}]},data:{authorizedRoles:[b.ROLE_OIGUS_M_TEEMAOIGUS_EKSAM]}}).when("/exams/:id/view",{templateUrl:"exam/view.html",controller:"ExamViewController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}]},data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_EKSAM]}})}]),angular.module("hitsaOis").config(["$routeProvider","USER_ROLES",function(a,b){a.when("/thesisProtocols",{templateUrl:"fakePages/fake.html",controller:"fakeController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}]},data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_LOPPROTOKOLL]}}).when("/viewTimetable",{templateUrl:"fakePages/fake.html",controller:"fakeController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}]},data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_TUNNIPLAAN]}}).when("/thesisTopicInput",{templateUrl:"fakePages/fake.html",controller:"fakeController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}]},data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_LOPTEEMA]}}).when("/myData",{templateUrl:"fakePages/fake.html",controller:"fakeController",controllerAs:"controller",resolve:{translationLoaDed:["$translate",function(a){return a.onReady()}]},data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_OPETAJA,b.ROLE_OIGUS_V_TEEMAOIGUS_OPPUR]}}).when("/timetable",{templateUrl:"fakePages/fake.html",controller:"fakeController",controllerAs:"controller",resolve:{translationLoaDed:["$translate",function(a){return a.onReady()}]},data:{authorizedRoles:[]}}).when("/myTimetable",{templateUrl:"fakePages/fake.html",controller:"fakeController",controllerAs:"controller",resolve:{translationLoaDed:["$translate",function(a){return a.onReady()}]},data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_TUNNIPLAAN]}}).when("/loads",{templateUrl:"fakePages/fake.html",controller:"fakeController",controllerAs:"controller",resolve:{translationLoaDed:["$translate",function(a){return a.onReady()}]},data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_KOORMUS]}}).when("/studentInfo",{templateUrl:"fakePages/fake.html",controller:"fakeController",controllerAs:"controller",resolve:{translationLoaDed:["$translate",function(a){return a.onReady()}]},data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_A]}})}]).controller("fakeController",["$scope","QueryUtils",function(a,b){b.endpoint("/fake/get505Error").search()}]),angular.module("hitsaOis").controller("FormSearchController",["$q","$route","$scope","Classifier","QueryUtils","USER_ROLES","message",function(a,b,c,d,e,f,g){var h="/forms",i=b.current.locals.auth;c.canEdit=-1!==i.authorizedRoles.indexOf(f.ROLE_OIGUS_M_TEEMAOIGUS_LOPBLANKETT);var j=d.valuemapper({type:"LOPUBLANKETT",status:"LOPUBLANKETT_STAATUS"});e.createQueryForm(c,h,{},j.objectmapper),c.criteria={},c.afterLoadData=function(a){c.tabledata.content=a,0===a.length&&g.info("main.messages.error.notFound"),j.objectmapper(a)},c.loadData=function(){var a=c.getCriteria();c.toStorage(h,a),c.tabledata.$promise=e.endpoint(h).query(a,c.afterLoadData)},c.formState={xlsUrl:"forms/forms.xls"},a.all(j.promises).then(function(){c.loadData()})}]).controller("FormEditController",["$route","$scope","message","Classifier","FormUtils","QueryUtils","dialogService",function(a,b,c,d,e,f,g){var h="/forms";b.actionType=a.current.params.action,b.getButtonLabelKey=function(){return"delete"===b.actionType?"main.button.delete":"defected"===b.actionType?"form.button.defected":"main.button.save"},b.formState={},b.update=function(){e.withValidForm(b.formForm,function(){"delete"===b.actionType||"defected"===b.actionType?g.confirmDialog({prompt:"form.confirm."+b.actionType,from:b.formState.from,thru:b.formState.thru},function(){f.endpoint(h+"/"+b.actionType).save(b.formState,function(){"delete"===b.actionType?c.info("main.messages.delete.success"):"defected"===b.actionType&&c.updateSuccess(),b.formForm.$setPristine()}).$promise["catch"](angular.noop)}):f.endpoint(h+"/"+b.actionType).save(b.formState,function(){c.updateSuccess(),b.formForm.$setPristine()}).$promise["catch"](angular.noop)})}}]),angular.module("hitsaOis").config(["$routeProvider","USER_ROLES",function(a,b){a.when("/forms",{templateUrl:"form/form.list.html",controller:"FormSearchController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){
return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}]},data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_LOPBLANKETT]}}).when("/forms/:action",{templateUrl:"form/form.edit.html",controller:"FormEditController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}]},data:{authorizedRoles:[b.ROLE_OIGUS_M_TEEMAOIGUS_LOPBLANKETT]}})}]),angular.module("hitsaOis").controller("GeneralMessageSearchController",["$scope","$sessionStorage","Classifier","DataUtils","QueryUtils","USER_ROLES","AuthService",function(a,b,c,d,e,f,g){a.canEdit=g.isAuthorized(f.ROLE_OIGUS_M_TEEMAOIGUS_YLDTEADE),a.roleDefs=c.queryForDropdown({mainClassCode:"ROLL"}),a.fromStorage=function(a){var c=JSON.parse(b[a]||"{}");return d.convertStringToDates(c,["validFrom","validThru"]),c};var h=new Date;h.setHours(0,0,0,0),e.createQueryForm(a,"/generalmessages",{validFrom:h,order:"validFrom"},function(b){for(var c=function(b){return a.roleDefs[b]},d=0;d<b.length;d++){var e=b[d];e.targets=(e.targets||[]).map(c)}}),a.roleDefs.$promise.then(function(){a.roleDefs=c.toMap(a.roleDefs),a.loadData()})}]).controller("GeneralMessageEditController",["$location","$route","$scope","dialogService","message","Classifier","DataUtils","QueryUtils",function(a,b,c,d,e,f,g,h){function i(){f.setSelectedCodes(c.roleDefs,c.record.targets||[]),g.convertStringToDates(c.record,["validFrom","validThru"])}var j=b.current.params.id,k="/generalmessages";f.queryForDropdown({mainClassCode:"ROLL",filterValues:["ROLL_H","ROLL_P","ROLL_V"]}).$promise.then(function(a){c.roleDefs=a;var b=h.endpoint(k);if(j)c.record=b.get({id:j},i);else{var d=new Date;d.setHours(0,0,0,0),c.record=new b({validFrom:d,validThru:null}),i()}}),c.targetChanged=function(){c.generalMessageForm.$submitted&&c.generalMessageForm.$setPristine()},c.isFormValid=function(){return c.generalMessageForm.$valid},c.update=function(){return c.generalMessageForm.$setSubmitted(),c.record.targets=f.getSelectedCodes(c.roleDefs),c.isFormValid()&&0!==c.record.targets.length?void(c.record.id?(c.record.$update(i).then(e.updateSuccess),c.generalMessageForm.$setPristine()):c.record.$save(i).then(function(){e.info("main.messages.create.success"),a.url(k+"/"+c.record.id+"/edit?_noback")})):void e.error("main.messages.form-has-errors")},c["delete"]=function(){d.confirmDialog({prompt:"generalmessage.deleteconfirm"},function(){c.record.$delete().then(function(){e.info("main.messages.delete.success"),a.url(k)})})}}]).controller("GeneralMessageViewController",["$route","$scope","QueryUtils","USER_ROLES","AuthService",function(a,b,c,d,e){var f=a.current.params.id;b.canEdit=e.isAuthorized(d.ROLE_OIGUS_M_TEEMAOIGUS_YLDTEADE),b.record=c.endpoint("/generalmessages").get({id:f})}]),angular.module("hitsaOis").config(["$routeProvider","USER_ROLES",function(a,b){a.when("/generalmessages",{templateUrl:"generalMessage/general.message.list.html",controller:"GeneralMessageSearchController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}]},data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_YLDTEADE]}}).when("/generalmessages/new",{templateUrl:"generalMessage/general.message.edit.html",controller:"GeneralMessageEditController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}]},data:{authorizedRoles:[b.ROLE_OIGUS_M_TEEMAOIGUS_YLDTEADE]}}).when("/generalmessages/:id/edit",{templateUrl:"generalMessage/general.message.edit.html",controller:"GeneralMessageEditController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}]},data:{authorizedRoles:[b.ROLE_OIGUS_M_TEEMAOIGUS_YLDTEADE]}}).when("/generalmessages/:id/view",{templateUrl:"generalMessage/general.message.view.html",controller:"GeneralMessageViewController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}]},data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_YLDTEADE]}})}]),angular.module("hitsaOis").controller("HigherCurriculumController",["$scope","Classifier","Curriculum","dialogService","ArrayUtils","message","$route","$location","QueryUtils","oisFileService","DataUtils","$rootScope","config","Session",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){function o(){M?i.endpoint("/curriculum/schoolDepartments/"+M).query().$promise.then(function(b){a.schoolDepartments=b}):C()}function p(){i.endpoint("/curriculum/studyLevels").query({curriculum:M,isHigher:!0}).$promise.then(function(b){a.studyLevels=b})}function q(){a.jointPartnersEhisSchools=[],a.myEhisSchool=a.curriculum.id?a.curriculum.ehisSchool:n.school.ehisSchool,a.jointPartnersEhisSchools.push(a.myEhisSchool),a.curriculum.jointPartners.forEach(function(b){b.ehisSchool&&a.jointPartnersEhisSchools.push(b.ehisSchool)})}function r(){k.convertStringToDates(a.curriculum,["validFrom","validThru","approval","ehisChanged","accreditationDate","accreditationValidDate","merRegDate"]),s(),a.getAreasOfStudy(),G(),E(),a.formState.jointDisabled=D(),q(),a.curriculum.abroad=!1,a.formState.notEditableBasicData=a.curriculum.status===c.STATUS.VERIFIED,a.formState.sentToEhis="OPPEKAVA_EHIS_STAATUS_A"===a.curriculum.ehisStatus||"OPPEKAVA_EHIS_STAATUS_M"===a.curriculum.ehisStatus,a.formState.strictValidation=!1}function s(){var b=12;a.curriculum.studyPeriodYears=Math.floor(a.curriculum.studyPeriod/b),a.curriculum.studyPeriodMonths=a.curriculum.studyPeriod%b}function t(){return a.higherCurriculumForm.$valid&&(!a.strictValidation()||a.curriculum.specialities.length>0&&a.jointPartnersAdded())}function u(){if(a.curriculum.joint){if(P(),w()){var b={abroad:a.curriculum.abroad,supervisor:a.curriculum.supervisor,contractEt:a.curriculum.contractEt,contractEn:a.curriculum.contractEn};a.curriculum.jointPartners.push(b)}}else v()}function v(){a.curriculum.abroad=!1,a.curriculum.jointPartners=[],a.curriculum.supervisor=void 0,a.curriculum.jointMentor=void 0,a.curriculum.contractEt=void 0,a.curriculum.contractEn=void 0}function w(){return e.isEmpty(a.curriculum.jointPartners)&&(angular.isDefined(a.curriculum.supervisor)||angular.isDefined(a.curriculum.contractEt)||angular.isDefined(a.curriculum.contractEn))}function x(b){if(a.higherCurriculumForm.$setSubmitted(),!t()){var c=b&&b.errorMessage?b.errorMessage:"main.messages.form-has-errors";return f.error(c),!1}if(a.strictValidation()){if(!a.hasRequiredFiles())return f.error("curriculum.error.noSummaryFile"),!1;if(!a.hasVerifiedVersions())return f.error("curriculum.error.noVersion"),!1}return!0}function y(){a.formState.readOnly||h.path("/higherCurriculum/"+a.curriculum.id+"/view")}function z(){u(),B(),a.curriculum.studyPeriodMonths=a.curriculum.studyPeriodMonths?a.curriculum.studyPeriodMonths:0,a.curriculum.studyPeriod=a.curriculum.studyPeriodMonths+12*a.curriculum.studyPeriodYears}function A(b){x(b)&&(z(),a.curriculum.id?a.curriculum.$update().then(function(){var c=b&&b.updateSuccess?b.updateSuccess:"main.messages.create.success";f.info(c),r(),a.higherCurriculumForm.$setPristine()}):(a.curriculum.newFiles=a.curriculum.files,a.curriculum.files=void 0,a.curriculum.$save().then(function(a){f.info("main.messages.create.success"),h.path("/higherCurriculum/"+a.id+"/edit")})))}function B(){a.gradeRequired()||(a.curriculum.grades=[])}function C(){i.endpoint("/curriculum/schoolDepartments").query({ehisShools:a.jointPartnersEhisSchools,curriculum:M}).$promise.then(function(b){if(a.schoolDepartments=b,a.curriculum.schoolDepartments){var c=b.map(function(a){return a.id});a.curriculum.schoolDepartments=a.curriculum.schoolDepartments.filter(function(a){return e.includes(c,a)})}})}function D(){return!a.curriculum.joint||e.isEmpty(a.curriculum.jointPartners)?!1:a.curriculum.jointPartners.some(function(a){return a.hasSubjects})}function E(){a.curriculum.jointPartners&&a.curriculum.jointPartners.length>0&&(a.curriculum.abroad=!1,a.curriculum.contractEt=a.curriculum.jointPartners[0].contractEt,a.curriculum.contractEn=a.curriculum.jointPartners[0].contractEn,a.curriculum.supervisor=a.curriculum.jointPartners[0].supervisor,1!==a.curriculum.jointPartners.length||a.curriculum.jointPartners[0].ehisSchool||a.curriculum.jointPartners[0].nameEt||a.curriculum.jointPartners[0].nameEn||(a.curriculum.jointPartners=[]))}function F(b){return e.contains(a.curriculum.addresses.map(function(a){return a.addressOv}),b.addressOv)}function G(){angular.isArray(a.curriculum.addresses)&&(a.validation.addressesLength=a.curriculum.addresses.length)}function H(b,c,g,h){d.confirmDialog({prompt:"curriculum.itemDeleteConfirm"},function(){c.data.id?new h(c.data).$delete().then(function(){f.info("main.messages.delete.success"),e.remove(b,g)}):(e.remove(b,g),a.higherCurriculumForm.$setDirty()),c.cancel()})}function I(b,c,d,e){if(a.curriculum.id){var g=new b(c);c.id?g.$update().then(function(a){f.info("main.messages.update.success"),angular.extend(e,a)}):g.$save().then(function(a){f.info("main.messages.create.success"),d.push(a)})}else e?angular.extend(e,c):d.push(c),a.higherCurriculumForm.$setDirty()}function J(b,c){new b(a.curriculum).$update().then(function(b){a.curriculum=b,f.info(c.updateSuccess),r(),y(),a.higherCurriculumForm.$setPristine()})}a.auth=g.current.locals.auth,a.STATUS=c.STATUS,a.maxStydyYears={max:100};var K,L="/curriculum",M=g.current.params.id;a.publicUrl=m.apiUrl+"/public/curriculum/"+M+"?format=json",a.formState={readOnly:-1!==g.current.$$route.originalPath.indexOf("view"),curriculumXmlUrl:m.apiUrl+L+"/xml/"+M+"/curriculum.xml",strictValidation:!1},o(),a.removeFromArray=function(a,b){d.confirmDialog({prompt:"curriculum.itemDeleteConfirm"},function(){e.remove(a,b)})};var N=i.endpoint(L),O={files:[],specialities:[],grades:[],studyLanguages:[],departments:[],versions:[],addresses:[],jointPartners:[],higher:!0,status:c.STATUS.ENTERING,consecution:"OPPEKAVA_TYPE_E",draft:"OPPEKAVA_LOOMISE_VIIS_PUUDUB",joint:!1,abroad:!1,studyPeriodMonths:0,validFrom:new Date};a.validation={addressesLength:0},a.studyLevels=[],p(),a.areasOfStudy=[],a.getAreasOfStudy=function(b){b&&(a.curriculum.areaOfStudy=void 0),a.curriculum.group&&c.getAreasOfStudyByGroupOfStudy(a.curriculum.group,function(b){a.areasOfStudy=b})},M?N.get({id:M}).$promise.then(function(b){K=i.endpoint(L+"/"+M+"/file"),a.curriculum=b,r(),l.removeLastUrlFromHistory(function(b){return b==="#/higherCurriculum/"+a.curriculum.id+"/view"||b==="#/higherCurriculum/"+a.curriculum.id+"/edit"||"#/higherCurriculum/new"===b})}):(a.curriculum=new N(O),q(),a.formState.curriculum={status:a.curriculum.status}),a.gradeRequired=function(){return!a.curriculum||!a.curriculum.origStudyLevel||"OPPEASTE_514"!==a.curriculum.origStudyLevel},a.jointPartnersAdded=function(){return!a.curriculum.joint||a.curriculum.jointPartners.length>0},a.codeUniqueQuery={id:M,url:L+"/unique/code"},a.merCodeUniqueQuery={id:M,url:L+"/unique/merCode"},a.hasRequiredFiles=function(){var b=a.curriculum.files;return e.isEmpty(b)?!1:!e.isEmpty(b.filter(function(a){return"EHIS_FAIL_15773"===a.ehisFile&&a.sendEhis===!0&&a.oisFile&&"application/pdf"===a.oisFile.ftype}))},a.hasVerifiedVersions=function(){var b=a.curriculum.versions;return e.isEmpty(b)?!1:!e.isEmpty(b.filter(function(a){return a.status===c.VERSION_STATUS.K}))},a.save=function(){a.formState.strictValidation=!1,setTimeout(A,0)},a.getStar=function(){return a.strictValidation()?"":" *"},a.strictValidation=function(){return a.curriculum&&(a.curriculum.status===c.STATUS.VERIFIED||a.curriculum.status===c.STATUS.PROCEEDING||a.formState.strictValidation)},a.changeJointMentors=function(){a.curriculum.abroad&&(a.jointPartnersEhisSchools=[])},a["delete"]=function(){d.confirmDialog({prompt:"curriculum.deleteconfirmHigher"},function(){a.curriculum.$delete().then(function(){f.info("main.messages.delete.success"),h.path(L)})})},a.$watch("curriculum.joint",function(a,b){b&&!a&&(v(),q(),C())}),a.removejointPartner=function(b){d.confirmDialog({prompt:"curriculum.itemDeleteConfirm"},function(){e.remove(a.curriculum.jointPartners,b),b.abroad||(e.remove(a.jointPartnersEhisSchools,b.ehisSchool),a.curriculum.jointMentor===b.ehisSchool&&(a.curriculum.jointMentor=void 0)),a.higherCurriculumForm.$setDirty(),C()})},a.addJointPartner=function(){var b={abroad:a.curriculum.abroad};if(b.abroad)b.nameEt=a.curriculum.jointPartnerForeignNameEt,b.nameEn=a.curriculum.jointPartnerForeignNameEn;else{for(var c=0;c<a.jointPartnersEhisSchools.length;c++)if(-1!==a.jointPartnersEhisSchools.indexOf(a.curriculum.jointPartnerEhisSchool))return void a.clearJointPartnersFields();b.ehisSchool=a.curriculum.jointPartnerEhisSchool,a.jointPartnersEhisSchools.push(b.ehisSchool)}a.curriculum.jointPartners.push(b),a.clearJointPartnersFields(),C()};var P=function(){a.curriculum.jointPartners.forEach(function(b){b.contractEt=a.curriculum.contractEt,b.contractEn=a.curriculum.contractEn,b.supervisor=a.curriculum.supervisor})};a.clearJointPartnersFields=function(){a.curriculum.jointPartnerForeignNameEt=void 0,a.curriculum.jointPartnerForeignNameEn=void 0,a.curriculum.jointPartnerEhisSchool=void 0},a.filterEmptyJointPartners=function(a){return a.ehisSchool||a.nameEt||a.nameEn},a.addAddress=function(){return F(a.formState.address)?void f.error("curriculum.error.addressAlreadyAdded"):(a.curriculum.addresses.push(a.formState.address),a.formState.address={},void G())},a.removeAddress=function(b){d.confirmDialog({prompt:"curriculum.itemDeleteConfirm"},function(){e.remove(a.curriculum.addresses,b),a.higherCurriculumForm.$setDirty(),G()})},a.openAddSpecialtyDialog=function(b){var c=function(c){b&&(c.data=angular.extend({},b)),c.maxCredits=a.curriculum.credits?a.curriculum.credits:0,c.formState={isNew:!angular.isDefined(b)},c["delete"]=function(){return c.data.addedToVersion?void f.error("curriculum.error.specAddedToVersion"):(H(a.curriculum.specialities,c,b,i.endpoint("/curriculum/"+a.curriculum.id+"/speciality")),void a.higherCurriculumForm.$setDirty())}};d.showDialog("higherCurriculum/higher.curriculum.specialty.add.dialog.html",c,function(c){var d=c.data;d.occupation||(d.occupationEt=void 0,d.occupationEn=void 0),I(i.endpoint("/curriculum/"+a.curriculum.id+"/speciality"),d,a.curriculum.specialities,b)})},a.openViewSpecialtyDialog=function(a){var b=function(b){b.data=angular.extend({},a)};d.showDialog("higherCurriculum/higher.curriculum.specialty.view.dialog.html",b,null)},a.openAddGradeDialog=function(b){var c=null;b&&(c=function(c){c.data=angular.extend({},b),c.editing=angular.isDefined(b),c["delete"]=function(){H(a.curriculum.grades,c,b,i.endpoint("/curriculum/"+a.curriculum.id+"/grade"))}}),d.showDialog("higherCurriculum/higher.curriculum.grade.add.dialog.html",c,function(c){var d=c.data;I(i.endpoint("/curriculum/"+a.curriculum.id+"/grade"),d,a.curriculum.grades,b)})},a.openViewGradeDialog=function(a){var b=function(b){b.data=angular.extend({},a)};d.showDialog("higherCurriculum/higher.curriculum.grade.view.dialog.html",b,null)},a.openAddFileDialog=function(){d.showDialog("curriculum/dialog/file.add.dialog.html",function(a){a.fileTypeCriteria={higher:!0}},function(b){var c=b.data;c.sendEhis=!1,c.ehis=!1,c.oisFile=j.getFromLfFile(c.file[0],function(b){c.oisFile=b;var d=new K(c);d.$save().then(function(b){f.info("main.messages.create.success"),a.curriculum.files.push(b)})})})},a.deleteFile=function(b){d.confirmDialog({prompt:"curriculum.itemDeleteConfirm"},function(){e.remove(a.curriculum.files,b);var c=new K(b);c.$delete().then(function(){f.info("main.messages.delete.success")})})},a.getUrl=j.getUrl,a.saveAndProceed=function(){var b={prompt:"curriculum.statuschange.higher.proceed",errorMessage:"curriculum.error.inputFieldsNotFilledOnProcede",updateSuccess:"curriculum.success.proceed"};a.formState.strictValidation=!0,d.confirmDialog({prompt:b.prompt},function(){setTimeout(function(){if(x(b)){z();var a=i.endpoint("/curriculum/saveAndProceed");J(a,b)}},0)})},a.setStatusClosed=function(){var b={prompt:a.formState.readOnly?"curriculum.statuschangeReadOnly.higher.close":"curriculum.statuschange.higher.close",updateSuccess:"curriculum.success.closed"};d.confirmDialog({prompt:b.prompt},function(){var a=i.endpoint("/curriculum/close");J(a,b)})},a.sendToEhis=function(a){d.confirmDialog({prompt:"curriculum.ehisconfirm"},function(){var b=i.endpoint("/curriculum/sendToEhis"+(a?"/test":""));J(b,{updateSuccess:"curriculum.sentToEhis"})})},a.updateFromEhis=function(a){var b=i.endpoint("/curriculum/updateFromEhis"+(a?"/test":""));J(b,{updateSuccess:"curriculum.message.ehisStatusUpdated"})},a.goToEditForm=function(){a.curriculum&&(a.curriculum.status===c.STATUS.VERIFIED?d.confirmDialog({prompt:"curriculum.prompt.editAccepted"},function(){h.path("/higherCurriculum/"+a.curriculum.id+"/edit")}):h.path("/higherCurriculum/"+a.curriculum.id+"/edit"))},a.canBeEdited=function(){var b=a.curriculum?a.curriculum.status:null;return a.formState.readOnly&&(b===c.STATUS.ENTERING||b===c.STATUS.PROCEEDING||b===c.STATUS.VERIFIED)},a.goToVersionNewForm=function(){var b="/higherCurriculum/"+a.curriculum.id+"/version/new";!a.formState.readOnly&&a.higherCurriculumForm.$dirty?d.confirmDialog({prompt:"main.messages.confirmFormDataNotSaved"},function(){h.path(b)}):h.path(b)},a.goToVersionForm=function(b){var e=a.formState.readOnly||b.status!==c.VERSION_STATUS.S?"/higherCurriculum/"+a.curriculum.id+"/version/"+b.id+"/view":"/higherCurriculum/"+a.curriculum.id+"/version/"+b.id+"/edit";!a.formState.readOnly&&a.higherCurriculumForm.$dirty?d.confirmDialog({prompt:"main.messages.confirmFormDataNotSaved"},function(){h.path(e)}):h.path(e)},a.versionCanBeAdded=function(){return a.curriculum&&a.curriculum.canChange&&(a.curriculum.status===c.STATUS.ENTERING&&!a.formState.readOnly||a.curriculum.status===c.STATUS.PROCEEDING||a.curriculum.status===c.STATUS.VERIFIED)},a.searchTeacher=function(a){return i.endpoint("/curriculum/teachers").query({name:a}).$promise}}]),angular.module("hitsaOis").config(["$routeProvider","USER_ROLES",function(a,b){function c(a,b,c,d,e){d.resolve().then(function(d){d.isAdmin()&&c.includes(d.authorizedRoles,e.ROLE_OIGUS_M_TEEMAOIGUS_OPPEKAVA)||(a.error("main.messages.error.nopermission"),b.path(""))})}c.$inject=["message","$location","ArrayUtils","AuthResolver","USER_ROLES"],a.when("/higherCurriculum/new",{templateUrl:"higherCurriculum/higher.curriculum.html",controller:"HigherCurriculumController",controllerAs:"controller",resolve:{auth:["AuthResolver",function(a){return a.resolve()}],translationLoaded:["$translate",function(a){return a.onReady()}],checkAccess:c},data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_OPPEKAVA]}}).when("/higherCurriculum/:id/edit",{templateUrl:"higherCurriculum/higher.curriculum.html",controller:"HigherCurriculumController",controllerAs:"controller",resolve:{auth:["AuthResolver",function(a){return a.resolve()}],translationLoaded:["$translate",function(a){return a.onReady()}],checkAccess:c},data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_OPPEKAVA]}}).when("/higherCurriculum/:id/view",{templateUrl:"higherCurriculum/higher.curriculum.view.html",controller:"HigherCurriculumController",controllerAs:"controller",resolve:{auth:["AuthResolver",function(a){return a.resolve()}],translationLoaded:["$translate",function(a){return a.onReady()}]},data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_OPPEKAVA]}}).when("/higherCurriculum/:id/version/new",{templateUrl:"higherCurriculum/higher.curriculum.version.html",controller:"HigherCurriculumVersionController",controllerAs:"controller",resolve:{auth:["AuthResolver",function(a){return a.resolve()}],translationLoaded:["$translate",function(a){return a.onReady()}],curriculum:["QueryUtils","$route",function(a,b){return a.endpoint("/curriculumVersion/curriculum").get({id:b.current.params.id}).$promise}],checkAccess:c},data:{authorizedRoles:[b.ROLE_OIGUS_M_TEEMAOIGUS_OPPEKAVA]}}).when("/higherCurriculum/:id/version/:versionId/edit",{templateUrl:"higherCurriculum/higher.curriculum.version.html",controller:"HigherCurriculumVersionController",controllerAs:"controller",resolve:{auth:["AuthResolver",function(a){return a.resolve()}],translationLoaded:["$translate",function(a){return a.onReady()}],curriculum:["QueryUtils","$route",function(a,b){return a.endpoint("/curriculumVersion/curriculum").get({id:b.current.params.id}).$promise}],checkAccess:c},data:{authorizedRoles:[b.ROLE_OIGUS_M_TEEMAOIGUS_OPPEKAVA]}}).when("/higherCurriculum/:id/version/:versionId/view",{templateUrl:"higherCurriculum/higher.curriculum.version.view.html",controller:"HigherCurriculumVersionController",controllerAs:"controller",resolve:{auth:["AuthResolver",function(a){return a.resolve()}],translationLoaded:["$translate",function(a){return a.onReady()}],curriculum:["QueryUtils","$route",function(a,b){return a.endpoint("/curriculumVersion/curriculum").get({id:b.current.params.id}).$promise}]},data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_OPPEKAVA]}}).when("/higherCurriculum/:curriculumId/version/:versionId/module/new",{templateUrl:"higherCurriculum/version/higher.module.edit.html",controller:"HigherModuleController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],checkAccess:c},data:{authorizedRoles:[b.ROLE_OIGUS_M_TEEMAOIGUS_OPPEKAVA]}}).when("/higherCurriculum/:curriculumId/version/:versionId/module/:id/edit",{templateUrl:"higherCurriculum/version/higher.module.edit.html",controller:"HigherModuleController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],checkAccess:c},data:{authorizedRoles:[b.ROLE_OIGUS_M_TEEMAOIGUS_OPPEKAVA]}}).when("/higherCurriculum/:curriculumId/version/:versionId/module/:id/view",{templateUrl:"higherCurriculum/version/higher.module.view.html",controller:"HigherModuleController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}]},data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_OPPEKAVA]}}).when("/higherCurriculum/:curriculumId/version/:versionId/minorSpeciality/new",{templateUrl:"higherCurriculum/version/minor.speciality.edit.html",controller:"MinorSpecialityController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],checkAccess:c},data:{authorizedRoles:[b.ROLE_OIGUS_M_TEEMAOIGUS_OPPEKAVA]}}).when("/higherCurriculum/:curriculumId/version/:versionId/minorSpeciality/:id/edit",{templateUrl:"higherCurriculum/version/minor.speciality.edit.html",controller:"MinorSpecialityController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],checkAccess:c},data:{authorizedRoles:[b.ROLE_OIGUS_M_TEEMAOIGUS_OPPEKAVA]}}).when("/higherCurriculum/:curriculumId/version/:versionId/minorSpeciality/:id/view",{templateUrl:"higherCurriculum/version/minor.speciality.view.html",controller:"MinorSpecialityController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}]},data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_OPPEKAVA]}})}]),angular.module("hitsaOis").controller("HigherCurriculumVersionController",["$scope","Curriculum","dialogService","ArrayUtils","message","$route","$location","QueryUtils","$translate","$rootScope","$routeParams","DataUtils","config",function(a,b,c,d,e,f,g,h,i,j,k,l,m){function n(){l.convertStringToDates(a.version,["validFrom","validThru"]),a.formState.curriculumPdfUrl=m.apiUrl+A+"/print/"+a.version.id+"/curriculum.pdf",a.formState.curriculumXmlUrl=m.apiUrl+A+"/xml/"+a.version.id+"/curriculum.version.xml"}function o(){a.admissionYears=[null];for(var b=(new Date).getFullYear(),c=b-10;b+2>=c;c++)a.admissionYears.push(c)}function p(b){if(a.higherCurriculumVersionForm.$setSubmitted(),!t()){var c=b&&b.errorMessage?b.errorMessage:"main.messages.form-has-errors";return e.error(c),!1}return!0}function q(b){if(p(b)){var c=new E(a.version);angular.isDefined(a.version.id)?c.$update().then(function(c){var d=b&&b.updateSuccess?b.updateSuccess:"main.messages.create.success";e.info(d),a.version=c,l.convertStringToDates(a.version,["validFrom","validThru"]),a.higherCurriculumVersionForm.$setPristine()}):c.$save().then(function(b){e.info("main.messages.create.success"),g.path("/higherCurriculum/"+a.version.curriculum+"/version/"+b.id+"/edit")})}}function r(b,d){p(d)&&setTimeout(function(){c.confirmDialog({prompt:d.prompt},function(){new b(a.version).$update().then(function(b){var c=d&&d.updateSuccess?d.updateSuccess:"main.messages.create.success";e.info(c),a.version=b,l.convertStringToDates(a.version,["validFrom","validThru"]),a.version.curriculum=a.curriculum.id,a.formState.strictValidation=!1,s(b),a.higherCurriculumVersionForm.$setPristine()})})},0)}function s(b){a.formState.readOnly||g.path("/higherCurriculum/"+a.version.curriculum+"/version/"+b.id+"/view")}function t(){return a.higherCurriculumVersionForm.$valid&&(a.versionIsValid()||!a.strictValidation())}function u(b){return a.version.modules.filter(function(a){return!a.minorSpeciality&&d.includes(a.curriculumSpecialities,b)})}function v(a){D.get({id:a.id}).$promise.then(function(b){a.totalCredits=b.totalCredits,a.compulsoryStudyCredits=b.compulsoryStudyCredits})}function w(a,b){return!angular.isDefined(a)&&angular.isDefined(b)||angular.isDefined(a)&&angular.isDefined(b)&&a.length<b.length}function x(a,b){if(!angular.isDefined(a))return b;for(var c=[],e=0;e<b.length;e++)d.contains(a,b[e])||c.push(b[e]);return c}function y(b){var c="";c=b?a.formState.readOnly||!a.version.canChange?"/higherCurriculum/"+a.curriculum.id+"/version/"+a.version.id+"/module/"+b.id+"/view":"/higherCurriculum/"+a.curriculum.id+"/version/"+a.version.id+"/module/"+b.id+"/edit":"/higherCurriculum/"+a.curriculum.id+"/version/"+a.version.id+"/module/new",g.path(c)}function z(b){var c="";c=b?a.formState.readOnly||!a.version.canChange?"/higherCurriculum/"+a.curriculum.id+"/version/"+a.version.id+"/minorSpeciality/"+b.id+"/view":"/higherCurriculum/"+a.curriculum.id+"/version/"+a.version.id+"/minorSpeciality/"+b.id+"/edit":"/higherCurriculum/"+a.curriculum.id+"/version/"+a.version.id+"/minorSpeciality/new",g.path(c)}a.auth=f.current.locals.auth;var A="/curriculum";a.curriculum=f.current.locals.curriculum,a.formState={readOnly:-1!==f.current.$$route.originalPath.indexOf("view"),strictValidation:!1};var B=h.endpoint("/curriculum/"+a.curriculum.id+"/speciality"),C=h.endpoint("/higherModule/subject"),D=h.endpoint("/higherModule/credits"),E=h.endpoint("/curriculumVersion"),F=f.current.params.versionId;a.STATUS=b.STATUS,a.VERSION_STATUS=b.VERSION_STATUS;var G={status:a.VERSION_STATUS.S,validFrom:new Date,code:a.curriculum.code+"/"+(new Date).getFullYear(),curriculum:a.curriculum.id,modules:[],canChange:!0};F?(a.version=E.get({id:F}).$promise.then(function(b){a.version=b,n(),j.removeLastUrlFromHistory(function(b){return b&&-1!==b.indexOf("#/higherCurriculum/"+a.version.curriculum+"/version/")})}),a.publicUrl=m.apiUrl+"/public/curriculum/"+a.curriculum.id+"/"+F+"?format=json"):a.version=angular.extend(G),a.openAddSpecialtyDialog=function(){var b=function(b){b.maxCredits=a.curriculum.credits?a.curriculum.credits:0,b.isNew=!0};c.showDialog("higherCurriculum/higher.curriculum.specialty.add.dialog.html",b,function(b){var c=b.data;c.occupation||(c.occupationEt=void 0,c.occupationEn=void 0);var d=new B(c);d.curriculum=a.curriculum.id,d.$save().then(function(b){e.info("main.messages.create.success"),a.curriculum.specialities.push(b)})})},o(),a.curriculumVersionCodeUniqueQuery={id:f.current.params.versionId,url:"/curriculumVersion/unique/code"},a.save=function(){a.formState.strictValidation=!1,setTimeout(q,0)},a.saveAndConfirm=function(){var b={prompt:a.formState.readOnly?"curriculum.statuschangeReadOnly.version.prompt.verify":"curriculum.statuschange.version.prompt.verify",updateSuccess:"curriculum.statuschange.version.success.verified"},c=h.endpoint("/curriculumVersion/saveAndConfirm");a.formState.strictValidation=!0,r(c,b)},a.confirm=function(){var b={prompt:a.formState.readOnly?"curriculum.statuschangeReadOnly.version.prompt.verify":"curriculum.statuschange.version.prompt.verify",updateSuccess:"curriculum.statuschange.version.success.verified"},c=h.endpoint("/curriculumVersion/confirm");a.formState.strictValidation=!0,r(c,b)},a.setStatusClosed=function(){var b={prompt:a.formState.readOnly?"curriculum.statuschangeReadOnly.version.prompt.close":"curriculum.statuschange.version.prompt.close",updateSuccess:"curriculum.statuschange.version.success.closed"},c=h.endpoint("/curriculumVersion/close");a.formState.strictValidation=!1,r(c,b)},a.goToEditForm=function(){a.curriculum&&(a.version.status===b.VERSION_STATUS.K?c.confirmDialog({prompt:"curriculum.statuschange.version.prompt.editAccepted"},function(){g.path("/higherCurriculum/"+a.version.curriculum+"/version/"+a.version.id+"/edit")}):g.path("/higherCurriculum/"+a.version.curriculum+"/version/"+a.version.id+"/edit"))},a.strictValidation=function(){return a.version.status===b.VERSION_STATUS.K||a.formState.strictValidation},a["delete"]=function(){c.confirmDialog({prompt:"curriculum.version.deleteconfirm"},function(){var b=new E(a.version);b.$delete().then(function(){e.info("main.messages.delete.success"),j.back("#/higherCurriculum/"+a.version.curriculum+"/view")})})},a.copy=function(){var b=h.endpoint("/curriculumVersion/copy");new b({id:F}).$update().then(function(b){e.info("main.messages.create.success"),g.path("/higherCurriculum/"+a.version.curriculum+"/version/"+b.id+"/edit")})},a.versionIsValid=function(){return a.allSpecialitiesValid()&&a.allMinorSpecialitiesValid()},a.allMinorSpecialitiesValid=function(){for(var b=a.version.modules.filter(function(a){return a.minorSpeciality}),c=0;c<b.length;c++)if(!a.moduleValid(b[c]))return!1;return!0},a.allSpecialitiesValid=function(){if(d.isEmpty(a.version.specialitiesReferenceNumbers)||d.isEmpty(a.version.modules))return!1;for(var b=a.version.specialitiesReferenceNumbers,c=0;c<b.length;c++)if(!a.specialityValid(b[c]))return!1;return!0},a.specialityValid=function(b){var c=u(b);if(d.isEmpty(c))return!1;for(var e=0;e<c.length;e++)if(!a.moduleValid(c[e]))return!1;return!0},a.moduleValid=function(b){return a.moduleHasSubjects(b)},a.anyModuleAdded=function(a){return a.modules.filter(function(a){return!a.minorSpeciality}).length>0},a.moduleMustHaveSubjects=function(a){return"KORGMOODUL_V"!==a.type},a.moduleHasSubjects=function(b){return b.minorSpeciality?b.subjects&&b.subjects.length>0:!a.moduleMustHaveSubjects(b)||b.subjects&&b.subjects.length>0},a.filterModulesBySpeciality=function(a){return function(b){return d.includes(b.curriculumSpecialities,a.referenceNumber)}},a.filterSpecialities=function(b){return a.curriculum&&a.version&&a.version.specialitiesReferenceNumbers?d.includes(a.version.specialitiesReferenceNumbers,b.referenceNumber):!1},a.deleteSubject=function(a,b){c.confirmDialog({prompt:"curriculum.itemDeleteConfirm"},function(){new C(b).$delete().then(function(){e.info("main.messages.delete.success"),d.remove(a.subjects,b),v(a)})})},a.$watchCollection("version.specialitiesReferenceNumbers",function(b,c){if(w(b,c))for(var d=x(b,c),f=0;f<d.length;f++)if(u(d[f]).length>0)return e.error("curriculum.error.specAddedToModule"),void(a.version.specialitiesReferenceNumbers=c)}),a.openAddModuleDialog=function(b){a.higherCurriculumVersionForm.$dirty?c.confirmDialog({prompt:"main.messages.confirmFormDataNotSaved"},function(){y(b)}):y(b)},a.openAddMinorSpecialtyDialog=function(b){a.higherCurriculumVersionForm.$dirty?c.confirmDialog({prompt:"main.messages.confirmFormDataNotSaved"},function(){z(b)}):z(b)},a.showPrintButton=function(){return angular.isDefined(a.version.id)&&(a.auth.isAdmin()||a.curriculum.status===a.STATUS.VERIFIED&&a.version.status===a.VERSION_STATUS.K)}}]),angular.module("hitsaOis").controller("HigherModuleController",["$scope","$route","QueryUtils","dialogService","message","ArrayUtils","$location","$rootScope",function(a,b,c,d,e,f,g,h){
function i(a){return"KORGMOODUL_V"!==a.type}function j(b){a.data=new t(b),k(),a.getSubjects()}function k(){c.endpoint(s+"/versionHmoduleTypes/"+q).query().$promise.then(function(b){a.moduleTypes=b,a.data.typeObject=a.moduleTypes.find(function(b){return"KORGMOODUL_M"!==a.data.type?b.code===a.data.type:null===b.code&&b.nameEn===a.data.typeNameEn&&b.nameEt===a.data.typeNameEt}),a.higherModuleForm&&a.higherModuleForm.$setPristine()})}function l(){a.data.subjects=[],a.data.electiveModules=[],a.data.compulsoryStudyCredits=0,a.data.electiveModulesNumber=0,a.data.totalCredits=a.data.optionalStudyCredits}function m(){return a.higherModuleForm.$setSubmitted(),a.higherModuleForm.$valid?a.subjectsValid()?!0:(e.error("curriculum.error.noSubject"),!1):(e.error("main.messages.form-has-errors"),!1)}function n(){var b=a.data;"KORGMOODUL_M"!==b.typeObject.code&&null!==b.typeObject.code?(b.typeNameEt=null,b.typeNameEn=null,b.type=b.typeObject.code):null===b.typeObject.code?(b.type="KORGMOODUL_M",b.typeNameEt=b.typeObject.nameEt,b.typeNameEn=b.typeObject.nameEn):b.type="KORGMOODUL_M"}function o(a){for(var b,c=a.map(function(a){return a.referenceNumber});;)if(b=-Math.floor(1e3*Math.random()+1),!f.includes(c,b))break;return b}var p=b.current.params.id,q=b.current.params.versionId,r=b.current.params.curriculumId,s="/higherModule",t=c.endpoint(s);h.removeLastUrlFromHistory(function(a){return a&&-1!==a.indexOf("new")}),a.backToEditForm="#/higherCurriculum/"+r+"/version/"+q+"/edit",a.backToViewForm="#/higherCurriculum/"+r+"/version/"+q+"/view",a.formState={moduleMustHaveSubjects:!a.data||i(scope.data),readOnly:-1!==b.current.$$route.originalPath.indexOf("view")};var u={electiveModules:[],specialitiesReferenceNumbers:[],subjects:[],minorSpeciality:!1,optionalStudyCredits:0,totalCredits:0,compulsoryStudyCredits:0,electiveModulesNumber:0,curriculumVersion:q};p?t.get({id:p}).$promise.then(j):(a.data=new t(angular.extend({},u)),k()),c.endpoint(s+"/version/"+q+"/specialities").query().$promise.then(function(b){a.specialities=b}),a.getSubjects=function(){return f.isEmpty(a.data.specialitiesReferenceNumbers)?void(a.subjects=[]):void c.endpoint(s+"/possibleSubjects").query({module:p,curriculumVersion:q,specialities:a.data.specialitiesReferenceNumbers}).$promise.then(function(b){a.subjects=b})},a.$watch("data.typeObject",function(b){b&&"KORGMOODUL_V"===b.code?(a.formState.moduleMustHaveSubjects=!1,l()):b&&(a.formState.moduleMustHaveSubjects=!0)}),a.addElectiveModule=function(){var b={nameEt:a.optionalNameEt,nameEn:a.optionalNameEn,referenceNumber:o(a.data.electiveModules)};a.data.electiveModules.push(b),a.optionalNameEt=void 0,a.optionalNameEn=void 0},a.editingElectiveModule=!1;var v=null;a.editElectiveModule=function(b){v=b,a.editingElectiveModule=!0,a.optionalNameEt=b.nameEt,a.optionalNameEn=b.nameEn},a.finishEditElectiveModule=function(){a.editingElectiveModule=!1,v.nameEt=a.optionalNameEt,v.nameEn=a.optionalNameEn,a.optionalNameEt=void 0,a.optionalNameEn=void 0},a.deleteElectiveModule=function(b){a.data.subjects.forEach(function(a){a.electiveModule===b.referenceNumber&&(a.electiveModule=void 0)}),f.remove(a.data.electiveModules,b),a.higherModuleForm.$setDirty()},a.subjectsValid=function(){return!a.formState.moduleMustHaveSubjects||a.data.subjects&&a.data.subjects.length>0},a.removeSubject=function(b){f.remove(a.data.subjects,b),a.setCompulsoryStudyCredits(),a.higherModuleForm.$setDirty()},a.addSubject=function(){var b=angular.copy(a.data.selectedSubject);b.optional=!1,a.data.subjects.push(b),a.data.selectedSubject=void 0,a.setCompulsoryStudyCredits(),a.higherModuleForm.$setDirty()},a.setCompulsoryStudyCredits=function(b){a.setCompulsoryAndTotalStudyCredits(a.data),b&&!b.optional&&(b.electiveModule=void 0)},a.setCompulsoryAndTotalStudyCredits=function(a){a.compulsoryStudyCredits=0,a.subjects.forEach(function(b){b.optional||(a.compulsoryStudyCredits+=b.credits)}),a.totalCredits=a.compulsoryStudyCredits+a.optionalStudyCredits},a.save=function(b){m()&&(n(),p?a.data.$update().then(function(b){e.info("main.messages.update.success"),a.higherModuleForm.$setPristine(),j(b)}):a.data.$save().then(function(a){e.info("main.messages.create.success"),g.path("/higherCurriculum/"+r+"/version/"+q+"/module/"+a.id+"/edit")}))},a["delete"]=function(){d.confirmDialog({prompt:"curriculum.moduleDeleteConfirm"},function(){new t(a.data).$delete().then(function(){e.info("main.messages.delete.success"),g.url("/higherCurriculum/"+r+"/version/"+q+"/edit?_noback")})})},a.subjectNotAdded=function(b){if(!a.data||f.isEmpty(a.data.subjects))return!0;var c=a.data.subjects.map(function(a){return a.subjectId});return!f.includes(c,b.subjectId)}}]),angular.module("hitsaOis").controller("MinorSpecialityController",["$scope","$route","QueryUtils","dialogService","message","ArrayUtils","$location","$rootScope",function(a,b,c,d,e,f,g,h){function i(b){a.data=new r(b)}function j(){c.endpoint(q+"/minorSpeciality/possibleSubjects").query({curriculumVersion:o}).$promise.then(function(b){a.subjects=b})}function k(){return a.data.subjects.length>0}function l(){return a.minorSpecialityForm.$setSubmitted(),a.minorSpecialityForm.$valid?k()?!0:(e.error("curriculum.error.noSubject"),!1):(e.error("main.messages.form-has-errors"),!1)}function m(a){for(var b,c=a.map(function(a){return a.referenceNumber});;)if(b=-Math.floor(1e3*Math.random()+1),!f.includes(c,b))break;return b}var n=b.current.params.id,o=b.current.params.versionId,p=b.current.params.curriculumId,q="/higherModule",r=c.endpoint(q);h.removeLastUrlFromHistory(function(a){return a&&-1!==a.indexOf("new")}),a.backToEditForm="#/higherCurriculum/"+p+"/version/"+o+"/edit",a.backToViewForm="#/higherCurriculum/"+p+"/version/"+o+"/view",a.formState={readOnly:-1!==b.current.$$route.originalPath.indexOf("view")};var s={electiveModules:[],specialitiesReferenceNumbers:[],subjects:[],minorSpeciality:!0,optionalStudyCredits:0,totalCredits:0,compulsoryStudyCredits:0,electiveModulesNumber:0,type:"KORGMOODUL_M",curriculumVersion:o};n?r.get({id:n}).$promise.then(i):a.data=new r(angular.extend({},s)),j(),a.addElectiveModule=function(){var b={nameEt:a.optionalNameEt,nameEn:a.optionalNameEn,referenceNumber:m(a.data.electiveModules)};a.data.electiveModules.push(b),a.optionalNameEt=void 0,a.optionalNameEn=void 0},a.editingElectiveModule=!1;var t=null;a.editElectiveModule=function(b){t=b,a.editingElectiveModule=!0,a.optionalNameEt=b.nameEt,a.optionalNameEn=b.nameEn},a.finishEditElectiveModule=function(){a.editingElectiveModule=!1,t.nameEt=a.optionalNameEt,t.nameEn=a.optionalNameEn,a.optionalNameEt=void 0,a.optionalNameEn=void 0},a.deleteElectiveModule=function(b){a.data.subjects.forEach(function(a){a.electiveModule===b.referenceNumber&&(a.electiveModule=void 0)}),f.remove(a.data.electiveModules,b),a.minorSpecialityForm.$setDirty()},a.removeSubject=function(b){f.remove(a.data.subjects,b),a.setCompulsoryStudyCredits(),a.minorSpecialityForm.$setDirty()},a.addSubject=function(){var b=angular.copy(a.data.selectedSubject);b.optional=!1,a.data.subjects.push(b),a.data.selectedSubject=void 0,a.setCompulsoryStudyCredits(),a.minorSpecialityForm.$setDirty()},a.setCompulsoryStudyCredits=function(b){a.setCompulsoryAndTotalStudyCredits(a.data),b&&!b.optional&&(b.electiveModule=void 0)},a.setCompulsoryAndTotalStudyCredits=function(a){a.compulsoryStudyCredits=0,a.subjects.forEach(function(b){b.optional||(a.compulsoryStudyCredits+=b.credits)}),a.totalCredits=a.compulsoryStudyCredits+a.optionalStudyCredits},a.save=function(b){l()&&(n?a.data.$update().then(function(b){e.info("main.messages.update.success"),a.minorSpecialityForm.$setPristine(),i(b)}):a.data.$save().then(function(a){e.info("main.messages.create.success"),g.path("/higherCurriculum/"+p+"/version/"+o+"/minorSpeciality/"+a.id+"/edit")}))},a["delete"]=function(){d.confirmDialog({prompt:"curriculum.minorSpecialtyDeleteConfirm"},function(){new r(a.data).$delete().then(function(){e.info("main.messages.delete.success"),g.url("/higherCurriculum/"+p+"/version/"+o+"/edit?_noback")})})},a.subjectNotAdded=function(b){if(!a.data||f.isEmpty(a.data.subjects))return!0;var c=a.data.subjects.map(function(a){return a.subjectId});return!f.includes(c,b.subjectId)}}]),angular.module("hitsaOis").config(["$routeProvider","USER_ROLES",function(a,b){a.when("/higherProtocols",{templateUrl:"higherProtocol/higher.protocol.search.html",controller:"HigherProtocolSearchController",controllerAs:"HigherProtocolSearchController",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}]},data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_PROTOKOLL]}}).when("/higherProtocols/new",{templateUrl:"higherProtocol/higher.protocol.new.html",controller:"HigherProtocolNewController",controllerAs:"higherProtocolNewController",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}],isCreate:function(){return!0}},data:{authorizedRoles:[b.ROLE_OIGUS_M_TEEMAOIGUS_PROTOKOLL]}}).when("/higherProtocols/:id/edit",{templateUrl:"higherProtocol/higher.protocol.edit.html",controller:"HigherProtocolEditViewController",controllerAs:"HigherProtocolEditViewController",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}],entity:["QueryUtils","$route",function(a,b){return a.endpoint("/higherProtocols").get({id:b.current.params.id}).$promise}],isView:function(){return!1}},data:{authorizedRoles:[b.ROLE_OIGUS_M_TEEMAOIGUS_PROTOKOLL]}}).when("/higherProtocols/:id/view",{templateUrl:"higherProtocol/higher.protocol.view.html",controller:"HigherProtocolEditViewController",controllerAs:"HigherProtocolEditViewController",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}],entity:["QueryUtils","$route",function(a,b){return a.endpoint("/higherProtocols").get({id:b.current.params.id}).$promise}],isView:function(){return!0}},data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_PROTOKOLL]}})}]),angular.module("hitsaOis").controller("HigherProtocolSearchController",["$scope","$route","$q","$timeout","QueryUtils","DataUtils","Classifier","message","USER_ROLES",function(a,b,c,d,e,f,g,h,i){a.auth=b.current.locals.auth,a.search={},a.criteria={};var j="/higherProtocols",k=g.valuemapper({status:"PROTOKOLL_STAATUS",protocolType:"PROTOKOLLI_LIIK"});e.createQueryForm(a,j,{order:"id"},k.objectmapper),f.convertStringToDates(a.criteria,["inserted","confirmDate"]),a.studyPeriods=e.endpoint("/autocomplete/studyPeriods").query();var l=k.promises;l.push(a.studyPeriods.$promise),a.formState={canCreate:-1!==a.auth.authorizedRoles.indexOf(i.ROLE_OIGUS_M_TEEMAOIGUS_PROTOKOLL)};var m=a.loadData;a.loadData=function(){a.higherProtocolSearchForm.$setSubmitted(),a.higherProtocolSearchForm.$valid?m():h.error("main.messages.form-has-errors")},c.all(l).then(function(){if(a.studyPeriods.length>0&&!a.criteria.studyPeriod){var b=f.getCurrentStudyYearOrPeriod(a.studyPeriods);a.criteria.studyPeriod=b?b.id:void 0}a.criteria.studyPeriod?d(a.loadData):0===a.studyPeriods.length&&(a.canCreate=!1,h.error("studyYear.studyPeriod.missing"))})}]),angular.module("hitsaOis").controller("HigherProtocolNewController",["$scope","$route","$location","QueryUtils","DataUtils","Classifier","message","ArrayUtils",function(a,b,c,d,e,f,g,h){function i(){a.record.protocolType&&a.record.subjectStudyPeriod&&d.endpoint(j+"/students").query(a.record).$promise.then(function(b){a.record.students=[],a.students=b})}a.auth=b.current.locals.auth;var j="/higherProtocols";a.record={protocolType:"PROTOKOLLI_LIIK_P",students:[]},a.subjectStudyPeriods=d.endpoint(j+"/subjectStudyPeriods").query(),a.$watch("record.subjectStudyPeriod",i),a.$watch("record.protocolType",i);var k=d.endpoint(j);a.submit=function(){return a.higherProtocolNewForm.$valid?h.isEmpty(a.record.students)?void g.error("higherProtocol.error.noStudents"):void new k(a.record).$save().then(function(a){g.info("main.messages.create.success"),c.path(j+"/"+a.id+"/edit")}):(g.error("main.messages.form-has-errors"),a.higherProtocolNewForm.$setSubmitted(),!1)}}]),angular.module("hitsaOis").controller("HigherProtocolEditViewController",["$scope","$filter","$q","QueryUtils","$route","message","config","MidtermTaskUtil","Classifier","ProtocolUtils","oisFileService","HigherGradeUtil",function(a,b,c,d,e,f,g,h,i,j,k,l){function m(a,b){return{midtermTask:b.id,declarationSubject:a.declarationSubject,maxPoints:b.maxPoints,canBeChanged:a.studentResultCanBeChanged,isText:b.studentResultIsText,studentId:a.student.id}}function n(b){c.all(x.promises).then(function(){a.higherProtocolForm.$setPristine(),a.record=x.objectmapper(b),a.savedStudents=angular.copy(a.record.protocolStudents),a.record.subjectStudyPeriodMidtermTaskDto.midtermTasks=w.getSortedMidtermTasks(a.record.subjectStudyPeriodMidtermTaskDto.midtermTasks),p(),w.sortStudentResults(a.record.subjectStudyPeriodMidtermTaskDto.studentResults,a.record.subjectStudyPeriodMidtermTaskDto.midtermTasks),a.getUrl=k.getUrl,a.formState={},a.formState.protocolPdfUrl=g.apiUrl+u+"/print/"+a.record.id+"/protocol.pdf",a.formState.canEditProtocol=j.canEditProtocol(a.auth,a.record),a.formState.canChangeConfirmedProtocolGrade=j.canChangeConfirmedProtocolGrade(a.auth,a.record),a.formState.canConfirm=j.canConfirm(a.auth,a.record),a.formState.canCalculate="PROTOKOLLI_LIIK_P"===a.record.protocolType&&a.formState.canEditProtocol&&!a.record.subjectStudyPeriodMidtermTaskDto.subjectStudyPeriod.isPracticeSubject,a.formState.isConfirmed="PROTOKOLL_STAATUS_K"===a.record.status})}function o(b,c){var d=a.record.subjectStudyPeriodMidtermTaskDto.studentResults.find(function(a){return a.midtermTask===c.id&&a.studentId===b.student.id});return angular.isDefined(d)}function p(){a.record.protocolStudents.forEach(function(b){for(var c=[],d=0;d<a.record.subjectStudyPeriodMidtermTaskDto.midtermTasks.length;d++)o(b,a.record.subjectStudyPeriodMidtermTaskDto.midtermTasks[d])||c.push(m(b,a.record.subjectStudyPeriodMidtermTaskDto.midtermTasks[d]));a.record.subjectStudyPeriodMidtermTaskDto.studentResults=a.record.subjectStudyPeriodMidtermTaskDto.studentResults.concat(c)})}function q(){return a.higherProtocolForm.$setSubmitted(),a.higherProtocolForm.$valid?!0:(f.error("main.messages.form-has-errors"),!1)}function r(){new v(a.record).$update().then(function(a){f.updateSuccess(),n(a)})}function s(b){var c=a.record.protocolStudents.find(function(a){return a.id===b.protocolStudent});c.grade=b.grade,a.gradeChanged(c)}function t(a){a.forEach(s)}a.auth=e.current.locals.auth,a.gradeUtil=l;var u="/higherProtocols",v=d.endpoint(u),w=new h,x=i.valuemapper({status:"PROTOKOLL_STAATUS"});a.calculateGrades={protocolStudents:[]},a.gradeChanged=function(c){if(c){var d=b("filter")(a.savedStudents,{id:c.id},!0)[0];d.grade!==c.grade?(a.higherProtocolForm.$setSubmitted(),c.gradeHasChanged=!0):(c.gradeHasChanged=!1,d.addInfo?c.addInfo=d.addInfo:c.addInfo=null)}a.formState.canConfirm=j.canConfirm(a.auth,a.record)},a.addInfoChanged=function(){a.formState.canConfirm=j.canConfirm(a.auth,a.record)},e.current.locals.entity&&n(e.current.locals.entity),a.filterStudentResults=function(a){return function(b){return a.student.id===b.studentId}},a.save=function(){q()&&r()},a.grades=i.queryForDropdown({mainClassCode:"KORGHINDAMINE"}),a.calculate=function(){d.endpoint(u+"/"+a.record.id+"/calculate").query(a.calculateGrades).$promise.then(function(b){a.calculateGrades.protocolStudents=[],t(b),f.info("higherProtocol.message.calculated")})},a.confirm=function(){q()&&("LOGIN_TYPE_I"===a.auth.loginMethod?j.signBeforeConfirm(u+"/"+a.record.id,a.record,"higherProtocol.message.confirmed",n):"LOGIN_TYPE_M"===a.auth.loginMethod&&j.mobileSignBeforeConfirm(u+"/"+a.record.id,a.record,"higherProtocol.message.confirmed",n))},a.getMidtermTaskHeader=w.getMidtermTaskHeader}]),angular.module("hitsaOis").controller("JournalController",["$scope","$route","Classifier","DataUtils","QueryUtils","message","$location",function(a,b,c,d,e,f,g){function h(a){"edit"!==b.current.params.action||a.canEdit||(f.error("main.messages.error.nopermission"),g.path(""))}function i(b){h(b),d.convertStringToDates(b,["studyYearStartDate","studyYearEndDate"]),a.journal=b,angular.isString(b.endDate)||(a.journal.endDate=b.studyYearEndDate)}a.auth=b.current.locals.auth,a.capacityTypes={},c.queryForDropdown({mainClassCode:"MAHT"},function(b){a.capacityTypes=c.toMap(b)});var j=b.current.locals.entity;angular.isDefined(j)&&i(j),a.showModuleNames=function(b){return b.map(function(b){return a.currentLanguageNameField(b)}).join(", ")},a.saveEndDate=function(){a.journalForm.$setSubmitted(),a.journalForm.$valid?e.endpoint("/journals/"+j.id+"/saveEndDate").save({endDate:a.journal.endDate},function(){f.info("main.messages.create.success"),a.journalForm.$setPristine()}):f.error("main.messages.form-has-errors")},a.saveMoodleCourseId=function(){e.endpoint("/journals/"+j.id+"/moodle/courseLink").update(a.journal.moodleCourseId,function(){f.info("main.messages.create.success"),a.journalForm.$setPristine(),a.moodleCourseId=a.journal.moodleCourseId}).$promise["catch"](angular.noop)},a.saveReview=function(){a.journalForm.$setSubmitted(),a.journalForm.$valid?e.endpoint("/journals/"+j.id+"/journalReview").save({isReviewOk:a.journal.isReviewOk,reviewInfo:a.journal.reviewInfo},function(b){f.info("main.messages.create.success"),a.journalForm.$setPristine(),i(b)}):f.error("main.messages.form-has-errors")}}]),angular.module("hitsaOis").controller("JournalListController",["$scope","$route","QueryUtils","Classifier","$q","dialogService","message",function(a,b,c,d,e,f,g){a.auth=b.current.locals.auth,a.search={};var h=d.valuemapper({status:"PAEVIK_STAATUS"}),i=h.promises;a.formState={},a.load=function(){return a.searchForm.$valid?void a.loadData():(g.error("main.messages.form-has-errors"),!1)},c.endpoint("/journals/canConfirmAll").search().$promise.then(function(b){a.formState.canConfirmAll=b.canConfirmAll}),a.confirmAll=function(){f.confirmDialog({prompt:"journal.prompt.confirmAll"},function(){c.endpoint("/journals/confirmAll").put().$promise.then(function(b){g.info("journal.messages.allConfirmed",{numberOfConfirmedJournals:b.numberOfConfirmedJournals}),a.loadData()})})};var j="et"===a.currentLanguage()?"2, 5, 3":"2, 6, 3";c.createQueryForm(a,"/journals",{order:j},h.objectmapper),a.$watch("criteria.studyYear",function(b){angular.isNumber(b)&&e.all(i).then(function(){a.loadData()})}),a.$watch("criteria.teacherObject",function(b){a.criteria.teacher=angular.isObject(b)?b.id:b}),a.$watch("criteria.moduleObject",function(){a.criteria.module=a.criteria.moduleObject?a.criteria.moduleObject.id:null}),a.clearSearch=function(){a.clearCriteria(),a.search={module:[]}}}]),angular.module("hitsaOis").controller("JournalStudentSelectionController",["$scope","$route","QueryUtils","ArrayUtils","message","dialogService",function(a,b,c,d,e,f){var g=b.current.locals.entity;a.selectedStudents=[],a.addSelectedStudents=function(){c.endpoint("/journals/"+g.id+"/addStudentsToJournal").save({students:a.selectedStudents},b.reload)},c.endpoint("/journals/"+g.id+"/suitedStudents").query({},function(b){a.tabledata={content:b},b.forEach(function(b){a.selectedStudents.push(b.studentId)})}),a.searchStudent=function(){f.showDialog("journal/journal.searchStudent.dialog.html",function(d){function e(){for(var a=0;a<d.tabledata.content.length;a++){var b=!1;d.searchedStudents.forEach(function(c){d.tabledata.content[a].studentId===c.studentId&&(b=!0)}),b||d.searchedStudents.push(d.tabledata.content[a])}}d.selectedStudents=[],d.searchedStudents=[];var f=[];a.tabledata.content&&(f=a.tabledata.content.map(function(a){return a.studentId})),b.current.params._menu=!0,d.$watch("criteria.studentGroupObject",function(){d.criteria.studentGroupId=d.criteria.studentGroupObject?d.criteria.studentGroupObject.id:null}),c.createQueryForm(d,"/journals/"+g.id+"/otherStudents",{studentId:f},e),d.loadData()},function(b){b.selectedStudents.forEach(function(c){var d=b.searchedStudents.filter(function(a){return c===a.studentId})[0];a.tabledata.content.push(d),a.selectedStudents.push(d.studentId)})})},a.removeStudent=function(b){d.remove(a.selectedStudents,b.studentId),d.remove(a.tabledata.content,b)}}]),angular.module("hitsaOis").controller("JournalEditController",["$scope","$route","$filter","$window","QueryUtils","ArrayUtils","DataUtils","Classifier","StudentUtil","message","dialogService","VocationalGradeUtil","$q","oisFileService",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){function o(){e.endpoint("/journals/"+C.id+"/usedHours").get().$promise.then(function(b){a.journal.lessonHours=b})}function p(b){var c=e.endpoint("/journals/"+C.id+"/journalStudents").query({allStudents:!!b}).$promise;e.endpoint("/journals/"+C.id+"/journalEntriesByDate").query({allStudents:!!b},function(b){var e=b;A.objectmapper(e),e.forEach(function(a){for(var b in a.journalStudentResults)a.journalStudentResults.hasOwnProperty(b)&&(A.objectmapper(a.journalStudentResults[b]),a.journalStudentResults[b][0].lessonAbsences.forEach(function(a){A.objectmapper(a)})),a.journalStudentResults[b][0].journalEntryStudentHistories.forEach(function(a){A.objectmapper(a)})}),a.journal.journalEntriesByDate=e,c.then(function(b){a.journal.journalStudents=b,a.journal.journalStudents.forEach(function(a){for(var b in a.apelResults)a.apelResults.hasOwnProperty(b)&&A.objectmapper(a.apelResults[b])}),a.$broadcast("refreshFixedColumns"),a.windowHeight=d.innerHeight})})}function q(b){a.journal=b,a.$parent.$parent.moodleCourseId=b.moodleCourseId,r(),p(a.showAllStudentsModel)}function r(){a.journalEntriesCriteria={size:20,page:1},angular.isDefined(a.journalEntries)||(a.journalEntries={}),a.loadJournalEntries=function(){var b=e.getQueryParams(a.journalEntriesCriteria);a.journalEntries.$promise=e.endpoint("/journals/"+C.id+"/journalEntry").search(b,a.afterLoadJournalEntries)},a.afterLoadJournalEntries=function(b){a.journalEntriesCriteria.size=b.size,a.journalEntriesCriteria.page=b.number+1,a.journalEntries.content=b.content,a.journalEntries.totalElements=b.totalElements},a.loadJournalEntries()}function s(){q(C)}function t(b){b.journalStudents=C.journalStudents,b.journalEntryStudents=[],b.journalStudents.forEach(function(a){b.journalEntryStudents[a.id]={isLessonAbsence:!1,lessonAbsences:{}},u(a)}),b.absenceOptions={},b.capacityTypes=e.endpoint("/autocomplete/schoolCapacityTypes").query({journalId:b.journal.id,entryTypes:!0}),b.lessonPlanDates=a.formState.lessonInfo.lessonPlanDates.map(function(a){var b=c("hoisDate")(a);return{nameEt:b,nameEn:b,id:a}}),b.journalEntry.startLessonNr=a.formState.lessonInfo.startLessonNr,b.lessons=B.map(function(a){return{nameEt:a,nameEn:a,id:a}}),b.journalEntry.lessons=a.formState.lessonInfo.lessons,h.queryForDropdown({mainClassCode:"PUUDUMINE"},function(a){b.absenceOptions=h.toMap(a)})}function u(a){if(a.apelResults){var b=a.apelResults.filter(function(a){return a.isModule});b.length>0&&(a.apelTransferredFinalResult=1===b.length?b[0].grade.code:"KUTSEHINDAMINE_A",a.canEdit=!1)}}function v(a,b){var c=[];if(angular.isObject(a)){for(var d in a)a.hasOwnProperty(d)&&a[d]===!0&&c.push(d);b.journalEntryCapacityTypes=c}}function w(a,b){e.endpoint("/journals/"+C.id+"/hasFinalEntry").search().$promise.then(function(c){c.hasFinalEntry&&(b?"SISSEKANNE_L"!==b.entryType&&a.forbiddenEntryTypes.push("SISSEKANNE_L"):a.forbiddenEntryTypes.push("SISSEKANNE_L"))}),a.forbiddenEntryTypes.push("SISSEKANNE_O")}function x(b){k.showDialog("journal/journal.addEntry.dialog.html",function(c){function d(a){return c.journalEntry.entryDate?void e.endpoint("/journals/"+C.id+"/studentsWithAcceptedAbsences").query({entryDate:c.journalEntry.entryDate}).$promise.then(function(b){c.acceptedAbsences=b,c.previousEntryDate=c.journalEntry.entryDate,a&&f()}):(c.acceptedAbsences=null,void(a&&f()))}function f(){c.journalStudents.forEach(function(a){if(i.isActive(a.status)){var b=v(a.id),d=angular.isObject(b)&&b.wholeDay;if(d){var e=b.practice?"PUUDUMINE_PR":"PUUDUMINE_V";b.practice?(c.journalEntryStudents[a.id].practice=!0,c.journalEntryStudentAbsenceChanged(a,c.journalEntryStudents[a.id].practice,e)):(c.journalEntryStudents[a.id].excused=!0,c.journalEntryStudentAbsenceChanged(a,c.journalEntryStudents[a.id].excused,e))}else c.journalEntryStudents[a.id].excused=!1,("PUUDUMINE_V"===c.journalEntryStudents[a.id].absence||"PUUDUMINE_PR"===c.journalEntryStudents[a.id].absence)&&c.journalEntryStudentAbsenceChanged(a,null,null);m(a,b)}})}function m(a,b){var d=angular.isObject(b)?b.lessons:null;angular.forEach(c.journalEntryStudents[a.id].lessonAbsences,function(b){("PUUDUMINE_V"===b.absence||"PUUDUMINE_PR"===b.absence)&&(b.absence=null,c.journalEntryStudentAbsenceChanged(a,null,null,b.lessonNr))}),d&&d.forEach(function(b){var d=c.journalEntry.startLessonNr&&c.journalEntry.startLessonNr>1?b+(1-c.journalEntry.startLessonNr):b;d>0&&(angular.isObject(c.journalEntryStudents[a.id].lessonAbsences[d])||(c.journalEntryStudents[a.id].lessonAbsences[d]={}),c.journalEntryStudents[a.id].lessonAbsences[d].lessonNr=d,c.journalEntryStudents[a.id].lessonAbsences[d].excused=!0,c.journalEntryStudentAbsenceChanged(a,c.journalEntryStudents[a.id].lessonAbsences[d].excused,"PUUDUMINE_V",d))})}function n(a){a.isLessonAbsence?angular.forEach(a.lessonAbsences,function(a){q(a)}):q(a)}function q(a){switch(a.absence){case"PUUDUMINE_PR":a.practice=!0;break;case"PUUDUMINE_V":a.excused=!0;break;case"PUUDUMINE_H":a.late=!0;break;case"PUUDUMINE_P":a.withoutReason=!0}}function s(){return"SISSEKANNE_O"!==c.journalEntry.entryType}function u(a,b,c){switch(b){case"PUUDUMINE_PR":a.practice=c,a.withoutReason=!1,a.late=!1,a.excused=!1;break;case"PUUDUMINE_V":a.excused=c,a.withoutReason=!1,a.late=!1,a.practice=!1;break;case"PUUDUMINE_H":a.late=c,a.excused=!1,a.withoutReason=!1,a.practice=!1;break;case"PUUDUMINE_P":a.withoutReason=c,a.excused=!1,a.late=!1,a.practice=!1}}function v(a){var b=c.acceptedAbsences?c.acceptedAbsences.filter(function(b){return b.journalStudent===a}):null;return b=null!==b?b[0]:null}function x(a,b){if(b){var d=c.journalEntry.startLessonNr&&c.journalEntry.startLessonNr>1?b+(c.journalEntry.startLessonNr-1):b;return a.lessons&&-1!==a.lessons.indexOf(d)?"PUUDUMINE_V":"PUUDUMINE_P"}return a.practice?"PUUDUMINE_PR":"PUUDUMINE_V"}function y(a){var b={entryType:a};A.objectmapper(b),c.journalEntry.nameEt=b.entryType.nameEt}function z(){c.journalStudents.forEach(function(a){console.log("siin"),a.apelTransferredFinalResult&&(c.journalEntryStudents[a.id].grade=a.apelTransferredFinalResult,c.journalEntryStudentChanged(a))})}c.journal=a.journal,c.gradeInputAsSelect=a.formState.gradeInputAsSelect,c.$watch("journalEntry.entryType",function(){"SISSEKANNE_L"===c.journalEntry.entryType?a.journal.isDistinctiveAssessment?(c.filterGrades=["KUTSEHINDAMINE_X","KUTSEHINDAMINE_A","KUTSEHINDAMINE_MA"],c.gradeInputRegex="^1$|^2$|^3$|^4$|^5$"):(c.filterGrades=["KUTSEHINDAMINE_1","KUTSEHINDAMINE_2","KUTSEHINDAMINE_3","KUTSEHINDAMINE_4","KUTSEHINDAMINE_5"],c.gradeInputRegex="^X$|^A$|^MA$"):(c.filterGrades=[],c.gradeInputRegex="^X$|^A$|^MA$|^1$|^2$|^3$|^4$|^5$")}),c.entryDateChanged=function(){d(!0)},c.lessonsChanged=function(){c.journalStudents.forEach(function(a){if(i.isActive(a.status)){var b=c.journalEntryStudents[a.id];c.journalEntry.lessons&&1!==c.journalEntry.lessons||!b.isLessonAbsence||(c.journalEntryStudents[a.id].isLessonAbsence=!1),c.journalEntryStudentChanged(a)}})},c.startLessonNrChanged=function(){f()},c.hasWholeDayAcceptedAbsence=function(a){var b=c.journalEntryStudents[a.id];return b&&"PUUDUMINE_V"===b.absence||"PUUDUMINE_PR"===b.absence},c.hasAcceptedLessonAbsence=function(a,b){var d=c.journalEntryStudents[a.id];return d&&d.lessonAbsences[b]&&"PUUDUMINE_V"===d.lessonAbsences[b].absence},c.journalEntry={},c.selectedCapacityTypes={},c.journalEntryStudents={},c.forbiddenEntryTypes=[],t(c),angular.isDefined(b)&&(angular.extend(c.journalEntry,b),c.entryDateCalendar=c.journalEntry.entryDate,b.journalEntryStudents.forEach(function(a){a.gradeValue=a.grade?l.removePrefix(a.grade):null,c.journalEntryStudents[a.journalStudent]=a,g.convertStringToDates(a.journalEntryStudentHistories,["gradeInserted"]),A.objectmapper(a.journalEntryStudentHistories),n(a),d(!1)}),c.savedJournalEntryStudents=angular.copy(c.journalEntryStudents),b.journalEntryCapacityTypes.forEach(function(a){c.selectedCapacityTypes[a]=!0}),c.canDeleteEntries=s()),w(c,b),c.changedJournalEntryStudents=[],c.journalEntryStudentChanged=function(a){c.gradeInputAsSelect||(c.journalEntryStudents[a.id].gradeValue?c.journalEntryStudents[a.id].grade=l.addPrefix(c.journalEntryStudents[a.id].gradeValue):c.journalEntryStudents[a.id].grade=null),c.journalEntryStudents[a.id].journalStudent=a.id,-1===c.changedJournalEntryStudents.indexOf(c.journalEntryStudents[a.id])&&c.changedJournalEntryStudents.push(c.journalEntryStudents[a.id])},c.journalEntryStudentAbsenceChanged=function(a,b,d,e){var f=v(a.id);c.journalEntryStudents[a.id].journalStudent=a.id,"PUUDUMINE_P"===d&&angular.isObject(f)&&(d=x(f,e)),e?(angular.isObject(c.journalEntryStudents[a.id].lessonAbsences[e])||(c.journalEntryStudents[a.id].lessonAbsences[e]={}),c.journalEntryStudents[a.id].lessonAbsences[e].lessonNr=e,c.journalEntryStudents[a.id].lessonAbsences[e].absence=b?d:null):c.journalEntryStudents[a.id].absence=b?d:null,-1===c.changedJournalEntryStudents.indexOf(c.journalEntryStudents[a.id])&&c.changedJournalEntryStudents.push(c.journalEntryStudents[a.id]);var g=e?c.journalEntryStudents[a.id].lessonAbsences[e]:c.journalEntryStudents[a.id];u(g,d,b)},c.setJournalEntryTypeChanged=function(a){y(a),"SISSEKANNE_L"===a&&z()},c.grades=h.queryForDropdown({mainClassCode:"KUTSEHINDAMINE"}),c.removeStudentHistory=function(a){c.journalEntryStudents[a.id].journalStudent=a.id,c.journalEntryStudents[a.id].removeStudentHistory=!0,c.journalEntryStudents[a.id].grade=null,c.journalEntryStudents[a.id].gradeValue=null,-1===c.changedJournalEntryStudents.indexOf(c.journalEntryStudents[a.id])&&c.changedJournalEntryStudents.push(c.journalEntryStudents[a.id])},c["delete"]=function(){k.confirmDialog({prompt:"journal.entryDeleteConfirm"},function(){new D(c.journalEntry).$delete().then(function(){j.info("main.messages.delete.success"),o(),r(),p(a.showAllStudentsModel)})["catch"](angular.noop)})}},function(b){var c=angular.extend({},b.journalEntry);c.journalEntryStudents=b.changedJournalEntryStudents,v(b.selectedCapacityTypes,c),c.entryDate||delete c.entryDate;var d=new D(c);angular.isDefined(c.id)?d.$update().then(function(){j.info("main.messages.create.success"),o(),r(),p(a.showAllStudentsModel)}):d.$save().then(function(){j.info("main.messages.create.success"),o(),r(),p(a.showAllStudentsModel)})})}function y(){(new E).$update({id:a.journal.id}).then(function(b){j.info("journal.messages.confirmed"),a.journal.canBeConfirmed=b.canBeConfirmed,a.journal.canBeUnconfirmed=b.canBeUnconfirmed,a.$parent.journal.status=b.status})}function z(){a.materials=e.endpoint("/studyMaterial/journal/"+a.journal.id+"/materials").query(),a.materials.$promise.then(function(a){m.all(H.promises).then(function(){H.objectmapper(a)})})}a.auth=b.current.locals.auth,a.gradeUtil=l;var A=h.valuemapper({entryType:"SISSEKANNE",grade:"KUTSEHINDAMINE",absence:"PUUDUMINE"}),B=[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17];a.formState={gradeInputAsSelect:!0},a.showAllStudentsModel=!1,a.finished=function(){angular.element(document.getElementsByClassName("container")).css("height",33*Math.min(10,a.journal.journalStudents.length)+39+18+"px")},angular.element(d).bind("resize",function(){a.windowHeight=d.innerHeight});var C=b.current.locals.entity;angular.isDefined(C)&&(a.formState.lessonInfo=e.endpoint("/journals/"+C.id+"/journalEntry/lessonInfo").get(),a.formState.xlsUrl="journals/"+C.id+"/journal.xls",q(C)),a.searchStudent=function(){k.showDialog("journal/journal.searchStudent.dialog.html",function(a){a.selectedStudents=[],a.$watch("criteria.studentGroupObject",function(){a.criteria.studentGroupId=a.criteria.studentGroupObject?a.criteria.studentGroupObject.id:null;
}),e.createQueryForm(a,"/journals/"+C.id+"/otherStudents",{}),a.loadData()},function(b){e.endpoint("/journals/"+C.id+"/addStudentsToJournal").save({students:b.selectedStudents},function(){j.info("journal.messages.studentSuccesfullyAdded"),p(a.showAllStudentsModel)})})},a.enrollStudents=function(){e.endpoint("/journals/"+C.id+"/moodle/enrollStudents").save(null,function(a){k.showDialog("components/moodle.enroll.dialog.html",function(b){b.moodleResponse=a},s,s)})},a.importGradeItems=function(){e.endpoint("/journals/"+C.id+"/moodle/importGradeItems").save(null,function(){j.info("moodle.messages.gradeItemsImported"),s()})},a.importAllGrades=function(){e.endpoint("/journals/"+C.id+"/moodle/importAllGrades").save(null,function(){j.info("moodle.messages.allGradesImported"),s()})},a.importMissingGrades=function(){e.endpoint("/journals/"+C.id+"/moodle/importMissingGrades").save(null,function(){j.info("moodle.messages.missingGradesImported"),s()})},a.removeStudentFromJournal=function(b){k.confirmDialog({prompt:"journal.studentDeleteconfirm"},function(){e.endpoint("/journals/"+C.id+"/removeStudentsFromJournal").save({students:[b]},function(){j.info("journal.messages.studentSuccesfullyRemoved"),p(a.showAllStudentsModel)})})},a.journalEntryTypeColors={SISSEKANNE_T:"grey-50",SISSEKANNE_E:"amber-100",SISSEKANNE_I:"lime-100",SISSEKANNE_H:"pink-50",SISSEKANNE_L:"pink-300",SISSEKANNE_O:"light-blue-50",SISSEKANNE_P:"teal-100",SISSEKANNE_R:"indigo-100"},a.journalEntryTypes={},h.queryForDropdown({mainClassCode:"SISSEKANNE"},function(b){a.journalEntryTypes=h.toMap(b)}),a.getEntryColor=function(b){return a.journalEntryTypeColors[b]};var D=e.endpoint("/journals/"+C.id+"/journalEntry");a.addNewEntry=function(){x()},a.editJournalEntry=function(a){D.get({id:a},function(a){x(a)})},a.moduleDescriptionDialog=function(a){k.showDialog("journal/journal.moduleDescription.dialog.html",function(b){b.moduleDescription=a,b.isDistinctiveAssessment="KUTSEHINDAMISVIIS_E"===a.assessment?!0:!1})},a.showAllStudents=function(a){p(a)};var E=e.endpoint("/journals/confirm"),F=e.endpoint("/journals/unconfirm");a.confirm=function(){k.confirmDialog({prompt:"journal.prompt.confirm"},function(){e.endpoint("/journals/"+a.journal.id+"/withoutFinalResult/").query().$promise.then(function(a){if(f.isEmpty(a))y();else{var b=a.map(function(a){return a.fullname}).join(", ");k.confirmDialog({prompt:"journal.prompt.someStudentsDoNotHaveFinalResult",students:b},y)}})})},a.unconfirm=function(){k.confirmDialog({prompt:"journal.prompt.unconfirm"},function(){(new F).$update({id:a.journal.id}).then(function(b){j.info("journal.messages.unconfirmed"),a.journal.canBeConfirmed=b.canBeConfirmed,a.journal.canBeUnconfirmed=b.canBeUnconfirmed,a.$parent.journal.status=b.status})})},a.getFileUrl=n.getUrl;var G=e.endpoint("/studyMaterial/connect"),H=h.valuemapper({typeCode:"OPPEMATERJAL"});z(),a.deleteConnection=function(a,b){k.confirmDialog({prompt:b>1?"studyMaterial.deleteconfirm":"studyMaterial.deletelastconfirm"},function(){var b=new G(a);b.$delete().then(function(){j.info("main.messages.delete.success"),z()})["catch"](angular.noop)})},a.addExisting=function(){if(!a.existingMaterial)return void j.error("main.messages.form-has-errors");var b=new G;b.studyMaterial=a.existingMaterial.id,b.journal=a.journal.id,b.$save().then(function(){a.existingMaterial=void 0,z()})},a.openApelResultsDialog=function(a){k.showDialog("journal/journal.apel.results.dialog.html",function(b){b.journalStudent=a})}}]),angular.module("hitsaOis").config(["$routeProvider","USER_ROLES",function(a,b){a.when("/journals",{templateUrl:"journal/journal.list.html",controller:"JournalListController",controllerAs:"journalListController",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}]},data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_PAEVIK]}}).when("/journal/:id/:action",{templateUrl:function(a){return"edit"===a.action?"journal/journal.html":"journal/journal.view.html"},controller:"JournalController",controllerAs:"journalController",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}],entity:["QueryUtils","$route",function(a,b){return a.endpoint("/journals").get({id:b.current.params.id}).$promise}],isView:["$route",function(a){return"view"===a.current.params.action}]},data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_PAEVIK,b.ROLE_OIGUS_M_TEEMAOIGUS_PAEVIK]}})}]),function(){function a(a){return a.reduce(function(a,b){return null!==b&&isFinite(b)&&b>0&&(a+=b),a},0)}function b(a){for(var b=[],c=0,d=a.formState.weekNrs.length;d>c;c++)b[c]=0;return b}function c(a){for(var b=[],c=0,d=a.formState.studyPeriods.length;d>c;c++)b[c]=0;return b}function d(b,c,d){var e=a(c.hours[d]);b.formState.journalTotals[c.id][d]=e}function e(b,c,d){var e=c.hours[d];b.formState.studyPeriods.forEach(function(b){c.spHours[d][b.arrayIndex]=a(e.slice(b.weekIndex[0],b.weekIndex[1]))})}function f(a,b){angular.isObject(a.formState.journalTotals[b.id]._spTotals)||(a.formState.journalTotals[b.id]._spTotals={}),a.formState.studyPeriods.forEach(function(c,d){a.formState.journalTotals[b.id]._spTotals[d]=Object.values(b.spHours).reduce(function(a,b){return angular.isObject(b)&&!isNaN(b[d])&&(a+=b[d]),a},0)})}function g(b,c){angular.isObject(b.formState.capGrandTotalsSp)||(b.formState.capGrandTotalsSp={},b.formState.grandTotalsSp={}),angular.isObject(b.formState.capGrandTotalsSp[c])||(b.formState.capGrandTotalsSp[c]={}),b.formState.studyPeriods.forEach(function(d){angular.isArray(b.formState.grandTotals[c])&&(b.formState.capGrandTotalsSp[c][d.arrayIndex]=a(b.formState.grandTotals[c].slice(d.weekIndex[0],d.weekIndex[1])),b.formState.grandTotalsSp[d.arrayIndex]=a(b.formState.grandTotals._._.slice(d.weekIndex[0],d.weekIndex[1])))})}function h(b,c,d){var e=b.formState.capacityTypes.reduce(function(a,b){var e=c.hours[b.code];if(void 0!==e){var f=e[d];null!==f&&isFinite(f)&&f>0&&(a+=f)}return a},0),f=b.formState.journalTotals[c.id];f._[d]=e,f.__=a(f._)}function i(b,c,d,e){c._[d]=a(c[d]);var f=b.formState.capacityTypes.reduce(function(a,b){var d=c[b.code];return void 0!==d&&(a+=d[e]),a},0);c._._[e]=f,c.__=a(c._._)}angular.module("hitsaOis").controller("LessonplanSearchController",["$location","$mdDialog","$route","$scope","DataUtils","QueryUtils","Session","USER_ROLES","AuthService","message",function(a,b,c,d,e,f,g,h,i,j){function k(a,b){for(var c=[],d=a.startDate,e=a.endDate,f=0;f<b.length;f++)l(d,e,b[f].validFrom,b[f].validThru,c)&&-1===c.indexOf(b[f].id)&&c.push(b[f].id);return c}function l(a,b,c,d){var e=!1;return!c&&d&&moment(d).isSameOrAfter(a)?e=!0:!d&&c&&moment(c).isSameOrBefore(b)?e=!0:c&&moment(c).isBetween(a,b,null,[])?e=!0:d&&moment(d).isBetween(a,b,null,[])?e=!0:c&&d&&moment(a).isBetween(c,d,null,[])?e=!0:c&&d&&moment(b).isBetween(c,d,null,[])?e=!0:c||d||(e=!0),e}function m(a,b){return function(c){return-1===a.indexOf(c.id)&&-1!==b.indexOf(c.id)}}d.auth=c.current.locals.auth,d.canEdit=i.isAuthorized([h.ROLE_OIGUS_M_TEEMAOIGUS_TUNNIJAOTUSPLAAN,h.ROLE_OIGUS_M_TEEMAOIGUS_AINEOPPETAJA]);var n=g.school||{};d.formState={higher:n.higher,vocational:n.vocational},d.currentNavItem=c.current.$$route.data.currentNavItem;var o="/lessonplans";f.createQueryForm(d,o,{order:"sg.code"}),d.load=function(){return d.vocationalSearchForm.$valid?void d.loadData():(j.error("main.messages.form-has-errors"),!1)},d.newLessonplan=function(){var c=d.formState,e=d.criteria.studyYear;b.show({controller:["$scope",function(d){d.formState=c,d.record={studyYear:e},d.$watchGroup(["record.studyYear","record.studentGroup"],function(){if(d.formState.previousLessonplans=[],angular.isDefined(d.record.studyYear)&&angular.isDefined(d.record.studentGroup)){var a=d.formState.studyYears.find(function(a){return a.id===d.record.studyYear}),b=d.formState.studentGroups.find(function(a){return a.id===d.record.studentGroup}),c=d.formState.curriculumLessonPlans[b.curriculum];c&&(d.formState.previousLessonplans=c.filter(function(b){return new Date(b.studyYearEndDate).getTime()<=new Date(a.endDate).getTime()}))}}),d.create=function(){return d.newLessonPlanForm.$valid?void f.endpoint(o).save(d.record).$promise.then(function(c){b.hide(),a.url(o+"/vocational/"+c.id+"/edit")}):void j.error("main.messages.form-has-errors")},d.cancel=b.hide}],templateUrl:"lessonplan/new.lessonplan.dialog.html",clickOutsideToClose:!0})},f.endpoint(o+"/searchFormData").search().$promise.then(function(a){var b=a.studyYears;if(d.formState.studyYears=b,!d.criteria.studyYear){var c=e.getCurrentStudyYearOrPeriod(d.formState.studyYears);c&&(d.criteria.studyYear=c.id)}d.criteria.studyYear&&d.loadData();for(var f=a.studentGroups,g=a.studentGroupMapping,h={},i=0,j=b.length;j>i;i++){var l=b[i].id,n=g[l]||[],o=k(b[i],f);h[l]=f.filter(m(n,o))}d.formState.studentGroups=f,d.formState.studentGroupMap=h,d.formState.curriculumVersions=a.curriculumVersions,d.formState.curriculumLessonPlans=a.curriculumLessonPlans}),d.$watch("criteria.teacherObject",function(a){d.criteria.teacher=angular.isObject(a)?a.id:a})}]).controller("LessonplanTeacherSearchController",["$route","$scope","DataUtils","QueryUtils","Session","USER_ROLES","AuthService","message",function(a,b,c,d,e,f,g,h){b.auth=a.current.locals.auth,b.canEdit=g.isAuthorized([f.ROLE_OIGUS_M_TEEMAOIGUS_TUNNIJAOTUSPLAAN,f.ROLE_OIGUS_M_TEEMAOIGUS_AINEOPPETAJA]);var i=e.school||{};b.formState={higher:i.higher,vocational:i.vocational},b.currentNavItem=a.current.$$route.data.currentNavItem;var j="/lessonplans/byteacher";b.load=function(){return b.vocationalTeacherSearchForm.$valid?void b.loadData():(h.error("main.messages.form-has-errors"),!1)},b.formState.studyYears=d.endpoint("/autocomplete/studyYears").query(),b.formState.studyYears.$promise.then(function(){if(!b.criteria.studyYear){var a=c.getCurrentStudyYearOrPeriod(b.formState.studyYears);a&&(b.criteria.studyYear=a.id)}b.criteria.studyYear&&b.loadData()}),d.createQueryForm(b,j,{})}]).controller("LessonplanEditController",["$anchorScroll","$location","$route","$scope","$window","message","Classifier","LessonPlanTableService","QueryUtils","dialogService","stateStorageService",function(j,k,l,m,n,o,p,q,r,s,t){function u(){m.formState.shownWeeksCount=m.formState.weekNrs.filter(function(a){return a.show}).length}function v(){for(var a=0;a<m.formState.studyPeriods.length;a++)if(m.formState.studyPeriods[a]._selected)return!0;return!1}function w(a,b,c){var d=m.formState.moduleTotals[a.id],e=a.journals.reduce(function(a,d){var e=d.hours[b];return void 0!==e&&void 0!==e[c]&&(a+=e[c]*(1/d.groupProportion.value)),a},0);d[b][c]=e,i(m,d,b,c)}function x(a,b,c){var d=m.formState.spModuleTotals[a.id],e=a.journals.reduce(function(a,d){var e=d.spHours[b];return void 0!==e&&void 0!==e[c]&&(a+=e[c]*(1/d.groupProportion.value)),a},0);d[b][c]=e,i(m,d,b,c)}function y(a,b){var c=Object.keys(m.formState.moduleMap).reduce(function(c,d){var e=m.formState.moduleTotals[d],f=e[a];return void 0!==f&&(c+=f[b]),c},0),d=m.formState.grandTotals;d[a][b]=c,i(m,d,a,b)}function z(a){a||(a=m.formState.studyPeriods.map(function(a){return a.id})),m.formState.studyPeriods.forEach(function(b){b._selected=-1!==a.indexOf(b.id)})}function A(a){m.formState.capacityTypes=a.lessonPlanCapacities,m.formState.teachers=a.teachers,a.modules.forEach(function(a){m.formState.moduleMap[a.id]=a,m.formState.spModuleTotals[a.id]={_:{_:c(m)}},m.formState.moduleTotals[a.id]={_:{_:b(m)}},a.journals.forEach(function(g){H.objectmapper(g),g.spHours={},g.spTotals={},g.lessonPlanModule=a.id,m.formState.journalTotals[g.id]={_:b(m)},m.formState.capacityTypes.forEach(function(f){var h=f.code;g.spHours[h]={};var i=g.hours[h];if(void 0!==i){d(m,g,h),e(m,g,h);var j=m.formState.moduleTotals[a.id];void 0===j[h]&&(j[h]=b(m));var k=m.formState.spModuleTotals[a.id];void 0===k[h]&&(k[h]=c(m));var l=m.formState.grandTotals;void 0===l[h]&&(l[h]=b(m))}});for(var i=0,j=m.formState.weekNrs.length;j>i;i++)h(m,g,i);f(m,g),g.requiredLessons={},g.themes.forEach(function(a){for(var b in a.hours)angular.isUndefined(g.requiredLessons[b])&&(g.requiredLessons[b]=0),g.requiredLessons[b]+=a.hours[b]})}),m.formState.capacityTypes.forEach(function(b){var c=b.code,d=m.formState.moduleTotals[a.id];if(void 0!==d[c]){for(var e=0,f=m.formState.weekNrs.length;f>e;e++)w(a,c,e);for(var e=0,g=m.formState.studyPeriods.length;g>e;e++)x(a,c,e)}})}),m.formState.capacityTypes.forEach(function(a){var b=a.code,c=m.formState.grandTotals;if(void 0!==c[b])for(var d=0,e=m.formState.weekNrs.length;e>d;d++)y(b,d);g(m,b)}),m.record=a,B(),m.updateStudyPeriods(),q.generateLessonPlan(m),m.goToAnchor()}function B(){I=angular.toJson(m.record)}function C(){k.path("/lessonplans/vocational")}var D=l.current.params.id,E=l.current.locals.auth.school.id,F="lessonplan",G="/lessonplans",H=p.valuemapper({groupProportion:"PAEVIK_GRUPI_JAOTUS"});m.lessonPlanId=D,m.saving=!1,m.formState={showWeeks:!0},m.goToAnchor=function(){k.hash()&&!m.saving&&j()},m.setHeight=function(){var a=$(window).innerHeight();a-=150,l.windowHeight=a},m.showWeeksChanged=function(){t.changeState(E,F,{showWeeks:m.formState.showWeeks}),q.generateLessonPlan(m)},m.showTotalsChanged=function(){t.changeState(E,F,{showTotals:m.formState.showTotals}),q.generateLessonPlan(m)},m.updateStudyPeriods=function(){var a=m.formState.studyPeriods.filter(function(a){return a._selected}).map(function(a){return a.id});m.formState.weekNrs.forEach(function(b){b.show=-1!==a.indexOf(b.spId)}),m.atLeastOneShownPeriod=v(),t.changeState(E,F,{showWeeks:m.formState.showWeeks,showTotals:m.formState.showTotals,selectedStudyPeriods:a}),u(),q.generateLessonPlan(m)};var I;r.loadingWheel(m,!0),r.endpoint(G).get({id:D}).$promise.then(function(a){m.formState.studyPeriods=a.studyPeriods;var c=0;m.formState.studyPeriods.forEach(function(a,b){a.weekIndex=[c,c+a.weekNrs.length],a.arrayIndex=b,c+=a.weekNrs.length}),m.formState.weekNrs=[],a.studyPeriods.forEach(function(a,b){for(var c=0;c<a.weekNrs.length;c++)m.formState.weekNrs.push({spId:a.id,spIndex:b,nr:a.weekNrs[c],endOfPeriod:c===a.weekNrs.length-1,shown:!0})}),m.formState.weekBeginningDates=a.weekBeginningDates,m.formState.legends=a.legends.reduce(function(a,b){return a[b.weekNr]=b.color,a},{}),delete a.studyPeriods,delete a.weekNrs,delete a.weekBeginningDates,delete a.legends,m.formState.moduleMap={},m.formState.rowTotals={},m.formState.journalTotals={},m.formState.moduleTotals={},m.formState.spModuleTotals={},m.formState.grandTotals={_:{_:b(m)}},m.formState.studyPeriodMonths=a.studyPeriod%12,m.formState.studyPeriodYears=Math.floor(a.studyPeriod/12),m.formState.xlsUrl="lessonplans/"+D+"/lessonplan.xls";var d=t.loadState(E,F);angular.equals({},d)?z():(m.formState.showWeeks=d.showWeeks,m.formState.showTotals=d.showTotals,z(d.selectedStudyPeriods)),A(a),r.loadingWheel(m,!1),m.windowWidth=n.innerWidth,angular.element(document.getElementsByClassName("container")).css("height",n.innerHeight-340+"px"),m.$broadcast("refreshFixedColumns")}),angular.element(n).bind("resize",function(){angular.element(document.getElementsByClassName("container")).css("height",n.innerHeight-340+"px")}),m.updateTotals=function(a,b,c){var e=a.hours[b],g=parseInt(e[c],10);(isNaN(g)||0>g)&&(g=void 0),g!==e[c]&&(e[c]=g),d(m,a,b),h(m,a,c),w(m.formState.moduleMap[a.lessonPlanModule],b,c),y(b,c),m.updateSpRowByWeek(a,b,c),f(m,a),x(m.formState.moduleMap[a.lessonPlanModule],b,m.formState.weekNrs[c].spIndex),m.updateSpGrandTotals(b,c)},m.getCapacityByCode=function(a){return m.formState.capacityTypes?m.formState.capacityTypes.find(function(b){return b.code===a}):void 0},m.updateLessonCountByStudyPeriod=function(a,b,c){var d=m.formState.studyPeriods[c],e=a.spHours[b][c],f=e/d.weekNrs.length;f%1!==0&&(f=Math.ceil(f));for(var g=0,h=d.weekIndex[0],i=0;i<d.weekNrs.length;i++)a.hours[b][h]=f,g+=f,m.updateTotals(a,b,h),g===Number(e)&&(f=0),(e-g)/(d.weekNrs.length-i-1)%1===0&&(f=(e-g)/(d.weekNrs.length-i-1)),h+=1},m.updateSpGrandTotals=function(b,c){angular.isObject(m.formState.capGrandTotalsSp)||(m.formState.capGrandTotalsSp={},m.formState.grandTotalsSp={}),angular.isObject(m.formState.capGrandTotalsSp[b])||(m.formState.capGrandTotalsSp[b]={});var d=m.formState.studyPeriods.find(function(a){return a.weekIndex[0]<=c&&a.weekIndex[1]>=c});m.formState.capGrandTotalsSp[b][d.arrayIndex]=a(m.formState.grandTotals[b].slice(d.weekIndex[0],d.weekIndex[1])),m.formState.grandTotalsSp[d.arrayIndex]=a(m.formState.grandTotals._._.slice(d.weekIndex[0],d.weekIndex[1]))},m.updateSpRowByWeek=function(b,c,d){var e=b.hours[c],f=m.formState.studyPeriods.find(function(a){return a.weekIndex[0]<=d&&a.weekIndex[1]>=d});b.spHours[c][f.arrayIndex]=a(e.slice(f.weekIndex[0],f.weekIndex[1]))},m.update=function(){m.saving=!0,m.record.$update().then(o.updateSuccess).then(function(){A(m.record),B(),m.$broadcast("refreshFixedColumns")})},m["delete"]=function(){s.confirmDialog({prompt:"lessonplan.prompt.deleteLessonplan"},function(){m.record.$delete().then(function(){o.info("main.messages.delete.success"),C()})["catch"](angular.noop)})},m.back=function(){I===angular.toJson(m.record)?C():s.confirmDialog({prompt:"lessonplan.changed.save",accept:"main.yes",cancel:"main.no"},function(){m.record.$update().then(o.updateSuccess).then(C)},function(){C()})}}]).controller("LessonplanTeacherViewController",["$route","$scope","LessonPlanTableService","QueryUtils",function(a,c,j,k){c.auth=a.current.locals.auth;var l=a.current.params.id,m=a.current.params.studyYear,n="/lessonplans/byteacher";c.formState={showWeeks:!0,showCapacityTypes:!0,xlsUrl:"lessonplans/byteacher/"+l+"/"+m+"/lessonplanbyteacher.xls"},c.keys=Object.keys,c.getCapacityTypes=function(a){return c.formState.capacityTypes?c.formState.capacityTypes.filter(function(b){return void 0!==a&&void 0!==a[b.code]}):void 0},c.getCapacityByCode=function(a){j.getCapacityByCode(c.formState.capacityTypes,a)},c.getUniqueJournalThemes=function(a){return j.getUniqueJournalThemes(a)},c.sumSubjectHours=function(a){return angular.isDefined(c.formState.subjectCapacityTypes)?c.formState.subjectCapacityTypes.reduce(function(b,c){var d=a[c.studyPeriod];if(d){var e=d[c.code];e&&(b+=e)}return b},0):void 0},k.endpoint(n+"/:id/:studyYear").search({id:l,studyYear:m}).$promise.then(function(a){function j(b,c){return a.journals.reduce(function(a,d){var e=d.hours[c];return void 0!==e&&(a+=e[b]),a},0)}c.formState.capacityTypes=a.lessonPlanCapacities,c.formState.studyPeriods=a.studyPeriods;var k=0;c.formState.studyPeriods.forEach(function(a,b){a.weekIndex=[k,k+a.weekNrs.length],a.arrayIndex=b,k+=a.weekNrs.length}),c.formState.weekNrs=[],a.studyPeriods.forEach(function(a){for(var b=0;b<a.weekNrs.length;b++)c.formState.weekNrs.push({nr:a.weekNrs[b],endOfPeriod:b===a.weekNrs.length-1})}),c.formState.weekBeginningDates=a.weekBeginningDates,c.formState.rowTotals={},c.formState.journalTotals={},c.formState.grandTotals={_:{_:b(c)}},a.journals.forEach(function(a){a.spHours={},a.spTotals={},c.formState.journalTotals[a.id]={_:b(c)},c.formState.capacityTypes.forEach(function(f){var g=f.code;a.spHours[g]={};var h=a.hours[g];if(void 0!==h){d(c,a,g),e(c,a,g);var i=c.formState.grandTotals;void 0===i[g]&&(i[g]=b(c))}});for(var g=0,i=c.formState.weekNrs.length;i>g;g++)h(c,a,g);f(c,a)}),c.formState.capacityTypes.forEach(function(a){var b=a.code,d=c.formState.grandTotals;if(void 0!==d[b])for(var e=0,f=c.formState.weekNrs.length;f>e;e++)d[b][e]=j(e,b),i(c,d,b,e);g(c,b)}),c.formState.subjectCapacityTypes=[],c.formState.studyPeriods.forEach(function(a){for(var b=0;b<c.formState.capacityTypes.length;b++){var d=c.formState.capacityTypes[b];c.formState.subjectCapacityTypes.push({studyPeriod:a.id,code:d.code,value:d.value,endOfPeriod:b===c.formState.capacityTypes.length-1})}}),c.record=a})}])}(),angular.module("hitsaOis").controller("LessonplanJournalEditController",["$location","$route","$scope","$timeout","dialogService","message","Classifier","QueryUtils","$http",function(a,b,c,d,e,f,g,h,i){function j(){i.pendingRequests.length>0?d(j):c.journalForm.$setPristine()}function k(){var a=c.record.journalOccupationModuleThemes;return c.journalForm.theme.$setValidity("required",a&&a.length>0),c.journalForm.$setSubmitted(),c.journalForm.$valid?!0:(f.error("main.messages.form-has-errors"),!1)}function l(){c.record.id?c.record.$update().then(function(a){f.updateSuccess(),c.removedJournalTeacherIds={};for(var b=0;a.groups.length>b;b++)a.groups[b].group.modules=h.endpoint("/autocomplete/curriculumversionomodules").query({curriculumVersion:a.groups[b].curriculumVersion}),a.groups[b].group.themes=h.endpoint("/autocomplete/curriculumversionomodulethemes").query({addStudyYearToName:!0,existInOtherJournals:!0,journalId:o,studentGroupId:a.groups[b].studentGroup,curriculumVersionOmoduleId:a.groups[b].curriculumVersionOccupationModule});d(j)})["catch"](angular.noop):c.record.$save().then(function(){f.info("main.messages.create.success"),c.journalForm.$setPristine(),c.removedJournalTeacherIds={},a.url(s+"/"+c.record.id+"/edit?_noback&lessonPlanModule="+c.record.lessonPlanModuleId)})["catch"](angular.noop)}function m(){var a=[];if(c.record.journalOccupationModuleThemes.forEach(function(b){var d=c.formState.themeMap[b];d.existsInOtherJournals&&a.push(c.currentLanguageNameField(d))}),null!==c.record.groups)for(var b=0;b<c.record.groups.length;b++){var d=c.record.groups[b];d.curriculumVersionOccupationModuleThemes.forEach(function(b){var e=d.group.themes.filter(function(a){return a.id===b})[0];e.existsInOtherJournals&&a.push(c.currentLanguageNameField(e))})}return a}function n(){var a={};c.record.journalOccupationModuleThemes.forEach(function(b){var d=c.formState.themes.find(function(a){return a.id===b});for(var e in d.capacities)angular.isDefined(a[e])?a[e]+=d.capacities[e]:a[e]=d.capacities[e]});var b=c.formState.capacityTypes;b.forEach(function(b){angular.isDefined(a[b.code])?(b._selected=!0,angular.isDefined(b.hours)?b.hours=a[b.code]:b.hours=a[b.code]):(b._selected=!1,b.hours=0)})}c.auth=b.current.locals.auth;var o=b.current.params.id,p=b.current.params.lessonPlan,q=b.current.params.occupationModule,r=b.current.params.lessonPlanModule,s="/lessonplans/journals";c.formState={capacityTypes:h.endpoint("/autocomplete/schoolCapacityTypes").query({journalId:o,isHigher:!1,isTimetable:!0})},c.record=h.endpoint(s).get({id:o||"new",lessonPlan:p,occupationModule:q,lessonPlanModule:r?r:void 0}),c.record.$promise.then(function(a){if(c.formState.capacityTypes.$promise.then(function(){g.setSelectedCodes(c.formState.capacityTypes,c.record.journalCapacityTypes)}),h.endpoint("/autocomplete/studentgroups").query({valid:!0,higher:!1}).$promise.then(function(b){c.formState.studentGroups=b.filter(function(b){return b.id!==a.studentGroupId})}),c.formState.themes=a.themes,delete a.themes,c.formState.themeMap=c.formState.themes.reduce(function(a,b){return a[b.id]=b,a},{}),angular.isArray(a.groups))for(var b=0;a.groups.length>b;b++)a.groups[b].group.modules=h.endpoint("/autocomplete/curriculumversionomodules").query({curriculumVersion:a.groups[b].curriculumVersion}),a.groups[b].group.themes=h.endpoint("/autocomplete/curriculumversionomodulethemes").query({addStudyYearToName:!0,existInOtherJournals:!0,journalId:o,studentGroupId:a.groups[b].studentGroup,curriculumVersionOmoduleId:a.groups[b].curriculumVersionOccupationModule}),d(j);n(),c.record.lessonPlan=a.lessonPlan}),c.lessonPlanModule=b.current.params.lessonPlanModule,c.orderByThemeName=function(a){return c.currentLanguageNameField(c.formState.themeMap[a])},c.update=function(){if(k()){if(c.record.journalCapacityTypes=g.getSelectedCodes(c.formState.capacityTypes),0===c.record.journalCapacityTypes.length)return void f.error("lessonplan.journal.noJournalCapacityTypes");var a=m();a.length>0?e.confirmDialog({prompt:"lessonplan.journal.themeExistInOtherJournalsConfirm",themes:a.join(", ")},function(){l()}):l()}},c.filter=function(a,b){return b.filter(function(b){return b.id===a})[0]},c["delete"]=function(){e.confirmDialog({prompt:"lessonplan.journal.deleteconfirm"},function(){c.record.$delete().then(function(){f.info("main.messages.delete.success"),a.url("/lessonplans/vocational/"+c.record.lessonPlan+"/edit")})["catch"](angular.noop)})},c.addTheme=function(){var a=c.formState.theme;if(a){if(null===c.record.journalOccupationModuleThemes&&(c.record.journalOccupationModuleThemes=[]),-1!==c.record.journalOccupationModuleThemes.indexOf(a))return f.error("lessonplan.journal.duplicatetheme"),void c.journalForm.$setPristine();c.record.journalOccupationModuleThemes.push(a),n()}c.formState.theme=null},c.deleteTheme=function(a){var b=c.record.journalOccupationModuleThemes.indexOf(a);-1!==b&&c.record.journalOccupationModuleThemes.splice(b,1),n(),c.journalForm.$setDirty()},c.deleteRoom=function(a){var b=c.record.journalRooms.indexOf(a);-1!==b&&c.record.journalRooms.splice(b,1),c.journalForm.$setDirty()},c.addTeacher=function(){return null===c.record.journalTeachers&&(c.record.journalTeachers=[]),c.record.journalTeachers.some(function(a){return a.teacher.id===c.formState.teacher.id})?(f.error(c.auth.higher?"lessonplan.journal.duplicateteacherHigher":"lessonplan.journal.duplicateteacherVocational"),void c.journalForm.$setPristine()):(c.record.journalTeachers.push({id:c.removedJournalTeacherIds?c.removedJournalTeacherIds[c.formState.teacher.id]:null,teacher:c.formState.teacher}),void(c.formState.teacher=void 0))},c.deleteTeacher=function(a){var b=-1;c.record.journalTeachers.forEach(function(c,d){c.id===a.id&&(b=d)}),-1!==b&&c.record.journalTeachers.splice(b,1),c.removedJournalTeacherIds||(c.removedJournalTeacherIds={}),c.removedJournalTeacherIds[a.teacher.id]=a.id,c.journalForm.$setDirty()},c.addGroup=function(){var a=JSON.parse(JSON.stringify(c.filter(c.formState.group,c.formState.studentGroups)));return(null===c.record.groups||"undefined"==typeof c.record.groups)&&(c.record.groups=[]),c.record.groups.some(function(a){return a.group.id===c.formState.group})?void f.error("lessonplan.journal.duplicategroup"):(h.endpoint("/autocomplete/curriculumversionomodules").query({curriculumVersion:a.curriculumVersion}).$promise.then(function(b){a.modules=b,c.record.groups.push({group:a,studentGroup:a.id})}),void(c.formState.group=void 0))},c.$watch("formState.room",function(){if(angular.isDefined(c.formState.room)&&null!==c.formState.room){if(c.record.journalRooms.some(function(a){return a.id===c.formState.room.id}))return f.error("lessonplan.journal.duplicateroom"),c.formState.room=void 0,void c.journalForm.$setPristine();c.record.journalRooms.push(c.formState.room),c.formState.room=void 0}}),c.$watch("formState.theme",function(){angular.isDefined(c.formState.theme)&&null!==c.formState.theme&&c.addTheme()}),c.$watch("formState.teacher",function(){angular.isDefined(c.formState.teacher)&&null!==c.formState.teacher&&c.addTeacher()}),c.$watch("formState.group",function(){angular.isDefined(c.formState.group)&&null!==c.formState.group&&c.addGroup()}),c.newSelectedModule=function(a){null!==a.curriculumVersionOccupationModule&&""!==a.curriculumVersionOccupationModule?(a.curriculumVersionOccupationModuleThemes=null,h.endpoint("/autocomplete/curriculumversionomodulethemes").query({addStudyYearToName:!0,existInOtherJournals:!0,journalId:o,studentGroupId:a.studentGroup,curriculumVersionOmoduleId:a.curriculumVersionOccupationModule}).$promise.then(function(b){a.group.themes=b})):a.group.themes=null},c.deleteGroup=function(a){var b=-1;c.record.groups.forEach(function(c,d){c.studentGroup===a.studentGroup&&(b=d)}),-1!==b&&c.record.groups.splice(b,1),c.journalForm.$setDirty()},c.backToLessonplan=function(){var b="#"+(o?"journal"+o:"module"+q),d="/lessonplans/vocational/"+c.record.lessonPlan+"/edit"+b;c.journalForm.$dirty===!0?e.confirmDialog({prompt:"main.messages.confirmFormDataNotSaved"},function(){a.url(d)}):a.url(d)}}]),angular.module("hitsaOis").config(["$routeProvider","USER_ROLES",function(a,b){a.when("/lessonplans/vocational",{templateUrl:"lessonplan/vocational.search.html",controller:"LessonplanSearchController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}]},data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_TUNNIJAOTUSPLAAN,b.ROLE_OIGUS_V_TEEMAOIGUS_AINEOPPETAJA],currentNavItem:"lessonplan.vocational"}}).when("/lessonplans/vocational/byteacher",{templateUrl:"lessonplan/vocational.teacher.search.html",controller:"LessonplanTeacherSearchController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}]},data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_TUNNIJAOTUSPLAAN,b.ROLE_OIGUS_V_TEEMAOIGUS_AINEOPPETAJA],currentNavItem:"lessonplan.vocational-byteacher"}}).when("/lessonplans/vocational/:id/edit",{templateUrl:"lessonplan/vocational.edit.html",controller:"LessonplanEditController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}]},data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_TUNNIJAOTUSPLAAN],currentNavItem:"lessonplan.vocational"}}).when("/lessonplans/vocational/byteacher/:id/:studyYear",{templateUrl:"lessonplan/vocational.teacher.view.html",controller:"LessonplanTeacherViewController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}]},data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_TUNNIJAOTUSPLAAN,b.ROLE_OIGUS_V_TEEMAOIGUS_AINEOPPETAJA]}}).when("/lessonplans/journals/new",{templateUrl:"lessonplan/journal.edit.html",controller:"LessonplanJournalEditController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}]},data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_TUNNIJAOTUSPLAAN]}}).when("/lessonplans/journals/:id/edit",{templateUrl:"lessonplan/journal.edit.html",controller:"LessonplanJournalEditController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}]},data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_TUNNIJAOTUSPLAAN]}}).when("/lessonplans/events",{templateUrl:"lessonplan/event.search.html",controller:"LessonplanEventSearchController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}]},data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_SYNDMUS]}})}]),angular.module("hitsaOis").controller("LessonplanEventSearchController",["$scope","$route","message","QueryUtils","USER_ROLES","AuthService",function(a,b,c,d,e,f){a.auth=b.current.locals.auth,a.canEdit=f.isAuthorized(e.ROLE_OIGUS_M_TEEMAOIGUS_SYNDMUS),a.formState={};var g="/timetableevents";d.endpoint(g+"/searchFormData").search().$promise.then(function(b){a.formState.studentGroups=b.studentGroups,a.formState.studyPeriods=b.studyPeriods,a.formState.teachers=b.teachers,angular.isDefined(a.criteria.singleEvent)||(a.criteria.singleEvent=!0),angular.isDefined(a.criteria.from)||(a.criteria.from=new Date),a.loadData()}),a.$watch("criteria.roomObject",function(){a.criteria.room=a.criteria.roomObject?a.criteria.roomObject.id:null}),d.createQueryForm(a,g,{order:"4 desc"});var h=a.clearCriteria;a.clearEventCriteria=function(){h(),a.criteria.singleEvent=!1},a.afterNow=function(a,b){a=new Date(a);var c=a.getFullYear(),d=a.getMonth()+1,e=a.getDate(),f=""+c+"-"+d+"-"+e;return new Date(f+" "+b)>new Date},a.allowedToEdit=function(b){if(a.auth.isAdmin())return!0;if(a.auth.isTeacher()){if(!b.teachers)return!1;for(var c=0;c<b.teachers.length;c++)if(b.teachers[c].id===a.auth.teacher)return!0}return!1}}]),angular.module("hitsaOis").config(["$routeProvider","USER_ROLES",function(a,b){a.when("/ekis/logs",{templateUrl:"logs/logs.view.html",controller:"LogsController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){
return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}],logType:function(){return"ekis"}},data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_ANDMEVAHETUS_EKIS]}}).when("/kutseregister/logs",{templateUrl:"logs/logs.view.html",controller:"LogsController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}],logType:function(){return"kutseregister"}},data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_ANDMEVAHETUS_KUTSEREGISTER]}}).when("/rtip/logs",{templateUrl:"logs/logs.view.html",controller:"LogsController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}],logType:function(){return"rtip"}},data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_ANDMEVAHETUS_RTIP]}}).when("/sais/logs",{templateUrl:"logs/logs.view.html",controller:"LogsController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}],logType:function(){return"sais"}},data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_ANDMEVAHETUS_SAIS]}})}]),angular.module("hitsaOis").controller("LogsController",["$mdDialog","$route","$scope","QueryUtils",function(a,b,c,d){c.auth=b.current.locals.auth;var e={ekis:["registerDirective","deleteDirective","registerCertificate","registerPracticeContract","enforceContract","enforceDirective","rejectDirective"],kutseregister:["ROLL_P"===c.auth.roleCode?"kutseregister.muutunudKutsestandardid":"kutseregister.kutsetunnistus"],rtip:["sap.Z_EMPLOEES","sap.tootajaPohiandmed"],sais:["sais2.AllAdmissionsExport","sais2.AllApplicationsExport"]},f=b.current.locals.logType,g="logs."+f+".";c.logType=f,c.messagePrefix=g,c.messageTypes=e[f];var h="/logs/"+f;d.createQueryForm(c,h,{order:"-inserted"}),c.loadData(),c.logentry=function(b){a.show({controller:["$scope",function(c){var e=1e3;c.requestLength=c.responseLength=e,c.cancel=a.hide,c.logType=f,c.messagePrefix=g,c.showAll=function(a){a?c.requestLength=void 0:c.responseLength=void 0},c.record=d.endpoint(h).get({id:b.id,messageType:b.wsName},function(a){(!a.request||a.request.length<e)&&c.showAll(!0),(!a.response||a.response.length<e)&&c.showAll(!1)})}],templateUrl:"logs/logentry.view.dialog.html",clickOutsideToClose:!0})}}]),angular.module("hitsaOis").controller("messageSentController",["$scope","QueryUtils","DataUtils","$route",function(a,b,c,d){a.currentNavItem="message.sent",b.createQueryForm(a,"/message/sent",{order:"-inserted"}),a.loadData(),c.convertStringToDates(a.criteria,["sentFrom","sentThru"]),a.auth=d.current.locals.auth,a.showReceivers=function(a,b){var c="";if(a.receivers){c=a.receivers.join("; ");var d=20;!b&&c.length>d&&(c=c.substring(0,d)+"...")}return c},a.formState={canSend:a.auth.isAdmin()||a.auth.isTeacher()||a.auth.isStudent()||a.auth.isParent()},angular.element(document).ready(function(){var a=document.getElementsByName("message.sent")[0].offsetLeft;document.getElementById("scrolling_div").scrollLeft+=a})}]).controller("messageAutomaticSentController",["$scope","QueryUtils","DataUtils","$route",function(a,b,c,d){a.currentNavItem="message.automaticSent",b.createQueryForm(a,"/message/sent/automatic",{order:"-inserted"}),a.loadData(),c.convertStringToDates(a.criteria,["sentFrom","sentThru"]),a.auth=d.current.locals.auth,a.showReceivers=function(a,b){var c="";if(a.receivers){c=a.receivers.join("; ");var d=20;!b&&c.length>d&&(c=c.substring(0,d)+"...")}return c},angular.element(document).ready(function(){var a=document.getElementsByName("message.automaticSent")[0].offsetLeft;document.getElementById("scrolling_div").scrollLeft+=a})}]).controller("messageReceivedController",["$scope","QueryUtils","DataUtils","$route","$rootScope",function(a,b,c,d,e){a.currentNavItem="message.received",b.createQueryForm(a,"/message/received",{order:"-inserted"}),a.loadData(),c.convertStringToDates(a.criteria,["sentFrom","sentThru"]),a.auth=d.current.locals.auth,b.endpoint("/message/received/new").get().$promise.then(function(a){e.unreadMessages=a.unread}),a.formState={canSend:a.auth.isAdmin()||a.auth.isTeacher()||a.auth.isStudent()||a.auth.isParent()}}]).controller("messageViewController",["$scope","$route","QueryUtils","DataUtils","$resource","config","$rootScope",function(a,b,c,d,e,f,g){function h(){d.convertStringToDates(a.record,["inserted"]),a.record.receivers=a.record.receiversNames.join("; "),i()}function i(){a.isSent||a.record.isRead?j():c.endpoint("/message/"+a.record.id).update().$promise.then(function(){j()})}function j(){c.endpoint("/message/received/new").get().$promise.then(function(a){g.unreadMessages=a.unread})}var k="/message",l=c.endpoint(k),m=b.current.params.id,n=b.current.params.backUrl;a.isSent="received"!==n,a.record=l.get({id:m},h)}]).controller("messageRespondController",["$scope","QueryUtils","$route","message","$location",function(a,b,c,d,e){function f(){var b={subject:"Re: "+a.respondedMessage.subject,content:"\n>"+a.respondedMessage.content,receivers:[a.respondedMessage.sendersId],responseTo:i};a.record=new h(b),setTimeout(function(){var a=document.getElementById("content");a.focus(),a.selectionStart=0,a.selectionEnd=0},0)}var g="/message",h=b.endpoint(g),i=c.current.params.id,j=c.current.params.backUrl;a.formState={backUrl:j&&"home"===j?"#/":"#/messages/received"},a.respondedMessage=h.get({id:i},f),a.send=function(){function b(){d.info("message.messageSent"),e.path(a.formState.backUrl.substring(1))}return a.messageRespondForm.$setSubmitted(),a.messageRespondForm.$valid?void a.record.$save(b):void d.error("main.messages.form-has-errors")}}]).controller("messageNewController",["$scope","QueryUtils","$route","message","$location","ArrayUtils","$resource","config","$rootScope","$q","$translate",function(a,b,c,d,e,f,g,h,i,j,k){function l(){b.endpoint(G+"/studentgroups").query({curriculums:a.curriculum,studyForm:a.studyForm}).$promise.then(function(b){a.studentGroups=b.map(function(a){return{id:a.id,nameEt:a.code,nameEn:a.code,isHigher:a.higher}});var c=b.map(function(a){return a.id});a.studentGroup=a.studentGroup.filter(function(a){return-1!==c.indexOf(a)})})}function m(){b.endpoint(G+"/teacherjournals").query().$promise.then(function(b){a.journals=b.map(function(a){return{id:a.id,nameEt:a.nameEt,nameEn:a.nameEn}})})}function n(){b.endpoint(G+"/teachersubjects").query().$promise.then(function(b){a.subjects=b.map(function(a){return{id:a.id,code:a.code,nameEt:a.nameEt,nameEn:a.nameEn}})})}function o(a){g(h.apiUrl+"/message/"+a.studentId+"/parents").query().$promise.then(function(a){t(C(a,!0).filter(function(a){return!p(a.personId)}))})}function p(b){return a.receivers.filter(function(a){return a.personId===b}).length>0}function q(a){return 1===a.role.length&&"ROLL_T"===a.role[0]}function r(a,b,c){var d=c;"string"==typeof c&&(d=c.split("."));for(var e=a,f=b,g=0;g<d.length;g++){if(angular.isArray(e)){if(e.length>1){for(var h=0;h<e.length;h++)if(r(e[h],f,d.slice(g)))return!0;return!1}1===e.length&&(e=e[0])}if(angular.isArray(f)&&(f=f[0]),angular.isUndefined(e)||null===e||angular.isUndefined(f)||null===f)return e===f;e=d[g]in e?e[d[g]]:null,f=d[g]in f?f[d[g]]:null}return e===f}function s(a,b,c,d){for(var e=0;e<a.length;e++){var f=b.filter(c,a[e]);f.length>0?d(f[0],a[e]):b.push(a[e])}}function t(b){s(b,a.receivers,function(a){return a.personId===this.personId&&a.role[0]===this.role[0]},function(a,b){r(a,b,"curriculum.id")||a.curriculum.push(b.curriculum[0]),r(a,b,"studentGroup.id")||a.studentGroup.push(b.studentGroup[0]),r(a,b,"journal.id")||a.journal.push(b.journal[0]),r(a,b,"subject.id")||a.subject.push(b.subject[0])})}function u(a){a.size=1e3,g(h.apiUrl+G+"/students",a).query().$promise.then(function(a){t(v(a).filter(function(a){return a.higher&&"ROLL_L"===a.role[0]?!1:!0}))})}function v(a){var b=a.map(function(a){return{studentId:a.id,personId:a.personId,idcode:a.idcode,fullname:a.fullname,higher:a.higher,role:a.role,studyForm:a.studyForm,journal:null!==a.journal?[a.journal]:[],subject:null!==a.subject?[a.subject]:[],curriculum:[a.curriculum],studentGroup:[a.studentGroup]}});return b}function w(){a.receivers=a.receivers.filter(function(b){return(x(b)||y(b.role,a.targetGroup))&&(b.addedWithAutocomplete||y(a.curriculum,b.curriculum?b.curriculum.id:null)&&y(a.studentGroup,b.studentGroup?b.studentGroup.id:null)&&y(a.studyForm,b.studyForm)&&y(a.studyGroupStudentsParents,b.studentGroup?b.studentGroup.id:null)&&y(a.journalStudent,b.journal?b.journal.id:null)&&y(a.journalStudentParent,b.journal?b.journal.id:null)&&y(a.subjectStudent,b.subject?b.subject.id:null)&&y(a.subjectStudentParent,b.subject?b.subject.id:null))})}function x(b){return"ROLL_T"===a.targetGroup&&y(b.role,"ROLL_L")}function y(a,b){return 0===a.length||-1!==a.indexOf(b)}function z(){return a.studyForm.length>0||a.studentGroup.length>0||a.curriculum.length>0||a.studyGroupStudentsParents.length>0||a.journalStudent.length>0||a.journalStudentParent.length>0||a.subjectStudent.length>0||a.subjectStudentParent.length>0}function A(a,b){w(),z()?a(b):E()}function B(a){g(h.apiUrl+"/message/parents",a).query().$promise.then(function(a){t(C(a,!1))})}function C(a,b){var c=a.map(function(a){return{studentId:a.id,personId:a.personId,idcode:a.idcode,fullname:a.fullname,role:["ROLL_L"],journal:null!==a.journal?[a.journal]:[],subject:null!==a.subject?[a.subject]:[],studentGroup:[a.studentGroup],curriculum:[a.curriculum],addedWithAutocomplete:b}});return c}function D(){if(a.auth.isTeacher()){if(angular.isDefined(a.groupSearchType)&&null!==a.groupSearchType)switch(a.groupSearchType){case"SEARCH_STUDENT_GROUP":l();break;case"SEARCH_JOURNAL":m();break;case"SEARCH_SUBJECTS":n()}}else l()}function E(){a.receivers=a.receivers.filter(function(a){return a.addedWithAutocomplete})}function F(){return a.messageNewForm.$valid&&a.receivers.length>0}var G="/message",H=b.endpoint(G);a.record=new H,a.auth=c.current.locals.auth,a.formState={},a.auth.isAdmin()?a.targetGroups=["ROLL_O","ROLL_T","ROLL_L","ROLL_P"]:a.auth.isTeacher()?(a.targetGroups=["ROLL_T","ROLL_L"],a.groupSearchTypes=[{code:"SEARCH_STUDENT_GROUP",name:k.instant("message.searchTypeByGroups")}],a.auth.school.vocational&&a.groupSearchTypes.push({code:"SEARCH_JOURNAL",name:k.instant("message.searchTypeByJournals")}),a.auth.school.higher&&a.groupSearchTypes.push({code:"SEARCH_SUBJECTS",name:k.instant("message.searchTypeBySubjects")})):a.auth.isParent()||a.auth.isStudent()?a.targetGroups=["ROLL_O"]:a.targetGroups=[],1===a.targetGroups.length&&(a.targetGroup=a.targetGroups[0]),a.receivers=[],a.studyForm=[],a.studentGroup=[],a.curriculum=[],a.studyGroupStudentsParents=[],a.journalStudent=[],a.journalStudentParent=[],a.subjectStudent=[],a.subjectStudentParent=[],-1!==a.targetGroups.indexOf("ROLL_T")&&l(),a.addReceiver=function(b){if(b&&!p(b.personId)){var c={studentId:b.id,personId:b.personId,idcode:b.idcode,fullname:b.fullname,role:a.targetGroup?[a.targetGroup]:b.role,curriculum:b.curriculum,studentGroup:b.studentGroup,journal:b.journal,subject:b.subject,addedWithAutocomplete:!0};a.auth.isTeacher()&&(c.curriculumObject=b.curriculum,c.studentGroupObject=b.studentGroup),a.receivers.push(c),"ROLL_T"!==a.targetGroup||null!==b&&b.higher||o(c)}a.receiver=void 0},a.removeReceiver=function(b){f.remove(a.receivers,b),q(b)&&(a.receivers=a.receivers.filter(function(a){return a.studentId!==b.studentId}))},a.tarGetGroupChanged=function(){a.receivers=[],a.curriculum=[],a.studentGroup=[],a.studyForm=[],a.studyGroupStudentsParents=[],a.journalStudent=[],a.journalStudentParent=[],a.subjectStudent=[],a.subjectStudentParent=[]},a.searchTypeChanged=function(){w(),a.curriculum=[],a.studentGroup=[],a.studyForm=[],a.studyGroupStudentsParents=[],a.journalStudent=[],a.journalStudentParent=[],a.subjectStudent=[],a.subjectStudentParent=[]};var I=!1;a.$watch("curriculum",function(){I?(D(),w(),z()?u({studyForm:a.studyForm,studentGroupId:a.studentGroup,curriculum:a.curriculum}):E()):I=!0});var J=!0;a.$watch("journalStudent",function(){J?J=!1:A(u,{journalId:a.journalStudent})});var K=!0;a.$watch("journalStudentParent",function(){K?K=!1:A(B,{journalId:a.journalStudentParent})});var L=!0;a.$watch("subjectStudent",function(){L?L=!1:A(u,{subjectId:a.subjectStudent})});var M=!0;a.$watch("subjectStudentParent",function(){M?M=!1:A(B,{subjectId:a.subjectStudentParent})});var N=!0;a.$watch("studentGroup",function(){N?N=!1:A(u,{studyForm:a.studyForm,studentGroupId:a.studentGroup,curriculum:a.curriculum})});var O=!0;a.$watch("studyGroupStudentsParents",function(){O?O=!1:A(B,{studentGroupId:a.studyGroupStudentsParents})});var P=!1;a.$watch("studyForm",function(){P?(D(),w(),z()?u({studyForm:a.studyForm,studentGroupId:a.studentGroup,curriculum:a.curriculum}):E()):P=!0});var Q=b.endpoint("/message/persons");a.querySearch=function(b){var c=j.defer();return Q.query({role:a.targetGroup,name:b},function(a){for(var b=0;b<a.length;b++)a[b].curriculum=[a[b].curriculum],a[b].studentGroup=[a[b].studentGroup],a[b].journal=[a[b].journal],a[b].subject=[a[b].subject];var d=[];s(a,d,function(a){return a.personId===this.personId&&a.role[0]===this.role[0]},function(a,b){r(a,b,"curriculum.id")||a.curriculum.push(b.curriculum[0]),r(a,b,"studentGroup.id")||a.studentGroup.push(b.studentGroup[0]),r(a,b,"journal.id")||a.journal.push(b.journal[0]),r(a,b,"subject.id")||a.subject.push(b.subject[0])}),c.resolve(d)}),c.promise},a.send=function(){function b(){d.info("message.messageSent"),i.back("#/messages/sent")}return a.messageNewForm.$setSubmitted(),F()?(a.record.receivers=a.receivers.map(function(a){return a.personId}),void a.record.$save(b)):void d.error("main.messages.form-has-errors")}}]),angular.module("hitsaOis").config(["$routeProvider","USER_ROLES",function(a,b){function c(a,c){return-1!==d.indexOf(a.roleCode)||-1!==c.indexOf(b.ROLE_OIGUS_V_TEEMAOIGUS_TEADE)}var d=["ROLL_T","ROLL_L","ROLL_P"];a.when("/messages/sent",{templateUrl:"message/message.sent.html",controller:"messageSentController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}]},data:{authorizedRoles:c}}).when("/messages/automatic/sent",{templateUrl:"message/message.sent.html",controller:"messageAutomaticSentController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}]},data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_AUTOTEADE]}}).when("/messages/received",{templateUrl:"message/message.received.html",controller:"messageReceivedController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}]},data:{authorizedRoles:c}}).when("/message/:id/view",{templateUrl:"message/message.view.html",controller:"messageViewController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}]},data:{authorizedRoles:c}}).when("/message/:id/respond",{templateUrl:"message/message.respond.html",controller:"messageRespondController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}]},data:{authorizedRoles:c}}).when("/message/new",{templateUrl:"message/message.new.html",controller:"messageNewController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}]},data:{authorizedRoles:function(a,b){return"ROLL_P"!==a.roleCode&&c(a,b)}}})}]),angular.module("hitsaOis").controller("MessageTemplateListController",["$scope","Classifier","DataUtils","QueryUtils","$q",function(a,b,c,d,e){var f=b.valuemapper({type:"TEATE_LIIK"});d.createQueryForm(a,"/messageTemplate",{order:"type."+a.currentLanguageNameField()},function(a){f.objectmapper(a),c.convertStringToDates(a,["validThru","validFrom"]);for(var b=moment(),d=0;d<a.length;d++){var e=a[d];e._isValid=(!e.validFrom||moment(e.validFrom).isSameOrBefore(b,"day"))&&(!e.validThru||moment(e.validThru).isSameOrAfter(b,"day"))}}),c.convertStringToDates(a.criteria,["validFrom","validThru"]),e.all(f.promises).then(a.loadData)}]).controller("MessageTemplateEditController",["$location","$route","$scope","dialogService","message","DataUtils","QueryUtils","$rootScope",function(a,b,c,d,e,f,g,h){function i(){f.convertStringToDates(c.record,["validFrom","validThru"]),j(),c.getIsValid(),c.messageTemplateForm&&c.messageTemplateForm.$setPristine()}function j(){c.allowedTypes=g.endpoint("/messageTemplate/usedTypeCodes").query({code:c.record.type}).$promise.then(function(a){c.allowedTypes=a})}c.readOnly=-1!==b.current.$$route.originalPath.indexOf("view"),c.getIsValid=function(){c.isValid=(void 0===c.record.validFrom||null===c.record.validFrom||c.record.validFrom<=new Date)&&(void 0===c.record.validThru||null===c.record.validThru||c.record.validThru>=new Date)};var k="/messageTemplate",l=g.endpoint(k),m=b.current.params.id;h.removeLastUrlFromHistory(function(a){return a==="#/messageTemplate/"+m+"/view"||"#/messageTemplate/new"===a}),m?c.record=l.get({id:m},i):(c.record=new l,i()),c.$watch("record.validFrom",function(){c.record.validThru&&c.record.validThru<c.record.validFrom&&(c.record.validThru=null)}),c.usedTypes=[],c.save=function(){return c.messageTemplateForm.$setSubmitted(),c.messageTemplateForm.$valid?void(c.record.id?c.record.$update(i).then(e.updateSuccess):c.record.$save().then(function(){e.info("main.messages.create.success"),a.path(k+"/"+c.record.id+"/edit")})):void e.error("main.messages.form-has-errors")},c["delete"]=function(){d.confirmDialog({prompt:"messageTemplate.deleteconfirm"},function(){c.record.$delete().then(function(){e.info("main.messages.delete.success"),a.path(k)})})}}]),angular.module("hitsaOis").config(["$routeProvider","USER_ROLES",function(a,b){a.when("/messageTemplate",{templateUrl:"messageTemplate/message.template.search.html",controller:"MessageTemplateListController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}]},data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_AUTOTEADE]}}).when("/messageTemplate/new",{templateUrl:"messageTemplate/message.template.edit.html",controller:"MessageTemplateEditController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}]},data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_AUTOTEADE]}}).when("/messageTemplate/:id/edit",{templateUrl:"messageTemplate/message.template.edit.html",controller:"MessageTemplateEditController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}]},data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_AUTOTEADE]}}).when("/messageTemplate/:id/view",{templateUrl:"messageTemplate/message.template.edit.html",controller:"MessageTemplateEditController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}]},data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_AUTOTEADE]}})}]),angular.module("hitsaOis").controller("MidtermTaskStudentResultsController",["$scope","QueryUtils","$route","message","MidtermTaskUtil","ArrayUtils","dialogService",function(a,b,c,d,e,f,g){function h(b,c){var d=a.record.studentResults.find(function(a){return a.midtermTask===c.id&&a.declarationSubject===b.declarationSubject});return angular.isDefined(d)}function i(a,b){return{midtermTask:b.id,declarationSubject:a.declarationSubject,maxPoints:b.maxPoints,isText:b.studentResultIsText}}function j(){a.record.students.forEach(function(b){for(var c=[],d=0;d<a.record.midtermTasks.length;d++)h(b,a.record.midtermTasks[d])||c.push(i(b,a.record.midtermTasks[d]));a.record.studentResults=a.record.studentResults.concat(c)})}function k(){m.get({id:a.subjectStudyPeriodId}).$promise.then(function(b){a.record=b,a.moodleCourseId=b.subjectStudyPeriod.moodleCourseId,l()})}function l(){a.record.midtermTasks=n.getSortedMidtermTasks(a.record.midtermTasks),a.moodleTasks=n.getMoodleTasks(a.record.midtermTasks),j(),n.sortStudentResults(a.record.studentResults,a.record.midtermTasks)}a.auth=c.current.locals.auth,a.subjectStudyPeriodId=c.current.params.id;var m=b.endpoint("/midtermTasks/studentResults"),n=new e;k(),a.getMidtermTaskHeader=n.getMidtermTaskHeader,a.filterStudentResults=function(a){return function(b){return a.declarationSubject===b.declarationSubject}},a.save=function(){return a.midtermTaskResultForm.$setSubmitted(),a.midtermTaskResultForm.$valid?(a.record.id=a.subjectStudyPeriodId,void new m(a.record).$update().then(function(b){d.updateSuccess(),a.record=b,l()})):void d.error("main.messages.form-has-errors")},a.enrollStudents=function(){b.endpoint("/midtermTasks/"+a.subjectStudyPeriodId+"/moodle/enrollStudents").save(null,function(a){g.showDialog("components/moodle.enroll.dialog.html",function(b){b.moodleResponse=a},k,k)})},a.importGradeItems=function(){b.endpoint("/midtermTasks/"+a.subjectStudyPeriodId+"/moodle/importGradeItems").save(null,function(){d.info("moodle.messages.gradeItemsImported"),k()})},a.importAllGrades=function(){b.endpoint("/midtermTasks/"+a.subjectStudyPeriodId+"/moodle/importAllGrades").save(null,function(){d.info("moodle.messages.allGradesImported"),k()})},a.importMissingGrades=function(){b.endpoint("/midtermTasks/"+a.subjectStudyPeriodId+"/moodle/importMissingGrades").save(null,function(){d.info("moodle.messages.missingGradesImported"),k()})},a.filterProtocols=function(a){return function(b){var c=b.protocolStudents.map(function(a){return a.student.id});return f.contains(c,a.studentId)}},a.filterStudentProtocols=function(a){return function(b){return a.studentId===b.student.id}}}]).controller("MidtermTaskController",["$scope","$sessionStorage","QueryUtils","DataUtils","$route","ArrayUtils","message","dialogService","orderByFilter","$rootScope",function(a,b,c,d,e,f,g,h,i,j){function k(){a.record.midtermTasks||(a.record.midtermTasks=[]),d.convertStringToDates(a.record.midtermTasks,["taskDate"]),a.record.canBeEdited&&(a.record.midtermTasks=i(a.record.midtermTasks,["taskDate",j.currentLanguageNameField()]))}var l=c.endpoint("/midtermTasks");a.subjectStudyPeriodId=e.current.params.id,a.auth=e.current.locals.auth,a.record=l.get({id:a.subjectStudyPeriodId},k),a.addRow=function(){a.record.midtermTasks.push({maxPoints:0,canBeDeleted:!0})},a.removeRow=function(b){b.canBeDeleted?f.remove(a.record.midtermTasks,b):g.error("midtermTask.error.midtermTaskCantBeDeleted")},a.save=function(){return a.midtermTaskForm.$setSubmitted(),a.midtermTaskForm.$valid?(a.record.id=a.subjectStudyPeriodId,void new l(a.record).$update().then(function(b){g.updateSuccess(),a.record=b,k()})):void g.error("main.messages.form-has-errors")},a.getPercentageSum=function(){return a.record&&a.record.midtermTasks?a.record.midtermTasks.reduce(function(a,b){return b&&b.percentage?a+b.percentage:a},0):0},a.clearThresholdPercentage=function(a){a.threshold||(a.thresholdPercentage=null)},a.propertyName=["taskDate",j.currentLanguageNameField()],a.reverse=!1,a.sortBy=function(b){a.reverse=a.propertyName===b?!a.reverse:!1,a.propertyName=b},a.openCopyDialog=function(){var b=function(b){function e(){b.criteria&&!b.criteria.studyPeriod&&(b.criteria.studyPeriod=d.getCurrentStudyYearOrPeriod(b.studyPeriods).id)}b.subjectStudyPeriodSelected=[],b.formState={auth:a.auth},c.createQueryForm(b,"/midtermTasks/subjectStudyPeriods/"+a.subjectStudyPeriodId,{order:"subject."+a.currentLanguageNameField()}),b.clearCriteria(),c.endpoint("/autocomplete/studyPeriods").query().$promise.then(function(a){b.studyPeriods=a,e(),b.criteria.size=10,b.loadData()}),b.$watch("criteria.studyPeriod",function(){f.isEmpty(b.studyPeriods)||b.criteria.studyPeriod||e()}),b.subjectObject=null,b.$watch("criteria.subjectObject",function(){b.criteria&&(b.criteria.subject=b.criteria.subjectObject?b.criteria.subjectObject.id:null)}),b.$watch("criteria.teacherObject",function(){b.criteria&&(b.criteria.teacher=b.criteria.teacherObject?b.criteria.teacherObject.id:null)})};h.showDialog("midtermTask/midtermTask.copy.dialog.html",b,function(b){c.endpoint("/midtermTasks/"+a.subjectStudyPeriodId+"/subjectStudyPeriodCopy/"+b.subjectStudyPeriodSelected[0].id).put().$promise.then(function(b){g.info("midtermTask.message.copied"),b.midtermTasks&&(a.record.midtermTasks=a.record.midtermTasks.concat(b.midtermTasks)),k()})})}}]),angular.module("hitsaOis").factory("MidtermTaskUtil",["$rootScope","DataUtils","orderByFilter",function(a,b,c){var d=function(){function d(a){return 10>a?"0"+a:a}function e(a,b){var c=b.find(function(b){return b.id===a});return b.indexOf(c)}this.getMidtermTaskHeader=function(b){var c=b.taskDate?d(b.taskDate.getDate())+"."+d(b.taskDate.getMonth()+1):"";return a.currentLanguageNameField(b)+" "+c+" ("+b.percentage+"%), max "+b.maxPoints},this.getSortedMidtermTasks=function(d){return b.convertStringToDates(d,["taskDate"]),c(d,["taskDate",a.currentLanguageNameField()])},this.getMoodleTasks=function(a){for(var b={},c=0;c<a.length;c++){var d=a[c];d.moodleGradeItemId&&(b[d.id]=!0)}return b},this.sortStudentResults=function(a,b){a.sort(function(a,c){return e(a.midtermTask,b)-e(c.midtermTask,b)})}};return d}]),angular.module("hitsaOis").config(["$routeProvider","USER_ROLES",function(a,b){a.when("/subjectStudyPeriods/:id/midtermTasks/studentResults",{templateUrl:"midtermTask/midtermTask.studentResults.html",controller:"MidtermTaskStudentResultsController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}]},data:{authorizedRoles:[b.ROLE_OIGUS_M_TEEMAOIGUS_PAEVIK]}}).when("/subjectStudyPeriods/:id/midtermTasks",{templateUrl:"midtermTask/midtermTask.html",controller:"MidtermTaskController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}]},data:{authorizedRoles:[b.ROLE_OIGUS_M_TEEMAOIGUS_PAEVIK]}})}]),angular.module("hitsaOis").controller("OccupationCertificateImportController",["$scope","message","QueryUtils",function(a,b,c){function d(b){a.formState.studentGroups=a.formState.allStudentGroups.filter(function(a){return!b||a.curriculumVersion&&-1!==b.indexOf(a.curriculumVersion)})}a.criteria={},a.formState={allStudentGroups:c.endpoint("/autocomplete/studentgroups").query({valid:!0})},a.formState.allStudentGroups.$promise.then(function(){d(a.criteria.curriculumVersion)}),a.$watchCollection("criteria.curriculumVersion",d),a.importFromKutseregister=function(){return a.occupationCertificateForm.$setSubmitted(),a.occupationCertificateForm.$valid?void c.endpoint("/occupationcertificates/import").post(a.criteria).$promise.then(function(b){a.results=b}):(b.error("main.messages.form-has-errors"),!1)}}]),angular.module("hitsaOis").config(["$routeProvider","USER_ROLES",function(a,b){a.when("/occupationcertificate/import",{templateUrl:"occupationcertificate/import.html",controller:"OccupationCertificateImportController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}]},data:{authorizedRoles:[b.ROLE_OIGUS_M_TEEMAOIGUS_ANDMEVAHETUS_KUTSEREGISTER]}})}]),angular.module("hitsaOis").controller("KutseregisterSyncController",["$scope","message","QueryUtils",function(a,b,c){a.criteria={},a.occupationStandards=function(){return a.kutseregisterSyncForm.$setSubmitted(),a.kutseregisterSyncForm.$valid?void c.endpoint("/logs/kutseregister/sync").post(a.criteria,function(){b.info("occupationcertificate.importDone")}):(b.error("main.messages.form-has-errors"),!1)}}]),angular.module("hitsaOis").config(["$routeProvider","USER_ROLES",function(a,b){a.when("/occupationstandard",{templateUrl:"occupationstandard/occupationstandard.html",controller:"KutseregisterSyncController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}]},data:{authorizedRoles:[b.ROLE_OIGUS_M_TEEMAOIGUS_ANDMEVAHETUS_KUTSEREGISTER]}})}]),angular.module("hitsaOis").controller("ModuleProtocolController",["$scope","$route","Classifier","$q","ArrayUtils","ProtocolUtils","VocationalGradeUtil","QueryUtils","message","$location","dialogService","$mdDialog","$window","oisFileService","config","$timeout","$filter",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){function r(){a.protocolStudentJournalResults={};var b={};a.protocol.protocolStudents.forEach(function(c){c.journalResults.forEach(function(d){b[d.journalId]||(b[d.journalId]={id:d.journalId,nameEt:d.nameEt,capacity:d.capacity,hasOutcomes:d.journalHasOutcomes}),a.protocolStudentJournalResults[c.id]||(a.protocolStudentJournalResults[c.id]={}),a.protocolStudentJournalResults[c.id][d.journalId]||(a.protocolStudentJournalResults[c.id][d.journalId]=[]),a.protocolStudentJournalResults[c.id][d.journalId].push(A.objectmapper(d).grade)})});var c=[];a.formState.outcomesAsEntries=!1;for(var d in b)b.hasOwnProperty(d)&&(c.push(b[d]),!a.formState.outcomesAsEntries&&b[d].hasOutcomes&&(a.formState.outcomesAsEntries=!0));a.journals=c}function s(){a.protocolStudentOutcomeResults={},a.protocol.protocolStudents.forEach(function(b){var c=[];b.outcomeResults.forEach(function(a){c.push({id:a.curriculumModuleOutcomeId,grade:a.grade,gradeInserted:a.gradeInserted})}),c=u(c),c.forEach(function(c){a.protocolStudentOutcomeResults[b.id]||(a.protocolStudentOutcomeResults[b.id]={}),a.protocolStudentOutcomeResults[b.id][c.id]||(a.protocolStudentOutcomeResults[b.id][c.id]=A.objectmapper(c).grade)})}),t(a.protocol.protocolVdata.outcomes)}function t(b){var c=0;b.forEach(function(a){null===a.orderNr&&(a.orderNr=c++)}),a.outcomes=b}function u(a){return a.sort(function(a,b){return a=new Date(a.gradeInserted),b=new Date(b.gradeInserted),a>b?-1:b>a?1:0}),a}function v(b){d.all(A.promises).then(function(){a.moduleProtocolForm.$setPristine(),a.protocol=A.objectmapper(b),a.savedStudents=angular.copy(a.protocol.protocolStudents),a.getUrl=n.getUrl,r(),s(),a.formState.canEditProtocol=f.canEditProtocol(a.auth,a.protocol),a.formState.canChangeConfirmedProtocolGrade=f.canChangeConfirmedProtocolGrade(a.auth,a.protocol),a.formState.canAddDeleteStudents=f.canAddDeleteStudents(a.auth,a.protocol),a.formState.canConfirm=f.canConfirm(a.auth,a.protocol),a.formState.protocolPdfUrl=o.apiUrl+z+"/"+b.id+"/print/protocol.pdf"})}function w(){return a.moduleProtocolForm.$valid?!0:(i.error("main.messages.form-has-errors"),a.moduleProtocolForm.$setSubmitted(),!1)}function x(b){var c=a.protocol.protocolStudents.find(function(a){return a.id===b.protocolStudent});c.grade=b.grade}function y(b){b.forEach(x),a.gradeChanged()}var z="/moduleProtocols";a.gradeUtil=g,a.auth=b.current.locals.auth;var A=c.valuemapper({grade:"KUTSEHINDAMINE",status:"PROTOKOLL_STAATUS"}),B=["KUTSEHINDAMINE_1","KUTSEHINDAMINE_X"],C=["KUTSEHINDAMINE_X"],D=c.queryForDropdown({mainClassCode:"KUTSEHINDAMINE"});a.formState={},a.calculateGrades={protocolStudents:[]},D.$promise.then(function(c){a.grades=c.filter(function(a){return b.current.locals.isView?-1===C.indexOf(a.code):-1===B.indexOf(a.code)})}),a.protocolStudentJournalResults={},a.protocolStudentOutcomeResults={},a.gradeChanged=function(b){if(b){var c=q("filter")(a.savedStudents,{id:b.id},!0)[0];c.grade!==b.grade?(a.moduleProtocolForm.$setSubmitted(),b.gradeHasChanged=!0):(b.gradeHasChanged=!1,c.addInfo?b.addInfo=c.addInfo:b.addInfo=null)}a.formState.canConfirm=f.canConfirm(a.auth,a.protocol)},a.addInfoChanged=function(){a.formState.canConfirm=f.canConfirm(a.auth,a.protocol);
},b.current.locals.entity&&v(b.current.locals.entity),a.deleteProtocolStudent=function(b){k.confirmDialog({prompt:"moduleProtocol.prompt.deleteStudent"},function(){var c=h.endpoint(z+"/"+a.protocol.id+"/removeStudent"),d=new c(b);d.$delete().then(function(a){i.info("main.messages.delete.success"),v(a)})["catch"](angular.noop)})},a.addProtocolStudents=function(){k.showDialog("protocol/module.protocol.addStudent.dialog.html",function(b){b.selectedStudents=[],h.createQueryForm(b,z+"/"+a.protocol.id+"/otherStudents",{}),b.loadData()},function(b){h.endpoint(z+"/"+a.protocol.id+"/addStudents").save({version:a.protocol.version,protocolStudents:b.selectedStudents.map(function(a){return{studentId:a}})},function(a){i.info("moduleProtocol.messages.studentSuccesfullyAdded"),v(a)})})},a.gradeValue=function(a){var b=A.objectmapper({grade:a}).grade;return b?b.value:void 0},a.confirm=function(){if(w()){var b={version:a.protocol.version,protocolStudents:a.protocol.protocolStudents};"LOGIN_TYPE_I"===a.auth.loginMethod?f.signBeforeConfirm(z+"/"+a.protocol.id,b,"moduleProtocol.messages.confirmed",v):"LOGIN_TYPE_M"===a.auth.loginMethod&&f.mobileSignBeforeConfirm(z+"/"+a.protocol.id,b,"moduleProtocol.messages.confirmed",v)}};var E=h.endpoint(z);a.save=function(){w()&&new E({id:a.protocol.id,version:a.protocol.version,protocolStudents:a.protocol.protocolStudents}).$update().then(function(a){i.info("main.messages.create.success"),v(a)})},a.calculate=function(){h.endpoint(z+"/"+a.protocol.id+"/calculate").query(a.calculateGrades).$promise.then(function(b){a.calculateGrades.protocolStudents=[],y(b),i.info("moduleProtocol.messages.calculated")})};var F=h.endpoint(z);a["delete"]=function(){k.confirmDialog({prompt:"moduleProtocol.prompt.delete"},function(){new F(a.protocol).$delete().then(function(){i.info("moduleProtocol.messages.deleted"),j.path(z)})})}}]),angular.module("hitsaOis").controller("ModuleProtocolListController",["$scope","$route","QueryUtils","DataUtils","Classifier","$q","message",function(a,b,c,d,e,f,g){function h(){return(a.auth.isTeacher()||a.auth.isAdmin())&&-1!==a.auth.authorizedRoles.indexOf("ROLE_OIGUS_K_TEEMAOIGUS_MOODULPROTOKOLL")}a.auth=b.current.locals.auth,a.search={},a.criteria={},a.load=function(){return a.searchForm.$valid?void a.loadData():(g.error("main.messages.form-has-errors"),!1)},a.formState={canCreateProtocol:h()};var i=e.valuemapper({status:"PROTOKOLL_STAATUS"});c.createQueryForm(a,"/moduleProtocols",{},i.objectmapper);var j=a.$watch("criteria.studyYear",function(b){angular.isNumber(b)&&(j(),f.all(i.promises).then(a.loadData))});a.$watch("criteria.moduleObject",function(){a.criteria.module=a.criteria.moduleObject?a.criteria.moduleObject.id:null}),a.clearSearch=function(){a.clearCriteria(),a.search={}},a.curriculumVersionModule=function(b){var c="";return c+=b.curriculumVersions.map(function(b){return a.currentLanguageNameField(b)}).join("; "),c+=", ",c+=b.curriculumVersionOccupationModules.map(function(b){return a.currentLanguageNameField(b)}).join("; ")}}]),angular.module("hitsaOis").controller("ModuleProtocolNewController",["$scope","$route","$location","QueryUtils","DataUtils","Classifier","message","ArrayUtils",function(a,b,c,d,e,f,g,h){a.auth=b.current.locals.auth,a.formState={selectedStudents:[],teachers:d.endpoint("/moduleProtocols/teachers").query()},a.auth.isTeacher()&&(a.formState.teacher=a.auth.teacher);var i=f.valuemapper({journalResults:"KUTSEHINDAMINE",status:"OPPURSTAATUS"});a.curriculumVersionChange=function(){a.formState.curriculumVersionOccupationModule=void 0,a.formState.curriculumVersionOccupationModules=d.endpoint("/moduleProtocols/occupationModules/"+a.formState.curriculumVersion).query()},a.curriculumVersionOccupationModuleChange=function(){var b=d.endpoint("/moduleProtocols/occupationModule/"+a.formState.studyYear+"/"+a.formState.curriculumVersionOccupationModule).get();a.tabledata={$promise:b.$promise},b.$promise.then(function(b){a.formState.selectedStudents=[],a.tabledata.content=i.objectmapper(b.occupationModuleStudents),b.occupationModuleStudents.forEach(function(b){"OPPURSTAATUS_O"===b.status.code&&a.formState.selectedStudents.push(b.studentId)}),b.teacher&&(a.formState.teacher=b.teacher.id)})},a.journalResultsView=function(a){return a.map(function(a){return a.value}).join(" / ")};var j=d.endpoint("/moduleProtocols");a.submit=function(){if(!a.moduleProtocolNewForm.$valid)return g.error("main.messages.form-has-errors"),a.moduleProtocolNewForm.$setSubmitted(),!1;if(h.isEmpty(a.formState.selectedStudents))return void g.error("moduleProtocol.error.noStudents");var b={};b.protocolVdata={curriculumVersionOccupationModule:a.formState.curriculumVersionOccupationModule,curriculumVersion:a.formState.curriculumVersion,studyYear:a.formState.studyYear,teacher:a.formState.teacher},b.protocolStudents=a.formState.selectedStudents.map(function(a){return{studentId:a}}),new j(b).$save().then(function(a){g.info("main.messages.create.success"),c.path("/moduleProtocols/"+a.id+"/edit")})}}]),angular.module("hitsaOis").config(["$routeProvider","USER_ROLES",function(a,b){a.when("/moduleProtocols",{templateUrl:"protocol/module.protocol.list.html",controller:"ModuleProtocolListController",controllerAs:"moduleProtocolListController",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}]},data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_MOODULPROTOKOLL]}}).when("/moduleProtocols/new",{templateUrl:"protocol/module.protocol.new.html",controller:"ModuleProtocolNewController",controllerAs:"moduleProtocolNewController",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}],isCreate:function(){return!0}},data:{authorizedRoles:[b.ROLE_OIGUS_M_TEEMAOIGUS_MOODULPROTOKOLL]}}).when("/moduleProtocols/:id/:action",{templateUrl:function(a){return"edit"===a.action?"protocol/module.protocol.edit.html":"protocol/module.protocol.view.html"},controller:"ModuleProtocolController",controllerAs:"moduleProtocolController",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}],entity:["QueryUtils","$route",function(a,b){return a.endpoint("/moduleProtocols").get({id:b.current.params.id}).$promise}],isView:["$route",function(a){return"view"===a.current.params.action}]},data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_MOODULPROTOKOLL,b.ROLE_OIGUS_M_TEEMAOIGUS_MOODULPROTOKOLL]}})}]),angular.module("hitsaOis").controller("PracticeJournalEditController",["$scope","$rootScope","$location","$route","QueryUtils","Classifier","message","dialogService","DataUtils","USER_ROLES",function(a,b,c,d,e,f,g,h,i,j){function k(){g.error("main.messages.error.nopermission"),c.path("")}function l(){a.auth.isAdmin()&&-1!==a.auth.authorizedRoles.indexOf(j.ROLE_OIGUS_M_TEEMAOIGUS_PRAKTIKAPAEVIK)||k()}function m(b){b.canEdit&&(a.auth.isTeacher()||a.auth.isAdmin())||k()}function n(b){m(b),i.convertStringToDates(b,["startDate","endDate"]),a.formState.isHigher=b.isHigher,i.convertObjectToIdentifier(b,["module","theme","teacher","subject"]),a.practiceJournal=b}function o(b){e.endpoint("/practiceJournals/studentPracticeModules/"+b.id).query(function(b){a.formState.modulesById={},a.formState.themesById={},b.forEach(function(b){a.formState.modulesById[b.module.id]=b,b.themes.forEach(function(b){a.formState.themesById[b.theme.id]=b})}),a.formState.modules=b.map(function(a){return a.module}),angular.isNumber(a.practiceJournal.module)&&q(a.practiceJournal.module)})}function p(b){e.endpoint("/practiceJournals/studentPracticeSubjects/"+b.id).query(function(b){a.formState.subjectsById={},b.forEach(function(b){a.formState.subjectsById[b.id]=b}),a.formState.subjects=b})}function q(b){var c=a.formState.modulesById[b];c&&(a.formState.themes=c.themes.map(function(a){return a.theme}))}function r(){a.practiceJournal.module&&!a.practiceJournal.theme&&(a.practiceJournal.credits=a.formState.modulesById[a.practiceJournal.module].credits,a.practiceJournal.hours=a.practiceJournal.credits*v)}function s(){return a.practiceJournalForm.$setSubmitted(),a.practiceJournalForm.$valid?!0:(g.error("main.messages.form-has-errors"),!1)}function t(a){var b=moment(),c=moment(a.endDate);return moment.duration(b.diff(c)).asDays()<=w}function u(b){e.endpoint("/practiceJournals/"+a.practiceJournal.id+"/confirm/").put(a.practiceJournal,function(d){g.info("practiceJournal.messages.confirmed"),b?c.path("/practiceJournals"):(n(d),a.practiceJournalForm.$setPristine())})}var v=26,w=30;a.auth=d.current.locals.auth,a.practiceJournal={},a.formState={};var x=d.current.locals.entity;angular.isDefined(x)?(n(x),b.removeLastUrlFromHistory(function(a){return a&&-1!==a.indexOf("/practiceJournals/new")})):(l(),a.formState.isHigher=a.auth.school.higher===!0&&(a.auth.school.vocational===!0&&d.current.params.higher===!0||a.auth.school.vocational===!1));var y=f.valuemapper({studyForm:"OPPEVORM"});a.$watch("practiceJournal.student",function(b){angular.isObject(b)&&(e.endpoint("/students/"+b.id).search(function(b){a.formState.student=y.objectmapper(b)}),a.formState.isHigher?p(b):o(b))}),a.moduleChanged=function(b){a.formState.modulesById[b]&&(r(),q(b),!angular.isDefined(x)&&angular.isString(a.formState.modulesById[b].assessmentMethodsEt)&&(a.practiceJournal.practicePlan=a.formState.modulesById[b].assessmentMethodsEt))},a.themeChanged=function(b){a.formState.themesById[b]?(a.practiceJournal.credits=a.formState.themesById[b].credits,a.practiceJournal.hours=a.practiceJournal.credits*v,!angular.isDefined(x)&&angular.isString(a.formState.themesById[b].subthemes)&&(a.practiceJournal.practicePlan=a.formState.themesById[b].subthemes)):r()},a.subjectChanged=function(b){a.formState.subjectsById[b]&&(a.practiceJournal.credits=a.formState.subjectsById[b].credits,a.practiceJournal.hours=a.practiceJournal.credits*v,!angular.isDefined(x)&&angular.isString(a.formState.subjectsById[b].outcomesEt)&&(a.practiceJournal.practicePlan=a.formState.subjectsById[b].outcomesEt))},a.updateHours=function(){angular.isNumber(a.practiceJournal.credits)&&(a.practiceJournal.hours=i.creditsToHours(a.practiceJournal.credits),a.practiceJournalForm.hours.$setDirty())},a.updateCredits=function(){a.practiceJournal.credits=i.hoursToCredits(a.practiceJournal.hours),a.practiceJournalForm.credits.$setDirty()};var z=e.endpoint("/practiceJournals");a.save=function(){if(!s())return!1;t(a.practiceJournal),a.practiceJournal.isHigher=a.formState.isHigher;var b=new z(a.practiceJournal);angular.isDefined(a.practiceJournal.id)?t(a.practiceJournal)?b.$update().then(function(){g.info("main.messages.update.success"),n(b),a.practiceJournalForm.$setPristine()}):h.confirmDialog({prompt:"practiceJournal.prompt.isAfterDaysAfterCanEditSave"},function(){b.$update().then(function(){g.info("main.messages.update.success"),c.path("/practiceJournals")})}):t(a.practiceJournal)?b.$save().then(function(){g.info("main.messages.create.success"),c.path("/practiceJournals/"+b.id+"/edit")}):h.confirmDialog({prompt:"practiceJournal.prompt.isAfterDaysAfterCanEditSave"},function(){b.$save().then(function(){g.info("main.messages.create.success"),c.path("/practiceJournals")})})},a.confirm=function(){return s()?(a.practiceJournal.isHigher=a.formState.isHigher,void(t(a.practiceJournal)?h.confirmDialog({prompt:"practiceJournal.prompt.confirmConfirm"},function(){u(!1)}):h.confirmDialog({prompt:"practiceJournal.prompt.isAfterDaysAfterCanEditConfirm"},function(){u(!0)}))):!1},a["delete"]=function(){h.confirmDialog({prompt:"practiceJournal.deleteconfirm"},function(){var b=new z(a.practiceJournal);b.$delete().then(function(){g.info("main.messages.delete.success"),c.path("/practiceJournals")})})}}]),angular.module("hitsaOis").controller("PracticeJournalListController",["$scope","$route","$location","$q","QueryUtils","dialogService","ArrayUtils","USER_ROLES","Classifier","message",function(a,b,c,d,e,f,g,h,i,j){function k(){return a.auth.isAdmin()&&g.includes(a.auth.authorizedRoles,h.ROLE_OIGUS_M_TEEMAOIGUS_PRAKTIKAPAEVIK)}a.auth=b.current.locals.auth;var l=i.valuemapper({status:"PAEVIK_STAATUS"});e.createQueryForm(a,"/practiceJournals",{order:"student_person.lastname,student_person.firstname"},l.objectmapper);var m=a.$watch("criteria.studyYear",function(b){angular.isNumber(b)&&(m(),d.all(l.promises).then(a.loadData))});a.load=function(){return a.criteria.studyYear?void a.loadData():(j.error("main.messages.form-has-errors"),!1)},a.formState={canCreate:k()},a.newPracticeJournal=function(){a.auth.school.higher&&a.auth.school.vocational?f.showDialog("practiceJournal/vocational.higher.select.dialog.html",function(){},function(a){a.higher===!0?c.path("/practiceJournals/new").search({higher:!0}):c.path("/practiceJournals/new")}):c.path("/practiceJournals/new")}}]),angular.module("hitsaOis").controller("PracticeJournalEntryController",["$scope","$route","$location","dialogService","oisFileService","QueryUtils","message","DataUtils","ArrayUtils","Classifier",function(a,b,c,d,e,f,g,h,i,j){function k(a){b.current.locals.isEntryEdit!==!0||a.canEdit||(g.error("main.messages.error.nopermission"),c.path(""))}function l(b){k(b),h.convertStringToDates(b,["startDate","endDate"]),a.practiceJournal=b;var c=a.practiceJournal.isHigher?"KORGHINDAMINE":"KUTSEHINDAMINE";a.grades=j.queryForDropdown({mainClassCode:c})}a.auth=b.current.locals.auth,a.removeFromArray=i.remove,a.practiceJournal={practiceJournalEntries:[],practiceJournalFiles:[]},a.formState={};var m=b.current.locals.entity;angular.isDefined(m)&&l(m),a.addNewEntryRow=function(){a.practiceJournal.practiceJournalEntries.push({isStudentEntry:a.auth.isStudent()})},a.getEntryColor=function(b){return a.auth.isStudent()&&!b.isStudentEntry?"pink-50":void 0},a.getGrade=function(b){if(a.grades)for(var c=0;c<a.grades.length;c++)if(a.grades[c].code===b)return a.grades[c]},a.openAddFileDialog=function(){d.showDialog("practiceJournal/practice.journal.entry.add.file.dialog.html",function(b){b.addedFiles=a.practiceJournal.practiceJournalFiles},function(b){var c=b.data;e.getFromLfFile(c.file[0],function(b){c.oisFile=b,a.practiceJournal.practiceJournalFiles.push(c)})})},a.getUrl=e.getUrl;var n="/practiceJournals/"+a.practiceJournal.id+"/saveEntries/";a.save=function(){if(a.practiceJournalEntryForm.$setSubmitted(),!a.practiceJournalEntryForm.$valid)return void g.error("main.messages.form-has-errors");var b;if(a.auth.isStudent()){var c=f.endpoint(n+"student");b=new c({practiceJournalEntries:a.practiceJournal.practiceJournalEntries,practiceReport:a.practiceJournal.practiceReport})}else{var d=f.endpoint(n+"teacher");b=new d({teacherComment:a.practiceJournal.teacherComment,teacherOpinion:a.practiceJournal.teacherOpinion,grade:a.practiceJournal.grade,practiceJournalFiles:a.practiceJournal.practiceJournalFiles,practiceJournalEntries:a.practiceJournal.practiceJournalEntries})}b.$update().then(function(b){g.info("main.messages.create.success"),l(b),a.practiceJournalEntryForm.$setPristine()})};var o=f.endpoint("/practiceJournals");a["delete"]=function(){d.confirmDialog({prompt:"practiceJournal.deleteconfirm"},function(){var b=new o(a.practiceJournal);b.$delete().then(function(){g.info("main.messages.delete.success"),c.path("/practiceJournals")})})},a.deleteFile=function(b){d.confirmDialog({prompt:"practiceJournal.prompt.fileDeleteConfirm"},function(){i.remove(a.practiceJournal.practiceJournalFiles,b)})}}]),angular.module("hitsaOis").controller("PracticeJournalSupervisorEntryController",["$scope","$route","dialogService","oisFileService","QueryUtils","message","DataUtils","ArrayUtils",function(a,b,c,d,e,f,g,h){function i(b){g.convertStringToDates(b,["startDate","endDate"]),a.practiceJournal=b}a.removeFromArray=h.remove,a.practiceJournal={practiceJournalEntries:[],practiceJournalFiles:[]},a.formState={};var j=b.current.locals.entity;angular.isDefined(j)&&i(j),a.openAddFileDialog=function(){c.showDialog("practiceJournal/practice.journal.entry.add.file.dialog.html",function(b){b.addedFiles=a.practiceJournal.practiceJournalFiles},function(b){var c=b.data;d.getFromLfFile(c.file[0],function(b){c.oisFile=b,a.practiceJournal.practiceJournalFiles.push(c)})})},a.getUrl=d.getUrl;var k=e.endpoint("/practiceJournals/supervisor/"+b.current.params.uuid+"/saveEntries/");a.save=function(){var b=new k({supervisorOpinion:a.practiceJournal.supervisorOpinion,supervisorComment:a.practiceJournal.supervisorComment,practiceJournalFiles:a.practiceJournal.practiceJournalFiles,practiceJournalEntries:a.practiceJournal.practiceJournalEntries});b.$update().then(function(a){f.info("main.messages.create.success"),i(a)})}}]),angular.module("hitsaOis").config(["$routeProvider","USER_ROLES",function(a,b){a.when("/practiceJournals",{templateUrl:"practiceJournal/practice.journal.list.html",controller:"PracticeJournalListController",controllerAs:"PracticeJournalListController",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}]},data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_PRAKTIKAPAEVIK]}}).when("/practiceJournals/new",{templateUrl:"practiceJournal/practice.journal.edit.html",controller:"PracticeJournalEditController",controllerAs:"PracticeJournalEditController",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}],isCreate:function(){return!0}},data:{authorizedRoles:[b.ROLE_OIGUS_M_TEEMAOIGUS_PRAKTIKAPAEVIK]}}).when("/practiceJournals/:id/edit",{templateUrl:"practiceJournal/practice.journal.edit.html",controller:"PracticeJournalEditController",controllerAs:"PracticeJournalEditController",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}],entity:["QueryUtils","$route",function(a,b){return a.endpoint("/practiceJournals").get({id:b.current.params.id}).$promise}]},data:{authorizedRoles:[b.ROLE_OIGUS_M_TEEMAOIGUS_PRAKTIKAPAEVIK]}}).when("/practiceJournals/:id/view",{templateUrl:"practiceJournal/practice.journal.view.html",controller:"PracticeJournalEntryController",controllerAs:"PracticeJournalViewController",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}],entity:["QueryUtils","$route",function(a,b){return a.endpoint("/practiceJournals").get({id:b.current.params.id}).$promise}]},data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_PRAKTIKAPAEVIK]}}).when("/practiceJournals/:id/entries/edit",{templateUrl:"practiceJournal/practice.journal.entry.html",controller:"PracticeJournalEntryController",controllerAs:"PracticeJournalEntryController",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}],entity:["QueryUtils","$route",function(a,b){return a.endpoint("/practiceJournals").get({id:b.current.params.id}).$promise}],isEntryEdit:function(){return!0}},data:{authorizedRoles:[b.ROLE_OIGUS_M_TEEMAOIGUS_PRAKTIKAPAEVIK]}}).when("/practiceJournals/supervisor/:uuid",{templateUrl:"practiceJournal/practice.journal.supervisor.entry.html",controller:"PracticeJournalSupervisorEntryController",controllerAs:"PracticeJournalSupervisorEntryController",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],entity:["QueryUtils","$route",function(a,b){return a.endpoint("/practiceJournals/supervisor").get({id:b.current.params.uuid}).$promise}]}}).when("/practiceJournals/student",{templateUrl:"practiceJournal/practice.journal.student.list.html",controller:"SimpleListController",controllerAs:"PracticeJournalStudentListController",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}],url:function(){return"/practiceJournals"}},data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_PRAKTIKAPAEVIK]}})}]),angular.module("hitsaOis").controller("RoomSearchController",["$scope","Classifier","QueryUtils",function(a,b,c){a.equipmentDefs=b.queryForDropdown({mainClassCode:"SEADMED"}),c.createQueryForm(a,"/rooms",{order:"b.name"},function(b){b.forEach(function(b){b.equipment=(b.roomEquipment||[]).map(function(b){return{equipment:a.equipmentDefs[b.equipment],equipmentCount:b.equipmentCount}})})}),a.equipmentDefs.$promise.then(function(){a.equipmentDefs=b.toMap(a.equipmentDefs),a.loadData()})}]).controller("RoomEditController",["message","$location","$route","$scope","Classifier","FormUtils","QueryUtils",function(a,b,c,d,e,f,g){function h(){d.formState.roomUniqueQuery.url=k+"/unique/"+(d.record.building||"0")}function i(a){d.formState.roomEquipment=(a.roomEquipment||[]).map(function(a){return{equipment:d.equipmentDefs[a.equipment],equipmentCount:a.equipmentCount}}),h()}var j=c.current.params.id,k="/rooms",l=g.endpoint(k);d.equipmentDefs=e.queryForDropdown({mainClassCode:"SEADMED"}),d.formState={roomUniqueQuery:{id:j}},d.equipmentDefs.$promise.then(function(){d.equipmentDefs=e.toMap(d.equipmentDefs),j?d.record=l.get({id:j},i):(d.record=new l({roomEquipment:[],isStudy:!0}),i(d.record))}),d.addEquipment=function(){return d.formState.roomEquipment.some(function(a){return a.equipment.code===d.formState.newEquipment.code})?void a.error("room.duplicateequipment"):(d.formState.roomEquipment.push({equipment:d.formState.newEquipment,equipmentCount:1}),void(d.formState.newEquipment=null))},d.deleteEquipment=function(a){for(var b=d.formState.roomEquipment,c=0,e=b.length;e>c;c++)if(b[c].equipment.code===a){b.splice(c,1);break}},d.update=function(){f.withValidForm(d.roomForm,function(){d.record.roomEquipment=d.formState.roomEquipment.map(function(a){return{equipment:a.equipment.code,equipmentCount:a.equipmentCount}}),d.record.id?(d.record.$update().then(i).then(a.updateSuccess)["catch"](angular.noop),d.roomForm.$setPristine()):d.record.$save().then(function(){a.info("main.messages.create.success"),b.url(k+"/"+d.record.id+"/edit?_noback")})["catch"](angular.noop)})},d["delete"]=function(){f.deleteRecord(d.record,"/rooms/search?_noback",{prompt:"room.deleteconfirm"})},d.buildingChanged=function(){h(),d.roomForm.code.$validate()}}]),angular.module("hitsaOis").config(["$routeProvider","USER_ROLES",function(a,b){a.when("/rooms/new",{templateUrl:"room/room.edit.html",controller:"RoomEditController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}]},data:{authorizedRoles:[b.ROLE_OIGUS_M_TEEMAOIGUS_HOONERUUM]}}).when("/rooms/search",{templateUrl:"room/room.search.html",controller:"RoomSearchController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}]},data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_HOONERUUM]}}).when("/rooms/:id/edit",{templateUrl:"room/room.edit.html",controller:"RoomEditController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}]},data:{authorizedRoles:[b.ROLE_OIGUS_M_TEEMAOIGUS_HOONERUUM]}})}]),angular.module("hitsaOis").controller("ReceptionSaisAdmissionArchiveController",["message","$route","$scope","QueryUtils","dialogService","$filter",function(a,b,c,d,e,f){c.auth=b.current.locals.auth,c.save=function(){e.showDialog("reception/reception.saisAdmission.archive.confirm.html",function(b){b.archive=f("hoisDate")(c.archive.endDate),b.submit=function(){d.endpoint("/saisAdmissions/archive").save(c.archive).$promise.then(function(){a.info("reception.archive.archivedAdmission")})}})}}]),angular.module("hitsaOis").controller("ReceptionSaisAdmissionController",["message","$scope","$route","DataUtils","QueryUtils",function(a,b,c,d,e){function f(a){d.convertStringToDates(a,["periodStart","periodEnd"]),angular.extend(b.saisAdmission,a)}b.auth=c.current.locals.auth,b.saisAdmission={};var g=c.current.locals.entity;angular.isDefined(g)&&f(g),b.revertArchived=function(){e.endpoint("/saisAdmissions/deArchive/"+c.current.params.id).save().$promise.then(function(c){c.archived?a.error("reception.archive.error"):(b.saisAdmission=c,a.info("reception.archive.revertedArchived"))})}}]).controller("ReceptionSaisAdmissionListController",["USER_ROLES","AuthService","$q","$route","$scope","Classifier","QueryUtils",function(a,b,c,d,e,f,g){e.auth=d.current.locals.auth,e.archiveButton=b.isAuthorized(a.ROLE_OIGUS_M_TEEMAOIGUS_VASTUVOTT);var h=d.current.locals.clMapping,i=h?f.valuemapper(h):void 0;g.createQueryForm(e,d.current.locals.url,d.current.locals.params,i?i.objectmapper:void 0),i?c.all(i.promises).then(e.loadData):e.loadData()}]),angular.module("hitsaOis").controller("ReceptionSaisAdmissionImportController",["$scope","message","QueryUtils","Classifier",function(a,b,c,d){a.successEmpty=!0,a.failEmpty=!0,a.importAdmissions=function(){a.successEmpty=!0,a.failEmpty=!0;var e=d.valuemapper({studyForm:"OPPEVORM",language:"OPPEKEEL"});a.admissionImportForm.$valid?c.endpoint("/saisAdmissions/saisImport").save(a.criteria).$promise.then(function(c){e.objectmapper(c.content),a.success=[],a.fail=[];for(var d=0;d<c.content.length;d++)c.content[d].failed===!0?(a.fail.push(c.content[d]),a.failEmpty=!1):(a.success.push(c.content[d]),a.successEmpty=!1);b.info("reception.admission.importFinished")}):b.error("main.messages.form-has-errors")}}]),angular.module("hitsaOis").controller("ReceptionSaisApplicationController",["message","$location","$scope","$route","DataUtils","dialogService","QueryUtils",function(a,b,c,d,e,f,g){function h(a){e.convertStringToDates(a,["submitted","saisChanged"]),angular.extend(c.saisApplication,a)}c.auth=d.current.locals.auth,c.saisApplication={};var i=g.endpoint("/saisApplications"),j=d.current.locals.entity;angular.isDefined(j)&&h(j),c.confirm=function(){f.confirmDialog({prompt:"main.menu.reception.saisApplication.delete"},function(){var d=new i(c.saisApplication);d.$delete().then(function(){a.info("main.messages.delete.success"),b.url("/reception/saisApplication/search")})})}}]),angular.module("hitsaOis").controller("ReceptionSaisApplicationImportController",["$scope","Classifier","QueryUtils","message",function(a,b,c,d){a.statusList=b.queryForDropdown({mainClassCode:"SAIS_AVALDUSESTAATUS",order:"code"}),a.statusList.$promise.then(function(){b.setSelectedCodes(a.statusList,["SAIS_AVALDUSESTAATUS_T"])});var e=b.valuemapper({applicationStatus:"SAIS_AVALDUSESTAATUS"});a.importApplications=function(){if(a.applicationImportForm.$valid){var f=b.getSelectedCodes(a.statusList);a.criteria.status=f.length>0?f:void 0,c.endpoint("/saisApplications/importSais").save(a.criteria).$promise.then(function(b){e.objectmapper(b.successful),a.failed=b.failed,a.successful=b.successful,a.result=!0,d.info("reception.application.importFinished")})}else d.error("reception.application.form-has-errors")}}]),angular.module("hitsaOis").controller("ReceptionSaisApplicationListController",["$scope","QueryUtils","Classifier","dialogService","oisFileService","config","USER_ROLES","AuthService",function(a,b,c,d,e,f,g,h){function i(c){b.endpoint("/saisApplications/importCsv").save({file:c},function(b){d.showDialog("reception/reception.saisApplication.import.result.dialog.html",function(a){a.result=b},null,function(){a.loadData()},{clickOutsideToClose:!1})})}a.canEdit=h.isAuthorized(g.ROLE_OIGUS_M_TEEMAOIGUS_VASTUVOTT);var j=c.valuemapper({status:"SAIS_AVALDUSESTAATUS"});b.createQueryForm(a,"/saisApplications",{order:"applicationNr"},j.objectmapper),a.loadData(),a.importFromCsvFile=function(){d.showDialog("reception/reception.saisApplication.import.csv.file.dialog.html",null,function(a){var b=a.data;e.getFromLfFile(b.file[0],function(a){d.hide(),i(a)})})},a.csvSampleFileUrl=f.apiUrl+"/saisApplications/sample.csv",a.classifiersFileUrl=f.apiUrl+"/saisApplications/classifiers.csv"}]),angular.module("hitsaOis").config(["$routeProvider","USER_ROLES",function(a,b){a.when("/reception/saisAdmission/search",{templateUrl:"reception/reception.saisAdmission.list.html",controller:"ReceptionSaisAdmissionListController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}],clMapping:function(){return{studyForm:"OPPEVORM",language:"OPPEKEEL"}},params:function(){return{order:"code"}},url:function(){return"/saisAdmissions"}},data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_VASTUVOTT]}}).when("/reception/saisAdmission/:id/view",{templateUrl:"reception/reception.saisAdmission.view.html",controller:"ReceptionSaisAdmissionController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}],entity:["QueryUtils","$route",function(a,b){return a.endpoint("/saisAdmissions").get({id:b.current.params.id}).$promise}]},data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_VASTUVOTT]}}).when("/reception/saisAdmission/import",{templateUrl:"reception/reception.saisAdmission.import.html",controller:"ReceptionSaisAdmissionImportController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}]},data:{authorizedRoles:[b.ROLE_OIGUS_M_TEEMAOIGUS_ANDMEVAHETUS_SAIS]}}).when("/reception/saisApplication/search",{templateUrl:"reception/reception.saisApplication.list.html",controller:"ReceptionSaisApplicationListController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}]},data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_VASTUVOTT]}}).when("/reception/saisApplication/:id/view",{templateUrl:"reception/reception.saisApplication.view.html",controller:"ReceptionSaisApplicationController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}],entity:["QueryUtils","$route",function(a,b){return a.endpoint("/saisApplications").get({id:b.current.params.id}).$promise}]},data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_VASTUVOTT]}}).when("/reception/saisApplication/import",{templateUrl:"reception/reception.saisApplication.import.html",controller:"ReceptionSaisApplicationImportController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}]},data:{authorizedRoles:[b.ROLE_OIGUS_M_TEEMAOIGUS_ANDMEVAHETUS_SAIS]}}).when("/reception/saisAdmission/archive",{templateUrl:"reception/reception.saisAdmission.archive.html",controller:"ReceptionSaisAdmissionArchiveController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}]},data:{authorizedRoles:[b.ROLE_OIGUS_M_TEEMAOIGUS_VASTUVOTT]}})}]),function(){function a(a,c,d){for(var e=0;e<a.application.records.length;e++)if(a.application.records[e].isFormalLearning){a.application.records[e].data=[];var f=1;a.application.isVocational&&(f=Math.max(a.application.records[e].formalSubjectsOrModules.length,a.application.records[e].formalReplacedSubjectsOrModules.length));for(var g=0;f>g;g++){var h=a.application.records[e].formalSubjectsOrModules[g]?a.application.records[e].formalSubjectsOrModules[g]:{},i={};i=a.application.isVocational?a.application.records[e].formalReplacedSubjectsOrModules[g]?a.application.records[e].formalReplacedSubjectsOrModules[g]:{}:a.application.records[e].formalReplacedSubjectsOrModules,b(a,c,d,e,h,i)}}}function b(a,b,c,g,h,i){var j=[];a.application.isVocational?h.curriculumVersionOmodule?d(a,c,b,g,h,i):e(a,b,c,g,h,i,null,null):(j=f(a,c,h,i,a.application.records[g].id),a.application.records[g].data.push(j))}function c(a,b,c,d,e,f,h){var i=f.curriculumVersionOmodule.id;j(b,i).$promise.then(function(f){var i=g(a,b,c,e,a.application.records[d].id,h,f[0]);
a.application.records[d].data.push(i)})}function d(a,b,c,d,f,g){var h=f.curriculumVersionOmodule.id;j(c,h).$promise.then(function(h){e(a,c,b,d,f,g,h,null)})}function e(a,b,d,e,f,h,i,j){if(angular.equals(h,{})){var k=g(a,b,d,f,a.application.records[e].id,i,j);a.application.records[e].data.push(k)}else c(a,b,d,e,f,h,i)}function f(a,b,c,d,e){var f=[];return f.recordId=e,f.subjectOrModuleId=c.id,f.school=c.apelSchool?c.apelSchool:a.school,f.subject=c.subject?c.subject:{nameEn:c.nameEn,nameEt:c.nameEt},f.code=c.subjectCode,f.assessment=b.get(c.assessment),f.grade=b.get(c.grade),f.gradeDate=c.gradeDate,f.teachers=c.teachers,f.module=c.curriculumVersionHmodule,f.isOptional=c.isOptional,f.credits=c.credits,f.formalReplacedSubjectsOrModules=d,f.transfer=c.transfer,f}function g(a,b,c,d,e,f,g){var h=[];return h.recordId=e,h.subjectOrModuleId=d.id,d&&!angular.equals(d,{})&&(h.school=d.apelSchool?d.apelSchool:a.school),h.moduleId=d.id,h.module=f?f:{nameEt:d.nameEt,nameEn:d.nameEn},h.credits=d.credits,h.grade=c.get(d.grade),h.gradeDate=d.gradeDate,h.teachers=d.teachers,h.replacedModule=g,g?o(b,g).then(function(a){h.replacedCredits=a}):h.replacedCredits=null,h.transfer=d.transfer,h}function h(a,b,c){for(var d=0;d<a.application.records.length;d++)if(!a.application.records[d].isFormalLearning){a.application.records[d].data=[];for(var e=Math.max(a.application.records[d].informalExperiences.length,a.application.records[d].informalSubjectsOrModules.length),f=0;e>f;f++){var g=a.application.records[d].informalExperiences[f]?a.application.records[d].informalExperiences[f]:{},h=a.application.records[d].informalSubjectsOrModules[f]?a.application.records[d].informalSubjectsOrModules[f]:{};i(a,b,c,d,g,h)}}}function i(a,b,c,d,e,f){var g=[];f.curriculumVersionOmodule?j(b,f.curriculumVersionOmodule.id).$promise.then(function(g){k(a,b,c,e,f,g[0],d)}):f.curriculumVersionOmoduleTheme?b.endpoint("/occupationModule").get({id:f.curriculumVersionOmoduleTheme.module},function(g){j(b,g.id).$promise.then(function(g){k(a,b,c,e,f,g[0],d)})}):f.subject?(g=l(c,f,a.application.records[d].id),a.application.records[d].data.push(angular.extend({},e,g))):a.application.records[d].data.push(e)}function j(a,b){return a.endpoint("/autocomplete/curriculumversionomodulesandthemes").query({id:b})}function k(a,b,c,d,e,f,g){var h=[];h.recordId=a.application.records[g].id,h.moduleId=e.id,h.module=f,h.theme=e.curriculumVersionOmoduleTheme?e.curriculumVersionOmoduleTheme:null,h.isModule=e.curriculumVersionOmoduleTheme?!1:!0,h.schoolResultHours=h.isModule?n(e.curriculumVersionOmodule.themes):e.curriculumVersionOmoduleTheme.hours,h.grade=c.get(e.grade),h.outcomes=e.outcomes,h.skills=e.skills,h.transfer=e.transfer,h.isModule?o(b,f).then(function(b){h.ekap=b,a.application.records[g].data.push(angular.extend({},d,h))}):(h.ekap=e.curriculumVersionOmoduleTheme.credits,a.application.records[g].data.push(angular.extend({},d,h)))}function l(a,b,c){var d=[];return d.recordId=c,d.subjectId=b.id,d.subject=b.subject,d.code=b.subject.code,d.module=b.curriculumVersionHmodule,d.isOptional=m(d.subject.id,d.module),d.credits=b.subject.credits,d.grade=a.get(b.grade),d.skills=b.skills,d.transfer=b.transfer,d}function m(a,b){for(var c=0;c<b.subjects.length;c++)if(b.subjects[c].subjectId===a)return b.subjects[c].optional}function n(a){for(var b=0,c=0;c<a.length;c++)b+=a[c].hours;return b}function o(a,b){return a.endpoint("/autocomplete/curriculumversionomodules").query({id:b.id}).$promise.then(function(a){return a[0].credits})}function p(a,b){for(var c=0;c<b.length;c++)q(a,b[c])}function q(a,b){for(var c=0;c<b.formalSubjectsOrModules.length;c++)a.convertObjectToIdentifier(b.formalSubjectsOrModules[c],["apelSchool","subject","curriculumVersionHmodule","curriculumVersionOmodule"]);for(var d=0;d<b.formalReplacedSubjectsOrModules.length;d++)a.convertObjectToIdentifier(b.formalReplacedSubjectsOrModules[d],["subject","curriculumVersionOmodule"])}function r(a){for(var b=[],c=0;c<a.length;c++)b.push(a[c].subject.id);return b}angular.module("hitsaOis").controller("ApelApplicationEditController",["$scope","$route","QueryUtils","ArrayUtils","oisFileService","dialogService","message","$location","Classifier","DataUtils","config","$q",function(b,c,d,e,f,g,i,k,l,s,t,u){function v(a){b.application=a,"VOTA_STAATUS_E"===a.status&&b.auth.isAdmin()&&(b.committees=d.endpoint("/apelApplications/"+b.application.id+"/committees").query()),b.application.committeeId=b.application.committee?b.application.committee.id:null,b.canChangeTransferStatus=a.canChangeTransferStatus}function w(){var a=new E(b.application);a.$save().then(function(){i.info("main.messages.create.success"),k.path("/apelApplication/"+a.id+"/edit")})["catch"](angular.noop)}function x(a){return b.application.records[y(a)]}function y(a){for(var c=0;c<b.application.records.length;c++)if(b.application.records[c].id===a)return c}function z(a,b){for(var c=0;c<a.informalSubjectsOrModules.length;c++)if(a.informalSubjectsOrModules[c].id===b)return c}function A(a,b){for(var c=0;c<a.formalSubjectsOrModules.length;c++)if(a.formalSubjectsOrModules[c].id===b)return c}function B(a){for(var b=0;b<a.length;b++){for(var c=[],d=0;d<a[b].outcomes.length;d++){var e=a[b].outcomes[d];e.acquired&&c.push(e)}a[b].outcomes=c}}function C(a){for(var b=0;b<a.length;b++)a[b].grade&&a[b].grade.code&&(a[b].grade=a[b].grade.code)}function D(){for(var a=0;a<b.application.records.length;a++)for(var c=0;c<b.application.records[a].data.length;c++)if(b.application.records[a].data[c].transfer)return!0;return!1}var E=d.endpoint("/apelApplications");b.auth=c.current.locals.auth,b.application={},d.endpoint("/autocomplete/schools").query({id:b.auth.school.id}).$promise.then(function(a){b.school=a[0]}),b.$watch("application.status",function(){b.editing=!1,b.auth.isStudent()&&"VOTA_STAATUS_K"===b.application.status?b.editing=!0:!b.auth.isAdmin()||"VOTA_STAATUS_K"!==b.application.status&&"VOTA_STAATUS_E"!==b.application.status||(b.editing=!0)});var F=c.current.locals.entity;angular.isDefined(F)?v(F):b.application.status="VOTA_STAATUS_K",b.applicationPdfUrl=t.apiUrl+"/apelApplications/print/"+b.application.id+"/application.pdf",b.auth.isStudent()&&!b.application.student&&d.endpoint("/autocomplete/students?id="+b.auth.student).get({},function(a){a&&1===a.totalElements&&(b.application.student=a.content[0])}),b.$watch("application.student",function(){b.application.student&&d.endpoint("/students/"+b.application.student.id).search(function(c){b.application.person=c.person,b.application.curriculumVersion=c.curriculumVersion,b.application.isVocational=c.curriculumVersion.isVocational,angular.isDefined(b.application.id)?(h(b,d,l),a(b,d,l)):w()})}),b.changeInformalTransferStatus=function(a){var c=a.subjectId||a.moduleId,d=y(a.recordId),e=z(b.application.records[d],c),f=b.application.records[d].informalSubjectsOrModules[e].transfer;b.application.records[d].informalSubjectsOrModules[e].transfer=!f},b.editInformalLearning=function(a){var c="";c=b.application.curriculumVersion.isVocational?"apelApplication/templates/informal.learning.vocational.edit.dialog.html":"apelApplication/templates/informal.learning.higher.edit.dialog.html",g.showDialog(c,function(c){function f(a){for(var b=0;b<a.length;b++)u(function(){var c=a[b];c.isModule=c.curriculumVersionOmoduleTheme?!1:!0,c.grade=l.get(c.grade),j(d,c.curriculumVersionOmodule.id).$promise.then(function(a){var b=z(c.outcomes);if(c.module=a[0],c.hours=c.isModule?n(c.curriculumVersionOmodule.themes):c.curriculumVersionOmoduleTheme.hours,c.isModule)o(d,a[0]).then(function(a){c.EKAP=a,y(c.curriculumVersionOmodule.curriculumModule).then(function(a){w(a,b).then(function(a){c.outcomes=a})})});else{c.EKAP=c.curriculumVersionOmoduleTheme.credits;var e=c.curriculumVersionOmoduleTheme.outcomes;w(e,b).then(function(a){c.outcomes=a})}})})}function g(a){for(var b=0;b<a.length;b++){var c=a[b];c.credits=a[b].subject.credits}}function h(){c.record.informalExperiences.push({nameEt:null,placeTime:null,hours:null,documents:null,type:null})}function k(){c.modulesAndThemes=[],d.endpoint("/autocomplete/curriculumversionomodulesandthemes").query({student:c.student.id,curriculumVersion:c.curriculumVersionId}).$promise.then(function(a){a=q(a);for(var b=0;b<a.length;b++){c.modulesAndThemes.push({id:a[b].id,nameEt:a[b].nameEt,nameEn:a[b].nameEn,isModule:!0});for(var d=q(a[b].themes),e=0;e<d.length;e++)c.modulesAndThemes.push({id:d[e].id,nameEt:a[b].nameEt+"/"+d[e].nameEt,nameEn:a[b].nameEn+"/"+d[e].nameEn,isModule:!1,moduleId:a[b].id})}})}function p(){d.endpoint("/autocomplete/subjectsList").query({student:c.student.id,curriculumSubjects:!0,curriculumVersion:c.curriculumVersionId,withCredits:!0}).$promise.then(function(a){c.subjects=a})}function q(a){return"et"===b.currentLanguage()?a.sort(function(a,b){return a.nameEt.localeCompare(b.nameEt)}):a.sort(function(a,b){return a.nameEn.localeCompare(b.nameEn)}),a}function s(a){for(var b=[],c=0;c<a.length;c++)a[c].isModule&&b.push(a[c].curriculumVersionOmodule.id);return b}function t(a){for(var b=[],c=0;c<a.length;c++)a[c].isModule||b.push(a[c].curriculumVersionOmoduleTheme.id);return b}function w(a,b){for(var c=[],f=0;f<a.length;f++)c.push(d.endpoint("/occupationModule/outcome").get({id:a[f]}).$promise);return u.all(c).then(function(a){for(var c=[],d=0;d<a.length;d++)b&&e.contains(b,a[d].id)?c.push({curriculumModuleOutcomes:a[d],acquired:!0}):c.push({curriculumModuleOutcomes:a[d],acquired:!1});return c})}function y(a){return d.endpoint("/curriculumModule").get({id:a}).$promise.then(function(a){for(var b=[],c=0;c<a.outcomes.length;c++)b.push(a.outcomes[c].id);return b})}function z(a){for(var b=[],c=0;c<a.length;c++)b.push(a[c].curriculumModuleOutcomes.id);return b}function A(a,b,e,f){a.isModule?d.endpoint("/occupationModule").get({id:c.selectedModuleOrTheme.id},function(a){B(null,a,b,e,f)}):d.endpoint("/occupationModule/theme").get({id:c.selectedModuleOrTheme.id},function(a){var c=a;d.endpoint("/occupationModule").get({id:c.module},function(a){B(c,a,b,e,f)})})}function B(a,b,e,f,g){j(d,b.id).$promise.then(function(d){var h=l.get("KUTSEHINDAMINE_A"),i={module:d[0],isModule:c.selectedModuleOrTheme.isModule,curriculumVersionOmoduleTheme:a,curriculumVersionOmodule:b,hours:e,EKAP:f,grade:h,outcomes:g,skills:null};c.record.informalSubjectsOrModules.push(i)})}function C(a,b,d,e){var f=l.get("KORGHINDAMINE_A"),g={subject:a,curriculumVersionHmodule:b,isOptional:d,credits:e,skills:null,grade:f};c.record.informalSubjectsOrModules.push(g)}c.student=b.application.student,c.curriculumVersionId=b.application.curriculumVersion.id,c.isVocational=b.application.curriculumVersion.isVocational,a?(c.record=angular.copy(x(a)),c.isVocational?f(c.record.informalSubjectsOrModules):g(c.record.informalSubjectsOrModules)):(c.record={informalExperiences:[],informalSubjectsOrModules:[]},h()),c.isVocational?k():p(),c.selectedModuleOrThemeChanged=function(){c.selectedModuleOrTheme.isModule?e.contains(s(c.record.informalSubjectsOrModules),c.selectedModuleOrTheme.id)||d.endpoint("/occupationModule").get({id:c.selectedModuleOrTheme.id}).$promise.then(function(a){y(a.curriculumModule).then(function(b){w(b,null).then(function(b){var e=n(a.themes);o(d,a).then(function(a){var d=a;A(c.selectedModuleOrTheme,e,d,b)})})})}):e.contains(s(c.record.informalSubjectsOrModules),c.selectedModuleOrTheme.moduleId)||e.contains(t(c.record.informalSubjectsOrModules),c.selectedModuleOrTheme.id)||d.endpoint("/occupationModule/theme").get({id:c.selectedModuleOrTheme.id}).$promise.then(function(a){w(a.outcomes,null).then(function(b){A(c.selectedModuleOrTheme,a.hours,a.credits,b)})})},c.addSelectedSubject=function(){if(!e.contains(r(c.record.informalSubjectsOrModules),c.selectedSubject.id)){var a=c.selectedSubject.id;d.endpoint("/subject").get({id:a}).$promise.then(function(b){var c=b.credits;d.endpoint("/apelApplications/subjectModule/"+b.id).search().$promise.then(function(d){var e=m(a,d);C(b,d,e,c)})})}},c.submitInformalLearning=function(){c.record.informalExperiences.length<=0?i.error("apel.error.atLeastOneOtherInformalLearning"):c.record.informalSubjectsOrModules.length<=0?c.isVocational?i.error("apel.error.atLeastOneSubstitutableModule"):i.error("apel.error.atLeastOneSubstitutableSubject"):c.submit()},c.removeSubtitutableModuleTheme=function(a){e.remove(c.record.informalSubjectsOrModules,a)},c.addNewInformalExperienceRow=function(){h()},c.removeInformalExperienceRow=function(a){e.remove(c.record.informalExperiences,a)},c["delete"]=function(){var a=d.endpoint("/apelApplications/"+b.application.id+"/record");new a(c.record).$delete().then(function(a){i.info("apel.messages.informalLearningRemoved"),v(a)})["catch"](angular.noop),c.cancel()}},function(a){b.application.curriculumVersion.isVocational&&B(a.record.informalSubjectsOrModules),C(a.record.informalSubjectsOrModules),a.record.isFormalLearning=!1;var c=d.endpoint("/apelApplications/"+b.application.id+"/record"),e=new c(a.record);angular.isDefined(a.record.id)?e.$update().then(function(a){i.info("main.messages.create.success"),v(a)})["catch"](angular.noop):e.$save().then(function(a){i.info("main.messages.create.success"),v(a)})["catch"](angular.noop)})},b.changeFormalTransferStatus=function(a){var c=a.subjectOrModuleId,d=y(a.recordId),e=A(b.application.records[d],c),f=b.application.records[d].formalSubjectsOrModules[e].transfer;b.application.records[d].formalSubjectsOrModules[e].transfer=!f},b.editFormalLearning=function(a){var c,f="";b.application.curriculumVersion.isVocational?(f="apelApplication/templates/formal.learning.vocational.edit.dialog.html",c=l.valuemapper({grade:"KUTSEHINDAMINE"})):(f="apelApplication/templates/formal.learning.higher.edit.dialog.html",c=l.valuemapper({grade:"KORGHINDAMINE"})),g.showDialog(f,function(f){function g(){f.formState.isMySchool=!1,f.formState.isNewSchool=!1,f.grades=null,f.record.assessment=null,f.record.curriculumVersionOmodule=null,f.record.newTransferableSubjectOrModule={isNew:!0,newApelSchool:null,type:"VOTA_AINE_LIIK_M",assessment:null},C(f.record.newTransferableSubjectOrModule.type)}function h(a){for(var b=0;b<a.length;b++)u(function(){var c=a[b];c.curriculumVersionOmodule&&j(d,c.curriculumVersionOmodule.id).$promise.then(function(a){c.module=a[0]}),c.grade.code||(c.grade=l.get(a[b].grade))})}function k(a){f.curriculumModules.$promise.then(function(){for(var b=0;b<a.length;b++)for(var c=0;c<f.curriculumModules.length;c++)f.curriculumModules[c].id===a[b].curriculumVersionOmodule.id&&(f.curriculumModules[c].substitutable=!0)})}function m(a){"VOTA_AINE_LIIK_O"===a?d.endpoint("/autocomplete/curriculumversionomodulesandthemes").query({student:f.student.id,curriculumModules:!0,curriculumVersion:f.curriculumVersionId}).$promise.then(function(a){f.transferableModules=a,n()}):"VOTA_AINE_LIIK_M"===a?d.endpoint("/autocomplete/curriculumversionomodulesandthemes").query({student:f.student.id,curriculumModules:!1,curriculumVersion:f.curriculumVersionId,school:f.auth.school.id}).$promise.then(function(a){f.transferableModules=a,n()}):"VOTA_AINE_LIIK_V"===a&&d.endpoint("/autocomplete/curriculumversionomodulesandthemes").query({student:f.student.id,otherStudents:!0,school:f.auth.school.id}).$promise.then(function(a){f.transferableModules=a,n()})}function n(){var a=!1;if(f.record.newTransferableSubjectOrModule&&f.record.newTransferableSubjectOrModule.curriculumVersionOmodule&&null!==f.transferableModules)for(var b=0;b<f.transferableModules.length;b++)f.transferableModules[b].id===f.record.newTransferableSubjectOrModule.curriculumVersionOmodule.id&&(a=!0);a||(f.record.newTransferableSubjectOrModule.curriculumVersionOmodule=null)}function o(a){"VOTA_AINE_LIIK_O"===a?d.endpoint("/autocomplete/subjectsList").query({student:f.student.id,curriculumSubjects:!0,curriculumVersion:f.curriculumVersionId,withCredits:!1}).$promise.then(function(a){f.transferableSubjects=a,p()}):"VOTA_AINE_LIIK_M"===a?d.endpoint("/autocomplete/subjectsList").query({student:f.student.id,curriculumSubjects:!1,curriculumVersion:f.curriculumVersionId,withCredits:!1}).$promise.then(function(a){f.transferableSubjects=a,p()}):"VOTA_AINE_LIIK_V"===a&&d.endpoint("/autocomplete/subjectsList").query({student:f.student.id,otherStudents:!0,withCredits:!1}).$promise.then(function(a){f.transferableSubjects=a,p()})}function p(){var a=!1;if(f.record.newTransferableSubjectOrModule&&f.record.subject&&null!==f.transferableSubjects)for(var b=0;b<f.transferableSubjects.length;b++)f.transferableSubjects[b].id===f.record.subject.id&&(a=!0);a||(f.record.subject=null)}function t(a){d.endpoint("/subject").get({id:a},function(a){f.record.newTransferableSubjectOrModule.subject=a,f.record.newTransferableSubjectOrModule.subjectCode=a.code,f.record.newTransferableSubjectOrModule.credits=a.credits,l.get(a.assessment).$promise.then(function(a){f.record.newTransferableSubjectOrModule.assessment=a.code,f.record.assessment=a,B(a.code)})})}function w(a){a&&a.gradeCode&&(f.record.newTransferableSubjectOrModule.grade=a.gradeCode,f.record.newTransferableSubjectOrModule.gradeDate=a.gradeDate,f.record.newTransferableSubjectOrModule.teachers=a.teachers)}function y(a){d.endpoint("/autocomplete/curriculumversionomodules").query({id:a.id}).$promise.then(function(a){f.record.newTransferableSubjectOrModule.curriculumVersionOmodule=a[0],f.record.curriculumVersionOmodule=a[0],f.record.newTransferableSubjectOrModule.credits=a[0].credits,l.get(a[0].assessment).$promise.then(function(a){f.record.newTransferableSubjectOrModule&&(f.record.newTransferableSubjectOrModule.assessment=a.code,B(a.code)),f.record.assessment=a})})}function z(a){a&&a.gradeCode&&(f.record.newTransferableSubjectOrModule.grade=a.gradeCode,f.record.newTransferableSubjectOrModule.gradeDate=a.gradeDate,f.record.newTransferableSubjectOrModule.teachers=a.teachers)}function B(a){f.isVocational?"KUTSEHINDAMISVIIS_M"===a?f.grades=l.queryForDropdown({mainClassCode:"KUTSEHINDAMINE",filterValues:["KUTSEHINDAMINE_5","KUTSEHINDAMINE_4","KUTSEHINDAMINE_3","KUTSEHINDAMINE_2","KUTSEHINDAMINE_1","KUTSEHINDAMINE_MA","KUTSEHINDAMINE_X"]}):"KUTSEHINDAMISVIIS_E"===a&&(f.grades=l.queryForDropdown({mainClassCode:"KUTSEHINDAMINE",filterValues:["KUTSEHINDAMINE_1","KUTSEHINDAMINE_2","KUTSEHINDAMINE_MA","KUTSEHINDAMINE_A","KUTSEHINDAMINE_X"]})):"HINDAMISVIIS_H"===a||"HINDAMISVIIS_E"===a?f.grades=l.queryForDropdown({mainClassCode:"KORGHINDAMINE",filterValues:["KORGHINDAMINE_0","KORGHINDAMINE_A","KORGHINDAMINE_M","KORGHINDAMINE_MI"]}):"HINDAMISVIIS_A"===a&&(f.grades=l.queryForDropdown({mainClassCode:"KORGHINDAMINE",filterValues:["KORGHINDAMINE_5","KORGHINDAMINE_4","KORGHINDAMINE_3","KORGHINDAMINE_2","KORGHINDAMINE_1","KORGHINDAMINE_0","KORGHINDAMINE_M","KORGHINDAMINE_MI"]}))}function C(a){f.isVocational?m(a):o(a)}function D(a){for(var b=0;b<f.record.formalReplacedSubjectsOrModules.length;b++)if(f.record.formalReplacedSubjectsOrModules[b].curriculumVersionOmodule.id===a)return b;return null}function E(){var a=F(f.record.formalSubjectsOrModules),b=G(f.record.formalReplacedSubjectsOrModules);return a>=b?!0:!1}function F(a){for(var b=0,c=0;c<a.length;c++)b+=a[c].credits;return b}function G(a){for(var b=0,c=0;c<a.length;c++)j(d,a[c].curriculumVersionOmodule.id).$promise.then(function(a){b+=a[0].credits});return b}function H(){var a=[];angular.forEach(f.record.formalSubjectsOrModules,function(b){a.push(b)}),f.record.formalSubjectsOrModules=a}f.auth=b.auth,f.formState={},f.student=b.application.student,f.currentDate=new Date,f.curriculumVersionId=b.application.curriculumVersion.id,f.isVocational=b.application.curriculumVersion.isVocational,f.apelSchools=d.endpoint("/autocomplete/apelschools").query(),f.isVocational?f.curriculumModules=d.endpoint("/autocomplete/curriculumversionomodules").query({student:f.student.id,curriculumVersion:f.curriculumVersionId}):(f.subjects=d.endpoint("/autocomplete/subjectsList").query({student:f.student.id,curriculumSubjects:!0,curriculumVersion:f.curriculumVersionId,withCredits:!0}),f.curriculumModules=d.endpoint("/autocomplete/curriculumversionhmodules").query({curriculumVersion:f.curriculumVersionId})),a?(f.record=angular.copy(x(a)),f.isVocational?(h(f.record.formalSubjectsOrModules),k(f.record.formalReplacedSubjectsOrModules)):(f.record.newTransferableSubjectOrModule=f.record.formalSubjectsOrModules[0],f.record.subject=f.record.newTransferableSubjectOrModule.subject,f.record.nameEt=f.record.newTransferableSubjectOrModule.nameEt,f.record.nameEn=f.record.newTransferableSubjectOrModule.nameEn,f.record.apelSchool=f.record.newTransferableSubjectOrModule.apelSchool,f.formState.isMySchool=f.record.newTransferableSubjectOrModule.isMySchool)):(f.record={formalSubjectsOrModules:[],formalReplacedSubjectsOrModules:[]},g()),f.$watch("formState.isMySchool",function(){if(f.record.school=b.school,f.record.newTransferableSubjectOrModule&&(f.record.newTransferableSubjectOrModule.isMySchool=f.formState.isMySchool),a){if(f.record.newTransferableSubjectOrModule){var c=angular.copy(f.record.newTransferableSubjectOrModule);f.formState.isNewSchool=c.isNewSchool,f.record.newTransferableSubjectOrModule={id:c.id,isNew:c.isNew,isNewSchool:c.isNewSchool,isMySchool:c.isMySchool,type:c.type,grade:c.grade,gradeDate:c.gradeDate,teachers:c.teachers,assessment:c.assessment,credits:c.credits,subjectCode:c.subjectCode,curriculumVersionHmodule:c.curriculumVersionHmodule,isOptional:c.isOptional},B(f.record.newTransferableSubjectOrModule.assessment),c.isMySchool===!0?c.subject?(o(c.type),t(c.subject.id)):f.record.subject?(o(c.type),t(f.record.subject.id)):c.curriculumVersionOmodule?(m(c.type),y(c.curriculumVersionOmodule)):f.record.curriculumVersionOmodule&&(m(c.type),y(f.record.curriculumVersionOmodule)):(c.isNewSchool?f.record.newTransferableSubjectOrModule.newApelSchool=c.newApelSchool:f.record.newTransferableSubjectOrModule.apelSchool=f.record.apelSchool,f.record.newTransferableSubjectOrModule.nameEt=f.record.nameEt,f.record.newTransferableSubjectOrModule.nameEn=f.record.nameEn,f.record.newTransferableSubjectOrModule.type="VOTA_AINE_LIIK_M")}}else f.record.newTransferableSubjectOrModule={},f.record.newTransferableSubjectOrModule.isNew=!0,f.record.newTransferableSubjectOrModule.apelSchool=null,f.formState.isMySchool?f.record.newTransferableSubjectOrModule.type="VOTA_AINE_LIIK_V":f.record.newTransferableSubjectOrModule.type="VOTA_AINE_LIIK_M",C(f.record.newTransferableSubjectOrModule.type)}),f.typeChanged=function(a){C(a)},f.gradeValue=function(a){var d=c.objectmapper({grade:a}).grade;return d?b.auth.school.letterGrades?d.value2:d.value:void 0},f.newSchoolCountryChanged=function(a){"RIIK_EST"===a?f.newSchoolEst=!0:f.newSchoolEst=!1},f.ehisSchoolChanged=function(a){l.get(a).$promise.then(function(a){f.record.newTransferableSubjectOrModule.newApelSchool.nameEt=a.nameEt,f.record.newTransferableSubjectOrModule.newApelSchool.nameEn=a.nameEn})},f.apelSchoolChanged=function(a){d.endpoint("/apelSchool").get({id:a.id},function(a){l.get(a.country).$promise.then(function(a){f.record.newTransferableSubjectOrModule.country=a})})},f.subjectChanged=function(a){a&&t(a.id),w(a)},f.moduleChanged=function(a){a&&f.record.curriculumVersionOmodule?a.id!==f.record.curriculumVersionOmodule.id&&y(a):a&&y(a),z(a)},f.assessmentTypeChanged=function(a){f.record.newTransferableSubjectOrModule.grade=null,B(a)},f.addNewSchool=function(){f.formState.isNewSchool=!0,f.record.newTransferableSubjectOrModule&&f.record.newTransferableSubjectOrModule.apelSchool&&(f.record.newTransferableSubjectOrModule.apelSchool=null)},f.addNewTransferableModule=function(){g()},f.addTransferableModule=function(a){f.dialogForm.$setSubmitted(),f.dialogForm.$valid&&(f.record.newTransferableSubjectOrModule=null,a.isMySchool=f.formState.isMySchool,a.isNewSchool=f.formState.isNewSchool,a.isNew=!1,a.isMySchool?a.module=a.curriculumVersionOmodule:a.type="VOTA_AINE_LIIK_M",l.get(a.grade).$promise.then(function(b){a.grade=b,f.record.formalSubjectsOrModules.push(a)}))},f.addSelectedSubject=function(){e.contains(r(f.record.formalReplacedSubjectsOrModules),f.selectedSubject.id)||f.record.formalReplacedSubjectsOrModules.push({subject:f.selectedSubject})},f.removeSubtitutableSubject=function(a){e.remove(f.record.formalReplacedSubjectsOrModules,a)},f.editTransferableModule=function(a){f.record.newTransferableSubjectOrModule=angular.copy(f.record.formalSubjectsOrModules[a]),f.formState.isMySchool=f.record.formalSubjectsOrModules[a].isMySchool,f.formState.isNewSchool=f.record.formalSubjectsOrModules[a].isNewSchool,f.record.apelSchool=f.record.formalSubjectsOrModules[a].apelSchool,f.record.assessment=l.get(f.record.newTransferableSubjectOrModule.assessment),f.record.curriculumVersionOmodule=f.record.newTransferableSubjectOrModule.curriculumVersionOmodule,f.record.nameEt=f.record.formalSubjectsOrModules[a].nameEt,f.record.nameEn=f.record.formalSubjectsOrModules[a].nameEn,f.record.newTransferableSubjectOrModule.curriculumVersionOmodule=f.record.formalSubjectsOrModules[a].curriculumVersionOmodule,f.record.newTransferableSubjectOrModule.grade=f.record.newTransferableSubjectOrModule.grade.code,B(f.record.newTransferableSubjectOrModule.assessment),C(f.record.newTransferableSubjectOrModule.type)},f.changeTransferableModule=function(a){if(f.dialogForm.$setSubmitted(),f.dialogForm.$valid){var b=A(f.record,a.id);f.record.formalSubjectsOrModules[b]=a,f.record.newTransferableSubjectOrModule=null,h(f.record.formalSubjectsOrModules)}},f.deleteTransferableModule=function(a){if(a){var b=A(f.record,a.id);b>=0?f.record.formalSubjectsOrModules.splice(b,1):f.record.newTransferableSubjectOrModule=null}f.record.newTransferableSubjectOrModule=null},f.substitutableModuleChanged=function(a){var b=null;a.substitutable?(b=D(a.id),null===b&&f.record.formalReplacedSubjectsOrModules.push({curriculumVersionOmodule:a})):(b=D(a.id),f.record.formalReplacedSubjectsOrModules.splice(b,1))},f.submitVocationalFormalLearning=function(){f.record.formalSubjectsOrModules.length<=0?i.error("apel.error.atLeastOneTransferableModule"):f.record.formalReplacedSubjectsOrModules.length<=0?i.error("apel.error.atLeastOneSubstitutableModule"):E()?(H(),q(s,f.record),f.submit()):i.error("apel.error.thereMustBeMoreTransferableCreditsThanSubstitutableCredits")},f.submitHigherFormalLearning=function(){f.record.formalReplacedSubjectsOrModules.length<=0?i.error("apel.error.atLeastOneSubstitutableSubject"):(f.record.formalSubjectsOrModules[0]=f.record.newTransferableSubjectOrModule,f.record.formalSubjectsOrModules[0].isMySchool=f.formState.isMySchool,f.record.formalSubjectsOrModules[0].isMySchool||(f.record.formalSubjectsOrModules[0].type="VOTA_AINE_LIIK_M"),H(),q(s,f.record),f.submit())},f["delete"]=function(){var a=d.endpoint("/apelApplications/"+b.application.id+"/record");new a(f.record).$delete().then(function(a){i.info("apel.messages.formalLearningRemoved"),v(a)})["catch"](angular.noop),f.cancel()}},function(a){C(a.record.formalSubjectsOrModules),a.record.isFormalLearning=!0;var c=d.endpoint("/apelApplications/"+b.application.id+"/record"),e=new c(a.record);angular.isDefined(a.record.id)?e.$update().then(function(a){i.info("main.messages.create.success"),v(a)})["catch"](angular.noop):e.$save().then(function(a){i.info("main.messages.create.success"),v(a)})["catch"](angular.noop)})};var G=d.endpoint("/apelApplications/"+b.application.id+"/file");b.openAddFileDialog=function(){g.showDialog("components/file.add.dialog.html",function(a){a.addedFiles=b.application.files},function(a){var c=a.data;f.getFromLfFile(c.file[0],function(a){c.oisFile=a;var d=new G(c);d.$save().then(function(a){i.info("main.messages.create.success"),b.application.files.push(a)})["catch"](angular.noop)})})},b.openEditCommentDialog=function(a){g.showDialog("apelApplication/templates/comment.edit.dialog.html",function(b){a&&(b.comment=angular.copy(a))},function(a){var c=d.endpoint("/apelApplications/"+b.application.id+"/comment"),e=new c(a.comment);angular.isDefined(a.comment.id)?e.$update().then(function(a){i.info("main.messages.create.success"),v(a)})["catch"](angular.noop):e.$save().then(function(a){i.info("main.messages.create.success"),v(a)})["catch"](angular.noop)})},b.deleteFile=function(a){g.confirmDialog({prompt:"apel.deleteFileConfirm"},function(){var c=new G(a);c.$delete().then(function(){i.info("main.messages.delete.success"),e.remove(b.application.files,a)})["catch"](angular.noop)})},b.getUrl=f.getUrl,b.save=function(){p(s,b.application.records);var a=new E(b.application);a.$update().then(function(){i.info("main.messages.create.success"),v(a),b.apelApplicationForm.$setPristine()})["catch"](angular.noop)},b.submit=function(){g.confirmDialog({prompt:"apel.submitConfirm"},function(){d.endpoint("/apelApplications/"+b.application.id+"/submit").put({},function(a){i.info("apel.messages.submitted"),v(a)})})},b.sendBackToCreation=function(){"VOTA_STAATUS_V"===b.application.status?g.showDialog("apelApplication/templates/reason.dialog.html",function(a){a.sendBackToCreation=!0,a.committee=!0},function(a){d.endpoint("/apelApplications/"+b.application.id+"/sendBackToCreation/").put({addInfo:a.reason},function(a){i.info("apel.messages.sentBackToCreation"),v(a)})}):g.confirmDialog({prompt:"apel.sendBackToCreationConfirm"},function(){d.endpoint("/apelApplications/"+b.application.id+"/sendBackToCreation/").put({},function(a){i.info("apel.messages.sentBackToCreation"),v(a)})})},b.sendToConfirm=function(){p(s,b.application.records),"VOTA_STAATUS_V"===b.application.status?g.showDialog("apelApplication/templates/reason.dialog.html",function(a){a.sendToConfirm=!0,a.committee=!0},function(a){d.endpoint("/apelApplications/"+b.application.id+"/sendToConfirm/").put({student:b.application.student,isVocational:b.application.isVocational,records:b.application.records,committeeId:b.application.committeeId,addInfo:a.reason},function(a){i.info("apel.messages.sentToConfirm"),v(a)})}):g.confirmDialog({prompt:"apel.sendToConfirmConfirm"},function(){d.endpoint("/apelApplications/"+b.application.id+"/sendToConfirm/").put({student:b.application.student,isVocational:b.application.isVocational,committeeId:b.application.committeeId,records:b.application.records},function(a){i.info("apel.messages.sentToConfirm"),v(a)})})},b.sendToCommittee=function(){p(s,b.application.records),g.confirmDialog({prompt:"apel.sendToCommitteeConfirm"},function(){d.endpoint("/apelApplications/"+b.application.id+"/sendToCommittee/").put({student:b.application.student,isVocational:b.application.isVocational,records:b.application.records,committeeId:b.application.committeeId},function(a){i.info("apel.messages.sentToCommittee"),v(a)})})},b.confirm=function(){D()?g.confirmDialog({prompt:"apel.confirmConfirm"},function(){d.endpoint("/apelApplications/"+b.application.id+"/confirm/").put({},function(a){i.info("apel.messages.confirmed"),v(a)})}):i.error("apel.error.atLeastOneLearningMustBeTransferred")},b.sendBack=function(){g.confirmDialog({prompt:"apel.sendBackConfirm"},function(){d.endpoint("/apelApplications/"+b.application.id+"/sendBack/").put({},function(a){i.info("apel.messages.sentBack"),v(a)})})},b.reject=function(){g.showDialog("apelApplication/templates/reason.dialog.html",function(a){a.rejection=!0,a.committee="VOTA_STAATUS_V"===b.application.status},function(a){d.endpoint("/apelApplications/"+b.application.id+"/reject/").put({addInfo:a.reason},function(a){i.info("apel.messages.rejected"),v(a)})})},b.removeConfirmation=function(){g.confirmDialog({prompt:"apel.removeConfirmationConfirm"},function(){d.endpoint("/apelApplications/"+b.application.id+"/removeConfirmation/").put({},function(a){i.info("apel.messages.removedConfirmation"),v(a)})})},b["delete"]=function(){g.confirmDialog({prompt:"apel.deleteConfirm"},function(){var a=new E(b.application);a.$delete().then(function(){i.info("main.messages.delete.success"),k.path("/apelApplication")})["catch"](angular.noop)})}}]).controller("ApelApplicationViewController",["$scope","$route","QueryUtils","oisFileService","Classifier","ArrayUtils","DataUtils","dialogService","message","config",function(b,c,d,e,f,g,i,j,k,l){
function m(c){b.application=c,d.endpoint("/students/"+b.application.student.id).search(function(c){b.application.person=c.person,b.application.curriculumVersion=c.curriculumVersion,b.application.isVocational=c.curriculumVersion.isVocational,b.application.committeeId=b.application.committee?b.application.committee.id:null,h(b,d,f),a(b,d,f)})}function n(){for(var a=0;a<b.application.records.length;a++)for(var c=0;c<b.application.records[a].data.length;c++)if(b.application.records[a].data[c].transfer)return!0;return!1}b.applicationId=c.current.params.id,b.auth=c.current.locals.auth,b.application={},b.formState={},d.endpoint("/autocomplete/schools").query({id:b.auth.school.id}).$promise.then(function(a){b.school=a[0]}),b.getUrl=e.getUrl;var o=c.current.locals.entity;angular.isDefined(o)?m(o):(b.application.insertedBy=b.auth.fullname,b.application.inserted=new Date,b.application.status="VOTA_STAATUS_K"),b.applicationPdfUrl=l.apiUrl+"/apelApplications/print/"+b.application.id+"/application.pdf",b.removeConfirmation=function(){j.confirmDialog({prompt:"apel.removeConfirmationConfirm"},function(){d.endpoint("/apelApplications/"+b.application.id+"/removeConfirmation/").put({},function(a){k.info("apel.messages.removedConfirmation"),m(a)})})},b.sendBackToCreation=function(){"VOTA_STAATUS_V"===b.application.status?j.showDialog("apelApplication/templates/reason.dialog.html",function(a){a.sendBackToCreation=!0,a.committee=!0},function(a){d.endpoint("/apelApplications/"+b.application.id+"/sendBackToCreation/").put({addInfo:a.reason},function(a){k.info("apel.messages.sentBackToCreation"),m(a)})}):j.confirmDialog({prompt:"apel.sendBackToCreationConfirm"},function(){d.endpoint("/apelApplications/"+b.application.id+"/sendBackToCreation/").put({},function(a){k.info("apel.messages.sentBackToCreation"),m(a)})})},b.sendToConfirm=function(){p(i,b.application.records),"VOTA_STAATUS_V"===b.application.status?j.showDialog("apelApplication/templates/reason.dialog.html",function(a){a.sendToConfirm=!0,a.committee=!0},function(a){d.endpoint("/apelApplications/"+b.application.id+"/sendToConfirm/").put({student:b.application.student,isVocational:b.application.isVocational,records:b.application.records,committeeId:b.application.committeeId,addInfo:a.reason},function(a){k.info("apel.messages.sentToConfirm"),m(a)})}):j.confirmDialog({prompt:"apel.sendToConfirmConfirm"},function(){d.endpoint("/apelApplications/"+b.application.id+"/sendToConfirm/").put({student:b.application.student,isVocational:b.application.isVocational,records:b.application.records,committeeId:b.application.committeeId},function(a){k.info("apel.messages.sentToConfirm"),m(a)})})},b.sendToCommittee=function(){p(i,b.application.records),j.confirmDialog({prompt:"apel.sendToCommitteeConfirm"},function(){d.endpoint("/apelApplications/"+b.application.id+"/sendToCommittee/").put({student:b.application.student,isVocational:b.application.isVocational,records:b.application.records},function(a){k.info("apel.messages.sentToCommittee"),m(a)})})},b.confirm=function(){n()?j.confirmDialog({prompt:"apel.confirmConfirm"},function(){d.endpoint("/apelApplications/"+b.application.id+"/confirm/").put({},function(a){k.info("apel.messages.confirmed"),m(a)})}):k.error("apel.error.atLeastOneLearningMustBeTransferred")},b.sendBack=function(){j.confirmDialog({prompt:"apel.sendBackConfirm"},function(){d.endpoint("/apelApplications/"+b.application.id+"/sendBack/").put({},function(a){k.info("apel.messages.sentBack"),m(a)})})},b.reject=function(){j.showDialog("apelApplication/templates/reason.dialog.html",function(a){a.rejection=!0,a.committee="VOTA_STAATUS_V"===b.application.status},function(a){d.endpoint("/apelApplications/"+b.application.id+"/reject/").put({addInfo:a.reason},function(a){m(a)})})},b.removeConfirmation=function(){j.confirmDialog({prompt:"apel.removeConfirmationConfirm"},function(){d.endpoint("/apelApplications/"+b.application.id+"/removeConfirmation/").put({},function(a){k.info("apel.messages.removedConfirmation"),m(a)})})}}])}(),angular.module("hitsaOis").controller("ApelApplicationListController",["$scope","$route","ArrayUtils","QueryUtils","Classifier","$q",function(a,b,c,d,e,f){a.auth=b.current.locals.auth;var g=e.valuemapper({status:"VOTA_STAATUS"});d.createQueryForm(a,"/apelApplications",{order:"student_lastname, student_firstname, inserted desc"}),a.auth.isStudent()&&(a.afterLoadData=function(b){a.tabledata.content=b.content,a.tabledata.totalElements=b.totalElements}),!a.criteria.status&&a.auth.isAdmin()&&(a.criteria.status=["VOTA_STAATUS_E"],c.contains(a.auth.authorizedRoles,"ROLE_OIGUS_M_TEEMAOIGUS_VOTAKOM")&&a.criteria.status.push("VOTA_STAATUS_V")),f.all(g.promises).then(a.loadData),a.$watch("criteria.studentObject",function(){a.criteria.student=a.criteria.studentObject?a.criteria.studentObject.id:null}),a.$watch("criteria.committeeObject",function(){a.criteria.committee=a.criteria.committeeObject?a.criteria.committeeObject.id:null})}]),angular.module("hitsaOis").controller("ApelSchoolListController",["$scope","QueryUtils","$q",function(a,b,c){b.createQueryForm(a,"/apelSchool",{order:"en"===a.currentLanguage()?"nameEn":"nameEt"}),c.all().then(a.loadData)}]).controller("ApelSchoolEditController",["$scope","$route","dialogService","message","QueryUtils","$location","Classifier",function(a,b,c,d,e,f,g){var h=b.current.params.id,i="/apelSchool",j=e.endpoint(i);h?a.apelSchool=j.get({id:h}):a.apelSchool=new j,a.update=function(){return a.apelSchoolForm.$setSubmitted(),a.apelSchoolForm.$valid?void(a.apelSchool.id?a.apelSchool.$update().then(d.updateSuccess):a.apelSchool.$save().then(function(){d.info("main.messages.create.success"),f.url("apelSchools/"+a.apelSchool.id+"/edit")})):void d.error("main.messages.form-has-errors")},a.ehisSchoolChanged=function(b){g.get(b).$promise.then(function(b){a.apelSchool.nameEt=b.nameEt,a.apelSchool.nameEn=b.nameEn})},a["delete"]=function(){c.confirmDialog({prompt:"apel.apelSchool.deleteConfirm"},function(){a.apelSchool.$delete().then(function(){d.info("main.messages.delete.success"),f.url("/apelSchools")})})}}]),angular.module("hitsaOis").config(["$routeProvider","USER_ROLES",function(a,b){a.when("/apelApplication",{templateUrl:"apelApplication/apel.application.list.html",controller:"ApelApplicationListController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}]},data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_VOTA,b.ROLE_OIGUS_V_TEEMAOIGUS_VOTAKOM]}}).when("/apelApplication/new",{templateUrl:"apelApplication/apel.application.edit.html",controller:"ApelApplicationEditController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}],isCreate:function(){return!0}},data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_VOTA]}}).when("/apelApplication/:id/edit",{templateUrl:"apelApplication/apel.application.edit.html",controller:"ApelApplicationEditController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}],entity:["QueryUtils","$route",function(a,b){return a.endpoint("/apelApplications").get({id:b.current.params.id}).$promise}]},data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_VOTA,b.ROLE_OIGUS_M_TEEMAOIGUS_VOTAKOM]}}).when("/apelApplication/:id/view",{templateUrl:"apelApplication/apel.application.view.html",controller:"ApelApplicationViewController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}],entity:["QueryUtils","$route",function(a,b){return a.endpoint("/apelApplications").get({id:b.current.params.id}).$promise}]},data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_VOTA,b.ROLE_OIGUS_V_TEEMAOIGUS_VOTAKOM]}}).when("/apelSchools",{templateUrl:"apelApplication/apel.school.list.html",controller:"ApelSchoolListController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}]},data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_VOTA]}}).when("/apelSchools/:id/edit",{templateUrl:"apelApplication/apel.school.edit.html",controller:"ApelSchoolEditController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}]},data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_VOTA]}}).when("/apelSchools/new",{templateUrl:"apelApplication/apel.school.edit.html",controller:"ApelSchoolEditController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}]},data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_VOTA]}})}]),angular.module("hitsaOis").controller("ReportStudentController",["$q","$scope","$route","Classifier","QueryUtils",function(a,b,c,d,e){function f(a){return h.objectmapper(a),{certificateNr:a.certificateNr,occupation:a.specialityCode||a.partOccupationCode||a.occupationCode}}function g(a){i.objectmapper(a);for(var b=0,c=a.length;c>b;b++)a[b].occupationCertificates=(a[b].occupationCertificates||[]).map(f)}b.auth=c.current.locals.auth;var h=d.valuemapper({occupationCode:"KUTSE",partOccupationCode:"OSAKUTSE",specialityCode:"SPETSKUTSE"}),i=d.valuemapper({fin:"FINALLIKAS",finSpecific:"FINTAPSUSTUS",language:"OPPEKEEL",studyLevel:"OPPEASTE",studyForm:"OPPEVORM",studyLoad:"OPPEKOORMUS",status:"OPPURSTAATUS"});e.createQueryForm(b,"/reports/students",{order:"p.lastname,p.firstname",isHigher:b.auth.higher},g);var j=b.clearCriteria;b.clearCriteria=function(){j(),b.criteria.isHigher=b.auth.higher},b.formState={studentGroups:e.endpoint("/autocomplete/studentgroups").query(),filterStudentGroups:[],xlsUrl:"reports/students/students.xls"},b.curriculumVersionChanged=function(){b.formState.filterStudentGroups=[],b.criteria.curriculumVersion&&b.formState.studentGroups.forEach(function(a){a.curriculumVersion!==b.criteria.curriculumVersion.id&&b.formState.filterStudentGroups.push(a.id)})},a.all(h.promises).then(function(){a.all(i.promises).then(b.loadData)})}]).controller("ReportStudentStatisticsController",["$scope","Classifier","QueryUtils","message",function(a,b,c,d){a.formState={xlsUrl:"reports/students/statistics/studentstatistics.xls",filterValues:{OPPURSTAATUS:["OPPURSTAATUS_K","OPPURSTAATUS_L"]}},c.createQueryForm(a,"/reports/students/statistics",{result:"OPPEVORM"},function(){var c=a.criteria.result;if(a.savedCriteria=angular.copy(a.criteria),a.formState.resultType!==c)if(a.formState.resultType=c,c){var d=a.formState.filterValues[c];a.formState.resultDef=b.queryForDropdown({mainClassCode:c,filterValues:d}),"FINALLIKAS"===c&&b.queryForDropdown({mainClassCode:"FINTAPSUSTUS"},function(b){a.formState.resultDef.$promise.then(function(){Array.prototype.push.apply(a.formState.resultDef,b)})})}else a.formState.resultDef=[]}),a.criteria.date=(new Date).withoutTime();var e=a.clearCriteria;a.clearCriteria=function(){e(),a.criteria.curriculum=[]},a.load=function(){return a.searchForm.$valid?void a.loadData():(d.error("main.messages.form-has-errors"),!1)},a.loadData()}]).controller("ReportStudentStatisticsByperiodController",["$scope","$route","Classifier","QueryUtils","Session",function(a,b,c,d,e){a.auth=b.current.locals.auth;var f={OPPURSTAATUS_A:"AKADPUHKUS_POHJUS",OPPURSTAATUS_K:"EKSMAT_POHJUS"},g=e.school||{};a.formState={xlsUrl:"reports/students/statistics/studentstatisticsbyperiod.xls"},d.createQueryForm(a,"/reports/students/statistics/byperiod",{result:"OPPURSTAATUS_A"},function(){var b=a.criteria.result;if(a.formState.resultType!==b){a.formState.resultType=b;var d=f[b];a.formState.resultDef=d?c.queryForDropdown({mainClassCode:d,higher:g.higher,vocational:g.vocational}):void 0}}),a.criteria.from=(new Date).withoutTime();var h=a.clearCriteria;a.clearCriteria=function(){h(),a.criteria.curriculum=[]},a.loadData()}]).controller("ReportCurriculumsCompletionController",["$q","$scope","$route","Classifier","QueryUtils",function(a,b,c,d,e){b.auth=c.current.locals.auth;var f=d.valuemapper({studyForm:"OPPEVORM",studyLoad:"OPPEKOORMUS",status:"OPPURSTAATUS"});b.formState={xlsUrl:"reports/curriculums/completion/curriculumscompletion.xls"},e.createQueryForm(b,"/reports/curriculums/completion",{order:"p.lastname,p.firstname",isHigher:b.auth.higher},f.objectmapper);var g=b.clearCriteria;b.clearCriteria=function(){g(),b.criteria.isHigher=b.auth.higher},a.all(f.promises).then(b.loadData)}]).controller("ReportTeacherLoadHigherController",["$scope","$route","$timeout","DataUtils","FormUtils","QueryUtils",function(a,b,c,d,e,f){a.auth=b.current.locals.auth,f.createQueryForm(a,"/reports/teachers/load/higher",{order:"p.lastname,p.firstname"});var g=a.loadData;a.loadData=function(){e.withValidForm(a.teacherLoadReportForm,g)},a.formState={studyYears:f.endpoint("/autocomplete/studyYears").query(),studyPeriods:{},xlsUrl:"reports/teachers/load/higher/teachersloadhigher.xls"},a.formState.allStudyPeriods=f.endpoint("/autocomplete/studyPeriods").query(),a.formState.studyYears.$promise.then(function(){if(a.formState.allStudyPeriods.$promise.then(function(b){for(var c=0;c<b.length;c++){var d=b[c],e=a.formState.studyPeriods[d.studyYear];e||(a.formState.studyPeriods[d.studyYear]=e=[]),e.push(d)}}),!a.criteria.studyYear){var b=d.getCurrentStudyYearOrPeriod(a.formState.studyYears);b&&(a.criteria.studyYear=b.id)}a.criteria.studyYear&&c(a.loadData)})}]).controller("ReportTeacherLoadVocationalController",["$scope","$route","$timeout","DataUtils","FormUtils","QueryUtils",function(a,b,c,d,e,f){a.auth=b.current.locals.auth,f.createQueryForm(a,"/reports/teachers/load/vocational",{order:"p.lastname,p.firstname"});var g=a.loadData;a.loadData=function(){e.withValidForm(a.teacherLoadReportForm,g)},a.formState={studyYears:f.endpoint("/autocomplete/studyYears").query(),studyPeriods:{},xlsUrl:"reports/teachers/load/vocational/teachersloadvocational.xls"},a.formState.allStudyPeriods=f.endpoint("/autocomplete/studyPeriods").query(),a.formState.studyYears.$promise.then(function(){if(a.formState.allStudyPeriods.$promise.then(function(b){for(var c=0;c<b.length;c++){var d=b[c],e=a.formState.studyPeriods[d.studyYear];e||(a.formState.studyPeriods[d.studyYear]=e=[]),e.push(d)}}),!a.criteria.studyYear){var b=d.getCurrentStudyYearOrPeriod(a.formState.studyYears);b&&(a.criteria.studyYear=b.id)}a.criteria.studyYear&&c(a.loadData)})}]).controller("ReportVotaController",["$scope","$timeout","DataUtils","FormUtils","QueryUtils",function(a,b,c,d,e){e.createQueryForm(a,"/reports/vota",{order:"sy.start_date"});var f=a.loadData;a.loadData=function(){d.withValidForm(a.votaReportForm,f)},a.formState={studyYears:e.endpoint("/autocomplete/studyYears").query(),studyPeriods:{}},a.formState.allStudyPeriods=e.endpoint("/autocomplete/studyPeriods").query(),a.formState.studyYears.$promise.then(function(){a.formState.allStudyPeriods.$promise.then(function(d){for(var e,f,g=0;g<d.length;g++)e=d[g],f=a.formState.studyPeriods[e.studyYear],f||(a.formState.studyPeriods[e.studyYear]=f=[]),f.push(e);a.criteria.studyYear||(f=c.getCurrentStudyYearOrPeriod(a.formState.studyYears),f&&(a.criteria.studyYear=f.id,a.criteria.studyPeriod||(e=c.getCurrentStudyYearOrPeriod(a.formState.studyPeriods[f.id]||[]),e&&(a.criteria.studyPeriod=e.id)))),a.criteria.studyYear&&b(a.loadData)})}),a.studyPeriodRows=function(b){var c=1;if(-1!==b)for(var d=a.tabledata.content,e=d[b].studyPeriod.id,f=b+1;f<d.length&&d[f].studyPeriod.id===e;f++)c++;return c},a.studyPeriodVisible=function(b){var c=a.tabledata.content;return 0===b||c[b-1].studyPeriod.id!==c[b].studyPeriod.id}}]).controller("StudentGroupTeacherController",["$httpParamSerializer","$route","$scope","$sessionStorage","$timeout","Classifier","DataUtils","VocationalGradeUtil","QueryUtils","config","dialogService","message",function(a,b,c,d,e,f,g,h,i,j,k,l){function m(){c.studentGroupTeacherReportForm&&c.studentGroupTeacherReportForm.$valid?c.search():e(m)}c.gradeUtil=h,c.auth=b.current.locals.auth;var n="/reports/studentgroupteacher",o=f.valuemapper({grade:"KUTSEHINDAMINE",entryType:"SISSEKANNE",absence:"PUUDUMINE"});c.entryTypesOrder=["SISSEKANNE_H","SISSEKANNE_R","SISSEKANNE_O","SISSEKANNE_L","SISSEKANNE_P","SISSEKANNE_T","SISSEKANNE_E","SISSEKANNE_I"],c.entryTypeColors={SISSEKANNE_H:"green-300",SISSEKANNE_R:"indigo-300",SISSEKANNE_O:"teal-300",SISSEKANNE_L:"pink-300"},c.auth.isTeacher()&&(c.teacherId=c.auth.teacher),c.formState={studyYears:i.endpoint("/autocomplete/studyYears").query(),studyPeriods:{},studentGroups:i.endpoint("/autocomplete/studentgroups").query({valid:!0,higher:!1,studentGroupTeacherId:c.teacherId}),xlsUrl:"reports/studentgroupteacher/studentgroupteacher.xls",pdfUrl:"reports/studentgroupteacher/studentgroupteacher.pdf"},c.pdf=function(b,c){return j.apiUrl+"/"+b+"?"+a(c)},c.fromStorage=function(a){return JSON.parse(d[a]||"{}")},c.toStorage=function(a,b){d[a]=JSON.stringify(b)},"_menu"in b.current.params||(c.storedCriteria=c.fromStorage(n)),!c.storedCriteria||angular.equals({},c.storedCriteria)?c.criteria={entryType:{SISSEKANNE_H:!0,SISSEKANNE_R:!0,SISSEKANNE_O:!0,SISSEKANNE_L:!0}}:(c.criteria=c.storedCriteria,c.formState.studyPeriod=c.storedCriteria.formState.studyPeriod,c.formState.studentGroup=c.storedCriteria.formState.studentGroup,c.formState.studentGroup&&(c.criteria.studyYear||c.criteria.from)&&e(m)),f.queryForDropdown({mainClassCode:"SISSEKANNE"},function(a){var b=f.toMap(a);c.entryTypes=Object.keys(b).map(function(a){return b[a]})}),c.getEntryColor=function(a){return c.entryTypeColors[a]},c.getEntryTypeOrderNr=function(a){return c.entryTypesOrder.indexOf(a.code)},c.formState.allStudyPeriods=i.endpoint("/autocomplete/studyPeriods").query(),c.formState.studyYears.$promise.then(function(){c.formState.allStudyPeriods.$promise.then(function(a){for(var b,d,e=0;e<a.length;e++)b=a[e],d=c.formState.studyPeriods[b.studyYear],d||(c.formState.studyPeriods[b.studyYear]=d=[]),d.push(b);c.criteria.studyYear||(d=g.getCurrentStudyYearOrPeriod(c.formState.studyYears),d&&(c.criteria.studyYear=d.id))})}),c.studyPeriodChanged=function(){c.criteria.studyPeriod=c.formState.studyPeriod?c.formState.studyPeriod.id:null,c.criteria.studyPeriodStart=c.formState.studyPeriod?c.formState.studyPeriod.startDate:null,c.criteria.studyPeriodEnd=c.formState.studyPeriod?c.formState.studyPeriod.endDate:null},c.studentGroupChanged=function(){c.criteria.studentGroup=c.formState.studentGroup?c.formState.studentGroup.id:null,c.criteria.curriculumVersion=c.formState.studentGroup?c.formState.studentGroup.curriculumVersion:null},c.search=function(){var a=c.studentGroupTeacherReportForm;return a.$setSubmitted(),a.$valid?c.criteria.studyYear||c.criteria.from?(c.criteria.entryTypes=[],angular.forEach(c.criteria.entryType,function(a,b){a&&c.criteria.entryTypes.push(b)}),i.loadingWheel(c,!0),void i.endpoint(n).get(c.criteria).$promise.then(function(a){c.record=a,c.record.students.forEach(function(a){a.resultColumns.forEach(function(a){a.journalResult&&a.journalResult.entries&&(o.objectmapper(a.journalResult.entries),a.journalResult.entries.forEach(function(a){o.objectmapper(a.lessonAbsences)})),a.practiceModuleThemeResult&&o.objectmapper(a.practiceModuleThemeResult),a.practiceModuleResult&&o.objectmapper(a.practiceModuleResult),a.moduleResult&&o.objectmapper(a.moduleResult)})}),i.loadingWheel(c,!1),c.criteria.formState={studyPeriod:c.formState.studyPeriod,studentGroup:c.formState.studentGroup},c.toStorage(n,c.criteria),c.$broadcast("refreshFixedColumns")})):void l.error("report.studentGroupTeacher.error.studyYearOrEntriesFromRequired"):void l.error("main.messages.form-has-errors")},c.clearCriteria=function(){c.formState.studyPeriod=null,c.formState.studentGroup=null,c.criteria={}},c.openAddInfoDialog=function(a){k.showDialog("report/studentgroup.teacher.addinfo.html",function(b){b.auth=c.auth,b.student=a,b.entriesWithAddInfo=[];var d=[];b.student.resultColumns.forEach(function(a){a.journalResult&&-1===d.indexOf(a.journalResult.id)&&(a.journalResult.entries.forEach(function(a){a.addInfo&&b.entriesWithAddInfo.push(a)}),d.push(a.journalResult.id))})})}}]),angular.module("hitsaOis").config(["$routeProvider","USER_ROLES",function(a,b){a.when("/reports/students/students",{templateUrl:"report/student.html",controller:"ReportStudentController",controllerAs:"controller",data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_PARING]},resolve:{auth:["AuthResolver",function(a){return a.resolve()}],translationLoaded:["$translate",function(a){return a.onReady()}]}}).when("/reports/students/statistics",{templateUrl:"report/student.statistics.html",controller:"ReportStudentStatisticsController",controllerAs:"controller",data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_PARING]},resolve:{auth:["AuthResolver",function(a){return a.resolve()}],translationLoaded:["$translate",function(a){return a.onReady()}]}}).when("/reports/students/statistics/byperiod",{templateUrl:"report/student.statistics.byperiod.html",controller:"ReportStudentStatisticsByperiodController",controllerAs:"controller",data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_PARING]},resolve:{auth:["AuthResolver",function(a){return a.resolve()}],translationLoaded:["$translate",function(a){return a.onReady()}]}}).when("/reports/curriculums/completion",{templateUrl:"report/curriculums.completion.html",controller:"ReportCurriculumsCompletionController",controllerAs:"controller",data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_PARING]},resolve:{auth:["AuthResolver",function(a){return a.resolve()}],translationLoaded:["$translate",function(a){return a.onReady()}]}}).when("/reports/teachers/load/higher",{templateUrl:"report/teachers.load.higher.html",controller:"ReportTeacherLoadHigherController",data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_PARING]},resolve:{auth:["AuthResolver",function(a){return a.resolve()}],translationLoaded:["$translate",function(a){return a.onReady()}]}}).when("/reports/teachers/load/vocational",{templateUrl:"report/teachers.load.vocational.html",controller:"ReportTeacherLoadVocationalController",controllerAs:"controller",data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_PARING]},resolve:{auth:["AuthResolver",function(a){return a.resolve()}],translationLoaded:["$translate",function(a){return a.onReady()}]}}).when("/reports/vota",{templateUrl:"report/vota.html",controller:"ReportVotaController",controllerAs:"controller",data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_PARING]},resolve:{auth:["AuthResolver",function(a){return a.resolve()}],translationLoaded:["$translate",function(a){return a.onReady()}]}}).when("/reports/studentgroupteacher",{templateUrl:"report/studentgroup.teacher.html",controller:"StudentGroupTeacherController",controllerAs:"controller",data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_RYHMAJUHATAJA]},resolve:{auth:["AuthResolver",function(a){return a.resolve()}],translationLoaded:["$translate",function(a){return a.onReady()}]}})}]),angular.module("hitsaOis").controller("RtipSyncController",["$scope","message","QueryUtils",function(a,b,c){a.criteria={},a.rtipSync=function(){c.endpoint("/logs/rtip/sync").post()},a.rtipZemploees=function(){return a.rtipSyncForm.$setSubmitted(),a.rtipSyncForm.$valid?void c.endpoint("/logs/rtip/zemploees").post(a.criteria):(b.error("main.messages.form-has-errors"),!1)}}]),angular.module("hitsaOis").config(["$routeProvider","USER_ROLES",function(a,b){a.when("/rtip/sync",{templateUrl:"rtip/rtip.sync.html",controller:"RtipSyncController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}]},data:{authorizedRoles:[b.ROLE_OIGUS_M_TEEMAOIGUS_ANDMEVAHETUS_RTIP]}})}]),angular.module("hitsaOis").factory("ArrayUtils",function(){return{contains:function(a,b){return-1!==a.indexOf(b)},remove:function(a,b){var c=a.indexOf(b);c>-1&&a.splice(c,1)},isEmpty:function(a){return!angular.isArray(a)||0===a.length},includes:function(a,b,c){if(void 0===c){for(var d=a.length;d--;)if(a[d]===b)return!0}else for(var e=c,f=a.length;e++!==f;)if(a[e]===b)return!0;return!1},intersect:function(a,b){if(this.isEmpty(a)||this.isEmpty(b))return!1;for(var c=0;c<a.length;c++)if(this.includes(b,a[c]))return!0;return!1},intersection:function(a,b){for(var c=[],d=0;d<a.length;d++)this.includes(b,a[d])&&c.push(a[d]);return c}}}),Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(a){if(null===this)throw new TypeError('"this" is null or not defined');var b=Object(this),c=b.length>>>0;if("function"!=typeof a)throw new TypeError("predicate must be a function");for(var d=arguments[1],e=0;c>e;){var f=b[e];if(a.call(d,f,e,b))return f;e++}return void 0}}),angular.module("hitsaOis").factory("AuthService",["$http","$q","Session","Menu","config","Classifier","$rootScope","USER_CONFIRM_RIGHTS",function(a,b,c,d,e,f,g,h){var i="Authorization",j={},k=f.valuemapper({role:"ROLL"}),l=function(a){return d.setMenu(a.data),a.data&&a.data.user?(b.all(k.promises).then(function(){k.objectmapper(a.data.users);for(var b=0;b<a.data.users.length;b++)a.data.users[b].schoolCode?(a.data.users[b].nameEn=a.data.users[b].role.nameEn+" "+a.data.users[b].schoolCode,a.data.users[b].nameEt=a.data.users[b].role.nameEt+" "+a.data.users[b].schoolCode,a.data.users[b].nameRu=a.data.users[b].role.nameRu+" "+a.data.users[b].schoolCode):(a.data.users[b].nameEn=a.data.users[b].role.nameEn,a.data.users[b].nameEt=a.data.users[b].role.nameEt,a.data.users[b].nameRu=a.data.users[b].role.nameRu)}),c.create(a.data),a.data):(c.destroy(),null)};return j.login=function(b){return a.get(e.apiUrl+"/user",{headers:b}).then(function(a){return l(a)})},j.loginMobileId=function(b){return a.post(e.apiUrl+"/mIdLogin",{mobileNumber:b}).then(function(a){return{data:a.data,jwt:a.headers(i)}})},j.pollMobileIdStatus=function(b){var c={};return c[i]=b,a.get(e.apiUrl+"/mIdStatus",{headers:c}).then(function(a){return a.data})},j.loginLdap=function(b){return a.post(e.apiUrl+"/ldap",b).then(function(){return j.login()})},j.postLogout=function(){c.destroy(),d.setMenu({}),g.restartTimeoutDialogCounter()},j.logout=function(){return a.post(e.apiUrl+"/logout",{})["finally"](function(){j.postLogout()})},j.changeUser=function(b){return a.post(e.apiUrl+"/changeUser",{id:b}).then(function(a){return l(a)})},j.isAuthenticated=function(){return!!c.userId},j.isAuthorized=function(a){if(j.isAuthenticated()){if(angular.isFunction(a))return a(c,c.authorizedRoles);angular.isArray(a)||(a=[a]);for(var b=a.length-1;b>-1;b--)if(-1!==c.authorizedRoles.indexOf(a[b]))return!0}return!1},j.matchesRole=function(a){if(j.isAuthenticated()){angular.isArray(a)||(a=[a]);for(var b=a.length-1;b>-1;b--)if(c.roleCode===a[b])return!0}return!1},j.isValidRolePermission=function(a,b,c){return"OIGUS_K"!==c||-1!==h.indexOf(b)},j}]).factory("AuthInterceptor",["$rootScope","$q","AUTH_EVENTS",function(a,b,c){return{responseError:function(d){return a.$broadcast({401:c.notAuthenticated,403:c.notAuthorized,419:c.sessionTimeout,440:c.sessionTimeout}[d.status],d),b.reject(d)}}}]).factory("AuthResolver",["$q","$rootScope","$route","ArrayUtils","PUBLIC_ROUTES","AUTH_EVENTS","AuthService",function(a,b,c,d,e,f,g){function h(a,b){return function(){return angular.isString(a.roleCode)&&angular.isString(b)&&a.roleCode===b}}function i(){if(!angular.isDefined(c.current.data))return!0;var a=c.current.data.authorizedRoles;return g.isAuthorized(a)}return{resolve:function(){var g=a.defer(),j=b.$watch("state.currentUser",function(a){if(angular.isDefined(a)){if(a)if(i()){var k=angular.extend({},a);k.isMainAdmin=h(a,"ROLL_P"),k.isAdmin=h(a,"ROLL_A"),k.isTeacher=h(a,"ROLL_O"),k.isStudent=h(a,"ROLL_T"),k.isParent=h(a,"ROLL_L"),k.isExternalExpert=h(a,"ROLL_V"),g.resolve(k)}else g.reject(),b.$broadcast(f.notAuthorized);else d.contains(e,c.current.originalPath)?g.resolve():g.reject();j()}});return g.promise}}}]).run(["$rootScope","AUTH_EVENTS","message",function(a,b,c){a.$on(b.notAuthorized,function(){c.error("main.messages.error.nopermission")})}]).constant("AUTH_EVENTS",{loginSuccess:"auth-login-success",loginFailed:"auth-login-failed",logoutSuccess:"auth-logout-success",sessionTimeout:"auth-session-timeout",notAuthenticated:"auth-not-authenticated",notAuthorized:"auth-not-authorized",userChanged:"auth-user-changed",reAuthenticate:"auth-re"}).constant("PUBLIC_ROUTES",["/academicCalendars","/academicCalendar/:schoolId?","/curriculums/:schoolId?","/curriculum/:id","/curriculum/:curriculumId/version/:id","/stateCurriculum/public","/stateCurriculum/public/:id/view","/subject/public","/subject/public/:id","/timetables","/timetable/generalTimetableByGroup/:schoolId?","/timetable/generalTimetableByTeacher/:schoolId?","/timetable/generalTimetableByRoom/:schoolId?","/timetable/searchGeneralTimetable/:schoolId?","/timetable/group/:schoolId/:groupId/:weekIndex?","/timetable/teacher/:schoolId/:teacherId/:weekIndex?","/timetable/room/:schoolId/:roomId/:weekIndex?","/studyMaterial/:schoolId/vocational/:journalId/view","/studyMaterial/:schoolId/higher/:subjectStudyPeriodId/view","/practiceJournals/supervisor/:uuid"]).service("Session",function(){this.school={},this.create=function(a){this.userId=a.user,this.studentId=a.student,this.teacherId=a.teacher,this.hasCurriculums=a.hasCurriculums,this.authorizedRoles=a.authorizedRoles,this.school=angular.extend(this.school||{},a.school),this.roleCode=a.roleCode,this.vocational=a.vocational,this.higher=a.higher,this.timeoutInSeconds=a.sessionTimeoutInSeconds,this.teacherGroupIds=a.teacherGroupIds},this.destroy=function(){this.userId=null,this.studentId=null,this.teacherId=null,this.hasCurriculums=null,this.authorizedRoles=[],this.school={},this.roleCode=null,this.vocational=void 0,this.higher=void 0,this.timeoutInSeconds=null,this.teacherGroupIds=null}}).constant("USER_ROLES",{ROLE_OIGUS_V_TEEMAOIGUS_A:"ROLE_OIGUS_V_TEEMAOIGUS_A",ROLE_OIGUS_V_TEEMAOIGUS_P:"ROLE_OIGUS_V_TEEMAOIGUS_P",ROLE_OIGUS_V_TEEMAOIGUS_AINE:"ROLE_OIGUS_V_TEEMAOIGUS_AINE",ROLE_OIGUS_V_TEEMAOIGUS_AINEOPPETAJA:"ROLE_OIGUS_V_TEEMAOIGUS_AINEOPPETAJA",ROLE_OIGUS_V_TEEMAOIGUS_AKADKALENDER:"ROLE_OIGUS_V_TEEMAOIGUS_AKADKALENDER",ROLE_OIGUS_V_TEEMAOIGUS_ANDMEVAHETUS_EHIS:"ROLE_OIGUS_V_TEEMAOIGUS_ANDMEVAHETUS_EHIS",ROLE_OIGUS_V_TEEMAOIGUS_ANDMEVAHETUS_EKIS:"ROLE_OIGUS_V_TEEMAOIGUS_ANDMEVAHETUS_EKIS",ROLE_OIGUS_V_TEEMAOIGUS_ANDMEVAHETUS_KUTSEREGISTER:"ROLE_OIGUS_V_TEEMAOIGUS_ANDMEVAHETUS_KUTSEREGISTER",ROLE_OIGUS_V_TEEMAOIGUS_ANDMEVAHETUS_RTIP:"ROLE_OIGUS_V_TEEMAOIGUS_ANDMEVAHETUS_RTIP",ROLE_OIGUS_V_TEEMAOIGUS_ANDMEVAHETUS_SAIS:"ROLE_OIGUS_V_TEEMAOIGUS_ANDMEVAHETUS_SAIS",ROLE_OIGUS_V_TEEMAOIGUS_AUTOTEADE:"ROLE_OIGUS_V_TEEMAOIGUS_AUTOTEADE",ROLE_OIGUS_V_TEEMAOIGUS_AVALDUS:"ROLE_OIGUS_V_TEEMAOIGUS_AVALDUS",ROLE_OIGUS_V_TEEMAOIGUS_BAASMOODUL:"ROLE_OIGUS_V_TEEMAOIGUS_BAASMOODUL",ROLE_OIGUS_V_TEEMAOIGUS_DIPLOM:"ROLE_OIGUS_V_TEEMAOIGUS_DIPLOM",ROLE_OIGUS_V_TEEMAOIGUS_DOKALLKIRI:"ROLE_OIGUS_V_TEEMAOIGUS_DOKALLKIRI",ROLE_OIGUS_V_TEEMAOIGUS_EKSAM:"ROLE_OIGUS_V_TEEMAOIGUS_EKSAM",ROLE_OIGUS_V_TEEMAOIGUS_ESINDAVALDUS:"ROLE_OIGUS_V_TEEMAOIGUS_ESINDAVALDUS",ROLE_OIGUS_V_TEEMAOIGUS_HINNETELEHT:"ROLE_OIGUS_V_TEEMAOIGUS_HINNETELEHT",ROLE_OIGUS_V_TEEMAOIGUS_HINNETELEHT_TRUKKIMINE:"ROLE_OIGUS_V_TEEMAOIGUS_HINNETELEHT_TRUKKIMINE",ROLE_OIGUS_V_TEEMAOIGUS_HOONERUUM:"ROLE_OIGUS_V_TEEMAOIGUS_HOONERUUM",ROLE_OIGUS_V_TEEMAOIGUS_KASKKIRI:"ROLE_OIGUS_V_TEEMAOIGUS_KASKKIRI",ROLE_OIGUS_V_TEEMAOIGUS_KASUTAJA:"ROLE_OIGUS_V_TEEMAOIGUS_KASUTAJA",ROLE_OIGUS_V_TEEMAOIGUS_KLASSIFIKAATOR:"ROLE_OIGUS_V_TEEMAOIGUS_KLASSIFIKAATOR",ROLE_OIGUS_V_TEEMAOIGUS_KOMISJON:"ROLE_OIGUS_V_TEEMAOIGUS_KOMISJON",ROLE_OIGUS_V_TEEMAOIGUS_LEPING:"ROLE_OIGUS_V_TEEMAOIGUS_LEPING",ROLE_OIGUS_V_TEEMAOIGUS_LOPBLANKETT:"ROLE_OIGUS_V_TEEMAOIGUS_LOPBLANKETT",ROLE_OIGUS_V_TEEMAOIGUS_LOPDOKALLKIRI:"ROLE_OIGUS_V_TEEMAOIGUS_LOPDOKALLKIRI",ROLE_OIGUS_V_TEEMAOIGUS_LOPMOODULPROTOKOLL:"ROLE_OIGUS_V_TEEMAOIGUS_LOPMOODULPROTOKOLL",
ROLE_OIGUS_V_TEEMAOIGUS_LOPPROTOKOLL:"ROLE_OIGUS_V_TEEMAOIGUS_LOPPROTOKOLL",ROLE_OIGUS_V_TEEMAOIGUS_LOPTEEMA:"ROLE_OIGUS_V_TEEMAOIGUS_LOPTEEMA",ROLE_OIGUS_V_TEEMAOIGUS_LOPTUNNISTUS_TRUKKIMINE:"ROLE_OIGUS_V_TEEMAOIGUS_LOPTUNNISTUS_TRUKKIMINE",ROLE_OIGUS_V_TEEMAOIGUS_MOODULPROTOKOLL:"ROLE_OIGUS_V_TEEMAOIGUS_MOODULPROTOKOLL",ROLE_OIGUS_V_TEEMAOIGUS_OPETAJA:"ROLE_OIGUS_V_TEEMAOIGUS_OPETAJA",ROLE_OIGUS_V_TEEMAOIGUS_OPETAJAAMET:"ROLE_OIGUS_V_TEEMAOIGUS_OPETAJAAMET",ROLE_OIGUS_V_TEEMAOIGUS_OPINGUKAVA:"ROLE_OIGUS_V_TEEMAOIGUS_OPINGUKAVA",ROLE_OIGUS_V_TEEMAOIGUS_OPPEASUTUS:"ROLE_OIGUS_V_TEEMAOIGUS_OPPEASUTUS",ROLE_OIGUS_V_TEEMAOIGUS_OPPEKAVA:"ROLE_OIGUS_V_TEEMAOIGUS_OPPEKAVA",ROLE_OIGUS_V_TEEMAOIGUS_OPPEMATERJAL:"ROLE_OIGUS_V_TEEMAOIGUS_OPPEMATERJAL",ROLE_OIGUS_V_TEEMAOIGUS_OPPEPERIOOD:"ROLE_OIGUS_V_TEEMAOIGUS_OPPEPERIOOD",ROLE_OIGUS_V_TEEMAOIGUS_OPPERYHM:"ROLE_OIGUS_V_TEEMAOIGUS_OPPERYHM",ROLE_OIGUS_V_TEEMAOIGUS_OPPETASE:"ROLE_OIGUS_V_TEEMAOIGUS_OPPETASE",ROLE_OIGUS_V_TEEMAOIGUS_OPPETOOGRAAFIK:"ROLE_OIGUS_V_TEEMAOIGUS_OPPETOOGRAAFIK",ROLE_OIGUS_V_TEEMAOIGUS_OPPETOOLIIK:"ROLE_OIGUS_V_TEEMAOIGUS_OPPETOOLIIK",ROLE_OIGUS_V_TEEMAOIGUS_OPPETULEMUS:"ROLE_OIGUS_V_TEEMAOIGUS_OPPETULEMUS",ROLE_OIGUS_V_TEEMAOIGUS_OPPUR:"ROLE_OIGUS_V_TEEMAOIGUS_OPPUR",ROLE_OIGUS_V_TEEMAOIGUS_PAEVIK:"ROLE_OIGUS_V_TEEMAOIGUS_PAEVIK",ROLE_OIGUS_V_TEEMAOIGUS_PARING:"ROLE_OIGUS_V_TEEMAOIGUS_PARING",ROLE_OIGUS_V_TEEMAOIGUS_PRAKTIKAPAEVIK:"ROLE_OIGUS_V_TEEMAOIGUS_PRAKTIKAPAEVIK",ROLE_OIGUS_V_TEEMAOIGUS_PROTOKOLL:"ROLE_OIGUS_V_TEEMAOIGUS_PROTOKOLL",ROLE_OIGUS_V_TEEMAOIGUS_PUUDUMINE:"ROLE_OIGUS_V_TEEMAOIGUS_PUUDUMINE",ROLE_OIGUS_V_TEEMAOIGUS_RIIKLIKOPPEKAVA:"ROLE_OIGUS_V_TEEMAOIGUS_RIIKLIKOPPEKAVA",ROLE_OIGUS_V_TEEMAOIGUS_RYHMAJUHATAJA:"ROLE_OIGUS_V_TEEMAOIGUS_RYHMAJUHATAJA",ROLE_OIGUS_V_TEEMAOIGUS_STRUKTUUR:"ROLE_OIGUS_V_TEEMAOIGUS_STRUKTUUR",ROLE_OIGUS_V_TEEMAOIGUS_SYNDMUS:"ROLE_OIGUS_V_TEEMAOIGUS_SYNDMUS",ROLE_OIGUS_V_TEEMAOIGUS_T:"ROLE_OIGUS_V_TEEMAOIGUS_T",ROLE_OIGUS_V_TEEMAOIGUS_TOEND:"ROLE_OIGUS_V_TEEMAOIGUS_TOEND",ROLE_OIGUS_V_TEEMAOIGUS_TUNDAEG:"ROLE_OIGUS_V_TEEMAOIGUS_TUNDAEG",ROLE_OIGUS_V_TEEMAOIGUS_TUNNIJAOTUSPLAAN:"ROLE_OIGUS_V_TEEMAOIGUS_TUNNIJAOTUSPLAAN",ROLE_OIGUS_V_TEEMAOIGUS_TUNNIPLAAN:"ROLE_OIGUS_V_TEEMAOIGUS_TUNNIPLAAN",ROLE_OIGUS_V_TEEMAOIGUS_UUDE_AASTASSE:"ROLE_OIGUS_V_TEEMAOIGUS_UUDE_AASTASSE",ROLE_OIGUS_V_TEEMAOIGUS_VASTUVOTT:"ROLE_OIGUS_V_TEEMAOIGUS_VASTUVOTT",ROLE_OIGUS_V_TEEMAOIGUS_VOTA:"ROLE_OIGUS_V_TEEMAOIGUS_VOTA",ROLE_OIGUS_V_TEEMAOIGUS_VOTAKOM:"ROLE_OIGUS_V_TEEMAOIGUS_VOTAKOM",ROLE_OIGUS_V_TEEMAOIGUS_YLDTEADE:"ROLE_OIGUS_V_TEEMAOIGUS_YLDTEADE",ROLE_OIGUS_V_TEEMAOIGUS_TEADE:"ROLE_OIGUS_V_TEEMAOIGUS_TEADE",ROLE_OIGUS_V_TEEMAOIGUS_STIPTOETUS:"ROLE_OIGUS_V_TEEMAOIGUS_STIPTOETUS",ROLE_OIGUS_M_TEEMAOIGUS_AINE:"ROLE_OIGUS_M_TEEMAOIGUS_AINE",ROLE_OIGUS_M_TEEMAOIGUS_AINEOPPETAJA:"ROLE_OIGUS_M_TEEMAOIGUS_AINEOPPETAJA",ROLE_OIGUS_M_TEEMAOIGUS_AKADKALENDER:"ROLE_OIGUS_M_TEEMAOIGUS_AKADKALENDER",ROLE_OIGUS_M_TEEMAOIGUS_ANDMEVAHETUS_EHIS:"ROLE_OIGUS_M_TEEMAOIGUS_ANDMEVAHETUS_EHIS",ROLE_OIGUS_M_TEEMAOIGUS_ANDMEVAHETUS_EKIS:"ROLE_OIGUS_M_TEEMAOIGUS_ANDMEVAHETUS_EKIS",ROLE_OIGUS_M_TEEMAOIGUS_ANDMEVAHETUS_KUTSEREGISTER:"ROLE_OIGUS_M_TEEMAOIGUS_ANDMEVAHETUS_KUTSEREGISTER",ROLE_OIGUS_M_TEEMAOIGUS_ANDMEVAHETUS_RTIP:"ROLE_OIGUS_M_TEEMAOIGUS_ANDMEVAHETUS_RTIP",ROLE_OIGUS_M_TEEMAOIGUS_ANDMEVAHETUS_SAIS:"ROLE_OIGUS_M_TEEMAOIGUS_ANDMEVAHETUS_SAIS",ROLE_OIGUS_M_TEEMAOIGUS_AUTOTEADE:"ROLE_OIGUS_M_TEEMAOIGUS_AUTOTEADE",ROLE_OIGUS_M_TEEMAOIGUS_AVALDUS:"ROLE_OIGUS_M_TEEMAOIGUS_AVALDUS",ROLE_OIGUS_M_TEEMAOIGUS_BAASMOODUL:"ROLE_OIGUS_M_TEEMAOIGUS_BAASMOODUL",ROLE_OIGUS_M_TEEMAOIGUS_DIPLOM:"ROLE_OIGUS_M_TEEMAOIGUS_DIPLOM",ROLE_OIGUS_M_TEEMAOIGUS_DOKALLKIRI:"ROLE_OIGUS_M_TEEMAOIGUS_DOKALLKIRI",ROLE_OIGUS_M_TEEMAOIGUS_EKSAM:"ROLE_OIGUS_M_TEEMAOIGUS_EKSAM",ROLE_OIGUS_M_TEEMAOIGUS_ESINDAVALDUS:"ROLE_OIGUS_M_TEEMAOIGUS_ESINDAVALDUS",ROLE_OIGUS_M_TEEMAOIGUS_HINNETELEHT:"ROLE_OIGUS_M_TEEMAOIGUS_HINNETELEHT",ROLE_OIGUS_M_TEEMAOIGUS_HINNETELEHT_TRUKKIMINE:"ROLE_OIGUS_M_TEEMAOIGUS_HINNETELEHT_TRUKKIMINE",ROLE_OIGUS_M_TEEMAOIGUS_HOONERUUM:"ROLE_OIGUS_M_TEEMAOIGUS_HOONERUUM",ROLE_OIGUS_M_TEEMAOIGUS_KASKKIRI:"ROLE_OIGUS_M_TEEMAOIGUS_KASKKIRI",ROLE_OIGUS_M_TEEMAOIGUS_KASUTAJA:"ROLE_OIGUS_M_TEEMAOIGUS_KASUTAJA",ROLE_OIGUS_M_TEEMAOIGUS_KLASSIFIKAATOR:"ROLE_OIGUS_M_TEEMAOIGUS_KLASSIFIKAATOR",ROLE_OIGUS_M_TEEMAOIGUS_KOMISJON:"ROLE_OIGUS_M_TEEMAOIGUS_KOMISJON",ROLE_OIGUS_M_TEEMAOIGUS_LEPING:"ROLE_OIGUS_M_TEEMAOIGUS_LEPING",ROLE_OIGUS_M_TEEMAOIGUS_LOPBLANKETT:"ROLE_OIGUS_M_TEEMAOIGUS_LOPBLANKETT",ROLE_OIGUS_M_TEEMAOIGUS_LOPDOKALLKIRI:"ROLE_OIGUS_M_TEEMAOIGUS_LOPDOKALLKIRI",ROLE_OIGUS_M_TEEMAOIGUS_LOPMOODULPROTOKOLL:"ROLE_OIGUS_M_TEEMAOIGUS_LOPMOODULPROTOKOLL",ROLE_OIGUS_M_TEEMAOIGUS_LOPPROTOKOLL:"ROLE_OIGUS_M_TEEMAOIGUS_LOPPROTOKOLL",ROLE_OIGUS_M_TEEMAOIGUS_LOPTEEMA:"ROLE_OIGUS_M_TEEMAOIGUS_LOPTEEMA",ROLE_OIGUS_M_TEEMAOIGUS_LOPTUNNISTUS_TRUKKIMINE:"ROLE_OIGUS_M_TEEMAOIGUS_LOPTUNNISTUS_TRUKKIMINE",ROLE_OIGUS_M_TEEMAOIGUS_MOODULPROTOKOLL:"ROLE_OIGUS_M_TEEMAOIGUS_MOODULPROTOKOLL",ROLE_OIGUS_M_TEEMAOIGUS_OPETAJA:"ROLE_OIGUS_M_TEEMAOIGUS_OPETAJA",ROLE_OIGUS_M_TEEMAOIGUS_OPETAJAAMET:"ROLE_OIGUS_M_TEEMAOIGUS_OPETAJAAMET",ROLE_OIGUS_M_TEEMAOIGUS_OPINGUKAVA:"ROLE_OIGUS_M_TEEMAOIGUS_OPINGUKAVA",ROLE_OIGUS_M_TEEMAOIGUS_OPPEASUTUS:"ROLE_OIGUS_M_TEEMAOIGUS_OPPEASUTUS",ROLE_OIGUS_M_TEEMAOIGUS_OPPEKAVA:"ROLE_OIGUS_M_TEEMAOIGUS_OPPEKAVA",ROLE_OIGUS_M_TEEMAOIGUS_OPPEMATERJAL:"ROLE_OIGUS_M_TEEMAOIGUS_OPPEMATERJAL",ROLE_OIGUS_M_TEEMAOIGUS_OPPEPERIOOD:"ROLE_OIGUS_M_TEEMAOIGUS_OPPEPERIOOD",ROLE_OIGUS_M_TEEMAOIGUS_OPPERYHM:"ROLE_OIGUS_M_TEEMAOIGUS_OPPERYHM",ROLE_OIGUS_M_TEEMAOIGUS_OPPETASE:"ROLE_OIGUS_M_TEEMAOIGUS_OPPETASE",ROLE_OIGUS_M_TEEMAOIGUS_OPPETOOGRAAFIK:"ROLE_OIGUS_M_TEEMAOIGUS_OPPETOOGRAAFIK",ROLE_OIGUS_M_TEEMAOIGUS_OPPETOOLIIK:"ROLE_OIGUS_M_TEEMAOIGUS_OPPETOOLIIK",ROLE_OIGUS_M_TEEMAOIGUS_OPPETULEMUS:"ROLE_OIGUS_M_TEEMAOIGUS_OPPETULEMUS",ROLE_OIGUS_M_TEEMAOIGUS_OPPUR:"ROLE_OIGUS_M_TEEMAOIGUS_OPPUR",ROLE_OIGUS_M_TEEMAOIGUS_PAEVIK:"ROLE_OIGUS_M_TEEMAOIGUS_PAEVIK",ROLE_OIGUS_M_TEEMAOIGUS_PARING:"ROLE_OIGUS_M_TEEMAOIGUS_PARING",ROLE_OIGUS_M_TEEMAOIGUS_PRAKTIKAPAEVIK:"ROLE_OIGUS_M_TEEMAOIGUS_PRAKTIKAPAEVIK",ROLE_OIGUS_M_TEEMAOIGUS_PROTOKOLL:"ROLE_OIGUS_M_TEEMAOIGUS_PROTOKOLL",ROLE_OIGUS_M_TEEMAOIGUS_PUUDUMINE:"ROLE_OIGUS_M_TEEMAOIGUS_PUUDUMINE",ROLE_OIGUS_M_TEEMAOIGUS_RIIKLIKOPPEKAVA:"ROLE_OIGUS_M_TEEMAOIGUS_RIIKLIKOPPEKAVA",ROLE_OIGUS_M_TEEMAOIGUS_RYHMAJUHATAJA:"ROLE_OIGUS_V_TEEMAOIGUS_RYHMAJUHATAJA",ROLE_OIGUS_M_TEEMAOIGUS_STRUKTUUR:"ROLE_OIGUS_M_TEEMAOIGUS_STRUKTUUR",ROLE_OIGUS_M_TEEMAOIGUS_SYNDMUS:"ROLE_OIGUS_M_TEEMAOIGUS_SYNDMUS",ROLE_OIGUS_M_TEEMAOIGUS_T:"ROLE_OIGUS_M_TEEMAOIGUS_T",ROLE_OIGUS_M_TEEMAOIGUS_TOEND:"ROLE_OIGUS_M_TEEMAOIGUS_TOEND",ROLE_OIGUS_M_TEEMAOIGUS_TUNDAEG:"ROLE_OIGUS_M_TEEMAOIGUS_TUNDAEG",ROLE_OIGUS_M_TEEMAOIGUS_TUNNIJAOTUSPLAAN:"ROLE_OIGUS_M_TEEMAOIGUS_TUNNIJAOTUSPLAAN",ROLE_OIGUS_M_TEEMAOIGUS_TUNNIPLAAN:"ROLE_OIGUS_M_TEEMAOIGUS_TUNNIPLAAN",ROLE_OIGUS_M_TEEMAOIGUS_UUDE_AASTASSE:"ROLE_OIGUS_M_TEEMAOIGUS_UUDE_AASTASSE",ROLE_OIGUS_M_TEEMAOIGUS_VASTUVOTT:"ROLE_OIGUS_M_TEEMAOIGUS_VASTUVOTT",ROLE_OIGUS_M_TEEMAOIGUS_VOTA:"ROLE_OIGUS_M_TEEMAOIGUS_VOTA",ROLE_OIGUS_M_TEEMAOIGUS_VOTAKOM:"ROLE_OIGUS_M_TEEMAOIGUS_VOTAKOM",ROLE_OIGUS_M_TEEMAOIGUS_YLDTEADE:"ROLE_OIGUS_M_TEEMAOIGUS_YLDTEADE",ROLE_OIGUS_M_TEEMAOIGUS_TEADE:"ROLE_OIGUS_M_TEEMAOIGUS_TEADE",ROLE_OIGUS_M_TEEMAOIGUS_STIPTOETUS:"ROLE_OIGUS_M_TEEMAOIGUS_STIPTOETUS",ROLE_OIGUS_K_TEEMAOIGUS_OPINGUKAVA:"ROLE_OIGUS_K_TEEMAOIGUS_OPINGUKAVA"}).constant("USER_CONFIRM_RIGHTS",["TEEMAOIGUS_AINE","TEEMAOIGUS_AVALDUS","TEEMAOIGUS_EKSAM","TEEMAOIGUS_ESINDAVALDUS","TEEMAOIGUS_HINNETELEHT","TEEMAOIGUS_HINNETELEHT_TRUKKIMINE","TEEMAOIGUS_KASKKIRI","TEEMAOIGUS_KASKKIRI_EKISETA","TEEMAOIGUS_KOMISJON","TEEMAOIGUS_LOPMOODULPROTOKOLL","TEEMAOIGUS_LOPPROTOKOLL","TEEMAOIGUS_LOPTEEMA","TEEMAOIGUS_LOPTUNNISTUS_TRUKKIMINE","TEEMAOIGUS_MOODULPROTOKOLL","TEEMAOIGUS_OPINGUKAVA","TEEMAOIGUS_OPPEKAVA","TEEMAOIGUS_PAEVIK","TEEMAOIGUS_PRAKTIKAPAEVIK","TEEMAOIGUS_PROTOKOLL","TEEMAOIGUS_RIIKLIKOPPEKAVA","TEEMAOIGUS_TUNNIPLAAN","TEEMAOIGUS_VOTA"]),angular.module("hitsaOis").factory("DataUtils",function(){function a(b,c,d){if(angular.isArray(b))return b.map(function(b){return a(b,c,d)});for(var e=0,f=c.length;f>e;e++){var g=c[e];b.hasOwnProperty(g)&&"string"==typeof b[g]&&(b[g]=moment(b[g],d).toDate())}return b}function b(b,c){return a(b,c,"YYYY-MM-DD'T'hh:mm:ss.SSS'Z'")}function c(b,c){return a(b,c,"hh:mm")}function d(a,b){angular.isArray(b)&&b.forEach(function(b){angular.isObject(a[b])&&(a[b]=a[b].id)})}function e(a){for(var c=0;c<a.length;c++)b(a[c],["startDate","endDate"]);a.sort(function(a,b){return a.endDate-b.endDate})}function f(a,b){return e(b),b.find(function(b){return a<=b.endDate})}function g(a){return f((new Date).withoutTime(),a)}function h(a){return b(a,["endDate"]),(new Date).withoutTime()>a.endDate}function i(a,b){return a.startDate<=b.startDate&&a.endDate>=b.startDate||a.startDate>=b.startDate&&a.startDate<=b.endDate}function j(a,b,c){var d=c.rooms.map(function(b){return a.currentLanguageNameField(b)}).join(", "),e=c.teachers.map(function(b){return a.currentLanguageNameField(b)}).join(", "),f=c.studentGroups.map(function(b){return a.currentLanguageNameField(b)}).join(", "),g=[];return d.length>0&&g.push("timetable.roomIsOccupied"),e.length>0&&g.push(b?"timetable.teacherIsOccupiedHigher":"timetable.teacherIsOccupiedVocational"),f.length>0&&g.push("timetable.studentGroupIsOccupied"),g.push("timetable.continue"),{extraPrompts:g,rooms:d,teachers:e,studentGroups:f}}var k=26;return{assign:function(a,b,c){return a.split(".").reduce(function(a,b,d,e){return d===e.length-1?a[b]=c:a[b]||(a[b]={}),a[b]},b||{})},convertStringToDates:b,convertStringToTime:c,convertObjectToIdentifier:d,getCurrentStudyYearOrPeriod:g,getStudyYearOrPeriodAt:f,sortStudyYearsOrPeriods:e,isPastStudyYearOrPeriod:h,periodsOverlap:i,occupiedEventTimePrompts:j,sexFromIdcode:function(a){return 11!==a.length||isNaN(a)?null:Number(a.charAt(0))%2===1?"SUGU_M":"SUGU_N"},birthdayFromIdcode:function(a){if(11!==a.length||isNaN(a))return null;var b={1:"18",2:"18",3:"19",4:"19",5:"20",6:"20",7:"21",8:"21"},c=b[a.charAt(0)]+a.substring(1,7);return moment(c).toDate()},creditsToHours:function(a){return Math.round(k*a)},hoursToCredits:function(a){return Math.round(a/k*10)/10},isSameDay:function(a,b){return a.getFullYear()===b.getFullYear()&&a.getMonth()===b.getMonth()&&a.getDate()===b.getDate()},isWeekend:function(a){var b=a.getDay();return 6===b||0===b}}}),Date.prototype.withoutTime=function(){var a=new Date(this);return a.setHours(0,0,0,0),a},angular.module("hitsaOis").service("dialogService",["$mdDialog","ArrayUtils","message",function(a,b,c){var d={accept:"main.yes",cancel:"main.no"},e={close:"main.button.close"};this.showDialog=function(d,e,f,g){var h=!1;a.show({controller:["$scope","$rootScope","$mdDialog",function(a,d,g){a.removeFromArray=b.remove,a.currentLanguageNameField=d.currentLanguageNameField,a.cancel=g.hide,a.submit=function(){var b=!0;a.dialogForm&&(a.dialogForm.$setSubmitted(),b=a.dialogForm.$valid),b?(angular.isFunction(f)&&f(a),h=!0,g.hide()):c.error("main.messages.form-has-errors")},angular.isFunction(e)&&e(a)}],templateUrl:d,clickOutsideToClose:!1,onRemoving:function(){angular.isFunction(g)&&h!==!0&&g()}})},this.hide=a.hide,this.confirmDialog=function(b,c,e){a.show({controller:["$scope",function(f){f.messages=angular.extend({},d,b),f.accept=function(){a.hide(),c()},f.cancel=function(){a.hide(),angular.isFunction(e)&&e()}}],templateUrl:"components/confirm.dialog.html",clickOutsideToClose:!1,multiple:!0})},this.messageDialog=function(b,c){a.show({controller:["$scope",function(d){d.messages=angular.extend({},e,b),d.close=function(){a.hide(),angular.isFunction(c)&&c()}}],templateUrl:"components/message.dialog.html",clickOutsideToClose:!1,multiple:!0})}}]),angular.module("hitsaOis").factory("ekisService",["config",function(a){var b="YYYYMMDDHHmmSS",c={};return c.getContractUrl=function(c){return a.ekisUrl+c+"%26u=3D"+moment().format(b)},c.getCertificateUrl=function(c){return a.ekisUrl+c+"%26u=3D"+moment().format(b)},c}]),angular.module("hitsaOis").factory("resourceErrorHandler",["$q","message",function(a,b){return{responseError:function(c,d){if(404===c.status)b.error("main.messages.record.notFound");else if(409===c.status)b.error("main.messages.record.modified");else if(c.data&&c.data._errors){var e=!1;angular.forEach(c.data._errors,function(a){if(a.field&&d){var c=d[a.field];if(c&&c.$setValidity&&c.$setDirty)return void("required"===a.code?(c.$validators.required||(c.$validators.required=function(a,b){return!c.$isEmpty(b)}),c.$setValidity(a.code,!1)):(c.$serverError=c.$serverError||[],c.$serverError.push(a),c.$setValidity("serverside",!1)))}e=!0,b.error(a.code+(a.field?" "+a.field:""),a.params)}),e||b.error("main.messages.form-has-errors")}else b.error("main.messages.system.failure");return a.reject(c)}}}]),angular.module("hitsaOis").factory("FormUtils",["$location","dialogService","message",function(a,b,c){function d(a,b){return a.$setSubmitted(),a.$valid?b():void c.error("main.messages.form-has-errors")}return{withValidForm:d,saveRecord:function(b,e,f,g){d(b,function(){e.id?e.$update().then(c.updateSuccess).then(g)["catch"](angular.noop):e.$save().then(function(){c.info("main.messages.create.success"),a.url(f+"/"+e.id+"/edit?_noback")})["catch"](angular.noop)})},deleteRecord:function(d,e,f){b.confirmDialog(f,function(){d.$delete().then(function(){c.info("main.messages.delete.success"),a.url(e)})["catch"](angular.noop)})}}}]),angular.module("hitsaOis").constant("HigherGrade",{KORGHINDAMINE_5:"KORGHINDAMINE_5",KORGHINDAMINE_4:"KORGHINDAMINE_4",KORGHINDAMINE_3:"KORGHINDAMINE_3",KORGHINDAMINE_2:"KORGHINDAMINE_2",KORGHINDAMINE_1:"KORGHINDAMINE_1",KORGHINDAMINE_0:"KORGHINDAMINE_0",KORGHINDAMINE_A:"KORGHINDAMINE_A",KORGHINDAMINE_M:"KORGHINDAMINE_M",KORGHINDAMINE_MI:"KORGHINDAMINE_MI"}).factory("HigherGradeUtil",["HigherGrade","ArrayUtils",function(a,b){var c=[a.KORGHINDAMINE_1,a.KORGHINDAMINE_2,a.KORGHINDAMINE_3,a.KORGHINDAMINE_4,a.KORGHINDAMINE_5,a.KORGHINDAMINE_A],d=[a.KORGHINDAMINE_0,a.KORGHINDAMINE_1,a.KORGHINDAMINE_2,a.KORGHINDAMINE_3,a.KORGHINDAMINE_4,a.KORGHINDAMINE_5],e=["1","2","3","4","5","A"],f=["E","D","C","B","A","P"],g=["0","1","2","3","4","5"],h=["F","E","D","C","B","A"];return{isPositive:function(a){return b.includes(c,a)},isDistinctive:function(a){return b.includes(d,a)},isPositiveValue:function(a,c){return c?b.includes(f,a):b.includes(e,a)},isDistinctiveValue:function(a,c){return c?b.includes(h,a):b.includes(g,a)}}}]),angular.module("hitsaOis").service("inAadressService",["$translate",function(a){var b=document.createElement("div");b.id="InAadressDiv";var c=null;this.getInAds=function(){return c||(c=new InAadress({container:"InAadressDiv",mode:"3",nocss:!0,appartment:1,ihist:"1993",lang:a.use()})),c},this.isLoaded=function(){return!!c},this.append=function(a){a.appendChild(b)}}]),angular.module("hitsaOis").factory("LessonPlanTableService",["$compile","$filter","$translate",function(a,b,c){function d(a){return a.filter(function(a,b,c){return c.map(function(a){return a.id}).indexOf(a.id)===b})}function e(a,b){return a?a.find(function(a){return a.code===b}):void 0}function f(a,b){return"/#"+D+"/journals/new?lessonPlan="+a+"&occupationModule="+b.occupationModuleId+(b.id?"&lessonPlanModule="+b.id:"")}function g(a){return"/#"+D+"/journals/"+a.id+"/edit?lessonPlanModule="+a.lessonPlanModule}function h(a,b){return a?a.filter(function(a){return void 0!==b&&void 0!==b[a.code]}):void 0}function i(a,b,c){var d=b.find(function(a){return a.id===c});if(d){var e=d.isStudyPeriodScheduleLoad?d.scheduleLoad*a.length:d.scheduleLoad;return{scheduleLoad:e,unplannedLessons:e-d.plannedLessons>0?e-d.plannedLessons:0}}return null}function j(a){return a?b("hoisNumber")(a,1):0}function k(a){var b=document.createElement("td");return b.classList.add(_),b.classList.add(ba),b.innerHTML=a.value.toUpperCase(),b}function l(a){return E.test(a)&&a>0}function m(a,b,d){var e=document.createElement("tr"),g=document.createElement("td");g.id=G+b.occupationModuleId,g.colSpan=3,g.className=aa,g.style="border-top:1px solid #aaa";var h=document.createElement("span");h.className="hois-collapse-header",h.innerHTML=a.currentLanguageNameField(b)+"&nbsp;&nbsp;",g.appendChild(h);var i=document.createElement("a");i.innerHTML=c.instant("lessonplan.addjournal"),i.href=f(a.lessonPlanId,b),g.appendChild(i),e.appendChild(g);var j=document.createElement("td");j.colSpan=a.formState.shownWeeksCount,j.className=aa,j.style="border-top:1px solid #aaa; min-width: 300px;";var k=document.createElement("div");k.className="layout-row";var l=document.createElement("div");l.className="flex-10",l.innerHTML="&nbsp;",k.appendChild(l);var m=document.createElement("div");m.className="flex-70";var n=document.createElement("hois-autocomplete");n.setAttribute("label",c.instant("lessonplan.responsibleformodule")),n.setAttribute("ng-model","record.modules["+d+"].teacher"),n.setAttribute("method","teachers");var o="{valid: true"+(a.record.modules[d].teacher?", selectedTeacherId:"+a.record.modules[d].teacher.id:"")+"}";return n.setAttribute("additional-query-params",o),m.appendChild(n),k.appendChild(m),j.appendChild(k),e.appendChild(j),e}function n(a,b){var d=document.createElement("tr"),e=document.createElement("td");e.className=aa,e.colSpan=3,e.innerHTML=c.instant("lessonplan.modulehours")+": "+b.totalHours,d.appendChild(e);var f=document.createElement("td");return f.className=aa,f.colSpan=a.formState.shownWeeksCount,d.appendChild(f),d}function o(a,b){var f=document.createElement("tr"),g=document.createElement("td");g.id=H+b.id,g.className=aa,g.colSpan=3,g.style="font-weight: bold;",g.innerHTML=b.nameEt,f.appendChild(g);var h=document.createElement("td");h.className=aa,h.colSpan=a.formState.shownWeeksCount;for(var i=d(b.themes),j=0;j<i.length;j++){var k=i[j],l="";j>0&&(l+=", &nbsp;");var m="";for(var n in k.hours)if(k.hours.hasOwnProperty(n)){var o=e(a.formState.capacityTypes,n);""!==m&&o&&(m+="/"),o&&(m+=o.value.toUpperCase()+k.hours[n])}var p=document.createElement("span");l+=k.nameEt+" "+k.credits+" "+c.instant("lessonplan.credits")+" ("+m+")",l+="&nbsp;",p.innerHTML=l,h.appendChild(p)}return f.appendChild(h),f}function p(a,b,d,e){for(var f=h(a.formState.capacityTypes,a.formState.moduleTotals[d.id]),g=0;g<f.length;g++){var i=f[g],l=document.createElement("tr");if(l.className=ba,0===g){var m=document.createElement("td");m.className=ba,m.rowSpan=Object.keys(f).length+1,m.innerHTML=a.currentLanguageNameField(d)+" "+c.instant("lessonplan.moduleTotal"),l.appendChild(m)}l.appendChild(k(i));var n=M+F+e+F+i.code,o=j(a.formState.moduleTotals[d.id].__);if(l.appendChild(y(n,o)),a.atLeastOneShownPeriod||l.appendChild(B()),a.formState.showWeeks)for(var p=0;p<a.formState.weekNrs.length;p++){var r=a.formState.weekNrs[p];if(r.show){var s=N+F+e+F+i.code+F+p,t=j(a.formState.moduleTotals[d.id][i.code][p]);l.appendChild(z(s,t,r))}}else for(var u=0;u<a.formState.studyPeriods.length;u++){var v=a.formState.studyPeriods[u];if(v._selected){var w=S+F+e+F+i.code+F+u,x=j(a.formState.spModuleTotals[d.id][i.code][u]);l.appendChild(A(w,x,v))}}b.appendChild(l)}b.appendChild(q(a,d,e,f))}function q(a,b,d,e){var f=document.createElement("tr");if(f.className=ba,0===e.length){var g=document.createElement("td");g.innerHTML="&nbsp",g.classList.add(ba),g.classList.add(_),f.appendChild(g)}var h=document.createElement("td");h.className=ba,h.innerHTML=c.instant("lessonplan.total"),f.appendChild(h);var i=O+F+d,k=j(a.formState.moduleTotals[b.id].__);if(f.appendChild(y(i,k)),a.atLeastOneShownPeriod||f.appendChild(B()),a.formState.showWeeks)for(var l=0;l<a.formState.weekNrs.length;l++){var m=a.formState.weekNrs[l];if(m.show){var n=P+F+d+F+F+l,o=j(a.formState.moduleTotals[b.id]._._[l]);f.appendChild(z(n,o,m))}}else for(var p=0;p<a.formState.studyPeriods.length;p++){var q=a.formState.studyPeriods[p];if(q._selected){var r=T+F+d+F+p,s=j(a.formState.spModuleTotals[b.id]._._[p]);f.appendChild(A(r,s,q))}}return f}function r(a,b){for(var d=h(a.formState.capacityTypes,a.formState.grandTotals),e=0;e<d.length;e++){var f=d[e],g=document.createElement("tr");if(g.style="background: rgb(238, 238, 238)",g.className=ba,0===e){var i=document.createElement("td");i.rowSpan=Object.keys(d).length+1,i.className=ba,i.innerHTML=c.instant("lessonplan.grandTotal"),g.appendChild(i)}g.appendChild(k(f));var l=W+F+f.code,m=j(a.formState.grandTotals._[f.code]);if(g.appendChild(y(l,m)),a.atLeastOneShownPeriod||g.appendChild(B()),a.formState.showWeeks)for(var n=0;n<a.formState.weekNrs.length;n++){var o=a.formState.weekNrs[n];if(o.show){var p=V+F+f.code+F+n,q=j(a.formState.grandTotals[f.code][n]);g.appendChild(z(p,q,o))}}else for(var r=0;r<a.formState.studyPeriods.length;r++){var t=a.formState.studyPeriods[r];if(t._selected){var u=U+F+f.code+F+r,v=j(a.formState.capGrandTotalsSp[f.code][r]);g.appendChild(A(u,v,t))}}b.appendChild(g)}b.appendChild(s(a))}function s(a){var b=document.createElement("tr");b.style="background: rgb(238, 238, 238)",b.className=ba;var d=document.createElement("td");d.className=ba,d.innerHTML=c.instant("lessonplan.total"),b.appendChild(d);var e=Z,f=j(a.formState.grandTotals.__);if(b.appendChild(y(e,f)),a.atLeastOneShownPeriod||b.appendChild(B()),a.formState.showWeeks)for(var g=0;g<a.formState.weekNrs.length;g++){var h=a.formState.weekNrs[g];if(h.show){var i=Y+F+g,k=j(a.formState.grandTotals._._[g]);b.appendChild(z(i,k,h))}}else for(var l=0;l<a.formState.studyPeriods.length;l++){var m=a.formState.studyPeriods[l];if(m._selected){var n=X+F+l,o=j(a.formState.grandTotalsSp[l]);b.appendChild(A(n,o,m))}}return b}function t(a,b,c,d){var e=a.record.modules[b].journals[c],f=e.requiredLessons[d]?e.requiredLessons[d]:0;return a.formState.journalTotals[e.id][d]!==f?"color: red":"color: inherit"}function u(a,b){b.addEventListener("input",function(){var c=this.name.split(F),d=c[1],e=c[2],f=c[3],g=c[4],h=a.record.modules[d],i=h.journals[e],k=""===this.value||l(this.value);b.style=k?null:"border: 1px solid rgb(221,44,0);",i.hours[f][g]=k?this.value:null,a.updateTotals(i,f,g),i.hours[f][g]=this.value,a.updateTotals(i,f,g);var m=document.getElementById(J+F+i.id+F+g);if(m.innerHTML=j(a.formState.journalTotals[i.id]._[g]),a.formState.showTotals){var n=document.getElementById(N+F+d+F+f+F+g);n.innerHTML=j(a.formState.moduleTotals[h.id][f][g]);var o=document.getElementById(P+F+d+F+F+g);o.innerHTML=j(a.formState.moduleTotals[h.id]._._[g])}var p=document.getElementById(V+F+f+F+g);p.innerHTML=j(a.formState.grandTotals[f][g]);var q=document.getElementById(Y+F+g);q.innerHTML=j(a.formState.grandTotals._._[g]),w(a,h,i,d,e,f)}),b.addEventListener("mousewheel",function(a){a.preventDefault()})}function v(a,b){b.addEventListener("input",function(){var c=this.name.split(F),d=c[1],e=c[2],f=c[3],g=c[4],h=a.record.modules[d],i=h.journals[e],k=""===this.value||l(this.value);i.spHours[f][g]=k?this.value:null,b.style=k?null:"border: 1px solid rgb(221,44,0);",a.updateLessonCountByStudyPeriod(i,f,g);var m=document.getElementById(R+F+i.id+F+g);if(m.innerHTML=j(a.formState.journalTotals[i.id]._spTotals[g]),a.formState.showTotals){var n=document.getElementById(S+F+d+F+f+F+g);n.innerHTML=j(a.formState.spModuleTotals[h.id][f][g]);var o=document.getElementById(T+F+d+F+g);o.innerHTML=j(a.formState.spModuleTotals[h.id]._._[g])}var p=document.getElementById(U+F+f+F+g);p.innerHTML=j(a.formState.capGrandTotalsSp[f][g]);var q=document.getElementById(X+F+g)[0];q.innerHTML=j(a.formState.grandTotalsSp[g]),w(a,h,i,d,e,f)}),b.addEventListener("mousewheel",function(a){a.preventDefault()})}function w(a,b,c,d,e,f){var g=document.getElementById(K+F+d+F+e+F+f);g.style=t(a,d,e,f),g.innerHTML=j(a.formState.journalTotals[c.id][f]);var h=document.getElementById(L+F+c.id);if(h.innerHTML=j(a.formState.journalTotals[c.id].__),a.formState.showTotals){var i=document.getElementById(M+F+d+F+f);i.innerHTML=j(a.formState.moduleTotals[b.id]._[f]);var k=document.getElementById(O+F+d);k.innerHTML=j(a.formState.moduleTotals[b.id].__)}var l=document.getElementById(W+F+f);l.innerHTML=j(a.formState.grandTotals._[f]);var m=document.getElementById(Z);m.innerHTML=j(a.formState.grandTotals.__)}function x(a,b){var d=document.createElement("tr");d.className=ba;var e=document.createElement("td");e.className=ba,e.innerHTML=c.instant("lessonplan.total"),d.appendChild(e);var f=L+F+b.id,g=j(a.formState.journalTotals[b.id].__);if(d.appendChild(y(f,g)),a.atLeastOneShownPeriod||d.appendChild(B()),a.formState.showWeeks)for(var h=0;h<a.formState.weekNrs.length;h++){var i=a.formState.weekNrs[h];if(i.show){var k=J+F+b.id+F+h,l=j(a.formState.journalTotals[b.id]._[h]);d.appendChild(z(k,l,i))}}else for(var m=0;m<a.formState.studyPeriods.length;m++){var n=a.formState.studyPeriods[m];if(n._selected){var o=R+F+b.id+F+m,p=j(a.formState.journalTotals[b.id]._spTotals[m]);d.appendChild(A(o,p,n))}}return d}function y(a,b,c){var d=document.createElement("td");return d.id=a,d.innerHTML=b,d.classList.add(_),d.classList.add(aa),d.classList.add(ba),d.style=c,d}function z(a,b,c){var d=document.createElement("td");return d.id=a,d.innerHTML=b,d.classList.add(_),c.endOfPeriod&&d.classList.add(aa),d}function A(a,b,c){var d=document.createElement("td");return d.id=a,d.innerHTML=b,d.colSpan=c.weekNrs.length,d.classList.add(_),d.classList.add(aa),d}function B(){var a=document.createElement("td");return a.colSpan=1,a.classList.add(aa),a}var C={},D="/lessonplans",E=/^\d+$/,F="/",G="module",H="journal",I="weekHour",J="weekTotal",K="capacityTotal",L="journalTotal",M="moduleCapacityTotal",N="moduleWeekHour",O="moduleTotal",P="moduleWeekTotal",Q="periodHour",R="periodTotal",S="modulePeriodHour",T="modulePeriodTotal",U="grandPeriodTotal",V="grandWeekTotal",W="grandCapacityTotal",X="grandPeriodTotal",Y="grandWeekTotal",Z="grandTotal",$="md-primary change-button",_="center",aa="dividerBorder",ba="fix";return C.generateLessonPlan=function(b){var d=document.getElementById("lessonplan-table-body");d.innerHTML="";for(var e=0;e<b.record.modules.length;e++){var f=b.record.modules[e];d.appendChild(m(b,f,e)),d.appendChild(n(b,f));for(var l=0;l<f.journals.length;l++){var q=f.journals[l];d.appendChild(o(b,q));for(var s=h(b.formState.capacityTypes,q.hours),w=0;w<s.length;w++){var z=s[w],A=document.createElement("tr");if(A.className=ba,0===w){var C=document.createElement("td");C.className=ba,C.rowSpan=Object.keys(s).length+1;var D=document.createElement("div");D.className="layout-column";var E=document.createElement("div"),G=document.createElement("span");G.style="float: left";for(var H=0;H<q.studentGroups.length;H++){var J=q.studentGroups[H];if(b.record.studentGroupCode!==J){var L=document.createElement("div");L.innerHTML=J,G.appendChild(L)}}q.studentGroups.length>1&&q.teachers.length>0&&G.appendChild(document.createElement("br"));for(var M=0;M<q.teachers.length;M++){var N=q.teachers[M],O=document.createElement("div");O.title=c.instant("lessonplan.teacherLoad",i(b.formState.studyPeriods,b.formState.teachers,N.teacher.id)),O.innerHTML="",O.innerHTML=N.teacher.nameEt,G.appendChild(O)}E.appendChild(G);var P=document.createElement("span");P.style="float: right";var R=document.createElement("a");if(R.className=$,R.innerHTML=c.instant("main.button.change"),R.href=g(q),P.appendChild(R),E.appendChild(P),D.appendChild(E),C.appendChild(D),C.appendChild(document.createElement("br")),"PAEVIK_GRUPI_JAOTUS_1"!==q.groupProportion.code){var S=document.createElement("div");S.className="layout-row",S.innerHTML=c.instant("lessonplan.journal.groupProportion")+"&nbsp;"+b.currentLanguageNameField(q.groupProportion),C.appendChild(S)}A.appendChild(C)}A.appendChild(k(z));var T=K+F+e+F+l+F+z.code,U=j(b.formState.journalTotals[q.id][z.code]),V=t(b,e,l,z.code),W=y(T,U,V),X=q.requiredLessons[z.code]?q.requiredLessons[z.code]:0;if(W.title=c.instant("lessonplan.planned")+" "+X,A.appendChild(W),b.atLeastOneShownPeriod||A.appendChild(B()),b.formState.showWeeks)for(var Y=0;Y<b.formState.weekNrs.length;Y++){var Z=b.formState.weekNrs[Y];if(Z.show){var ca=document.createElement("td");ca.classList.add(_),Z.endOfPeriod&&ca.classList.add(aa);var da=document.createElement("input");da.setAttribute("type","number"),da.setAttribute("name",I+F+e+F+l+F+z.code+F+Y),da.setAttribute("value",q.hours[z.code][Y]),u(b,da),ca.appendChild(da),A.appendChild(ca)}}else for(var ea=0;ea<b.formState.studyPeriods.length;ea++){var fa=b.formState.studyPeriods[ea];if(fa._selected){var ga=document.createElement("td");ga.colSpan=fa.weekNrs.length,ga.classList.add(_),ga.classList.add(aa);var ha=document.createElement("input");ha.setAttribute("type","number"),ha.setAttribute("name",Q+F+e+F+l+F+z.code+F+ea),ha.setAttribute("value",q.spHours[z.code][ea]),v(b,ha),ga.appendChild(ha),A.appendChild(ga)}}d.appendChild(A)}d.appendChild(x(b,q))}b.formState.showTotals&&p(b,d,f,e)}r(b,d),d=a(d)(b)},C.getUniqueJournalThemes=function(a){d(a)},C.getCapacityByCode=function(a,b){e(b)},C}]),angular.module("hitsaOis").factory("Menu",["$location","$rootScope","$route",function(a,b,c){function d(){v.push({name:"main.menu.academicCalendar.label",type:"link",url:"/academicCalendar",icon:"date_range"}),v.push({name:"main.menu.viewTimetable.label",type:"link",url:"/timetable/generalTimetableByGroup",icon:"access_time"}),v.push({name:"main.menu.curriculum.label",type:"toggle",icon:"format_list_bulleted",pages:[{name:"main.menu.basemodule.label",url:"/basemodule?_menu",icon:"format_list_bulleted",studyLevel:{vocational:!0}},{name:"main.menu.curriculum.schoolCurriculums",url:"/curriculum?_menu",icon:"format_list_bulleted"},{name:"main.menu.curriculum.subjects",url:"/subject?_menu",studyLevel:{higher:!0},icon:"subject"},{name:"main.menu.curriculum.stateCurriculums",url:"/stateCurriculum?_menu",icon:"playlist_add_check",studyLevel:{vocational:!0}}]}),v.push({name:"main.menu.student.label",type:"toggle",icon:"person",pages:[{name:"main.menu.student.studentInfo",url:"/students?_menu",icon:"person"},{name:"main.menu.student.studentGroups",url:"/studentgroups?_menu",icon:"group"},{name:"main.menu.student.absences",url:"/absences?_menu",icon:"announcement",studyLevel:{vocational:!0}},{name:"main.menu.study.groupAbsences",url:"/groupAbsences?_menu",icon:"announcement",studyLevel:{vocational:!0}}]}),v.push({nameHigher:"main.menu.teachers.labelHigher",nameVocational:"main.menu.teachers.labelVocational",type:"link",url:"/teachers?_menu",icon:"supervisor_account"}),v.push({name:"main.menu.documents.label",type:"toggle",icon:"library_books",pages:[{name:"main.menu.documents.applications",url:"/applications?_menu",icon:"font_download"},{name:"main.menu.documents.directives",url:"/directives?_menu",icon:"description"},{name:"main.menu.documents.certificates",url:"/certificate?_menu",icon:"folder_shared"},{name:"main.menu.scholarships.grantApplications",url:"/scholarships/applications/grants?_menu",icon:"euro_symbol",studyLevel:{vocational:!0}},{name:"main.menu.scholarships.scholarshipApplications",url:"/scholarships/applications/scholarships?_menu",icon:"euro_symbol",studyLevel:{higher:!0}},{name:"main.menu.scholarships.drGrantApplications",url:"/scholarships/applications/drGrants?_menu",icon:"functions",studyLevel:{doctoral:!0}},{name:"main.menu.documents.practiceContracts",url:"/contracts?_menu",icon:"assignment"},{name:"main.menu.documents.representativeApplications",url:"/studentrepresentatives/applications?_menu",icon:"explicit"}]}),v.push({name:"main.menu.study.label",type:"toggle",icon:"work",pages:[{name:"main.menu.study.declarations",url:"/declarations?_menu",icon:"perm_contact_calendar",studyLevel:{higher:!0}},{name:"main.menu.study.journal.journalsVocational",url:"/journals?_menu",icon:"chrome_reader_mode",studyLevel:{vocational:!0}},{name:"main.menu.study.practiceJournal.label",url:"/practiceJournals?_menu",icon:"assignment_ind"},{name:"main.menu.study.material.higher",url:"/studyMaterial/higher?_menu",icon:"attach_file",studyLevel:{higher:!0}},{name:"main.menu.study.material.vocational",url:"/studyMaterial/vocational?_menu",
icon:"attach_file",studyLevel:{vocational:!0}},{name:"main.menu.study.examTimes",url:"/examTimes?_menu",icon:"watch",studyLevel:{higher:!0}},{name:"main.menu.study.moduleProtocol.label",url:"/moduleProtocols?_menu",icon:"border_color",studyLevel:{vocational:!0}},{name:"main.menu.study.protocol.search",url:"/higherProtocols?_menu",icon:"create",studyLevel:{higher:!0}},{name:"main.menu.study.apel",url:"/apelApplication?_menu",icon:"transfer_within_a_station"}]}),v.push({name:"main.menu.studyPreparation.label",type:"toggle",icon:"settings",pages:[{name:"main.menu.studyPreparation.subjectTeacher",url:"/subjectStudyPeriods?_menu",icon:"nature_people",studyLevel:{higher:!0}},{name:"main.menu.studyPreparation.studyYearSchedule.legend",url:"/studyYearScheduleLegend?_menu",icon:"event_note",studyLevel:{vocational:!0}},{name:"main.menu.studyPreparation.studyYearSchedule.edit",url:"/studyYearSchedule?_menu",icon:"event_available",studyLevel:{vocational:!0}},{name:"main.menu.studyPreparation.lessonTime",id:"timetableLessonTimeSearch",url:"/timetable/lessonTime/search?_menu",icon:"notifications_active"},{name:"main.menu.studyPreparation.lessonplans.vocational",id:"timetableLessonTimeSearch",url:"/lessonplans/vocational?_menu",icon:"zoom_out_map",studyLevel:{vocational:!0}},{name:"main.menu.studyPreparation.subjectStudyPeriods.plans",url:"/subjectStudyPeriodPlans?_menu",icon:"fitness_center",studyLevel:{higher:!0}},{name:"main.menu.studyPreparation.subjectStudyPeriods.label",url:"/subjectStudyPeriods/studentGroups?_menu",icon:"open_with",studyLevel:{higher:!0}},{name:"main.menu.studyPreparation.timetableManagement.label",url:"/timetable/timetableManagement?_menu",icon:"update"},{name:"main.menu.studyPreparation.events.label",url:"/lessonplans/events?_menu",icon:"star_border"}]}),v.push({name:"main.menu.reports.label",type:"toggle",icon:"search",pages:[{name:"main.menu.reports.students",url:"/reports/students/students?_menu",icon:"person"},{name:"main.menu.reports.studentstatistics",url:"/reports/students/statistics?_menu",icon:"blur_circular"},{name:"main.menu.reports.studentstatisticsbyperiod",url:"/reports/students/statistics/byperiod?_menu",icon:"equalizer"},{name:"main.menu.reports.curriculumscompletion",url:"/reports/curriculums/completion?_menu",icon:"perm_contact_calendar"},{nameHigher:"main.menu.reports.teachersLoadVocationalHigher",nameVocational:"main.menu.reports.teachersLoadVocational",url:"/reports/teachers/load/vocational?_menu",icon:"grain",studyLevel:{vocational:!0}},{name:"main.menu.reports.teachersLoadHigher",url:"/reports/teachers/load/higher?_menu",icon:"gradient",studyLevel:{higher:!0}},{name:"main.menu.reports.vota",url:"/reports/vota?_menu",icon:"transfer_within_a_station"},{name:"main.menu.reports.studentGroupTeacher",url:"/reports/studentgroupteacher?_menu",icon:"accessibility_new",studyLevel:{vocational:!0}}]}),v.push({name:"main.menu.graduation.label",type:"toggle",icon:"school",pages:[{name:"main.menu.graduation.committees",url:"/committees/KOMISJON_K?_menu",icon:"record_voice_over"},{name:"main.menu.graduation.finalThesis",url:"/finalThesis?_menu",icon:"receipt"},{name:"main.menu.graduation.forms",url:"/forms?_menu",icon:"format_bold"},{name:"main.menu.graduation.documentsPrintHigher",url:"/documents/diplomas?_menu",icon:"print",studyLevel:{higher:!0}},{name:"main.menu.graduation.documentsPrintVocational",url:"/documents/diplomas/vocational?_menu",icon:"print",studyLevel:{vocational:!0}},{name:"main.menu.graduation.documents",url:"/documents?_menu",icon:"print"},{name:"main.menu.graduation.finalProtocolsHigher",url:"/finalHigherProtocols?_menu",icon:"create",studyLevel:{higher:!0}},{name:"main.menu.graduation.finalProtocolsVocational",url:"/finalVocationalProtocols?_menu",icon:"border_color",studyLevel:{vocational:!0}}]}),v.push({name:"main.menu.dataexchange.label",type:"toggle",icon:"swap_vert",pages:[{name:"main.menu.dataexchange.teacherinfoExportHigher",id:"teacherinfoExport",url:"/ehis/teacher/export/higher?_menu",icon:"account_box",studyLevel:{higher:!0}},{name:"main.menu.dataexchange.teacherinfoExportVocational",id:"teacherinfoExport",url:"/ehis/teacher/export/vocational?_menu",icon:"account_circle",studyLevel:{vocational:!0}},{name:"main.menu.dataexchange.studentinfoExport",url:"/ehis/student/export?_menu",icon:"person"},{name:"main.menu.dataexchange.kutseregister",url:"/occupationcertificate/import?_menu",icon:"android"},{name:"main.menu.dataexchange.rtip",url:"/rtip/sync?_menu",icon:"weekend"},{name:"main.menu.dataexchange.ehisLogs",url:"/ehis/logs?_menu",icon:"view_list"},{name:"main.menu.dataexchange.ekisLogs",url:"/ekis/logs?_menu",icon:"view_stream"},{name:"main.menu.dataexchange.kutseregisterLogs",url:"/kutseregister/logs?_menu",icon:"view_day"},{name:"main.menu.dataexchange.rtipLogs",url:"/rtip/logs?_menu",icon:"view_array"},{name:"main.menu.dataexchange.saisLogs",url:"/sais/logs?_menu",icon:"view_module"}]}),v.push({name:"main.menu.reception.label",type:"toggle",icon:"group_add",pages:[{name:"main.menu.reception.saisAdmission.label",id:"receptionSaisAdmissionSearch",url:"/reception/saisAdmission/search?_menu",icon:"brightness_high"},{name:"main.menu.reception.saisApplication.label",id:"receptionSaisApplicationSearch",url:"/reception/saisApplication/search?_menu",icon:"spellcheck"},{name:"main.menu.reception.saisAdmission.importSais",id:"receptionSaisAdmissionImport",url:"/reception/saisAdmission/import?_menu",icon:"brightness_low"},{name:"main.menu.reception.saisApplication.importSais",id:"receptionSaisApplicationImport",url:"/reception/saisApplication/import?_menu",icon:"brightness_auto"}]}),v.push({name:"main.menu.settings.label",type:"toggle",icon:"build",pages:[{name:"main.menu.settings.studyYears",url:"/school/studyYears",icon:"format_align_center"},{name:"main.menu.settings.studyLevels",url:"/school/studyLevels",icon:"layers"},{name:"main.menu.settings.capacityTypes",url:"/school/capacityTypes",icon:"bubble_chart"},{name:"main.menu.settings.generalmessages",url:"/generalmessages?_menu",icon:"notifications_none"},{name:"main.menu.scholarships.grants",url:"/scholarships/grants?_menu",icon:"euro_symbol",studyLevel:{vocational:!0}},{name:"main.menu.scholarships.scholarships",url:"/scholarships/scholarships?_menu",icon:"euro_symbol",studyLevel:{higher:!0}},{name:"main.menu.scholarships.drGrants",url:"/scholarships?_menu",icon:"functions",studyLevel:{doctoral:!0}},{name:"main.menu.settings.scholarshipCommittees",url:"/committees/KOMISJON_T?_menu",icon:"record_voice_over"},{name:"main.menu.settings.messageTemplates",url:"/messageTemplate?_menu",icon:"blur_linear"},{name:"main.menu.settings.documentcoordinators",url:"/directives/coordinators?_menu",icon:"recent_actors"},{name:"main.menu.settings.finaldocsigners",url:"/school/finaldocsigners?_menu",icon:"recent_actors"},{nameHigher:"main.menu.settings.teacheroccupationsHigher",nameVocational:"main.menu.settings.teacheroccupationsVocational",url:"/school/teacheroccupations?_menu",icon:"business_center"},{name:"main.menu.settings.buildings",url:"/rooms/search?_menu",icon:"business"},{name:"main.menu.settings.departments",url:"/school/departments?_menu",icon:"device_hub"},{name:"main.menu.settings.users",id:"users",url:"/persons?_menu",icon:"wc"},{name:"main.menu.settings.apelSchools",url:"/apelSchools?_menu",icon:"location_city"},{name:"main.menu.settings.apelCommittees",url:"/committees/KOMISJON_V?_menu",icon:"record_voice_over"},{name:"main.menu.settings.studentGroupYearTransfer",url:"/studentGroupYearTransfer?_menu",icon:"sync"}]})}function e(a){v.push({name:"main.menu.curriculums.label",url:"/curriculum?_menu",type:"link",icon:"format_list_bulleted"}),v.push({name:"main.menu.subjects.label",url:"/subject?_menu",type:"link",icon:"subject",studyLevel:{higher:!0}}),v.push({name:"main.menu.timetableAndEvents.label",type:"toggle",icon:"access_time",pages:[{name:"main.menu.timetableAndEvents.timetable",url:"/timetable/personalGeneralTimetable?_menu",icon:"access_time"},{name:"main.menu.timetableAndEvents.events",url:"/lessonplans/events?_menu",icon:"star_border"}]}),v.push({name:"main.menu.myData.label",url:"/teachers/myData",type:"link",icon:"person_outline"}),v.push({name:"main.menu.academicCalendar.label",type:"link",url:"/academicCalendar",icon:"date_range"}),v.push({name:"main.menu.studyPreparation.studyYearSchedule.edit",url:"/studyYearSchedule?_menu",type:"link",icon:"event_available",studyLevel:{vocational:!0}}),v.push({name:"main.menu.study.label",type:"toggle",icon:"work",pages:[{name:"main.menu.study.examTimes",url:"/examTimes?_menu",icon:"watch",studyLevel:{higher:!0}},{name:"main.menu.study.absences",url:"/absences?_menu",icon:"announcement",studyLevel:{vocational:!0}},{name:"main.menu.study.groupAbsences",url:"/groupAbsences?_menu",icon:"announcement",studyLevel:{vocational:!0}},{name:"main.menu.study.journal.journalsVocational",url:"/journals?_menu",icon:"chrome_reader_mode",studyLevel:{vocational:!0}},{name:"main.menu.study.subjectTeacher",url:"/subjectStudyPeriods?_menu",icon:"nature_people",studyLevel:{higher:!0}},{name:"main.menu.subjectProgram.label",url:"/subjectProgram?_menu",icon:"description"},{name:"main.menu.study.material.higher",url:"/studyMaterial/higher?_menu",icon:"attach_file",studyLevel:{higher:!0}},{name:"main.menu.study.material.vocational",url:"/studyMaterial/vocational?_menu",icon:"attach_file",studyLevel:{vocational:!0}},{name:"main.menu.study.loads",url:"/lessonplans/vocational/byteacher?_menu",icon:"zoom_out_map"},{name:"main.menu.study.students",url:"/students?_menu",icon:"person"},{name:"main.menu.study.moduleProtocol.label",url:"/moduleProtocols?_menu",icon:"border_color",studyLevel:{vocational:!0}},{name:"main.menu.study.protocol.search",url:"/higherProtocols?_menu",icon:"create",studyLevel:{higher:!0}}]}),v.push({name:"main.menu.scholarships.grantApplications",url:"/scholarships/applications/grants?_menu",type:"link",icon:"euro_symbol",studyLevel:{vocational:!0}}),v.push({name:"main.menu.scholarships.scholarshipApplications",url:"/scholarships/applications/scholarships?_menu",type:"link",icon:"euro_symbol",studyLevel:{higher:!0}}),v.push({name:"main.menu.scholarships.drGrantApplications",url:"/scholarships/applications/drGrants?_menu",type:"link",icon:"functions",studyLevel:{doctoral:!0}}),v.push({name:"main.menu.practiceAndGraduation.label",type:"toggle",icon:"school",pages:[{name:"main.menu.practiceAndGraduation.practiceJournals",url:"/practiceJournals?_menu",icon:"assignment_ind"},{name:"main.menu.practiceAndGraduation.committees",url:"/committees/KOMISJON_K?_menu",icon:"record_voice_over"},{name:"main.menu.practiceAndGraduation.finalThesis",url:"/finalThesis?_menu",icon:"receipt"},{name:"main.menu.graduation.finalProtocolsHigher",url:"/finalHigherProtocols?_menu",icon:"create",studyLevel:{higher:!0}},{name:"main.menu.graduation.finalProtocolsVocational",url:"/finalVocationalProtocols?_menu",icon:"border_color",studyLevel:{vocational:!0}}]}),v.push({name:"main.menu.apel.label",type:"link",url:"/apelApplication?_menu",icon:"transfer_within_a_station"}),a.teacherGroupIds.length>0&&v.push({name:"main.menu.studentGroupTeacher.label",type:"link",url:"/reports/studentgroupteacher?_menu",icon:"accessibility_new",studyLevel:{vocational:!0}})}function f(){v.push({name:"main.menu.curriculum.label",type:"toggle",icon:"format_list_bulleted",pages:[{name:"main.menu.curriculum.stateCurriculums",url:"/stateCurriculum?_menu",icon:"playlist_add_check"}]}),v.push({name:"main.menu.mainData.label",type:"toggle",icon:"build",pages:[{name:"main.menu.mainData.schools",url:"/school?_menu",icon:"account_balance"},{name:"main.menu.mainData.classifiers",url:"/classifier?_menu",icon:"format_list_numbered"},{name:"main.menu.mainData.saisClassifiers",url:"/saisClassifier?_menu",icon:"brightness_medium"},{name:"main.menu.mainData.occupationStandards",url:"/occupationstandard?_menu",icon:"android"},{name:"main.menu.dataexchange.kutseregisterLogs",url:"/kutseregister/logs?_menu",icon:"view_module"},{name:"main.menu.mainData.users",url:"/persons?_menu",icon:"wc"}]}),v.push({name:"main.menu.timetableLink.label",type:"link",url:"/timetables?_menu",icon:"access_time"})}function g(a){v.push({name:"main.menu.curriculums.label",url:"/curriculum?_menu",type:"link",icon:"format_list_bulleted"}),v.push({name:"main.menu.subjects.label",url:"/subject?_menu",type:"link",studyLevel:{higher:!0},icon:"subject"}),v.push({name:"main.menu.timetableLink.label",type:"link",url:"/timetable/personalGeneralTimetable?_menu",icon:"access_time"}),v.push({name:"main.menu.myData.label",url:"/students/myData",type:"link",icon:"person_outline"}),v.push({name:"main.menu.academicCalendar.label",type:"link",url:"/academicCalendar",icon:"date_range"}),v.push({name:"main.menu.studyPreparation.studyYearSchedule.edit",url:"/studyYearSchedule?_menu",type:"link",icon:"event_available",studyLevel:{vocational:!0}}),v.push({name:"main.menu.myStudyInformation.label",type:"toggle",icon:"work",pages:[{name:"main.menu.myStudyInformation.journal",url:"/students/journals",icon:"chrome_reader_mode",studyLevel:{vocational:!0}},{name:"main.menu.myStudyInformation.practiceJournals",url:"/practiceJournals?_menu",icon:"assignment_ind"},{name:"main.menu.myStudyInformation.results",url:"/students/myResults",icon:"timeline"},{name:"main.menu.myStudyInformation.declaration",url:"/declaration/current/view",icon:"perm_contact_calendar",studyLevel:{higher:!0}},{name:"main.menu.myStudyInformation.examRegistration",url:"/examRegistration?_menu",icon:"border_color",studyLevel:{higher:!0}},{name:"main.menu.myStudyInformation.finalThesisInput",url:"/finalThesis?_menu",icon:"receipt"},{name:"main.menu.myStudyInformation.otherStudents",url:"/students?_menu",icon:"person"}]}),v=v.concat(k(a)),v.push({name:"main.menu.documents.label",type:"toggle",icon:"library_books",pages:[{name:"main.menu.documents.applications",url:"/applications/student?_menu",icon:"font_download"},{name:"main.menu.documents.certificates",url:"/certificate?_menu",icon:"folder_shared"},{name:"main.menu.documents.practiceContracts",url:"/contracts?_menu",icon:"assignment"},{name:"main.menu.documents.apel",url:"/apelApplication?_menu",icon:"transfer_within_a_station"}]})}function h(){v.push({name:"main.menu.curriculum.label",type:"toggle",icon:"format_list_bulleted",pages:[{name:"main.menu.curriculum.schoolCurriculums",url:"/curriculum?_menu",icon:"format_list_bulleted"},{name:"main.menu.curriculum.stateCurriculums",url:"/stateCurriculum?_menu",icon:"playlist_add_check"}]}),v.push({name:"main.menu.teachers.labelVocational",type:"link",url:"/teachers?_menu",icon:"supervisor_account"}),v.push({name:"main.menu.timetableLink.label",type:"link",url:"/timetables?_menu",icon:"access_time"})}function i(){v.push({name:"main.menu.curriculums.label",url:"/curriculum?_menu",type:"link",icon:"format_list_bulleted"}),v.push({name:"main.menu.subjects.label",url:"/subject?_menu",type:"link",studyLevel:{higher:!0},icon:"subject"}),v.push({name:"main.menu.timetableLink.label",type:"link",url:"/timetable/personalGeneralTimetable?_menu",icon:"access_time"}),v.push({name:"main.menu.studentRepresentative.label",type:"link",url:"/students/myData",icon:"person_outline"}),v.push({name:"main.menu.academicCalendar.label",type:"link",url:"/academicCalendar",icon:"date_range"}),v.push({name:"main.menu.studyPreparation.studyYearSchedule.edit",url:"/studyYearSchedule?_menu",type:"link",icon:"event_available",studyLevel:{vocational:!0}}),v.push({name:"main.menu.studentStudyInformation.label",type:"toggle",icon:"work",pages:[{name:"main.menu.studentStudyInformation.journal",url:"/students/journals",icon:"chrome_reader_mode",studyLevel:{vocational:!0}},{name:"main.menu.studentStudyInformation.practiceJournal",url:"/practiceJournals?_menu",icon:"assignment_ind"},{name:"main.menu.studentStudyInformation.results",url:"/students/myResults",icon:"timeline"}]}),v.push({name:"main.menu.documents.label",type:"toggle",icon:"library_books",pages:[{name:"main.menu.documents.applications",url:"/applications/student?_menu",icon:"font_download"},{name:"main.menu.documents.certificates",url:"/certificate?_menu",icon:"folder_shared"}]})}function j(){v.push({name:"main.menu.academicCalendar.label",type:"link",url:"/academicCalendars",icon:"date_range"}),v.push({name:"main.menu.timetableLink.label",type:"link",url:"/timetables",icon:"access_time"}),v.push({name:"main.menu.curriculum.schoolCurriculums",type:"link",url:"/curriculums?_menu",icon:"list"}),v.push({name:"main.menu.curriculum.stateCurriculums",type:"link",url:"/stateCurriculum/public?_menu",icon:"playlist_add_check"}),v.push({name:"main.menu.subjects.label",url:"/subject/public?_menu",type:"link",icon:"subject"})}function k(a){var b=[];return a.higher?(b.push({name:"main.menu.scholarships.scholarships",type:"link",url:"/scholarships/myData/scholarships?_menu",icon:"euro_symbol"}),b.push({name:"main.menu.scholarships.drGrants",type:"link",url:"/scholarships/myData/drGrants?_menu",icon:"functions",studyLevel:{doctoral:!0}})):b.push({name:"main.menu.scholarships.grants",type:"link",icon:"euro_symbol",url:"/scholarships/myData/grants?_menu"}),b}function l(){var b=a.path();if("/"===b)return u.selectSection(null),void u.selectPage(null,null);if("/messages/received"===b){var c={name:"message.messages",type:"link",url:b};return u.selectSection(c),void u.selectPage(c,c)}if("/studentrepresentatives/applications/new"===b){var c={name:"student.representative.title",type:"link",url:b};return u.selectSection(c),void u.selectPage(c,c)}for(var d=function(a,c){return c.url.replace(/(\?_menu)$/,"")===b?(u.selectSection(a),u.selectPage(a,c),!0):!1},e=!1,f=0;f<w.length&&!e;f++){var g=w[f];if(g.children)for(var h=0;h<g.children.length&&!e;h++){var i=g.children[h];if(i.pages)for(var j=0;j<i.pages.length&&!e;j++)e=d(i,i.pages[j])}else if(g.pages)for(var k=0;k<g.pages.length&&!e;k++)e=d(g,g.pages[k]);else"link"===g.type&&(e=d(g,g))}}function m(a,b,d){var e=!1,f=a.url.replace(/(\?_menu)$/,""),g=c.routes,h=null;for(var i in g)if(g.hasOwnProperty(i)&&g[i].regexp&&g[i].regexp.test(f)){h=g[i];break}if(h&&h.hasOwnProperty("data")){if(h=h.data.authorizedRoles,angular.isFunction(h))e=h(d,b);else if(-1!==h.lastIndexOf(""))e=!0;else for(var j=0;j<h.length;j++)if(-1!==b.indexOf(h[j])){e=!0;break}}else e=!0;return e}function n(a,b){return angular.isDefined(a.studyLevel)&&angular.isDefined(b.school)&&null!==b.school?b.higher&&a.studyLevel.higher||b.vocational&&a.studyLevel.vocational||b.doctoral&&a.studyLevel.doctoral:!0}function o(a,b,c,d){if(b.pages.length>0)for(var e=0;e<b.pages.length;e++)q(a,b.pages[e],c,d);a.length>0&&w.push({name:r(b,d),type:"toggle",pages:a,icon:b.icon})}function p(a,b,c){m(a,b,c)&&a.url&&n(a,c)&&w.push({name:r(a,c),type:a.type,url:a.url,icon:a.icon})}function q(a,b,c,d){m(b,c,d)&&b.url&&n(b,d)&&a.push({name:r(b,d),id:b.id,url:b.url,icon:b.icon})}function r(a,b){return b.higher&&a.nameHigher?a.nameHigher:b.vocational&&a.nameVocational?a.nameVocational:a.name}function s(a){switch(v=[],a.roleCode){case"ROLL_A":d(a);break;case"ROLL_P":f();break;case"ROLL_O":e(a);break;case"ROLL_T":g(a);break;case"ROLL_L":i();break;case"ROLL_V":h();break;default:j()}}function t(a){var b=a.authorizedRoles||[""];w=[],s(a);for(var c=0;c<v.length;c++){var d=[];"toggle"===v[c].type?o(d,v[c],b,a):"link"===v[c].type&&p(v[c],b,a)}u.sections=w,l()}var u,v=[],w=[];return b.$on("$locationChangeSuccess",l),u={sections:{},setMenu:function(a){t(a)},selectSection:function(a){u.openedSection=a},toggleSelectSection:function(a){u.openedSection=u.openedSection===a?null:a},isSectionSelected:function(a){return u.openedSection===a},selectPage:function(a,b){u.currentSection=a,u.currentPage=b},isPageSelected:function(a){return u.currentPage===a}}}]),angular.module("hitsaOis").factory("message",["$mdToast","$translate",function(a,b){function c(b,c){a.show(a.simple().textContent(b).hideDelay(3e3).position("top").toastClass(c))}function d(a,d,e){b(a,e).then(function(a){c(a,d)})["catch"](function(){c(a,d)})}var e={};return e.info=function(a,b){d(a,"toastInfo",b)},e.warn=function(a,b){d(a,"toastWarn",b)},e.error=function(a,b){d(a,"toastError",b)},e.updateSuccess=function(){d("main.messages.update.success","toastInfo")},e}]),angular.module("hitsaOis").factory("oisFileService",["config",function(a){var b={};return b.getFromLfFile=function(a,b){var c={},d=new FileReader;return d.onloadend=function(){c.fname=a.lfFileName,c.ftype=a.lfFile.type,a.lfFile.size>0?c.fdata=d.result.replace("data:"+c.ftype+";base64,",""):c.fdata="",angular.isFunction(b)&&b(c)},d.readAsDataURL(a.lfFile),c},b.getFileUrl=function(a){return"data:"+a.ftype+";base64,"+a.fdata},b.getUrl=function(c,d){return c?c.oisFile?c.id?a.apiUrl+"/oisfile/get/"+d+"/"+c.oisFile.id:b.getFileUrl(c.oisFile):c.id?a.apiUrl+"/oisfile/get/"+d+"/"+c.id:b.getFileUrl(c):void 0},b}]),angular.module("hitsaOis").factory("ProtocolUtils",["$mdDialog","$timeout","$rootScope","$window","QueryUtils","config","message",function(a,b,c,d,e,f,g){function h(d,i,j){e.endpoint(d+"/mobileSignStatus").get(function(k){"SIGNATURE"===k.status?(a.hide(),e.endpoint(d+"/mobileSignFinalize").save({version:c.signVersion},function(a){g.info(i),j(a)})):"OUTSTANDING_TRANSACTION"===k.status?(c.mobileIdPolls++,c.mobileIdPolls<f.mobileIdMaxPolls&&b(function(){h(d,i,j)},f.mobileIdPollInterval)):(a.hide(),g.error("main.messages.error.mobileIdSignFailed"))})}function i(a){if(!angular.isDefined(a)||!angular.isArray(a.protocolStudents))return!1;for(var b=!0,c=0;c<a.protocolStudents.length;c++)if(!angular.isString(a.protocolStudents[c].grade)||0===a.protocolStudents[c].grade.trim().length){b=!1;break}return b}function j(a){if(!angular.isDefined(a)||!angular.isArray(a.protocolStudents))return!1;var b=!0;if("PROTOKOLL_STAATUS_K"===a.status.code)for(var c=0;c<a.protocolStudents.length;c++)if(a.protocolStudents[c].gradeHasChanged){var d=a.protocolStudents[c].addInfo;if(d=void 0!==d&&null!==d?d.split(" ").join(""):null,!d){b=!1;break}}return b}var k={};return k.signBeforeConfirm=function(a,b,c,f){d.hwcrypto.getCertificate({lang:"en"}).then(function(h){b.certificate=h.hex,e.endpoint(a+"/signToConfirm").save(b,function(b){d.hwcrypto.sign(h,{type:"SHA-256",hex:b.digestToSign},{lang:"en"}).then(function(d){e.endpoint(a+"/signToConfirmFinalize").save({signature:d.hex,version:b.version},function(a){g.info(c),f(a)})})})})["catch"](function(a){"user_cancel"===a.message?g.error("main.messages.error.idCardSigningCancelled"):g.error("main.messages.error.readingIdCardFailed")})},k.mobileSignBeforeConfirm=function(d,i,j,k){e.endpoint(d+"/mobileSignToConfirm").save(i,function(e){e.challengeID?(c.signVersion=e.version,a.show({controller:["$scope",function(a){a.challengeID=e.challengeID}],templateUrl:"finalProtocol/templates/final.protocol.mobile.sign.dialog.html",parent:angular.element(document.body),clickOutsideToClose:!1}),c.mobileIdPolls=0,b(h(d,j,k),f.mobileIdInitialDelay)):g.error("main.messages.error.mobileIdSignFailed")})},k.canEditProtocol=function(a,b){return"PROTOKOLL_STAATUS_K"===b.status.code?k.canEditConfirmedProtocol(a,b):b.canBeEdited},k.canChangeConfirmedProtocolGrade=function(a,b){return k.canEditProtocol(a,b)&&"PROTOKOLL_STAATUS_K"===b.status.code},k.canEditConfirmedProtocol=function(a,b){return b.canBeEdited&&b.canBeConfirmed&&("LOGIN_TYPE_I"===a.loginMethod||"LOGIN_TYPE_M"===a.loginMethod)},k.canAddDeleteStudents=function(a,b){return"PROTOKOLL_STAATUS_K"!==b.status.code&&k.canEditProtocol(a,b)},k.canConfirm=function(a,b){return b.canBeConfirmed&&i(b)&&j(b)&&("LOGIN_TYPE_I"===a.loginMethod||"LOGIN_TYPE_M"===a.loginMethod)},k}]),angular.module("hitsaOis").factory("stateStorageService",["$sessionStorage",function(a){var b={};return b.loadState=function(b,c){var d=a[c]||"{}",e=JSON.parse(d);return e[b]||{}},b.changeState=function(c,d,e){var f={};f[c]=angular.extend(b.loadState(c,d),e),a[d]=JSON.stringify(angular.extend(JSON.parse(a[d]||"{}"),f))},b}]),angular.module("hitsaOis").constant("VocationalGrade",{KUTSEHINDAMINE_5:"KUTSEHINDAMINE_5",KUTSEHINDAMINE_4:"KUTSEHINDAMINE_4",KUTSEHINDAMINE_3:"KUTSEHINDAMINE_3",KUTSEHINDAMINE_2:"KUTSEHINDAMINE_2",KUTSEHINDAMINE_A:"KUTSEHINDAMINE_A",KUTSEHINDAMINE_MA:"KUTSEHINDAMINE_MA",KUTSEHINDAMINE_X:"KUTSEHINDAMINE_X"}).factory("VocationalGradeUtil",["VocationalGrade","ArrayUtils",function(a,b){var c=[a.KUTSEHINDAMINE_A,a.KUTSEHINDAMINE_3,a.KUTSEHINDAMINE_4,a.KUTSEHINDAMINE_5],d=[a.KUTSEHINDAMINE_2,a.KUTSEHINDAMINE_3,a.KUTSEHINDAMINE_4,a.KUTSEHINDAMINE_5],e="KUTSEHINDAMINE_";return{isPositive:function(a){return b.includes(c,a)},isDistinctive:function(a){return b.includes(d,a)},removePrefix:function(a){return a.replace(e,"")},addPrefix:function(a){return e+a}}}]),angular.module("hitsaOis").factory("QueryUtils",["config","$resource","$route","$translate","message","resourceErrorHandler","$sessionStorage",function(a,b,c,d,e,f,g){var h={size:20,page:1},i=function(a){var b=angular.copy(a,{});angular.isNumber(b.page)&&(b.page=b.page-1),b.lang=d.use().toUpperCase();for(var c in b)b.hasOwnProperty(c)&&""===b[c]&&delete b[c];return b.order&&("-"===b.order[0]?b.sort=a.order.substring(1)+",desc":b.sort=a.order+",asc",delete b.order),b},j=function(a){for(var b in a)a.hasOwnProperty(b)&&"order"!==b&&"size"!==b&&"page"!==b&&delete a[b]},k=function(a,b,d,f){if(a.criteria=angular.extend({},h),a.clearCriteria=function(){j(a.criteria)},void 0===a.fromStorage&&(a.fromStorage=function(a){return JSON.parse(g[a]||"{}")}),a.toStorage=function(a,b){g[a]=JSON.stringify(b)},"_menu"in c.current.params)angular.extend(a.criteria,d);else{var k=a.fromStorage(b);angular.isNumber(k.page)&&(k.page=k.page+1),angular.extend(a.criteria,k)}a.getCriteria=function(){return i(a.criteria)},a.tabledata={},a.afterLoadData=function(b){a.tabledata.content=b.content,a.tabledata.totalElements=b.totalElements,0===b.totalElements&&e.info("main.messages.error.notFound"),angular.isFunction(f)&&f(b.content)},a.loadData=function(){var c=a.getCriteria();a.toStorage(b,c),a.tabledata.$promise=l(b).search(c,a.afterLoadData)}},l=function(c,d){var e=a.apiUrl+c,g=e+"/:id";return b(e,{},d||{save:{method:"POST",interceptor:f},save2:{method:"POST"},post:{method:"POST",isArray:!0,interceptor:f},post2:{method:"POST",isArray:!0},get:{method:"GET",url:g,interceptor:f},update:{method:"PUT",url:g,params:{id:"@id"},interceptor:f},update2:{method:"PUT",url:g,params:{id:"@id"}},"delete":{method:"DELETE",url:g,params:{id:"@id",version:"@version"},interceptor:f},put:{method:"PUT",interceptor:f},put2:{method:"PUT"},search:{method:"GET",interceptor:f},query:{method:"GET",isArray:!0,interceptor:f}})},m=function(a,b){a.$root.$emit("backendBusy",{busy:b})};return{getQueryParams:i,clearQueryParams:j,createQueryForm:k,endpoint:l,loadingWheel:m}}]).factory("busyHandler",["$mdDialog",function(a){var b=0,c=!1;return{handle:function(d){if(d.busy){if(b++,1===b&&!c){var e=angular.element(document.body);a.show({parent:e,template:'<md-dialog style="background-color:transparent;box-shadow:none"><div layout="row" layout-sm="column" layout-align="center center" aria-label="wait" style="height:120px;"><md-progress-circular class="md-hue-2 loader" md-diameter="80px"></md-progress-circular></div></md-dialog>',onRemoving:function(){c=!1}}),c=!0}}else b--,0===b&&c&&a.hide()}}}]),function(){function a(a){return 10>a?"0"+a:a}Date.prototype.toISOString=function(){return this.getFullYear()+"-"+a(this.getMonth()+1)+"-"+a(this.getDate())+"T"+a(this.getHours())+":"+a(this.getMinutes())+":"+a(this.getSeconds())+"."+(this.getMilliseconds()/1e3).toFixed(3).slice(2,5)+"Z"}}(),angular.module("hitsaOis").controller("FinalDocSignerEditController",["$location","$route","$scope","dialogService","message","QueryUtils","FormUtils","USER_ROLES",function(a,b,c,d,e,f,g,h){var i=b.current.params.id,j="/school/finaldocsigners";c.auth=b.current.locals.auth,c.canEdit=-1!==c.auth.authorizedRoles.indexOf(h.ROLE_OIGUS_M_TEEMAOIGUS_LOPDOKALLKIRI);var k=f.endpoint(j);i?c.record=k.get({id:i}):c.record=new k({isFirst:!1,isValid:!0}),c.update=function(){g.withValidForm(c.finalDocSignerForm,function(){c.record.id?c.record.$update().then(e.updateSuccess)["catch"](angular.noop):c.record.$save().then(function(){e.info("main.messages.create.success"),a.url(j+"/"+c.record.id+"/edit?_noback")})["catch"](angular.noop)})},c["delete"]=function(){d.confirmDialog({prompt:"finalDocSigner.deleteconfirm"},function(){c.record.$delete().then(function(){e.info("main.messages.delete.success"),a.url(j+"?_noback")})["catch"](angular.noop)})}}]),angular.module("hitsaOis").factory("School",["QueryUtils",function(a){function b(){}return b.getAll=function(){return a.endpoint("/autocomplete/schools").query()},b.getLdap=function(){return a.endpoint("/autocomplete/ldapschools").query()},b.getSchoolsWithLogo=function(){return a.endpoint("/autocomplete/schoolsWithLogo").query()},b}]),angular.module("hitsaOis").controller("SchoolCapacityTypeController",["$route","$q","$scope","Classifier","QueryUtils","message","USER_ROLES","AuthService","dialogService",function(a,b,c,d,e,f,g,h,i){function j(){c.capacityTypes=e.endpoint(k).query({isHigher:c.isHigher})}var k="/schoolCapacityType";c.auth=a.current.locals.auth,c.isHigher=c.auth.higher&&!c.auth.vocational,c.currentNavItem="school.capacityType"+(c.isHigher?".higher":".vocational"),c.canEdit=h.isAuthorized(g.ROLE_OIGUS_M_TEEMAOIGUS_OPPETOOLIIK),c.studyYears=e.endpoint("/autocomplete/studyYears").query(function(a){c.studyYearMap=a.reduce(function(a,b){return a[b.id]=b,a},{})}),d.queryForDropdown({mainClassCode:"MAHT",order:"code"}).$promise.then(function(a){c.capacityMap=a.reduce(function(a,b){return a[b.code]=b,a},{})}),j(),c.switchHigher=function(a){c.isHigher=a,j()},c.updateAllCheckBoxes=function(a){c.capacityTypes.forEach(function(b){b.isUsable=a})},c.isUsableChanged=function(a){a.isUsable||(a.isTimetable=!1,i.confirmDialog({prompt:c.auth.higher?"schoolCapacityType.removeUsableConfirmHigher":"schoolCapacityType.removeUsableConfirmVocational"},function(){a.loads.forEach(function(a){a.loadPercentage=null}),e.endpoint(k+"/loads").save({id:a.id,loads:a.loads},function(){c.update()})}))},c.update=function(){e.endpoint(k).save({isHigher:c.isHigher,capacities:c.capacityTypes},function(){f.updateSuccess(),j()})},c.changeLoads=function(a){i.showDialog("school/school.capacity.type.load.dialog.html",function(b){b.capacityType=c.capacityMap[a.typeCode];var d=a.loads.reduce(function(a,b){return a[b.studyYearId]=b.loadPercentage,a},{});b.studyYears=[],c.studyYears.forEach(function(a){b.studyYears.push({studyYearId:a.id,loadPercentage:d[a.id]})}),b.studyYearMap=c.studyYearMap},function(b){e.endpoint(k+"/loads").save({id:a.id,loads:b.studyYears},function(){f.updateSuccess(),j()})})}}]),angular.module("hitsaOis").controller("SchoolDepartmentEditController",["$location","$route","$scope","dialogService","message","DataUtils","QueryUtils",function(a,b,c,d,e,f,g){function h(){f.convertStringToDates(c.schoolDepartment,["validFrom","validThru"])}var i=b.current.params.id,j="/school/departments",k=g.endpoint(j);if(i)c.schoolDepartment=k.get({id:i},h);else{var l=new Date;l.setHours(0,0,0,0),c.schoolDepartment=new k({validFrom:l,validThru:null})}c.update=function(){return c.schoolDepartmentForm.$setSubmitted(),c.schoolDepartmentForm.$valid?void(c.schoolDepartment.id?(c.schoolDepartment.$update().then(e.updateSuccess),c.schoolDepartmentForm.$setPristine()):c.schoolDepartment.$save().then(function(){e.info("main.messages.create.success"),a.url(j+"/"+c.schoolDepartment.id+"/edit?_noback")})):void e.error("main.messages.form-has-errors")},c["delete"]=function(){d.confirmDialog({prompt:"school.department.deleteconfirm"},function(){c.schoolDepartment.$delete().then(function(){e.info("main.messages.delete.success"),a.url("/school/departments")})})}}]).controller("SchoolDepartmentListController",["$scope","DataUtils","QueryUtils",function(a,b,c){var d=function(){var c=function(a,b,d){for(var e=0,f=d.length;f>e;e++){var g=d[e];g.indent=b,a.push(g),c(a,b+1,g.children||[]);
}},d=[];c(d,0,a.tabledata.content),a.tabledata.content=d;var e=new Date;e.setUTCHours(0,0,0,0);for(var f=0,g=d.length;g>f;f++){var h=d[f];b.convertStringToDates(h,["validFrom","validThru"]),h.isValid=h.validFrom<=e&&(!h.validThru||h.validThru>=e)}};c.createQueryForm(a,"/school/departments",{order:"en"===a.currentLanguage()?"nameEn":"nameEt"},d),a.loadData()}]),angular.module("hitsaOis").controller("SchoolEditController",["$scope","$route","School","$location","dialogService","message","QueryUtils","oisFileService","Classifier","classifierAutocomplete",function(a,b,c,d,e,f,g,h,i,j){function k(){a.school.logo?a.school.imageUrl=h.getUrl(a.school.logo,"school"):a.school.imageUrl="?"+(new Date).getTime(),a.school.ehisSchool&&i.get(a.school.ehisSchool).$promise.then(function(b){a.school._ehisSchool=b})}function l(b){a.logoFiles[0]?(a.school.deleteCurrentLogo=null,a.school.logo=h.getFromLfFile(a.logoFiles[0],b)):a.school.deleteCurrentLogo?(a.school.logo=null,b()):b()}var m=b.current.params.id,n="/school",o=g.endpoint(n);m?(a.school=o.get({id:m}),a.school.$promise.then(k)):(a.school=new o,k()),a.update=function(){function b(){f.info(c),a.logoFileApi.removeAll(),k()}if(a.schoolForm.$setSubmitted(),!a.schoolForm.$valid)return void f.error("main.messages.form-has-errors");if(!a.school.ehisSchool)return void f.error("school.error.ehisSchoolMissing");var c=a.school.id?"main.messages.update.success":"main.messages.create.success";l(function(){a.school.id?a.school.$update().then(b):a.school.$save().then(b)})},a["delete"]=function(){e.confirmDialog({prompt:"school.deleteconfirm"},function(){a.school.$delete().then(function(){d.url(n)})})},a.querySearch=function(a){return j.searchByName(a,"EHIS_KOOL")},a.setEhisSchool=function(){var b=a.school._ehisSchool||{};a.school.ehisSchool=b.code,a.school.nameEt=b.nameEt,a.school.ehisId=b.value,a.school.regNr=b.value2}}]),angular.module("hitsaOis").controller("SchoolStudyLevelsController",["$q","$scope","$rootScope","Classifier","QueryUtils","AUTH_EVENTS","message","USER_ROLES","AuthService",function(a,b,c,d,e,f,g,h,i){b.studyLevelDefs=d.queryForDropdown({mainClassCode:"OPPEASTE",order:"code"}),b.studyLevels=e.endpoint("/school/studyLevels").search(),b.canEdit=i.isAuthorized(h.ROLE_OIGUS_M_TEEMAOIGUS_OPPETASE),a.all([b.studyLevelDefs.$promise,b.studyLevels.$promise]).then(function(){d.setSelectedCodes(b.studyLevelDefs,b.studyLevels.studyLevels)}),b.update=function(){b.studyLevels.studyLevels=d.getSelectedCodes(b.studyLevelDefs),b.studyLevels.$put().then(function(){g.updateSuccess(),c.$broadcast(f.reAuthenticate)})}}]),angular.module("hitsaOis").config(["$routeProvider","USER_ROLES",function(a,b){a.when("/school",{templateUrl:"school/school.list.html",controller:"SimpleListController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}],params:["$translate",function(a){return{order:"en"===a.use()?"nameEn":"nameEt"}}],url:function(){return"/school"}},data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_OPPEASUTUS]}}).when("/school/new",{templateUrl:"school/school.edit.html",controller:"SchoolEditController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}]},data:{authorizedRoles:[b.ROLE_OIGUS_M_TEEMAOIGUS_OPPEASUTUS]}}).when("/school/:id/edit",{templateUrl:"school/school.edit.html",controller:"SchoolEditController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}]},data:{authorizedRoles:[b.ROLE_OIGUS_M_TEEMAOIGUS_OPPEASUTUS]}}).when("/school/:id/view",{templateUrl:"school/school.view.html",controller:"SchoolViewController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}]},data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_OPPEASUTUS]}}).when("/school/departments",{templateUrl:"school/school.department.list.html",controller:"SchoolDepartmentListController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}]},data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_STRUKTUUR]}}).when("/school/departments/new",{templateUrl:"school/school.department.edit.html",controller:"SchoolDepartmentEditController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}]},data:{authorizedRoles:[b.ROLE_OIGUS_M_TEEMAOIGUS_STRUKTUUR]}}).when("/school/departments/:id/edit",{templateUrl:"school/school.department.edit.html",controller:"SchoolDepartmentEditController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}]},data:{authorizedRoles:[b.ROLE_OIGUS_M_TEEMAOIGUS_STRUKTUUR]}}).when("/school/departments/:id/view",{templateUrl:"school/school.department.view.html",controller:"SchoolDepartmentEditController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}]},data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_STRUKTUUR]}}).when("/school/teacheroccupations",{templateUrl:"teacher/teacher.occupation.list.html",controller:"SimpleListController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}],params:function(){return{order:"occupationEt"}},url:function(){return"/school/teacheroccupations"}},data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_OPETAJAAMET]}}).when("/school/teacheroccupations/new",{templateUrl:"teacher/teacher.occupation.edit.html",controller:"TeacherOccupationEditController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}]},data:{authorizedRoles:[b.ROLE_OIGUS_M_TEEMAOIGUS_OPETAJAAMET]}}).when("/school/teacheroccupations/:id/edit",{templateUrl:"teacher/teacher.occupation.edit.html",controller:"TeacherOccupationEditController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}]},data:{authorizedRoles:[b.ROLE_OIGUS_M_TEEMAOIGUS_OPETAJAAMET]}}).when("/school/studyLevels",{templateUrl:"school/school.study.levels.html",controller:"SchoolStudyLevelsController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}]},data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_OPPETASE]}}).when("/school/capacityTypes",{templateUrl:"school/school.capacity.type.html",controller:"SchoolCapacityTypeController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}]},data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_OPPETOOLIIK]}}).when("/school/finaldocsigners",{templateUrl:"school/final.doc.signer.search.html",controller:"SimpleListController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}],params:function(){return{order:"name"}},url:function(){return"/school/finaldocsigners"}},data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_LOPDOKALLKIRI]}}).when("/school/finaldocsigners/new",{templateUrl:"school/final.doc.signer.edit.html",controller:"FinalDocSignerEditController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}]},data:{authorizedRoles:[b.ROLE_OIGUS_M_TEEMAOIGUS_LOPDOKALLKIRI]}}).when("/school/finaldocsigners/:id/edit",{templateUrl:"school/final.doc.signer.edit.html",controller:"FinalDocSignerEditController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}]},data:{authorizedRoles:[b.ROLE_OIGUS_M_TEEMAOIGUS_LOPDOKALLKIRI]}})}]),angular.module("hitsaOis").controller("SchoolViewController",["$route","$scope","oisFileService","Classifier","QueryUtils",function(a,b,c,d,e){var f=a.current.params.id;b.school=e.endpoint("/school").get({id:f},function(){b.school.logo?b.school.imageUrl=c.getUrl(b.school.logo,"school"):b.school.imageUrl="?"+(new Date).getTime(),b.school.ehisSchool&&d.get(b.school.ehisSchool).$promise.then(function(a){b.school.ehisSchool=a.code,b.school.nameEt=a.nameEt,b.school.ehisId=a.value,b.school.regNr=a.value2})})}]),angular.module("hitsaOis").config(["$routeProvider","USER_ROLES",function(a,b){a.when("/school/studyYears",{templateUrl:"studyYear/study.year.list.html",controller:"StudyYearsListController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}]},data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_OPPEPERIOOD]}}).when("/school/studyYears/:code/new",{templateUrl:"studyYear/study.year.edit.html",controller:"StudyYearsEditController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}]},data:{authorizedRoles:[b.ROLE_OIGUS_M_TEEMAOIGUS_OPPEPERIOOD]}}).when("/school/studyYears/:id/view",{templateUrl:"studyYear/study.year.view.html",controller:"StudyYearsEditController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}]},data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_OPPEPERIOOD]}}).when("/school/studyYears/:id/edit",{templateUrl:"studyYear/study.year.edit.html",controller:"StudyYearsEditController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}]},data:{authorizedRoles:[b.ROLE_OIGUS_M_TEEMAOIGUS_OPPEPERIOOD]}})}]).controller("StudyYearsListController",["$scope","QueryUtils","USER_ROLES","AuthService",function(a,b,c,d){a.endpoint=b.endpoint("/school/studyYears"),a.tabledata=a.endpoint.query(),a.canEdit=d.isAuthorized(c.ROLE_OIGUS_M_TEEMAOIGUS_OPPEPERIOOD)}]).controller("StudyYearsEditController",["$location","$mdDialog","$route","$scope","$translate","Classifier","dialogService","message","DataUtils","QueryUtils","USER_ROLES","AuthService",function(a,b,c,d,e,f,g,h,i,j,k,l){function m(){i.convertStringToDates(d.studyYear,["startDate","endDate"]),d.studyPeriods=d.studyYear.studyPeriods||[],d.studyPeriodEvents=d.studyYear.studyPeriodEvents||[],q.objectmapper(d.studyPeriods),i.convertStringToDates(d.studyPeriods,["startDate","endDate"]),i.convertStringToDates(d.studyPeriodEvents,["start","end"])}d.canEdit=l.isAuthorized(k.ROLE_OIGUS_M_TEEMAOIGUS_OPPEPERIOOD);var n=c.current.params.id,o=c.current.params.code,p=j.endpoint("/school/studyYears"),q=f.valuemapper({type:"OPPEPERIOOD"});d.eventTypes={},f.queryForDropdown({mainClassCode:"SYNDMUS"},function(a){d.eventTypes=f.toMap(a)}),n?d.studyYear=p.get({id:n},m):o&&(d.studyYear=new p({year:o}),d.studyPeriods=[],d.studyPeriodEvents=[]),d.openStudyPeriodDialog=function(a){var c=j.endpoint("/school/studyYears/"+d.studyYear.id+"/studyPeriods"),e=d,f=function(d){function f(){return k.dialogForm.$setSubmitted(),!k.dialogForm.startDate.$valid&&k.dialogForm.startDate.$error.mindate||!k.dialogForm.endDate.$valid&&k.dialogForm.endDate.$error.maxdate?(h.error("studyYear.studyPeriod.error.notInsideStudyYear"),!1):j(k.studyPeriod)?(h.error("studyYear.studyPeriod.error.overlapWithOtherStudyPeriod"),!1):k.dialogForm.$valid?!0:(h.error("main.messages.form-has-errors"),!1)}function j(a){for(var b=0;b<e.studyPeriods.length;b++)if(e.studyPeriods[b].id!==a.id&&i.periodsOverlap(a,e.studyPeriods[b]))return!0;return!1}var k=d;a?(k.studyPeriod=new c(a),k.studyPeriod.type=k.studyPeriod.type.code):k.studyPeriod=new c({}),k.studyPeriod.year=e.studyYear.year,k.studyYear=e.studyYear,k.typeChange=function(){if(k.studyPeriod.type){var a=q.objectmapper({type:k.studyPeriod.type});angular.isString(k.studyPeriod.nameEt)||(k.studyPeriod.nameEt=a.type.nameEt)}},k["delete"]=function(){g.confirmDialog({prompt:"studyYear.studyPeriod.deleteconfirm"},function(){k.studyPeriod.$delete().then(function(){e.studyPeriods=e.studyPeriods.filter(function(b){return b!==a}),h.info("main.messages.delete.success"),b.hide()})})};var l=function(c){i.convertStringToDates(c,["startDate","endDate"]),q.objectmapper(c),a?angular.extend(a,c):e.studyPeriods.push(c),b.hide(),h.updateSuccess()};k.submit=function(){if(f()){var a=k.studyPeriod;a.id?a.$update().then(l):a.$save().then(l)}},d.cancel=b.hide};f.$inject=["$scope"],b.show({controller:f,templateUrl:"studyYear/study.period.dialog.html"})},d.openStudyPeriodEventDialog=function(a){var c=["SYNDMUS_AVES","SYNDMUS_DEKP","SYNDMUS_VOTA"],e=j.endpoint("/school/studyYears/"+d.studyYear.id+"/studyPeriodEvents"),f=d,k=function(d){if(a){if(d.studyPeriodEvent=new e(a),d.studyPeriodEvent.studyPeriod)for(var j=0;j<f.studyPeriods.length;j++)if(f.studyPeriods[j].id===d.studyPeriodEvent.studyPeriod.id){d.studyPeriodEvent.studyPeriod=f.studyPeriods[j];break}}else d.studyPeriodEvent=new e({});d.studyPeriods=f.studyPeriods,d.uniqueInStudyPeriod=!1,d.$watch("studyPeriodEvent",function(){-1!==c.indexOf(d.studyPeriodEvent.eventType)?(d.uniqueInStudyPeriod=!0,d.studyPeriodEvent.studyPeriod||(d.studyPeriodEvent.studyPeriod=i.getCurrentStudyYearOrPeriod(d.studyPeriods))):d.uniqueInStudyPeriod=!1},!0),d["delete"]=function(){g.confirmDialog({prompt:"studyYear.studyPeriodEvent.deleteconfirm"},function(){d.studyPeriodEvent.$delete().then(function(){f.studyPeriodEvents=f.studyPeriodEvents.filter(function(b){return b!==a}),h.info("main.messages.delete.success"),b.hide()})})},d.cancel=b.hide,d.submit=function(){d.dialogForm.$setSubmitted();var a=!1;if(-1!==c.indexOf(d.studyPeriodEvent.eventType)&&(angular.isUndefined(d.studyPeriodEvent.studyPeriod)&&(d.studyPeriodEvent.studyPeriod=null),d.studyPeriodEvent.studyPeriod)){var b=f.studyPeriodEvents.filter(function(a){return a.studyPeriod&&d.studyPeriodEvent.studyPeriod.id===a.studyPeriod.id&&d.studyPeriodEvent.id!==a.id&&a.eventType===d.studyPeriodEvent.eventType?!0:void 0});b.length>0&&(a=!0,h.error("studyYear.studyPeriodEvent.error.uniqueInPeriod"))}if(d.studyPeriodEvent.start&&d.studyPeriodEvent.end&&d.studyPeriodEvent.start.getTime()>d.studyPeriodEvent.end.getTime()&&(a=!0,h.error("studyYear.studyPeriod.error.startDateLaterThanEndDate")),d.studyPeriodEvent.studyPeriod){var e;if(d.studyPeriodEvent.start&&d.studyPeriodEvent.end){e=moment(d.studyPeriodEvent.start).startOf("day");var g=moment(d.studyPeriodEvent.end).endOf("day");(e.isBefore(moment(d.studyPeriodEvent.studyPeriod.startDate).startOf("day"))||g.isAfter(moment(d.studyPeriodEvent.studyPeriod.endDate).endOf("day")))&&(a=!0,h.error("studyYear.studyPeriod.error.outsideStudyPeriod"))}else d.studyPeriodEvent.start&&(e=moment(d.studyPeriodEvent.start).startOf("day"),(e.isBefore(moment(d.studyPeriodEvent.studyPeriod.startDate).startOf("day"))||e.isAfter(moment(d.studyPeriodEvent.studyPeriod.endDate).endOf("day")))&&(a=!0,h.error("studyYear.studyPeriod.error.outsideStudyPeriod")))}if(d.dialogForm.$valid&&!a){var i=d.studyPeriodEvent;i.id?i.$update().then(l):i.$save().then(l)}}};k.$inject=["$scope"];var l=function(c){i.convertStringToDates(c,["start","end"]),a?angular.extend(a,c):f.studyPeriodEvents.push(c),b.hide(),h.updateSuccess()};b.show({controller:k,templateUrl:"studyYear/study.period.event.dialog.html"})},d.update=function(){d.schoolYearForm.$setSubmitted(),d.schoolYearForm.$valid&&(n?d.studyYear.$update().then(m).then(h.updateSuccess):o&&d.studyYear.$save().then(function(b){a.path("/school/studyYears/"+b.id+"/edit"),h.info("main.messages.create.success")}))}}]),angular.module("hitsaOis").controller("StateCurriculumController",["$route","$scope","message","Classifier","$location","classifierAutocomplete","dialogService","QueryUtils","DataUtils","ArrayUtils","Curriculum","config","$rootScope",function(a,b,c,d,e,f,g,h,i,j,k,l,m){function n(){M?L.get({id:M}).$promise.then(function(a){b.stateCurriculum=a,o(),m.removeLastUrlFromHistory(function(a){return a&&-1!==a.indexOf("/stateCurriculum/"+M)})}):b.stateCurriculum=new L(J)}function o(){i.convertStringToDates(b.stateCurriculum,["validFrom","validThru"]),p(),E(),b.formState.readOnly=-1!==a.current.$$route.originalPath.indexOf("view")}function p(){var a=b.stateCurriculum.iscedClass;d.getParentsWithMainClass("ISCED_SUUN",b.stateCurriculum.iscedClass).$promise.then(function(a){return b.iscedSuun=a[0].code,a[0]}).then(function(c){d.getParentsWithMainClass("ISCED_VALD",c.code).$promise.then(function(c){b.iscedVald=c[0].code,b.stateCurriculum.iscedClass=a})})}function q(a){return b.stateCurriculumForm.$setSubmitted(),u()?!0:(c.error(a.errorMessage),!1)}function r(a){q(a)&&b.stateCurriculum.$save().then(function(){i.convertStringToDates(b.stateCurriculum,["validFrom","validThru"]),c.info("main.messages.create.success"),e.url("/stateCurriculum/"+b.stateCurriculum.id+"/edit?_noback")})}function s(a,d){setTimeout(function(){q(d)&&a.$update().then(function(a){c.info(d.updateSuccess),b.stateCurriculum=a,o(),b.stateCurriculumForm.$setPristine(),b.formState.readOnly||b.stateCurriculum.status===k.STATUS.ENTERING||e.url("/stateCurriculum/"+b.stateCurriculum.id+"/view?_noback")})},0)}function t(a,c){g.confirmDialog({prompt:c.prompt},function(){b.formState.strictValidation?b.occupationCheckBeforeSave(a,c):s(a,c)})}function u(){return b.stateCurriculumForm.$valid&&(!b.strictValidation()||b.stateCurriculum.occupations.length>0&&v()&&w())}function v(){for(var a=0;a<b.stateCurriculum.occupations.length;a++)if(b.hasNoPmodule(b.stateCurriculum.occupations[a]))return!1;return!0}function w(){for(var a=0;a<b.subOccupationsList.length;a++)if(b.hasNoPmodule(b.subOccupationsList[a].code))return!1;return!0}function x(a){for(var c=0,d=B(a,"OSAKUTSE"),e=b.stateCurriculum.modules.filter(function(a){return!a.isAdditional}),f=0;f<e.length;f++){var g=j.intersection(e[f].moduleOccupations,d);if(0!==g.length){var h=j.includes(e[f].moduleOccupations,a)?1:0;c+=e[f].credits*(g.length+h-1)}}return c}function y(){for(var a=D(b.stateCurriculum.occupations),c=0;c<a.length;c++)if(!b.isOccutationValid(a[c]))return!1;return!0}function z(){for(var a=b.stateCurriculum.occupations,c=0;c<a.length;c++)for(var d=B(a[c],"SPETSKUTSE"),e=0;e<d.length;e++)if(!b.isSpetsOccupationValid(d[e],a[c]))return!1;return!0}function A(a){var b=B(a,"OSAKUTSE");return b.reduce(function(a,b){return a+C(b)},0)}function B(a,c){return b.subOccupations[a]?b.subOccupations[a].filter(function(a){return a.mainClassCode===c}).map(function(a){return a.code}):[]}function C(a){return b.stateCurriculum.modules.filter(function(b){return j.includes(b.moduleOccupations,a)}).reduce(function(a,b){return b.isAdditional?a:a+b.credits},0)}function D(a){return a.filter(function(a){return 0===a.indexOf("KUTSE_")})}function E(){if(b.stateCurriculum.occupations)for(var a=0;a<b.stateCurriculum.occupations.length;a++)F(b.stateCurriculum.occupations[a])}function F(a){d.getChildren(a).$promise.then(function(c){b.subOccupations[a]=c.filter(function(a){return"OSAKUTSE"===a.mainClassCode||"SPETSKUTSE"===a.mainClassCode}),b.getSubOccupationsAsList()})}function G(a){return!j.includes(b.stateCurriculum.occupations,a)}function H(a){var c=b.subOccupations[a].map(function(a){return a.code});return b.stateCurriculum.modules.some(function(b){return j.includes(b.moduleOccupations,a)||j.intersect(c,b.moduleOccupations)})}function I(){b.stateCurriculum.modules=b.stateCurriculum.modules.filter(function(a){return!j.isEmpty(a.moduleOccupations)})}b.isPublic=a.current.locals.params&&a.current.locals.params.isPublic,b.STATUS=k.STATUS,b.MODULE_TYPE={BASIC:"KUTSEMOODUL_P",GENERAL:"KUTSEMOODUL_Y"};var J={status:b.STATUS.ENTERING,modules:[],occupations:[],validFrom:new Date,optionalStudyCredits:0,canChange:!0},K="/stateCurriculum",L=h.endpoint(b.isPublic?"/public/statecurriculum":K),M=a.current.params.id;b.removeFromArray=j.remove,b.subOccupations={},b.formState={strictValidation:!1,readOnly:-1!==a.current.$$route.originalPath.indexOf("view"),stateCurriculumPdfUrl:l.apiUrl+K+"/print/"+M+"/stateCurriculum.pdf"},b.getCurriculumViewUrl=function(a){return b.isPublic?"#/curriculum/"+a:"#/vocationalCurriculum/"+a+"/view"},n(),b["delete"]=function(){return j.isEmpty(b.stateCurriculum.curricula)?void g.confirmDialog({prompt:"stateCurriculum.deleteconfirm"},function(){b.stateCurriculum.$delete().then(function(){c.info("main.messages.delete.success"),e.path("/stateCurriculum")})}):void c.error("stateCurriculum.error.hasCurricula")},b.occupationCheckBeforeSave=function(a,c){y()?b.allSpetsOccupationsValidBeforeSave(a,c):g.confirmDialog({prompt:"stateCurriculum.occupationsCreditsConfirmConfirm"},function(){b.allSpetsOccupationsValidBeforeSave(a,c)},function(){return!1})},b.allSpetsOccupationsValidBeforeSave=function(a,b){z()?s(a,b):g.confirmDialog({prompt:"stateCurriculum.spetsOccupationsCredidsConfirm"},function(){s(a,b)},function(){return!1})},b.save=function(){var a={errorMessage:"main.messages.form-has-errors",updateSuccess:"main.messages.update.success"};M?(b.formState.strictValidation=!1,s(new L(b.stateCurriculum),a)):r(a)},b.confirmAndSave=function(){b.formState.strictValidation=!0;var a={prompt:"stateCurriculum.prompt.editForm.verify",updateSuccess:"stateCurriculum.statuschange.verified",errorMessage:"stateCurriculum.statuschange.fail.verify"},c=h.endpoint(K+"/confirmAndSave");t(new c(b.stateCurriculum),a)},b.close=function(){b.formState.strictValidation=!1;var a={prompt:b.formState.readOnly?"stateCurriculum.prompt.viewForm.close":"stateCurriculum.prompt.editForm.close",updateSuccess:"stateCurriculum.statuschange.closed",errorMessage:b.formState.readOnly?"stateCurriculum.statuschange.fail.closeReadOnly":"stateCurriculum.statuschange.fail.close"},c=b.formState.readOnly?K+"/close":K+"/closeAndSave",d=h.endpoint(c);t(new d(b.stateCurriculum),a)},b.getStar=function(){return b.strictValidation()?"":" *"},b.strictValidation=function(){return b.stateCurriculum&&b.stateCurriculum.status===b.STATUS.VERIFIED||b.formState.strictValidation},b.hasNoPmodule=function(a){if(!b.stateCurriculum||!b.stateCurriculum.modules)return!0;for(var c=0;c<b.stateCurriculum.modules.length;c++)if(b.stateCurriculum.modules[c].module===b.MODULE_TYPE.BASIC&&j.includes(b.stateCurriculum.modules[c].moduleOccupations,a))return!1;return!0},b.nameEtUniqueQuery={id:M,paramName:"nameEt",url:"/stateCurriculum/unique"},b.nameEnUniqueQuery={id:b.nameEtUniqueQuery.id,paramName:"nameEn",url:b.nameEtUniqueQuery.url},b.isOccutationValid=function(a){for(var c=C(a)+b.stateCurriculum.optionalStudyCredits,d=B(a,"OSAKUTSE"),e=0;e<d.length;e++)c+=C(d[e]);c-=x(a);var f=B(a,"SPETSKUTSE");return f[0]&&(c+=C(f[0])),b.stateCurriculum.credits===c},b.isSpetsOccupationValid=function(a,c){var d=C(c),e=C(a),f=A(c),g=d+e+f+b.stateCurriculum.optionalStudyCredits-x(c)===b.stateCurriculum.credits;return g},b.modulesValid=function(){return b.stateCurriculum?!b.strictValidation()||0!==b.stateCurriculum.occupations.length&&0!==b.stateCurriculum.modules.length&&y()&&z():!0},b.querySearch=function(a){return f.searchByName(a,"KUTSE")},b.addOcupation=function(a){a&&G(a.code)&&(b.stateCurriculum.occupations.push(a.code),F(a.code),b.stateCurriculumForm.$setDirty())},b.getSubOccupationsAsList=function(){b.subOccupationsList=[];for(var a in b.subOccupations)b.subOccupationsList=b.subOccupationsList.concat(b.subOccupations[a])},b.removeOcupation=function(a){var c=H(a)?"stateCurriculum.occupationWithModuleDeleteConfirm":"stateCurriculum.occupationdeleteconfirm";g.confirmDialog({prompt:c},function(){b.removeFromArray(b.stateCurriculum.occupations,a);var c=b.subOccupations[a].map(function(a){return a.code});delete b.subOccupations[a],b.getSubOccupationsAsList(),b.stateCurriculum.modules.forEach(function(c){b.removeFromArray(c.moduleOccupations,a)}),c.forEach(function(a){b.stateCurriculum.modules.forEach(function(c){b.removeFromArray(c.moduleOccupations,a)})}),I(),b.stateCurriculumForm.$setDirty()})},b.filterSubOccupations=function(a,c){return function(d){return b.subOccupations[a]&&null!==b.subOccupations[a].length&&j.includes(b.subOccupations[a],d)&&-1!==d.code.indexOf(c)}},b.filterModules=function(a,b){return function(c){return c.module===b&&j.includes(c.moduleOccupations,a)}},b.openViewModuleDialog=function(a){var c=function(c){function d(a){return j.includes(c.data.moduleOccupations,a)}c.data=angular.copy(a),c.occupations=b.stateCurriculum.occupations.map(function(a){var c=b.subOccupations[a];return c.forEach(function(a){a.selected=d(a.code)}),{code:a,selected:d(a),subOccupations:c}})};g.showDialog("stateCurriculum/state.curriculum.module.view.dialog.html",c,function(){})},b.openAddModuleDialog=function(a){var d=function(d){function e(a){return j.includes(d.data.moduleOccupations,a)}a?d.data=angular.copy(a):d.data={moduleOccupations:[],outcomes:[]},d.editing=angular.isDefined(a),d.isEditingOutcome=!1,d.editedOutcome=null,d.occupationsSelectedCorrectly=function(){if(!d.data.moduleOccupations)return!0;for(var a=D(d.data.moduleOccupations),b=0;b<a.length;b++){var c=B(a[b],"SPETSKUTSE");if(j.intersect(c,d.data.moduleOccupations))return!1}return!0},d.addOutcome=function(){angular.isString(d.data.outcomesEt)&&""!==d.data.outcomesEt&&(d.data.outcomes.push({outcomesEt:d.data.outcomesEt,outcomesEn:d.data.outcomesEn}),d.data.outcomesEt=void 0,d.data.outcomesEn=void 0)},d.editOutcome=function(a){d.isEditingOutcome=!0,d.editedOutcome=a,d.data.outcomesEt=a.outcomesEt,d.data.outcomesEn=a.outcomesEn},d.saveOutcome=function(){angular.isString(d.data.outcomesEt)&&""!==d.data.outcomesEt&&(d.isEditingOutcome=!1,d.editedOutcome.outcomesEt=d.data.outcomesEt,d.editedOutcome.outcomesEn=d.data.outcomesEn,d.data.outcomesEt=void 0,d.data.outcomesEn=void 0)},d["delete"]=function(){g.confirmDialog({prompt:"curriculum.moduleDeleteConfirm"},function(){if(d.data.id){var e=h.endpoint("/stateCurriculum/modules"),f=new e(d.data);f.$delete().then(function(){c.info("main.messages.delete.success"),j.remove(b.stateCurriculum.modules,a)})}else j.remove(b.stateCurriculum.modules,a);d.cancel()})},d.suboccupationsSelectedCorrectly=function(){if(!d.data.moduleOccupations)return!0;for(var a=D(b.stateCurriculum.occupations),c=0;c<a.length;c++){var e=B(a[c],"SPETSKUTSE"),f=B(a[c],"OSAKUTSE");if(j.intersect(e,d.data.moduleOccupations)&&j.intersect(f,d.data.moduleOccupations))return!1}return!0},d.validateOccupations=function(){d.occupationsValid=d.occupationsSelectedCorrectly()?!0:null,d.suboccupationsValid=d.suboccupationsSelectedCorrectly()?!0:null},d.validateOccupations(),d.changeOccupation=function(a){a.selected?d.data.moduleOccupations.push(a.code):j.remove(d.data.moduleOccupations,a.code),d.validateOccupations()},d.occupations=b.stateCurriculum.occupations.map(function(a){var c=b.subOccupations[a];return c.forEach(function(a){a.selected=e(a.code)}),{code:a,selected:e(a),subOccupations:c}}),d.allowedModuleTypes=[b.MODULE_TYPE.BASIC,b.MODULE_TYPE.GENERAL]};g.showDialog("stateCurriculum/state.curriculum.module.add.dialog.html",d,function(d){var e=d.data;if(b.stateCurriculum.id){var f=h.endpoint("/stateCurriculum/modules"),g=new f(e);g.stateCurriculumOccupations=b.stateCurriculum.occupations,g.stateCurriculum=b.stateCurriculum.id,e.id?g.$update().then(function(b){c.info("main.messages.update.success"),angular.extend(a,b)}):g.$save().then(function(a){c.info("main.messages.create.success"),b.stateCurriculum.modules.push(a)})}else a?angular.extend(a,e):b.stateCurriculum.modules.push(e)})},b.goToEditForm=function(){b.stateCurriculum&&(b.stateCurriculum.status===b.STATUS.VERIFIED?g.confirmDialog({prompt:"stateCurriculum.prompt.viewForm.editConfirmed"},function(){e.path("/stateCurriculum/"+b.stateCurriculum.id+"/edit")}):e.path("/stateCurriculum/"+b.stateCurriculum.id+"/edit"))}}]),angular.module("hitsaOis").controller("StateCurriculumListController",["$scope","$sessionStorage","$route","Classifier","QueryUtils","$q","DataUtils",function(a,b,c,d,e,f,g){a.isPublic=c.current.locals.params&&c.current.locals.params.isPublic;var h=d.valuemapper({status:"OPPEKAVA_STAATUS",ekrLevel:"EKR"});e.createQueryForm(a,a.isPublic?"/public/statecurriculumsearch":"/stateCurriculum",{order:a.currentLanguageNameField()},h.objectmapper),f.all(h.promises).then(a.loadData),a.filteredOutStatuses=[{code:"OPPEKAVA_STAATUS_M"}],g.convertStringToDates(a.criteria,["validFrom","validThru"]),a.isPublic?a.formState={canCreate:!1,canView:!1}:(a.formState={},e.endpoint("/stateCurriculum/canCreate").search().$promise.then(function(b){a.formState.canCreate=b.canCreate}),e.endpoint("/stateCurriculum/canView").search().$promise.then(function(b){a.formState.canView=b.canView}))}]),angular.module("hitsaOis").config(["$routeProvider","USER_ROLES",function(a,b){function c(a,b,c,d,e){d.resolve().then(function(d){(d.isMainAdmin()||d.isExternalExpert())&&c.includes(d.authorizedRoles,e.ROLE_OIGUS_M_TEEMAOIGUS_RIIKLIKOPPEKAVA)||(a.error("main.messages.error.nopermission"),b.path(""))})}c.$inject=["message","$location","ArrayUtils","AuthResolver","USER_ROLES"],a.when("/stateCurriculum/new",{templateUrl:"stateCurriculum/state.curriculum.html",controller:"StateCurriculumController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],checkAccess:c},data:{authorizedRoles:[b.ROLE_OIGUS_M_TEEMAOIGUS_RIIKLIKOPPEKAVA]}}).when("/stateCurriculum/:id/edit",{templateUrl:"stateCurriculum/state.curriculum.html",controller:"StateCurriculumController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],checkAccess:c},data:{authorizedRoles:[b.ROLE_OIGUS_M_TEEMAOIGUS_RIIKLIKOPPEKAVA]}}).when("/stateCurriculum/:id/view",{templateUrl:"stateCurriculum/state.curriculum.view.html",controller:"StateCurriculumController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}]},data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_RIIKLIKOPPEKAVA]}}).when("/stateCurriculum",{templateUrl:"stateCurriculum/state.curriculum.list.html",controller:"StateCurriculumListController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}]}}).when("/stateCurriculum/public",{templateUrl:"stateCurriculum/state.curriculum.list.html",controller:"StateCurriculumListController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],params:function(){return{isPublic:!0}}}}).when("/stateCurriculum/public/:id/view",{templateUrl:"stateCurriculum/state.curriculum.view.html",controller:"StateCurriculumController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],params:function(){return{isPublic:!0}}}})}]),angular.module("hitsaOis").constant("StudentStatus",{OPPURSTAATUS_A:"OPPURSTAATUS_A",OPPURSTAATUS_K:"OPPURSTAATUS_K",OPPURSTAATUS_O:"OPPURSTAATUS_O",OPPURSTAATUS_V:"OPPURSTAATUS_V",OPPURSTAATUS_L:"OPPURSTAATUS_L"}).factory("StudentUtil",["StudentStatus",function(a){return{isActive:function(b){return a.OPPURSTAATUS_O===b||a.OPPURSTAATUS_A===b||a.OPPURSTAATUS_V===b},hasFinished:function(b){return a.OPPURSTAATUS_L===b}}}]),angular.module("hitsaOis").controller("StudentViewMainController",["$mdDialog","$q","$route","$scope","dialogService","message","Classifier","QueryUtils","oisFileService",function(a,b,c,d,e,f,g,h,i){function j(a){d.representatives.content=p.objectmapper(a.content),d.representatives.totalElements=a.totalElements;
}function k(){var a=angular.extend({},h.getQueryParams(d.representativesCriteria),{id:n});d.representatives.$promise=h.endpoint("/studentrepresentatives/:id").search(a,j)}function l(a){d.foreignstudies.content=a.content,d.foreignstudies.totalElements=a.totalElements}var m=c.current.locals.auth,n=m.isStudent()||m.isParent()?m.student:c.current.params.id,o="/students";d.auth=m,d.studentId=n,d.currentNavItem="student.main",h.endpoint(o).get({id:n},function(a){d.student=a,d.student.photo?d.student.imageUrl=i.getUrl(d.student.photo,"student"):d.student.imageUrl="?"+(new Date).getTime()}),d.representativesCriteria={order:"person.lastname",size:5,page:1},d.representatives={};var p=g.valuemapper({relation:"OPPURESINDAJA"});d.loadRepresentatives=k,b.all(p.promises).then(k),d.editRepresentative=function(b){var g=d.student,i=h.endpoint("/studentrepresentatives/"+n);a.show({controller:["$scope",function(d){function j(){var a=d.studentRepresentativeEditForm.idcode;a.$setValidity("notUnique",d.record.person.idcode!==d.formState.student.person.idcode)}function l(a){var b=d.studentRepresentativeEditForm.idcode;b.$setValidity("estonianIdcode",a)}d.isParent=c.current.locals.auth.isParent(),d.formState={student:g},b?d.record=i.get({id:b}):d.record=new i({person:{}}),d.cancel=a.hide,d.update=function(){function c(){f.info(b?"main.messages.update.success":"main.messages.create.success"),a.hide(),k()}return j(),d.studentRepresentativeEditForm.$setSubmitted(),d.studentRepresentativeEditForm.$valid?void(d.record.id?d.record.$update().then(c)["catch"](angular.noop):d.record.$save().then(c)["catch"](angular.noop)):void f.error("main.messages.form-has-errors")},d["delete"]=function(){e.confirmDialog({prompt:"student.representative.deleteconfirm"},function(){d.record.$delete().then(function(){f.info("main.messages.delete.success"),a.hide(),k()})["catch"](angular.noop)})},d.lookupPerson=function(){function a(a){d.record.person.firstname=a.firstname,d.record.person.lastname=a.lastname}var b=d.record.person.idcode;b&&11===b.length&&b!==d.formState.idcode?h.endpoint("/autocomplete/persons",{search:{method:"GET"}}).search({idcode:b,role:"forrepresentative"}).$promise.then(function(b){l(!0),a(b),!d.record.person.phone&&b.phone&&(d.record.person.phone=b.phone),!d.record.person.email&&b.email&&(d.record.person.email=b.email),d.formState.idcode=b.idcode})["catch"](function(b){a({}),d.formState.idcode=void 0,l(412!==b.status)}):b!==d.formState.idcode&&(a({}),d.formState.idcode=void 0,l(11===b.length)),j()}}],templateUrl:"studentRepresentative/representative.edit.dialog.html",clickOutsideToClose:!1})},d.foreignstudiesCriteria={order:"-3",size:5,page:1},d.foreignstudies={},d.loadForeignstudies=function(){var a=angular.extend({},h.getQueryParams(d.foreignstudiesCriteria),{id:n});d.foreignstudies.$promise=h.endpoint(o+"/:id/foreignstudies").search(a,l)},d.loadForeignstudies()}]).controller("StudentViewResultsController",["$route","$scope","$localStorage","QueryUtils",function(a,b,c,d){function e(){if(c.resultsCurrentNavItems)for(var a=0;a<c.resultsCurrentNavItems.length;a++){var d=c.resultsCurrentNavItems[a];if(b.auth.school.id===d.school&&b.auth.user===d.user)return a+1}return null}function f(){b.auth.isAdmin()?b.canWatchStudentConnectedEntities=!0:b.auth.isTeacher()&&b.student.studentGroup&&b.auth.teacherGroupIds.length>0&&(b.canWatchStudentConnectedEntities=-1!==b.auth.teacherGroupIds.indexOf(b.student.studentGroup.id))}if(b.auth=a.current.locals.auth,b.studentId=b.auth.isStudent()||b.auth.isParent()?b.auth.student:a.current.params.id,d.endpoint("/students").get({id:b.studentId}).$promise.then(function(a){b.student=a,f()}),b.currentNavItem="student.results",b.changeResultsCurrentNavItem=function(a){b.resultsCurrentNavItem=a;var d=e(),f={school:b.auth.school.id,user:b.auth.user,navItemName:a};d?c.resultsCurrentNavItems[d-1]=f:(c.resultsCurrentNavItems||(c.resultsCurrentNavItems=[]),c.resultsCurrentNavItems.push(f))},c.resultsCurrentNavItems){var g=e();g?b.resultsCurrentNavItem=c.resultsCurrentNavItems[g-1].navItemName:b.changeResultsCurrentNavItem("student.curriculumFulfillment")}else b.changeResultsCurrentNavItem("student.curriculumFulfillment");b.isStudentCurriculumFulfilled=function(a){return a&&angular.isNumber(a.credits)&&a.credits>=a.curriculumCredits}}]).controller("StudentViewResultsVocationalController",["$filter","$route","$scope","Classifier","QueryUtils","$rootScope","VocationalGradeUtil","StudentUtil","message",function(a,b,c,d,e,f,g,h,i){function j(){e.loadingWheel(c,!0),e.endpoint("/students/"+c.student.id+"/vocationalResults").get(function(a){a.results=o.objectmapper(a.results),a.curriculumModules.forEach(function(a){a.curriculumModule=p.objectmapper(a.curriculumModule)}),a.extraCurriculaModules.forEach(function(a){a.curriculumModule=p.objectmapper(a.curriculumModule)}),c.vocationalResults=a,c.loadCurriculumFulfillment(),e.loadingWheel(c,!1)})}function k(){return e.endpoint("/students/"+c.studentId+"/vocationalResultsByTime/").query(function(a){return o.objectmapper(a)})}function l(a){a.forEach(function(a){a.oldCurriculumVersionModuleId=a.curriculumVersionModuleId,c.vocationalCurriculumModules.forEach(function(b){b.id===a.curriculumVersionModuleId&&(a.curriculumVersionModule=b)})}),c.changeableModules=a}function m(){"student.curriculumFulfillment"===c.resultsCurrentNavItem?j():"student.inOrderOfStudyYear"===c.resultsCurrentNavItem?c.loadStudyYearResults():"student.inOrderOfPassing"===c.resultsCurrentNavItem?c.loadModuleThemeResults():"student.journalsAndProtocols"===c.resultsCurrentNavItem?n()?c.loadJournalsAndProtocols():c.changeResultsCurrentNavItem("student.curriculumFulfillment"):"student.changeModules"===c.resultsCurrentNavItem&&(h.isActive(c.student.status)?c.loadChangeableModules():c.changeResultsCurrentNavItem("student.curriculumFulfillment"))}function n(){return c.auth.isAdmin()?!0:c.auth.isTeacher()&&c.student.studentGroup&&c.auth.teacherGroupIds.length>0?-1!==c.auth.teacherGroupIds.indexOf(c.student.studentGroup.id):void 0}c.auth=b.current.locals.auth,c.gradeUtil=g;var o=d.valuemapper({grade:"KUTSEHINDAMINE",studyYear:"OPPEAASTA",entryType:"SISSEKANNE"}),p=d.valuemapper({module:"KUTSEMOODUL"});c.canChangeStudentModules=c.auth.isAdmin()&&h.isActive(c.student.status)&&-1!==c.auth.authorizedRoles.indexOf("ROLE_OIGUS_M_TEEMAOIGUS_OPPUR"),c.$watch("resultsCurrentNavItem",function(){m()}),c.loadCurriculumFulfillment=function(){if(!angular.isObject(c.vocationalResultsCurriculum)){var b={};c.vocationalResults.curriculumModules.forEach(function(a){b[a.id]=a}),c.vocationalResults.extraCurriculaModules.forEach(function(a){b[a.id]=a});var d=[],e={};c.vocationalResults.results.forEach(function(a){angular.isObject(e[a.module.id])||(e[a.module.id]={themeResultById:{},totalSubmitted:0}),angular.isObject(a.theme)?(e[a.module.id].themeResultById[a.theme.id]=a,g.isPositive(a.grade.code)&&(e[a.module.id].totalSubmitted+=a.credits)):(angular.extend(e[a.module.id],a),angular.isObject(b[a.module.id])||d.push(a))}),c.moduleResultById=e,c.positiveThemeResult=function(a){return angular.isObject(a)&&angular.isObject(a.grade)&&angular.isString(a.grade.code)&&g.isPositive(a.grade.code)},c.vocationalResultsCurriculum={},c.vocationalResultsCurriculum.vocationalResultsModules=c.vocationalResults.curriculumModules.sort(function(a,b){return f.currentLanguageNameField(a.curriculumModule).localeCompare(f.currentLanguageNameField(b.curriculumModule))}),c.vocationalResultsCurriculum.extraCurriculaVocationalResultsModules=c.vocationalResults.extraCurriculaModules.sort(function(a,b){return f.currentLanguageNameField(a.curriculumModule).localeCompare(f.currentLanguageNameField(b.curriculumModule))});var h=a("filter")(c.vocationalResults.results,{isOtherSchool:!0});c.vocationalResultsCurriculum.otherSchoolExtraCurriculaModuleResults=h.sort(function(a,b){return f.currentLanguageNameField(a.module).localeCompare(f.currentLanguageNameField(b.module))}),c.allThemesHavePositiveGrade=function(a){var d=b[a.id].themes;if(0===d.length)return!1;for(var f=!0,g=0;g<d.length;g++){var h=d[g];if(!angular.isObject(e[a.id])||!angular.isObject(e[a.id].themeResultById[h.id])||!c.positiveThemeResult(e[a.id].themeResultById[h.id])){f=!1;break}}return f}}},c.loadStudyYearResults=function(){angular.isObject(c.vocationalResultsStudyYear)||k().$promise.then(function(a){var b={};a.forEach(function(a){angular.isObject(b[a.studyYear.code])||(b[a.studyYear.code]={studyYear:a.studyYear,studyYearStartDate:a.studyYearStartDate,results:[]}),b[a.studyYear.code].results.push(a)});var d=Object.values(b);c.vocationalResultsStudyYear=d.sort(function(a,b){return a.studyYearStartDate<b.studyYearStartDate})})},c.loadModuleThemeResults=function(){angular.isObject(c.vocationalResultsByTime)||(c.vocationalResultsPassing=k())},c.loadJournalsAndProtocols=function(){e.endpoint("/students/"+c.studentId+"/vocationalConnectedEntities/").query(function(a){c.studentConnectedEntities=a})},c.loadChangeableModules=function(){angular.isArray(c.vocationalResults)||e.endpoint("/students/"+c.student.id+"/vocationalCurriculumModules/").query(function(a){c.vocationalCurriculumModules=a,e.endpoint("/students/"+c.student.id+"/vocationalChangeableModules").query(function(a){l(a)})})},c.saveChangedModules=function(){e.endpoint("/students/"+c.student.id+"/changeVocationalCurriculumModules/").post({modules:c.changeableModules}).$promise.then(function(a){i.updateSuccess(),l(a),j()})},c.displayTeachers=function(a){return angular.isArray(a)?a.map(function(a){return a.nameEt}).sort().join(", "):void 0},c.positiveGrade=function(a){return g.isPositive(a)}}]).controller("StudentViewResultsHigherController",["$route","$scope","HigherGradeUtil","QueryUtils","StudentUtil","$rootScope","message",function(a,b,c,d,e,f,g){function h(){var c=l.isStudent()||l.isParent()?l.student:a.current.params.id;d.endpoint("/students/"+c+"/higherResults").get().$promise.then(function(a){b.higherResults=a,b.student.higherResults=b.higherResults,b.student.higherResults.modules.sort(j)})}function i(a){return"KORGMOODUL_V"===a.type}function j(a,b){return i(a)&&!i(b)?1:!i(a)&&i(b)?-1:f.currentLanguageNameField(a).localeCompare(f.currentLanguageNameField(b))}function k(a){a.forEach(function(a){a.oldCurriculumVersionModuleId=a.curriculumVersionModuleId,b.higherCurriculumModules.forEach(function(b){b.id===a.curriculumVersionModuleId&&(a.curriculumVersionModule=b)})}),b.changeableModules=a}b.gradeUtil=c;var l=a.current.locals.auth;b.canChangeStudentModules=b.auth.isAdmin()&&e.isActive(b.student.status)&&-1!==b.auth.authorizedRoles.indexOf("ROLE_OIGUS_M_TEEMAOIGUS_OPPUR"),b.$watch("resultsCurrentNavItem",function(){"student.changeModules"===b.resultsCurrentNavItem&&(e.isActive(b.student.status)?b.loadChangeableModules():b.changeResultsCurrentNavItem("student.curriculumFulfillment"))}),angular.isDefined(b.higherResults)||h(),b.hasMandatorySubjects=function(a){return b.higherResults.subjectResults.some(function(b){return b.higherModule.id===a.id&&!b.isOptional})},b.hasOptionalSubjects=function(a){return b.higherResults.subjectResults.some(function(b){return b.higherModule.id===a.id&&b.isOptional})},b.filterSubjectResultsByModule=function(a){return function(b){return a.id===b.higherModule.id}},b.filterSubjectResultsByStudyPeriod=function(a){return function(b){return b.lastGrade&&b.lastGrade.gradeValue&&a.id===b.lastGrade.studyPeriod}},b.loadChangeableModules=function(){d.endpoint("/students/"+b.student.id+"/higherCurriculumModules/").query(function(a){b.higherCurriculumModules=a,d.endpoint("/students/"+b.student.id+"/higherChangeableModules").query(function(a){k(a)})})},b.saveChangedModules=function(){d.endpoint("/students/"+b.student.id+"/changeHigherCurriculumModules/").post({modules:b.changeableModules}).$promise.then(function(a){g.updateSuccess(),k(a),h()})}}]).controller("StudentViewDocumentsController",["$q","$route","$scope","Classifier","QueryUtils","CertificateUtil","CertificateType",function(a,b,c,d,e,f,g){function h(a){c.certificates.totalElements=a.totalElements,c.certificates.content=l.objectmapper(a.content)}c.studentId=b.current.locals.auth.isStudent()?b.current.locals.auth.student:b.current.params.id,c.currentNavItem="student.documents",c.auth=b.current.locals.auth,c.applicationsCriteria={size:5,page:1,order:"submitted",studentId:c.studentId},c.applications={};var i=d.valuemapper({type:"AVALDUS_LIIK",status:"AVALDUS_STAATUS"});c.afterApplicationsLoad=function(a){c.applications.content=i.objectmapper(a.content),c.applications.totalElements=a.totalElements},c.loadApplications=function(){var a=e.getQueryParams(c.applicationsCriteria);c.applications.$promise=e.endpoint("/students/:studentId/applications").search(a,c.afterApplicationsLoad)},c.auth.isStudent()&&(c.applicationTypes=d.queryForDropdown({mainClassCode:"AVALDUS_LIIK"}),c.certificateTypes=d.queryForDropdown({mainClassCode:"TOEND_LIIK",filterValues:[g.TOEND_LIIK_MUU]})),c.directivesCriteria={size:5,page:1,order:"confirm_date, headline",studentId:c.studentId},c.directives={};var j=d.valuemapper({type:"KASKKIRI",status:"KASKKIRI_STAATUS"});c.afterDirectivesLoad=function(a){c.directives.content=j.objectmapper(a.content),c.directives.totalElements=a.totalElements},c.loadDirectives=function(){var a=e.getQueryParams(c.directivesCriteria);c.directives.$promise=e.endpoint("/students/:studentId/directives").search(a,c.afterDirectivesLoad)},c.practiceContractsCriteria={size:5,page:1,order:"contract_nr",studentId:c.studentId},c.practiceContracts={};var k=d.valuemapper({status:"LEPING_STAATUS"});c.afterPracticeContractsLoad=function(a){c.practiceContracts.content=k.objectmapper(a.content),c.practiceContracts.totalElements=a.totalElements},c.loadPracticeContracts=function(){var a=e.getQueryParams(c.practiceContractsCriteria);c.practiceContracts.$promise=e.endpoint("/students/:studentId/practicecontracts").search(a,c.afterPracticeContractsLoad)},c.certificatesCriteria={size:5,page:1,order:"type."+c.currentLanguageNameField(),student:c.studentId},c.certificates={};var l=d.valuemapper({type:"TOEND_LIIK",status:"TOEND_STAATUS"});c.auth.isTeacher()||(c.loadCertificates=function(){var a=e.getQueryParams(c.certificatesCriteria);c.directives.$promise=e.endpoint("/certificate").search(a,h)},c.loadCertificates()),e.endpoint("/students/:studentId/documents").search({studentId:c.studentId},function(b){c.student=b.student,a.all(i.promises).then(function(){c.afterApplicationsLoad(b.applications)}),a.all(j.promises).then(function(){c.afterDirectivesLoad(b.directives)}),a.all(k.promises).then(function(){c.afterPracticeContractsLoad(b.practiceContracts)}),c.auth.isStudent()&&(c.applicationTypesApplicable=b.applicationTypesApplicable,c.certificateTypes.$promise.then(function(){var a=f.getForbiddenTypes(b.student.status);c.certificateTypes=c.certificateTypes.filter(function(b){return-1===a.indexOf(b.code)})}))})}]).controller("StudentViewTimetableController",["$scope","$route","QueryUtils",function(a,b,c){a.studentId=b.current.locals.auth.isStudent()?b.current.locals.auth.student:b.current.params.id,a.student=c.endpoint("/students").get({id:a.studentId}),a.typeId=a.studentId,a.currentNavItem="student.timetable",a.auth=b.current.locals.auth}]).controller("StudentEditController",["$location","$route","$scope","message","oisFileService","QueryUtils","DataUtils","dialogService","hoisDateFilter",function(a,b,c,d,e,f,g,h,i){function j(){c.student.photo?c.student.imageUrl=e.getUrl(c.student.photo,"student"):c.student.imageUrl="?"+(new Date).getTime(),g.convertStringToDates(c.student,["studyStart"]),c.errorParams={studyStart:i(c.student.studyStart)}}function k(a){return"RIIK_EST"===a.residenceCountry?a.address&&a.addressAds&&a.addressAdsOid:a.address}function l(a){c.studentEditForm.photoFiles&&c.studentEditForm.photoFiles.$modelValue[0]?(c.student.deleteCurrentPhoto=null,c.student.photo=e.getFromLfFile(c.studentEditForm.photoFiles.$modelValue[0],a)):c.studentEditForm.deleteCurrentPhoto&&c.studentEditForm.deleteCurrentPhoto.$modelValue?(c.student.photo=null,a()):a()}var m=b.current.params.id;c.student=f.endpoint("/students").get({id:m}),c.student.$promise.then(j),c.update=function(){return c.studentEditForm.$setSubmitted(),k(c.student.person)?c.studentEditForm.$valid?void h.confirmDialog({prompt:"main.messages.confirmSave"},function(){l(function(){c.student.$update().then(function(){d.updateSuccess(),a.path("/students/"+m+"/main")})})}):void d.error("main.messages.form-has-errors"):void d.error("student.error.addressRequired")}}]).controller("StudentAbsencesController",["$mdDialog","$route","$scope","dialogService","message","DataUtils","QueryUtils",function(a,b,c,d,e,f,g){c.auth=b.current.locals.auth,c.studentId=b.current.params.id,c.student=g.endpoint("/students").get({id:c.studentId}),c.currentNavItem="student.absences",c.absencesCriteria={size:20,page:1,order:"validFrom, validThru"},c.loadAbsences=function(){var a=g.getQueryParams(c.absencesCriteria);g.endpoint("/students/"+c.studentId+"/absences").search(a,c.afterLoadData)},c.afterLoadData=function(a){c.tabledata=a},c.editAbsence=function(b){var h=g.endpoint("/students/"+c.studentId+"/absences"),i=c.loadAbsences;b=angular.copy(b,{}),b.studentName=c.tabledata.studentName,b.studentGroup=c.tabledata.studentGroup,a.show({controller:["$scope",function(c){c.record=new h(b||{}),f.convertStringToDates(c.record,["validFrom","validThru"]),c.cancel=a.hide,c.update=function(){function b(){e.info(d),a.hide(),i()}if(c.studentAbsenceForm.$setSubmitted(),!c.studentAbsenceForm.$valid)return void e.error("main.messages.form-has-errors");var d=c.record.id?"main.messages.update.success":"main.messages.create.success";c.record.id?c.record.$update().then(b):c.record.$save().then(b)},c["delete"]=function(){d.confirmDialog({prompt:"student.absence.deleteconfirm"},function(){c.record.$delete().then(function(){e.info("main.messages.delete.success"),a.hide(),i()})})}}],templateUrl:"student/absence.edit.dialog.html",clickOutsideToClose:!1})},c.loadAbsences()}]),angular.module("hitsaOis").config(["$routeProvider","USER_ROLES",function(a,b){var c={authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_OPPUR]};a.when("/students/:id/main",{templateUrl:"student/view.main.html",controller:"StudentViewMainController",controllerAs:"controller",data:c,resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}]}}).when("/students/:id/results",{templateUrl:"student/view.results.html",controller:"StudentViewResultsController",controllerAs:"controller",data:c,resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}]}}).when("/students/:id/documents",{templateUrl:"student/view.documents.html",controller:"StudentViewDocumentsController",controllerAs:"controller",data:c,resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}]}}).when("/students/:id/timetable",{templateUrl:"student/view.timetable.html",controller:"StudentViewTimetableController",controllerAs:"controller",data:c,resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}]}}).when("/students/:id/edit",{templateUrl:"student/edit.main.html",controller:"StudentEditController",controllerAs:"controller",data:c,resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}]}}).when("/students/:id/absences",{templateUrl:"student/view.absences.html",controller:"StudentAbsencesController",controllerAs:"controller",data:c,resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}]}}).when("/students",{templateUrl:"student/list.html",controller:"SimpleListController",controllerAs:"controller",data:{authorizedRoles:function(a){return-1!==a.authorizedRoles.indexOf(b.ROLE_OIGUS_V_TEEMAOIGUS_OPPUR)&&"ROLL_T"!==a.roleCode}},resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],clMapping:function(){return{studyForm:"OPPEVORM",status:"OPPURSTAATUS"}},params:function(){return{order:"person.lastname,person.firstname"}},url:function(){return"/students"},auth:["AuthResolver",function(a){return a.resolve()}]}}).when("/students/myData",{templateUrl:"student/view.main.html",controller:"StudentViewMainController",controllerAs:"controller",data:c,resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}]}}).when("/students/myResults",{templateUrl:"student/view.results.html",controller:"StudentViewResultsController",controllerAs:"controller",data:c,resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}]}}).when("/students/journals",{templateUrl:"student/student.journal.list.html",controller:"StudentJournalListController",controllerAs:"StudentJournalListController",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}]},data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_OPPUR,b.ROLE_OIGUS_V_TEEMAOIGUS_PAEVIK]}}).when("/students/study",{templateUrl:"student/student.journal.study.html",controller:"StudentJournalStudyController",controllerAs:"StudentJournalStudyController",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}]},data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_OPPUR,b.ROLE_OIGUS_V_TEEMAOIGUS_PAEVIK]}}).when("/students/tasks",{templateUrl:"student/student.journal.tasks.html",controller:"StudentJournalTasksController",controllerAs:"StudentJournalTasksController",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}]},data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_OPPUR,b.ROLE_OIGUS_V_TEEMAOIGUS_PAEVIK]}})}]),function(){function a(a,b){for(var c=[],d=1,e=new Date(a),f=new Date(b);f>e;){var g={};g.weekNr=d++,g.start=e,e=new Date(e.getFullYear(),e.getMonth(),e.getDate()+(7-e.getDay())),g.end=e,g.entries=[],c.push(g),e=new Date(e.getFullYear(),e.getMonth(),e.getDate()+1)}return c}function b(b,c,d){for(var e=a(b,c),f=0;f<d.length;f++)for(var g=0;g<e.length;g++){var h=new Date(d[f].date).setHours(0,0,0,0);if(e[g].start.setHours(0,0,0,0)<h&&h<e[g].end.setHours(0,0,0,0)){e[g].entries.push(d[f]);break}}return e}function c(a){for(var b=moment().startOf("isoWeek").toDate(),c=0;c<a.length;c++)if(a[c].start.getTime()===b.getTime())return a[c]}function d(a){for(var b,c=0;c<=a.weeks.length-1;c++)a.weeks[c].weekNr===a.shownWeek.weekNr&&(b=c);a.previousWeekIndex=a.weeks[b-1]?b-1:null,a.nextWeekIndex=a.weeks[b+1]?b+1:null}angular.module("hitsaOis").controller("StudentJournalListController",["$scope","$route","QueryUtils","$mdDialog","Classifier","DataUtils",function(a,b,c,d,e,f){function g(b){for(var c=0;a.journalsByYears.length;c++)if(a.journalsByYears[c].yearCode===b)return c;return null}function h(a,b){for(var c=[],d=0;d<a.length;d++)c.push({yearId:a[d].id,yearCode:a[d].code,journals:[],collapsableOpen:a[d].code===b?!0:!1});return c}a.currentNavItem="journals",a.auth=b.current.locals.auth;var i=a.auth.student,j=e.valuemapper({entryType:"SISSEKANNE"});c.endpoint("/journals/studentJournalStudyYears/").query({studentId:i}).$promise.then(function(b){var c=f.getCurrentStudyYearOrPeriod(b),d=c?c.code:null;a.journalsByYears=h(b.reverse(),d),c&&a.getStudyYearJournals(c.id,c.code)}),a.getStudyYearJournals=function(b,d){0===a.journalsByYears[g(d)].journals.length&&(c.loadingWheel(a,!0),c.endpoint("/journals/studentJournals/").query({studentId:i,studyYearId:b}).$promise.then(function(b){b.forEach(function(b){b.journalEntries.forEach(function(a){j.objectmapper(a)}),a.journalsByYears[g(d)].journals.push(b)}),c.loadingWheel(a,!1)}))};var k=["A","3","4","5"];a.resultIsPostive=function(a){return-1!==k.indexOf(a)};var l=["SISSEKANNE_E","SISSEKANNE_I","SISSEKANNE_H"];a.isTestButNotFinal=function(a){return-1!==l.indexOf(a)},a.showJournal=function(a){d.show({controller:["$scope",function(b){b.journalEntryTypeColors={SISSEKANNE_T:"default-grey-50",SISSEKANNE_E:"default-amber-100",SISSEKANNE_I:"default-lime-100",SISSEKANNE_H:"default-pink-50",SISSEKANNE_L:"default-pink-300",SISSEKANNE_O:"default-light-blue-50",SISSEKANNE_P:"default-teal-100",SISSEKANNE_R:"default-indigo-100"},b.journalEntryTypes={},e.queryForDropdown({mainClassCode:"SISSEKANNE"},function(a){b.journalEntryTypes=e.toMap(a)}),b.getEntryColor=function(a){return b.journalEntryTypeColors[a]},b.journal=a,b.close=d.hide}],templateUrl:"student/student.journal.dialog.html",clickOutsideToClose:!0})}}]).controller("StudentJournalStudyController",["$scope","$route","QueryUtils",function(a,e,f){a.currentNavItem="study",a.auth=e.current.locals.auth;var g=a.auth.student;f.endpoint("/journals/studentJournalStudy/").search({studentId:g}).$promise.then(function(e){a.weeks=b(e.studyYearStartDate,e.studyYearEndDate,e.entries),a.shownWeek=c(a.weeks),d(a)}),a.changeWeek=function(b){a.shownWeek=a.weeks[b],d(a)}}]).controller("StudentJournalTasksController",["$scope","$route","QueryUtils",function(a,e,f){a.currentNavItem="tasks",a.auth=e.current.locals.auth;var g=a.auth.student;f.endpoint("/journals/studentJournalTasks/").search({studentId:g}).$promise.then(function(e){a.weeks=b(e.studyYearStartDate,e.studyYearEndDate,e.tasks),a.shownWeek=c(a.weeks),d(a)}),a.changeWeek=function(b){a.shownWeek=a.weeks[b],d(a)}}])}(),angular.module("hitsaOis").config(["$routeProvider","USER_ROLES",function(a,b){a.when("/absences",{templateUrl:"studentAbsence/absence.search.html",controller:"StudentAbsenceController",controllerAs:"controller",data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_PUUDUMINE]},resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}]}}).when("/groupAbsences",{templateUrl:"studentAbsence/absence.group.html",controller:"StudentGroupAbsenceController",controllerAs:"controller",data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_PUUDUMINE]},resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}]}})}]),angular.module("hitsaOis").controller("StudentAbsenceController",["$scope","$route","$timeout","QueryUtils","DataUtils","ArrayUtils","dialogService","message",function(a,b,c,d,e,f,g,h){var i=[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17];d.createQueryForm(a,"/absences",{order:"-sa.inserted",isAccepted:!1}),e.convertStringToDates(a.criteria,["validFrom","validThru"]),a.criteria.status="isNotAccepted",a.criteria.isAccepted=!1,a.criteria.isRejected=!1;var j=a.loadData;a.loadData=function(){a.absencesSearchForm.$setSubmitted(),a.absencesSearchForm.$valid?j():h.error("main.messages.form-has-errors")},a.studyPeriods=d.endpoint("/autocomplete/studyPeriods").query(),a.studyYears=d.endpoint("/autocomplete/studyYears").query(),a.studyYears.$promise.then(function(){var b=e.getCurrentStudyYearOrPeriod(a.studyYears);a.criteria.studyYear=b?b.id:void 0,a.criteria.studyYear?c(a.loadData):0===a.studyYears.length&&h.error("studyYear.missing")}),a.statusChanged=function(){switch(a.criteria.isAccepted=null,a.criteria.isRejected=null,a.criteria.status){case"accepted":a.criteria.isAccepted=!0;break;case"rejected":a.criteria.isRejected=!0;break;case"isNotAccepted":a.criteria.isAccepted=!1,a.criteria.isRejected=!1}};var k=d.endpoint("/absences/accept");a.accept=function(b){g.confirmDialog({prompt:"absence.acceptConfirm"},function(){new k(b).$update().then(function(){f.remove(a.tabledata.content,b),h.info("absence.accepted"),a.criteria.status||a.loadData()})})};var l=d.endpoint("/absences/reject");a.reject=function(b){g.confirmDialog({prompt:"absence.rejectConfirm"},function(){new l(b).$update().then(function(){f.remove(a.tabledata.content,b),h.info("absence.rejected"),a.criteria.status||a.loadData()})})};var m=d.endpoint("/absences/acceptByLessons");a.acceptByLessons=function(b){g.showDialog("studentAbsence/absence.accept.by.lessons.dialog.html",function(a){function c(b){var c=[];if(a.absence.validThru)for(var e=moment.utc(a.absence.validFrom),f=moment.utc(a.absence.validThru);f>=e;)d(c,b,e.toDate()),e=moment(e).add(1,"days");else d(c,b,new Date(a.absence.validFrom));return c}function d(a,b,c){b?a.push(c):e.isWeekend(c)||a.push(c)}function f(){for(var b in a.lessonsByDate){var c=g(b);if(c)return!0}return!1}function g(b){if(!a.showWeekends&&e.isWeekend(new Date(b)))return!1;for(var c in a.lessonsByDate[b])if(a.lessonsByDate[b][c])return!0;return!1}a.canEdit=!0,a.absence=b,a.maxLessonNr=10,a.lessons=i.map(function(a){return{nameEt:a,nameEn:a,id:a}}),a.lessonsByDate={},a.lessonsToAccept=!1,a.showWeekendsChanged=function(){a.dates=c(a.showWeekends),a.lessonsToAccept=f()},a.lessonByDate=function(){a.lessonsToAccept=f()},a.dates=c(!1)},function(c){var d={};angular.forEach(c.lessonsByDate,function(a,b){!c.showWeekends&&e.isWeekend(new Date(b))&&(a=void 0),d[moment(new Date(b)).format("YYYY-MM-DD")]=a}),b.lessonsByDate=d,new m(b).$update().then(function(){f.remove(a.tabledata.content,b),h.info("absence.accepted"),a.criteria.status||a.loadData()})})},a.viewAcceptedLessons=function(a){g.showDialog("studentAbsence/absence.accept.by.lessons.dialog.html",function(b){b.canEdit=!1,d.endpoint("/absences").get({id:a.id}).$promise.then(function(a){b.absence=a,b.lessonsByDate=a.acceptedLessonsByDate,b.maxLessonNr=a.maxLessonNr>10?a.maxLessonNr:10,b.dates=Object.keys(a.acceptedLessonsByDate)})})},a.filterByStudyYear=function(a){return function(b){return!a||b.studyYear===a}},a.studyYearChanged=function(){a.criteria.studyPeriod=void 0}}]),angular.module("hitsaOis").controller("StudentGroupAbsenceController",["$scope","$route","Classifier","DataUtils","QueryUtils","message","stateStorageService",function(a,b,c,d,e,f,g){function h(){if(!a.criteria.studyYear){var b=d.getCurrentStudyYearOrPeriod(a.formState.studyYears);b&&(a.criteria.studyYear=b.id,a.studyYearChanged(!0))}}function i(){var b=new Date,c=b.getTime();for(var d in a.formState.studyWeeks){var e=a.formState.studyWeeks[d];if(c>=new Date(e.start)&&c<=new Date(e.end)){a.criteria.studyWeek=e;break}a.criteria.studyWeek=null}}function j(a){return a.slice(0,10)}function k(b){a.journals=[];for(var c in b){var d=b[c];for(var e in d)d[e].date=c;a.journals=a.journals.concat(d)}}function l(b){a.studentAbsences={};for(var c=0;c<b.length;c++){var d=b[c],e=d.student;angular.isDefined(a.studentAbsences[e])||(a.studentAbsences[e]={});var f=d.journal;angular.isDefined(a.studentAbsences[e][f])||(a.studentAbsences[e][f]={});var g=j(d.entryDate);angular.isDefined(a.studentAbsences[e][f][g])||(a.studentAbsences[e][f][g]={});var h=d.journalStudentEntry;angular.isDefined(a.studentAbsences[e][f][g][h])||(a.studentAbsences[e][f][g][h]=[]),a.studentAbsences[e][f][g][h].push(d)}}a.auth=b.current.locals.auth;var m="/groupAbsences",n=b.current.locals.auth.school.id,o="groupabsences";c.queryForDropdown({mainClassCode:"PUUDUMINE"},function(b){a.formState.absenceOptions=b}),a.criteria={},a.formState={studyYears:e.endpoint("/autocomplete/studyYears").query(h),studyWeeks:[]},a.studyYearChanged=function(b){var c=[];c=b?e.endpoint(m+"/studyYearWeeks/"+a.criteria.studyYear).query(i):e.endpoint(m+"/studyYearWeeks/"+a.criteria.studyYear).query(),a.formState.studyWeeks=c},"_menu"in b.current.params||(a.storedCriteria=g.loadState(n,o),angular.extend(a.criteria,a.storedCriteria),a.studyYearChanged(!1),a.formState.studyWeeks.$promise.then(function(b){for(var c in b)if(b[c].nr===a.criteria.studyWeek.nr){a.criteria.studyWeek=b[c],a.studentGroupAbsenceForm.$valid=!0,a.studentGroupAbsenceForm.$invalid=!1,a.search();break}})),a.auth.isTeacher()&&e.endpoint("/autocomplete/studentgroups").query({valid:!0,higher:!1,studentGroupTeacherId:a.auth.teacher}).$promise.then(function(b){a.formState.studentGroups=b,
a.criteria.studentGroup||(a.criteria.studentGroup=1===b.length?b[0].id:null)}),a.$watch("criteria.studentGroupObject",function(){a.criteria.studentGroup=a.criteria.studentGroupObject?a.criteria.studentGroupObject.id:null}),a.journalsByDateCount=function(b){var c=j(b);return a.content.journalsByDates[c].length},a.search=function(){return a.studentGroupAbsenceForm.$setSubmitted(),a.studentGroupAbsenceForm.$valid?(a.criteria.studyWeekStart=a.criteria.studyWeek.start,a.criteria.studyWeekEnd=a.criteria.studyWeek.end,e.loadingWheel(a,!0),e.endpoint(m).get(a.criteria).$promise.then(function(b){e.loadingWheel(a,!1),a.content=b,k(b.journalsByDates),l(b.studentAbsences)}),void g.changeState(n,o,a.criteria)):void f.error("main.messages.form-has-errors")},a.clearCriteria=function(){a.criteria={}},a.absenceChanged=function(b){e.endpoint(m+"/entry/"+b.journalStudentEntry).put({studentGroup:a.criteria.studentGroup,absence:b.absence})},a.lessonAbsenceChanged=function(b){e.endpoint(m+"/lesson/"+b.journalEntryStudentLessonAbsence).put({studentGroup:a.criteria.studentGroup,absence:b.absence})}}]),angular.module("hitsaOis").controller("StudentGroupSearchController",["$q","$scope","Classifier","Curriculum","QueryUtils","Session",function(a,b,c,d,e,f){function g(){return b.formState.studyForms.length>0?b.formState.allStudyForms.filter(function(a){return-1===b.formState.studyForms.indexOf(a.code)}):void 0}var h="/studentgroups",i=c.valuemapper({studyForm:"OPPEVORM"});e.createQueryForm(b,h,{order:"code"},i.objectmapper);var j=f.school||{},k=j.higher&&!j.vocational;b.formState={allCurriculumVersions:d.queryVersions(),curriculumVersions:[],allStudyForms:c.queryForDropdown({mainClassCode:"OPPEVORM",higher:j.higher||void 0,vocational:j.vocational||void 0}),studyForms:[],curriculumVersionLabel:"studentGroup.curriculumVersionBoth",onlyhigher:k},void 0===b.criteria.isValid&&(b.criteria.isValid=!0),k?b.formState.curriculumVersionLabel="studentGroup.curriculumVersionHigher":!j.higher&&j.vocational&&(b.formState.curriculumVersionLabel="studentGroup.curriculumVersionVocational"),b.$watch("criteria.curriculum",function(){function a(a){c?(b.formState.curriculumVersions=b.formState.allCurriculumVersions.filter(function(a){return a.curriculum===c}),b.criteria.curriculumVersion=null):b.formState.curriculumVersions=b.formState.allCurriculumVersions,b.formState.studyForms=a.studyForms||[],b.criteria.studyForm=b.formState.studyForm.filter(function(a){return-1!==b.formState.studyForms.indexOf(a)}),b.curriculumVersionChanged()}var c=b.criteria.curriculum?b.criteria.curriculum.id:null;b.formState.studyForm=b.criteria.studyForm||[],c?e.endpoint(h+"/curriculumdata").get({id:c},a):a({studyForms:b.formState.allStudyForms.map(function(a){return a.code})})}),b.curriculumVersionChanged=function(){if(b.criteria.curriculumVersion&&0!==b.criteria.curriculumVersion.length){var a=b.formState.curriculumVersions.reduce(function(a,b){return a[b.id]=b.studyForm,a},{});a=b.criteria.curriculumVersion.map(function(b){return a[b]}),-1!==a.indexOf(null)?b.formState.hiddenStudyForms=g():b.formState.hiddenStudyForms=b.formState.allStudyForms.filter(function(b){return-1===a.indexOf(b.code)})}else b.formState.hiddenStudyForms=g()},a.all(i.promises).then(b.loadData)}]).controller("StudentGroupEditController",["$location","$mdDialog","$q","$route","$scope","dialogService","message","Classifier","Curriculum","QueryUtils","Session",function(a,b,c,d,e,f,g,h,i,j,k){function l(){e.formState.students=q.objectmapper(e.record.members),e.formState.selectedStudents=angular.copy(e.formState.students),e.formState.readonly=e.record.id&&e.formState.students&&e.formState.students.length>0,e.curriculumChanged(),e.validThruChanged(),e.record.members.forEach(function(a,b){a.rowno=b+1})}function m(a){e.formState.selectedStudents=e.formState.selectedStudents.concat(a),e.update()}var n=d.current.params.id,o="/studentgroups",p=j.endpoint(o),q=h.valuemapper({studyForm:"OPPEVORM",studyLevel:"OPPEASTE",status:"OPPURSTAATUS"}),r=k.school||{},s=!r.higher&&r.vocational;e.formState={allCurriculumVersions:i.queryVersions(),curriculumVersions:[],languages:[],studyForms:[],specialities:[],selectedStudents:[],order:"rowno",curriculumVersionLabel:"studentGroup.curriculumVersionBoth",onlyvocational:s,isVocational:r.vocational},s?e.formState.curriculumVersionLabel="studentGroup.curriculumVersionVocational":r.higher&&!r.vocational&&(e.formState.curriculumVersionLabel="studentGroup.curriculumVersionHigher"),e.curriculumChanged=function(){var a=e.record.curriculum?e.record.curriculum.id:null;if(e.formState.curriculumId!==a){e.formState.curriculumId=a,e.formState.language=e.record.language,e.formState.studyForm=e.record.studyForm,e.formState.speciality=e.record.speciality,e.formState.curriculumVersion=e.record.curriculumVersion;var b=function(b){e.formState.curriculumVersions=e.formState.allCurriculumVersions.filter(function(b){return b.curriculum===a}),e.formState.languages=b.languages||[],e.formState.studyForms=b.studyForms||[],e.formState.origStudyLevel=b.origStudyLevel,e.formState.specialities=b.specialities||[],e.formState.isVocational=b.isVocational,e.formState.studyPeriodInYears=b.studyPeriodInYears,e.record.language=-1!==e.formState.languages.indexOf(e.formState.language)?e.formState.language:null,e.record.studyForm=-1!==e.formState.studyForms.indexOf(e.formState.studyForm)?e.formState.studyForm:null,e.record.speciality=-1!==e.formState.specialities.indexOf(e.formState.speciality)?e.formState.speciality:null,e.record.curriculumVersion=void 0!==e.formState.curriculumVersions.find(function(a){return a.id===e.formState.curriculumVersion})?e.formState.curriculumVersion:null};a?j.endpoint(o+"/curriculumdata").get({id:a},b):b({})}},e.curriculumVersionChanged=function(){if(e.record.curriculumVersion){var a=e.formState.curriculumVersions.reduce(function(a,b){return a[b.id]=b.studyForm,a},{}),b=a[e.record.curriculumVersion];b&&(e.record.studyForm=b)}},e.validThruChanged=function(){var a=e.record.validThru;a&&"string"==typeof e.record.validThru&&(a=moment(a,"YYYY-MM-DD'T'hh:mm:ss.SSS'Z'")),e.formState.canAddStudents=!a||moment().isSameOrBefore(a,"day")},n?e.record=p.get({id:n},l):(e.record=new p,e.formState.readonly=!1),e.update=function(){return e.studentGroupForm.$setSubmitted(),e.studentGroupForm.$valid?(e.record.students=e.formState.selectedStudents.map(function(a){return a.id}),void(e.record.id?e.record.$update().then(l).then(g.updateSuccess)["catch"](angular.noop):e.record.$save().then(function(){g.info("main.messages.create.success"),a.url(o+"/"+e.record.id+"/edit?_noback")})["catch"](angular.noop))):void g.error("main.messages.form-has-errors")},e["delete"]=function(){f.confirmDialog({prompt:"studentGroup.deleteconfirm"},function(){e.record.$delete().then(function(){g.info("main.messages.delete.success"),a.url(o+"?_noback")})["catch"](angular.noop)})},e.addStudents=function(){var a=["id","curriculum","curriculumVersion","language","studyForm"].reduce(function(a,b){return a[b]=e.record[b],a},{}),d=function(b){j.endpoint(o+"/findstudents").query(a,function(a){return 0===a.length?(b.formState.students=void 0,void g.info("studentGroup.nostudentsfound")):void c.all(q.promises).then(function(){var c=q.objectmapper(a);angular.isNumber(e.formState.curriculumVersion)&&(c=c.filter(function(a){return a.curriculumVersion.id===e.formState.curriculumVersion})),c.forEach(function(a,b){a.rowno=b+1}),b.formState.students=c})})};if(e.record.id){var f=e.formState.curriculumVersionLabel;return void b.show({controller:["$scope",function(a){a.formState={selectedStudents:[],curriculumVersionLabel:f,order:"rowno"},a.cancel=b.hide,a.select=function(){m(a.formState.selectedStudents),b.hide()},d(a)}],templateUrl:"studentGroup/student.select.dialog.html",clickOutsideToClose:!1})}return e.studentGroupForm.$setSubmitted(),e.studentGroupForm.$valid?void d(e):void g.info("studentGroup.mandatoryfields")},e.removeStudent=function(a){f.confirmDialog({prompt:"studentGroup.deletestudentconfirm"},function(){function b(b){return b.id!==a}e.formState.students=e.formState.students.filter(b),e.formState.selectedStudents=e.formState.selectedStudents.filter(b)})}}]).controller("StudentGroupViewController",["$route","$scope","$q","Classifier","Curriculum","QueryUtils","Session","USER_ROLES","AuthService",function(a,b,c,d,e,f,g,h,i){b.auth=a.current.locals.auth,b.canEdit=i.isAuthorized(h.ROLE_OIGUS_M_TEEMAOIGUS_OPPERYHM),b.showPersonalData=b.auth.isAdmin()||b.auth.isTeacher();var j=a.current.params.id,k="/studentgroups",l=d.valuemapper({status:"OPPURSTAATUS"}),m=g.school||{},n=!m.higher&&m.vocational;b.formState={curriculumVersionLabel:"studentGroup.curriculumVersionBoth",onlyvocational:n,isVocational:m.vocational,order:"rowno"},n?b.formState.curriculumVersionLabel="studentGroup.curriculumVersionVocational":m.higher&&!m.vocational&&(b.formState.curriculumVersionLabel="studentGroup.curriculumVersionHigher"),b.record=f.endpoint(k).get({id:j},function(a){a&&a.curriculum&&a.curriculum.id&&f.endpoint(k+"/curriculumdata").get({id:a.curriculum.id},function(a){b.formState.origStudyLevel=a.origStudyLevel,b.formState.isVocational=a.isVocational}),a.curriculumVersion&&e.queryVersions().$promise.then(function(c){var d=c.filter(function(b){return b.id===a.curriculumVersion});b.formState.curriculumVersion=d.length>0?d[0]:void 0}),c.all(l.promises).then(l.objectmapper(a.members)),a.members.forEach(function(a,b){a.rowno=b+1})})}]),angular.module("hitsaOis").config(["$routeProvider","USER_ROLES",function(a,b){a.when("/studentgroups",{templateUrl:"studentGroup/student.group.list.html",controller:"StudentGroupSearchController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}]},data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_OPPERYHM]}}).when("/studentgroups/new",{templateUrl:"studentGroup/student.group.edit.html",controller:"StudentGroupEditController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}]},data:{authorizedRoles:[b.ROLE_OIGUS_M_TEEMAOIGUS_OPPERYHM]}}).when("/studentgroups/:id/edit",{templateUrl:"studentGroup/student.group.edit.html",controller:"StudentGroupEditController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}]},data:{authorizedRoles:[b.ROLE_OIGUS_M_TEEMAOIGUS_OPPERYHM]}}).when("/studentgroups/:id/view",{templateUrl:"studentGroup/student.group.view.html",controller:"StudentGroupViewController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}]},data:{authorizedRoles:function(a,c){return"ROLL_T"===a.roleCode||"ROLL_L"===a.roleCode||-1!==c.indexOf(b.ROLE_OIGUS_V_TEEMAOIGUS_OPPERYHM)}}})}]),angular.module("hitsaOis").controller("StudentGroupYearTransferController",["$scope","QueryUtils","$translate","message","dialogService","Classifier","DataUtils",function(a,b,c,d,e,f,g){function h(b){return a.studyYears.filter(function(a){return a.id===b})[0]}function i(){return{id:a.studyYear,lang:c.use().toUpperCase()}}function j(b){if(!a.canTransfer)return null;var c=h(a.studyYear).startDate;return b.filter(function(a){return!a.transfered&&a.validThru<c}).map(function(a){return a.oldCode}).join(", ")}function k(){return a.studentGroups.filter(function(a){return a.selected})}function l(){var a={};return k().forEach(function(b){a[b.id]=b.newCode}),a}function m(a,b){var c=!0;return a.forEach(function(a){a[b]||(c=!1)}),c}function n(b){return a.transferForm.$setSubmitted(),0===b.length?(d.error("main.messages.error.atLeastOneMustBeSelected"),!1):m(b,"newCode")?!0:(d.error("main.messages.form-has-errors"),!1)}function o(){var b={};return a.mismatchingStudents.forEach(function(a){b[a.id]=a.newGroup}),b}var p="/studentGroupYearTransfer",q=f.valuemapper({mismatchCode:"OPPERYHM_EISOBI"}),r=b.endpoint(p);a.canTransfer=!1,a.studyYears=b.endpoint(p+"/studyYears").query(),a.studyYearChanged=function(){a.canTransfer=!g.isPastStudyYearOrPeriod(h(a.studyYear)),a.studentGroups=r.query(i(),function(b){a.checkGroupValidThru=j(b)}),a.multiSelect=!1,a.calculated=!1,a.mismatchingStudents=[]},a.multiSelectChanged=function(){a.studentGroups.filter(function(a){return!a.transfered}).forEach(function(b){b.selected=a.multiSelect}),a.selectChanged()},a.selectChanged=function(){a.calculated&&(a.calculated=!1,e.messageDialog({prompt:"studentGroupYearTransfer.recalculate"}))},a.calculate=function(){var c=k();n(c)&&b.endpoint(p+"/calculate").save(angular.extend(i(),{academicLeave:a.academicLeave,academicLeaveDays:a.academicLeaveDays,abroadStudies:a.abroadStudies,abroadStudiesDays:a.abroadStudiesDays,studentGroupIds:c.map(function(a){return a.id}),newGroupCodes:l()}),function(b){a.mismatchingStudents=[],a.studentGroups.forEach(function(c){var d=b[c.id];d&&(c.logId=d.logId,c.relatedStudents=d.suitableStudents+d.unsuitableStudents,c.suitableStudents=d.suitableStudents,c.unsuitableStudents=d.unsuitableStudents,d.mismatchingStudents.forEach(function(b){a.mismatchingStudents.push(angular.extend(b,{group:c}))}))}),q.objectmapper(a.mismatchingStudents),a.calculated=!0}).$promise["catch"](angular.noop)},a.viewMatchingStudents=function(a){e.showDialog("studentGroupYearTransfer/students.match.dialog.html",function(c){c.studentGroup=a,c.students=b.endpoint(p+"/matching/"+a.logId).query()})},a.viewMismatchingStudents=function(a){e.showDialog("studentGroupYearTransfer/students.mismatch.dialog.html",function(c){c.studentGroup=a,c.students=b.endpoint(p+"/mismatching/"+a.logId).query(function(a){q.objectmapper(a)})})},a.transfer=function(){var c=k();if(n(c))return m(a.mismatchingStudents,"newGroup")?void e.confirmDialog({prompt:"studentGroupYearTransfer.confirm"},function(){b.endpoint(p+"/transfer").save({logIds:c.map(function(a){return a.logId}),newGroupCodes:l(),newStudentGroups:o()},function(){a.studyYearChanged()}).$promise["catch"](angular.noop)}):void d.error("main.messages.form-has-errors")}}]),angular.module("hitsaOis").config(["$routeProvider","USER_ROLES",function(a,b){a.when("/studentGroupYearTransfer",{templateUrl:"studentGroupYearTransfer/student.group.year.transfer.html",controller:"StudentGroupYearTransferController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}]},data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_UUDE_AASTASSE]}})}]),angular.module("hitsaOis").controller("StudentRepresentativeApplicationSearchController",["$mdDialog","$q","$scope","dialogService","message","Classifier","QueryUtils",function(a,b,c,d,e,f,g){c.formState={status:"AVALDUS_ESINDAJA_STAATUS_E"};var h=f.valuemapper({relation:"OPPURESINDAJA",status:"AVALDUS_ESINDAJA_STAATUS"});g.createQueryForm(c,"/studentrepresentatives/applications",{order:"student.person.lastname,student.person.firstname",status:c.formState.status},h.objectmapper);var i=c.loadData;c.loadData=function(){i(),c.formState.status=c.criteria.status};var j=g.endpoint("/studentrepresentatives/applications/accept");c.accept=function(a){d.confirmDialog({prompt:"student.representative.application.confirm",student:a.studentFullname,representative:a.fullname},function(){j.update({id:a.id,version:a.version}).$promise.then(function(){e.info("student.representative.application.accepted"),i()})["catch"](angular.noop)})},c.decline=function(b){a.show({controller:["$scope",function(c){c.record={id:b.id,version:b.version},c.decline=function(){if(c.studentRepresentativeApplicationDeclineForm.$setSubmitted(),!c.studentRepresentativeApplicationDeclineForm.$valid)return void e.error("main.messages.form-has-errors");var b=c.record;g.endpoint("/studentrepresentatives/applications/decline").update(b).$promise.then(function(){a.hide(),e.info("student.representative.application.declined"),i()})["catch"](angular.noop)},c.cancel=a.hide}],templateUrl:"studentRepresentative/representative.application.decline.dialog.html",clickOutsideToClose:!1})},b.all(h.promises).then(c.loadData)}]).controller("StudentRepresentativeApplicationCreateController",["$location","$scope","message","QueryUtils",function(a,b,c,d){b.record={},b.lookupPerson=function(a){b.record.firstname=a.firstname,b.record.lastname=a.lastname},b.lookupFailure=function(a){a&&412===a.status||c.error("student.representative.studentnotfound"),b.record.firstname=void 0,b.record.lastname=void 0},b.apply=function(){return b.studentRepresentativeApplicationCreateForm.$setSubmitted(),b.studentRepresentativeApplicationCreateForm.$valid?void d.endpoint("/studentrepresentatives/applications").save(b.record).$promise.then(function(){c.info("student.representative.application.applied"),a.url("/?_noback")})["catch"](angular.noop):void c.error("main.messages.form-has-errors")}}]),angular.module("hitsaOis").config(["$routeProvider","USER_ROLES",function(a,b){a.when("/studentrepresentatives/applications",{templateUrl:"studentRepresentative/representative.application.list.html",controller:"StudentRepresentativeApplicationSearchController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}]},data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_ESINDAVALDUS]}}).when("/studentrepresentatives/applications/new",{templateUrl:"studentRepresentative/representative.application.create.html",controller:"StudentRepresentativeApplicationCreateController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}]}})}]),function(){function a(a){return a.isAdmin()||a.isTeacher()}angular.module("hitsaOis").controller("StudyMaterialSubjectStudyPeriodController",["$scope","$route","QueryUtils","ArrayUtils","oisFileService","dialogService","message","Classifier","$q",function(b,c,d,e,f,g,h,i,j){function k(){b.materials=d.endpoint("/studyMaterial/subjectStudyPeriod/"+b.subjectStudyPeriod.id+"/materials").query(),b.materials.$promise.then(function(a){j.all(m.promises).then(function(){m.objectmapper(a)})})}b.auth=c.current.locals.auth,b.canEdit=a(b.auth),b.subjectStudyPeriod=c.current.locals.subjectStudyPeriod,b.teachers=b.subjectStudyPeriod.teachers.map(b.currentLanguageNameField).join(", "),b.getFileUrl=f.getUrl;var l=d.endpoint("/studyMaterial/connect"),m=i.valuemapper({typeCode:"OPPEMATERJAL"});k(),b.deleteConnection=function(a,b){g.confirmDialog({prompt:b>1?"studyMaterial.deleteconfirm":"studyMaterial.deletelastconfirm"},function(){var b=new l(a);b.$delete().then(function(){h.info("main.messages.delete.success"),k()})["catch"](angular.noop)})},b.addExisting=function(){if(!b.existingMaterial)return void h.error("main.messages.form-has-errors");var a=new l;a.studyMaterial=b.existingMaterial.id,a.subjectStudyPeriod=b.subjectStudyPeriod.id,a.$save().then(function(){b.existingMaterial=void 0,k()})}}]).controller("StudyMaterialJournalController",["$scope","$route","QueryUtils","ArrayUtils","oisFileService","dialogService","message","Classifier","$q",function(a,b,c,d,e,f,g,h,i){function j(){a.materials=c.endpoint("/studyMaterial/journal/"+a.journal.id+"/materials").query(),a.materials.$promise.then(function(a){i.all(l.promises).then(function(){l.objectmapper(a)})})}a.auth=b.current.locals.auth,a.journal=b.current.locals.journal,a.teachers=a.journal.teachers.map(a.currentLanguageNameField).join(", "),a.getFileUrl=e.getUrl;var k=c.endpoint("/studyMaterial/connect"),l=h.valuemapper({typeCode:"OPPEMATERJAL"});j(),a.deleteConnection=function(a,b){f.confirmDialog({prompt:b>1?"studyMaterial.deleteconfirm":"studyMaterial.deletelastconfirm"},function(){var b=new k(a);b.$delete().then(function(){g.info("main.messages.delete.success"),j()})["catch"](angular.noop)})},a.addExisting=function(){if(!a.existingMaterial)return void g.error("main.messages.form-has-errors");var b=new k;b.studyMaterial=a.existingMaterial.id,b.journal=a.journal.id,b.$save().then(function(){a.existingMaterial=void 0,j()})}}]).controller("StudyMaterialSubjectStudyPeriodPublicController",["$scope","$route","QueryUtils","oisFileService","dialogService","message","Classifier","$q",function(a,b,c,d,e,f,g,h){function i(){a.materials=c.endpoint("/public/studyMaterial/subjectStudyPeriod/"+a.subjectStudyPeriod.id+"/materials").query(),a.materials.$promise.then(function(a){h.all(j.promises).then(function(){j.objectmapper(a)})})}a.subjectStudyPeriod=b.current.locals.subjectStudyPeriod,a.teachers=a.subjectStudyPeriod.teachers.map(a.currentLanguageNameField).join(", "),a.getFileUrl=d.getUrl;var j=g.valuemapper({typeCode:"OPPEMATERJAL"});i()}]).controller("StudyMaterialJournalPublicController",["$scope","$route","QueryUtils","oisFileService","dialogService","message","Classifier","$q",function(a,b,c,d,e,f,g,h){function i(){a.materials=c.endpoint("/public/studyMaterial/journal/"+a.journal.id+"/materials").query(),a.materials.$promise.then(function(a){h.all(j.promises).then(function(){j.objectmapper(a)})})}a.journal=b.current.locals.journal,a.teachers=a.journal.teachers.map(a.currentLanguageNameField).join(", "),a.getFileUrl=d.getUrl;var j=g.valuemapper({typeCode:"OPPEMATERJAL"});i()}])}(),angular.module("hitsaOis").controller("StudyMaterialHigherListController",["$scope","$route","$timeout","QueryUtils","message","USER_ROLES","AuthService","DataUtils",function(a,b,c,d,e,f,g,h){a.canEdit=g.isAuthorized(f.ROLE_OIGUS_M_TEEMAOIGUS_OPPEMATERJAL),a.auth=b.current.locals.auth,d.createQueryForm(a,"/studyMaterial/subjectStudyPeriods",{order:"subject_name_et"});var i=a.loadData;a.loadData=function(){a.searchForm.$setSubmitted(),a.searchForm.$valid?i():e.error("main.messages.form-has-errors")},a.studyPeriods=d.endpoint("/autocomplete/studyPeriods").query(),a.studyPeriods.$promise.then(function(){if(a.studyPeriods.length>0&&!a.criteria.studyPeriod){var b=h.getCurrentStudyYearOrPeriod(a.studyPeriods);a.criteria.studyPeriod=b?b.id:void 0}c(a.loadData)}),a.$watch("teacher",function(b){a.criteria.teacher=b?b.id:null})}]).controller("StudyMaterialVocationalListController",["$scope","$route","$timeout","QueryUtils","message","USER_ROLES","AuthService","DataUtils",function(a,b,c,d,e,f,g,h){a.canEdit=g.isAuthorized(f.ROLE_OIGUS_M_TEEMAOIGUS_OPPEMATERJAL),a.auth=b.current.locals.auth,d.createQueryForm(a,"/studyMaterial/journals",{order:"journal_name"});var i=a.loadData;a.loadData=function(){a.searchForm.$setSubmitted(),a.searchForm.$valid?i():e.error("main.messages.form-has-errors")},a.studyYears=d.endpoint("/autocomplete/studyYears").query(),a.studyYears.$promise.then(function(){if(a.studyYears.length>0&&!a.criteria.studyYear){var b=h.getCurrentStudyYearOrPeriod(a.studyYears);a.criteria.studyYear=b?b.id:void 0}c(a.loadData)}),a.$watch("teacher",function(b){a.criteria.teacher=b?b.id:null}),a.$watch("criteria.studyYear",function(){a.criteria.studyYear&&a.criteria.journalObject&&(a.criteria.journalObject=a.criteria.journalObject.studyYear===a.criteria.studyYear?a.criteria.journalObject:null)}),a.$watch("criteria.journalObject",function(){a.criteria.journal=a.criteria.journalObject?a.criteria.journalObject.id:null})}]),function(){angular.module("hitsaOis").controller("StudyMaterialHigherEditController",["$scope","$route","QueryUtils","oisFileService","dialogService","message",function(a,b,c,d,e,f){a.auth=b.current.locals.auth,a.subjectStudyPeriod=b.current.locals.subjectStudyPeriod,a.backPath="/#/studyMaterial/higher/"+a.subjectStudyPeriod.id+"/edit";var g=b.current.params.materialId,h=c.endpoint("/studyMaterial");g?(a.material=h.get({id:g}),a.material.$promise.then(function(b){a.teacher=b.teacher})):a.material=new h({isVisibleToStudents:!1,isPublic:!1}),a.$watch("teacher",function(b){a.material.teacher=b?b.id:null}),a.$watch("material.isPublic",function(b){b===!0&&(a.material.isVisibleToStudents=!0)}),a.typeCodeChanged=function(b){a.material.url="OPPEMATERJAL_L"===b?"http://":null},a["delete"]=function(){e.confirmDialog({prompt:"apel.deleteConfirm"},function(){a.material.$delete().then(function(){f.info("main.messages.delete.success"),a.back(a.backPath)})["catch"](angular.noop)})},a.save=function(){function b(){a.material.id?a.material.$update().then(c)["catch"](angular.noop):a.material.$save().then(c)["catch"](angular.noop)}function c(){f.info(g?"main.messages.update.success":"main.messages.create.success"),a.back(a.backPath)}if(a.material.subjectStudyPeriod=a.subjectStudyPeriod.id,a.material.isVocational=!1,a.studyMaterialForm.$setSubmitted(),!a.studyMaterialForm.$valid)return void f.error("main.messages.form-has-errors");if("OPPEMATERJAL_F"!==a.material.typeCode||a.material.id)b();else{if(1!==a.files.length)return void f.error("main.messages.form-has-errors");d.getFromLfFile(a.files[0],function(c){a.material.oisFile=c,b()})}}}]).controller("StudyMaterialVocationalEditController",["$scope","$route","QueryUtils","oisFileService","dialogService","message",function(a,b,c,d,e,f){a.auth=b.current.locals.auth,a.journal=b.current.locals.journal,a.backPath="/#/studyMaterial/vocational/"+a.journal.id+"/edit";var g=b.current.params.materialId,h=c.endpoint("/studyMaterial");g?(a.material=h.get({id:g}),a.material.$promise.then(function(b){a.teacher=b.teacher})):a.material=new h({isVisibleToStudents:!1,isPublic:!1}),a.$watch("teacher",function(b){a.material.teacher=b?b.id:null}),a.$watch("material.isPublic",function(b){b===!0&&(a.material.isVisibleToStudents=!0)}),a.typeCodeChanged=function(b){a.material.url="OPPEMATERJAL_L"===b?"http://":null},a["delete"]=function(){e.confirmDialog({prompt:"apel.deleteConfirm"},function(){a.material.$delete().then(function(){f.info("main.messages.delete.success"),a.back(a.backPath)})["catch"](angular.noop)})},a.save=function(){function b(){a.material.id?a.material.$update().then(c)["catch"](angular.noop):a.material.$save().then(c)["catch"](angular.noop)}function c(){f.info(g?"main.messages.update.success":"main.messages.create.success"),a.back(a.backPath)}if(a.material.journal=a.journal.id,a.material.isVocational=!0,a.studyMaterialForm.$setSubmitted(),!a.studyMaterialForm.$valid)return void f.error("main.messages.form-has-errors");if("OPPEMATERJAL_F"!==a.material.typeCode||a.material.id)b();else{if(1!==a.files.length)return void f.error("main.messages.form-has-errors");d.getFromLfFile(a.files[0],function(c){a.material.oisFile=c,b()})}}}])}(),angular.module("hitsaOis").config(["$routeProvider","USER_ROLES",function(a,b){a.when("/studyMaterial/higher",{templateUrl:"studyMaterial/study.material.higher.list.html",controller:"StudyMaterialHigherListController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}]},data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_OPPEMATERJAL]}}).when("/studyMaterial/vocational",{templateUrl:"studyMaterial/study.material.vocational.list.html",controller:"StudyMaterialVocationalListController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}]},data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_OPPEMATERJAL]}}).when("/studyMaterial/higher/:subjectStudyPeriodId/edit",{templateUrl:"studyMaterial/study.material.subjectStudyPeriod.edit.html",controller:"StudyMaterialSubjectStudyPeriodController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}],subjectStudyPeriod:["QueryUtils","$route",function(a,b){return a.endpoint("/studyMaterial/subjectStudyPeriod/"+b.current.params.subjectStudyPeriodId).get().$promise}]},data:{authorizedRoles:[b.ROLE_OIGUS_M_TEEMAOIGUS_OPPEMATERJAL]}}).when("/studyMaterial/vocational/:journalId/edit",{templateUrl:"studyMaterial/study.material.journal.edit.html",controller:"StudyMaterialJournalController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}],journal:["QueryUtils","$route",function(a,b){return a.endpoint("/studyMaterial/journal/"+b.current.params.journalId).get().$promise}]},data:{authorizedRoles:[b.ROLE_OIGUS_M_TEEMAOIGUS_OPPEMATERJAL]}}).when("/studyMaterial/higher/:subjectStudyPeriodId/new",{templateUrl:"studyMaterial/study.material.higher.edit.html",controller:"StudyMaterialHigherEditController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}],subjectStudyPeriod:["QueryUtils","$route",function(a,b){return a.endpoint("/studyMaterial/subjectStudyPeriod/"+b.current.params.subjectStudyPeriodId).get().$promise}]},data:{authorizedRoles:[b.ROLE_OIGUS_M_TEEMAOIGUS_OPPEMATERJAL]}}).when("/studyMaterial/vocational/:journalId/new",{templateUrl:"studyMaterial/study.material.vocational.edit.html",controller:"StudyMaterialVocationalEditController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}],journal:["QueryUtils","$route",function(a,b){return a.endpoint("/studyMaterial/journal/"+b.current.params.journalId).get().$promise}]},data:{authorizedRoles:[b.ROLE_OIGUS_M_TEEMAOIGUS_OPPEMATERJAL]}}).when("/studyMaterial/higher/:subjectStudyPeriodId/edit/:materialId",{templateUrl:"studyMaterial/study.material.higher.edit.html",controller:"StudyMaterialHigherEditController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}],subjectStudyPeriod:["QueryUtils","$route",function(a,b){return a.endpoint("/studyMaterial/subjectStudyPeriod/"+b.current.params.subjectStudyPeriodId).get().$promise}]},data:{authorizedRoles:[b.ROLE_OIGUS_M_TEEMAOIGUS_OPPEMATERJAL]}}).when("/studyMaterial/vocational/:journalId/edit/:materialId",{templateUrl:"studyMaterial/study.material.vocational.edit.html",controller:"StudyMaterialVocationalEditController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}],journal:["QueryUtils","$route",function(a,b){return a.endpoint("/studyMaterial/journal/"+b.current.params.journalId).get().$promise}]},data:{authorizedRoles:[b.ROLE_OIGUS_M_TEEMAOIGUS_OPPEMATERJAL]}}).when("/studyMaterial/higher/:subjectStudyPeriodId/view",{templateUrl:"studyMaterial/study.material.subjectStudyPeriod.view.html",controller:"StudyMaterialSubjectStudyPeriodController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}],subjectStudyPeriod:["QueryUtils","$route",function(a,b){return a.endpoint("/studyMaterial/subjectStudyPeriod/"+b.current.params.subjectStudyPeriodId).get().$promise}]}}).when("/studyMaterial/vocational/:journalId/view",{templateUrl:"studyMaterial/study.material.journal.view.html",controller:"StudyMaterialJournalController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}],journal:["QueryUtils","$route",function(a,b){return a.endpoint("/studyMaterial/journal/"+b.current.params.journalId).get().$promise}]}}).when("/studyMaterial/:schoolId/higher/:subjectStudyPeriodId/view",{templateUrl:"studyMaterial/study.material.subjectStudyPeriod.view.html",controller:"StudyMaterialSubjectStudyPeriodPublicController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],subjectStudyPeriod:["QueryUtils","$route",function(a,b){return a.endpoint("/public/studyMaterial/subjectStudyPeriod/"+b.current.params.subjectStudyPeriodId).get().$promise}]}}).when("/studyMaterial/:schoolId/vocational/:journalId/view",{
templateUrl:"studyMaterial/study.material.journal.view.html",controller:"StudyMaterialJournalPublicController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],journal:["QueryUtils","$route",function(a,b){return a.endpoint("/public/studyMaterial/journal/"+b.current.params.journalId).get().$promise}]}})}]),angular.module("hitsaOis").controller("studyYearScheduleController",["$scope","$route","$timeout","QueryUtils","ArrayUtils","message","DataUtils","$mdDialog","$window","dialogService","USER_ROLES","AuthService","config","$httpParamSerializer",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){function o(){a.studentGroups=d.endpoint("/studyYearSchedule/studentGroups").query({showMine:a.criteria.showMine}),a.criteria.showMine&&(d.loadingWheel(a,!0),a.studentGroups.$promise.then(function(b){angular.isArray(b)&&b.length>0&&(a.criteria.schoolDepartments=b[0].schoolDepartments),d.loadingWheel(a,!1)})),a.criteria.studentGroups=[]}function p(){a.criteria.studyYear=g.getCurrentStudyYearOrPeriod(a.studyYears),a.criteria.studyYear&&g.sortStudyYearsOrPeriods(a.criteria.studyYear.studyPeriods),a.yearSelectionTrigger()}function q(){a.record=d.endpoint("/studyYearSchedule").save(a.criteria),d.loadingWheel(a,!0),a.record.$promise.then(function(b){a.studyYearSchedules=b.studyYearSchedules,d.loadingWheel(a,!1)})}function r(){function b(b,c){var d=c.studyPeriodId===a.criteria.studyYear.studyPeriods[i].id?1:0;return b+d}for(var c=[],d=1,e=new Date(a.criteria.studyYear.startDate),f=a.criteria.studyYear.endDate;f>e;){var g={};g.start=e,e=new Date(e.getFullYear(),e.getMonth(),e.getDate()+(7-e.getDay())),g.end=e,g.weekNr=d++;var h=s(g);g.studyPeriodId=h?h.id:null,c.push(g),e=new Date(e.getFullYear(),e.getMonth(),e.getDate()+1)}a.weeks=c;for(var i=0;i<a.criteria.studyYear.studyPeriods.length;i++){var j=a.weeks.reduce(b,0);a.criteria.studyYear.studyPeriods[i].weeks=j}}function s(b){return g.getStudyYearOrPeriodAt(b.start,a.criteria.studyYear.studyPeriods)}function t(b){if(!b.studyYearScheduleLegend)return 1;for(var c=0,d=b.studyYearScheduleLegend;b.studyYearScheduleLegend===d;)c++,b=a.getSchedule(b.studentGroup,b.weekNr+1);return c}function u(a,b){return a.studyYearScheduleLegend===b.studyYearScheduleLegend&&a.studentGroup===b.studentGroup&&a.weekNr===b.weekNr&&a.addInfo===b.addInfo}a.auth=b.current.locals.auth,a.canEdit=l.isAuthorized(k.ROLE_OIGUS_M_TEEMAOIGUS_OPPETOOGRAAFIK),a.colorOptions={disabled:!0},a.useMyFilter=a.auth.isStudent()||a.auth.isParent(),a.criteria={schoolDepartments:[],studyYear:null,studyPeriods:[],studentGroups:[]},a.useMyFilter&&(a.criteria.showMine=!0),a.formState={xlsUrl:"studyYearSchedule/studyYearSchedule.xlsx",pdfUrl:"studyYearSchedule/studyYearSchedule.pdf"},a.weeks=[],a.studyYearSchedules=[],d.loadingWheel(a,!0),d.endpoint("/autocomplete/schooldepartments").query().$promise.then(function(b){a.schoolDepartments=b,e.isEmpty(a.criteria.schoolDepartments)&&(a.criteria.schoolDepartments=a.schoolDepartments.filter(function(a){return a.valid}).map(function(a){return a.id}),d.loadingWheel(a,!1))}),a.legends=d.endpoint("/school/studyYearScheduleLegends").search(),d.loadingWheel(a,!0),a.legends.$promise.then(function(b){a.legends=b.legends,d.loadingWheel(a,!1)}),o(),a.studyYears=d.endpoint("/studyYearSchedule/studyYears").query(p),a.schoolDepartmentsChanged=function(){e.isEmpty(a.studentGroups)||(a.criteria.studentGroups=a.studentGroups.filter(function(b){return e.intersect(b.schoolDepartments,a.criteria.schoolDepartments)}).map(function(a){return a.id}),q())},a.showMineChanged=function(){o(),q()},a.exportUrl=function(b){var c={studyYearId:a.criteria.studyYear?a.criteria.studyYear.id:null,schoolDepartments:a.criteria.schoolDepartments,showMine:a.criteria.showMine};return m.apiUrl+"/"+b+"?"+n(c)},a.filterSchoolDepartments=function(b){return!e.isEmpty(a.criteria.schoolDepartments)&&e.includes(a.criteria.schoolDepartments,b.id)},a.filterStudentGroups=function(a){return function(b){return e.includes(b.schoolDepartments,a.id)}},a.getLegendById=function(b){if(angular.isArray(a.legends)){var c=a.legends.find(function(a){return a.id===b});return c}},a.$watch(function(){return document.getElementsByClassName("lessonplan")[0].offsetHeight},function(){var a=document.getElementsByClassName("lessonplan")[0].offsetHeight+17,b=i.innerHeight-340;b>a?angular.element(document.getElementsByClassName("container")[0]).css("height",a+"px"):angular.element(document.getElementsByClassName("container")[0]).css("height",b+"px")}),angular.element(i).bind("resize",function(){var a=document.getElementsByClassName("lessonplan")[0].offsetHeight+17,b=i.innerHeight-340;b>a?angular.element(document.getElementsByClassName("container")[0]).css("height",a+"px"):angular.element(document.getElementsByClassName("container")[0]).css("height",b+"px")}),a.getWeeksPeriod=function(b){return a.weeks.find(function(a){return a.weekNr===b}).studyPeriodId},a.openAddScheduleDialog=function(b,c,d){if(c.studyPeriodId&&a.canEdit){var f=function(e){e.hasValue=d.studyYearScheduleLegend?!0:!1,e.studentGroup=b,e.week=c,e.legends=a.legends,e.data={weeks:t(d),legend:d.studyYearScheduleLegend,addInfo:d.addInfo},e.translationData={weeks:a.weeks.length-c.weekNr+1}};j.showDialog("studyYearSchedule/study.year.schedule.add.dialog.html",f,function(d){if(d.data.legend)for(var f=0;f<d.data.weeks&&!(c.weekNr+f>a.weeks.length);f++){var g=a.getSchedule(b.id,c.weekNr+f),h={studyYearScheduleLegend:d.data.legend,weekNr:c.weekNr+f,studentGroup:b.id,studyPeriod:0===f?c.studyPeriodId:a.getWeeksPeriod(c.weekNr+f),addInfo:d.data.addInfo};u(g,h)||(e.includes(a.studyYearSchedules,g)&&e.remove(a.studyYearSchedules,g),a.studyYearSchedules.push(h))}else for(var i=0;i<d.data.weeks;i++){var j=a.getSchedule(b.id,c.weekNr+i);e.includes(a.studyYearSchedules,j)&&e.remove(a.studyYearSchedules,j)}})}},a.getSchedule=function(b,c){var d=a.studyYearSchedules.find(function(a){return a.weekNr===c&&a.studentGroup===b});return d||(d={studyYearScheduleLegend:null,studentGroup:b,weekNr:c,addInfo:""}),d},a.save=function(){a.record.studyYearSchedules=a.studyYearSchedules,a.record.$put().then(function(b){f.updateSuccess(),a.studyYearSchedules=b.studyYearSchedules})},a.refreshHeight=function(){var a=21*document.getElementsByClassName("lessonplan")[0].rows.length,b=i.innerHeight-340;b>a?angular.element(document.getElementsByClassName("container")[0]).css("height",a+"px"):angular.element(document.getElementsByClassName("container")[0]).css("height",b+"px")},a.yearSelectionTrigger=function(){a.criteria.studyYear?a.criteria.studyYear!==a.lastPickedStudyYear&&(a.isPastStudyYear=g.isPastStudyYearOrPeriod(a.criteria.studyYear),a.criteria.studyPeriods=a.criteria.studyYear.studyPeriods.map(function(a){return a.id}),q(),r(),a.lastPickedStudyYear=a.criteria.studyYear):a.isPastStudyYear=!0}}]),angular.module("hitsaOis").config(["$routeProvider","USER_ROLES",function(a,b){a.when("/studyYearScheduleLegend",{templateUrl:"studyYearSchedule/study.year.schedule.legend.html",controller:"studyYearScheduleLegendController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}]},data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_OPPETOOGRAAFIK]}}).when("/studyYearSchedule",{templateUrl:"studyYearSchedule/study.year.schedule.html",controller:"studyYearScheduleController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}]}})}]),angular.module("hitsaOis").controller("studyYearScheduleLegendController",["$scope","QueryUtils","ArrayUtils","message","dialogService","USER_ROLES","AuthService",function(a,b,c,d,e,f,g){function h(a){a.colorPicker=function(b){return arguments.length?a.color="#"+b:a.color}}function i(){return a.legends.filter(function(a){return!a.code}).length>0}function j(){return a.legends.filter(function(a){return a.code&&a.code.length>2}).length>0}function k(){return a.legends.filter(function(a){return!a.nameEt}).length>0}function l(){return a.legends.filter(function(a){return a.nameEt&&a.nameEt.length>50||a.nameEn&&a.nameEn.length>50}).length>0}a.removedInUseLegend=!1,a.canEdit=g.isAuthorized(f.ROLE_OIGUS_M_TEEMAOIGUS_OPPETOOGRAAFIK),a.colorOptions={disabled:a.canEdit};var m=[{code:"E",nameEt:"Eksam",color:"#FF0000"},{code:"Pr",nameEt:"Praktika ettevõtes",color:"#790FFC"},{code:"P",nameEt:"Praktika koolis",color:"#1FF47C"},{code:"V",nameEt:"Vaheaeg",color:"#E6E6E6"},{code:"X",nameEt:"ei osale õppetöös",color:"#8C8C8C"}];m.forEach(h),a.newLegend={},a.record=b.endpoint("/school/studyYearScheduleLegends").search(function(b){b&&b.legends&&0!==b.legends.length?(a.legends=b.legends,a.legends.forEach(h),a.defaultLegends=!1):(a.legends=m,a.defaultLegends=!0)}),a.remove=function(b){b.inUse&&(a.removedInUseLegend=!0),c.remove(a.legends,b),a.legends.forEach(function(a){a.edited=!1})},a.save=function(){a.formSubmitted=!0,a.legends.forEach(function(a){a.edited=!1}),a.record.legends=a.legends,a.record.$put().then(function(b){d.updateSuccess(),a.legends=b.legends,a.legends.forEach(h),angular.isArray(b.legends)&&b.legends.length>0?a.defaultLegends=!1:a.defaultLegends=!0,a.removedInUseLegend=!1})},a.checkErrorsAndSave=function(){return i()?(d.error("studyYearScheduleLegend.error.codeRequired"),!0):j()?(d.error("studyYearScheduleLegend.error.codeLength"),!0):k()?(d.error("studyYearScheduleLegend.error.nameEtRequired"),!0):l()?(d.error("studyYearScheduleLegend.error.nameLength"),!0):void(a.removedInUseLegend?e.confirmDialog({prompt:"studyYearScheduleLegend.error.inUseLegendRemove",accept:"main.yes",cancel:"main.no"},function(){a.save()}):a.save())},a.codeIsValid=function(a){return a.code&&a.code.length<=2},a.nameEtIsValid=function(a){return a.nameEt&&a.nameEt.length<=50},a.nameEnIsValid=function(a){return!a.nameEn||a.nameEn.length<=50},a.changeEditable=function(b){a.canEdit&&(a.legends.forEach(function(a){a.edited=!1}),b.edited=!0)},a.addRow=function(){var b={color:"#FFFFFF"};a.legends.push(b),h(b),a.legends.forEach(function(a){a.edited=!1}),b.edited=!0}}]),angular.module("hitsaOis").controller("SubjectEditController",["$scope","$rootScope","$route","$location","$translate","$q","dialogService","message","QueryUtils",function(a,b,c,d,e,f,g,h,i){function j(a){h.error(a)}function k(){a.subjectForm.$setSubmitted();var b=[],c=r(b,a.subject.mandatoryPrerequisiteSubjects)||r(b,a.subject.recommendedPrerequisiteSubjects)||r(b,a.subject.substituteSubjects);return a.subjectForm.$valid&&!c?!0:(h.error("main.messages.form-has-errors"),!1)}function l(b,c){k()&&g.confirmDialog({prompt:c.prompt},function(){new b(a.subject).$update().then(function(b){a.subject=new o(b),h.info(c.success),a.subjectForm.$setPristine()})})}var m=c.current.params.id,n=c.current.params.backUrl;a.formState={backUrl:n?"#/"+n:"#/subject"},a.subjectCodeUniqueQuery={id:m,url:"/subject/unique/code"},i.endpoint("/subject/initEditFormData").search(function(b){angular.extend(a,b.toJSON())});var o=i.endpoint("/subject"),p=i.endpoint("/subject/saveAndConfirm"),q=i.endpoint("/subject/saveAndUnconfirm");m?a.subject=o.get({id:m}):a.subject=new o({status:"AINESTAATUS_S"});var r=function(a,c){for(var d=!1,f=0;f<c.length;f++)a.indexOf(c[f].id)>-1&&(e("subject.alreadyConnected",{subject:b.currentLanguageNameField(c[f])}).then(j),d=!0),a.push(c[f].id);return d};a.update=function(){k()&&(a.subject.id?a.subject.$update().then(function(b){a.subject=new o(b),h.updateSuccess(),a.subjectForm.$setPristine()}):a.subject.$save().then(function(a){d.url("/subject/"+a.id+"/edit?_noback"),h.info("main.messages.create.success")}))},a.saveAndConfirm=function(){var a={prompt:"subject.prompt.saveAndConfirm",success:"subject.message.savedAndConfirmed"};l(p,a)},a.saveAndUnconfirm=function(){var a={prompt:"subject.prompt.saveAndUnconfirm",success:"subject.message.savedAndUnconfirmed"};l(q,a)},a["delete"]=function(){g.confirmDialog({prompt:"subject.deleteconfirm"},function(){a.subject.$delete().then(function(){h.info("main.messages.delete.success"),d.url("/subject?_noback")})})}}]).controller("SubjectViewController",["$scope","$route","config","QueryUtils",function(a,b,c,d){a.isPublic=b.current.locals.params&&b.current.locals.params.isPublic;var e=b.current.params.id,f=b.current.params.backUrl;a.formState={backUrl:f?"#/"+f:a.isPublic?"#/subject/public":"#/subject"},a.subject=d.endpoint(a.isPublic?"/public/subject/view":"/subject").get({id:e}),a.publicUrl=c.apiUrl+"/public/subject/"+e+"?format=json"}]).controller("SubjectListController",["$q","$scope","$route","Classifier","QueryUtils",function(a,b,c,d,e){b.isPublic=c.current.locals.params&&c.current.locals.params.isPublic;var f=d.valuemapper({status:"AINESTAATUS",assessment:"HINDAMISVIIS",languages:"OPPEKEEL"});e.createQueryForm(b,b.isPublic?"/public/subjectsearch":"/subject",{order:"en"===b.currentLanguage()?"nameEn":"nameEt"},f.objectmapper),a.all(f.promises).then(b.loadData),b.subjectLanguages=function(a){return a.map(b.currentLanguageNameField).join(", ")},b.formState={},b.isPublic?b.$watch("criteria.schoolId",function(a){a?(b.curricula=e.endpoint("/public/curriculumversions").query({schoolId:a}),b.departments=e.endpoint("/public/schooldepartments").query({schoolId:a})):(b.curricula=[],b.departments=[])}):(e.endpoint("/subject/initSearchFormData").search(function(a){angular.extend(b,a.toJSON())}),e.endpoint("/subject/getPermissions").search(function(a){b.formState.canCreate=a.canCreate,b.formState.canViewAll=a.canViewAll}))}]),angular.module("hitsaOis").config(["$routeProvider","USER_ROLES",function(a,b){function c(a,b,c,d,e){d.resolve().then(function(d){d.isAdmin()&&c.includes(d.authorizedRoles,e.ROLE_OIGUS_M_TEEMAOIGUS_AINE)||(a.error("main.messages.error.nopermission"),b.path(""))})}c.$inject=["message","$location","ArrayUtils","AuthResolver","USER_ROLES"],a.when("/subject",{templateUrl:"subject/subject.list.html",controller:"SubjectListController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}]},data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_AINE]}}).when("/subject/public",{templateUrl:"subject/subject.list.html",controller:"SubjectListController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],params:function(){return{isPublic:!0}}}}).when("/subject/new",{templateUrl:"subject/subject.edit.html",controller:"SubjectEditController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],checkAccess:c},data:{authorizedRoles:[b.ROLE_OIGUS_M_TEEMAOIGUS_AINE]}}).when("/subject/:id/edit",{templateUrl:"subject/subject.edit.html",controller:"SubjectEditController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],checkAccess:c},data:{authorizedRoles:[b.ROLE_OIGUS_M_TEEMAOIGUS_AINE]}}).when("/subject/:id",{templateUrl:"subject/subject.view.html",controller:"SubjectViewController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}]},data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_AINE]}}).when("/subject/public/:id",{templateUrl:"subject/subject.view.html",controller:"SubjectViewController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],params:function(){return{isPublic:!0}}}})}]),angular.module("hitsaOis").controller("SubjectStudyPeriodSearchController",["$scope","QueryUtils","DataUtils","$route","ArrayUtils","Classifier","message",function(a,b,c,d,e,f,g){function h(){!a.criteria||e.isEmpty(a.studyPeriods)||a.criteria.studyPeriods||(a.criteria.studyPeriods=c.getCurrentStudyYearOrPeriod(a.studyPeriods).id)}b.createQueryForm(a,"/subjectStudyPeriods",{order:"s."+a.currentLanguageNameField()}),a.auth=d.current.locals.auth,f.queryForDropdown({mainClassCode:"AINEPROGRAMM_STAATUS"},function(b){a.statusOptions=f.toMap(b)}),a.load=function(){return a.searchForm.$valid?void a.loadData():(g.error("main.messages.form-has-errors"),!1)},b.endpoint("/autocomplete/studyPeriods").query().$promise.then(function(b){a.studyPeriods=b,h(),a.loadData()}),a.$watch("criteria.studentObject",function(){a.criteria&&(a.criteria.student=a.criteria.studentObject?a.criteria.studentObject.id:null)}),a.showTeachers=function(a,b){var c="";if(a.teachers){c=a.teachers.join("; ");var d=30;!b&&c.length>d&&(c=c.substring(0,d)+"...")}return c},a.testStatus={code:"AINEPROGRAMM_STAATUS_L"}}]).controller("SubjectStudyPeriodEditController",["$scope","QueryUtils","ArrayUtils","$route","dialogService","message","$q","$rootScope","DeclarationType",function(a,b,c,d,e,f,g,h,i){function j(b){return a.record.teachers.filter(function(a){return a.teacherId===b.id}).length>0}function k(){return i.DEKLARATSIOON_KOIK===a.record.declarationType||i.DEKLARATSIOON_LISA===a.record.declarationType}function l(){return a.subjectStudyPeriodEditForm.$setSubmitted(),a.subjectStudyPeriodEditForm.$valid?a.record.teachers&&0!==a.record.teachers.length?!0:(f.error("subjectStudyPeriod.error.teacherNotAdded"),!1):(f.error("main.messages.form-has-errors"),!1)}function m(){v&&a.record.studentGroups.push(v),1===a.record.teachers.length&&(a.record.teachers[0].isSignatory=!0)}function n(a){return-1!==a.indexOf("new")}function o(){v&&u?h.replaceLastUrl("#/subjectStudyPeriods/studentGroups/"+v+"/"+u+"/edit",n):x&&u?h.replaceLastUrl("#/subjectStudyPeriods/teachers/"+x+"/"+u+"/edit",n):w&&u&&!v&&!x&&h.replaceLastUrl("#/subjectStudyPeriods/subjects/"+w+"/"+u+"/edit",n)}function p(){f.updateSuccess(),o(),a.subjectStudyPeriodEditForm.$setPristine()}function q(){l()&&(m(),a.record.id?a.record.$update().then(function(){f.updateSuccess(),a.subjectStudyPeriodEditForm.$setPristine()}):a.record.$save().then(p))}var r="/subjectStudyPeriods",s=b.endpoint(r),t=d.current.params.id,u=d.current.params.studyPeriodId?parseInt(d.current.params.studyPeriodId,10):null,v=d.current.params.studentGroupId?parseInt(d.current.params.studentGroupId,10):null,w=d.current.params.subjectId?parseInt(d.current.params.subjectId,10):null,x=d.current.params.teacherId?parseInt(d.current.params.teacherId,10):null;if(a.hasObligatoryStudentGroup=null!==v,a.obligatoryTeacher=x,b.endpoint("/subjectStudyPeriods/studentGroups/list").query(function(b){a.studentGroups=b.filter(function(a){return v?a.id!==v:!0}).map(function(a){var b=a;return b.nameEt=a.code,b.nameEn=a.code,b})}),h.removeLastUrlFromHistory(function(a){return a&&-1!==a.indexOf("subjectStudyPeriod/"+t+"/view")}),v&&(a.studentGroup=b.endpoint("/studentgroups").get({id:v})),a.studyPeriods=b.endpoint("/autocomplete/studyPeriods").query(),a.subjects=b.endpoint("/subjectStudyPeriods/subjects/list").query(),t)s.get({id:t}).$promise.then(function(d){a.record=d,v&&c.remove(a.record.studentGroups,v),a.record.groupProportion||(a.record.groupProportion="PAEVIK_GRUPI_JAOTUS_1"),a.disableSubject=!0,a.subject=b.endpoint("/subjectStudyPeriods/subject").get({id:d.subject},function(b){a.subjects.$promise.then(function(a){for(var c=0;c<a.length;c++)if(a[c].id===b.id)return;a.push(b)})})});else{var y={groupProportion:"PAEVIK_GRUPI_JAOTUS_1",studyPeriod:u,subject:w,teachers:[],studentGroups:[]};a.record=new s(y),a.disableSubject=null!==w,x&&b.endpoint("/subjectStudyPeriods/teacher").get({id:x}).$promise.then(function(b){a.record.teachers.push({teacherId:b.id,name:b.nameEt})})}a.addTeacher=function(b){b&&!j(b)?a.record.teachers.push({teacherId:b.id,name:b.nameEt,isSignatory:!1}):b&&j(b)&&f.error("subjectStudyPeriodTeacher.teacherAlreadyAdded"),a.teacher=void 0},a.querySearch=function(a){var c=b.endpoint("/subjectStudyPeriods/teachers/page"),d=g.defer();return c.search({name:a},function(a){d.resolve(a.content)}),d.promise},a.removeTeacher=function(b){c.remove(a.record.teachers,b)},a.save=function(){k()?e.confirmDialog({prompt:"subjectStudyPeriod.prompt.addedAutomaticallyToDeclarations"},q):q()},a["delete"]=function(){e.confirmDialog({prompt:"subjectStudyPeriodTeacher.deleteconfirm"},function(){a.record.$delete().then(function(){f.info("main.messages.delete.success"),h.back("#"+r)})})}}]).controller("SubjectStudyPeriodViewController",["$scope","QueryUtils","$route",function(a,b,c){var d=b.endpoint("/subjectStudyPeriods"),e=c.current.params.id;a.record=d.get({id:e}),a.studyPeriods=b.endpoint("/autocomplete/studyPeriods").query(),b.endpoint("/subjectStudyPeriods/studentGroups/list").query(function(b){a.studentGroups=b.map(function(a){var b=a;return b.nameEt=a.code,b.nameEn=a.code,b})}),a.subjects=b.endpoint("/subjectStudyPeriods/subjects/list").query()}]).constant("DeclarationType",{DEKLARATSIOON_EI:"DEKLARATSIOON_EI",DEKLARATSIOON_KOIK:"DEKLARATSIOON_KOIK",DEKLARATSIOON_LISA:"DEKLARATSIOON_LISA"}),angular.module("hitsaOis").factory("SspCapacities",[function(){var a=function(a){function b(){return a&&a.subjectStudyPeriodDtos?a.subjectStudyPeriodDtos:[]}function c(a,b){var c=b&&b.hours?b.hours:0;return a+=c}function d(a){for(var b=0,c=0;c<a.length;c++)b+=g.capacitiesSumBySsp(a[c]);return b}function e(a){return function(b){return b.capacityType===a}}function f(a,b){for(var d=0,f=0;f<b.length;f++)d+=b[f].capacities.filter(e(a)).reduce(c,0);return d}var g=this;this.addEmptyCapacities=function(b){for(var c=0;c<b.length;c++)for(var d=a.subjectStudyPeriodDtos,e=0;e<d.length;e++)this.getCapacity(d[e],b[c].code)},this.getSubjectsCapacityByType=function(b,c){if(!a||!a.subjectStudyPeriodPlans)return 0;var d=a.subjectStudyPeriodPlans.find(function(a){return a.subject===b});if(!d)return 0;var e=d.capacities.find(function(a){return a.capacityType===c});return e&&e.hours?e.hours:0},this.getSubjectsTotalCapacity=function(b,c){if(!a||!a.subjectStudyPeriodPlans||!c)return 0;for(var d=0,e=0;e<c.length;e++)d+=g.getSubjectsCapacityByType(b,c[e].code);return d},this.capacitiesSumBySsp=function(a){return a.capacities.reduce(c,0)},this.capacitiesSumOverall=function(){if(!a||!a.subjectStudyPeriodDtos)return 0;var b=a.subjectStudyPeriodDtos;return d(b)},this.getCapacitiesBySubject=function(a){return b().filter(function(b){return b.subject===a})},this.capacitiesSumBySubjectAndType=function(b,c){if(!a||!a.subjectStudyPeriodDtos)return 0;var d=g.getCapacitiesBySubject(b);return f(c,d)},this.capacitiesSumByType=function(b){if(!a||!a.subjectStudyPeriodDtos)return 0;var c=a.subjectStudyPeriodDtos;return f(b,c)},this.capacitiesSumBySubject=function(b){if(!a||!a.subjectStudyPeriodDtos)return 0;var c=g.getCapacitiesBySubject(b);return d(c)},this.getCapacity=function(a,b){var c=a.capacities.find(function(a){return a.capacityType===b});return c||(c={capacityType:b},a.capacities.push(c)),c},this.filterEmptyCapacities=function(){for(var a=b(),c=0;c<a.length;c++)a[c].capacities=a[c].capacities.filter(function(a){return void 0!==a.hours&&null!==a.hours&&""!==a.hours})},this.teachersLoadOk=function(a){return a.teachers.reduce(function(a,b){return a+=b.scheduleLoad},0)>=g.capacitiesSumBySsp(a)}};return a}]),angular.module("hitsaOis").config(["$routeProvider","USER_ROLES",function(a,b){a.when("/subjectStudyPeriods",{templateUrl:"subjectStudyPeriod/subject.study.period.search.html",controller:"SubjectStudyPeriodSearchController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}]},data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_AINEOPPETAJA,b.ROLE_OIGUS_V_TEEMAOIGUS_PAEVIK]}}).when("/subjectStudyPeriod/:id/edit",{templateUrl:"subjectStudyPeriod/subject.study.period.edit.html",controller:"SubjectStudyPeriodEditController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}]},data:{authorizedRoles:[b.ROLE_OIGUS_M_TEEMAOIGUS_AINEOPPETAJA,b.ROLE_OIGUS_M_TEEMAOIGUS_PAEVIK]}}).when("/subjectStudyPeriod/:id/view",{templateUrl:"subjectStudyPeriod/subject.study.period.view.html",controller:"SubjectStudyPeriodViewController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}]},data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_AINEOPPETAJA,b.ROLE_OIGUS_V_TEEMAOIGUS_PAEVIK]}}).when("/subjectStudyPeriod/new",{templateUrl:"subjectStudyPeriod/subject.study.period.edit.html",controller:"SubjectStudyPeriodEditController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}]},data:{authorizedRoles:[b.ROLE_OIGUS_M_TEEMAOIGUS_AINEOPPETAJA,b.ROLE_OIGUS_M_TEEMAOIGUS_PAEVIK]}}).when("/subjectStudyPeriods/studentGroups",{templateUrl:"subjectStudyPeriod/studentGroup/subject.study.period.student.group.search.html",controller:"SubjectStudyPeriodStudentGroupSearchController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}]},data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_TUNNIJAOTUSPLAAN]}}).when("/subjectStudyPeriods/studentGroups/new",{templateUrl:"subjectStudyPeriod/studentGroup/subject.study.period.student.group.edit.html",controller:"SubjectStudyPeriodStudentGroupEditController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}]},data:{authorizedRoles:[b.ROLE_OIGUS_M_TEEMAOIGUS_TUNNIJAOTUSPLAAN]}}).when("/subjectStudyPeriods/studentGroups/:studentGroupId/:studyPeriodId/edit",{templateUrl:"subjectStudyPeriod/studentGroup/subject.study.period.student.group.edit.html",controller:"SubjectStudyPeriodStudentGroupEditController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}]},data:{authorizedRoles:[b.ROLE_OIGUS_M_TEEMAOIGUS_TUNNIJAOTUSPLAAN]}}).when("/subjectStudyPeriods/studentGroups/:studentGroupId/:studyPeriodId/view",{templateUrl:"subjectStudyPeriod/studentGroup/subject.study.period.student.group.view.html",controller:"SubjectStudyPeriodStudentGroupViewController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}]},data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_TUNNIJAOTUSPLAAN]}}).when("/subjectStudyPeriods/teachers",{templateUrl:"subjectStudyPeriod/teacher/subject.study.period.teacher.search.html",controller:"SubjectStudyPeriodTeacherSearchController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}]},data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_TUNNIJAOTUSPLAAN]}}).when("/subjectStudyPeriods/teachers/new",{templateUrl:"subjectStudyPeriod/teacher/subject.study.period.teacher.edit.html",controller:"SubjectStudyPeriodTeacherEditController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}]},data:{authorizedRoles:[b.ROLE_OIGUS_M_TEEMAOIGUS_TUNNIJAOTUSPLAAN]}}).when("/subjectStudyPeriods/teachers/:teacherId/:studyPeriodId/edit",{templateUrl:"subjectStudyPeriod/teacher/subject.study.period.teacher.edit.html",controller:"SubjectStudyPeriodTeacherEditController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}]},data:{authorizedRoles:[b.ROLE_OIGUS_M_TEEMAOIGUS_TUNNIJAOTUSPLAAN]}}).when("/subjectStudyPeriods/teachers/:teacherId/:studyPeriodId/view",{templateUrl:"subjectStudyPeriod/teacher/subject.study.period.teacher.view.html",controller:"SubjectStudyPeriodTeacherViewController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}]},data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_TUNNIJAOTUSPLAAN]}}).when("/subjectStudyPeriods/subjects",{templateUrl:"subjectStudyPeriod/subject/subject.study.period.subject.search.html",controller:"SubjectStudyPeriodSubjectSearchController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}]},data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_TUNNIJAOTUSPLAAN]}}).when("/subjectStudyPeriods/subjects/new",{templateUrl:"subjectStudyPeriod/subject/subject.study.period.subject.edit.html",controller:"SubjectStudyPeriodSubjectEditController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}]},data:{authorizedRoles:[b.ROLE_OIGUS_M_TEEMAOIGUS_TUNNIJAOTUSPLAAN]}}).when("/subjectStudyPeriods/subjects/:subjectId/:studyPeriodId/edit",{templateUrl:"subjectStudyPeriod/subject/subject.study.period.subject.edit.html",controller:"SubjectStudyPeriodSubjectEditController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}]},data:{authorizedRoles:[b.ROLE_OIGUS_M_TEEMAOIGUS_TUNNIJAOTUSPLAAN]}}).when("/subjectStudyPeriods/subjects/:subjectId/:studyPeriodId/view",{templateUrl:"subjectStudyPeriod/subject/subject.study.period.subject.view.html",controller:"SubjectStudyPeriodSubjectViewController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}]},data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_TUNNIJAOTUSPLAAN]}})}]),angular.module("hitsaOis").controller("SubjectStudyPeriodStudentGroupEditController",["$scope","QueryUtils","ArrayUtils","Classifier","$route","message","dialogService","$rootScope","SspCapacities","DataUtils",function(a,b,c,d,e,f,g,h,i,j){function k(){a.record.studyPeriod||(a.record.studyPeriod=j.getCurrentStudyYearOrPeriod(a.studyPeriods).id,q=a.record.studyPeriod)}function l(){a.record.studyPeriod&&(a.studentGroups=b.endpoint("/subjectStudyPeriods/studentGroups/list/limited/"+a.record.studyPeriod).query())}function m(){a.curriculum=b.endpoint("/subjectStudyPeriods/studentGroups/curriculum/"+a.studentGroup.curriculum.id).get(n)}function n(){var b=a.curriculum.studyPeriod;a.curriculumStudyPeriod={years:Math.floor(b/12),months:b%12}}function o(){a.studentGroup=a.studentGroups.find(function(b){return b.id===a.record.studentGroup}),a.studentGroup&&(a.course=a.studentGroup.course.toString(),m())}function p(){a.record.studyPeriod=q,a.capacitiesUtil.filterEmptyCapacities(),a.record.$put().then(function(b){f.updateSuccess(),a.record=b,a.capacitiesUtil.addEmptyCapacities(a.capacityTypes),a.subjectStudyPeriodStudentGroupEditForm.$setPristine()})}var q=e.current.params.studyPeriodId?parseInt(e.current.params.studyPeriodId,10):null,r=e.current.params.studentGroupId?parseInt(e.current.params.studentGroupId,10):null;a.isEditing=null===r&&null===q;var s=b.endpoint("/subjectStudyPeriods/studentGroups/container");a.capacityTypes=b.endpoint("/autocomplete/schoolCapacityTypes").query({isHigher:!0}),a.record={},q||(a.studyPeriods=b.endpoint("/autocomplete/studyPeriods").query(k)),r&&(a.container={studyPeriod:q,studentGroup:r,subjectStudyPeriodDtos:[]},a.record=s.search(a.container),a.record.$promise.then(function(b){a.capacitiesUtil=new i(b),a.capacityTypes=b.capacityTypes,a.capacitiesUtil.addEmptyCapacities(a.capacityTypes)}),a.studentGroup=b.endpoint("/studentgroups/"+r).get(function(b){a.studentGroup.nameEt=b.code,a.course=a.studentGroup.course.toString(),m()}),a.formState={xlsUrl:"subjectStudyPeriods/studentGroups/subjectstudyperiodstudentgroup.xls"}),a.$watch("record.studyPeriod",l),a.isEditing||(a.studyPeriod=b.endpoint("/subjectStudyPeriods/studyPeriod").get({id:q})),a.$watch("record.studentGroup",function(){
!c.isEmpty(a.studentGroups)&&a.record.studentGroup&&o()}),a.subjectsLoadValid=function(b){for(var c,d,e=a.capacitiesUtil.getCapacitiesBySubject(b),f=function(a){return function(b){return b.capacityType===a}},g=0;g<a.capacityTypes.length;g++){d=a.capacitiesUtil.getSubjectsCapacityByType(b,a.capacityTypes[g].code);for(var h=0;h<e.length;h++){var i=e[h].capacities.find(f(a.capacityTypes[g].code));if(c=i?i.hours:0,c>d)return!1}}return!0},a.save=function(){if(a.subjectStudyPeriodStudentGroupEditForm.$setSubmitted(),!a.subjectStudyPeriodStudentGroupEditForm.$valid)return void f.error("main.messages.form-has-errors");var b=a.record.subjects;if(c.isEmpty(b)||c.isEmpty(a.record.subjectStudyPeriodDtos))return void f.error("subjectStudyPeriod.error.noDataForSaving");var d=a.record.subjects.filter(function(b){return!a.subjectsLoadValid(b.id)});if(!c.isEmpty(d)){var e=d.map(function(a){return h.currentLanguageNameField(a)}).join(", ");return void g.confirmDialog({prompt:"subjectStudyPeriod.error.subjectLoad",subject:e},p)}p()}}]),angular.module("hitsaOis").controller("SubjectStudyPeriodStudentGroupViewController",["$scope","QueryUtils","Classifier","$route","SspCapacities","USER_ROLES","AuthService",function(a,b,c,d,e,f,g){function h(){a.curriculum=b.endpoint("/subjectStudyPeriods/studentGroups/curriculum/"+a.studentGroup.curriculum.id).get(i)}function i(){var b=a.curriculum.studyPeriod;a.curriculumStudyPeriod={years:Math.floor(b/12),months:b%12}}a.auth=d.current.locals.auth,a.canEdit=g.isAuthorized(f.ROLE_OIGUS_M_TEEMAOIGUS_TUNNIJAOTUSPLAAN);var j=parseInt(d.current.params.studyPeriodId,10),k=parseInt(d.current.params.studentGroupId,10);a.isEditing=null===k;var l=b.endpoint("/subjectStudyPeriods/studentGroups/container");a.formState={xlsUrl:"subjectStudyPeriods/studentGroups/subjectstudyperiodstudentgroup.xls"},a.container={studyPeriod:j,studentGroup:k,subjectStudyPeriodDtos:[]},a.record=l.search(a.container),a.record.$promise.then(function(b){a.capacitiesUtil=new e(b),a.capacityTypes=b.capacityTypes}),b.endpoint("/studentgroups/"+k).get(function(b){a.studentGroup=b,a.studentGroup.nameEt=b.code,a.course=a.studentGroup.course.toString(),h()}),a.studyPeriod=b.endpoint("/subjectStudyPeriods/studyPeriod").get({id:j})}]),angular.module("hitsaOis").controller("SubjectStudyPeriodStudentGroupSearchController",["$scope","$route","QueryUtils","ArrayUtils","DataUtils","USER_ROLES","AuthService","message",function(a,b,c,d,e,f,g,h){function i(){a.criteria&&!a.criteria.studyPeriod&&(a.criteria.studyPeriod=e.getCurrentStudyYearOrPeriod(a.studyPeriods).id),a.loadData()}a.schoolId=b.current.locals.auth.school.id,a.canEdit=g.isAuthorized(f.ROLE_OIGUS_M_TEEMAOIGUS_TUNNIJAOTUSPLAAN),a.currentNavItem="studentGroups",a.formState={xlsUrl:"subjectStudyPeriods/studentGroups/searchByStudentGroup.xls"},c.createQueryForm(a,"/subjectStudyPeriods/studentGroups",{order:"id"}),a.studyPeriods=c.endpoint("/autocomplete/studyPeriods").query(i),a.load=function(){return a.searchForm.$valid?void a.loadData():(h.error("main.messages.form-has-errors"),!1)},a.$watch("criteria.department",function(){if(a.criteria.department&&a.criteria.curriculum){var b=a.curricula.find(function(b){return b.id===a.criteria.curriculum});-1===b.departments.indexOf(a.criteria.department)&&(a.criteria.curriculum=void 0)}}),a.$watch("criteria.curriculum",function(){if(a.criteria.curriculum&&a.criteria.studentGroup){var b=a.studentGroups.find(function(b){return b.id===a.criteria.studentGroup});b.curriculum.id!==a.criteria.curriculum&&(a.criteria.studentGroup=void 0)}}),a.curricula=c.endpoint("/subjectStudyPeriods/studentGroups/curricula").query(),c.endpoint("/subjectStudyPeriods/studentGroups/list").query(function(b){a.studentGroups=b.map(function(a){var b=a;return b.nameEt=a.code,b.nameEn=a.code,b})}),a.filterCurriculums=function(b){return a.criteria.department?d.includes(b.departments,a.criteria.department):!0},a.filterStudentGroups=function(b){return a.criteria.curriculum?b.curriculum.id===a.criteria.curriculum:!0}}]),angular.module("hitsaOis").controller("SubjectProgramController",["$scope","QueryUtils","$route","ArrayUtils","message","dialogService","$location","config","$rootScope","$timeout",function(a,b,c,d,e,f,g,h,i,j){function k(){u?j(function(){a.subjectProgram?a.subjectProgram.$get({id:u},o):a.subjectProgram=w.get({id:u},o)}):a.subjectProgram=new w(x)}function l(){a.subjectProgram.$update().then(function(b){e.info("main.messages.update.success"),o(b),a.subjectProgramForm.$setPristine()})}function m(){a.subjectProgram.$save().then(function(a){e.info("main.messages.create.success"),g.url("/subjectProgram/"+r+"/"+s+"/"+t+"/"+a.id+"/edit")})}function n(){return a.subjectProgramForm.$setSubmitted(),a.subjectProgramForm.$valid?!0:(e.error("main.messages.form-has-errors"),!1)}function o(b){a.studyContentWk=[],a.studyContentDt=[],"OPPETOOSISU_K"===b.studyContentType?(a.studyContentDt=b.studyContents,a.studyContentDt.forEach(function(a){a.studyDt=new Date(a.studyDt)}),a.studyContentDt.sort(function(a,b){return a.studyDt-b.studyDt})):"OPPETOOSISU_N"===b.studyContentType&&(a.studyContentWk=b.studyContents,a.studyContentWk.sort(function(a,b){return a.weekNr-b.weekNr})),a.isSupervisor=d.includes(b.supervisorIds,a.userTeacherId)}function p(){a.subjectProgram.subjectId=r,a.subjectProgram.subjectStudyPeriodId=s,"OPPETOOSISU_K"===a.subjectProgram.studyContentType?(a.subjectProgram.studyDescription=null,a.studyContentWk=[],a.subjectProgram.studyContents=a.studyContentDt):"OPPETOOSISU_N"===a.subjectProgram.studyContentType?(a.subjectProgram.studyDescription=null,a.studyContentDt=[],a.subjectProgram.studyContents=a.studyContentWk):(a.studyContentWk=[],a.studyContentDt=[],a.subjectProgram.studyContents=null)}var q=Object.freeze({periods:"periods",programs:"programs"}),r=c.current.params.subjectId,s=c.current.params.subjectStudyPeriodId,t=q[c.current.params.form];angular.isUndefined(t)&&(e.error("main.messages.error.nopermission"),g.path("/"));var u=c.current.params.subjectProgramId,v="/subject/subjectProgram",w=b.endpoint(v),x={studyContentType:"OPPETOOSISU_T",status:"AINEPROGRAMM_STAATUS_L"};i.removeLastUrlFromHistory(function(a){return a&&-1!==a.indexOf("new")}),a.selectedSubjectProgram=void 0,a.subjectPrograms=b.endpoint(v+"/teacher/"+r).query(),a.studyContentWk=[],a.studyContentDt=[],a.userTeacherId=c.current.locals.auth.teacher,a.isSupervisor=!1,a.subject=b.endpoint(v+"/subject").get({id:r}),a.addStudyContentDt=function(){a.studyContentDt.push({id:null,studyDt:null,studyInfo:null})},a.addStudyContentWk=function(){a.studyContentWk.push({id:null,weekNr:null,studyInfo:null})},a.removeFromArray=d.remove,a["delete"]=function(){f.confirmDialog({prompt:"subjectProgram.operation.delete.message"},function(){a.subjectProgram.$delete().then(function(){e.info("main.messages.delete.success"),t===q.periods?g.url("/subjectStudyPeriods"):t===q.programs&&g.url("/subjectProgram")})})},a.getSubjectProgramData=function(c){angular.isDefined(c)&&b.endpoint(v).get({id:c.id}).$promise.then(function(b){a.subjectProgram.independentStudy=b.independentStudy,a.subjectProgram.assessmentDescription=b.assessmentDescription,a.subjectProgram.studyLiterature=b.studyLiterature,a.subjectProgram.studyDescription=b.studyDescription,a.subjectProgram.studyContentType=b.studyContentType,a.subjectProgram.publicAll=b.publicAll,a.subjectProgram.publicHois=b.publicHois,a.subjectProgram.publicStudent=b.publicStudent,a.subjectProgram.passDescription=b.passDescription,a.subjectProgram.npassDescription=b.npassDescription,a.subjectProgram.grade0Description=b.grade0Description,a.subjectProgram.grade1Description=b.grade1Description,a.subjectProgram.grade2Description=b.grade2Description,a.subjectProgram.grade3Description=b.grade3Description,a.subjectProgram.grade4Description=b.grade4Description,a.subjectProgram.grade5Description=b.grade5Description,b.studyContents.forEach(function(a){a.id=null}),o(b)})},a.pdfUrl=function(){return h.apiUrl+v+"/print/"+a.subjectProgram.id+"/program.pdf"},a.edit=function(){"AINEPROGRAMM_STAATUS_I"!==a.subjectProgram.status?f.confirmDialog({prompt:"subjectProgram.messages.editAccept"},function(){g.url("/subjectProgram/"+r+"/"+s+"/"+t+"/"+u+"/edit")}):g.url("/subjectProgram/"+r+"/"+s+"/"+t+"/"+u+"/edit")},a.completeProgram=function(){f.confirmDialog({prompt:"subjectProgram.operation.complete.message"},function(){b.endpoint(v+"/complete").get({id:a.subjectProgram.id}).$promise.then(function(){e.info("subjectProgram.operation.complete.success"),g.url("/subjectProgram/"+r+"/"+s+"/"+t+"/"+a.subjectProgram.id+"/view")})})},a.confirm=function(){f.confirmDialog({prompt:"subjectProgram.operation.confirm.message"},function(){b.endpoint(v+"/confirm").get({id:a.subjectProgram.id}).$promise.then(function(){e.info("subjectProgram.operation.confirm.success"),k()})})},a.reject=function(){f.confirmDialog({prompt:"subjectProgram.operation.reject.message"},function(){b.endpoint(v+"/reject/"+a.subjectProgram.id).save("test").$promise.then(function(){e.info("subjectProgram.operation.reject.success"),k()})})},a.openRejectDialog=function(){var c="subjectProgram/dialog/subject.program.reject.dialog.html";f.showDialog(c,function(c){function d(){return c.dialogForm.$setSubmitted(),c.dialogForm.$valid?!0:(e.error("main.messages.form-has-errors"),!1)}c.rejectProgram=function(){d()&&b.endpoint(v+"/reject/"+a.subjectProgram.id).save(c.rejectInfo).$promise.then(function(){e.info("subjectProgram.operation.reject.success"),k()})}},function(){})},a.save=function(){n()&&(p(),a.subjectProgram.id?l():m())},a.getDefaultBack=function(){return t===q.programs?"#/subjectProgram":"#/subjectStudyPeriods"},k()}]).controller("SubjectProgramSearch",["$scope","QueryUtils","$route","DataUtils","Classifier",function(a,b,c,d,e){function f(){if(!a.criteria.studyPeriod){var b=d.getCurrentStudyYearOrPeriod(a.studyPeriods);b&&(a.criteria.studyPeriod=b.id)}}function g(){f(),a.subjects.$promise.then(function(){a.loadData()}),a.studyPeriods.forEach(function(b){b[a.currentLanguageNameField()]=a.currentLanguageNameField(b.studyYear)+" "+a.currentLanguageNameField(b)})}var h="/subject/subjectProgram";b.createQueryForm(a,h),a.auth=c.current.locals.auth,a.criteria.status="AINEPROGRAMM_STAATUS_V";var i=b.endpoint("/autocomplete/teachersList"),j=b.endpoint("/autocomplete/studyPeriodsWithYear"),k=b.endpoint(h+"/subjects");a.studyPeriods=j.query(g),a.subjects=k.query(),e.queryForDropdown({mainClassCode:"AINEPROGRAMM_STAATUS"},function(b){a.statusOptions=e.toMap(b)}),a.searchTeacher=function(a){return i.query({name:a,valid:!0}).$promise},a.getStudyPeriodName=function(b){return a.studyPeriods.filter(function(a){return a.id===b.id})[0][a.currentLanguageNameField()]},a.clearCriteriaBefore=function(){a.clearCriteria(),f(),a.criteria.status="AINEPROGRAMM_STAATUS_V"},a.load=function(){return a.searchForm.$valid?void a.loadData():(message.error("main.messages.form-has-errors"),!1)}}]),angular.module("hitsaOis").config(["$routeProvider",function(a){function b(a,b,c){c.resolve().then(function(c){c.isTeacher()&&c.higher||(a.error("main.messages.error.nopermission"),b.path("/"))})}function c(a,b,c){c.resolve().then(function(c){c.isTeacher()&&c.higher||(a.error("main.messages.error.nopermission"),b.path("/"))})}function d(a){return angular.isDefined(a.hasCurriculums)&&a.hasCurriculums}b.$inject=["message","$location","AuthResolver"],c.$inject=["message","$location","AuthResolver"],a.when("/subjectProgram",{templateUrl:"subjectProgram/subject.program.list.html",controller:"SubjectProgramSearch",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}]},data:{authorizedRoles:d}}).when("/subjectProgram/:subjectId/:subjectStudyPeriodId/:form/new",{templateUrl:"subjectProgram/subject.program.edit.html",controller:"SubjectProgramController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}],checkAccess:b}}).when("/subjectProgram/:subjectId/:subjectStudyPeriodId/:form/:subjectProgramId/view",{templateUrl:"subjectProgram/subject.program.view.html",controller:"SubjectProgramController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}],checkAccess:c}}).when("/subjectProgram/:subjectId/:subjectStudyPeriodId/:form/:subjectProgramId/edit",{templateUrl:"subjectProgram/subject.program.edit.html",controller:"SubjectProgramController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}],checkAccess:b}})}]),angular.module("hitsaOis").controller("SubjectStudyPeriodSubjectEditController",["$scope","QueryUtils","ArrayUtils","$route","message","Classifier","SspCapacities","DataUtils",function(a,b,c,d,e,f,g,h){function i(){a.record.studyPeriod||(a.record.studyPeriod=h.getCurrentStudyYearOrPeriod(a.studyPeriods).id,l=a.record.studyPeriod)}function j(){a.record.studyPeriod&&(a.subjects=b.endpoint("/subjectStudyPeriods/subjects/list/limited/"+a.record.studyPeriod).query())}function k(){return a.subjectStudyPeriodSubjectEditForm.$setSubmitted(),a.subjectStudyPeriodSubjectEditForm.$valid?c.isEmpty(a.record.subjectStudyPeriodDtos)?(e.error("subjectStudyPeriod.error.noDataForSaving"),!1):!0:(e.error("main.messages.form-has-errors"),!1)}var l=d.current.params.studyPeriodId?parseInt(d.current.params.studyPeriodId,10):null,m=d.current.params.subjectId?parseInt(d.current.params.subjectId,10):null;a.isNew=null===m&&null===l;var n=b.endpoint("/subjectStudyPeriods/subjects/container");a.record={},l?a.studyPeriod=b.endpoint("/subjectStudyPeriods/studyPeriod").get({id:l}):a.studyPeriods=b.endpoint("/autocomplete/studyPeriods").query(i),m&&(a.container={studyPeriod:l,subject:m,subjectStudyPeriodDtos:[]},a.record=n.search(a.container),a.record.$promise.then(function(b){a.capacitiesUtil=new g(b),a.capacityTypes=b.capacityTypes,a.capacitiesUtil.addEmptyCapacities(a.capacityTypes)}),a.subject=b.endpoint("/subjectStudyPeriods/subject/"+m).get(),a.formState={xlsUrl:"subjectStudyPeriods/subjects/subjectstudyperiodsubject.xls"}),a.$watch("record.studyPeriod",j),a.save=function(){k()&&(a.capacitiesUtil.filterEmptyCapacities(),a.record.$put().then(function(b){e.updateSuccess(),a.record=b,a.capacitiesUtil.addEmptyCapacities(a.capacityTypes),a.subjectStudyPeriodSubjectEditForm.$setPristine()}))}}]),angular.module("hitsaOis").controller("SubjectStudyPeriodSubjectViewController",["$scope","QueryUtils","$route","Classifier","SspCapacities","USER_ROLES","AuthService",function(a,b,c,d,e,f,g){a.auth=c.current.locals.auth,a.canEdit=g.isAuthorized(f.ROLE_OIGUS_M_TEEMAOIGUS_TUNNIJAOTUSPLAAN);var h=parseInt(c.current.params.studyPeriodId,10),i=parseInt(c.current.params.subjectId,10),j=b.endpoint("/subjectStudyPeriods/subjects/container");a.formState={xlsUrl:"subjectStudyPeriods/subjects/subjectstudyperiodsubject.xls"},a.studyPeriod=b.endpoint("/subjectStudyPeriods/studyPeriod").get({id:h}),a.container={studyPeriod:h,subject:i,subjectStudyPeriodDtos:[]},a.record=j.search(a.container),a.record.$promise.then(function(b){a.capacitiesUtil=new e(b),a.capacityTypes=b.capacityTypes}),a.subject=b.endpoint("/subjectStudyPeriods/subject/"+i).get()}]),angular.module("hitsaOis").controller("SubjectStudyPeriodSubjectSearchController",["$scope","$sessionStorage","QueryUtils","DataUtils","ArrayUtils","USER_ROLES","AuthService","message",function(a,b,c,d,e,f,g,h){function i(){a.criteria&&!a.criteria.studyPeriod&&(a.criteria.studyPeriod=d.getCurrentStudyYearOrPeriod(a.studyPeriods).id),a.loadData()}a.canEdit=g.isAuthorized(f.ROLE_OIGUS_M_TEEMAOIGUS_TUNNIJAOTUSPLAAN),a.currentNavItem="subjects",a.formState={xlsUrl:"subjectStudyPeriods/subjects/searchBySubject.xls"},c.createQueryForm(a,"/subjectStudyPeriods/subjects",{order:"id"}),a.studyPeriods=c.endpoint("/autocomplete/studyPeriods").query(i),a.load=function(){return a.searchForm.$valid?void a.loadData():(h.error("main.messages.form-has-errors"),!1)},a.$watch("criteria.teacherObject",function(){a.criteria.teacher=a.criteria.teacherObject?a.criteria.teacherObject.id:null}),a.$watch("criteria.subjectObject",function(){a.criteria.subject=a.criteria.subjectObject?a.criteria.subjectObject.id:null})}]),angular.module("hitsaOis").controller("SubjectStudyPeriodTeacherEditController",["$scope","QueryUtils","ArrayUtils","$route","message","Classifier","SspCapacities","DataUtils",function(a,b,c,d,e,f,g,h){function i(){a.record.studyPeriod||(a.record.studyPeriod=h.getCurrentStudyYearOrPeriod(a.studyPeriods).id,l=a.record.studyPeriod)}function j(){a.record.studyPeriod&&(a.teachers=b.endpoint("/subjectStudyPeriods/teachers/list/limited/"+a.record.studyPeriod).query())}function k(){if(a.subjectStudyPeriodTeacherEditForm.$setSubmitted(),!a.subjectStudyPeriodTeacherEditForm.$valid)return e.error("main.messages.form-has-errors"),!1;var b=a.record.subjects;return c.isEmpty(b)||c.isEmpty(a.record.subjectStudyPeriodDtos)?void e.error("subjectStudyPeriod.error.noDataForSaving"):!0}var l=d.current.params.studyPeriodId?parseInt(d.current.params.studyPeriodId,10):null,m=d.current.params.teacherId?parseInt(d.current.params.teacherId,10):null;a.isNew=null===m&&null===l;var n=b.endpoint("/subjectStudyPeriods/teachers/container");a.record={},l?a.studyPeriod=b.endpoint("/subjectStudyPeriods/studyPeriod").get({id:l}):a.studyPeriods=b.endpoint("/autocomplete/studyPeriods").query(i),m&&(a.container={studyPeriod:l,teacher:m,subjectStudyPeriodDtos:[]},a.record=n.search(a.container),a.record.$promise.then(function(b){a.capacitiesUtil=new g(b),a.capacityTypes=b.capacityTypes,a.capacitiesUtil.addEmptyCapacities(a.capacityTypes)}),a.teacher=b.endpoint("/subjectStudyPeriods/teacher/"+m).get(),a.formState={xlsUrl:"subjectStudyPeriods/teachers/subjectstudyperiodteacher.xls"}),a.$watch("record.studyPeriod",j),a.save=function(){k()&&(a.capacitiesUtil.filterEmptyCapacities(),a.record.$put().then(function(b){e.updateSuccess(),a.record=b,a.capacitiesUtil.addEmptyCapacities(a.capacityTypes),a.subjectStudyPeriodTeacherEditForm.$setPristine()}))}}]),angular.module("hitsaOis").controller("SubjectStudyPeriodTeacherViewController",["$scope","QueryUtils","$route","Classifier","SspCapacities","USER_ROLES","AuthService",function(a,b,c,d,e,f,g){a.auth=c.current.locals.auth,a.canEdit=g.isAuthorized(f.ROLE_OIGUS_M_TEEMAOIGUS_TUNNIJAOTUSPLAAN);var h=parseInt(c.current.params.studyPeriodId,10),i=c.current.params.teacherId,j=b.endpoint("/subjectStudyPeriods/teachers/container");a.formState={xlsUrl:"subjectStudyPeriods/teachers/subjectstudyperiodteacher.xls"},a.studyPeriod=b.endpoint("/subjectStudyPeriods/studyPeriod").get({id:h}),a.container={studyPeriod:h,teacher:i,subjectStudyPeriodDtos:[]},a.record=j.search(a.container),a.record.$promise.then(function(b){a.capacitiesUtil=new e(b),a.capacityTypes=b.capacityTypes}),a.teacher=b.endpoint("/subjectStudyPeriods/teacher/"+i).get()}]),angular.module("hitsaOis").controller("SubjectStudyPeriodTeacherSearchController",["$scope","$route","QueryUtils","DataUtils","ArrayUtils","USER_ROLES","AuthService","message",function(a,b,c,d,e,f,g,h){function i(){a.criteria&&!a.criteria.studyPeriod&&(a.criteria.studyPeriod=d.getCurrentStudyYearOrPeriod(a.studyPeriods).id),a.loadData()}a.schoolId=b.current.locals.auth.school.id,a.canEdit=g.isAuthorized(f.ROLE_OIGUS_M_TEEMAOIGUS_TUNNIJAOTUSPLAAN),a.currentNavItem="teachers",a.formState={xlsUrl:"subjectStudyPeriods/teachers/searchByTeacher.xls"},c.createQueryForm(a,"/subjectStudyPeriods/teachers",{order:"id"}),a.studyPeriods=c.endpoint("/autocomplete/studyPeriods").query(i),a.load=function(){return a.searchForm.$valid?void a.loadData():(h.error("main.messages.form-has-errors"),!1)},a.$watch("criteria.teacherObject",function(){a.criteria.teacher=a.criteria.teacherObject?a.criteria.teacherObject.id:null})}]),angular.module("hitsaOis").controller("subjectStudyPeriodPlanSearchController",["$scope","QueryUtils","ArrayUtils","message","DataUtils","Classifier","USER_ROLES","AuthService",function(a,b,c,d,e,f,g,h){function i(){a.criteria&&!a.criteria.studyPeriod&&(a.criteria.studyPeriod=e.getCurrentStudyYearOrPeriod(a.studyPeriods).id),a.loadData(),a.checkIfStudyPeriodIsPast()}a.canEdit=h.isAuthorized(g.ROLE_OIGUS_M_TEEMAOIGUS_AINE);var j=f.queryForDropdown({mainClassCode:"MAHT",higher:!0}),k=b.endpoint("/autocomplete/schoolCapacityTypes").query({isHigher:!0});b.createQueryForm(a,"/subjectStudyPeriodPlans",{order:"id"},function(b){var c={};b.forEach(function(a){a.plans.forEach(function(a){a.capacities.forEach(function(a){c[a.capacityType]=!0})})}),k.forEach(function(a){c[a.code]=!0}),a.capacityTypes=j.filter(function(a){return c[a.code]})}),b.endpoint("/autocomplete/studyPeriods").query().$promise.then(function(b){a.studyPeriods=b,e.sortStudyYearsOrPeriods(a.studyPeriods),i()}),a.curriculums=b.endpoint("/subjectStudyPeriodPlans/curriculums").query(),a.$watch("criteria.subjectObject",function(){a.criteria.subject=a.criteria.subjectObject?a.criteria.subjectObject.id:null}),a.load=function(){return a.searchForm.$valid?void a.loadData():(d.error("main.messages.form-has-errors"),!1)},a.getCapacitiesHours=function(a,b){if(b.capacities){var c=b.capacities.find(function(b){return b.capacityType===a});return c&&c.hours?c.hours:"-"}},a.pastStudyPeriodSelected=!1,a.checkIfStudyPeriodIsPast=function(){if(a.studyPeriods){var b=a.studyPeriods.find(function(b){return b.id===a.criteria.studyPeriod});b&&(a.pastStudyPeriodSelected=e.isPastStudyYearOrPeriod(b))}},a.$watch("criteria.curriculum",function(){a.subjectQueryParams=a.criteria.curriculum?{curricula:[a.criteria.curriculum],status:["AINESTAATUS_K"]}:{status:["AINESTAATUS_K"]}})}]).controller("subjectStudyPeriodPlanNewController",["$scope","QueryUtils","ArrayUtils","message","DataUtils","$mdDialog","dialogService","$route","Classifier","$location",function(a,b,c,d,e,f,g,h,i,j){function k(c){b.endpoint(t+"/studyPeriod/"+c).get().$promise.then(function(b){a.studyPeriod=b,a.readOnly=e.isPastStudyYearOrPeriod(a.studyPeriod)})}function l(c){a.subject=b.endpoint(t+"/subject/"+c).get()}function m(){b.endpoint(t+"/curriculums").query({subjects:[a.record.subject]}).$promise.then(function(b){a.curriculums=b,a.curriculums.forEach(function(b){b.selected=c.includes(a.record.curriculums,b.id)})})}function n(){b.endpoint("/autocomplete/schoolCapacityTypes").query({isHigher:!0},function(b){for(var c=[],d=0;d<b.length;d++)c.push({isContact:!1,hours:null,capacityType:b[d].code});a.record.capacities=c})}function o(b){var c=a.record.capacities.find(function(a){return a.capacityType===b});return angular.isDefined(c)&&null!==c}function p(){a.record.capacities||(a.record.capacities=[]),b.endpoint("/autocomplete/schoolCapacityTypes").query({isHigher:!0},function(b){for(var c=0;c<b.length;c++)o(b[c].code)||a.record.capacities.push({isContact:!1,hours:null,capacityType:b[c].code})})}function q(){i.queryForDropdown({mainClassCode:"OPPEVORM",higher:!0},function(b){a.studyForms=b,a.studyForms.forEach(function(b){b.selected=c.includes(a.record.studyForms,b.code)})})}function r(){a.record.id?a.record.$update().then(function(){d.info("main.messages.create.success")}):a.record.$save().then(function(a){d.info("main.messages.create.success"),j.url(t+"/"+a.id+"/edit?_noback")}),a.subjectStudyPeriodPlanEditForm.$setPristine()}var s=h.current.params.id,t="/subjectStudyPeriodPlans",u=b.endpoint(t);a.readOnly=!1;var v={studyPeriod:h.current.params.studyPeriodId,subject:h.current.params.subjectId,studyForms:[],curriculums:[]};s?u.get({id:s}).$promise.then(function(b){a.record=b,k(b.studyPeriod),l(b.subject),m(),q(),p()}):(a.record=new u(v),n(),k(a.record.studyPeriod),l(a.record.subject),m(),q()),a.getTotalCapacity=function(){return a.record&&a.record.capacities?a.record.capacities.reduce(function(a,b){return b.hours?a+b.hours:a},0):0},a.save=function(){return a.subjectStudyPeriodPlanEditForm.$valid?(a.record.studyForms=a.studyForms.filter(function(a){return a.selected}).map(function(a){return a.code}),a.record.curriculums=a.curriculums.filter(function(a){return a.selected}).map(function(a){return a.id}),void b.endpoint(t+"/exists").search(a.record).$promise.then(function(a){a.exists?g.confirmDialog({prompt:"subjectStudyPeriodPlan.overrideconfirm"},function(){r()}):r()})):void d.error("main.messages.form-has-errors")},a["delete"]=function(){g.confirmDialog({prompt:"subjectStudyPeriodPlan.deleteconfirm"},function(){a.record.$delete().then(function(){d.info("main.messages.delete.success"),j.path(t)})})}}]),angular.module("hitsaOis").config(["$routeProvider","USER_ROLES",function(a,b){a.when("/subjectStudyPeriodPlans",{templateUrl:"subjectStudyPeriodPlan/subject.study.period.plan.search.html",controller:"subjectStudyPeriodPlanSearchController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}]},data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_AINE]}}).when("/subjectStudyPeriodPlans/:subjectId/:studyPeriodId/new",{templateUrl:"subjectStudyPeriodPlan/subject.study.period.plan.edit.html",controller:"subjectStudyPeriodPlanNewController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}]},data:{authorizedRoles:[b.ROLE_OIGUS_M_TEEMAOIGUS_AINE]}}).when("/subjectStudyPeriodPlans/:id/edit",{templateUrl:"subjectStudyPeriodPlan/subject.study.period.plan.edit.html",controller:"subjectStudyPeriodPlanNewController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}]},data:{authorizedRoles:[b.ROLE_OIGUS_M_TEEMAOIGUS_AINE]}})}]),angular.module("hitsaOis").config(["$routeProvider","USER_ROLES",function(a,b){a.when("/timetable/lessonTime/search",{templateUrl:"timetable/timetable.lessonTime.list.html",controller:"TimetableLessonTimeListController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}]},data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_TUNDAEG]}}).when("/timetable/lessonTime",{templateUrl:"timetable/timetable.lessonTime.html",controller:"TimetableLessonTimeController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}]},data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_TUNDAEG]}}).when("/timetable/lessonTime/:id/:action",{templateUrl:function(a){return"edit"===a.action?"timetable/timetable.lessonTime.html":"timetable/timetable.lessonTime.view.html"},controller:"TimetableLessonTimeController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}],entity:["QueryUtils","$route",function(a,b){return a.endpoint("/lessontimes").get({id:b.current.params.id}).$promise}],isView:["$route",function(a){return"view"===a.current.params.action}]},data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_TUNDAEG]}}).when("/timetable/generalTimetableByGroup/:schoolId?",{templateUrl:"timetable/generalTimetable/timetable.generalTimetable.byGroup.html",controller:"GeneralTimetableByGroupController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}]}}).when("/timetable/generalTimetableByTeacher/:schoolId?",{templateUrl:"timetable/generalTimetable/timetable.generalTimetable.byTeacher.html",controller:"GeneralTimetableByTeacherController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}]}}).when("/timetable/generalTimetableByRoom/:schoolId?",{templateUrl:"timetable/generalTimetable/timetable.generalTimetable.byRoom.html",controller:"GeneralTimetableByRoomController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}]}}).when("/timetable/personalGeneralTimetable",{templateUrl:"timetable/generalTimetable/timetable.generalTimetable.personal.html",controller:"PersonalGeneralTimetableController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}]},data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_TUNNIPLAAN]}}).when("/timetable/searchGeneralTimetable/:schoolId?",{templateUrl:"timetable/generalTimetable/timetable.generalTimetable.search.html",controller:"GeneralTimetableSearchController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}]}}).when("/timetable/timetableManagement",{templateUrl:"timetable/timetable.timetableManagement.html",controller:"TimetableManagementController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}]},data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_TUNNIPLAAN]}}).when("/timetable/new",{templateUrl:"timetable/timetable.edit.html",controller:"TimetableEditController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}],isCreate:function(){return!0}},data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_TUNNIPLAAN]}}).when("/timetable/:id/edit",{templateUrl:"timetable/timetable.edit.html",controller:"TimetableEditController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}],entity:["QueryUtils","$route",function(a,b){return a.endpoint("/timetables").get({id:b.current.params.id}).$promise}],isView:["$route",function(a){return"view"===a.current.params.action}]},data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_TUNNIPLAAN]}}).when("/timetable/:id/view",{templateUrl:"timetable/timetable.view.html",controller:"TimetableViewController",controllerAs:"controller",resolve:{auth:["AuthResolver",function(a){return a.resolve()}]},data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_TUNNIPLAAN]}}).when("/timetable/:id/createVocationalPlan/:groupId",{templateUrl:"timetable/timetable.createVocationalPlan.html",controller:"VocationalTimetablePlanController",controllerAs:"controller",resolve:{auth:["AuthResolver",function(a){return a.resolve()}]},data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_TUNNIPLAAN]}}).when("/timetable/:id/createHigherPlan/group/:groupId",{templateUrl:"timetable/timetable.createHigherPlan.html",controller:"HigherTimetablePlanController",controllerAs:"controller",resolve:{auth:["AuthResolver",function(a){return a.resolve()}]},data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_TUNNIPLAAN]}}).when("/timetable/:id/createHigherPlan/pair/:pairId",{templateUrl:"timetable/timetable.createHigherPlan.html",controller:"HigherTimetablePlanController",controllerAs:"controller",resolve:{auth:["AuthResolver",function(a){return a.resolve()}]},data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_TUNNIPLAAN]}}).when("/timetable/:id/createHigherPlan",{templateUrl:"timetable/timetable.createHigherPlan.html",controller:"HigherTimetablePlanController",controllerAs:"controller",resolve:{auth:["AuthResolver",function(a){return a.resolve()}]},data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_TUNNIPLAAN]}}).when("/timetable/group/:schoolId/:groupId/:weekIndex?",{templateUrl:"timetable/timetable.week.view.html",controller:"GroupTimetableViewController",controllerAs:"controller",resolve:{auth:["AuthResolver",function(a){return a.resolve()}]}}).when("/timetable/teacher/:schoolId/:teacherId/:weekIndex?",{
templateUrl:"timetable/timetable.week.view.html",controller:"TeacherTimetableViewController",controllerAs:"controller",resolve:{auth:["AuthResolver",function(a){return a.resolve()}]}}).when("/timetable/room/:schoolId/:roomId/:weekIndex?",{templateUrl:"timetable/timetable.week.view.html",controller:"RoomTimetableViewController",controllerAs:"controller",resolve:{auth:["AuthResolver",function(a){return a.resolve()}]}}).when("/timetable/student/:schoolId/:studentId",{templateUrl:"timetable/timetable.week.view.html",controller:"StudentTimetableViewController",controllerAs:"controller",resolve:{auth:["AuthResolver",function(a){return a.resolve()}]},data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_TUNNIPLAAN]}}).when("/timetables",{templateUrl:"timetable/generalTimetable/timetable.generalTimetable.school.list.html",controller:"GeneralTimetableSchoolListController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}]}}).when("/timetable/timetableEvent/new",{templateUrl:"timetable/timetable.timetableEvent.edit.html",controller:"TimetableEventEditController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}],isCreate:function(){return!0}},data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_TUNNIPLAAN]}}).when("/timetable/timetableEvent/:id/edit",{templateUrl:"timetable/timetable.timetableEvent.edit.html",controller:"TimetableEventEditController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}],isCreate:function(){return!0}},data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_TUNNIPLAAN]}}).when("/timetable/timetableEvent/:id/view",{templateUrl:"timetable/timetable.timetableEvent.view.html",controller:"TimetableEventEditController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}]},data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_TUNNIPLAAN]}})}]),angular.module("hitsaOis").controller("TimetableLessonTimeController",["$scope","$rootScope","$q","QueryUtils","Classifier","DataUtils","ArrayUtils","$route","message","$timeout","$location",function(a,b,c,d,e,f,g,h,i,j,k){function l(b){var c=[];for(var e in b)b.hasOwnProperty(e)&&angular.isDefined(b[e])&&c.push(e);c.length>0?d.endpoint("/lessontimes/minValidFrom").get({buildings:c.join(),lessonTimeId:h.current.params.id},function(b){null===b.minValidFrom?a.minValidFrom=void 0:(f.convertStringToDates(b,["minValidFrom"]),a.minValidFrom=b.minValidFrom,a.validFrom<a.minValidFrom+1&&(a.validFrom=void 0))}):a.minValidFrom=void 0}function m(b,c,d){d===!1&&angular.isDefined(a.usedBuildings[b.id])?(a.usedBuildings[b.id]=void 0,c.selectedBuildings[b.id]=!1):(a.usedBuildings[b.id]=c,c.selectedBuildings[b.id]=!0)}function n(b){for(var c in b.selectedBuildings)b.selectedBuildings.hasOwnProperty(c)&&b.selectedBuildings[c]===!0&&(a.usedBuildings[c]=void 0)}function o(){for(var b={lessonTimes:[],selectedBuildings:{}},c={dayMon:!0,dayTue:!0,dayWed:!0,dayThu:!0,dayFri:!0,daySat:!0,daySun:!0},d=0;u>d;d++)b.lessonTimes.push(angular.extend({},c));return a.buildings.forEach(function(c){angular.isDefined(a.usedBuildings[c.id])||m(c,b,!0)}),b}function p(b){a.blocks=[],a.usedBuildings={},f.convertStringToDates(b,["validFrom"]),a.validFrom=b.validFrom,angular.isArray(b.lessonTimeBuildingGroups)&&b.lessonTimeBuildingGroups.forEach(function(b){var c={id:b.id,lessonTimes:[],selectedBuildings:{}};a.blocks.push(c),angular.isArray(b.lessonTimes)&&b.lessonTimes.forEach(function(a){f.convertStringToTime(a,["startTime","endTime"]),c.lessonTimes.push(a)}),angular.isArray(b.buildings)&&b.buildings.forEach(function(a){m(a,c,!0)})})}function q(b){for(var c=b.length;c--;)a.isLessonTimeRowFilled(b[c])||b.splice(c,1)}function r(){var b=!0;a:for(var c=0;a.blocks.length>c;c++){for(var d=!1,e=0;a.blocks[c].lessonTimes.length>e;e++){a.isLessonTimeRowFilled(a.blocks[c].lessonTimes[e])&&(d=!0);var f=a.blocks[c].lessonTimes[e].startTime,g=a.blocks[c].lessonTimes[e].endTime;if("undefined"!=typeof f&&"undefined"!=typeof g){if(f>g){i.error("timetable.lessonTime.endIsEarlierThanStart"),b=!1;break a}if(f.getHours()<7||23===g.getHours()&&g.getMinutes()>0){i.error("timetable.lessonTime.outOfTimeRange"),b=!1;break a}}}d||(i.error("timetable.lessonTime.oneRowRequired"),b=!1)}return b}function s(a){var b={validFrom:a.validFrom,lessonTimeBuildingGroups:[]};return angular.isArray(a.blocks)&&a.blocks.forEach(function(a){q(a.lessonTimes);var c={id:a.id,lessonTimes:a.lessonTimes,buildings:[]};if(angular.isObject(a.selectedBuildings))for(var d in a.selectedBuildings)a.selectedBuildings.hasOwnProperty(d)&&a.selectedBuildings[d]===!0&&c.buildings.push({id:parseInt(d,10)});b.lessonTimeBuildingGroups.push(c)}),b}function t(){return angular.isDefined(w)}var u=10;b.replaceLastUrl("#/timetable/lessonTime/search"),a.buildings=d.endpoint("/autocomplete/buildings").query(),a.blocks=[],a.usedBuildings={};var v;a.$watchCollection("usedBuildings",function(a){angular.isDefined(v)&&!v.resolved&&j.cancel(v),v=j(function(){l(a)},500)}),a.addNewRow=function(a){a.lessonTimes.push({})},a.addNewBlock=function(){a.lessonTimeForm.$setPristine(!0),a.blocks.push(o())},a.deleteBlock=function(b){n(b),g.remove(a.blocks,b)},a.deleteRow=function(a,b){g.remove(a,b)},a.calculateAcademicHours=function(a,b){var c=Math.round((b-a)/27e5*100)/100;return c>=0?c:0},a.buildingChanged=function(b,c){m(b,c,c.selectedBuildings[b.id]),a.blocks.$setDirty()},a.isBuildingDisabled=function(b,c){return angular.isDefined(a.usedBuildings[b.id])?!angular.equals(c,a.usedBuildings[b.id]):!1},a.selectedBuildingsLength=function(a){var b=0;for(var c in a.selectedBuildings)a.selectedBuildings.hasOwnProperty(c)&&a.selectedBuildings[c]===!0&&b++;var d=function(){return b};return d},a.isLessonTimeRowFilled=function(a){return angular.isObject(a)?!!a.lessonNr||!!a.startTime||!!a.endTime&&(a.dayMon===!0||a.dayTue===!0||a.dayWed===!0||a.dayThu===!0||a.dayFri===!0||a.daySat===!0||a.daySun===!0):!1};var w=h.current.locals.entity;angular.isDefined(w)?p(w):a.buildings.$promise.then(function(){a.blocks.push(o())}),a.save=function(){if(a.lessonTimeForm.$setSubmitted(),a.lessonTimeForm.$valid&&r()){var b;if(t()){b=d.endpoint("/lessontimes/");var c=s(a);new b(c).$update().then(function(b){i.info("main.messages.create.success"),a.lessonTimeForm.$setPristine(),p(b)})}else{b=d.endpoint("/lessontimes");var e=s(a);new b(e).$save().then(function(b){i.info("main.messages.create.success"),a.lessonTimeForm.$setPristine(),angular.isArray(b.lessonTimeBuildingGroups)&&b.lessonTimeBuildingGroups.forEach(function(a){angular.isArray(a.lessonTimes)&&a.lessonTimes.length>0&&k.path("/timetable/lessonTime/"+a.lessonTimes[0].id+"/edit")})})}}}}]),angular.module("hitsaOis").controller("TimetableLessonTimeListController",["$scope","$q","QueryUtils","Classifier","DataUtils","$filter","USER_ROLES","AuthService",function(a,b,c,d,e,f,g,h){function i(a){var b=[];return a.dayMon===!0&&b.push({day:"NADALAPAEV_E"}),a.dayTue===!0&&b.push({day:"NADALAPAEV_T"}),a.dayWed===!0&&b.push({day:"NADALAPAEV_K"}),a.dayThu===!0&&b.push({day:"NADALAPAEV_N"}),a.dayFri===!0&&b.push({day:"NADALAPAEV_R"}),a.daySat===!0&&b.push({day:"NADALAPAEV_L"}),a.daySun===!0&&b.push({day:"NADALAPAEV_P"}),b}a.canEdit=h.isAuthorized(g.ROLE_OIGUS_M_TEEMAOIGUS_TUNDAEG);var j=d.valuemapper({day:"NADALAPAEV"}),k=j.promises;a.days=[];var l=c.endpoint("/lessontimes/currentPeriod").get(function(b){e.convertStringToDates(b,["periodStart"]),a.criteria.from=b.periodStart}).$promise;k.push(l),c.createQueryForm(a,"/lessontimes",{order:"lessonNr"},j.objectmapper),b.all(k).then(function(){var b=[{day:"NADALAPAEV_E"},{day:"NADALAPAEV_T"},{day:"NADALAPAEV_K"},{day:"NADALAPAEV_N"},{day:"NADALAPAEV_R"},{day:"NADALAPAEV_L"},{day:"NADALAPAEV_P"}];j.objectmapper(b).forEach(function(b){a.days.push(b.day)}),a.loadData()}),a.displayWeekdays=function(b){var c=i(b);return j.objectmapper(c).map(function(b){return b.day[a.currentLanguageNameField()].charAt(0)}).join(", ")},a.displayBuildings=function(b){var c=b.map(function(b){return b[a.currentLanguageNameField()]});return f("orderBy")(c).join(", ")},a.hasPassed=function(a){return e.convertStringToDates(a,["validThru"]),null!==a.validThru&&a.validThru<new Date},a.canEditLessonTime=function(b){return!a.hasPassed(b)&&a.canEdit}}]),angular.module("hitsaOis").controller("TimetableManagementController",["$rootScope","$window","$scope","$location","$timeout","message","QueryUtils","DataUtils","Classifier","dialogService","USER_ROLES","AuthService","oisFileService",function(a,b,c,d,e,f,g,h,i,j,k,l,m){function n(){c.formState.studyPeriods=c.allStudyPeriods.filter(function(a){return a.studyYear===c.criteria.studyYear})}function o(a){for(var b=0;b<c.formState.studyPeriods.length;b++){var d=c.formState.studyPeriods[b];if(d.id===a)return!0}return!1}c.canEdit=l.isAuthorized(k.ROLE_OIGUS_M_TEEMAOIGUS_TUNNIPLAAN);var p="/timetables",q=i.valuemapper({status:"TUNNIPLAAN_STAATUS"});g.createQueryForm(c,p+"/searchTimetableForManagement",{order:"3, 4"},q.objectmapper),c.formState={xlsDiffUrl:"timetables/timetableDifference.xls",xlsPlanUrl:"timetables/timetablePlan.xlsx"};var r=c.loadData;c.loadData=function(){c.timetableSearchForm.$setSubmitted(),c.timetableSearchForm.$valid?r():f.error("main.messages.form-has-errors")},c.openAddFileDialog=function(a,b){j.showDialog("timetable/dialog/file.import.dialog.html",function(a){},function(c){var d=c.data;m.getFromLfFile(d.file[0],function(c){d.oisFile=c;var e=g.endpoint("/timetables/importXml/"+a),h=new e(d.oisFile);h.$save(b).then(function(a){null!=a.status&&f.error(a.status),f.info("main.messages.create.success")})["catch"](angular.noop)})})},c.exportTimetable=function(c,d){g.endpoint("/timetables/exportTimetableCheck").search(d).$promise.then(function(e){e._error||(b.location.href=a.excel(c,d))})},g.endpoint(p+"/managementSearchFormData").search().$promise.then(function(a){c.formState.studyYears=a.studyYears,c.allStudyPeriods=a.studyPeriods;var b=h.getCurrentStudyYearOrPeriod(c.formState.studyYears);b&&(c.criteria.studyYear=b.id,n(),c.criteria.studyPeriod=a.currentStudyPeriod),c.higher=a.higher,c.vocational=a.vocational,c.higher&&c.vocational||c.higher&&(c.criteria.type="TUNNIPLAAN_LIIK_H"),c.criteria.studyYear&&c.criteria.studyPeriod?e(c.loadData):0===c.formState.studyYears.length?f.error("studyYear.missing"):0===c.allStudyPeriods.length&&f.error("studyYear.studyPeriod.missing")}),c.$watch("criteria.studyYear",function(){void 0!==c.criteria.studyYear&&c.allStudyPeriods&&(n(),o(c.criteria.studyPeriod)||(c.criteria.studyPeriod=null))}),c.copyTimetable=function(a){g.endpoint(p+"/getPossibleTargetsForCopy").query({id:a}).$promise.then(function(b){b.forEach(function(a){a.formattedStart=new Date(a.start)}),j.showDialog("timetable/timetable.timetableManagement.copyTimetable.html",function(a){a.copyTargets=b},function(b){var d={start:b.copyTarget.start,higher:b.copyTarget.isHigher,id:b.copyTarget.id,originalTimetable:a,studyPeriod:b.copyTarget.studyPeriod};g.endpoint(p+"/copyTimetable").search(d).$promise.then(function(){f.info("main.messages.create.success"),c.loadData()})})})},c.createEvent=function(a){var b=g.endpoint(p),c=new b;c.code=a.isHigher?"TUNNIPLAAN_LIIK_H":"TUNNIPLAAN_LIIK_V",c.studyPeriod=a.studyPeriod,c.startDate=a.start,c.endDate=a.end,c.$save().then(function(a){d.url("/timetable/"+a.id+"/view")})}}]),angular.module("hitsaOis").controller("TimetableEditController",["$scope","message","QueryUtils","DataUtils","$route","$location",function(a,b,c,d,e,f){function g(b,c){for(var d=0;d<a.formState.studyPeriods.length;d++){var e=a.formState.studyPeriods[d];if(e.id===c&&e.studyYear===c)return!0}return!1}function h(a){m=[];for(var b=0;b<a.length;b++)for(var c=0;c<a[b].dates.length;c++){var d=new Date(a[b].dates[c]);d=d.setHours(0,0,0,0),m.push(d)}m=m.sort()}function i(){return void 0!==a.allStudyPeriods?a.allStudyPeriods.filter(function(b){return b.id===a.timetable.studyPeriod})[0]:void 0}function j(){if(void 0!==a.timetable.studyPeriod){var b="studyPeriod="+a.timetable.studyPeriod+"&code="+a.timetable.code;void 0!==k&&(b+="&currentTimetable="+k),c.endpoint(l+"/blockedDatesForPeriod?"+b).query(h);var d=i(),e=new Date(d.startDate),f=new Date(d.endDate);a.firstDateForCurrentRange=e.setDate(d.startDate.getDate()-1),a.lastDateForCurrentRange=f.setDate(d.endDate.getDate()+1),a.studyPeriodStartDate=new Date(d.startDate.getTime()),a.studyPeriodEndDate=new Date(d.endDate.getTime())}a.setEndDateMinDate()}var k=e.current.params.id;a.formState={};var l="/timetables",m=[],n=c.endpoint(l);a.lastDateForCurrentRange=Date.now(),a.firstDateForCurrentRange=Date.now(),k?(a.timetable=n.get({id:k}),a.timetable.$promise.then(function(){a.formState.studyYears=a.timetable.studyYears,a.allStudyPeriods=a.timetable.studyPeriods;var b=d.getCurrentStudyYearOrPeriod(a.formState.studyYears),c=d.getCurrentStudyYearOrPeriod(a.timetable.studyPeriods);a.timetable.studyYear=b.id,a.formState.studyPeriods=a.allStudyPeriods.filter(function(b){return b.studyYear===a.timetable.studyYear}),a.timetable.studyPeriod=c.id,a.timetable.studyYears=null,a.timetable.currentStudyPeriod=null,a.timetable.studyPeriods=null})):(a.timetable=new n,a.timetable.code=e.current.params.type,a.timetable.startDate=e.current.params.from?new Date(e.current.params.from):null,a.timetable.endDate=e.current.params.thru?new Date(e.current.params.thru):null,c.endpoint(l+"/managementSearchFormData").search().$promise.then(function(b){if(a.formState.studyYears=b.studyYears,a.allStudyPeriods=b.studyPeriods,!a.timetable.studyYear){var c,e;a.timetable.startDate?(d.getCurrentStudyYearOrPeriod(a.formState.studyYears),e=d.getStudyYearOrPeriodAt(a.timetable.startDate,b.studyPeriods)):(c=d.getCurrentStudyYearOrPeriod(a.formState.studyYears),e=d.getCurrentStudyYearOrPeriod(b.studyPeriods)),c&&a.allStudyPeriods&&(a.timetable.studyYear=c.id,a.formState.studyPeriods=a.allStudyPeriods.filter(function(b){return b.studyYear===a.timetable.studyYear}),a.timetable.studyPeriod=e.id)}})),a.studyYearChanged=function(){g(a.timetable.studyYear,a.timetable.studyPeriod)||(a.timetable.studyPeriod=null)},a.$watch("timetable.startDate",function(){var b=a.timetable.startDate;if(void 0===b)a.lastDateForCurrentRange=Date.now();else{m.sort(function(a,b){return a-b});for(var c=0;c<m.length;c++)if(m[c]>=b.getTime()){a.lastDateForCurrentRange=m[c];break}if(angular.isObject(b)&&a.lastDateForCurrentRange<b.getTime()){var d=new Date(i().endDate);a.lastDateForCurrentRange=d.setDate(d.getDate()+1)}}a.setEndDateMinDate()}),a.$watch("timetable.endDate",function(){var b=a.timetable.endDate;if(m=m.sort().reverse(),void 0===b){var c=i();void 0!==c&&(a.firstDateForCurrentRange=c.startDate)}else for(var d=0;d<m.length;d++)if(m[d]<=b.getTime()){a.firstDateForCurrentRange=m[d];break}m=m.sort()}),a.$watch("timetable.studyPeriod",function(){a.timetable.studyPeriod&&j()}),a.blockedFromDatesPredicate=function(b){return 0!==m.length&&-1!==m.indexOf(b.getTime())||b.getTime()<a.firstDateForCurrentRange?!1:!0},a.setEndDateMinDate=function(){a.endDateMinDate=a.timetable.startDate?a.timetable.startDate:a.studyPeriodStartDate},a.blockedThruDatesPredicate=function(b){return 0!==m.length&&-1!==m.indexOf(b.getTime())||b.getTime()>a.lastDateForCurrentRange?!1:!0},a.$watch("timetable.studyYear",function(){a.timetable.studyYear&&a.allStudyPeriods&&(a.formState.studyPeriods=a.allStudyPeriods.filter(function(b){return b.studyYear===a.timetable.studyYear}))}),a.save=function(){return a.timetableForm.$setSubmitted(),a.timetableForm.$valid?void(angular.isDefined(k)?(a.timetable.$update({id:k}).then(function(){b.info("main.messages.update.success")}),f.url("/timetable/"+k+"/view")):a.timetable.$save().then(function(a){b.info("timetable.timetableManagement.created"),f.url("/timetable/"+a.id+"/view")})):void b.error("main.messages.form-has-errors")}}]).controller("TimetableViewController",["$scope","message","QueryUtils","DataUtils","$route","$location","$rootScope","Classifier",function(a,b,c,d,e,f,g,h){a.timetableId=e.current.params.id,a.currentLanguageNameField=g.currentLanguageNameField;var i=h.valuemapper({curriculumStudyLevelCode:"OPPEASTE"});c.endpoint("/timetables/:id/view").search({id:a.timetableId},function(b){i.objectmapper(b.curriculums),a.timetable=b,a.timetable.endDate=new Date(a.timetable.endDate),a.timetable.startDate=new Date(a.timetable.startDate)}),a.confirm=function(){c.endpoint("/timetables/"+a.timetableId+"/confirm").put({},function(){e.reload()})},a.publicize=function(){c.endpoint("/timetables/"+a.timetableId+"/publicize").put({},function(){e.reload()})}}]),angular.module("hitsaOis").controller("VocationalTimetablePlanController",["$scope","message","QueryUtils","DataUtils","$route","$location","$rootScope","Classifier","dialogService","ArrayUtils",function(a,b,c,d,e,f,g,h,i,j){function k(b,c,d){a.capacityTypes=b.timetableCapacities;var e=a.plan.displayPeriodLessons?a.plan.displayPeriodLessons:!1,f=a.plan.displayLeftOverLessons?a.plan.displayLeftOverLessons:!1;if(a.plan=b,a.plan.selectAll=!1,a.plan.displayPeriodLessons=e,a.plan.displayLeftOverLessons=f,a.plan.journals.sort(function(a,b){return a.id-b.id}),h.setSelectedCodes(a.plan.studentGroups,a.plan.studentGroups.map(function(a){return a.code})),d){a.plan.currentStudentGroups=d;var g=d.map(function(a){return a.code});a.plan.studentGroups.forEach(function(b){-1===g.indexOf(b.code)&&(b._selected=!1,a.plan.selectAll=!1)})}else a.plan.currentStudentGroups=a.plan.studentGroups,a.plan.currentStudentGroups.forEach(function(b){b.id!==Number(c)&&(b._selected=!1,a.plan.selectAll=!1)});p(a.plan.studentGroupCapacities,a.plan.studentGroups,a.plan.journals),a.plan.datesForTimetable=[];for(var i=new Date(a.plan.startDate),j=new Date(a.plan.endDate),k=i;j>=k;)a.plan.datesForTimetable.push(k),k=new Date(k.getTime()+864e5);a.plan.lessonTimes.sort(function(a,b){return a.lessonNr-b.lessonNr}),a.lessonsInDay=[];for(var m=0;a.weekday.length>m;m++){var n=a.weekday[m];a.lessonsInDay[n]=a.plan.lessonTimes.filter(function(a){return a[n]===!0});for(var o=[],q=a.lessonsInDay[n].length-1,s=a.lessonsInDay[n];q>=0;)o.includes(s[q].lessonNr)?s.splice(q,1):o.push(s[q].lessonNr),q-=1}for(a.lessonsInDay.sort(function(b,c){return a.weekday.indexOf(b)-a.weekday.indexOf(c)}),a.firstDay=a.weekday[new Date(a.plan.startDate).getDay()],a.dayOrder=a.weekday.slice();a.dayOrder[0]!==a.firstDay;)a.dayOrder[a.dayOrder.length-1]=a.dayOrder.shift();var t=moment(a.plan.endDate).diff(moment(a.plan.startDate),"days")+1;a.dayOrder=a.dayOrder.slice(0,t),a.currentLessonTimes=[];for(var u=0;a.dayOrder.length>u;u++){for(var v=a.lessonsInDay[a.dayOrder[u]].slice(),w=!1;angular.isDefined(v)&&v.length>0;){w=!0;var x=angular.copy(v.shift());0===v.length&&(x.endOfDay=!0),a.currentLessonTimes.push(x)}w||a.currentLessonTimes.push({noLessons:!0,endOfDay:!0})}for(var y={},z={},A=0;a.plan.plannedLessons.length>A;A++){var B=a.plan.plannedLessons[A].studentGroup;angular.isDefined(y[B])||(y[B]={},y[B].id=B,y[B].lessons=[]),y[B].lessons.push(a.plan.plannedLessons[A]),angular.isArray(a.plan.plannedLessons[A].teachers)&&a.plan.plannedLessons[A].teachers.forEach(function(b){angular.isArray(z[b])||(z[b]=[]);var c=z[b].find(function(b){return b.id===a.plan.plannedLessons[A].id});c||z[b].push(a.plan.plannedLessons[A])})}a.plan.plannedLessonsByTeachers=z,a.plan.plannedLessonsByGroup=y,a.plan.selectedGroup=c,l(),r?r=!1:a.updateGroups()}function l(){if(angular.isDefined(a.plan.selectedGroup)){a.plan.currentCapacities=a.plan.studentGroupCapacities.filter(function(b){return b.studentGroup===a.plan.selectedGroup}),a.plan.currentCapacities=a.plan.currentCapacities.sort(function(a,b){return a.journal-b.journal});var b=a.plan.currentCapacities.map(function(a){return a.journal});a.plan.currentCapacitiesGrouped=q(a.plan.currentCapacities,"journal"),angular.isDefined(a.plan.journals)&&(a.plan.journals.forEach(function(b,c){b.color=a.journalColors[c%19]}),a.plan.currentJournals=a.plan.journals.filter(function(a){return-1!==b.indexOf(a.id)})),a.plan.selectedStudentGroupObject=a.plan.studentGroups.find(function(b){return b.id===a.plan.selectedGroup})}}function m(a,b){for(var c=0;c<a.length;c++)if(a[c][b]>0)return!0;return!1}function n(b,d){c.endpoint(s+"/saveVocationalEvent").save(b).$promise.then(function(b){k(b,d,a.plan.currentStudentGroups)})}function o(){a.plan.selectAll=!0,a.plan.studentGroups.forEach(function(b){b._selected||(a.plan.selectAll=!1)})}function p(a,b,c){angular.isArray(a)&&angular.isArray(b)&&b.forEach(function(b){b.teachers=[],b.teacherIds=[];var d=a.filter(function(a){return a.studentGroup===b.id});d.forEach(function(a){var d=c.find(function(b){return b.id===a.journal});d.teachers.forEach(function(a){-1===b.teacherIds.indexOf(a.id)&&(b.teacherIds.push(a.id),b.teachers.push(a))})})})}function q(a,b){for(var c,d,e=[],f=[],g=0;g<a.length;g++)c=a[g][b],d=e.indexOf(c),d>-1?f[d].push(a[g]):(e.push(c),f.push([a[g]]));return f}a.auth=e.current.locals.auth;var r=!1;a.Math=window.Math,a.isArray=angular.isArray,a.journalColors=["#ffff00","#9fff80","#ff99cc","#E8DAEF","#85C1E9","#D1F2EB","#ABEBC6","#F9E79F","#FAD7A0","#EDBB99","#D5DBDB","#64B5F6","#B0BEC5","#80CBC4","#FCD4F5","#AFBAF7","#FFF59D","#66BB6A","#E6EE9C","#9FA8DA","#EF9A9A"],a.plan={},a.timetableId=e.current.params.id,a.weekday=["daySun","dayMon","dayTue","dayWed","dayThu","dayFri","daySat"];var s="/timetables";a.currentLanguageNameField=g.currentLanguageNameField,c.loadingWheel(a,!0),c.endpoint(s+"/:id/createVocationalPlan").search({id:a.timetableId}).$promise.then(function(b){k(b,e.current.params.groupId,null),c.loadingWheel(a,!1)}),a.$watch("plan.selectedGroup",function(){l()}),a.selectAllChanged=function(){angular.isDefined(a.plan.selectAll)&&(a.plan.selectAll?h.setSelectedCodes(a.plan.studentGroups,a.plan.studentGroups.map(function(a){return a.code})):h.setSelectedCodes(a.plan.studentGroups,[]),a.updateGroups())},a.displayPeriodLessonsChanged=function(){a.plan.displayLeftOverLessons=!1},a.displayLeftOverLessonsChanged=function(){a.plan.displayPeriodLessons=!1},a.orderBySelectedGroup=function(b){return b.id!==a.plan.selectedGroup},a.getTotalsByJournal=function(b,c){var d=a.plan.currentCapacities.filter(function(a){return a.journal===b.id}),e=0;return d.forEach(function(a){e+=a[c]}),e},a.showJournalPlannedLessons=function(b){return a.plan.displayPeriodLessons||a.plan.displayLeftOverLessons?a.plan.displayPeriodLessons?a.getTotalsByJournal(b,"totalPlannedLessons")>0:a.plan.displayLeftOverLessons?a.getTotalsByJournal(b,"totalPlannedLessons")>0||a.getTotalsByJournal(b,"leftOverLessons")>0:!1:a.getTotalsByJournal(b,"thisPlannedLessons")>0},a.showCurrentCapacitiesGrouped=function(b){return a.plan.displayPeriodLessons||a.plan.displayLeftOverLessons?a.plan.displayPeriodLessons?m(b,"totalPlannedLessons"):a.plan.displayLeftOverLessons?m(b,"totalPlannedLessons")||m(b,"leftOverLessons"):!1:m(b,"thisPlannedLessons")},a.isUnderAllocatedWeekLessons=function(b){return a.getTotalsByJournal(b,"thisPlannedLessons")>=a.getTotalsByJournal(b,"thisPlannedLessons")-a.getTotalsByJournal(b,"lessonsLeft")?!0:!1},a.isUnderAllocatedTotalLessons=function(b){return a.getTotalsByJournal(b,"totalPlannedLessons")>=a.getTotalsByJournal(b,"totalAllocatedLessons")?!0:!1},a.isUnderLeftOverTotalLessons=function(b){return a.getTotalsByJournal(b,"totalPlannedLessons")+a.getTotalsByJournal(b,"leftOverLessons")>=a.getTotalsByJournal(b,"totalAllocatedLessons")?!0:!1},a.getByCapacity=function(b,c){var d=a.plan.currentJournals.find(function(a){return a.id===b.journal});return d[c]},a.getCapacityTypeValue=function(b){var c=a.capacityTypes.find(function(a){return a.code===b});return null!==c?c.value.toUpperCase():""},a.getCapacityType=function(b){return a.capacityTypes.find(function(a){return a.code===b})},a.getCountForCapacity=function(a){return a.thisAllocatedLessons=0,a.thisPlannedLessons-a.thisAllocatedLessons},a.getRoomCodes=function(a){return a.map(function(a){return a.nameEt}).join("-")},a.getEventsForLesson=function(b,c,d){for(var e,f=0,g=0;a.dayOrder.length>g;g++)if(f+=a.lessonsInDay[a.dayOrder[g]].length,f>b){e=a.dayOrder[g];break}if(angular.isDefined(a.plan.plannedLessonsByGroup)&&angular.isDefined(a.plan.plannedLessonsByGroup[d.id])){var h=a.plan.plannedLessonsByGroup[d.id].lessons.filter(function(b){return a.weekday[new Date(b.start).getDay()]===e&&c.lessonNr===b.lessonNr});if(0!==h.length)return h.forEach(function(b){b.journalObject=a.plan.journals.filter(function(a){return a.id===b.journal})[0];var d=a.plan.lessonTimes.filter(function(a){return a[e]===!0&&a.lessonNr===c.lessonNr});if(d.length>1){var f=d.reduce(function(a,b){return a.constructor===Array?a.concat(b.buildingIds):a.buildingIds.concat(b.buildingIds)});f&&(b.buildingIds=f.filter(function(a,b,c){return c.indexOf(a)===b}))}else b.buildingIds=d[0].buildingIds;angular.isArray(b.teachers)||(b.teachers=[]),b.journalObject&&b.journalObject.teachers&&(b.currentTeacherIds=b.journalObject.teachers.filter(function(a){return-1!==b.teachers.indexOf(a.id)}),b.currentTeachers=b.currentTeacherIds.map(function(a){return a.nameEt}))}),h}return null},a.getTeacherLesson=function(b,c,d,e){for(var f,g=0,h=0;a.dayOrder.length>h;h++)if(g+=a.lessonsInDay[a.dayOrder[h]].length,g>b){f=a.dayOrder[h];break}var i=[];return d.teachers.forEach(function(b){if(angular.isDefined(a.plan.plannedLessonsByTeachers)&&a.plan.plannedLessonsByTeachers[b.id]){var d=a.plan.plannedLessonsByTeachers[b.id].find(function(b){return a.weekday[new Date(b.start).getDay()]===f&&c.lessonNr===b.lessonNr});d&&(e?i.push(b.nameEt):i.push(b.nameEt.replace(/\b(\S{1,2})\S*/g,"$1").replace(/ /g,"")))}}),i?i:null},a.removeFromArray=j.remove,a.changeEvent=function(d){var e=a.plan.selectedGroup;i.showDialog("timetable/timetable.event.change.dialog.html",function(f){f.occupiedTime=[],f.lesson=d,f.teachers=d.journalObject.teachers,f.teachers.forEach(function(a){angular.isArray(d.teachers)?a.isTeaching=d.teachers.includes(a.id):a.isTeaching=!0}),f.lessonHeader=d.journalObject.name,f.lessonCapacityName=a.getCapacityType(d.capacityType),f.lesson.startTime=new Date(d.start),f.lesson.endTime=new Date(d.end),d.rooms?f.lesson.eventRooms=angular.copy(d.rooms):f.lesson.eventRooms=[],f.$watch("lesson.eventRoom",function(){if(angular.isDefined(f.lesson.eventRoom)&&null!==f.lesson.eventRoom){if(f.lesson.eventRooms.some(function(a){return a.id===f.lesson.eventRoom.id}))return b.error("timetable.timetablePlan.duplicateroom"),void(f.lesson.eventRoom=void 0);f.lesson.eventRooms.push(f.lesson.eventRoom),f.lesson.eventRoom=null}}),f.$watchGroup(["lesson.eventRooms.length","lesson.startTime","lesson.endTime"],function(){var a={startTime:f.lesson.startTime,endTime:f.lesson.endTime,timetableEventId:f.lesson.id};a.rooms=f.lesson.eventRooms.reduce(function(a,b){return a.push(b.id),a},[]),a.teachers=f.teachers.reduce(function(a,b){return b.isTeaching&&a.push(b.id),a},[]),c.endpoint("/timetableevents/timetableTimeOccupied").get(a).$promise.then(function(a){f.occupiedTime=a})}),f.isRoomOccupied=function(a){return f.occupiedTime&&f.occupiedTime.rooms?f.occupiedTime.rooms.filter(function(b){return b.id===a}).length>0:!1},f.isTeacherOccupied=function(a){return f.occupiedTime&&f.occupiedTime.teachers?f.occupiedTime.teachers.filter(function(b){return b.id===a}).length>0:!1},f.deleteEvent=function(b){r=!0,c.endpoint(s+"/deleteVocationalEvent").save({timetableEventId:b}).$promise.then(function(b){k(b,e,a.plan.currentStudentGroups),f.cancel()})},f.saveEvent=function(){return f.lesson.startTime>f.lesson.endTime?void b.error("timetable.timetableEvent.error.endIsEarlierThanStart"):void f.submit()}},function(b){var d={startTime:b.lesson.startTime,endTime:b.lesson.endTime,rooms:b.lesson.eventRooms,timetableEventId:b.lesson.id,teachers:b.teachers.reduce(function(a,b){return b.isTeaching&&a.push(b.id),a},[])};r=!0,c.endpoint(s+"/saveVocationalEventRoomsAndTimes").save(d).$promise.then(function(b){k(b,e,a.plan.currentStudentGroups)})})},a.saveEvent=function(b){r=!0;for(var e,f=a.plan.selectedGroup,g=0,h=0;a.dayOrder.length>h;h++)if(g+=a.lessonsInDay[a.dayOrder[h]].length,b.index<g){e=a.dayOrder[h];break}var j=b.journalId,l={journal:j,timetable:a.timetableId,lessonTime:this.lessonTime.id,selectedDay:e,oldEventId:b.oldEventId,capacityType:b.capacityType},m={journal:j,timetable:a.timetableId,lessonTime:this.lessonTime.id,selectedDay:e,oldEventId:b.oldEventId};c.endpoint("/timetableevents/timetableNewVocationalTimeOccupied").get(m).$promise.then(function(b){b.occupied?i.confirmDialog(d.occupiedEventTimePrompts(a,a.auth.higher,b),function(){n(l,f)},function(){r=!1,c.loadingWheel(a,!0),c.endpoint(s+"/:id/createVocationalPlan").search({id:a.timetableId}).$promise.then(function(b){k(b,f,a.plan.currentStudentGroups),c.loadingWheel(a,!1)})}):n(l,f)})},a.range=function(a){for(var b=[],c=0;a>c;c++)b.push(c);return b},a.updateGroups=function(){var b=h.getSelectedCodes(a.plan.studentGroups);a.plan.currentStudentGroups=a.plan.studentGroups.filter(function(a){return-1!==b.indexOf(a.code)}),o()}}]),angular.module("hitsaOis").controller("HigherTimetablePlanController",["$scope","message","QueryUtils","DataUtils","$route","$location","$rootScope","Classifier","dialogService","$filter",function(a,b,c,d,e,f,g,h,i,j){function k(b){a.capacityTypes=b.timetableCapacities,a.plan=b,a.plan.selectAll=!0,a.plan.capacitiesGrouped=C(a.plan.studentGroupCapacities,"subjectStudyPeriod"),a.plan.colorsBySubjectStudyPeriods=[],a.plan.capacitiesGrouped.forEach(function(b,c){a.plan.colorsBySubjectStudyPeriods.push({subjectStudyPeriod:b[0].subjectStudyPeriod,color:a.colors[c%19]})}),a.plan.currentStudentGroups=a.plan.studentGroups;var c=r();a.plan.selectedWeek=r()?c:a.plan.weeks[0].start,a.plan.weeks.forEach(function(a){a.startDisplay=j("hoisDate")(a.start)}),a.plan.subjectTeacherPairs.forEach(function(a){a.isSubjectTeacherPair=!0,a.dropdownValue="PAIR-"+a.id,a.originalCode=a.code,a.code=a.code+" - "+a.teacherNamesShort}),a.plan.studentGroups.forEach(function(a){a.dropdownValue="GROU-"+a.id}),l(),A(!0),s(),v(),z(a.plan.studentGroups,!1),z(a.plan.subjectTeacherPairs,!1),y(a.plan.studentGroupCapacities,a.plan.studentGroups),p(),e.current.params.groupId?a.plan.selectedGroup="GROU-"+e.current.params.groupId:e.current.params.pairId&&(a.plan.selectedGroup="PAIR-"+e.current.params.pairId)}function l(b){angular.isDefined(b)&&(angular.isDefined(b.teacherNamesShort)?a.plan.currentCapacities=a.plan.studentGroupCapacities.filter(function(a){return a.subjectStudyPeriod===b.id}):a.plan.currentCapacities=a.plan.studentGroupCapacities.filter(function(a){return a.studentGroup===b.id}),a.plan.currentCapacities=a.plan.currentCapacities.sort(function(a,b){return a.capacityType-b.capacityType}),a.plan.currentCapacitiesGrouped=C(a.plan.currentCapacities,"subjectStudyPeriod"))}function m(b,d){c.endpoint(G+"/saveHigherEventRoomsAndTimes").save(b).$promise.then(function(b){var c;c=d.isSubjectTeacherPair?b.subjectTeacherPairs.find(function(a){return a.id===d.subjectStudyPeriod}):b.studentGroups.find(function(a){return a.id===d.studentGroup}),z([c],!0),a.plan.studentGroupCapacities=b.studentGroupCapacities,t(),u()})}function n(b,d,e,f){var g={timetable:a.timetableId,oldEventId:b.oldEventId,startTime:f,capacityType:b.capacityType,subjectStudyPeriod:b.journalId,studentGroupId:a.plan.selectedGroup.substr(5),repeatCode:a.plan.repeatCode,lessonAmount:a.plan.lessonAmount,room:a.plan.eventRoom,isSubjectTeacherPair:e,isForAllGroups:d};c.endpoint(G+"/saveHigherEvent").save(g).$promise.then(function(a){o(a,d,e)})}function o(b,c,d){var e;e=d?b.subjectTeacherPairs.find(function(b){return b.id===Number(a.plan.selectedGroup.substr(5))}):b.studentGroups.find(function(b){return b.id===Number(a.plan.selectedGroup.substr(5))}),c&&z(b.studentGroups,!1),z([e],!0),a.plan.studentGroupCapacities=b.studentGroupCapacities,
t(),u()}function p(){var b=q();b.sort(function(a,b){return a.code<b.code?-1:a.code>b.code?1:0}),a.plan.currentStudentGroups=b}function q(){var b=[];return a.plan.studentGroups.concat(a.plan.subjectTeacherPairs).forEach(function(a){a._selected&&b.push(a)}),b}function r(){for(var b=new Date,c=0;c<a.plan.weeks.length;c++)if(b.getTime()<new Date(a.plan.weeks[c].end).getTime())return a.plan.weeks[c].start}function s(){a.plan.datesForTimetable=[];var b=new Date(a.plan.selectedWeek),c=new Date(b);c.setDate(b.getDate()+6);for(var d=b;c>=d;)a.plan.datesForTimetable.push(d),d=new Date(d.getTime()+864e5)}function t(){v(),B(a.plan.lessonTimeBuilding),z(a.plan.studentGroups,!1),z(a.plan.subjectTeacherPairs,!1)}function u(){if(angular.isDefined(a.plan.selectedGroup)){var b=a.plan.currentStudentGroups.find(function(b){return b.dropdownValue===a.plan.selectedGroup});l(b),z([b],!0),a.plan.selectedStudentGroupObject=b}}function v(){a.lessonsInDay={},a.dayTimeRanges={},a.currentLessonTimes=[];for(var b=0;b<a.plan.datesForTimetable.length;b++){var c=a.plan.datesForTimetable[b],d=w(c),e=0;if(null!==d){var f=new Date(new Date(c.getTime()));f.setHours(d.start.getHours()),f.setMinutes(d.start.getMinutes());var g=new Date(f.getTime());for(g.setHours(d.end.getHours()),g.setMinutes(d.end.getMinutes()),a.dayTimeRanges[c]={start:f,end:g};f.getTime()<g.getTime();){var h=new Date(f.getTime()+E);a.currentLessonTimes.push({time:f,endOfDay:h.getTime()>=g.getTime()}),e+=1,f=h}}a.lessonsInDay[c]=e}}function w(b){var c=a.weekday[b.getDay()],d=[],e=[];a.plan.lessonTimes.filter(function(a){return a[c]}).forEach(function(a){d.push(moment(a.startTime,"HH:mm")),e.push(moment(a.endTime,"HH:mm"))});var f=[],g=x(a.plan.studentGroups,b),h=x(a.plan.subjectTeacherPairs,b);if(f=f.concat(g),f=f.concat(h),f.forEach(function(a){var b=new Date(a.start),c=new Date(a.end);d.push(moment({hour:b.getHours(),minute:b.getMinutes()})),e.push(moment({hour:c.getHours(),minute:c.getMinutes()}))}),0===d.length||0===e.length)return null;var i=moment.min(d).toDate();i.setHours(Math.max(7,i.getHours())),i.setMinutes(0),i.setSeconds(0,0);var j=moment.max(e).toDate();return j.setHours(Math.min(23,j.getMinutes()>0?j.getHours()+1:j.getHours())),j.setMinutes(0),j.setSeconds(0,0),{start:i,end:j}}function x(a,b){var c=[];return a.forEach(function(a){if(a.lessons){var e=a.lessons.filter(function(a){return d.isSameDay(b,new Date(a.start))});c=c.concat(e)}}),c}function y(a,b){angular.isArray(a)&&angular.isArray(b)&&b.forEach(function(b){b.teachers=[],b.teacherIds=[];var c=a.filter(function(a){return a.studentGroup===b.id});c.forEach(function(a){a.teachers.forEach(function(a){-1===b.teacherIds.indexOf(a.id)&&(b.teacherIds.push(a.id),b.teachers.push(a))})})})}function z(b,c){if(b)for(var e=0;e<b.length;e++){var f=b[e].isSubjectTeacherPair,g=b[e].lessons;if(null!==g)for(var h=0;h<g.length;h++)g[h].start=new Date(g[h].start),g[h].end=new Date(g[h].end);else g=[];for(var i={},j=0;j<a.plan.datesForTimetable.length;j++){var k=a.dayTimeRanges[a.plan.datesForTimetable[j]];if(k){var l=new Date(k.start),m=new Date(k.end),n=g.filter(function(a){return d.isSameDay(a.start,l)});n=n.sort(function(a,b){return a.start.getTime()-b.start.getTime()});var o=l.getDate()+l.getMonth()+l.getFullYear(),p=0;angular.isArray(i[o])||(i[o]=[]);var q=0;if(n.length>0)for(var r=0;r<n.length;r++){q=0;var s=n[r],t=0;if(!(s.start.getHours()<7||s.end.getHours()<7||23===s.start.getHours())){if(c)for(;l.getTime()<s.start.getTime();)i[o].push({start:new Date(l.getTime()),colspan:1,isSubjectTeacherPair:f,subjectStudyPeriod:s.subjectStudyPeriod}),l=new Date(l.getTime()+E);else s.start.getTime()>=l.getTime()&&(t=(s.start.getTime()-l.getTime())/E,i[o].push({start:new Date(l.getTime()),colspan:t}));if(s.start.getTime()<=l.getTime()){s.colspan=(s.end.getTime()-s.start.getTime())/E,s.marginleft=(s.start.getTime()-l.getTime())/E;var u=i[o].filter(function(a){return s.start.getTime()>=a.start.getTime()&&s.start.getTime()<a.start.getTime()+a.colspan*E});if(u.length>p){var v=i[o][i[o].length-1];i[o].length>0&&v.topmargin?s.topmargin=v.topmargin+F:s.topmargin=F,p+=1}else p=0}else s.colspan=(s.end.getTime()-s.start.getTime())/E;if(s.end.getTime()>=m.getTime()&&(s.colspan-=(s.end.getTime()-m.getTime())/E),i[o].push(s),l.getTime()<s.end.getTime()&&(l=new Date(s.end.getTime())),n.length-1===r)if(c)for(;m.getTime()>l.getTime();)i[o].push({start:new Date(l.getTime()),colspan:1,isSubjectTeacherPair:f,subjectStudyPeriod:s.subjectStudyPeriod}),l=new Date(l.getTime()+E);else t=(m.getTime()-l.getTime())/E,i[o].push({start:new Date(l.getTime()),colspan:t});q++}}if(0===q)if(c)for(;l.getTime()<m.getTime();)i[o].push({start:new Date(l.getTime()),colspan:1,isSubjectTeacherPair:f}),l=new Date(l.getTime()+E);else{var w=(m.getTime()-l.getTime())/E;i[o].push({start:new Date(l.getTime()),colspan:w})}}}var x;if(angular.isDefined(b[e].teacherNamesShort)){for(var y in i)i[y].forEach(function(a){a.isSubjectTeacherPair=!0});x=a.plan.subjectTeacherPairs.find(function(a){return a.id===b[e].id})}else x=a.plan.studentGroups.find(function(a){return a.id===b[e].id});x.currentLessons=i,x.lessons=b[e].lessons}}function A(b){a.plan.studentGroups.concat(a.plan.subjectTeacherPairs).forEach(function(a){a._selected=b})}function B(b){if(angular.isDefined(a.plan.datesForTimetable)&&a.plan.datesForTimetable.length>0){var c=new Date(a.dayTimeRanges[a.plan.datesForTimetable[0]].start);a.lessonTimeLegend=[];for(var d=0;d<a.plan.datesForTimetable.length;d++){var e=0,f=a.plan.datesForTimetable[d],g=a.weekday[f.getDay()],h=a.plan.lessonTimes.filter(function(a){return a[g]===!0&&a.buildingIds.includes(Number(b))&&(Number(a.startTime.substr(0,2))<23||7===Number(a.startTime.substr(0,2))&&0===Number(a.startTime.substr(3,2)))&&(Number(a.endTime.substr(0,2))&&0===Number(a.endTime.substr(3,2))||Number(a.endTime.substr(0,2))<23)});h.forEach(function(a){a.lessonDateStart=new Date(f.getTime()),a.lessonDateStart.setHours(a.startTime.substr(0,2),a.startTime.substr(3,2)),a.lessonDateEnd=new Date(f.getTime()),a.lessonDateEnd.setHours(a.endTime.substr(0,2),a.endTime.substr(3,2))}),h=h.sort(function(a,b){return a.lessonDateStart.getTime()-b.lessonDateStart.getTime()});for(var i=0;i<h.length;i++){e=0;var j=h[i];i>0&&j.lessonDateStart.getTime()<h[i-1].lessonDateEnd.getTime()&&j.lessonDateEnd.getTime()<=h[i-1].lessonDateEnd.getTime()||(j.lessonDateStart.getTime()>c.getTime()&&(e=Math.round((j.lessonDateStart.getTime()-c.getTime())/E),a.lessonTimeLegend.push({colspan:e})),e=i>0&&j.lessonDateStart.getTime()<h[i-1].lessonDateEnd.getTime()?Math.round((h[i-1].lessonDateEnd.getTime()-j.lessonDateEnd.getTime())/E):Math.round((j.lessonDateEnd.getTime()-j.lessonDateStart.getTime())/E),a.lessonTimeLegend.push({lessonNr:j.lessonNr,colspan:e}),j.lessonDateEnd.getTime()>c.getTime()&&(c=new Date(j.lessonDateEnd.getTime())))}var k=new Date(a.dayTimeRanges[a.plan.datesForTimetable[d]].end);for(e=Math.round((k.getTime()-c.getTime())/E),e>0?a.lessonTimeLegend.push({colspan:e,endOfDay:!0}):a.lessonTimeLegend[a.lessonTimeLegend.length-1]&&(a.lessonTimeLegend[a.lessonTimeLegend.length-1].endOfDay=!0);d<a.plan.datesForTimetable.length-1;){if(a.dayTimeRanges[a.plan.datesForTimetable[d+1]]){c=new Date(a.dayTimeRanges[a.plan.datesForTimetable[d+1]].start);break}d++}}}}function C(a,b){for(var c,d,e=[],f=[],g=0;g<a.length;g++)c=a[g][b],d=e.indexOf(c),d>-1?f[d].push(a[g]):(e.push(c),f.push([a[g]]));return f}a.auth=e.current.locals.auth;var D=6e4,E=15*D,F=17;a.colors=["#ffff00","#9fff80","#ff99cc","#E8DAEF","#85C1E9","#D1F2EB","#ABEBC6","#F9E79F","#FAD7A0","#EDBB99","#D5DBDB","#64B5F6","#B0BEC5","#80CBC4","#BCAAA4","#7986CB","#FFF59D","#66BB6A","#E6EE9C","#9FA8DA","#EF9A9A"],a.plan={},a.timetableId=e.current.params.id,a.weekday=["daySun","dayMon","dayTue","dayWed","dayThu","dayFri","daySat"];var G="/timetables";a.currentLanguageNameField=g.currentLanguageNameField,c.endpoint(G+"/:id/createHigherPlan").search({id:a.timetableId},k),a.$watch("plan.selectedGroup",function(){u()}),a.$watch("plan.selectAll",function(){angular.isDefined(a.plan.selectAll)&&(A(a.plan.selectAll),p())}),a.orderBySelectedGroup=function(b){return b.dropdownValue!==a.plan.selectedGroup},a.$watch("plan.selectedWeek",function(){s(),t(),u()}),a.$watch("plan.lessonTimeBuilding",function(){B(a.plan.lessonTimeBuilding)}),a.getColorBySubjectStudyPeriod=function(b){var c=a.plan.colorsBySubjectStudyPeriods.find(function(a){return a.subjectStudyPeriod===b});return c?c.color:""},a.getCapacityTypeValue=function(b){var c=a.capacityTypes.find(function(a){return a.code===b});return null!==c&&angular.isDefined(c)?c.value.toUpperCase():""},a.getCapacityType=function(b){return a.capacityTypes.find(function(a){return a.code===b})},a.getCountForCapacity=function(a){return a.thisAllocatedLessons=0,a.thisPlannedLessons-a.thisAllocatedLessons},a.getRoomCodes=function(a){return a.map(function(a){return a.nameEt}).join("-")},a.boldAndRed=function(a){return angular.isArray(a)&&(a=0===a.length?!0:!1),!angular.isDefined(a)||null===a||a?{"font-weight":"bold",color:"red"}:""},a.isUnderAllocatedLessons=function(a){var b=a.totalAllocatedLessons?a.totalAllocatedLessons:0;return a.totalPlannedLessons>=b?!0:!1},a.lessonTimeStyle=function(b){var c=Object.keys(a.lessonsInDay),e=c.find(function(a){return a=new Date(a),d.isSameDay(a,b.start)}),f=a.lessonsInDay[e],g={};return g["background-color"]=b.id?a.getColorBySubjectStudyPeriod(b.subjectStudyPeriod):"transparent",g.width=(100/f*b.colspan).toString()+"%",b.marginleft&&(g["margin-left"]=(100/f*b.marginleft).toString()+"%"),b.topmargin&&(g["margin-top"]=b.topmargin.toString()+"px"),b.id||(g.height="100%"),g},a.getEventForLessonTime=function(a,b){var c;return null!==b&&(c=b.find(function(b){return new Date(b.start).getTime()===a.getTime()})),c},a.changeEvent=function(d){if(d.id){var e=a.plan.studentGroupCapacities.find(function(a){return a.subjectStudyPeriod===d.subjectStudyPeriod});i.showDialog("timetable/timetable.event.change.dialog.html",function(f){f.lesson=d,f.teachers=e.teachers,f.teachers.forEach(function(a){angular.isArray(d.teachers)?a.isTeaching=d.teachers.includes(a.id):a.isTeaching=!0}),f.lessonHeader=e.subjectName+", "+e.teachers.map(function(a){return a.nameEt}).join(", "),f.lessonCapacityName=a.getCapacityType(d.capacityType),f.lesson.startTime=new Date(d.start),f.lesson.endTime=new Date(d.end),f.lesson.eventRooms=d.rooms?d.rooms:[],f.$watch("lesson.eventRoom",function(){if(angular.isDefined(f.lesson.eventRoom)&&null!==f.lesson.eventRoom){if(f.lesson.eventRooms.some(function(a){return a.id===f.lesson.eventRoom.id}))return b.error("timetable.timetablePlan.duplicateroom"),void(f.lesson.eventRoom=void 0);f.lesson.eventRooms.push(f.lesson.eventRoom),f.lesson.eventRoom=null}}),f.$watchGroup(["lesson.eventRooms.length","lesson.startTime","lesson.endTime"],function(){var a={startTime:f.lesson.startTime,endTime:f.lesson.endTime,timetableEventId:f.lesson.id};a.rooms=f.lesson.eventRooms.reduce(function(a,b){return a.push(b.id),a},[]),a.teachers=f.teachers.reduce(function(a,b){return b.isTeaching&&a.push(b.id),a},[]),c.endpoint("/timetableevents/timetableTimeOccupied").get(a).$promise.then(function(a){f.occupiedTime=a})}),f.isRoomOccupied=function(a){return f.occupiedTime&&f.occupiedTime.rooms?f.occupiedTime.rooms.filter(function(b){return b.id===a}).length>0:!1},f.isTeacherOccupied=function(a){return f.occupiedTime&&f.occupiedTime.teachers?f.occupiedTime.teachers.filter(function(b){return b.id===a}).length>0:!1},f.deleteEvent=function(b){c.endpoint(G+"/deleteHigherEvent").save({timetableEventId:b}).$promise.then(function(b){var c;c=d.isSubjectTeacherPair?b.subjectTeacherPairs.find(function(a){return a.id===d.subjectStudyPeriod}):b.studentGroups.find(function(a){return a.id===d.studentGroup}),z([c],!0),a.plan.studentGroupCapacities=b.studentGroupCapacities,t(),u(),f.cancel()})},f.saveEvent=function(){return f.lesson.startTime>f.lesson.endTime?void b.error("timetable.timetableEvent.error.endIsEarlierThanStart"):void f.submit()}},function(a){var b={startTime:a.lesson.startTime,endTime:a.lesson.endTime,rooms:a.lesson.eventRooms,timetableEventId:a.lesson.id,teachers:a.teachers.reduce(function(a,b){return b.isTeaching&&a.push(b.id),a},[])};m(b,d)})}},a.saveEventAfterClashCheck=function(b){var c=this.lessonTime.isSubjectTeacherPair?!0:!1,d=this.lessonTime.start,e=a.plan.studentGroupCapacities.filter(function(a){return a.subjectStudyPeriod===Number(b.journalId)&&a.capacityType===b.capacityType});!isFinite(parseInt(b.oldEventId))&&e.length>1?i.confirmDialog({prompt:"timetable.timetablePlan.addForOtherGroups",accept:"main.yes",cancel:"main.no"},function(){a.saveEventAfterCheck(b,!0,c,d)},function(){a.saveEventAfterCheck(b,!1,c,d)}):a.saveEventAfterCheck(b,!1,c,d)},a.saveEventAfterCheck=function(b,e,f,g){var h={timetable:a.timetableId,oldEventId:b.oldEventId,startTime:g,subjectStudyPeriod:b.journalId,repeatCode:a.plan.repeatCode,lessonAmount:a.plan.lessonAmount,room:angular.isDefined(a.plan.eventRoom)?a.plan.eventRoom.id:null};c.endpoint("/timetableevents/timetableNewHigherTimeOccupied").get(h).$promise.then(function(h){h.occupied?i.confirmDialog(d.occupiedEventTimePrompts(a,a.auth.higher,h),function(){n(b,e,f,g)},function(){c.endpoint(G+"/:id/createHigherPlan").search({id:a.timetableId}).$promise.then(function(a){o(a,e,f)})}):n(b,e,f,g)})},a.range=function(a){for(var b=[],c=0;a>c;c++)b.push(c);return b},a.updateGroups=function(){p()},a.updatePairs=function(){p()}}]),function(){angular.module("hitsaOis").factory("GeneralTimetableUtils",["$sessionStorage",function(a){var b=function(){var b=this,c="timetableState";this.getCurrentWeekIndex=function(a){for(var b=moment(),c=0;c<=a.length-1;c++){var d=moment(a[c].start).startOf("day"),e=moment(a[c].end).endOf("day");if(moment(b).isBetween(d,e,null,"[]"))return c}return a&&a.length>0?b<moment(a[0].start).startOf("day")?0:a.length-1:void 0},this.loadState=function(b){var d=a[c]||"{}",e=JSON.parse(d);return e[b]||{}},this.changeState=function(d,e){var f={};f[e]=angular.extend(b.loadState(e),d),a[c]=JSON.stringify(angular.extend(JSON.parse(a[c]||"{}"),f))}};return b}]).controller("GeneralTimetableSearchController",["$scope","$route","message","QueryUtils","GeneralTimetableUtils",function(a,b,c,d,e){function f(){a.generalTimetableUtils.changeState({roomObject:a.criteria.roomObject,teacherObject:a.criteria.teacherObject,studentGroupObject:a.criteria.studentGroupObject,subjectObject:a.criteria.subjectObject},a.schoolId)}function g(){angular.extend(a.criteria,a.generalTimetableUtils.loadState(a.schoolId))}function h(){a.criteria.room=a.criteria.roomObject?a.criteria.roomObject.id:null,a.criteria.teachers=a.criteria.teacherObject?a.criteria.teacherObject.id:null,a.criteria.studentGroups=a.criteria.studentGroupObject?a.criteria.studentGroupObject.id:null,a.criteria.subject=a.criteria.subjectObject?a.criteria.subjectObject.id:null}a.currentNavItem="search",a.generalTimetableUtils=new e,a.auth=b.current.locals.auth,a.formState={},b.current.params.schoolId?a.schoolId=b.current.params.schoolId:a.auth?a.schoolId=a.auth.school.id:$location.url("/timetables"),d.endpoint("/timetableevents/timetableSearch/searchFormData/"+a.schoolId).search().$promise.then(function(b){a.formState.teachers=b.teachers?b.teachers:[],a.formState.studentGroups=b.studentGroups?b.studentGroups:[],a.formState.rooms=b.rooms?b.rooms:[],a.formState.subjects=b.subjects?b.subjects:[]}),d.endpoint("/timetables/timetableStudyYearWeeks/"+a.schoolId).query().$promise.then(function(b){g(),h(),a.weeks=b;var c=angular.isDefined(a.criteria.weekIndex)?a.criteria.weekIndex:a.generalTimetableUtils.getCurrentWeekIndex(a.weeks);a.shownWeek=a.weeks[c],a.search()}),a.search=function(){a.shownWeek&&(a.criteria.room||a.criteria.teachers||a.criteria.studentGroups||a.criteria.subject?(f(),d.endpoint("/timetableevents/timetableSearch/"+a.schoolId).query({room:a.criteria.room,teachers:a.criteria.teachers,studentGroups:a.criteria.studentGroups,journalOrSubjectId:a.criteria.subject,from:a.shownWeek.start,thru:a.shownWeek.end}).$promise.then(function(b){a.searchResultEvents=b})):a.searchResultEvents=null)},a.clearSearchParameters=function(){a.criteria={},a.teacherSearchText=null,a.studentGroupSearchText=null,a.roomSearchText=null,a.subjectSearchText=null},a.parameterSearch=function(b,c){return b=(b||"").toUpperCase(),c.filter(function(c){return-1!==a.currentLanguageNameField(c).toUpperCase().indexOf(b)})},a.$watch("criteria.roomObject",function(){a.criteria.room=a.criteria.roomObject?a.criteria.roomObject.id:null}),a.$watch("criteria.teacherObject",function(){a.criteria.teachers=a.criteria.teacherObject?a.criteria.teacherObject.id:null}),a.$watch("criteria.studentGroupObject",function(){a.criteria.studentGroups=a.criteria.studentGroupObject?a.criteria.studentGroupObject.id:null}),a.$watch("criteria.subjectObject",function(){a.criteria.subject=a.criteria.subjectObject?a.criteria.subjectObject.id:null}),d.createQueryForm(a,"/timetableevents",{order:"id"})}]).controller("GeneralTimetableByGroupController",["$scope","$location","$route","QueryUtils","GeneralTimetableUtils",function(a,b,c,d,e){function f(b){a.generalTimetableUtils.changeState({groupId:b},a.schoolId)}function g(){var b=a.generalTimetableUtils.loadState(a.schoolId);b.groupId&&(a.typeId=b.groupId)}if(a.currentNavItem="studentGroup",a.auth=c.current.locals.auth,a.generalTimetableUtils=new e,a.typeId=void 0,c.current.params.schoolId?a.schoolId=c.current.params.schoolId:a.auth?a.schoolId=a.auth.school.id:b.url("/timetables"),a.schoolId){var h="/timetables/group/"+a.schoolId;d.endpoint(h).query().$promise.then(function(b){a.groupTimetables=b})}g(),a.getStudentGroups=function(b){return b=(b||"").toUpperCase(),a.groupTimetables.filter(function(a){return-1!==a.groupCode.toUpperCase().indexOf(b)})},a.showGroupWeek=function(b){a.typeId=b,f(b)}}]).controller("GeneralTimetableByTeacherController",["$scope","$location","$route","QueryUtils","GeneralTimetableUtils",function(a,b,c,d,e){function f(b){a.generalTimetableUtils.changeState({teacherId:b},a.schoolId)}function g(){var b=a.generalTimetableUtils.loadState(a.schoolId);b.teacherId&&(a.typeId=b.teacherId)}if(a.currentNavItem="teacher",a.auth=c.current.locals.auth,a.generalTimetableUtils=new e,a.typeId=void 0,c.current.params.schoolId?a.schoolId=c.current.params.schoolId:a.auth?a.schoolId=a.auth.school.id:b.url("/timetables"),a.schoolId){var h="/timetables/teacher/"+a.schoolId;d.endpoint(h).query().$promise.then(function(b){a.timetablesByTeachers=b})}g(),a.getTeachers=function(b){return b=(b||"").toUpperCase(),a.timetablesByTeachers.filter(function(a){return-1!==(a.firstname+" "+a.lastname).toUpperCase().indexOf(b)})},a.showTeacherWeek=function(b){a.typeId=b,f(b)}}]).controller("GeneralTimetableByRoomController",["$scope","$location","$route","QueryUtils","GeneralTimetableUtils",function(a,b,c,d,e){function f(b){a.generalTimetableUtils.changeState({roomId:b},a.schoolId)}function g(){var b=a.generalTimetableUtils.loadState(a.schoolId);b.roomId&&(a.typeId=b.roomId)}if(a.currentNavItem="room",a.auth=c.current.locals.auth,a.generalTimetableUtils=new e,a.typeId=void 0,c.current.params.schoolId?a.schoolId=c.current.params.schoolId:a.auth?a.schoolId=a.auth.school.id:b.url("/timetables"),a.schoolId){var h="/timetables/room/"+a.schoolId;d.endpoint(h).query().$promise.then(function(b){a.timetablesByRooms=b})}g(),a.getRooms=function(b){return b=(b||"").toUpperCase(),a.timetablesByRooms.filter(function(a){return-1!==a.code.toUpperCase().indexOf(b)})},a.showRoomWeek=function(b){a.typeId=b,f(b)}}]).controller("PersonalGeneralTimetableController",["$scope","$route","QueryUtils","GeneralTimetableUtils",function(a,b,c,d){if(a.currentNavItem="personal",a.auth=b.current.locals.auth,a.generalTimetableUtils=new d,a.schoolId=a.auth.school.id,a.auth.isStudent()||a.auth.isParent())var e=a.auth.student;else if(a.auth.isTeacher())var e=a.auth.teacher;a.typeId=e,a.$watch("timetableId",function(){a.timetables&&(a.shownTimetableIndex=getShownTimetableIndex(a.timetables,a.timetableId),a.shownStudyPeriodId=a.timetables[a.shownTimetableIndex].studyPeriodId)})}]).controller("GeneralTimetableSchoolListController",["$scope","School","$location",function(a,b,c){a.schools=b.getSchoolsWithLogo(),a.openSchoolGeneralTimetable=function(a){c.path("timetable/generalTimetableByGroup/"+a)}}])}(),function(){function a(a){a.shownWeek&&(a.weekIndex=a.shownWeek.weekNr,a.previousWeekIndex=a.weeks[a.weekIndex-1]?a.weekIndex-1:void 0,a.nextWeekIndex=a.weeks[a.weekIndex+1]?a.weekIndex+1:void 0)}function b(a,b){a.timetableEvents=b;for(var c=0;c<b.length;c++){var d=b[c],f=moment(d.date).isoWeekday()-1,g=moment.duration(moment(d.timeEnd,"HH:mm").diff(moment(d.timeStart,"HH:mm"))).asMinutes(),h=s*(g/q),i=moment.duration(moment(d.timeStart,"HH:mm").diff(moment(r,"HH:mm"))).asMinutes(),j=s*(i/q)+t;a.weekColumns[f].events.push({nameEt:d.nameEt,nameEn:d.nameEn,timeStart:d.timeStart,timeEnd:d.timeEnd,rowHeight:h,top:j,rooms:d.rooms,id:d.id,maxEl:1,teachers:d.teachers,studentGroups:d.studentGroups,"public":d.publicEvent,journalId:d.journalId,subjectStudyPeriodId:d.subjectStudyPeriodId,showStudyMaterials:d.showStudyMaterials,capacityType:d.capacityType,left:0,width:100})}e(a,b)}function c(a,b){for(var c=[],d=0;7>d;d++)c.push([]);return b.forEach(function(a){var b=moment(a.date).isoWeekday()-1;c[b].push(a)}),c}function d(){for(var a=[],b=7;23>b;b++)for(var c=0;60>c;c++){var d=(10>b?"0"+b:b)+":"+(10>c?"0"+c:c);a[d]=[]}return a}function e(a,b){for(var e,f,g=c(a,b),h=0;h<g.length;h++){f=d();for(var i=0;i<g[h].length;i++){var j=g[h][i],k=moment(j.timeEnd,"HH:mm").add(-1,"m").format("HH:mm"),l=!1;for(e in f)j.timeStart===e?l=!0:k===e&&(l=!1),l&&f[e].push(j.id)}for(e in f)for(var m=0;m<f[e].length;m++)for(var n=0;n<a.weekColumns[h].events.length;n++)f[e][m]===a.weekColumns[h].events[n].id&&a.weekColumns[h].events[n].maxEl<f[e].length&&(a.weekColumns[h].events[n].maxEl=f[e].length,a.weekColumns[h].events[n].left=m*Math.floor(100/f[e].length),a.weekColumns[h].events[n].width=Math.floor(100/f[e].length))}}function f(a){var b=[];b.push("");for(var c=0;64>=c;c++){var d=moment(r,"HH:mm").add(q*c,"m"),e=moment(d).format("HH:mm");b.push(e)}a.timeColumn=b}function g(a){for(var b=[],c=["dayMon","dayTue","dayWed","dayThu","dayFri","daySat","daySun"],d=0;d<c.length;d++)b.push({name:c[d],column:d+1,events:[],date:moment(a.shownWeek.start).add(d,"days").toDate(),today:moment().format("DD.MM.YYYY")===moment(a.shownWeek.start).add(d,"days").format("DD.MM.YYYY")?!0:!1});a.weekColumns=b}function h(a,b,c){a.directRoute=!1,c&&(a.directRoute=!0,a.$parent.typeId=c,b.current.params.weekIndex&&(a.weekIndex=b.current.params.weekIndex))}function i(a,b){a.generalTimetableUtils.changeState({weekIndex:b},a.schoolId)}function j(a){var b=a.generalTimetableUtils.loadState(a.schoolId);angular.isDefined(b.weekIndex)&&(a.weekIndex=b.weekIndex)}function k(a,b,c){a.typeId=b,a.weekIndex=c,i(a,c),a.shownWeek=a.weeks[c]}function l(a,c){f(a),g(a),b(a,c)}function m(a){var b=new Blob([a.content],{type:"text/ics"}),c=a.filename+".ics";n(c,b)}function n(a,b){if(window.navigator.msSaveOrOpenBlob)window.navigator.msSaveBlob(b,a);else{var c=window.document.createElement("a");c.href=window.URL.createObjectURL(b),c.download=a,document.body.appendChild(c),c.click(),document.body.removeChild(c)}}function o(a,b){var c=["amber-100","lime-100","teal-100","indigo-100","green-200","deep-orange-100","deep-purple-200","light-green-300","blue-grey-200","brown-50"],d=b.queryForDropdown({mainClassCode:"MAHT",higher:a.auth&&a.auth.higher?a.auth.higher:void 0,vocational:a.auth&&a.auth.vocational?a.auth.vocational:void 0});return d.$promise.then(function(a){return a.forEach(function(a,b){a.color=c[b%9]}),d})}function p(a,b){for(var c=0;c<a.length;c++)if(a[c].code===b)return a[c].color;return"primary-100-0.8"}var q=15,r="7:00",s=22,t=50;angular.module("hitsaOis").controller("SearchTimetableViewController",["$scope","$route","$q","Classifier","GeneralTimetableUtils","QueryUtils",function(b,c,d,e,f,g){function h(){b.weekCriteria=[],b.weekCriteria.room=b.criteria.room,b.weekCriteria.teachers=b.criteria.teachers,b.weekCriteria.studentGroups=b.criteria.studentGroups,b.weekCriteria.subject=b.criteria.subject}function i(){b.timetableEvents=null,b.shownWeek&&(g.loadingWheel(b,!0),g.endpoint("/timetableevents/timetableSearch/"+b.schoolId).query({room:b.weekCriteria.room,teachers:b.weekCriteria.teachers,studentGroups:b.weekCriteria.studentGroups,journalOrSubjectId:b.weekCriteria.subject,from:b.shownWeek.start,thru:b.shownWeek.end}).$promise.then(function(a){g.loadingWheel(b,!1),b.shownEvents=a,n()}))}function n(){b.shownWeek&&b.shownEvents&&l(b,b.shownEvents)}b.generalTimetableUtils=new f,b.auth=c.current.locals.auth;var q=o(b,e).then(function(a){b.capacityTypes=a});b.timetableSearch=!0,b.schoolId=c.current.params.schoolId?c.current.params.schoolId:b.auth.school.id,b.weeks=g.endpoint("/timetables/timetableStudyYearWeeks/"+b.schoolId).query(),b.$watch("searchResultEvents",function(){b.searchResultEvents&&(h(),b.shownEvents=b.searchResultEvents,d.all([q,b.weeks.$promise]).then(function(){angular.isDefined(b.weekIndex)||(b.weekIndex=b.generalTimetableUtils.getCurrentWeekIndex(b.weeks)),b.shownWeek=b.weeks[b.weekIndex],a(b),n()}))}),j(b),b.previousWeek=function(c,d){k(b,c,d),a(b),i(),b.$parent.shownWeek=b.shownWeek},b.nextWeek=function(c,d){k(b,c,d),a(b),i(),b.$parent.shownWeek=b.shownWeek},b.generateCalendar=function(){b.shownWeek&&g.endpoint("/timetableevents/timetableSearch/calendar/"+b.schoolId).search({room:b.weekCriteria.room,teachers:b.weekCriteria.teachers,studentGroups:b.weekCriteria.studentGroups,journalOrSubjectId:b.weekCriteria.subject,from:b.weeks[0].start,thru:b.weeks[b.weeks.length-1].end,lang:b.currentLanguage()}).$promise.then(function(a){m(a)})},b.getEventColor=function(a){return p(b.capacityTypes,a)}}]).controller("GroupTimetableViewController",["$scope","$route","$q","Classifier","GeneralTimetableUtils","QueryUtils",function(b,c,d,e,f,g){function i(){b.timetableEvents=null,b.shownWeek&&(g.loadingWheel(b,!0),g.endpoint(q).search({studentGroups:[b.$parent.typeId],from:b.shownWeek.start,thru:b.shownWeek.end}).$promise.then(function(a){g.loadingWheel(b,!1),b.shownStudyPeriods=a.studyPeriods,b.shownTimetableCurriculum=a.generalTimetableCurriculum,l(b,a.timetableEvents)}))}b.timetableType="group",b.generalTimetableUtils=new f,b.auth=c.current.locals.auth;var n=o(b,e).then(function(a){b.capacityTypes=a});b.schoolId=c.current.params.schoolId?c.current.params.schoolId:b.auth.school.id;var q="/timetableevents/timetableByGroup/"+b.schoolId,r="/timetableevents/timetableByGroup/calendar/"+b.schoolId;b.weeks=g.endpoint("/timetables/timetableStudyYearWeeks/"+b.schoolId).query(),c.current.params.groupId?h(b,c,c.current.params.groupId):j(b),b.$watchGroup(["$parent.typeId"],function(){b.$parent.typeId&&(b.typeId=b.$parent.typeId,d.all([n,b.weeks.$promise]).then(function(){angular.isDefined(b.weekIndex)||(b.weekIndex=b.generalTimetableUtils.getCurrentWeekIndex(b.weeks)),b.shownWeek=b.weeks[b.weekIndex],a(b),i()}))}),b.previousWeek=function(c,d){k(b,c,d),a(b),i()},b.nextWeek=function(c,d){k(b,c,d),a(b),i()},b.emptyParentVariable=function(){b.$parent.typeId=null},b.generateCalendar=function(){b.shownWeek&&b.$parent.typeId&&g.endpoint(r).search({studentGroups:[b.$parent.typeId],from:b.weeks[0].start,thru:b.weeks[b.weeks.length-1].end,lang:b.currentLanguage()}).$promise.then(function(a){m(a)})},b.getEventColor=function(a){return p(b.capacityTypes,a)}}]).controller("TeacherTimetableViewController",["$scope","$route","$q","Classifier","GeneralTimetableUtils","QueryUtils",function(b,c,d,e,f,g){function i(){b.timetableEvents=null,b.shownWeek&&(g.loadingWheel(b,!0),g.endpoint(q).search({teachers:[b.$parent.typeId],from:b.shownWeek.start,thru:b.shownWeek.end}).$promise.then(function(a){g.loadingWheel(b,!1),b.shownStudyPeriods=a.studyPeriods,b.shownTeacher={firstname:a.firstname,lastname:a.lastname},l(b,a.timetableEvents)}))}b.timetableType="teacher",b.generalTimetableUtils=new f,b.auth=c.current.locals.auth;var n=o(b,e).then(function(a){b.capacityTypes=a});b.schoolId=c.current.params.schoolId?c.current.params.schoolId:b.auth.school.id;var q="/timetableevents/timetableByTeacher/"+b.schoolId,r="/timetableevents/timetableByTeacher/calendar/"+b.schoolId;b.weeks=g.endpoint("/timetables/timetableStudyYearWeeks/"+b.schoolId).query(),c.current.params.teacherId?h(b,c,c.current.params.teacherId):j(b),b.$watchGroup(["$parent.typeId"],function(){b.$parent.typeId&&(b.typeId=b.$parent.typeId,d.all([n,b.weeks.$promise]).then(function(){angular.isDefined(b.weekIndex)||(b.weekIndex=b.generalTimetableUtils.getCurrentWeekIndex(b.weeks)),b.shownWeek=b.weeks[b.weekIndex],a(b),i()}))}),b.previousWeek=function(c,d){k(b,c,d),a(b),i()},b.nextWeek=function(c,d){k(b,c,d),a(b),i()},b.emptyParentVariable=function(){b.$parent.typeId=null},b.generateCalendar=function(){b.shownWeek&&b.$parent.typeId&&g.endpoint(r).search({teachers:[b.$parent.typeId],from:b.weeks[0].start,thru:b.weeks[b.weeks.length-1].end,lang:b.currentLanguage()}).$promise.then(function(a){m(a)})},b.getEventColor=function(a){return p(b.capacityTypes,a)}}]).controller("RoomTimetableViewController",["$scope","$route","$q","Classifier","GeneralTimetableUtils","QueryUtils",function(b,c,d,e,f,g){function i(){b.timetableEvents=null,b.shownWeek&&(g.loadingWheel(b,!0),g.endpoint(q).search({room:b.$parent.typeId,from:b.shownWeek.start,thru:b.shownWeek.end}).$promise.then(function(a){g.loadingWheel(b,!1),b.shownStudyPeriods=a.studyPeriods,b.shownRoom={roomCode:a.roomCode,buildingCode:a.buildingCode},l(b,a.timetableEvents)}))}b.timetableType="room",b.generalTimetableUtils=new f,b.auth=c.current.locals.auth;var n=o(b,e).then(function(a){b.capacityTypes=a});b.schoolId=c.current.params.schoolId?c.current.params.schoolId:b.auth.school.id;var q="/timetableevents/timetableByRoom/"+b.schoolId,r="/timetableevents/timetableByRoom/calendar/"+b.schoolId;b.weeks=g.endpoint("/timetables/timetableStudyYearWeeks/"+b.schoolId).query(),c.current.params.roomId?h(b,c,c.current.params.roomId):j(b),b.$watchGroup(["$parent.typeId"],function(){b.$parent.typeId&&(b.typeId=b.$parent.typeId,d.all([n,b.weeks.$promise]).then(function(){angular.isDefined(b.weekIndex)||(b.weekIndex=b.generalTimetableUtils.getCurrentWeekIndex(b.weeks)),b.shownWeek=b.weeks[b.weekIndex],a(b),i()}))}),b.previousWeek=function(c,d){k(b,c,d),a(b),i()},b.nextWeek=function(c,d){k(b,c,d),a(b),i()},b.emptyParentVariable=function(){b.$parent.typeId=null},b.generateCalendar=function(){b.shownWeek&&b.$parent.typeId&&g.endpoint(r).search({room:b.$parent.typeId,from:b.weeks[0].start,thru:b.weeks[b.weeks.length-1].end,lang:b.currentLanguage()}).$promise.then(function(a){m(a)})},b.getEventColor=function(a){return p(b.capacityTypes,a)}}]).controller("StudentTimetableViewController",["$scope","$route","$q","Classifier","GeneralTimetableUtils","QueryUtils",function(b,c,d,e,f,g){function h(){b.timetableEvents=null,b.shownWeek&&(g.loadingWheel(b,!0),g.endpoint("/timetableevents/timetableByStudent").search({student:b.typeId,from:b.shownWeek.start,thru:b.shownWeek.end}).$promise.then(function(a){g.loadingWheel(b,!1),b.shownStudyPeriods=a.studyPeriods,b.shownStudent={firstname:a.firstname,lastname:a.lastname,isHigher:a.isHigher},l(b,a.timetableEvents)}))}b.timetableType="student",b.generalTimetableUtils=new f,b.auth=c.current.locals.auth;var i=o(b,e).then(function(a){b.capacityTypes=a});b.schoolId=b.auth.school.id,b.weeks=g.endpoint("/timetables/timetableStudyYearWeeks/student/"+b.$parent.typeId).query(),b.$watchGroup(["$parent.typeId"],function(){(b.auth.isStudent()||b.auth.isParent()||b.auth.isAdmin())&&b.$parent.typeId&&(b.typeId=b.$parent.typeId,d.all([i,b.weeks.$promise]).then(function(){angular.isDefined(b.weekIndex)||(b.weekIndex=b.generalTimetableUtils.getCurrentWeekIndex(b.weeks)),b.shownWeek=b.weeks[b.weekIndex],a(b),h()}))}),j(b),b.previousWeek=function(c,d){
k(b,c,d),a(b),h()},b.nextWeek=function(c,d){k(b,c,d),a(b),h()},b.emptyParentVariable=function(){b.$parent.typeId=null},b.generateCalendar=function(){b.shownWeek&&b.$parent.typeId&&g.endpoint("/timetableevents/timetableByStudent/calendar").search({student:b.typeId,from:b.weeks[0].start,thru:b.weeks[b.weeks.length-1].end,lang:b.currentLanguage()}).$promise.then(function(a){m(a)})},b.getEventColor=function(a){return p(b.capacityTypes,a)}}])}(),angular.module("hitsaOis").controller("TimetableEventEditController",["$scope","message","QueryUtils","DataUtils","$route","$location","dialogService",function(a,b,c,d,e,f,g){function h(b){b.startTime=new Date(b.startTime),b.endTime=new Date(b.endTime),a.timetableEvent=b}function i(){var b={};a.timetableEvent.rooms&&(b.rooms=a.timetableEvent.rooms.reduce(function(a,b){return a.push(b.id),a},[])),a.timetableEvent.teachers&&(b.teachers=a.timetableEvent.teachers.reduce(function(a,b){return a.push(b.teacher.id),a},[])),a.timetableEvent.studentGroups&&(b.studentGroups=a.timetableEvent.studentGroups.reduce(function(a,b){return a.push(b.id),a},[]));var c=new Date(a.timetableEvent.date),d=a.timetableEvent.startTime,e=a.timetableEvent.endTime;return b.startTime=new Date(c.getFullYear(),c.getMonth(),c.getDate(),d.getHours(),d.getMinutes()),b.endTime=new Date(c.getFullYear(),c.getMonth(),c.getDate(),e.getHours(),e.getMinutes()),b.timetableEventId=a.timetableEvent.id,b.repeatCode=a.timetableEvent.repeatCode,b.weekAmount=a.timetableEvent.weekAmount,b}function j(){m?(a.timetableEvent.$update().then(h).then(b.updateSuccess),a.eventForm.$setPristine(),a.removedJournalTeacherIds={}):a.timetableEvent.$save().then(function(){b.info("main.messages.create.success"),f.url("/lessonplans/events?_menu")})}a.auth=e.current.locals.auth;var k="/timetableevents",l=c.endpoint(k),m=e.current.params.id;m?(a.timetableEvent=l.get({id:m}),a.timetableEvent.$promise.then(h)):(a.timetableEvent=new l,a.timetableEvent.isSingleEvent=!0,a.auth.isTeacher()&&(a.timetableEvent.teachers=[],a.timetableEvent.teachers.push({teacher:{id:a.auth.teacher,nameEt:a.auth.fullname,nameEn:a.auth.fullname,nameRu:a.auth.fullname}}))),a.save=function(){if(a.eventForm.$setSubmitted(),!a.eventForm.$valid)return void b.error("main.messages.form-has-errors");if(a.timetableEvent.startTime>a.timetableEvent.endTime)return void b.error("timetable.timetableEvent.error.endIsEarlierThanStart");var e=i();c.endpoint(k+"/timetableTimeOccupied").get(e).$promise.then(function(b){b.occupied?g.confirmDialog(d.occupiedEventTimePrompts(a,a.auth.higher,b),function(){j()}):j()})},a["delete"]=function(){g.confirmDialog({prompt:"timetable.deleteConfirm",accept:"main.yes",cancel:"main.no"},function(){a.timetableEvent.$delete().then(function(){b.info("main.messages.delete.success"),f.url("/lessonplans/events?_noback")})["catch"](angular.noop)})},a.$watch("timetableEvent.teacher",function(){angular.isDefined(a.timetableEvent.teacher)&&null!==a.timetableEvent.teacher&&a.addTeacher()}),a.sortTeachers=function(b){return a.currentLanguageNameField(b.teacher)},a.addTeacher=function(){return angular.isArray(a.timetableEvent.teachers)||(a.timetableEvent.teachers=[]),a.timetableEvent.teachers.some(function(b){return b.teacher.id===a.timetableEvent.teacher.id})?void b.error(a.auth.higher?"timetable.timetableEvent.error.duplicateTeacherHigher":"timetable.timetableEvent.error.duplicateTeacherVocational"):(a.timetableEvent.teachers.push({id:a.removedJournalTeacherIds?a.removedJournalTeacherIds[a.timetableEvent.teacher.id]:null,teacher:a.timetableEvent.teacher}),void(a.timetableEvent.teacher=void 0))},a.deleteTeacher=function(b){var c=a.timetableEvent.teachers.indexOf(b);-1!==c&&(a.timetableEvent.teachers.splice(c,1),a.removedJournalTeacherIds||(a.removedJournalTeacherIds={}),a.removedJournalTeacherIds[b.teacher.id]=b.id,a.eventForm.$setDirty())},a.$watch("timetableEvent.room",function(){angular.isDefined(a.timetableEvent.room)&&null!==a.timetableEvent.room&&a.addRoom()}),a.addRoom=function(){return angular.isArray(a.timetableEvent.rooms)||(a.timetableEvent.rooms=[]),a.timetableEvent.rooms.some(function(b){return b.id===a.timetableEvent.room.id})?void b.error("timetable.timetableEvent.error.duplicateRoom"):(a.timetableEvent.rooms.push(a.timetableEvent.room),void(a.timetableEvent.room=void 0))},a.deleteRoom=function(b){var c=a.timetableEvent.rooms.indexOf(b);-1!==c&&(a.timetableEvent.rooms.splice(c,1),a.eventForm.$setDirty())},a.$watch("timetableEvent.studentGroup",function(){angular.isDefined(a.timetableEvent.studentGroup)&&null!==a.timetableEvent.studentGroup&&a.addStudentGroup()}),a.addStudentGroup=function(){return angular.isArray(a.timetableEvent.studentGroups)||(a.timetableEvent.studentGroups=[]),a.timetableEvent.studentGroups.some(function(b){return b.id===a.timetableEvent.studentGroup.id})?void b.error("timetable.timetableEvent.error.duplicateStudentGroup"):(a.timetableEvent.studentGroups.push(a.timetableEvent.studentGroup),void(a.timetableEvent.studentGroup=void 0))},a.deleteStudentGroup=function(b){var c=a.timetableEvent.studentGroups.indexOf(b);-1!==c&&(a.timetableEvent.studentGroups.splice(c,1),a.eventForm.$setDirty())}}]),function(){function a(a,b){a.vocationalHigher="";var c=[];a.teacher.isVocational&&c.push("teacher.isVocational"),a.teacher.isHigher&&c.push("teacher.isHigher"),b(c).then(function(b){a.vocationalHigher=c.map(function(a){return b[a]}).join("; ")})}function b(a,b,c){a[b]=a[b].filter(function(a){return a!==c})}angular.module("hitsaOis").controller("TeacherEditController",["$location","$route","$scope","$translate","dialogService","message","DataUtils","FormUtils","QueryUtils",function(c,d,e,f,g,h,i,j,k){function l(){a(e,f),e.currentNavItem="teacher.data",e.teacher.person.idcode&&11===e.teacher.person.idcode.length&&(e.teacher.person.sex=i.sexFromIdcode(e.teacher.person.idcode),e.teacher.person.birthdate=i.birthdayFromIdcode(e.teacher.person.idcode)),i.convertStringToDates(e.teacher.teacherPositionEhis,["contractStart","contractEnd"]),e.isHigher=e.teacher.isHigher,i.convertStringToDates(e.teacher.person,["birthdate"]),e.formState={person:!0,id:!0}}function m(a){angular.isDefined(a)&&null!==a?e.teacher=p.get({id:a},l):e.teacher=new p({isActive:!0,isStudyPeriodScheduleLoad:!0,scheduleLoad:0,person:{citizenship:"RIIK_EST"}})}e.auth=d.current.locals.auth;var n=d.current.params.id,o="/teachers",p=k.endpoint(o),q=k.endpoint("/teachers/"+n+"/ehisPositions"),r=k.endpoint("/school/generateEmail",{post:{method:"POST"}}),s=e.auth.school,t=s&&s.higher&&!s.vocational;e.occupations=k.endpoint("/school/teacheroccupations/all").query(),e.lookupFailure=function(){e.cleanReadOnly(),e.formState={person:!1,id:!0},e.teacher.person.sex=i.sexFromIdcode(e.teacher.person.idcode),e.teacher.person.birthdate=i.birthdayFromIdcode(e.teacher.person.idcode),e.teacherForm.idcode.$setValidity("teacherIdCode",!0)},m(n),angular.isArray(e.teacher.teacherPositionEhis)||(e.teacher.teacherPositionEhis=[]),e.newTeacherPositionEhis=function(){e.teacher.teacherPositionEhis.push({isVocational:!t,isTeacher:t,language:"EHIS_OPETAJA_KEEL_E"})},e.maxDate=new Date,e.cleanReadOnly=function(){e.formState={person:!1,id:!1},e.teacher.person.citizenship="RIIK_EST",e.teacher.person.firstname="",e.teacher.person.lastname="",e.teacher.person.nativeLanguage="",e.teacher.person.birthdate=null,e.teacher.person.sex=null,e.teacher.email=void 0,e.oldFoundPerson&&e.oldFoundPerson.idcode&&e.oldFoundPerson.idcode===e.teacher.person.idcode&&e.lookupPerson(e.oldFoundPerson)},e.lookupPerson=function(a){e.oldFoundPerson=a,a.citizenship&&(e.teacher.person.citizenship=a.citizenship),e.teacher.person.firstname=a.firstname,e.teacher.person.lastname=a.lastname,e.teacher.person.nativeLanguage=a.nativeLanguage,e.teacher.person.birthdate=a.birthdate,e.teacher.person.sex=a.sex,e.teacher.email=a.schoolEmail||void 0,e.teacherForm.idcode.$setValidity("teacherIdCode",null===a.teacherId),l(),e.generateEmail()},e["delete"]=function(){j.deleteRecord(e.teacher,o+"?_noback",{prompt:e.auth.higher?"teacher.deleteConfirmHigher":"teacher.deleteConfirmVocational"})},e.update=function(){j.withValidForm(e.teacherForm,function(){e.teacher.id?e.teacher.$update().then(function(){h.updateSuccess(),e.auth.isTeacher()?c.url(o+"/myData?_noback"):(l(),e.teacherForm.$setPristine())})["catch"](angular.noop):e.teacher.$save().then(function(a){h.info("main.messages.create.success"),c.url(o+"/"+a.id+"/edit?_noback")})["catch"](angular.noop)})},e.sendToEhis=function(){j.withValidForm(e.teacherForm,function(){g.confirmDialog({prompt:e.auth.higher?"teacher.ehisConfirmHigher":"teacher.ehisConfirmVocational"},function(){k.endpoint(o+"/"+e.teacher.id+"/sendToEhis").put({},e.teacher).$promise.then(function(){h.info(e.auth.higher?"teacher.sentToEhisHigher":"teacher.sentToEhisVocational"),c.url(o+"/"+e.teacher.id+"/edit?_noback"),m(e.teacher.id)})["catch"](function(){e.teacher.ehisLastSuccessfulDate=null})})})},e.deleteEhisPosition=function(a){g.confirmDialog({prompt:e.auth.higher?"teacher.teacherPositionEhis.deleteConfirmHigher":"teacher.teacherPositionEhis.deleteConfirmVocational"},function(){a.id?(a=new q(a),a.$delete().then(function(){h.info("main.messages.delete.success"),e.teacher.teacherPositionEhis=e.teacher.teacherPositionEhis.filter(function(b){return b.id!==a.id})})["catch"](angular.noop)):b(e.teacher,"teacherPositionEhis",a)})};var u;e.generateEmail=function(){e.teacher.id||u!==e.teacher.email&&void 0!==e.teacher.email||!e.teacher.person||!e.teacher.person.lastname||r.post({firstname:e.teacher.person.firstname,lastname:e.teacher.person.lastname}).$promise.then(function(a){e.teacher.email=u=a.email})["catch"](angular.noop)}}]).controller("TeacherContinuingEducationEditController",["$location","$route","$translate","$scope","dialogService","message","QueryUtils",function(c,d,e,f,g,h,i){function j(){a(f,e),f.currentNavItem="teacher.continuingEducation",f.isHigher=f.teacher.isHigher,k(f.teacher)}function k(a){a.teacherContinuingEducations&&(f.teacherContinuingEducations=new n({continuingEducations:a.teacherContinuingEducations}),a.teacherContinuingEducations=void 0)}f.auth=d.current.locals.auth;var l=d.current.params.id,m=i.endpoint("/teachers"),n=i.endpoint("/teachers/"+l+"/continuingEducations");l?f.teacher=m.get({id:l},j):f.teacher=new m({isActive:!0,isStudyPeriodScheduleLoad:!0,person:{citizenship:"RIIK_EST"}}),f.teacher.teacherContinuingEducations&&angular.isArray(f.continuingEducations)||(f.teacher.teacherContinuingEducations=[],k(f.teacher)),f.newTeacherContinuingEducation=function(){f.teacherContinuingEducations.continuingEducations.push({})},f.updateContinuingEducations=function(){f.continuingEducationsForm.$setSubmitted(),f.continuingEducationsForm.$valid&&f.teacherContinuingEducations.$update().then(function(a){h.updateSuccess(),k(a),f.continuingEducationsForm.$setPristine()})["catch"](angular.noop)},f.deleteContinuingEducation=function(a){g.confirmDialog({prompt:f.auth.higher?"teacher.continuingEducation.deleteConfirmHigher":"teacher.continuingEducation.deleteConfirmVocational"},function(){a.id?(a=new n(a),a.$delete().then(function(){h.info("main.messages.delete.success"),f.teacherContinuingEducations.continuingEducations=f.teacherContinuingEducations.continuingEducations.filter(function(b){return b.id!==a.id})})["catch"](angular.noop)):b(f.teacherContinuingEducations,"continuingEducations",a)})}}]).controller("TeacherQualificationEditController",["$location","$route","$translate","$scope","dialogService","message","QueryUtils",function(c,d,e,f,g,h,i){function j(){a(f,e),f.currentNavItem="teacher.qualification",f.isHigher=f.teacher.isHigher,k(f.teacher)}function k(a){a.teacherQualifications&&(f.teacherQualifications=new n({qualifications:a.teacherQualifications}),a.teacherQualifications=void 0)}f.auth=d.current.locals.auth;var l=d.current.params.id,m=i.endpoint("/teachers"),n=i.endpoint("/teachers/"+l+"/qualifications");l?f.teacher=m.get({id:l},j):f.teacher=new m({isActive:!0,isStudyPeriodScheduleLoad:!0,person:{citizenship:"RIIK_EST"}}),f.teacher.teacherQualifications&&angular.isArray(f.qualifications)||(f.teacher.teacherQualifications=[],k(f.teacher)),f.newTeacherQualification=function(){f.teacherQualifications.qualifications.push({})},f.updateQualifications=function(){f.qualificationsForm.$setSubmitted(),f.qualificationsForm.$valid&&f.teacherQualifications.$update().then(function(a){h.updateSuccess(),k(a),f.qualificationsForm.$setPristine()})["catch"](angular.noop)},f.deleteQualification=function(a){g.confirmDialog({prompt:f.auth.higher?"teacher.qualification.deleteConfirmHigher":"teacher.qualification.deleteConfirmVocational"},function(){a.id?(a=new n(a),a.$delete().then(function(){h.info("main.messages.delete.success"),f.teacherQualifications.qualifications=f.teacherQualifications.qualifications.filter(function(b){return b.id!==a.id})})["catch"](angular.noop)):b(f.teacherQualifications,"qualifications",a)})}}]).controller("TeacherMobilityEditController",["$location","$route","$translate","$scope","dialogService","message","DataUtils","QueryUtils",function(c,d,e,f,g,h,i,j){function k(){a(f,e),f.currentNavItem="teacher.mobility",f.isHigher=f.teacher.isHigher,l(f.teacher)}function l(a){a.teacherMobility&&(i.convertStringToDates(a.teacherMobility,["start","end"]),f.teacherMobility=new o({mobilities:a.teacherMobility}),a.teacherMobility=void 0)}f.auth=d.current.locals.auth;var m=d.current.params.id,n=j.endpoint("/teachers"),o=j.endpoint("/teachers/"+m+"/mobilities");m?f.teacher=n.get({id:m},k):f.teacher=new n({isActive:!0,isStudyPeriodScheduleLoad:!0,person:{citizenship:"RIIK_EST"}}),f.teacher.teacherMobility&&angular.isArray(f.mobilities)||(f.teacher.teacherMobility=[],l(f.teacher)),f.newTeacherMobility=function(){f.teacherMobility.mobilities.push({})},f.updateTeacherMobility=function(){f.mobilityForm.$setSubmitted(),f.mobilityForm.$valid&&f.teacherMobility.$update().then(function(a){h.updateSuccess(),l(a),f.mobilityForm.$setPristine()})["catch"](angular.noop)},f.deleteMobility=function(a){g.confirmDialog({prompt:f.auth.higher?"teacher.mobility.deleteConfirmHigher":"teacher.mobility.deleteConfirmVocational"},function(){a.id?(a=new o(a),a.$delete().then(function(){h.info("main.messages.delete.success"),f.teacherMobility.mobilities=f.teacherMobility.mobilities.filter(function(b){return b.id!==a.id})})["catch"](angular.noop)):b(f.teacherMobility,"mobilities",a)})}}]).controller("TeacherListController",["$scope","$route","QueryUtils","USER_ROLES",function(a,b,c,d){c.createQueryForm(a,"/teachers",{order:"p.lastname,p.firstname",isActive:!0}),a.auth=b.current.locals.auth,a.showSchool=a.auth.isExternalExpert(),a.schoolHigher=a.auth.school&&a.auth.school.higher,a.auth.isExternalExpert()||(a.teacherOccupations=c.endpoint("/teachers/teacheroccupations").query()),a.formState={canCreate:a.auth.isAdmin()&&-1!==a.auth.authorizedRoles.indexOf(d.ROLE_OIGUS_M_TEEMAOIGUS_OPETAJA)},a.loadData()}]).controller("TeacherViewController",["$scope","$route","$translate","QueryUtils","message",function(b,c,d,e,f){function g(){b.teacher.scheduleLoad=angular.isNumber(b.teacher.scheduleLoad)?String(b.teacher.scheduleLoad):"",a(b,d),b.teacher.teacherPositionEhis.forEach(function(a){a.load=angular.isNumber(a.load)?String(a.load):""}),b.teacher.teacherQualifications.forEach(function(a){a.year=angular.isNumber(a.year)?String(a.year):""})}b.isShowingRtipTab=!1;var h=c.current.locals.auth;b.auth=h;var i=h.isTeacher()?h.teacher:c.current.params.id;b.teacherId=i;var j=e.endpoint("/teachers");e.endpoint("/autocomplete/schooldepartments").query(function(a){b.schoolDepartmentsById=a.reduce(function(a,b){return a[b.id]=b,a},{})}),b.teacher=j.get({id:i},g),e.createQueryForm(b,"/teachers/"+i+"/absences"),b.criteria.order="-startDate",b.afterLoadData=function(a){b.tabledata.content=a.content,b.tabledata.totalElements=a.totalElements},b.changeIsShowingRtipTab=function(){b.isShowingRtipTab=!b.isShowingRtipTab,b.isShowingRtipTab&&b.loadData()},b.updateData=function(){e.endpoint("/teachers/"+i+"/rtip").save().$promise.then(function(){b.loadData(),f.info("teacher.rtipUpdateOperation.success")})},b.loadData()}]).controller("TeacherRtipAbsenceEditController",["$scope","$route","$translate","QueryUtils","message",function(b,c,d,e,f){function g(){a(b,d),b.currentNavItem="teacher.rtipAbsence",b.isHigher=b.teacher.isHigher,b.loadData()}b.auth=c.current.locals.auth;var h=c.current.params.id,i=e.endpoint("/teachers");b.rtipPage=!0,h?b.teacher=i.get({id:h},g):b.teacher=new i({isActive:!0,isStudyPeriodScheduleLoad:!0,person:{citizenship:"RIIK_EST"}}),e.createQueryForm(b,"/teachers/"+h+"/absences"),b.criteria.order="-startDate",b.afterLoadData=function(a){b.tabledata.content=a.content,b.tabledata.totalElements=a.totalElements},b.updateData=function(){e.endpoint("/teachers/"+h+"/rtip").save().$promise.then(function(){b.loadData(),f.info("teacher.rtipUpdateOperation.success")})}}])}(),angular.module("hitsaOis").controller("TeacherOccupationEditController",["$location","$route","$scope","dialogService","message","QueryUtils",function(a,b,c,d,e,f){var g=b.current.params.id,h="/school/teacheroccupations",i=f.endpoint(h);g?c.teacherOccupation=i.get({id:g}):c.teacherOccupation=new i({occupationEt:"",occupationEn:"",isValid:!0}),c.update=function(){return c.teacherOccupationForm.$setSubmitted(),c.teacherOccupationForm.$valid?void(c.teacherOccupation.id?(c.teacherOccupation.$update().then(e.updateSuccess),c.teacherOccupationForm.$setPristine()):c.teacherOccupation.$save().then(function(){e.info("main.messages.create.success"),a.url(h+"/"+c.teacherOccupation.id+"/edit?_noback")})):void e.error("main.messages.form-has-errors")},c["delete"]=function(){d.confirmDialog({prompt:"teacher.occupation.deleteconfirm"},function(){c.teacherOccupation.$delete().then(function(){e.info("main.messages.delete.success"),a.url(h)})})}}]),angular.module("hitsaOis").config(["$routeProvider","USER_ROLES",function(a,b){var c={authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_OPETAJA]};a.when("/teachers",{templateUrl:"teacher/teacher.list.html",controller:"TeacherListController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}]},data:c}).when("/teachers/new",{templateUrl:"teacher/teacher.edit.html",controller:"TeacherEditController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}]},data:{authorizedRoles:[b.ROLE_OIGUS_M_TEEMAOIGUS_OPETAJA]}}).when("/teachers/:id/edit",{templateUrl:"teacher/teacher.edit.html",controller:"TeacherEditController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}]},data:{authorizedRoles:[b.ROLE_OIGUS_M_TEEMAOIGUS_OPETAJA]}}).when("/teachers/:id/editmydata",{templateUrl:"teacher/teacher.edit.mydata.html",controller:"TeacherEditController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}]},data:{authorizedRoles:[b.ROLE_OIGUS_M_TEEMAOIGUS_OPETAJA]}}).when("/teachers/:id/continuingEducation",{templateUrl:"teacher/teacher.continuing.education.edit.html",controller:"TeacherContinuingEducationEditController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}]},data:c}).when("/teachers/:id/qualification",{templateUrl:"teacher/teacher.qualification.edit.html",controller:"TeacherQualificationEditController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}]},data:c}).when("/teachers/:id/mobility",{templateUrl:"teacher/teacher.mobility.edit.html",controller:"TeacherMobilityEditController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}]},data:c}).when("/teachers/:id/rtipAbsence",{templateUrl:"teacher/teacher.rtip.absence.view.html",controller:"TeacherRtipAbsenceEditController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}]},data:c}).when("/teachers/myData",{templateUrl:"teacher/teacher.view.html",controller:"TeacherViewController",controllerAs:"controller",data:c,resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}]}}).when("/teachers/:id",{templateUrl:"teacher/teacher.view.html",controller:"TeacherViewController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}]},data:c})}]),angular.module("hitsaOis").controller("FinalThesisEditController",["$scope","$route","$location","$q","Classifier","DataUtils","QueryUtils","config","dialogService","message",function(a,b,c,d,e,f,g,h,i,j){function k(b){a.thesis=b}function l(b,c){var d=b.teacher?b.teacher.id:null;if(d)for(var e=0;e<a.thesis.supervisors.length;e++)if(a.thesis.supervisors[e].teacher&&a.thesis.supervisors[e].teacher.id===d&&c!==e)return!0;return!1}function m(b){if(b.isPrimary)for(var c=0;c<a.thesis.supervisors.length;c++)a.thesis.supervisors[c].isPrimary=!1}function n(){return a.finalThesisForm.$setSubmitted(),0===a.thesis.supervisors.length?(j.error("finalThesis.error.supervisorRequired"),!1):a.finalThesisForm.$valid?!0:(j.error("main.messages.form-has-errors"),!1)}a.auth=b.current.locals.auth;var o="/finalThesis",p=g.endpoint(o),q=b.current.locals.entity;angular.isDefined(q)?(k(q),a.thesis.canBeEdited||-1!==b.current.$$route.originalPath.indexOf("view")||c.url(o+"/"+a.thesis.id+"/view?_noback"),a.finalThesisPdfUrl=h.apiUrl+o+"/print/"+q.id+"/finalThesis.pdf"):(a.thesis={hasDraft:!1,supervisors:[]},a.auth.isStudent()&&(a.thesis.student={id:a.auth.student})),a.$watch("thesis.student",function(){a.thesis.student&&g.endpoint("/students/"+a.thesis.student.id).get(function(b){a.thesis.person=b.person,a.thesis.curriculumVersion=b.curriculumVersion,a.thesis.studentGroup=b.studentGroup,a.thesis.isVocational=b.curriculumVersion.isVocational})}),a.openAddSupervisorDialog=function(b){var c=a.thesis.supervisors?a.thesis.supervisors.length:0;c>=3&&!angular.isDefined(b)?j.error("finalThesis.error.maxSupervisors"):i.showDialog("finalThesis/supervisor.add.dialog.html",function(c){c.newSupervisor=angular.isDefined(b)?!1:!0,c.newSupervisor?c.supervisor={isExternal:!1}:c.supervisor=angular.copy(a.thesis.supervisors[b]),c.$watch("supervisor.teacher",function(){c.supervisor&&c.supervisor.teacher&&g.endpoint(o+"/teacher/").get({teacherId:c.supervisor.teacher.id},function(a){c.supervisor.firstname=a.person.firstname,c.supervisor.lastname=a.person.lastname,c.supervisor.email=a.email,c.supervisor.occupation=a.teacherOccupation.nameEt})}),c.typeChanged=function(a){c.supervisor={isExternal:a}},c.removeSupervisor=function(){i.confirmDialog({prompt:"finalThesis.supervisorDeleteConfirm"},function(){a.thesis.supervisors.splice(b,1),c.cancel()})},c.submitSupervisor=function(){l(c.supervisor,b)?j.error("finalThesis.error.teacherAlreadyIsSupervisor"):c.submit()}},function(c){var d=c.supervisor;m(d),angular.isDefined(b)?a.thesis.supervisors[b]=d:a.thesis.supervisors.push(d)})},a.save=function(){if(n()){var b=new p(a.thesis);angular.isDefined(a.thesis.id)?b.$update().then(function(a){j.info("main.messages.update.success"),k(a)})["catch"](angular.noop):b.$save().then(function(a){j.info("main.messages.update.success"),c.url(o+"/"+a.id+"/edit?_noback")})["catch"](angular.noop)}},a.confirm=function(){n()&&i.confirmDialog({prompt:"finalThesis.confirmConfirm"},function(){g.endpoint(o+"/"+a.thesis.id+"/confirm").put(a.thesis,function(a){j.info("finalThesis.isConfirmed"),k(a)})})}}]),angular.module("hitsaOis").controller("FinalThesisListController",["$scope","$route","$location","$q","QueryUtils","DataUtils","Classifier",function(a,b,c,d,e,f,g){a.auth=b.current.locals.auth,a.criteria={},a.noFinalThesisModule=!1;var h="/finalThesis",i=g.valuemapper({status:"LOPUTOO_STAATUS"});e.createQueryForm(a,h,{order:"2"},i.objectmapper),a.auth.isTeacher()||a.auth.isAdmin()?d.all(i.promises).then(a.loadData):a.auth.isStudent()&&e.endpoint(h+"/studentFinalThesis").get().$promise.then(function(b){b.finalThesisRequired?b.finalThesis?c.url(h+"/"+b.finalThesis+"/view?_noback"):c.url(h+"/new"):a.noFinalThesisModule=!0}),a.$watch("criteria.studentGroupObject",function(){a.criteria.studentGroup=a.criteria.studentGroupObject?a.criteria.studentGroupObject.id:null})}]),angular.module("hitsaOis").config(["$routeProvider","USER_ROLES",function(a,b){a.when("/finalThesis",{templateUrl:"finalThesis/final.thesis.list.html",controller:"FinalThesisListController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}]},data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_LOPTEEMA]}}).when("/finalThesis/new",{templateUrl:"finalThesis/final.thesis.edit.html",controller:"FinalThesisEditController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}]},data:{authorizedRoles:[b.ROLE_OIGUS_M_TEEMAOIGUS_LOPTEEMA]}}).when("/finalThesis/:id/edit",{templateUrl:"finalThesis/final.thesis.edit.html",controller:"FinalThesisEditController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}],entity:["QueryUtils","$route",function(a,b){return a.endpoint("/finalThesis").get({id:b.current.params.id}).$promise}]},data:{authorizedRoles:[b.ROLE_OIGUS_M_TEEMAOIGUS_LOPTEEMA]}}).when("/finalThesis/:id/view",{templateUrl:"finalThesis/final.thesis.view.html",controller:"FinalThesisEditController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}],entity:["QueryUtils","$route",function(a,b){return a.endpoint("/finalThesis").get({id:b.current.params.id}).$promise}]},data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_LOPTEEMA]}})}]),angular.module("hitsaOis").controller("FinalHigherProtocolListController",["$scope","$route","$timeout","$q","QueryUtils","DataUtils","Classifier","dialogService","message","$location","USER_ROLES",function(a,b,c,d,e,f,g,h,i,j,k){a.auth=b.current.locals.auth;var l="/finalHigherProtocols",m=g.valuemapper({status:"PROTOKOLL_STAATUS"});a.formState={canCreateProtocol:(a.auth.isTeacher()||a.auth.isAdmin())&&-1!==a.auth.authorizedRoles.indexOf(k.ROLE_OIGUS_M_TEEMAOIGUS_LOPPROTOKOLL)},e.createQueryForm(a,l,{order:"14 desc"},m.objectmapper),angular.isDefined(a.criteria.status)||(a.criteria.status="PROTOKOLL_STAATUS_S"),d.all(m.promises).then(a.loadData)}]),angular.module("hitsaOis").controller("FinalHigherProtocolNewController",["$scope","$route","$location","$q","QueryUtils","DataUtils","Classifier","message","ArrayUtils",function(a,b,c,d,e,f,g,h,i){function j(){!a.formState.isFinalThesis&&a.formState.studyPeriod&&a.formState.curriculum?a.formState.subjects=e.endpoint(k+"/subjects/exam/"+a.formState.studyPeriod+"/"+a.formState.curriculum).query():a.formState.isFinalThesis&&a.formState.curriculum&&(a.formState.subjects=e.endpoint(k+"/subjects/thesis/"+a.formState.curriculum).query())}var k="/finalHigherProtocols";a.auth=b.current.locals.auth,a.formState={protocolType:"PROTOKOLLI_LIIK_P",isFinalThesis:"thesis"===b.current.params.moduleType?!0:!1,selectedStudents:[],subjects:[]};var l=g.valuemapper({status:"OPPURSTAATUS"});a.studyPeriods=e.endpoint("/autocomplete/studyPeriods").query(),a.curriculums=e.endpoint(k+"/curriculums/"+b.current.params.moduleType).query();var m=[];m.push(a.studyPeriods.$promise),d.all(m).then(function(){a.formState.studyPeriod=f.getCurrentStudyYearOrPeriod(a.studyPeriods).id}),a.studyPeriodChanged=function(){a.formState.subject=void 0,j()},a.curriculumChanged=function(){a.formState.subject=void 0,j()},a.subjectChanged=function(){var c=e.endpoint(k+"/subject/"+b.current.params.moduleType+"/"+a.formState.curriculum+"/"+a.formState.subject.id).get();a.tabledata={$promise:c.$promise},c.$promise.then(function(b){a.formState.selectedStudents=[],a.tabledata.content=l.objectmapper(b.subjectStudents),b.subjectStudents.forEach(function(b){"OPPURSTAATUS_O"===b.status.code&&a.formState.selectedStudents.push(b.studentId)})})};var n=e.endpoint(k);a.submit=function(){if(!a.finalProtocolNewForm.$valid)return h.error("main.messages.form-has-errors"),a.finalProtocolNewForm.$setSubmitted(),!1;if(i.isEmpty(a.formState.selectedStudents))return void h.error("finalProtocol.error.noStudents");var d={};"thesis"===b.current.params.moduleType?(d.isFinalThesis=!0,d.subject=a.formState.subject.id):"exam"===b.current.params.moduleType&&(d.isFinalThesis=!1,d.subjectStudyPeriod=a.formState.subject.id),d.protocolType=a.formState.protocolType,d.protocolStudents=a.formState.selectedStudents.map(function(a){return{studentId:a}}),d.curriculumVersion=a.formState.curriculum,new n(d).$save().then(function(a){h.info("main.messages.create.success"),c.url(k+"/"+a.id+"/edit?_noback")})}}]),angular.module("hitsaOis").controller("FinalHigherProtocolEditController",["$route","$location","$scope","$filter","$q","ArrayUtils","Classifier","DataUtils","HigherGradeUtil","ProtocolUtils","QueryUtils","config","dialogService","message","oisFileService",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){function p(){c.grades=c.grades.filter(function(b){return a.current.locals.isView?void 0:-1===x.indexOf(b.code)})}function q(a){e.all(y.promises).then(function(){c.finalProtocolForm.$setPristine(),c.protocol=y.objectmapper(a),c.savedStudents=angular.copy(c.protocol.protocolStudents),c.protocol.finalDate&&(c.committees=k.endpoint(w+"/committees").query({finalDate:c.protocol.finalDate})),c.protocol.committee&&(c.committeeMembers=c.protocol.committee.members,c.committeeMembers.forEach(function(a){-1!==c.protocol.presentCommitteeMembers.indexOf(a.id)&&(a.isPresent=!0)}),c.protocol.committee=c.protocol.committee.id);for(var b=0;b<c.protocol.protocolStudents.length;b++){for(var d=c.protocol.protocolStudents[b],e=!0,f=0;f<d.curriculumOccupations.length;f++)if(d.curriculumOccupations[f].studentOccupationCertificateId){e=!1;break}d.canGrantOccupation=e}c.getUrl=o.getUrl,r(),c.formState={canEditProtocol:j.canEditProtocol(c.auth,c.protocol),canAddDeleteStudents:j.canAddDeleteStudents(c.auth,c.protocol),canConfirm:j.canConfirm(c.auth,c.protocol),canChangeConfirmedProtocolGrade:j.canChangeConfirmedProtocolGrade(c.auth,c.protocol),protocolPdfUrl:l.apiUrl+w+"/"+a.id+"/print/protocol.pdf"}})}function r(){c.protocol.protocolStudents.forEach(function(a){a.occupations||(a.occupations=[]),a.curriculumOccupations.forEach(function(b){b.occupationCode&&(a.occupations[b.occupationCode]={code:b.occupationCode,certificateNr:b.certificateNr,ceritificateId:b.studentOccupationCertificateId,granted:!0})})})}function s(a){if(!c.finalProtocolForm.$valid)return n.error("main.messages.form-has-errors"),c.finalProtocolForm.$setSubmitted(),!1;if(a&&angular.isArray(c.protocol.protocolStudents))for(var b=0;b<c.protocol.protocolStudents.length;b++){var d=c.protocol.protocolStudents[b];if(i.isPositive(d.grade)&&!d.curriculumGrade)return n.error("finalProtocol.error.curriculumGradeRequired"),!1;if(!i.isPositive(d.grade)&&d.curriculumGrade)return n.error("finalProtocol.error.curriculumGradeNotAllowed"),!1}return!0}function t(){for(var a=0;a<c.committees.length;a++)if(c.committees[a].id=c.protocol.committee)return!0;return!1}function u(a){var b=c.protocol.protocolStudents;return b.forEach(function(a){for(var b=null,c=Object.keys(a.occupations),d=0;d<c.length;d++)a.occupations[c[d]].granted&&(b=c[d]);
a.occupationCode=b,a.curriculumGradeId=a.curriculumGrade?a.curriculumGrade.id:null}),b}function v(a){var b=[];if(a)for(var c=0;c<a.length;c++)a[c].isPresent&&b.push({committeeMemberId:a[c].id});return b}c.gradeUtil=i;var w="/finalHigherProtocols";c.auth=a.current.locals.auth,c.record=a.current.locals.entity,c.grades=g.queryForDropdown({mainClassCode:"KORGHINDAMINE"},p);var x=["KORGHINDAMINE_MI"],y=g.valuemapper({grade:"KORGHINDAMINE",status:"PROTOKOLL_STAATUS",studyLevel:"OPPEASTE"});c.formState={},a.current.locals.entity&&q(a.current.locals.entity),c.gradeChanged=function(a){if(a){var b=d("filter")(c.savedStudents,{id:a.id},!0)[0];b.grade!==a.grade?(c.finalProtocolForm.$setSubmitted(),a.gradeHasChanged=!0):(a.gradeHasChanged=!1,b.addInfo?a.addInfo=b.addInfo:a.addInfo=null)}c.formState.canConfirm=j.canConfirm(c.auth,c.protocol)},c.addInfoChanged=function(){c.formState.canConfirm=j.canConfirm(c.auth,c.protocol)},c.gradeValue=function(a){var b=y.objectmapper({grade:a}).grade;return b?c.auth.school.letterGrades?b.value2:b.value:void 0},c.confirm=function(){if(!s(!0))return!1;var a={version:c.protocol.version,finalDate:c.protocol.finalDate,committeeId:c.protocol.committee,protocolCommitteeMembers:v(c.committeeMembers),protocolStudents:u(c.protocol.protocolStudents)};"LOGIN_TYPE_I"===c.auth.loginMethod?j.signBeforeConfirm(w+"/"+c.protocol.id,a,"finalProtocol.messages.confirmed",q):"LOGIN_TYPE_M"===c.auth.loginMethod&&j.mobileSignBeforeConfirm(w+"/"+c.protocol.id,a,"finalProtocol.messages.confirmed",q)},c.selectedFinalDateChanged=function(){k.endpoint(w+"/committees").query({finalDate:c.protocol.finalDate}).$promise.then(function(a){c.committees=a,c.protocol.committee&&!t()&&(c.protocol.committee=null,c.committeeMembers=null)})},c.selectedCommitteeChanged=function(){c.protocol.committee?k.endpoint("/committees").get({id:c.protocol.committee}).$promise.then(function(a){c.committeeMembers=a.members}):c.committeeMembers=null},c.setCurriculumGrade=function(a,b){c.finalProtocolForm.$setDirty(),a.curriculumGrade&&a.curriculumGrade.id===b?a.curriculumGrade=null:a.curriculumGrade={id:b}},c.setOccupation=function(a,b){if(a.canGrantOccupation)for(var c in a.occupations)c!==b&&(a.occupations[c]=!1)},c.deleteProtocolStudent=function(a){m.confirmDialog({prompt:"finalProtocol.prompt.deleteStudent"},function(){var b=k.endpoint(w+"/"+c.protocol.id+"/removeStudent"),d=new b(a);d.$delete().then(function(a){n.info("main.messages.delete.success"),q(a)})["catch"](angular.noop)})};var z=k.endpoint(w);c.save=function(){return s(!1)?void new z({id:c.protocol.id,version:c.protocol.version,finalDate:c.protocol.finalDate,committeeId:c.protocol.committee,protocolCommitteeMembers:v(c.committeeMembers),protocolStudents:u(c.protocol.protocolStudents)}).$update().then(function(a){n.info("main.messages.create.success"),q(a)})["catch"](angular.noop):!1},c["delete"]=function(){m.confirmDialog({prompt:"finalProtocol.prompt.delete"},function(){new z(c.protocol).$delete().then(function(){n.info("finalProtocol.messages.deleted"),b.path(w)})["catch"](angular.noop)})}}]),angular.module("hitsaOis").config(["$routeProvider","USER_ROLES",function(a,b){a.when("/finalHigherProtocols",{templateUrl:"finalProtocol/higher/final.higher.protocol.list.html",controller:"FinalHigherProtocolListController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}]},data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_LOPPROTOKOLL]}}).when("/finalHigherProtocols/:moduleType/new",{templateUrl:"finalProtocol/higher/final.higher.protocol.new.html",controller:"FinalHigherProtocolNewController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}]},data:{authorizedRoles:[b.ROLE_OIGUS_M_TEEMAOIGUS_LOPPROTOKOLL]}}).when("/finalHigherProtocols/:id/edit",{templateUrl:"finalProtocol/higher/final.higher.protocol.edit.html",controller:"FinalHigherProtocolEditController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}],entity:["QueryUtils","$route",function(a,b){return a.endpoint("/finalHigherProtocols").get({id:b.current.params.id}).$promise}]},data:{authorizedRoles:[b.ROLE_OIGUS_M_TEEMAOIGUS_LOPPROTOKOLL]}}).when("/finalHigherProtocols/:id/view",{templateUrl:"finalProtocol/higher/final.higher.protocol.view.html",controller:"FinalHigherProtocolEditController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}],entity:["QueryUtils","$route",function(a,b){return a.endpoint("/finalHigherProtocols").get({id:b.current.params.id}).$promise}]},data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_LOPPROTOKOLL]}})}]),angular.module("hitsaOis").controller("FinalVocationalProtocolListController",["$scope","$route","QueryUtils","DataUtils","Classifier","$q","dialogService","message","$location",function(a,b,c,d,e,f,g,h,i){function j(){return(a.auth.isTeacher()||a.auth.isAdmin())&&-1!==a.auth.authorizedRoles.indexOf("ROLE_OIGUS_M_TEEMAOIGUS_LOPPROTOKOLL")}a.auth=b.current.locals.auth,a.criteria={},a.criteria.status="PROTOKOLL_STAATUS_S";var k="/finalVocationalProtocols";a.load=function(){return a.searchForm.$valid?void a.loadData():(h.error("main.messages.form-has-errors"),!1)},a.formState={canCreateProtocol:j()};var l=e.valuemapper({status:"PROTOKOLL_STAATUS"});c.createQueryForm(a,k,{order:"14 desc"},l.objectmapper),angular.isDefined(a.criteria.status)||(a.criteria.status="PROTOKOLL_STAATUS_S");var m=a.$watch("criteria.studyYear",function(b){angular.isNumber(b)&&(m(),f.all(l.promises).then(a.loadData))});a.$watch("criteria.moduleObject",function(){a.criteria.module=a.criteria.moduleObject?a.criteria.moduleObject.id:null})}]),angular.module("hitsaOis").controller("FinalVocationalProtocolNewController",["$scope","$route","$location","QueryUtils","Classifier","message","ArrayUtils",function(a,b,c,d,e,f,g){var h="/finalVocationalProtocols";a.auth=b.current.locals.auth,a.formState={selectedStudents:[],curriculumVersions:d.endpoint(h+"/curriculumVersions/").query(),isFinalThesis:"thesis"===b.current.params.moduleType?!0:!1},a.auth.isTeacher()&&(a.formState.teacher=a.auth.teacher);var i=e.valuemapper({status:"OPPURSTAATUS"});a.curriculumVersionChange=function(){a.formState.curriculumVersionOccupationModule=void 0,a.formState.curriculumVersionOccupationModules=d.endpoint(h+"/occupationModules/"+a.formState.curriculumVersion).query()},a.curriculumVersionOccupationModuleChange=function(){var c=d.endpoint(h+"/occupationModule/"+b.current.params.moduleType+"/"+a.formState.studyYear+"/"+a.formState.curriculumVersionOccupationModule).get();a.tabledata={$promise:c.$promise},c.$promise.then(function(b){a.formState.selectedStudents=[],a.tabledata.content=i.objectmapper(b.occupationModuleStudents),b.occupationModuleStudents.forEach(function(b){"OPPURSTAATUS_O"===b.status.code&&a.formState.selectedStudents.push(b.studentId)}),b.teacher&&(a.formState.teacher=b.teacher.id)})};var j=d.endpoint(h);a.submit=function(){if(!a.finalProtocolNewForm.$valid)return f.error("main.messages.form-has-errors"),a.finalProtocolNewForm.$setSubmitted(),!1;if(g.isEmpty(a.formState.selectedStudents))return void f.error("finalProtocol.error.noStudents");var b={};b.protocolVdata={curriculumVersionOccupationModule:a.formState.curriculumVersionOccupationModule,curriculumVersion:a.formState.curriculumVersion,studyYear:a.formState.studyYear,teacher:a.formState.teacher},b.protocolStudents=a.formState.selectedStudents.map(function(a){return{studentId:a}}),b.isFinalThesis=a.formState.isFinalThesis,new j(b).$save().then(function(a){f.info("main.messages.create.success"),c.url(h+"/"+a.id+"/edit?_noback")})["catch"](angular.noop)}}]),angular.module("hitsaOis").controller("FinalVocationalProtocolEditController",["$scope","$route","$filter","$q","QueryUtils","Classifier","ProtocolUtils","VocationalGradeUtil","oisFileService","config","message","dialogService","$location",function(a,b,c,d,e,f,g,h,i,j,k,l,m){function n(b){d.all(u.promises).then(function(){a.finalProtocolForm.$setPristine(),a.protocol=u.objectmapper(b),a.savedStudents=angular.copy(a.protocol.protocolStudents),a.protocol.finalDate&&(a.committees=e.endpoint(t+"/committees").query({finalDate:a.protocol.finalDate})),a.protocol.committee&&(a.committeeMembers=a.protocol.committee.members,a.committeeMembers.forEach(function(b){-1!==a.protocol.presentCommitteeMembers.indexOf(b.id)&&(b.isPresent=!0)}),a.protocol.committee=a.protocol.committee.id),a.getUrl=i.getUrl,o(),a.formState={canEditProtocol:g.canEditProtocol(a.auth,a.protocol),canAddDeleteStudents:g.canAddDeleteStudents(a.auth,a.protocol),canConfirm:g.canConfirm(a.auth,a.protocol),canChangeConfirmedProtocolGrade:g.canChangeConfirmedProtocolGrade(a.auth,a.protocol),protocolPdfUrl:j.apiUrl+t+"/"+b.id+"/print/protocol.pdf"}})}function o(){a.protocol.protocolStudents.forEach(function(a){a.occupations||(a.occupations=[]),a.curriculumOccupations.forEach(function(b){b.partOccupationCode?a.occupations[b.partOccupationCode]={code:b.partOccupationCode,certificateNr:b.certificateNr,ceritificateId:b.studentOccupationCertificateId,granted:!0}:b.partOccupationCode||(a.occupations[b.occupationCode]={code:b.occupationCode,certificateNr:b.certificateNr,ceritificateId:b.studentOccupationCertificateId,granted:!0})})})}function p(){for(var b=0;b<a.committees.length;b++)if(a.committees[b].id=a.protocol.committee)return!0;return!1}function q(){return a.finalProtocolForm.$valid?!0:(k.error("main.messages.form-has-errors"),a.finalProtocolForm.$setSubmitted(),!1)}function r(b){var c=a.protocol.protocolStudents;return c.forEach(function(a){for(var b=[],c=Object.keys(a.occupations),d=0;d<c.length;d++)a.occupations[c[d]].granted&&b.push(c[d]);a.occupationCodes=b}),c}function s(a){var b=[];if(a)for(var c=0;c<a.length;c++)a[c].isPresent&&b.push({committeeMemberId:a[c].id});return b}var t="/finalVocationalProtocols";a.gradeUtil=h,a.auth=b.current.locals.auth;var u=f.valuemapper({grade:"KUTSEHINDAMINE",status:"PROTOKOLL_STAATUS",studyLevel:"OPPEASTE"}),v=f.valuemapper({journalResults:"KUTSEHINDAMINE",status:"OPPURSTAATUS"}),w=["KUTSEHINDAMINE_1","KUTSEHINDAMINE_X"],x=["KUTSEHINDAMINE_X"],y=f.queryForDropdown({mainClassCode:"KUTSEHINDAMINE"});a.formState={},y.$promise.then(function(c){a.grades=c.filter(function(a){return b.current.locals.isView?-1===x.indexOf(a.code):-1===w.indexOf(a.code)})}),a.gradeChanged=function(b){if(b){var d=c("filter")(a.savedStudents,{id:b.id},!0)[0];d.grade!==b.grade?(a.finalProtocolForm.$setSubmitted(),b.gradeHasChanged=!0):(b.gradeHasChanged=!1,d.addInfo?b.addInfo=d.addInfo:b.addInfo=null)}a.formState.canConfirm=g.canConfirm(a.auth,a.protocol)},a.addInfoChanged=function(){a.formState.canConfirm=g.canConfirm(a.auth,a.protocol)},b.current.locals.entity?n(b.current.locals.entity):a.protocol&&loadGradesSelect(),a.selectedFinalDateChanged=function(){e.endpoint(t+"/committees").query({finalDate:a.protocol.finalDate}).$promise.then(function(b){a.committees=b,a.protocol.committee&&!p()&&(a.protocol.committee=null,a.committeeMembers=null)})},a.selectedCommitteeChanged=function(){a.protocol.committee?e.endpoint("/committees").get({id:a.protocol.committee}).$promise.then(function(b){a.committeeMembers=b.members}):a.committeeMembers=null},a.deleteProtocolStudent=function(b){l.confirmDialog({prompt:"finalProtocol.prompt.deleteStudent"},function(){var c=e.endpoint(t+"/"+a.protocol.id+"/removeStudent"),d=new c(b);d.$delete().then(function(a){k.info("main.messages.delete.success"),n(a)})["catch"](angular.noop)})},a.addProtocolStudents=function(){l.showDialog("finalProtocol/templates/final.protocol.add.student.dialog.html",function(b){b.selectedStudents=[];var c=e.endpoint(t+"/"+a.protocol.id+"/otherStudents").query();b.tabledata={$promise:c.$promise},c.$promise.then(function(a){b.tabledata.content=v.objectmapper(a)})},function(b){if(!q())return!1;if(0===b.selectedStudents.length)return!1;var c=b.selectedStudents.map(function(a){return{studentId:a,occupations:[]}});c.forEach(function(b){a.protocol.protocolStudents.push(b)}),a.save()})},a.gradeValue=function(a){var b=u.objectmapper({grade:a}).grade;return b?b.value:void 0},a.confirm=function(){if(!q())return!1;var b={version:a.protocol.version,finalDate:a.protocol.finalDate,committeeId:a.protocol.committee,protocolCommitteeMembers:s(a.committeeMembers),protocolStudents:r(a.protocol.protocolStudents)};"LOGIN_TYPE_I"===a.auth.loginMethod?g.signBeforeConfirm(t+"/"+a.protocol.id,b,"finalProtocol.messages.confirmed",n):"LOGIN_TYPE_M"===a.auth.loginMethod&&g.mobileSignBeforeConfirm(t+"/"+a.protocol.id,b,"finalProtocol.messages.confirmed",n)};var z=e.endpoint(t);a.save=function(){r(a.protocol.protocolStudents);return q()?void new z({id:a.protocol.id,version:a.protocol.version,finalDate:a.protocol.finalDate,committeeId:a.protocol.committee,protocolCommitteeMembers:s(a.committeeMembers),protocolStudents:r(a.protocol.protocolStudents)}).$update().then(function(a){k.info("main.messages.create.success"),n(a)})["catch"](angular.noop):!1},a["delete"]=function(){l.confirmDialog({prompt:"finalProtocol.prompt.delete"},function(){new z(a.protocol).$delete().then(function(){k.info("finalProtocol.messages.deleted"),m.path(t)})["catch"](angular.noop)})}}]),angular.module("hitsaOis").config(["$routeProvider","USER_ROLES",function(a,b){a.when("/finalVocationalProtocols",{templateUrl:"finalProtocol/vocational/final.vocational.protocol.list.html",controller:"FinalVocationalProtocolListController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}]},data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_LOPMOODULPROTOKOLL]}}).when("/finalVocationalProtocols/:moduleType/new",{templateUrl:"finalProtocol/vocational/final.vocational.protocol.new.html",controller:"FinalVocationalProtocolNewController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}]},data:{authorizedRoles:[b.ROLE_OIGUS_M_TEEMAOIGUS_LOPMOODULPROTOKOLL]}}).when("/finalVocationalProtocols/:id/edit",{templateUrl:"finalProtocol/vocational/final.vocational.protocol.edit.html",controller:"FinalVocationalProtocolEditController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}],entity:["QueryUtils","$route",function(a,b){return a.endpoint("/finalVocationalProtocols").get({id:b.current.params.id}).$promise}]},data:{authorizedRoles:[b.ROLE_OIGUS_M_TEEMAOIGUS_LOPMOODULPROTOKOLL]}}).when("/finalVocationalProtocols/:id/view",{templateUrl:"finalProtocol/vocational/final.vocational.protocol.view.html",controller:"FinalVocationalProtocolEditController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}],entity:["QueryUtils","$route",function(a,b){return a.endpoint("/finalVocationalProtocols").get({id:b.current.params.id}).$promise}]},data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_LOPMOODULPROTOKOLL]}})}]),angular.module("hitsaOis").controller("PersonsEditController",["$location","$route","$scope","$rootScope","dialogService","DataUtils","message","PersonService","QueryUtils",function(a,b,c,d,e,f,g,h,i){function j(){f.convertStringToDates(c.person,["birthdate"]),c.users=c.person.users,c.person.users=null,c.person.idcode&&11===c.person.idcode.length&&(c.person.sex=f.sexFromIdcode(c.person.idcode),c.person.birthdate=f.birthdayFromIdcode(c.person.idcode),c.idcodeReadonly=!0),c.users&&h.usersAfterLoad(c.users)}function k(){l||(c.person.firstname="",c.person.lastname="",c.person.email="",c.person.phone="")}var l=b.current.params.id,m="/persons",n=i.endpoint(m);c.auth=b.current.locals.auth,c.maxDate=new Date,c.lookupPerson=function(b){l?(c.person.idcode=void 0,g.error("person.exists")):(a.path(m+"/"+b.id+"/edit"),g.info("person.exists"))},c.lookupFailure=function(){c.person.sex=f.sexFromIdcode(c.person.idcode),c.person.birthdate=f.birthdayFromIdcode(c.person.idcode),k()},c.cleanReadOnly=function(){k(),c.person.sex=void 0,c.person.birthdate=void 0},l?c.person=n.get({id:l},j):c.person=new n,c.orderValue=function(a){return c.currentLanguageNameField(a.role)},c.personBack=function(){c.users&&c.users.length>0||c.auth.isMainAdmin()||!c.person.id?d.back("#"+m):e.confirmDialog({prompt:"person.back"},function(){d.back("#"+m)})},c.update=function(){c.personForm.$setSubmitted(),c.personForm.$valid&&(c.person.id?c.person.$update().then(g.updateSuccess):c.person.$save().then(function(b){a.url(m+"/"+b.id+"/edit?_noback"),g.info("main.messages.create.success")}))},c["delete"]=h.deletePerson}]).controller("PersonsViewController",["$scope","$route","PersonService","QueryUtils",function(a,b,c,d){var e=b.current.params.id,f=d.endpoint("/persons");a.auth=b.current.locals.auth;var g=function(){c.usersAfterLoad(a.person.users),a.users=a.person.users};a.orderValue=function(b){return a.currentLanguageNameField(b.role)},a.person=f.get({id:e},g),a["delete"]=c.deletePerson}]).factory("PersonService",["$location","Classifier","DataUtils","dialogService","message",function(a,b,c,d,e){var f=b.valuemapper({role:"ROLL"}),g="/persons",h=function(b){d.confirmDialog({prompt:"person.deleteconfirm"},function(){b.$delete().then(function(){e.info("main.messages.delete.success"),a.url(g+"?_noback")})})},i=function(a){a&&f.objectmapper(a),c.convertStringToDates(a,["validThru","validFrom"]);for(var b=moment(),d=0;d<a.length;d++){var e=a[d];e.valid=(!e.validFrom||moment(e.validFrom).isSameOrBefore(b,"day"))&&(!e.validThru||moment(e.validThru).isSameOrAfter(b,"day"))}};return{usersAfterLoad:i,deletePerson:h}}]),angular.module("hitsaOis").config(["$routeProvider","USER_ROLES",function(a,b){a.when("/persons",{templateUrl:"persons/persons.search.html",controller:"SimpleListController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}],clMapping:function(){return{role:"ROLL"}},params:function(){return{order:"p.lastname,p.firstname"}},url:function(){return"/users"}},data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_KASUTAJA]}}).when("/persons/new",{templateUrl:"persons/persons.edit.html",controller:"PersonsEditController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}]},authorizedRoles:[b.ROLE_OIGUS_M_TEEMAOIGUS_KASUTAJA]}).when("/persons/:person/users/new",{templateUrl:"persons/users.edit.html",controller:"UsersEditController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}]},authorizedRoles:[b.ROLE_OIGUS_M_TEEMAOIGUS_KASUTAJA]}).when("/persons/:person/users/:user/edit",{templateUrl:"persons/users.edit.html",controller:"UsersEditController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}]},authorizedRoles:[b.ROLE_OIGUS_M_TEEMAOIGUS_KASUTAJA]}).when("/persons/:person/users/:user",{templateUrl:"persons/users.view.html",controller:"UsersViewController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}]},authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_KASUTAJA]}).when("/persons/:id/edit",{templateUrl:"persons/persons.edit.html",controller:"PersonsEditController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}]},authorizedRoles:[b.ROLE_OIGUS_M_TEEMAOIGUS_KASUTAJA]}).when("/persons/:id",{templateUrl:"persons/persons.view.html",controller:"PersonsViewController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}]},authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_KASUTAJA]})}]),angular.module("hitsaOis").controller("UsersEditController",["$location","$q","$rootScope","$route","$scope","dialogService","Classifier","message","QueryUtils","ArrayUtils","AuthService",function(a,b,c,d,e,f,g,h,i,j,k){function l(a){a&&(r[e.user.role]=e.objects.reduce(function(b,c){var d=c.code;return b[d]=e.permissions.reduce(function(b,c){var e=c.code;return b[e]=-1!==(a[d]||[]).indexOf(e),b},{}),b},{}))}function m(){var a=[];for(var b in e.objectsForRole)a.push(e.objectsForRole[b].code);return a}function n(){var a=m();for(var b in e.multiSelects){e.multiSelects[b]=!0;for(var c in e.rights)if(j.contains(a,c)&&k.isValidRolePermission(e.user.role,c,b)&&!e.rights[c][b]){e.multiSelects[b]=!1;break}}}var o=d.current.params.person,p=d.current.params.user,q=i.endpoint("/persons/"+o+"/users");e.auth=d.current.locals.auth,e.multiSelects={OIGUS_V:!1,OIGUS_M:!1,OIGUS_K:!1},e.noSchool=["ROLL_P","ROLL_V"],e.filterValues=["ROLL_L","ROLL_O","ROLL_T","ROLL_X"],e.auth.isMainAdmin()||e.filterValues.push("ROLL_P"),e.auth.isAdmin()&&e.filterValues.push("ROLL_V"),e.objects=g.queryForDropdown({mainClassCode:"TEEMAOIGUS"}),e.permissions=g.queryForDropdown({mainClassCode:"OIGUS"}),e.userRoleDefaults=i.endpoint("/users/rolesDefaults").search();var r={};e.multiSelectPermission=function(a,b){var c=m();for(var d in e.rights)j.contains(c,d)&&(e.rights[d][a]=k.isValidRolePermission(e.user.role,d,a)?b:!1)},e.showPermission=function(a,b){return k.isValidRolePermission(e.user.role,a,b)},e.roleChanged=function(){var a=e.user.role;-1!==e.noSchool.indexOf(a)&&(e.user.school=null);var b=e.userRoleDefaults.defaultRights[a]||{};e.objectsForRole=e.objects.filter(function(a){return b[a.code]}),r[a]||l(b),e.rights=r[a],n()},e["delete"]=function(){f.confirmDialog({prompt:"user.deleteconfirm"},function(){e.user.$delete().then(function(){h.info("main.messages.delete.success"),c.back("#/persons/"+o)})})},e.update=function(){if(e.userForm.$setSubmitted(),e.userForm.$valid){var b=function(a){return a.code};e.user.rights=e.objectsForRole.reduce(function(a,c){var d=c.code;return a[d]=e.permissions.filter(function(a){return e.rights[d][a.code]}).map(b),a},{}),e.user.id?e.user.$update().then(h.updateSuccess).then(function(){l(e.user.rights)}):e.user.$save().then(function(b){a.url("/persons/"+b.person.id+"/users/"+b.id+"/edit?_noback"),h.info("main.messages.create.success")})}},p?e.user=q.get({id:p}):e.user=q.search(),b.all([e.objects.$promise,e.permissions.$promise,e.userRoleDefaults.$promise,e.user.$promise]).then(function(){l(e.user.rights),e.roleChanged()})}]).controller("UsersViewController",["$q","$route","$scope","Classifier","QueryUtils","AuthService",function(a,b,c,d,e,f){var g=b.current.params.person,h=b.current.params.user,i=e.endpoint("/persons/"+g+"/users");c.objects=d.queryForDropdown({mainClassCode:"TEEMAOIGUS"}),c.permissions=d.queryForDropdown({mainClassCode:"OIGUS"}),c.userRoleDefaults=e.endpoint("/users/rolesDefaults").search(),c.user=i.get({id:h}),c.showPermission=function(a,b){return f.isValidRolePermission(c.user.role,a,b)},a.all([c.objects.$promise,c.permissions.$promise,c.userRoleDefaults.$promise,c.user.$promise]).then(function(){var a=c.userRoleDefaults.defaultRights[c.user.role]||{};c.objects=c.objects.filter(function(b){return a[b.code]})})}]),angular.module("hitsaOis").controller("VocationalCurriculumController",["$scope","Classifier","dialogService","ClassifierConnect","ArrayUtils","message","oisFileService","QueryUtils","$route","DataUtils","$location","Curriculum","$q","config","$rootScope","Session",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){function q(){X?h.endpoint("/curriculum/schoolDepartments/"+X).query().$promise.then(function(b){a.schoolDepartments=b,a.vocationalCurriculumForm&&a.vocationalCurriculumForm.$setPristine()}):B()}function r(b){aa(b,a)}function s(){h.endpoint("/curriculum/studyLevels").query({curriculum:X,isHigher:!1}).$promise.then(function(b){a.schoolOrigStudyLevel=b})}function t(a){a.occupationsCount=0;var b=a.stateCurriculumOccupations;b.forEach(function(b){a.selectedStateCurriculumOccupations[b.occupation.code]&&a.occupationsCount++}),a.partOccupationsCount=0,b.forEach(function(b){b.partOccupations.forEach(function(b){a.selectedStateCurriculumPartOccupations[b.code]&&a.partOccupationsCount++})}),a.occupationsAndPartOccupationsCount=a.occupationsCount+a.partOccupationsCount}function u(){a.curriculum.draft="OPPEKAVA_LOOMISE_VIIS_KUTSE"}function v(){a.vocationalCurriculumForm.isOccupation.$setPristine();var b=a.vocationalCurriculumForm.$$controls.find(function(a){return a.$dirty});b||a.vocationalCurriculumForm.$setPristine()}function w(a){var b=angular.copy(a);return b.occupation=b.occupation.code,b.partOccupations&&(b.partOccupations=b.partOccupations.map(function(a){return a.code})),b.specialities&&(b.specialities=b.specialities.map(function(a){return a.code})),b}function x(b){return a.formState.readOnly||a.formState.notEditableBasicData&&"KUTSEMOODUL_V"!==b.module}function y(b){var c="";c=b?x(b)?"/vocationalCurriculum/"+a.curriculum.id+"/module/"+b.id+"/view":"/vocationalCurriculum/"+a.curriculum.id+"/module/"+b.id+"/edit":"/vocationalCurriculum/"+a.curriculum.id+"/module/new",k.path(c)}function z(){return a.curriculum.ehisSchool?a.curriculum.ehisSchool:p.school&&p.school.ehisSchool?p.school.ehisSchool:null}function A(){var b=[];b.push(z()),angular.isArray(a.curriculum.jointPartners)&&(a.validation.jointPartnersLength=a.curriculum.jointPartners.length,a.curriculum.jointPartners.forEach(function(a){a.abroad||b.push(a.ehisSchool)})),a.selectedJointPartners=b}function B(){h.endpoint("/curriculum/schoolDepartments").query({ehisShools:a.selectedJointPartners,curriculum:X}).$promise.then(function(b){if(a.schoolDepartments=b,a.curriculum.schoolDepartments){var c=b.map(function(a){return a.id});a.curriculum.schoolDepartments=a.curriculum.schoolDepartments.filter(function(a){return e.includes(c,a)})}})}function C(){a.curriculum.abroad=!1,a.curriculum.jointPartners=[],a.curriculum.supervisor=void 0,a.curriculum.jointMentor=void 0,a.curriculum.contractEt=void 0,a.curriculum.contractEn=void 0}function D(){return e.isEmpty(a.curriculum.jointPartners)&&(angular.isDefined(a.curriculum.supervisor)||angular.isDefined(a.curriculum.contractEt)||angular.isDefined(a.curriculum.contractEn))}function E(){if(a.curriculum.joint){if(ia(),D()){var b={abroad:a.curriculum.abroad,supervisor:a.curriculum.supervisor,contractEt:a.curriculum.contractEt,contractEn:a.curriculum.contractEn};a.curriculum.jointPartners.push(b)}}else a.curriculum.jointMentor=void 0,a.curriculum.jointPartners=[]}function F(b){return e.contains(a.curriculum.addresses.map(function(a){return a.addressOv}),b.addressOv)}function G(){angular.isArray(a.curriculum.addresses)&&(a.validation.addressesLength=a.curriculum.addresses.length)}function H(){var b=a.curriculum.modules.filter(function(a){return"KUTSEMOODUL_V"!==a.module}),c=b.reduce(function(a,b){return a+=b.credits},0);return a.curriculum.optionalStudyCredits+c===a.curriculum.credits}function I(){for(var b=a.curriculum.curriculumOccupations,c=0;c<b.length;c++)if(!a.isOccutationsCreditsValid(b[c]))return!1;return!0}function J(b){return a.curriculum.modules.filter(function(a){return"KUTSEMOODUL_V"!==a.module}).filter(function(a){var c=a.occupations.map(function(a){return a});return e.includes(c,b)}).reduce(function(a,b){return b.isAdditional?a:a+b.credits},0)}function K(a){if(e.isEmpty(a.partOccupations))return 0;for(var b=0,c=a.partOccupations,d=0;d<c.length;d++)b+=J(c[d].code);return b}function L(){for(var b=a.curriculum.curriculumOccupations,c=0;c<b.length;c++)if(!e.isEmpty(b[c]).specialities)for(var d=b[c].specialities,f=0;f<d.length;f++)if(!a.isSpetsOccupationValid(d[f],b[c]))return!1;return!0}function M(b){if(e.isEmpty(b.partOccupations))return 0;for(var c=0,d=b.partOccupations.map(function(a){return a.code}),f=a.curriculum.modules.filter(function(a){return"KUTSEMOODUL_V"!==a.module&&!a.isAdditional}),g=0;g<f.length;g++){var h=f[g].occupations.map(function(a){return a}),i=e.intersection(h,d);if(0!==i.length){var j=e.includes(h,b.occupation.code)?1:0;c+=f[g].credits*(i.length+j-1)}}return c}function N(b){if(a.vocationalCurriculumForm.$setSubmitted(),!a.vocationalCurriculumForm.$valid){var c=b&&b.errorMessage?b.errorMessage:"main.messages.form-has-errors";return f.error(c),!1}if(a.strictValidation()){if(a.occupationRequired()&&e.isEmpty(a.curriculum.curriculumOccupations))return f.error("curriculum.error.noOccupation"),!1;if(e.isEmpty(a.curriculum.modules))return f.error("curriculum.error.noModule"),!1;if(!e.isEmpty(a.curriculum.curriculumOccupations)&&!a.allOccupationsHavePModule())return f.error("curriculum.error.noPModules"),!1;if(!e.isEmpty(a.curriculum.curriculumOccupations)&&!a.allModulesHaveOccupation())return f.error("curriculum.error.notAllModulesHaveOccupation"),!1;if(e.isEmpty(a.curriculum.curriculumOccupations)&&!T())return f.error("curriculum.error.noBasicModule"),!1;if(e.isEmpty(a.curriculum.curriculumOccupations)&&!H())return f.error("curriculum.error.modulesCredits"),!1;if(!e.isEmpty(a.curriculum.curriculumOccupations)&&!I())return f.error("curriculum.error.occupationsCredits"),!1;if(!e.isEmpty(a.curriculum.curriculumOccupations)&&!L())return f.error("curriculum.error.spetsOccupationsCredits"),!1;if(!a.hasRequiredFiles())return f.error("curriculum.error.noSummaryFile"),!1;if(!a.hasVerifiedVersions())return f.error("curriculum.error.noImplementationPlan"),!1}return!0}function O(b){if(N(b)){ia(),E();var c=new _(ba(a.curriculum));angular.isDefined(a.curriculum.id)?c.$update().then(function(c){var d=b&&b.updateSuccess?b.updateSuccess:"main.messages.create.success";f.info(d),a.vocationalCurriculumForm.$setPristine(),aa(c,a)},function(){r(c)}):(c.newFiles=c.files,c.files=void 0,c.$save().then(function(){f.info("main.messages.create.success"),a.vocationalCurriculumForm.$setPristine(),k.path("/vocationalCurriculum/"+c.id+"/edit")},function(){r(c)}))}}function P(b,c){new b(a.curriculum).$update().then(function(b){f.info(c.updateSuccess),aa(b,a),a.vocationalCurriculumForm.$setPristine(),Q()})}function Q(){a.formState.readOnly||k.path("/vocationalCurriculum/"+a.curriculum.id+"/view")}function R(){_.get({id:a.curriculum.id}).$promise.then(function(b){a.curriculum.modules=b.modules})}function S(){return a.curriculum.modules.filter(function(a){return"KUTSEMOODUL_P"===a.module})}function T(){return!e.isEmpty(S())}function U(b){return a.curriculum.modules.filter(function(a){var c=a.occupations.map(function(a){return a});return"KUTSEMOODUL_P"===a.module&&e.includes(c,b)})}var V="/curriculum",W=b.valuemapper({occupations:"KUTSE",partOccupations:"OSAKUTSE",specialities:"SPETSKUTSE"});a.auth=i.current.locals.auth,a.school=a.auth?a.auth.school:null;var X=i.current.params.id,Y=h.endpoint("/curriculumOccupation"),Z=Object.freeze({KUTSEMOODUL_P:0,KUTSEMOODUL_Y:1,KUTSEMOODUL_L:2,KUTSEMOODUL_V:3});a.publicUrl=n.apiUrl+"/public/curriculum/"+X+"?format=json",a.maxStydyYears={max:100},a.STATUS=l.STATUS;var $;a.formState={readOnly:-1!==i.current.$$route.originalPath.indexOf("view")},q();var _=h.endpoint(V),aa=function(b,c){a.formState.strictValidation=!1;var e=[],f=angular.extend({},b);if(a.isDraftEmployerSupportLetter="OPPEKAVA_LOOMISE_VIIS_TOOANDJA"===f.draft,f.jointPartners&&1===f.jointPartners.length&&!(f.jointPartners[0].ehisSchool||f.jointPartners[0].nameEt||f.jointPartners[0].nameEn)&&(f.jointPartners=[]),a.formState.notEditableBasicData=f.status===l.STATUS.VERIFIED,a.formState.sentToEhis="OPPEKAVA_EHIS_STAATUS_A"===f.ehisStatus||"OPPEKAVA_EHIS_STAATUS_M"===f.ehisStatus,
j.convertStringToDates(f,["validFrom","validThru","approval"]),angular.isArray(b.jointPartners)&&b.jointPartners.length>0&&(f.supervisor=b.jointPartners[0].supervisor,f.contractEt=b.jointPartners[0].contractEt,f.contractEn=b.jointPartners[0].contractEn),f.studyPeriodMonths=b.studyPeriod%12,f.studyPeriodYears=Math.floor(b.studyPeriod/12),angular.isString(b.iscedClass)){var g=m.defer();d.queryAll({classifierCode:b.iscedClass,connectClassifierMainClassCode:"ISCED_SUUN"},function(a){a.length>0&&(f.fieldOfStudy=a[0].connectClassifier.code),d.queryAll({classifierCode:f.fieldOfStudy,connectClassifierMainClassCode:"ISCED_VALD"},function(a){0===a.length?g.reject():(f.areaOfStudy=a[0].connectClassifier.code,g.resolve())})}),e.push(g.promise)}m.all(e).then(function(){angular.extend(c.curriculum,f),G()})},ba=function(a){var b=angular.extend({},a);return a.studyPeriodMonths=a.studyPeriodMonths?a.studyPeriodMonths:0,b.studyPeriod=a.studyPeriodMonths+12*a.studyPeriodYears,b},ca={selectedOccupationsPartOccupations:[],modules:[],occupations:[],files:[],addresses:[],jointPartners:[],studyLanguageClassifiers:[],studyFormClassifiers:[],abroad:!1},da={validFrom:new Date,status:l.STATUS.ENTERING,consecution:"OPPEKAVA_TYPE_E",optionalStudyCredits:0,studyPeriodMonths:0,draft:"OPPEKAVA_LOOMISE_VIIS_KUTSE",higher:!1,joint:!1,abroad:!1,occupation:!1};a.curriculum=angular.extend({},ca),a.validation={occupationsLength:0},a.curriculumPdfUrl=n.apiUrl+V+"/print/"+X+"/general.pdf",a.curriculumModulesPdfUrl=n.apiUrl+V+"/print/"+X+"/modules.pdf",a.curriculumCompetencesPdfUrl=n.apiUrl+V+"/print/"+X+"/competences.pdf",a.$watchCollection("curriculum.curriculumOccupations",function(){a.validation.occupationsLength=a.curriculum&&a.curriculum.curriculumOccupations?a.curriculum.curriculumOccupations.length:0,a.curriculum&&"OPPEKAVA_LOOMISE_VIIS_TOOANDJA"===a.curriculum.draft&&(a.validation.occupationsLength=1)}),a.schoolOrigStudyLevel=[],s();var ea=angular.isDefined(i.current.locals.entity)?i.current.locals.entity.id:void 0;a.codeUniqueQuery={url:"/curriculum/unique/code",id:ea},a.merCodeUniqueQuery={url:"/curriculum/unique/merCode",id:ea},angular.isDefined(i.current.locals.entity)?(aa(i.current.locals.entity,a),$=h.endpoint("/curriculum/"+i.current.locals.entity.id+"/file"),o.removeLastUrlFromHistory(function(a){return a==="#/vocationalCurriculum/"+i.current.locals.entity.id+"/view"||a==="#/vocationalCurriculum/"+i.current.locals.entity.id+"/edit"||"#/vocationalCurriculum/new"===a})):angular.extend(a.curriculum,da),a.draftOptions={},b.queryForDropdown({mainClassCode:"OPPEKAVA_LOOMISE_VIIS"},function(c){a.draftOptions=b.toMap(c)}),a.draftSelected=function(){"OPPEKAVA_LOOMISE_VIIS_RIIKLIK"===a.curriculum.draft?c.showDialog("vocationalCurriculum/dialog/state.curriculum.selection.dialog.html",function(b){b.selectedStateCurriculumOccupations={},b.selectedStateCurriculumPartOccupations={},b.selectedStateCurriculumSpecialities={},h.endpoint("/stateCurriculum/all").query({sort:a.currentLanguageNameField()+",asc",status:[l.STATUS.VERIFIED]}).$promise.then(function(a){b.stateCurriculums=a}),b.stateCurriculumSelected=function(a){b.selectedStateCurriculumOccupations={},b.selectedStateCurriculumPartOccupations={},b.selectedStateCurriculumSpecialities={},angular.isNumber(a)&&h.endpoint("/stateCurriculum").get({id:a}).$promise.then(function(a){W.objectmapper(a).$promise.then(function(a){var c=[];angular.isArray(a.occupations)&&a.occupations.forEach(function(a){var b={occupation:a};ga(b),c.push(b)}),b.stateCurriculumOccupations=c}),b.stateCurriculum=a}),b.occupationsCount=0,b.partOccupationsCount=0,b.occupationsAndPartOccupationsCount=0},b.countOccupationsAndPartOccupationsSelected=function(){t(b)},b.selectedSpecialitiesCount={},b.occupationSelected=function(a){var c=b.selectedStateCurriculumOccupations[a]===!0;b.stateCurriculumOccupations.forEach(function(d){d.occupation.code===a&&(d.partOccupations.forEach(function(a){b.selectedStateCurriculumPartOccupations[a.code]=c}),angular.isArray(d.specialities)&&d.specialities.length>0&&(b.selectedSpecialitiesCount[a]=c?0:void 0,d.specialities.forEach(function(a){b.selectedStateCurriculumSpecialities[a.code]=!1})))}),t(b)},b.specialitySelected=function(a,c){var d=b.selectedStateCurriculumSpecialities[c]===!0;if(angular.isNumber(b.selectedSpecialitiesCount[a])){var e=d?1:-1;b.selectedSpecialitiesCount[a]+=e}}},function(a){var b={id:a.stateCurriculum.id,occupations:[]};angular.isArray(a.stateCurriculumOccupations)&&a.stateCurriculumOccupations.forEach(function(c){var d;a.selectedStateCurriculumOccupations[c.occupation.code]===!0&&(d={occupation:c.occupation.code,specialities:[]},b.occupations.push(d)),angular.isArray(c.partOccupations)&&c.partOccupations.forEach(function(c){if(a.selectedStateCurriculumPartOccupations[c.code]===!0&&!d){var e={occupation:c.code};b.occupations.push(e)}}),angular.isArray(c.specialities)&&c.specialities.forEach(function(e){a.selectedStateCurriculumSpecialities[e.code]===!0&&(d||(d={occupation:c.occupation.code,specialities:[],occupationGrant:!1},b.occupations.push(d)),d.specialities.push(e.code))})}),h.endpoint("/curriculum/copy/statecurriculum").put(b).$promise.then(function(a){f.info("main.messages.create.success"),k.path("/vocationalCurriculum/"+a.id+"/edit")},u)},u):"OPPEKAVA_LOOMISE_VIIS_KOOL"===a.curriculum.draft?c.showDialog("vocationalCurriculum/dialog/school.curriculum.selection.dialog.html",function(a){a.curriculumSelected=[],a.fromStorage=function(){return{}},h.createQueryForm(a,"/curriculum"),a.toStorage=angular.noop;var b=a.getCriteria;a.getCriteria=function(){return angular.extend(b(),{isVocational:!0,isPartnerSchool:!1})},a.loadData()},function(a){var b=h.endpoint("/curriculum/copy/curriculum"),c=new b({id:a.curriculumSelected[0].id});c.$update().then(function(a){f.info("main.messages.create.success"),k.path("/vocationalCurriculum/"+a.id+"/edit")},u)},u):"OPPEKAVA_LOOMISE_VIIS_TOOANDJA"===a.curriculum.draft&&(a.curriculum.curriculumOccupations=[],a.curriculum.occupation=!1),a.isDraftEmployerSupportLetter="OPPEKAVA_LOOMISE_VIIS_TOOANDJA"===a.curriculum.draft};var fa=function(){var b={};angular.isArray(a.curriculum.curriculumOccupations)&&a.curriculum.curriculumOccupations.forEach(function(a){b[a.occupation.code]=!0,angular.isArray(a.partOccupations)&&a.partOccupations.forEach(function(a){b[a.code]=!0}),angular.isArray(a.specialities)&&a.specialities.forEach(function(a){b[a.code]=!0})}),angular.isArray(a.curriculum.modules)&&a.curriculum.modules.forEach(function(a){a.occupations=a.occupations.filter(function(a){return b[a]===!0})})};a.occupationChanged=function(){a.curriculum.curriculumOccupations=[],angular.isArray(a.curriculum.versions)&&a.curriculum.versions.forEach(function(a){a.occupationModules=[]}),fa()};var ga=function(a){angular.isDefined(a.occupation)&&d.queryAll({connectClassifierCode:a.occupation.code,classifierMainClassCode:["SPETSKUTSE","OSAKUTSE"]},function(c){var d=[],e=[];c.forEach(function(a){b.isValid(a.classifier)&&("SPETSKUTSE"===a.classifier.mainClassCode&&d.push(a.classifier),"OSAKUTSE"===a.classifier.mainClassCode&&e.push(a.classifier))}),a.specialities=d,a.partOccupations=e})};a.openOccupationDialog=function(b){c.showDialog("vocationalCurriculum/dialog/occupation.add.dialog.html",function(c){c.auth=a.auth,c.$watch("occupation",function(a,d){angular.isDefined(b)&&a.code!==d.code&&(c.selectedSpecialities={}),ga(c)}),c.formState={readOnly:a.formState.readOnly||a.formState.notEditableBasicData,limitedEditing:!a.occupationCanBeChanged()},c.selectedSpecialities={},angular.isDefined(b)&&(c.occupation=b.occupation,c.occupationGrant=b.occupationGrant,angular.isArray(b.specialities)&&b.specialities.forEach(function(a){c.selectedSpecialities[a.code]=!0}))},function(c){angular.isDefined(b)||(b={curriculum:X}),b.occupation=c.occupation,b.occupationGrant=c.occupationGrant?c.occupationGrant:!1,b.partOccupations=c.partOccupations,b.specialities=[],c.specialities.forEach(function(a){c.selectedSpecialities[a.code]===!0&&b.specialities.push(a)});var d=w(b);d.id?new Y(d).$update().then(function(a){f.info("main.messages.update.success"),b=a,R(),v()}):new Y(d).$save().then(function(b){f.info("main.messages.create.success"),a.curriculum.curriculumOccupations.push(b),v()})})},a.openPartOccupationsDialog=function(d){c.showDialog("vocationalCurriculum/dialog/partOccupation.add.dialog.html",function(c){m.all([h.endpoint("/autocomplete/classifiers/withparents").query({mainClassCode:"OSAKUTSE"}).$promise,h.endpoint("/autocomplete/classifiers/withparents").query({mainClassCode:"KUTSE"}).$promise]).then(function(a){c.partOccupations=a[0],c.occupations=a[1].filter(b.isValid).filter(function(a){for(var b=0;b<c.partOccupations.length;b++)if(e.includes(c.partOccupations[b].parents,a.code))return!0;return!1}),angular.isDefined(d)&&(c.partOccupationAquired=c.partOccupations.find(function(a){return a.code===d.occupation.code}),c.occupation=c.occupations.find(function(a){return e.includes(c.partOccupationAquired.parents,a.code)}))}),c.filterPartOccupations=function(a){return b.isValid(a)?c.occupation?e.includes(a.parents,c.occupation.code):!0:!1},angular.isDefined(d),c.formState={readOnly:a.formState.readOnly||!a.occupationCanBeChanged()||a.formState.notEditableBasicData}},function(b){angular.isDefined(d)||(d={occupationGrant:!1,curriculum:X}),d.occupation=b.partOccupationAquired;var c=w(d);c.id?new Y(c).$update().then(function(a){f.info("main.messages.update.success"),d=a,R(),v()}):new Y(c).$save().then(function(b){f.info("main.messages.create.success"),a.curriculum.curriculumOccupations.push(b),v()})})},a.openAddModuleDialog=function(b){!a.formState.readOnly&&a.vocationalCurriculumForm.$dirty?c.confirmDialog({prompt:"main.messages.confirmFormDataNotSaved"},function(){y(b)}):y(b)};var ha=function(){if(angular.isArray(a.curriculum.modules)){var b=l.modulesViewData(a.curriculum.modules);a.occupationModuleTypesModules=b.occupationModuleTypesModules,a.modulesWithOutOccupation=b.modulesWithOutOccupation,a.validation.mainModuleCount=0,a.curriculum.modules.forEach(function(b){"KUTSEMOODUL_P"===b.module&&a.validation.mainModuleCount++});var c={};for(var d in a.occupationModuleTypesModules)if(!angular.isDefined(c[d])&&(c[d]=0,angular.isDefined(a.occupationModuleTypesModules[d].moduleTypes)))for(var e in a.occupationModuleTypesModules[d].moduleTypes)if(angular.isArray(a.occupationModuleTypesModules[d].moduleTypes[e].modules))for(var f in a.occupationModuleTypesModules[d].moduleTypes[e].modules)c[d]+=a.occupationModuleTypesModules[d].moduleTypes[e].modules[f].credits;a.creditsPerOccupation=c}};a.$watchCollection("curriculum.modules",ha),a.openAddFileDialog=function(){c.showDialog("curriculum/dialog/file.add.dialog.html",function(a){a.fileTypeCriteria={vocational:!0}},function(b){var c=b.data;c.sendEhis=!1,c.ehis=!1,c.oisFile=g.getFromLfFile(c.file[0],function(b){c.oisFile=b;var d=new $(c);d.$save().then(function(b){f.info("main.messages.create.success"),a.curriculum.files.push(b)})})})},a.deleteFile=function(b){c.confirmDialog({prompt:"curriculum.itemDeleteConfirm"},function(){e.remove(a.curriculum.files,b);var c=new $(b);c.$delete().then(function(){f.info("main.messages.delete.success")})})},a.getUrl=g.getUrl,a.addJointPartner=function(){var b={abroad:a.curriculum.abroad};b.abroad?(b.nameEt=a.curriculum.jointPartnerForeignNameEt,b.nameEn=a.curriculum.jointPartnerForeignNameEn):b.ehisSchool=a.curriculum.jointPartnerEhisSchool,a.curriculum.jointPartners.push(b),a.curriculum.jointPartnerForeignNameEt=void 0,a.curriculum.jointPartnerForeignNameEn=void 0,A(),B()},a.validation.jointPartnersLength=0,a.$watch("curriculum.joint",function(a,b){b&&!a?(C(),A(),B()):!b&&a&&A()}),a.removejointPartner=function(b){c.confirmDialog({prompt:"curriculum.itemDeleteConfirm"},function(){e.remove(a.curriculum.jointPartners,b),a.vocationalCurriculumForm.$setDirty(),A(),B()})};var ia=function(){a.curriculum.jointPartners.forEach(function(b){b.contractEt=a.curriculum.contractEt,b.contractEn=a.curriculum.contractEn,b.supervisor=a.curriculum.supervisor})};a.clearJointPartnersFields=function(){a.curriculum.jointPartnerForeignNameEt=void 0,a.curriculum.jointPartnerForeignNameEn=void 0,a.curriculum.jointPartnerEhisSchool=void 0},a.filterEmptyJointPartners=function(a){return a.ehisSchool||a.nameEt||a.nameEn},a.addAddress=function(){return F(a.formState.address)?void f.error("curriculum.error.addressAlreadyAdded"):(a.curriculum.addresses.push(a.formState.address),a.formState.address={},void G())},a.removeAddress=function(b){c.confirmDialog({prompt:"curriculum.itemDeleteConfirm"},function(){e.remove(a.curriculum.addresses,b),a.vocationalCurriculumForm.$setDirty(),G()})},a.isSpetsOccupationValid=function(b,c){var d=J(c.occupation.code),e=J(b.code),f=K(c),g=M(c),h=d+e+f+a.curriculum.optionalStudyCredits-g===a.curriculum.credits;return h},a.isOccutationsCreditsValid=function(b){var c=J(b.occupation.code),d=K(b);return c+=d,e.isEmpty(b.specialities)||(c+=J(b.specialities[0].code)),c-=M(b),a.curriculum.credits-a.curriculum.optionalStudyCredits===c},a.hasRequiredFiles=function(){var b=a.curriculum.files;return e.isEmpty(b)?!1:!e.isEmpty(b.filter(function(a){return"EHIS_FAIL_15773"===a.ehisFile&&a.sendEhis===!0&&a.oisFile&&"application/pdf"===a.oisFile.ftype}))},a.hasVerifiedVersions=function(){var b=a.curriculum.versions;return e.isEmpty(b)?!1:!e.isEmpty(b.filter(function(a){return a.status===l.VERSION_STATUS.K}))},a.notAllModulesHaveOccupation=function(){return a.vocationalCurriculumForm.$submitted&&a.strictValidation()&&(a.occupationRequired()||!e.isEmpty(a.curriculum.curriculumOccupations))&&!a.allModulesHaveOccupation()},a.save=function(){a.formState.strictValidation=!1,setTimeout(O,0)},a["delete"]=function(){c.confirmDialog({prompt:"curriculum.deleteconfirm"},function(){new _(a.curriculum).$delete().then(function(){f.info("main.messages.delete.success"),k.path("/curriculum")})})},a.goToEditForm=function(){a.curriculum&&(a.curriculum.status===l.STATUS.VERIFIED?c.confirmDialog({prompt:"curriculum.prompt.editAccepted"},function(){k.path("/vocationalCurriculum/"+a.curriculum.id+"/edit")}):k.path("/vocationalCurriculum/"+a.curriculum.id+"/edit"))},a.canBeEdited=function(){var b=a.curriculum?a.curriculum.status:null;return a.formState.readOnly&&(b===l.STATUS.ENTERING||b===l.STATUS.PROCEEDING||b===l.STATUS.VERIFIED)},a.getStar=function(){return a.strictValidation()?"":" *"},a.strictValidation=function(){return a.curriculum&&(a.curriculum.status===l.STATUS.VERIFIED||a.curriculum.status===l.STATUS.PROCEEDING||a.formState.strictValidation)},a.saveAndProceed=function(){var b={prompt:a.formState.readOnly?"curriculum.statuschangeReadOnly.vocational.proceed":"curriculum.statuschange.vocational.proceed",errorMessage:"curriculum.error.inputFieldsNotFilledOnProcede",updateSuccess:"curriculum.success.proceed"};a.formState.strictValidation=!0,c.confirmDialog({prompt:b.prompt},function(){setTimeout(function(){if(N(b)){ba(a.curriculum,a);var c=h.endpoint("/curriculum/saveAndProceed");P(c,b)}},0)})},a.setStatusClosed=function(){var b={prompt:a.formState.readOnly?"curriculum.statuschangeReadOnly.vocational.close":"curriculum.statuschange.vocational.close",updateSuccess:"curriculum.success.closed"};c.confirmDialog({prompt:b.prompt},function(){var a=h.endpoint("/curriculum/close");P(a,b)})},a.sendToEhis=function(a){c.confirmDialog({prompt:"curriculum.ehisconfirm"},function(){var b=h.endpoint("/curriculum/sendToEhis"+(a?"/test":""));P(b,{updateSuccess:"curriculum.sentToEhis"})})},a.updateFromEhis=function(a){var b=h.endpoint("/curriculum/updateFromEhis"+(a?"/test":""));P(b,{updateSuccess:"curriculum.message.ehisStatusUpdated"})},a.isOccupationChanged=function(){if(!e.isEmpty(a.curriculum.curriculumOccupations)){var b=a.curriculum.occupation?"curriculum.prompt.hasOccupations":"curriculum.prompt.hasSubOccupations";a.curriculum.occupation=!a.curriculum.occupation,c.confirmDialog({prompt:b},function(){for(var b=0;b<a.curriculum.modules.length;b++)a.curriculum.modules[b].occupations=[];a.curriculum.curriculumOccupations=[],a.curriculum.occupation=!a.curriculum.occupation})}},b.queryForDropdown({mainClassCode:"KUTSEMOODUL"},function(b){a.moduleTypes=b,a.moduleTypes.sort(function(a,b){return Z[a.code]-Z[b.code]})}),a.getTotalCredits=function(a){return a.reduce(function(a,b){return a+b.credits},0)},a.filterEmptyModulesByType=function(a){return function(b){return b.module===a&&e.isEmpty(b.occupations)}},a.filterModulesByType=function(a,b){return function(c){var d=c.occupations;return c.module===a&&e.includes(d,b)}},a.filterTypesWithoutModules=function(a,b){return function(c){var d=b?b.filter(function(b){var d=b.occupations;return e.includes(d,a)&&b.module===c.code}):[];return!e.isEmpty(d)}},a.filterTypesWithoutEmptyModules=function(b){var c=a.curriculum.modules.filter(function(a){return e.isEmpty(a.occupations)}),d=c?c.filter(function(a){return a.module===b.code}):[];return!e.isEmpty(d)},a.removeOccupation=function(b){c.confirmDialog({prompt:"curriculum.itemDeleteConfirm"},function(){new Y(b).$delete().then(function(){f.info("main.messages.delete.success"),e.remove(a.curriculum.curriculumOccupations,b),R()})})},a.goToVersionNewForm=function(){var b="/vocationalCurriculum/"+a.curriculum.id+"/moduleImplementationPlan/new";!a.formState.readOnly&&a.vocationalCurriculumForm.$dirty?c.confirmDialog({prompt:"main.messages.confirmFormDataNotSaved"},function(){k.path(b)}):k.path(b)},a.goToImplementationPlanForm=function(b){var d=a.formState.readOnly||b.status!==l.VERSION_STATUS.S?"/vocationalCurriculum/"+a.curriculum.id+"/moduleImplementationPlan/"+b.id+"/view":"/vocationalCurriculum/"+a.curriculum.id+"/moduleImplementationPlan/"+b.id+"/edit";!a.formState.readOnly&&a.vocationalCurriculumForm.$dirty?c.confirmDialog({prompt:"main.messages.confirmFormDataNotSaved"},function(){k.path(d)}):k.path(d)},a.versionCanBeAdded=function(){return a.curriculum&&a.curriculum.canChange&&(a.curriculum.status===l.STATUS.ENTERING&&!a.formState.readOnly||a.curriculum.status===l.STATUS.PROCEEDING||a.curriculum.status===l.STATUS.VERIFIED)},a.allModulesHaveOccupation=function(){var b=a.getModulesWithoutOccupation();return e.isEmpty(b)},a.getModulesWithoutOccupation=function(){return a.curriculum.modules.filter(function(a){return e.isEmpty(a.occupations)})},a.modulesValid=function(){return e.isEmpty(a.curriculum.modules)?!1:e.isEmpty(a.curriculum.curriculumOccupations)?T()&&H():a.allModulesHaveOccupation()&&a.allOccupationsHavePModule()&&I()&&L()},a.allOccupationsHavePModule=function(){for(var b=a.curriculum.curriculumOccupations,c=0;c<b.length;c++){if(!a.occupationHasPModule(b[c].occupation.code))return!1;var d=b[c].specialities;if(!e.isEmpty(d))for(var f=0;f<d.length;f++)if(!a.occupationHasPModule(d[f].code))return!1;var g=b[c].partOccupations;if(!e.isEmpty(g))for(var h=0;h<g.length;h++)if(!a.occupationHasPModule(g[h].code))return!1}return!0},a.occupationHasPModule=function(a){return!e.isEmpty(U(a))},a.occupationRequired=function(){return"OPPEKAVA_LOOMISE_VIIS_KUTSE"===a.curriculum.draft||"OPPEKAVA_LOOMISE_VIIS_RIIKLIK"===a.curriculum.draft},a.occupationCanBeChanged=function(){return"OPPEKAVA_LOOMISE_VIIS_RIIKLIK"!==a.curriculum.draft},a.showPrintButton=function(){return angular.isDefined(a.curriculum.id)&&(a.auth.isAdmin()||a.curriculum.status===a.STATUS.VERIFIED)},a.searchTeacher=function(a){return h.endpoint("/curriculum/teachers").query({name:a}).$promise}}]),angular.module("hitsaOis").controller("VocationalCurriculumModuleImplementationPlanController",["$scope","Curriculum","Classifier","ClassifierConnect","QueryUtils","DataUtils","message","$location","$route","$q","dialogService","$routeParams","ArrayUtils","$rootScope","$http","config",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){function q(a){var b;return B.occupationModules.forEach(function(c){angular.isDefined(a)&&c.curriculumModule===a.id&&(b=c)}),b}function r(b,c){c=q(b);var d="";d=c?a.formState.readOnly?"/occupationModule/"+x.id+"/"+a.implementationPlan.id+"/"+b.id+"/"+c.id+"/view":"/occupationModule/"+x.id+"/"+a.implementationPlan.id+"/"+b.id+"/"+c.id+"/edit":"/occupationModule/"+x.id+"/"+a.implementationPlan.id+"/"+b.id+"/new",h.path(d)}function s(b){if(a.vocationalCurriculumModuleImplementationPlanForm.$setSubmitted(),!a.vocationalCurriculumModuleImplementationPlanForm.$valid){var c=b&&b.errorMessage?b.errorMessage:"main.messages.form-has-errors";return g.error(c),!1}return!0}function t(a,b){o({url:p.apiUrl+"/curriculumVersion/valid/hourscredits/"+y,method:"GET"}).then(function(c){c.data||(b.extraPrompts=[b.prompt],b.prompt="curriculum.error.themeCreditsAndHoursMismatch"),v(a,b)})}function u(a,b,c){s(b)&&(c?t(a,b):v(a,b))}function v(b,c){setTimeout(function(){k.confirmDialog({prompt:c.prompt,extraPrompts:c.extraPrompts},function(){new b(a.implementationPlan).$update().then(function(b){var d=c&&c.updateSuccess?c.updateSuccess:"main.messages.create.success";g.info(d),a.implementationPlan=b,f.convertStringToDates(a.implementationPlan,["validFrom","validThru"]),a.implementationPlan.curriculum=x.id,w(b),a.vocationalCurriculumModuleImplementationPlanForm.$setPristine()})})},0)}function w(b){a.formState.readOnly||h.path("/vocationalCurriculum/"+x.id+"/moduleImplementationPlan/"+b.id+"/view")}var x=i.current.locals.curriculum;a.initializing=!0,a.auth=i.current.locals.auth;var y=i.current.params.versionId,z=e.endpoint("/curriculumVersion"),A=Object.freeze({KUTSEMOODUL_P:0,KUTSEMOODUL_Y:1,KUTSEMOODUL_L:2,KUTSEMOODUL_V:3});a.CURRICULUM_STATUS=b.STATUS,a.VERSION_STATUS=b.VERSION_STATUS,a.formState={readOnly:-1!==i.current.$$route.originalPath.indexOf("view")};var B={curriculum:x.id,occupationModules:[]},C={status:b.VERSION_STATUS.S,validFrom:new Date,code:x.code+" - "+x.nameEt,curriculum:x.id};if(y)B=i.current.locals.curriculumVersion,a.publicUrl=p.apiUrl+"/public/curriculum/"+x.id+"/"+y+"?format=json",a.implementationPlan=B,f.convertStringToDates(a.implementationPlan,["validFrom","validThru"]),n.removeLastUrlFromHistory(function(b){return b&&-1!==b.indexOf("#/vocationalCurriculum/"+a.implementationPlan.curriculum+"/moduleImplementationPlan/")});else{var D=Math.floor(((x.studyPeriod||0)+11)/12);C.yearCapacities=Array.apply(null,{length:D}).fill(0),angular.extend(B,C),a.implementationPlan=B}a.curriculumVersionCodeUniqueQuery={id:y,url:"/curriculumVersion/unique/code"},a.curriculumId=x.id,a.studyForms=x.studyForms,a.curriculumStudyForms=x.studyForms;for(var E=[null],F=(new Date).getFullYear(),G=F-10;F+2>=G;G++)E.push(G);a.admissionYears=E,a.curriculumVersionPdfUrl=p.apiUrl+"/curriculum/print/"+y+"/curriculumVersion.pdf",a.curriculumVersionModulesPdfUrl=p.apiUrl+"/curriculum/print/"+y+"/curriculumVersionModules.pdf";var H=[];if(angular.isArray(x.modules)){var I=[];x.modules.forEach(function(a){var b={};if(angular.isString(a.module)){var d=c.get(a.module).$promise.then(function(c){angular.extend(b,a,{module:c})});H.push(d)}if(angular.isArray(a.occupations)){var e=[];a.occupations.forEach(function(a){e.push(c.get(a).$promise)});var f=j.all(e).then(function(a){angular.extend(b,{occupations:a})});H.push(j.all(f))}I.push(b)})}var J=[];angular.isArray(x.occupations)&&x.occupations.forEach(function(a){var b={};b.specialities=a.specialities;var d=c.get(a.occupation).$promise.then(function(c){angular.extend(b,a,{occupation:c})});H.push(d),J.push(b)}),j.all(H).then(function(){var c=b.modulesViewData(I);a.occupations=J,a.modules=x.modules,a.isOccupation=x.occupation,a.occupationModuleTypesModules=c.occupationModuleTypesModules,a.modulesWithOutOccupation=c.modulesWithOutOccupation,a.initializing=!1}),e.endpoint("/curriculumVersion/schoolDepartments/curriculum/"+x.id).query().$promise.then(function(b){a.schoolDepartments=b}),a.openViewModuleDialog=function(a){k.showDialog("vocationalCurriculum/implementationPlan/module.view.dialog.html",function(b){b.occupations=J,b.occupationsSelected={},b.partOccupationsSelected={},b.specialitiesSelected={},b.module={outcomes:[],occupations:[]},angular.isDefined(a)&&(angular.extend(b.module,a),angular.isArray(a.occupations)&&(b.module.occupations=a.occupations,a.occupations.forEach(function(a){angular.isDefined(a)&&(0===a.indexOf("KUTSE")||0===a.indexOf("OSAKUTSE")?b.occupationsSelected[a]=!0:0===a.indexOf("SPETSKUTSE")&&(b.specialitiesSelected[a]=!0))})))},null)},a.openAddModuleDataDialog=function(b,c){a.vocationalCurriculumModuleImplementationPlanForm.$dirty?k.confirmDialog({prompt:"main.messages.confirmFormDataNotSaved"},function(){r(b,c)}):r(b,c)},a.occupationModuleHasBaseModule=function(b){for(var c=0;c<a.implementationPlan.occupationModules.length;c++)if(a.implementationPlan.occupationModules[c].curriculumModule===b.id)return a.implementationPlan.occupationModules[c].baseModule?!0:!1;return null!==b.baseModule},a.isOccupationModuleDataSaved=function(b){var c=!1;return a.implementationPlan.occupationModules.forEach(function(a){a.curriculumModule===b.id&&(c=!0)}),c},a.isModuleValid=function(b){return a.isOccupationModuleDataSaved(b)||"KUTSEMOODUL_V"===b.module},a.copy=function(){var a=e.endpoint("/curriculumVersion/copy");new a({id:y}).$update().then(function(a){g.info("main.messages.create.success"),h.path("/vocationalCurriculum/"+a.curriculum+"/moduleImplementationPlan/"+a.id+"/edit")})},a.anyModuleAdded=function(){return!m.isEmpty(a.modules)},a.save=function(b){if(s(b)){var c=new z(a.implementationPlan);angular.isDefined(a.implementationPlan.id)?c.$update().then(function(c){var d=b&&b.updateSuccess?b.updateSuccess:"main.messages.create.success";g.info(d),a.implementationPlan.version=c.version,a.vocationalCurriculumModuleImplementationPlanForm.$setPristine()}):c.$save().then(function(a){g.info("main.messages.create.success"),h.path("/vocationalCurriculum/"+x.id+"/moduleImplementationPlan/"+a.id+"/edit")})}},a["delete"]=function(){k.confirmDialog({prompt:"curriculum.prompt.deleteImplementationPlan"},function(){var b=new z(a.implementationPlan);b.$delete().then(function(){g.info("main.messages.delete.success"),n.back("#/vocationalCurriculum/"+x.id+"/view")})})},a.saveAndConfirm=function(){var b={prompt:a.formState.readOnly?"curriculum.statuschangeReadOnly.implementationPlan.prompt.verify":"curriculum.statuschange.implementationPlan.prompt.verify",updateSuccess:"curriculum.statuschange.implementationPlan.success.verified"},c=e.endpoint("/curriculumVersion/saveAndConfirm");u(c,b,!0)},a.confirm=function(){var b={prompt:a.formState.readOnly?"curriculum.statuschangeReadOnly.implementationPlan.prompt.verify":"curriculum.statuschange.implementationPlan.prompt.verify",updateSuccess:"curriculum.statuschange.implementationPlan.success.verified"},c=e.endpoint("/curriculumVersion/confirm");u(c,b,!0)},a.setStatusClosed=function(){var b={prompt:a.formState.readOnly?"curriculum.statuschangeReadOnly.implementationPlan.prompt.close":"curriculum.statuschange.implementationPlan.prompt.close",updateSuccess:"curriculum.statuschange.implementationPlan.success.closed"},c=e.endpoint("/curriculumVersion/close");u(c,b,!1)},a.goToEditForm=function(){if(a.curriculumId){var c="/vocationalCurriculum/"+x.id+"/moduleImplementationPlan/"+a.implementationPlan.id+"/edit";a.implementationPlan.status===b.VERSION_STATUS.K?k.confirmDialog({prompt:"curriculum.statuschange.implementationPlan.prompt.editAccepted"},function(){h.path(c)}):h.path(c)}},c.queryForDropdown({mainClassCode:"KUTSEMOODUL"},function(b){a.moduleTypes=b,a.moduleTypes.sort(function(a,b){return A[a.code]-A[b.code]})}),a.getTotalCredits=function(a){return a.reduce(function(a,b){return a+b.credits},0)},a.filterEmptyModulesByType=function(a){return function(b){return b.module===a&&m.isEmpty(b.occupations)}},a.filterModulesByType=function(a,b){return function(c){var d=c.occupations;return c.module===a&&m.includes(d,b)}},a.filterTypesWithoutModules=function(a,b){return function(c){var d=b?b.filter(function(b){var d=b.occupations;return m.includes(d,a)&&b.module===c.code}):[];return!m.isEmpty(d)}},a.filterTypesWithoutEmptyModules=function(b){var c=a.modules?a.modules.filter(function(a){return m.isEmpty(a.occupations)}):[],d=c?c.filter(function(a){return a.module===b.code}):[];return!m.isEmpty(d)},a.codeNameUnique=!0,a.$watch("implementationPlan.code",function(){a.implementationPlan.code?o({url:p.apiUrl+"/curriculumVersion/unique/code",method:"GET",params:{paramName:"nameEt",paramValue:a.implementationPlan.code,id:i.current.params.versionId}}).then(function(b){a.codeNameUnique=b.data}):a.codeNameUnique=!0}),a.showPrintButton=function(){return angular.isDefined(a.implementationPlan.id)&&(a.auth.isAdmin()||a.implementationPlan.status===a.VERSION_STATUS.K&&x.status===a.CURRICULUM_STATUS.VERIFIED)}}]),angular.module("hitsaOis").controller("VocationalCurriculumVersionOccupationModuleController",["$scope","$route","QueryUtils","Classifier","message","$location","ArrayUtils","dialogService","$rootScope","USER_ROLES",function(a,b,c,d,e,f,g,h,i,j){function k(){B?a.occupationModule=H.get({id:B}).$promise.then(function(b){t(b),a.viewMode=a.viewModes.MAIN,l()}):(t(new H(K)),l())}function l(){c.endpoint(G+"/curriculumModule").get({id:E}).$promise.then(function(b){a.curriculumModule=b,a.curriculumModule.baseModule&&!a.occupationModule.id&&(a.viewMode=a.viewModes.NEW),B||(a.occupationModule.assessmentsEt=b.assessmentsEt);var c=Math.floor(((b.studyPeriod||0)+11)/12);a.studyYears=Array.apply(null,{length:c}).map(function(a,b){return b+1}),B?v():a.occupationModule.yearCapacities=a.studyYears.map(function(a){return{credits:0,studyYearNumber:a}}),m()})}function m(){a.curriculumModule.baseModule&&a.auth.isAdmin()&&g.includes(a.auth.authorizedRoles,j.ROLE_OIGUS_V_TEEMAOIGUS_OPPEKAVA)&&c.endpoint("/basemodule/replace/"+a.curriculumModule.baseModule.id+"/"+a.curriculumModule.id+(B?"/"+B:"")).get().$promise.then(function(b){a.replaceForm=b,a.replaceForm.connections={},a.replaceForm.baseModuleThemes.forEach(function(a){a.selection={},b.occupationModules.forEach(function(b){a.selection[b.id]={selected:!1}})})})}function n(){a.occupationModule.$update().then(function(b){e.info("main.messages.update.success"),t(b),a.occupationModuleForm.$setPristine()})["catch"](angular.noop)}function o(){a.occupationModule.$save().then(function(a){e.info("main.messages.create.success"),f.path("/occupationModule/"+C+"/"+D+"/"+E+"/"+a.id+"/edit")})["catch"](angular.noop)}function p(){a.occupationModule.id?n():o()}function q(){h.confirmDialog({prompt:"basemodule.operation.createNewBaseModule.message"},function(){c.endpoint("/basemodule/generate/"+a.curriculumModule.id+"/"+a.occupationModule.id).get().$promise.then(function(){e.info("main.messages.create.success"),k()})})}function r(){return a.occupationModuleForm.$setSubmitted(),a.occupationModuleForm.$valid?!0:(e.error("main.messages.form-has-errors"),!1)}function s(){return a.replaceModuleForm.$setSubmitted(),a.replaceModuleForm.$valid?!0:(e.error("main.messages.form-has-errors"),!1)}function t(b){a.occupationModule=new H(b),a.occupationModule.baseModule&&(a.startMode=a.startModes.BASE_MODULE),a.occupationModule.supervisor&&(a.occupationModule.supervisor=a.occupationModule.supervisor.trim()),a.occupationModule.totalGradeDescription&&(a.occupationModule.totalGradeDescription=a.occupationModule.totalGradeDescription.trim()),a.occupationModule.requirementsEt&&(a.occupationModule.requirementsEt=a.occupationModule.requirementsEt.trim()),a.occupationModule.id||a.capacities.$promise.then(function(){a.occupationModule.capacities=a.capacities.map(y)}),v()}function u(b){c.endpoint("/basemodule/cm/"+a.curriculumModule.baseModule.id).get().$promise.then(function(c){a.occupationModule.requirementsEt=c.cvRequirementsEt,a.occupationModule.assessmentsEt=c.cvAssessmentsEt,a.occupationModule.learningMethodsEt=c.cvLearningMethodsEt,a.occupationModule.assessmentMethodsEt=c.cvAssessmentMethodsEt,a.occupationModule.assessment=c.cvAssessment,a.occupationModule.totalGradeDescription=c.cvTotalGradeDescription,a.occupationModule.passDescription=c.cvPassDescription,a.occupationModule.grade3Description=c.cvGrade3Description,
a.occupationModule.grade4Description=c.cvGrade4Description,a.occupationModule.grade5Description=c.cvGrade5Description,a.occupationModule.independentStudyEt=c.cvIndependentStudyEt,a.occupationModule.studyMaterials=c.cvStudyMaterials,a.occupationModule.teacher=c.teacher,a.occupationModule.supervisor=c.teacher[a.currentLanguageNameField()],a.occupationModule.capacities=c.capacities.map(function(a){return{capacityType:a.capacityType,contact:a.contact,hours:a.hours,nameEn:a.nameEn,nameEt:a.nameEt}}),b()})}function v(){if(a.studyYears&&a.occupationModule&&a.occupationModule.yearCapacities){var b=a.studyYears.length;a.occupationModule.yearCapacities=a.occupationModule.yearCapacities.filter(function(a){return a.studyYearNumber<=b}).sort(function(a,b){return a.studyYearNumber-b.studyYearNumber})}}function w(){var b=a.occupationModule.capacities.reduce(function(a,b){return a+(b.hours?b.hours:0)},0);return b/J===a.curriculumModule.credits}function x(){var b=a.occupationModule.yearCapacities.reduce(function(a,b){return a+b.credits},0);return b===a.curriculumModule.credits}function y(a){return{capacityType:a.code,nameEt:a.nameEt,nameEn:a.nameEn}}function z(){H.get({id:B}).$promise.then(function(b){a.occupationModule.capacities=b.capacities,a.occupationModule.yearCapacities=b.yearCapacities,v()})}function A(a){for(var b=a.concat(),c=0;c<b.length;++c)for(var d=c+1;d<b.length;++d)b[c].capacityType===b[d].capacityType&&b.splice(d--,1);return b}a.viewModes=Object.freeze({NEW:0,REPLACE:1,MAIN:2}),a.startModes=Object.freeze({BASE_MODULE:0,COPY_MODULE:1,INDEPENDENT:2});var B=b.current.params.occupationModule,C=b.current.params.curriculum,D=b.current.params.version,E=b.current.params.curriculumModule,F=c.endpoint("/basemodule/teachers"),G="/occupationModule",H=c.endpoint(G),I=c.endpoint(G+"/theme"),J=26,K={curriculumModule:E,curriculumVersion:D,assessment:"KUTSEHINDAMISVIIS_E",yearCapacities:[{credits:0,studyYearNumber:1}],themes:[],capacities:[]};a.auth=b.current.locals.auth,a.hasBaseModuleRight=g.includes(a.auth.authorizedRoles,j.ROLE_OIGUS_M_TEEMAOIGUS_BAASMOODUL),a.viewMode=a.viewModes.MAIN,a.startMode=a.startModes.INDEPENDENT,a.formState={readOnly:-1!==b.current.$$route.originalPath.indexOf("view")},a.capacities=c.endpoint("/autocomplete/schoolCapacityTypes").query({isHigher:!1}),a.curriculumVersion=c.endpoint(G+"/curriculumVersion").get({id:D}),a.backToEditForm="#/vocationalCurriculum/"+C+"/moduleImplementationPlan/"+D+"/edit",a.backToViewForm="#/vocationalCurriculum/"+C+"/moduleImplementationPlan/"+D+"/view";var L={};a.selectChange=function(b,c,d){return d.selection[b].selected?(L[c]&&L[c].selection[b]&&(L[c].selection[b].selected=!1),delete L[c],delete a.replaceForm.connections[c],void(a.replaceForm.showOneToOneThemeError=!0)):(L[c]&&L[c].selection[b]&&(L[c].selection[b].selected=!1),L[c]=d,L[c].selection[b].selected=!0,void(a.replaceForm.showOneToOneThemeError=!1))},i.removeLastUrlFromHistory(function(a){return a&&-1!==a.indexOf("new")}),a.save=function(){r()&&(w()||x()?w()?x()?p():h.confirmDialog({prompt:"curriculum.prompt.occupationModuleYearCapacitiesMismatch"},p):h.confirmDialog({prompt:"curriculum.prompt.occupationModuleCapacitiesMismatch"},p):h.confirmDialog({prompt:"curriculum.prompt.capacitiesAndYearCapacitiesMismatch"},p))},a.hasThemes=function(){return a.occupationModule&&!g.isEmpty(a.occupationModule.themes)},a.deleteTheme=function(b){h.confirmDialog({prompt:"curriculum.prompt.deleteTheme"},function(){new I(b).$delete().then(function(){e.info("main.messages.delete.success"),g.remove(a.occupationModule.themes,b),z(),m()})})},a.createBaseModule=function(){r()&&a.occupationModule.id&&(a.occupationModuleForm.$dirty?h.confirmDialog({prompt:"main.messages.confirmFormDataNotSaved"},function(){a.occupationModule.$get({id:a.occupationModule.id}).then(q)}):q())},a.release=function(){h.confirmDialog({prompt:"basemodule.operation.release.message"},function(){c.endpoint("/basemodule/releaseMin/"+a.occupationModule.id).get().$promise.then(function(){e.info("basemodule.operation.release.success"),k()})["catch"](function(){e.error("basemodule.operation.release.fail")})})},a["continue"]=function(){switch(a.startMode){case a.startModes.BASE_MODULE:a.occupationModule.baseModule=a.curriculumModule.baseModule.id,u(p);break;case a.startModes.COPY_MODULE:a.occupationModule.baseModule=a.curriculumModule.baseModule.id,a.occupationModule.copy=!0,u(p)}a.viewMode=a.viewModes.MAIN},a["delete"]=function(){h.confirmDialog({prompt:"curriculum.prompt.deleteModule"},function(){new H(a.occupationModule).$delete().then(function(){e.info("main.messages.delete.success"),f.url("/vocationalCurriculum/"+C+"/moduleImplementationPlan/"+D+"/edit?_noback")})["catch"](angular.noop)})},a.replace=function(){if(s()){var b={};b.baseModule=a.replaceForm.baseModule.id,b.curriculumModule=a.replaceForm.curriculumModule.id,b.curriculumVersionOModules=[a.occupationModule.id],b.themeReferences={},a.replaceForm.occupationModules.forEach(function(c){b.themeReferences[c.id]={},a.replaceForm.themes[c.id].forEach(function(d){b.themeReferences[c.id][d.id]=a.replaceForm.connections[d.id].id})}),c.endpoint("/basemodule/replace").save(b).$promise.then(function(){e.info("basemodule.operation.replace.success"),a.viewMode=a.viewModes.MAIN,k()})["catch"](function(){e.error("basemodule.operation.replace.fail")})}},a.searchTeacher=function(b){return a.occupationModuleForm.$setDirty(),F.query({name:b}).$promise},a.openAddThemeDialog=function(b){var c=a.formState.readOnly?"vocationalCurriculum/implementationPlan/occupation.module.theme.view.dialog.html":"vocationalCurriculum/implementationPlan/occupation.module.theme.edit.dialog.html";h.showDialog(c,function(c){function f(a){return a.dialogForm.$setSubmitted(),a.dialogForm.$valid?a.occupationModuleTheme.hours!==Math.round(J*a.occupationModuleTheme.credits)&&a.occupationModuleTheme.credits!==Math.round(a.occupationModuleTheme.hours/J*10)/10?(e.error("curriculum.error.themeCreditsAndHoursMismatch"),!1):h()?!0:(e.error("curriculum.error.themeCapacitiesAndHoursMismatch"),!1):(e.error("main.messages.form-has-errors"),!1)}function h(){return c.occupationModuleTheme.hours===c.occupationModuleTheme.capacities.reduce(function(a,b){return angular.isDefined(b.hours)?a+=b.hours:a},0)}var i=a.occupationModule;c.hasBaseModule=!(angular.isUndefined(a.occupationModule.baseModule)||null===a.occupationModule.baseModule),angular.isArray(i.themes)||(i.themes=[]),angular.isDefined(b)?(b.capacities=A(b.capacities.concat(a.capacities.map(y))),c.occupationModuleTheme=angular.copy(b)):c.occupationModuleTheme={capacities:a.capacities.map(y),assessment:"KUTSEHINDAMISVIIS_E",module:a.occupationModule.id},c.outcomes=a.curriculumModule.outcomes,c.setDefaultHours=function(){angular.isNumber(c.occupationModuleTheme.credits)&&(c.occupationModuleTheme.hours=Math.round(J*c.occupationModuleTheme.credits),c.dialogForm.hours.$setDirty())},c.studyYears=a.studyYears,c.assessments=d.queryForDropdown({mainClassCode:"KUTSEHINDAMISVIIS"}),c.setDefaultCredits=function(){c.occupationModuleTheme.credits=Math.round(c.occupationModuleTheme.hours/J*10)/10,c.dialogForm.credits.$setDirty()},c.saveTheme=function(){var a=c;f(a)&&(angular.isDefined(b)?new I(a.occupationModuleTheme).$update().then(function(a){e.info("main.messages.update.success"),g.remove(i.themes,b),i.themes.push(a),z(),c.cancel(),m()}):new I(a.occupationModuleTheme).$save().then(function(a){e.info("main.messages.create.success"),i.themes.push(a),z(),c.cancel(),m()}))}},function(){})},k()}]),angular.module("hitsaOis").config(["$routeProvider","USER_ROLES",function(a,b){function c(a,b,c,d,e){d.resolve().then(function(d){d.isAdmin()&&c.includes(d.authorizedRoles,e.ROLE_OIGUS_M_TEEMAOIGUS_OPPEKAVA)||(a.error("main.messages.error.nopermission"),b.path(""))})}c.$inject=["message","$location","ArrayUtils","AuthResolver","USER_ROLES"],a.when("/vocationalCurriculum/new",{templateUrl:"vocationalCurriculum/vocational.curriculum.html",controller:"VocationalCurriculumController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}],checkAccess:c},data:{authorizedRoles:[b.ROLE_OIGUS_M_TEEMAOIGUS_OPPEKAVA]}}).when("/vocationalCurriculum/:id/edit",{templateUrl:"vocationalCurriculum/vocational.curriculum.html",controller:"VocationalCurriculumController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}],entity:["QueryUtils","$route",function(a,b){return a.endpoint("/curriculum").get({id:b.current.params.id}).$promise}],checkAccess:c},data:{authorizedRoles:[b.ROLE_OIGUS_M_TEEMAOIGUS_OPPEKAVA]}}).when("/vocationalCurriculum/:id/view",{templateUrl:"vocationalCurriculum/vocational.curriculum.view.html",controller:"VocationalCurriculumController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}],entity:["QueryUtils","$route",function(a,b){return a.endpoint("/curriculum").get({id:b.current.params.id}).$promise}]},data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_OPPEKAVA,b.ROLE_OIGUS_V_TEEMAOIGUS_RIIKLIKOPPEKAVA]}}).when("/vocationalCurriculum/:id/moduleImplementationPlan/new",{templateUrl:"vocationalCurriculum/implementationPlan/implementation.plan.html",controller:"VocationalCurriculumModuleImplementationPlanController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}],curriculum:["QueryUtils","$route",function(a,b){return a.endpoint("/curriculumVersion/curriculum").get({id:b.current.params.id}).$promise}],checkAccess:c},data:{authorizedRoles:[b.ROLE_OIGUS_M_TEEMAOIGUS_OPPEKAVA]}}).when("/vocationalCurriculum/:id/moduleImplementationPlan/:versionId/edit",{templateUrl:"vocationalCurriculum/implementationPlan/implementation.plan.html",controller:"VocationalCurriculumModuleImplementationPlanController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}],curriculum:["QueryUtils","$route",function(a,b){return a.endpoint("/curriculumVersion/curriculum").get({id:b.current.params.id}).$promise}],curriculumVersion:["QueryUtils","$route",function(a,b){return a.endpoint("/curriculumVersion").get({id:b.current.params.versionId}).$promise}],checkAccess:c},data:{authorizedRoles:[b.ROLE_OIGUS_M_TEEMAOIGUS_OPPEKAVA]}}).when("/vocationalCurriculum/:id/moduleImplementationPlan/:versionId/view",{templateUrl:"vocationalCurriculum/implementationPlan/implementation.plan.view.html",controller:"VocationalCurriculumModuleImplementationPlanController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}],curriculum:["QueryUtils","$route",function(a,b){return a.endpoint("/curriculumVersion/curriculum").get({id:b.current.params.id}).$promise}],curriculumVersion:["QueryUtils","$route",function(a,b){return a.endpoint("/curriculumVersion").get({id:b.current.params.versionId}).$promise}]},data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_OPPEKAVA,b.ROLE_OIGUS_V_TEEMAOIGUS_RIIKLIKOPPEKAVA]}}).when("/vocationalCurriculum/:curriculum/module/new",{templateUrl:"vocationalCurriculum/module/vocational.curriculum.module.edit.html",controller:"VocationalCurriculumModuleController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}],checkAccess:c},data:{authorizedRoles:[b.ROLE_OIGUS_M_TEEMAOIGUS_OPPEKAVA]}}).when("/vocationalCurriculum/:curriculum/module/:id/view",{templateUrl:"vocationalCurriculum/module/vocational.curriculum.module.view.html",controller:"VocationalCurriculumModuleController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}]},data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_OPPEKAVA,b.ROLE_OIGUS_V_TEEMAOIGUS_RIIKLIKOPPEKAVA]}}).when("/vocationalCurriculum/:curriculum/module/:id/edit",{templateUrl:"vocationalCurriculum/module/vocational.curriculum.module.edit.html",controller:"VocationalCurriculumModuleController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}],checkAccess:c},data:{authorizedRoles:[b.ROLE_OIGUS_M_TEEMAOIGUS_OPPEKAVA]}}).when("/occupationModule/:curriculum/:version/:curriculumModule/new",{templateUrl:"vocationalCurriculum/implementationPlan/occupation.module.edit.html",controller:"VocationalCurriculumVersionOccupationModuleController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}],checkAccess:c},data:{authorizedRoles:[b.ROLE_OIGUS_M_TEEMAOIGUS_OPPEKAVA]}}).when("/occupationModule/:curriculum/:version/:curriculumModule/:occupationModule/edit",{templateUrl:"vocationalCurriculum/implementationPlan/occupation.module.edit.html",controller:"VocationalCurriculumVersionOccupationModuleController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}],checkAccess:c},data:{authorizedRoles:[b.ROLE_OIGUS_M_TEEMAOIGUS_OPPEKAVA]}}).when("/occupationModule/:curriculum/:version/:curriculumModule/:occupationModule/view",{templateUrl:"vocationalCurriculum/implementationPlan/occupation.module.view.html",controller:"VocationalCurriculumVersionOccupationModuleController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}]},data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_OPPEKAVA,b.ROLE_OIGUS_V_TEEMAOIGUS_RIIKLIKOPPEKAVA]}})}]),angular.module("hitsaOis").controller("VocationalCurriculumModuleController",["$scope","$route","QueryUtils","dialogService","message","ArrayUtils","$location","$rootScope","USER_ROLES",function(a,b,c,d,e,f,g,h,i){function j(){v?x.get({id:v}).$promise.then(n):(a.module=new x(D),c.endpoint(w+"/curriculum/"+a.curriculumId).search().$promise.then(function(b){a.module.curriculumOccupations=b.occupations,a.module.occupation=b.occupation,a.module.canHaveOccupations=b.canHaveOccupations}))}function k(){a.module.$update().then(function(b){e.info("main.messages.update.success"),n(b),a.vocationalCurriculumModuleForm.$setPristine()})}function l(){a.module.$save().then(function(b){e.info("main.messages.create.success"),g.path("/vocationalCurriculum/"+a.module.curriculum+"/module/"+b.id+"/edit")})}function m(){a.module.outcomes.forEach(function(b){b.orderNr=a.module.outcomes.indexOf(b)}),o(a,a.module)}function n(b){a.module=b,a.module.baseModule&&(a.baseModuleUsed=!0,a.moduleType=a.moduleTypes.BASE_MODULE,a.baseModule=a.module.baseModule),a.module.outcomes.forEach(function(b){angular.isDefined(b.orderNr)||(b.orderNr=a.module.outcomes.indexOf(b))}),a.module.outcomes.sort(function(a,b){return a.orderNr-b.orderNr}),angular.isArray(a.module.occupations)&&a.module.occupations.forEach(function(b){0===b.indexOf("KUTSE")||0===b.indexOf("OSAKUTSE")?a.occupationsSelected[b]=!0:0===b.indexOf("SPETSKUTSE")&&(a.specialitiesSelected[b]=!0)})}function o(a,b){b.occupations=[],b.curriculumOccupations.forEach(function(c){a.occupationsSelected[c.occupation]===!0&&b.occupations.push(c.occupation),angular.isArray(c.partOccupations)&&c.partOccupations.forEach(function(c){a.occupationsSelected[c]===!0&&b.occupations.push(c)}),angular.isArray(c.specialities)&&c.specialities.forEach(function(c){a.specialitiesSelected[c]===!0&&b.occupations.push(c)})})}function p(){return y&&v?!0:(a.vocationalCurriculumModuleForm.$setSubmitted(),a.vocationalCurriculumModuleForm.$valid?!0:(e.error("main.messages.form-has-errors"),!1))}function q(){return a.replaceModuleForm.$setSubmitted(),a.replaceModuleForm.$valid?!0:(e.error("main.messages.form-has-errors"),!1)}function r(b){if(!angular.isArray(b))return!1;for(var c=0;c<b.length;c++)if(a.specialitiesSelected[b[c]])return!0;return!1}function s(b){if(!angular.isArray(b))return!1;for(var c=0;c<b.length;c++)if(a.occupationsSelected[b[c]])return!0;return!1}function t(b){(angular.isDefined(a.replaceBaseModuleForm)||b)&&(a.baseModuleNameTemplate="",a.baseModuleTemplate=void 0,a.replaceBaseModuleForm=void 0,a.replaceModuleForm.showNotEnoughOutcomesError=!1,a.replaceModuleForm.showOneToOneOutcomeError=!1,a.replaceModuleForm.showOneToOneThemeError=!1,z={},A={})}function u(){if(!a.module||!a.module.curriculumOccupations)return!0;for(var b=a.module.curriculumOccupations,c=0;c<b.length;c++){var d=b[c].occupation,e=a.occupationsSelected[d];if(e){var f=b[c].specialities;if(f)for(var g=0;g<f.length;g++)if(a.specialitiesSelected[f[g]])return null}}for(var h=0;h<b.length;h++){var i=b[h].specialities,j=b[h].partOccupations;if(i&&j&&r(i)&&s(j))return null}return!0}a.moduleTypes=Object.freeze({NEW_MODULE:0,BASE_MODULE:1});var v=b.current.params.id,w="/curriculumModule",x=c.endpoint(w),y=-1!==b.current.$$route.originalPath.indexOf("view"),z={},A={},B=32,C=7;a.auth=b.current.locals.auth,a.hasBaseModuleRight=f.includes(a.auth.authorizedRoles,i.ROLE_OIGUS_M_TEEMAOIGUS_BAASMOODUL),a.curriculumId=b.current.params.curriculum,a.occupationsSelected={},a.specialitiesSelected={},a.competences=[],a.curriculum=c.endpoint(w+"/curriculumMin").get({id:a.curriculumId}),c.endpoint(w+"/competences/curriculum/"+a.curriculumId).query().$promise.then(function(b){a.competences=b,a.vocationalCurriculumModuleForm&&a.vocationalCurriculumModuleForm.$setPristine()}),a.possibleTypes=c.endpoint(w+"/types").query({module:v,curriculum:a.curriculumId}),a.moduleType=a.moduleTypes.NEW_MODULE,a.baseModuleUsed=!1;var D={curriculum:a.curriculumId,occupations:[],competences:[],outcomes:[],practice:!1};h.removeLastUrlFromHistory(function(a){return a&&-1!==a.indexOf("new")}),a.save=function(){p()&&(m(),a.module.id?k():l())},a["delete"]=function(){d.confirmDialog({prompt:"module.messages.prompt.delete"},function(){a.module.$delete().then(function(){e.info("main.messages.delete.success"),h.back("#/vocationalCurriculum/"+a.module.curriculum+"/edit")})})},a.isEditingOutcome=!1,a.editedOutcome=null,a.addOutcome=function(){angular.isString(a.outcomeEt)&&""!==a.outcomeEt&&(a.module.outcomes.push({outcomeEt:a.outcomeEt,outcomeEn:a.outcomeEn,order:a.module.outcomes.length}),a.outcomeEt=void 0,a.outcomeEn=void 0)},a.swap=function(b,c){var d=a.module.outcomes[b];a.module.outcomes[b]=a.module.outcomes[c],a.module.outcomes[c]=d,a.vocationalCurriculumModuleForm.$setDirty()},a.editOutcome=function(b){a.isEditingOutcome=!0,a.editedOutcome=b,a.outcomeEt=b.outcomeEt,a.outcomeEn=b.outcomeEn},a.saveOutcome=function(){angular.isString(a.outcomeEt)&&""!==a.outcomeEt&&(a.isEditingOutcome=!1,a.editedOutcome.outcomeEt=a.outcomeEt,a.editedOutcome.outcomeEn=a.outcomeEn,a.outcomeEt=void 0,a.outcomeEn=void 0)},a.removeFromArray=function(b,c){d.confirmDialog({prompt:"curriculum.itemDeleteConfirm"},function(){f.remove(b,c),a.vocationalCurriculumModuleForm.$setDirty()})},a.radioChange=function(){a.module.baseModule=null},a.getBaseModule=function(b){angular.isDefined(b)&&!a.baseModuleUsed&&c.endpoint("/basemodule/cm").get({id:b.id}).$promise.then(function(b){a.module.baseModule=b,a.module.credits=b.credits,a.module.nameEt=b.nameEt,a.module.nameEn=b.nameEn,a.module.objectivesEt=b.objectivesEt,a.module.objectivesEn=b.objectivesEn,a.module.outcomes=b.outcomes,a.module.outcomes.forEach(function(b){b.id=null,angular.isDefined(b.orderNr)||(b.orderNr=a.module.outcomes.indexOf(b))}),a.module.outcomes.sort(function(a,b){return a.orderNr-b.orderNr}),a.module.assessmentsEt=b.assessmentsEt,a.module.assessmentsEn=b.assessmentsEn})},a.getReplaceForm=function(b){t(),angular.isDefined(b)&&c.endpoint("/basemodule/replace/"+b.id+"/"+a.module.id).get().$promise.then(function(b){b.outcomes?(a.replaceModuleForm.showNotEnoughOutcomesError=!1,a.replaceBaseModuleForm=b,a.replaceBaseModuleForm.connections={},a.replaceBaseModuleForm.baseModuleThemes.forEach(function(b){b.selection={},a.replaceBaseModuleForm.occupationModules.forEach(function(a){b.selection[a.id]={selected:!1}})}),a.replaceBaseModuleForm.occupationModules.forEach(function(b){b.enabled=angular.isDefined(a.replaceBaseModuleForm.themes[b.id])}),angular.equals(a.replaceBaseModuleForm.themes,{})&&(a.replaceBaseModuleForm.themes=void 0)):(t(),a.replaceModuleForm.showNotEnoughOutcomesError=!0)})},a.switchView=function(b){a.showReplaceMenu=b,t(!0)},a.replace=function(){if(q()){var b={};b.baseModule=a.replaceBaseModuleForm.baseModule.id,b.curriculumModule=a.replaceBaseModuleForm.curriculumModule.id,b.curriculumVersionOModules=a.replaceBaseModuleForm.occupationModules.filter(function(a){return a.enabled}).map(function(a){return a.id}),b.themeReferences={},b.curriculumVersionOModules.forEach(function(c){b.themeReferences[c]={},a.replaceBaseModuleForm.themes[c].forEach(function(d){b.themeReferences[c][d.id]=a.replaceBaseModuleForm.connections[d.id].id})}),b.outcomeReferences={},a.replaceBaseModuleForm.outcomes.forEach(function(c){b.outcomeReferences[c.id]=a.replaceBaseModuleForm.connectionsOutcome[c.id].id}),c.endpoint("/basemodule/replace").save(b).$promise.then(function(){e.info("basemodule.operation.replace.success"),a.showReplaceMenu=!1,j()})["catch"](function(){e.error("basemodule.operation.replace.fail")})}},a.selectChange=function(b,c,d){return d.selection[b].selected?(z[c]&&z[c].selection[b]&&(z[c].selection[b].selected=!1),delete z[c],delete a.replaceBaseModuleForm.connections[c],void(a.replaceModuleForm.showOneToOneThemeError=!0)):(z[c]&&z[c].selection[b]&&(z[c].selection[b].selected=!1),z[c]=d,z[c].selection[b].selected=!0,void(a.replaceModuleForm.showOneToOneThemeError=!1))},a.selectChangeOutcome=function(b,c){return c.selected?(A[b]&&(A[b].selected=!1),delete A[b],delete a.replaceBaseModuleForm.connectionsOutcome[b],void(a.replaceModuleForm.showOneToOneOutcomeError=!0)):(A[b]&&(A[b].selected=!1),A[b]=c,A[b].selected=!0,void(a.replaceModuleForm.showOneToOneOutcomeError=!1))},a.searchBaseModule=function(a){return c.endpoint("/autocomplete/basemodules").query({name:a,notExpired:!0},function(a){document.querySelector("md-virtual-repeat-container.md-autocomplete-suggestions-container").style.setProperty("min-height",B*(a.length>C?C:a.length)+"px","important")}).$promise},a.releaseModule=function(){d.confirmDialog({prompt:"basemodule.operation.release.message"},function(){c.endpoint("/basemodule/release/"+a.module.id).get().$promise.then(function(){a.module.baseModule=null,a.baseModuleUsed=!1,a.baseModule=void 0,a.moduleType=a.moduleTypes.NEW_MODULE,e.info("basemodule.operation.release.success")})["catch"](function(){e.error("basemodule.operation.release.fail")})})},a.occupationsValid=u(),a.validateOccupations=function(){a.occupationsValid=u()},j()}]),angular.module("hitsaOis").controller("StudentEhisController",["$scope","message","QueryUtils",function(a,b,c){function d(b){if("VOTA"===a.criteria.dataType){var c=[];return b.forEach(function(a){angular.isArray(a.records)&&a.records.length>0?(c.push(angular.extend({},a,a.records[0])),a.records.forEach(function(a,b){b>0&&c.push(a)})):c.push(a)}),c}return b}var e="CURRICULA_FULFILMENT",f="FOREIGN_STUDY",g="GRADUATION",h="VOTA";a.dataTypes=[e,f,g,h],a.displayDates=[f,g,h],a.criteria={from:new Date,thru:new Date},a.exportStudents=function(){a.studentExportForm.$valid?c.endpoint("/students/ehisStudentExport").post(a.criteria).$promise.then(function(c){b.info(c&&c.length>0?"ehis.messages.exportFinished":"ehis.messages.nostudentsfound"),a.result=d(c)})["catch"](angular.noop):b.error("main.messages.form-has-errors")}}]),angular.module("hitsaOis").controller("EhisLogsController",["$mdDialog","$route","$scope","QueryUtils","Session",function(a,b,c,d,e){c.auth=b.current.locals.auth;var f=e.school||{};c.messageTypes=["laeKorgharidus","oisOppekava","oisOppekavaStaatus"],f.higher&&c.messageTypes.push("laeOppejoud"),f.vocational&&c.messageTypes.push("laePedagoogid"),c.messageTypesWithTeacher=["laeOppejoud","laePedagoogid"];var g="/logs/ehis";d.createQueryForm(c,g,{order:"-inserted"}),c.loadData(),c.logentry=function(b){a.show({controller:["$scope",function(c){var e=1e3;c.requestLength=c.responseLength=e,c.cancel=a.hide,c.showAll=function(a){a?c.requestLength=void 0:c.responseLength=void 0},c.record=d.endpoint(g).get({id:b.id,messageType:b.wsName},function(a){(!a.request||a.request.length<e)&&c.showAll(!0),(!a.response||a.response.length<e)&&c.showAll(!1)})}],templateUrl:"ehis/logentry.view.dialog.html",clickOutsideToClose:!0})}}]),angular.module("hitsaOis").controller("TeacherExportController",["$route","$scope","message","QueryUtils",function(a,b,c,d){b.auth=a.current.locals.auth,b.higher=a.current.locals.higher;var e=b.higher?"/teachers/exportToEhis/higher":"/teachers/exportToEhis/vocational";b.teacher={},b.teacher.allDates=!1,b.exportTeachers=function(){b.teacherExportForm.$valid?d.endpoint(e).post(b.teacher).$promise.then(function(a){c.info(a&&a.length>0?"ehis.messages.exportFinished":b.auth.higher?"ehis.messages.noTeachersFoundHigher":"ehis.messages.noTeachersFoundVocational"),b.result=a})["catch"](angular.noop):c.error("main.messages.form-has-errors")}}]),angular.module("hitsaOis").config(["$routeProvider","USER_ROLES",function(a,b){a.when("/ehis/teacher/export/higher",{templateUrl:"ehis/teacher.export.html",controller:"TeacherExportController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}],higher:function(){return!0}},data:{authorizedRoles:[b.ROLE_OIGUS_M_TEEMAOIGUS_ANDMEVAHETUS_EHIS]}}).when("/ehis/teacher/export/vocational",{templateUrl:"ehis/teacher.export.html",controller:"TeacherExportController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}],higher:function(){return!1}},data:{authorizedRoles:[b.ROLE_OIGUS_M_TEEMAOIGUS_ANDMEVAHETUS_EHIS]}}).when("/ehis/student/export",{templateUrl:"ehis/student.html",controller:"StudentEhisController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}]},data:{authorizedRoles:[b.ROLE_OIGUS_M_TEEMAOIGUS_ANDMEVAHETUS_EHIS]}}).when("/ehis/logs",{templateUrl:"ehis/logs.view.html",controller:"EhisLogsController",controllerAs:"controller",resolve:{translationLoaded:["$translate",function(a){return a.onReady()}],auth:["AuthResolver",function(a){return a.resolve()}]},data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_ANDMEVAHETUS_EHIS]}})}]),angular.module("hitsaOis").config(["$routeProvider","USER_ROLES",function(a,b){function c(a){return angular.isArray(a.teacherGroupIds)&&a.teacherGroupIds.length>0}a.when("/scholarships/grant/new",{templateUrl:"scholarship/scholarship.edit.html",controller:"ScholarshipEditController",controllerAs:"controller",resolve:{auth:["AuthResolver",function(a){return a.resolve()}],translationLoaded:["$translate",function(a){return a.onReady()}],params:function(){return{allowedStipendTypes:["STIPTOETUS_POHI","STIPTOETUS_ERI","STIPTOETUS_SOIDU"],typeIsScholarship:!1}}},data:{authorizedRoles:[b.ROLE_OIGUS_M_TEEMAOIGUS_STIPTOETUS]}}).when("/scholarships/scholarship/new",{templateUrl:"scholarship/scholarship.edit.html",controller:"ScholarshipEditController",controllerAs:"controller",resolve:{auth:["AuthResolver",function(a){return a.resolve()}],translationLoaded:["$translate",function(a){return a.onReady()}],params:function(){return{allowedStipendTypes:["STIPTOETUS_TULEMUS","STIPTOETUS_ERIALA","STIPTOETUS_MUU"],typeIsScholarship:!0}}},data:{authorizedRoles:[b.ROLE_OIGUS_M_TEEMAOIGUS_STIPTOETUS]}}).when("/scholarships/drGrant/new",{templateUrl:"scholarship/scholarship.edit.html",controller:"ScholarshipEditController",controllerAs:"controller",resolve:{auth:["AuthResolver",function(a){return a.resolve()}],translationLoaded:["$translate",function(a){return a.onReady()}],params:function(){return{allowedStipendTypes:["STIPTOETUS_DOKTOR"],typeIsScholarship:!0}}},data:{authorizedRoles:[b.ROLE_OIGUS_M_TEEMAOIGUS_STIPTOETUS]}}).when("/scholarships/:id/edit",{templateUrl:"scholarship/scholarship.edit.html",controller:"ScholarshipEditController",controllerAs:"controller",resolve:{auth:["AuthResolver",function(a){return a.resolve()}],translationLoaded:["$translate",function(a){return a.onReady()}]},data:{authorizedRoles:[b.ROLE_OIGUS_M_TEEMAOIGUS_STIPTOETUS]}}).when("/scholarships/:id/view",{templateUrl:"scholarship/scholarship.view.html",controller:"ScholarshipViewController",controllerAs:"controller",resolve:{auth:["AuthResolver",function(a){return a.resolve()}],translationLoaded:["$translate",function(a){return a.onReady()}]},data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_STIPTOETUS]}}).when("/scholarships",{templateUrl:"scholarship/scholarship.search.html",controller:"ScholarshipSearchController",controllerAs:"controller",resolve:{auth:["AuthResolver",function(a){return a.resolve()}],translationLoaded:["$translate",function(a){return a.onReady()}],params:function(){return{allowedStipendTypes:["STIPTOETUS_DOKTOR"],scholarshipType:"drGrant"}}},data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_STIPTOETUS]}}).when("/scholarships/grants",{templateUrl:"scholarship/scholarship.search.html",controller:"ScholarshipSearchController",controllerAs:"controller",resolve:{auth:["AuthResolver",function(a){return a.resolve()}],translationLoaded:["$translate",function(a){return a.onReady()}],params:function(){return{allowedStipendTypes:["STIPTOETUS_POHI","STIPTOETUS_ERI","STIPTOETUS_SOIDU"],grant:!0}}},data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_STIPTOETUS]}}).when("/scholarships/scholarships",{templateUrl:"scholarship/scholarship.search.html",controller:"ScholarshipSearchController",controllerAs:"controller",resolve:{auth:["AuthResolver",function(a){return a.resolve()}],translationLoaded:["$translate",function(a){return a.onReady()}],params:function(){return{allowedStipendTypes:["STIPTOETUS_ERIALA","STIPTOETUS_TULEMUS","STIPTOETUS_MUU"],scholarship:!0}}},data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_STIPTOETUS]}}).when("/scholarships/myData/scholarships",{templateUrl:"scholarship/student/scholarship.scholarship.student.html",controller:"StudentScholarshipController",controllerAs:"controller",resolve:{auth:["AuthResolver",function(a){return a.resolve()}],translationLoaded:["$translate",function(a){return a.onReady()}]},data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_OPPUR]}}).when("/scholarships/myData/grants",{templateUrl:"scholarship/student/scholarship.grants.student.html",controller:"StudentScholarshipController",controllerAs:"controller",resolve:{auth:["AuthResolver",function(a){return a.resolve()}],translationLoaded:["$translate",function(a){return a.onReady()}]},data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_OPPUR]}}).when("/scholarships/myData/drGrants",{templateUrl:"scholarship/student/scholarship.drGrants.student.html",controller:"StudentScholarshipController",controllerAs:"controller",resolve:{auth:["AuthResolver",function(a){return a.resolve()}],translationLoaded:["$translate",function(a){return a.onReady()}],drGrant:function(){return!0}},data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_OPPUR]}}).when("/scholarships/:id/application",{templateUrl:"scholarship/student/scholarship.application.edit.html",controller:"StudentScholarshipApplicationEditController",controllerAs:"controller",resolve:{auth:["AuthResolver",function(a){return a.resolve()}],translationLoaded:["$translate",function(a){return a.onReady()}]},data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_OPPUR]}}).when("/scholarships/applications/grants",{
templateUrl:"scholarship/scholarship.application.list.grants.html",controller:"ScholarshipApplicationController",controllerAs:"controller",resolve:{auth:["AuthResolver",function(a){return a.resolve()}],translationLoaded:["$translate",function(a){return a.onReady()}],params:function(){return{allowedStipendTypes:["STIPTOETUS_POHI","STIPTOETUS_ERI","STIPTOETUS_SOIDU"],stipend:!1,scholarshipType:"grants"}}},data:{authorizedRoles:function(a){return-1!==a.authorizedRoles.indexOf(b.ROLE_OIGUS_V_TEEMAOIGUS_STIPTOETUS)||c(a)}}}).when("/scholarships/applications/drGrants",{templateUrl:"scholarship/scholarship.application.list.drGrants.html",controller:"ScholarshipApplicationController",controllerAs:"controller",resolve:{auth:["AuthResolver",function(a){return a.resolve()}],translationLoaded:["$translate",function(a){return a.onReady()}],params:function(){return{allowedStipendTypes:["STIPTOETUS_DOKTOR"],scholarshipType:"drGrants"}}},data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_STIPTOETUS]}}).when("/scholarships/applications/scholarships",{templateUrl:"scholarship/scholarship.application.list.scho.html",controller:"ScholarshipApplicationController",controllerAs:"controller",resolve:{auth:["AuthResolver",function(a){return a.resolve()}],translationLoaded:["$translate",function(a){return a.onReady()}],params:function(){return{allowedStipendTypes:["STIPTOETUS_TULEMUS","STIPTOETUS_ERIALA","STIPTOETUS_MUU"],stipend:!0,scholarshipType:"scholarships"}}},data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_STIPTOETUS]}}).when("/scholarships/applications/:type/annul",{templateUrl:"scholarship/scholarship.application.annul.edit.html",controller:"ScholarshipRejectionController",controllerAs:"controller",resolve:{auth:["AuthResolver",function(a){return a.resolve()}],translationLoaded:["$translate",function(a){return a.onReady()}],params:function(){return{type:"annulApplications"}}},data:{authorizedRoles:[b.ROLE_OIGUS_M_TEEMAOIGUS_STIPTOETUS]}}).when("/scholarships/applications/:type/reject",{templateUrl:"scholarship/scholarship.application.reject.edit.html",controller:"ScholarshipRejectionController",controllerAs:"controller",resolve:{auth:["AuthResolver",function(a){return a.resolve()}],translationLoaded:["$translate",function(a){return a.onReady()}],params:function(){return{type:"rejectApplications"}}},data:{authorizedRoles:[b.ROLE_OIGUS_M_TEEMAOIGUS_STIPTOETUS]}}).when("/scholarships/decision/:type",{templateUrl:"scholarship/scholarship.decision.edit.html",controller:"ScholarshipDecisionController",controllerAs:"controller",resolve:{auth:["AuthResolver",function(a){return a.resolve()}],translationLoaded:["$translate",function(a){return a.onReady()}]},data:{authorizedRoles:[b.ROLE_OIGUS_M_TEEMAOIGUS_STIPTOETUS]}}).when("/scholarships/decision/:type/:id",{templateUrl:"scholarship/scholarship.decision.view.html",controller:"ScholarshipDecisionViewController",controllerAs:"controller",resolve:{auth:["AuthResolver",function(a){return a.resolve()}],translationLoaded:["$translate",function(a){return a.onReady()}]},data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_STIPTOETUS]}}).when("/scholarships/applications/:id",{templateUrl:"scholarship/student/scholarship.application.edit.html",controller:"StudentScholarshipApplicationViewController",controllerAs:"controller",resolve:{auth:["AuthResolver",function(a){return a.resolve()}],translationLoaded:["$translate",function(a){return a.onReady()}]},data:{authorizedRoles:[b.ROLE_OIGUS_V_TEEMAOIGUS_OPPUR]}})}]),angular.module("hitsaOis").factory("ScholarshipUtils",["$location","dialogService",function(a,b){function c(b){a.url(d+"/"+b+"/edit")}var d="/scholarships";return{changeStipend:function(a,d,e){var f;f=-1!==["STIPTOETUS_POHI","STIPTOETUS_ERI","STIPTOETUS_SOIDU","STIPTOETUS_DOKTOR"].indexOf(d)?"stipend.confirmations.grantIsPublishedChange":"stipend.confirmations.scholarshipIsPublishedChange",e?b.confirmDialog({prompt:f},function(){c(a)}):c(a)},getScholarshipTypeGroup:function(a){return-1!==["STIPTOETUS_POHI","STIPTOETUS_ERI","STIPTOETUS_SOIDU"].indexOf(a)?"grants":-1!==["STIPTOETUS_TULEMUS","STIPTOETUS_ERIALA","STIPTOETUS_MUU"].indexOf(a)?"scholarships":-1!==["STIPTOETUS_DOKTOR"].indexOf(a)?"drGrants":void 0}}}]),angular.module("hitsaOis").controller("ScholarshipEditController",["$scope","$rootScope","Classifier","$location","message","QueryUtils","dialogService","$route",function(a,b,c,d,e,f,g,h){function i(){a.formState.committees=f.endpoint(o+"/committees").query({validDate:a.stipend.applicationEnd,curriculums:a.stipend.curriculums.map(function(a){return a.id})})}function j(b){a.formState.allowedStipendTypes=[b.type],a.stipend=b,a.stipendTypeChanged(),a.applicationEndChanged(),a.stipendForm.$setPristine()}function k(){return a.stipendForm.$setSubmitted(),a.stipendForm.$valid?!angular.isArray(a.stipend.curriculums)||a.stipend.curriculums.length<1?(e.error("stipend.messages.error.curriculumsEmtpy"),!1):!0:(e.error("main.messages.form-has-errors"),!1)}var l={STIPTOETUS_POHI:"scholarship/term/scholarship.pohi.edit.html",STIPTOETUS_ERI:"scholarship/term/scholarship.eri.edit.html",STIPTOETUS_SOIDU:"scholarship/term/scholarship.soidu.edit.html",STIPTOETUS_DOKTOR:"scholarship/term/scholarship.doktor.edit.html",STIPTOETUS_ERIALA:"scholarship/term/scholarship.scho.edit.html",STIPTOETUS_MUU:"scholarship/term/scholarship.scho.edit.html",STIPTOETUS_TULEMUS:"scholarship/term/scholarship.scho.edit.html"};a.filteredStudyForm=["OPPEVORM_P","OPPEVORM_Q","OPPEVORM_S","OPPEVORM_MS","OPPEVORM_K","OPPEVORM_M"],a.formState={priorities:c.queryForDropdown({mainClassCode:"PRIORITEET"})};var m=c.queryForDropdown({mainClassCode:"STIPTOETUS"}).$promise;m.then(function(b){a.formState.typeMap=c.toMap(b)});var n=h.current.params.id,o="/scholarships",p=f.endpoint(o);a.stipendTypeChanged=function(){a.templateName=l[a.stipend.type],m.then(function(){a.stipend.nameEt||(a.stipend.nameEt=(a.formState.typeMap[a.stipend.type]||{}).nameEt),angular.isArray(a.formState.allowedStipendTypes)&&1===a.formState.allowedStipendTypes.length&&(a.formState.typeIsScholarship=-1!==["STIPTOETUS_ERIALA","STIPTOETUS_MUU","STIPTOETUS_TULEMUS"].indexOf(a.formState.allowedStipendTypes[0]))})},a.applicationEndChanged=function(){i()},n?a.stipend=p.get({id:n},j):(a.stipend=new p({}),a.formState.allowedStipendTypes=h.current.locals.params.allowedStipendTypes,a.formState.typeIsScholarship=h.current.locals.params.typeIsScholarship,1===a.formState.allowedStipendTypes.length&&(a.stipend.type=a.formState.allowedStipendTypes[0],a.stipendTypeChanged()),a.stipend.courses=["KURSUS_1","KURSUS_2","KURSUS_3","KURSUS_4"],a.missingCurriculums=!0),a.update=function(){k()&&(a.stipend.id?a.stipend.$update().then(j).then(e.updateSuccess)["catch"](angular.noop):a.stipend.$save().then(function(){e.info("main.messages.create.success"),d.url(o+"/"+a.stipend.id+"/edit?_noback")})["catch"](angular.noop))},a.$watch("formState.curriculum",function(){if(angular.isDefined(a.formState.curriculum)&&null!==a.formState.curriculum){if(angular.isArray(a.stipend.curriculums)||(a.stipend.curriculums=[]),a.stipend.curriculums.some(function(b){return b.id===a.formState.curriculum.id}))return e.error("stipend.messages.error.duplicateCurriculum"),void(a.formState.curriculum=void 0);a.stipend.curriculums.push(a.formState.curriculum),a.stipend.curriculums.length>0&&(a.missingCurriculums=!1),a.formState.curriculum=void 0,i()}}),a.deleteCurriculum=function(b){var c=a.stipend.curriculums.indexOf(b);-1!==c&&a.stipend.curriculums.splice(c,1),0===a.stipend.curriculums.length&&(a.missingCurriculums=!0),i()},a.publish=function(){g.confirmDialog({prompt:"stipend.confirmations.saveAndPublish"},function(){k()&&a.stipend.$update({},function(){f.endpoint(o+"/"+a.stipend.id+"/publish").put({},function(){h.reload()})})["catch"](angular.noop)})},a["delete"]=function(){var b,c;-1!==["STIPTOETUS_POHI","STIPTOETUS_ERI","STIPTOETUS_SOIDU"].indexOf(a.stipend.type)?(b="stipend.confirmations.deleteGrant",c="/scholarships/grants"):(b="stipend.confirmations.deleteStipend",c="/scholarships/scholarships"),g.confirmDialog({prompt:b},function(){f.endpoint(o+"/"+a.stipend.id+"/deleteTerm")["delete"]({},function(){d.url(c+"?_noback")}).$promise["catch"](angular.noop)})},a.averageMarkPriorityFilter=function(b){var c=[a.stipend.lastPeriodMarkPriority,a.stipend.curriculumCompletionPriority,a.stipend.maxAbsencesPriority];return-1===c.indexOf(b.code)},a.lastPeriodMarkPriorityFilter=function(b){var c=[a.stipend.averageMarkPriority,a.stipend.curriculumCompletionPriority,a.stipend.maxAbsencesPriority];return-1===c.indexOf(b.code)},a.curriculumCompletionPriorityFilter=function(b){var c=[a.stipend.averageMarkPriority,a.stipend.lastPeriodMarkPriority,a.stipend.maxAbsencesPriority];return-1===c.indexOf(b.code)},a.maxAbsencesPriorityFilter=function(b){var c=[a.stipend.averageMarkPriority,a.stipend.lastPeriodMarkPriority,a.stipend.curriculumCompletionPriority];return-1===c.indexOf(b.code)}}]).controller("ScholarshipViewController",["dialogService","Classifier","$scope","$location","message","QueryUtils","$route","AuthService","USER_ROLES","ScholarshipUtils",function(a,b,c,d,e,f,g,h,i,j){function k(a){c.stipend=a,c.templateName=l[a.type],c.formState.typeIsScholarship=-1!==["STIPTOETUS_ERIALA","STIPTOETUS_MUU","STIPTOETUS_TULEMUS"].indexOf(a.type),c.curriculumsDisplay=a.curriculums.map(c.currentLanguageNameField),f.endpoint("/autocomplete/studyPeriodsWithYear").query(function(a){c.formState.readonlyStudyPeriod=a.find(function(a){return a.id===c.stipend.studyPeriod})}),f.endpoint(n+"/committees").query(function(a){c.formState.committee=a.find(function(a){return a.id===c.stipend.committee})})}var l={STIPTOETUS_POHI:"scholarship/term/scholarship.pohi.view.html",STIPTOETUS_ERI:"scholarship/term/scholarship.eri.view.html",STIPTOETUS_SOIDU:"scholarship/term/scholarship.soidu.view.html",STIPTOETUS_DOKTOR:"scholarship/term/scholarship.doktor.view.html",STIPTOETUS_ERIALA:"scholarship/term/scholarship.scho.view.html",STIPTOETUS_MUU:"scholarship/term/scholarship.scho.view.html",STIPTOETUS_TULEMUS:"scholarship/term/scholarship.scho.view.html"};c.canEdit=h.isAuthorized(i.ROLE_OIGUS_M_TEEMAOIGUS_STIPTOETUS),c.formState={};var m=g.current.params.id,n="/scholarships",o=f.endpoint(n);c.publish=function(){a.confirmDialog({prompt:"stipend.confirmations.publish"},function(){f.endpoint(n+"/"+c.stipend.id+"/publish").put({},function(a){k(a)})["catch"](angular.noop)})},m&&(c.stipend=o.get({id:m},k)),c.changeStipend=function(a){j.changeStipend(a.id,a.type,a.isOpen)}}]),angular.module("hitsaOis").controller("ScholarshipSearchController",["$scope","$q","$route","message","Classifier","QueryUtils","USER_ROLES","AuthService","ScholarshipUtils",function(a,b,c,d,e,f,g,h,i){a.canEdit=h.isAuthorized(g.ROLE_OIGUS_M_TEEMAOIGUS_STIPTOETUS);var j="/scholarships";a.allowedStipendTypes=c.current.locals.params.allowedStipendTypes;var k=e.valuemapper({type:"STIPTOETUS"});a.formState={},a.statuses=[{id:0,nameEt:"Sisestamisel"},{id:1,nameEt:"Avalik"}],f.createQueryForm(a,j,{order:"id",allowedStipendTypes:a.allowedStipendTypes},k.objectmapper);var l=a.clearCriteria;a.clearCriteria=function(){l(),a.criteria.allowedStipendTypes=a.allowedStipendTypes},c.current.locals.params.scholarship?(a.formState.typeIsScholarship=!0,a.scholarshipType="scholarship"):c.current.locals.params.grant?a.scholarshipType="grant":c.current.locals.params.scholarshipType&&(a.scholarshipType=c.current.locals.params.scholarshipType);var m=a.$watch("criteria.studyPeriod",function(c){angular.isNumber(c)&&(m(),b.all(k.promises).then(a.loadData))});a.changeStipend=function(a){i.changeStipend(a.id,a.type.code,a.isOpen)}}]),angular.module("hitsaOis").controller("ScholarshipApplicationController",["Classifier","$scope","$location","message","QueryUtils","$route","DataUtils","$q","$sessionStorage","AuthService","USER_ROLES",function(a,b,c,d,e,f,g,h,i,j,k){function l(){return b.applications.filter(function(a){return b.selected[a.id]}).map(function(a){return a.id})}function m(){return b.applications.map(function(a){return a.id})}var n="/scholarships";b.criteria={},b.formState={},b.formState.allowedStipendTypes=f.current.locals.params.allowedStipendTypes,b.scholarshipType=f.current.locals.params.scholarshipType;var o=f.current.locals.params.stipend;b.auth=f.current.locals.auth,b.canManage=j.isAuthorized(k.ROLE_OIGUS_M_TEEMAOIGUS_STIPTOETUS),b.isStudentGroupTeacher=b.auth.isTeacher()&&b.auth.teacherGroupIds.length>0,b.applicationsTable={showSelect:!0},b.selected={},b.studyPeriods=e.endpoint("/autocomplete/studyPeriods").query();var p=a.valuemapper({status:"STIPTOETUS_STAATUS",type:"STIPTOETUS",compensationFrequency:"STIPTOETUS_HYVITAMINE",compensationReason:"STIPTOETUS_HYVITAMINE_POHJUS"}),q=p.promises;q.push(b.studyPeriods.$promise),h.all(q).then(function(){if(b.studyPeriods.length>0&&!b.criteria.studyPeriod){var a=g.getCurrentStudyYearOrPeriod(b.studyPeriods);b.criteria.studyPeriod=a?a.id:void 0}if(!("_menu"in f.current.params)){b.fromStorage=function(a){return JSON.parse(i[a]||"{}")};var c=b.fromStorage(f.current.originalPath);angular.isNumber(c.page)&&(c.page=c.page+1),angular.extend(b.criteria,c)}}),angular.element(document).ready(function(){b.applicationSearchForm.$setSubmitted(),b.applicationSearchForm.$valid?b.reloadTable():window.setTimeout(function(){b.applicationSearchForm.$setSubmitted(),b.applicationSearchForm.$valid&&b.reloadTable()},500)}),b.toStorage=function(a,b){i[a]=JSON.stringify(b)},b.reloadTable=function(){return b.applicationSearchForm.$setSubmitted(),b.applicationSearchForm.$valid?void e.endpoint(n+"/applications").search(b.criteria,function(a){angular.isArray(a.applications)?a.applications.length<1?(d.info("main.messages.error.notFound"),b.applications=[],b.allowedCount=0):(b.applications=p.objectmapper(a.applications),b.allowedCount=a.allowedCount):(d.info("main.messages.error.notFound"),b.applications=[],b.allowedCount=0),b.submittedType=b.criteria.type,b.toStorage(f.current.originalPath,b.criteria)}):(d.error("main.messages.form-has-errors"),!1)},b.updateAllApplicationCheckBoxes=function(a){b.applications.forEach(function(c,d){(d<b.allowedCount||!angular.isNumber(b.allowedCount))&&(c.needsConfirm&&b.auth.isTeacher()?b.selected[c.id]=a:b.auth.isTeacher()||c.hasDirective||(b.selected[c.id]=a))})},b.clearCriteria=function(){b.criteria={}},b.isNumber=angular.isNumber,b.accept=function(){var a=l();a.length>0?e.endpoint(n+"/acceptApplications").put(a,b.reloadTable):d.error("stipend.messages.error.noStudentsSelected")},b.annul=function(){var a=l();a.length>0?c.path("/scholarships/applications/"+b.scholarshipType+"/annul").search({ids:a,stipend:o}):d.error("stipend.messages.error.noStudentsSelected")},b.reject=function(){var a=l();a.length>0?c.path("/scholarships/applications/"+b.scholarshipType+"/reject").search({ids:a,stipend:o}):d.error("stipend.messages.error.noStudentsSelected")},b.teacherConfirm=function(a){var c=l();c.length>0?e.endpoint(n+"/teacherConfirmApplications/"+a).put(c,b.reloadTable):d.error("stipend.messages.error.noStudentsSelected")},b.refreshResults=function(){var a=m();a.length>0&&e.endpoint(n+"/refreshResults").put(a,b.reloadTable)},b.checkComplies=function(){var a=m();a.length>0&&e.endpoint(n+"/checkComplies").save(a,function(a){b.applications.forEach(function(b){b.nonCompliant=!a[b.id]})})},b.committeeDecision=function(){var a=l();a.length>0?e.endpoint(n+"/decision/canCreate").get({ids:a},function(e){e.canCreate?c.path("/scholarships/decision/"+b.scholarshipType).search({ids:a,stipend:o}):d.error("stipend.messages.error.cannotCreateDecision")}):d.error("stipend.messages.error.noStudentsSelected")};var r;b.resetCurriculum=function(){"STIPTOETUS_POHI"===r&&(b.criteria.curriculum=[]),r=b.criteria.type}}]).controller("ScholarshipRejectionController",["dialogService","Classifier","$scope","$location","message","QueryUtils","$route","ArrayUtils",function(a,b,c,d,e,f,g,h){var i="/scholarships";c.scholarshipType=g.current.params.type,f.endpoint(i+"/studentProfilesRejection").query({id:g.current.params.ids},function(a){angular.isArray(a)&&(a.length<1?e.info("main.messages.error.notFound"):c.rejections=a)}),c.reject=function(){f.endpoint(i+"/rejectApplications").put({applications:c.rejections},function(){e.info("main.messages.update.success"),d.path("/scholarships/applications/"+c.scholarshipType)})},c.annul=function(){f.endpoint(i+"/annulApplications").put({applications:c.rejections},function(){e.info("main.messages.update.success"),d.path("/scholarships/applications/"+c.scholarshipType)})},c.removeFromArray=h.remove}]).controller("ScholarshipDecisionController",["$scope","$location","$q","message","QueryUtils","$route","Classifier",function(a,b,c,d,e,f,g){function h(a){return a?a.filter(function(a){return a.isPresent}).map(function(a){return a.id}):[]}var i="/scholarships";a.scholarshipType=f.current.params.type,a.formState={committees:e.endpoint(i+"/committees").query()};var j=g.valuemapper({status:"STIPTOETUS_STAATUS",type:"STIPTOETUS",compensationFrequency:"STIPTOETUS_HYVITAMINE",compensationReason:"STIPTOETUS_HYVITAMINE_POHJUS"});e.endpoint(i+"/decision").get({ids:f.current.params.ids},function(b){a.formState.committee=b.committeeId,a.selectedCommitteeChanged(),a.submittedType=b.applications[0].type,c.all(j.promises).then(function(){a.applications=j.objectmapper(b.applications)})}),a.selectedCommitteeChanged=function(){a.formState.committee&&e.endpoint("/committees").get({id:a.formState.committee},function(b){a.formState.committeeMembers=b.members})},a.decide=function(){return a.decisionForm.$setSubmitted(),a.decisionForm.$valid?(angular.extend(a.decision,{presentCommitteeMembers:h(a.formState.committeeMembers),applicationIds:f.current.params.ids}),void e.endpoint(i+"/decide").save(a.decision,function(){d.info("main.messages.update.success"),b.path("/scholarships/applications/"+a.scholarshipType)})):void d.error("main.messages.form-has-errors")}}]).controller("ScholarshipDecisionViewController",["$scope","$location","$q","message","QueryUtils","$route","Classifier","dialogService",function(a,b,c,d,e,f,g,h){var i="/scholarships/decision";a.auth=f.current.locals.auth,a.scholarshipType=f.current.params.type;var j=f.current.params.id,k=e.endpoint(i),l=g.valuemapper({status:"STIPTOETUS_STAATUS",type:"STIPTOETUS",compensationFrequency:"STIPTOETUS_HYVITAMINE",compensationReason:"STIPTOETUS_HYVITAMINE_POHJUS"});a.decision=k.get({id:j},function(b){a.decision.committee=b.committeeId,a.submittedType=b.applications[0].type,c.all(l.promises).then(function(){a.applications=l.objectmapper(b.applications)}),e.endpoint("/committees").get({id:a.decision.committee},function(c){a.decision.committeeMembers=c.members,b.presentCommitteeMembers&&a.decision.committeeMembers.forEach(function(a){-1!==b.presentCommitteeMembers.indexOf(a.id)&&(a.isPresent=!0)})})}),a["delete"]=function(){h.confirmDialog({prompt:"stipend.decision.deleteconfirm"},function(){a.decision.$delete().then(function(){d.info("main.messages.delete.success"),a.back("/scholarships/applications/"+a.scholarshipType)})["catch"](angular.noop)})}}]),angular.module("hitsaOis").controller("StudentScholarshipController",["dialogService","Classifier","$scope","$location","message","QueryUtils","$route","DataUtils","ArrayUtils","$q",function(a,b,c,d,e,f,g,h,i,j){var k="/scholarships",l=g.current.locals.drGrant,m=b.valuemapper({type:"STIPTOETUS",status:"STIPTOETUS_STAATUS"});j.all(m.promises).then(function(){var a=f.endpoint(k+(l?"/availableDrGrants":"/availableStipends")).query({},function(a){m.objectmapper(a),c.possibleStipends=a}).$promise,b=f.endpoint(k+(l?"/studentDrGrants":"/studentStipends")).query({},function(a){m.objectmapper(a),c.studentStipends=a}).$promise;j.all([a,b]).then(function(){c.possibleStipends.forEach(function(a){var b=c.studentStipends.find(function(b){return b.termId===a.id});b?a.canApply=!1:a.canApply=!0})})})}]),angular.module("hitsaOis").controller("StudentScholarshipApplicationEditController",["dialogService","Classifier","$scope","$location","message","QueryUtils","$route","oisFileService","ArrayUtils",function(a,b,c,d,e,f,g,h,i){function j(a){return a.$setSubmitted(),c.application.family&&c.application.family.length>c.application.familyMembersAdult?(e.error("stipend.family.deleteRows"),!1):a.$valid?!0:(e.error("main.messages.form-has-errors"),!1)}function k(a){a.canApply=null===a.id||"STIPTOETUS_STAATUS_K"===a.status||"STIPTOETUS_STAATUS_T"===a.status,c.application=a}var l={STIPTOETUS_POHI:"scholarship/student/scholarship.application.pohi.edit.html",STIPTOETUS_ERI:"scholarship/student/scholarship.application.eri.edit.html",STIPTOETUS_SOIDU:"scholarship/student/scholarship.application.soidu.edit.html",STIPTOETUS_DOKTOR:"scholarship/student/scholarship.application.doktor.edit.html",STIPTOETUS_ERIALA:"scholarship/student/scholarship.application.scho.edit.html",STIPTOETUS_MUU:"scholarship/student/scholarship.application.scho.edit.html",STIPTOETUS_TULEMUS:"scholarship/student/scholarship.application.scho.edit.html"};c.application={};var m="/scholarships";c.editable=!0;var n=g.current.params.id;f.endpoint(m+"/"+n+"/application").get({},function(a){c.stipend=a.stipend,c.templateName=l[a.stipend.type],"STIPTOETUS_ERI"===a.stipend.type&&calculateSumsForFamilyBlock(c.application.family),a.application.compensationFrequency||(a.application.compensationFrequency="STIPTOETUS_HYVITAMINE_1"),k(a.application)}),c.openAddFileDialog=function(){a.showDialog("components/file.add.dialog.html",function(a){a.addedFiles=c.application.files},function(a){var b=a.data;h.getFromLfFile(b.file[0],function(a){c.application.files.push(a)})})},c.removeFile=function(a,b){i.remove(a,b)},c.compensationFrequencies=b.queryForDropdown({mainClassCode:"STIPTOETUS_HYVITAMINE"}),c.getUrl=h.getUrl,c.removeFromArray=i.remove,c.isNumber=angular.isNumber,c.apply=function(b){a.confirmDialog({prompt:"stipend.confirmations.apply"},function(){c.update(b,function(a){f.endpoint(m+"/apply").update({id:a.id},function(a){e.info("stipend.messages.applicationSuccessful"),d.url(m+"/applications/"+a.id+"?_noback")})})})},c.update=function(a,b){j(a)&&(c.application.id?f.endpoint(m+"/"+n+"/application").update(c.application,function(c){b?b(c):(k(c),e.updateSuccess(),a.$setPristine())}):f.endpoint(m+"/"+n+"/application").save(c.application,function(a){b?b(a):(e.info("main.messages.create.success"),d.url(m+"/"+c.stipend.id+"/application?_noback"))}))},c.addFamilyMember=function(){angular.isArray(c.application.family)||(c.application.family=[]),c.application.family.length<c.application.familyMembersAdult?a.showDialog("scholarship/student/scholarship.family.addMember.html",function(){},function(a){var b=a.member;a.member.sum=[b.netSalary,b.pension,b.stateBenefit,b.otherIncome,b.unemployedBenefit].reduce(function(a,b){return isNaN(b)?a:a+b},0),c.application.family.push(a.member)}):e.error("stipend.family.errorWithMembers")}}]).controller("StudentScholarshipApplicationViewController",["dialogService","Classifier","$scope","$location","message","QueryUtils","$route","oisFileService","AuthService",function(a,b,c,d,e,f,g,h,i){function j(){f.endpoint(l+"/application/"+m).get({},function(a){c.stipend=a.stipend,c.application=a.application,c.templateName=k[a.stipend.type],"STIPTOETUS_ERI"===a.stipend.type&&calculateSumsForFamilyBlock(c.application.family),c.canManage=i.isAuthorized("ROLE_OIGUS_M_TEEMAOIGUS_STIPTOETUS")&&"STIPTOETUS_STAATUS_A"!==a.application.status})}var k={STIPTOETUS_POHI:"scholarship/student/scholarship.application.pohi.view.html",STIPTOETUS_ERI:"scholarship/student/scholarship.application.eri.view.html",STIPTOETUS_SOIDU:"scholarship/student/scholarship.application.soidu.view.html",STIPTOETUS_DOKTOR:"scholarship/student/scholarship.application.doktor.view.html",STIPTOETUS_ERIALA:"scholarship/student/scholarship.application.scho.view.html",STIPTOETUS_MUU:"scholarship/student/scholarship.application.scho.view.html",STIPTOETUS_TULEMUS:"scholarship/student/scholarship.application.scho.view.html"};c.getUrl=h.getUrl,c.isNumber=angular.isNumber,c.editable=!1;var l="/scholarships",m=g.current.params.id;c.isStudent=g.current.locals.auth.isStudent,j(),c.compensationFrequencies=b.queryForDropdown({mainClassCode:"STIPTOETUS_HYVITAMINE"}),c.accept=function(){f.endpoint(l+"/acceptApplications").put([m],function(){j()})}}]),angular.module("hitsaOis").run(["$templateCache",function(a){a.put("academicCalendar/academic.calendar.school.list.html",'<div layout-padding class="schoolList"> <md-grid-list md-cols="1" md-cols-sm="2" md-cols-md="3" md-cols-gt-md="6" md-row-height-gt-md="1:1" md-row-height="4:3" md-gutter="24px" md-gutter-gt-sm="24px"> <md-grid-tile ng-repeat="school in schools" md-colspan="1"> <button class="schoolTileButton" ng-click="openSchoolAcademicCalendar(school.id)"> <img class="schoolTileImage" ng-src="data:image/JPEG;base64,{{school.logo}}" on-error-src="images/HITSA_innov_logo_03.4e2f45c0.png"> <md-grid-tile-footer class="schoolTileFooter"> <span>{{currentLanguageNameField(school)}}</span> </md-grid-tile-footer> </button> </md-grid-tile> </md-grid-list> </div>'),a.put("academicCalendar/academic.calendar.view.html",'<div layout-padding> <div flex ng-if="data.events.length > 0"> <h2 class="md-title"> <span ng-if="schoolId">{{currentLanguageNameField(data.school)}}</span> <hois-classifier-value ng-model="data.yearCode" main-classifier-code="OPPEAASTA"></hois-classifier-value> {{\'academicCalendar.studyYear\' | translate}} </h2> <md-table-container> <table md-table md-progress="endpoint.$promise"> <thead md-head> <tr md-row> <th md-column width="20%">{{\'academicCalendar.date\' | translate}}</th> <th md-column width="20%">{{\'academicCalendar.description\' | translate}}</th> <th md-column width="60%">{{\'academicCalendar.type\' | translate}}</th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="row in data.events" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell ng-if="!row.endDate">{{row.startDate | hoisTimestamp}}</td> <td md-cell ng-if="row.endDate">{{row.startDate | hoisTimestamp}} - {{row.endDate | hoisTimestamp}}</td> <td md-cell> <span ng-if="!row.eventType">{{currentLanguageNameField(row)}}</span> <span ng-if="row.eventType"> <span ng-if="row.eventType == 1"> {{currentLanguageNameField(row)}} ({{\'academicCalendar.beginning\' | translate}}) </span> <span ng-if="row.eventType == 2"> {{currentLanguageNameField(row)}} ({{\'academicCalendar.end\' | translate}}) </span> </span> </td> <td md-cell> <hois-classifier-value ng-if="!row.eventType" ng-model="row.eventTypeCode" main-classifier-code="SYNDMUS"></hois-classifier-value> <span ng-if="row.eventType">{{\'academicCalendar.studyPeriod\' | translate}}</span> </td> </tr> </tbody> </table> </md-table-container> </div> <div flex ng-if="!data.events || data.events.length == 0"> <md-whiteframe class="md-whiteframe-1dp attention-whiteframe" flex="100" layout layout-align="left center"> <div md-colors="{color: \'warn\'}"> <md-icon md-colors="{color: \'warn\'}" md-font-set="material-icons">info_outline</md-icon> <span>{{\'academicCalendar.notFound\' | translate}}</span> </div> </md-whiteframe> </div> <div ng-if="schoolId" layout="row"> <md-button ng-click="back(\'#/academicCalendars/\')" class="md-raised">{{\'main.button.back\' | translate}}</md-button> </div> </div>'),a.put("apelApplication/apel.application.edit.html",'<div class="ois-form-layout-padding ois-form-layout" ng-cloak> <div flex> <form name="apelApplicationForm" ng-submit="save()" novalidate> <div ng-hide="application.student" layout="row" layout-sm="column" layout-xs="column"> <div flex="45" flex-sm="100" flex-xs="100"> <hois-autocomplete flex ng-model="application.student" method="students" name="student" label="apel.student" additional-query-params="{active: true}"></hois-autocomplete> </div> </div> <div ng-hide="!application.student"> <div ng-include="\'apelApplication/templates/apel.application.information.html\'"></div> </div> <div ng-hide="!application.student"> <fieldset> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'apel.formalLearnings.labelWithSubTitle\' | translate}}</legend> <span ng-if="application.isVocational" ng-repeat="record in application.records | filter:{isFormalLearning: true} | orderBy:\'id\'"> <div ng-include="\'apelApplication/templates/apel.application.formal.learning.vocational.list.html\'" style="margin-bottom: 20px"></div> </span> <div ng-if="!application.isVocational" ng-include="\'apelApplication/templates/apel.application.formal.learning.higher.list.html\'" style="margin-bottom: 20px"></div> <md-button ng-if="application.status === \'VOTA_STAATUS_K\'" class="md-raised md-default" ng-click="editFormalLearning()">{{\'main.button.create\' | translate}}</md-button> </fieldset> </div> <div>&nbsp;</div> <div ng-hide="!application.student"> <fieldset> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'apel.informalLearnings.labelWithSubTitle\' | translate}}</legend> <span ng-repeat="record in application.records | filter:{isFormalLearning: false} | orderBy:\'id\'"> <div ng-if="application.isVocational" ng-include="\'apelApplication/templates/apel.application.informal.learning.vocational.list.html\'" style="margin-bottom: 20px"></div> <div ng-if="!application.isVocational" ng-include="\'apelApplication/templates/apel.application.informal.learning.higher.list.html\'" style="margin-bottom: 20px"></div> </span> <md-button ng-if="application.status === \'VOTA_STAATUS_K\'" class="md-raised md-default" ng-click="editInformalLearning()">{{\'main.button.create\' | translate}}</md-button> </fieldset> </div> <div>&nbsp;</div> <div ng-hide="!application.student" layout="column" flex> <fieldset> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'apel.addInfo.addInfos\' | translate}}</legend> <md-button ng-if="editing" class="md-raised" ng-click="openEditCommentDialog()">{{\'main.button.create\' | translate}}</md-button> <md-table-container> <table md-table md-progress="tabledata.$promise" class="secondary-table"> <thead md-head> <tr md-row> <th md-column width="55%">{{\'apel.addInfo.label\' | translate}}</th> <th md-column width="20%">{{\'apel.addInfo.additionDate\' | translate}}</th> <th md-column width="20%">{{\'apel.addInfo.addedBy\' | translate}}</th> <th md-column width="5%"></th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="comment in application.comments | orderBy: \'inserted\'" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell>{{comment.addInfo}}</td> <td md-cell>{{comment.inserted | hoisDateTime}}</td> <td md-cell>{{comment.insertedBy}}</td> <td md-cell></td> </tr> </tbody> </table> </md-table-container> </fieldset> </div> <div>&nbsp;</div> <div ng-hide="!application.student" layout="column" flex> <fieldset> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'main.relatedFiles\' | translate}}</legend> <md-button class="md-raised" ng-if="editing" ng-click="openAddFileDialog()">{{\'main.button.uploadFile\' | translate}}</md-button> <md-table-container> <table md-table class="secondary-table"> <thead md-head> <tr md-row> <th md-column width="55%"> <span>{{\'file.nameAndFile\' | translate}}</span> </th> <th md-column width="20%"> <span>{{\'file.additionDate\' | translate}}</span> </th> <th md-column width="20%">{{\'file.addedBy\' | translate}}</th> <th md-column width="5%"></th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="file in application.files | orderBy: \'id\'" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell> <div layout="row" flex> <div> {{file.oisFile.fname}} </div> <div flex> <a ng-href="{{getUrl(file.oisFile, \'apelapplication\')}}" target="_blank" rel="noopener noreferrer"> <md-icon md-font-set="material-icons">file_download</md-icon> </a> </div> </div> </td> <td md-cell> {{file.inserted | hoisDateTime}} </td> <td md-cell> {{file.insertedBy}} </td> <td md-cell> <a class="remove nomargin" ng-if="editing" ng-click="deleteFile(file)">&times;</a> </td> </tr> </tbody> </table> </md-table-container> </fieldset> </div> <div>&nbsp;</div> <div ng-if="(application.status !== \'VOTA_STAATUS_K\' && auth.isAdmin()) || application.committee || application.decision"> <fieldset> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'apel.committee \' | translate}}</legend> <div ng-if="application.status === \'VOTA_STAATUS_E\'" flex="45" flex-sm="100" flex-xs="100"> <md-input-container style="width: 100%"> <label>{{\'apel.committee\' | translate}}</label> <hois-select ng-model="application.committeeId" values="committees" required></hois-select> </md-input-container> </div> <div ng-if="application.status !== \'VOTA_STAATUS_E\'" layout="column" class="form-readonly"> <div>&nbsp;</div> <md-input-container> <label>{{\'apel.committee\' | translate}}</label> <hois-value value="currentLanguageNameField(application.committee)"></hois-value> </md-input-container> </div> <div ng-if="application.decision" layout="column" flex> <md-input-container flex> <label>{{\'apel.decision\' | translate}}</label> <textarea ng-model="application.decision" md-maxlength="4000" max-rows="5" readonly></textarea> </md-input-container> </div> </fieldset> </div> <div>&nbsp;</div> <div ng-if="application.student" layout="row" layout-xs="column"> <md-button class="md-raised md-primary" ng-if="canChangeTransferStatus" type="submit">{{\'main.button.save\' | translate}}</md-button> <md-button class="md-raised md-default" ng-if="(auth.isStudent() || auth.isAdmin()) && application.status === \'VOTA_STAATUS_K\'" ng-click="submit()">{{\'main.button.submit\' | translate}}</md-button> <md-button class="md-raised md-default" ng-if="(auth.isStudent() || auth.isAdmin()) && application.status === \'VOTA_STAATUS_K\'" ng-click="delete()">{{\'main.button.delete\' | translate}}</md-button> <md-button class="md-raised md-default" ng-if="application.canSendToConfirm" ng-click="sendToConfirm()">{{\'apel.sendToConfirm\' | translate}}</md-button> <md-button class="md-raised md-default" ng-if="application.canSendToCommittee" ng-click="sendToCommittee()" ng-disabled="!application.committeeId">{{\'apel.sendToCommittee\' | translate}}</md-button> <md-button class="md-raised md-default" ng-if="application.canSendBackToCreation" ng-click="sendBackToCreation()">{{\'apel.sendBackToCreation\' | translate}}</md-button> <md-button class="md-raised md-default" ng-if="application.canConfirm" ng-click="confirm()">{{\'apel.confirm\' | translate}}</md-button> <md-button class="md-raised md-default" ng-if="application.canSendBack" ng-click="sendBack()">{{\'apel.sendBack\' | translate}}</md-button> <md-button class="md-raised md-default" ng-if="application.canReject" ng-click="reject()">{{\'apel.reject\' | translate}}</md-button> <md-button class="md-raised md-default" ng-if="application.canRemoveConfirmation" ng-click="removeConfirmation()">{{\'apel.removeConfirmation\' | translate}}</md-button> <a href="{{applicationPdfUrl}}" target="_blank" class="md-button md-raised">{{\'main.button.print\' | translate}}</a> <md-button class="md-raised md-default" href="/#/apelApplication/">{{\'main.button.back\' | translate}}</md-button> </div> <div ng-if="!application.student" layout="row"> <md-button class="md-raised md-default" ng-click="back(\'/#/apelApplication/\')">{{\'main.button.back\' | translate}}</md-button> </div> </form> </div> </div>'),
a.put("apelApplication/apel.application.list.html",'<div ng-if="auth.isAdmin() || auth.isTeacher()" class="ois-form-layout-padding ois-form-layout" ng-cloak> <div flex> <fieldset> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'main.searchlabel\' | translate}}</legend> <form name="searchForm" ng-submit="loadData()" novalidate> <div layout="row" layout-sm="column" layout-xs="column"> <div flex="45" flex-sm="100" flex-xs="100"> <hois-autocomplete flex ng-model="criteria.studentObject" method="students" name="student" label="apel.student"></hois-autocomplete> </div> <div flex="50" flex-sm="100" flex-xs="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <div layout="column" flex> <div layout="row" flex> <hois-autocomplete flex ng-model="criteria.committeeObject" method="committees" name="committee" additional-query-params="{type: \'KOMISJON_V\', memberPerson: auth.isTeacher() ? auth.user : null}" label="apel.committee"></hois-autocomplete> </div> </div> </div> </div> <div layout="row" layout-sm="column" layout-xs="column"> <div flex="45" flex-sm="100" flex-xs="100"> <div layout="column" flex> <div layout="row" layout-xs="column" flex> <md-input-container> <label>{{\'apel.insertedFrom\' | translate}}</label> <md-datepicker ng-model="criteria.insertedFrom" md-max-date="criteria.insertedThru"></md-datepicker> </md-input-container> <md-input-container flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'apel.insertedThru\' | translate}}</label> <md-datepicker ng-model="criteria.insertedThru" md-min-date="criteria.insertedFrom"></md-datepicker> </md-input-container> </div> </div> </div> <div ng-if="!auth.isTeacher()" flex="45" flex-sm="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <div layout="column" flex> <div layout="row" flex> <md-input-container> <label>{{\'apel.confirmedFrom\' | translate}}</label> <md-datepicker ng-model="criteria.confirmedFrom" md-max-date="criteria.confirmedThru"></md-datepicker> </md-input-container> <md-input-container flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'apel.confirmedThru\' | translate}}</label> <md-datepicker ng-model="criteria.confirmedThru" md-min-date="criteria.confirmedFrom"></md-datepicker> </md-input-container> </div> </div> </div> </div> <div ng-if="!auth.isTeacher()" layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="45" flex-sm="100" flex-xs="100"> <label>{{\'apel.status\' | translate}}</label> <hois-classifier-select multiple ng-model="criteria.status" main-classifier-code="VOTA_STAATUS" model-value-attr="code"></hois-classifier-select> </md-input-container> </div> <div layout="row"> <md-button type="submit" class="md-raised md-primary">{{\'main.button.search\' | translate}}</md-button> <md-button class="md-raised" ng-click="clearCriteria()">{{\'main.button.clear\' | translate}}</md-button> <md-button ng-if="isAuthorized(\'ROLE_OIGUS_M_TEEMAOIGUS_VOTA\')" ng-href="#/apelApplication/new" class="md-raised">{{\'main.button.create\' | translate}}</md-button> </div> <div flex-xs="0" flex-gt-xs="0" flex-gt-sm="50"></div> </form> </fieldset> </div> </div> <div layout-padding ng-if="auth.isStudent()"> <div flex> <md-button ng-href="#/apelApplication/new" class="md-raised">{{\'main.button.create\' | translate}}</md-button> </div> </div> <div layout-padding> <div flex> <md-table-container> <table md-table md-progress="tabledata.$promise"> <thead md-head md-order="criteria.order" md-on-reorder="loadData"> <tr md-row> <th md-column ng-if="!auth.isStudent()" md-order-by="student_lastname, student_firstname">{{\'apel.studentName\' | translate}}</th> <th md-column ng-if="!auth.isStudent()" md-order-by="{{\'curriculum_\' + currentLanguageNameField()}}">{{\'apel.curriculum\' | translate}}</th> <th md-column ng-if="!auth.isTeacher()" md-order-by="application_status">{{\'apel.status\' | translate}}</th> <th md-column md-order-by="inserted">{{\'apel.insertedDate\' | translate}}</th> <th md-column ng-if="!auth.isTeacher()" md-order-by="confirmed">{{\'apel.confirmedDate\' | translate}}</th> <th md-column ng-if="auth.isStudent()"></th> <th md-column></th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="row in tabledata.content" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell ng-if="!auth.isStudent()"> <a ng-href="#/apelApplication/{{row.id}}/view">{{currentLanguageNameField(row.student)}}</a> </td> <td md-cell ng-if="!auth.isStudent()">{{currentLanguageNameField(row.curriculum)}}</td> <td md-cell ng-if="!auth.isTeacher()"> <hois-classifier-value ng-model="row.status" main-classifier-code="VOTA_STAATUS"></hois-classifier-value> </td> <td md-cell>{{row.inserted | hoisDate}}</td> <td md-cell ng-if="!auth.isTeacher()">{{row.confirmed | hoisDate}}</td> <td md-cell ng-if="auth.isStudent()"> <div> <md-button md-no-ink class="md-primary change-button" ng-href="#/apelApplication/{{::row.id}}/view">{{\'main.button.view\' | translate}}</md-button> </div> </td> <td md-cell> <div ng-if="row.canEdit || row.canReview"> <md-button md-no-ink class="md-primary change-button" ng-href="#/apelApplication/{{::row.id}}/edit">{{\'main.button.change\' | translate}}</md-button> </div> </td> </tr> </tbody> </table> </md-table-container> <md-table-pagination md-limit="criteria.size" md-limit-options="[10, 20, 50]" md-page="criteria.page" md-total="{{tabledata.totalElements}}" md-on-paginate="loadData" md-label="{page: \'{{\'main.page\' | translate}}:\', rowsPerPage: \'{{\'main.rowPerPage\' | translate}}:\', of: \'{{\'main.of\' | translate}}\'}" md-page-select></md-table-pagination> </div> </div>'),a.put("apelApplication/apel.application.view.html",'<div class="ois-form-layout-padding ois-form-layout" ng-cloak> <div flex> <div ng-include="\'apelApplication/templates/apel.application.information.html\'"></div> <div> <fieldset> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'apel.formalLearnings.labelWithSubTitle\' | translate}}</legend> <span ng-if="application.isVocational" ng-repeat="record in application.records | filter:{isFormalLearning: true}"> <div ng-include="\'apelApplication/templates/apel.application.formal.learning.vocational.list.html\'" style="margin-bottom: 20px"></div> </span> <div ng-if="!application.isVocational" ng-include="\'apelApplication/templates/apel.application.formal.learning.higher.list.html\'" style="margin-bottom: 20px"></div> </fieldset> </div> <br> <div> <fieldset> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'apel.informalLearnings.labelWithSubTitle\' | translate}}</legend> <span ng-repeat="record in application.records | filter:{isFormalLearning: false}"> <div ng-if="application.isVocational" ng-include="\'apelApplication/templates/apel.application.informal.learning.vocational.list.html\'" style="margin-bottom: 20px"></div> <div ng-if="!application.isVocational" ng-include="\'apelApplication/templates/apel.application.informal.learning.higher.list.html\'" style="margin-bottom: 20px"></div> </span> </fieldset> </div> <br> <div layout="column" flex> <fieldset> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'apel.addInfo.addInfos\' | translate}}</legend> <md-table-container> <table md-table md-progress="tabledata.$promise" class="secondary-table"> <thead md-head> <tr md-row> <th md-column width="60%">{{\'apel.addInfo.label\' | translate}}</th> <th md-column width="20%">{{\'apel.addInfo.additionDate\' | translate}}</th> <th md-column width="20%">{{\'apel.addInfo.addedBy\' | translate}}</th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="comment in application.comments | orderBy: \'inserted\'" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell>{{comment.addInfo}}</td> <td md-cell>{{comment.inserted | hoisDateTime}}</td> <td md-cell>{{comment.insertedBy}}</td> </tr> </tbody> </table> </md-table-container> </fieldset> </div> <br> <div layout="column" flex> <fieldset> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'main.relatedFiles\' | translate}}</legend> <md-table-container> <table md-table class="secondary-table"> <thead md-head> <tr md-row> <th md-column width="60%"> <span>{{\'file.nameAndFile\' | translate}}</span> </th> <th md-column width="20%"> <span>{{\'file.additionDate\' | translate}}</span> </th> <th md-column width="20%">{{\'file.addedBy\' | translate}}</th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="file in application.files | orderBy: \'id\'" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell> <div layout="row" flex> <div> {{file.oisFile.fname}} </div> <div flex> <a ng-href="{{getUrl(file.oisFile, \'apelapplication\')}}" target="_blank" rel="noopener noreferrer"> <md-icon md-font-set="material-icons">file_download</md-icon> </a> </div> </div> </td> <td md-cell> {{file.inserted | hoisDateTime}} </td> <td md-cell> {{file.insertedBy}} </td> </tr> </tbody> </table> </md-table-container> </fieldset> <div>&nbsp;</div> <div ng-if="application.committee || application.decision"> <fieldset> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'apel.committee \' | translate}}</legend> <div layout="column" class="form-readonly"> <div>&nbsp;</div> <md-input-container> <label>{{\'apel.committee\' | translate}}</label> <hois-value value="currentLanguageNameField(application.committee)"></hois-value> </md-input-container> </div> <div layout="column" flex> <md-input-container flex> <label>{{\'apel.decision\' | translate}}</label> <textarea ng-model="application.decision" md-maxlength="4000" max-rows="5" disabled></textarea> </md-input-container> </div> </fieldset> </div> <div>&nbsp;</div> <div layout="row" layout-xs="column"> <md-button ng-if="application.canEdit || application.canReview" class="md-raised md-primary" ng-href="#/apelApplication/{{::applicationId}}/edit">{{\'main.button.edit\' | translate}}</md-button> <md-button class="md-raised md-default" ng-if="application.canSendToConfirm && auth.isAdmin()" ng-click="sendToConfirm()">{{\'apel.sendToConfirm\' | translate}}</md-button> <md-button class="md-raised md-default" ng-if="application.canSendBackToCreation && auth.isAdmin()" ng-click="sendBackToCreation()">{{\'apel.sendBackToCreation\' | translate}}</md-button> <md-button class="md-raised md-default" ng-if="application.canConfirm" ng-click="confirm()">{{\'apel.confirm\' | translate}}</md-button> <md-button class="md-raised md-default" ng-if="application.canSendBack" ng-click="sendBack()">{{\'apel.sendBack\' | translate}}</md-button> <md-button class="md-raised md-default" ng-if="application.canReject && auth.isAdmin()" ng-click="reject()">{{\'apel.reject\' | translate}}</md-button> <md-button class="md-raised md-default" ng-if="application.canRemoveConfirmation" ng-click="removeConfirmation()">{{\'apel.removeConfirmation\' | translate}}</md-button> <a href="{{applicationPdfUrl}}" target="_blank" class="md-button md-raised">{{\'main.button.print\' | translate}}</a> <md-button class="md-raised md-default" ng-click="back(\'/#/apelApplication/\')">{{\'main.button.back\' | translate}}</md-button> </div> </div> </div> </div>'),a.put("apelApplication/apel.school.edit.html",'<div layout="column" layout-padding> <div> <form name="apelSchoolForm"> <md-input-container class="md-block"> <label>{{\'apel.apelSchool.country\' | translate}}</label> <hois-classifier-select ng-model="apelSchool.country" aria-label="country" model-value-attr="code" main-classifier-code="RIIK" required></hois-classifier-select> </md-input-container> <md-input-container class="md-block" ng-if="apelSchool.country === \'RIIK_EST\'"> <label class="textInput">{{\'apel.apelSchool.schoolEHIS\' | translate}}</label> <hois-classifier-select ng-model="apelSchool.ehisSchool" aria-label="ehisSchool" model-value-attr="code" main-classifier-code="EHIS_KOOL" ng-change="ehisSchoolChanged(apelSchool.ehisSchool)" required></hois-classifier-select> </md-input-container> <md-input-container class="md-block"> <label class="textInput">{{\'apel.apelSchool.schoolNameEt\' | translate}}</label> <input ng-model="apelSchool.nameEt" name="nameEt" type="text" md-maxlength="100" required> </md-input-container> <md-input-container class="md-block"> <label class="textInput">{{\'apel.apelSchool.schoolNameEn\' | translate}}</label> <input ng-model="apelSchool.nameEn" name="nameEn" type="text" md-maxlength="100"> </md-input-container> </form> <md-button ng-click="update()" class="md-raised md-primary">{{\'main.button.save\' | translate}}</md-button> <md-button ng-click="delete()" ng-if="apelSchool.id" class="md-raised">{{\'main.button.delete\' | translate}}</md-button> <md-button ng-href="#/apelSchools" class="md-raised">{{\'main.button.back\' | translate}}</md-button> </div> </div>'),a.put("apelApplication/apel.school.list.html",'<div class="ois-form-layout-padding ois-form-layout" ng-cloak> <div flex> <fieldset> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'main.searchlabel\' | translate}}</legend> <form name="searchForm" ng-submit="searchForm.$valid && loadData()" novalidate> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="45" flex-sm="100" flex-xs="100"> <label class="textInput">{{\'apel.apelSchool.schoolNameEt\' | translate}}</label> <input ng-model="criteria.name" name="name" type="text" md-maxlength="255" autofocus> </md-input-container> <md-input-container flex="50" flex-sm="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'apel.apelSchool.country\' | translate}}</label> <hois-classifier-select multiple ng-model="criteria.country" main-classifier-code="RIIK" model-value-attr="code"></hois-classifier-select> </md-input-container> </div> <div layout="row"> <md-button type="submit" class="md-raised md-primary">{{\'main.button.search\' | translate}}</md-button> <md-button class="md-raised" ng-click="clearCriteria()">{{\'main.button.clear\' | translate}}</md-button> <md-button class="md-raised" ng-if="isAuthorized(\'ROLE_OIGUS_M_TEEMAOIGUS_VOTA\')" ng-href="#/apelSchools/new">{{\'main.button.create\' | translate}}</md-button> </div> <div flex-xs="0" flex-gt-xs="0" flex-gt-sm="50"></div> </form> </fieldset> </div> </div> <div layout-padding> <div flex> <md-table-container> <table md-table md-progress="tabledata.$promise"> <thead md-head md-order="criteria.order" md-on-reorder="loadData"> <tr md-row> <th md-column md-order-by="nameEt">{{\'apel.apelSchool.schoolNameEt\' | translate}}</th> <th md-column md-order-by="nameEn">{{\'apel.apelSchool.schoolNameEn\' | translate}}</th> <th md-column md-order-by="countryCode">{{\'apel.apelSchool.country\' | translate}}</th> <th md-column md-order-by="ehisSchoolCode">{{\'apel.apelSchool.schoolEHIS\' | translate}}</th> <th md-column></th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="row in tabledata.content" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell>{{row.nameEt}}</td> <td md-cell>{{row.nameEn}}</td> <td md-cell> <hois-classifier-value ng-model="row.country" main-classifier-code="RIIK"></hois-classifier-value> </td> <td md-cell> <hois-classifier-value ng-model="row.ehisSchool" main-classifier-code="EHIS_KOOL"></hois-classifier-value> </td> <td md-cell> <div> <md-button md-no-ink class="md-primary change-button" ng-if="isAuthorized(\'ROLE_OIGUS_M_TEEMAOIGUS_VOTA\')" ng-href="#/apelSchools/{{::row.id}}/edit">{{\'main.button.change\' | translate}}</md-button> </div> </td> </tr> </tbody> </table> </md-table-container> <md-table-pagination md-limit="criteria.size" md-limit-options="[10, 20, 50]" md-page="criteria.page" md-total="{{tabledata.totalElements}}" md-on-paginate="loadData" md-label="{page: \'{{\'main.page\' | translate}}:\', rowsPerPage: \'{{\'main.rowPerPage\' | translate}}:\', of: \'{{\'main.of\' | translate}}\'}" md-page-select></md-table-pagination> </div> </div>'),a.put("application/application.html",'<div class="ois-form-layout-padding" ng-cloak> <div flex> <form ng-submit="loadData()" layout="column" name="applicationForm"> <div ng-show="!applicationEditView"> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="60" flex-sm="100" flex-xs="100"> <label>{{\'application.type\' | translate}}</label> <hois-classifier-select ng-model="application.type" model-value-attr="code" main-classifier-code="AVALDUS_LIIK" criteria="{higher: auth.school.higher ? true : undefined, vocational: auth.school.vocational ? true : undefined}" ng-change="applicationTypeChange()"></hois-classifier-select> </md-input-container> </div> <div ng-hide="!application.type" layout="row" layout-sm="column" layout-xs="column"> <div flex="60" flex-sm="100" flex-xs="100"> <hois-autocomplete ng-model="application.student" method="students" additional-query-params="studentSearchCriteria" name="student" label="student.label"></hois-autocomplete> </div> </div> </div> <div ng-if="applicationEditView" style="padding-top: 1em"> <div ng-include="\'application/templates/application.html\'"></div> </div> <br> <div ng-show="applicationEditView" layout="row"> <md-button ng-if="application.status === \'AVALDUS_STAATUS_KOOST\' || (application.status === \'AVALDUS_STAATUS_YLEVAAT\' && auth.isAdmin())" class="md-raised md-primary" ng-click="save()">{{\'main.button.save\' | translate}}</md-button> <div ng-include="\'application/templates/action.buttons.html\'"></div> <md-button ng-click="back(auth.isStudent() ? \'#/applications/student\' : \'#/applications/\', applicationForm)" class="md-raised">{{\'main.button.back\' | translate}}</md-button> </div> <div ng-hide="applicationEditView" layout="row"> <md-button ng-click="back(\'#/applications/\')" class="md-raised">{{\'main.button.back\' | translate}}</md-button> </div> </form> </div> </div>'),a.put("application/application.list.html",'<div class="ois-form-layout-padding ois-form-layout" ng-cloak> <div flex> <fieldset> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'main.searchlabel\' | translate}}</legend> <form name="searchForm" ng-submit="searchForm.$valid && loadData()" layout="column"> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="100"> <label>{{\'application.type\' | translate}}</label> <hois-classifier-select multiple ng-model="criteria.type" criteria="{higher: auth.school.higher ? true : undefined, vocational: auth.school.vocational ? true : undefined}" model-value-attr="code" main-classifier-code="AVALDUS_LIIK"></hois-classifier-select> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <div flex> <md-input-container> <label>{{\'application.insertionDateA\' | translate}}</label> <md-datepicker ng-model="criteria.insertedFrom" md-max-date="criteria.insertedThru"></md-datepicker> </md-input-container> <md-input-container> <label>{{\'application.insertionDateK\' | translate}}</label> <md-datepicker ng-model="criteria.insertedThru" md-min-date="criteria.insertedFrom"></md-datepicker> </md-input-container> </div> </div> <div layout="row" layout-sm="column" layout-xs="column"> <div flex> <md-input-container> <label>{{\'application.submissionDateA\' | translate}}</label> <md-datepicker ng-model="criteria.submittedFrom" md-max-date="criteria.submittedThru"></md-datepicker> </md-input-container> <md-input-container> <label>{{\'application.submissionDateK\' | translate}}</label> <md-datepicker ng-model="criteria.submittedThru" md-min-date="criteria.submittedFrom"></md-datepicker> </md-input-container> </div> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="100"> <label class="textInput">{{\'main.status\' | translate}}</label> <hois-classifier-select multiple ng-model="criteria.status" model-value-attr="code" main-classifier-code="AVALDUS_STAATUS"></hois-classifier-select> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="100"> <label class="textInput">{{\'application.studentName\' | translate}}</label> <input ng-model="criteria.studentName" type="text" md-maxlength="255"> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="100"> <label class="textInput">{{\'application.studentIdCode\' | translate}}</label> <input ng-model="criteria.studentIdCode" type="text" minlength="11" md-maxlength="11"> </md-input-container> </div> <div layout="row" layout-xs="column"> <md-button type="submit" class="md-raised md-primary">{{\'main.button.search\' | translate}}</md-button> <md-button class="md-raised" ng-click="clearCriteria()">{{\'main.button.clear\' | translate}}</md-button> <md-button ng-href="#/applications/new" ng-if="isAuthorized(\'ROLE_OIGUS_M_TEEMAOIGUS_AVALDUS\')" class="md-raised">{{\'application.makeApplication\' | translate}}</md-button> </div> <div flex-xs="0" flex-gt-xs="0" flex-gt-sm="50"></div> </form> </fieldset> </div> </div> <div layout-padding> <div flex> <md-table-container> <table md-table md-progress="tabledata.$promise"> <thead md-head md-order="criteria.order" md-on-reorder="loadData"> <tr md-row> <th md-column md-order-by="person.lastname,person.firstname">{{\'application.student\' | translate}}</th> <th md-column md-order-by="{{currentLanguage()===\'en\' ? \'type.nameEn\' : \'type.nameEt\'}}">{{\'application.type\' | translate}}</th> <th md-column md-order-by="{{currentLanguage()===\'en\' ? \'status.nameEn\' : \'status.nameEt\'}}">{{\'main.status\' | translate}}</th> <th md-column md-order-by="inserted">{{\'application.insertionDate\' | translate}}</th> <th md-column md-order-by="submitted">{{\'application.submissionDate\' | translate}}</th> <th md-column></th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="row in tabledata.content" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell><a ng-href="/#/students/{{::row.student.id}}/main">{{::row.student.nameEt}}</a></td> <td md-cell><a ng-href="#/applications/{{::row.id}}/view">{{currentLanguageNameField(row.type)}}</a></td> <td md-cell> {{currentLanguageNameField(row.status)}} <md-tooltip ng-if="row.status.code === \'AVALDUS_STAATUS_TAGASI\' && row.rejectReason">{{row.rejectReason}}</md-tooltip> </td> <td md-cell>{{row.inserted | hoisDateTime}}</td> <td md-cell>{{row.submitted | hoisDateTime}}</td> <td md-cell> <md-button ng-if="((row.status.code === \'AVALDUS_STAATUS_KOOST\') || (row.status.code === \'AVALDUS_STAATUS_YLEVAAT\' && auth.isAdmin()))\r\n            && isAuthorized(\'ROLE_OIGUS_M_TEEMAOIGUS_AVALDUS\')" md-no-ink class="md-primary change-button" ng-href="#/applications/{{::row.id}}/edit">{{\'main.button.change\' | translate}}</md-button> </td> </tr> </tbody> </table> </md-table-container> <md-table-pagination md-limit="criteria.size" md-limit-options="[10, 20, 50]" md-page="criteria.page" md-total="{{tabledata.totalElements}}" md-on-paginate="loadData" md-label="{page: \'{{\'main.page\' | translate}}:\', rowsPerPage: \'{{\'main.rowPerPage\' | translate}}:\', of: \'{{\'main.of\' | translate}}\'}" md-page-select></md-table-pagination> </div> </div>'),a.put("application/application.view.html",'<div class="ois-form-layout-padding form-readonly" ng-cloak> <div flex> <form layout="column"> <div style="padding-top: 1em"> <md-input-container ng-if="!application.isAdult && application.needsRepresentativeConfirm === true && application.status === \'AVALDUS_STAATUS_KOOST\'" flex="60" flex-sm="100" flex-xs="100"> <b>{{\'application.missingRepresentativeConfirmation\' | translate}}</b> </md-input-container> <div ng-include="\'application/templates/application.information.html\'"></div> <div ng-include="templateUrlByType"></div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="60" flex-sm="100" flex-xs="100"> <label class="textInput">{{\'application.additionalInfo\' | translate}}</label> <hois-value value="application.addInfo"></hois-value> </md-input-container> </div> <div layout="column" flex> <fieldset> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'main.relatedFiles\' | translate}}</legend> <md-table-container> <table md-table class="secondary-table"> <thead md-head> <tr md-row> <th md-column><span>{{\'file.nameAndFile\' | translate}}</span></th> <th md-column><span>{{\'file.additionDate\' | translate}}</span></th> <th md-column>{{\'file.addedBy\' | translate}}</th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="file in application.files | orderBy: \'id\'" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell> {{file.oisFile.fname}} <a ng-href="{{getUrl(file.oisFile, \'application\')}}" target="_blank" rel="noopener noreferrer"> <md-icon md-font-set="material-icons">file_download</md-icon> </a> </td> <td md-cell> {{file.inserted | hoisDateTime}} </td> <td md-cell> {{file.insertedBy}} </td> </tr> </tbody> </table> </md-table-container> </fieldset> </div> </div> <div>&nbsp;</div> <div layout="row" layout-xs="column"> <md-button ng-if="(application.status === \'AVALDUS_STAATUS_KOOST\' \r\n        && ((auth.isAdmin() && isAuthorized(\'ROLE_OIGUS_M_TEEMAOIGUS_AVALDUS\')) || auth.isStudent()))\r\n        || (application.status === \'AVALDUS_STAATUS_YLEVAAT\' && (auth.isAdmin() && isAuthorized(\'ROLE_OIGUS_M_TEEMAOIGUS_AVALDUS\')))" ng-href="#/applications/{{application.id}}/edit?_noback" class="md-raised md-primary">{{\'main.button.change\' | translate}}</md-button> <div ng-include="\'application/templates/action.buttons.html\'"></div> <md-button ng-if="auth.isStudent()" ng-click="back(\'#/applications/student\')" class="md-raised">{{\'main.button.back\' | translate}}</md-button> <md-button ng-if="!auth.isStudent()" ng-click="back(\'#/applications/\', applicationForm)" class="md-raised">{{\'main.button.back\' | translate}}</md-button> </div> </form> </div> </div>'),a.put("application/file.add.dialog.html",'<md-dialog aria-label="file add dialog" flex="40" flex-xs="100"> <form name="dialogForm" ng-cloak> <md-toolbar> <div class="md-toolbar-tools"> <h2>{{"main.addFile" | translate}}</h2> <span flex></span> <md-button class="md-icon-button" ng-click="cancel()"> <md-icon md-font-set="material-icons">close</md-icon> </md-button> </div> </md-toolbar> <md-dialog-content> <span flex></span> <div class="ois-form-layout" layout="column" layout-margin ng-cloak> <div layout="column"> <md-input-container flex> <lf-ng-md-file-input name="file" lf-files="data.file" lf-browse-label="{{\'main.addFile\' | translate}}" lf-remove-label="{{\'main.button.delete\' | translate}}" lf-placeholder="" lf-filesize="5MB" disallow-same-file="addedFiles" lf-required> </lf-ng-md-file-input> </md-input-container> <div ng-messages="dialogForm.file.$error"> <div class="invalid" ng-message="required">{{\'main.messages.error.selectFile\' | translate}}</div> <div class="invalid" ng-message="filesize">{{\'main.messages.error.fileTooLarge\' | translate}} 5MB!</div> <div class="invalid" ng-message="samefile">{{\'main.messages.error.fileAlreadyExists\' | translate}}</div> </div> </div> </div> </md-dialog-content> <span flex></span> <md-dialog-actions layout="row" layout-align="start center"> <md-button class="md-raised md-primary" ng-click="submit()">{{"main.button.save" | translate}}</md-button> <md-button class="md-raised" ng-click="cancel()">{{"main.button.close" | translate}}</md-button> </md-dialog-actions> </form> </md-dialog>'),a.put("application/reject.dialog.html",'<md-dialog aria-label="reject dialog"> <form name="dialogForm" ng-cloak> <md-toolbar> <div class="md-toolbar-tools"> <h2>{{"application.rejection" | translate}}</h2> <span flex></span> <md-button class="md-icon-button" ng-click="cancel()"> <md-icon md-font-set="material-icons">close</md-icon> </md-button> </div> </md-toolbar> <md-dialog-content> <span flex></span> <div class="ois-form-layout" layout="column" layout-margin ng-cloak> <div layout="column" flex> <md-input-container flex> <label>{{\'application.justification\' | translate}}</label> <textarea ng-model="rejectReason" md-maxlength="1000" max-rows="2" required md-autofocus></textarea> </md-input-container> </div> </div> </md-dialog-content> <span flex></span> <md-dialog-actions layout="row" layout-align="start center"> <md-button class="md-raised" ng-click="submit()">{{"main.button.reject" | translate}}</md-button> <md-button class="md-raised" ng-click="cancel()">{{"main.button.close" | translate}}</md-button> </md-dialog-actions> </form> </md-dialog>'),a.put("baseModule/basemodule.edit.html",'<div class="ois-form-layout-padding nomargin"> <form ng-cloak name="baseModuleForm"> <div layout="column" ng-cloak> <div layout="row" flex> <md-input-container flex="90" flex-sm="75" flex-xs="75"> <label>{{\'basemodule.nameEt\' | translate}}</label> <input ng-model="baseModule.nameEt" name="nameEt" type="text" md-maxlength="255" required> </md-input-container> <md-input-container flex="10" flex-sm="20" flex-xs="20" flex-offset="5"> <label>{{\'basemodule.ekap\' | translate}}</label> <input ng-model="baseModule.credits" type="number" name="credits" min="0" max="999" pattern="^\\d+(\\.\\d{1})?$" required> <div ng-messages="baseModuleForm.credits.$error" ng-show="baseModuleForm.credits.$dirty"> <div ng-message="min"> {{\'main.messages.error.positive\' | translate}} </div> <div ng-message="max"> {{\'curriculum.error.max999\' | translate}} </div> <div ng-message="pattern"> {{\'stateCurriculum.error.decimalPresision\' | translate}} </div> </div> </md-input-container> </div> <md-input-container flex> <label>{{\'basemodule.nameEn\' | translate}}</label> <input ng-model="baseModule.nameEn" name="nameEn" type="text" md-maxlength="255"> </md-input-container> <md-input-container flex> <label>{{\'basemodule.objectivesEt\' | translate}}</label> <textarea ng-model="baseModule.objectivesEt" name="objectivesEt" md-maxlength="10000" max-rows="10" required></textarea> </md-input-container> <md-input-container flex> <label>{{\'basemodule.objectivesEn\' | translate}}</label> <textarea ng-model="baseModule.objectivesEn" name="objectivesEn" md-maxlength="10000" max-rows="10"></textarea> </md-input-container> <div flex> <fieldset tabindex="0"> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'basemodule.studyOutcome\' | translate}} *</legend> <input style="display:none" type="number" readonly name="outcomesLength" ng-model="baseModule.outcomes.length" min="1"> <div class="invalid" ng-if="baseModuleForm.$submitted" ng-messages="baseModuleForm.outcomesLength.$error"> <div ng-message="min">{{\'main.messages.error.atLeastOneShouldBeAdded\' | translate}}</div> </div> <div layout="row" flex> <md-input-container flex="45"> <label>{{\'studyOutcome.nameEt\' | translate}} *</label> <textarea ng-model="outcomeEt" md-maxlength="1000" max-rows="10"></textarea> </md-input-container> <md-input-container flex="40" flex-offset="5"> <label>{{\'studyOutcome.nameEn\' | translate}}</label> <textarea ng-model="outcomeEn" md-maxlength="1000" max-rows="10"></textarea> </md-input-container> <md-button class="md-primary" ng-click="addOutcome()" ng-if="!isEditingOutcome">{{\'main.button.add\' | translate}}</md-button> <md-button class="md-primary" ng-click="saveOutcome()" ng-if="isEditingOutcome">{{\'main.button.change\' | translate}}</md-button> </div> <div layout="column"> <div ng-repeat="item in baseModule.outcomes track by $index" class="occupation-row align-center" layout="row" flex> <div flex="45"> <a ng-click="editOutcome(item)"> <p class="scrollable">{{item.outcomeEt}}</p> </a> </div> <div flex="40" flex-offset="5"> <a ng-click="editOutcome(item)"> <p class="scrollable">{{item.outcomeEn}}</p> </a> </div> <div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</div> <div> <a class="remove" ng-click="removeFromArray(baseModule.outcomes, item)">&times;&nbsp;&nbsp;</a> </div> <div> <p ng-if="$first" class="link-disabled">&#9650;&nbsp;</p> <a ng-if="!$first" class="link-no-underline" ng-click="swap($index, $index - 1)">&#9650;&nbsp;</a> </div> <div> <p ng-if="$last" class="link-disabled">&#9660;&nbsp;</p> <a ng-if="!$last" class="link-no-underline" ng-click="swap($index, $index + 1)">&#9660;&nbsp;</a> </div> </div> </div> </fieldset> </div> <div>&nbsp;</div> <md-input-container flex> <label>{{\'stateCurriculum.enter.module.criteriaEt\' | translate}}</label> <textarea ng-model="baseModule.assessmentsEt" name="assessmentsEt" required md-maxlength="20000" max-rows="10"></textarea> </md-input-container> <md-input-container flex> <label>{{\'stateCurriculum.enter.module.criteriaEn\' | translate}}</label> <textarea ng-model="baseModule.assessmentsEn" name="assessmentsEn" md-maxlength="20000" max-rows="10"></textarea> </md-input-container> <div flex> <fieldset tabindex="1"> <legend md-colors="{color: \'default-primary-800\'}" class="md-title-small">{{\'basemodule.capacityDistribution\' | translate}}</legend> <div layout="row" style="padding-bottom:1em" flex class="secondary-table-header"> <div flex="30">&nbsp;</div> <div flex="30">{{\'basemodule.capacity\' | translate}}</div> <div flex="40" layout="row">{{\'basemodule.contactStudy\' | translate}}</div> </div> <div ng-repeat="item in baseModule.capacities | orderBy: \'nameEt\' track by item.capacityType" layout="row" class="secondary-table-row"> <div flex="30" class="occupation-module-capacity">{{currentLanguageNameField(item)}}</div> <div flex="30"> <md-input-container flex> <input ng-model="item.hours" type="number" min="0" max="9999" pattern="^\\d+$" aria-label="capacity hours" class="small-input" ng-readonly="hasThemes()" ng-required="item.contact"> </md-input-container> </div> <div flex="40" layout="row"> <md-checkbox ng-model="item.contact" aria-label="capacity contact" ng-disabled="hasThemes()" class="occupation-module-capacity-contact"></md-checkbox> </div> </div> </fieldset> </div> <div>&nbsp;</div> <md-input-container flex> <label>{{\'basemodule.requirements\' | translate}}</label> <textarea ng-model="baseModule.cvRequirementsEt" name="cvRequirementsEt" required md-maxlength="20000" max-rows="10"></textarea> </md-input-container> <md-input-container flex> <label>{{\'basemodule.assessments\' | translate}}</label> <textarea ng-model="baseModule.cvAssessmentsEt" name="cvAssessmentsEt" required md-maxlength="20000" max-rows="10"></textarea> </md-input-container> <md-input-container flex> <label>{{\'basemodule.learningMethods\' | translate}}</label> <textarea ng-model="baseModule.cvLearningMethodsEt" name="cvLearningMethodsEt" md-maxlength="20000" max-rows="10"></textarea> </md-input-container> <md-input-container flex> <label>{{\'basemodule.assessmentMethodsAndTasks\' | translate}}</label> <textarea ng-model="baseModule.cvAssessmentMethodsEt" name="cvAssessmentMethodsEt" md-maxlength="20000" max-rows="10"></textarea> </md-input-container> <md-input-container flex> <label>{{\'basemodule.independentStudyDescription\' | translate}}</label> <textarea ng-model="baseModule.cvIndependentStudyEt" name="cvIndependentStudyEt" md-maxlength="20000" max-rows="2"></textarea> </md-input-container> <md-input-container flex> <label>{{\'basemodule.studyMaterials\' | translate}}</label> <textarea ng-model="baseModule.cvStudyMaterials" name="cvStudyMaterials" md-maxlength="20000" max-rows="2"></textarea> </md-input-container> <div flex> <fieldset tabindex="2"> <legend md-colors="{color: \'default-primary-800\'}" class="md-title-small">{{\'basemodule.gradeFormation\' | translate}}</legend> <div flex layout="row"> <span flex="30" class="common-label">{{\'basemodule.assessmentType\' | translate}}</span> <hois-classifier-radio layout="row" ng-model="baseModule.cvAssessment" name="cvAssessment" model-value-attr="code" main-classifier-code="KUTSEHINDAMISVIIS" required class="md-primary"></hois-classifier-radio> </div> <div>&nbsp;</div> <md-input-container flex style="width: 100%"> <label>{{\'basemodule.totalGradeDescription\' | translate}}</label> <textarea ng-model="baseModule.cvTotalGradeDescription" name="cvTotalGradeDescription" md-maxlength="20000" max-rows="2" required></textarea> </md-input-container> <div>&nbsp;</div> <div ng-show="baseModule.cvAssessment === \'KUTSEHINDAMISVIIS_E\'" layout="column"> <md-input-container flex> <label>{{\'basemodule.grade3Description\' | translate}}</label> <textarea ng-model="baseModule.cvGrade3Description" name="cvGrade3Description" md-maxlength="20000" max-rows="2" ng-required="baseModule.cvAssessment === \'KUTSEHINDAMISVIIS_E\'"></textarea> </md-input-container> <md-input-container flex> <label>{{\'basemodule.grade4Description\' | translate}}</label> <textarea ng-model="baseModule.cvGrade4Description" name="cvGrade4Description" md-maxlength="20000" max-rows="2" ng-required="baseModule.cvAssessment === \'KUTSEHINDAMISVIIS_E\'"></textarea> </md-input-container> <md-input-container flex> <label>{{\'basemodule.grade5Description\' | translate}}</label> <textarea ng-model="baseModule.cvGrade5Description" name="cvGrade5Description" md-maxlength="20000" max-rows="2" ng-required="baseModule.cvAssessment === \'KUTSEHINDAMISVIIS_E\'"></textarea> </md-input-container> </div> <div ng-show="baseModule.cvAssessment === \'KUTSEHINDAMISVIIS_M\'" layout="column" flex> <md-input-container flex> <label>{{\'basemodule.gradeADescription\' | translate}}</label> <textarea ng-model="baseModule.cvPassDescription" name="cvPassDescription" md-maxlength="20000" max-rows="10" ng-required="baseModule.cvAssessment === \'KUTSEHINDAMISVIIS_M\'"></textarea> </md-input-container> </div> </fieldset> </div> <div flex> <fieldset tabindex="3"> <legend md-colors="{color: \'default-primary-800\'}" class="md-title-small">{{\'module.themes\' | translate}}</legend> <div layout="column"> <div flex="10"> <md-button class="md-raised" ng-click="editTheme()" ng-if="baseModuleId">{{\'main.button.add\' | translate}}</md-button> </div> <md-table-container> <table md-table class="secondary-table"> <thead md-head> <tr md-row> <th md-column>{{\'basemodule.themeName\' | translate}}</th> <th md-column>{{\'basemodule.capacityEkapPerHour\' | translate}}</th> <th md-column>{{\'basemodule.subthemes\' | translate}}</th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="theme in baseModule.themes | orderBy: currentLanguageNameField()"> <td md-cell> <a class="md-primary one-row" ng-click="editTheme(theme)">{{currentLanguageNameField(theme)}}</a> </td> <td md-cell>{{theme.credits}}/{{theme.hours}}</td> <td md-cell><p class="scrollable">{{theme.subthemes}}</p></td> </tr> </tbody> </table> </md-table-container> </div> </fieldset> </div> <div>&nbsp;</div> <md-autocomplete name="teacher" md-selected-item="baseModule.teacher" md-search-text="queryText" md-items="teacher in searchTeacher(queryText)" md-item-text="currentLanguageNameField(teacher)" md-min-length="1" md-floating-label="{{\'basemodule.supervisor\' | translate}}" md-no-cache class="small-margin" required md-require-match flex> <md-item-template> <span md-highlight-text="queryText" md-highlight-flags="^i">{{currentLanguageNameField(teacher)}}</span> </md-item-template> <md-not-found> {{\'main.messages.error.notFound\' | translate}} </md-not-found> </md-autocomplete> <div flex> <fieldset tabindex="4"> <legend md-colors="{color: \'default-primary-800\'}" class="md-title-small">{{\'basemodule.validity\' | translate}}</legend> <div layout="row"> <md-input-container flex="50" flex-sm="100" flex-xs="100"> <label>{{\'main.validFrom\' | translate}}</label> <md-datepicker name="validFrom" ng-model="baseModule.validFrom" md-max-date="baseModule.validThru" required md-open-on-focus></md-datepicker> </md-input-container> <md-input-container flex="50" flex-sm="100" flex-xs="100"> <label>{{\'main.validTo\' | translate}}</label> <md-datepicker name="validThru" ng-model="baseModule.validThru" md-min-date="baseModule.validFrom" md-open-on-focus></md-datepicker> </md-input-container> </div> </fieldset> </div> <div flex ng-if="baseModule.curriculums.length > 0"> <fieldset tabindex="5"> <legend md-colors="{color: \'default-primary-800\'}" class="md-title-small">{{\'basemodule.connectedCurriculumsAndCurriculumVersions\' | translate}}</legend> <div layout="column"> <md-table-container> <table md-table class="secondary-table"> <thead md-head> <tr md-row> <th md-column style="width: 50%"> {{\'basemodule.curriculum\' | translate}} </th> <th md-column> {{\'basemodule.curriculumVersion\' | translate}} </th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="curriculum in baseModule.curriculums"> <td md-cell> <p><a href="#/vocationalCurriculum/{{curriculum.id}}/view">{{currentLanguageNameField(curriculum)}}</a></p> </td> <td md-cell> <p ng-repeat="cv in baseModule.curriculumVersions[curriculum.id]"><a href="#/vocationalCurriculum/{{curriculum.id}}/moduleImplementationPlan/{{cv.id}}/view">{{currentLanguageNameField(cv)}}</a><br ng-if="!$first"></p> </td> </tr> </tbody> </table> </md-table-container> </div> </fieldset> </div> </div> <md-button class="md-raised md-primary" ng-click="save()">{{"main.button.save" | translate}}</md-button> <md-button class="md-raised" ng-if="baseModule.id && baseModule.curriculums.length == 0" ng-click="delete()">{{\'main.button.delete\' | translate}}</md-button> <md-button class="md-raised" ng-click="back(\'#/basemodule\', baseModuleForm)">{{"main.button.back" | translate}}</md-button> </form> </div> <style>.link-no-underline {\r\n        text-decoration: none;\r\n    }\r\n\r\n    .link-disabled {\r\n        color: #d7dde5;\r\n    }</style>'),
a.put("baseModule/basemodule.list.html",'<div class="ois-form-layout-padding"> <div flex> <fieldset> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'main.searchlabel\' | translate}}</legend> <form name="searchForm" ng-submit="searchForm.$valid && loadData()" class="nomargin" layout="column"> <div layout-gt-sm="row" layout="column" layout-align-gt-sm="start end"> <md-input-container flex-gt-sm="45" flex="100"> <label class="textInput">{{\'basemodule.search.name\' | translate}}</label> <input ng-model="criteria.name" type="text" md-maxlength="255" autofocus> </md-input-container> <div layout="column" flex="50" flex-offset-gt-sm="5"> <label class="common-label">{{\'main.validityPeriod\' | translate}}</label> <div layout="row"> <md-input-container> <label>{{\'main.from\' | translate}}</label> <md-datepicker ng-model="criteria.validFrom" md-max-date="criteria.validThru"></md-datepicker> </md-input-container> <md-input-container> <label>{{\'main.thru\' | translate}}</label> <md-datepicker ng-model="criteria.validThru" md-min-date="criteria.validFrom"></md-datepicker> </md-input-container> </div> </div> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-autocomplete name="curriculum" md-selected-item="criteria.curriculum" md-search-text="queryC" md-items="curriculum in searchCurriculums(queryC)" md-item-text="currentLanguageNameField(curriculum)" md-min-length="3" md-floating-label="{{\'basemodule.search.curriculum\' | translate}}" md-no-cache class="small-margin" flex> <md-item-template> <span md-highlight-text="queryC" md-highlight-flags="^i">{{currentLanguageNameField(curriculum)}}</span> </md-item-template> <md-not-found> {{\'main.messages.error.notFound\' | translate}} </md-not-found> </md-autocomplete> <md-autocomplete name="curriculumVersion" md-selected-item="criteria.curriculumVersion" md-search-text="queryCV" md-items="curriculumVersion in searchCurriculumVersions(queryCV)" md-item-text="currentLanguageNameField(curriculumVersion)" md-min-length="3" md-floating-label="{{\'basemodule.search.curriculumVersion\' | translate}}" md-no-cache class="small-margin" flex="50" flex-sm="100" flex-xs="100" flex-offset="0" flex-offset-gt-sm="5"> <md-item-template> <span md-highlight-text="queryCV" md-highlight-flags="^i">{{currentLanguageNameField(curriculumVersion)}}</span> </md-item-template> <md-not-found> {{\'main.messages.error.notFound\' | translate}} </md-not-found> </md-autocomplete> </div> <div layout="row"> <md-button type="submit" class="md-raised md-primary">{{\'main.button.search\' | translate}}</md-button> <md-button class="md-raised" ng-click="clearCriteria()">{{\'main.button.clear\' | translate}}</md-button> <md-button ng-href="#/basemodule/new" ng-if="formState.canCreate" class="md-raised">{{\'main.button.create\' | translate}}</md-button> </div> <div flex-xs="0" flex-gt-xs="0" flex-gt-sm="50"></div> </form> </fieldset> </div> </div> <div layout-padding> <div flex> <md-table-container> <table md-table md-progress="tabledata.$promise"> <thead md-head md-order="criteria.order" md-on-reorder="loadData"> <tr md-row> <th md-column style="width:35%" md-order-by="b.{{currentLanguageNameField()}}">{{\'basemodule.label\' | translate}}</th> <th md-column style="width:25%">{{\'basemodule.search.curriculum\' | translate}}</th> <th md-column style="width:25%">{{\'basemodule.search.curriculumVersion\' | translate}}</th> <th md-column style="width:5%">{{\'basemodule.ekap\' | translate}}</th> <th md-column style="width:10%"></th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="row in tabledata.content" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell><a ng-href="#/basemodule/{{::row.id}}/view">{{currentLanguageNameField(row)}}</a></td> <td md-cell ng-init="row.c = row.curriculums.join(\', \')"> {{row.c.length &GT 20 && !row.showC ? (row.c | limitTo:20) + \'...\' : row.c}} <span class="custom-tooltip" ng-if="!row.showC && row.c.length > 20" ng-click="row.showC = true">{{\'basemodule.search.showMore\' | translate}}</span> <span class="custom-tooltip" ng-if="row.showC" ng-click="row.showC = false">{{\'basemodule.search.showLess\' | translate}}</span> </td> <td md-cell ng-init="row.cv = row.curriculumVersions.join(\', \')"> {{row.cv.length &GT 20 && !row.showCV ? (row.cv | limitTo:20) + \'...\' : row.cv}} <span class="custom-tooltip" ng-if="!row.showCV && row.cv.length > 20" ng-click="row.showCV = true">{{\'basemodule.search.showMore\' | translate}}</span> <span class="custom-tooltip" ng-if="row.showCV" ng-click="row.showCV = false">{{\'basemodule.search.showLess\' | translate}}</span> </td> <td md-cell>{{row.credits}}</td> <td md-cell> <md-button md-no-ink ng-if="row.canEdit" class="md-primary change-button" ng-href="#/basemodule/{{::row.id}}/edit"> {{\'main.button.change\' | translate}} </md-button> </td> </tr> </tbody> </table> </md-table-container> <md-table-pagination md-limit="criteria.size" md-limit-options="[10, 20, 50]" md-page="criteria.page" md-total="{{tabledata.totalElements}}" md-on-paginate="loadData" md-label="{page: \'{{\'main.page\' | translate}}:\', rowsPerPage: \'{{\'main.rowPerPage\' | translate}}:\', of: \'{{\'main.of\' | translate}}\'}" md-page-select></md-table-pagination> </div> </div> <style>@media screen and (max-width: 960px) {\r\n          .common-label {\r\n              align-self: flex-start !important;\r\n          }\r\n      }</style>'),a.put("baseModule/basemodule.view.html",'<div class="ois-form-layout-padding nomargin"> <form ng-cloak name="baseModuleForm"> <div layout="column" ng-cloak> <div layout="row" flex> <md-input-container flex="90" flex-sm="75" flex-xs="75"> <label>{{\'basemodule.nameEt\' | translate}}</label> <input ng-model="baseModule.nameEt" name="nameEt" type="text" disabled> </md-input-container> <md-input-container flex="10" flex-sm="20" flex-xs="20" flex-offset="5"> <label>{{\'basemodule.ekap\' | translate}}</label> <input ng-model="baseModule.credits" type="number" name="credits" disabled> </md-input-container> </div> <md-input-container flex> <label>{{\'basemodule.nameEn\' | translate}}</label> <input ng-model="baseModule.nameEn" name="nameEn" type="text" disabled> </md-input-container> <md-input-container flex> <label>{{\'basemodule.objectivesEt\' | translate}}</label> <textarea ng-model="baseModule.objectivesEt" name="objectivesEt" max-rows="10" disabled></textarea> </md-input-container> <md-input-container flex> <label>{{\'basemodule.objectivesEn\' | translate}}</label> <textarea ng-model="baseModule.objectivesEn" name="objectivesEn" max-rows="10" disabled></textarea> </md-input-container> <div flex> <fieldset tabindex="0"> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'basemodule.studyOutcome\' | translate}}</legend> <div layout="column"> <div ng-repeat="item in baseModule.outcomes track by $index" class="occupation-row align-center" layout="row" flex> <div flex="45"> <p class="scrollable">{{item.outcomeEt}}</p> </div> <div flex="40" flex-offset="5"> <p class="scrollable">{{item.outcomeEn}}</p> </div> </div> </div> </fieldset> </div> <div>&nbsp;</div> <md-input-container flex> <label>{{\'stateCurriculum.enter.module.criteriaEt\' | translate}}</label> <textarea ng-model="baseModule.assessmentsEt" name="assessmentsEt" max-rows="10" disabled></textarea> </md-input-container> <md-input-container flex> <label>{{\'stateCurriculum.enter.module.criteriaEn\' | translate}}</label> <textarea ng-model="baseModule.assessmentsEn" name="assessmentsEn" max-rows="10" disabled></textarea> </md-input-container> <div flex> <fieldset tabindex="1"> <legend md-colors="{color: \'default-primary-800\'}" class="md-title-small">{{\'basemodule.capacityDistribution\' | translate}}</legend> <div layout="row" style="padding-bottom:1em" flex class="secondary-table-header"> <div flex="30">&nbsp;</div> <div flex="30">{{\'basemodule.capacity\' | translate}}</div> <div flex="40" layout="row">{{\'basemodule.contactStudy\' | translate}}</div> </div> <div ng-repeat="item in baseModule.capacities | orderBy: \'nameEt\' track by item.capacityType" layout="row" class="secondary-table-row"> <div flex="30" class="occupation-module-capacity">{{currentLanguageNameField(item)}}</div> <div flex="30"> <md-input-container flex> <input ng-model="item.hours" type="number" aria-label="capacity hours" class="small-input" disabled> </md-input-container> </div> <div flex="40" layout="row"> <md-checkbox ng-model="item.contact" aria-label="capacity contact" disabled class="occupation-module-capacity-contact"></md-checkbox> </div> </div> </fieldset> </div> <div>&nbsp;</div> <md-input-container flex> <label>{{\'basemodule.requirements\' | translate}}</label> <textarea ng-model="baseModule.cvRequirementsEt" name="cvRequirementsEt" disabled max-rows="10"></textarea> </md-input-container> <md-input-container flex> <label>{{\'basemodule.assessments\' | translate}}</label> <textarea ng-model="baseModule.cvAssessmentsEt" name="cvAssessmentsEt" disabled max-rows="10"></textarea> </md-input-container> <md-input-container flex> <label>{{\'basemodule.learningMethods\' | translate}}</label> <textarea ng-model="baseModule.cvLearningMethodsEt" name="cvLearningMethodsEt" disabled max-rows="10"></textarea> </md-input-container> <md-input-container flex> <label>{{\'basemodule.assessmentMethodsAndTasks\' | translate}}</label> <textarea ng-model="baseModule.cvAssessmentMethodsEt" name="cvAssessmentMethodsEt" disabled max-rows="10"></textarea> </md-input-container> <md-input-container flex> <label>{{\'basemodule.independentStudyDescription\' | translate}}</label> <textarea ng-model="baseModule.cvIndependentStudyEt" name="cvIndependentStudyEt" disabled max-rows="2"></textarea> </md-input-container> <md-input-container flex> <label>{{\'basemodule.studyMaterials\' | translate}}</label> <textarea ng-model="baseModule.cvStudyMaterials" name="cvStudyMaterials" disabled max-rows="2"></textarea> </md-input-container> <div flex> <fieldset tabindex="2"> <legend md-colors="{color: \'default-primary-800\'}" class="md-title-small">{{\'basemodule.gradeFormation\' | translate}}</legend> <div flex layout="row"> <span flex="30" class="common-label">{{\'basemodule.assessmentType\' | translate}}</span> <hois-classifier-radio layout="row" ng-model="baseModule.cvAssessment" name="cvAssessment" model-value-attr="code" main-classifier-code="KUTSEHINDAMISVIIS" disabled class="md-primary"></hois-classifier-radio> </div> <div>&nbsp;</div> <md-input-container flex style="width: 100%"> <label>{{\'basemodule.totalGradeDescription\' | translate}}</label> <textarea ng-model="baseModule.cvTotalGradeDescription" name="cvTotalGradeDescription" max-rows="2" disabled></textarea> </md-input-container> <div>&nbsp;</div> <div ng-show="baseModule.cvAssessment === \'KUTSEHINDAMISVIIS_E\'" layout="column"> <md-input-container flex> <label>{{\'basemodule.grade3Description\' | translate}}</label> <textarea ng-model="baseModule.cvGrade3Description" name="cvGrade3Description" max-rows="2" disabled></textarea> </md-input-container> <md-input-container flex> <label>{{\'basemodule.grade4Description\' | translate}}</label> <textarea ng-model="baseModule.cvGrade4Description" name="cvGrade4Description" max-rows="2" disabled></textarea> </md-input-container> <md-input-container flex> <label>{{\'basemodule.grade5Description\' | translate}}</label> <textarea ng-model="baseModule.cvGrade5Description" name="cvGrade5Description" max-rows="2" disabled></textarea> </md-input-container> </div> <div ng-show="baseModule.cvAssessment === \'KUTSEHINDAMISVIIS_M\'" layout="column" flex> <md-input-container flex> <label>{{\'basemodule.gradeADescription\' | translate}}</label> <textarea ng-model="baseModule.cvPassDescription" name="cvPassDescription" max-rows="10" disabled></textarea> </md-input-container> </div> </fieldset> </div> <div flex> <fieldset tabindex="3"> <legend md-colors="{color: \'default-primary-800\'}" class="md-title-small">{{\'basemodule.themes\' | translate}}</legend> <div layout="column"> <md-table-container> <table md-table class="secondary-table"> <thead md-head> <tr md-row> <th md-column>{{\'basemodule.themeName\' | translate}}</th> <th md-column>{{\'basemodule.capacityEkapPerHour\' | translate}}</th> <th md-column>{{\'basemodule.subthemes\' | translate}}</th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="theme in baseModule.themes | orderBy: currentLanguageNameField()"> <td md-cell> <a class="md-primary one-row" ng-click="viewTheme(theme)">{{currentLanguageNameField(theme)}}</a> </td> <td md-cell>{{theme.credits}}/{{theme.hours}}</td> <td md-cell><p class="scrollable">{{theme.subthemes}}</p></td> </tr> </tbody> </table> </md-table-container> </div> </fieldset> </div> <div>&nbsp;</div> <md-input-container flex> <label>{{\'basemodule.supervisor\' | translate}}</label> <input ng-value="currentLanguageNameField(baseModule.teacher)" type="text" disabled> </md-input-container> <div flex> <fieldset tabindex="4"> <legend md-colors="{color: \'default-primary-800\'}" class="md-title-small">{{\'basemodule.validity\' | translate}}</legend> <div layout="row"> <md-input-container flex="50" flex-sm="100" flex-xs="100"> <label>{{\'main.validFrom\' | translate}}</label> <md-datepicker name="validFrom" ng-model="baseModule.validFrom" disabled md-max-date="baseModule.validThru" required md-open-on-focus></md-datepicker> </md-input-container> <md-input-container flex="50" flex-sm="100" flex-xs="100"> <label>{{\'main.validTo\' | translate}}</label> <md-datepicker name="validThru" ng-model="baseModule.validThru" disabled md-min-date="baseModule.validFrom" md-open-on-focus></md-datepicker> </md-input-container> </div> </fieldset> </div> <div flex ng-if="baseModule.curriculums.length > 0"> <fieldset tabindex="5"> <legend md-colors="{color: \'default-primary-800\'}" class="md-title-small">{{\'basemodule.connectedCurriculumsAndCurriculumVersions\' | translate}}</legend> <div layout="column"> <md-table-container> <table md-table class="secondary-table"> <thead md-head> <tr md-row> <th md-column style="width: 50%"> {{\'basemodule.curriculum\' | translate}} </th> <th md-column> {{\'basemodule.curriculumVersion\' | translate}} </th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="curriculum in baseModule.curriculums"> <td md-cell> <p><a href="#/vocationalCurriculum/{{curriculum.id}}/view">{{currentLanguageNameField(curriculum)}}</a></p> </td> <td md-cell> <p ng-repeat="cv in baseModule.curriculumVersions[curriculum.id]"><a href="#/vocationalCurriculum/{{curriculum.id}}/moduleImplementationPlan/{{cv.id}}/view">{{currentLanguageNameField(cv)}}</a><br ng-if="!$first"></p> </td> </tr> </tbody> </table> </md-table-container> </div> </fieldset> </div> </div> <md-button class="md-raised md-primary" ng-click="edit()">{{"main.button.edit" | translate}}</md-button> <md-button class="md-raised" ng-click="back(\'#/basemodule\')">{{"main.button.back" | translate}}</md-button> </form> </div> <style>.link-no-underline {\r\n        text-decoration: none;\r\n    }\r\n\r\n    .link-disabled {\r\n        color: #d7dde5;\r\n    }</style>'),a.put("building/building.edit.html",'<div layout="column" layout-padding> <div flex> <form name="buildingForm"> <md-input-container class="md-block"> <label>{{\'building.name\' | translate}}</label> <input ng-model="record.name" name="name" type="text" md-maxlength="255" required> <div ng-messages="buildingForm.name.$error"> <div ng-message="md-maxlength"> {{\'main.messages.error.maxlength\' | translate}} </div> </div> </md-input-container> <md-input-container class="md-block"> <label class="textInput">{{\'building.code\' | translate}}</label> <input ng-model="record.code" name="code" type="text" md-maxlength="20" ng-model-options="{debounce: 250}" unique="buildingUniqueQuery" required> <div ng-messages="buildingForm.code.$error"> <div ng-message="md-maxlength"> {{\'main.messages.error.maxlength\' | translate}} </div> <div ng-message="notUnique"> {{\'building.alreadyexist\' | translate}} </div> </div> </md-input-container> <md-div class="md-block"> <hois-ads-adapter class="md-text" ng-model="record.addressAds" ads-oid-model="record.addressAdsOid" address-model="record.address"></hois-ads-adapter> </md-div> </form> <md-button ng-click="update()" class="md-raised md-primary">{{\'main.button.save\' | translate}}</md-button> <md-button ng-click="delete()" ng-show="record.id" class="md-raised">{{\'main.button.delete\' | translate}}</md-button> <md-button ng-click="back(\'#/rooms/search\', buildingForm)" class="md-raised">{{\'main.button.back\' | translate}}</md-button> </div> </div>'),a.put("certificate/certificate.edit.html",'<div layout="column" layout-padding> <form name="certificateEditForm"> <div layout="column"> <md-input-container> <label>{{\'certificate.type\' | translate}}</label> <hois-classifier-select ng-model="record.type" model-value-attr="code" main-classifier-code="TOEND_LIIK" required ng-disabled="record.id" filter-values="forbiddenTypes"></hois-classifier-select> </md-input-container> <div ng-show="!isOtherCertificate()"> <md-autocomplete md-input-minlength="2" name="student" md-selected-item="student" md-search-text="queryText" md-items="item in querySearch(queryText)" md-item-text="currentLanguageNameField(item)" md-floating-label="{{\'certificate.student\' | translate}}" ng-model="queryText" md-no-cache class="small-margin" md-selected-item-change="studentChanged()" ng-required="!isOtherCertificate()" ng-disabled="record.id"> <md-item-template> <span md-highlight-text="queryText" md-highlight-flags="^i">{{currentLanguageNameField(item)}}</span> </md-item-template> <md-not-found> {{\'main.messages.error.notFound\' | translate}} </md-not-found> </md-autocomplete> </div> <div ng-if="isOtherCertificate()"> <md-input-container class="md-block"> <label>{{\'certificate.otherIdcode\' | translate}}</label> <input type="text" ng-model="record.otherIdcode" name="idcode" required ng-pattern="idcodePattern" md-maxlength="11" ng-disabled="record.id"> <div ng-messages="certificateEditForm.idcode.$error" ng-show="certificateEditForm.idcode.$dirty"> <div ng-message="pattern"> {{\'certificate.invalidIdcode\' | translate}} </div> </div> </md-input-container> <md-input-container class="md-block"> <label>{{\'certificate.otherName\' | translate}}</label> <input type="text" ng-model="record.otherName" required md-maxlength="255" ng-disabled="record.id"> </md-input-container> </div> <md-input-container> <label>{{\'certificate.headline\' | translate}}</label> <textarea ng-model="record.headline" required md-maxlength="1000" max-rows="2"></textarea> </md-input-container> <md-input-container> <label>{{\'certificate.whom\' | translate}}</label> <input type="text" ng-model="record.whom" md-maxlength="255" ng-disabled="record.id"> </md-input-container> <md-input-container> <label>{{\'certificate.signatory\' | translate}}</label> <md-select ng-model="record.signatoryIdcode" aria-label="{{\'certificate.signatory\' | translate}}" required> <md-option ng-value="signatory.idcode" ng-repeat="signatory in signatories"> {{::signatory.name}} </md-option> </md-select> </md-input-container> <md-input-container ng-if="record.type === \'TOEND_LIIK_SOOR\' && !record.id"> <md-checkbox ng-model="record.addOutcomes" ng-change="addOutcomesChanged()">{{\'certificate.addOutcomes\' | translate}}</md-checkbox> </md-input-container> <md-input-container ng-if="contentEditable()"> <label>{{\'certificate.content\' | translate}}</label> <textarea ng-model="record.content" required md-maxlength="2000" max-rows="2"></textarea> </md-input-container> <br> <div ng-if="!contentEditable()"> <label class="common-label" ng-show="record.content">{{\'certificate.content\' | translate}}</label> <md-table-container> <div id="content" class="md-body-1"></div> </md-table-container> </div> </div> <div layout="row"> <md-button class="md-raised md-primary" ng-click="save()">{{\'main.button.save\' | translate}}</md-button> <md-button class="md-raised md-default" ng-click="saveAndOrder()">{{\'certificate.saveAndOrder\' | translate}}</md-button> <md-button class="md-raised md-default" ng-click="delete()" ng-if="record.id">{{\'main.button.delete\' | translate}}</md-button> <md-button class="md-raised md-default" ng-click="back(\'#/certificate\', certificateEditForm)">{{\'main.button.back\' | translate}}</md-button> </div> </form> </div>'),a.put("certificate/certificate.search.html",'<div class="ois-form-layout-padding ois-form-layout" ng-cloak> <fieldset ng-if="!auth.isStudent() && !auth.isParent()"> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'main.searchlabel\' | translate}}</legend> <form name="searchForm" ng-submit="searchForm.$valid && loadData()" layout="column" novalidate> <md-input-container> <label>{{\'certificate.type\' | translate}}</label> <hois-classifier-select ng-model="criteria.type" model-value-attr="code" main-classifier-code="TOEND_LIIK" multiple></hois-classifier-select> </md-input-container> <md-input-container> <label class="textInput">{{\'certificate.headline\' | translate}}</label> <input ng-model="criteria.headline" type="text" md-maxlength="255"> </md-input-container> <md-input-container> <label class="textInput">{{\'certificate.studentName\' | translate}}</label> <input ng-model="criteria.name" type="text" md-maxlength="255"> </md-input-container> <md-input-container> <label class="textInput">{{\'certificate.idcode\' | translate}}</label> <input ng-model="criteria.idcode" type="text" minlength="11" md-maxlength="11"> </md-input-container> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="20" flex-sm="100" flex-xs="100"> <label>{{\'certificate.inserted\' | translate}}</label> <input type="hidden"> </md-input-container><br> <div flex="33"> <md-input-container flex> <label>{{\'main.from\' | translate}}</label> <md-datepicker ng-model="criteria.insertedFrom" md-max-date="criteria.insertedThru"></md-datepicker> </md-input-container> <md-input-container flex> <label>{{\'main.thru\' | translate}}</label> <md-datepicker ng-model="criteria.insertedThru" md-min-date="criteria.insertedFrom"></md-datepicker> </md-input-container> </div> </div> <md-input-container> <label class="textInput">{{\'certificate.nr\' | translate}}</label> <input ng-model="criteria.certificateNr" type="text" md-maxlength="255"> </md-input-container> <div layout="row"> <md-button type="submit" class="md-raised md-primary">{{\'main.button.search\' | translate}}</md-button> <md-button class="md-raised" ng-click="clearCriteria()">{{\'main.button.clear\' | translate}}</md-button> <md-button class="md-raised" ng-if="isAuthorized(\'ROLE_OIGUS_M_TEEMAOIGUS_TOEND\')" ng-href="#/certificate/new">{{\'certificate.add\' | translate}}</md-button> </div> </form> </fieldset> </div> <div layout-padding> <div flex> <md-table-container> <table md-table md-progress="tabledata.$promise"> <thead md-head md-order="criteria.order" md-on-reorder="loadData"> <tr md-row> <th md-column md-order-by="sortablename" ng-if="!auth.isStudent() && !auth.isParent()">{{\'certificate.studentName\' | translate}}</th> <th md-column md-order-by="c.certificateNr">{{\'certificate.nr\' | translate}}</th> <th md-column md-order-by="type.{{currentLanguageNameField()}}">{{\'certificate.type\' | translate}}</th> <th md-column md-order-by="status.{{currentLanguageNameField()}}">{{\'certificate.status\' | translate}}</th> <th md-column md-order-by="c.headline">{{\'certificate.headline\' | translate}}</th> <th md-column md-order-by="c.inserted">{{\'certificate.inserted\' | translate}}</th> <th md-column ng-if="!auth.isStudent() && !auth.isParent()"></th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="row in tabledata.content" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell ng-if="!auth.isStudent() && !auth.isParent()"> <a ng-if="row.studentId" ng-href="#/students/{{row.studentId}}/main" class="md-primary change-button">{{::row.studentFullname}}</a> <span ng-if="!row.studentId">{{::row.studentFullname}}</span> </td> <td md-cell>{{::row.certificateNr}}</td> <td md-cell><a ng-href="#/certificate/{{::row.id}}/view">{{currentLanguageNameField(row.type)}}</a></td> <td md-cell>{{currentLanguageNameField(row.status)}}</td> <td md-cell>{{::row.headline}}</td> <td md-cell>{{row.inserted | hoisDate}}</td> <td md-cell ng-if="!auth.isStudent() && !auth.isParent()"> <md-button ng-if="row.canBeChanged && isAuthorized(\'ROLE_OIGUS_M_TEEMAOIGUS_TOEND\')" class="md-primary change-button" ng-href="#/certificate/{{::row.id}}/edit">{{\'main.button.change\' | translate}}</md-button> </td> </tr> </tbody> </table> </md-table-container> <md-table-pagination md-limit="criteria.size" md-limit-options="[10, 20, 50]" md-page="criteria.page" md-total="{{tabledata.totalElements}}" md-on-paginate="loadData" md-label="{page: \'{{\'main.page\' | translate}}:\', rowsPerPage: \'{{\'main.rowPerPage\' | translate}}:\', of: \'{{\'main.of\' | translate}}\'}" md-page-select></md-table-pagination> </div> <md-table-container> <table md-table class="secondary-table" ng-if="auth.isStudent()"> <thead md-head> <tr md-row> <th md-column>{{\'certificate.type\' | translate}}</th> <th md-column></th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="type in certificateTypes" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell>{{currentLanguageNameField(type)}}</td> <td md-cell> <md-button md-no-ink class="md-primary change-button" ng-href="#/certificate/{{::type.code}}/new"> {{\'certificate.order\' | translate}} </md-button> </td> </tr> </tbody> </table> </md-table-container> </div>'),a.put("certificate/certificate.student.new.html",'<div layout="column" layout-padding> <form name="certificateEditForm"> <div layout="column" class="form-readonly"> <md-input-container> <label>{{\'certificate.type\' | translate}}</label> <hois-classifier-value ng-model="record.type" main-classifier-code="TOEND_LIIK"></hois-classifier-value> </md-input-container> <md-input-container> <label>{{\'certificate.headline\' | translate}}</label> <textarea ng-model="record.headline" required md-maxlength="1000" max-rows="2" readonly></textarea> </md-input-container> <md-input-container> <label>{{\'certificate.whom\' | translate}}</label> <input type="text" ng-model="record.whom" md-maxlength="255"> </md-input-container> <md-input-container ng-if="record.type === \'TOEND_LIIK_SOOR\' && !record.id"> <md-checkbox ng-model="record.addOutcomes" ng-change="addOutcomesChanged()">{{\'certificate.addOutcomes\' | translate}}</md-checkbox> </md-input-container> <md-input-container> <label class="common-label" ng-show="record.content">{{\'certificate.content\' | translate}}</label> <md-table-container> <div id="content" class="md-body-1"></div> </md-table-container> </md-input-container> </div> <div layout="row"> <md-button class="md-raised md-primary" ng-click="save()">{{\'certificate.order\' | translate}}</md-button> <md-button class="md-raised md-default" ng-click="back(\'#/certificate\', certificateEditForm)">{{\'main.button.back\' | translate}}</md-button> </div> </form> </div>'),a.put("certificate/certificate.view.html",'<div layout-padding ng-cloak class="form-readonly"> <div layout="column"> <md-input-container> <label>{{\'certificate.type\' | translate}}</label> <hois-classifier-value ng-model="record.type" main-classifier-code="TOEND_LIIK"></hois-classifier-value> </md-input-container> <md-input-container ng-if="record.status === \'TOEND_STAATUS_V\'"> <label>{{\'certificate.nr\' | translate}}</label> <hois-value value="record.certificateNr"></hois-value> </md-input-container> <div ng-show="!isOtherCertificate() && !auth.isStudent()" layout="column"> <md-input-container> <label>{{\'certificate.student\' | translate}}</label> <hois-value value="student.nameEt" href-value="\'#/students/\' + student.id + \'/main\'"></hois-value> </md-input-container> </div> <div ng-if="isOtherCertificate() && !auth.isStudent()"> <md-input-container class="md-block"> <label>{{\'certificate.otherIdcode\' | translate}}</label> <hois-value value="record.otherIdcode"></hois-value> </md-input-container> <md-input-container class="md-block"> <label>{{\'certificate.otherName\' | translate}}</label> <hois-value ng-if="student.id" value="record.otherName" href-value="\'#/students/\' + student.id + \'/main\'"></hois-value> <hois-value ng-if="!student.id" value="record.otherName"></hois-value> </md-input-container> </div> <md-input-container> <label>{{\'certificate.headline\' | translate}}</label> <hois-value value="record.headline"></hois-value> </md-input-container> <md-input-container> <label>{{\'certificate.whom\' | translate}}</label> <hois-value value="record.whom"></hois-value> </md-input-container> <md-input-container ng-if="!auth.isStudent()"> <label>{{\'certificate.signatory\' | translate}}</label> <hois-value value="record.signatoryName"></hois-value> </md-input-container> <md-input-container> <label>{{\'certificate.status\' | translate}}</label> <hois-classifier-value ng-model="record.status" main-classifier-code="TOEND_STAATUS"></hois-classifier-value> </md-input-container> <md-input-container> <label>{{\'certificate.inserted\' | translate}}</label> <hois-value value="record.inserted | hoisDate"></hois-value> </md-input-container> <md-input-container ng-if="contentEditable()"> <label>{{\'certificate.content\' | translate}}</label> <hois-value value="record.content"></hois-value> </md-input-container> <div ng-if="!contentEditable()"> <label class="common-label">{{\'certificate.content\' | translate}}</label> <md-table-container> <div id="content" class="md-body-1"></div> </md-table-container> </div> </div> <div layout="row"> <md-button class="md-raised md-primary" ng-if="record.canBeChanged && isAuthorized(\'ROLE_OIGUS_M_TEEMAOIGUS_TOEND\')" ng-href="/#/certificate/{{::record.id}}/edit">{{\'main.button.change\' | translate}}</md-button> <md-button class="md-raised md-default" ng-if="auth.isStudent() && record.status === \'TOEND_STAATUS_T\'" ng-click="order()">{{\'certificate.orderAgain\' | translate}}</md-button> <md-button class="md-raised md-default" ng-if="record.id && auth.isStudent() && record.status === \'TOEND_STAATUS_T\'" ng-click="delete()">{{\'main.button.delete\' | translate}}</md-button> <md-button class="md-raised md-default" ng-click="back(\'#/certificate\')">{{\'main.button.back\' | translate}}</md-button> <md-button class="md-raised md-default" ng-if="record.canViewFromEkis" ng-href="{{auth.isStudent() ? record.wdUrl : getCertificateUrl(record.wdId)}}" target="_blank">{{(auth.isStudent() ? \'certificate.downloadFromEkis\' : \'certificate.viewFromEkis\') | translate}}</md-button> </div> </div>'),a.put("classifier/classifier.content.edit.html",'<div layout="column" layout-padding> <div> <form name="classifierForm"> <h3>{{currentLanguageNameField(mainClass)}}</h3> <md-input-container class="md-block" ng-if="classifier.code"> <label>{{\'classifier.code\' | translate}}</label> <input ng-model="classifier.code" type="text" disabled required> </md-input-container> <md-input-container class="md-block"> <label class="textInput">{{\'classifier.value\' | translate}}</label> <input ng-model="classifier.value" type="text" required ng-disabled="classifier.code" md-maxlength="50"> </md-input-container> <md-input-container class="md-block"> <label class="textInput">{{\'classifier.value2\' | translate}}</label> <input ng-model="classifier.value2" type="text" md-maxlength="50"> </md-input-container> <md-input-container class="md-block"> <label class="textInput">{{\'classifier.nameEt\' | translate}}</label> <input ng-model="classifier.nameEt" type="text" required md-maxlength="1000"> </md-input-container> <md-input-container class="md-block"> <label class="textInput">{{\'classifier.nameEn\' | translate}}</label> <input ng-model="classifier.nameEn" type="text" md-maxlength="1000"> </md-input-container> <md-input-container class="md-block"> <label class="textInput">{{\'classifier.nameRu\' | translate}}</label> <input ng-model="classifier.nameRu" type="text" md-maxlength="1000"> </md-input-container> <md-input-container class="md-block"> <label class="textInput">{{\'classifier.description\' | translate}}</label> <textarea ng-model="classifier.description" md-maxlength="1000" max-rows="2"></textarea> </md-input-container> <md-input-container class="md-block"> <label class="textInput">{{\'classifier.ehisValue\' | translate}}</label> <input ng-model="classifier.ehisValue" type="text" md-maxlength="100"> </md-input-container> <md-input-container class="md-block"> <label class="textInput">{{\'classifier.extraval1\' | translate}}</label> <input ng-model="classifier.extraval1" type="text" md-maxlength="100"> </md-input-container> <md-input-container class="md-block"> <label class="textInput">{{\'classifier.extraval2\' | translate}}</label> <input ng-model="classifier.extraval2" type="text" md-maxlength="100"> </md-input-container> <br> <md-checkbox ng-model="classifier.vocational" aria-label="Is vocational"> {{\'classifier.isVocational\' | translate}} </md-checkbox> <md-checkbox ng-model="classifier.higher" aria-label="Is higher"> {{\'classifier.isHigher\' | translate}} </md-checkbox> <br> <md-input-container> <label class="textInput">{{\'stateCurriculum.enter.validFrom\' | translate}}</label> <md-datepicker ng-model="classifier.validFrom"></md-datepicker> </md-input-container> <md-input-container> <label class="textInput">{{\'stateCurriculum.enter.validThru\' | translate}}</label> <md-datepicker ng-model="classifier.validThru" md-min-date="classifier.validFrom"></md-datepicker> </md-input-container> <div ng-repeat="connection in possibleConnections"> <h3>{{\'classifier.connection\' | translate}}: <span ng-bind="currentLanguageNameField(connection)"></span></h3> <md-autocomplete name="classifiersParentInput$index" md-selected-item="classifiersParent$index" md-search-text="queryName" md-items="item in querySearch(queryName, connection.code)" md-item-text="item | hoisValidDates" md-min-length="0" placeholder="{{\'classifier.connection.add\' | translate}}" ng-model="queryName" md-no-cache md-selected-item-change="addParent(classifiersParent$index)"> <md-item-template> <span md-highlight-text="queryName" md-highlight-flags="^i">{{item | hoisValidDates}}</span> </md-item-template> <md-not-found> {{\'main.messages.error.notFound\' | translate}} </md-not-found> </md-autocomplete> <p ng-repeat="parent in parents | filter:{ mainClassCode: connection.code}"> <a ng-bind="parent | hoisValidDates" ng-href="#/classifier/{{parent.mainClassCode}}/{{parent.code}}/edit"></a> <md-button class="remove" ng-click="removeParent(parent)">&times;</md-button> </p> <br> </div> <h3 ng-if="hasChildren">{{\'classifier.connection.children.label\' | translate}}: </h3> <ul> <li ng-repeat="child in children | orderBy : \'nameEt\'"><a ng-bind="currentLanguageNameField(child)" ng-href="#/classifier/{{child.mainClassCode}}/{{child.code}}/edit"></a></li> </ul> </form> <md-button ng-click="save()" class="md-raised md-primary"> {{\'main.button.save\' | translate}}</md-button> <md-button ng-click="delete()" ng-if="classifier.code" class="md-raised">{{\'main.button.delete\' | translate}}</md-button> <md-button ng-click="back(\'#/classifier/\' + mainClassCode, classifierForm)" class="md-raised">{{\'main.button.back\' | translate}}</md-button> </div> </div>'),
a.put("classifier/classifier.content.list.html",'<div layout-padding> <form ng-submit="loadData()" novalidate> <div flex> <div layout="row"> <div flex-xs="100" flex-gt-xs="100" flex-gt-sm="50" layout="column"> <!--div class="indentForToast"></div--> <h3>{{currentLanguageNameField(mainClass)}}</h3> <md-input-container> <label class="textInput">{{\'classifier.name\' | translate}}</label> <input ng-model="criteria.name" type="text" autofocus> </md-input-container> <md-input-container> <label class="textInput">{{\'classifier.value\' | translate}}</label> <input ng-model="criteria.value" type="text"> </md-input-container> <div layout="row"> <md-button type="submit" class="md-raised md-primary">{{\'main.button.search\' | translate}}</md-button> <md-button class="md-raised" ng-click="clearCriteria()">{{\'main.button.clear\' | translate}}</md-button> <md-button class="md-raised" ng-href="#/classifier/{{mainClassCode}}/new">{{\'main.button.create\' | translate}}</md-button> <md-button class="md-raised" ng-href="#/classifier">{{\'main.button.back\' | translate}}</md-button> </div> </div> <div flex-xs="0" flex-gt-xs="0" flex-gt-sm="50"></div> </div> </div> </form> </div> <div layout-padding> <div flex> <md-table-container> <table md-table md-progress="tabledata.$promise"> <thead md-head md-order="criteria.order" md-on-reorder="loadData"> <tr md-row> <th md-column md-order-by="value">{{\'classifier.value\' | translate}}</th> <th md-column md-order-by="{{currentLanguageNameField()}}">{{\'classifier.name\' | translate}}</th> <th md-column>{{\'classifier.valid\' | translate}}</th> <th md-column></th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="row in tabledata.content" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell>{{::row.value}}</td> <td md-cell>{{currentLanguageNameField(row)}}</td> <td md-cell>{{(isValid(row) ? \'classifier.validTrue\' : \'classifier.validFalse\') | translate}}</td> <td md-cell> <md-button md-no-ink class="md-primary change-button" ng-href="#/classifier/{{::mainClassCode}}/{{::row.code}}/edit">{{\'main.button.change\' | translate}}</md-button> </td> </tr> </tbody> </table> </md-table-container> <md-table-pagination md-limit="criteria.size" md-limit-options="[10, 20, 50]" md-page="criteria.page" md-total="{{tabledata.totalElements}}" md-on-paginate="loadData" md-label="{page: \'{{\'main.page\' | translate}}:\', rowsPerPage: \'{{\'main.rowPerPage\' | translate}}:\', of: \'{{\'main.of\' | translate}}\' }" md-page-select></md-table-pagination> </div> </div>'),a.put("classifier/classifier.list.html",'<div layout-padding> <div flex> <fieldset> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'main.searchlabel\' | translate}}</legend> <form ng-submit="loadData()"> <div flex> <div layout="row"> <div flex-xs="100" flex-gt-xs="100" flex-gt-sm="50" layout="column"> <!--div class="indentForToast"></div--> <md-input-container> <label class="textInput">{{\'classifier.name\' | translate}}</label> <input ng-model="criteria.name" type="text" autofocus> </md-input-container> <div layout="row"> <md-button type="submit" class="md-raised md-primary">{{\'main.button.search\' | translate}}</md-button> <md-button class="md-raised" ng-click="clearCriteria()">{{\'main.button.clear\' | translate}}</md-button> </div> </div> <div flex-xs="0" flex-gt-xs="0" flex-gt-sm="50"></div> </div> </div> </form> </fieldset> </div> </div> <div layout-padding> <div flex> <md-table-container> <table md-table md-progress="tabledata.$promise"> <thead md-head md-order="criteria.order" md-on-reorder="loadData"> <tr md-row> <th md-column md-order-by="{{currentLanguage()===\'en\' ? \'nameEn\' : \'nameEt\'}}">{{\'classifier.mainname\' | translate}}</th> <th md-column md-numeric>{{\'classifier.count\' | translate}}</th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="classifier in tabledata.content" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell><a ng-href="#/classifier/{{::classifier.code}}?_menu">{{currentLanguageNameField(classifier)}}</a></td> <td md-cell>{{::classifier.count}}</td> </tr> </tbody> </table> </md-table-container> <md-table-pagination md-limit="criteria.size" md-limit-options="[10, 20, 50]" md-page="criteria.page" md-total="{{tabledata.totalElements}}" md-on-paginate="loadData" md-label="{page: \'{{\'main.page\' | translate}}:\', rowsPerPage: \'{{\'main.rowPerPage\' | translate}}:\', of: \'{{\'main.of\' | translate}}\' }" md-page-select></md-table-pagination> </div> </div>'),a.put("committee/committee.edit.html",'<div class="ois-form-layout-padding" ng-cloak> <form layout="column" name="committeeEditForm"> <div layout="row" ng-if="showName"> <md-input-container flex> <label>{{\'committee.name\' | translate}}</label> <input type="text" ng-model="record.nameEt" md-maxlength="255"> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex> <label>{{\'committee.addInfo\' | translate}}</label> <textarea ng-model="record.addInfo" md-maxlength="4000" max-rows="10"></textarea> </md-input-container> </div> <div layout="row"> <div layout="column" flex="45"> <label class="common-label">{{\'committee.validDate\' | translate}}</label> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex flex-sm="100" flex-xs="100"> <label>{{\'main.from\' | translate}}</label> <md-datepicker ng-model="record.validFrom" md-max-date="record.validThru" required></md-datepicker> </md-input-container> <md-input-container flex flex-sm="100" flex-xs="100" flex-offset-xs="0" flex-offset-sm="0" flex-offset="5"> <label>{{\'main.thru\' | translate}}</label> <md-datepicker ng-model="record.validThru" md-min-date="record.validFrom" required></md-datepicker> </md-input-container> </div> </div> </div> <div ng-if="committeeType === \'KOMISJON_T\'"> <div layout="row" flex="100"> <hois-autocomplete flex ng-model="formState.curriculum" method="curriculums" label="committee.curriculums" md-selected-item-change="curriculumSelected()"></hois-autocomplete> </div> <div layout="column" class="common-label" flex="95" ng-repeat="curriculum in record.curriculums"> <div layout="row" flex layout-align="start center"> <div flex="5">&nbsp;</div> <div flex="50">{{curriculum.nameEt}}</div> <div> <a ng-click="deleteCurriculum(curriculum)" class="remove">&times;</a> </div> </div> </div> </div> <label class="md-subhead">{{\'committee.memberIs\' | translate}}</label> <md-table-container> <table md-table> <thead md-head> <tr md-row> <th md-column>{{\'committee.isChairman\' | translate}}</th> <th md-column ng-if="!showPersonSearch">{{\'committee.external\' | translate}}</th> <th md-column>{{\'committee.member\' | translate}}</th> <th md-column></th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="member in record.members" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <ng-form name="committeeMemberForm"> <td md-cell> <md-checkbox ng-model="member.isChairman" ng-change="assingChairman(member)" aria-label="{{\'committee.isChairman\' | translate}} {{member.memberName}}"> </md-checkbox> </td> <td md-cell ng-if="!showPersonSearch"> <md-checkbox ng-model="member.isExternal" aria-label="{{\'committee.external\' | translate}} {{member.memberName}}"> </md-checkbox> </td> <td md-cell> <md-input-container ng-if="member.isExternal"> <input type="text" ng-model="member.memberName" md-maxlength="100" aria-label="{{\'committee.name\' | translate}} {{member.memberName}}" required> </md-input-container> <md-input-container ng-if="!member.isExternal && !showPersonSearch"> <hois-select ng-model="member.teacher" type="teacher" aria-label="{{\'committee.name\' | translate}} {{member.memberName}}" required></hois-select> </md-input-container> <div layout="row" flex="100" ng-if="showPersonSearch"> <hois-autocomplete flex ng-model="member.person" method="committeeMembers" no-paging="true" label="committee.member" aria-label="{{\'committee.member\' | translate}} {{member.memberName}}" required></hois-autocomplete> </div> </td> <td md-cell><a class="remove nomargin" ng-click="removeMember(member)">&times;</a></td> </ng-form> </tr> </tbody> </table> </md-table-container> <br> <div layout="row"> <md-button class="md-raised" ng-click="addMember()">{{\'committee.addMember\' | translate}}</md-button> </div> <br> <div> <md-button class="md-raised md-primary" ng-click="save()">{{\'main.button.save\' | translate}}</md-button> <md-button class="md-raised" ng-click="delete()" ng-if="record.id">{{\'main.button.delete\' | translate}}</md-button> <md-button class="md-raised" ng-click="back(\'#/committees/\' + committeeType, committeeEditForm)">{{\'main.button.back\' | translate}}</md-button> </div> </form> </div>'),a.put("committee/committee.search.html",'<div class="ois-form-layout-padding ois-form-layout" ng-cloak> <div flex> <fieldset> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'main.searchlabel\' | translate}}</legend> <form name="searchForm" ng-submit="searchForm.$valid && loadData()" novalidate class="nomargin"> <div layout="row" layout-sm="column" layout-xs="column" ng-if="!showPersonSearch"> <md-input-container flex> <label>{{\'committee.member\' | translate}}</label> <!-- <hois-select ng-model="criteria.memberName" values="members" value-property="name" show-property="name"></hois-select> --> <md-select ng-model="criteria.member"> <md-option ng-value=""> </md-option> <md-option ng-value="member" ng-repeat="member in members | orderBy: \'nameEt\'"> {{ member.nameEt }} </md-option> </md-select> </md-input-container> </div> <div layout="row" ng-if="showPersonSearch"> <hois-autocomplete flex ng-model="criteria.person" method="committeeMembers" no-paging="true" label="committee.member"></hois-autocomplete> </div> <div layout="row" ng-if="showName"> <md-input-container flex="100"> <label>{{\'committee.name\' | translate}}</label> <input type="text" ng-model="criteria.nameEt" md-maxlength="255"> </md-input-container> </div> <br> <div layout="row"> <div layout="column" flex="45"> <label class="common-label">{{\'committee.validDate\' | translate}}</label> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex flex-sm="100" flex-xs="100"> <label>{{\'main.from\' | translate}}</label> <md-datepicker ng-model="criteria.validFrom" md-max-date="criteria.validThru"></md-datepicker> </md-input-container> <md-input-container flex flex-sm="100" flex-xs="100" flex-offset-xs="0" flex-offset-sm="0" flex-offset="5"> <label>{{\'main.thru\' | translate}}</label> <md-datepicker ng-model="criteria.validThru" md-min-date="criteria.validFrom"></md-datepicker> </md-input-container> </div> </div> </div> <md-input-container flex="45" flex-sm="100" flex-xs="100"> <md-checkbox ng-model="criteria.showInvalid" aria-label="{{\'committee.showInvalid\' | translate}}"> {{\'committee.showInvalid\' | translate}} </md-checkbox> </md-input-container> <br><br> <div layout="row"> <md-button type="submit" class="md-raised md-primary">{{\'main.button.search\' | translate}}</md-button> <md-button class="md-raised" ng-click="clearCriteria()">{{\'main.button.clear\' | translate}}</md-button> <md-button class="md-raised" ng-if="canEdit" ng-href="#/committees/{{committeeType}}/new">{{\'main.button.create\' | translate}}</md-button> </div> </form> </fieldset> </div> </div> <div layout-padding> <div flex> <md-table-container> <table md-table md-progress="tabledata.$promise"> <thead md-head md-order="criteria.order" md-on-reorder="loadData"> <tr md-row> <th md-column md-order-by="chairman">{{\'committee.chairman\' | translate}}</th> <th md-column md-order-by="nameEt" ng-if="showName">{{\'committee.name\' | translate}}</th> <th md-column md-order-by="c.validFrom">{{\'committee.validFromDate\' | translate}}</th> <th md-column md-order-by="c.validThru">{{\'committee.validThruDate\' | translate}}</th> <th md-column>{{\'committee.members\' | translate}}</th> <th md-column></th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="row in tabledata.content" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell><a ng-href="#/committees/{{committeeType}}/{{row.id}}/view">{{row.chairman}}</a></td> <td md-cell ng-if="showName">{{::row.nameEt}}</td> <td md-cell>{{row.validFrom | hoisDate}}</td> <td md-cell>{{row.validThru | hoisDate}}</td> <td md-cell> <table> <tr ng-repeat="member in row.members | orderBy"> <td>{{member}}</td> </tr> </table> </td> <td md-cell> <md-button md-no-ink class="md-primary change-button" ng-if="canEdit" ng-href="#/committees/{{committeeType}}/{{row.id}}/edit"> {{\'main.button.change\' | translate}} </md-button> </td> </tr> </tbody> </table> </md-table-container> <md-table-pagination md-limit="criteria.size" md-limit-options="[10, 20, 50]" md-page="criteria.page" md-total="{{tabledata.totalElements}}" md-on-paginate="loadData" md-label="{page: \'{{\'main.page\' | translate}}:\', rowsPerPage: \'{{\'main.rowPerPage\' | translate}}:\', of: \'{{\'main.of\' | translate}}\'}" md-page-select></md-table-pagination> </div> </div>'),a.put("committee/committee.view.html",'<div class="ois-form-layout-padding form-readonly" ng-cloak> <div layout="row" ng-if="showName"> <md-input-container flex> <label>{{\'committee.name\' | translate}}</label> <hois-value value="record.nameEt"></hois-value> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex> <label>{{\'committee.addInfo\' | translate}}</label> <hois-value value="record.addInfo"></hois-value> </md-input-container> </div> <div layout="row"> <div layout="column" flex="45"> <label class="common-label">{{\'committee.validDate\' | translate}}</label> <div>&nbsp;</div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex flex-sm="100" flex-xs="100"> <label>{{\'main.from\' | translate}}</label> <hois-value value="record.validFrom | hoisDate"></hois-value> </md-input-container> <md-input-container flex flex-sm="100" flex-xs="100" flex-offset-xs="0" flex-offset-sm="0" flex-offset="5"> <label>{{\'main.thru\' | translate}}</label> <hois-value value="record.validThru | hoisDate"></hois-value> </md-input-container> </div> </div> </div> <div layout="row" ng-if="committeeType === \'KOMISJON_T\'"> <md-input-container flex> <label>{{\'committee.curriculums\' | translate}}</label> <hois-value value="record.curriculums.map(currentLanguageNameField).join(\', \')"></hois-value> </md-input-container> </div> <label class="md-subhead">{{\'committee.memberIs\' | translate}}</label> <md-table-container> <table md-table> <thead md-head> <tr md-row> <th md-column>{{\'committee.isChairman\' | translate}}</th> <th md-column ng-if="!showPersonSearch">{{\'committee.external\' | translate}}</th> <th md-column>{{\'committee.name\' | translate}}</th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="member in record.members" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell> <i class="material-icons" ng-if="member.isChairman">done</i> </td> <td md-cell ng-if="!showPersonSearch"> <i class="material-icons" ng-if="member.isExternal">done</i> </td> <td md-cell> <hois-value value="member.memberName"></hois-value> </td> </tr> </tbody> </table> </md-table-container> <br> <fieldset ng-if="committeeType === \'KOMISJON_T\'"> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'committee.decisions\' | translate}}</legend> <md-table-container> <table md-table class="secondary-table"> <thead md-head> <tr md-row> <th md-column>{{\'stipend.decision.protocolNr\' | translate}}</th> <th md-column>{{\'stipend.decision.decided\' | translate}}</th> <th md-column>{{\'stipend.type\' | translate}}</th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="decision in record.scholarshipDecisions track by $index" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell>{{::decision.protocolNr}}</td> <td md-cell> <a ng-href="#/scholarships/decision/{{getScholarshipTypeForUrl(decision.scholarshipType.code)}}/{{decision.id}}">{{decision.decided | hoisDate}}</a> </td> <td md-cell>{{currentLanguageNameField(decision.scholarshipType)}}</td> </tr> </tbody> </table> </md-table-container> </fieldset> <fieldset ng-if="committeeType === \'KOMISJON_V\'"> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'committee.decisions\' | translate}}</legend> <md-table-container> <table md-table class="secondary-table"> <thead md-head> <tr md-row> <th md-column width="20%">{{\'committee.apelDecisons.student\' | translate}}</th> <th md-column>{{\'committee.apelDecisons.decision\' | translate}}</th> <th md-column width="10%"></th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="row in record.apelApplicationDecisions track by $index" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell><a ng-href="/#/apelApplication/{{row.applicationId}}/view">{{row.studentName}}</a></td> <td md-cell> <span>{{row.decision.length &GT 150 && !row.showAll ? (row.decision | limitTo:150) + \'...\' : row.decision}}</span> </td> <td md-cell> <span class="custom-tooltip" ng-if="!row.showAll && row.decision.length > 150" ng-click="row.showAll = true">{{\'committee.apelDecisons.showMore\' | translate}}</span> <span class="custom-tooltip" ng-if="row.showAll" ng-click="row.showAll = false">{{\'committee.apelDecisons.showLess\' | translate}}</span> </td> </tr> </tbody> </table> </md-table-container> </fieldset> <br> <div> <md-button class="md-raised md-primary" ng-if="record.canEdit" ng-href="#/committees/{{committeeType}}/{{record.id}}/edit?_noback">{{\'main.button.change\' | translate}}</md-button> <md-button class="md-raised" ng-href="#/committees/{{committeeType}}">{{\'main.button.back\' | translate}}</md-button> </div> </div>'),a.put("components/confirm.dialog.html",'<md-dialog aria-label="grade add dialog" flex="30" flex-xs="100" ng-cloak> <md-dialog-content> <div class="md-dialog-content"> <p translate="{{messages.prompt}}" translate-values="{{messages}}"></p> <p ng-repeat="prompt in messages.extraPrompts" translate="{{prompt}}" translate-values="{{messages}}"></p> </div> </md-dialog-content> <md-dialog-actions layout="row" layout-align="start center"> <md-button ng-click="accept()" class="md-raised md-primary">{{messages.accept | translate}}</md-button> <md-button ng-click="cancel()" class="md-raised">{{messages.cancel | translate}}</md-button> </md-dialog-actions> </md-dialog>'),a.put("components/file.add.dialog.html",'<md-dialog aria-label="file add dialog" flex="40" flex-xs="100"> <form name="dialogForm" ng-cloak> <md-toolbar> <div class="md-toolbar-tools"> <h2>{{"main.addFile" | translate}}</h2> <span flex></span> <md-button class="md-icon-button" ng-click="cancel()"> <md-icon md-font-set="material-icons">close</md-icon> </md-button> </div> </md-toolbar> <md-dialog-content> <span flex></span> <div class="ois-form-layout" layout="column" layout-margin ng-cloak> <div layout="column"> <md-input-container flex> <lf-ng-md-file-input name="file" lf-files="data.file" lf-browse-label="{{\'main.addFile\' | translate}}" lf-remove-label="{{\'main.button.delete\' | translate}}" lf-placeholder="" lf-filesize="5MB" disallow-same-file="addedFiles" lf-required> </lf-ng-md-file-input> </md-input-container> <div ng-messages="dialogForm.file.$error"> <div class="invalid" ng-message="required">{{\'main.messages.error.selectFile\' | translate}}</div> <div class="invalid" ng-message="filesize">{{\'main.messages.error.fileTooLarge\' | translate}} 5MB!</div> <div class="invalid" ng-message="samefile">{{\'main.messages.error.fileAlreadyExists\' | translate}}</div> </div> </div> </div> </md-dialog-content> <span flex></span> <md-dialog-actions layout="row" layout-align="start center"> <md-button class="md-raised md-primary" ng-click="submit()">{{"main.button.save" | translate}}</md-button> <md-button class="md-raised" ng-click="cancel()">{{"main.button.close" | translate}}</md-button> </md-dialog-actions> </form> </md-dialog>'),a.put("components/hois.autocomplete.html",'<md-autocomplete flex md-input-minlength="2" md-no-cache="true" md-selected-item="ngModel" md-selected-item-change="selectedItemChange()" md-search-text="searchText" md-items="item in search(searchText)" md-item-text="getChipText(item)" md-require-match ng-required="required" ng-disabled="disabled" md-floating-label="{{label | translate}}"> <md-item-template> <span md-highlight-text="searchText" ng-style="{\'color\': warningParam && item[\'{{warningParam}}\'] ? \'red\' : \'inherit\'}">{{$root.currentLanguageNameField(item)}}</span> </md-item-template> {{highlightParam}} </md-autocomplete>'),a.put("components/hois.autocomplete.nolabel.html",'<md-autocomplete flex md-input-minlength="2" md-no-cache="true" md-selected-item="ngModel" md-selected-item-change="selectedItemChange()" md-search-text="searchText" md-items="item in search(searchText)" md-item-text="getChipText(item)" md-require-match ng-required="required" ng-disabled="disabled"> <md-item-template> <span md-highlight-text="searchText" ng-style="{\'color\': warningParam && item[\'{{warningParam}}\'] ? \'red\' : \'inherit\'}">{{$root.currentLanguageNameField(item)}}</span> </md-item-template> </md-autocomplete>'),a.put("components/hois.chip.autocomplete.html",'<md-chips ng-model="ngModel" md-autocomplete-snap md-transform-chip="transformChip($chip)" md-require-match="true" md-max-chips="{{maxChips}}" readonly> <md-autocomplete md-selected-item="selectedItem" md-selected-item-change="selectedItemChange()" md-search-text="searchText" md-min-length="2" md-no-cache="true" md-items="item in search(searchText)" placeholder="{{label | translate}}" ng-hide="ngModel.length > maxChips" flex> <span md-highlight-text="searchText" ng-style="{\'color\': warningParam && item[\'{{warningParam}}\'] ? \'red\' : \'inherit\'}">{{$root.currentLanguageNameField(item)}}</span> </md-autocomplete> <md-chip-template> <span> <strong>{{getChipText($chip)}}</strong> </span> </md-chip-template> </md-chips>'),a.put("components/hois.created.modified.html",'<div layout="column"> <div>&nbsp;</div> <fieldset tabindex="1000"> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'main.insertedOrChanged\' | translate}}</legend> <md-table-container> <table md-table md-progress="promise" class="secondary-table"> <thead md-head md-order="query.order" md-on-reorder="getInformationSection"> <tr md-row> <th md-column><span>{{\'main.state\' | translate}}</span></th> <th md-column><span>{{\'main.insertOrChangeDate\' | translate}}</span></th> <th md-column><span>{{\'main.insertedOrChangedByFirstAndLastName\' | translate}}</span></th> </tr> </thead> <tbody md-body> <tr md-row ng-if="object.inserted" class="odd"> <td md-cell>{{\'main.inserted\' | translate}}</td> <td md-cell>{{object.inserted | hoisDateTime}}</td> <td md-cell>{{object.insertedBy}}</td> </tr> <tr md-row ng-if="object.changed" class="even"> <td md-cell>{{\'main.changed\' | translate}}</td> <td md-cell>{{object.changed | hoisDateTime}}</td> <td md-cell>{{object.changedBy}}</td> </tr> </tbody> </table> </md-table-container> </fieldset> <!--/md-card--> </div>'),a.put("components/hois.select.html",'<md-select md-on-open="queryPromise"> <md-option ng-if="!isMultiple && !isRequired && !ngRequired" md-option-empty></md-option> <md-option ng-repeat="option in filteredOptions | orderBy: showProperty ? showProperty : $root.currentLanguageNameField()" ng-value="option[valueProperty]" aria-label="{{$root.currentLanguageNameField(option)}}"> <span ng-style="{\'color\': warningParam && option[\'{{warningParam}}\'] ? \'red\': \'inherit\'}"> {{showProperty ? option[showProperty] : $root.currentLanguageNameField(option)}} </span> </md-option> </md-select>'),a.put("components/menu-link.tmpl.html",'<md-button ng-class="{\'active\' : isSelected()}" ng-href="#{{section.url}}" ng-click="focusSection()" md-colors="{color: isSelected() ? \'primary-900\':\'primary-900\'}"> <md-icon md-colors="{color: isSelected() ? \'primary-900\':\'primary-900\'}" md-font-set="material-icons" class="sm" ng-class="{\'active\' : isSelected()}">{{section.icon}}</md-icon> {{section.name | translate}} <span class="md-visually-hidden" ng-if="isSelected()"> current page </span> </md-button>'),a.put("components/menu-toggle.tmpl.html",'<md-button class="md-button-toggle" ng-click="toggle()" aria-controls="docs-menu-{{section.name | nospace}}" aria-expanded="{{isOpen()}}"> <div flex layout="row" md-colors="{color: isSelected() ? \'primary-900\':\'primary-900\'}" ng-class="{\'active\' : isSelected()}"> <md-icon md-font-set="material-icons" class="sm" md-colors="{color: isSelected() ? \'primary-900\':\'primary-900\'}">{{section.icon}}</md-icon> {{section.name | translate}} <span flex></span> <span aria-hidden="true" class="md-toggle-icon" ng-class="{\'toggled\' : isOpen()}"> <md-icon md-font-set="material-icons">expand_less</md-icon> </span> </div> <span class="md-visually-hidden"> Toggle {{isOpen()? \'expanded\' : \'collapsed\'}} </span> </md-button> <ul id="docs-menu-{{section.name | nospace}}" class="menu-toggle-list" aria-hidden="{{!renderContent}}" ng-style="{ visibility: renderContent ? \'visible\' : \'hidden\' }"> <li ng-repeat="page in section.pages"> <menu-link section="page"></menu-link> </li> </ul>'),a.put("components/message.dialog.html",'<md-dialog aria-label="grade add dialog" flex="30" flex-xs="100" ng-cloak> <md-dialog-content> <div class="md-dialog-content"> <p translate="{{messages.prompt}}" translate-values="{{messages}}"></p> </div> </md-dialog-content> <md-dialog-actions layout="row" layout-align="start center"> <md-button ng-click="close()" class="md-raised">{{messages.close | translate}}</md-button> </md-dialog-actions> </md-dialog>'),a.put("components/moodle.enroll.dialog.html",'<md-dialog aria-label="moodle enroll dialog" flex="50"> <form name="dialogForm" ng-submit="loadData()" novalidate ng-cloak> <md-toolbar> <div class="md-toolbar-tools"> <h2>{{"moodle.enrollStudents" | translate}}</h2> <span flex></span> <md-button class="md-icon-button" ng-click="cancel()"> <md-icon md-font-set="material-icons">close</md-icon> </md-button> </div> </md-toolbar> <md-dialog-content> <div class="md-dialog-content form-readonly"> <div flex> <div layout="row" flex> <h2 flex>{{\'moodle.enroll.enrolled\' | translate}}: {{moodleResponse.enrolled}}</h2> </div> <div layout="row" flex> <h2 flex> {{\'moodle.enroll.failed\' | translate}}: {{moodleResponse.failed.length + moodleResponse.missingUser.length + moodleResponse.missingIdcode.length}} </h2> </div> <ol> <li ng-repeat="user in moodleResponse.failed"> {{user}} </li> <li ng-repeat="user in moodleResponse.missingUser"> {{user}} ({{\'moodle.enroll.missingUser\' | translate}}) </li> <li ng-repeat="user in moodleResponse.missingIdcode"> {{user}} ({{\'moodle.enroll.missingIdcode\' | translate}}) </li> </ol> </div> <span flex></span> <md-dialog-actions layout="row" layout-align="start center"> <md-button class="md-raised" ng-click="cancel()">{{"main.button.close" | translate}}</md-button> </md-dialog-actions> </div> </md-dialog-content> </form> </md-dialog>'),a.put("components/terms.en.dialog.html",'<md-dialog aria-label="terms" flex="80" flex-xs="100" ng-cloak> <md-dialog-content> <div class="md-dialog-content"> <p>The study information system Tahvel (hereinafter Tahvel) is established with the aim to ensure effective, single and secure administration of studies across the educational levels. The studies are managed according to the legislation of the relevant area.</p> <p>The aim of Tahvel is to ensure the joined educational institutions (hereinafter <span class="bold">Institution</span>) a single and secure web-based environment through which to manage the study-related activities and inquire and communicate the data necessary for managing studies from the Admissions Information System to the Estonian Schools’ Information System and Estonian Education Information System.</p> <p>The Controller of Tahvel as the information system is the Information Technology Foundation for Education (hereinafter <span class="bold">HITSA</span>). The Controllers of the data in Tahvel are the Institutions to the extent of data processed by them. In respect of the data of the Institution, HITSA is the Processor by enabling to use Tahvel for processing personal data, by providing the support for the use of Tahvel, and by hosting the personal data in Tahvel in its servers. The users of Tahvel are all natural or legal persons who use the Tahvel environment.</p> <p>HITSA and the Institutions undertake to protect the personal data processed in Tahvel and their privacy.</p> <ol class="terms"> <li>General terms <ol type="a"> <li>The use of any information or data volume in Tahvel in any way or any purpose is deemed as the use of Tahvel.</li> <li>The use of Tahvel is allowed only in case of accepting all terms of use. The use of Tahvel confirms accepting all terms of use.</li> <li>The Institution has the right to use Tahvel for managing the studies. All Institutions get a sub-account of Tahvel Institution.</li> <li>The Institution who wishes to use the Tahvel shall submit a relevant request that is digitally signed by the signatory to HITSA.</li> <li>An agreement for maintaining data is entered into with all Institutions. The agreement will fix, inter alia, the backup principles. The template of the agreement is available at <a href="https://projektid.hitsa.ee/display/IS2" target="_blank" rel="noopener">https://projektid.hitsa.ee/display/IS2</a>.</li> <li>The code of Tahvel is public, available at <a href="https://github.com/hariduspilv/oppeinfo" target="_blank" rel="noopener">https://github.com/hariduspilv/oppeinfo</a>.</li> <li>Technical architecture and functionality is available on the project page at <a href="https://projektid.hitsa.ee/display/IS2" target="_blank" rel="noopener">https://projektid.hitsa.ee/display/IS2</a>.</li> <li>Tahvel can be visited only with the general-purpose Internet browsers (Chrome, Mozilla Firefox, Edge, Opera, Safari and others).</li> <li>Visiting of Tahvel with special purpose programs for any purpose is forbidden without a previous written consent of HITSA. The special purpose program is a program that is not intended for general purpose Internet browsing or which work is not directly controlled by a human. The special purpose programs include inter alia, scripts, robots and automated tools or programs that are not intended for Internet browsing.</li> <li>The activities that disturb or hinder the provision of services via Tahvel are not allowed while using Tahvel, including the user must refrain from overloading the computer network and servers.</li> <li>In the case where a provision of the terms of use is invalid due to conflict with the law, it will not affect the validity of the remaining provisions of the terms of use.</li> </ol> </li> <li>How to create and delete the Tahvel account <ol type="a"> <li>The Institution will create a Tahvel account for the user. To create the account, the person must have an employment relationship or a relationship under the law of obligations act with the Institution, or study in the Institution according to the documents regulating the study arrangements of the Institution.</li> <li>In the case of a person with the need of the representation right, their legal representative can confirm the activities in Tahvel. The Institution is responsible for entering the representative.</li> <li>The student accounts are created in the Admissions Information System or based on the data entered by the Institution.</li> <li>The teacher’s account is created based on the data entered by the enterprise software SAP or Institution.</li> <li>The administrative worker’s account is created based on the data entered by the Institution. When taking Tahvel into use, HITSA will enter the Institution’s administrative worker of the first Institution according to the application submitted by the authorised person of the Institution.</li> <li>To delete the account, the person must submit a request to the Institution with who their account is associated. The account cannot be deleted if there is a legal base for keeping it open (e.g. the account is associated with data which retention date has not arrived yet).</li> <li>It is not possible to use the Service any more after deleting the Account.</li> </ol> </li> <li>Personal data protection <ol type="a"> <li>The aim of collecting and processing the personal data is to identify the person, managing the person-related studies, including involving the person in studies and adding performances there and drawing up the studies related documents, compiling the studies related statistics of the Institutions.</li> <li>Tahvel processes the personal data in compliance with the European Parliament and Council Regulation (EU) 2016/679 of 27 April 2016 on the protection of natural persons in the processing of personal data and on the free movement of such data and repealing Directive 95/46/EC (General Data Protection Regulation).</li> <li>To protect the personal data, all relevant organisational, technical and physical measures are applied upon processing of personal data.</li> <li>The personal data are processed in Tahvel only via the secure connection (https). The users authenticate via ID card, Mobile ID or other identity solution approved by the state and the Institutions account management.</li> <li>Only the authorised and guided persons can access data for processing according to the extent necessary for performing their duties.</li> <li>Personal data can only be transferred without the consent of the person to the establishment or a party who have the direct right arising from the law (e.g. court of law or pre-trial body conducting proceeding) and the justified need.</li> <li>The personal data is stored according to the normative documents valid for the educational institutions.</li> <li>While deleting the user account, the personal data may be retained in the backup copy in Tahvel for a limited period.</li> <li>The User must address the Institution under whose educational activities their personal data are processed with issues related to processing personal data related to the study activities, or performing the law-related rights.</li> </ol> </li> <li>Processed personal data <ol type="a"> <li>Personal data are processed in Tahvel in the composition established by the Institution. The data are entered to Tahvel by the Institution, inquired from other information systems or entered personally by the user.</li> <li>The main data of the person (name, personal identification code, gender, citizenship, communication language), studies information (incl performances, documents), contact information, representatives and data on special conditions, if needed, are processed from the student’s data in Tahvel.</li> <li>The person’s main data, working place data related to the Institution and information related to the arrangement of studies are processed from the data of the teacher in Tahvel.</li> <li>The detailed data composition contained in Tahvel is disclosed in RIHA and is publicly available at <a href="https://www.riha.ee/Infos%C3%BCsteemid/Vaata/ois2" target="_blank" rel="noopener">https://www.riha.ee/Infos%C3%BCsteemid/Vaata/ois2</a></li> <li>Tahvel is connected via the data exchange layer X-Road with: <ul> <li>Admissions Information System (SAIS);</li> <li>Estonian Education Information System (EHIS);</li> <li>Professional register;</li> <li>Enterprise software SAP (Employee self-service portal).</li> </ul> </li> <li>Tahvel exchanges data via the safe SOAP synchronous web services: <ul> <li>Estonian Schools’ Information System (EKIS);</li> <li>HITSA Study Information System Moodle;</li> <li>Plagiarism detection software KRATT.</li> </ul> </li> <li>Tahvel uses the address search API inADS of the land Board.</li> <li>The personalised data (logs) with which the person logged in, which browser was used and when the session ended are collected upon the visits of Tahvel.</li> <li>The pages visited by the person are logged only on the web server level and are hence not personalised. While processing the depersonalised data, no specific user can be identified in any way.</li> </ol> </li> <li>Ensurance of Accuracy of Data, amendment and rectification of data <ol type="a"> <li>The person who submitted the data and the person who entered the data are responsible for the accuracy of the data entered to Tahvel.</li> <li>The data can be amended by the persons themselves, and HITSA by authorisation of the Institution. All amendments of the data are logged.</li> <li>When the data are entered to Tahvel, the data about the person who entered data and the date and time of entering are stored.</li> <li>When the data are rectified in Tahvel, the date of rectification and the person who rectified the data are fixed in the system log.</li> <li>Adding, amendment and deletion of data are deemed as making an entry in Tahvel.</li> <li>Every Institution enters only the data of own organisation.</li> </ol> </li> <li>Participants’ liability in data processing <ol type="a"> <li>Tahvel is hosted in the servers managed by HITSA and located in the territory of Estonia. Servers’ and Tahvel software is maintained currently with up-to-date security updates.</li> <li>HITSA is responsible for the uninterrupted operation of Tahvel and necessary development works, provides support of the information system, arranges storage and backup copies of the data that are contained in Tahvel.</li> <li>HITSA is not responsible for the failures of the Tahvel caused by circumstances that are outside the control of HITSA.</li> <li>HITSA is not responsible for the content of the data and documents entered to Tahvel by the users.</li> <li>HITSA may process all personal data processed in Tahvel for providing information system support and hosting service.</li> <li>The Institutions are responsible for performing the requirements related to management of studies related information, processing of personal data (incl obligation of notification) and responding to the inquiry of the data subject.</li> <li>The Institution undertakes to ensure the compliance of the user roles and rights of the Institution and prevent an access or unauthorised persons to Tahvel and personal data.</li> <li>The Institution is responsible in case of the damage caused via the roles, including violation of the data protection requirements and activities damaging functioning of Tahvel.</li> <li>HITSA has a unilateral right to limit or stop an access of the Institution or the user to Tahvel in case of an actual or potential risk to the security of Tahvel. HITSA will immediately inform the relevant Institution about restricting or stopping an access of the users of the Institution and both parties have to take immediate measures to eliminate the risk.</li> <li>HITSA will inform about possible data leaks all Users whom the data leak concerned or might have concerned on its website <a href="https://www.hitsa.ee" target="_blank" rel="noopener">www.hitsa.ee</a>, the home page of the Service and via e-mails provided in Moodle within 72 hours. In addition, HITSA will inform the Information System Authority and the Data Protection Inspectorate via the appropriate incident report form. In addition, HITSA will immediately take all measures to exclude the use of leaked data in any way against the users of the service.</li> </ol> </li> </ol> </div> </md-dialog-content> <md-dialog-actions layout="row" layout-align="start center"> <md-button ng-click="cancel()" class="md-raised">{{\'main.button.back\' | translate}}</md-button> </md-dialog-actions> </md-dialog>'),
a.put("components/terms.et.dialog.html",'<md-dialog aria-label="terms" flex="80" flex-xs="100" ng-cloak> <md-dialog-content> <div class="md-dialog-content"> <h1>Tahvel kasutustingimused</h1> <p>Õppeinfosüsteemi Tahvel (edaspidi Tahvel) on asutatud eesmärgiga tagada haridustasemete ülene efektiivne, ühtne ja turvaline õppetöö administreerimine. Õppetöö administreerimine toimub vastavalt valdkonna õigusaktidele.</p> <p>Tahvli eesmärgiks on tagada liitunud haridusasutustele (edaspidi <span class="bold">Asutus</span>) ühtne ja turvaline veebipõhine keskkond, mille kaudu hallata oma õppetööga seotud toiminguid ning pärida ja edastada õppetöö administreerimiseks vajalikke andmeid Sisseastumise Infosüsteemist, Eesti Koolide Infosüsteemile ja Eesti Hariduse Infosüsteemile.</p> <p>Tahvli, kui infosüsteemi, vastutav töötleja on Hariduse Infotehnoloogia Sihtasutus (edaspidi <span class="bold">HITSA</span>). Tahvlis sisalduvate andmete vastutavad töötlejad on Asutused nende poolt töödeldavate andmete ulatuses. Asutuse andmete osas on HITSA volitatud töötleja võimaldades isikuandmete töötlemiseks kasutada Tahvlit, pakkudes Tahvli kasutamisel kasutajatuge ja majutades Tahvlis sisalduvaid andmeid oma serverites. Tahvli kasutajad on kõik füüsilised või juriidilised isikud, kes kasutavad Tahvli keskkonda.</p> <p>HITSA ja Asutused kohustuvad kaitsma Tahvlis töödeldavaid isikuandmeid ja nende privaatsust.</p> <ol class="terms"> <li>Üldtingimused <ol type="a"> <li>Tahvli kasutamiseks loetakse mistahes Tahvlis asuva teabe või andmehulga kasutamist mistahes viisil või eesmärgil.</li> <li>Tahvli kasutamine on lubatud vaid kõikide kasutustingimustega nõustumise korral. Tahvli kasutamine kinnitab kõikide kausutustingimustega nõustumist.</li> <li>Asutusel on õigus kasutada Tahvlit õppetöö administreerimiseks. Igale Asutusele tehakse Tahvlis Asutuse alamkonto.</li> <li>Tahvlit kasutada sooviv Asutus peab saatma vastavasisulise allkirjaõigusliku isiku poolt digitaalselt allkirjastatud taotluse HITSAsse.</li> <li>Kõikide Asutustega sõlmitakse andmete hoidmise kokkulepe. Kokkuleppes fikseeritakse mh varundamise põhimõtted. Kokkuleppe põhi on kättesaadav: <a href="https://projektid.hitsa.ee/display/IS2" target="_blank" rel="noopener">https://projektid.hitsa.ee/display/IS2</a>.</li> <li>Tahvli kood on avalik, kättesaadav: <a href="https://github.com/hariduspilv/oppeinfo" target="_blank" rel="noopener">https://github.com/hariduspilv/oppeinfo</a>.</li> <li>Tahvli tehniline arhitektuur ja funktsionaalsus on kättesaadav projekti lehelt: <a href="https://projektid.hitsa.ee/display/IS2" target="_blank" rel="noopener">https://projektid.hitsa.ee/display/IS2</a></li> <li>Tahvli külastamine on lubatud vaid üldotstarbeliste internetisirvijatega (Chrome, Mozilla Firefox, Edge, Opera, Safari jt.).</li> <li>Tahvli külastamine eriotstarbeliste programmidega mis tahes eesmärgil on keelatud ilma HITSA eelneva kirjaliku loata. Eriotstarbeline programm on programm, mis ei ole mõeldud üldotstarbeliseks internetisirvimiseks või mille tööd ei kontrolli vahetult inimene. Eriotstarbelisteks programmideks loetakse muuhulgas scripte, roboteid ja automatiseeritud tööriistu või programme, mis ei ole mõeldud internetisirvimiseks.</li> <li>Tahvli kasutamisel ei ole lubatud mistahes tegevused, mis häirivad või takistavad Tahvli kaudu teenuste osutamist, sh peab kasutaja hoiduma arvutivõrgu ja serverite ülekoormamisest.</li> <li>Juhul, kui mõni kasutustingimuste säte on kehtetu vastuolu tõttu seadusega, siis ei mõjuta see ülejäänud kasutustingimuste sätete kehtivust.</li> </ol> </li> <li>Tahvli konto loomine ja kustutamine <ol type="a"> <li>Tahvli konto luuakse isikuke Asutuse poolt. Konto loomiseks peab isik olema Asutusega töölepingulistes või muudes võlaõiguslikes suhetes või õppima Asutuses vastavalt Asutuse õppekorraldust reguleerivatele dokumentidele.</li> <li>Esindusõiguse vajadusega isiku puhul saab toiminguid Tahvlis kinnitada tema seaduslik esindaja. Esindaja sisestamise eest vastutab Asutus.</li> <li>Õpilase kontod luuakse sisseastumise infosüsteemi või Asutuse poolt sisestatud andmete põhjal.</li> <li>Õpetaja konto luuakse majandustarkvara SAP või Asutuse poolt sisestatud andmete põhjal.</li> <li>Administratiivse töötaja konto luuakse Asutuse poolt sisestatud andmete põhjal. Tahvli kasutusele võtmisel sisestab esimese Asutuse administratiivse töötaja HITSA vastavalt Asutuse volitatud isiku poolt esitatud avaldusele.</li> <li>Konto kustutamiseks peab isik esitama taotluse Asutusele, kellega tema konto on seotud. Kontot ei kustutata, kui selle avatud hoidmisel on õiguslik alus (näiteks on konto seotud andmetega, mille säilitamise tähtaeg ei ole saabunud).</li> <li>Peale Konto kustutamist ei ole võimalik Tahvlit kasutada.</li> </ol> </li> <li>Isikuandmete kaitse <ol type="a"> <li>Isikuandmete kogumise ja töötlemise eesmärk on isiku tuvastamine, isikuga seotud õppetöö administreerimine, sh isiku kaasamine õppetöösse ning seal soorituste lisamine ning õppetööga seotud dokumentide koostamine, Asutuste õppetööga seotud statistika koostamine.</li> <li>Tahvel töötleb isikuandmeid kooskõlas Euroopa Parlamendi ja nõukogu määrusega (EL) 2016/679, 27. aprill 2016, füüsiliste isikute kaitse kohta isikuandmete töötlemisel ja selliste andmete vaba liikumise ning direktiivi 95/46/EÜ kehtetuks tunnistamise kohta (isikuandmete kaitse üldmäärus).</li> <li>Isikuandmete töötlemisel rakendatakse kõiki asjakohaseid organisatsioonilisi, tehnilisi ja füüsilisi meetmeid isikuandmete kaitsmiseks.</li> <li>Isikuandmete töötlemine Tahvlis toimub üksnes üle turvalise ühenduse (https). Kasutajad autendivad ID-kaardi, Mobiil-ID või muu riigi poolt tunnustatud identiteedilahenduse ning Asutuse kontohalduse abil.</li> <li>Juurdepääs isikuandmete töötlemiseks on ainult selleks volitatud ja juhendatud isikutel, vastavalt nende tööülesannete täitmiseks vajalikus ulatuses.</li> <li>Isikuandmeid võib isiku nõusolekuta edastada üksnes asutusele või isikule, kellel on selleks otsene seadusest tulenev õigus (näiteks kohus või kohtueelne menetleja) ja põhjendatud vajadus.</li> <li>Isikuandmeid säilitatakse vastavalt haridusasutustele kehtivatele normdokumentidele.</li> <li>Kasutajakonto kustutamisel võivad isikuandmed piiratud aja jooksul säilida Tahvli varukoopias.</li> <li>Kõikides isikuandmete töötlemise küsimustes või seadusest tulenevate õiguste teostamiseks peab pöörduma Asutuse poole, kelle õppetegevuse raames vastavaid isikuandmeid töödeldakse.</li> </ol> </li> <li>Töödeldavad kasutajaandmed <ol type="a"> <li>Tahvlis töödeldakse isikuandmeid Asutuse poolt määratud koosseisus. Andmed on Tahvlisse sisestatud Asutuse poolt, päritud teistest infosüsteemidest või sisestatud kasutaja poolt isiklikult.</li> <li>Õppuri andmetest töödeldakse Tahvlis eelkõige isiku põhiandmeid (nimi, isikukood, sugu, kodakondsus, suhtluskeel), õppimise andmeid (sh sooritused, dokumendid), kontaktandmeid, esindajaid ning vajadusel andmeid eritingimuste kohta.</li> <li>Õpetaja andmetest töödeldakse Tahvlis eelkõige isiku põhiandmeid, Asutusega seotud töökoha andmeid ning õppetöö korraldamisega seotud andmeid.</li> <li>Tahvlis sisalduv detailne andmekoosseis avaldatakse RIHA-s ning on avalikult kättesaadav: <a href="https://www.riha.ee/Infos%C3%BCsteemid/Vaata/ois2" target="_blank" rel="noopener">https://www.riha.ee/Infos%C3%BCsteemid/Vaata/ois2</a></li> <li>Tahvel on andmevahetuskihi X-tee kaudu seotud: <ul> <li>Sisseastumise Infosüsteemiga (SAIS);</li> <li>Eesti Hariduse Infosüsteemiga (EHIS);</li> <li>Kutseregistriga;</li> <li>Majandustarkvaraga SAP (Riigitöötajate iseteenindusportaal).</li> </ul> </li> <li>Tahvel vahetab andmeid üle turvalise SOAP-i sünkroonsete veebiteenuste: <ol type="a"> <li>Eesti Koolide infosüsteemiga (EKIS);</li> <li>HITSA õppeinfosüsteemiga Moodle</li> <li>Plagiaadituvastamise tarkvara KRATT</li> </ol> </li> <li>Tahvel kasutab Maa-ameti aadressandmete süsteemi inADS.</li> <li>Tahvli külastusel kogutakse isikustatud andmeid (logisid) millega isik sisse logis, millist brauserit kasutas ja millal tema sessioon lõppes.</li> <li>Isiku poolt külastatud lehed logitakse vaid veebiserveri tasemel ning on seega isikustamata. Isikustamata tehniliste andmete töötlemisel ei ole ükski konkreetne kasutaja mingil viisil tuvastatav.</li> </ol> </li> <li>Andmete õigsuse tagamine, andmete muutmine ja parandamine <ol type="a"> <li>Tahvlisse esitatud andmete õigsuse eest vastutavad andmete esitaja ja andmete sisestaja.</li> <li>Andmete muutmise õigus on Asutusel, isikul endal ja Asutuse volitusel HITSAl. Kõik andmete muudatused logitakse.</li> <li>Andmete kandmisel Tahvlisse säilitatakse andmed kande tegija kohta ning kande tegemise kuupäev ja kellaaeg.</li> <li>Andmete parandamisel Tahvlis fikseeritakse süsteemi logis paranduse tegemise kuupäev ja paranduse tegija.</li> <li>Kande tegemisena Tahvlis käsitletakse andmete lisamist, andmete muutmist ja kustutamist.</li> <li>Iga Asutus sisestab ainult oma organisatsiooni andmeid.</li> </ol> </li> <li>Osalejate vastutus andmetöötluses <ol type="a"> <li>Tahvel on majutatud HITSA poolt hallatavates ja Eesti territooriumil asuvates serverites. Serverite ja Tahvli tarkvara hooldatakse jooksvalt ajakohaste turvavärskendustega.</li> <li>HITSA vastutab Tahvli tõrgeteta töö ning vajalike arendustööde korraldamise eest, pakub infosüsteemi kasutajatuge, korraldab Tahvlis sisalduvate andmete säilimise ja varukoopiate tegemise.</li> <li>HITSA ei vastuta Tahvli tõrgete eest, mis on põhjustatud HITSA kontrolli alt väljas olevatest asjaoludest.</li> <li>HITSA ei vastuta kasutajate poolt Tahvlisse sisestatud andmete ja dokumentide sisu eest.</li> <li>HITSA võib töödelda kõiki Tahvlis töödeldavaid isikuandmeid infosüsteemi kasutajatoe ja majutusteenuse pakkumiseks.</li> <li>Asutused vastutavad Asutuse õppetööga seotud info haldamise, isikuandmete töötlemise nõuete täitmise (muuhulgas informeerimise kohustuse) ja andmesubjekti päringutele vastamise eest.</li> <li>Asutusel on kohustus tagada Asutuse kasutajate rollide ja õiguste vastavus ning hoida ära volitamata isikute ligipääs Tahvlile ja isikuandmetele.</li> <li>Asutus vastutab enda antud rollide kaudu tekitatud kahju korral, mh andmekaitse nõuete rikkumise ja Tahvli toimimist kahjustavate tegevuste eest.</li> <li>HITSA-l on õigus ühepoolselt piirata või peatada Asutuse või kaustaja juurdepääs Tahvlile, kui esineb reaalne või potentsiaalne oht Tahvli turvalisusele. Asutuse kasutajate juurdepääsu piiramisest või peatamisest teavitab HITSA viivitamata vastavat Asutust ning mõlemad peavad võtma viivitamatult kasutusele meetmed ohu kõrvaldamiseks.</li> <li>Võimalikust andmelekkest teavitab HITSA 72 tunni jooksul kõiki kasutajaid oma veebilehel <a href="https://www.hitsa.ee" target="_blank" rel="noopener">www.hitsa.ee</a>, Tahvli üldteadte all ning Tahvlis toodud e-posti teel isikuid, keda andmeleke puudutas või võis puudutada. Lisaks teavitab HITSA Riigi Infosüsteemi Ametit ja Andmekaitse Inspektsiooni kohase intsidenti raportite vormi kaudu. HITSA võtab lisaks koheselt kasutusele kõik abinõud et välistada lekkinud andmete kasutamine mistahes moel teenuse kasutajate vastu.</li> </ol> </li> </ol> </div> </md-dialog-content> <md-dialog-actions layout="row" layout-align="start center"> <md-button ng-click="cancel()" class="md-raised">{{\'main.button.back\' | translate}}</md-button> </md-dialog-actions> </md-dialog>'),a.put("contract/contract.edit.html",'<div class="ois-form-layout-padding" ng-cloak> <div flex> <form name="contractForm" ng-submit="save()" layout="column" novalidate> <div flex> <hois-autocomplete ng-model="contract.student" method="students" additional-query-params="{active: true, higher: formState.isHigher}" name="student" label="student.label" required ng-disabled="contract.id"></hois-autocomplete> </div> <div ng-if="contract.student && formState.student" class="form-readonly" layout="column"> <div>&nbsp;</div> <div layout="row" flex> <md-input-container flex> <label>{{\'student.name\' | translate}}</label> <hois-value value="formState.student.person.firstname + \' \' + formState.student.person.lastname"></hois-value> </md-input-container> <md-input-container flex> <label>{{\'student.idcode\' | translate}}</label> <hois-value value="formState.student.person.idcode"></hois-value> </md-input-container> <md-input-container flex> <label>{{\'student.schoolEmail\' | translate}}</label> <hois-value value="formState.student.schoolEmail"></hois-value> </md-input-container> <md-input-container flex> <label>{{\'student.course\' | translate}}</label> <hois-value value="formState.student.course"></hois-value> </md-input-container> </div> <div layout="row" flex> <md-input-container flex> <label>{{\'student.curriculum\' | translate}}</label> <hois-value value="currentLanguageNameField(formState.student.curriculumVersion)"></hois-value> </md-input-container> <md-input-container flex> <label>{{\'student.studyForm\' | translate}}</label> <hois-value value="currentLanguageNameField(formState.student.studyForm)"></hois-value> </md-input-container> </div> </div> <div ng-if="!formState.isHigher" layout="row" layout-sm="column" layout-xs="column" flex> <md-input-container flex> <label>{{\'module.practice\' | translate}}</label> <hois-select ng-model="contract.module" values="formState.modules" ng-change="moduleChanged(contract.module)" required></hois-select> </md-input-container> <md-input-container flex flex-offset-gt-md="5"> <label>{{\'contract.theme\' | translate}}</label> <hois-select ng-model="contract.theme" values="formState.themes" ng-change="themeChanged(contract.theme)"></hois-select> </md-input-container> <md-input-container flex="10" flex-sm="100" flex-xs="100" flex-offset-gt-md="5"> <label>{{\'contract.creditsEKAP\' | translate}}</label> <input type="number" name="credits" ng-model="contract.credits" ng-min="0" ng-max="999.9" ng-change="updateHours()" required> </md-input-container> <md-input-container flex="10" flex-sm="100" flex-xs="100"> <label>{{\'contract.hours\' | translate}}</label> <input type="number" name="hours" ng-model="contract.hours" ng-min="0" ng-max="32767" ng-change="updateCredits()" required> </md-input-container> </div> <div ng-if="formState.isHigher" layout="row" layout-sm="column" layout-xs="column" flex> <md-input-container flex> <label>{{\'contract.subject\' | translate}}</label> <hois-select ng-model="contract.subject" values="formState.subjects" ng-change="subjectChanged(contract.subject)" required></hois-select> </md-input-container> <md-input-container flex="10" flex-sm="100" flex-xs="100" flex-offset-gt-md="5"> <label>{{\'contract.creditsEAP\' | translate}}</label> <input type="number" name="credits" ng-model="contract.credits" ng-min="0" ng-max="999.9" ng-change="updateHours()" required> </md-input-container> <md-input-container flex="10" flex-sm="100" flex-xs="100"> <label>{{\'contract.hours\' | translate}}</label> <input type="number" name="hours" ng-model="contract.hours" ng-min="0" ng-max="32767" ng-change="updateCredits()" required> </md-input-container> </div> <div layout="row" flex> <md-input-container> <label>{{\'contract.start\' | translate}}</label> <md-datepicker ng-model="contract.startDate" md-max-date="contract.endDate" required></md-datepicker> </md-input-container> <md-input-container> <label>{{\'contract.end\' | translate}}</label> <md-datepicker ng-model="contract.endDate" md-min-date="contract.startDate" required></md-datepicker> </md-input-container> </div> <div layout="row" flex> <md-input-container flex> <label class="textInput">{{\'contract.practicePlace\' | translate}}</label> <input type="text" ng-model="contract.practicePlace" md-maxlength="255" required> </md-input-container> </div> <div layout="row" flex> <md-input-container flex> <label>{{\'enterprise.label\' | translate}}</label> <hois-select ng-model="contract.enterprise" values="formState.enterprises" ng-change="enterpriseChanged(contract.enterprise)" required></hois-select> </md-input-container> <div layout="row"> <md-button class="md-raised md-default" ng-click="addEnterprise()">{{\'main.button.create\' | translate}}</md-button> </div> </div> <div layout="row" flex> <md-input-container flex> <label class="textInput">{{\'contract.contactPersonName\' | translate}}</label> <input type="text" ng-model="contract.contactPersonName" md-maxlength="100" required> </md-input-container> <md-input-container flex> <label class="textInput">{{\'contract.contactPersonEmail\' | translate}}</label> <input type="email" ng-model="contract.contactPersonEmail" md-maxlength="100" required> </md-input-container> <md-input-container flex> <label class="textInput">{{\'contract.contactPersonPhone\' | translate}}</label> <input type="text" ng-model="contract.contactPersonPhone" md-maxlength="100"> </md-input-container> </div> <div layout="row" flex> <md-input-container flex> <label class="textInput">{{\'contract.supervisorName\' | translate}}</label> <input type="text" ng-model="contract.supervisorName" md-maxlength="100" required> </md-input-container> <md-input-container flex> <label class="textInput">{{\'contract.supervisorEmail\' | translate}}</label> <input type="email" ng-model="contract.supervisorEmail" md-maxlength="100" required> </md-input-container> <md-input-container flex> <label class="textInput">{{\'contract.supervisorPhone\' | translate}}</label> <input type="text" ng-model="contract.supervisorPhone" md-maxlength="100"> </md-input-container> </div> <div layout="row" flex> <md-input-container flex> <label>{{\'contract.schoolSupervisor\' | translate}}</label> <hois-select ng-model="contract.teacher" type="teacher" required criteria="{valid: true}"></hois-select> </md-input-container> </div> <div layout="row" flex> <md-input-container flex> <label class="textInput">{{\'contract.otherSupervisor\' | translate}}</label> <input type="text" ng-model="contract.otherSupervisor" md-maxlength="255"> </md-input-container> </div> <div layout="row" flex> <md-input-container flex> <label>{{\'contract.contractCoordinator\' | translate}}</label> <hois-select ng-model="contract.contractCoordinator" type="directivecoordinator" required></hois-select> </md-input-container> </div> <div layout="row" flex> <md-input-container flex> <label class="textInput">{{\'contract.practicePlan\' | translate}}</label> <textarea ng-model="contract.practicePlan" required md-maxlength="20000" max-rows="4"></textarea> </md-input-container> </div> <div ng-if="!formState.isHigher" layout="row" flex> <md-input-container flex> <md-checkbox ng-model="contract.isPracticeAbsence" aria-label="{{\'contract.markPracticeAsExcusedInDiaries\' | translate}}"> {{\'contract.markPracticeAsExcusedInDiaries\' | translate}}</md-checkbox> </md-input-container> </div> <div layout="row"> <md-button ng-if="contract.status !== \'LEPING_STAATUS_Y\'" class="md-raised md-primary" type="submit">{{\'main.button.save\' | translate}}</md-button> <md-button ng-if="auth.isAdmin() && contract.id && (contract.status === \'LEPING_STAATUS_Y\' || contract.status === \'LEPING_STAATUS_S\')" class="md-raised md-default" ng-click="delete()">{{\'main.button.delete\' | translate}}</md-button> <md-button class="md-raised md-default" ng-click="back(\'#/contracts/\', contractForm)">{{\'main.button.back\' | translate}}</md-button> <md-button ng-if="contract.id && contract.status === \'LEPING_STAATUS_S\'" class="md-raised md-default" ng-click="sendToEkis()">{{\'main.button.sendToEkis\' | translate}}</md-button> </div> </form> </div> </div>'),a.put("contract/contract.list.html",'<div class="ois-form-layout-padding ois-form-layout" ng-cloak> <div flex> <fieldset ng-if="auth.isAdmin()"> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'main.searchlabel\' | translate}}</legend> <form name="searchForm" ng-submit="searchForm.$valid && loadData()" novalidate class="nomargin"> <div layout="row" layout-sm="column" layout-xs="column"> <div flex="45" flex-sm="100" flex-xs="100"> <div layout="column" flex> <div layout="row" flex> <md-input-container> <label>{{\'contract.startFrom\' | translate}}</label> <md-datepicker ng-model="criteria.startFrom" md-max-date="criteria.startThru"></md-datepicker> </md-input-container> <md-input-container flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'contract.startThru\' | translate}}</label> <md-datepicker ng-model="criteria.startThru" md-min-date="criteria.startFrom"></md-datepicker> </md-input-container> </div> </div> </div> <div flex="45" flex-sm="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <div layout="column" flex> <div layout="row" flex> <md-input-container> <label>{{\'contract.endFrom\' | translate}}</label> <md-datepicker ng-model="criteria.endFrom" md-max-date="criteria.endThru"></md-datepicker> </md-input-container> <md-input-container flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'contract.endThru\' | translate}}</label> <md-datepicker ng-model="criteria.endThru" md-min-date="criteria.endFrom"></md-datepicker> </md-input-container> </div> </div> </div> </div> <div layout="row" layout-sm="column" layout-xs="column"> <div flex="45" flex-sm="100" flex-xs="100"> <div layout="column" flex> <md-input-container> <label class="textInput">{{\'student.label\' | translate}}</label> <input ng-model="criteria.studentName" type="text" md-maxlength="255"> </md-input-container> </div> </div> <div flex="45" flex-sm="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <div layout="column" flex> <md-input-container> <label class="textInput">{{\'contract.curriculumVersion\' | translate}}</label> <hois-select ng-model="criteria.curriculumVersion" type="curriculumversion"></hois-select> </md-input-container> </div> </div> </div> <div layout="row" layout-sm="column" layout-xs="column"> <div flex="45" flex-sm="100" flex-xs="100"> <div layout="column" flex> <md-input-container> <label class="textInput">{{\'studentGroup.label\' | translate}}</label> <hois-select ng-model="criteria.studentGroup" type="studentgroup" criteria="{valid: true}"></hois-select> </md-input-container> </div> </div> </div> <div layout="row" layout-sm="column" layout-xs="column"> <div flex="45" flex-sm="100" flex-xs="100"> <div layout="column" flex> <md-input-container> <label class="textInput">{{\'enterprise.label\' | translate}}</label> <input ng-model="criteria.enterpriseName" type="text" md-maxlength="255"> </md-input-container> </div> </div> <div flex="45" flex-sm="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <div layout="column" flex> <md-input-container> <label class="textInput">{{\'enterprise.supervisor\' | translate}}</label> <input ng-model="criteria.enterpriseContactPersonName" type="text" md-maxlength="255"> </md-input-container> </div> </div> </div> <div layout="row" layout-sm="column" layout-xs="column"> <div flex="45" flex-sm="100" flex-xs="100"> <div layout="column" flex> <md-input-container> <label class="textInput">{{\'contract.status\' | translate}}</label> <hois-classifier-select ng-model="criteria.status" main-classifier-code="LEPING_STAATUS" model-value-attr="code"></hois-classifier-select> </md-input-container> </div> </div> <div flex="45" flex-sm="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <div layout="column" flex> <md-input-container> <label class="textInput">{{\'contract.schoolSupervisor\' | translate}}</label> <hois-select ng-model="criteria.teacher" type="teacher"></hois-select> </md-input-container> </div> </div> </div> <div layout="row"> <md-button type="submit" class="md-raised md-primary">{{\'main.button.search\' | translate}}</md-button> <md-button class="md-raised" ng-click="clearCriteria()">{{\'main.button.clear\' | translate}}</md-button> <md-button ng-if="!auth.isStudent() && isAuthorized(\'ROLE_OIGUS_M_TEEMAOIGUS_LEPING\')" class="md-raised" ng-click="newContract()">{{\'main.button.create\' | translate}}</md-button> </div> <div flex-xs="0" flex-gt-xs="0" flex-gt-sm="50"></div> </form> </fieldset> </div> </div> <div layout-padding> <div flex> <md-table-container> <table md-table md-progress="tabledata.$promise"> <thead md-head md-order="criteria.order" md-on-reorder="loadData"> <tr md-row> <th ng-if="auth.isAdmin()" md-column md-order-by="student_person.lastname,student_person.firstname">{{\'student.label\' | translate}}</th> <th md-column>{{\'contract.contractNumber\' | translate}}</th> <th md-column>{{\'contract.validity\' | translate}}</th> <th md-column>{{\'enterprise.label\' | translate}}</th> <th md-column>{{\'enterprise.supervisor\' | translate}}</th> <th md-column>{{\'contract.schoolSupervisor\' | translate}}</th> <th md-column>{{\'contract.contractDate\' | translate}}</th> <th md-column>{{\'main.status\' | translate}}</th> <th md-column></th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="row in tabledata.content" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td ng-if="auth.isAdmin()" md-cell>{{currentLanguageNameField(row.student)}}</td> <td md-cell>{{row.contractNr}}</td> <td md-cell>{{row.startDate | hoisDate}} - {{row.endDate | hoisDate}}</td> <td md-cell>{{row.enterpriseName}}</td> <td md-cell>{{row.enterpriseContactPersonName}}</td> <td md-cell>{{currentLanguageNameField(row.teacher)}}</td> <td md-cell>{{row.confirmDate | hoisDate}}</td> <td md-cell>{{currentLanguageNameField(row.status)}}</td> <td md-cell> <div ng-if="auth.isStudent()"> <md-button md-no-ink class="md-primary change-button" ng-href="#/contracts/{{::row.id}}/view">{{\'main.button.view\' | translate}}</md-button> </div> <div ng-if="!auth.isStudent()"> <md-button ng-if="row.status.code===\'LEPING_STAATUS_S\' && isAuthorized(\'ROLE_OIGUS_M_TEEMAOIGUS_LEPING\')" md-no-ink class="md-primary change-button" ng-href="#/contracts/{{::row.id}}/edit">{{\'main.button.change\' | translate}}</md-button> <md-button ng-if="row.status.code!==\'LEPING_STAATUS_S\' || !isAuthorized(\'ROLE_OIGUS_M_TEEMAOIGUS_LEPING\')" md-no-ink class="md-primary change-button" ng-href="#/contracts/{{::row.id}}/view">{{\'main.button.view\' | translate}}</md-button> </div> </td> </tr> </tbody> </table> </md-table-container> <md-table-pagination md-limit="criteria.size" md-limit-options="[10, 20, 50]" md-page="criteria.page" md-total="{{tabledata.totalElements}}" md-on-paginate="loadData" md-label="{page: \'{{\'main.page\' | translate}}:\', rowsPerPage: \'{{\'main.rowPerPage\' | translate}}:\', of: \'{{\'main.of\' | translate}}\'}" md-page-select></md-table-pagination> </div> </div>'),a.put("contract/contract.view.html",'<div class="ois-form-layout-padding form-readonly" ng-cloak> <div flex> <div layout="column"> <div layout="row" layout-sm="column" layout-xs="column" flex> <md-input-container flex="35"> <label>{{\'student.label\' | translate}}</label> <hois-value value="currentLanguageNameField(contract.student)"></hois-value> </md-input-container> </div> <div ng-if="!contract.subject" layout="row" layout-sm="column" layout-xs="column" flex> <md-input-container flex> <label class="textInput">{{\'module.practice\' | translate}}</label> <hois-value value="currentLanguageNameField(contract.module)"></hois-value> </md-input-container> <md-input-container flex flex-offset-gt-md="5"> <label class="textInput">{{\'contract.theme\' | translate}}</label> <hois-value value="currentLanguageNameField(contract.theme)"></hois-value> </md-input-container> <md-input-container flex="10" flex-sm="100" flex-xs="100" flex-offset-gt-md="5"> <label class="textInput">{{\'contract.creditsEKAP\' | translate}}</label> <hois-value value="contract.credits"></hois-value> </md-input-container> <md-input-container flex="10" flex-sm="100" flex-xs="100"> <label class="textInput">{{\'contract.hours\' | translate}}</label> <hois-value value="contract.hours"></hois-value> </md-input-container> </div> <div ng-if="contract.subject" layout="row" layout-sm="column" layout-xs="column" flex> <md-input-container flex> <label class="textInput">{{\'contract.subject\' | translate}}</label> <hois-value value="currentLanguageNameField(contract.subject)"></hois-value> </md-input-container> <md-input-container flex="10" flex-sm="100" flex-xs="100" flex-offset-gt-md="5"> <label class="textInput">{{\'contract.creditsEAP\' | translate}}</label> <hois-value value="contract.credits"></hois-value> </md-input-container> <md-input-container flex="10" flex-sm="100" flex-xs="100"> <label class="textInput">{{\'contract.hours\' | translate}}</label> <hois-value value="contract.hours"></hois-value> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column" flex> <md-input-container flex="15"> <label>{{\'contract.start\' | translate}}</label> <hois-value value="contract.startDate | hoisDate"></hois-value> </md-input-container> <md-input-container flex="15" flex-offset-gt-md="5"> <label>{{\'contract.end\' | translate}}</label> <hois-value value="contract.endDate | hoisDate"></hois-value> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column" flex> <md-input-container flex> <label class="textInput">{{\'contract.practicePlace\' | translate}}</label> <hois-value value="contract.practicePlace"></hois-value> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column" flex> <md-input-container flex> <label class="textInput">{{\'enterprise.label\' | translate}}</label> <hois-value value="currentLanguageNameField(contract.enterprise)"></hois-value> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column" flex> <md-input-container flex> <label class="textInput">{{\'contract.contactPersonName\' | translate}}</label> <hois-value value="contract.contactPersonName"></hois-value> </md-input-container> <md-input-container flex> <label class="textInput">{{\'contract.contactPersonEmail\' | translate}}</label> <hois-value value="contract.contactPersonEmail"></hois-value> </md-input-container> <md-input-container flex> <label class="textInput">{{\'contract.contactPersonPhone\' | translate}}</label> <hois-value value="contract.contactPersonPhone"></hois-value> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column" flex> <md-input-container flex> <label class="textInput">{{\'contract.supervisorName\' | translate}}</label> <hois-value value="contract.supervisorName"></hois-value> </md-input-container> <md-input-container flex> <label class="textInput">{{\'contract.supervisorEmail\' | translate}}</label> <hois-value value="contract.supervisorEmail"></hois-value> </md-input-container> <md-input-container flex> <label class="textInput">{{\'contract.supervisorPhone\' | translate}}</label> <hois-value value="contract.supervisorPhone"></hois-value> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column" flex> <md-input-container flex> <label class="textInput">{{\'contract.schoolSupervisor\' | translate}}</label> <hois-value value="currentLanguageNameField(contract.teacher)"></hois-value> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column" flex> <md-input-container flex> <label class="textInput">{{\'contract.otherSupervisor\' | translate}}</label> <hois-value value="contract.otherSupervisor"></hois-value> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column" flex> <md-input-container flex> <label class="textInput">{{\'contract.contractCoordinator\' | translate}}</label> <hois-value value="currentLanguageNameField(contract.contractCoordinator)"></hois-value> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column" flex> <md-input-container flex> <label class="textInput">{{\'contract.practicePlan\' | translate}}</label> <hois-value value="contract.practicePlan"></hois-value> </md-input-container> </div> <div layout="row" flex> <md-input-container flex> <label>{{\'contract.markPracticeAsExcusedInDiaries\' | translate}}</label> <hois-value value="contract.isPracticeAbsence ? \'main.yes\' : \'main.no\' | translate"></hois-value> </md-input-container> </div> <div layout="row"> <md-button class="md-raised md-default" ng-click="back(\'#/contracts/\')">{{\'main.button.back\' | translate}}</md-button> <md-button ng-if="(auth.isAdmin() && contract.status === \'LEPING_STAATUS_Y\' || contract.status === \'LEPING_STAATUS_S\')\r\n          && isAuthorized(\'ROLE_OIGUS_M_TEEMAOIGUS_LEPING\')" class="md-raised" ng-click="delete()">{{\'main.button.delete\' | translate}}</md-button> <md-button ng-if="contract.wdId && (contract.status === \'LEPING_STAATUS_Y\' || contract.status === \'LEPING_STAATUS_L\' || contract.status === \'LEPING_STAATUS_K\')" class="md-raised md-default" ng-href="{{getEkisContractUrl(contract.wdId)}}" target="_blank">{{\'contract.button.viewContractFromEkis\' | translate}}</md-button> </div> </div> </div> </div>'),
a.put("contract/enterprise.add.dialog.html",'<md-dialog aria-label="add enterprise dialog" flex="50"> <form name="dialogForm" ng-submit="dialogForm.$valid && submit()" novalidate ng-cloak> <md-toolbar> <div class="md-toolbar-tools"> <h2 flex>{{"enterprise.create" | translate}}</h2> <md-button class="md-icon-button" ng-click="cancel()"> <md-icon md-font-set="material-icons">close</md-icon> </md-button> </div> </md-toolbar> <md-dialog-content> <div class="md-dialog-content"> <div layout="column" flex> <md-input-container flex> <label class="textInput">{{\'enterprise.name\' | translate}}</label> <input type="text" ng-model="enterprise.name" required> </md-input-container> <md-input-container flex> <label class="textInput">{{\'enterprise.regCode\' | translate}}</label> <input type="text" ng-model="enterprise.regCode" required> </md-input-container> <md-input-container flex> <label class="textInput">{{\'enterprise.contactPersonName\' | translate}}</label> <input type="text" ng-model="enterprise.contactPersonName"> </md-input-container> <md-input-container flex> <label class="textInput">{{\'enterprise.contactPersonPhone\' | translate}}</label> <input type="number" ng-model="enterprise.contactPersonPhone"> </md-input-container> <md-input-container flex> <label class="textInput">{{\'enterprise.contactPersonEmail\' | translate}}</label> <input type="email" ng-model="enterprise.contactPersonEmail"> </md-input-container> </div> </div> </md-dialog-content> <md-dialog-actions layout="row" layout-align="start start"> <md-button class="md-raised md-primary" type="submit">{{\'main.button.save\' | translate}}</md-button> <md-button class="md-raised" ng-click="cancel()">{{"main.button.close" | translate}}</md-button> </md-dialog-actions> </form> </md-dialog>'),a.put("contract/vocational.higher.select.dialog.html",'<md-dialog aria-label="vaocational higher select dialog"> <form name="dialogForm" ng-submit="dialogForm.$valid && submit()" novalidate ng-cloak> <md-toolbar> <div class="md-toolbar-tools"> <h2 flex>{{"contract.vocationalOrHigherSelect" | translate}}</h2> <md-button class="md-icon-button" ng-click="cancel()"> <md-icon md-font-set="material-icons">close</md-icon> </md-button> </div> </md-toolbar> <md-dialog-content> <div class="md-dialog-content"> {{"contract.vocationalOrHigherContract" | translate}} </div> </md-dialog-content> <md-dialog-actions layout="row" layout-align="start start"> <md-button class="md-raised" type="submit">{{\'contract.button.vocational\' | translate}}</md-button> <md-button class="md-raised" type="submit" ng-click="higher=true">{{"contract.button.higher" | translate}}</md-button> </md-dialog-actions> </form> </md-dialog>'),a.put("curriculum/curriculum.list.html",'<div class="ois-form-layout-padding"> <div flex> <form name="searchForm" layout="column" ng-cloak ng-submit="searchForm.$valid && loadData()" class="nomargin"> <fieldset tabindex="1"> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'main.searchlabel\' | translate}}</legend> <div layout="row" layout-sm="column" layout-xs="column" ng-if="!auth.school"> <md-input-container flex="45" flex-sm="100" flex-xs="100"> <label>{{\'school.label\' | translate}}</label> <hois-select ng-model="criteria.school" type="school" multiple></hois-select> </md-input-container> <md-input-container flex="50" flex-sm="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'curriculum.studyLevel\' | translate}}</label> <hois-classifier-select ng-model="criteria.studyLevel" multiple main-classifier-code="OPPEASTE" model-value-attr="code"></hois-classifier-select> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column" ng-if="auth.school"> <md-input-container flex="45" flex-sm="100" flex-xs="100"> <label>{{\'curriculum.studyLevel\' | translate}}</label> <hois-classifier-select ng-model="criteria.studyLevel" multiple main-classifier-code="OPPEASTE" model-value-attr="code" show-only-values="studyLevelOptions"></hois-classifier-select> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column" class="top-margin"> <md-input-container flex="45" flex-sm="100" flex-xs="100"> <label>{{\'curriculum.name\' | translate}}</label> <input ng-model="criteria.name" type="text" md-maxlength="255"> </md-input-container> <md-input-container flex="50" flex-sm="100" flex-xs="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'curriculum.ekrLevel\' | translate}}</label> <hois-classifier-select ng-model="criteria.ekrLevel" multiple main-classifier-code="EKR" model-value-attr="code"></hois-classifier-select> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="45" flex-sm="100" flex-xs="100"> <label>{{\'curriculum.code\' | translate}}</label> <input ng-model="criteria.code" type="text" md-maxlength="100"> </md-input-container> <md-input-container flex="50" flex-sm="100" flex-xs="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'curriculum.merCode\' | translate}}</label> <input ng-model="criteria.merCode" type="text" md-maxlength="100"> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column" ng-if="school.higher && school.vocational"> <md-input-container flex="20" flex-sm="100" flex-xs="100"> <label>{{\'curriculum.curriculumGroup\' | translate}}</label> <hois-classifier-select ng-model="criteria.curriculumGroup" model-value-attr="code" main-classifier-code="OPPEKAVAGRUPP" ng-disabled="criteria.iscedClassCode && criteria.iscedClassCode.length > 0"></hois-classifier-select> </md-input-container> <md-input-container flex="20" flex-sm="100" flex-xs="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'curriculum.areaOfStudy\' | translate}}</label> <hois-classifier-select ng-model="criteria.iscedVald" model-value-attr="code" main-classifier-code="ISCED_VALD" show-only-values="areasOfStudy"></hois-classifier-select> </md-input-container> <md-input-container flex="20" flex-sm="100" flex-xs="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'curriculum.fieldOfStudy\' | translate}}</label> <hois-classifier-select ng-model="criteria.iscedSuun" model-value-attr="code" main-classifier-code="ISCED_SUUN" watch-model="criteria.iscedVald" filter-values search-from-connect connect-main-classifier-code="ISCED_VALD" multiple></hois-classifier-select> </md-input-container> <md-input-container flex="25" flex-sm="100" flex-xs="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'curriculum.group\' | translate}}</label> <hois-classifier-select ng-model="criteria.iscedClassCode" model-value-attr="code" main-classifier-code="ISCED_RYHM" watch-model="criteria.iscedSuun" filter-values search-from-connect connect-main-classifier-code="ISCED_SUUN" multiple ng-disabled="criteria.curriculumGroup"></hois-classifier-select> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column" ng-if="school.vocational && !school.higher"> <md-input-container flex="30" flex-sm="100" flex-xs="100"> <label>{{\'curriculum.areaOfStudy\' | translate}}</label> <hois-classifier-select ng-model="criteria.iscedVald" model-value-attr="code" main-classifier-code="ISCED_VALD" criteria="{vocational: true}"></hois-classifier-select> </md-input-container> <md-input-container flex="30" flex-sm="100" flex-xs="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'curriculum.fieldOfStudy\' | translate}}</label> <hois-classifier-select ng-model="criteria.iscedSuun" model-value-attr="code" main-classifier-code="ISCED_SUUN" watch-model="criteria.iscedVald" filter-values search-from-connect connect-main-classifier-code="ISCED_VALD" multiple criteria="{vocational: true}"></hois-classifier-select> </md-input-container> <md-input-container flex="30" flex-sm="100" flex-xs="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'curriculum.group\' | translate}}</label> <hois-classifier-select ng-model="criteria.iscedClassCode" model-value-attr="code" main-classifier-code="ISCED_RYHM" watch-model="criteria.iscedSuun" filter-values search-from-connect connect-main-classifier-code="ISCED_SUUN" multiple criteria="{vocational: true}"></hois-classifier-select> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column" ng-if="school.higher && !school.vocational"> <md-input-container flex="30" flex-sm="100" flex-xs="100"> <label>{{\'curriculum.curriculumGroup\' | translate}}</label> <hois-classifier-select ng-model="criteria.curriculumGroup" model-value-attr="code" main-classifier-code="OPPEKAVAGRUPP" multiple criteria="{higher: true}"></hois-classifier-select> </md-input-container> <md-input-container flex="30" flex-sm="100" flex-xs="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'curriculum.areaOfStudy\' | translate}}</label> <hois-classifier-select ng-model="criteria.iscedVald" model-value-attr="code" main-classifier-code="ISCED_VALD" criteria="{higher: true}" show-only-values="areasOfStudy"></hois-classifier-select> </md-input-container> <md-input-container flex="30" flex-sm="100" flex-xs="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'curriculum.fieldOfStudy\' | translate}}</label> <hois-classifier-select ng-model="criteria.iscedSuun" model-value-attr="code" main-classifier-code="ISCED_SUUN" watch-model="criteria.iscedVald" filter-values search-from-connect connect-main-classifier-code="ISCED_VALD" multiple criteria="{higher: true}"></hois-classifier-select> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column" class="top-margin"> <md-input-container flex="100" flex-sm="100" flex-xs="100"> <label>{{\'curriculum.studyLanguage2\' | translate}}</label> <hois-classifier-select ng-model="criteria.studyLanguage" multiple main-classifier-code="OPPEKEEL" model-value-attr="code"></hois-classifier-select> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <div layout="column" flex="45"> <label class="common-label"> <span ng-if="school.vocational && !school.higher">{{\'curriculum.creditsRangeEkap\' | translate}}</span> <span ng-if="!school.vocational && school.higher">{{\'curriculum.creditsRangeEap\' | translate}}</span> <span ng-if="school.vocational && school.higher || !school.vocational && !school.higher">{{\'curriculum.creditsEapEkap\' | translate}}</span> </label> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="45" flex-sm="100" flex-xs="100" class=""> <label>{{\'main.from\' | translate}}</label> <input ng-model="criteria.creditsMin" type="number"> </md-input-container> <md-input-container flex="45" flex-sm="100" flex-xs="100" flex-offset="10" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'main.thru\' | translate}}</label> <input ng-model="criteria.creditsMax" type="number"> </md-input-container> </div> </div> <div layout="column" flex="50" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label class="common-label">{{\'main.validityPeriod\' | translate}}</label> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex-sm="100" flex-xs="100"> <label>{{\'main.from\' | translate}}</label> <md-datepicker ng-model="criteria.validFrom" md-max-date="criteria.validThru"></md-datepicker> </md-input-container> <md-input-container flex-sm="100" flex-xs="100"> <label>{{\'main.thru\' | translate}}</label> <md-datepicker ng-model="criteria.validThru" md-min-date="criteria.validFrom"></md-datepicker> </md-input-container> </div> </div> </div> <div layout="row" layout-sm="column" layout-xs="column" ng-if="canView"> <md-input-container flex="45" flex-sm="100" flex-xs="100"> <label>{{\'main.status\' | translate}}</label> <hois-classifier-select ng-model="criteria.status" multiple main-classifier-code="OPPEKAVA_STAATUS" model-value-attr="code"></hois-classifier-select> </md-input-container> <md-input-container flex="50" flex-sm="100" flex-xs="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'curriculum.ehisStatus\' | translate}}</label> <hois-classifier-select ng-model="criteria.ehisStatus" multiple main-classifier-code="OPPEKAVA_EHIS_STAATUS" model-value-attr="code"></hois-classifier-select> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column" class="top-margin" ng-if="auth.school"> <md-input-container flex="100" flex-sm="100" flex-xs="100"> <label>{{\'school.department.department\' | translate}}</label> <hois-school-department-select ng-model="criteria.department" multiple></hois-school-department-select> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column" class="top-margin"> <md-checkbox ng-model="criteria.isJoint" aria-label="Is vocational"> {{\'curriculum.isJoint\' | translate}} </md-checkbox> </div> <div layout="row" layout-xs="column"> <md-button type="submit" class="md-raised md-primary">{{\'main.button.search\' | translate}}</md-button> <md-button class="md-raised" ng-click="clearCriteria()">{{\'main.button.clear\' | translate}}</md-button> <md-button class="md-raised" ng-if="auth.school.vocational && canCreate" ng-href="#/vocationalCurriculum/new">{{\'main.button.insertVocationalCurriculum\' | translate}}</md-button> <md-button class="md-raised" ng-if="auth.school.higher && canCreate" ng-href="#/higherCurriculum/new">{{\'main.button.insertHigherCurriculum\' | translate}}</md-button> </div> </fieldset> </form> </div> </div> <md-table-container flex ng-cloak layout-padding> <table md-table md-progress="tabledata.$promise"> <thead md-head md-order="criteria.order" md-on-reorder="loadData"> <tr md-row> <th md-column md-order-by="school.{{currentLanguageNameField()}}" ng-if="!auth.school">{{\'school.label\' | translate}}</th> <th md-column md-order-by="{{currentLanguageNameField()}}">{{\'curriculum.name\' | translate}}</th> <th md-column md-order-by="merCode">{{\'curriculum.search.merCode\' | translate}}</th> <th md-column md-order-by="origStudyLevel.{{currentLanguageNameField()}}">{{\'curriculum.studyLevel\' | translate}}</th> <th md-column md-order-by="credits"> <span ng-if="school.vocational && school.higher || !school.vocational && !school.higher">{{\'curriculum.search.creditsEapEkap\' | translate}}</span> <span ng-if="!school.vocational && school.higher">{{\'curriculum.search.creditsEap\' | translate}}</span> <span ng-if="school.vocational && !school.higher">{{\'curriculum.search.creditsEkap\' | translate}}</span> </th> <th md-column md-order-by="validFrom">{{\'stateCurriculum.validFrom\' | translate}}</th> <th md-column md-order-by="validThru">{{\'stateCurriculum.validThru\' | translate}}</th> <th md-column md-order-by="status.{{currentLanguageNameField()}}" ng-if="canView">{{\'stateCurriculum.status\' | translate}}</th> <th></th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="row in tabledata.content" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell ng-if="!auth.school">{{row.school.nameEt}}</td> <td md-cell><a href="" ng-click="view(row)">{{currentLanguageNameField(row)}}</a></td> <td md-cell>{{::row.merCode}}</td> <td md-cell>{{currentLanguageNameField(row.origStudyLevel)}}</td> <td md-cell>{{::row.credits}}</td> <td md-cell>{{row.validFrom | hoisDate}}</td> <td md-cell>{{row.validThru | hoisDate}}</td> <td md-cell ng-if="canView">{{currentLanguageNameField(row.status)}}</td> <td md-cell> <md-button md-no-ink class="md-primary change-button" ng-if="row.canChange" ng-click="edit(row)">{{\'main.button.change\' | translate}}</md-button> </td> </tr> </tbody> </table> </md-table-container> <md-table-pagination md-limit="criteria.size" md-limit-options="[10, 20, 50]" md-page="criteria.page" md-total="{{tabledata.totalElements}}" md-on-paginate="loadData" md-label="{page: \'{{\'main.page\' | translate}}:\', rowsPerPage: \'{{\'main.rowPerPage\' | translate}}:\', of: \'{{\'main.of\' | translate}}\' }" md-page-select></md-table-pagination>'),a.put("curriculum/curriculum.public.list.html",'<div layout-padding> <form layout="column" ng-cloak ng-submit="loadData()" class="nomargin"> <fieldset tabindex="1"> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'main.searchlabel\' | translate}}</legend> <div layout="column" flex> <md-input-container> <label>{{\'school.label\' | translate}}</label> <hois-select ng-model="criteria.school" type="school"></hois-select> </md-input-container> <md-input-container> <label>{{\'curriculum.studyLevel\' | translate}}</label> <hois-classifier-select ng-model="criteria.studyLevel" multiple main-classifier-code="OPPEASTE" model-value-attr="code"></hois-classifier-select> </md-input-container> <md-input-container> <label>{{\'curriculum.name\' | translate}}</label> <input ng-model="criteria.name" type="text"> </md-input-container> </div> <div layout="row"> <md-button type="submit" class="md-raised md-primary">{{\'main.button.search\' | translate}}</md-button> <md-button class="md-raised" ng-click="clearCriteria()">{{\'main.button.clear\' | translate}}</md-button> </div> </fieldset> </form> </div> <md-table-container flex ng-cloak layout-padding> <table md-table md-progress="tabledata.$promise"> <thead md-head md-order="criteria.order" md-on-reorder="loadData"> <tr md-row> <th md-column md-order-by="school.{{currentLanguageNameField()}}">{{\'school.label\' | translate}}</th> <th md-column md-order-by="{{currentLanguageNameField()}}">{{\'curriculum.name\' | translate}}</th> <th md-column md-order-by="merCode">{{\'curriculum.search.merCode\' | translate}}</th> <th md-column md-order-by="origStudyLevel.{{currentLanguageNameField()}}">{{\'curriculum.studyLevel\' | translate}}</th> <th md-column md-order-by="credits"> <span>{{\'curriculum.search.creditsEapEkap\' | translate}}</span> </th> <th md-column md-order-by="validFrom">{{\'stateCurriculum.validFrom\' | translate}}</th> <th md-column md-order-by="validThru">{{\'stateCurriculum.validThru\' | translate}}</th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="row in tabledata.content" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell>{{row.school.nameEt}}</td> <td md-cell> <a href="/#/curriculum/{{::row.id}}">{{currentLanguageNameField(row)}}</a> </td> <td md-cell>{{::row.merCode}}</td> <td md-cell>{{currentLanguageNameField(row.origStudyLevel)}}</td> <td md-cell>{{::row.credits}}</td> <td md-cell>{{row.validFrom | hoisDate}}</td> <td md-cell>{{row.validThru | hoisDate}}</td> </tr> </tbody> </table> </md-table-container> <md-table-pagination md-limit="criteria.size" md-limit-options="[10, 20, 50]" md-page="criteria.page" md-total="{{tabledata.totalElements}}" md-on-paginate="loadData" md-label="{page: \'{{\'main.page\' | translate}}:\', rowsPerPage: \'{{\'main.rowPerPage\' | translate}}:\', of: \'{{\'main.of\' | translate}}\' }" md-page-select></md-table-pagination>'),a.put("curriculum/curriculum.public.version.html",'<div layout-padding ng-cloak class="form-readonly"> <fieldset> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'curriculum.public.versionTitle\' | translate}}</legend> <div layout="column"> <div>&nbsp;</div> <md-input-container flex> <label>{{\'curriculum.public.codeOrName\' | translate}}</label> <hois-value value="version.code"></hois-value> </md-input-container> <div ng-if="curriculum.higher" layout="row"> <md-input-container flex> <label>{{\'module.implementationPlan.admissionYear\' | translate}}</label> <hois-value value="version.admissionYear"></hois-value> </md-input-container> </div> <div ng-if="!curriculum.higher" layout="row"> <md-input-container flex="50" flex-xs="100"> <label>{{\'curriculum.public.studyForm\' | translate}}</label> <hois-value value="version.curriculumStudyForm"></hois-value> </md-input-container> <md-input-container flex="45" flex-offset="5"> <label>{{\'curriculum.public.admissionYear\' | translate}}</label> <hois-value value="version.admissionYear"></hois-value> </md-input-container> </div> <div ng-if="!curriculum.higher" layout="row"> <md-input-container flex="50" flex-xs="100"> <label>{{\'curriculum.public.targetGroup\' | translate}}</label> <hois-value value="version.targetGroup"></hois-value> </md-input-container> </div> </div> <md-table-container> <table ng-if="!curriculum.higher" md-table class="secondary-table"> <thead md-head> <tr md-row style="background: #E0E0E0 !important"> <th md-column colspan="{{version.yearCapacities.length}}">{{\'curriculum.yearCapacitiesTable\' | translate}}</th> </tr> <tr md-row> <th md-column ng-repeat="yc in version.yearCapacities track by $index">{{$index+1}}.&nbsp;{{\'module.studyYearLowercase\' | translate}}</th> </tr> </thead> <tbody md-body> <tr md-row> <td md-cell ng-repeat="yc in version.yearCapacities track by $index">{{yc.credits}}</td> </tr> </tbody> </table> </md-table-container> </fieldset> <span ng-if="version.modules.length > 0"> <div>&nbsp;</div> <fieldset> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'module.modules\' | translate}}</legend> <hois-collapsable ng-repeat="module in version.modules | orderBy: \'nameEt\'" expanded="false" label="currentLanguageNameField(module) + \' \' + module.totalCredits + \' \' + (\'curriculum.public.higherCreditsUnit\' | translate)"> <md-table-container> <table ng-if="(mandatorySubjects = (module.subjects | filter : {optional: false})).length > 0" md-table class="secondary-table"> <thead md-head> <tr md-row style="background: #E0E0E0 !important"> <th md-column colspan="3">{{\'curriculum.public.mandatorySubjects\' | translate}}</th> </tr> <tr md-row> <th md-column width="40%">{{\'curriculum.public.name\' | translate}}</th> <th md-column width="20%">{{\'curriculum.public.higherStudyLoad\' | translate}}</th> <th md-column width="40%">{{\'curriculum.public.assessment\' | translate}}</th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="subject in mandatorySubjects"> <td md-cell>{{currentLanguageNameField(subject.subject)}}</td> <td md-cell>{{subject.subject.credits}}</td> <td md-cell>{{subject.subject.assessment}}</td> </tr> </tbody> </table> </md-table-container> <md-table-container style="margin-top: 0px"> <table ng-if="(optionalSubjects = (module.subjects | filter : {optional: true})).length > 0" md-table class="secondary-table"> <thead md-head> <tr md-row style="background: #E0E0E0 !important"> <th md-column colspan="3">{{\'curriculum.public.optionalSubjects\' | translate}}</th> </tr> <tr md-row> <th md-column width="40%">{{\'curriculum.public.name\' | translate}}</th> <th md-column width="20%">{{\'curriculum.public.higherStudyLoad\' | translate}}</th> <th md-column width="40%">{{\'curriculum.public.assessment\' | translate}}</th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="subject in optionalSubjects"> <td md-cell>{{currentLanguageNameField(subject.subject)}}</td> <td md-cell>{{subject.subject.credits}}</td> <td md-cell>{{subject.subject.assessment}}</td> </tr> </tbody> </table> </md-table-container> </hois-collapsable> </fieldset> </span> <span ng-if="version.occupationModules.length > 0"> <div>&nbsp;</div> <fieldset> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'module.modules\' | translate}}</legend> <hois-collapsable ng-repeat="module in version.occupationModules | orderBy: \'nameEt\'" expanded="false" label="currentLanguageNameField(module) + \' \' + module.totalCredits + \' \' + (\'curriculum.public.vocationalCreditsUnit\' | translate)"> <div layout="column"> <md-input-container flex> <label>{{\'curriculum.public.assessment\' | translate}}</label> <hois-value value="module.assessment"></hois-value> </md-input-container> </div> <md-table-container> <table ng-if="module.themes.length > 0" md-table class="secondary-table"> <thead md-head> <tr md-row style="background: #E0E0E0 !important"> <th md-column colspan="3">{{\'curriculum.public.themes\' | translate}}</th> </tr> <tr md-row> <th md-column width="40%">{{\'curriculum.public.name\' | translate}}</th> <th md-column width="20%">{{\'curriculum.public.vocationalStudyLoad\' | translate}}</th> <th md-column width="40%">{{\'curriculum.public.assessment\' | translate}}</th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="theme in module.themes"> <td md-cell>{{theme.nameEt}}</td> <td md-cell>{{theme.hours}}/{{theme.credits}}</td> <td md-cell>{{theme.assessment}}</td> </tr> </tbody> </table> </md-table-container> </hois-collapsable> </fieldset> </span> <div layout="row"> <md-button ng-click="back(\'#/curriculums/\')" class="md-raised">{{\'main.button.back\' | translate}}</md-button> </div> </div>'),a.put("curriculum/curriculum.public.view.html",'<div layout-padding ng-cloak class="form-readonly"> <fieldset> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'curriculum.public.curriculumData\' | translate}}</legend> <div>&nbsp;</div> <div layout="row" layout-sm="column" layout-xs="column" flex> <md-input-container flex-gt-sm="50"> <label>{{\'curriculum.nameEt\' | translate}}</label> <hois-value value="curriculum.nameEt"></hois-value> </md-input-container> <md-input-container flex-gt-sm="45" flex-offset-gt-xs="5"> <label>{{\'curriculum.nameEn\' | translate}}</label> <hois-value value="curriculum.nameEn"></hois-value> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column" flex> <md-input-container flex-gt-sm="50"> <label>{{\'curriculum.code\' | translate}}</label> <hois-value value="curriculum.code"></hois-value> </md-input-container> <md-input-container flex-gt-sm="45" flex-offset-gt-xs="5"> <label>{{\'curriculum.merCode\' | translate}}</label> <hois-value value="curriculum.merCode"></hois-value> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column" flex> <md-input-container flex-gt-sm="25"> <label>{{\'curriculum.credits\' | translate}}</label> <hois-value value="curriculum.credits"></hois-value> </md-input-container> <md-input-container flex-gt-sm="25"> <label>{{\'student.studyLevel\' | translate}}</label> <hois-value value="curriculum.origStudyLevel"></hois-value> </md-input-container> <md-input-container ng-if="curriculum.higher" flex-gt-sm="45" flex-offset-gt-xs="5"> <label>{{\'curriculum.studyPeriod\' | translate}} {{\'main.years\' | translate}}/{{\'main.months\' | translate}}</label> <hois-value value="curriculum.studyPeriodYears + \'/\' + curriculum.studyPeriodMonths"></hois-value> </md-input-container> <md-input-container ng-if="!curriculum.higher" flex-gt-sm="20" flex-offset-gt-xs="5"> <label>{{\'curriculum.studyPeriod\' | translate}} {{\'main.years\' | translate}}/{{\'main.months\' | translate}}</label> <hois-value value="curriculum.studyPeriodYears + \'/\' + curriculum.studyPeriodMonths"></hois-value> </md-input-container> <md-input-container ng-if="!curriculum.higher" flex-gt-sm="25"> <label>{{\'curriculum.consecution.label\' | translate}}</label> <hois-value value="curriculum.consecution"></hois-value> </md-input-container> </div> <div>&nbsp;</div> <div layout="column"> <md-input-container flex> <label>{{\'curriculum.studyOutcomes\' | translate}}</label> <textarea ng-if="currentLanguage() === \'en\'" ng-model="curriculum.outcomesEn" class="textarea-readonly" max-rows="10" readonly></textarea> <textarea ng-if="currentLanguage() !== \'en\'" ng-model="curriculum.outcomesEt" class="textarea-readonly" max-rows="10" readonly></textarea> </md-input-container> <md-input-container flex> <label>{{\'curriculum.admissionRequirements\' | translate}}</label> <textarea ng-if="currentLanguage() === \'en\'" ng-model="curriculum.admissionRequirementsEn" class="textarea-readonly" max-rows="10" readonly></textarea> <textarea ng-if="currentLanguage() !== \'en\'" ng-model="curriculum.admissionRequirementsEt" class="textarea-readonly" max-rows="10" readonly></textarea> </md-input-container> <md-input-container flex> <label>{{\'curriculum.graduationRequirements\' | translate}}</label> <textarea ng-if="currentLanguage() === \'en\'" ng-model="curriculum.graduationRequirementsEn" class="textarea-readonly" max-rows="10" readonly></textarea> <textarea ng-if="currentLanguage() !== \'en\'" ng-model="curriculum.graduationRequirementsEt" class="textarea-readonly" max-rows="10" readonly></textarea> </md-input-container> </div> </fieldset> <span ng-if="curriculum.versions.length > 0"> <div>&nbsp;</div> <fieldset> <legend ng-if="curriculum.higher" md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'curriculum.public.curriculumVersionsHigher\' | translate}}</legend> <legend ng-if="!curriculum.higher" md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'curriculum.public.curriculumVersionsVocational\' | translate}}</legend> <md-table-container> <table md-table md-progress="promise" class="secondary-table"> <thead md-head md-order="query.order"> <tr md-row> <th md-column>{{\'curriculum.public.code\' | translate}}</th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="version in curriculum.versions | orderBy: \'code\'"> <td md-cell> <a href="/#/curriculum/{{::curriculum.id}}/version/{{::version.id}}" class="md-primary">{{version.code}}</a> </td> </tr> </tbody> </table> </md-table-container> </fieldset> </span> <div layout="row"> <md-button ng-click="back(\'#/curriculums/\')" class="md-raised">{{\'main.button.back\' | translate}}</md-button> </div> </div>'),a.put("declaration/declaration.edit.html",'<md-nav-bar md-selected-nav-item="currentNavItem" aria-label="{{\'subjectStudyPeriod.label.options\' | translate}}" ng-show="formState.showNavBar"> <md-nav-item md-nav-href="#/declaration/current/view" name="current">{{\'declaration.myDeclaration\' | translate}}</md-nav-item> <md-nav-item md-nav-href="#/declarations/previous?_menu" name="previous">{{\'declaration.previousDeclarations\' | translate}}</md-nav-item> </md-nav-bar> <div class="ois-form-layout-padding form-readonly" layout="column"> <div layout="row" layout-sm="column" layout-xs="column" ng-show="auth.isAdmin()"> <md-input-container flex="25" flex-sm="100" flex-xs="100"> <label>{{\'declaration.student\' | translate}}</label> <hois-value value="declaration.student.fullname"></hois-value> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="25" flex-sm="100" flex-xs="100"> <label>{{\'declaration.studyPeriod\' | translate}}</label> <hois-value value="currentLanguageNameField(declaration.studyPeriod)"></hois-value> </md-input-container> <md-input-container flex="25" flex-sm="100" flex-xs="100" flex-offset-xs="0" flex-offset-sm="0" flex-offset="5"> <label>{{\'declaration.curriculumVersion\' | translate}}</label> <hois-value value="currentLanguageNameField(declaration.student.curriculumVersion)"></hois-value> </md-input-container> <md-input-container flex="25" flex-sm="100" flex-xs="100" flex-offset-xs="0" flex-offset-sm="0" flex-offset="5"> <label>{{\'declaration.course\' | translate}}</label> <hois-value value="declaration.course.toString()"></hois-value> </md-input-container> <md-input-container flex="25" flex-sm="100" flex-xs="100" flex-offset-xs="0" flex-offset-sm="0" flex-offset="5"> <label>{{\'declaration.studentGroup\' | translate}}</label> <hois-value value="currentLanguageNameField(declaration.student.studentGroup)"></hois-value> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="25" flex-sm="100" flex-xs="100"> <label>{{\'declaration.status\' | translate}}</label> <hois-classifier-value ng-model="declaration.status" main-classifier-code="OPINGUKAVA_STAATUS"></hois-classifier-value> </md-input-container> <md-input-container flex="25" flex-sm="100" flex-xs="100" flex-offset-xs="0" flex-offset-sm="0" flex-offset="5"> <label>{{\'declaration.inserted\' | translate}}</label> <hois-value value="declaration.inserted | hoisDateTime"></hois-value> </md-input-container> <md-input-container flex="25" flex-sm="100" flex-xs="100" flex-offset-xs="0" flex-offset-sm="0" flex-offset="5"> <label>{{\'declaration.confirmDate\' | translate}}</label> <hois-value value="declaration.confirmDate | hoisDate"></hois-value> </md-input-container> <md-input-container flex="25" flex-sm="100" flex-xs="100" flex-offset-xs="0" flex-offset-sm="0" flex-offset="5"> <label>{{\'declaration.confirmer\' | translate}}</label> <hois-value value="declaration.confirmer"></hois-value> </md-input-container> </div> <div ng-show="declaration.canBeSetConfirmed" layout="row" layout-xs="column"> <md-button class="md-raised" ng-click="openAddCurriculumSubject()">{{\'declaration.addCurriculumSubject\' | translate}}</md-button> <md-button class="md-raised" ng-click="openAddExtraCurriculumSubject()">{{\'declaration.addExtraCurriculumSubject\' | translate}}</md-button> </div> <br> <fieldset ng-show="addCurriculumSubjectForm"> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'declaration.addingCurriculumSubject\' | translate}}</legend> <span ng-if="tabledata.content.length === 0"> {{\'declaration.noSuitableCurriculumSubjects\' | translate}} </span> <span ng-if="tabledata.content.length > 0"> <md-table-container> <table md-table md-progress="tabledata.$promise" class="secondary-table"> <thead md-head md-order="criteria.order" md-on-reorder="loadData"> <tr md-row> <th md-column md-order-by="{{\'cvhm.\' + currentLanguageNameField()}}">{{\'declaration.module\' | translate}}</th> <th md-column md-order-by="{{\'s.\' + currentLanguageNameField()}}">{{\'declaration.subject\' | translate}}</th> <th md-column>{{\'declaration.teacher\' | translate}}</th> <th md-column md-order-by="s.credits">{{\'declaration.eap\' | translate}}</th> <th md-column md-order-by="c.value">{{\'declaration.assessment\' | translate}}</th> <th md-column md-order-by="cvhms.is_optional">{{\'declaration.isRequired\' | translate}}</th> <th md-column></th> </tr> </thead> <tbody md-body> <tr ng-repeat="subject in tabledata.content"> <td md-cell>{{currentLanguageNameField(subject.module)}}</td> <td md-cell>{{currentLanguageNameField(subject.subject)}}({{subject.subject.code}})</td> <td md-cell> <table> <tr ng-repeat="teacher in subject.teachers | orderBy"> <td>{{teacher}}</td> </tr> </table> </td> <td md-cell>{{subject.subject.credits}}</td> <td md-cell>{{subject.subject.assessment}}</td> <td md-cell>{{subject.isOptional ? \'main.no\' : \'main.yes\' | translate}}</td> <td md-cell> <a href="" ng-click="addCurriculumSubject(subject)">{{\'declaration.addSubject\' | translate}}</a> </td> </tr> <tr ng-repeat-end> <td colspan="6"></td> </tr> </tbody> </table> </md-table-container> <md-table-pagination md-limit="criteria.size" md-limit-options="[10, 20, 50]" md-page="criteria.page" md-total="{{tabledata.totalElements}}" md-on-paginate="loadData" md-label="{page: \'{{\'main.page\' | translate}}:\', rowsPerPage: \'{{\'main.rowPerPage\' | translate}}:\', of: \'{{\'main.of\' | translate}}\' }" md-page-select></md-table-pagination> </span> </fieldset> <fieldset ng-show="addExtraCurriculumSubjectForm"> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'declaration.addingExtraCurriculumSubject\' | translate}}</legend> <form name="extraCurriculumForm" ng-cloak> <div class="ois-form-layout" layout="column" layout-margin ng-cloak> <md-select ng-model="subject" required aria-label="{{\'declaration.addingExtraCurriculumSubject\' | translate}}"> <md-option ng-value="subject" ng-repeat="subject in subjects |\r\n                orderBy: \'subject.\' + currentLanguageNameField()"> {{currentLanguageNameField(subject.subject)}}({{subject.subject.code}}) - {{subject.teachers.join(\', \')}} </md-option> </md-select> </div> <md-button class="md-raised md-primary" ng-click="addExtraCurriculumSubject()">{{"main.button.add" | translate}}</md-button> </form> </fieldset> <br> <md-table-container> <table md-table> <thead md-head> <tr md-row> <th md-column>{{\'declaration.subject\' | translate}}</th> <th md-column>{{\'declaration.teacher\' | translate}}</th> <th md-column>{{\'declaration.eap_assessment\' | translate}}</th> <th md-column>{{\'declaration.module_isRequired\' | translate}}</th> <th md-column>{{\'declaration.prerequisites\' | translate}}</th> <th md-column>{{\'studyMaterial.label\' | translate}}</th> <th md-column></th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="subject in declaration.subjects | orderBy: \'subject.\' + currentLanguageNameField()" ng-class="{listItem: subject.newlyAdded}" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell> {{currentLanguageNameField(subject.subject)}} ({{subject.subject.code}}) <span ng-show="subject.isDeclaredRepeatedly">&nbsp;*</span> </td> <td md-cell> <table> <tr ng-repeat="teacher in subject.teachers | orderBy"> <td>{{teacher}}</td> </tr> </table> </td> <td md-cell>{{subject.subject.credits}} / {{subject.subject.assessment}}</td> <td md-cell>{{subject.module != null ? currentLanguageNameField(subject.module) : \' - \'}} / {{subject.isOptional ? \'main.no\' : \'main.yes\' | translate}}</td> <td md-cell> <span ng-show="!hasPrerequisites(subject)"> - </span> <span ng-show="hasPrerequisites(subject)"><a href="" ng-click="seePrerequisites(subject)"> {{\'declaration.seePrerequisites\' | translate}}</a> </span> </td> <td md-cell><a ng-href="/#/studyMaterial/higher/{{subject.subjectStudyPeriod}}/view">{{\'studyMaterial.openfolder\' | translate}}</a></td> <td md-cell> <a ng-if="!subject.isAssessed" class="remove nomargin" ng-click="removeSubject(subject)">&times;</a> </td> </tr> </tbody> </table> </md-table-container> <br> <div layout="row"> <md-button ng-show="declaration.canBeSetConfirmed" class="md-raised md-primary" ng-click="confirm()">{{\'declaration.confirm\' | translate}}</md-button> <md-button ng-show="declaration.canBeSetUnconfirmed" class="md-raised md-primary" ng-click="removeConfirmation()">{{\'declaration.removeConfirmation\' | translate}}</md-button> <md-button ng-if="!auth.isStudent()" class="md-raised md-default" ng-click="back(\'#/declarations\')">{{\'main.button.back\' | translate}}</md-button> <md-button ng-if="auth.isStudent()" class="md-raised md-default" ng-click="back(\'#/declaration/current/view\')">{{\'main.button.back\' | translate}}</md-button> </div> </div> <style>.listItem.ng-enter {\r\n    transition: all 2.5s ease;\r\n}\r\n.listItem.ng-enter-active {\r\n    background-color: #84ff8e;\r\n}</style>'),
a.put("declaration/declaration.new.html",'<form layout="column" class="ois-form-layout-padding form-readonly" name="declarationNewForm" novalidate> <md-input-container flex="45" flex-sm="100" flex-xs="100"> <label>{{\'declaration.studyPeriod\' | translate}}</label> <hois-value value="currentLanguageNameField(studyPeriod)"></hois-value> </md-input-container> <br> <hois-autocomplete ng-model="student" url="/declarations/students" name="student" label="declaration.student" required> </hois-autocomplete> <div layout="row"> <md-button class="md-raised md-primary" type="submit" ng-click="save()">{{\'main.button.add\' | translate}}</md-button> <md-button class="md-raised md-default" ng-click="back(\'#/declarations\')">{{\'main.button.back\' | translate}}</md-button> </div> </form>'),a.put("declaration/declaration.search.html",'<div class="ois-form-layout-padding ois-form-layout" ng-cloak> <div layout="column"> <fieldset> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'main.searchlabel\' | translate}}</legend> <form name="declarationSearchForm" ng-submit="declarationSearchForm.$valid && loadData()" novalidate> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="45" flex-sm="100" flex-xs="100"> <label>{{\'declaration.studyPeriod\' | translate}}</label> <hois-select ng-model="criteria.studyPeriod" values="studyPeriods" required></hois-select> </md-input-container> <md-input-container flex="45" flex-sm="100" flex-xs="100" flex-offset-xs="0" flex-offset-sm="0" flex-offset="5"> <label>{{\'declaration.student\' | translate}}</label> <input ng-model="criteria.studentsName" type="text" md-maxlength="255"> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="45" flex-sm="100" flex-xs="100"> <label>{{\'declaration.curriculumVersion\' | translate}}</label> <hois-select ng-model="criteria.curriculumVersion" values="curriculumVersions"></hois-select> </md-input-container> <md-input-container flex="45" flex-sm="100" flex-xs="100" flex-offset-xs="0" flex-offset-sm="0" flex-offset="5"> <label>{{\'declaration.studentGroup\' | translate}}</label> <hois-select ng-model="criteria.studentGroups" multiple values="studentGroups"></hois-select> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="45" flex-sm="100" flex-xs="100"> <label>{{\'declaration.status\' | translate}}</label> <hois-classifier-select ng-model="criteria.status" main-classifier-code="OPINGUKAVA_STAATUS" model-value-attr="code"></hois-classifier-select> </md-input-container> <md-input-container flex="45" flex-sm="100" flex-xs="100" flex-offset-xs="0" flex-offset-sm="0" flex-offset="5"> <md-checkbox ng-model="criteria.repeatingDeclaration" aria-label="{{\'declaration.repeatingDeclaration\' | translate}}"> {{\'declaration.repeatingDeclaration\' | translate}} </md-checkbox> </md-input-container> </div> <div layout="row"> <div layout="column" flex="45"> <label class="common-label">{{\'declaration.inserted\' | translate}}</label> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex-sm="100" flex-xs="100"> <label>{{\'main.from\' | translate}}</label> <md-datepicker ng-model="criteria.insertedFrom" md-max-date="criteria.insertedThru"></md-datepicker> </md-input-container> <md-input-container flex-sm="100" flex-xs="100"> <label>{{\'main.thru\' | translate}}</label> <md-datepicker ng-model="criteria.insertedThru" md-min-date="criteria.insertedFrom"></md-datepicker> </md-input-container> </div> </div> <div layout="column" flex="50" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label class="common-label">{{\'declaration.confirmDate\' | translate}}</label> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex-sm="100" flex-xs="100"> <label>{{\'main.from\' | translate}}</label> <md-datepicker ng-model="criteria.confirmedFrom" md-max-date="criteria.confirmedThru"></md-datepicker> </md-input-container> <md-input-container flex-sm="100" flex-xs="100"> <label>{{\'main.thru\' | translate}}</label> <md-datepicker ng-model="criteria.confirmedThru" md-min-date="criteria.confirmedFrom"></md-datepicker> </md-input-container> </div> </div> </div> <div layout="row"> <md-button type="submit" class="md-raised md-primary">{{\'main.button.search\' | translate}}</md-button> <md-button class="md-raised" ng-click="clearCriteria()">{{\'main.button.clear\' | translate}}</md-button> <md-button class="md-raised" ng-if="formState.canCreate" ng-href="#/declarations/new">{{\'main.button.create\' | translate}}</md-button> </div> <div layout="row"> <md-button class="md-raised" ng-click="showUncomposed()">{{\'declaration.showUncomposed\' | translate}}</md-button> <md-button class="md-raised" ng-if="canConfirm" ng-click="confirmAll()">{{\'declaration.confirmAll\' | translate}}</md-button> </div> </form> </fieldset> <br> <md-table-container ng-cloak layout-padding> <table md-table md-progress="tabledata.$promise"> <thead md-head md-order="criteria.order" md-on-reorder="loadData"> <tr md-row> <th md-column md-order-by="p.lastname,p.firstname">{{\'declaration.student\' | translate}}</th> <th md-column md-order-by="p.idcode">{{\'declaration.idcode\' | translate}}</th> <th md-column md-order-by="cv.code">{{\'declaration.curriculumVersion\' | translate}}</th> <th md-column md-order-by="sg.code">{{\'declaration.studentGroup\' | translate}}</th> <th md-column md-order-by="d.inserted">{{\'declaration.inserted\' | translate}}</th> <th md-column md-order-by="status.{{currentLanguageNameField()}}">{{\'declaration.status\' | translate}}</th> <th md-column md-order-by="d.confirmDate">{{\'declaration.confirmDate\' | translate}}</th> <th></th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="row in tabledata.content" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell class="one-row"><a ng-href="#/declarations/{{row.id}}/view">{{::row.student.fullname}}</a></td> <td md-cell>{{::row.student.idcode}}</td> <td md-cell>{{currentLanguageNameField(row.student.curriculumVersion)}}</td> <td md-cell>{{currentLanguageNameField(row.student.studentGroup)}}</td> <td md-cell>{{row.inserted | hoisDate}}</td> <td md-cell>{{currentLanguageNameField(row.status)}}</td> <td md-cell>{{row.confirmDate | hoisDate}}</td> <td md-cell> <md-button md-no-ink class="md-primary change-button" ng-href="#/declarations/{{row.id}}/edit" ng-if="row.canBeChanged && isAuthorized(\'ROLE_OIGUS_M_TEEMAOIGUS_OPINGUKAVA\')"> {{\'main.button.change\' | translate}} </md-button> </td> </tr> </tbody> </table> </md-table-container> <md-table-pagination md-limit="criteria.size" md-limit-options="[10, 20, 50]" md-page="criteria.page" md-total="{{tabledata.totalElements}}" md-on-paginate="loadData" md-label="{page: \'{{\'main.page\' | translate}}:\', rowsPerPage: \'{{\'main.rowPerPage\' | translate}}:\', of: \'{{\'main.of\' | translate}}\' }" md-page-select></md-table-pagination> </div> </div>'),a.put("declaration/declaration.student.search.html",'<md-nav-bar md-selected-nav-item="currentNavItem" aria-label="{{\'subjectStudyPeriod.label.options\' | translate}}"> <md-nav-item md-nav-href="#/declaration/current/view" name="current">{{\'declaration.myDeclaration\' | translate}}</md-nav-item> <md-nav-item md-nav-href="#/declarations/previous?_menu" name="previous">{{\'declaration.previousDeclarations\' | translate}}</md-nav-item> </md-nav-bar> <md-table-container ng-cloak layout-padding> <table md-table md-progress="tabledata.$promise"> <thead md-head md-order="criteria.order" md-on-reorder="loadData"> <tr md-row> <th md-column md-order-by="sp.{{currentLanguageNameField()}}">{{\'declaration.studyPeriod\' | translate}}</th> <th md-column md-order-by="d.inserted">{{\'declaration.inserted\' | translate}}</th> <th md-column md-order-by="status.{{currentLanguageNameField()}}">{{\'declaration.status\' | translate}}</th> <th md-column md-order-by="d.confirmDate">{{\'declaration.confirmDate\' | translate}}</th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="row in tabledata.content" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell><a ng-href="#/declarations/{{row.id}}/view">{{currentLanguageNameField(row.studyPeriod)}}</a></td> <td md-cell>{{row.inserted | hoisDate}}</td> <td md-cell>{{currentLanguageNameField(row.status)}}</td> <td md-cell>{{row.confirmDate | hoisDate}}</td> </tr> </tbody> </table> </md-table-container> <md-table-pagination md-limit="criteria.size" md-limit-options="[10, 20, 50]" md-page="criteria.page" md-total="{{tabledata.totalElements}}" md-on-paginate="loadData" md-label="{page: \'{{\'main.page\' | translate}}:\', rowsPerPage: \'{{\'main.rowPerPage\' | translate}}:\', of: \'{{\'main.of\' | translate}}\' }" md-page-select></md-table-pagination>'),a.put("declaration/declaration.subject.prerequisites.html",'<md-dialog aria-label="grade add dialog" flex="40" flex-xs="100"> <form name="dialogForm" ng-cloak> <md-toolbar> <div class="md-toolbar-tools"> <h2>{{"declaration.prerequisites" | translate}}</h2> <span flex></span> <md-button class="md-icon-button" ng-click="cancel()"> <md-icon md-font-set="material-icons">close</md-icon> </md-button> </div> </md-toolbar> <md-dialog-content> <span flex></span> <div class="ois-form-layout" layout="column" layout-margin ng-cloak> <div ng-show="subject.mandatoryPrerequisiteSubjects.length > 0"> <legend md-colors="{color: \'default-primary-800\'}" class="md-title-small"> {{"declaration.mandatoryPrerequisiteSubjects" | translate}} </legend> <md-table-container> <table md-table class="secondary-table"> <thead md-head> <tr md-row> <th md-column>{{\'declaration.subject\' | translate}}</th> <th md-column width="10%">{{\'declaration.eap_assessment\' | translate}}</th> <th md-column width="10%">{{\'declaration.grade\' | translate}}</th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="s in subject.mandatoryPrerequisiteSubjects | orderBy: currentLanguageNameField()" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell>{{currentLanguageNameField(s)}} ({{s.code}})</td> <td md-cell>{{s.credits}} / {{s.assessment}}</td> <td md-cell></td> </tr> </tbody> </table> </md-table-container> </div> <div ng-show="subject.recommendedPrerequisiteSubjects.length > 0"> <legend md-colors="{color: \'default-primary-800\'}" class="md-title-small" ng-show="subject.recommendedPrerequisiteSubjects.length > 0"> {{"declaration.recommendedPrerequisiteSubjects" | translate}} </legend> <md-table-container> <table md-table class="secondary-table"> <thead md-head> <tr md-row> <th md-column>{{\'declaration.subject\' | translate}}</th> <th md-column width="10%">{{\'declaration.eap_assessment\' | translate}}</th> <th md-column width="10%">{{\'declaration.grade\' | translate}}</th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="s in subject.recommendedPrerequisiteSubjects | orderBy: currentLanguageNameField()" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell>{{currentLanguageNameField(s)}} ({{s.code}})</td> <td md-cell>{{s.credits}} / {{s.assessment}}</td> <td md-cell>{{s.grade}}</td> </tr> </tbody> </table> </md-table-container> </div> </div> </md-dialog-content> <md-dialog-actions layout="row" layout-align="start center"> <md-button class="md-raised" ng-click="cancel()">{{"main.button.close" | translate}}</md-button> </md-dialog-actions> </form> </md-dialog>'),a.put("declaration/declaration.view.html",'<md-nav-bar md-selected-nav-item="currentNavItem" aria-label="{{\'subjectStudyPeriod.label.options\' | translate}}" ng-show="formState.showNavBar"> <md-nav-item md-nav-href="#/declaration/current/view" name="current">{{\'declaration.myDeclaration\' | translate}}</md-nav-item> <md-nav-item md-nav-href="#/declarations/previous?_menu" name="previous">{{\'declaration.previousDeclarations\' | translate}}</md-nav-item> </md-nav-bar> <div class="ois-form-layout-padding form-readonly" layout="column" ng-show="formState.declaration"> <div layout="row" layout-sm="column" layout-xs="column" ng-show="auth.isAdmin()"> <md-input-container flex="25" flex-sm="100" flex-xs="100"> <label>{{\'declaration.student\' | translate}}</label> <hois-value value="declaration.student.fullname"></hois-value> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="25" flex-sm="100" flex-xs="100"> <label>{{\'declaration.studyPeriod\' | translate}}</label> <hois-value value="currentLanguageNameField(declaration.studyPeriod)"></hois-value> </md-input-container> <md-input-container flex="25" flex-sm="100" flex-xs="100" flex-offset-xs="0" flex-offset-sm="0" flex-offset="5"> <label>{{\'declaration.curriculumVersion\' | translate}}</label> <hois-value value="currentLanguageNameField(declaration.student.curriculumVersion)"></hois-value> </md-input-container> <md-input-container flex="25" flex-sm="100" flex-xs="100" flex-offset-xs="0" flex-offset-sm="0" flex-offset="5"> <label>{{\'declaration.course\' | translate}}</label> <hois-value value="declaration.course.toString()"></hois-value> </md-input-container> <md-input-container flex="25" flex-sm="100" flex-xs="100" flex-offset-xs="0" flex-offset-sm="0" flex-offset="5"> <label>{{\'declaration.studentGroup\' | translate}}</label> <hois-value value="currentLanguageNameField(declaration.student.studentGroup)"></hois-value> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="25" flex-sm="100" flex-xs="100"> <label>{{\'declaration.status\' | translate}}</label> <hois-classifier-value ng-model="declaration.status" main-classifier-code="OPINGUKAVA_STAATUS"></hois-classifier-value> </md-input-container> <md-input-container flex="25" flex-sm="100" flex-xs="100" flex-offset-xs="0" flex-offset-sm="0" flex-offset="5"> <label>{{\'declaration.inserted\' | translate}}</label> <hois-value value="declaration.inserted | hoisDateTime"></hois-value> </md-input-container> <md-input-container flex="25" flex-sm="100" flex-xs="100" flex-offset-xs="0" flex-offset-sm="0" flex-offset="5"> <label>{{\'declaration.confirmDate\' | translate}}</label> <hois-value value="declaration.confirmDate | hoisDate"></hois-value> </md-input-container> <md-input-container flex="25" flex-sm="100" flex-xs="100" flex-offset-xs="0" flex-offset-sm="0" flex-offset="5"> <label>{{\'declaration.confirmer\' | translate}}</label> <hois-value value="declaration.confirmer"></hois-value> </md-input-container> </div> <br> <md-table-container> <table md-table> <thead md-head> <tr md-row> <th md-column>{{\'declaration.subject\' | translate}}</th> <th md-column>{{\'declaration.teacher\' | translate}}</th> <th md-column>{{\'declaration.eap_assessment\' | translate}}</th> <th md-column>{{\'declaration.module_isRequired\' | translate}}</th> <th md-column>{{\'declaration.prerequisites\' | translate}}</th> <th md-column>{{\'studyMaterial.label\' | translate}}</th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="subject in declaration.subjects | orderBy: \'subject.\' + currentLanguageNameField()" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell> {{currentLanguageNameField(subject.subject)}} ({{subject.subject.code}}) <span ng-show="subject.isDeclaredRepeatedly">&nbsp;*</span> </td> <td md-cell> <table> <tr ng-repeat="teacher in subject.teachers | orderBy"> <td>{{teacher}}</td> </tr> </table> </td> <td md-cell>{{subject.subject.credits}} / {{subject.subject.assessment}}</td> <td md-cell>{{subject.module != null ? currentLanguageNameField(subject.module) : \' - \'}} / {{subject.isOptional ? \'main.no\' : \'main.yes\' | translate}}</td> <td md-cell> <span ng-show="!hasPrerequisites(subject)"> - </span> <span ng-show="hasPrerequisites(subject)"><a href="" ng-click="seePrerequisites(subject)"> {{\'declaration.seePrerequisites\' | translate}}</a> </span> </td> <td md-cell><a ng-href="/#/studyMaterial/higher/{{subject.subjectStudyPeriod}}/view">{{\'studyMaterial.openfolder\' | translate}}</a></td> </tr> </tbody> </table> </md-table-container> <br> <div layout="row"> <md-button ng-if="isAuthorized(\'ROLE_OIGUS_M_TEEMAOIGUS_OPINGUKAVA\')" ng-show="declaration.canBeChanged" class="md-raised md-primary" ng-href="#/declarations/{{declaration.id}}/edit">{{\'main.button.change\' | translate}}</md-button> <md-button ng-if="isAuthorized(\'ROLE_OIGUS_M_TEEMAOIGUS_OPINGUKAVA\')" ng-show="declaration.canBeSetConfirmed" class="md-raised" ng-click="confirm()">{{\'declaration.confirm\' | translate}}</md-button> <md-button ng-if="isAuthorized(\'ROLE_OIGUS_M_TEEMAOIGUS_OPINGUKAVA\')" ng-show="declaration.canBeSetUnconfirmed" class="md-raised" ng-click="removeConfirmation()">{{\'declaration.removeConfirmation\' | translate}}</md-button> <md-button ng-if="!auth.isStudent()" class="md-raised md-default" ng-click="back(\'#/declarations\')">{{\'main.button.back\' | translate}}</md-button> <md-button ng-if="auth.isStudent() && !currentDeclarationPage" class="md-raised md-default" ng-click="back(\'#/declaration/current/view\')">{{\'main.button.back\' | translate}}</md-button> </div> </div> <div layout-padding> <div ng-show="formState.noDeclaration && formState.isDeclarationPeriod"> <md-whiteframe class="md-whiteframe-1dp attention-whiteframe" flex="100" layout layout-align="left center"> <div md-colors="{color: \'warn\'}"> <md-icon md-colors="{color: \'warn\'}" md-font-set="material-icons">info_outline</md-icon> <span>{{\'declaration.noCurrentDeclaration\' | translate}}</span> </div> </md-whiteframe> <div ng-if="isAuthorized(\'ROLE_OIGUS_M_TEEMAOIGUS_OPINGUKAVA\')" layout="row"> <md-button ng-show="formState.canCreateDeclaration" class="md-raised" ng-click="addDeclaration()">{{\'main.button.add\' | translate}}</md-button> </div> </div> <div ng-show="formState.noDeclaration && !formState.isDeclarationPeriod && !formState.declarationPeriodStart && !formState.declarationPeriodEnd"> <md-whiteframe class="md-whiteframe-1dp attention-whiteframe" flex="100" layout layout-align="left center"> <div md-colors="{color: \'accent\'}"> <md-icon md-colors="{color: \'accent\'}" md-font-set="material-icons">info_outline</md-icon> <span>{{\'declaration.notDeclarationPeriod\' | translate}}</span> </div> </md-whiteframe> </div> <div ng-show="formState.noDeclaration && !formState.isDeclarationPeriod && formState.declarationPeriodEnd"> <md-whiteframe class="md-whiteframe-1dp attention-whiteframe" flex="100" layout layout-align="left center"> <div md-colors="{color: \'accent\'}"> <md-icon md-colors="{color: \'accent\'}" md-font-set="material-icons">info_outline</md-icon> <span>{{\'declaration.declarationPeriodHasEnded\' | translate}} {{formState.declarationPeriodEnd | hoisDate}}</span> </div> </md-whiteframe> </div> <div ng-show="formState.noDeclaration && !formState.isDeclarationPeriod && formState.declarationPeriodStart"> <md-whiteframe class="md-whiteframe-1dp attention-whiteframe" flex="100" layout layout-align="left center"> <div md-colors="{color: \'accent\'}"> <md-icon md-colors="{color: \'accent\'}" md-font-set="material-icons">info_outline</md-icon> <span>{{\'declaration.declarationPeriodHasNotStarted\' | translate}} {{formState.declarationPeriodStart | hoisDate}}</span> </div> </md-whiteframe> </div> </div>'),a.put("declaration/uncomposed.declarations.html",'<md-dialog aria-label="{{\'declaration.uncomposedDeclarations\' | translate}}" flex="50" flex-sm="70" flex-xs="100"> <form name="dialogForm" ng-cloak> <md-toolbar> <div class="md-toolbar-tools"> <h2>{{"declaration.uncomposedDeclarations" | translate}}</h2> <span flex></span> <md-button class="md-icon-button" ng-click="cancel()"> <md-icon md-font-set="material-icons">close</md-icon> </md-button> </div> </md-toolbar> <md-dialog-content> <div class="ois-form-layout"> <md-table-container flex> <table md-table md-progress="tabledata.$promise"> <thead md-head md-order="criteria.order" md-on-reorder="loadData"> <tr md-row> <th md-column md-order-by="p.lastname,p.firstname">{{\'declaration.student\' | translate}}</th> <th md-column md-order-by="p.idcode">{{\'declaration.idcode\' | translate}}</th> <th md-column md-order-by="cv.code">{{\'declaration.curriculumVersion\' | translate}}</th> <th md-column md-order-by="sg.code">{{\'declaration.studentGroup\' | translate}}</th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="row in tabledata.content" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell class="one-row">{{::row.fullname}}</td> <td md-cell>{{::row.idcode}}</td> <td md-cell>{{currentLanguageNameField(row.curriculumVersion)}}</td> <td md-cell>{{currentLanguageNameField(row.studentGroup)}}</td> </tr> </tbody> </table> </md-table-container> <md-table-pagination md-limit="criteria.size" md-limit-options="[10, 20, 50]" md-page="criteria.page" md-total="{{tabledata.totalElements}}" md-on-paginate="loadData" md-label="{page: \'{{\'main.page\' | translate}}:\', rowsPerPage: \'{{\'main.rowPerPage\' | translate}}:\', of: \'{{\'main.of\' | translate}}\' }" md-page-select></md-table-pagination> </div> </md-dialog-content> <md-dialog-actions layout="row" layout-align="start center"> <md-button class="md-raised" ng-click="cancel()">{{"main.button.close" | translate}}</md-button> </md-dialog-actions> </form> </md-dialog>'),a.put("directive/coordinator.edit.html",'<div layout="column" layout-padding> <div> <form name="directiveCoordinatorForm"> <md-input-container class="md-block"> <label>{{\'directive.coordinator.name\' | translate}}</label> <input ng-model="record.name" name="name" type="text" required md-maxlength="100"> </md-input-container> <md-input-container class="md-block"> <label class="textInput">{{\'directive.coordinator.idcode\' | translate}}</label> <input ng-model="record.idcode" name="idcode" type="text" required md-minlength="11" md-maxlength="11"> </md-input-container> <div layout="column"> <md-checkbox ng-model="record.isDirective" aria-label="{{\'directive.coordinator.isDirective\' | translate}}"> {{\'directive.coordinator.isDirective\' | translate}} </md-checkbox> <md-checkbox ng-model="record.isCertificate" aria-label="{{\'directive.coordinator.isCertificate\' | translate}}"> {{\'directive.coordinator.isCertificate\' | translate}} </md-checkbox> <md-checkbox ng-model="record.isCertificateDefault" aria-label="{{\'directive.coordinator.isCertificateDefault\' | translate}}"> {{\'directive.coordinator.isCertificateDefault\' | translate}} </md-checkbox> </div> </form> <md-button ng-click="update()" class="md-raised md-primary">{{\'main.button.save\' | translate}}</md-button> <md-button ng-click="delete()" ng-if="record.id" class="md-raised">{{\'main.button.delete\' | translate}}</md-button> <md-button ng-href="#/directives/coordinators" class="md-raised">{{\'main.button.back\' | translate}}</md-button> </div> </div>'),a.put("directive/coordinator.search.html",'<div layout-padding> <div flex> <md-table-container> <table md-table md-progress="tabledata.$promise"> <thead md-head md-order="criteria.order" md-on-reorder="loadData"> <tr md-row> <th md-column md-order-by="name">{{\'directive.coordinator.name\' | translate}}</th> <th md-column md-order-by="idcode">{{\'directive.coordinator.idcode\' | translate}}</th> <th md-column md-order-by="isDirective">{{\'directive.coordinator.directive\' | translate}}</th> <th md-column md-order-by="isCertificate">{{\'directive.coordinator.certificate\' | translate}}</th> <th md-column md-order-by="isCertificateDefault">{{\'directive.coordinator.certificateDefault\' | translate}}</th> <th md-column></th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="row in tabledata.content" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell>{{::row.name}}</td> <td md-cell>{{::row.idcode}}</td> <td md-cell>{{::row.isDirective ? \'main.yes\' : \'main.no\' | translate}}</td> <td md-cell>{{::row.isCertificate ? \'main.yes\' : \'main.no\' | translate}}</td> <td md-cell>{{::row.isCertificateDefault ? \'main.yes\' : \'main.no\' | translate}}</td> <td md-cell> <md-button md-no-ink class="md-primary change-button" ng-if="isAuthorized(\'ROLE_OIGUS_M_TEEMAOIGUS_DOKALLKIRI\')" ng-href="#/directives/coordinators/{{::row.id}}/edit">{{\'main.button.change\' | translate}}</md-button> </td> </tr> </tbody> </table> </md-table-container> <md-table-pagination md-limit="criteria.size" md-limit-options="[10, 20, 50]" md-page="criteria.page" md-total="{{tabledata.totalElements}}" md-on-paginate="loadData" md-label="{page: \'{{\'main.page\' | translate}}:\', rowsPerPage: \'{{\'main.rowPerPage\' | translate}}:\', of: \'{{\'main.of\' | translate}}\'}" md-page-select></md-table-pagination> </div> <div layout="row"> <md-button class="md-raised" ng-if="isAuthorized(\'ROLE_OIGUS_M_TEEMAOIGUS_DOKALLKIRI\')" ng-href="#/directives/coordinators/new">{{\'main.button.create\' | translate}}</md-button> </div> </div>'),a.put("directive/directive.edit.html",'<div class="ois-form-layout-padding ois-form-layout" ng-cloak> <div flex> <form name="directiveForm" class="nomargin"> <div layout="column"> <md-input-container class="md-block"> <label class="textInput">{{\'directive.type\' | translate}}</label> <hois-classifier-select ng-model="record.type" name="type" ng-change="directiveTypeChanged()" ng-disabled="formState.state !== \'CHOOSETYPE\'" model-value-attr="code" main-classifier-code="KASKKIRI" filter-values="formState.excludedTypes" required autofocus></hois-classifier-select> </md-input-container> </div> <div flex ng-if="record.type === \'KASKKIRI_LOPET\' && formState.school.higher && formState.school.vocational"> <md-input-container class="md-block"> <md-radio-group layout-gt-sm="row" ng-model="record.isHigher" ng-change="directiveTypeChanged()" required ng-disabled="formState.state !== \'CHOOSETYPE\'"> <md-radio-button ng-value="false">{{\'directive.vocational\' | translate}}</md-radio-button> <md-radio-button ng-value="true">{{\'directive.higher\' | translate}}</md-radio-button> </md-radio-group> </md-input-container> </div> <div flex ng-if="record.type === \'KASKKIRI_STIPTOET\' || record.type === \'KASKKIRI_STIPTOETL\'"> <md-input-container class="md-block"> <label class="textInput">{{\'directive.scholarshipType\' | translate}}</label> <hois-classifier-select ng-model="record.scholarshipType" name="scholarshipType" ng-change="scholarshipTypeChanged()" ng-disabled="formState.state !== \'CHOOSETYPE\'" model-value-attr="code" main-classifier-code="STIPTOETUS" criteria="{higher: formState.school.higher ? true : undefined, vocational: formState.school.vocational ? true : undefined}" required></hois-classifier-select> </md-input-container> </div> <div flex ng-if="formState.state === \'CHOOSETYPE\' && formState.students && record.type !== \'KASKKIRI_IMMAT\' && record.type !== \'KASKKIRI_IMMATV\'"> <div>&nbsp;</div> <md-table-container> <table md-table md-row-select multiple ng-model="formState.selectedStudents"> <thead md-head> <tr md-row> <th md-column>{{\'directive.student.fullname\' | translate}}</th> <th md-column>{{\'directive.student.idcode\' | translate}}</th> <th md-column ng-show="record.type === \'KASKKIRI_LOPET\'">{{\'directive.student.curriculum\' | translate}}</th> <th md-column ng-show="record.type === \'KASKKIRI_LOPET\'">{{\'directive.student.studentGroup\' | translate}}</th> </tr> </thead> <tbody md-body> <tr md-row md-select="row" md-select-id="id" ng-repeat="row in formState.students" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell> <md-button md-no-ink class="md-primary change-button" ng-href="#/students/{{::row.id}}/main">{{::row.fullname}}</md-button> </td> <td md-cell>{{::row.idcode}}</td> <td md-cell ng-show="record.type === \'KASKKIRI_LOPET\'">{{currentLanguageNameField(row.curriculumVersion)}}</td> <td md-cell ng-show="record.type === \'KASKKIRI_LOPET\'">{{::row.studentGroup}}</td> </tr> </tbody> </table> </md-table-container> </div> <div layout="row" ng-if="formState.state === \'CHOOSETYPE\' && record.type === \'KASKKIRI_IMMATV\'"> <md-input-container flex="45" flex-sm="100" flex-xs="100"> <label class="textInput">{{\'directive.student.curriculumVersion\' | translate}}</label> <hois-select ng-model="formState.curriculumVersion" multiple values="formState.saisCurriculumVersions"></hois-select> </md-input-container> <md-input-container flex="50" flex-sm="100" flex-xs="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label class="textInput">{{\'directive.student.studyLevel\' | translate}}</label> <hois-select ng-model="formState.studyLevel" multiple type="saisCurriculumClassifiers" value-property="code"></hois-select> </md-input-container> </div> <div layout="row" ng-if="formState.state === \'CHOOSETYPE\'"> <md-button class="md-raised" ng-click="addDirective()" ng-if="formState.state === \'CHOOSETYPE\' && formState.students">{{\'directive.addToDirective\' | translate}}</md-button> <md-button ng-click="back(\'#/directives\')" class="md-raised">{{\'main.button.back\' | translate}}</md-button> </div> <div flex-xs="0" flex-gt-xs="0" flex-gt-sm="50"></div> <div flex ng-if="formState.state === \'EDIT\'"> <div class="form-readonly top-margin" ng-if="record.type === \'KASKKIRI_TYHIST\'"> <md-input-container class="md-block"> <label class="textInput">{{\'directive.canceledDirective\' | translate}}</label> <hois-value value="formState.canceledDirective.nameEt" href-value="\'#/directives/\' + formState.canceledDirective.id + \'/view\'"></hois-value> </md-input-container> </div> <md-input-container class="md-block"> <label class="textInput">{{\'directive.headline\' | translate}}</label> <input type="text" ng-model="record.headline" name="headline" required md-maxlength="500"> </md-input-container> <div class="form-readonly top-margin"> <md-input-container class="md-block"> <label class="textInput">{{\'directive.inserted\' | translate}}</label> <hois-value value="record.inserted | hoisDate"></hois-value> </md-input-container> </div> <div class="form-readonly top-margin"> <md-input-container class="md-block"> <label class="textInput">{{\'directive.insertedBy\' | translate}}</label> <hois-value value="record.insertedBy"></hois-value> </md-input-container> </div> <md-input-container class="md-block"> <label class="textInput">{{\'directive.addInfo\' | translate}}</label> <textarea ng-model="record.addInfo" md-maxlength="4000" max-rows="10"></textarea> </md-input-container> <md-input-container class="md-block"> <label class="textInput">{{\'directive.directiveCoordinator\' | translate}}&nbsp;*</label> <hois-select ng-model="record.directiveCoordinator" name="directiveCoordinator" type="directivecoordinator" criteria="{isDirective: true}"></hois-select> </md-input-container> <md-input-container class="md-block" ng-if="record.type === \'KASKKIRI_TYHIST\'"> <label class="textInput">{{\'directive.cancelType\' | translate}}</label> <hois-classifier-select ng-model="record.cancelType" ng-change="cancelTypeChanged()" filter-values="[formState.changedStudents.length > 0 ? \'KASKKIRI_TYHISTAMISE_VIIS_T\' : undefined]" ng-required="record.type === \'KASKKIRI_TYHIST\'" main-classifier-code="KASKKIRI_TYHISTAMISE_VIIS" model-value-attr="code"></hois-classifier-select> </md-input-container> <div>&nbsp;</div> <md-table-container> <fieldset> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'directive.studentList\' | translate}}</legend> <md-button class="md-raised" ng-click="addStudents()" ng-if="record.type !== \'KASKKIRI_TYHIST\' && record.type !== \'KASKKIRI_IMMATV\'">{{\'directive.addStudents\' | translate}}</md-button> <div ng-include="formState.templateUrl" flex></div> </fieldset> </md-table-container> <div layout="row"> <md-button class="md-raised md-primary" ng-click="update()">{{\'main.button.save\' | translate}}</md-button> <md-button class="md-raised" ng-if="record.id" ng-click="sendToConfirm(true)">{{\'directive.sendToConfirm\' | translate}}</md-button> <md-button class="md-raised" ng-if="record.id && isAuthorized(\'ROLE_OIGUS_K_TEEMAOIGUS_KASKKIRI_EKISETA\')" ng-click="sendToConfirm(false)">{{\'directive.sendToConfirmWithoutEkis\' | translate}}</md-button> <md-button class="md-raised" ng-if="record.id" ng-click="delete()">{{\'main.button.delete\' | translate}}</md-button> <md-button ng-click="back(\'#/directives\', directiveForm)" class="md-raised">{{\'main.button.back\' | translate}}</md-button> </div> </div> </form> </div> </div>'),
a.put("directive/directive.type.akad.edit.html",'<md-table-container> <table md-table class="secondary-table"> <thead md-head> <tr md-row> <th md-column>{{\'directive.student.fullname\' | translate}}</th> <th md-column>{{\'directive.student.idcode\' | translate}}</th> <th md-column class="required">{{\'directive.student.isPeriod\' | translate}}</th> <th md-column class="required">{{\'directive.student.akadStartDate\' | translate}}</th> <th md-column class="required">{{\'directive.student.akadEndDate\' | translate}}</th> <th md-column class="required">{{\'directive.student.reason\' | translate}}</th> <th md-column>{{\'directive.student.applicationAkadStartDate\' | translate}}</th> <th md-column>{{\'directive.student.applicationAkadEndDate\' | translate}}</th> <th></th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="row in record.students" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell>{{::row.fullname}}</td> <td md-cell>{{::row.idcode}}</td> <td md-cell> <md-radio-group name="isPeriod" ng-model="row.isPeriod" layout="row"> <md-radio-button ng-value="true" aria-label="period">{{ \'main.period\' | translate }}</md-radio-button> <md-radio-button ng-value="false" aria-label="date">{{ \'main.date\' | translate }}</md-radio-button> </md-radio-group> </td> <td md-cell> <hois-select ng-if="row.isPeriod" ng-model="row.studyPeriodStart" name="students[{{$index}}].studyPeriodStart" values="formState.studyPeriods" aria-label="{{\'directive.student.akadStartDate\' | translate}}"></hois-select> <md-datepicker ng-if="!row.isPeriod" ng-model="row.startDate" name="students[{{$index}}].startDate"></md-datepicker> <div ng-if="row.isPeriod" class="invalid" ng-messages="directiveForm[\'students[\'+$index+\'].studyPeriodStart\'].$error"> <p ng-message="required">{{\'main.required\' | translate}}</p> </div> <div ng-if="!row.isPeriod" class="invalid" ng-messages="directiveForm[\'students[\'+$index+\'].startDate\'].$error"> <p ng-message="required">{{\'main.required\' | translate}}</p> </div> </td> <td md-cell> <hois-select ng-if="row.isPeriod" ng-model="row.studyPeriodEnd" name="students[{{$index}}].studyPeriodEnd" values="formState.studyPeriods" aria-label="{{\'directive.student.akadEndDate\' | translate}}"></hois-select> <md-datepicker ng-if="!row.isPeriod" ng-model="row.endDate" name="students[{{$index}}].endDate"></md-datepicker> <div ng-if="row.isPeriod" class="invalid" ng-messages="directiveForm[\'students[\'+$index+\'].studyPeriodEnd\'].$error"> <p ng-message="required">{{\'main.required\' | translate}}</p> </div> <div ng-if="!row.isPeriod" class="invalid" ng-messages="directiveForm[\'students[\'+$index+\'].endDate\'].$error"> <p ng-message="required">{{\'main.required\' | translate}}</p> </div> </td> <td md-cell> <hois-classifier-select ng-model="row.reason" name="students[{{$index}}].reason" criteria="{vocational: row.oldCurriculumVersion.isVocational ? true : undefined, higher: !row.oldCurriculumVersion.isVocational ? true : undefined}" model-value-attr="code" main-classifier-code="AKADPUHKUS_POHJUS" aria-label="{{\'directive.student.reason\' | translate}}"></hois-classifier-select> <div class="invalid" ng-messages="directiveForm[\'students[\'+$index+\'].reason\'].$error"> <p ng-message="required">{{\'main.required\' | translate}}</p> </div> </td> <td md-cell> <div ng-if="row.applicationIsPeriod">{{currentLanguageNameField(row.applicationStudyPeriodStart)}}</div> <hois-value ng-if="!row.applicationIsPeriod" value="row.applicationStartDate | hoisDate"></hois-value> </td> <td md-cell> <div ng-if="row.applicationIsPeriod">{{currentLanguageNameField(row.applicationStudyPeriodEnd)}}</div> <hois-value ng-if="!row.applicationIsPeriod" value="row.applicationEndDate | hoisDate"></hois-value> </td> <td md-cell> <a ng-click="deleteStudent(row)" class="remove">&times;</a> </td> </tr> </tbody> </table> </md-table-container>'),a.put("directive/directive.type.akad.view.html",'<md-table-container> <table md-table md-row-select="formState.cancelSelect" multiple ng-model="formState.selectedStudents" class="secondary-table"> <thead md-head> <tr md-row> <th md-column>{{\'directive.student.fullname\' | translate}}</th> <th md-column>{{\'directive.student.idcode\' | translate}}</th> <th md-column>{{\'directive.student.isPeriod\' | translate}}</th> <th md-column>{{\'directive.student.akadStartDate\' | translate}}</th> <th md-column>{{\'directive.student.akadEndDate\' | translate}}</th> <th md-column>{{\'directive.student.reason\' | translate}}</th> <th md-column>{{\'directive.student.applicationAkadStartDate\' | translate}}</th> <th md-column>{{\'directive.student.applicationAkadEndDate\' | translate}}</th> </tr> </thead> <tbody md-body> <tr md-row ng-disabled="!row.selectable" md-select="row" md-select-id="student" md-auto-select ng-repeat="row in record.students | orderBy:\'+lastname\'" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell> <a class="md-primary" ng-href="#/students/{{::row.student}}/main">{{::row.fullname}}</a> </td> <td md-cell>{{::row.idcode}}</td> <td md-cell>{{row.isPeriod ? \'main.period\' : \'main.date\' | translate}}</td> <td md-cell> <div ng-if="row.isPeriod">{{currentLanguageNameField(row.newStudyPeriodStart)}}</div> <hois-value ng-if="!row.isPeriod" value="row.startDate | hoisDate"></hois-value> </td> <td md-cell> <div ng-if="row.isPeriod">{{currentLanguageNameField(row.newStudyPeriodEnd)}}</div> <hois-value ng-if="!row.isPeriod" value="row.endDate | hoisDate"></hois-value> </td> <td md-cell> <hois-classifier-value ng-model="row.reason" main-classifier-code="AKADPUHKUS_POHJUS"></hois-classifier-value> </td> <td md-cell> <div ng-if="row.applicationIsPeriod">{{currentLanguageNameField(row.applicationStudyPeriodStart)}}</div> <hois-value ng-if="!row.applicationIsPeriod" value="row.applicationStartDate | hoisDate"></hois-value> </td> <td md-cell> <div ng-if="row.applicationIsPeriod">{{currentLanguageNameField(row.applicationStudyPeriodEnd)}}</div> <hois-value ng-if="!row.applicationIsPeriod" value="row.applicationEndDate | hoisDate"></hois-value> </td> </tr> </tbody> </table> </md-table-container>'),a.put("directive/directive.type.akadk.edit.html",'<md-table-container> <table md-table class="secondary-table"> <thead md-head> <tr md-row> <th md-column>{{\'directive.student.fullname\' | translate}}</th> <th md-column>{{\'directive.student.idcode\' | translate}}</th> <th md-column class="required">{{\'directive.student.akadCancelDate\' | translate}}</th> <th></th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="row in record.students" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell>{{::row.fullname}}</td> <td md-cell>{{::row.idcode}}</td> <td md-cell> <md-datepicker ng-model="row.startDate" name="students[{{$index}}].startDate"></md-datepicker> <div class="invalid" ng-show="directiveForm[\'students[\'+$index+\'].startDate\'].$error.required"> {{\'main.required\' | translate}} </div> <div class="invalid" ng-show="directiveForm[\'students[\'+$index+\'].startDate\'].$error.serverside"> <span ng-repeat="err in directiveForm[\'students[\'+$index+\'].startDate\'].$serverError">{{err.code | translate}}</span> <br ng-if="!$last"> </div> </td> <td md-cell> <a ng-click="deleteStudent(row)" md-no-ink class="remove">&times;</a> </td> </tr> </tbody> </table> </md-table-container>'),a.put("directive/directive.type.akadk.view.html",'<md-table-container> <table md-table md-row-select="formState.cancelSelect" multiple ng-model="formState.selectedStudents" class="secondary-table"> <thead md-head> <tr md-row> <th md-column>{{\'directive.student.fullname\' | translate}}</th> <th md-column>{{\'directive.student.idcode\' | translate}}</th> <th md-column>{{\'directive.student.akadCancelDate\' | translate}}</th> </tr> </thead> <tbody md-body> <tr md-row ng-disabled="!row.selectable" md-select="row" md-select-id="student" md-auto-select ng-repeat="row in record.students | orderBy:\'+lastname\'" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell> <a class="md-primary" ng-href="#/students/{{::row.student}}/main">{{::row.fullname}}</a> </td> <td md-cell>{{::row.idcode}}</td> <td md-cell> <hois-value value="row.startDate | hoisDate"></hois-value> </td> </tr> </tbody> </table> </md-table-container>'),a.put("directive/directive.type.eksmat.edit.html",'<md-table-container> <table md-table class="secondary-table"> <thead md-head> <tr md-row> <th md-column>{{\'directive.student.fullname\' | translate}}</th> <th md-column>{{\'directive.student.idcode\' | translate}}</th> <th md-column class="required">{{\'directive.student.reason\' | translate}}</th> <th></th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="row in record.students" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell>{{::row.fullname}}</td> <td md-cell>{{::row.idcode}}</td> <td md-cell> <hois-classifier-select ng-model="row.reason" name="students[{{$index}}].reason" model-value-attr="code" main-classifier-code="EKSMAT_POHJUS" aria-label="{{\'directive.student.reason\' | translate}}"></hois-classifier-select> <div class="invalid" ng-show="directiveForm[\'students[\'+$index+\'].reason\'].$error.required"> {{\'main.required\' | translate}} </div> </td> <td md-cell> <a ng-click="deleteStudent(row)" md-no-ink class="remove">&times;</a> </td> </tr> </tbody> </table> </md-table-container>'),a.put("directive/directive.type.eksmat.view.html",'<md-table-container> <table md-table md-row-select="formState.cancelSelect" multiple ng-model="formState.selectedStudents" class="secondary-table"> <thead md-head> <tr md-row> <th md-column>{{\'directive.student.fullname\' | translate}}</th> <th md-column>{{\'directive.student.idcode\' | translate}}</th> <th md-column>{{\'directive.student.reason\' | translate}}</th> </tr> </thead> <tbody md-body> <tr md-row ng-disabled="!row.selectable" md-select="row" md-select-id="student" md-auto-select ng-repeat="row in record.students | orderBy:\'+lastname\'" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell> <a class="md-primary" ng-href="#/students/{{::row.student}}/main">{{::row.fullname}}</a> </td> <td md-cell>{{::row.idcode}}</td> <td md-cell> <hois-classifier-value ng-model="row.reason" main-classifier-code="EKSMAT_POHJUS"></hois-classifier-value> </td> </tr> </tbody> </table> </md-table-container>'),a.put("directive/directive.type.ennist.edit.html",'<md-table-container> <table md-table class="secondary-table"> <thead md-head> <tr md-row> <th md-column>{{\'directive.student.fullname\' | translate}}</th> <th md-column>{{\'directive.student.idcode\' | translate}}</th> <th md-column>{{\'directive.student.curriculumVersion\' | translate}}</th> <th md-column class="required">{{\'directive.student.studentGroup\' | translate}}</th> <th md-column ng-if="formState.school.higher">{{\'directive.student.studyLoad\' | translate}}</th> <th md-column>{{\'directive.student.studyForm\' | translate}}</th> <th md-column class="required">{{\'directive.student.nominalStudyEnd\' | translate}}</th> <th md-column>{{\'directive.student.fin\' | translate}}</th> <th md-column>{{\'directive.student.finSpecific\' | translate}}</th> <th md-column>{{\'directive.student.language\' | translate}}</th> <th></th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="row in record.students" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell>{{::row.fullname}}</td> <td md-cell>{{::row.idcode}}</td> <td md-cell>{{currentLanguageNameField(row.oldCurriculumVersion)}}</td> <td md-cell> <hois-select ng-model="row.studentGroup" name="students[{{$index}}].studentGroup" values="formState.studentGroupMap[row.oldCurriculumVersion.id]" aria-label="{{\'directive.student.studentGroup\' | translate}}"></hois-select> <div class="invalid" ng-show="directiveForm[\'students[\'+$index+\'].studentGroup\'].$error.required"> {{\'main.required\' | translate}} </div> </td> <td md-cell ng-if="formState.school.higher"> <hois-classifier-value ng-model="row.oldStudyLoad" criteria="{higher: true}" main-classifier-code="OPPEKOORMUS"></hois-classifier-value> </td> <td md-cell> <hois-classifier-value ng-model="row.oldStudyForm" main-classifier-code="OPPEVORM"></hois-classifier-value> </td> <td md-cell> <md-datepicker ng-model="row.nominalStudyEnd" name="students[{{$index}}].nominalStudyEnd"></md-datepicker> <div class="invalid" ng-show="directiveForm[\'students[\'+$index+\'].nominalStudyEnd\'].$error.required"> {{\'main.required\' | translate}} </div> </td> <td md-cell> <hois-classifier-value ng-model="row.oldFin" main-classifier-code="FINALLIKAS"></hois-classifier-value> </td> <td md-cell> <hois-classifier-value ng-model="row.oldFinSpecific" main-classifier-code="FINTAPSUSTUS"></hois-classifier-value> </td> <td md-cell> <hois-classifier-value ng-model="row.oldLanguage" main-classifier-code="OPPEKEEL"></hois-classifier-value> </td> <td md-cell> <a ng-click="deleteStudent(row)" md-no-ink class="remove">&times;</a> </td> </tr> </tbody> </table> </md-table-container>'),a.put("directive/directive.type.ennist.view.html",'<md-table-container> <table md-table md-row-select="formState.cancelSelect" multiple ng-model="formState.selectedStudents" class="secondary-table"> <thead md-head> <tr md-row> <th md-column>{{\'directive.student.fullname\' | translate}}</th> <th md-column>{{\'directive.student.idcode\' | translate}}</th> <th md-column>{{\'directive.student.curriculumVersion\' | translate}}</th> <th md-column>{{\'directive.student.studentGroup\' | translate}}</th> <th md-column ng-if="formState.school.higher">{{\'directive.student.studyLoad\' | translate}}</th> <th md-column>{{\'directive.student.studyForm\' | translate}}</th> <th md-column>{{\'directive.student.nominalStudyEnd\' | translate}}</th> <th md-column>{{\'directive.student.fin\' | translate}}</th> <th md-column>{{\'directive.student.finSpecific\' | translate}}</th> <th md-column>{{\'directive.student.language\' | translate}}</th> </tr> </thead> <tbody md-body> <tr md-row ng-disabled="!row.selectable" md-select="row" md-select-id="student" md-auto-select ng-repeat="row in record.students | orderBy:\'+lastname\'" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell> <a class="md-primary" ng-href="#/students/{{::row.student}}/main">{{::row.fullname}}</a> </td> <td md-cell>{{::row.idcode}}</td> <td md-cell>{{currentLanguageNameField(row.newCurriculumVersion)}}</td> <td md-cell>{{::row.newStudentGroup}}</td> <td md-cell ng-if="formState.school.higher"> <hois-classifier-value ng-model="row.studyLoad" main-classifier-code="OPPEKOORMUS"></hois-classifier-value> </td> <td md-cell> <hois-classifier-value ng-model="row.studyForm" main-classifier-code="OPPEVORM"></hois-classifier-value> </td> <td md-cell> <hois-value value="row.nominalStudyEnd | hoisDate"></hois-value> </td> <td md-cell> <hois-classifier-value ng-model="row.fin" main-classifier-code="FINALLIKAS"></hois-classifier-value> </td> <td md-cell> <hois-classifier-value ng-model="row.finSpecific" main-classifier-code="FINTAPSUSTUS"></hois-classifier-value> </td> <td md-cell> <hois-classifier-value ng-model="row.language" main-classifier-code="OPPEKEEL"></hois-classifier-value> </td> </tr> </tbody> </table> </md-table-container>'),a.put("directive/directive.type.finm.edit.html",'<md-table-container> <table md-table class="secondary-table"> <thead md-head> <tr md-row> <th md-column>{{\'directive.student.fullname\' | translate}}</th> <th md-column>{{\'directive.student.idcode\' | translate}}</th> <th md-column class="required">{{\'directive.student.fin\' | translate}}</th> <th md-column class="required">{{\'directive.student.finSpecific\' | translate}}</th> <th></th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="row in record.students" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell>{{::row.fullname}}</td> <td md-cell>{{::row.idcode}}</td> <td md-cell> <hois-classifier-value ng-model="row.fin" name="students[{{$index}}].fin" main-classifier-code="FINALLIKAS"></hois-classifier-value> <div class="invalid" ng-show="directiveForm[\'students[\'+$index+\'].fin\'].$error.required"> {{\'main.required\' | translate}} </div> </td> <td md-cell> <hois-classifier-select ng-model="row.finSpecific" name="students[{{$index}}].finSpecific" model-value-attr="code" filter-values="[row.oldFinSpecific]" main-classifier-code="FINTAPSUSTUS" aria-label="{{\'directive.student.finSpecific\' | translate}}"></hois-classifier-select> <div class="invalid" ng-show="directiveForm[\'students[\'+$index+\'].finSpecific\'].$error.required"> {{\'main.required\' | translate}} </div> </td> <td md-cell> <a ng-click="deleteStudent(row)" md-no-ink class="remove">&times;</a> </td> </tr> </tbody> </table> </md-table-container>'),a.put("directive/directive.type.finm.view.html",'<md-table-container> <table md-table md-row-select="formState.cancelSelect" multiple ng-model="formState.selectedStudents" class="secondary-table"> <thead md-head> <tr md-row> <th md-column>{{\'directive.student.fullname\' | translate}}</th> <th md-column>{{\'directive.student.idcode\' | translate}}</th> <th md-column>{{\'directive.student.fin\' | translate}}</th> <th md-column>{{\'directive.student.finSpecific\' | translate}}</th> </tr> </thead> <tbody md-body> <tr md-row ng-disabled="!row.selectable" md-select="row" md-select-id="student" md-auto-select ng-repeat="row in record.students | orderBy:\'+lastname\'" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell> <a class="md-primary" ng-href="#/students/{{::row.student}}/main">{{::row.fullname}}</a> </td> <td md-cell>{{::row.idcode}}</td> <td md-cell> <hois-classifier-value ng-model="row.fin" main-classifier-code="FINALLIKAS"></hois-classifier-value> </td> <td md-cell> <hois-classifier-value ng-model="row.finSpecific" main-classifier-code="FINTAPSUSTUS"></hois-classifier-value> </td> </tr> </tbody> </table> </md-table-container>'),a.put("directive/directive.type.immat.edit.html",'<md-table-container> <table md-table class="secondary-table"> <thead md-head> <tr md-row> <th md-column>{{\'directive.student.foreign\' | translate}}</th> <th md-column>{{\'directive.student.idcode\' | translate}}</th> <th md-column class="required">{{\'directive.student.firstname\' | translate}}</th> <th md-column class="required">{{\'directive.student.lastname\' | translate}}</th> <th md-column class="required">{{\'directive.student.birthdate\' | translate}}</th> <th md-column class="required">{{\'directive.student.sex\' | translate}}</th> <th md-column class="required">{{\'directive.student.citizenship\' | translate}}</th> <th md-column class="required">{{\'directive.student.curriculumVersion\' | translate}}</th> <th md-column ng-if="formState.school.higher" ng-class="{required: !formState.school.vocational}">{{\'directive.student.studyLoad\' | translate}}</th> <th md-column class="required">{{\'directive.student.studyForm\' | translate}}</th> <th md-column class="required">{{\'directive.student.nominalStudyEnd\' | translate}}</th> <th md-column class="required">{{\'directive.student.fin\' | translate}}</th> <th md-column class="required">{{\'directive.student.finSpecific\' | translate}}</th> <th md-column class="required">{{\'directive.student.language\' | translate}}</th> <th md-column class="required">{{\'directive.student.studentGroup\' | translate}}</th> <th md-column class="required">{{\'directive.student.previousStudyLevel\' | translate}}</th> <th></th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="row in record.students" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell> <md-checkbox ng-model="row._foreign" ng-change="foreignChanged(row)" aria-label="{{\'directive.student.foreign\' | translate}}"></md-checkbox> </td> <td md-cell> <input type="text" ng-if="!row._foreign" ng-blur="lookupStudent(row)" ng-model="row.idcode" name="students[{{$index}}].idcode"> <input type="text" ng-if="row._foreign" ng-blur="lookupStudent(row)" ng-model="row.foreignIdcode" name="students[{{$index}}].idcode"> <div class="invalid" ng-messages="directiveForm[\'students[\'+$index+\'].idcode\'].$error"> <p ng-message="required">{{\'main.required\' | translate}}</p> <p ng-message="serverside"> </p><p ng-repeat="err in directiveForm[\'students[\'+$index+\'].idcode\'].$serverError">{{\'main.messages.error.\' + err.code | translate}}</p>  </div> </td> <td md-cell> <input type="text" ng-readonly="row._found" ng-model="row.firstname" name="students[{{$index}}].firstname"> <div class="invalid" ng-messages="directiveForm[\'students[\'+$index+\'].firstname\'].$error"> <p ng-message="required">{{\'main.required\' | translate}}</p> <p ng-message="serverside"> </p><p ng-repeat="err in directiveForm[\'students[\'+$index+\'].firstname\'].$serverError">{{\'main.messages.error.\' + err.code | translate}}</p>  </div> </td> <td md-cell> <input type="text" ng-readonly="row._found" ng-model="row.lastname" name="students[{{$index}}].lastname"> <div class="invalid" ng-messages="directiveForm[\'students[\'+$index+\'].lastname\'].$error"> <p ng-message="required">{{\'main.required\' | translate}}</p> <p ng-message="serverside"> </p><p ng-repeat="err in directiveForm[\'students[\'+$index+\'].lastname\'].$serverError">{{\'main.messages.error.\' + err.code | translate}}</p>  </div> </td> <td md-cell> <md-datepicker ng-if="!row._found && !row.idcode" ng-model="row.birthdate" name="students[{{$index}}].birthdate"></md-datepicker> <hois-value ng-if="row._found || row.idcode" value="row.birthdate | hoisDate" name="students[{{$index}}].birthdate"></hois-value> <div class="invalid" ng-messages="directiveForm[\'students[\'+$index+\'].birthdate\'].$error"> <p ng-message="required">{{\'main.required\' | translate}}</p> </div> </td> <td md-cell> <hois-classifier-select ng-if="!row._found && !row.idcode" ng-model="row.sex" name="students[{{$index}}].sex" model-value-attr="code" main-classifier-code="SUGU" aria-label="{{\'directive.student.sex\' | translate}}"></hois-classifier-select> <hois-classifier-value ng-if="row._found || row.idcode" ng-model="row.sex" main-classifier-code="SUGU"></hois-classifier-value> <div class="invalid" ng-messages="directiveForm[\'students[\'+$index+\'].sex\'].$error"> <p ng-message="required">{{\'main.required\' | translate}}</p> </div> </td> <td md-cell> <hois-classifier-select ng-model="row.citizenship" name="students[{{$index}}].citizenship" model-value-attr="code" main-classifier-code="RIIK" aria-label="{{\'directive.student.citizenship\' | translate}}"></hois-classifier-select> <div class="invalid" ng-messages="directiveForm[\'students[\'+$index+\'].citizenship\'].$error"> <p ng-message="required">{{\'main.required\' | translate}}</p> </div> </td> <td md-cell> <hois-select ng-model="row.curriculumVersion" name="students[{{$index}}].curriculumVersion" values="formState.curriculumVersions" ng-change="curriculumVersionChanged(row)" aria-label="{{\'directive.student.curriculumVersion\' | translate}}"></hois-select> <div class="invalid" ng-messages="directiveForm[\'students[\'+$index+\'].curriculumVersion\'].$error"> <p ng-message="required">{{\'main.required\' | translate}}</p> </div> </td> <td md-cell ng-if="formState.school.higher"> <hois-classifier-select ng-model="row.studyLoad" name="students[{{$index}}].studyLoad" criteria="{higher: true}" model-value-attr="code" main-classifier-code="OPPEKOORMUS" aria-label="{{\'directive.student.studyLoad\' | translate}}"></hois-classifier-select> <div class="invalid" ng-messages="directiveForm[\'students[\'+$index+\'].studyLoad\'].$error"> <p ng-message="required">{{\'main.required\' | translate}}</p> </div> </td> <td md-cell> <hois-classifier-select ng-model="row.studyForm" name="students[{{$index}}].studyForm" show-only-values="visibleStudyForms(row.curriculumVersion)" model-value-attr="code" main-classifier-code="OPPEVORM" aria-label="{{\'directive.student.studyForm\' | translate}}"></hois-classifier-select> <div class="invalid" ng-messages="directiveForm[\'students[\'+$index+\'].studyForm\'].$error"> <p ng-message="required">{{\'main.required\' | translate}}</p> </div> </td> <td md-cell> <md-datepicker ng-model="row.nominalStudyEnd" name="students[{{$index}}].nominalStudyEnd"></md-datepicker> <div class="invalid" ng-messages="directiveForm[\'students[\'+$index+\'].nominalStudyEnd\'].$error"> <p ng-message="required">{{\'main.required\' | translate}}</p> </div> </td> <td md-cell> <hois-classifier-select ng-model="row.fin" name="students[{{$index}}].fin" model-value-attr="code" main-classifier-code="FINALLIKAS" aria-label="{{\'directive.student.fin\' | translate}}"></hois-classifier-select> <div class="invalid" ng-messages="directiveForm[\'students[\'+$index+\'].fin\'].$error"> <p ng-message="required">{{\'main.required\' | translate}}</p> </div> </td> <td md-cell> <hois-classifier-select ng-model="row.finSpecific" name="students[{{$index}}].finSpecific" model-value-attr="code" main-classifier-code="FINTAPSUSTUS" aria-label="{{\'directive.student.finSpecific\' | translate}}"></hois-classifier-select> <div class="invalid" ng-messages="directiveForm[\'students[\'+$index+\'].finSpecific\'].$error"> <p ng-message="required">{{\'main.required\' | translate}}</p> </div> </td> <td md-cell> <hois-classifier-select ng-model="row.language" name="students[{{$index}}].language" show-only-values="formState.languageMap[row.curriculumVersion]" model-value-attr="code" main-classifier-code="OPPEKEEL" aria-label="{{\'directive.student.language\' | translate}}"></hois-classifier-select> <div class="invalid" ng-messages="directiveForm[\'students[\'+$index+\'].language\'].$error"> <p ng-message="required">{{\'main.required\' | translate}}</p> </div> </td> <td md-cell> <hois-select ng-model="row.studentGroup" name="students[{{$index}}].studentGroup" values="formState.studentGroupMap[row.curriculumVersion]" aria-label="{{\'directive.student.studentGroup\' | translate}}"></hois-select> <div class="invalid" ng-messages="directiveForm[\'students[\'+$index+\'].studentGroup\'].$error"> <p ng-message="required">{{\'main.required\' | translate}}</p> </div> </td> <td md-cell> <hois-classifier-select ng-model="row.previousStudyLevel" name="students[{{$index}}].previousStudyLevel" model-value-attr="code" main-classifier-code="OPPEASTE" aria-label="{{\'directive.student.previousStudyLevel\' | translate}}"></hois-classifier-select> <div class="invalid" ng-messages="directiveForm[\'students[\'+$index+\'].previousStudyLevel\'].$error"> <p ng-message="required">{{\'main.required\' | translate}}</p> </div> </td> <td md-cell> <a ng-click="deleteStudent(row)" md-no-ink class="remove">&times;</a> </td> </tr> </tbody> </table> </md-table-container>'),a.put("directive/directive.type.immat.view.html",'<md-table-container> <table md-table md-row-select="formState.cancelSelect" multiple ng-model="formState.selectedStudents" class="secondary-table"> <thead md-head> <tr md-row> <th md-column>{{\'directive.student.foreign\' | translate}}</th> <th md-column>{{\'directive.student.fullname\' | translate}}</th> <th md-column>{{\'directive.student.idcode\' | translate}}</th> <th md-column>{{\'directive.student.birthdate\' | translate}}</th> <th md-column>{{\'directive.student.sex\' | translate}}</th> <th md-column>{{\'directive.student.citizenship\' | translate}}</th> <th md-column>{{\'directive.student.curriculumVersion\' | translate}}</th> <th md-column ng-if="formState.school.higher">{{\'directive.student.studyLoad\' | translate}}</th> <th md-column>{{\'directive.student.studyForm\' | translate}}</th> <th md-column>{{\'directive.student.nominalStudyEnd\' | translate}}</th> <th md-column>{{\'directive.student.fin\' | translate}}</th> <th md-column>{{\'directive.student.finSpecific\' | translate}}</th> <th md-column>{{\'directive.student.language\' | translate}}</th> <th md-column>{{\'directive.student.studentGroup\' | translate}}</th> <th md-column>{{\'directive.student.previousStudyLevel\' | translate}}</th> </tr> </thead> <tbody md-body> <tr md-row ng-disabled="!row.selectable" md-select="row" md-select-id="student" md-auto-select ng-repeat="row in record.students | orderBy:\'+lastname\'" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell> <md-checkbox ng-model="row._foreign" aria-label="{{\'directive.student.foreign\' | translate}}" disabled></md-checkbox> </td> <td md-cell ng-if="row.student"> <a class="md-primary" ng-href="#/students/{{::row.student}}/main">{{::row.fullname}}</a> </td> <td ng-if="!row.student" md-cell>{{::row.fullname}}</td> <td md-cell>{{::(row.idcode || row.foreignIdcode)}}</td> <td md-cell> <hois-value value="row.birthdate | hoisDate"></hois-value> </td> <td md-cell> <hois-classifier-value ng-model="row.sex" main-classifier-code="SUGU"></hois-classifier-value> </td> <td md-cell> <hois-classifier-value ng-model="row.citizenship" main-classifier-code="RIIK"></hois-classifier-value> </td> <td md-cell>{{currentLanguageNameField(row.newCurriculumVersion)}}</td> <td md-cell ng-if="formState.school.higher"> <hois-classifier-value ng-model="row.studyLoad" main-classifier-code="OPPEKOORMUS"></hois-classifier-value> </td> <td md-cell> <hois-classifier-value ng-model="row.studyForm" main-classifier-code="OPPEVORM"></hois-classifier-value> </td> <td md-cell> <hois-value value="row.nominalStudyEnd | hoisDate"></hois-value> </td> <td md-cell> <hois-classifier-value ng-model="row.fin" main-classifier-code="FINALLIKAS"></hois-classifier-value> </td> <td md-cell> <hois-classifier-value ng-model="row.finSpecific" main-classifier-code="FINTAPSUSTUS"></hois-classifier-value> </td> <td md-cell> <hois-classifier-value ng-model="row.language" main-classifier-code="OPPEKEEL"></hois-classifier-value> </td> <td md-cell>{{::row.newStudentGroup}}</td> <td md-cell> <hois-classifier-value ng-model="row.previousStudyLevel" main-classifier-code="OPPEASTE"></hois-classifier-value> </td> </tr> </tbody> </table> </md-table-container>'),a.put("directive/directive.type.immatv.edit.html",'<md-table-container> <table md-table class="secondary-table"> <thead md-head> <tr md-row> <th md-column>{{\'directive.student.idcode\' | translate}}</th> <th md-column>{{\'directive.student.firstname\' | translate}}</th> <th md-column>{{\'directive.student.lastname\' | translate}}</th> <th md-column>{{\'directive.student.curriculumVersion\' | translate}}</th> <th md-column ng-if="formState.school.higher">{{\'directive.student.studyLoad\' | translate}}</th> <th md-column>{{\'directive.student.studyForm\' | translate}}</th> <th md-column>{{\'directive.student.nominalStudyEnd\' | translate}}</th> <th md-column>{{\'directive.student.language\' | translate}}</th> <th md-column>{{\'directive.student.fin\' | translate}}</th> <th md-column class="required">{{\'directive.student.finSpecific\' | translate}}</th> <th md-column class="required">{{\'directive.student.studentGroup\' | translate}}</th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="row in record.students" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell>{{::(row.idcode || row.foreignIdcode)}}</td> <td md-cell>{{::row.firstname}}</td> <td md-cell>{{::row.lastname}}</td> <td md-cell>{{currentLanguageNameField(formState.curriculumVersionMap[row.curriculumVersion])}}</td> <td md-cell ng-if="formState.school.higher"> <hois-classifier-value ng-model="row.studyLoad" main-classifier-code="OPPEKOORMUS"></hois-classifier-value> </td> <td md-cell> <hois-classifier-value ng-model="row.studyForm" main-classifier-code="OPPEVORM"></hois-classifier-value> </td> <td md-cell> <hois-value value="row.nominalStudyEnd | hoisDate"></hois-value> </td> <td md-cell> <hois-classifier-value ng-model="row.language" main-classifier-code="OPPEKEEL"></hois-classifier-value> </td> <td md-cell> <hois-classifier-value ng-model="row.fin" main-classifier-code="FINALLIKAS"></hois-classifier-value> </td> <td md-cell> <hois-classifier-select ng-model="row.finSpecific" name="students[{{$index}}].finSpecific" model-value-attr="code" main-classifier-code="FINTAPSUSTUS" aria-label="{{\'directive.student.finSpecific\' | translate}}"></hois-classifier-select> <div class="invalid" ng-messages="directiveForm[\'students[\'+$index+\'].finSpecific\'].$error"> <p ng-message="required">{{\'main.required\' | translate}}</p> </div> </td> <td md-cell> <hois-select ng-model="row.studentGroup" name="students[{{$index}}].studentGroup" values="formState.studentGroupMap[row.curriculumVersion]" aria-label="{{\'directive.student.studentGroup\' | translate}}"></hois-select> <div class="invalid" ng-messages="directiveForm[\'students[\'+$index+\'].studentGroup\'].$error"> <p ng-message="required">{{\'main.required\' | translate}}</p> </div> </td> </tr> </tbody> </table> </md-table-container>'),
a.put("directive/directive.type.immatv.view.html",'<md-table-container> <table md-table md-row-select="formState.cancelSelect" multiple ng-model="formState.selectedStudents" class="secondary-table"> <thead md-head> <tr md-row> <th md-column>{{\'directive.student.fullname\' | translate}}</th> <th md-column>{{\'directive.student.idcode\' | translate}}</th> <th md-column>{{\'directive.student.curriculumVersion\' | translate}}</th> <th md-column ng-if="formState.school.higher">{{\'directive.student.studyLoad\' | translate}}</th> <th md-column>{{\'directive.student.studyForm\' | translate}}</th> <th md-column>{{\'directive.student.nominalStudyEnd\' | translate}}</th> <th md-column>{{\'directive.student.language\' | translate}}</th> <th md-column>{{\'directive.student.fin\' | translate}}</th> <th md-column>{{\'directive.student.finSpecific\' | translate}}</th> <th md-column>{{\'directive.student.studentGroup\' | translate}}</th> </tr> </thead> <tbody md-body> <tr md-row ng-disabled="!row.selectable" md-select="row" md-select-id="student" md-auto-select ng-repeat="row in record.students | orderBy:\'+lastname\'" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell ng-if="row.student"> <a class="md-primary" ng-href="#/students/{{::row.student}}/main">{{::row.fullname}}</a> </td> <td ng-if="!row.student" md-cell>{{::row.fullname}}</td> <td md-cell>{{::(row.idcode || row.foreignIdcode)}}</td> <td md-cell>{{currentLanguageNameField(row.newCurriculumVersion)}}</td> <td md-cell ng-if="formState.school.higher"> <hois-classifier-value ng-model="row.studyLoad" main-classifier-code="OPPEKOORMUS"></hois-classifier-value> </td> <td md-cell> <hois-classifier-value ng-model="row.studyForm" main-classifier-code="OPPEVORM"></hois-classifier-value> </td> <td md-cell> <hois-value value="row.nominalStudyEnd | hoisDate"></hois-value> </td> <td md-cell> <hois-classifier-value ng-model="row.language" main-classifier-code="OPPEKEEL"></hois-classifier-value> </td> <td md-cell> <hois-classifier-value ng-model="row.fin" main-classifier-code="FINALLIKAS"></hois-classifier-value> </td> <td md-cell> <hois-classifier-value ng-model="row.finSpecific" main-classifier-code="FINTAPSUSTUS"></hois-classifier-value> </td> <td md-cell>{{::row.newStudentGroup}}</td> </tr> </tbody> </table> </md-table-container>'),a.put("directive/directive.type.lopet.edit.html","<md-table-container> <table md-table class=\"secondary-table\"> <thead md-head> <tr md-row> <th md-column>{{'directive.student.fullname' | translate}}</th> <th md-column>{{'directive.student.idcode' | translate}}</th> <th md-column>{{'directive.student.curriculumVersion' | translate}}</th> <th md-column>{{record.isHigher ? 'directive.student.isCumLaude' : 'directive.student.isCumLaudeVoc' | translate}}</th> <th md-column ng-if=\"record.isHigher\">{{'directive.student.curriculumGrade' | translate}}</th> <th md-column ng-if=\"!record.isHigher\">{{'directive.student.occupations' | translate}}</th> <th></th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat=\"row in record.students\" ng-class-odd=\"'odd'\" ng-class-even=\"'even'\"> <td md-cell>{{::row.fullname}}</td> <td md-cell>{{::row.idcode}}</td> <td md-cell>{{currentLanguageNameField(row.oldCurriculumVersion)}}</td> <td md-cell>{{row.isCumLaude ? 'main.yes' : 'main.no' | translate}}</td> <td md-cell ng-if=\"record.isHigher\">{{currentLanguageNameField(row.curriculumGrade)}}</td> <td md-cell ng-if=\"!record.isHigher\"> <div ng-repeat=\"occupation in row.occupations | orderBy: 'nameEt'\"> {{currentLanguageNameField(occupation)}} </div> </td> <td md-cell> <a ng-click=\"deleteStudent(row)\" md-no-ink class=\"remove\">&times;</a> </td> </tr> </tbody> </table> </md-table-container>"),a.put("directive/directive.type.lopet.view.html",'<md-table-container> <table md-table md-row-select="formState.cancelSelect" multiple ng-model="formState.selectedStudents" class="secondary-table"> <thead md-head> <tr md-row> <th md-column>{{\'directive.student.fullname\' | translate}}</th> <th md-column>{{\'directive.student.idcode\' | translate}}</th> <th md-column>{{\'directive.student.curriculumVersion\' | translate}}</th> <th md-column>{{record.isHigher ? \'directive.student.isCumLaude\' : \'directive.student.isCumLaudeVoc\' | translate}}</th> <th md-column ng-if="record.isHigher">{{\'directive.student.curriculumGrade\' | translate}}</th> <th md-column ng-if="!record.isHigher">{{\'directive.student.occupations\' | translate}}</th> </tr> </thead> <tbody md-body> <tr md-row ng-disabled="!row.selectable" md-select="row" md-select-id="student" md-auto-select ng-repeat="row in record.students | orderBy:\'+lastname\'" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell> <a class="md-primary" ng-href="#/students/{{::row.student}}/main">{{::row.fullname}}</a> </td> <td md-cell>{{::row.idcode}}</td> <td md-cell>{{currentLanguageNameField(row.newCurriculumVersion)}}</td> <td md-cell>{{row.isCumLaude ? \'main.yes\' : \'main.no\' | translate}}</td> <td md-cell ng-if="record.isHigher">{{currentLanguageNameField(row.curriculumGrade)}}</td> <td md-cell ng-if="!record.isHigher"> <div ng-repeat="occupation in row.occupations | orderBy: \'nameEt\'"> {{currentLanguageNameField(occupation)}} </div> </td> </tr> </tbody> </table> </md-table-container>'),a.put("directive/directive.type.okava.edit.html",'<md-table-container> <table md-table class="secondary-table"> <thead md-head> <tr md-row> <th md-column>{{\'directive.student.fullname\' | translate}}</th> <th md-column>{{\'directive.student.idcode\' | translate}}</th> <th md-column>{{\'directive.student.oldCurriculumVersion\' | translate}}</th> <th md-column>{{\'directive.student.oldStudyForm\' | translate}}</th> <th md-column class="required">{{\'directive.student.newCurriculumVersion\' | translate}}</th> <th md-column class="required">{{\'directive.student.newStudyForm\' | translate}}</th> <th md-column class="required">{{\'directive.student.newStudentGroup\' | translate}}</th> <th></th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="row in record.students" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell>{{::row.fullname}}</td> <td md-cell>{{::row.idcode}}</td> <td md-cell>{{currentLanguageNameField(row.oldCurriculumVersion)}}</td> <td md-cell> <hois-classifier-value ng-model="row.oldStudyForm" main-classifier-code="OPPEVORM"></hois-classifier-value> </td> <td md-cell> <hois-select ng-model="row.curriculumVersion" name="students[{{$index}}].curriculumVersion" values="formState.curriculumVersions" ng-change="curriculumVersionChanged(row)" filter-values="[row.oldCurriculumVersion]" aria-label="{{\'directive.student.newCurriculumVersion\' | translate}}"></hois-select> <div class="invalid" ng-show="directiveForm[\'students[\'+$index+\'].curriculumVersion\'].$error.required"> {{\'main.required\' | translate}} </div> </td> <td md-cell> <hois-classifier-select ng-model="row.studyForm" name="students[{{$index}}].studyForm" show-only-values="visibleStudyForms(row.curriculumVersion)" model-value-attr="code" main-classifier-code="OPPEVORM" aria-label="{{\'directive.student.newStudyForm\' | translate}}"></hois-classifier-select> <div class="invalid" ng-show="directiveForm[\'students[\'+$index+\'].studyForm\'].$error.required"> {{\'main.required\' | translate}} </div> </td> <td md-cell> <hois-select ng-model="row.studentGroup" name="students[{{$index}}].studentGroup" values="formState.studentGroupMap[row.curriculumVersion]" aria-label="{{\'directive.student.newStudentGroup\' | translate}}"></hois-select> <div class="invalid" ng-show="directiveForm[\'students[\'+$index+\'].studentGroup\'].$error.required"> {{\'main.required\' | translate}} </div> </td> <td md-cell> <a ng-click="deleteStudent(row)" md-no-ink class="remove">&times;</a> </td> </tr> </tbody> </table> </md-table-container>'),a.put("directive/directive.type.okava.view.html",'<md-table-container> <table md-table md-row-select="formState.cancelSelect" multiple ng-model="formState.selectedStudents" class="secondary-table"> <thead md-head> <tr md-row> <th md-column>{{\'directive.student.fullname\' | translate}}</th> <th md-column>{{\'directive.student.idcode\' | translate}}</th> <th md-column ng-if="record.status !== \'KASKKIRI_STAATUS_KINNITATUD\'">{{\'directive.student.oldCurriculumVersion\' | translate}}</th> <th md-column ng-if="record.status !== \'KASKKIRI_STAATUS_KINNITATUD\'">{{\'directive.student.oldStudyForm\' | translate}}</th> <th md-column>{{\'directive.student.newCurriculumVersion\' | translate}}</th> <th md-column>{{\'directive.student.newStudyForm\' | translate}}</th> <th md-column>{{\'directive.student.newStudentGroup\' | translate}}</th> </tr> </thead> <tbody md-body> <tr md-row ng-disabled="!row.selectable" md-select="row" md-select-id="student" md-auto-select ng-repeat="row in record.students | orderBy:\'+lastname\'" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell> <a class="md-primary" ng-href="#/students/{{::row.student}}/main">{{::row.fullname}}</a> </td> <td md-cell>{{::row.idcode}}</td> <td md-cell ng-if="record.status !== \'KASKKIRI_STAATUS_KINNITATUD\'">{{currentLanguageNameField(row.oldCurriculumVersion)}}</td> <td md-cell ng-if="record.status !== \'KASKKIRI_STAATUS_KINNITATUD\'"> <hois-classifier-value ng-model="row.oldStudyForm" main-classifier-code="OPPEVORM"></hois-classifier-value> </td> <td md-cell>{{currentLanguageNameField(row.newCurriculumVersion)}}</td> <td md-cell> <hois-classifier-value ng-model="row.studyForm" main-classifier-code="OPPEVORM"></hois-classifier-value> </td> <td md-cell>{{::row.newStudentGroup}}</td> </tr> </tbody> </table> </md-table-container>'),a.put("directive/directive.type.okoorm.edit.html",'<md-table-container> <table md-table class="secondary-table"> <thead md-head> <tr md-row> <th md-column>{{\'directive.student.fullname\' | translate}}</th> <th md-column>{{\'directive.student.idcode\' | translate}}</th> <th md-column>{{\'directive.student.newStudyLoad\' | translate}}</th> <th md-column class="required">{{\'directive.student.fin\' | translate}}</th> <th md-column class="required">{{\'directive.student.finSpecific\' | translate}}</th> <th></th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="row in record.students" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell>{{::row.fullname}}</td> <td md-cell>{{::row.idcode}}</td> <td md-cell>{{\'directive.student.studyLoad\'+row.studyLoad | translate}}</td> <td md-cell> <hois-classifier-value ng-model="row.fin" name="students[{{$index}}].fin" main-classifier-code="FINALLIKAS"></hois-classifier-value> <div class="invalid" ng-show="directiveForm[\'students[\'+$index+\'].fin\'].$error.required"> {{\'main.required\' | translate}} </div> </td> <td md-cell> <hois-classifier-select ng-model="row.finSpecific" name="students[{{$index}}].finSpecific" filter-values="[row.oldFinSpecific]" model-value-attr="code" main-classifier-code="FINTAPSUSTUS" aria-label="{{\'directive.student.finSpecific\' | translate}}"></hois-classifier-select> <div class="invalid" ng-show="directiveForm[\'students[\'+$index+\'].finSpecific\'].$error.required"> {{\'main.required\' | translate}} </div> </td> <td md-cell> <a ng-click="deleteStudent(row)" md-no-ink class="remove">&times;</a> </td> </tr> </tbody> </table> </md-table-container>'),a.put("directive/directive.type.okoorm.view.html",'<md-table-container> <table md-table md-row-select="formState.cancelSelect" multiple ng-model="formState.selectedStudents" class="secondary-table"> <thead md-head> <tr md-row> <th md-column>{{\'directive.student.fullname\' | translate}}</th> <th md-column>{{\'directive.student.idcode\' | translate}}</th> <th md-column>{{\'directive.student.newStudyLoad\' | translate}}</th> <th md-column>{{\'directive.student.fin\' | translate}}</th> <th md-column>{{\'directive.student.finSpecific\' | translate}}</th> </tr> </thead> <tbody md-body> <tr md-row ng-disabled="!row.selectable" md-select="row" md-select-id="student" md-auto-select ng-repeat="row in record.students | orderBy:\'+lastname\'" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell> <a class="md-primary" ng-href="#/students/{{::row.student}}/main">{{::row.fullname}}</a> </td> <td md-cell>{{::row.idcode}}</td> <td md-cell>{{\'directive.student.studyLoad\'+row.studyLoad | translate}}</td> <td md-cell> <hois-classifier-value ng-model="row.fin" main-classifier-code="FINALLIKAS"></hois-classifier-value> </td> <td md-cell> <hois-classifier-value ng-model="row.finSpecific" main-classifier-code="FINTAPSUSTUS"></hois-classifier-value> </td> </tr> </tbody> </table> </md-table-container>'),a.put("directive/directive.type.ovorm.edit.html",'<md-table-container> <table md-table class="secondary-table"> <thead md-head> <tr md-row> <th md-column>{{\'directive.student.fullname\' | translate}}</th> <th md-column>{{\'directive.student.idcode\' | translate}}</th> <th md-column>{{\'directive.student.oldStudyForm\' | translate}}</th> <th md-column class="required">{{\'directive.student.newStudyForm\' | translate}}</th> <th md-column>{{\'directive.student.studentGroup\' | translate}}</th> <th></th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="row in record.students" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell>{{::row.fullname}}</td> <td md-cell>{{::row.idcode}}</td> <td md-cell> <hois-classifier-value ng-model="row.oldStudyForm" main-classifier-code="OPPEVORM"></hois-classifier-value> </td> <td md-cell> <hois-classifier-select ng-model="row.studyForm" name="students[{{$index}}].studyForm" criteria="{higher: true}" filter-values="[row.oldStudyForm]" model-value-attr="code" main-classifier-code="OPPEVORM" aria-label="{{\'directive.student.newStudyForm\' | translate}}"></hois-classifier-select> <div class="invalid" ng-show="directiveForm[\'students[\'+$index+\'].studyForm\'].$error.required"> {{\'main.required\' | translate}} </div> </td> <td md-cell> <hois-select ng-model="row.studentGroup" name="students[{{$index}}].studentGroup" values="formState.studentGroupMap[row.oldCurriculumVersion.id]" aria-label="{{\'directive.student.studentGroup\' | translate}}"></hois-select> </td> <td md-cell> <a ng-click="deleteStudent(row)" md-no-ink class="remove">&times;</a> </td> </tr> </tbody> </table> </md-table-container>'),a.put("directive/directive.type.ovorm.view.html",'<md-table-container> <table md-table md-row-select="formState.cancelSelect" multiple ng-model="formState.selectedStudents" class="secondary-table"> <thead md-head> <tr md-row> <th md-column>{{\'directive.student.fullname\' | translate}}</th> <th md-column>{{\'directive.student.idcode\' | translate}}</th> <th md-column>{{\'directive.student.oldStudyForm\' | translate}}</th> <th md-column>{{\'directive.student.newStudyForm\' | translate}}</th> <th md-column>{{\'directive.student.studentGroup\' | translate}}</th> </tr> </thead> <tbody md-body> <tr md-row ng-disabled="!row.selectable" md-select="row" md-select-id="student" md-auto-select ng-repeat="row in record.students | orderBy:\'+lastname\'" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell> <a class="md-primary" ng-href="#/students/{{::row.student}}/main">{{::row.fullname}}</a> </td> <td md-cell>{{::row.idcode}}</td> <td md-cell> <hois-classifier-value ng-model="row.oldStudyForm" main-classifier-code="OPPEVORM"></hois-classifier-value> </td> <td md-cell> <hois-classifier-value ng-model="row.studyForm" main-classifier-code="OPPEVORM"></hois-classifier-value> </td> <td md-cell>{{::row.newStudentGroup}}</td> </tr> </tbody> </table> </md-table-container>'),a.put("directive/directive.type.stiptoet.edit.html",'<md-table-container> <table md-table class="secondary-table"> <thead md-head> <tr md-row> <th md-column>{{\'directive.student.fullname\' | translate}}</th> <th md-column>{{\'directive.student.idcode\' | translate}}</th> <th md-column>{{\'directive.student.bankAccount\' | translate}}</th> <th md-column ng-class="{required: formState.scholarshipEditable}">{{\'directive.student.amountPaid\' | translate}}</th> <th md-column ng-class="{required: formState.scholarshipEditable}">{{\'directive.student.stipStartDate\' | translate}}</th> <th md-column ng-class="{required: formState.scholarshipEditable}">{{\'directive.student.stipEndDate\' | translate}}</th> <th></th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="row in record.students" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell>{{::row.fullname}}</td> <td md-cell>{{::row.idcode}}</td> <td md-cell>{{::row.bankAccount}}</td> <td md-cell> <hois-value ng-if="!formState.scholarshipEditable" value="row.amountPaid"></hois-value> <input ng-if="formState.scholarshipEditable" type="text" name="students[{{$index}}].amountPaid" ng-model="row.amountPaid"> <div class="invalid" ng-show="directiveForm[\'students[\'+$index+\'].amountPaid\'].$error.required"> {{\'main.required\' | translate}} </div> </td> <td md-cell> <hois-value ng-if="!formState.scholarshipEditable" value="row.startDate | hoisDate"></hois-value> <md-datepicker ng-if="formState.scholarshipEditable" name="students[{{$index}}].startDate" ng-model="row.startDate"></md-datepicker> <div class="invalid" ng-show="directiveForm[\'students[\'+$index+\'].startDate\'].$error.required"> {{\'main.required\' | translate}} </div> </td> <td md-cell> <hois-value ng-if="!formState.scholarshipEditable" value="row.endDate | hoisDate"></hois-value> <md-datepicker ng-if="formState.scholarshipEditable" name="students[{{$index}}].endDate" ng-model="row.endDate"></md-datepicker> <div class="invalid" ng-show="directiveForm[\'students[\'+$index+\'].endDate\'].$error.required"> {{\'main.required\' | translate}} </div> </td> <td md-cell> <a ng-click="deleteStudent(row)" md-no-ink class="remove">&times;</a> </td> </tr> </tbody> </table> </md-table-container>'),a.put("directive/directive.type.stiptoet.view.html",'<md-table-container> <table md-table md-row-select="formState.cancelSelect" multiple ng-model="formState.selectedStudents" class="secondary-table"> <thead md-head> <tr md-row> <th md-column>{{\'directive.student.fullname\' | translate}}</th> <th md-column>{{\'directive.student.idcode\' | translate}}</th> <th md-column>{{\'directive.student.bankAccount\' | translate}}</th> <th md-column>{{\'directive.student.amountPaid\' | translate}}</th> <th md-column>{{\'directive.student.stipStartDate\' | translate}}</th> <th md-column>{{\'directive.student.stipEndDate\' | translate}}</th> </tr> </thead> <tbody md-body> <tr md-row ng-disabled="!row.selectable" md-select="row" md-select-id="student" md-auto-select ng-repeat="row in record.students | orderBy:\'+lastname\'" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell> <a class="md-primary" ng-href="#/students/{{::row.student}}/main">{{::row.fullname}}</a> </td> <td md-cell>{{::row.idcode}}</td> <td md-cell>{{::row.bankAccount}}</td> <td md-cell> <hois-value value="row.amountPaid"></hois-value> </td> <td md-cell> <hois-value value="row.startDate | hoisDate"></hois-value> </td> <td md-cell> <hois-value value="row.endDate | hoisDate"></hois-value> </td> </tr> </tbody> </table> </md-table-container>'),a.put("directive/directive.type.stiptoetl.edit.html",'<md-table-container> <table md-table class="secondary-table"> <thead md-head> <tr md-row> <th md-column>{{\'directive.student.fullname\' | translate}}</th> <th md-column>{{\'directive.student.idcode\' | translate}}</th> <th md-column>{{\'directive.student.stipStartDate\' | translate}}</th> <th md-column>{{\'directive.student.stipEndDate\' | translate}}</th> <th md-column class="required">{{\'directive.student.stipEndReason\' | translate}}</th> <th></th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="row in record.students" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell>{{::row.fullname}}</td> <td md-cell>{{::row.idcode}}</td> <td md-cell> <hois-value value="row.startDate | hoisDate"></hois-value> </td> <td md-cell> <hois-value value="row.endDate | hoisDate"></hois-value> </td> <td md-cell> <hois-classifier-select ng-model="row.reason" name="students[{{$index}}].reason" criteria="{higher: formState.school.higher ? true : undefined, vocational: formState.school.vocational ? true : undefined}" model-value-attr="code" main-classifier-code="KASKKIRI_STIPTOETL_POHJUS" aria-label="{{\'directive.student.reason\' | translate}}"></hois-classifier-select> <div class="invalid" ng-show="directiveForm[\'students[\'+$index+\'].reason\'].$error.required"> {{\'main.required\' | translate}} </div> </td> <td md-cell> <a ng-click="deleteStudent(row)" md-no-ink class="remove">&times;</a> </td> </tr> </tbody> </table> </md-table-container>'),a.put("directive/directive.type.stiptoetl.view.html",'<md-table-container> <table md-table md-row-select="formState.cancelSelect" multiple ng-model="formState.selectedStudents" class="secondary-table"> <thead md-head> <tr md-row> <th md-column>{{\'directive.student.fullname\' | translate}}</th> <th md-column>{{\'directive.student.idcode\' | translate}}</th> <th md-column>{{\'directive.student.stipStartDate\' | translate}}</th> <th md-column>{{\'directive.student.stipEndDate\' | translate}}</th> <th md-column>{{\'directive.student.stipEndReason\' | translate}}</th> </tr> </thead> <tbody md-body> <tr md-row ng-disabled="!row.selectable" md-select="row" md-select-id="student" md-auto-select ng-repeat="row in record.students | orderBy:\'+lastname\'" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell> <a class="md-primary" ng-href="#/students/{{::row.student}}/main">{{::row.fullname}}</a> </td> <td md-cell>{{::row.idcode}}</td> <td md-cell> <hois-value value="row.startDate | hoisDate"></hois-value> </td> <td md-cell> <hois-value value="row.endDate | hoisDate"></hois-value> </td> <td md-cell> <hois-classifier-value ng-model="row.reason" main-classifier-code="KASKKIRI_STIPTOETL_POHJUS"></hois-classifier-value> </td> </tr> </tbody> </table> </md-table-container>'),a.put("directive/directive.type.valis.edit.html",'<md-table-container> <table md-table class="secondary-table"> <thead md-head> <tr md-row> <th md-column>{{\'directive.student.fullname\' | translate}}</th> <th md-column>{{\'directive.student.idcode\' | translate}}</th> <th md-column class="required">{{\'directive.student.isAbroad\' | translate}}</th> <th md-column class="required">{{\'directive.student.school\' | translate}}</th> <th md-column class="required">{{\'directive.student.country\' | translate}}</th> <th md-column class="required">{{\'directive.student.isPeriod\' | translate}}</th> <th md-column class="required">{{\'directive.student.valisStartDate\' | translate}}</th> <th md-column class="required">{{\'directive.student.valisEndDate\' | translate}}</th> <th md-column class="required">{{\'directive.student.abroadPurpose\' | translate}}</th> <th md-column class="required">{{\'directive.student.abroadProgramme\' | translate}}</th> <th></th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="row in record.students" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell>{{::row.fullname}}</td> <td md-cell>{{::row.idcode}}</td> <td md-cell> <md-radio-group name="isAbroad" ng-model="row.isAbroad" layout="row" ng-change="abroadChanged(row)"> <md-radio-button ng-value="true" aria-label="foreign">{{ \'directive.student.foreignEducationalInstitute\' | translate }}</md-radio-button> <md-radio-button ng-value="false" aria-label="estonian">{{ \'directive.student.estonianEducationalInstitute\' | translate }}</md-radio-button> </md-radio-group> </td> <td md-cell> <hois-classifier-select ng-if="!row.isAbroad" ng-model="row.ehisSchool" name="students[{{$index}}].ehisSchool" model-value-attr="code" filter-values="[formState.school.ehisSchool]" main-classifier-code="EHIS_KOOL" aria-label="{{\'directive.student.school\' | translate}}"></hois-classifier-select> <div ng-if="!row.isAbroad" class="invalid" ng-messages="directiveForm[\'students[\'+$index+\'].ehisSchool\'].$error"> <p ng-message="required">{{\'main.required\' | translate}}</p> </div> <input type="text" ng-if="row.isAbroad" ng-model="row.abroadSchool" name="students[{{$index}}].abroadSchool"> <div ng-if="row.isAbroad" class="invalid" ng-messages="directiveForm[\'students[\'+$index+\'].abroadSchool\'].$error"> <p ng-message="required">{{\'main.required\' | translate}}</p> </div> </td> <td md-cell> <hois-classifier-select ng-if="row.isAbroad" ng-model="row.country" name="students[{{$index}}].country" model-value-attr="code" filter-values="[\'RIIK_EST\']" main-classifier-code="RIIK" aria-label="{{\'directive.student.country\' | translate}}"></hois-classifier-select> <hois-classifier-value ng-if="!row.isAbroad" ng-model="row.country" main-classifier-code="RIIK"></hois-classifier-value> <div class="invalid" ng-if="row.isAbroad" ng-messages="directiveForm[\'students[\'+$index+\'].country\'].$error"> <p ng-message="required">{{\'main.required\' | translate}}</p> </div> </td> <td md-cell> <md-radio-group name="isPeriod" ng-model="row.isPeriod" layout="row"> <md-radio-button ng-value="true" aria-label="period">{{ \'main.period\' | translate }}</md-radio-button> <md-radio-button ng-value="false" aria-label="date">{{ \'main.date\' | translate }}</md-radio-button> </md-radio-group> </td> <td md-cell> <hois-select ng-if="row.isPeriod" ng-model="row.studyPeriodStart" name="students[{{$index}}].studyPeriodStart" values="formState.studyPeriods" aria-label="{{\'directive.student.valisStartDate\' | translate}}"></hois-select> <md-datepicker ng-if="!row.isPeriod" ng-model="row.startDate" name="students[{{$index}}].startDate"></md-datepicker> <div ng-if="row.isPeriod" class="invalid" ng-messages="directiveForm[\'students[\'+$index+\'].studyPeriodStart\'].$error"> <p ng-message="required">{{\'main.required\' | translate}}</p> </div> <div ng-if="!row.isPeriod" class="invalid" ng-messages="directiveForm[\'students[\'+$index+\'].startDate\'].$error"> <p ng-message="required">{{\'main.required\' | translate}}</p> </div> </td> <td md-cell> <hois-select ng-if="row.isPeriod" ng-model="row.studyPeriodEnd" name="students[{{$index}}].studyPeriodEnd" values="formState.studyPeriods" aria-label="{{\'directive.student.valisEndDate\' | translate}}"></hois-select> <md-datepicker ng-if="!row.isPeriod" ng-model="row.endDate" name="students[{{$index}}].endDate"></md-datepicker> <div ng-if="row.isPeriod" class="invalid" ng-messages="directiveForm[\'students[\'+$index+\'].studyPeriodEnd\'].$error"> <p ng-message="required">{{\'main.required\' | translate}}</p> </div> <div ng-if="!row.isPeriod" class="invalid" ng-messages="directiveForm[\'students[\'+$index+\'].endDate\'].$error"> <p ng-message="required">{{\'main.required\' | translate}}</p> </div> </td> <td md-cell> <hois-classifier-select ng-model="row.abroadPurpose" name="students[{{$index}}].abroadPurpose" model-value-attr="code" main-classifier-code="VALISOPE_EESMARK" aria-label="{{\'directive.student.abroadPurpose\' | translate}}"></hois-classifier-select> <div class="invalid" ng-messages="directiveForm[\'students[\'+$index+\'].abroadPurpose\'].$error"> <p ng-message="required">{{\'main.required\' | translate}}</p> </div> </td> <td md-cell> <hois-classifier-select ng-model="row.abroadProgramme" name="students[{{$index}}].abroadProgramme" model-value-attr="code" main-classifier-code="VALISKOOL_PROGRAMM" aria-label="{{\'directive.student.abroadProgramme\' | translate}}"></hois-classifier-select> <div class="invalid" ng-messages="directiveForm[\'students[\'+$index+\'].abroadProgramme\'].$error"> <p ng-message="required">{{\'main.required\' | translate}}</p> </div> </td> <td md-cell> <a ng-click="deleteStudent(row)" md-no-ink class="remove">&times;</a> </td> </tr> </tbody> </table> </md-table-container>'),a.put("directive/directive.type.valis.view.html",'<md-table-container> <table md-table md-row-select="formState.cancelSelect" multiple ng-model="formState.selectedStudents" class="secondary-table"> <thead md-head> <tr md-row> <th md-column>{{\'directive.student.fullname\' | translate}}</th> <th md-column>{{\'directive.student.idcode\' | translate}}</th> <th md-column>{{\'directive.student.isAbroad\' | translate}}</th> <th md-column>{{\'directive.student.school\' | translate}}</th> <th md-column>{{\'directive.student.country\' | translate}}</th> <th md-column>{{\'directive.student.isPeriod\' | translate}}</th> <th md-column>{{\'directive.student.valisStartDate\' | translate}}</th> <th md-column>{{\'directive.student.valisEndDate\' | translate}}</th> <th md-column>{{\'directive.student.abroadPurpose\' | translate}}</th> <th md-column>{{\'directive.student.abroadProgramme\' | translate}}</th> </tr> </thead> <tbody md-body> <tr md-row ng-disabled="!row.selectable" md-select="row" md-select-id="student" md-auto-select ng-repeat="row in record.students | orderBy:\'+lastname\'" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell> <a class="md-primary" ng-href="#/students/{{::row.student}}/main">{{::row.fullname}}</a> </td> <td md-cell>{{::row.idcode}}</td> <td md-cell>{{row.isAbroad ? \'directive.student.foreignEducationalInstitute\' : \'directive.student.estonianEducationalInstitute\' | translate}}</td> <td md-cell> <hois-classifier-value ng-if="!row.isAbroad" ng-model="row.ehisSchool" main-classifier-code="EHIS_KOOL"></hois-classifier-value> <div ng-if="row.isAbroad">{{row.abroadSchool}}</div> </td> <td md-cell> <hois-classifier-value ng-model="row.country" main-classifier-code="RIIK"></hois-classifier-value> </td> <td md-cell>{{row.isPeriod ? \'main.period\' : \'main.date\' | translate}}</td> <td md-cell> <div ng-if="row.isPeriod">{{currentLanguageNameField(row.newStudyPeriodStart)}}</div> <hois-value ng-if="!row.isPeriod" value="row.startDate | hoisDate"></hois-value> </td> <td md-cell> <div ng-if="row.isPeriod">{{currentLanguageNameField(row.newStudyPeriodEnd)}}</div> <hois-value ng-if="!row.isPeriod" value="row.endDate | hoisDate"></hois-value> </td> <td md-cell> <hois-classifier-value ng-model="row.abroadPurpose" main-classifier-code="VALISOPE_EESMARK"></hois-classifier-value> </td> <td md-cell> <hois-classifier-value ng-model="row.abroadProgramme" main-classifier-code="VALISKOOL_PROGRAMM"></hois-classifier-value> </td> </tr> </tbody> </table> </md-table-container>'),a.put("directive/directive.view.html",'<div layout-padding ng-cloak> <div flex> <div layout="row" layout-xs="column" flex class="form-readonly"> <div flex="70"> <div layout="row" layout-sm="column" layout-xs="column" ng-if="record.type === \'KASKKIRI_TYHIST\'"> <md-input-container flex="100" flex-sm="100" flex-xs="100"> <label class="textInput">{{\'directive.canceledDirective\' | translate}}</label> <hois-value value="record.canceledDirective.nameEt" href-value="\'#/directives/\' + record.canceledDirective.id + \'/view\'"></hois-value> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="45" flex-sm="100" flex-xs="100"> <label>{{\'directive.headline\' | translate}}</label> <hois-value value="record.headline"></hois-value> </md-input-container> <md-input-container flex="50" flex-sm="100" flex-xs="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'directive.directiveNr\' | translate}}</label> <hois-value value="record.directiveNr"></hois-value> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="45" flex-sm="100" flex-xs="100"> <label>{{\'directive.type\' | translate}}</label> <hois-classifier-value ng-model="record.type" main-classifier-code="KASKKIRI"></hois-classifier-value> </md-input-container> <md-input-container flex="50" flex-sm="100" flex-xs="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'directive.preamble\' | translate}}</label> <hois-value value="record.preamble"></hois-value> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column" ng-if="record.type === \'KASKKIRI_STIPTOET\' || record.type === \'KASKKIRI_STIPTOETL\'"> <md-input-container flex="45" flex-sm="100" flex-xs="100"> <label>{{\'directive.scholarshipType\' | translate}}</label> <hois-classifier-value ng-model="record.scholarshipType" main-classifier-code="STIPTOETUS"></hois-classifier-value> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="45" flex-sm="100" flex-xs="100"> <label>{{\'directive.inserted\' | translate}}</label> <hois-value value="record.inserted | hoisDate"></hois-value> </md-input-container> <md-input-container flex="50" flex-sm="100" flex-xs="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'directive.confirmDate\' | translate}}</label> <hois-value value="record.confirmDate | hoisDate"></hois-value> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="45" flex-sm="100" flex-xs="100"> <label>{{\'directive.addInfo\' | translate}}</label> <hois-value value="record.addInfo"></hois-value> </md-input-container> <md-input-container flex="50" flex-sm="100" flex-xs="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'directive.directiveCoordinator\' | translate}}</label> <hois-value value="record.directiveCoordinator.nameEt"></hois-value> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="45" flex-sm="100" flex-xs="100"> <label>{{\'directive.status\' | translate}}</label> <hois-classifier-value ng-model="record.status" main-classifier-code="KASKKIRI_STAATUS"></hois-classifier-value> </md-input-container> </div> </div> </div> <div class="ois-form-layout" ng-show="userCanConfirm()"> <form name="directiveForm"> <div layout="column"> <md-input-container class="md-block"> <label>{{\'directive.directiveNr\' | translate}}</label> <input type="text" ng-model="confirmRecord.directiveNr" name="directiveNr" required md-maxlength="20"> </md-input-container> <md-input-container class="md-block"> <label>{{\'directive.preamble\' | translate}}</label> <textarea ng-model="confirmRecord.preamble" md-maxlength="4000" max-rows="10" required></textarea> </md-input-container> </div> </form> </div> <md-table-container> <fieldset> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'directive.studentList\' | translate}}</legend> <div ng-include="formState.templateUrl" flex></div> </fieldset> </md-table-container> <div>&nbsp;</div> <md-table-container ng-if="record.cancelingDirectives && record.cancelingDirectives.length > 0"> <fieldset> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'directive.cancelingDirectives\' | translate}}</legend> <table md-table> <thead md-head> <tr md-row> <th md-column>{{\'directive.headline\' | translate}}</th> <th md-column>{{\'directive.directiveNr\' | translate}}</th> <th md-column>{{\'directive.status\' | translate}}</th> <th md-column>{{\'directive.inserted\' | translate}}</th> <th md-column>{{\'directive.confirmDate\' | translate}}</th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="row in record.cancelingDirectives" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell> <a md-class="md-primary change-button" ng-href="#/directives/{{::row.id}}/view">{{::row.headline}}</a> </td> <td md-cell>{{::row.directiveNr}}</td> <td md-cell>{{currentLanguageNameField(row.status)}}</td> <td md-cell>{{::row.inserted | hoisDate}}</td> <td md-cell>{{::row.confirmDate | hoisDate}}</td> </tr> </tbody> </table> </fieldset> </md-table-container> <md-button ng-if="record.id && record.userCanEdit" class="md-primary md-raised" ng-href="#/directives/{{record.id}}/edit?_noback">{{\'main.button.change\' | translate}}</md-button> <md-button ng-click="back(\'#/directives\')" class="md-raised">{{\'main.button.back\' | translate}}</md-button> <md-button ng-click="confirmDirective()" ng-if="userCanConfirm()" class="md-raised">{{\'directive.confirmDuringTest\' | translate}}</md-button> <md-button ng-click="cancelDirective()" ng-if="record.userCanCancel" class="md-raised">{{\'directive.cancel\' | translate}}</md-button> </div> </div>'),
a.put("directive/invalid.student.delete.dialog.html",'<md-dialog aria-label="grade add dialog" flex="60" flex-sm="100" flex-xs="100"> <md-dialog-content> <div class="md-dialog-content"> <p>{{\'directive.studentsNotValid\' | translate}}</p> <md-table-container> <table md-table> <thead md-head> <tr md-row> <th md-column>{{\'directive.student.fullname\' | translate}}</th> <th md-column>{{\'directive.student.idcode\' | translate}}</th> <th md-column>{{\'directive.student.reason\' | translate}}</th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="row in students" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell>{{::row.fullname}}</td> <td md-cell>{{::row.idcode}}</td> <td md-cell>{{row.reason | translate}}</td> </tr> </tbody> </table> </md-table-container> </div> </md-dialog-content> <md-dialog-actions layout="row" layout-align="start center"> <md-button ng-click="submit()" class="md-raised md-primary">{{\'main.yes\' | translate}}</md-button> <md-button ng-click="cancel()" class="md-raised">{{\'main.no\' | translate}}</md-button> </md-dialog-actions> </md-dialog>'),a.put("directive/list.html",'<div class="ois-form-layout-padding ois-form-layout" ng-cloak> <div flex> <form name="searchForm" ng-submit="searchForm.$valid && loadData()" novalidate class="nomargin"> <fieldset tabindex="1"> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'main.searchlabel\' | translate}}</legend> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="45" flex-sm="100" flex-xs="100"> <label class="textInput">{{\'directive.type\' | translate}}</label> <hois-classifier-select ng-model="criteria.type" name="type" model-value-attr="code" main-classifier-code="KASKKIRI" filter-values="formState.excludedTypes" multiple autofocus></hois-classifier-select> </md-input-container> <md-input-container flex="50" flex-sm="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label class="textInput">{{\'directive.headline\' | translate}}</label> <input ng-model="criteria.headline" name="headline" type="text" md-maxlength="255"> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="45" flex-sm="100" flex-xs="100"> <label>{{\'directive.directiveNr\' | translate}}</label> <input ng-model="criteria.directiveNr" name="directiveNr" type="text" md-maxlength="255"> </md-input-container> <md-input-container flex="20" flex-sm="100" flex-xs="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'directive.confirmDateFrom\' | translate}}</label> <md-datepicker ng-model="criteria.confirmDateFrom" md-max-date="criteria.confirmDateThru"></md-datepicker> </md-input-container> <md-input-container flex="20" flex-sm="100" flex-xs="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'directive.confirmDateThru\' | translate}}</label> <md-datepicker ng-model="criteria.confirmDateThru" md-min-date="criteria.confirmDateFrom"></md-datepicker> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="45" flex-sm="100" flex-xs="100"> <label>{{\'directive.status\' | translate}}</label> <hois-classifier-select ng-model="criteria.status" name="status" model-value-attr="code" main-classifier-code="KASKKIRI_STAATUS" multiple></hois-classifier-select> </md-input-container> <md-input-container flex="20" flex-sm="100" flex-xs="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'directive.insertedFrom\' | translate}}</label> <md-datepicker ng-model="criteria.insertedFrom" md-max-date="criteria.insertedThru"></md-datepicker> </md-input-container> <md-input-container flex="20" flex-sm="100" flex-xs="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'directive.insertedThru\' | translate}}</label> <md-datepicker ng-model="criteria.insertedThru" md-min-date="criteria.insertedFrom"></md-datepicker> </md-input-container> </div> <div layout="row"> <md-button type="submit" class="md-raised md-primary">{{\'main.button.search\' | translate}}</md-button> <md-button class="md-raised" ng-click="clearCriteria()">{{\'main.button.clear\' | translate}}</md-button> <md-button class="md-raised" ng-if="isAuthorized(\'ROLE_OIGUS_M_TEEMAOIGUS_KASKKIRI\')" ng-href="#/directives/new">{{\'directive.create\' | translate}}</md-button> </div> <div flex-xs="0" flex-gt-xs="0" flex-gt-sm="50"></div> </fieldset> </form> </div> </div> <div layout-padding> <div flex> <md-table-container> <table md-table md-progress="tabledata.$promise"> <thead md-head md-order="criteria.order" md-on-reorder="loadData"> <tr md-row> <th md-column md-order-by="headline">{{\'directive.headline\' | translate}}</th> <th md-column md-order-by="directiveNr">{{\'directive.directiveNr\' | translate}}</th> <th md-column md-order-by="{{currentLanguage()===\'en\' ? \'type.nameEn\' : \'type.nameEt\'}}">{{\'directive.type\' | translate}}</th> <th md-column md-order-by="{{currentLanguage()===\'en\' ? \'status.nameEn\' : \'status.nameEt\'}}">{{\'directive.status\' | translate}}</th> <th md-column md-order-by="inserted">{{\'directive.inserted\' | translate}}</th> <th md-column md-order-by="confirmDate">{{\'directive.confirmDate\' | translate}}</th> <th></th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="row in tabledata.content" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell> <a md-class="md-primary change-button" ng-href="#/directives/{{::row.id}}/view">{{::row.headline}}</a> </td> <td md-cell>{{::row.directiveNr}}</td> <td md-cell>{{currentLanguageNameField(row.type)}}</td> <td md-cell>{{currentLanguageNameField(row.status)}}</td> <td md-cell>{{::row.inserted | hoisDate}}</td> <td md-cell>{{::row.confirmDate | hoisDate}}</td> <td md-cell> <md-button ng-if="row.status.code === \'KASKKIRI_STAATUS_KOOSTAMISEL\' && isAuthorized(\'ROLE_OIGUS_M_TEEMAOIGUS_KASKKIRI\')" md-no-ink class="md-primary change-button" ng-href="#/directives/{{::row.id}}/edit">{{\'main.button.change\' | translate}}</md-button> </td> </tr> </tbody> </table> </md-table-container> <md-table-pagination md-limit="criteria.size" md-limit-options="[10, 20, 50]" md-page="criteria.page" md-total="{{tabledata.totalElements}}" md-on-paginate="loadData" md-label="{page: \'{{\'main.page\' | translate}}:\', rowsPerPage: \'{{\'main.rowPerPage\' | translate}}:\', of: \'{{\'main.of\' | translate}}\'}" md-page-select></md-table-pagination> </div> </div>'),a.put("directive/student.select.dialog.html",'<md-dialog aria-label="grade add dialog" flex="60" flex-sm="100" flex-xs="100"> <form name="directiveStudentForm" ng-submit="loadData()" novalidate ng-cloak> <div flex> <md-input-container class="md-block"> <label class="textInput">{{\'directive.student.firstname\' | translate}}</label> <input type="text" ng-model="criteria.firstname" name="firstname" md-autofocus> </md-input-container> <md-input-container class="md-block"> <label class="textInput">{{\'directive.student.lastname\' | translate}}</label> <input type="text" ng-model="criteria.lastname" name="lastname"> </md-input-container> <md-input-container class="md-block"> <label class="textInput">{{\'directive.student.idcode\' | translate}}</label> <input type="text" ng-model="criteria.idcode" name="idcode"> </md-input-container> <div layout="row" class="horizontal-radio-group" ng-if="formState.type === \'KASKKIRI_EKSMAT\'"> <md-input-container flex="20" flex-xs="100"> <label class="textInput">{{\'directive.student.isapplication\' | translate}}</label> </md-input-container> <md-input-container layout="row" layout-align="start center" flex="70"> <md-radio-group ng-model="criteria.application" layout="row"> <md-radio-button ng-value="true" aria-label="yes">{{ \'main.yes\' | translate }}</md-radio-button> <md-radio-button ng-value="false" aria-label="no">{{ \'main.no\' | translate }}</md-radio-button> </md-radio-group> </md-input-container> </div> </div> <div layout="row"> <md-button type="submit" class="md-raised md-primary">{{\'main.button.search\' | translate}}</md-button> <md-button class="md-raised" ng-click="clearCriteria()">{{\'main.button.clear\' | translate}}</md-button> </div> <md-dialog-content> <div class="md-dialog-content"> <md-table-container> <table md-table md-row-select multiple ng-model="formState.selectedStudents" md-progress="tabledata.$promise"> <thead md-head> <tr md-row> <th md-column>{{\'directive.student.fullname\' | translate}}</th> <th md-column>{{\'directive.student.idcode\' | translate}}</th> <th md-column ng-if="formState.type === \'KASKKIRI_LOPET\'">{{\'directive.student.curriculum\' | translate}}</th> <th md-column ng-if="formState.type === \'KASKKIRI_LOPET\'">{{\'directive.student.studentGroup\' | translate}}</th> </tr> </thead> <tbody md-body> <tr md-row md-select="row" md-select-id="id" md-auto-select ng-repeat="row in tabledata.content" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell>{{::row.fullname}}</td> <td md-cell>{{::row.idcode}}</td> <td md-cell ng-if="formState.type === \'KASKKIRI_LOPET\'">{{$root.currentLanguageNameField(row.curriculumVersion)}}</td> <td md-cell ng-if="formState.type === \'KASKKIRI_LOPET\'">{{::row.studentGroup}}</td> </tr> </tbody> </table> </md-table-container> </div> </md-dialog-content> <md-dialog-actions layout="row" layout-align="start center"> <md-button ng-click="select()" class="md-raised md-primary">{{\'main.button.add\' | translate}}</md-button> <md-button ng-click="cancel()" class="md-raised">{{\'main.button.close\' | translate}}</md-button> </md-dialog-actions> </form> </md-dialog>'),a.put("document/diploma.html",'<div ng-cloak> <div ng-include="\'document/templates/navbar.tmpl.html\'"></div> </div> <div class="ois-form-layout-padding ois-form-layout" ng-cloak> <div> <form name="documentForm"> <md-input-container class="md-block"> <label>{{\'document.directive\' | translate}}</label> <hois-select ng-model="criteria.directiveId" values="formState.directives" show-property="display" ng-change="directiveChanged()" required></hois-select> </md-input-container> <md-input-container class="md-block" ng-hide="!criteria.directiveId"> <label>{{\'document.formType\' | translate}}</label> <hois-classifier-select ng-model="criteria.formType" model-value-attr="code" show-only-values="formState.formTypes" main-classifier-code="LOPUBLANKETT" ng-change="formTypeChanged()" required></hois-classifier-select> </md-input-container> <br> <md-table-container ng-hide="formState.students.length === 0"> <table md-table> <thead md-head> <tr md-row> <th md-column> <md-checkbox ng-model="formState.allStudentsSelected" ng-change="selectAllStudents(formState.allStudentsSelected)"></md-checkbox> </th> <th md-column>{{\'document.student\' | translate}}</th> <th md-column>{{\'document.idcode\' | translate}} / {{\'document.birthdate\' | translate}}</th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="row in formState.students" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell> <md-checkbox ng-model="row.selected" ng-change="updatePdfUrl()"></md-checkbox> </td> <td md-cell>{{::row.fullname}}</td> <td md-cell>{{::row.idcode || (row.birthdate | hoisDate)}}</td> </tr> </tbody> </table> </md-table-container> <br> <div ng-hide="formState.students.length === 0"> <div layout="row"> <md-input-container flex="45" flex-sm="100" flex-xs="100"> <label>{{\'document.signer1\' | translate}}</label> <hois-select ng-model="criteria.signer1Id" values="formState.firstsigners" show-property="display" ng-change="updatePdfUrl()" required></hois-select> </md-input-container> <md-input-container flex="45" flex-sm="100" flex-xs="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'document.signer2\' | translate}}</label> <hois-select ng-model="criteria.signer2Id" values="formState.signers" show-property="display" ng-change="updatePdfUrl()" required></hois-select> </md-input-container> </div> <div layout="row" ng-if="isHigher"> <md-input-container flex="45" flex-sm="100" flex-xs="100"> <label>{{\'document.city\' | translate}}</label> <input type="text" ng-model="criteria.city" ng-change="updatePdfUrl()" required> </md-input-container> </div> <div layout="row"> <md-input-container flex="20" flex-sm="100" flex-xs="100"> <label>{{\'document.freeForms\' | translate}}</label> <input type="number" ng-model="criteria.numeral" min="0"> </md-input-container> <hois-free-forms value="formState.freeForms"></hois-free-forms> </div> </div> </form> <a ng-href="{{viewPdfUrl}}" target="_blank" class="md-button md-raised" ng-if="viewPdfUrl">{{\'document.button.showPdf\' | translate}}</a> <md-button ng-click="print()" class="md-raised md-primary" ng-if="canPrintConfirm()">{{\'main.button.print\' | translate}}</md-button> </div> </div>'),a.put("document/diploma.search.html",'<div class="ois-form-layout-padding ois-form-layout" ng-cloak> <div flex> <fieldset> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'main.searchlabel\' | translate}}</legend> <form name="searchForm" ng-submit="loadData()" novalidate class="nomargin"> <div layout="row"> <md-input-container flex="100"> <label>{{\'document.student\' | translate}}</label> <input type="text" ng-model="criteria.student"> </md-input-container> </div> <div layout="row"> <hois-autocomplete flex ng-model="criteria.curriculum" method="curriculumsauto" no-paging="true" label="document.search.curriculum"></hois-autocomplete> </div> <div layout="row"> <div layout="column" flex="45"> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex flex-sm="100" flex-xs="100"> <label>{{\'document.search.from\' | translate}}</label> <md-datepicker ng-model="criteria.from" md-max-date="criteria.thru"></md-datepicker> </md-input-container> <md-input-container flex flex-sm="100" flex-xs="100" flex-offset-xs="0" flex-offset-sm="0" flex-offset="5"> <label>{{\'document.search.thru\' | translate}}</label> <md-datepicker ng-model="criteria.thru" md-min-date="criteria.from"></md-datepicker> </md-input-container> </div> </div> </div> <div layout="row"> <md-button type="submit" class="md-raised md-primary">{{\'main.button.search\' | translate}}</md-button> <md-button class="md-raised" ng-click="clearCriteria()">{{\'main.button.clear\' | translate}}</md-button> <a ng-href="{{excel(formState.xlsUrl, criteria)}}" target="_blank" class="md-button md-raised">{{\'document.button.excel\' | translate}}</a> </div> </form> </fieldset> </div> </div> <div layout-padding> <div flex> <md-table-container> <table md-table md-progress="tabledata.$promise"> <thead md-head md-order="criteria.order" md-on-reorder="loadData"> <tr md-row> <th md-column md-order-by="p.lastname">{{\'document.student\' | translate}}</th> <th md-column md-order-by="p.idcode">{{\'document.idcode\' | translate}}</th> <th md-column md-order-by="c.mer_code">{{\'document.search.merCode\' | translate}}</th> <th md-column md-order-by="c.name_et">{{\'document.search.curriculum\' | translate}}</th> <th md-column>{{\'document.search.type\' | translate}}</th> <th md-column>{{\'document.search.diplomaStatus\' | translate}}</th> <th md-column>{{\'document.search.diplomaNr\' | translate}}</th> <th md-column>{{\'document.search.supplementStatus\' | translate}}</th> <th md-column>{{\'document.search.supplementNr\' | translate}}</th> <th md-column ng-if="auth.higher">{{\'document.search.supplementStatusEn\' | translate}}</th> <th md-column ng-if="auth.higher">{{\'document.search.supplementNrEn\' | translate}}</th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="row in tabledata.content" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell><a ng-href="#/students/{{::row.studentId}}/main">{{row.fullname}}</a></td> <td md-cell>{{::row.idcode}}</td> <td md-cell>{{::row.merCode}}</td> <td md-cell>{{::row.curriculum}}</td> <td md-cell>{{currentLanguageNameField(row.type)}}</td> <td md-cell>{{currentLanguageNameField(row.diplomaStatus)}}</td> <td md-cell><a ng-href="{{formState.pdfBaseUrl}}/{{::row.diplomaId}}/diploma.pdf">{{::row.diplomaNr}}</a></td> <td md-cell>{{currentLanguageNameField(row.supplementStatus)}}</td> <td md-cell><a ng-href="{{formState.pdfBaseUrl}}/{{::row.supplementId}}/supplement.pdf">{{::row.supplementNr}}</a></td> <td md-cell ng-if="auth.higher">{{currentLanguageNameField(row.supplementStatusEn)}}</td> <td md-cell ng-if="auth.higher"><a ng-href="{{formState.pdfBaseUrl}}/{{::row.supplementId}}/supplement.pdf?lang=EN">{{::row.supplementNrEn}}</a></td> </tr> </tbody> </table> </md-table-container> <md-table-pagination md-limit="criteria.size" md-limit-options="[10, 20, 50]" md-page="criteria.page" md-total="{{tabledata.totalElements}}" md-on-paginate="loadData" md-label="{page: \'{{\'main.page\' | translate}}:\', rowsPerPage: \'{{\'main.rowPerPage\' | translate}}:\', of: \'{{\'main.of\' | translate}}\'}" md-page-select></md-table-pagination> </div> </div>'),a.put("document/supplement.html",'<div class="ois-form-layout-padding ois-form-layout" ng-cloak> <div flex> <form layout="column"> <div layout="row"> <md-input-container flex="40" flex-sm="100" flex-xs="100" class="readonly"> <label>{{\'document.student\' | translate}}</label> <hois-value value="record.fullname"></hois-value> </md-input-container> </div> <div layout="row"> <md-input-container flex="40" flex-sm="100" flex-xs="100" class="readonly"> <label>{{\'document.diplomaNr\' | translate}}</label> <hois-value value="record.diplomaNr"></hois-value> </md-input-container> </div> <div layout="row"> <md-input-container flex="40" flex-sm="100" flex-xs="100" class="readonly"> <label>{{\'document.diplomaStatus\' | translate}}</label> <hois-classifier-value ng-model="record.diplomaStatus" main-classifier-code="LOPUDOK_STAATUS" model-value-attr="code"></hois-classifier-value> </md-input-container> </div> <div layout="row"> <md-input-container flex="45" flex-sm="100" flex-xs="100"> <label>{{\'document.signer1\' | translate}}</label> <hois-select ng-model="contentData.signer1Id" values="formState.signers" show-property="display" ng-change="updatePdfUrl()" required></hois-select> </md-input-container> <md-input-container flex="45" flex-sm="100" flex-xs="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'document.signer2\' | translate}}</label> <hois-select ng-model="contentData.signer2Id" values="formState.signers" show-property="display" ng-change="updatePdfUrl()" required></hois-select> </md-input-container> </div> <br> <div layout="row"> <div flex="45" flex-sm="100" flex-xs="100"> <md-checkbox ng-model="contentData.showSubjectCode" ng-change="updatePdfUrl()"> {{\'document.showSubjectCode\' | translate}} </md-checkbox> </div> <div flex-sm="100" flex-xs="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <md-checkbox ng-model="contentData.showTeacher" ng-change="updatePdfUrl()"> {{\'document.showTeacher\' | translate}} </md-checkbox> </div> </div> <fieldset> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'document.estonian\' | translate}}</legend> <br> <div layout="row" ng-if="record.diplomaStatus === \'LOPUDOK_STAATUS_T\' && record.supplementStatus !== \'LOPUDOK_STAATUS_T\'"> <md-input-container flex="20" flex-sm="100" flex-xs="100"> <label>{{\'document.freeForms\' | translate}}</label> <input type="number" ng-model="formData.numeral" min="0" required> </md-input-container> <hois-free-forms value="record.forms"></hois-free-forms> </div> <div layout="row" ng-if="record.diplomaStatus === \'LOPUDOK_STAATUS_T\' && record.supplementStatus !== \'LOPUDOK_STAATUS_T\'"> <md-input-container flex="20" flex-sm="100" flex-xs="100"> <label>{{\'document.freeExtraForms\' | translate}}</label> <input type="number" ng-model="formData.additionalNumeral" min="0"> </md-input-container> <hois-free-forms value="record.freeExtraForms"></hois-free-forms> </div> <div layout="row" ng-if="record.supplementStatus === \'LOPUDOK_STAATUS_T\'"> <md-input-container flex="40" flex-sm="100" flex-xs="100" class="readonly"> <label>{{\'document.supplementStatus\' | translate}}</label> <hois-classifier-value ng-model="record.supplementStatus" main-classifier-code="LOPUDOK_STAATUS" model-value-attr="code"></hois-classifier-value> </md-input-container> </div> <div layout="row" ng-if="record.supplementStatus === \'LOPUDOK_STAATUS_T\'"> <md-input-container flex="40" flex-sm="100" flex-xs="100" class="readonly"> <label>{{\'document.usedForms\' | translate}}</label> <hois-value value="record.forms.join(\', \')"></hois-value> </md-input-container> </div> <a ng-href="{{viewPdfUrl}}" target="_blank" class="md-button md-raised" ng-if="viewPdfUrl">{{\'document.button.showPdf\' | translate}}</a> <md-button ng-click="print()" class="md-raised md-primary" ng-if="record.diplomaStatus === \'LOPUDOK_STAATUS_T\' && viewPdfUrl"> {{\'main.button.print\' | translate}} </md-button> </fieldset> <br> <fieldset> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'document.english\' | translate}}</legend> <br> <div layout="row" ng-if="record.diplomaStatus === \'LOPUDOK_STAATUS_T\' && record.supplementStatusEn !== \'LOPUDOK_STAATUS_T\'"> <md-input-container flex="20" flex-sm="100" flex-xs="100"> <label>{{\'document.freeForms\' | translate}}</label> <input type="number" ng-model="formDataEn.numeral" min="0" required> </md-input-container> <hois-free-forms value="record.formsEn"></hois-free-forms> </div> <div layout="row" ng-if="record.diplomaStatus === \'LOPUDOK_STAATUS_T\' && record.supplementStatusEn !== \'LOPUDOK_STAATUS_T\'"> <md-input-container flex="20" flex-sm="100" flex-xs="100"> <label>{{\'document.freeExtraForms\' | translate}}</label> <input type="number" ng-model="formDataEn.additionalNumeral" min="0"> </md-input-container> <hois-free-forms value="record.freeExtraForms"></hois-free-forms> </div> <div layout="row" ng-if="record.supplementStatusEn === \'LOPUDOK_STAATUS_T\'"> <md-input-container flex="40" flex-sm="100" flex-xs="100" class="readonly"> <label>{{\'document.supplementStatus\' | translate}}</label> <hois-classifier-value ng-model="record.supplementStatusEn" main-classifier-code="LOPUDOK_STAATUS" model-value-attr="code"></hois-classifier-value> </md-input-container> </div> <div layout="row" ng-if="record.supplementStatusEn === \'LOPUDOK_STAATUS_T\'"> <md-input-container flex="40" flex-sm="100" flex-xs="100" class="readonly"> <label>{{\'document.usedForms\' | translate}}</label> <hois-value value="record.formsEn.join(\', \')"></hois-value> </md-input-container> </div> <a ng-href="{{viewPdfUrlEn}}" target="_blank" class="md-button md-raised" ng-if="viewPdfUrlEn">{{\'document.button.showPdf\' | translate}}</a> <md-button ng-click="print(\'EN\')" class="md-raised md-primary" ng-if="record.diplomaStatus === \'LOPUDOK_STAATUS_T\' && viewPdfUrlEn"> {{\'main.button.print\' | translate}} </md-button> </fieldset> </form> <div layout="row"> <md-button ng-click="back(\'#/documents/supplements\')" class="md-raised">{{\'main.button.back\' | translate}}</md-button> </div> </div> </div>'),a.put("document/supplement.search.html",'<div ng-cloak> <div ng-include="\'document/templates/navbar.tmpl.html\'"></div> </div> <div class="ois-form-layout-padding ois-form-layout" ng-cloak> <div flex> <fieldset> <legend class="md-title-small">{{\'main.searchlabel\' | translate}}</legend> <form ng-submit="loadData()" novalidate> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="45" flex-sm="100" flex-xs="100"> <label>{{\'document.directive\' | translate}}</label> <hois-select ng-model="criteria.directiveId" values="formState.directives" show-property="display"></hois-select> </md-input-container> <div flex="50" flex-sm="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <hois-autocomplete ng-model="autocomplete.student" method="students" additional-query-params="{finishing: true}" label="document.student"></hois-autocomplete> </div> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="45" flex-sm="100" flex-xs="100"> <label>{{isHigher ? \'document.diplomaStatus\' : \'document.diplomaStatusVocational\' | translate}}</label> <hois-classifier-select ng-model="criteria.diplomaStatus" main-classifier-code="LOPUDOK_STAATUS" model-value-attr="code"></hois-classifier-select> </md-input-container> <div flex="50" flex-sm="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <hois-autocomplete ng-if="isHigher" ng-model="autocomplete.curriculumVersion" method="curriculumversions" label="document.curriculumVersion"></hois-autocomplete> <hois-autocomplete ng-if="!isHigher" ng-model="autocomplete.curriculumVersion" method="curriculumversions" label="document.curriculumVersionVocational"></hois-autocomplete> </div> </div> <div layout="row"> <md-button type="submit" class="md-raised md-primary">{{\'main.button.search\' | translate}}</md-button> <md-button class="md-raised" ng-click="clearCriteria()">{{\'main.button.clear\' | translate}}</md-button> </div> </form> </fieldset> </div> </div> <div layout-padding> <div flex> <md-table-container> <table md-table md-progress="tabledata.$promise"> <thead md-head md-order="criteria.order" md-on-reorder="loadData"> <tr md-row> <th md-column>{{\'document.student\' | translate}}</th> <th md-column>{{isHigher ? \'document.diplomaNr\' : \'document.diplomaNrVocational\' | translate}}</th> <th md-column>{{isHigher ? \'document.diplomaStatus\' : \'document.diplomaStatusVocational\' | translate}}</th> <th md-column>{{isHigher ? \'document.supplementStatus\' : \'document.supplementStatusVocational\' | translate}}</th> <th md-column ng-if="isHigher">{{\'document.supplementStatusEn\' | translate}}</th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="row in tabledata.content" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell> <a md-class="md-primary change-button" ng-href="#/documents/supplements{{isHigher ? \'\' : \'/vocational\'}}/{{::row.directiveStudentId}}"> {{::row.fullname}} </a> </td> <td md-cell>{{::row.diplomaNr}}</td> <td md-cell>{{currentLanguageNameField(row.diplomaStatus)}}</td> <td md-cell>{{currentLanguageNameField(row.supplementStatus)}}</td> <td md-cell ng-if="isHigher">{{currentLanguageNameField(row.supplementStatusEn)}}</td> </tr> </tbody> </table> </md-table-container> <md-table-pagination md-limit="criteria.size" md-limit-options="[10, 20, 50]" md-page="criteria.page" md-total="{{tabledata.totalElements}}" md-on-paginate="loadData" md-label="{page: \'{{\'main.page\' | translate}}:\', rowsPerPage: \'{{\'main.rowPerPage\' | translate}}:\', of: \'{{\'main.of\' | translate}}\'}" md-page-select></md-table-pagination> </div> </div>'),a.put("document/supplement.vocational.html",'<div class="ois-form-layout-padding ois-form-layout" ng-cloak> <div flex> <form layout="column"> <div layout="row"> <md-input-container flex="40" flex-sm="100" flex-xs="100" class="readonly"> <label>{{\'document.student\' | translate}}</label> <hois-value value="record.fullname"></hois-value> </md-input-container> </div> <div layout="row"> <md-input-container flex="40" flex-sm="100" flex-xs="100" class="readonly"> <label>{{\'document.diplomaNrVocational\' | translate}}</label> <hois-value value="record.diplomaNr"></hois-value> </md-input-container> </div> <div layout="row"> <md-input-container flex="40" flex-sm="100" flex-xs="100" class="readonly"> <label>{{\'document.diplomaStatusVocational\' | translate}}</label> <hois-classifier-value ng-model="record.diplomaStatus" main-classifier-code="LOPUDOK_STAATUS" model-value-attr="code"></hois-classifier-value> </md-input-container> </div> <div layout="row" ng-if="record.diplomaStatus === \'LOPUDOK_STAATUS_T\'"> <md-input-container flex="20" flex-sm="100" flex-xs="100"> <label>{{\'document.freeForms\' | translate}}</label> <input type="number" ng-model="formData.numeral" min="0" required> </md-input-container> <hois-free-forms value="record.forms"></hois-free-forms> </div> <div layout="row" ng-if="record.diplomaStatus === \'LOPUDOK_STAATUS_T\'"> <md-input-container flex="20" flex-sm="100" flex-xs="100"> <label>{{\'document.freeExtraForms\' | translate}}</label> <input type="number" ng-model="formData.additionalNumeral" min="0"> </md-input-container> <hois-free-forms value="record.freeExtraForms"></hois-free-forms> </div> <div layout="row"> <md-input-container flex="45" flex-sm="100" flex-xs="100"> <label>{{\'document.signer1\' | translate}}</label> <hois-select ng-model="contentData.signer1Id" values="formState.signers" show-property="display" ng-change="updatePdfUrl()" required></hois-select> </md-input-container> </div> </form> <div layout="row"> <a ng-href="{{viewPdfUrl}}" target="_blank" class="md-button md-raised" ng-if="viewPdfUrl">{{\'document.button.showPdf\' | translate}}</a> <md-button ng-click="print()" class="md-raised md-primary" ng-if="record.diplomaStatus === \'LOPUDOK_STAATUS_T\' && viewPdfUrl">{{\'main.button.print\' | translate}}</md-button> <md-button ng-click="back(\'#/documents/supplements/vocational\')" class="md-raised">{{\'main.button.back\' | translate}}</md-button> </div> </div> </div>'),a.put("ehis/logentry.view.dialog.html",'<md-dialog aria-label="grade add dialog" flex="75" flex-xs="100"> <md-toolbar> <div class="md-toolbar-tools"> <h2 flex>{{\'ehis.message.\' + record.wsName | translate}}</h2> <span flex> <hois-value class="md-button md-raised" ng-if="record.directive.id" value="record.directive.nameEt" href-value="\'#/directives/\' + record.directive.id + \'/view\'"></hois-value> <hois-value class="md-button md-raised" ng-if="record.teacher.id" value="record.teacher.nameEt" href-value="\'#/teachers/\' + record.teacher.id"></hois-value> </span> <md-button class="md-icon-button" ng-click="cancel()"> <md-icon md-font-set="material-icons">close</md-icon> </md-button> </div> </md-toolbar> <md-dialog-content> <div class="md-dialog-content"> <div layout="row"> <md-input-container> <label>{{\'ehis.message.request\' | translate}}</label>&nbsp; <pre><hois-value value="record.request | limitTo:requestLength"></hois-value></pre> <a ng-click="showAll(true)" ng-if="requestLength">&hellip;</a> </md-input-container> </div> <hr> <div layout="row"> <md-input-container> <label>{{\'ehis.message.response\' | translate}}</label>&nbsp; <pre><hois-value value="record.response | limitTo:responseLength"></hois-value></pre> <a ng-click="showAll(false)" ng-if="responseLength">&hellip;</a> </md-input-container> </div> </div> </md-dialog-content> <md-dialog-actions layout="row" layout-align="start center"> <md-button ng-click="cancel()" class="md-raised">{{\'main.button.back\' | translate}}</md-button> </md-dialog-actions> </md-dialog>'),a.put("ehis/logs.view.html",'<div layout-padding> <div flex> <fieldset> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'main.searchlabel\' | translate}}</legend> <form ng-submit="loadData()" layout="column" name="ehisLogForm"> <div flex> <div layout="column" layout-gt-md="row"> <md-input-container flex="100" flex-gt-md="45"> <label>{{\'ehis.message.name\' | translate}}</label> <md-select ng-model="criteria.messageType"> <md-option md-option-empty></md-option> <md-option ng-repeat="val in messageTypes" ng-value="val"> {{\'ehis.message.\' + val | translate}} </md-option> </md-select> </md-input-container> <div flex="50" flex-offset="0" flex-offset-gt-md="5"> <label class="common-label">{{\'ehis.message.sentDatesRange\' | translate}}</label> <md-input-container flex="100" flex-gt-md="25"> <label>{{\'main.from\' | translate}}</label> <md-datepicker ng-model="criteria.from" md-max-date="criteria.thru"></md-datepicker> </md-input-container> <md-input-container flex flex-offset="5"> <label>{{\'main.thru\' | translate}}</label> <md-datepicker ng-model="criteria.thru" md-min-date="criteria.from"></md-datepicker> </md-input-container> </div> </div> <div layout="column" layout-gt-sm="row"> <md-input-container flex="45"> <md-checkbox ng-model="criteria.errors" aria-label="show only errors"> {{\'ehis.message.onlyErrors\' | translate}} </md-checkbox> </md-input-container> <div flex="35" ng-if="!criteria.messageType || messageTypesWithTeacher.indexOf(criteria.messageType) !== -1"> <hois-autocomplete label="{{auth.higher ? \'teacher.labelHigher\' : \'teacher.labelVocational\'}}" ng-model="criteria.teacher" method="teachers"></hois-autocomplete> </div> </div> </div> <div layout="row"> <md-button type="submit" class="md-raised md-primary">{{\'main.button.search\' | translate}}</md-button> <md-button class="md-raised" ng-click="clearCriteria()">{{\'main.button.clear\' | translate}}</md-button> </div> </form> </fieldset> </div> </div> <div layout-padding> <div flex> <md-table-container> <table md-table md-progress="tabledata.$promise"> <thead md-head md-order="criteria.order" md-on-reorder="loadData"> <tr md-row> <th md-column>{{\'ehis.message.name\' | translate}}</th> <th md-column md-order-by="inserted">{{\'ehis.message.time\' | translate}}</th> <th md-column>{{\'ehis.message.directive\' | translate}}</th> <th md-column>{{\'ehis.message.error\' | translate}}</th> <th md-column>{{\'ehis.message.message\' | translate}}</th> <th md-column>{{\'ehis.message.insertedBy\' | translate}}</th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="row in tabledata.content" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell> <a md-no-ink class="md-primary" ng-click="logentry(row)">{{::(\'ehis.message.\' + row.wsName) | translate}}</a> </td> <td md-cell>{{::row.inserted | hoisDateTime}}</td> <td md-cell>{{currentLanguageNameField(row.directive)}}</td> <td md-cell>{{row.error ? \'main.yes\' : \'main.no\' | translate}}</td> <td md-cell>{{::row.logTxt}}</td> <td md-cell>{{::row.insertedBy}}</td> </tr> </tbody> </table> </md-table-container> <md-table-pagination md-limit="criteria.size" md-limit-options="[10, 20, 50]" md-page="criteria.page" md-total="{{tabledata.totalElements}}" md-on-paginate="loadData" md-label="{page: \'{{\'main.page\' | translate}}:\', rowsPerPage: \'{{\'main.rowPerPage\' | translate}}:\', of: \'{{\'main.of\' | translate}}\' }" md-page-select></md-table-pagination> </div> </div>'),
a.put("ehis/student.html","<div layout-padding> <div flex> <form ng-submit=\"exportStudents()\" layout=\"column\" name=\"studentExportForm\"> <div flex> <div layout=\"row\"> <md-input-container flex=\"25\" flex-md=\"100\" flex-sm=\"100\" flex-xs=\"100\"> <label>{{'ehis.student.dataType' | translate}}</label> <md-select ng-model=\"criteria.dataType\" required> <md-option ng-repeat=\"val in dataTypes\" ng-value=\"val\"> {{ 'ehis.student.' + val | translate}} </md-option> </md-select> </md-input-container> </div> <div layout=\"row\"> <md-input-container flex=\"20\" flex-sm=\"100\" flex-xs=\"100\" ng-if=\"displayDates.indexOf(criteria.dataType) !== -1\"> <label>{{'ehis.student.sentDatesRange' | translate}}</label> <input type=\"hidden\"> </md-input-container> <div flex=\"33\" ng-if=\"displayDates.indexOf(criteria.dataType) !== -1\"> <md-input-container flex> <label>{{'main.from' | translate}}</label> <md-datepicker ng-model=\"criteria.from\" md-max-date=\"criteria.thru\" required></md-datepicker> </md-input-container> <md-input-container flex> <label>{{'main.thru' | translate}}</label> <md-datepicker ng-model=\"criteria.thru\" md-min-date=\"criteria.from\" required></md-datepicker> </md-input-container> </div> </div> </div> <div layout=\"row\"> <md-button type=\"submit\" class=\"md-raised md-primary\">{{'ehis.student.sendToEhis' | translate}}</md-button> </div> </form> </div> </div> <div ng-if=\"result.length > 0\"> <div layout-padding> <fieldset> <legend md-colors=\"{color: 'primary-800'}\" class=\"md-title-small\">{{'ehis.student.result' | translate}}</legend> <div flex> <md-table-container> <table md-table> <thead md-head> <tr md-row> <th md-column>{{'ehis.student.name' | translate}}</th> <th md-column>{{'ehis.student.idcode' | translate}}</th> <th md-column>{{'ehis.student.curriculum' | translate}}</th> <th md-column ng-if=\"criteria.dataType === 'GRADUATION'\">{{'ehis.student.docNr' | translate}}</th> <th md-column ng-if=\"criteria.dataType === 'GRADUATION'\">{{'ehis.student.cumLaude' | translate}}</th> <th md-column ng-if=\"criteria.dataType === 'GRADUATION'\">{{'ehis.student.academicNr' | translate}}</th> <th md-column ng-if=\"criteria.dataType === 'CURRICULA_FULFILMENT'\">{{'ehis.student.percentage' | translate}}</th> <th md-column ng-if=\"criteria.dataType === 'CURRICULA_FULFILMENT'\">{{'ehis.student.points' | translate}}</th> <th md-column ng-if=\"criteria.dataType === 'CURRICULA_FULFILMENT'\">{{'ehis.student.lastPeriod' | translate}}</th> <th md-column ng-if=\"criteria.dataType === 'FOREIGN_STUDY'\">{{'ehis.student.fromDate' | translate}}</th> <th md-column ng-if=\"criteria.dataType === 'FOREIGN_STUDY'\">{{'ehis.student.toDate' | translate}}</th> <th md-column ng-if=\"criteria.dataType === 'FOREIGN_STUDY'\">{{'ehis.student.abroadPurpose' | translate}}</th> <th md-column ng-if=\"criteria.dataType === 'FOREIGN_STUDY'\">{{'ehis.student.points' | translate}}</th> <th md-column ng-if=\"criteria.dataType === 'FOREIGN_STUDY'\">{{'ehis.student.schoolName' | translate}}</th> <th md-column ng-if=\"criteria.dataType === 'FOREIGN_STUDY'\">{{'ehis.student.country' | translate}}</th> <th md-column ng-if=\"criteria.dataType === 'FOREIGN_STUDY'\">{{'ehis.student.abroadProgramme' | translate}}</th> <th md-column ng-if=\"criteria.dataType === 'VOTA'\">{{'ehis.student.votaConfirmDate' | translate}}</th> <th md-column ng-if=\"criteria.dataType === 'VOTA'\">{{'ehis.student.points' | translate}}</th> <th md-column ng-if=\"criteria.dataType === 'VOTA'\">{{'ehis.student.votaType' | translate}}</th> <th md-column ng-if=\"criteria.dataType === 'VOTA'\">{{'ehis.student.schoolName' | translate}}</th> <th md-column ng-if=\"criteria.dataType === 'VOTA'\">{{'ehis.student.gradeDate' | translate}}</th> <th md-column ng-if=\"criteria.dataType === 'VOTA'\">{{'ehis.student.votaCountry' | translate}}</th> <th md-column>{{'ehis.student.error' | translate}}</th> <th md-column>{{'ehis.student.message' | translate}}</th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat=\"row in result\" ng-class-odd=\"'odd'\" ng-class-even=\"'even'\"> <td md-cell><a ng-href=\"/#/students/{{::row.studentId}}/main\">{{::row.name}}</a></td> <td md-cell>{{::row.idcode}}</td> <td md-cell>{{::row.curriculum}}</td> <td md-cell ng-if=\"criteria.dataType === 'GRADUATION'\">{{::row.docNr}}</td> <td md-cell ng-if=\"criteria.dataType === 'GRADUATION'\">{{row.cumLaude ? 'main.yes' : 'main.no' | translate}}</td> <td md-cell ng-if=\"criteria.dataType === 'GRADUATION'\"> {{::row.academicNr}} <span ng-if=\"row.extraNr && row.extraNr.length > 0\"> ({{'ehis.student.extraNr' | translate}}: {{row.extraNr.join(', ')}}) </span> </td> <td md-cell ng-if=\"criteria.dataType === 'CURRICULA_FULFILMENT'\">{{::row.percentage}}</td> <td md-cell ng-if=\"criteria.dataType === 'CURRICULA_FULFILMENT'\">{{::row.points}}</td> <td md-cell ng-if=\"criteria.dataType === 'CURRICULA_FULFILMENT'\">{{::row.lastPeriod ? 'main.yes' : 'main.no' | translate}}</td> <td md-cell ng-if=\"criteria.dataType === 'FOREIGN_STUDY'\">{{::row.fromDate | hoisDate}}</td> <td md-cell ng-if=\"criteria.dataType === 'FOREIGN_STUDY'\">{{::row.toDate | hoisDate}}</td> <td md-cell ng-if=\"criteria.dataType === 'FOREIGN_STUDY'\"> <hois-classifier-value ng-model=\"row.abroadPurpose\" main-classifier-code=\"VALISOPE_EESMARK\"></hois-classifier-value> </td> <td md-cell ng-if=\"criteria.dataType === 'FOREIGN_STUDY'\">{{::row.points}}</td> <td md-cell ng-if=\"criteria.dataType === 'FOREIGN_STUDY'\">{{::row.schoolName}}</td> <td md-cell ng-if=\"criteria.dataType === 'FOREIGN_STUDY'\"> <hois-classifier-value ng-model=\"row.country\" main-classifier-code=\"RIIK\"></hois-classifier-value> </td> <td md-cell ng-if=\"criteria.dataType === 'FOREIGN_STUDY'\"> <hois-classifier-value ng-model=\"row.abroadProgramme\" main-classifier-code=\"VALISKOOL_PROGRAMM\"></hois-classifier-value> </td> <td md-cell ng-if=\"criteria.dataType === 'VOTA'\">{{::row.confirmed | hoisDate}}</td> <td md-cell ng-if=\"criteria.dataType === 'VOTA'\">{{::row.credits}}</td> <td md-cell ng-if=\"criteria.dataType === 'VOTA'\">{{::row.isFormalLearning ? 'ehis.student.formal' : 'ehis.student.informal' | translate}}</td> <td md-cell ng-if=\"criteria.dataType === 'VOTA'\">{{::row.schoolNameEt}}</td> <td md-cell ng-if=\"criteria.dataType === 'VOTA'\">{{::row.gradeDate | hoisDate}}</td> <td md-cell ng-if=\"criteria.dataType === 'VOTA'\"> <hois-classifier-value ng-model=\"row.countryCode\" main-classifier-code=\"RIIK\"></hois-classifier-value> </td> <td md-cell>{{row.error === true ? ('main.no' | translate) : (row.error === false ? ('main.yes' | translate) : '')}}</td> <td md-cell>{{::row.message}}</td> </tr> </tbody> </table> </md-table-container> </div> </fieldset> </div> </div>"),a.put("ehis/teacher.export.html",'<div layout-padding> <div flex> <form ng-submit="exportTeachers()" layout="column" name="teacherExportForm"> <div flex> <div flex="60" flex-sm="100" flex-xs="100" layout="row" class="horizontal-radio-group"> <md-input-container flex="20" flex-xs="100"> <label class="md-required common-label">{{\'ehis.teacher.radioData\' | translate}}</label> </md-input-container> <md-input-container layout="row" layout-align="start center" flex="60"> <md-radio-group name="datachoice" ng-model="teacher.allDates" required layout="row"> <md-radio-button ng-value="true">{{ \'ehis.teacher.allData\' | translate }}</md-radio-button> <md-radio-button ng-value="false">{{ \'ehis.teacher.changedData\' | translate }}</md-radio-button> </md-radio-group> </md-input-container> </div> <div flex-xs="100" flex-gt-xs="100" layout="column" ng-if="!teacher.allDates"> <div layout="row"> <md-input-container flex="25" flex-md="100" flex-sm="100" flex-xs="100"> <label>{{\'ehis.teacher.importRange\' | translate}}</label> <input type="hidden"> </md-input-container> <md-input-container flex="15" flex-md="100" flex-sm="100" flex-xs="100"> <label>{{\'main.from\' | translate}}</label> <md-datepicker ng-required="!teacher.allDates" ng-model="teacher.changeDateFrom" md-max-date="teacher.changeDateTo"></md-datepicker> </md-input-container> <md-input-container flex="15" flex-md="100" flex-sm="100" flex-xs="100"> <label>{{\'main.thru\' | translate}}</label> <md-datepicker ng-required="!teacher.allDates" ng-model="teacher.changeDateTo" md-min-date="teacher.changeDateFrom"></md-datepicker> </md-input-container> </div> </div> <div layout="row"> <div flex="60"> <md-checkbox ng-model="teacher.subjectData" class="md-primary"> {{(higher ? \'ehis.teacher.subjectData\' : \'ehis.teacher.moduleData\') | translate}} </md-checkbox> </div> </div> <div layout="row"> <md-button type="submit" class="md-raised md-primary">{{\'ehis.teacher.sendToEhis\' | translate}}</md-button> </div> </div> </form> </div> </div> <div ng-if="result.length > 0"> <div layout-padding> <div flex> {{\'ehis.teacher.response\' | translate}} </div> </div> <div layout-padding> <div flex> <md-table-container> <table md-table md-progress="result"> <thead md-head> <tr md-row> <th md-column>{{\'ehis.teacher.name\' | translate}}</th> <th md-column>{{\'ehis.teacher.message\' | translate}}</th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="row in result" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell>{{::row.fullName}}</td> <td md-cell>{{::row.message}}</td> </tr> </tbody> </table> </md-table-container> </div> </div> </div>'),a.put("exam/edit.html",'<div class="ois-form-layout-padding ois-form-layout" ng-cloak> <div flex> <form name="examForm" class="nomargin"> <div layout="row" class="form-readonly"> <md-input-container flex="20" flex-sm="100" flex-xs="100" ng-if="!record.id"> <label class="textInput">{{\'exam.studyPeriod\' | translate}}</label> <hois-select ng-model="formState.studyPeriod" ng-change="studyPeriodChanged()" values="formState.studyPeriods" required></hois-select> </md-input-container> <md-input-container flex="20" flex-sm="100" flex-xs="100" ng-if="record.id"> <label class="textInput">{{\'exam.studyPeriod\' | translate}}</label> <hois-value value="currentLanguageNameField(formState.subjectStudyPeriod.studyPeriod)"></hois-value> </md-input-container> <md-input-container flex="45" flex-sm="100" flex-xs="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0" ng-if="!record.id"> <label class="textInput">{{\'exam.subjectTeacher\' | translate}}</label> <md-select ng-model="formState.subjectStudyPeriodId" ng-change="subjectStudyPeriodChanged()" aria-label="{{\'exam.subjectTeacher\' | translate}}" required> <md-option ng-value="row.id" ng-repeat="row in formState.subjectStudyPeriods | orderBy: \'subject.\' + currentLanguageNameField()"> {{currentLanguageNameField(row.subject)+ \' - \' + (row.teacherNames || []).join(\', \')}} </md-option> </md-select> </md-input-container> <md-input-container flex="45" flex-sm="100" flex-xs="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0" ng-if="record.id"> <label class="textInput">{{\'exam.subjectTeacher\' | translate}}</label> <hois-value value="currentLanguageNameField(formState.subjectStudyPeriod.subject)+ \' - \' + (formState.subjectStudyPeriod.teacherNames || []).join(\', \')"></hois-value> </md-input-container> <md-input-container flex="15" flex-sm="100" flex-xs="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label class="textInput">{{\'exam.assessment\' | translate}}</label> <hois-classifier-value ng-model="formState.subjectStudyPeriod.assessment" main-classifier-code="HINDAMISVIIS"></hois-classifier-value> </md-input-container> </div> <br> <div layout="row" class="form-readonly"> <md-input-container flex="15" flex-sm="100" flex-xs="100" flex-offset-xs="0" flex-offset-sm="0"> <label class="textInput">{{\'exam.type\' | translate}}</label> <hois-classifier-select ng-model="record.type" ng-disabled="record.students && record.students.length" ng-change="examTypeChanged()" required main-classifier-code="SOORITUS" model-value-attr="code"></hois-classifier-select> </md-input-container> <md-input-container flex="65" flex-sm="100" flex-xs="100" flex-offset="10" flex-offset-xs="0" flex-offset-sm="0"> <label class="textInput">{{\'exam.name\' | translate}}</label> <hois-value value="record.name"></hois-value> </md-input-container> </div> <div layout="row"> <md-input-container flex="20" flex-md="100" flex-sm="100" flex-xs="100"> <label>{{\'exam.date\' | translate}}</label> <md-datepicker name="startDate" ng-disabled="!formState.allEditable" md-min-date="formState.minDate" ng-model="record.startDate" required></md-datepicker> <div ng-messages="examForm.startDate.$error"> <div ng-message="mindate"> {{\'exam.message.startinpast\' | translate}} </div> </div> </md-input-container> <md-input-container flex="10" flex-sm="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'main.start\' | translate}}</label> <hois-time required ng-readonly="!formState.allEditable" ng-model="record.startTime" name="startTime" placeholder="{{\'main.timePlaceholder\' | translate}}"></hois-time> <div ng-messages="examForm.startTime.$error"> <div ng-message="time"> {{\'main.messages.error.time\' | translate}} </div> </div> </md-input-container> <md-input-container flex="10" flex-sm="100" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'main.end\' | translate}}</label> <hois-time required ng-readonly="!formState.allEditable" ng-model="record.endTime" name="endTime" placeholder="{{\'main.timePlaceholder\' | translate}}"></hois-time> <div ng-messages="examForm.endTime.$error"> <div ng-message="time"> {{\'main.messages.error.time\' | translate}} </div> </div> </md-input-container> <hois-autocomplete label="exam.room" ng-model="record.room" method="rooms" warning-param="isOccupied" required flex="40" flex-sm="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0" additional-query-params="{isStudy: true, occupied: true, date: record.startDate, \r\n            startTime: record.startTime ? getLocalDateTime(record.startTime) : null, endTime: record.startTime ? getLocalDateTime(record.endTime) : null}"></hois-autocomplete> </div> <div layout="row"> <md-input-container flex="20" flex-md="100" flex-sm="100" flex-xs="100"> <label>{{\'exam.deadline\' | translate}}</label> <md-datepicker ng-required="record.deadlineTime" md-max-date="record.startDate" ng-model="record.deadlineDate"></md-datepicker> </md-input-container> <md-input-container flex="10" flex-sm="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'exam.deadlineTime\' | translate}}</label> <hois-time ng-required="record.deadlineDate" ng-model="record.deadlineTime" name="deadlineTime" placeholder="{{\'main.timePlaceholder\' | translate}}"></hois-time> <div ng-messages="examForm.deadlineTime.$error"> <div ng-message="time"> {{\'main.messages.error.time\' | translate}} </div> </div> </md-input-container> <md-input-container flex="40" flex-sm="100" flex-offset="15" flex-offset-xs="0" flex-offset-sm="0"> <label class="textInput">{{\'exam.places\' | translate}}</label> <input ng-model="record.places" name="places" type="number" min="0" max="9999"> <div ng-messages="examForm.places.$error"> <div ng-message="min"> {{\'main.messages.error.min\' | translate: {min: 0} }} </div> <div ng-message="max"> {{\'main.messages.error.max\' | translate: {max: 9999} }} </div> </div> </md-input-container> </div> <div layout="row"> <md-input-container flex="90" flex-sm="100" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'exam.addInfo\' | translate}}</label> <textarea ng-model="record.addInfo" name="addInfo" md-maxlength="4000" max-rows="2"></textarea> <div ng-messages="examForm.addInfo.$error"> <div ng-message="md-maxlength"> {{\'main.messages.error.maxlength\' | translate}} </div> </div> </md-input-container> </div> <md-autocomplete ng-if="record.id" flex="20" flex-sm="100" flex-xs="100" flex-offset-xs="0" flex-offset-sm="0" ng-disabled="record.places >= 0 && record.students.length >= record.places" md-floating-label="{{\'exam.addStudent\' | translate}}" md-min-length="2" md-items="item in lookupStudents(queryText)" md-item-text="item.fullname" md-search-text="queryText" md-selected-item="formState.selectedStudent" md-selected-item-change="addStudent()" md-no-cache> <md-item-template> <span md-highlight-text="queryText" md-highlight-flags="^i">{{item.fullname}}</span> </md-item-template> <md-not-found> {{\'main.messages.error.notFound\' | translate}} </md-not-found> </md-autocomplete> <br> <md-table-container ng-if="record.id"> <table md-table class="secondary-table"> <thead md-head md-order="formState.order"> <tr md-row> <th md-column>{{\'main.rowno\' | translate}}</th> <th md-column>{{\'exam.student.fullname\' | translate}}</th> <th md-column md-order-by="curriculumVersion.{{currentLanguageNameField()}}">{{\'exam.student.curriculum\' | translate}}</th> <th md-column md-order-by="studentGroup">{{\'exam.student.studentGroup\' | translate}}</th> <th md-column md-order-by="registered">{{\'exam.student.registered\' | translate}}</th> <th></th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="row in formState.students | orderBy: formState.order" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell>{{::row.rowno}}</td> <td md-cell> <a class="md-primary" ng-href="#/students/{{::row.studentId}}/main">{{::row.fullname}}</a> </td> <td md-cell>{{currentLanguageNameField(row.curriculumVersion)}}</td> <td md-cell>{{::row.studentGroup}}</td> <td md-cell>{{row.registered | hoisDate}}</td> <td md-cell> <a ng-if="!row.grade" ng-click="deleteStudent(row)" md-no-ink class="remove">&times;</a> </td> </tr> </tbody> </table> </md-table-container> <div layout="row"> <md-button class="md-raised md-primary" ng-click="update()">{{\'main.button.save\' | translate}}</md-button> <md-button class="md-raised" ng-if="record.id && formState.canDelete" ng-click="delete()">{{\'main.button.delete\' | translate}}</md-button> <md-button ng-click="back(\'#/examTimes\', examForm)" class="md-raised">{{\'main.button.back\' | translate}}</md-button> </div> </form> </div> </div>'),a.put("exam/registration.student.html",'<div layout-padding> <div flex> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="45" flex-sm="100" flex-xs="100"> <label>{{\'exam.studyPeriod\' | translate}}</label> <hois-select ng-model="criteria.studyPeriod" ng-change="studyPeriodChanged()" values="formState.studyPeriods"></hois-select> </md-input-container> </div> <br> <md-table-container> <table md-table md-progress="tabledata.$promise"> <thead md-head md-order="criteria.order" md-on-reorder="loadData"> <tr md-row> <th md-column md-order-by="s.code,{{currentLanguage()===\'en\' ? \'s.nameEn\' : \'s.nameEt\'}}">{{\'exam.subject\' | translate}}</th> <th md-column>{{\'exam.teacher\' | translate}}</th> <th md-column md-order-by="sm.{{currentLanguageNameField()}}">{{\'exam.assessment\' | translate}}</th> <th md-column md-order-by="tp.{{currentLanguageNameField()}}">{{\'exam.type\' | translate}}</th> <th md-column md-order-by="te.start">{{\'exam.when\' | translate}}</th> <th md-column>{{\'exam.room\' | translate}}</th> <th md-column md-order-by="deadline">{{\'exam.deadline\' | translate}}</th> <th md-column>{{\'exam.freePlaces\' | translate}}</th> <th md-column>{{\'exam.addInfo\' | translate}}</th> <th></th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="row in tabledata.content" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell>{{currentLanguageNameField(row.subject)}}</td> <td md-cell> <div ng-repeat="it in row.teacherNames"> {{it}} </div> </td> <td md-cell>{{currentLanguageNameField(row.assessment)}}</td> <td md-cell>{{currentLanguageNameField(row.type)}}</td> <td md-cell>{{row.start | hoisDateTimeMin}}</td> <td md-cell> <div ng-repeat="it in row.rooms"> {{it}} </div> </td> <td md-cell>{{row.deadline | hoisDateTimeMin}}</td> <td md-cell>{{row.freePlaces}}</td> <td md-cell>{{row.addInfo}}</td> <td md-cell> <md-button ng-if="!row.registered && row.canChange && (row.freePlaces === null || row.freePlaces > 0)" md-no-ink class="md-primary change-button" ng-click="register(row)">{{\'exam.register\' | translate}}</md-button> <md-button ng-if="row.registered && row.canChange && row.protocol === null" md-no-ink class="md-primary change-button" ng-click="unregister(row)">{{\'exam.unregister\' | translate}}</md-button> <span ng-if="row.registered && row.protocol !== null">{{\'exam.connectedProtocol\' | translate}}</span> </td> </tr> </tbody> </table> </md-table-container> <md-table-pagination md-limit="criteria.size" md-limit-options="[10, 20, 50]" md-page="criteria.page" md-total="{{tabledata.totalElements}}" md-on-paginate="loadData" md-label="{page: \'{{\'main.page\' | translate}}:\', rowsPerPage: \'{{\'main.rowPerPage\' | translate}}:\', of: \'{{\'main.of\' | translate}}\'}" md-page-select></md-table-pagination> </div> </div>'),a.put("exam/search.html",'<div class="ois-form-layout-padding ois-form-layout" ng-cloak> <div flex> <fieldset> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'main.searchlabel\' | translate}}</legend> <form ng-submit="loadData()" novalidate> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="45" flex-sm="100" flex-xs="100"> <label>{{\'exam.studyPeriod\' | translate}}</label> <hois-select ng-model="criteria.studyPeriod" values="formState.studyPeriods"></hois-select> </md-input-container> <md-input-container flex="50" flex-sm="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label class="textInput">{{\'exam.subject\' | translate}}</label> <hois-select ng-model="criteria.subject" type="subject" criteria="{withCredits: false}"></hois-select> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <div layout="column" flex="45" flex-sm="100" flex-xs="100"> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex-sm="100" flex-xs="100"> <label>{{\'main.from\' | translate}}</label> <md-datepicker ng-model="criteria.from" md-max-date="criteria.thru"></md-datepicker> </md-input-container> <md-input-container flex-sm="100" flex-xs="100"> <label>{{\'main.thru\' | translate}}</label> <md-datepicker ng-model="criteria.thru" md-min-date="criteria.from"></md-datepicker> </md-input-container> </div> </div> <md-input-container flex="50" flex-sm="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0" ng-if="auth.isAdmin()"> <label class="textInput">{{\'exam.teacher\' | translate}}</label> <hois-select ng-model="criteria.teacher" type="teacher" criteria="{higher: true}"></hois-select> </md-input-container> </div> <div layout="row"> <md-button type="submit" class="md-raised md-primary">{{\'main.button.search\' | translate}}</md-button> <md-button class="md-raised" ng-click="clearCriteria()">{{\'main.button.clear\' | translate}}</md-button> <md-button class="md-raised" ng-if="formState.canAdd" ng-href="#/exams/new">{{\'main.button.create\' | translate}}</md-button> </div> <div flex-xs="0" flex-gt-xs="0" flex-gt-sm="50"></div> </form> </fieldset> </div> </div> <div layout-padding> <div flex> <md-table-container> <table md-table md-progress="tabledata.$promise"> <thead md-head md-order="criteria.order" md-on-reorder="loadData"> <tr md-row> <th md-column md-order-by="s.code,{{currentLanguage()===\'en\' ? \'s.nameEn\' : \'s.nameEt\'}}">{{\'exam.subject\' | translate}}</th> <th md-column>{{\'exam.teacher\' | translate}}</th> <th md-column md-order-by="te.start">{{\'exam.when\' | translate}}</th> <th md-column md-order-by="tp.{{currentLanguageNameField()}}">{{\'exam.type\' | translate}}</th> <th md-column md-order-by="7" md-numeric>{{\'exam.studentCount\' | translate}}</th> <th></th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="row in tabledata.content" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell> <a md-class="md-primary change-button" ng-href="#/exams/{{::row.id}}/view">{{currentLanguageNameField(row.subject)}}</a> </td> <td md-cell> <div ng-repeat="it in row.teacherNames"> {{it}} </div> </td> <td md-cell>{{row.start | hoisDateTimeMin}}</td> <td md-cell>{{currentLanguageNameField(row.type)}}</td> <td md-cell>{{::row.studentCount}}</td> <td md-cell> <md-button ng-if="row.userCanEdit" md-no-ink class="md-primary change-button" ng-href="#/exams/{{::row.id}}/edit">{{\'main.button.change\' | translate}}</md-button> </td> </tr> </tbody> </table> </md-table-container> <md-table-pagination md-limit="criteria.size" md-limit-options="[10, 20, 50]" md-page="criteria.page" md-total="{{tabledata.totalElements}}" md-on-paginate="loadData" md-label="{page: \'{{\'main.page\' | translate}}:\', rowsPerPage: \'{{\'main.rowPerPage\' | translate}}:\', of: \'{{\'main.of\' | translate}}\'}" md-page-select></md-table-pagination> </div> </div>'),a.put("exam/view.html",'<div layout-padding ng-cloak class="form-readonly"> <div flex> <div layout="row"> <md-input-container flex="20" flex-sm="100" flex-xs="100"> <label class="textInput">{{\'exam.studyPeriod\' | translate}}</label> <hois-value value="currentLanguageNameField(record.subjectStudyPeriodDto.studyPeriod)"></hois-value> </md-input-container> <md-input-container flex="45" flex-sm="100" flex-xs="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label class="textInput">{{\'exam.subjectTeacher\' | translate}}</label> <hois-value value="currentLanguageNameField(record.subjectStudyPeriodDto.subject)+ \' - \' + (record.subjectStudyPeriodDto.teacherNames || []).join(\', \')"></hois-value> </md-input-container> <md-input-container flex="15" flex-sm="100" flex-xs="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label class="textInput">{{\'exam.assessment\' | translate}}</label> <hois-classifier-value ng-model="record.subjectStudyPeriodDto.assessment" main-classifier-code="HINDAMISVIIS"></hois-classifier-value> </md-input-container> </div> <div layout="row" layout-xs="column" flex> <md-input-container flex="15" flex-sm="100" flex-xs="100"> <label>{{\'exam.type\' | translate}}</label> <hois-classifier-value ng-model="record.type" main-classifier-code="SOORITUS"></hois-classifier-value> </md-input-container> <md-input-container flex="65" flex-sm="100" flex-xs="100" flex-offset="10" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'exam.name\' | translate}}</label> <hois-value value="record.name"></hois-value> </md-input-container> </div> <div layout="row" layout-xs="column" flex> <md-input-container flex="15" flex-sm="100" flex-xs="100"> <label>{{\'exam.date\' | translate}}</label> <hois-value value="record.startDate | hoisDate"></hois-value> </md-input-container> <md-input-container flex="10" flex-sm="100" flex-xs="100" flex-offset="10" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'main.start\' | translate}}</label> <hois-value value="record.startTime | hoisTime"></hois-value> </md-input-container> <md-input-container flex="10" flex-sm="100" flex-xs="100" flex-offset="0" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'main.end\' | translate}}</label> <hois-value value="record.endTime | hoisTime"></hois-value> </md-input-container> <md-input-container flex="40" flex-sm="100" flex-xs="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'exam.room\' | translate}}</label> <hois-value value="record.room.nameEt"></hois-value> </md-input-container> </div> <div layout="row" layout-xs="column" flex> <md-input-container flex="15" flex-sm="100" flex-xs="100"> <label>{{\'exam.deadline\' | translate}}</label> <hois-value value="record.deadlineDate | hoisDate"></hois-value> </md-input-container> <md-input-container flex="10" flex-sm="100" flex-xs="100" flex-offset="10" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'exam.deadlineTime\' | translate}}</label> <hois-value value="record.deadlineTime | hoisTime"></hois-value> </md-input-container> <md-input-container flex="40" flex-sm="100" flex-xs="100" flex-offset="15" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'exam.places\' | translate}}</label> <hois-value value="record.places"></hois-value> </md-input-container> </div> <div layout="row" layout-xs="column" flex> <md-input-container flex="90" flex-sm="100" flex-xs="100"> <label>{{\'exam.addInfo\' | translate}}</label> <hois-value value="record.addInfo"></hois-value> </md-input-container> </div> <md-table-container ng-if="record.studentRecords && record.studentRecords.length > 0"> <table md-table> <thead md-head md-order="formState.order"> <tr md-row> <th md-column>{{\'main.rowno\' | translate}}</th> <th md-column md-order-by="rowno">{{\'exam.student.fullname\' | translate}}</th> <th md-column md-order-by="curriculumVersion.{{currentLanguageNameField()}}">{{\'exam.student.curriculum\' | translate}}</th> <th md-column md-order-by="studentGroup">{{\'exam.student.studentGroup\' | translate}}</th> <th md-column md-order-by="registered">{{\'exam.student.registered\' | translate}}</th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="row in record.studentRecords | orderBy: formState.order" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell>{{::row.rowno}}</td> <td md-cell> <a class="md-primary" ng-href="#/students/{{::row.studentId}}/main">{{::row.fullname}}</a> </td> <td md-cell>{{currentLanguageNameField(row.curriculumVersion)}}</td> <td md-cell>{{::row.studentGroup}}</td> <td md-cell>{{row.registered | hoisDate}}</td> </tr> </tbody> </table> </md-table-container> <md-button ng-if="record.id && record.userCanEdit" class="md-primary md-raised" ng-href="#/exams/{{record.id}}/edit?_noback">{{\'main.button.change\' | translate}}</md-button> <md-button ng-click="back(\'#/examTimes\')" class="md-raised">{{\'main.button.back\' | translate}}</md-button> </div> </div>'),a.put("fakePages/fake.html",""),a.put("finalThesis/final.thesis.edit.html",'<div class="ois-form-layout-padding ois-form-layout" ng-cloak> <div flex> <form name="finalThesisForm" ng-submit="save()" novalidate> <div ng-hide="thesis.student" layout="row" layout-sm="column" layout-xs="column"> <div flex="45" flex-sm="100" flex-xs="100"> <hois-autocomplete flex ng-model="thesis.student" name="student" label="finalThesis.student" url="/finalThesis/students"></hois-autocomplete> </div> </div> <div ng-hide="!thesis.student" class="form-readonly"> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="45" flex-sm="100" flex-xs="100"> <label>{{\'finalThesis.student\' | translate}}</label> <hois-value value="thesis.person.firstname + \' \' + thesis.person.lastname"></hois-value> </md-input-container> <md-input-container ng-if="thesis.confirmed" flex="45" flex-sm="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'finalThesis.confirmed\' | translate}}</label> <hois-value value="thesis.confirmed | hoisDate"></hois-value> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="45" flex-sm="100" flex-xs="100"> <label>{{\'finalThesis.curriculum\' | translate}}</label> <hois-value value="currentLanguageNameField(thesis.curriculumVersion)"></hois-value> </md-input-container> <md-input-container flex="45" flex-sm="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'finalThesis.studentGroup\' | translate}}</label> <hois-value value="currentLanguageNameField(thesis.studentGroup)"></hois-value> </md-input-container> </div> </div> <div ng-hide="!thesis.student"> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="45" flex-sm="100" flex-xs="100"> <label>{{\'finalThesis.themeEt\' | translate}}</label> <input type="text" ng-model="thesis.themeEt" md-maxlength="4000" required> </md-input-container> <md-input-container flex="45" flex-sm="100" flex-xs="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'finalThesis.themeEn\' | translate}}</label> <input type="text" ng-model="thesis.themeEn" md-maxlength="4000" ng-required="!thesis.isVocational"> </md-input-container> </div> <br> <div layout="row"> <md-input-container> <md-checkbox ng-model="thesis.hasDraft" aria-label="{{\'finalThesis.draft\' | translate}}">{{\'finalThesis.draft\' | translate}}</md-checkbox> </md-input-container> </div> <div layout="row"> <md-input-container ng-show="thesis.hasDraft" flex> <label>{{\'finalThesis.draft\' | translate}}</label> <textarea ng-model="thesis.draft" md-maxlength="20000" max-rows="10"></textarea> </md-input-container> </div> <div layout="row" flex> <md-input-container flex> <label>{{\'finalThesis.addInfo\' | translate}}</label> <textarea ng-model="thesis.addInfo" md-maxlength="4000" max-rows="2" ng-disabled="auth.isStudent()"></textarea> </md-input-container> </div> <br> <fieldset> <legend md-colors="{color: \'primary-800\'}" ng-class="{invalid: finalThesisForm.$submitted && thesis.supervisors.length === 0}" class="md-title-small">{{\'finalThesis.supervisors\' | translate}}&nbsp;*</legend> <md-button class="md-raised" ng-click="openAddSupervisorDialog()">{{\'main.button.add\' | translate}}</md-button> <md-table-container> <table md-table class="secondary-table"> <thead md-head> <tr md-row> <th md-column>{{\'finalThesis.supervisor.name\' | translate}}</th> <th md-column>{{\'finalThesis.primarySupervisor\' | translate}}</th> <th md-column>{{\'finalThesis.externalSupervisor\' | translate}}</th> <th md-column></th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="supervisor in thesis.supervisors track by $index" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell>{{supervisor.firstname}} {{supervisor.lastname}}</td> <td md-cell> <md-checkbox ng-checked="supervisor.isPrimary" ng-disabled="true" aria-label="{{\'finalThesis.primarySupervisor\' | translate}}"></md-checkbox> </td> <td md-cell> <md-checkbox ng-checked="supervisor.isExternal" ng-disabled="true" aria-label="{{\'finalThesis.externalSupervisor\' | translate}}"></md-checkbox> </td> <td md-cell> <md-button md-no-ink class="md-primary change-button" ng-click="openAddSupervisorDialog($index)">{{\'main.button.change\' | translate}}</md-button> </td> </tr> </tbody> </table> </md-table-container> </fieldset> </div> <div ng-if="thesis.student" layout="row"> <md-button ng-if="!thesis.id || thesis.canBeEdited" class="md-raised md-primary" type="submit">{{\'main.button.save\' | translate}}</md-button> <md-button ng-if="thesis.canBeConfirmed" class="md-raised" ng-click="confirm()">{{\'main.button.confirm\' | translate}}</md-button> <a ng-if="thesis.id" href="{{finalThesisPdfUrl}}" target="_blank" class="md-button md-raised">{{\'main.button.print\' | translate}}</a> <md-button ng-if="!auth.isStudent()" class="md-raised md-default" ng-click="back(\'#/finalThesis/\')">{{\'main.button.back\' | translate}}</md-button> </div> <div ng-if="!thesis.student" layout="row"> <md-button class="md-raised md-default" ng-click="back(\'#/finalThesis/\')">{{\'main.button.back\' | translate}}</md-button> </div> </form> </div> </div>'),
a.put("finalThesis/final.thesis.list.html",'<div ng-if="auth.isAdmin() || auth.isTeacher()" class="ois-form-layout-padding ois-form-layout" ng-cloak> <div flex> <fieldset> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'main.searchlabel\' | translate}}</legend> <form name="searchForm" ng-submit="searchForm.$valid && loadData()" novalidate> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="45" flex-sm="100" flex-xs="100"> <label>{{\'finalThesis.student\' | translate}}</label> <input ng-model="criteria.studentName" name="student" type="text" md-maxlength="255"> </md-input-container> <md-input-container flex="50" flex-sm="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'finalThesis.label\' | translate}}</label> <input ng-model="criteria.theme" name="theme" type="text" md-maxlength="255"> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="45" flex-sm="100" flex-xs="100"> <label>{{\'finalThesis.curriculum\' | translate}}</label> <hois-select ng-model="criteria.curriculumVersion" name="curriculumVersion" type="curriculumversion"></hois-select> </md-input-container> <div flex="50" flex-sm="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <hois-autocomplete flex ng-model="criteria.studentGroupObject" method="studentgroups" name="studentGroup" label="finalThesis.studentGroup"></hois-autocomplete> </div> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="45" flex-sm="100" flex-xs="100"> <label>{{\'finalThesis.status\' | translate}}</label> <hois-classifier-select ng-model="criteria.status" main-classifier-code="LOPUTOO_STAATUS" model-value-attr="code"></hois-classifier-select> </md-input-container> <md-input-container ng-if="auth.isAdmin()" flex="50" flex-sm="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'finalThesis.supervisor.label\' | translate}}</label> <input ng-model="criteria.supervisor" name="supervisor" type="text" md-maxlength="255"> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <div flex="45" flex-sm="100" flex-xs="100"> <div layout="column" flex> <div layout="row" flex> <md-input-container> <label>{{\'finalThesis.insertedFrom\' | translate}}</label> <md-datepicker ng-model="criteria.insertedFrom" md-max-date="criteria.insertedThru"></md-datepicker> </md-input-container> <md-input-container flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'finalThesis.insertedThru\' | translate}}</label> <md-datepicker ng-model="criteria.insertedThru" md-min-date="criteria.insertedFrom"></md-datepicker> </md-input-container> </div> </div> </div> <div flex="45" flex-sm="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <div layout="column" flex> <div layout="row" flex> <md-input-container> <label>{{\'finalThesis.confirmedFrom\' | translate}}</label> <md-datepicker ng-model="criteria.confirmedFrom" md-max-date="criteria.confirmedThru"></md-datepicker> </md-input-container> <md-input-container flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'finalThesis.confirmedThru\' | translate}}</label> <md-datepicker ng-model="criteria.confirmedThru" md-min-date="criteria.confirmedFrom"></md-datepicker> </md-input-container> </div> </div> </div> </div> <div layout="row"> <md-button type="submit" class="md-raised md-primary">{{\'main.button.search\' | translate}}</md-button> <md-button class="md-raised" ng-click="clearCriteria()">{{\'main.button.clear\' | translate}}</md-button> <md-button ng-if="isAuthorized(\'ROLE_OIGUS_M_TEEMAOIGUS_LOPTEEMA\') && auth.isAdmin()" ng-href="#/finalThesis/new" class="md-raised">{{\'main.button.create\' | translate}}</md-button> </div> <div flex-xs="0" flex-gt-xs="0" flex-gt-sm="50"></div> </form> </fieldset> </div> </div> <div ng-if="auth.isAdmin() || auth.isTeacher()" layout-padding> <div flex> <md-table-container> <table md-table md-progress="tabledata.$promise"> <thead md-head md-order="criteria.order" md-on-reorder="loadData"> <tr md-row> <th md-column md-order-by="2">{{\'finalThesis.label\' | translate}}</th> <th md-column md-order-by="4">{{\'finalThesis.student\' | translate}}</th> <th md-column md-order-by="7">{{\'finalThesis.idcode\' | translate}}</th> <th md-column md-order-by="8">{{\'finalThesis.supervisors\' | translate}}</th> <th md-column md-order-by="9">{{\'finalThesis.curriculum\' | translate}}</th> <th md-column md-order-by="12">{{\'finalThesis.studentGroup\' | translate}}</th> <th md-column md-order-by="13">{{\'finalThesis.insertedDate\' | translate}}</th> <th md-column md-order-by="14">{{\'finalThesis.confirmedDate\' | translate}}</th> <th md-column></th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="row in tabledata.content" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell> <a ng-href="#/finalThesis/{{row.id}}/view">{{row.themeEt}}</a> </td> <td md-cell>{{row.student.nameEt}}</td> <td md-cell>{{row.idcode}}</td> <td md-cell>{{row.supervisors}}</td> <td md-cell>{{currentLanguageNameField(row.curriculumVersion)}}</td> <td md-cell>{{row.studentGroup}}</td> <td md-cell>{{row.inserted | hoisDate}}</td> <td md-cell>{{row.confirmed | hoisDate}}</td> <td md-cell> <div ng-if="row.canBeEdited"> <md-button md-no-ink class="md-primary change-button" ng-href="#/finalThesis/{{::row.id}}/edit">{{\'main.button.change\' | translate}}</md-button> </div> </td> </tr> </tbody> </table> </md-table-container> <md-table-pagination md-limit="criteria.size" md-limit-options="[10, 20, 50]" md-page="criteria.page" md-total="{{tabledata.totalElements}}" md-on-paginate="loadData" md-label="{page: \'{{\'main.page\' | translate}}:\', rowsPerPage: \'{{\'main.rowPerPage\' | translate}}:\', of: \'{{\'main.of\' | translate}}\'}" md-page-select></md-table-pagination> </div> </div> <div ng-if="noFinalThesisModule" layout-padding> <md-whiteframe class="md-whiteframe-1dp attention-whiteframe" flex="100" layout layout-align="left center"> <div md-colors="{color: \'accent\'}"> <md-icon md-colors="{color: \'accent\'}" md-font-set="material-icons">info_outline</md-icon> <span>{{\'finalThesis.error.noFinalThesisModule\' | translate}}</span> </div> </md-whiteframe> </div>'),a.put("finalThesis/final.thesis.view.html",'<div class="ois-form-layout-padding ois-form-layout" ng-cloak> <div flex> <form name="finalThesisForm" ng-submit="save()" novalidate> <div class="form-readonly"> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="45" flex-sm="100" flex-xs="100"> <label>{{\'finalThesis.student\' | translate}}</label> <hois-value value="thesis.person.firstname + \' \' + thesis.person.lastname"></hois-value> </md-input-container> <md-input-container ng-if="thesis.confirmed" flex="45" flex-sm="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'finalThesis.confirmed\' | translate}}</label> <hois-value value="thesis.confirmed | hoisDate"></hois-value> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="45" flex-sm="100" flex-xs="100"> <label>{{\'finalThesis.curriculum\' | translate}}</label> <hois-value value="currentLanguageNameField(thesis.curriculumVersion)"></hois-value> </md-input-container> <md-input-container flex="45" flex-sm="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'finalThesis.studentGroup\' | translate}}</label> <hois-value value="currentLanguageNameField(thesis.studentGroup)"></hois-value> </md-input-container> </div> </div> <div class="form-readonly"> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="45" flex-sm="100" flex-xs="100"> <label>{{\'finalThesis.themeEt\' | translate}}</label> <hois-value value="thesis.themeEt"></hois-value> </md-input-container> <md-input-container flex="45" flex-sm="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'finalThesis.themeEn\' | translate}}</label> <hois-value value="thesis.themeEn"></hois-value> </md-input-container> </div> <br> <div layout="row"> <md-input-container> <md-checkbox ng-model="thesis.hasDraft" aria-label="{{\'finalThesis.draft\' | translate}}" disabled>{{\'finalThesis.draft\' | translate}}</md-checkbox> </md-input-container> </div> <div layout="row"> <md-input-container ng-show="thesis.hasDraft" flex> <label>{{\'finalThesis.draft\' | translate}}</label> <textarea ng-model="thesis.draft" md-maxlength="20000" max-rows="10" readonly></textarea> </md-input-container> </div> <div ng-if="thesis.addInfo" layout="row" flex> <md-input-container flex> <label>{{\'finalThesis.addInfo\' | translate}}</label> <textarea ng-model="thesis.addInfo" md-maxlength="4000" max-rows="2" readonly></textarea> </md-input-container> </div> <br> <fieldset ng-if="thesis.supervisors.length > 0"> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'finalThesis.supervisors\' | translate}}</legend> <md-table-container> <table md-table class="secondary-table"> <thead md-head> <tr md-row> <th md-column>{{\'finalThesis.supervisor.name\' | translate}}</th> <th md-column>{{\'finalThesis.primarySupervisor\' | translate}}</th> <th md-column>{{\'finalThesis.externalSupervisor\' | translate}}</th> <th md-column>{{\'finalThesis.supervisor.occupation\' | translate}}</th> <th md-column>{{\'finalThesis.supervisor.email\' | translate}}</th> <th md-column ng-if="!auth.isStudent()">{{\'finalThesis.supervisor.idcode\' | translate}}</th> <th md-column>{{\'finalThesis.supervisor.phone\' | translate}}</th> <th md-column>{{\'finalThesis.supervisor.bankaccount\' | translate}}</th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="supervisor in thesis.supervisors track by $index" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell>{{supervisor.firstname}} {{supervisor.lastname}}</td> <td md-cell> <md-checkbox ng-checked="supervisor.isPrimary" ng-disabled="true" aria-label="{{\'finalThesis.primarySupervisor\' | translate}}"></md-checkbox> </td> <td md-cell> <md-checkbox ng-checked="supervisor.isExternal" ng-disabled="true" aria-label="{{\'finalThesis.externalSupervisor\' | translate}}"></md-checkbox> </td> <td md-cell>{{supervisor.occupation}}</td> <td md-cell>{{supervisor.email}}</td> <td md-cell ng-if="!auth.isStudent()">{{supervisor.idcode}}</td> <td md-cell>{{supervisor.phone}}</td> <td md-cell>{{supervisor.bankaccount}}</td> </tr> </tbody> </table> </md-table-container> </fieldset> </div> <div layout="row"> <md-button ng-if="thesis.canBeEdited" class="md-raised md-primary" ng-href="#/finalThesis/{{::thesis.id}}/edit">{{\'main.button.edit\' | translate}}</md-button> <md-button ng-if="thesis.canBeConfirmed" class="md-raised" ng-click="confirm()">{{\'main.button.confirm\' | translate}}</md-button> <a ng-if="thesis.id" href="{{finalThesisPdfUrl}}" target="_blank" class="md-button md-raised">{{\'main.button.print\' | translate}}</a> <md-button ng-if="!auth.isStudent()" class="md-raised md-default" ng-click="back(\'#/finalThesis/\')">{{\'main.button.back\' | translate}}</md-button> </div> </form> </div> </div>'),a.put("finalThesis/supervisor.add.dialog.html",'<md-dialog aria-label="supervisor edit dialog" flex="50" flex-sm="50" flex-xs="100"> <form name="dialogForm" novalidate ng-cloak> <md-toolbar> <div class="md-toolbar-tools"> <h2>{{"finalThesis.supervisor.add" | translate}}</h2> <span flex></span> <md-button class="md-icon-button" ng-click="cancel()"> <md-icon md-font-set="material-icons">close</md-icon> </md-button> </div> </md-toolbar> <md-dialog-content> <div layout-padding> <form name="supervisorForm" novalidate> <div layout="row" layout-sm="column" layout-xs="column"> <md-radio-group layout-gt-sm="row" ng-model="supervisor.isExternal" ng-change="typeChanged(supervisor.isExternal)" required> <md-input-container> <md-radio-button ng-value="false" aria-label="passedModule"> {{\'finalThesis.inSchool\' | translate}} </md-radio-button> </md-input-container> <md-input-container> <md-radio-button ng-value="true" aria-label="curriculumModule"> {{\'finalThesis.external\' | translate}} </md-radio-button> </md-input-container> </md-radio-group> </div> <div ng-if="supervisor.isExternal == true || supervisor.isExternal == false"> <md-input-container> <md-checkbox ng-model="supervisor.isPrimary" ng-disabled="false" aria-label="{{\'finalThesis.primarySupervisor\' | translate}}"> {{\'finalThesis.primarySupervisor\' | translate}} </md-checkbox> </md-input-container> </div> <div ng-if="supervisor.isExternal == true" layout="row" layout-sm="column" layout-xs="column"> <div layout="column" flex> <md-input-container> <label>{{\'finalThesis.supervisor.firstname\' | translate}}</label> <input type="text" ng-model="supervisor.firstname" name="firstname" md-maxlength="100" required> </md-input-container> <md-input-container> <label>{{\'finalThesis.supervisor.lastname\' | translate}}</label> <input type="text" ng-model="supervisor.lastname" name="lastname" md-maxlength="100" required> </md-input-container> <md-input-container> <label>{{\'finalThesis.supervisor.idcode\' | translate}}</label> <input type="text" ng-model="supervisor.idcode" name="idcode" md-maxlength="11"> </md-input-container> <md-input-container> <label>{{\'finalThesis.supervisor.occupation\' | translate}}</label> <input type="text" ng-model="supervisor.occupation" name="occupation" md-maxlength="100" required> </md-input-container> <md-input-container> <label>{{\'finalThesis.supervisor.email\' | translate}}</label> <input type="email" ng-model="supervisor.email" name="email" md-maxlength="100" required> </md-input-container> <md-input-container> <label>{{\'finalThesis.supervisor.phone\' | translate}}</label> <input type="text" ng-model="supervisor.phone" name="phone" md-maxlength="100"> </md-input-container> <md-input-container> <label>{{\'finalThesis.supervisor.bankaccount\' | translate}}</label> <input type="text" ng-model="supervisor.bankaccount" name="bankaccount" md-maxlength="50"> </md-input-container> </div> </div> <span ng-if="supervisor.isExternal == false"> <div layout="column" flex> <div> <hois-autocomplete label="finalThesis.supervisor.name" ng-model="supervisor.teacher" method="teachers" additional-query-params="{valid: true}"></hois-autocomplete> </div> </div> <br> <div class="form-readonly"> <div layout="column"> <md-input-container flex> <label>{{\'finalThesis.supervisor.occupation\' | translate}}</label> <hois-value value="supervisor.occupation"></hois-value> </md-input-container> <md-input-container flex> <label>{{\'finalThesis.supervisor.email\' | translate}}</label> <hois-value value="supervisor.email"></hois-value> </md-input-container> </div> </div> </span> </form> </div> </md-dialog-content> {{supervisorIndex}} <span flex></span> <md-dialog-actions layout="row" layout-align="start center"> <md-button ng-if="newSupervisor" class="md-raised md-primary" ng-click="submitSupervisor()">{{"main.button.add" | translate}}</md-button> <md-button ng-if="!newSupervisor" class="md-raised md-primary" ng-click="submitSupervisor()">{{"main.button.edit" | translate}}</md-button> <md-button ng-if="!newSupervisor" class="md-raised" ng-click="removeSupervisor()">{{"main.button.delete" | translate}}</md-button> <md-button class="md-raised" ng-click="cancel()">{{"main.button.close" | translate}}</md-button> </md-dialog-actions> </form> </md-dialog>'),a.put("finalThesis/thesis.topic.view.html",""),a.put("form/form.edit.html",'<div class="ois-form-layout-padding ois-form-layout" ng-cloak> <div flex> <form name="formForm" class="nomargin"> <div layout="row"> <md-input-container flex="40" flex-sm="100" flex-xs="100"> <label class="textInput">{{\'form.type\' | translate}}</label> <hois-classifier-select ng-model="formState.type" name="type" model-value-attr="code" main-classifier-code="LOPUBLANKETT" required></hois-classifier-select> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <div layout="column" flex="45" flex-sm="100" flex-xs="100"> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex-sm="100" flex-xs="100"> <label>{{\'main.from\' | translate}}</label> <input ng-model="formState.from" pattern="\\d*" required> </md-input-container> <md-input-container flex-sm="100" flex-xs="100"> <label>{{\'main.thru\' | translate}}</label> <input ng-model="formState.thru" pattern="\\d*" required> </md-input-container> </div> </div> </div> <div layout="row" ng-if="actionType === \'defected\'"> <md-input-container flex="50" flex-sm="100" flex-xs="100"> <label class="textInput">{{\'form.reason\' | translate}}</label> <input ng-model="formState.reason" name="reason" required> </md-input-container> </div> <div layout="row"> <md-button class="md-raised md-primary" ng-click="update()">{{getButtonLabelKey() | translate}}</md-button> <md-button ng-click="back(\'#/forms\')" class="md-raised">{{\'main.button.back\' | translate}}</md-button> </div> </form> </div> </div>'),a.put("form/form.list.html",'<div class="ois-form-layout-padding ois-form-layout" ng-cloak> <div flex> <fieldset> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'main.searchlabel\' | translate}}</legend> <form ng-submit="loadData()" novalidate> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="45" flex-sm="100" flex-xs="100"> <label>{{\'form.type\' | translate}}</label> <hois-classifier-select ng-model="criteria.type" name="type" model-value-attr="code" main-classifier-code="LOPUBLANKETT"></hois-classifier-select> </md-input-container> <md-input-container flex="50" flex-sm="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label class="textInput">{{\'form.status\' | translate}}</label> <hois-classifier-select ng-model="criteria.status" name="status" model-value-attr="code" main-classifier-code="LOPUBLANKETT_STAATUS"></hois-classifier-select> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <div layout="column" flex="45" flex-sm="100" flex-xs="100"> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex-sm="100" flex-xs="100"> <label>{{\'main.from\' | translate}}</label> <input type="number" ng-model="criteria.from" min="0"> </md-input-container> <md-input-container flex-sm="100" flex-xs="100"> <label>{{\'main.thru\' | translate}}</label> <input type="number" ng-model="criteria.thru" min="0"> </md-input-container> </div> </div> </div> <div layout="row"> <md-button type="submit" class="md-raised md-primary">{{\'main.button.search\' | translate}}</md-button> <md-button class="md-raised" ng-click="clearCriteria()">{{\'main.button.clear\' | translate}}</md-button> <md-button class="md-raised" ng-if="canEdit" href="#/forms/new">{{\'main.button.add\' | translate}}</md-button> <md-button class="md-raised" ng-if="canEdit" href="#/forms/delete">{{\'main.button.delete\' | translate}}</md-button> <md-button class="md-raised" ng-if="canEdit" href="#/forms/defected">{{\'form.button.defected\' | translate}}</md-button> <a ng-href="{{excel(formState.xlsUrl, criteria)}}" target="_blank" class="md-button md-raised">{{\'form.button.excel\' | translate}}</a> </div> <div flex-xs="0" flex-gt-xs="0" flex-gt-sm="50"></div> </form> </fieldset> </div> </div> <div layout-padding> <div flex> <md-table-container> <table md-table md-progress="tabledata.$promise"> <thead md-head> <tr md-row> <th md-column>{{\'form.type\' | translate}}</th> <th md-column>{{\'form.code\' | translate}}</th> <th md-column>{{\'main.from\' | translate}}</th> <th md-column>{{\'main.thru\' | translate}}</th> <th md-column md-numeric>{{\'form.count\' | translate}}</th> <th md-column>{{\'form.status\' | translate}}</th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="row in tabledata.content" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell>{{currentLanguageNameField(row.type)}}</td> <td md-cell>{{::row.code}}</td> <td md-cell>{{::row.from}}</td> <td md-cell>{{::row.thru}}</td> <td md-cell>{{::row.count}}</td> <td md-cell> {{currentLanguageNameField(row.status)}} <md-tooltip ng-if="row.status.code === \'LOPUBLANKETT_STAATUS_R\' && row.defectReason">{{::row.defectReason}}</md-tooltip> </td> </tr> </tbody> </table> </md-table-container> </div> </div>'),a.put("generalMessage/general.message.edit.html",'<div layout="column" layout-padding> <div> <form name="generalMessageForm"> <md-input-container class="md-block"> <label class="textInput">{{\'generalmessage.title\' | translate}}</label> <input ng-model="record.title" name="title" type="text" md-maxlength="1000" required autofocus> </md-input-container> <md-input-container class="md-block"> <label class="textInput">{{\'generalmessage.content\' | translate}}</label> <textarea ng-model="record.content" name="content" md-maxlength="4000" required></textarea> </md-input-container> <div layout="row"> <div flex="100"> <md-input-container flex> <label>{{\'generalmessage.validFrom\' | translate}}</label> <md-datepicker ng-model="record.validFrom" md-max-date="record.validThru"></md-datepicker> </md-input-container> <md-input-container flex flex-offset="5"> <label>{{\'generalmessage.validThru\' | translate}}</label> <md-datepicker ng-model="record.validThru" md-min-date="record.validFrom"></md-datepicker> </md-input-container> </div> </div> <div>&nbsp;</div> <fieldset tabindex="1"> <legend ng-class="{invalid: generalMessageForm.$submitted && (!record.targets || record.targets.length === 0)}" md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'generalmessage.targets\' | translate}} *</legend> <div layout="column" class="common-label" ng-repeat="role in roleDefs"> <span> <md-checkbox ng-model="role._selected" ng-change="targetChanged()"> {{currentLanguageNameField(role)}} </md-checkbox> </span> </div> </fieldset> <div layout="row"> <md-button ng-click="update()" class="md-raised md-primary">{{\'main.button.save\' | translate}}</md-button> <md-button ng-click="delete()" ng-if="record.id" class="md-raised">{{\'main.button.delete\' | translate}}</md-button> <md-button ng-click="back(\'#/generalmessages\', generalMessageForm)" class="md-raised">{{\'main.button.back\' | translate}}</md-button> </div> </form> </div> </div>'),a.put("generalMessage/general.message.list.html",'<div class="ois-form-layout-padding ois-form-layout" ng-cloak> <div flex> <fieldset tabindex="1"> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'main.searchlabel\' | translate}}</legend> <form name="searchForm" ng-submit="searchForm.$valid && loadData()" novalidate> <div flex layout="column"> <md-input-container> <label class="textInput">{{\'generalmessage.title\' | translate}}</label> <input ng-model="criteria.title" type="text" autofocus md-maxlength="255"> </md-input-container> <md-input-container> <label>{{\'generalmessage.targets\' | translate}}</label> <hois-classifier-select ng-model="criteria.targets" model-value-attr="code" main-classifier-code="ROLL" multiple></hois-classifier-select> </md-input-container> <div layout="row" flex> <md-input-container> <label>{{\'generalmessage.validFrom\' | translate}}</label> <md-datepicker ng-model="criteria.validFrom" md-max-date="criteria.validThru"></md-datepicker> </md-input-container> <md-input-container flex-offset="5"> <label>{{\'generalmessage.validThru\' | translate}}</label> <md-datepicker ng-model="criteria.validThru" md-min-date="criteria.validFrom"></md-datepicker> </md-input-container> </div> <div layout="row"> <md-button type="submit" class="md-raised md-primary">{{\'main.button.search\' | translate}}</md-button> <md-button class="md-raised" ng-click="clearCriteria()">{{\'main.button.clear\' | translate}}</md-button> <md-button class="md-raised" ng-if="canEdit" ng-href="#/generalmessages/new">{{\'main.button.create\' | translate}}</md-button> </div> </div> </form> </fieldset> </div> </div> <div layout-padding> <div flex> <md-table-container> <table md-table md-progress="tabledata.$promise"> <thead md-head md-order="criteria.order" md-on-reorder="loadData"> <tr md-row> <th md-column md-order-by="title">{{\'generalmessage.title\' | translate}}</th> <th md-column md-order-by="validFrom">{{\'generalmessage.validFrom\' | translate}}</th> <th md-column md-order-by="validThru">{{\'generalmessage.validThru\' | translate}}</th> <th md-column>{{\'generalmessage.targets\' | translate}}</th> <th md-column></th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="row in tabledata.content" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell> <a md-no-ink class="md-primary change-button" ng-href="#/generalmessages/{{::row.id}}/view">{{::row.title}}</a> </td> <td md-cell>{{::row.validFrom | hoisDate}}</td> <td md-cell>{{::row.validThru | hoisDate}}</td> <td md-cell> <table> <tr ng-repeat="role in row.targets | orderBy: \'nameEt\'"> <td>{{currentLanguageNameField(role)}}</td> </tr> </table> </td> <td md-cell> <md-button md-no-ink class="md-primary change-button" ng-if="canEdit" ng-href="#/generalmessages/{{::row.id}}/edit">{{\'main.button.change\' | translate}}</md-button> </td> </tr> </tbody> </table> </md-table-container> <md-table-pagination md-limit="criteria.size" md-limit-options="[10, 20, 50]" md-page="criteria.page" md-total="{{tabledata.totalElements}}" md-on-paginate="loadData" md-label="{page: \'{{\'main.page\' | translate}}:\', rowsPerPage: \'{{\'main.rowPerPage\' | translate}}:\', of: \'{{\'main.of\' | translate}}\'}" md-page-select></md-table-pagination> </div> </div>'),a.put("generalMessage/general.message.view.html",'<div layout="column" layout-padding class="form-readonly"> <div> <form name="generalMessageForm"> <md-input-container class="md-block"> <label class="textInput">{{\'generalmessage.title\' | translate}}</label> <hois-value value="record.title"></hois-value> </md-input-container> <md-input-container class="md-block"> <label class="textInput">{{\'generalmessage.content\' | translate}}</label> <hois-value value="record.content"></hois-value> </md-input-container> <div layout="row" flex="100"> <md-input-container flex="20"> <label>{{\'generalmessage.validFrom\' | translate}}</label> <hois-value value="record.validFrom | hoisDate"></hois-value> </md-input-container> <md-input-container flex="20" flex-offset="5"> <label>{{\'generalmessage.validThru\' | translate}}</label> <hois-value value="record.validThru | hoisDate"></hois-value> </md-input-container> </div> <div>&nbsp;</div> <fieldset tabindex="1"> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'generalmessage.targets\' | translate}} *</legend> <div layout="column" class="common-label" ng-repeat="role in record.targets"> <span> <hois-classifier-value ng-model="role" main-classifier-code="ROLL"></hois-classifier-value> </span> </div> </fieldset> <md-button class="md-raised md-primary" ng-if="canEdit" ng-href="#/generalmessages/{{record.id}}/edit?_noback">{{\'main.button.change\' | translate}}</md-button> <md-button ng-href="#/generalmessages" class="md-raised">{{\'main.button.back\' | translate}}</md-button> </form> </div> </div>'),a.put("higherCurriculum/higher.curriculum.grade.add.dialog.html",'<md-dialog aria-label="grade add dialog" flex="30" flex-xs="100"> <form name="dialogForm" ng-cloak> <md-toolbar> <div class="md-toolbar-tools"> <h2>{{"curriculum.grade.editLabel" | translate}}</h2> <span flex></span> <md-button class="md-icon-button" ng-click="cancel()"> <md-icon md-font-set="material-icons">close</md-icon> </md-button> </div> </md-toolbar> <md-dialog-content> <span flex></span> <div class="ois-form-layout" layout="column" layout-margin ng-cloak> <div layout="column"> <md-input-container flex> <label>{{\'curriculum.grade.nameEt\' | translate}}</label> <input ng-model="data.nameEt" type="text" required md-maxlength="255"> </md-input-container> <md-input-container flex> <label>{{\'curriculum.grade.nameEn\' | translate}}</label> <input ng-model="data.nameEn" type="text" required md-maxlength="255"> </md-input-container> <md-input-container flex> <label>{{\'curriculum.grade.nameEtGenitive\' | translate}}</label> <input ng-model="data.nameGenitiveEt" type="text" required md-maxlength="255"> </md-input-container> <md-input-container flex> <label>{{\'curriculum.grade.ehisGrade\' | translate}}</label> <hois-classifier-select ng-model="data.ehisGrade" main-classifier-code="AKAD_KRAAD" required model-value-attr="code"></hois-classifier-select> </md-input-container> </div> </div> </md-dialog-content> <md-dialog-actions layout="row" layout-align="start center"> <md-button class="md-raised md-primary" ng-click="submit()">{{"main.button.save" | translate}}</md-button> <md-button ng-click="delete()" ng-if="editing" class="md-raised">{{"main.button.delete" | translate}}</md-button> <md-button class="md-raised" ng-click="cancel()">{{"main.button.close" | translate}}</md-button> </md-dialog-actions> </form> </md-dialog>'),a.put("higherCurriculum/higher.curriculum.grade.view.dialog.html",'<md-dialog aria-label="grade add dialog" flex="30" flex-xs="100"> <form name="dialogForm" ng-cloak> <md-toolbar> <div class="md-toolbar-tools"> <h2>{{"curriculum.grade.viewLabel" | translate}}</h2> <span flex></span> <md-button class="md-icon-button" ng-click="cancel()"> <md-icon md-font-set="material-icons">close</md-icon> </md-button> </div> </md-toolbar> <md-dialog-content> <span flex></span> <div class="ois-form-layout" layout="column" layout-margin ng-cloak> <div layout="column"> <md-input-container flex> <label>{{\'curriculum.grade.nameEt\' | translate}}</label> <input ng-model="data.nameEt" type="text" readonly> </md-input-container> <md-input-container flex> <label>{{\'curriculum.grade.nameEn\' | translate}}</label> <input ng-model="data.nameEn" type="text" readonly> </md-input-container> <md-input-container flex> <label>{{\'curriculum.grade.nameEtGenitive\' | translate}}</label> <input ng-model="data.nameGenitiveEt" type="text" readonly> </md-input-container> <md-input-container flex> <label>{{\'curriculum.grade.ehisGrade\' | translate}}</label> <hois-classifier-select ng-model="data.ehisGrade" main-classifier-code="AKAD_KRAAD" model-value-attr="code" disabled></hois-classifier-select> </md-input-container> </div> </div> </md-dialog-content> <md-dialog-actions layout="row" layout-align="start center"> <md-button class="md-raised" ng-click="cancel()">{{"main.button.close" | translate}}</md-button> </md-dialog-actions> </form> </md-dialog>'),a.put("higherCurriculum/higher.curriculum.html",'<div class="ois-form-layout-padding"> <form name="higherCurriculumForm" layout="column" class="nomargin"> <div layout="row" layout-sm="column" layout-xs="column"> <fieldset tabindex="1" layout="column" flex="30" flex-sm="100" flex-xs="100" class="higher-curriculum-top-fieldset"> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'curriculum.nameTitle\' | translate}}</legend> <md-input-container flex="100"> <label>{{\'curriculum.nameEt\' | translate}}</label> <input ng-model="curriculum.nameEt" type="text" required md-maxlength="255" ng-readonly="formState.readOnly || formState.notEditableBasicData"> </md-input-container> <md-input-container flex="100"> <label>{{\'curriculum.nameEn\' | translate}}</label> <input ng-model="curriculum.nameEn" type="text" required md-maxlength="255" ng-readonly="formState.readOnly"> </md-input-container> <md-input-container flex="100"> <label>{{\'curriculum.nameGenitiveEt\' | translate}}</label> <input ng-model="curriculum.nameGenitiveEt" type="text" required md-maxlength="255" ng-readonly="formState.readOnly"> </md-input-container> <md-input-container flex="1000"> <label>{{\'curriculum.nameGenitiveEn\' | translate}}</label> <input ng-model="curriculum.nameGenitiveEn" type="text" required md-maxlength="255" ng-readonly="formState.readOnly"> </md-input-container> </fieldset> <fieldset tabindex="2" flex="66" flex-offset="4" flex-sm="100" flex-xs="100" flex-offset-xs="0" flex-offset-sm="0"> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'curriculum.mainData\' | translate}}</legend> <div layout="row" flex> <div flex="45"> <md-checkbox ng-model="curriculum.joint" aria-label="{{\'curriculum.isJoint\' | translate}}" class="md-primary" ng-disabled="formState.readOnly || formState.notEditableBasicData || formState.jointDisabled"> {{\'curriculum.isJoint\' | translate}} </md-checkbox> </div> <md-input-container flex="50" flex-offset="5"> <label>{{\'curriculum.code\' | translate}}</label> <input ng-model="curriculum.code" name="code" type="text" required md-maxlength="25" ng-model-options="{ debounce: 250 }" unique="codeUniqueQuery" ng-readonly="formState.readOnly || formState.notEditableBasicData"> <div ng-messages="higherCurriculumForm.code.$error" ng-show="higherCurriculumForm.code.$dirty"> <div ng-message="notUnique"> {{\'main.messages.error.mustBeUnique\' | translate}} </div> </div> </md-input-container> </div> <div layout="row" flex> <md-input-container flex="45"> <label>{{\'curriculum.studyLevel\' | translate}}</label> <hois-classifier-select ng-model="curriculum.origStudyLevel" main-classifier-code="OPPEASTE" show-only-values="studyLevels" required model-value-attr="code" ng-disabled="formState.readOnly || formState.notEditableBasicData"></hois-classifier-select> </md-input-container> <md-input-container flex="50" flex-offset="5"> <label>{{\'curriculum.merCode\' | translate}}</label> <input ng-model="curriculum.merCode" name="merCode" type="text" md-maxlength="10" ng-model-options="{ debounce: 250 }" unique="merCodeUniqueQuery" ng-readonly="formState.readOnly || formState.notEditableBasicData"> <div ng-messages="higherCurriculumForm.merCode.$error" ng-show="higherCurriculumForm.merCode.$dirty"> <div ng-message="notUnique"> {{\'main.messages.error.mustBeUnique\' | translate}} </div> </div> </md-input-container> </div> <div layout="row" flex> <md-input-container flex="45"> <label>{{\'curriculum.ekrLevel\' | translate}}</label> <hois-classifier-select ng-model="ekrLevel" main-classifier-code="EKR" watch-model="curriculum.origStudyLevel" filter-values connect-main-classifier-code="EKR" select-first-value disabled></hois-classifier-select> </md-input-container> <md-input-container flex="50" flex-offset="5"> <label>{{\'curriculum.creditsEap\' | translate}}</label> <input ng-model="curriculum.credits" type="number" required min="0" max="999" pattern="^\\d+(\\.\\d{1})?$" name="credits" ng-readonly="formState.readOnly || formState.notEditableBasicData"> <div ng-messages="higherCurriculumForm.credits.$error" ng-show="higherCurriculumForm.credits.$dirty"> <div ng-message="min"> {{\'main.messages.error.positive\' | translate}} </div> <div ng-message="max"> {{\'curriculum.error.max999\' | translate}} </div> <div ng-message="pattern"> {{\'stateCurriculum.error.decimalPresision\' | translate}} </div> </div> </md-input-container> </div> <div layout="row" flex> <md-input-container flex="45"> <label>{{\'curriculum.educationLevel\' | translate}}</label> <hois-classifier-select ng-model="educationLevel" main-classifier-code="HARIDUSTASE" watch-model="curriculum.origStudyLevel" filter-values connect-main-classifier-code="HARIDUSTASE" select-first-value disabled></hois-classifier-select> </md-input-container> <md-input-container flex="25" flex-offset="5"> <input ng-model="curriculum.studyPeriodYears" type="number" name="studyPeriodYears" placeholder="{{\'curriculum.studyPeriod\' | translate}} {{\'main.years\' | translate}}" required min="0" max="{{maxStydyYears.max}}" pattern="^\\d+$" ng-readonly="formState.readOnly || formState.notEditableBasicData"> <div ng-messages="higherCurriculumForm.studyPeriodYears.$error" ng-show="higherCurriculumForm.studyPeriodYears.$dirty"> <div ng-message="min"> {{\'main.messages.error.positive\' | translate}} </div> <div ng-message="max"> {{\'curriculum.error.max\' | translate:maxStydyYears }} </div> <div ng-message="pattern"> {{\'stateCurriculum.enter.credits.integer\' | translate}} </div> </div> </md-input-container> <md-input-container flex="20" flex-offset="5"> <input ng-model="curriculum.studyPeriodMonths" type="number" name="studyPeriodMonths" placeholder="{{\'main.months\' | translate}}" min="0" max="11" pattern="^\\d+$" ng-readonly="formState.readOnly || formState.notEditableBasicData"> <div ng-messages="higherCurriculumForm.studyPeriodMonths.$error" ng-show="higherCurriculumForm.studyPeriodMonths.$dirty"> <div ng-message="min"> {{\'main.messages.error.positive\' | translate}} </div> <div ng-message="max"> {{\'curriculum.error.monthsMax11\' | translate}} </div> <div ng-message="pattern"> {{\'stateCurriculum.enter.credits.integer\' | translate}} </div> </div> </md-input-container> </div> <div layout="row" flex> <md-input-container flex="45"> <label>{{\'curriculum.curriculumGroup\' | translate}}</label> <hois-classifier-select ng-model="curriculum.group" required main-classifier-code="OPPEKAVAGRUPP" ng-change="getAreasOfStudy(true)" model-value-attr="code" ng-disabled="formState.readOnly || formState.notEditableBasicData"></hois-classifier-select> </md-input-container> <md-input-container flex="50" flex-offset="5"> <label>{{\'curriculum.studyLanguage\' | translate}}</label> <hois-classifier-select multiple ng-model="curriculum.studyLanguages" required main-classifier-code="OPPEKEEL" model-value-attr="code" criteria="{higher: true}" ng-disabled="formState.readOnly"></hois-classifier-select> </md-input-container> </div> <div layout="row" flex> <md-input-container flex="45"> <label>{{\'curriculum.group\' | translate}}</label> <hois-classifier-select ng-model="curriculum.iscedClass" required model-value-attr="code" main-classifier-code="ISCED_RYHM" criteria="{higher: true}" watch-model="curriculum.group" filter-values search-from-connect connect-main-classifier-code="OPPEKAVAGRUPP"></hois-classifier-select> </md-input-container> <md-input-container flex="50" flex-offset="5"> <label>{{\'curriculum.languageDescription\' | translate}}</label> <textarea ng-model="curriculum.languageDescription" md-maxlength="1000" max-rows="10" ng-readonly="formState.readOnly"></textarea> </md-input-container> </div> <div layout="row" flex> <md-input-container flex="45"> <label>{{\'curriculum.areaOfStudy\' | translate}}</label> <hois-classifier-select ng-model="curriculum.areaOfStudy" main-classifier-code="ISCED_VALD" watch-model="curriculum.fieldOfStudy" model-value-attr="code" select-first-value connect-main-classifier-code="ISCED_VALD" criteria="{higher: true}" disabled></hois-classifier-select> </md-input-container> <!-- hois-school-department-select was not used here as it set form $dirty after page load.\r\n          In addition, extra logic in providing options required --> <md-input-container flex="50" flex-offset="5"> <label> {{\'curriculum.structuralUnitResponsible\' | translate}} </label> <hois-select ng-model="curriculum.schoolDepartments" multiple values="schoolDepartments" required ng-disabled="formState.readOnly"></hois-select> </md-input-container> </div> <div layout="row" flex> <md-input-container flex="45"> <label>{{\'curriculum.fieldOfStudy\' | translate}}</label> <hois-classifier-select ng-model="curriculum.fieldOfStudy" main-classifier-code="ISCED_SUUN" watch-model="curriculum.iscedClass" filter-values select-first-value connect-main-classifier-code="ISCED_SUUN" criteria="{higher: true}" disabled model-value-attr="code"></hois-classifier-select> </md-input-container> </div> </fieldset> </div> <div>&nbsp;</div> <fieldset tabindex="4"> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'curriculum.commonData\' | translate}}</legend> <div layout="column"> <md-input-container flex> <label>{{\'stateCurriculum.enter.objectivesEt\' | translate}}{{getStar()}}</label> <textarea ng-model="curriculum.objectivesEt" ng-required="strictValidation()" md-maxlength="20000" max-rows="10" ng-readonly="formState.readOnly"></textarea> </md-input-container> <md-input-container flex> <label>{{\'stateCurriculum.enter.objectivesEn\' | translate}}{{getStar()}}</label> <textarea ng-model="curriculum.objectivesEn" ng-required="strictValidation()" md-maxlength="20000" max-rows="10" ng-readonly="formState.readOnly"></textarea> </md-input-container> <md-input-container flex> <label>{{\'curriculum.studyOutcomesEt\' | translate}}{{getStar()}}</label> <textarea ng-model="curriculum.outcomesEt" ng-required="strictValidation()" md-maxlength="20000" max-rows="10" ng-readonly="formState.readOnly"></textarea> </md-input-container> <md-input-container flex> <label>{{\'curriculum.studyOutcomesEn\' | translate}}{{getStar()}}</label> <textarea ng-model="curriculum.outcomesEn" ng-required="strictValidation()" md-maxlength="20000" max-rows="10" ng-readonly="formState.readOnly"></textarea> </md-input-container> <md-input-container flex> <label>{{\'curriculum.higherAdmissionRequirementsEt\' | translate}}{{getStar()}}</label> <textarea ng-model="curriculum.admissionRequirementsEt" ng-required="strictValidation()" md-maxlength="20000" max-rows="10" ng-readonly="formState.readOnly"></textarea> </md-input-container> <md-input-container flex> <label>{{\'curriculum.higherAdmissionRequirementsEn\' | translate}}{{getStar()}}</label> <textarea ng-model="curriculum.admissionRequirementsEn" ng-required="strictValidation()" md-maxlength="20000" max-rows="10" ng-readonly="formState.readOnly"></textarea> </md-input-container> <md-input-container flex> <label>{{\'curriculum.higherGraduationRequirementsEt\' | translate}}{{getStar()}}</label> <textarea ng-model="curriculum.graduationRequirementsEt" ng-required="strictValidation()" md-maxlength="20000" max-rows="10" ng-readonly="formState.readOnly"></textarea> </md-input-container> <md-input-container flex> <label>{{\'curriculum.higherGraduationRequirementsEn\' | translate}}{{getStar()}}</label> <textarea ng-model="curriculum.graduationRequirementsEn" ng-required="strictValidation()" md-maxlength="20000" max-rows="10" ng-readonly="formState.readOnly"></textarea> </md-input-container> <md-input-container flex> <label>{{\'curriculum.optionalStudyDescription\' | translate}}</label> <textarea ng-model="curriculum.optionalStudyDescription" md-maxlength="4000" max-rows="10" ng-readonly="formState.readOnly"></textarea> </md-input-container> <md-input-container flex> <label>{{\'curriculum.addInfo\' | translate}}</label> <textarea ng-model="curriculum.addInfo" md-maxlength="20000" max-rows="10" ng-readonly="formState.readOnly"></textarea> </md-input-container> <md-input-container flex> <label>{{\'stateCurriculum.enter.comment\' | translate}}</label> <textarea ng-model="curriculum.description" md-maxlength="20000" max-rows="10" ng-readonly="formState.readOnly"></textarea> </md-input-container> <md-input-container flex> <label>{{\'curriculum.otherLanguages\' | translate}}</label> <textarea ng-model="curriculum.otherLanguages" md-maxlength="1000" max-rows="10" ng-readonly="formState.readOnly"></textarea> </md-input-container> <md-autocomplete name="teacher" md-selected-item="curriculum.teacher" md-search-text="teacherName" md-items="teacher in searchTeacher(teacherName)" md-item-text="currentLanguageNameField(teacher)" md-min-length="1" md-floating-label="{{\'curriculum.supervisor\' | translate}}" md-no-cache class="small-margin" md-require-match flex> <md-item-template> <span md-highlight-text="teacherName" md-highlight-flags="^i">{{currentLanguageNameField(teacher)}}</span> </md-item-template> <md-not-found> {{\'main.messages.error.notFound\' | translate}} </md-not-found> </md-autocomplete> </div> </fieldset> <div>&nbsp;</div> <fieldset tabindex="9"> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'curriculum.approvalInfo\' | translate}}</legend> <div layout="row" flex="100"> <md-input-container flex="30" flex-sm="100" flex-xs="100"> <label>{{\'curriculum.approvalDocumentNr\' | translate}}{{getStar()}}</label> <input ng-model="curriculum.approvalDokNr" type="text" md-maxlength="50" ng-readonly="formState.readOnly" ng-required="strictValidation()"> </md-input-container> <md-input-container flex="20" flex-offset="4"> <label>{{\'curriculum.approvalDate\' | translate}}{{getStar()}}</label> <md-datepicker ng-model="curriculum.approval" md-open-on-focus ng-disabled="formState.readOnly" ng-required="strictValidation()"></md-datepicker> </md-input-container> <md-input-container flex="20" flex-offset="5"> <label>{{\'curriculum.htmRegisterDate\' | translate}}</label> <md-datepicker ng-model="curriculum.merRegDate" md-open-on-focus ng-disabled="formState.readOnly"></md-datepicker> </md-input-container> </div> <div layout="row" flex="100"> <md-input-container flex="30" flex-sm="100" flex-xs="100"> <label>{{\'curriculum.accreditationDesision\' | translate}}</label> <input ng-model="curriculum.accreditationResolution" type="text" md-maxlength="1000" ng-readonly="formState.readOnly"> </md-input-container> <md-input-container flex="20" flex-offset="4"> <label>{{\'curriculum.accreditationDate\' | translate}}</label> <md-datepicker ng-model="curriculum.accreditationDate" md-open-on-focus ng-disabled="formState.readOnly"></md-datepicker> </md-input-container> </div> <div layout="row" flex="100"> <md-input-container flex="30" flex-sm="100" flex-xs="100"> <label>{{\'curriculum.accreditationDesisionNumber\' | translate}}</label> <input ng-model="curriculum.accreditationNr" type="text" md-maxlength="1000" ng-readonly="formState.readOnly"> </md-input-container> <md-input-container flex="20" flex-offset="4"> <label>{{\'curriculum.accreditationValidityDate\' | translate}}</label> <md-datepicker ng-model="curriculum.accreditationValidDate" md-open-on-focus ng-disabled="formState.readOnly"></md-datepicker> </md-input-container> </div> </fieldset> <div>&nbsp;</div> <fieldset tabindex="10"> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'curriculum.diplomaInfo\' | translate}}</legend> <div layout="column"> <md-input-container flex> <label>{{\'curriculum.final31\' | translate}}</label> <input ng-model="curriculum.final31" type="text" md-maxlength="255" ng-readonly="formState.readOnly"> </md-input-container> <md-input-container flex> <label>{{\'curriculum.final33\' | translate}}</label> <input ng-model="curriculum.final33" type="text" md-maxlength="255" ng-readonly="formState.readOnly"> </md-input-container> <md-input-container flex> <label>{{\'curriculum.final51\' | translate}}</label> <input ng-model="curriculum.final51" type="text" md-maxlength="255" ng-readonly="formState.readOnly"> </md-input-container> <md-input-container flex> <label>{{\'curriculum.final52\' | translate}}</label> <input ng-model="curriculum.final52" type="text" md-maxlength="255" ng-readonly="formState.readOnly"> </md-input-container> <md-input-container flex> <label>{{\'curriculum.final61\' | translate}}</label> <input ng-model="curriculum.final61" type="text" md-maxlength="255" ng-readonly="formState.readOnly"> </md-input-container> <br> <md-input-container flex> <label>{{\'curriculum.finalEn31\' | translate}}</label> <input ng-model="curriculum.finalEn31" type="text" md-maxlength="255" ng-readonly="formState.readOnly"> </md-input-container> <md-input-container flex> <label>{{\'curriculum.finalEn33\' | translate}}</label> <input ng-model="curriculum.finalEn33" type="text" md-maxlength="255" ng-readonly="formState.readOnly"> </md-input-container> <md-input-container flex> <label>{{\'curriculum.finalEn51\' | translate}}</label> <input ng-model="curriculum.finalEn51" type="text" md-maxlength="255" ng-readonly="formState.readOnly"> </md-input-container> <md-input-container flex> <label>{{\'curriculum.finalEn52\' | translate}}</label> <input ng-model="curriculum.finalEn52" type="text" md-maxlength="255" ng-readonly="formState.readOnly"> </md-input-container> <md-input-container flex> <label>{{\'curriculum.finalEn61\' | translate}}</label> <input ng-model="curriculum.finalEn61" type="text" md-maxlength="255" ng-readonly="formState.readOnly"> </md-input-container> </div> </fieldset> <div>&nbsp;</div> <div>&nbsp;</div> <fieldset tabindex="11"> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'curriculum.statuses\' | translate}}</legend> <div layout="row" flex="100"> <md-input-container flex="30" flex-sm="100" flex-xs="100"> <label>{{\'main.validFrom\' | translate}}{{getStar()}}</label> <md-datepicker ng-model="curriculum.validFrom" md-open-on-focus ng-required="strictValidation()" ng-disabled="formState.readOnly"></md-datepicker> </md-input-container> <md-input-container flex="20" flex-sm="100" flex-xs="100" flex-offset-xs="0" flex-offset-sm="0" flex-offset="4"> <label>{{\'main.validTo\' | translate}}</label> <md-datepicker ng-model="curriculum.validThru" md-min-date="curriculum.validFrom" md-open-on-focus ng-disabled="formState.readOnly"></md-datepicker> </md-input-container> </div> <div layout="row" flex="100" class="top-margin form-readonly"> <md-input-container flex="30" flex-sm="100" flex-xs="100" class="readonly"> <label class="label">{{\'main.status\' | translate}}</label> <hois-classifier-value ng-model="curriculum.status" main-classifier-code="OPPEKAVA_STAATUS"></hois-classifier-value> </md-input-container> <md-input-container flex="20" flex-sm="100" flex-xs="100" flex-offset-xs="0" flex-offset-sm="0" flex-offset="4"> <label>{{\'curriculum.statusInEhis\' | translate}}</label> <hois-classifier-value ng-model="curriculum.ehisStatus" main-classifier-code="OPPEKAVA_EHIS_STAATUS"></hois-classifier-value> </md-input-container> <md-input-container flex="40" flex-sm="100" flex-xs="100" flex-offset-xs="0" flex-offset-sm="0" flex-offset="5"> <label>{{\'curriculum.statusChangedDateInEhis\' | translate}}</label> <hois-value value="curriculum.ehisChanged | hoisDate"></hois-value> </md-input-container> </div> </fieldset> <div ng-show="curriculum.joint">&nbsp;</div> <fieldset tabindex="8" ng-show="curriculum.joint"> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'curriculum.jointInfo\' | translate}}</legend> <div layout="column"> <div layout="row" layout-align="start start" ng-show="curriculum.joint"> <label class="md-required common-label" flex="30">{{\'curriculum.jointSchool\' | translate}}</label> <md-radio-group ng-model="curriculum.abroad" flex="50" layout="row" class="align-center" ng-change="clearJointPartnersFields()" flex-offset-xs="0" flex-offset-sm="0" flex-offset="4" ng-disabled="formState.readOnly || formState.notEditableBasicData"> <md-radio-button ng-value="false" aria-label="{{ \'curriculum.estonianEducationalInstitute\' | translate }}"> {{ \'curriculum.estonianEducationalInstitute\' | translate }} </md-radio-button> <md-radio-button ng-value="true" aria-label="{{ \'curriculum.jointPartnerAbroadSchool\' | translate }}"> {{ \'curriculum.foreignEducationalInstitute\' | translate }} </md-radio-button> </md-radio-group> </div> <div layout="row" flex="100" ng-show="curriculum.joint"> <md-input-container flex="64" ng-hide="curriculum.abroad"> <label>{{\'curriculum.estonianEducationalInstitute\' | translate}}&nbsp;*</label> <hois-classifier-select ng-model="curriculum.jointPartnerEhisSchool" main-classifier-code="EHIS_KOOL" filter-values="curriculum.jointPartners" by-property="ehisSchool" model-value-attr="code" ng-disabled="formState.readOnly || formState.notEditableBasicData"></hois-classifier-select> </md-input-container> <md-input-container ng-hide="!curriculum.abroad" flex="30"> <label>{{\'school.name\' | translate}}&nbsp;*</label> <input ng-model="curriculum.jointPartnerForeignNameEt" type="text" md-maxlength="100" ng-readonly="formState.readOnly"> </md-input-container> <md-input-container ng-hide="!curriculum.abroad" flex="30" flex-offset-xs="0" flex-offset-sm="0" flex-offset="4"> <label>{{\'school.nameEn\' | translate}}&nbsp;*</label> <input ng-model="curriculum.jointPartnerForeignNameEn" type="text" md-maxlength="100" ng-readonly="formState.readOnly"> </md-input-container> <md-button class="md-raised" ng-click="addJointPartner()" ng-disabled="(!curriculum.jointPartnerForeignNameEt || !curriculum.jointPartnerForeignNameEn) && !curriculum.jointPartnerEhisSchool">{{\'main.button.add\' | translate}}</md-button> </div> <span class="invalid" ng-show="higherCurriculumForm.$submitted && strictValidation() && (!curriculum.jointPartners || curriculum.jointPartners.length === 0)"> {{\'main.messages.error.atLeastOneShouldBeAdded\' | translate}} </span> <div layout="column" flex ng-show="curriculum.joint" class="common-label"> <div layout="row" ng-repeat="item in curriculum.jointPartners | filter: filterEmptyJointPartners | orderBy: [\'ehisSchool\', \'nameEt\']" class="align-center"> <div flex="5">&nbsp;</div> <div ng-if="item.abroad">{{currentLanguageNameField(item)}}</div> <div ng-if="!item.abroad"> <hois-classifier-value ng-model="item.ehisSchool" main-classifier-code="EHIS_KOOL"></hois-classifier-value></div> <div flex="5">&nbsp;</div> <div flex="5"><a class="remove nomargin" ng-click="removejointPartner(item)" ng-if="!formState.readOnly && !formState.notEditableBasicData && !item.hasSubjects">&times;</a></div> </div> </div> <div layout="row" layout-sm="column" layout-xs="column" ng-show="curriculum.joint"> <md-input-container flex="30" ng-if="curriculum.joint"> <label>{{\'curriculum.jointMentor\' | translate}}{{getStar()}}</label> <hois-classifier-select ng-model="curriculum.jointMentor" main-classifier-code="EHIS_KOOL" model-value-attr="code" show-only-values="jointPartnersEhisSchools" ng-required="strictValidation()" ng-disabled="formState.readOnly || formState.notEditableBasicData"></hois-classifier-select> </md-input-container> <md-input-container flex="66" flex-offset="4"> <label>{{\'curriculum.jointResponsible\' | translate}}</label> <input ng-model="curriculum.supervisor" type="text" md-maxlength="100" ng-readonly="formState.readOnly || formState.notEditableBasicData"> </md-input-container> </div> <md-input-container flex="100"> <label>{{\'curriculum.jointAgreementInfoEt\' | translate}}{{getStar()}}</label> <textarea ng-model="curriculum.contractEt" md-maxlength="1000" max-rows="10" ng-required="curriculum.joint && strictValidation()" ng-readonly="formState.readOnly || formState.notEditableBasicData"></textarea> </md-input-container> <md-input-container flex="100"> <label>{{\'curriculum.jointAgreementInfoEn\' | translate}}{{getStar()}}</label> <textarea ng-model="curriculum.contractEn" md-maxlength="1000" max-rows="10" ng-required="curriculum.joint && strictValidation()" ng-readonly="formState.readOnly || formState.notEditableBasicData"></textarea> </md-input-container> </div> </fieldset> <div>&nbsp;</div> <fieldset tabindex="9"> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'curriculum.address\' | translate}}</legend> <div layout="column"> <div layout="row"> <div flex> <hois-ads-adapter class="md-text" ng-model="formState.address.addressAds" ads-oid-model="formState.address.addressOid" address-model="formState.address.address" ov-model="formState.address.addressOv"></hois-ads-adapter> </div> <md-button class="md-raised" ng-click="addAddress()" ng-disabled="!formState.address.addressOv">{{\'main.button.add\' | translate}}</md-button> </div> <input ng-if="strictValidation()" style="display:none" type="number" readonly name="addressesLength" ng-model="validation.addressesLength" min="1"> <div md-colors="{color: \'warn-A400\'}" ng-messages="higherCurriculumForm.addressesLength.$error"> <div ng-if="higherCurriculumForm.$submitted" ng-message="min">{{\'main.messages.error.atLeastOneShouldBeAdded\' | translate}}</div> </div> <div layout="column" flex class="common-label"> <div layout="row" ng-repeat="item in curriculum.addresses | orderBy: \'address\'" class="align-center"> <div flex="5">&nbsp;</div> <div>{{::item.address}}</div> <div flex="5">&nbsp;</div> <div flex="5"><a class="remove nomargin" ng-click="removeAddress(item)">&times;</a></div> </div> </div> </div> </fieldset> <div>&nbsp;</div> <fieldset tabindex="12"> <legend md-colors="{color: \'primary-800\'}" ng-class="{invalid: strictValidation() && (!curriculum.specialities || curriculum.specialities.length === 0)}" class="md-title-small">{{\'curriculum.specialty.label\' | translate}} *</legend> <md-button class="md-raised" ng-click="openAddSpecialtyDialog()" ng-show="!formState.readOnly">{{\'curriculum.specialty.add\' | translate}}</md-button> <div ng-repeat="item in curriculum.specialities | orderBy: currentLanguageNameField()" layout="column"> <div layout="row" class="occupation-row align-center" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <div flex="35"><a ng-click="openAddSpecialtyDialog(item)" href="">{{currentLanguageNameField(item)}}</a></div> </div> </div> </fieldset> <div>&nbsp;</div> <fieldset tabindex="12" ng-show="gradeRequired()"> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'curriculum.grade.label\' | translate}}</legend> <md-button class="md-raised" ng-click="openAddGradeDialog()" ng-show="!formState.readOnly">{{\'curriculum.grade.add\' | translate}}</md-button> <div ng-repeat="item in curriculum.grades | orderBy: currentLanguageNameField()" layout="column" ng-show="gradeRequired()"> <div layout="row" class="occupation-row align-center" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <div flex="35"><a ng-click="openAddGradeDialog(item)" href="">{{currentLanguageNameField(item)}}</a></div> </div> </div> </fieldset> <div ng-if="curriculum.id">&nbsp;</div> <fieldset tabindex="11" ng-if="curriculum.id"> <legend md-colors="{color: \'primary-800\'}" class="md-title-small" ng-class="{invalid: higherCurriculumForm.$submitted && strictValidation() && !hasRequiredFiles()}">{{\'main.relatedFiles\' | translate}}</legend> <md-button class="md-raised" ng-click="openAddFileDialog()" ng-show="!formState.readOnly">{{\'main.button.uploadFile\' | translate}}</md-button> <table md-table class="secondary-table"> <thead md-head> <tr md-row> <th md-column><span>{{\'file.nameAndFile\' | translate}}</span></th> <th md-column><span>{{\'file.creationLocation\' | translate}}</span></th> <th md-column>{{\'file.type\' | translate}}</th> <th md-column>{{\'curriculum.sendToEhis\' | translate}}</th> <th md-column></th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="file in curriculum.files | orderBy: \'oisFile.fname\'" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell> {{file.oisFile.fname}} <a ng-href="{{getUrl(file, \'curriculum\')}}" download><md-icon md-font-set="material-icons">file_download</md-icon></a> </td> <td md-cell> {{file.ehis ? \'EHIS\' : \'ÕIS\'}} </td> <td md-cell> <hois-classifier-value ng-model="file.ehisFile" main-classifier-code="EHIS_FAIL"></hois-classifier-value> </td> <td md-cell> <md-checkbox ng-model="file.sendEhis" aria-label="send to ehis" ng-disabled="formState.readOnly"></md-checkbox> </td> <td md-cell> <md-button class="remove nomargin" ng-click="deleteFile(file)" ng-if="!formState.readOnly">&times;</md-button> </td> </tr> </tbody> </table> </fieldset> <div ng-if="curriculum.id">&nbsp;</div> <fieldset tabindex="12" ng-if="curriculum.id"> <legend md-colors="{color: \'primary-800\'}" class="md-title-small"><span ng-class="{invalid: higherCurriculumForm.$submitted && strictValidation() && !hasVerifiedVersions()}">{{\'curriculum.versions\' | translate}}</span></legend> <md-button class="md-raised" ng-click="goToVersionNewForm(version)" ng-show="versionCanBeAdded()">{{\'main.button.create\' | translate}}</md-button> <table md-table class="secondary-table"> <thead md-head> <tr md-row> <th md-column><span>{{\'curriculum.versionName\' | translate}}</span></th> <th md-column><span>{{\'main.status\' | translate}}</span></th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="version in curriculum.versions | orderBy: \'code\'" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell> <a ng-click="goToVersionForm(version)" href="">{{version.code}}</a> </td> <td md-cell><hois-classifier-value ng-model="version.status" main-classifier-code="OPPEKAVA_VERSIOON_STAATUS"></hois-classifier-value></td> </tr> </tbody> </table> </fieldset> <hois-created-modified object="curriculum" class="top-margin"></hois-created-modified> <div layout="row"> <div ng-show="curriculum.status === STATUS.ENTERING"> <div ng-show="!curriculum.id"> <md-button class="md-raised md-primary" ng-click="save()">{{\'main.button.save\' | translate}}</md-button> </div> <div ng-show="curriculum.id && !formState.readOnly"> <md-button class="md-raised md-primary" ng-click="save()" ng-if="curriculum.canChange">{{\'main.button.save\' | translate}}</md-button> <md-button class="md-raised" ng-click="saveAndProceed()" ng-if="curriculum.canChange && curriculum.canConfirm">{{\'main.button.status.approving\' | translate}}</md-button> <md-button class="md-raised" ng-click="setStatusClosed()" ng-if="curriculum.canChange && curriculum.canClose">{{\'main.button.status.close\' | translate}}</md-button> <md-button class="md-raised md-default" ng-click="delete()" ng-if="curriculum.canDelete">{{\'main.button.delete\' | translate}}</md-button> </div> <div ng-show="curriculum.id && formState.readOnly"> <md-button class="md-raised md-primary" ng-click="goToEditForm()" ng-if="curriculum.canChange">{{\'main.button.change\' | translate}}</md-button> </div> </div> <div ng-show="curriculum.status === STATUS.PROCEEDING && !formState.sentToEhis"> <div ng-show="!formState.readOnly"> <md-button class="md-raised md-primary" ng-click="save()" ng-if="curriculum.canChange">{{\'main.button.save\' | translate}}</md-button> <md-button class="md-raised md-default" ng-click="delete()" ng-if="curriculum.canDelete">{{\'main.button.delete\' | translate}}</md-button> </div> <div ng-show="formState.readOnly"> <md-button class="md-raised md-primary" ng-click="goToEditForm()" ng-if="curriculum.canChange">{{\'main.button.change\' | translate}}</md-button> <md-button class="md-raised md-default" ng-click="sendToEhis(true)" ng-if="curriculum.canConfirm">{{\'curriculum.button.sendToEhisTest\' | translate}}</md-button> <md-button class="md-raised md-default" ng-click="sendToEhis(false)" ng-if="curriculum.canConfirm">{{\'curriculum.button.sendToEhis\' | translate}}</md-button> <md-button class="md-raised" ng-click="setStatusClosed()" ng-if="curriculum.canClose">{{\'main.button.status.close\' | translate}}</md-button> </div> </div> <div ng-show="curriculum.status === STATUS.PROCEEDING && formState.sentToEhis"> <md-button class="md-raised md-default" ng-click="updateFromEhis(true)" ng-if="curriculum.canConfirm">{{\'curriculum.button.updateFromEhisTest\' | translate}}</md-button> <md-button class="md-raised md-default" ng-click="updateFromEhis(false)" ng-if="curriculum.canConfirm">{{\'curriculum.button.updateFromEhis\' | translate}}</md-button> </div> <div ng-show="curriculum.status === STATUS.VERIFIED"> <div ng-show="!formState.readOnly"> <md-button class="md-raised md-primary" ng-click="save()" ng-if="curriculum.canChange">{{\'main.button.save\' | translate}}</md-button> </div> <div ng-show="formState.readOnly"> <md-button class="md-raised md-primary" ng-click="goToEditForm()" ng-if="curriculum.canChange">{{\'main.button.change\' | translate}}</md-button> <md-button class="md-raised" ng-click="setStatusClosed()" ng-if="curriculum.canClose">{{\'main.button.status.close\' | translate}}</md-button> </div> </div> <a ng-show="curriculum.id && (auth.isAdmin() || curriculum.status === STATUS.VERIFIED)" href="{{formState.curriculumXmlUrl}}" target="_blank" class="md-button md-raised">XML</a> <md-button class="md-raised md-default" ng-click="back(\'#/curriculum\', higherCurriculumForm)">{{\'main.button.back\' | translate}}</md-button> </div> </form> </div>'),
a.put("higherCurriculum/higher.curriculum.specialty.add.dialog.html",'<md-dialog aria-label="specialty add dialog" flex="30" flex-xs="100"> <form name="dialogForm" ng-cloak> <md-toolbar> <div class="md-toolbar-tools"> <h2>{{"curriculum.specialty.editLabel" | translate}}</h2> <span flex></span> <md-button class="md-icon-button" ng-click="cancel()"> <md-icon md-font-set="material-icons">close</md-icon> </md-button> </div> </md-toolbar> <md-dialog-content> <span flex></span> <div class="ois-form-layout" layout="column" layout-margin ng-cloak> <div layout="column"> <md-input-container flex> <label>{{\'curriculum.specialty.nameEt\' | translate}}</label> <input ng-model="data.nameEt" type="text" required md-maxlength="100"> </md-input-container> <md-input-container flex> <label>{{\'curriculum.specialty.nameEn\' | translate}}</label> <input ng-model="data.nameEn" type="text" required md-maxlength="100"> </md-input-container> <md-input-container flex> <label>{{\'curriculum.specialty.credits\' | translate}}</label> <input name="credits" ng-model="data.credits" type="number" required min="0" max="{{maxCredits}}" pattern="^\\d+(\\.\\d{1})?$"> <div ng-messages="dialogForm.credits.$error" ng-show="dialogForm.credits.$dirty"> <div ng-message="min"> {{\'main.messages.error.positive\' | translate}} </div> <div ng-message="max"> {{\'curriculum.specialty.creditsError\' | translate}} ({{maxCredits}} EAP) </div> <div ng-message="pattern"> {{\'stateCurriculum.error.decimalPresision\' | translate}} </div> </div> </md-input-container> <md-input-container flex> <label>{{\'main.additionalInfo\' | translate}}</label> <textarea ng-model="data.description" md-maxlength="1000" max-rows="10"></textarea> </md-input-container> <md-input-container flex> <label>{{\'occupation.givenOccupation\' | translate}}</label> <hois-classifier-select ng-model="data.occupation" ng-change="occupationSelected()" main-classifier-code="KUTSE" model-value-attr="code" only-valid></hois-classifier-select> </md-input-container> <md-input-container flex ng-show="data.occupation"> <label>{{\'curriculum.specialty.specialtyReferenceEt\' | translate}}</label> <input ng-model="data.occupationEt" type="text" md-maxlength="255" ng-required="data.occupation"> </md-input-container> <md-input-container flex ng-show="data.occupation"> <label>{{\'curriculum.specialty.specialtyReferenceEn\' | translate}}</label> <input ng-model="data.occupationEn" type="text" md-maxlength="255" ng-required="data.occupation"> </md-input-container> </div> </div> </md-dialog-content> <md-dialog-actions layout="row" layout-align="start center"> <md-button class="md-raised md-primary" ng-click="submit()">{{"main.button.save" | translate}}</md-button> <md-button class="md-raised" ng-click="delete()" ng-if="!formState.isNew">{{"main.button.delete" | translate}}</md-button> <md-button class="md-raised" ng-click="cancel()">{{"main.button.close" | translate}}</md-button> </md-dialog-actions> </form> </md-dialog>'),a.put("higherCurriculum/higher.curriculum.specialty.view.dialog.html",'<md-dialog aria-label="specialty add dialog" flex="30" flex-xs="100"> <form name="dialogForm" ng-cloak> <md-toolbar> <div class="md-toolbar-tools"> <h2>{{"curriculum.specialty.viewLabel" | translate}}</h2> <span flex></span> <md-button class="md-icon-button" ng-click="cancel()"> <md-icon md-font-set="material-icons">close</md-icon> </md-button> </div> </md-toolbar> <md-dialog-content> <span flex></span> <div class="ois-form-layout" layout="column" layout-margin ng-cloak> <div layout="column"> <md-input-container flex> <label>{{\'curriculum.specialty.nameEt\' | translate}}</label> <input ng-model="data.nameEt" type="text" readonly> </md-input-container> <md-input-container flex> <label>{{\'curriculum.specialty.nameEn\' | translate}}</label> <input ng-model="data.nameEn" type="text" readonly> </md-input-container> <md-input-container flex> <label>{{\'curriculum.specialty.credits\' | translate}}</label> <input name="credits" ng-model="data.credits" type="number" readonly> </md-input-container> <md-input-container flex> <label>{{\'main.additionalInfo\' | translate}}</label> <textarea ng-model="data.description" max-rows="10" readonly></textarea> </md-input-container> <md-input-container flex> <label>{{\'occupation.givenOccupation\' | translate}}</label> <hois-classifier-select ng-model="data.occupation" main-classifier-code="KUTSE" model-value-attr="code" disabled></hois-classifier-select> </md-input-container> <md-input-container flex ng-show="data.occupation"> <label>{{\'curriculum.specialty.specialtyReferenceEt\' | translate}}</label> <input ng-model="data.occupationEt" type="text" readonly> </md-input-container> <md-input-container flex ng-show="data.occupation"> <label>{{\'curriculum.specialty.specialtyReferenceEn\' | translate}}</label> <input ng-model="data.occupationEn" type="text" readonly> </md-input-container> </div> </div> </md-dialog-content> <md-dialog-actions layout="row" layout-align="start center"> <md-button class="md-raised" ng-click="cancel()">{{"main.button.close" | translate}}</md-button> </md-dialog-actions> </form> </md-dialog>'),a.put("higherCurriculum/higher.curriculum.version.html",'<div class="ois-form-layout-padding" ng-cloak ng-show="!showMainForm"> <form name="higherCurriculumVersionForm" layout="column" class="nomargin"> <fieldset tabindex="1"> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'curriculum.versionMainData\' | translate}}</legend> <div layout="column"> <md-input-container flex ng-if="!showMainForm"> <label>{{\'curriculum.version.code\' | translate}}</label> <input name="code" ng-model="version.code" type="text" required md-maxlength="100" ng-model-options="{ debounce: 250 }" unique="curriculumVersionCodeUniqueQuery" ng-readonly="formState.readOnly"> <div ng-messages="higherCurriculumVersionForm.code.$error"> <div ng-message="notUnique"> {{\'main.messages.error.mustBeUnique\' | translate}} </div> </div> </md-input-container> <div layout="row" flex> <md-input-container flex="45"> <label>{{\'curriculum.version.firstAdmissionYear\' | translate}}</label> <md-select ng-model="version.admissionYear" required ng-disabled="formState.readOnly"> <md-option ng-repeat="year in ::admissionYears" ng-value="year" aria-label="{{year}}">{{year}}</md-option> </md-select> </md-input-container> <md-input-container flex="50" flex-offset="5"> <label>{{\'curriculum.version.type\' | translate}}</label> <hois-classifier-select ng-model="version.type" main-classifier-code="OPPEKAVA_VERSIOON_LIIK" required model-value-attr="code" ng-disabled="formState.readOnly"></hois-classifier-select> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="45" flex-sm="100" flex-xs="100"> <label>{{\'curriculum.specialty.specialties\' | translate}}</label> <md-select multiple ng-model="version.specialitiesReferenceNumbers" required ng-disabled="formState.readOnly"> <md-option ng-repeat="speciality in curriculum.specialities | orderBy: currentLanguageNameField()" ng-value="speciality.referenceNumber"> {{currentLanguageNameField(speciality)}} </md-option> </md-select> </md-input-container> <div flex="50" flex-offset="5" ng-show="!formState.readOnly" layout="start center"> <md-button class="md-raised" ng-click="openAddSpecialtyDialog()" ng-if="version.canChange">{{\'curriculum.specialty.addNew\' | translate}}</md-button> </div> </div> <br> </div> </fieldset> <div>&nbsp;</div> <fieldset tabindex="2" flex> <legend md-colors="{color: \'primary-800\'}" class="md-title-small" ng-class="{invalid: higherCurriculumVersionForm.$submitted && strictValidation() && !allSpecialitiesValid()}">{{\'module.modules\' | translate}}&nbsp;*</legend> <md-button class="md-raised" ng-click="openAddModuleDialog()" ng-if="!formState.readOnly && version.specialitiesReferenceNumbers.length > 0 && version.id && version.canChange">{{\'module.add\' | translate}}</md-button> <div ng-repeat="spectiality in curriculum.specialities | filter: filterSpecialities | orderBy: currentLanguageNameField()" flex> <h2 class="md-title-small" ng-class="{invalid: higherCurriculumVersionForm.$submitted && strictValidation() && !specialityValid(spectiality.id)}">{{\'curriculum.specialty.specialty\' | translate}} {{$index + 1}}: {{currentLanguageNameField(spectiality)}}</h2> <div flex class="secondary-table-header" layout="row"> <div flex="5">&nbsp;</div> <div flex="35">{{\'subject.name\' | translate}}</div> <div flex="10">{{\'subject.code\' | translate}}</div> <div flex="20">EAP</div> <div></div> </div> <div layout="column" flex ng-repeat="module in version.modules | filter: {minorSpeciality: false} | filter: filterModulesBySpeciality(spectiality) | orderBy: currentLanguageNameField()"> <div layout="row" flex class="occupation-header" layout-align="start center"> <a href="" ng-click="openAddModuleDialog(module)" flex="70" ng-class="{invalid: higherCurriculumVersionForm.$submitted && !moduleHasSubjects(module) && strictValidation()}"> {{\'curriculum.module\' | translate}} {{currentLanguageNameField(module)}} {{module.totalCredits}} EAP <span ng-if="module.type === \'KORGMOODUL_M\'">({{currentLanguage()==\'et\' ? module.typeNameEt : module.typeNameEn}})</span> <span ng-if="module.type !== \'KORGMOODUL_M\'">(<hois-classifier-value ng-model="module.type" main-classifier-code="KORGMOODUL" class="inline module-type"></hois-classifier-value>)</span> </a> </div> <div flex class="sub-header1" layout-align="start center" layout="row" ng-show="moduleMustHaveSubjects(module)"> <div>{{\'subject.mandatory\' | translate}}</div> </div> <div ng-repeat="subject in module.subjects | filter: {optional: false} | orderBy: currentLanguageNameField()" layout="row" flex class="secondary-table-row" layout-align="start center"> <div flex="5">&nbsp;</div> <div flex="35">{{currentLanguageNameField(subject)}}</div> <div flex="10">{{subject.code}}</div> <div flex="20">{{subject.credits}}</div> <div> <a class="remove nomargin" ng-click="deleteSubject(module, subject)" ng-if="!formState.readOnly">&times;</a> </div> </div> <div layout="row" flex layout-align="start center" class="secondary-table-header" ng-show="moduleMustHaveSubjects(module)"> <div flex="5">&nbsp;</div> <div flex="35">{{\'main.OF\' | translate}}</div> <div flex="10">&nbsp;</div> <div flex="20">{{module.compulsoryStudyCredits}}</div> <div></div> </div> <div flex class="sub-header1" layout-align="start center" layout="row" ng-show="moduleMustHaveSubjects(module)"> <div>{{\'subject.optional\' | translate}}</div> </div> <div ng-repeat="subject in module.subjects |\r\n                        filter: {optional: true} | filter: {electiveModule: \'!\'} | orderBy: currentLanguageNameField()" layout="row" flex class="secondary-table-row" layout-align="start center"> <div flex="5">&nbsp;</div> <div flex="35">{{currentLanguageNameField(subject)}}</div> <div flex="10">{{subject.code}}</div> <div flex="20">{{subject.credits}}</div> <div> <a class="remove nomargin" ng-click="deleteSubject(module, subject)" ng-if="!formState.readOnly">&times;</a> </div> </div> <div flex class="sub-header-italic" layout-align="start center" layout="row" style="padding-left: 10px" ng-show="moduleMustHaveSubjects(module)"> <div>{{\'module.optionalsWithMinimum\' | translate}}{{module.electiveModulesNumber}}</div> </div> <div ng-repeat="electiveModule in module.electiveModules | orderBy: currentLanguageNameField()" layout-align="start center" flex> <div class="sub-header2" layout-align="start center" layout="row"> <div class="elective-module">{{\'module.optional\' | translate}}: {{currentLanguageNameField(electiveModule)}}</div> </div> <div ng-repeat="subject in module.subjects | filter: {optional: true} |\r\n                                filter: {electiveModule: electiveModule.referenceNumber} | orderBy: currentLanguageNameField()" layout="row" flex class="secondary-table-row" layout-align="start center"> <div flex="5">&nbsp;</div> <div flex="35">{{currentLanguageNameField(subject)}}</div> <div flex="10">{{subject.code}}</div> <div flex="20">{{subject.credits}}</div> <div> <a class="remove nomargin" ng-click="deleteSubject(module, subject)" ng-if="!formState.readOnly">&times;</a> </div> </div> </div> <div layout="row" flex layout-align="start center" class="secondary-table-header"> <div flex="5">&nbsp;</div> <div flex="35">{{\'module.overallAtLeast\' | translate}}</div> <div flex="10">&nbsp;</div> <div flex="20">{{module.optionalStudyCredits}}</div> <div></div> </div> </div> <!-- end show modules by specialities--> </div> </fieldset> <div>&nbsp;</div> <fieldset tabindex="3"> <legend md-colors="{color: \'primary-800\'}" class="md-title-small" ng-class="{invalid: higherCurriculumVersionForm.$submitted && !allMinorSpecialitiesValid()}">{{\'curriculum.minorSpecialty.minorSpecialties\' | translate}}</legend> <md-button class="md-raised" ng-click="openAddMinorSpecialtyDialog()" ng-if="!formState.readOnly && version.id  && version.canChange">{{\'curriculum.minorSpecialty.add\' | translate}}</md-button> <div layout="column" flex ng-repeat="module in version.modules | filter: {minorSpeciality: true} | orderBy: currentLanguageNameField()"> <div layout="row" flex class="occupation-header" layout-align="start center"> <a href="" ng-click="openAddMinorSpecialtyDialog(module)" flex="70" ng-class="{invalid: higherCurriculumVersionForm.$submitted && !moduleHasSubjects(module) && strictValidation()}"> <span>{{\'curriculum.minorSpecialty.minorSpecialty\' | translate}} {{currentLanguageNameField(module)}} {{module.totalCredits}} EAP</span> </a> </div> <div flex class="sub-header1" layout-align="start center" layout="row"> <div>{{\'subject.mandatory\' | translate}}</div> </div> <div ng-repeat="subject in module.subjects | filter: {optional: false} | orderBy: currentLanguageNameField()" layout="row" flex class="secondary-table-row" layout-align="start center"> <div flex="5">&nbsp;</div> <div flex="35">{{currentLanguageNameField(subject)}}</div> <div flex="10">{{subject.code}}</div> <div flex="20">{{subject.credits}}</div> <div> <a class="remove nomargin" ng-click="deleteSubject(module, subject)" ng-if="!formState.readOnly">&times;</a> </div> </div> <div layout="row" flex layout-align="start center" class="secondary-table-header"> <div flex="5">&nbsp;</div> <div flex="35">{{\'main.OF\' | translate}}</div> <div flex="10">&nbsp;</div> <div flex="20">{{module.compulsoryStudyCredits}}</div> <div></div> </div> <div flex class="sub-header1" layout-align="start center" layout="row"> <div>{{\'subject.optional\' | translate}}</div> </div> <div ng-repeat="subject in module.subjects |\r\n                        filter: {optional: true} | filter: {electiveModule: \'!\'} | orderBy: currentLanguageNameField()" layout="row" flex class="secondary-table-row" layout-align="start center"> <div flex="5">&nbsp;</div> <div flex="35">{{currentLanguageNameField(subject)}}</div> <div flex="10">{{subject.code}}</div> <div flex="20">{{subject.credits}}</div> <div> <a class="remove nomargin" ng-click="deleteSubject(module, subject)" ng-if="!formState.readOnly">&times;</a> </div> </div> <div flex class="sub-header-italic" layout-align="start center" layout="row" style="padding-left: 10px"> <div>{{\'module.optionalsWithMinimum\' | translate}}{{module.electiveModulesNumber}}</div> </div> <div ng-repeat="electiveModule in module.electiveModules | orderBy: currentLanguageNameField()" layout-align="start center" flex> <div class="sub-header2" layout-align="start center" layout="row"> <div class="elective-module">{{\'module.optional\' | translate}}: {{currentLanguageNameField(electiveModule)}}</div> </div> <div ng-repeat="subject in module.subjects | filter: {optional: true} |\r\n                                filter: {electiveModule: electiveModule.referenceNumber} | orderBy: currentLanguageNameField()" layout="row" flex class="secondary-table-row" layout-align="start center"> <div flex="5">&nbsp;</div> <div flex="35">{{currentLanguageNameField(subject)}}</div> <div flex="10">{{subject.code}}</div> <div flex="20">{{subject.credits}}</div> <div> <a class="remove nomargin" ng-click="deleteSubject(module, subject)" ng-if="!formState.readOnly">&times;</a> </div> </div> </div> <div layout="row" flex layout-align="start center" class="secondary-table-header"> <div flex="5">&nbsp;</div> <div flex="35">{{\'module.overallAtLeast\' | translate}}</div> <div flex="10">&nbsp;</div> <div flex="20">{{module.optionalStudyCredits}}</div> <div></div> </div> </div> </fieldset> <div>&nbsp;</div> <fieldset tabindex="4"> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'curriculum.versionStatus\' | translate}}</legend> <div layout="row" flex="100"> <md-input-container flex="30" flex-sm="100" flex-xs="100"> <label>{{\'main.validFrom\' | translate}}</label> <md-datepicker ng-model="version.validFrom" md-open-on-focus required ng-disabled="formState.readOnly"></md-datepicker> </md-input-container> <md-input-container flex="20" flex-sm="100" flex-xs="100" flex-offset-xs="0" flex-offset-sm="0" flex-offset="4"> <label>{{\'main.validTo\' | translate}}</label> <md-datepicker ng-model="version.validThru" md-min-date="version.validFrom" md-open-on-focus ng-disabled="formState.readOnly"></md-datepicker> </md-input-container> </div> <div layout="row" class="top-margin form-readonly"> <md-input-container flex="30" flex-sm="100"> <label>{{\'main.status\' | translate}}</label> <hois-classifier-value ng-model="version.status" main-classifier-code="OPPEKAVA_VERSIOON_STAATUS"></hois-classifier-value> </md-input-container> </div> </fieldset> <hois-created-modified object="version"></hois-created-modified> </form> <div layout="row"> <div ng-show="version.status === VERSION_STATUS.S"> <div ng-show="!version.id"> <md-button class="md-raised md-primary" ng-click="save()">{{\'main.button.save\' | translate}}</md-button> </div> <div ng-show="!formState.readOnly && version.id"> <md-button class="md-raised md-primary" ng-click="save()" ng-if="version.canChange">{{\'main.button.save\' | translate}}</md-button> <md-button class="md-raised" ng-click="saveAndConfirm()" ng-if="version.canChange && version.canConfirm">{{\'curriculum.statuschange.version.button.verify\' | translate}}</md-button> <md-button class="md-raised" ng-click="setStatusClosed()" ng-if="version.canChange && version.canClose">{{\'curriculum.statuschange.version.button.close\' | translate}}</md-button> <md-button class="md-raised md-default" ng-click="copy()" ng-if="version.canChange">{{\'main.button.copy\' | translate}}</md-button> <md-button class="md-raised md-default" ng-click="delete()" ng-if="version.canDelete">{{\'main.button.delete\' | translate}}</md-button> </div> <div ng-show="formState.readOnly"> <md-button class="md-raised md-primary" ng-click="goToEditForm()" ng-if="version.canChange">{{\'main.button.change\' | translate}}</md-button> <md-button class="md-raised" ng-click="confirm()" ng-if="version.canConfirm">{{\'curriculum.statuschange.version.button.verify\' | translate}}</md-button> <md-button class="md-raised" ng-click="setStatusClosed()" ng-if="version.canClose">{{\'curriculum.statuschange.version.button.close\' | translate}}</md-button> <md-button class="md-raised md-default" ng-click="copy()" ng-if="version.canChange">{{\'main.button.copy\' | translate}}</md-button> </div> </div> <div ng-show="version.status === VERSION_STATUS.K"> <div ng-show="!formState.readOnly"> <md-button class="md-raised md-primary" ng-click="save()" ng-if="version.canChange">{{\'main.button.save\' | translate}}</md-button> </div> <div ng-show="formState.readOnly"> <md-button class="md-raised md-primary" ng-if="version.canChange" ng-click="goToEditForm()">{{\'main.button.change\' | translate}}</md-button> <md-button class="md-raised" ng-click="setStatusClosed()" ng-if="version.canClose">{{\'curriculum.statuschange.version.button.close\' | translate}}</md-button> <md-button class="md-raised md-default" ng-if="version.canChange" ng-click="copy()">{{\'main.button.copy\' | translate}}</md-button> </div> </div> <div ng-show="version.status === VERSION_STATUS.C"> <md-button class="md-raised md-default" ng-if="version.canChange" ng-click="copy()">{{\'main.button.copy\' | translate}}</md-button> </div> <a ng-show="showPrintButton()" href="{{formState.curriculumPdfUrl}}" target="_blank" class="md-button md-raised">{{\'main.button.print\' | translate}}</a> <a ng-show="showPrintButton()" href="{{formState.curriculumXmlUrl}}" target="_blank" class="md-button md-raised">XML</a> <md-button class="md-raised md-default" ng-click="back(\'#/higherCurriculum/\' + version.curriculum + \'/view\', higherCurriculumVersionForm)">{{\'main.button.back\' | translate}}</md-button> </div> </div> <style>.module-type {\r\n  text-decoration: underline;\r\n}</style>'),a.put("higherCurriculum/higher.curriculum.version.view.html",'<div class="ois-form-layout-padding" ng-cloak ng-show="!showMainForm"> <form name="higherCurriculumVersionForm" layout="column" class="nomargin"> <fieldset tabindex="1"> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'curriculum.versionMainData\' | translate}}</legend> <div layout="column"> <md-input-container flex ng-if="!showMainForm"> <label>{{\'curriculum.version.code\' | translate}}</label> <input name="code" ng-model="version.code" type="text" readonly> </md-input-container> <div layout="row" flex> <md-input-container flex="45"> <label>{{\'curriculum.version.firstAdmissionYear\' | translate}}</label> <md-select ng-model="version.admissionYear" disabled> <md-option ng-repeat="year in ::admissionYears" ng-value="year" aria-label="{{year}}">{{year}}</md-option> </md-select> </md-input-container> <md-input-container flex="50" flex-offset="5"> <label>{{\'curriculum.version.type\' | translate}}</label> <hois-classifier-select ng-model="version.type" main-classifier-code="OPPEKAVA_VERSIOON_LIIK" model-value-attr="code" disabled></hois-classifier-select> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="45" flex-sm="100" flex-xs="100"> <label>{{\'curriculum.specialty.specialties\' | translate}}</label> <md-select multiple ng-model="version.specialitiesReferenceNumbers" disabled> <md-option ng-repeat="speciality in curriculum.specialities | orderBy: currentLanguageNameField()" ng-value="speciality.referenceNumber"> {{currentLanguageNameField(speciality)}} </md-option> </md-select> </md-input-container> </div> <md-input-container flex ng-if="version.status === VERSION_STATUS.K"> <label>{{\'public.url\' | translate}}</label> <input ng-model="publicUrl" type="text" readonly> </md-input-container> <br> </div> </fieldset> <div>&nbsp;</div> <fieldset tabindex="2" flex> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'module.modules\' | translate}}</legend> <div ng-repeat="spectiality in curriculum.specialities | filter: filterSpecialities | orderBy: currentLanguageNameField()" flex> <h2 class="md-title-small">{{\'curriculum.specialty.specialty\' | translate}} {{$index + 1}}: {{currentLanguageNameField(spectiality)}}</h2> <div flex class="secondary-table-header" layout="row"> <div flex="5">&nbsp;</div> <div flex="35">{{\'subject.name\' | translate}}</div> <div flex="10">{{\'subject.code\' | translate}}</div> <div flex="20">EAP</div> <div></div> </div> <div layout="column" flex ng-repeat="module in version.modules | filter: {minorSpeciality: false} | filter: filterModulesBySpeciality(spectiality) | orderBy: currentLanguageNameField()"> <div layout="row" flex class="occupation-header" layout-align="start center"> <a href="" ng-click="openAddModuleDialog(module)" flex="70"> {{\'curriculum.module\' | translate}} {{currentLanguageNameField(module)}} {{module.totalCredits}} EAP <span ng-if="module.type === \'KORGMOODUL_M\'">({{currentLanguage()==\'et\' ? module.typeNameEt : module.typeNameEn}})</span> <span ng-if="module.type !== \'KORGMOODUL_M\'">(<hois-classifier-value ng-model="module.type" main-classifier-code="KORGMOODUL" class="inline module-type"></hois-classifier-value>)</span> </a> </div> <div flex class="sub-header1" layout-align="start center" layout="row" ng-show="moduleMustHaveSubjects(module)"> <div>{{\'subject.mandatory\' | translate}}</div> </div> <div ng-repeat="subject in module.subjects | filter: {optional: false} | orderBy: currentLanguageNameField()" layout="row" flex class="higher-curriculum-subject-row" layout-align="start center"> <div flex="5">&nbsp;</div> <div flex="35">{{currentLanguageNameField(subject)}}</div> <div flex="10">{{subject.code}}</div> <div flex="20">{{subject.credits}}</div> <div></div> </div> <div layout="row" flex layout-align="start center" class="secondary-table-header" ng-show="moduleMustHaveSubjects(module)"> <div flex="5">&nbsp;</div> <div flex="35">{{\'main.OF\' | translate}}</div> <div flex="10">&nbsp;</div> <div flex="20">{{module.compulsoryStudyCredits}}</div> <div></div> </div> <div flex class="sub-header1" layout-align="start center" layout="row" ng-show="moduleMustHaveSubjects(module)"> <div>{{\'subject.optional\' | translate}}</div> </div> <div ng-repeat="subject in module.subjects |\r\n                        filter: {optional: true} | filter: {electiveModule: \'!\'} | orderBy: currentLanguageNameField()" layout="row" flex class="higher-curriculum-subject-row" layout-align="start center"> <div flex="5">&nbsp;</div> <div flex="35">{{currentLanguageNameField(subject)}}</div> <div flex="10">{{subject.code}}</div> <div flex="20">{{subject.credits}}</div> <div></div> </div> <div flex class="sub-header-italic" layout-align="start center" layout="row" style="padding-left: 10px" ng-show="moduleMustHaveSubjects(module)"> <div>{{\'module.optionalsWithMinimum\' | translate}}{{module.electiveModulesNumber}}</div> </div> <div ng-repeat="electiveModule in module.electiveModules | orderBy: currentLanguageNameField()" layout-align="start center" flex> <div class="sub-header2" layout-align="start center" layout="row"> <div class="elective-module">{{\'module.optional\' | translate}}: {{currentLanguageNameField(electiveModule)}}</div> </div> <div ng-repeat="subject in module.subjects | filter: {optional: true} |\r\n                                filter: {electiveModule: electiveModule.referenceNumber} | orderBy: currentLanguageNameField()" layout="row" flex class="higher-curriculum-subject-row" layout-align="start center"> <div flex="5">&nbsp;</div> <div flex="35">{{currentLanguageNameField(subject)}}</div> <div flex="10">{{subject.code}}</div> <div flex="20">{{subject.credits}}</div> <div></div> </div> </div> <div layout="row" flex layout-align="start center" class="secondary-table-header"> <div flex="5">&nbsp;</div> <div flex="35">{{\'module.overallAtLeast\' | translate}}</div> <div flex="10">&nbsp;</div> <div flex="20">{{module.optionalStudyCredits}}</div> <div></div> </div> </div> <!-- end show modules by specialities--> </div> </fieldset> <div>&nbsp;</div> <fieldset tabindex="3"> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'curriculum.minorSpecialty.minorSpecialties\' | translate}}</legend> <div layout="column" flex ng-repeat="module in version.modules | filter: {minorSpeciality: true} | orderBy: currentLanguageNameField()"> <div layout="row" flex class="occupation-header" layout-align="start center"> <a href="" ng-click="openAddMinorSpecialtyDialog(module)" flex="70"> <span>{{\'curriculum.minorSpecialty.minorSpecialty\' | translate}} {{currentLanguageNameField(module)}} {{module.totalCredits}} EAP</span> </a> </div> <div flex class="sub-header1" layout-align="start center" layout="row"> <div>{{\'subject.mandatory\' | translate}}</div> </div> <div ng-repeat="subject in module.subjects | filter: {optional: false} | orderBy: currentLanguageNameField()" layout="row" flex class="higher-curriculum-subject-row" layout-align="start center"> <div flex="5">&nbsp;</div> <div flex="35">{{currentLanguageNameField(subject)}}</div> <div flex="10">{{subject.code}}</div> <div flex="20">{{subject.credits}}</div> <div></div> </div> <div layout="row" flex layout-align="start center" class="secondary-table-header"> <div flex="5">&nbsp;</div> <div flex="35">{{\'main.OF\' | translate}}</div> <div flex="10">&nbsp;</div> <div flex="20">{{module.compulsoryStudyCredits}}</div> <div></div> </div> <div flex class="sub-header1" layout-align="start center" layout="row"> <div>{{\'subject.optional\' | translate}}</div> </div> <div ng-repeat="subject in module.subjects |\r\n                        filter: {optional: true} | filter: {electiveModule: \'!\'} | orderBy: currentLanguageNameField()" layout="row" flex class="higher-curriculum-subject-row" layout-align="start center"> <div flex="5">&nbsp;</div> <div flex="35">{{currentLanguageNameField(subject)}}</div> <div flex="10">{{subject.code}}</div> <div flex="20">{{subject.credits}}</div> <div></div> </div> <div flex class="sub-header-italic" layout-align="start center" layout="row" style="padding-left: 10px"> <div>{{\'module.optionalsWithMinimum\' | translate}}{{module.electiveModulesNumber}}</div> </div> <div ng-repeat="electiveModule in module.electiveModules | orderBy: currentLanguageNameField()" layout-align="start center" flex> <div class="sub-header2" layout-align="start center" layout="row"> <div class="elective-module">{{\'module.optional\' | translate}}: {{currentLanguageNameField(electiveModule)}}</div> </div> <div ng-repeat="subject in module.subjects | filter: {optional: true} |\r\n                                filter: {electiveModule: electiveModule.referenceNumber} | orderBy: currentLanguageNameField()" layout="row" flex class="higher-curriculum-subject-row" layout-align="start center"> <div flex="5">&nbsp;</div> <div flex="35">{{currentLanguageNameField(subject)}}</div> <div flex="10">{{subject.code}}</div> <div flex="20">{{subject.credits}}</div> <div></div> </div> </div> <div layout="row" flex layout-align="start center" class="secondary-table-header"> <div flex="5">&nbsp;</div> <div flex="35">{{\'module.overallAtLeast\' | translate}}</div> <div flex="10">&nbsp;</div> <div flex="20">{{module.optionalStudyCredits}}</div> <div></div> </div> </div> </fieldset> <div>&nbsp;</div> <fieldset tabindex="4"> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'curriculum.versionStatus\' | translate}}</legend> <div layout="row" flex="100"> <md-input-container flex="30" flex-sm="100" flex-xs="100"> <label>{{\'main.validFrom\' | translate}}</label> <md-datepicker ng-model="version.validFrom" md-open-on-focus disabled></md-datepicker> </md-input-container> <md-input-container flex="20" flex-sm="100" flex-xs="100" flex-offset-xs="0" flex-offset-sm="0" flex-offset="4"> <label>{{\'main.validTo\' | translate}}</label> <md-datepicker ng-model="version.validThru" md-min-date="version.validFrom" md-open-on-focus disabled></md-datepicker> </md-input-container> </div> <div layout="row" class="top-margin form-readonly"> <md-input-container flex="30" flex-sm="100"> <label>{{\'main.status\' | translate}}</label> <hois-classifier-value ng-model="version.status" main-classifier-code="OPPEKAVA_VERSIOON_STAATUS"></hois-classifier-value> </md-input-container> </div> </fieldset> <hois-created-modified object="version"></hois-created-modified> </form> <div layout="row"> <div ng-show="version.status === VERSION_STATUS.S"> <md-button class="md-raised md-primary" ng-click="goToEditForm()" ng-if="version.canChange">{{\'main.button.change\' | translate}}</md-button> <md-button class="md-raised" ng-click="confirm()" ng-if="version.canConfirm">{{\'curriculum.statuschange.version.button.verify\' | translate}}</md-button> <md-button class="md-raised" ng-click="setStatusClosed()" ng-if="version.canClose">{{\'curriculum.statuschange.version.button.close\' | translate}}</md-button> <md-button class="md-raised md-default" ng-click="copy()" ng-if="version.canChange">{{\'main.button.copy\' | translate}}</md-button> </div> <div ng-show="version.status === VERSION_STATUS.K"> <md-button class="md-raised md-primary" ng-if="version.canChange" ng-click="goToEditForm()">{{\'main.button.change\' | translate}}</md-button> <md-button class="md-raised" ng-click="setStatusClosed()" ng-if="version.canClose">{{\'curriculum.statuschange.version.button.close\' | translate}}</md-button> <md-button class="md-raised md-default" ng-if="version.canChange" ng-click="copy()">{{\'main.button.copy\' | translate}}</md-button> </div> <div ng-show="version.status === VERSION_STATUS.C"> <md-button class="md-raised md-default" ng-if="version.canChange" ng-click="copy()">{{\'main.button.copy\' | translate}}</md-button> </div> <a ng-show="showPrintButton()" href="{{formState.curriculumPdfUrl}}" target="_blank" class="md-button md-raised">{{\'main.button.print\' | translate}}</a> <a ng-show="showPrintButton()" href="{{formState.curriculumXmlUrl}}" target="_blank" class="md-button md-raised">XML</a> <md-button class="md-raised md-default" ng-click="back(\'#/higherCurriculum/\' + version.curriculum + \'/view\', higherCurriculumVersionForm)">{{\'main.button.back\' | translate}}</md-button> </div> </div> <style>.module-type {\r\n  text-decoration: underline;\r\n}</style>'),
a.put("higherCurriculum/higher.curriculum.view.html",'<div class="ois-form-layout-padding"> <form name="higherCurriculumForm" layout="column" class="nomargin"> <div layout="row" layout-sm="column" layout-xs="column"> <fieldset tabindex="1" layout="column" flex="30" flex-sm="100" flex-xs="100" class="higher-curriculum-top-fieldset"> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'curriculum.nameTitle\' | translate}}</legend> <md-input-container flex="100"> <label>{{\'curriculum.nameEt\' | translate}}</label> <input ng-model="curriculum.nameEt" type="text" readonly> </md-input-container> <md-input-container flex="100"> <label>{{\'curriculum.nameEn\' | translate}}</label> <input ng-model="curriculum.nameEn" type="text" readonly> </md-input-container> <md-input-container flex="100"> <label>{{\'curriculum.nameGenitiveEt\' | translate}}</label> <input ng-model="curriculum.nameGenitiveEt" type="text" readonly> </md-input-container> <md-input-container flex="1000"> <label>{{\'curriculum.nameGenitiveEn\' | translate}}</label> <input ng-model="curriculum.nameGenitiveEn" type="text" readonly> </md-input-container> </fieldset> <fieldset tabindex="2" flex="66" flex-offset="4" flex-sm="100" flex-xs="100" flex-offset-xs="0" flex-offset-sm="0"> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'curriculum.mainData\' | translate}}</legend> <div layout="row" flex> <div flex="45"> <md-checkbox ng-model="curriculum.joint" aria-label="{{\'curriculum.isJoint\' | translate}}" class="md-primary" disabled> {{\'curriculum.isJoint\' | translate}} </md-checkbox> </div> <md-input-container flex="50" flex-offset="5"> <label>{{\'curriculum.code\' | translate}}</label> <input ng-model="curriculum.code" name="code" type="text" readonly> </md-input-container> </div> <div layout="row" flex> <md-input-container flex="45"> <label>{{\'curriculum.studyLevel\' | translate}}</label> <hois-classifier-select ng-model="curriculum.origStudyLevel" main-classifier-code="OPPEASTE" model-value-attr="code" disabled></hois-classifier-select> </md-input-container> <md-input-container flex="50" flex-offset="5"> <label>{{\'curriculum.merCode\' | translate}}</label> <input ng-model="curriculum.merCode" name="merCode" type="text" readonly> </md-input-container> </div> <div layout="row" flex> <md-input-container flex="45"> <label>{{\'curriculum.ekrLevel\' | translate}}</label> <hois-classifier-select ng-model="ekrLevel" main-classifier-code="EKR" watch-model="curriculum.origStudyLevel" filter-values connect-main-classifier-code="EKR" select-first-value disabled></hois-classifier-select> </md-input-container> <md-input-container flex="50" flex-offset="5"> <label>{{\'curriculum.creditsEap\' | translate}}</label> <input ng-model="curriculum.credits" type="number" name="credits" readonly> </md-input-container> </div> <div layout="row" flex> <md-input-container flex="45"> <label>{{\'curriculum.educationLevel\' | translate}}</label> <hois-classifier-select ng-model="educationLevel" main-classifier-code="HARIDUSTASE" watch-model="curriculum.origStudyLevel" filter-values connect-main-classifier-code="HARIDUSTASE" select-first-value disabled></hois-classifier-select> </md-input-container> <md-input-container flex="25" flex-offset="5"> <input ng-model="curriculum.studyPeriodYears" type="number" name="studyPeriodYears" placeholder="{{\'curriculum.studyPeriod\' | translate}} {{\'main.years\' | translate}}" readonly> </md-input-container> <md-input-container flex="20" flex-offset="5"> <input ng-model="curriculum.studyPeriodMonths" type="number" name="studyPeriodMonths" placeholder="{{\'main.months\' | translate}}" readonly> </md-input-container> </div> <div layout="row" flex> <md-input-container flex="45"> <label>{{\'curriculum.curriculumGroup\' | translate}}</label> <hois-classifier-select ng-model="curriculum.group" main-classifier-code="OPPEKAVAGRUPP" model-value-attr="code" disabled></hois-classifier-select> </md-input-container> <md-input-container flex="50" flex-offset="5"> <label>{{\'curriculum.studyLanguage\' | translate}}</label> <hois-classifier-select multiple ng-model="curriculum.studyLanguages" main-classifier-code="OPPEKEEL" model-value-attr="code" criteria="{higher: true}" disabled></hois-classifier-select> </md-input-container> </div> <div layout="row" flex> <md-input-container flex="45"> <label>{{\'curriculum.group\' | translate}}</label> <hois-classifier-select ng-model="curriculum.iscedClass" model-value-attr="code" main-classifier-code="ISCED_RYHM" criteria="{higher: true}" watch-model="curriculum.group" filter-values search-from-connect connect-main-classifier-code="OPPEKAVAGRUPP" disabled></hois-classifier-select> </md-input-container> <md-input-container flex="50" flex-offset="5"> <label>{{\'curriculum.languageDescription\' | translate}}</label> <textarea ng-model="curriculum.languageDescription" max-rows="10" readonly></textarea> </md-input-container> </div> <div layout="row" flex> <md-input-container flex="45"> <label>{{\'curriculum.areaOfStudy\' | translate}}</label> <hois-classifier-select ng-model="curriculum.areaOfStudy" main-classifier-code="ISCED_VALD" watch-model="curriculum.fieldOfStudy" model-value-attr="code" select-first-value connect-main-classifier-code="ISCED_VALD" criteria="{higher: true}" disabled></hois-classifier-select> </md-input-container> <!-- hois-school-department-select was not used here as it set form $dirty after page load.\r\n          In addition, extra logic in providing options --> <md-input-container flex="50" flex-offset="5"> <label> {{\'curriculum.structuralUnitResponsible\' | translate}} </label> <hois-select ng-model="curriculum.schoolDepartments" multiple values="schoolDepartments" disabled></hois-select> </md-input-container> </div> <div layout="row" flex> <md-input-container flex="45"> <label>{{\'curriculum.fieldOfStudy\' | translate}}</label> <hois-classifier-select ng-model="curriculum.fieldOfStudy" main-classifier-code="ISCED_SUUN" watch-model="curriculum.iscedClass" filter-values select-first-value connect-main-classifier-code="ISCED_SUUN" criteria="{higher: true}" disabled model-value-attr="code"></hois-classifier-select> </md-input-container> </div> </fieldset> </div> <div>&nbsp;</div> <fieldset tabindex="4"> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'curriculum.commonData\' | translate}}</legend> <div layout="column"> <md-input-container flex> <label>{{\'stateCurriculum.enter.objectivesEt\' | translate}}</label> <textarea ng-model="curriculum.objectivesEt" max-rows="10" readonly></textarea> </md-input-container> <md-input-container flex> <label>{{\'stateCurriculum.enter.objectivesEn\' | translate}}</label> <textarea ng-model="curriculum.objectivesEn" max-rows="10" readonly></textarea> </md-input-container> <md-input-container flex> <label>{{\'curriculum.studyOutcomesEt\' | translate}}</label> <textarea ng-model="curriculum.outcomesEt" max-rows="10" readonly></textarea> </md-input-container> <md-input-container flex> <label>{{\'curriculum.studyOutcomesEn\' | translate}}</label> <textarea ng-model="curriculum.outcomesEn" max-rows="10" readonly></textarea> </md-input-container> <md-input-container flex> <label>{{\'curriculum.higherAdmissionRequirementsEt\' | translate}}</label> <textarea ng-model="curriculum.admissionRequirementsEt" max-rows="10" readonly></textarea> </md-input-container> <md-input-container flex> <label>{{\'curriculum.higherAdmissionRequirementsEn\' | translate}}</label> <textarea ng-model="curriculum.admissionRequirementsEn" max-rows="10" readonly></textarea> </md-input-container> <md-input-container flex> <label>{{\'curriculum.higherGraduationRequirementsEt\' | translate}}</label> <textarea ng-model="curriculum.graduationRequirementsEt" max-rows="10" readonly></textarea> </md-input-container> <md-input-container flex> <label>{{\'curriculum.higherGraduationRequirementsEn\' | translate}}</label> <textarea ng-model="curriculum.graduationRequirementsEn" max-rows="10" readonly></textarea> </md-input-container> <md-input-container flex> <label>{{\'curriculum.optionalStudyDescription\' | translate}}</label> <textarea ng-model="curriculum.optionalStudyDescription" max-rows="10" readonly></textarea> </md-input-container> <md-input-container flex> <label>{{\'curriculum.addInfo\' | translate}}</label> <textarea ng-model="curriculum.addInfo" max-rows="10" readonly></textarea> </md-input-container> <md-input-container flex> <label>{{\'stateCurriculum.enter.comment\' | translate}}</label> <textarea ng-model="curriculum.description" max-rows="10" readonly></textarea> </md-input-container> <md-input-container flex> <label>{{\'curriculum.otherLanguages\' | translate}}</label> <textarea ng-model="curriculum.otherLanguages" max-rows="10" readonly></textarea> </md-input-container> <md-input-container flex> <label>{{\'curriculum.supervisor\' | translate}}</label> <input ng-value="currentLanguageNameField(curriculum.teacher)" readonly> </md-input-container> <md-input-container flex ng-if="curriculum.status === STATUS.VERIFIED"> <label>{{\'public.url\' | translate}}</label> <input ng-model="publicUrl" type="text" readonly> </md-input-container> </div> </fieldset> <div>&nbsp;</div> <fieldset tabindex="9"> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'curriculum.approvalInfo\' | translate}}</legend> <div layout="row" flex="100" layout-xs="column"> <md-input-container flex="30" flex-sm="100" flex-xs="100"> <label>{{\'curriculum.approvalDocumentNr\' | translate}}</label> <input ng-model="curriculum.approvalDokNr" type="text" readonly> </md-input-container> <md-input-container flex="20" flex-offset="4"> <label>{{\'curriculum.approvalDate\' | translate}}</label> <md-datepicker ng-model="curriculum.approval" md-open-on-focus disabled></md-datepicker> </md-input-container> <md-input-container flex="20" flex-offset="5"> <label>{{\'curriculum.htmRegisterDate\' | translate}}</label> <md-datepicker ng-model="curriculum.merRegDate" md-open-on-focus disabled></md-datepicker> </md-input-container> </div> <div layout="row" flex="100" layout-xs="column"> <md-input-container flex="30" flex-sm="100" flex-xs="100"> <label>{{\'curriculum.accreditationDesision\' | translate}}</label> <input ng-model="curriculum.accreditationResolution" type="text" readonly> </md-input-container> <md-input-container flex="20" flex-offset="4"> <label>{{\'curriculum.accreditationDate\' | translate}}</label> <md-datepicker ng-model="curriculum.accreditationDate" md-open-on-focus disabled></md-datepicker> </md-input-container> </div> <div layout="row" flex="100" layout-xs="column"> <md-input-container flex="30" flex-sm="100" flex-xs="100"> <label>{{\'curriculum.accreditationDesisionNumber\' | translate}}</label> <input ng-model="curriculum.accreditationNr" type="text" readonly> </md-input-container> <md-input-container flex="20" flex-offset="4"> <label>{{\'curriculum.accreditationValidityDate\' | translate}}</label> <md-datepicker ng-model="curriculum.accreditationValidDate" md-open-on-focus disabled></md-datepicker> </md-input-container> </div> </fieldset> <div>&nbsp;</div> <fieldset tabindex="10"> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'curriculum.diplomaInfo\' | translate}}</legend> <div layout="column"> <md-input-container flex> <label>{{\'curriculum.final31\' | translate}}</label> <input ng-model="curriculum.final31" type="text" readonly> </md-input-container> <md-input-container flex> <label>{{\'curriculum.final33\' | translate}}</label> <input ng-model="curriculum.final33" type="text" readonly> </md-input-container> <md-input-container flex> <label>{{\'curriculum.final51\' | translate}}</label> <input ng-model="curriculum.final51" type="text" readonly> </md-input-container> <md-input-container flex> <label>{{\'curriculum.final52\' | translate}}</label> <input ng-model="curriculum.final52" type="text" readonly> </md-input-container> <md-input-container flex> <label>{{\'curriculum.final61\' | translate}}</label> <input ng-model="curriculum.final61" type="text" readonly> </md-input-container> <br> <md-input-container flex> <label>{{\'curriculum.finalEn31\' | translate}}</label> <input ng-model="curriculum.finalEn31" type="text" readonly> </md-input-container> <md-input-container flex> <label>{{\'curriculum.finalEn33\' | translate}}</label> <input ng-model="curriculum.finalEn33" type="text" readonly> </md-input-container> <md-input-container flex> <label>{{\'curriculum.finalEn51\' | translate}}</label> <input ng-model="curriculum.finalEn51" type="text" readonly> </md-input-container> <md-input-container flex> <label>{{\'curriculum.finalEn52\' | translate}}</label> <input ng-model="curriculum.finalEn52" type="text" readonly> </md-input-container> <md-input-container flex> <label>{{\'curriculum.finalEn61\' | translate}}</label> <input ng-model="curriculum.finalEn61" type="text" readonly> </md-input-container> </div> </fieldset> <div>&nbsp;</div> <div>&nbsp;</div> <fieldset tabindex="11"> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'curriculum.statuses\' | translate}}</legend> <div layout="row" flex="100" style="overflow:auto"> <md-input-container flex="30" flex-sm="100" flex-xs="100"> <label>{{\'main.validFrom\' | translate}}</label> <md-datepicker ng-model="curriculum.validFrom" md-open-on-focus disabled></md-datepicker> </md-input-container> <md-input-container flex="20" flex-sm="100" flex-xs="100" flex-offset-xs="0" flex-offset-sm="0" flex-offset="4"> <label>{{\'main.validTo\' | translate}}</label> <md-datepicker ng-model="curriculum.validThru" md-min-date="curriculum.validFrom" md-open-on-focus disabled></md-datepicker> </md-input-container> </div> <div layout="row" flex="100" class="top-margin form-readonly"> <md-input-container flex="30" flex-sm="100" flex-xs="100" class="readonly"> <label class="label">{{\'main.status\' | translate}}</label> <hois-classifier-value ng-model="curriculum.status" main-classifier-code="OPPEKAVA_STAATUS"></hois-classifier-value> </md-input-container> <md-input-container flex="20" flex-sm="100" flex-xs="100" flex-offset-xs="0" flex-offset-sm="0" flex-offset="4"> <label>{{\'curriculum.statusInEhis\' | translate}}</label> <hois-classifier-value ng-model="curriculum.ehisStatus" main-classifier-code="OPPEKAVA_EHIS_STAATUS"></hois-classifier-value> </md-input-container> <md-input-container flex="40" flex-sm="100" flex-xs="100" flex-offset-xs="0" flex-offset-sm="0" flex-offset="5"> <label>{{\'curriculum.statusChangedDateInEhis\' | translate}}</label> <hois-value value="curriculum.ehisChanged | hoisDate"></hois-value> </md-input-container> </div> </fieldset> <div ng-show="curriculum.joint">&nbsp;</div> <fieldset tabindex="8" ng-show="curriculum.joint"> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'curriculum.jointInfo\' | translate}}</legend> <div layout="column"> <div layout="column" flex ng-show="curriculum.joint" class="common-label"> <label class="md-required common-label" flex="30">{{\'curriculum.jointSchool\' | translate}}</label> <div>&nbsp;</div> <div layout="row" ng-repeat="item in curriculum.jointPartners | filter: filterEmptyJointPartners | orderBy: [\'ehisSchool\', \'nameEt\']" class="align-center"> <div flex="5">&nbsp;</div> <div ng-if="item.abroad">{{currentLanguageNameField(item)}}</div> <div ng-if="!item.abroad"> <hois-classifier-value ng-model="item.ehisSchool" main-classifier-code="EHIS_KOOL"></hois-classifier-value> </div> <div flex="5">&nbsp;</div> <div flex="5"></div> </div> </div> <div layout="row" layout-sm="column" layout-xs="column" ng-show="curriculum.joint"> <md-input-container flex="30" flex-xs="100" ng-if="curriculum.joint"> <label>{{\'curriculum.jointMentor\' | translate}}</label> <hois-classifier-select ng-model="curriculum.jointMentor" main-classifier-code="EHIS_KOOL" model-value-attr="code" disabled></hois-classifier-select> </md-input-container> <md-input-container flex="66" flex-xs="100" flex-offset-xs="0" flex-offset="4"> <label>{{\'curriculum.jointResponsible\' | translate}}</label> <input ng-model="curriculum.supervisor" type="text" readonly> </md-input-container> </div> <md-input-container flex="100"> <label>{{\'curriculum.jointAgreementInfoEt\' | translate}}</label> <textarea ng-model="curriculum.contractEt" max-rows="10" readonly></textarea> </md-input-container> <md-input-container flex="100"> <label>{{\'curriculum.jointAgreementInfoEn\' | translate}}</label> <textarea ng-model="curriculum.contractEn" max-rows="10" readonly></textarea> </md-input-container> </div> </fieldset> <div>&nbsp;</div> <fieldset tabindex="9"> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'curriculum.address\' | translate}}</legend> <div layout="column" flex class="common-label"> <div layout="row" ng-repeat="item in curriculum.addresses | orderBy: \'address\'" class="align-center"> <div>{{::item.address}}</div> </div> </div> </fieldset> <div>&nbsp;</div> <fieldset tabindex="12"> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'curriculum.specialty.label\' | translate}}</legend> <div ng-repeat="item in curriculum.specialities | orderBy: currentLanguageNameField()" layout="column"> <div layout="row" class="occupation-row align-center" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <div flex="35"> <a ng-click="openViewSpecialtyDialog(item)" href="">{{currentLanguageNameField(item)}}</a> </div> </div> </div> </fieldset> <div>&nbsp;</div> <fieldset tabindex="12" ng-show="gradeRequired()"> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'curriculum.grade.label\' | translate}}</legend> <div ng-repeat="item in curriculum.grades | orderBy: currentLanguageNameField()" layout="column"> <div layout="row" class="occupation-row align-center" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <div flex="35"> <a ng-click="openViewGradeDialog(item)" href="">{{currentLanguageNameField(item)}}</a> </div> </div> </div> </fieldset> <fieldset tabindex="11"> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'main.relatedFiles\' | translate}}</legend> <md-table-container> <table md-table class="secondary-table"> <thead md-head> <tr md-row> <th md-column> <span>{{\'file.nameAndFile\' | translate}}</span> </th> <th md-column> <span>{{\'file.creationLocation\' | translate}}</span> </th> <th md-column>{{\'file.type\' | translate}}</th> <th md-column>{{\'curriculum.sendToEhis\' | translate}}</th> <th md-column></th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="file in curriculum.files | orderBy: \'oisFile.fname\'" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell> {{file.oisFile.fname}} <a ng-href="{{getUrl(file, \'curriculum\')}}" download> <md-icon md-font-set="material-icons">file_download</md-icon> </a> </td> <td md-cell> {{file.ehis ? \'EHIS\' : \'ÕIS\'}} </td> <td md-cell> <hois-classifier-value ng-model="file.ehisFile" main-classifier-code="EHIS_FAIL"></hois-classifier-value> </td> <td md-cell> <md-checkbox ng-model="file.sendEhis" aria-label="send to ehis" disabled></md-checkbox> </td> <td md-cell></td> </tr> </tbody> </table> </md-table-container> </fieldset> <div>&nbsp;</div> <fieldset tabindex="12"> <legend md-colors="{color: \'primary-800\'}" class="md-title-small"> <span>{{\'curriculum.versions\' | translate}}</span> </legend> <md-table-container> <table md-table class="secondary-table"> <thead md-head> <tr md-row> <th md-column> <span>{{\'curriculum.versionName\' | translate}}</span> </th> <th md-column> <span>{{\'main.status\' | translate}}</span> </th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="version in curriculum.versions | orderBy: \'code\'" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell> <a ng-click="goToVersionForm(version)" href="">{{version.code}}</a> </td> <td md-cell> <hois-classifier-value ng-model="version.status" main-classifier-code="OPPEKAVA_VERSIOON_STAATUS"></hois-classifier-value> </td> </tr> </tbody> </table> </md-table-container> </fieldset> <hois-created-modified object="curriculum" class="top-margin"></hois-created-modified> <div layout="row" layout-xs="column"> <div ng-show="curriculum.status === STATUS.ENTERING"> <md-button class="md-raised md-primary" ng-click="goToEditForm()" ng-if="curriculum.canChange">{{\'main.button.change\' | translate}}</md-button> </div> <div ng-show="curriculum.status === STATUS.PROCEEDING && !formState.sentToEhis" layout-xs="column"> <md-button class="md-raised md-primary" ng-click="goToEditForm()" ng-if="curriculum.canChange">{{\'main.button.change\' | translate}}</md-button> <md-button class="md-raised md-default" ng-click="sendToEhis(true)" ng-if="curriculum.canConfirm">{{\'curriculum.button.sendToEhisTest\' | translate}}</md-button> <md-button class="md-raised md-default" ng-click="sendToEhis(false)" ng-if="curriculum.canConfirm">{{\'curriculum.button.sendToEhis\' | translate}}</md-button> <md-button class="md-raised" ng-click="setStatusClosed()" ng-if="curriculum.canClose">{{\'main.button.status.close\' | translate}}</md-button> </div> <div ng-show="curriculum.status === STATUS.PROCEEDING && formState.sentToEhis" layout-xs="column"> <md-button class="md-raised md-default" ng-click="updateFromEhis(true)" ng-if="curriculum.canConfirm">{{\'curriculum.button.updateFromEhisTest\' | translate}}</md-button> <md-button class="md-raised md-default" ng-click="updateFromEhis(false)" ng-if="curriculum.canConfirm">{{\'curriculum.button.updateFromEhis\' | translate}}</md-button> </div> <div ng-show="curriculum.status === STATUS.VERIFIED" layout-xs="column"> <md-button class="md-raised md-primary" ng-click="goToEditForm()" ng-if="curriculum.canChange">{{\'main.button.change\' | translate}}</md-button> <md-button class="md-raised" ng-click="setStatusClosed()" ng-if="curriculum.canClose">{{\'main.button.status.close\' | translate}}</md-button> </div> <a ng-show="curriculum.id && (auth.isAdmin() || curriculum.status === STATUS.VERIFIED)" href="{{formState.curriculumXmlUrl}}" target="_blank" class="md-button md-raised">XML</a> <md-button class="md-raised md-default" ng-click="back(\'#/curriculum\')">{{\'main.button.back\' | translate}}</md-button> </div> </form> </div>'),a.put("higherProtocol/higher.protocol.edit.html",'<div class="ois-form-layout-padding" ng-cloak> <div class="form-readonly"> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex flex-sm="100" flex-xs="100"> <label>{{\'higherProtocol.number\' | translate}}</label> <hois-value value="record.protocolNr"></hois-value> </md-input-container> <md-input-container flex flex-sm="100" flex-xs="100"> <label>{{\'higherProtocol.status\' | translate}}</label> <hois-classifier-value ng-model="record.status" main-classifier-code="PROTOKOLL_STAATUS"></hois-classifier-value> </md-input-container> <md-input-container flex flex-sm="100" flex-xs="100"> <label>{{\'higherProtocol.studyPeriod\' | translate}}</label> <hois-value value="currentLanguageNameField(record.subjectStudyPeriodMidtermTaskDto.subjectStudyPeriod.studyPeriod)"></hois-value> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex flex-sm="100" flex-xs="100"> <label>{{\'higherProtocol.type\' | translate}}</label> <hois-classifier-value ng-model="record.protocolType" main-classifier-code="PROTOKOLLI_LIIK"></hois-classifier-value> </md-input-container> <md-input-container flex flex-sm="100" flex-xs="100"> <label>{{\'higherProtocol.subject\' | translate}}</label> <hois-value value="currentLanguageNameField(record.subjectStudyPeriodMidtermTaskDto.subjectStudyPeriod.subject)"></hois-value> </md-input-container> <md-input-container flex flex-sm="100" flex-xs="100"> <label>{{\'higherProtocol.teacher\' | translate}}</label> <hois-value value="record.subjectStudyPeriodMidtermTaskDto.subjectStudyPeriod.teachers.join(\', \')"></hois-value> </md-input-container> </div> </div> <form layout="column" name="higherProtocolForm"> <md-table-container> <table md-table md-row-select="formState.canCalculate" multiple ng-model="calculateGrades.protocolStudents"> <thead md-head> <tr md-row> <th md-column>{{\'higherProtocol.student\' | translate}}</th> <th md-column ng-show="record.subjectStudyPeriodMidtermTaskDto.subjectStudyPeriod.isPracticeSubject">{{\'higherProtocol.practiceResult\' | translate}}</th> <th md-column ng-repeat="midtermTask in record.subjectStudyPeriodMidtermTaskDto.midtermTasks"> {{getMidtermTaskHeader(midtermTask)}} </th> <th md-column>{{\'higherProtocol.finalGrade\' | translate}}</th> <th md-column ng-if="formState.canChangeConfirmedProtocolGrade" style="min-width: 250px">{{\'higherProtocol.changeReason\' | translate}}</th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="student in record.protocolStudents | orderBy: \'student.nameEt\'" ng-class-odd="\'odd\'" ng-class-even="\'even\'" md-select="student.id" md-select-id="student.id"> <ng-form name="higherProtocolStudentForm"> <td md-cell>{{student.student.nameEt}}</td> <td md-cell ng-show="record.subjectStudyPeriodMidtermTaskDto.subjectStudyPeriod.isPracticeSubject"> <span ng-class="{badResult: !gradeUtil.isPositiveValue(student.practiceResult, auth.school.letterGrades)}">{{student.practiceResult}}</span> </td> <td md-cell ng-repeat="result in record.subjectStudyPeriodMidtermTaskDto.studentResults | filter: filterStudentResults(student)"> <span ng-if="!result.isText">{{result.points}}</span> <span ng-if="result.isText">{{result.pointsTxt}}</span> </td> <td md-cell> <hois-select ng-model="student.grade" values="grades" value-property="code" show-property="{{auth.school.letterGrades ? \'value2\' : \'value\'}}" ng-disabled="!formState.canEditProtocol" aria-label="{{\'higherProtocol.finalGrade\' | translate}}" ng-change="gradeChanged(student)"></hois-select> </td> <td md-cell ng-if="formState.canChangeConfirmedProtocolGrade"> <md-input-container ng-if="student.gradeHasChanged"> <input ng-model="student.addInfo" aria-label="addInfo" type="text" md-maxlength="255" ng-change="addInfoChanged(student);" required> </md-input-container> <span ng-if="student.addInfo && !student.gradeHasChanged"> {{student.addInfo}} </span> </td> </ng-form> </tr> </tbody> </table> </md-table-container> <br> <div layout="row"> <md-button class="md-raised" ng-click="calculate()" ng-show="formState.canCalculate" ng-disabled="calculateGrades.protocolStudents.length === 0">{{\'higherProtocol.calculate\' | translate}}</md-button> </div> <br> <div> <md-button ng-show="formState.canEditProtocol && record.status.code !== \'PROTOKOLL_STAATUS_K\'" class="md-raised md-primary" ng-click="save()">{{\'main.button.save\' | translate}}</md-button> <md-button ng-show="formState.canConfirm" class="md-raised md-primary" ng-click="confirm()">{{\'main.button.confirm\' | translate}}</md-button> <a href="{{formState.protocolPdfUrl}}" target="_blank" class="md-button md-raised">{{\'main.button.print\' | translate}}</a> <a ng-show="record.oisFile" ng-href="{{getUrl(record.oisFile, \'protocol\')}}" target="_blank" rel="noopener noreferrer" class="md-button md-raised">{{\'higherProtocol.downloadSigned\' | translate}}</a> <md-button class="md-raised" ng-click="back(\'#/higherProtocols/\', higherProtocolForm)">{{\'main.button.back\' | translate}}</md-button> </div> </form> </div>'),a.put("higherProtocol/higher.protocol.new.html",'<div class="ois-form-layout-padding" ng-cloak> <div flex> <form ng-submit="submit()" novalidate layout="column" name="higherProtocolNewForm"> <div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex flex-sm="100"> <label class="textInput">{{\'higherProtocol.subject\' | translate}}</label> <hois-select ng-model="record.subjectStudyPeriod" values="subjectStudyPeriods" required></hois-select> </md-input-container> </div> <br> <div layout="row"> <label flex="10" flex-sm="30" flex-xs="30" class="common-label">{{\'higherProtocol.type\' | translate}}</label> <hois-classifier-radio layout="row" ng-model="record.protocolType" model-value-attr="code" main-classifier-code="PROTOKOLLI_LIIK" required ng-disabled="formState.readOnly" class="md-primary"></hois-classifier-radio> </div> <br> <md-table-container> <table md-table md-row-select="true" multiple ng-model="record.students"> <thead md-head> <tr md-row> <th md-column>{{\'higherProtocol.student\' | translate}}</th> <th md-column>{{\'higherProtocol.studentGroup\' | translate}}</th> <th md-column>{{\'higherProtocol.curriculumCode\' | translate}}</th> </tr> </thead> <tbody md-body> <tr md-row md-select="student.id" md-select-id="student.id" ng-repeat="student in students | orderBy: \'fullname\'" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell>{{student.fullname}}</td> <td md-cell>{{student.studentGroup.nameEt}}</td> <td md-cell>{{student.curriculum.nameEt}}</td> </tr> </tbody> </table> </md-table-container> </div> <br> <div layout="row"> <md-button class="md-raised md-primary" type="submit">{{\'higherProtocol.create\' | translate}}</md-button> <md-button class="md-raised" ng-click="back(\'#/higherProtocols/\')">{{"main.button.back" | translate}}</md-button> </div> </form> </div> </div>'),a.put("higherProtocol/higher.protocol.search.html",'<div class="ois-form-layout-padding ois-form-layout" ng-cloak> <div flex> <fieldset> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'main.searchlabel\' | translate}}</legend> <form name="higherProtocolSearchForm" ng-submit="loadData()" novalidate class="nomargin"> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="50" flex-sm="100" flex-xs="100"> <label class="textInput">{{\'higherProtocol.studyPeriod\' | translate}}</label> <hois-select ng-model="criteria.studyPeriod" values="studyPeriods" required autofocus></hois-select> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="50" flex-sm="100" flex-xs="100"> <label class="textInput">{{\'higherProtocol.subject\' | translate}}</label> <input type="text" ng-model="criteria.subject"> <!-- <hois-select ng-model="criteria.subject" type="subject" criteria="{higher: true}"></hois-select> --> </md-input-container> <md-input-container flex="45" flex-sm="100" flex-xs="100" flex-offset-xs="0" flex-offset-sm="0" flex-offset="5" ng-show="auth.isAdmin()"> <label class="textInput">{{\'higherProtocol.teacher\' | translate}}</label> <hois-select ng-model="criteria.teacher" type="teacher" criteria="{higher: true}"></hois-select> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="50" flex-sm="100" flex-xs="100"> <label class="textInput">{{\'higherProtocol.protocolStatus\' | translate}}</label> <hois-classifier-select ng-model="criteria.status" criteria="{higher: true}" model-value-attr="code" main-classifier-code="PROTOKOLL_STAATUS"></hois-classifier-select> </md-input-container> <md-input-container flex="45" flex-sm="100" flex-xs="100" flex-offset-xs="0" flex-offset-sm="0" flex-offset="5"> <label class="textInput">{{\'higherProtocol.number\' | translate}}</label> <input type="text" ng-model="criteria.protocolNr"> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <div flex="50" flex-sm="100" flex-xs="100"> <div layout="column" flex> <label class="common-label">{{\'higherProtocol.protocolCreatedDate\' | translate}}</label> <div layout="row" flex> <md-input-container> <label>{{\'main.from\' | translate}}</label> <md-datepicker ng-model="criteria.insertedFrom"></md-datepicker> </md-input-container> <md-input-container flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'main.thru\' | translate}}</label> <md-datepicker ng-model="criteria.insertedThru" md-min-date="criteria.insertedFrom"></md-datepicker> </md-input-container> </div> </div> </div> <div flex="45" flex-sm="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <div layout="column" flex> <label class="common-label">{{\'higherProtocol.protocolConfirmedDate\' | translate}}</label> <div layout="row" flex> <md-input-container> <label>{{\'main.from\' | translate}}</label> <md-datepicker ng-model="criteria.confirmDateFrom"></md-datepicker> </md-input-container> <md-input-container flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'main.thru\' | translate}}</label> <md-datepicker ng-model="criteria.confirmDateThru" md-min-date="criteria.confirmDateFrom"></md-datepicker> </md-input-container> </div> </div> </div> </div> <br><br><br> <div layout="row"> <md-button type="submit" class="md-raised md-primary">{{\'main.button.search\' | translate}}</md-button> <md-button class="md-raised" ng-click="clearCriteria()">{{\'main.button.clear\' | translate}}</md-button> <md-button class="md-raised" ng-href="#/higherProtocols/new" ng-if="formState.canCreate">{{\'main.button.create\' | translate}}</md-button> </div> </form> </fieldset> </div> </div> <div layout-padding> <div flex> <md-table-container> <table md-table md-progress="tabledata.$promise"> <thead md-head md-order="criteria.order" md-on-reorder="loadData"> <tr md-row> <th md-column md-order-by="protocolNr">{{\'higherProtocol.number\' | translate}}</th> <th md-column md-order-by="protocolHdata.type.{{currentLanguageNameField()}}">{{\'higherProtocol.type\' | translate}}</th> <th md-column md-order-by="protocolHdata.subjectStudyPeriod.subject.{{currentLanguageNameField()}}">{{\'higherProtocol.subject\' | translate}}</th> <th md-column>{{\'higherProtocol.teacher\' | translate}}</th> <th md-column md-order-by="status.{{currentLanguageNameField()}}">{{\'main.status\' | translate}}</th> <th md-column md-order-by="inserted">{{\'higherProtocol.insertedDate\' | translate}}</th> <th md-column md-order-by="confirmDate">{{\'higherProtocol.confirmedDate\' | translate}}</th> <th md-column md-order-by="confirmer">{{\'higherProtocol.confirmer\' | translate}}</th> <th md-column></th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="row in tabledata.content" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell><a ng-href="#/higherProtocols/{{::row.id}}/view">{{::row.protocolNr}}</a></td> <td md-cell>{{currentLanguageNameField(row.protocolType)}}</td> <td md-cell>{{currentLanguageNameField(row.subject)}}</td> <td md-cell> <table> <tr ng-repeat="teacher in row.teachers | orderBy"> <td>{{teacher}}</td> </tr> </table> </td> <td md-cell>{{currentLanguageNameField(row.status)}}</td> <td md-cell>{{row.inserted | hoisDate}}</td> <td md-cell>{{row.confirmDate | hoisDate}}</td> <td md-cell>{{::row.confirmer}}</td> <td md-cell> <md-button ng-if="row.canChange && row.status.code !== \'PROTOKOLL_STAATUS_K\'" md-no-ink class="md-primary change-button" ng-href="#/higherProtocols/{{::row.id}}/edit">{{\'main.button.change\' | translate}}</md-button> </td> </tr> </tbody> </table> </md-table-container> <md-table-pagination md-limit="criteria.size" md-limit-options="[10, 20, 50]" md-page="criteria.page" md-total="{{tabledata.totalElements}}" md-on-paginate="loadData" md-label="{page: \'{{\'main.page\' | translate}}:\', rowsPerPage: \'{{\'main.rowPerPage\' | translate}}:\', of: \'{{\'main.of\' | translate}}\'}" md-page-select></md-table-pagination> </div> </div>'),
a.put("higherProtocol/higher.protocol.view.html",'<div class="ois-form-layout-padding" ng-cloak> <div class="form-readonly"> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex flex-sm="100" flex-xs="100"> <label>{{\'higherProtocol.number\' | translate}}</label> <hois-value value="record.protocolNr"></hois-value> </md-input-container> <md-input-container flex flex-sm="100" flex-xs="100"> <label>{{\'higherProtocol.status\' | translate}}</label> <hois-classifier-value ng-model="record.status" main-classifier-code="PROTOKOLL_STAATUS"></hois-classifier-value> </md-input-container> <md-input-container flex flex-sm="100" flex-xs="100"> <label>{{\'higherProtocol.studyPeriod\' | translate}}</label> <hois-value value="currentLanguageNameField(record.subjectStudyPeriodMidtermTaskDto.subjectStudyPeriod.studyPeriod)"></hois-value> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex flex-sm="100" flex-xs="100"> <label>{{\'higherProtocol.type\' | translate}}</label> <hois-classifier-value ng-model="record.protocolType" main-classifier-code="PROTOKOLLI_LIIK"></hois-classifier-value> </md-input-container> <md-input-container flex flex-sm="100" flex-xs="100"> <label>{{\'higherProtocol.subject\' | translate}}</label> <hois-value value="currentLanguageNameField(record.subjectStudyPeriodMidtermTaskDto.subjectStudyPeriod.subject)"></hois-value> </md-input-container> <md-input-container flex flex-sm="100" flex-xs="100"> <label>{{\'higherProtocol.teacher\' | translate}}</label> <hois-value value="record.subjectStudyPeriodMidtermTaskDto.subjectStudyPeriod.teachers.join(\', \')"></hois-value> </md-input-container> </div> </div> <form layout="column" name="higherProtocolForm"> <md-table-container> <table md-table> <thead md-head> <tr md-row> <th md-column>{{\'higherProtocol.student\' | translate}}</th> <th md-column ng-show="record.subjectStudyPeriodMidtermTaskDto.subjectStudyPeriod.isPracticeSubject">{{\'higherProtocol.practiceResult\' | translate}}</th> <th md-column ng-repeat="midtermTask in record.subjectStudyPeriodMidtermTaskDto.midtermTasks"> {{getMidtermTaskHeader(midtermTask)}} </th> <th md-column>{{\'higherProtocol.finalGrade\' | translate}}</th> <th md-column ng-if="record.status.code === \'PROTOKOLL_STAATUS_K\'" style="min-width: 250px">{{\'higherProtocol.changeReason\' | translate}}</th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="student in record.protocolStudents | orderBy: \'student.nameEt\'" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <ng-form name="higherProtocolStudentForm"> <td md-cell>{{student.student.nameEt}}</td> <td md-cell ng-show="record.subjectStudyPeriodMidtermTaskDto.subjectStudyPeriod.isPracticeSubject"> <span ng-class="{badResult: !gradeUtil.isPositiveValue(student.practiceResult, auth.school.letterGrades)}">{{student.practiceResult}}</span> </td> <td md-cell ng-repeat="result in record.subjectStudyPeriodMidtermTaskDto.studentResults | filter: filterStudentResults(student)"> <span ng-if="!result.isText">{{result.points}}</span> <span ng-if="result.isText">{{result.pointsTxt}}</span> </td> <td md-cell> <span ng-class="{badResult: !gradeUtil.isPositiveValue(student.gradeValue, auth.school.letterGrades)}">{{student.gradeValue}}</span> </td> <td md-cell ng-if="record.status.code === \'PROTOKOLL_STAATUS_K\'">{{student.addInfo}}</td> </ng-form> </tr> </tbody> </table> </md-table-container> <br> <div> <md-button ng-if="formState.canEditProtocol" class="md-raised md-primary" ng-href="#/higherProtocols/{{record.id}}/edit">{{\'main.button.change\' | translate}}</md-button> <a href="{{formState.protocolPdfUrl}}" target="_blank" class="md-button md-raised">{{\'main.button.print\' | translate}}</a> <a ng-show="record.oisFile" ng-href="{{getUrl(record.oisFile, \'protocol\')}}" target="_blank" rel="noopener noreferrer" class="md-button md-raised">{{\'higherProtocol.downloadSigned\' | translate}}</a> <md-button class="md-raised" ng-click="back(\'#/higherProtocols/\')">{{\'main.button.back\' | translate}}</md-button> </div> </form> </div>'),a.put("home/home.html",'<div layout-padding> <div ng-if="state.currentUser" ng-controller="AuthenticatedHomeController as ctrl" layout="column"> <div ng-if="hasUnconfirmedPrograms.has"> <md-whiteframe class="md-whiteframe-1dp attention-whiteframe" flex="100" layout layout-align="left center"> <div md-colors="{color: \'warn\'}"> <md-icon md-colors="{color: \'warn\'}" md-font-set="material-icons">info_outline</md-icon> <span>{{\'subjectProgram.youHaveUnconfirmedPrograms\' | translate}} <a ng-href="/#/subjectProgram?_menu">{{\'main.button.view\' | translate}}</a></span> </div> </md-whiteframe> </div> <div ng-if="hasUncompletedPrograms.has"> <md-whiteframe class="md-whiteframe-1dp attention-whiteframe" flex="100" layout layout-align="left center"> <div md-colors="{color: \'warn\'}"> <md-icon md-colors="{color: \'warn\'}" md-font-set="material-icons">info_outline</md-icon> <span>{{\'subjectProgram.youHaveUncompletedPrograms\' | translate}} <a ng-href="/#/subjectStudyPeriods?_menu">{{\'main.button.view\' | translate}}</a></span> </div> </md-whiteframe> </div> <div ng-if="hasExpiredBaseModules.length"> <md-whiteframe class="md-whiteframe-1dp attention-whiteframe" flex="100" layout layout-align="left center"> <div md-colors="{color: \'warn\'}"> <md-icon md-colors="{color: \'warn\'}" md-font-set="material-icons">info_outline</md-icon> <span>{{\'basemodule.youHaveExpiredBaseModules\' | translate}} <a ng-href="/#/basemodule?_menu">{{\'main.button.view\' | translate}}</a></span> </div> </md-whiteframe> </div> <div ng-if="hasUnacceptedAbsences"> <md-whiteframe class="md-whiteframe-1dp attention-whiteframe" flex="100" layout layout-align="left center"> <div md-colors="{color: \'warn\'}"> <md-icon md-colors="{color: \'warn\'}" md-font-set="material-icons">info_outline</md-icon> <span>{{\'absence.youHaveUnacceptedAbsences\' | translate}} <a ng-href="/#/absences?_menu">{{\'main.button.view\' | translate}}</a></span> </div> </md-whiteframe> </div> <div ng-if="unconfirmedJournals && unconfirmedJournals.count > 0"> <md-whiteframe class="md-whiteframe-1dp attention-whiteframe" flex="100" layout layout-align="left center"> <div md-colors="{color: \'accent\'}"> <md-icon md-colors="{color: \'accent\'}" md-font-set="material-icons">info_outline</md-icon> <span ng-if="unconfirmedJournals.count === 1">{{\'journal.unconfirmedCountOne\' | translate}}</span> <span ng-if="unconfirmedJournals.count > 1">{{\'journal.unconfirmedCount\' | translate:unconfirmedJournals}}</span> </div> </md-whiteframe> <br> </div> <div layout="column" layout-gt-md="row" layout-margin> <div id="column-1" flex-gt-md="{{ sessionStudentId ? \'50\' : \'100\' }}" flex="100"> <!--div style="margin-bottom: 8px;" layout="row" >\r\n          <a style="font-size: 13px; font-weight: normal; min-height: inherit; line-height: inherit; padding: 0;" class="md-primary md-hue-2 md-button md-ink-ripple" ng-href="/#/studentrepresentatives/applications/new?_menu">{{\'home.represantiveApplication\' | translate}}</a>\r\n        </div--> <div ng-include="\'home/home.student.expiringOccupationStandards.html\'"></div> <div ng-include="\'home/home.student.generalMessages.html\'"></div> <div ng-include="\'home/home.student.unreadMessages.html\'"></div> <div ng-if="sessionStudentId" ng-include="\'home/home.student.homeworkAndTests.html\'"></div> <div ng-if="sessionStudentId" ng-include="\'home/home.student.absences.html\'"></div> <div ng-if="sessionStudentId" ng-include="\'home/home.student.lastResults.html\'"></div> <div ng-if="sessionStudentId" ng-include="\'home/home.student.declaredSubjects.html\'"></div> </div> <div ng-if="sessionStudentId" id="column-2" flex-gt-md="50" flex="100"> </div> </div> </div> <div ng-if="!state.currentUser" class="schoolList"> <md-grid-list md-cols="1" md-cols-sm="2" md-cols-md="3" md-cols-gt-md="6" md-row-height-gt-md="1:1" md-row-height="4:3" md-gutter="24px" md-gutter-gt-sm="24px"> <md-grid-tile ng-repeat="school in schools" md-colspan="1"> <button class="schoolTileButton" ng-click="openSchoolCurriculumSearch(school.id)"> <img class="schoolTileImage" ng-src="data:image/JPEG;base64,{{school.logo}}" on-error-src="images/HITSA_innov_logo_03.4e2f45c0.png"> <md-grid-tile-footer class="schoolTileFooter"> <span>{{currentLanguageNameField(school)}}</span> </md-grid-tile-footer> </button> </md-grid-tile> </md-grid-list> </div> </div> <style>pre {\r\n    white-space: pre-wrap;       /* Since CSS 2.1 */\r\n    white-space: -moz-pre-wrap;  /* Mozilla, since 1999 */\r\n    white-space: -pre-wrap;      /* Opera 4-6 */\r\n    white-space: -o-pre-wrap;    /* Opera 7 */\r\n    word-wrap: break-word;       /* Internet Explorer 5.5+ */\r\n  }\r\n\r\n  #column-1 .md-button, #column-2 .md-button {\r\n    min-width: 44px;\r\n    float: right;\r\n  }</style>'),a.put("home/home.student.absences.html",'<hois-collapsable class="hois-collapse2" expanded="true" ng-if="studentAbsences.length > 0"> <hois-collapsable-header> <span>{{\'home.student.absences\' | translate}}</span> </hois-collapsable-header> <md-table-container> <table md-table class="absence-table"> <tbody md-body> <tr md-row class="header"> <td md-cell>{{\'academicCalendar.date\' | translate}}</td> <td md-cell>{{\'home.student.absence.beingLate\' | translate}}</td> <td md-cell>{{\'home.student.absence.absences\' | translate}}</td> <td md-cell></td> </tr> </tbody> <tbody md-body ng-repeat-start="(key, group) in absenceGroups" ng-click="openCloseDetails(group)" style="cursor:pointer"> <tr md-row> <td md-cell>{{key || \'-\'}}</td> <td md-cell class="sub-header">{{group.PUUDUMINE_H}}</td> <td md-cell class="sub-header">{{group.PUUDUMINE_P}}</td> <td md-cell> <md-button style="margin: 0"> <md-icon md-font-set="material-icons md-dark"> {{group.clicked ? "keyboard_arrow_up" : "keyboard_arrow_down"}} </md-icon> </md-button> </td> </tr> </tbody> <tbody md-body ng-repeat-end ng-show="group.clicked"> <tr class="add-info" md-row ng-repeat="absence in group | orderBy: [\'lessonNrStart\', \'lessonNrEnd\']" ng-init="$last && pageLoadingHandler.setFinish(\'studentAbsences\')"> <td md-cell ng-if="absence.lessonNrStart && !absence.lessonNrEnd">{{absence.lessonNrStart}}. {{\'home.student.lesson\' | translate}}</td> <td md-cell ng-if="absence.lessonNrStart && absence.lessonNrEnd">{{absence.lessonNrStart}} - {{absence.lessonNrEnd}}. {{\'home.student.lesson\' | translate}}</td> <td md-cell ng-if="!absence.lessonNrStart && !absence.lessonNrEnd"></td> <td md-cell>{{absence.absenceCode === \'PUUDUMINE_H\' ? absence.journalName : ""}}</td> <td md-cell>{{absence.absenceCode === \'PUUDUMINE_P\' ? absence.journalName : ""}}</td> <td md-cell></td> </tr> </tbody> </table> </md-table-container> </hois-collapsable> <!-- <span ng-show="pageLoadingHandler.setFinish(\'studentAbsences\') && false"></span> --> <style>table.absence-table tr.header > td {\r\n        font-size: 15px !important;\r\n        font-style: normal;\r\n        font-weight: normal;\r\n        color: #ADADAD !important;\r\n    }\r\n    table.absence-table tr.add-info > td {\r\n        font-weight: bold;\r\n    }\r\n    table.absence-table td {\r\n        max-width: 35%;\r\n        text-align: center !important;\r\n    }\r\n    table.absence-table td.sub-header {\r\n        color: #0D47A1 !important;\r\n    }\r\n    table.absence-table td:first-child {\r\n        width: 15% !important;\r\n        text-align: start !important;\r\n    }\r\n    table.absence-table td:last-child {\r\n        width: 15% !important;\r\n        text-align: end !important;\r\n    }</style>'),a.put("home/home.student.declaredSubjects.html",'<hois-collapsable class="hois-collapse2" expanded="true" ng-if="declaration.status"> <hois-collapsable-header> <span>{{\'home.student.declaredSubjects\' | translate}}</span> </hois-collapsable-header> <md-table-container> <table md-table> <thead md-head> <tr md-row> <th md-column>{{\'declaration.subject\' | translate}}</th> <th md-column>{{\'declaration.teacher\' | translate}}</th> <th md-column>{{\'studyMaterial.label\' | translate}}</th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="subject in declaration.subjects | orderBy: \'subject.\' + currentLanguageNameField()" ng-class-odd="\'odd\'" ng-class-even="\'even\'" ng-init="$last && pageLoadingHandler.setFinish(\'declaration\')"> <td md-cell> {{currentLanguageNameField(subject.subject)}} ({{subject.subject.code}}) <span ng-show="subject.isDeclaredRepeatedly">&nbsp;*</span> </td> <td md-cell> <table> <tr ng-repeat="teacher in subject.teachers | orderBy"> <td>{{teacher}}</td> </tr> </table> </td> <td md-cell><a ng-href="/#/studyMaterial/higher/{{subject.subjectStudyPeriod}}/view">{{\'studyMaterial.openfolder\' | translate}}</a></td> </tr> </tbody> </table> </md-table-container> </hois-collapsable> <!-- <span ng-show="pageLoadingHandler.setFinish(\'declaration\') && false"></span> -->'),a.put("home/home.student.expiringOccupationStandards.html",'<hois-collapsable expanded="true" class="hois-collapse2" ng-if="expiringOccupationStandards && expiringOccupationStandards.length > 0" label="(\'home.expiringOccupationStandards.title\' | translate)" link="(numberOfOccupationStandards? \'main.button.view\' : \'main.button.hide\')|translate" action="toggleNumberOfOccupationStandards()" ngif="expiringOccupationStandards && expiringOccupationStandards.length > 3"> <!--span ng-if="expiringOccupationStandards && expiringOccupationStandards.length > 3">\r\n    <md-button class="md-primary" ng-click="toggleNumberOfOccupationStandards()">{{(numberOfOccupationStandards? \'main.button.view\' : \'main.button.hide\')|translate}}</md-button>\r\n  </span--> <!--md-content>\r\n    <md-list>\r\n      <md-list-item class="md-3-line" ng-repeat="row in expiringOccupationStandards | limitTo:numberOfOccupationStandards">\r\n        <div class="md-list-item-text" layout="row" flex>\r\n          <div flex="40">{{::currentLanguageNameField(row)}}</div>\r\n          <div flex="20">{{::row.validThru | hoisDate}}</div>\r\n          <div flex="40">{{\'home.expiringOccupationStandards.curriculum\' | translate}}&nbsp;{{::row.curriculums.join(\', \')}}</div>\r\n        </div>\r\n        <md-divider></md-divider>\r\n      </md-list-item>\r\n    </md-list>\r\n  </md-content--> <md-table-container> <table md-table> <tbody md-body> <tr md-row ng-repeat="row in expiringOccupationStandards | limitTo:numberOfOccupationStandards" ng-init="$last && pageLoadingHandler.setFinish(\'expiringOccupationStandards\')"> <td md-cell width="40%">{{::currentLanguageNameField(row)}}</td> <td md-cell width="10%">{{::row.validThru | hoisDate}}</td> <td md-cell>{{\'home.expiringOccupationStandards.curriculum\' | translate}}&nbsp;{{::row.curriculums.join(\', \')}}</td> </tr> </tbody> </table> </md-table-container> </hois-collapsable> <!-- <span ng-show="pageLoadingHandler.setFinish(\'expiringOccupationStandards\') && false"></span> -->'),a.put("home/home.student.generalMessages.html",'<hois-collapsable class="hois-collapse2" ng-show="showGeneralMessages" label="(\'home.generalmessages\' | translate)" expanded="true"> <md-table-container> <table md-table md-progress="generalmessages.$promise"> <tbody md-body> <tr md-row ng-repeat-start="row in generalmessages.content" ng-click="openCloseDetails(row)" aria-label="{{row.clicked ? \'main.button.hide\' : \'main.button.view\' | translate}}" ng-style="{\'cursor\': row.content ? \'pointer\' : \'default\'}" ng-init="$last && pageLoadingHandler.setFinish(\'generalMessages\')"> <td md-cell width="10%">{{::row.inserted | hoisDate}}</td> <td md-cell width="90%"> <p style="color: rgb(13, 71, 161)">{{::row.title}}</p> </td> <td md-cell> <md-button style="margin: 0" ng-if="row.content"> <md-icon md-font-set="material-icons md-dark"> {{row.clicked ? "keyboard_arrow_up" : "keyboard_arrow_down"}} </md-icon> </md-button> </td> </tr> <tr ng-repeat-end ng-show="row.clicked"> <td style="border: none" class="disableTableData"></td> <td md-cell style="border: none" colspan="3" class="noPadding"> <pre class="paddingLeft-24" style="width: 100%">{{::row.content}}</pre> </td> </tr> </tbody> </table> </md-table-container> <md-table-pagination md-limit="criteria.size" md-limit-options="[5, 10, 15]" ng-if="generalmessages.totalElements > criteria.size" md-page="criteria.page" md-total="{{generalmessages.totalElements}}" md-on-paginate="loadGeneralMessages" md-label="{page: \'{{\'main.page\' | translate}}:\', rowsPerPage: \'{{\'main.rowPerPage\' | translate}}:\', of: \'{{\'main.of\' | translate}}\'}" md-page-select></md-table-pagination> </hois-collapsable> <!-- <span ng-show="pageLoadingHandler.setFinish(\'generalMessages\') && false"></span> -->'),a.put("home/home.student.homeworkAndTests.html",'<hois-collapsable class="hois-collapse2" expanded="true" ng-show="tasks.todayTasks.length > 0 || tasks.tomorrowTasks.length > 0 || tasks.laterTasks.length > 0"> <hois-collapsable-header> <span>{{\'home.student.homeworkAndTests\' | translate}}</span> </hois-collapsable-header> <md-table-container> <table md-table> <tbody md-body> <!-- Today --> <tr md-row ng-if="tasks.todayTasks.length > 0" ng-repeat="task in tasks.todayTasks" ng-init="$last && tasks.tomorrowTasks.length === 0 && pageLoadingHandler.setFinish(\'studentTasks\')"> <td md-cell width="10%">{{\'home.student.today\' | translate}} {{todaysDate | hoisDate}}</td> <td md-cell> <span style="font-weight:bold">{{task.journalName}}: </span><br> <span ng-if="testTaskTypes.indexOf(task.entryType) !== -1">{{\'home.student.test\' | translate}} - </span> <span ng-if="testTaskTypes.indexOf(task.entryType) === -1">{{\'home.student.homework\' | translate}} - </span> <span>{{task.taskContent}}</span> </td> </tr> <!-- Tomorrow --> <tr md-row ng-if="tasks.tomorrowTasks.length > 0" ng-repeat="task in tasks.tomorrowTasks" ng-init="$last && tasks.laterTasks.length === 0 && pageLoadingHandler.setFinish(\'studentTasks\')"> <td md-cell width="10%">{{\'home.student.tomorrow\' | translate}} {{tomorrowsDate | hoisDate}}</td> <td md-cell> <span style="font-weight:bold">{{task.journalName}}: </span><br> <span ng-if="testTaskTypes.indexOf(task.entryType) !== -1">{{\'home.student.test\' | translate}} - </span> <span ng-if="testTaskTypes.indexOf(task.entryType) === -1">{{\'home.student.homework\' | translate}} - </span> <span>{{task.taskContent}}</span> </td> </tr> <!-- Later --> <tr md-row ng-if="tasks.laterTasks.length > 0" ng-repeat="task in tasks.laterTasks" ng-init="$last && pageLoadingHandler.setFinish(\'studentTasks\')"> <td md-cell width="10%">{{task.date | hoisDate}}</td> <td md-cell> <span style="font-weight:bold">{{task.journalName}}: </span><br> <span ng-if="testTaskTypes.indexOf(task.entryType) !== -1">{{\'home.student.test\' | translate}} - </span> <span ng-if="testTaskTypes.indexOf(task.entryType) === -1">{{\'home.student.homework\' | translate}} - </span> <span>{{task.taskContent}}</span> </td> </tr> </tbody> </table> </md-table-container> </hois-collapsable>'),a.put("home/home.student.lastResults.html",'<hois-collapsable class="hois-collapse2" expanded="true" ng-if="lastResults.length > 0"> <hois-collapsable-header> <span>{{\'home.student.lastResults\' | translate}}</span> </hois-collapsable-header> <md-table-container> <table md-table> <tbody md-body> <tr md-row ng-if="result.entryCode" ng-repeat="result in lastResults" ng-init="$last && pageLoadingHandler.setFinish(\'lastResults\')"> <td md-cell width="10%"> {{result.gradeInserted | hoisDateTimeMin}} </td> <td md-cell width="85%"> <span style="font-weight: bold"> {{result.nameEt}} <md-tooltip ng-if="result.content || result.addInfo" hide-sm md-direction="bottom">{{result.content}}{{ result.content && result.addInfo ? " - ": ""}}{{result.addInfo}}</md-tooltip> </span> <span hide-gt-sm ng-if="result.content" style="font-style: italic"><br>({{result.content}})</span> <span hide-gt-sm ng-if="result.addInfo"><br>{{result.addInfo}}</span> </td> <td md-cell ng-class="{goodGrade: result.grade === \'5\', badGrade: result.grade === \'2\'}" style="font-weight: bold"> {{result.grade}} </td> </tr> <tr md-row ng-if="!result.entryCode" ng-repeat="result in lastResults" ng-init="$last && pageLoadingHandler.setFinish(\'lastResults\')"> <td md-cell width="10%"> {{result.gradeInserted | hoisDateTimeMin}} </td> <td md-cell width="85%"> <span style="font-weight: bold">{{currentLanguageNameField(result)}}</span> </td> <td md-cell ng-class="{goodGrade: result.grade === \'5\', badGrade: result.grade === \'2\'}" style="font-weight: bold"> {{result.grade}} </td> </tr> </tbody> </table> </md-table-container> </hois-collapsable> <!-- <span ng-show="pageLoadingHandler.setFinish(\'lastResults\') && false"></span> --> <style>.goodGrade {\r\n        color: green !important;\r\n        font-weight: 500;\r\n        font-size: 105% !important;\r\n    }\r\n\r\n    .badGrade {\r\n        color: red !important;\r\n        font-weight: 500;\r\n        font-size: 105% !important;\r\n    }</style>'),a.put("home/home.student.unreadMessages.html",'<hois-collapsable expanded="true" class="hois-collapse2" ng-show="showUnreadMessages && unreadMessages.content.length > 0" label="(\'message.messages\' | translate)"> <!--h5 ng-show="showUnreadMessages" ng-if="unreadMessages.content.length === 0">{{\'message.noNewMessages\' | translate}}</h5--> <md-table-container ng-show="showUnreadMessages"> <table md-table md-progress="unreadMessages.$promise"> <tbody md-body> <tr md-row ng-repeat-start="row in unreadMessages.content" ng-click="readMessage(row)" ng-style="{\'cursor\': row.content ? \'pointer\' : \'default\'}" ng-init="$last && pageLoadingHandler.setFinish(\'unreadMessages\')"> <td md-cell width="10%">{{::row.dateSent | hoisDateTime}}</td> <td md-cell width="75%"><p style="color: rgb(13, 71, 161)">{{::row.subject}}</p></td> <td md-cell> <md-button style="margin: 0" ng-if="row.content"> <md-icon md-font-set="material-icons md-dark"> {{row.clicked ? "keyboard_arrow_up" : "keyboard_arrow_down"}} </md-icon> </md-button> </td> </tr> <tr ng-repeat-end ng-show="row.clicked"> <td style="border: none"></td> <td md-cell style="border: none"> <div> <pre>{{::row.content}}</pre> <p>{{\'message.messageSender\' | translate}}: {{::row.sender}}</p> </div> <md-button class="md-primary btn-respond" ng-href="/#/message/{{row.id}}/respond?backUrl=home" ng-if="row.sendersId !== -1"> {{\'message.respond\' | translate}} </md-button> </td> </tr> </tbody> </table> </md-table-container> </hois-collapsable> <!-- <span ng-show="pageLoadingHandler.setFinish(\'unreadMessages\') && false"></span> --> <style>.btn-respond {\r\n        margin: 5px 0 !important;\r\n        float: left;\r\n    }</style>'),a.put("journal/journal.addEntry.dialog.html",'<md-dialog aria-label="add entry dialog" flex="80"> <form name="dialogForm" ng-submit="loadData()" novalidate ng-cloak> <md-toolbar> <div class="md-toolbar-tools"> <h2 flex>{{journalEntry.id === undefined || journalEntry.id === null ? "journal.entry.new" : "journal.entry.edit" | translate}} - {{journal.nameEt}}</h2> <span flex></span> <md-button class="md-icon-button" ng-click="cancel()"> <md-icon md-font-set="material-icons">close</md-icon> </md-button> </div> </md-toolbar> <md-dialog-content> <div class="md-dialog-content"> <div flex> <div ng-if="journalEntry.id"> <md-whiteframe class="md-whiteframe-1dp attention-whiteframe" flex="100" layout layout-align="left center"> <div md-colors="{color: \'default-warn\'}"> <md-icon md-colors="{color: \'default-warn\'}" md-font-set="material-icons">info_outline</md-icon> <span>{{\'journal.entry.changingDateAndStartLessonWarning\' | translate}}</span> </div> </md-whiteframe> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container ng-if="journalEntry.entryType !== \'SISSEKANNE_O\'" flex="45"> <label>{{\'journal.entry.type\' | translate}}</label> <hois-classifier-select ng-model="journalEntry.entryType" model-value-attr="code" main-classifier-code="SISSEKANNE" required ng-change="setJournalEntryTypeChanged(journalEntry.entryType)" filter-values="forbiddenEntryTypes"></hois-classifier-select> </md-input-container> <md-input-container ng-if="journalEntry.entryType === \'SISSEKANNE_O\'" flex="45"> <label>{{\'journal.entry.type\' | translate}}</label> <hois-classifier-select ng-model="journalEntry.entryType" model-value-attr="code" main-classifier-code="SISSEKANNE" disabled></hois-classifier-select> </md-input-container> <md-input-container flex="45" flex-offset="10"> <label>{{\'journal.entry.name\' | translate}}</label> <input type="text" ng-model="journalEntry.nameEt" md-maxlength="100"> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container layout="row" layout-align="start center" flex> <md-checkbox ng-repeat="type in capacityTypes" ng-model="selectedCapacityTypes[type.code]">{{currentLanguageNameField(type)}}</md-checkbox> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="20"> <label>{{\'journal.entry.selectDate\' | translate}}</label> <hois-select ng-model="entryDateSelect" values="lessonPlanDates" ng-change="entryDateCalendar = undefined;journalEntry.entryDate = entryDateSelect; entryDateChanged(entryDateSelect)" ng-required="journalEntry.entryType === \'SISSEKANNE_T\' && entryDateCalendar === undefined"></hois-select> </md-input-container> <div layout="row" layout-align="center" style="padding-top:8px" flex="5"> <span>{{\'main.or\' | translate}}</span> </div> <md-input-container flex="25"> <label>{{\'journal.entry.selectFromCalendar\' | translate}}</label> <md-datepicker ng-model="entryDateCalendar" md-open-on-focus ng-change="entryDateSelect = undefined;journalEntry.entryDate = entryDateCalendar; entryDateChanged(entryDateCalendar)" ng-required="journalEntry.entryType === \'SISSEKANNE_T\' && entryDateSelect === undefined"></md-datepicker> </md-input-container> <md-input-container flex="20" flex-offset="5"> <label>{{\'journal.entry.startLessonNr\' | translate}}</label> <hois-select ng-model="journalEntry.startLessonNr" values="lessons" ng-change="startLessonNrChanged()" ng-required="journalEntry.entryType === \'SISSEKANNE_T\'"></hois-select> </md-input-container> <md-input-container flex="20" flex-offset="5"> <label>{{\'journal.entry.lessons\' | translate}}</label> <hois-select ng-model="journalEntry.lessons" values="lessons" ng-change="lessonsChanged()" ng-required="journalEntry.entryType === \'SISSEKANNE_T\'"></hois-select> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex> <label>{{\'journal.entry.content\' | translate}}</label> <textarea ng-model="journalEntry.content" md-maxlength="10000" max-rows="2"></textarea> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="70"> <label>{{\'journal.entry.homework\' | translate}}</label> <textarea ng-model="journalEntry.homework" md-maxlength="10000" max-rows="2"></textarea> </md-input-container> <md-input-container flex flex-offset="5"> <label>{{\'journal.entry.homeworkDuedate\' | translate}}</label> <md-datepicker ng-model="journalEntry.homeworkDuedate" md-open-on-focus ng-required="!!journalEntry.homework"></md-datepicker> </md-input-container> </div> </div> <div layout-padding> <div flex> <md-table-container> <table md-table> <thead md-head> <tr md-row flex> <th md-column><span>{{\'main.nr\' | translate}}</span></th> <th md-column><span>{{\'student.label\' | translate}}, {{\'journal.studentGroup\' | translate}}</span></th> <th md-column ng-if="journalEntry.lessons > 1"><span>{{\'journal.entry.student.lessonAbsences\' | translate}}</span></th> <th md-column><span>{{\'journal.entry.student.absenceValues\' | translate}}</span></th> <th md-column><span>{{\'journal.entry.student.grade\' | translate}}</span></th> <th md-column><span>{{\'journal.entry.student.description\' | translate}}</span></th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="row in journalStudents track by $index" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell>{{$index + 1}}</td> <td md-cell> <span>{{::row.fullname}}, {{row.studentGroup}}</span> </td> <td md-cell ng-if="journalEntry.lessons > 1"> <md-input-container> <md-checkbox class="journal-lesson-absence" ng-model="journalEntryStudents[row.id].isLessonAbsence" aria-label="{{\'journal.showAbsenceLessons\' | translate}}" ng-change="journalEntryStudentChanged(row)" ng-disabled="!row.canEdit"></md-checkbox> <md-tooltip>{{\'journal.showAbsenceLessons\' | translate}}</md-tooltip> </md-input-container> </td> <td md-cell> <span layout="row" ng-if="!journalEntryStudents[row.id].isLessonAbsence"> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container ng-if="hasWholeDayAcceptedAbsence(row)"> <md-checkbox ng-if="journalEntryStudents[row.id].practice" ng-model="journalEntryStudents[row.id].practice" aria-label="PUUDUMINE_PR" disabled> {{absenceOptions["PUUDUMINE_PR"].value}} </md-checkbox> <md-checkbox ng-if="journalEntryStudents[row.id].excused" ng-model="journalEntryStudents[row.id].excused" aria-label="PUUDUMINE_V" disabled> {{absenceOptions["PUUDUMINE_V"].value}} </md-checkbox> </md-input-container> <md-input-container ng-if="!hasWholeDayAcceptedAbsence(row)" layout="row" layout-align="start center" flex> <md-checkbox ng-model="journalEntryStudents[row.id].late" aria-label="PUUDUMINE_H" ng-disabled="!row.canEdit" ng-change="journalEntryStudentAbsenceChanged(row, journalEntryStudents[row.id].late, \'PUUDUMINE_H\')"> {{absenceOptions["PUUDUMINE_H"].value}} </md-checkbox> <md-checkbox ng-model="journalEntryStudents[row.id].withoutReason" aria-label="PUUDUMINE_P" ng-disabled="!row.canEdit" style="margin-left: 30px" ng-change="journalEntryStudentAbsenceChanged(row, journalEntryStudents[row.id].withoutReason, \'PUUDUMINE_P\')"> {{absenceOptions["PUUDUMINE_P"].value}} </md-checkbox> </md-input-container> </div> </span> <span ng-if="journalEntryStudents[row.id].isLessonAbsence" ng-repeat="lesson in [].constructor(journalEntry.lessons) track by $index"> <div layout="row" layout-align="space-between start" style="width: 150px; min-width: 150px"> <md-input-container ng-if="hasAcceptedLessonAbsence(row, lessonNr)"> <md-checkbox ng-if="journalEntryStudents[row.id].lessonAbsences[lessonNr].excused" ng-model="journalEntryStudents[row.id].lessonAbsences[lessonNr].excused" aria-label="PUUDUMINE_V" disabled> {{absenceOptions["PUUDUMINE_V"].value}} </md-checkbox> </md-input-container> <md-input-container ng-if="!hasAcceptedLessonAbsence(row, lessonNr)" layout="row" layout-align="start center" flex> <md-checkbox ng-model="journalEntryStudents[row.id].lessonAbsences[lessonNr].late" aria-label="PUUDUMINE_H" ng-disabled="!row.canEdit" ng-change="journalEntryStudentAbsenceChanged(row, journalEntryStudents[row.id].lessonAbsences[lessonNr].late, \'PUUDUMINE_H\', lessonNr)"> {{absenceOptions["PUUDUMINE_H"].value}} </md-checkbox> <md-checkbox ng-model="journalEntryStudents[row.id].lessonAbsences[lessonNr].withoutReason" aria-label="PUUDUMINE_P" ng-disabled="!row.canEdit" style="margin-left: 30px" ng-change="journalEntryStudentAbsenceChanged(row, journalEntryStudents[row.id].lessonAbsences[lessonNr].withoutReason, \'PUUDUMINE_P\', lessonNr)"> {{absenceOptions["PUUDUMINE_P"].value}} </md-checkbox> </md-input-container> <div style="line-height: 25px">({{lessonNr = $index + 1}})</div> </div> </span> </td> <td md-cell> <span ng-if="!journalEntryStudents[row.id].removeStudentHistory" ng-repeat="gradeHistory in journalEntryStudents[row.id].journalEntryStudentHistories | orderBy: \'gradeInserted\'"> {{gradeHistory.grade.value}} <span ng-if="gradeHistory.grade.value && !$last">/</span> </span> &nbsp; <span ng-if="row.canEdit && !(journalEntry.moodleGradeItemId && journalEntry.entryType !== \'SISSEKANNE_L\')"> <md-input-container> <hois-select ng-if="gradeInputAsSelect" ng-model="journalEntryStudents[row.id].grade" values="grades" show-property="value" value-property="code" filter-values="filterGrades" ng-change="journalEntryStudentChanged(row)" aria-label="grade"></hois-select> <input ng-if="!gradeInputAsSelect" ng-model="journalEntryStudents[row.id].gradeValue" style="width: 75px" ng-change="journalEntryStudentChanged(row)" type="text" ng-pattern="gradeInputRegex" aria-label="grade"> </md-input-container> <md-button class="md-icon-button" ng-click="removeStudentHistory(row)"> <md-icon md-font-set="material-icons">delete_forever</md-icon> <md-tooltip>{{\'journal.removeStudentHistory\' | translate}}</md-tooltip> </md-button> </span> <span ng-if="!row.canEdit || (journalEntry.moodleGradeItemId && journalEntry.entryType !== \'SISSEKANNE_L\')"> <md-input-container> <hois-select ng-model="journalEntryStudents[row.id].grade" values="grades" show-property="value" value-property="code" aria-label="grade" disabled></hois-select> </md-input-container> </span> </td> <td md-cell> <md-input-container> <input type="text" ng-model="journalEntryStudents[row.id].addInfo" md-maxlength="1000" ng-change="journalEntryStudentChanged(row)" aria-label="additional info" ng-disabled="!row.canEdit"> </md-input-container> </td> </tr> </tbody> </table> </md-table-container> </div> </div> </div> </md-dialog-content> <span flex></span> <md-dialog-actions layout="row" layout-align="start center"> <md-button class="md-raised md-primary" ng-click="submit()">{{\'main.button.save\' | translate}}</md-button> <md-button ng-if="canDeleteEntries" class="md-raised" ng-click="delete()">{{"main.button.delete" | translate}}</md-button> <md-button class="md-raised" ng-click="cancel()">{{"main.button.close" | translate}}</md-button> </md-dialog-actions> </form> </md-dialog>'),
a.put("journal/journal.apel.results.dialog.html",'<md-dialog aria-label="apel results dialog" flex="50" flex-sm="50" flex-xs="100"> <form name="dialogForm" novalidate ng-cloak> <md-toolbar> <div class="md-toolbar-tools"> <h2>{{journalStudent.fullname}} {{"journal.apelResults.label" | translate}}</h2> <span flex></span> <md-button class="md-icon-button" ng-click="cancel()"> <md-icon md-font-set="material-icons">close</md-icon> </md-button> </div> </md-toolbar> <md-dialog-content> <div layout-padding> <md-table-container> <table md-table> <thead md-head> <tr md-row> <th md-column>{{"journal.apelResults.moduleTheme" | translate}}</th> <th md-column>{{"journal.apelResults.decisionDate" | translate}}</th> <th md-column>{{"journal.apelResults.result" | translate}}</th> <th md-column>{{"journal.apelResults.type" | translate}}</th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="row in journalStudent.apelResults | orderBy: \'confirmed\'" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell>{{currentLanguageNameField(row.name)}}</td> <td md-cell>{{row.confirmed | hoisDate}}</td> <td md-cell>{{row.grade.value}}</td> <td md-cell>{{row.isFormalLearning ? (\'journal.apelResults.formal\' | translate) : (\'journal.apelResults.informal\' | translate)}}</td> </tr> </tbody> </table> </md-table-container> </div> </md-dialog-content> <span flex></span> <md-dialog-actions layout="row" layout-align="start center"> <md-button class="md-raised" ng-click="cancel()">{{"main.button.close" | translate}}</md-button> </md-dialog-actions> </form> </md-dialog>'),a.put("journal/journal.edit.buttons.tmpl.html",'<div layout-padding> <div flex> <div layout="row"> <md-button class="md-raised md-primary" ng-click="addNewEntry()">{{\'journal.addNewEntry\' | translate}}</md-button> <md-button class="md-raised" ng-click="searchStudent()">{{\'journal.addStudents\' | translate}}</md-button> <md-button class="md-raised" ng-click="confirm()" ng-if="journal.canBeConfirmed">{{\'journal.confirmJournal\' | translate}}</md-button> <md-button class="md-raised" ng-click="unconfirm()" ng-if="journal.canBeUnconfirmed">{{\'journal.button.unconfirm\' | translate}}</md-button> <md-button class="md-raised" ng-click="back(\'#/journals/\', journalForm)">{{\'main.button.back\' | translate}}</md-button> <a ng-href="{{excel(formState.xlsUrl)}}" target="_blank" class="md-button md-raised">{{\'report.excel\' | translate}}</a> <md-input-container> <span class="common-label">{{\'journal.gradeInput\' | translate}}</span> <md-radio-group layout-gt-sm="row" ng-model="formState.gradeInputAsSelect"> <md-radio-button ng-value="true">{{\'journal.asSelectField\' | translate}}</md-radio-button> <md-radio-button ng-value="false">{{\'journal.asInputField\' | translate}}</md-radio-button> </md-radio-group> </md-input-container> </div> <div layout="row" ng-if="$parent.$parent.moodleCourseId"> <md-button class="md-raised" ng-click="enrollStudents()">{{\'moodle.enrollStudents\' | translate}}</md-button> <md-button class="md-raised" ng-click="importGradeItems()">{{\'moodle.importGradeItems\' | translate}}</md-button> <md-button class="md-raised" ng-click="importAllGrades()">{{\'moodle.importAllGrades\' | translate}}</md-button> <md-button class="md-raised" ng-click="importMissingGrades()">{{\'moodle.importMissingGrades\' | translate}}</md-button> </div> </div> </div>'),a.put("journal/journal.edit.html",'<div ng-include="\'journal/journal.edit.buttons.tmpl.html\'"></div> <div layout-padding> <div flex> <div layout="row" flex> <div flex="50" layout="column" layout-align="start"> <div class="common-label" flex>{{\'journal.absencesLegend\' | translate}}</div> <div class="common-label" flex>{{\'journal.entryTabelLegend\' | translate}}</div> </div> <div flex="50" layout="row" layout-align="end"> <md-input-container> <md-checkbox ng-model="showAllStudentsModel" aria-label="show all students" ng-change="showAllStudents(showAllStudentsModel)"> {{\'journal.showAll\' | translate}} </md-checkbox> </md-input-container> </div> </div> <br> <div class="container" fixed-column-table fixed-columns="2"> <table class="journalTable"> <thead> <tr flex> <th>{{\'main.nr\' | translate}}</th> <th style="padding-right:11em"><span>{{\'student.label\' | translate}}, {{\'journal.studentGroup\' | translate}}</span></th> <th class="bordered journal-entry" ng-click="editJournalEntry(journalEntry.id)" style="padding-left:1em" md-colors="{background: getEntryColor(journalEntry.entryType.code)}" ng-repeat="journalEntry in journal.journalEntriesByDate"> <span ng-if="journalEntry.moodleGradeItemId"><md-icon md-font-set="material-icons">school</md-icon></span> <span ng-if="journalEntry.entryType.code === \'SISSEKANNE_L\'">{{\'journal.finalResult\' | translate}}</span> <span ng-if="journalEntry.entryType.code === \'SISSEKANNE_O\'">{{\'journal.outcome\' | translate}}{{journalEntry.outcomeOrderNr + 1}}</span> <span ng-if="journalEntry.entryType.code !== \'SISSEKANNE_L\' && journalEntry.entryType.code !== \'SISSEKANNE_O\'">{{journalEntry.entryDate ? (journalEntry.entryDate | hoisDayMonth) : \'-\'}}</span> <md-tooltip> <span ng-if="journalEntry.startLessonNr"> <span ng-if="!journalEntry.lessons || journalEntry.lessons <= 1">{{journalEntry.startLessonNr}}. {{\'journal.lesson\' | translate}}</span> <span ng-if="journalEntry.lessons && journalEntry.lessons > 1">{{journalEntry.startLessonNr}}. - {{journalEntry.startLessonNr + journalEntry.lessons-1}}. {{\'journal.lesson\' | translate}}</span> ,&nbsp; </span> <span>{{journalEntry.nameEt}}</span> <span>,&nbsp;</span> {{currentLanguageNameField(journalEntry.entryType)}} <span>,&nbsp;</span> {{journalEntry.teacher}} </md-tooltip> </th> <th ng-show="auth.isAdmin()"></th> </tr> </thead> <tbody> <tr ng-repeat="row in journal.journalStudents" ng-class-odd="\'odd\'" ng-class-even="\'even\'" ng-init="$last && finished()"> <td width="5%">{{$index + 1}}</td> <td width="10%"> <span> <i> <span ng-if="row.status === \'OPPURSTAATUS_A\'">{{\'journal.academicLeaveAbbrev\' | translate}}</span> <span ng-if="row.status === \'OPPURSTAATUS_L\'">{{\'journal.finishedAbbrev\' | translate}}</span> <span ng-if="row.status === \'OPPURSTAATUS_K\'">{{\'journal.exmatriculatedAbbrev\' | translate}}</span> <span ng-if="row.isIndividualCurriculum"> <span ng-if="row.status !== \'OPPURSTAATUS_O\' && row.status !== \'OPPURSTAATUS_V\'">, </span> <span>{{\'journal.individualCurriculumAbbrev\' | translate}}</span> </span> </i> <a ng-href="/#/students/{{::row.studentId}}/main">{{::row.fullname}}</a>, {{row.studentGroup}} <span ng-if="row.apelResults"><a ng-click="openApelResultsDialog(row)">{{\'journal.apel\' | translate}}</a></span> <span ng-if="row.isMoodleRegistered"><md-icon md-font-set="material-icons">school</md-icon></span> </span> </td> <td class="bordered" ng-repeat="journalEntry in journal.journalEntriesByDate"> <div layout="row" style="padding-left:1em"> <div ng-repeat="result in journalEntry.journalStudentResults[row.id] | orderBy: \'gradeInserted\'"> <span ng-if="result.absence"> {{result.absence.value}} <md-tooltip ng-if="result.absence.value" class="entryWithAddInfoTootlip"> {{result.absenceInserted ? (result.absenceInserted | hoisDate) : (result.inserted | hoisDate)}} <span ng-if="result.addInfo">,&nbsp; {{result.addInfo}} </span> <span ng-if="journalEntry.lessons && result.absence.value === \'P\'"> ,&nbsp; {{journalEntry.lessons ? ((\'journal.entry.lessons\' | translate) + \' \' + journalEntry.lessons) : \'\'}} </span> </md-tooltip> </span> <span ng-if="result.lessonAbsences.length > 0"> <span ng-repeat="lessonAbsence in result.lessonAbsences | orderBy: \'lessonNr\'"> <span>{{lessonAbsence.absence.value}}({{lessonAbsence.lessonNr}})</span> <md-tooltip class="entryWithAddInfoTootlip"> {{lessonAbsence.absenceInserted | hoisDate}} <span ng-if="result.addInfo">,&nbsp; {{result.addInfo}} </span> </md-tooltip> </span> </span> <span ng-if="(result.absence.value || result.lessonAbsences.length > 0) \r\n                    && (result.journalEntryStudentHistories.length > 0 || result.grade)">/</span> <span ng-repeat="historyResult in result.journalEntryStudentHistories | orderBy: \'gradeInserted\' track by $index"> <span ng-class="{badResult: !gradeUtil.isPositive(historyResult.grade.code)}">{{historyResult.grade.value}}</span> <span>* / </span> <md-tooltip> {{historyResult.gradeInserted | hoisDate}}, &nbsp; {{historyResult.gradeInsertedBy}} </md-tooltip> </span> <span> <span ng-class="{journalFinalResult: journalEntry.entryType.code === \'SISSEKANNE_L\',\r\n                                    badResult: !gradeUtil.isPositive(result.grade.code)}">{{result.grade.value}}</span> <span ng-if="!result.grade && result.journalEntryStudentHistories.length > 0"> - </span> <md-tooltip ng-if="result.grade.value" class="entryWithAddInfoTootlip"> {{result.gradeInserted | hoisDate}}, &nbsp; {{result.gradeInsertedBy}} <span ng-if="result.addInfo">,&nbsp;</span> {{result.addInfo}} </md-tooltip> </span> </div> </div> </td> <td ng-show="auth.isAdmin()"> <a class="remove nomargin" ng-click="removeStudentFromJournal(row.studentId)">&times;</a> </td> </tr> </tbody> </table> </div> </div> </div> <div ng-include="\'journal/journal.edit.buttons.tmpl.html\'"></div> <div layout-padding> <div flex> <div layout="row"> <div flex="10"> <h2>{{\'journal.entries\' | translate}}</h2> </div> <div layout="row" layout-align="start end" layout-sm="column" layout-xs="column" flex="70"> <span class="capacity-type-legend" flex-offset="5" md-colors="{background: getEntryColor(\'SISSEKANNE_T\')}">{{currentLanguageNameField(journalEntryTypes[\'SISSEKANNE_T\'])}}</span> <span class="capacity-type-legend" flex-offset="5" md-colors="{background: getEntryColor(\'SISSEKANNE_E\')}">{{currentLanguageNameField(journalEntryTypes[\'SISSEKANNE_E\'])}}</span> <span class="capacity-type-legend" flex-offset="5" md-colors="{background: getEntryColor(\'SISSEKANNE_I\')}">{{currentLanguageNameField(journalEntryTypes[\'SISSEKANNE_I\'])}}</span> <span class="capacity-type-legend" flex-offset="5" md-colors="{background: getEntryColor(\'SISSEKANNE_H\')}">{{currentLanguageNameField(journalEntryTypes[\'SISSEKANNE_H\'])}}</span> <span class="capacity-type-legend" flex-offset="5" md-colors="{background: getEntryColor(\'SISSEKANNE_P\')}">{{currentLanguageNameField(journalEntryTypes[\'SISSEKANNE_P\'])}}</span> <span class="capacity-type-legend" flex-offset="5" md-colors="{background: getEntryColor(\'SISSEKANNE_R\')}">{{currentLanguageNameField(journalEntryTypes[\'SISSEKANNE_R\'])}}</span> <span ng-if="journal.moduleOutcomesAsEntries" class="capacity-type-legend" flex-offset="5" md-colors="{background: getEntryColor(\'SISSEKANNE_O\')}">{{currentLanguageNameField(journalEntryTypes[\'SISSEKANNE_O\'])}}</span> <span class="capacity-type-legend" flex-offset="5" md-colors="{background: getEntryColor(\'SISSEKANNE_L\')}">{{currentLanguageNameField(journalEntryTypes[\'SISSEKANNE_L\'])}}</span> </div> </div> <md-table-container> <table md-table md-progress="journalEntries.$promise"> <thead md-head md-order="journalEntriesCriteria.order" md-on-reorder="loadJournalEntries"> <tr md-row> <th md-column width="10"></th> <th md-column width="10"></th> <th md-column>{{\'journal.entry.date\' | translate}}</th> <th md-column>{{\'journal.entry.lessons\' | translate}}</th> <th md-column>{{\'journal.entry.nameContent\' | translate}}</th> <th md-column>{{\'journal.entry.homework\' | translate}}</th> <th md-column>{{\'journal.entry.homeworkDuedate\' | translate}}</th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="row in journalEntries.content" md-auto-select ng-click="editJournalEntry(row.id)" ng-class-odd="\'odd\'" ng-class-even="\'even\'" md-colors="{background: getEntryColor(row.entryType)}" class="journal-entry"> <td md-cell><span ng-if="row.moodleGradeItemId"><md-icon md-font-set="material-icons">school</md-icon></span></td> <td md-cell> <a href="#" onclick="return false">{{\'journal.entry.open\' | translate}}</a> </td> <td md-cell>{{row.entryDate ? (row.entryDate | hoisDate) : \'-\'}}</td> <td md-cell>{{row.lessons ? row.lessons : \'-\'}}</td> <td md-cell> <span ng-if="row.nameEt">{{row.nameEt}}</span> <span ng-if="row.nameEt && row.content">/</span> <span ng-if="row.content">{{row.content}}</span> </td> <td md-cell>{{row.homework ? row.homework : \'-\'}}</td> <td md-cell>{{row.homeworkDuedate ? (row.homeworkDuedate | hoisDate) : \'-\' }}</td> </tr> </tbody> </table> </md-table-container> <md-table-pagination md-limit="journalEntriesCriteria.size" md-limit-options="[10, 20, 50]" md-page="journalEntriesCriteria.page" md-total="{{journalEntries.totalElements}}" md-on-paginate="loadJournalEntries" md-label="{page: \'{{\'main.page\' | translate}}:\', rowsPerPage: \'{{\'main.rowPerPage\' | translate}}:\', of: \'{{\'main.of\' | translate}}\'}" md-page-select></md-table-pagination> </div> </div> <div layout-padding> <div flex> <div ng-include="\'studyMaterial/templates/journal.material.edit.tmpl.html\'"></div> </div> </div> <div layout-padding> <hois-collapsable label="(\'journal.curriculumVersionModuleOrThemeDescription\' | translate)" expanded="false"> <div ng-repeat="module in journal.moduleDescriptions | orderBy: [\'-isModule\', currentLanguageNameField()]"> <a href="" class="md-raised small-link" ng-click="moduleDescriptionDialog(module)">{{currentLanguageNameField(module)}}</a> </div> </hois-collapsable> </div>'),a.put("journal/journal.html",'<div class="ois-form-layout-padding" ng-cloak> <div flex> <form name="journalForm" ng-submit="journalForm.$valid && loadData()" novalidate> <div class="form-readonly" layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="25" flex-sm="100" flex-xs="100"> <label class="textInput">{{\'journal.studyYear\' | translate}}</label> <hois-classifier-value ng-model="journal.studyYear" main-classifier-code="OPPEAASTA"></hois-classifier-value> </md-input-container> <md-input-container flex="30" flex-sm="100" flex-xs="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label class="textInput">{{\'main.status\' | translate}}</label> <hois-classifier-value ng-model="journal.status" main-classifier-code="PAEVIK_STAATUS"></hois-classifier-value> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <div class="form-readonly" layout="row" flex="25" flex-sm="100" flex-xs="100"> <md-input-container flex> <label class="textInput">{{\'journal.label\' | translate}}</label> <hois-value value="journal.nameEt"></hois-value> </md-input-container> </div> <div ng-if="journal.canBeConfirmed" flex="30" flex-sm="100" flex-xs="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <md-input-container style="margin-top:-1em"> <label>{{\'journal.endDate\' | translate}}</label> <md-datepicker ng-model="journal.endDate" md-min-date="journal.studyYearStartDate"></md-datepicker> </md-input-container> <a href="" class="md-button md-raised" style="margin-top:-1em" ng-click="saveEndDate()">{{\'journal.saveEndDate\' | translate}}</a> </div> <div ng-if="!journal.canBeConfirmed" class="form-readonly" flex="30" flex-sm="100" flex-xs="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <md-input-container style="width: 100%"> <label>{{\'journal.endDate\' | translate}}</label> <hois-value value="journal.endDate | hoisDate"></hois-value> </md-input-container> </div> </div> <div class="form-readonly" layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="25" flex-sm="100" flex-xs="100"> <label class="textInput">{{\'journal.studentGroups\' | translate}}</label> <hois-value value="journal.studentGroups.join(\', \')"></hois-value> </md-input-container> <md-input-container flex="30" flex-sm="100" flex-xs="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label class="textInput">{{auth.higher ? (\'journal.teachersHigher\' | translate) : (\'journal.teachersVocational\' | translate)}}</label> <hois-value value="journal.journalTeachers.join(\', \')"></hois-value> </md-input-container> </div> <div class="form-readonly" layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="25" flex-sm="100" flex-xs="100"> <label class="textInput">{{\'journal.modules\' | translate}}</label> <hois-value value="showModuleNames(journal.curriculumModules)"></hois-value> </md-input-container> <md-input-container flex="30" flex-sm="100" flex-xs="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label class="textInput">{{\'journal.plannedAndEnteredLessonsCount\' | translate}}</label> <hois-value value="journal.lessonHours.totalPlannedHours + \'/\' + journal.lessonHours.totalUsedHours"></hois-value> </md-input-container> </div> <div ng-if="journal.canEdit" class="form-readonly" layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="25" flex-sm="100" flex-xs="100"> <label>{{\'journal.assessment\' | translate}}</label> <hois-classifier-value ng-model="journal.assessment" main-classifier-code="KUTSEHINDAMISVIIS"></hois-classifier-value> </md-input-container> <md-input-container class="md-input-has-value" flex="30" flex-sm="100" flex-xs="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label class="textInput">{{\'journal.capacitiesPlannedAndEnteredLessonsCount\' | translate}}</label> <div class="md-body-1"> <span ng-repeat="type in journal.lessonHours.capacityHours | orderBy: \'capacity\'"> <span>{{capacityTypes[type.capacity].value.toUpperCase()}}:</span> <span>{{type.plannedHours + \'/\' + type.usedHours}}</span> </span> </div> </md-input-container> </div> <div ng-if="journal.canEdit" layout="row"> <div flex="100"> <md-input-container> <label>{{\'moodle.courseId\' | translate}}</label> <input type="number" name="moodleCourseId" ng-model="journal.moodleCourseId" max="9007199254740991"> <div class="md-errors-spacer"> <div class="md-char-counter">{{journalForm.moodleCourseId.$viewValue ? journalForm.moodleCourseId.$viewValue.length : 0}} / 16</div> </div> <div ng-messages="journalForm.moodleCourseId.$error" ng-show="journalForm.moodleCourseId.$dirty"> <div ng-message="max"> {{\'main.messages.error.max\' | translate }} </div> </div> </md-input-container> <md-button class="md-button md-raised" ng-disabled="!journal.moodleCourseId" ng-click="saveMoodleCourseId()">{{\'moodle.saveCourseId\' | translate}}</md-button> </div> </div> <fieldset ng-if="journal.hasJournalStudents"> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'journal.review\' | translate}}</legend> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="45" flex-sm="100" flex-xs="100"> <label>{{\'journal.isReviewOk\' | translate}}</label> <md-select ng-model="journal.isReviewOk" aria-label="{{\'journal.isReviewOk\' | translate}}" ng-disabled="!journal.canReview"> <md-option md-option-empty></md-option> <md-option ng-value="true">{{\'main.yes\' | translate}}</md-option> <md-option ng-value="false">{{\'main.no\' | translate}}</md-option> </md-select> </md-input-container> <md-input-container flex="50" flex-sm="100" flex-xs="100" flex-offset="5" flex-offset-sm="0" flex-offset-xs="0"> <label>{{\'journal.reviewDate\' | translate}}</label> <input value="{{journal.reviewDate | hoisDate}}" disabled> </md-input-container> </div> <div layout="column" flex> <md-input-container flex> <label>{{\'journal.addInfo\' | translate}}</label> <textarea ng-model="journal.reviewInfo" md-maxlength="1000" max-rows="5" ng-required="journal.isReviewOk === false" ng-disabled="!journal.canReview"></textarea> </md-input-container> </div> <md-button ng-if="journal.canReview" class="md-raised md-primary" ng-click="saveReview()">{{\'journal.saveReview\' | translate}}</md-button> </fieldset> <div ng-if="!journal.canEdit" class="form-readonly" layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="25" flex-sm="100" flex-xs="100"> <label>{{\'journal.assessment\' | translate}}</label> <hois-classifier-value ng-model="journal.assessment" main-classifier-code="KUTSEHINDAMISVIIS"></hois-classifier-value> </md-input-container> <md-input-container flex="30" flex-sm="100" flex-xs="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0" class="md-input-has-value"> <label class="textInput">{{\'journal.capacitiesPlannedAndEnteredLessonsCount\' | translate}}</label> <div class="md-body-1"> <span ng-repeat="type in journal.lessonHours.capacityHours | orderBy: \'capacity\'"> <span>{{capacityTypes[type.capacity].value.toUpperCase()}}:</span> <span>{{type.plannedHours + \'/\' + type.usedHours}}</span> </span> </div> </md-input-container> </div> <div ng-if="!journal.canEdit" class="form-readonly" layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="25" flex-sm="100" flex-xs="100"> <label>{{\'moodle.courseId\' | translate}}</label> <hois-value value="journal.moodleCourseId"></hois-value> </md-input-container> </div> </form> </div> </div> <div ng-if="journal.hasJournalStudents"> <div ng-include="\'journal/journal.edit.html\'" ng-controller="JournalEditController as journalEditController"></div> </div> <div ng-if="!journal.hasJournalStudents"> <div ng-include="\'journal/journal.student.selection.html\'" ng-controller="JournalStudentSelectionController as journalStudentSelectionController"></div> </div> <style>md-toolbar {\r\n    min-height: 64px !important;\r\n  }</style>'),a.put("journal/journal.list.html",'<div class="ois-form-layout-padding ois-form-layout" ng-cloak> <div flex> <fieldset> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'main.searchlabel\' | translate}}</legend> <form name="searchForm" ng-submit="load()" novalidate class="nomargin"> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="45" flex-sm="100" flex-xs="100"> <label class="textInput">{{\'journal.studyYear\' | translate}}</label> <hois-select ng-model="criteria.studyYear" type="studyyear" select-current-study-year required autofocus></hois-select> </md-input-container> <md-input-container flex="50" flex-sm="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label class="textInput">{{\'journal.studentGroup\' | translate}}</label> <hois-select ng-model="criteria.studentGroup" type="studentgroup"></hois-select> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column" ng-if="auth.isAdmin()"> <div flex="45" flex-sm="100" flex-xs="100"> <hois-autocomplete label="{{auth.higher ? \'teacher.labelHigher\' : \'teacher.labelVocational\'}}" ng-model="criteria.teacherObject" method="teachers"></hois-autocomplete> </div> <div flex="50" flex-sm="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <hois-autocomplete label="module.label" ng-model="criteria.moduleObject" method="vocationaloccupationmodules"></hois-autocomplete> </div> </div> <div layout="row" layout-sm="column" layout-xs="column" ng-if="auth.isTeacher()"> <div flex="45" flex-sm="100"> <hois-autocomplete label="module.label" ng-model="criteria.moduleObject" method="vocationaloccupationmodules"></hois-autocomplete> </div> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="45" flex-sm="100"> <label class="textInput">{{\'journal.label\' | translate}}</label> <input ng-model="criteria.journalName" type="text" md-maxlength="255"> </md-input-container> <md-input-container flex="50" flex-sm="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label class="textInput">{{\'journal.status\' | translate}}</label> <hois-classifier-select ng-model="criteria.status" main-classifier-code="PAEVIK_STAATUS" model-value-attr="code"></hois-classifier-select> </md-input-container> </div> <div layout="row"> <md-button type="submit" class="md-raised md-primary">{{\'main.button.search\' | translate}}</md-button> <md-button class="md-raised" ng-click="clearSearch()">{{\'main.button.clear\' | translate}}</md-button> <md-button ng-if="formState.canConfirmAll" ng-click="confirmAll()" class="md-raised">{{\'journal.confirmAllJournals\' | translate}}</md-button> </div> <div flex-xs="0" flex-gt-xs="0" flex-gt-sm="50"></div> </form> </fieldset> </div> </div> <div layout-padding> <div flex> <md-table-container> <table md-table md-progress="tabledata.$promise"> <thead md-head md-order="criteria.order" md-on-reorder="loadData"> <tr md-row> <th md-column md-order-by="2">{{\'journal.studentGroups\' | translate}}</th> <th md-column md-order-by="3">{{\'journal.label\' | translate}}</th> <th md-column md-order-by="4">{{auth.higher ? (\'journal.teachersHigher\' | translate) : (\'journal.teachersVocational\' | translate)}}</th> <th md-column md-order-by="{{currentLanguage() === \'et\' ? 5 : 6}}">{{\'journal.modules\' | translate}}</th> <th md-column>{{\'journal.plannedAndEnteredLessonsCount1\' | translate}}<br>{{\'journal.plannedAndEnteredLessonsCount2\' | translate}}</th> <th md-column md-order-by="7">{{\'main.status\' | translate}}</th> <th md-column md-order-by="8">{{\'curriculum.code\' | translate}}</th> <th md-column md-order-by="9">{{\'journal.isReviewOk\' | translate}}</th> <th md-column md-order-by="10">{{\'journal.reviewDate\' | translate}}</th> <th md-column></th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="row in tabledata.content" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell>{{row.studentGroups}}</td> <td md-cell> <a ng-if="!row.canEdit" ng-href="/#/journal/{{::row.id}}/view">{{row.nameEt}}</a> <a ng-if="row.canEdit" ng-href="/#/journal/{{::row.id}}/edit">{{row.nameEt}}</a> </td> <td md-cell>{{row.teachers}}</td> <td md-cell>{{currentLanguageNameField(row.modules)}}</td> <td md-cell>{{row.plannedHours}}/{{row.usedHours}}</td> <td md-cell>{{currentLanguageNameField(row.status)}}</td> <td md-cell>{{row.curriculums}}</td> <td md-cell>{{row.isReviewOk !== null ? (row.isReviewOk ? (\'main.yes\' | translate) : (\'main.no\' | translate)) : \'\'}}</td> <td md-cell>{{row.reviewDate | hoisDate}}</td> <td md-cell> <md-button ng-if="row.canEdit" md-no-ink class="md-primary change-button" ng-href="#/journal/{{::row.id}}/edit">{{\'main.button.change\' | translate}}</md-button> </td> </tr> </tbody> </table> </md-table-container> <md-table-pagination md-limit="criteria.size" md-limit-options="[10, 20, 50]" md-page="criteria.page" md-total="{{tabledata.totalElements}}" md-on-paginate="loadData" md-label="{page: \'{{\'main.page\' | translate}}:\', rowsPerPage: \'{{\'main.rowPerPage\' | translate}}:\', of: \'{{\'main.of\' | translate}}\'}" md-page-select></md-table-pagination> </div> </div>'),a.put("journal/journal.moduleDescription.dialog.html",'<md-dialog aria-label="module description dialog" flex="50"> <form name="dialogForm" ng-submit="loadData()" novalidate ng-cloak> <md-toolbar> <div class="md-toolbar-tools"> <h2 ng-if="moduleDescription.isModule">{{"journal.moduleDescription" | translate}}</h2> <h2 ng-if="!moduleDescription.isModule">{{"journal.themeDescription" | translate}}</h2> <span flex></span> <md-button class="md-icon-button" ng-click="cancel()"> <md-icon md-font-set="material-icons">close</md-icon> </md-button> </div> </md-toolbar> <md-dialog-content> <div class="md-dialog-content form-readonly"> <div flex> <div layout="column"> <md-input-container flex ng-if="!moduleDescription.isModule && moduleDescription.subthemes"> <label>{{\'module.subthemes\' | translate}}</label> <hois-value value="moduleDescription.subthemes"></hois-value> </md-input-container> <md-input-container flex> <label>{{\'module.totalGradeDescription\' | translate}}</label> <hois-value value="moduleDescription.totalGradeDescription"></hois-value> </md-input-container> <md-input-container flex ng-if="!isDistinctiveAssessment"> <label>{{\'module.gradeADescription\' | translate}}</label> <hois-value value="moduleDescription.passDescription"></hois-value> </md-input-container> <md-input-container flex ng-if="isDistinctiveAssessment"> <label>{{\'module.grade5Description\' | translate}}</label> <hois-value value="moduleDescription.grade5Description"></hois-value> </md-input-container> <md-input-container flex ng-if="isDistinctiveAssessment"> <label>{{\'module.grade4Description\' | translate}}</label> <hois-value value="moduleDescription.grade4Description"></hois-value> </md-input-container> <md-input-container flex ng-if="isDistinctiveAssessment"> <label>{{\'module.grade3Description\' | translate}}</label> <hois-value value="moduleDescription.grade3Description"></hois-value> </md-input-container> </div> </div> <span flex></span> <md-dialog-actions layout="row" layout-align="start center"> <md-button class="md-raised" ng-click="cancel()">{{"main.button.close" | translate}}</md-button> </md-dialog-actions> </div> </md-dialog-content> </form> </md-dialog>'),a.put("journal/journal.searchStudent.dialog.html",'<md-dialog aria-label="search student dialog" flex="60" flex-sm="100" flex-xs="100"> <form name="dialogForm" ng-submit="loadData()" novalidate ng-cloak> <md-toolbar> <div class="md-toolbar-tools"> <h2>{{"journal.searchForOtherStudent" | translate}}</h2> <span flex></span> <md-button class="md-icon-button" ng-click="cancel()"> <md-icon md-font-set="material-icons">close</md-icon> </md-button> </div> </md-toolbar> <md-dialog-content> <div class="md-dialog-content"> <div flex> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="45" flex-sm="100" flex-xs="100"> <label>{{\'student.name\' | translate}}</label> <input type="text" ng-model="criteria.studentName" md-autofocus> </md-input-container> <div flex="50" flex-sm="100" flex-xs="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <hois-autocomplete ng-model="criteria.studentGroupObject" method="studentgroups" additional-query-params="{higher: false}" label="journal.studentGroup" flex></hois-autocomplete> </div> </div> <div layout="row"> <md-button type="submit" class="md-raised md-primary">{{\'main.button.search\' | translate}}</md-button> <md-button class="md-raised" ng-click="clearCriteria()">{{\'main.button.clear\' | translate}}</md-button> </div> </div> <div layout-padding> <div flex> <md-table-container> <table md-table md-progress="tabledata.$promise" md-row-select multiple ng-model="selectedStudents"> <thead md-head md-order="criteria.order" md-on-reorder="loadData"> <tr md-row flex> <th md-column><span>{{\'student.label\' | translate}}</span></th> <th md-column><span>{{\'journal.studentGroup\' | translate}}</span></th> <th md-column><span>{{\'curriculum.code\' | translate}}</span></th> </tr> </thead> <tbody md-body> <tr md-row md-select="row.studentId" md-auto-select ng-repeat="row in tabledata.content | orderBy: \'fullname\'" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell> <i> <span ng-if="row.status === \'OPPURSTAATUS_A\'">{{\'journal.academicLeaveAbbrev\' | translate}}</span> </i> <span>{{row.fullname}}</span> </td> <td md-cell>{{row.studentGroup}}</td> <td md-cell>{{row.curriculum}}</td> </tr> </tbody> </table> </md-table-container> <md-table-pagination md-limit="criteria.size" md-limit-options="[10, 20, 50]" md-page="criteria.page" md-total="{{tabledata.totalElements}}" md-on-paginate="loadData" md-label="{page: \'{{\'main.page\' | translate}}:\', rowsPerPage: \'{{\'main.rowPerPage\' | translate}}:\', of: \'{{\'main.of\' | translate}}\'}" md-page-select></md-table-pagination> </div> </div> </div> </md-dialog-content> <span flex></span> <md-dialog-actions layout="row" layout-align="start center"> <md-button class="md-raised md-primary" ng-click="submit()" ng-disabled="selectedStudents.length === 0">{{\'journal.addSelectedStudents\' | translate}}</md-button> <md-button class="md-raised" ng-click="cancel()">{{"main.button.close" | translate}}</md-button> </md-dialog-actions> </form> </md-dialog>'),a.put("journal/journal.student.selection.html",'<div class="ois-form-layout" layout="column"> <div layout-padding> <div flex> <md-table-container> <table md-table md-progress="tabledata.$promise" md-row-select multiple ng-model="selectedStudents"> <thead md-head md-order="criteria.order" md-on-reorder="loadData"> <tr md-row flex> <th md-column><span>{{\'student.label\' | translate}}</span></th> <th md-column><span>{{\'journal.studentGroup\' | translate}}</span></th> <th md-column><span>{{\'curriculum.code\' | translate}}</span></th> <th md-column></th> </tr> </thead> <tbody md-body> <tr md-row md-select="row.studentId" ng-repeat="row in tabledata.content | orderBy: [\'studentGroup\', \'lastname\', \'firstname\']" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell> <i> <span ng-if="row.status === \'OPPURSTAATUS_A\'">{{\'journal.academicLeaveAbbrev\' | translate}}</span> </i> <span>{{row.fullname}}</span> </td> <td md-cell>{{row.studentGroup}}</td> <td md-cell>{{row.curriculum}}</td> <td md-cell layout="row" layout-align="end"> <md-button class="remove nomargin" ng-click="removeStudent(row)">&times;</md-button> </td> </tr> </tbody> </table> </md-table-container> </div> </div> <div layout="row" layout-margin> <md-button class="md-raised md-primary" ng-click="addSelectedStudents()">{{\'journal.addSelectedStudents\' | translate}}</md-button> <md-button class="md-raised" ng-click="searchStudent()">{{\'journal.searchForOtherStudent\' | translate}}</md-button> <md-button class="md-raised" ng-click="back(\'#/journals/\', journalForm)">{{\'main.button.back\' | translate}}</md-button> </div> </div>'),
a.put("journal/journal.view.html",'<div class="ois-form-layout-padding" ng-cloak> <div flex class="form-readonly"> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="25" flex-sm="100" flex-xs="100"> <label class="textInput">{{\'journal.studyYear\' | translate}}</label> <hois-classifier-value ng-model="journal.studyYear" main-classifier-code="OPPEAASTA"></hois-classifier-value> </md-input-container> <md-input-container flex="30" flex-sm="100" flex-xs="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label class="textInput">{{\'main.status\' | translate}}</label> <hois-classifier-value ng-model="journal.status" main-classifier-code="PAEVIK_STAATUS"></hois-classifier-value> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="25" flex-sm="100" flex-xs="100"> <label class="textInput">{{\'journal.label\' | translate}}</label> <hois-value value="journal.nameEt"></hois-value> </md-input-container> <md-input-container flex="30" flex-sm="100" flex-xs="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'journal.endDate\' | translate}}</label> <hois-value value="journal.endDate | hoisDate"></hois-value> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="25" flex-sm="100" flex-xs="100"> <label class="textInput">{{\'journal.studentGroups\' | translate}}</label> <hois-value value="journal.studentGroups.join(\', \')"></hois-value> </md-input-container> <md-input-container flex="30" flex-sm="100" flex-xs="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label class="textInput">{{auth.higher ? (\'journal.teachersHigher\' | translate) : (\'journal.teachersVocational\' | translate)}}</label> <hois-value value="journal.journalTeachers.join(\', \')"></hois-value> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="25" flex-sm="100" flex-xs="100"> <label class="textInput">{{\'journal.modules\' | translate}}</label> <hois-value value="showModuleNames(journal.curriculumModules)"></hois-value> </md-input-container> <md-input-container flex="30" flex-sm="100" flex-xs="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label class="textInput">{{\'journal.plannedAndEnteredLessonsCount\' | translate}}</label> <hois-value value="journal.lessonHours.totalPlannedHours + \'/\' + journal.lessonHours.totalUsedHours"></hois-value> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="25" flex-sm="100" flex-xs="100"> <label>{{\'journal.assessment\' | translate}}</label> <hois-classifier-value ng-model="journal.assessment" main-classifier-code="KUTSEHINDAMISVIIS"></hois-classifier-value> </md-input-container> <md-input-container flex="30" flex-sm="100" flex-xs="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0" class="md-input-has-value"> <label class="textInput">{{\'journal.capacitiesPlannedAndEnteredLessonsCount\' | translate}}</label> <div class="md-body-1"> <span ng-repeat="type in journal.lessonHours.capacityHours | orderBy: \'capacity\'"> <span>{{capacityTypes[type.capacity].value.toUpperCase()}}:</span> <span>{{type.plannedHours + \'/\' + type.usedHours}}</span> </span> </div> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="25" flex-sm="100" flex-xs="100"> <label>{{\'moodle.courseId\' | translate}}</label> <hois-value value="journal.moodleCourseId"></hois-value> </md-input-container> </div> </div> </div> <div class="ois-form-layout-padding"> <fieldset> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'journal.review\' | translate}}</legend> <div class="form-readonly"> <br> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="45" flex-sm="100" flex-xs="100"> <label>{{\'journal.isReviewOk\' | translate}}</label> <hois-value value="journal.isReviewOk !== null ? (journal.isReviewOk ? (\'main.yes\' | translate) :  (\'main.no\' | translate)) : \'\'"></hois-value> </md-input-container> <md-input-container flex="50" flex-sm="100" flex-xs="100" flex-offset="5" flex-offset-sm="0" flex-offset-xs="0"> <label>{{\'journal.reviewDate\' | translate}}</label> <hois-value value="journal.reviewDate | hoisDate"></hois-value> </md-input-container> </div> <div layout="column" flex> <md-input-container flex> <label>{{\'journal.addInfo\' | translate}}</label> <hois-value value="journal.reviewInfo"></hois-value> </md-input-container> </div> </div> </fieldset> </div> <div ng-controller="JournalEditController as journalEditController"> <div layout-padding> <div flex> <div layout="row"> <md-button class="md-raised" ng-click="back(\'#/journals/\', journalForm)">{{\'main.button.back\' | translate}}</md-button> <a ng-attr-href="{{excel(formState.xlsUrl)}}" target="_blank" class="md-button md-raised">{{\'report.excel\' | translate}}</a> </div> </div> </div> <div layout-padding> <div flex> <div layout="row" flex> <div flex="50" layout="column" layout-align="start"> <div class="common-label" flex>{{\'journal.absencesLegend\' | translate}}</div> <div class="common-label" flex>{{\'journal.entryTabelLegend\' | translate}}</div> </div> <div flex="50" layout="row" layout-align="end"> <md-input-container> <md-checkbox ng-model="showAllStudentsModel" aria-label="show all students" ng-change="showAllStudents(showAllStudentsModel)"> {{\'journal.showAll\' | translate}} </md-checkbox> </md-input-container> </div> </div> <br> <div class="container" fixed-column-table fixed-columns="2"> <table class="journalTable"> <thead> <tr flex> <th>{{\'main.nr\' | translate}}</th> <th style="padding-right:11em"><span>{{\'student.label\' | translate}}, {{\'journal.studentGroup\' | translate}}</span></th> <th class="bordered" style="padding-left:1em" md-colors="{background: getEntryColor(journalEntry.entryType.code)}" ng-repeat="journalEntry in journal.journalEntriesByDate"> <span ng-if="journalEntry.moodleGradeItemId"><md-icon md-font-set="material-icons">school</md-icon></span> <span ng-if="journalEntry.entryType.code === \'SISSEKANNE_L\'">{{\'journal.finalResult\' | translate}}</span> <span ng-if="journalEntry.entryType.code === \'SISSEKANNE_O\'">{{\'journal.outcome\' | translate}}{{journalEntry.outcomeOrderNr + 1}}</span> <span ng-if="journalEntry.entryType.code !== \'SISSEKANNE_L\' && journalEntry.entryType.code !== \'SISSEKANNE_O\'">{{journalEntry.entryDate ? (journalEntry.entryDate | hoisDayMonth) : \'-\'}}</span> <md-tooltip> <span ng-if="journalEntry.startLessonNr"> <span ng-if="!journalEntry.lessons || journalEntry.lessons <= 1">{{journalEntry.startLessonNr}}. {{\'journal.lesson\' | translate}}</span> <span ng-if="journalEntry.lessons && journalEntry.lessons > 1">{{journalEntry.startLessonNr}}. - {{journalEntry.startLessonNr + journalEntry.lessons-1}}. {{\'journal.lesson\' | translate}}</span> ,&nbsp; </span> <span>{{journalEntry.nameEt}}</span> <span>,&nbsp;</span> {{currentLanguageNameField(journalEntry.entryType)}} <span>,&nbsp;</span> {{journalEntry.teacher}} </md-tooltip> </th> </tr> </thead> <tbody md-body> <tr ng-repeat="row in journal.journalStudents" ng-class-odd="\'odd\'" ng-class-even="\'even\'" ng-init="$last && finished()"> <td width="5%">{{$index + 1}}</td> <td width="10%" height="30px"> <span> <i> <span ng-if="row.status === \'OPPURSTAATUS_A\'">{{\'journal.academicLeaveAbbrev\' | translate}}</span> <span ng-if="row.status === \'OPPURSTAATUS_L\'">{{\'journal.finishedAbbrev\' | translate}}</span> <span ng-if="row.status === \'OPPURSTAATUS_K\'">{{\'journal.exmatriculatedAbbrev\' | translate}}</span> <span ng-if="row.isIndividualCurriculum"> <span ng-if="row.status !== \'OPPURSTAATUS_O\' && row.status !== \'OPPURSTAATUS_V\'">, </span> <span>{{\'journal.individualCurriculumAbbrev\' | translate}}</span> </span> </i> <a ng-href="/#/students/{{::row.studentId}}/main">{{::row.fullname}}</a>, {{row.studentGroup}} <span ng-if="row.apelResults"><a ng-click="openApelResultsDialog(row)">{{\'journal.apel\' | translate}}</a></span> <span ng-if="row.isMoodleRegistered"><md-icon md-font-set="material-icons">school</md-icon></span> </span> </td> <td class="bordered" ng-repeat="journalEntry in journal.journalEntriesByDate"> <div layout="row" style="padding-left:1em"> <div ng-repeat="result in journalEntry.journalStudentResults[row.id] | orderBy: \'gradeInserted\'"> <span> {{result.absence.value}} <md-tooltip ng-if="result.absence.value"> {{journalEntry.entryDate ? (journalEntry.entryDate | hoisDate) : \'-\'}} <span ng-if="result.addInfo">,&nbsp; {{result.addInfo}} </span> <span ng-if="journalEntry.lessons && result.absence.value === \'P\'"> ,&nbsp; {{journalEntry.lessons ? ((\'journal.entry.lessons\' | translate) + \' \' + journalEntry.lessons) : \'\'}} </span> </md-tooltip> </span> <span ng-if="result.lessonAbsences.length > 0"> <span ng-repeat="lessonAbsence in result.lessonAbsences | orderBy: \'lessonNr\'"> <span>{{lessonAbsence.absence.value}}({{lessonAbsence.lessonNr}})</span> <md-tooltip class="entryWithAddInfoTootlip"> {{lessonAbsence.absenceInserted | hoisDate}} <span ng-if="result.addInfo">,&nbsp; {{result.addInfo}} </span> </md-tooltip> </span> </span> <span ng-if="(result.absence.value || result.lessonAbsences.length > 0) \r\n                        && (result.journalEntryStudentHistories.length > 0 || result.grade)">/</span> <span ng-repeat="historyResult in result.journalEntryStudentHistories | orderBy: \'gradeInserted\' track by $index"> <span ng-class="{badResult: !gradeUtil.isPositive(historyResult.grade.code)}">{{historyResult.grade.value}}</span> <span>* / </span> <md-tooltip> {{historyResult.gradeInserted | hoisDate}}, &nbsp; {{historyResult.gradeInsertedBy}} </md-tooltip> </span> <span> <span ng-class="{journalFinalResult: journalEntry.entryType.code === \'SISSEKANNE_L\',\r\n                                      badResult: !gradeUtil.isPositive(result.grade.code)}">{{result.grade.value}}</span> <span ng-if="!result.grade && result.journalEntryStudentHistories.length > 0"> - </span> <md-tooltip ng-if="result.grade.value"> {{result.gradeInserted | hoisDate}}, &nbsp; {{result.gradeInsertedBy}} <span ng-if="result.addInfo">,&nbsp;</span> {{result.addInfo}} </md-tooltip> </span> </div> </div> </td> </tr> </tbody> </table> </div> </div> </div> <div layout-padding> <div flex> <div layout="row"> <md-button class="md-raised" ng-click="back(\'#/journals/\', journalForm)">{{\'main.button.back\' | translate}}</md-button> <a ng-attr-href="{{excel(formState.xlsUrl)}}" target="_blank" class="md-button md-raised">{{\'report.excel\' | translate}}</a> </div> </div> </div> <div layout-padding> <div flex> <div layout="row"> <div flex="10"> <h2>{{\'journal.entries\' | translate}}</h2> </div> <div layout="row" layout-align="start end" layout-sm="column" layout-xs="column" flex="70"> <span class="capacity-type-legend" flex-offset="5" md-colors="{background: getEntryColor(\'SISSEKANNE_T\')}">{{currentLanguageNameField(journalEntryTypes[\'SISSEKANNE_T\'])}}</span> <span class="capacity-type-legend" flex-offset="5" md-colors="{background: getEntryColor(\'SISSEKANNE_E\')}">{{currentLanguageNameField(journalEntryTypes[\'SISSEKANNE_E\'])}}</span> <span class="capacity-type-legend" flex-offset="5" md-colors="{background: getEntryColor(\'SISSEKANNE_I\')}">{{currentLanguageNameField(journalEntryTypes[\'SISSEKANNE_I\'])}}</span> <span class="capacity-type-legend" flex-offset="5" md-colors="{background: getEntryColor(\'SISSEKANNE_H\')}">{{currentLanguageNameField(journalEntryTypes[\'SISSEKANNE_H\'])}}</span> <span class="capacity-type-legend" flex-offset="5" md-colors="{background: getEntryColor(\'SISSEKANNE_P\')}">{{currentLanguageNameField(journalEntryTypes[\'SISSEKANNE_P\'])}}</span> <span class="capacity-type-legend" flex-offset="5" md-colors="{background: getEntryColor(\'SISSEKANNE_R\')}">{{currentLanguageNameField(journalEntryTypes[\'SISSEKANNE_R\'])}}</span> <span ng-if="journal.moduleOutcomesAsEntries" class="capacity-type-legend" flex-offset="5" md-colors="{background: getEntryColor(\'SISSEKANNE_O\')}">{{currentLanguageNameField(journalEntryTypes[\'SISSEKANNE_O\'])}}</span> <span class="capacity-type-legend" flex-offset="5" md-colors="{background: getEntryColor(\'SISSEKANNE_L\')}">{{currentLanguageNameField(journalEntryTypes[\'SISSEKANNE_L\'])}}</span> </div> </div> <md-table-container> <table md-table md-progress="journalEntries.$promise"> <thead md-head md-order="journalEntriesCriteria.order" md-on-reorder="loadJournalEntries"> <tr md-row> <th md-column> </th> <th md-column>{{\'journal.entry.date\' | translate}}</th> <th md-column>{{\'journal.entry.lessons\' | translate}}</th> <th md-column>{{\'journal.entry.nameContent\' | translate}}</th> <th md-column>{{\'journal.entry.homework\' | translate}}</th> <th md-column>{{\'journal.entry.homeworkDuedate\' | translate}}</th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="row in journalEntries.content " ng-class-odd="\'odd\'" ng-class-even="\'even\'" md-colors="{background: getEntryColor(row.entryType)}"> <td md-cell><span ng-if="row.moodleGradeItemId"><md-icon md-font-set="material-icons">school</md-icon></span> </td> <td md-cell>{{row.entryDate ? (row.entryDate | hoisDate) : \'-\'}}</td> <td md-cell>{{row.lessons ? row.lessons : \'-\'}}</td> <td md-cell> <span ng-if="row.nameEt">{{row.nameEt}}</span> <span ng-if="row.nameEt && row.content">/</span> <span ng-if="row.content">{{row.content}}</span> </td> <td md-cell>{{row.homework ? row.homework : \'-\'}}</td> <td md-cell>{{row.homeworkDuedate ? (row.homeworkDuedate | hoisDate) : \'-\' }}</td> </tr> </tbody> </table> </md-table-container> <md-table-pagination md-limit="journalEntriesCriteria.size" md-limit-options="[10, 20, 50]" md-page="journalEntriesCriteria.page" md-total="{{journalEntries.totalElements}}" md-on-paginate="loadJournalEntries" md-label="{page: \'{{\'main.page\' | translate}}:\', rowsPerPage: \'{{\'main.rowPerPage\' | translate}}:\', of: \'{{\'main.of\' | translate}}\'}" md-page-select></md-table-pagination> </div> </div> <div layout-padding> <div flex> <div ng-include="\'studyMaterial/templates/journal.material.view.tmpl.html\'"></div> </div> </div> <div layout-padding> <hois-collapsable label="(\'journal.curriculumVersionModuleOrThemeDescription\' | translate)" expanded="false"> <div ng-repeat="module in journal.moduleDescriptions | orderBy: [\'-isModule\', currentLanguageNameField()]"> <a href="" class="md-raised small-link" ng-click="moduleDescriptionDialog(module)">{{currentLanguageNameField(module)}}</a> </div> </hois-collapsable> </div> </div>'),a.put("lessonplan/event.search.html",'<div class="ois-form-layout-padding ois-form-layout" ng-cloak> <div flex> <fieldset> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'main.searchlabel\' | translate}}</legend> <form name="searchForm" ng-submit="searchForm.$valid && loadData()" novalidate class="nomargin"> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="45" flex-sm="100" flex-xs="100"> <label>{{\'lessonplan.event.studyPeriod\' | translate}}</label> <hois-select ng-model="criteria.studyPeriod" values="formState.studyPeriods"></hois-select> </md-input-container> <md-input-container flex="50" flex-sm="100" flex-xs="100" flex-offset="5" flex-offset-sm="0" flex-offset-xs="0"> <label>{{\'lessonplan.event.studentGroups\' | translate}}</label> <hois-select ng-model="criteria.studentGroups" values="formState.studentGroups" multiple></hois-select> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="45" flex-sm="100" flex-xs="100"> <label class="textInput">{{\'lessonplan.event.name\' | translate}}</label> <input ng-model="criteria.name" type="text" md-maxlength="255"> </md-input-container> <md-input-container flex="25" flex-sm="100" flex-xs="100" flex-offset="5" flex-offset-sm="0" flex-offset-xs="0"> <label>{{\'main.from\' | translate}}</label> <md-datepicker ng-model="criteria.from" md-max-date="criteria.thru"></md-datepicker> </md-input-container> <md-input-container flex="25" flex-sm="100" flex-xs="100"> <label>{{\'main.thru\' | translate}}</label> <md-datepicker ng-model="criteria.thru" md-min-date="criteria.from"></md-datepicker> </md-input-container> </div> <div layout="row"> <md-input-container class="md-block" flex="45" flex-sm="100" flex-xs="100"> <label>{{auth.higher ? (\'lessonplan.event.teachersHigher\' | translate) : (\'lessonplan.event.teachersVocational\' | translate)}}</label> <hois-select ng-model="criteria.teachers" values="formState.teachers" flex multiple></hois-select> </md-input-container> <md-input-container flex="50" flex-sm="100" flex-xs="100" flex-offset="5" flex-offset-sm="0" flex-offset-xs="0"> <label class="textInput">{{auth.higher ? (\'lessonplan.event.otherTeacherHigher\' | translate) : (\'lessonplan.event.otherTeacherVocational\' | translate)}}</label> <input ng-model="criteria.otherTeacher" type="text" md-maxlength="255"> </md-input-container> </div> <div layout="row"> <div layout="row" flex="45" flex-sm="100" flex-xs="100"> <hois-autocomplete flex ng-model="criteria.roomObject" method="rooms" name="student" label="lessonplan.event.room" additional-query-params="{isStudy: true}"></hois-autocomplete> </div> <md-input-container flex="50" flex-sm="100" flex-xs="100" flex-offset="5" flex-offset-sm="0" flex-offset-xs="0"> <label class="textInput">{{\'lessonplan.event.otherRoom\' | translate}}</label> <input ng-model="criteria.otherRoom" type="text" md-maxlength="255"> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="30" flex-sm="100" flex-xs="100"> <md-checkbox ng-model="criteria.singleEvent">{{\'lessonplan.event.singleEvent\' | translate}}</md-checkbox> </md-input-container> <md-input-container flex="30" flex-sm="100" flex-xs="100"> <md-checkbox ng-model="criteria.showOnlySubstitutes">{{\'lessonplan.event.showOnlySubstitutes\' | translate}}</md-checkbox> </md-input-container> </div> <div layout="row"> <md-button type="submit" class="md-raised md-primary">{{\'main.button.search\' | translate}}</md-button> <md-button class="md-raised" ng-click="clearEventCriteria()">{{\'main.button.clear\' | translate}}</md-button> <md-button class="md-raised" ng-if="canEdit" ng-href="#/timetable/timetableEvent/new">{{\'main.button.create\' | translate}}</md-button> </div> <div flex-xs="0" flex-gt-xs="0" flex-gt-sm="50"></div> </form> </fieldset> </div> </div> <div layout-padding> <div flex> <md-table-container> <table md-table md-progress="tabledata.$promise"> <thead md-head md-order="criteria.order" md-on-reorder="loadData"> <tr md-row> <th md-column md-order-by="{{currentLanguage()===\'en\' ? 3 : 2}}">{{\'lessonplan.event.name\' | translate}}</th> <th md-column md-order-by="4">{{\'lessonplan.event.date\' | translate}}</th> <th md-column md-order-by="cast(tet.start as time), cast(tet.end as time)">{{\'lessonplan.event.time\' | translate}}</th> <th md-column>{{auth.higher ? (\'lessonplan.event.teachersHigher\' | translate) : (\'lessonplan.event.teachersVocational\' | translate)}}</th> <th md-column>{{\'lessonplan.event.rooms\' | translate}}</th> <th md-column>{{\'lessonplan.event.studentGroups\' | translate}}</th> <th md-column>{{\'lessonplan.event.singleEvent\' | translate}}</th> <th></th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="row in tabledata.content" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell><a ng-href="#/timetable/timetableEvent/{{::row.id}}/view">{{row.nameEt}}</a></td> <td md-cell>{{::row.date | hoisDate}}</td> <td md-cell>{{::row.timeStart | hoisTime}}-{{::row.timeEnd | hoisTime}}</td> <td md-cell><span ng-repeat="teacher in row.teachers">{{::teacher.name}}{{$last ? "" : ", "}}</span></td> <td md-cell> <span ng-repeat="room in row.rooms"> <span ng-if="room.id">{{::room.buildingCode}}-{{::room.roomCode}}</span> <span ng-if="!room.id">{{::room.roomCode}}</span> {{$last ? "" : ", "}} </span> </td> <td md-cell><span ng-repeat="group in row.studentGroups">{{::group.code}}{{$last ? "" : ", "}}</span></td> <td md-cell>{{::row.singleEvent ? "jah" : "ei"}}</td> <td md-cell> <md-button md-no-ink class="md-primary change-button" ng-if="canEdit && afterNow(row.date, row.timeStart) && allowedToEdit(row)" ng-href="#/timetable/timetableEvent/{{::row.id}}/edit">{{\'main.button.change\' | translate}}</md-button> </td> </tr> </tbody> </table> </md-table-container> <md-table-pagination md-limit="criteria.size" md-limit-options="[10, 20, 50]" md-page="criteria.page" md-total="{{tabledata.totalElements}}" md-on-paginate="loadData" md-label="{page: \'{{\'main.page\' | translate}}:\', rowsPerPage: \'{{\'main.rowPerPage\' | translate}}:\', of: \'{{\'main.of\' | translate}}\'}" md-page-select></md-table-pagination> </div> </div>'),a.put("lessonplan/journal.edit.html",'<div class="ois-form-layout-padding ois-form-layout" ng-cloak> <div flex> <form name="journalForm" class="nomargin"> <div flex="100" layout="row"> <div flex="75"> <div> <div layout="row" flex="100" flex-sm="100" flex-xs="100"> <span class="common-label">{{\'lessonplan.moduleName\' | translate}}: {{record.moduleNameEt}}</span> </div> <div layout="row" flex="100" flex-sm="100" flex-xs="100"> <span class="common-label">{{\'lessonplan.studentGroup\' | translate}}: {{record.studentGroupCode}}</span> </div> </div> <div flex> <br> <md-checkbox ng-model="record.addModuleOutcomes" aria-label="{{\'lessonplan.journal.addModuleOutcomes\' | translate}}"> {{\'lessonplan.journal.addModuleOutcomes\' | translate}} </md-checkbox> </div> <div layout="row" flex="100" flex-sm="100" flex-xs="100"> <md-input-container flex> <label class="textInput">{{\'lessonplan.journal.theme\' | translate}}</label> <md-select name="theme" ng-model="formState.theme"> <md-option md-option-empty></md-option> <md-option ng-repeat="theme in formState.themes" ng-value="theme.id" ng-style="theme.existsInOtherJournals ? {color: \'red\'} : {}"> <span>{{currentLanguageNameField(theme)}}</span> <span ng-if="theme.studyYearNumber">({{theme.studyYearNumber}}. {{\'main.studyYearShort\' | translate}})</span> </md-option> </md-select> </md-input-container> </div> <div layout="column" class="common-label" flex="95" ng-repeat="theme in record.journalOccupationModuleThemes | orderBy: orderByThemeName"> <div layout="row" flex layout-align="start center"> <div flex="5">&nbsp;</div> <div flex="50"> <span ng-style="{\'color\': formState.themeMap[theme].existsInOtherJournals ? \'red\' : \'inherit\'}"> <span>{{currentLanguageNameField(formState.themeMap[theme])}}</span> <span ng-if="formState.themeMap[theme].studyYearNumber"> ({{formState.themeMap[theme].studyYearNumber}} {{\'main.studyYearShort\' | translate}})</span> </span> </div> <div> <a ng-click="deleteTheme(theme)" class="remove">&times;</a> </div> </div> </div> <div layout="row" flex="100" flex-sm="100" flex-xs="100"> <md-input-container flex="100" flex-sm="100" flex-xs="100"> <label class="textInput">{{\'lessonplan.journal.assessment\' | translate}}</label> <hois-classifier-select flex="100" flex-sm="100" flex-xs="100" ng-model="record.assessment" required main-classifier-code="KUTSEHINDAMISVIIS" model-value-attr="code"></hois-classifier-select> </md-input-container> </div> <div layout="row"> <md-input-container flex="100" flex-sm="100" flex-xs="100"> <label class="textInput">{{\'lessonplan.journal.name\' | translate}}</label> <input type="text" ng-model="record.nameEt" md-maxlength="255" required> </md-input-container> </div> <div layout="row" flex="100" flex-sm="100" flex-xs="100"> <md-input-container flex="50" flex-sm="100" flex-xs="100"> <label>{{\'teacher.untis\' | translate}}</label> <input ng-model="record.untisCode" name="untisCode" type="text" md-maxlength="20"> <div ng-messages="teacherForm.untisCode.$error"> <div ng-message="md-maxlength"> {{\'main.messages.error.maxlength\' | translate}} </div> </div> </md-input-container> <md-input-container flex="50" flex-sm="100" flex-xs="100"> <label class="textInput">{{\'lessonplan.journal.groupProportion\' | translate}}</label> <hois-classifier-select ng-model="record.groupProportion" required main-classifier-code="PAEVIK_GRUPI_JAOTUS" model-value-attr="code"></hois-classifier-select> </md-input-container> </div> <div layout="row" flex="100" flex-sm="100" flex-xs="100"> <hois-autocomplete ng-model="formState.teacher" method="teachers" additional-query-params="{valid: true}" label="{{auth.higher ? \'lessonplan.journal.teacherHigher\' : \'lessonplan.journal.teacherVocational\'}}" flex></hois-autocomplete> </div> <div layout="row"> <md-table-container class="secondary-table"> <table md-table> <thead md-head> <tr md-row> <th md-column></th> <th md-column>{{\'lessonplan.journal.isFiller\' | translate}}</th> <th md-column>{{\'lessonplan.journal.isConfirmer\' | translate}}</th> <th md-column></th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="teacher in record.journalTeachers"> <td md-cell>{{currentLanguageNameField(teacher.teacher)}}</td> <td md-cell> <md-input-container> <md-checkbox ng-model="teacher.isFiller" aria-label="{{\'lessonplan.journal.isFiller\' | translate}}"></md-checkbox> </md-input-container> </td> <td md-cell> <md-input-container> <md-checkbox ng-model="teacher.isConfirmer" aria-label="{{\'lessonplan.journal.isConfirmer\' | translate}}"></md-checkbox> </md-input-container> </td> <td md-cell> <a ng-click="deleteTeacher(teacher)" class="remove">&times;</a> </td> </tr> </tbody> </table> </md-table-container> </div> <div layout="row" flex="100"> <hois-autocomplete flex ng-model="formState.room" method="rooms" additional-query-params="{isStudy: true}" label="lessonplan.room"></hois-autocomplete> </div> <div layout="column" class="common-label" flex="95" ng-repeat="room in record.journalRooms"> <div layout="row" flex layout-align="start center"> <div flex="5">&nbsp;</div> <div flex="50">{{room.nameEt}}</div> <div> <a ng-click="deleteRoom(room)" class="remove">&times;</a> </div> </div> </div> <div layout="row" flex="100" flex-sm="100" flex-xs="100"> <md-input-container class="md-block" flex> <label>{{\'lessonplan.journal.group\' | translate}}</label> <hois-select ng-model="formState.group" values="formState.studentGroups" flex></hois-select> </md-input-container> </div> <div layout="row" flex> <md-table-container class="secondary-table" flex> <table md-table flex> <thead md-head flex> <tr md-row> <th md-column></th> <th md-column>{{\'lessonplan.journal.group-module\' | translate}}</th> <th md-column>{{\'lessonplan.journal.group-theme\' | translate}}</th> <th md-column></th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="moduleTheme in record.groups"> <td md-cell>{{moduleTheme.group.nameEt}}</td> <td md-cell> <md-input-container class="md-block" flex> <label>{{\'lessonplan.journal.group-module\' | translate}}</label> <hois-select ng-change="newSelectedModule(moduleTheme)" required ng-model="moduleTheme.curriculumVersionOccupationModule" values="moduleTheme.group.modules" flex></hois-select> </md-input-container> </td> <td md-cell> <md-input-container class="md-block" flex> <label>{{\'lessonplan.journal.group-theme\' | translate}}</label> <hois-select ng-model="moduleTheme.curriculumVersionOccupationModuleThemes" values="moduleTheme.group.themes" warning-param="existsInOtherJournals" multiple required flex></hois-select> </md-input-container> </td> <td md-cell> {{moduleTheme.group.themes[moduleTheme.curriculumVersionOccupationModuleThemes]}} </td> <td md-cell> <a ng-click="deleteGroup(moduleTheme)" class="remove">&times;</a> </td> </tr> </tbody> </table> </md-table-container> </div> </div> <div layout="column" flex="20" flex-offset="5"> <fieldset flex="100" layout="column"> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'lessonplan.journal.capacity-type\' | translate}}</legend> <div layout="column" ng-repeat="capacityType in formState.capacityTypes"> <div layout="row" flex layout-align="start center"> <div flex="5">&nbsp;</div> <div flex> <md-checkbox ng-model="capacityType._selected"> {{currentLanguageNameField(capacityType)}} <span ng-if="capacityType.hours">({{capacityType.hours}})</span> </md-checkbox> </div> </div> </div> </fieldset> </div> </div> <div layout="row"> <md-button class="md-raised md-primary" ng-click="update()">{{\'main.button.save\' | translate}}</md-button> <md-button class="md-raised" ng-if="record.id" ng-click="delete()">{{\'main.button.delete\' | translate}}</md-button> <md-button ng-click="backToLessonplan()" class="md-raised">{{\'main.button.back\' | translate}}</md-button> </div> </form> </div> </div>'),a.put("lessonplan/new.lessonplan.dialog.html",'<md-dialog aria-label="grade add dialog" flex="30" flex-sm="100" flex-xs="100"> <form name="newLessonPlanForm" ng-cloak> <md-toolbar> <div class="md-toolbar-tools"> <h2>{{"lessonplan.addPlanDialog" | translate}}</h2> <span flex></span> <md-button class="md-icon-button" ng-click="cancel()"> <md-icon md-font-set="material-icons">close</md-icon> </md-button> </div> </md-toolbar> <md-dialog-content> <div class="ois-form-layout-padding nomargin" layout="column" ng-cloak> <md-input-container class="md-block"> <label class="textInput">{{\'lessonplan.studyYear\' | translate}}</label> <hois-select values="formState.studyYears" ng-model="record.studyYear" md-autofocus required></hois-select> </md-input-container> <md-input-container class="md-block"> <label class="textInput">{{\'lessonplan.studentGroup\' | translate}}</label> <hois-select values="formState.studentGroupMap[record.studyYear]" ng-model="record.studentGroup" required></hois-select> </md-input-container> <md-input-container class="md-block"> <label class="textInput">{{\'lessonplan.copyLessonplan\' | translate}}</label> <md-select ng-model="record.previousLessonplan" aria-label="{{\'lessonplan.copyLessonplan\' | translate}}" ng-disabled="!record.studentGroup"> <md-option md-option-empty></md-option> <md-option ng-value="value.lessonplan" ng-repeat="value in formState.previousLessonplans">{{::value.name}}</md-option> </md-select> </md-input-container> <div>&nbsp;</div> <md-input-container> <md-checkbox ng-model="record.copyLessons" aria-label="{{\'lessonplan.copyLessons\' | translate}}" ng-disabled="!record.previousLessonplan"> {{\'lessonplan.copyLessons\' | translate}} </md-checkbox> </md-input-container> </div> </md-dialog-content> <md-dialog-actions layout="row" layout-align="start center"> <md-button ng-click="create()" class="md-raised md-primary">{{\'main.button.create\' | translate}}</md-button> <md-button ng-click="cancel()" class="md-raised">{{\'main.button.back\' | translate}}</md-button> </md-dialog-actions> </form> </md-dialog>'),a.put("lessonplan/vocational.edit.html",'<div ng-cloak class="ois-form-layout-padding"> <div layout="column"> <div flex="30" class="md-title"> <hois-classifier-value ng-model="record.studyYearCode" main-classifier-code="OPPEAASTA"></hois-classifier-value> <span>{{\'lessonplan.studentGroup\' | translate}} {{record.studentGroupCode}} ({{record.courseNr}}. {{\'lessonplan.course\' | translate}}), </span> <span>{{record.curriculumCode}}, {{currentLanguageNameField(record.curriculumVersion)}}, </span> <span>{{\'lessonplan.studyPeriod\' | translate}} {{formState.studyPeriodYears}} {{\'main.years\' | translate}} {{formState.studyPeriodMonths}} {{\'main.months\' | translate}}</span> </div> <div>&nbsp;</div> <div flex layout="row"> <div flex="50" layout="row" layout-align="start center"> <md-checkbox ng-model="record.isUsable"> {{\'lessonplan.isUsable\' | translate}} </md-checkbox> <md-checkbox ng-model="formState.showWeeks" ng-change="showWeeksChanged()">{{\'lessonplan.showWeeks\' | translate}}</md-checkbox> <md-checkbox ng-model="formState.showTotals" ng-change="showTotalsChanged()">{{\'lessonplan.showTotals\' | translate}}</md-checkbox> </div> <div flex="50" layout="row" layout-align="end start" class="common-label" md-colors="{color: \'background-400\'}"> <span ng-repeat="c in ::formState.capacityTypes track by $index"> <span ng-if="!$first">|</span> {{::c.value.toUpperCase()}} - {{currentLanguageNameField(c)}} </span> </div> </div> </div> <fieldset tabindex="1"> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'lessonplan.showPeriods\' | translate}}</legend> <div layout="column"> <md-grid-list ng-app="app" md-cols="6" md-cols-md="4" md-cols-sm="3" md-cols-xs="1" md-gutter="1em" md-row-height="35px" flex> <md-grid-tile ng-repeat="sp in ::formState.studyPeriods track by $index"> <md-checkbox aria-label="{{currentLanguageNameField(sp)}}" ng-model="sp._selected" ng-change="updateStudyPeriods()" style="position: absolute; left: 5px">{{currentLanguageNameField(sp)}}</md-checkbox> </md-grid-tile> </md-grid-list> </div> </fieldset> <div>&nbsp;</div> <div class="container" fixed-column-table fixed-columns="3"> <table class="lessonplan"> <thead> <tr> <th colspan="3" class="dividerBorder">{{\'lessonplan.total\' | translate}}</th> <th ng-if="!atLeastOneShownPeriod" colspan="1" class="dividerBorder"></th> <th ng-if="sp._selected" colspan="{{sp.weekNrs.length}}" class="dividerBorder" ng-repeat="sp in ::formState.studyPeriods track by $index"> {{currentLanguageNameField(sp)}} ({{sp.startDate | hoisDayMonth}}-{{sp.endDate | hoisDayMonth}})</th> </tr> <tr ng-if="formState.showWeeks"> <th colspan="3" class="cross dividerBorder">&nbsp;</th> <th ng-if="!atLeastOneShownPeriod" colspan="1" class="dividerBorder"></th> <th ng-if="w.show" ng-repeat="w in ::formState.weekNrs track by $index" class="center" ng-class="{dividerBorder: w.endOfPeriod}" ng-style="{ background: true ? getLegendByWeek(w.nr) : \'white\' }" title="{{formState.weekBeginningDates[$index] | hoisDate}}">{{w.nr}}</th> </tr> </thead> <tbody id="lessonplan-table-body"></tbody> </table> </div> </div> <div> <md-button class="md-raised md-primary" ng-click="update()">{{\'main.button.save\' | translate}}</md-button> <md-button class="md-raised" ng-click="delete()">{{\'main.button.delete\' | translate}}</md-button> <a ng-href="{{excel(formState.xlsUrl, criteria)}}" target="_blank" class="md-button md-raised">{{\'main.button.print\' | translate}}</a> <md-button ng-click="back()" class="md-raised">{{\'main.button.back\' | translate}}</md-button> </div>'),
a.put("lessonplan/vocational.search.html",'<md-nav-bar md-selected-nav-item="currentNavItem"> <md-nav-item ng-if="formState.vocational" md-nav-href="#/lessonplans/vocational" name="lessonplan.vocational">{{\'lessonplan.search.vocational\' | translate}}</md-nav-item> <md-nav-item ng-if="formState.vocational" md-nav-href="#/lessonplans/vocational/byteacher" name="lessonplan.vocational-byteacher"> {{auth.higher ? (\'lessonplan.search.vocationalByTeacherHigher\' | translate) : (\'lessonplan.search.vocationalByTeacherVocational\' | translate)}} </md-nav-item> <!--  <md-nav-item ng-if="formState.higher" md-nav-href="#/lessonplans/higher" name="lessonplan.higher">{{\'lessonplan.higher\' | translate}}</md-nav-item>\r\n  <md-nav-item ng-if="formState.higher" md-nav-href="#/lessonplans/higher/byteacher" name="lessonplan.higher-byteacher">{{\'lessonplan.higher-byteacher\' | translate}}</md-nav-item>  --> </md-nav-bar> <div class="ois-form-layout-padding ois-form-layout" ng-cloak> <div flex> <fieldset> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'main.searchlabel\' | translate}}</legend> <form ng-submit="load()" name="vocationalSearchForm" novalidate class="nomargin"> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="45" flex-sm="100" flex-xs="100"> <label class="textInput">{{\'lessonplan.studyYear\' | translate}}</label> <hois-select ng-model="criteria.studyYear" values="formState.studyYears" required autofocus></hois-select> </md-input-container> <md-input-container flex="50" flex-sm="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label class="textInput">{{\'lessonplan.schoolDepartment\' | translate}}</label> <hois-school-department-select ng-model="criteria.schoolDepartment"></hois-school-department-select> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="45" flex-sm="100" flex-xs="100"> <label>{{\'lessonplan.curriculumVersion\' | translate}}</label> <hois-select ng-model="criteria.curriculumVersion" values="formState.curriculumVersions"></hois-select> </md-input-container> <md-input-container flex="50" flex-sm="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label class="textInput">{{\'lessonplan.studentGroup\' | translate}}</label> <hois-select ng-model="criteria.studentGroup" values="formState.studentGroups"></hois-select> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <div flex="45" flex-sm="100" flex-xs="100"> <hois-autocomplete ng-model="criteria.teacherObject" method="teachers" label="{{auth.higher ? (\'lessonplan.teacherHigher\' | translate) : (\'lessonplan.teacherVocational\' | translate)}}"></hois-autocomplete> </div> </div> <div layout="row" layout-xs="column"> <md-button type="submit" class="md-raised md-primary">{{\'main.button.search\' | translate}}</md-button> <md-button class="md-raised" ng-click="clearCriteria()">{{\'main.button.clear\' | translate}}</md-button> <md-button class="md-raised" ng-if="canEdit" ng-click="newLessonplan()">{{\'main.button.create\' | translate}}</md-button> </div> <div flex-xs="0" flex-gt-xs="0" flex-gt-sm="50"></div> </form> </fieldset> </div> </div> <div layout-padding> <div flex> <md-table-container> <table md-table md-progress="tabledata.$promise"> <thead md-head md-order="criteria.order" md-on-reorder="loadData"> <tr md-row> <th md-column md-order-by="sg.code">{{\'lessonplan.studentGroup\' | translate}}</th> <th md-column md-order-by="cv.code">{{\'lessonplan.curriculumVersion\' | translate}}</th> <th md-column md-order-by="hours">{{\'lessonplan.plannedHoursTotal\' | translate}}</th> <th></th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="row in tabledata.content" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell>{{::row.studentGroup}}</td> <td md-cell>{{::row.curriculumVersion}}</td> <td md-cell>{{::row.plannedHours | hoisNumber:1}}</td> <td md-cell> <md-button md-no-ink class="md-primary change-button" ng-href="#/lessonplans/vocational/{{::row.id}}/edit">{{\'main.button.change\' | translate}}</md-button> </td> </tr> </tbody> </table> </md-table-container> <md-table-pagination md-limit="criteria.size" md-limit-options="[10, 20, 50]" md-page="criteria.page" md-total="{{tabledata.totalElements}}" md-on-paginate="loadData" md-label="{page: \'{{\'main.page\' | translate}}:\', rowsPerPage: \'{{\'main.rowPerPage\' | translate}}:\', of: \'{{\'main.of\' | translate}}\'}" md-page-select></md-table-pagination> </div> </div>'),a.put("lessonplan/vocational.teacher.search.html",'<md-nav-bar md-selected-nav-item="currentNavItem" ng-if="formState.vocational && auth.isAdmin()"> <md-nav-item ng-if="formState.vocational" md-nav-href="#/lessonplans/vocational" name="lessonplan.vocational">{{\'lessonplan.search.vocational\' | translate}}</md-nav-item> <md-nav-item ng-if="formState.vocational" md-nav-href="#/lessonplans/vocational/byteacher" name="lessonplan.vocational-byteacher"> {{auth.higher ? (\'lessonplan.search.vocationalByTeacherHigher\' | translate) : (\'lessonplan.search.vocationalByTeacherVocational\' | translate)}}</md-nav-item> <!--  <md-nav-item ng-if="formState.higher" md-nav-href="#/lessonplans/higher" name="lessonplan.higher">{{\'lessonplan.higher\' | translate}}</md-nav-item>\r\n  <md-nav-item ng-if="formState.higher" md-nav-href="#/lessonplans/higher/byteacher" name="lessonplan.higher-byteacher">{{\'lessonplan.higher-byteacher\' | translate}}</md-nav-item>  --> </md-nav-bar> <div class="ois-form-layout-padding ois-form-layout" ng-cloak> <div flex> <fieldset> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'main.searchlabel\' | translate}}</legend> <form ng-submit="load()" name="vocationalTeacherSearchForm" novalidate class="nomargin"> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="45" flex-sm="100" flex-xs="100"> <label class="textInput">{{\'lessonplan.studyYear\' | translate}}</label> <hois-select ng-model="criteria.studyYear" values="formState.studyYears" required autofocus></hois-select> </md-input-container> <div flex="50" flex-sm="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0" ng-if="auth.isAdmin()"> <hois-autocomplete label="{{auth.higher ? \'lessonplan.teacherHigher\' : \'lessonplan.teacherVocational\'}}" ng-model="criteria.teacher" method="teachers"></hois-autocomplete> </div> </div> <div layout="row"> <md-button type="submit" class="md-raised md-primary">{{\'main.button.search\' | translate}}</md-button> <md-button class="md-raised" ng-click="clearCriteria()" ng-if="auth.isAdmin()">{{\'main.button.clear\' | translate}}</md-button> </div> <div flex-xs="0" flex-gt-xs="0" flex-gt-sm="50"></div> </form> </fieldset> </div> </div> <div layout-padding> <div flex> <md-table-container> <table md-table md-progress="tabledata.$promise"> <thead md-head md-order="criteria.order" md-on-reorder="loadData"> <tr md-row> <th md-column md-order-by="p.lastname,p.firstname"> {{auth.higher ? (\'lessonplan.teacherHigher\' | translate) : (\'lessonplan.teacherVocational\' | translate)}} </th> <th md-column>{{\'lessonplan.plannedHoursTotal\' | translate}}</th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="row in tabledata.content" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell> <md-button md-no-ink class="md-primary change-button" ng-href="#/lessonplans/vocational/byteacher/{{::row.id}}/{{::row.studyYear}}">{{::row.teacherFullname}}</md-button> </td> <td md-cell>{{::row.plannedHours}}</td> </tr> </tbody> </table> </md-table-container> <md-table-pagination md-limit="criteria.size" md-limit-options="[10, 20, 50]" md-page="criteria.page" md-total="{{tabledata.totalElements}}" md-on-paginate="loadData" md-label="{page: \'{{\'main.page\' | translate}}:\', rowsPerPage: \'{{\'main.rowPerPage\' | translate}}:\', of: \'{{\'main.of\' | translate}}\'}" md-page-select></md-table-pagination> </div> </div>'),a.put("lessonplan/vocational.teacher.view.html",'<div ng-cloak class="ois-form-layout-padding"> <div layout="column"> <div flex="30" class="md-title"> <hois-classifier-value ng-model="record.studyYearCode" main-classifier-code="OPPEAASTA"></hois-classifier-value> <span>{{auth.higher ? (\'lessonplan.teacherHigher\' | translate) : (\'lessonplan.teacherVocational\' | translate)}} {{record.teacherName}}</span> </div> <div>&nbsp;</div> <div flex layout="row"> <div flex="50" layout="row" class="common-label" md-colors="{color: \'background-400\'}"> <span ng-repeat="c in formState.capacityTypes"> <span ng-if="!$first">|</span> {{::c.value.toUpperCase()}} - {{currentLanguageNameField(c)}} </span> </div> </div> </div> <md-table-container ng-if="record.journals.length > 0"> <table class="teacher-lessonplan"> <!-- table header --> <thead> <tr> <th>{{\'lessonplan.journals\' | translate}}</th> <th colspan="2" class="dividerBorder">{{\'lessonplan.total\' | translate}}</th> <th colspan="{{::sp.weekNrs.length}}" class="dividerBorder" ng-repeat="sp in formState.studyPeriods">{{currentLanguageNameField(sp)}}</th> </tr> <tr> <th colspan="3" class="dividerBorder"> <md-checkbox ng-model="formState.showWeeks">{{\'lessonplan.showWeeks\' | translate}}</md-checkbox> <md-checkbox ng-model="formState.showCapacityTypes">{{\'lessonplan.showCapacityTypes\' | translate}}</md-checkbox> </th> <th ng-repeat="w in formState.weekNrs track by $index" class="center" ng-class="{dividerBorder: w.endOfPeriod}" ng-style="{background: \'white\'}" title="{{formState.weekBeginningDates[$index] | hoisDate}}">{{w.nr}}</th> </tr> </thead> <!-- journals --> <tbody ng-repeat="journal in record.journals"> <tr> <td colspan="{{::formState.weekNrs.length+3}}" class="dividerBorder"> <span class="bold">{{::journal.nameEt}}:</span>&nbsp; <span ng-repeat="theme in getUniqueJournalThemes(journal.themes)"> <span ng-if="!$first">,&nbsp;</span>{{::theme.nameEt}}&nbsp;{{::theme.credits}}&nbsp;{{\'lessonplan.credits\' | translate}} &nbsp;(<span ng-repeat="(hourCap, hourCount) in theme.hours">{{::getCapacityByCode(hourCap).value.toUpperCase()}}{{hourCount}}{{$last ? "" : "/"}}</span>)</span> <div ng-if="!auth.isAdmin()" style="float: right"> <md-checkbox disabled ng-model="journal.isFiller">{{\'lessonplan.isFiller\' | translate}}</md-checkbox> <md-checkbox disabled ng-model="journal.isConfirmer">{{\'lessonplan.isConfirmer\' | translate}}</md-checkbox> </div> </td> </tr> <tr ng-repeat="ct in getCapacityTypes(journal.hours)" ng-if="formState.showCapacityTypes"> <td rowspan="{{::keys(journal.hours).length+1}}" ng-if="$first"> <div layout="column"> <div> <span style="float:left"> <span ng-repeat="studentGroup in journal.studentGroups"> <br ng-if="!$first"> {{studentGroup}} <br ng-if="$last"> </span> <br> <span ng-repeat="teacher in journal.teachers"> <br ng-if="!$first"> {{teacher.teacher.nameEt}} </span> </span> </div> <br> <div ng-if="journal.groupProportion !== \'PAEVIK_GRUPI_JAOTUS_1\'" layout="row"> <label>{{\'lessonplan.journal.groupProportion\' | translate}} &nbsp;</label> <hois-classifier-value ng-model="journal.groupProportion" main-classifier-code="PAEVIK_GRUPI_JAOTUS"></hois-classifier-value> </div> </div> </td> <td class="center">{{ct.value.toUpperCase()}}</td> <td class="center dividerBorder">{{formState.journalTotals[journal.id][ct.code]}}</td> <td ng-if="formState.showWeeks" ng-repeat="h in journal.hours[ct.code] track by $index" ng-class="{dividerBorder: formState.weekNrs[$index].endOfPeriod}" class="center">{{journal.hours[ct.code][$index]}}</td> <td ng-if="!formState.showWeeks" colspan="{{::sp.weekNrs.length}}" ng-repeat="sp in formState.studyPeriods track by $index" class="center dividerBorder">{{journal.spHours[ct.code][$index]}}</td> </tr> <tr> <td ng-if="!formState.showCapacityTypes"> <div> <span style="float:left"> <span ng-repeat="teacher in journal.teachers"> <br ng-if="!$first"> {{teacher.teacher.nameEt}} </span> </span> </div> <div ng-if="journal.groupProportion !== \'PAEVIK_GRUPI_JAOTUS_1\'"> <label>{{\'lessonplan.journal.groupProportion\' | translate}}</label> <hois-classifier-value ng-model="journal.groupProportion" main-classifier-code="PAEVIK_GRUPI_JAOTUS"></hois-classifier-value> </div> </td> <td>{{\'lessonplan.total\' | translate}}</td> <td class="center dividerBorder">{{formState.journalTotals[journal.id].__}}</td> <td ng-if="formState.showWeeks" ng-repeat="w in formState.weekNrs track by $index" ng-class="{dividerBorder: formState.weekNrs[$index].endOfPeriod}" class="center">{{formState.journalTotals[journal.id]._[$index]}}</td> <td ng-if="!formState.showWeeks" colspan="{{::sp.weekNrs.length}}" ng-repeat="sp in formState.studyPeriods track by $index" class="center dividerBorder">{{formState.journalTotals[journal.id]._spTotals[$index]}}</td> </tr> </tbody> <!-- grand totals --> <tbody md-colors="{background: \'background-200\'}"> <tr ng-repeat="ct in getCapacityTypes(formState.grandTotals)" ng-if="formState.showCapacityTypes"> <td rowspan="{{keys(formState.grandTotals).length+1}}" ng-if="$first"> {{currentLanguageNameField(module)}}&nbsp;{{\'lessonplan.grandTotal\' | translate}} </td> <td class="center">{{ct.value.toUpperCase()}}</td> <td class="center dividerBorder">{{formState.grandTotals._[ct.code]}}</td> <td ng-if="formState.showWeeks" ng-repeat="h in formState.grandTotals[ct.code] track by $index" ng-class="{dividerBorder: formState.weekNrs[$index].endOfPeriod}" class="center">{{h | hoisNumber:1}}</td> <td ng-if="!formState.showWeeks" ng-repeat="sp in formState.studyPeriods track by $index" colspan="{{::sp.weekNrs.length}}" class="center dividerBorder">{{formState.capGrandTotalsSp[ct.code][$index] | hoisNumber:1}}</td> </tr> <tr> <td colspan="{{formState.showCapacityTypes ? 1 : 2}}">{{\'lessonplan.total\' | translate}}</td> <td class="center dividerBorder">{{formState.grandTotals.__}}</td> <td ng-if="formState.showWeeks" ng-repeat="h in formState.grandTotals._._ track by $index" ng-class="{dividerBorder: formState.weekNrs[$index].endOfPeriod}" class="center">{{h | hoisNumber:1}}</td> <td ng-if="!formState.showWeeks" ng-repeat="sp in formState.studyPeriods track by $index" colspan="{{::sp.weekNrs.length}}" class="center dividerBorder">{{formState.grandTotalsSp[$index] | hoisNumber:1}}</td> </tr> </tbody> </table> </md-table-container> <br> <md-table-container ng-if="record.subjects.length > 0"> <table class="subject-study-period"> <!-- Header --> <thead> <tr> <th rowspan="2" class="dividerBorder"><span style="float: left">{{\'lessonplan.subjects\' | translate}}</span></th> <th colspan="{{formState.capacityTypes.length}}" ng-repeat="sp in formState.studyPeriods" class="dividerBorder">{{currentLanguageNameField(sp)}}</th> <th rowspan="2">{{\'lessonplan.total\' | translate}}</th> </tr> <tr> <td ng-if="formState.subjectCapacityTypes.length" ng-repeat="sct in formState.subjectCapacityTypes track by $index" class="center" ng-class="{dividerBorder: sct.endOfPeriod}">{{sct.value.toUpperCase()}}</td> <td ng-if="!formState.subjectCapacityTypes.length" ng-repeat="sp in formState.studyPeriods" class="center">-</td> </tr> </thead> <!-- Subjects --> <tbody ng-repeat="subject in record.subjects"> <tr> <td class="bold dividerBorder"> <span>{{currentLanguageNameField(subject)}}</span> </td> <td ng-repeat="sct in formState.subjectCapacityTypes track by $index" ng-class="{dividerBorder: sct.endOfPeriod}">{{(subject.hours[sct.studyPeriod] || {})[sct.code]}}</td> <td>{{sumSubjectHours(subject.hours)}}</td> </tr> <tr ng-repeat="studentGroup in subject.studentGroups"> <td class="dividerBorder"> <span>{{studentGroup.studentGroups.join(\', \')}}</span> <span ng-if="subject.groupProportion && subject.groupProportion !== \'PAEVIK_GRUPI_JAOTUS_1\'" style="float: right"> <span class="subject-study-period-proportion">{{\'subjectStudyPeriod.proportion\' | translate | lowercase}}: <hois-classifier-value ng-model="subject.groupProportion" main-classifier-code="PAEVIK_GRUPI_JAOTUS"></hois-classifier-value> </span> </span> </td> <td ng-repeat="sct in formState.subjectCapacityTypes track by $index" ng-class="{dividerBorder: sct.endOfPeriod}"> {{(studentGroup.hours[sct.studyPeriod] || {})[sct.code]}} </td> <td>{{sumSubjectHours(studentGroup.hours)}}</td> </tr> <!-- Total --> <tr> <td class="dividerBorder">{{\'lessonplan.total\' | translate}}</td> <td ng-repeat="sct in formState.subjectCapacityTypes track by $index" ng-class="{dividerBorder: sct.endOfPeriod}">{{(subject.capacityTotals[sct.studyPeriod] || {})[sct.code] || 0}}</td> <td>{{sumSubjectHours(subject.capacityTotals)}}</td> </tr> </tbody> <!-- Grand Total --> <tr class="bold" md-colors="{background: \'background-200\'}"> <td class="dividerBorder">{{\'lessonplan.grandTotal\' | translate | uppercase}}</td> <td ng-repeat="sct in formState.subjectCapacityTypes track by $index" ng-class="{dividerBorder: sct.endOfPeriod}">{{(record.subjectTotals[sct.studyPeriod] || {})[sct.code] || 0}}</td> <td>{{sumSubjectHours(record.subjectTotals)}}</td> </tr> </table> </md-table-container> </div> <div> <md-button ng-href="#/lessonplans/vocational/byteacher" class="md-raised">{{\'main.button.back\' | translate}}</md-button> <md-button ng-href="{{excel(formState.xlsUrl)}}" class="md-raised">{{\'main.button.print\' | translate}}</md-button> </div> <style>.subject-study-period td {\r\n   min-width: 0 !important;\r\n   padding: 5px !important;\r\n }\r\n .subject-study-period th {\r\n   padding: 3px !important;\r\n }</style>'),a.put("login/login.dialog.html",'<md-dialog style="width: 400px; height: 320px"> <md-toolbar> <div class="md-toolbar-tools" style="height: 40px"> <span flex></span> <md-button class="md-icon-button" ng-click="cancel()"> <span class="material-icons">close</span> </md-button> </div> </md-toolbar> <md-dialog-content> <md-tabs md-dynamic-height md-border-bottom> <md-tab label="{{ \'main.login.user.title\' | translate }}"> <md-content class="md-padding"> <form name="userLoginForm"> <md-input-container class="md-block"> <label flex>{{ \'main.login.user.school\' | translate }}</label> <md-select flex class="form-control" name="school" ng-model="credentials.school" required> <md-option ng-value="school.id" ng-repeat="school in schools">{{currentLanguageNameField(school)}}</md-option> </md-select> </md-input-container> <md-input-container class="md-block"> <label flex>{{ \'main.login.user.username\' | translate }}</label> <input type="text" flex class="form-control" name="username" ng-model="credentials.username" required> </md-input-container> <md-input-container class="md-block"> <label flex>{{ \'main.login.user.password\' | translate }}</label> <input type="password" flex class="form-control" name="password" ng-model="credentials.password" required> </md-input-container> <md-button class="md-raised md-primary" ng-click="login()">{{ \'main.logIn\' | translate }}</md-button> </form> </md-content> </md-tab> <md-tab label="{{ \'main.login.idcard.title\' | translate }}"> <md-content class="md-padding"> <md-button class="md-raised md-primary" ng-href="{{idCardLoginUrl}}">{{ \'main.logIn\' | translate }}</md-button> </md-content> </md-tab> <md-tab label="{{ \'main.login.mobileid.title\' | translate }}"> <md-content class="md-padding"> <form name="mobileIdLoginForm"> <md-input-container class="md-block"> <label flex>{{ \'main.login.mobileid.mobilenumber\' | translate }}</label> <input type="text" flex class="form-control" name="mobilenumber" ng-model="mobilenumber" required> </md-input-container> <md-button class="md-raised md-primary" ng-click="mIdLogin()">{{ \'main.logIn\' | translate }}</md-button> </form> </md-content> </md-tab> </md-tabs> </md-dialog-content> </md-dialog>'),a.put("login/m-id.login.dialog.html",'<md-dialog> <form> <md-dialog-content> <div class="md-dialog-content" layout="column" layout-align="center center"> <p>{{ \'main.login.mobileid.instructions\' | translate }}</p> <h1>{{challengeID}}</h1> </div> </md-dialog-content> </form> </md-dialog>'),a.put("login/message.login.dialog.html",'<md-dialog> <form> <md-dialog-content> <div class="md-dialog-content"> {{ message | translate }} </div> </md-dialog-content> </form> </md-dialog>'),a.put("login/session.timed.out.dialog.html",'<md-dialog aria-label="grade add dialog" flex="30" flex-xs="100"> <md-dialog-content> <div class="md-dialog-content"> <p translate="main.messages.sessionHasTimedOut"></p> </div> </md-dialog-content> <md-dialog-actions layout="row" layout-align="start center"> <md-button ng-click="ok()" class="md-raised">{{\'main.button.ok\' | translate}}</md-button> </md-dialog-actions> </md-dialog>'),a.put("login/session.timing.out.dialog.html",'<md-dialog aria-label="grade add dialog" flex="30" flex-xs="100"> <md-dialog-content> <div class="md-dialog-content"> <p translate="main.messages.sessionIsTimingOut"></p> </div> </md-dialog-content> <md-dialog-actions layout="row" layout-align="start center"> <md-button ng-click="refresh()" class="md-raised">{{\'main.button.refresh\' | translate}}</md-button> </md-dialog-actions> </md-dialog>'),a.put("logs/logentry.view.dialog.html",'<md-dialog aria-label="grade add dialog" flex="75" flex-xs="100"> <md-toolbar> <div class="md-toolbar-tools"> <h2 flex>{{messagePrefix + record.wsName | translate}}</h2> <span flex> <hois-value class="md-button md-raised" ng-if="logType === \'ekis\' && record.directive.id" value="record.directive.nameEt" href-value="\'#/directives/\' + record.directive.id + \'/view\'"></hois-value> </span> <md-button class="md-icon-button" ng-click="cancel()"> <md-icon md-font-set="material-icons">close</md-icon> </md-button> </div> </md-toolbar> <md-dialog-content> <div class="md-dialog-content"> <div layout="row"> <md-input-container> <label>{{\'logs.request\' | translate}}</label>&nbsp; <pre><hois-value value="record.request | limitTo:requestLength"></hois-value></pre> <a ng-click="showAll(true)" ng-if="requestLength">&hellip;</a> </md-input-container> </div> <hr> <div layout="row"> <md-input-container> <label>{{\'logs.response\' | translate}}</label>&nbsp; <pre><hois-value value="record.response | limitTo:responseLength"></hois-value></pre> <a ng-click="showAll(false)" ng-if="responseLength">&hellip;</a> </md-input-container> </div> </div> </md-dialog-content> <md-dialog-actions layout="row" layout-align="start center"> <md-button ng-click="cancel()" class="md-raised">{{\'main.button.back\' | translate}}</md-button> </md-dialog-actions> </md-dialog>'),a.put("logs/logs.view.html",'<div layout-padding> <div flex> <fieldset> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'main.searchlabel\' | translate}}</legend> <form ng-submit="loadData()" layout="column" name="logForm"> <div flex> <div layout="row"> <md-input-container flex="45" flex-md="100" flex-sm="100" flex-xs="100"> <label>{{\'logs.name\' | translate}}</label> <md-select ng-model="criteria.messageType"> <md-option md-option-empty></md-option> <md-option ng-repeat="val in messageTypes" ng-value="val"> {{messagePrefix + val | translate}} </md-option> </md-select> </md-input-container> <div flex="50" flex-offset="5"> <label class="common-label">{{\'logs.sentDatesRange\' | translate}}</label> <md-input-container flex="25" flex-md="100" flex-sm="100" flex-xs="100"> <label>{{\'main.from\' | translate}}</label> <md-datepicker ng-model="criteria.from" md-max-date="criteria.thru"></md-datepicker> </md-input-container> <md-input-container flex flex-offset="5"> <label>{{\'main.thru\' | translate}}</label> <md-datepicker ng-model="criteria.thru" md-min-date="criteria.from"></md-datepicker> </md-input-container> </div> </div> <div layout="row"> <md-input-container flex="45"> <md-checkbox ng-model="criteria.errors" aria-label="show only errors"> {{\'logs.onlyErrors\' | translate}} </md-checkbox> </md-input-container> </div> </div> <div layout="row"> <md-button type="submit" class="md-raised md-primary">{{\'main.button.search\' | translate}}</md-button> <md-button class="md-raised" ng-click="clearCriteria()">{{\'main.button.clear\' | translate}}</md-button> </div> </form> </fieldset> </div> </div> <div layout-padding> <div flex> <md-table-container> <table md-table md-progress="tabledata.$promise"> <thead md-head md-order="criteria.order" md-on-reorder="loadData"> <tr md-row> <th md-column>{{\'logs.name\' | translate}}</th> <th md-column md-order-by="inserted">{{\'logs.time\' | translate}}</th> <th md-column ng-if="logType === \'ekis\'">{{\'logs.directive\' | translate}}</th> <th md-column>{{\'logs.error\' | translate}}</th> <th md-column>{{\'logs.message\' | translate}}</th> <th md-column>{{\'logs.insertedBy\' | translate}}</th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="row in tabledata.content" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell> <a md-no-ink class="md-primary" ng-click="logentry(row)">{{::(messagePrefix + row.wsName) | translate}}</a> </td> <td md-cell>{{::row.inserted | hoisDateTime}}</td> <td md-cell ng-if="logType === \'ekis\'">{{currentLanguageNameField(row.directive)}}</td> <td md-cell>{{row.error ? \'main.yes\' : \'main.no\' | translate}}</td> <td md-cell>{{::row.logTxt}}</td> <td md-cell>{{::row.insertedBy}}</td> </tr> </tbody> </table> </md-table-container> <md-table-pagination md-limit="criteria.size" md-limit-options="[10, 20, 50]" md-page="criteria.page" md-total="{{tabledata.totalElements}}" md-on-paginate="loadData" md-label="{page: \'{{\'main.page\' | translate}}:\', rowsPerPage: \'{{\'main.rowPerPage\' | translate}}:\', of: \'{{\'main.of\' | translate}}\' }" md-page-select></md-table-pagination> </div> </div>'),a.put("message/message.new.html",'<div layout="column" layout-padding> <form name="messageNewForm"> <div layout="column"> <md-input-container flex="50" flex-sm="100" flex-xs="100"> <label class="textInput">{{\'message.subject\' | translate}}</label> <input ng-model="record.subject" type="text" md-maxlength="1000" required> </md-input-container> <md-input-container flex="50" flex-sm="100" flex-xs="100"> <label class="textInput">{{\'message.content\' | translate}}</label> <textarea ng-model="record.content" max-rows="20" md-maxlength="2000" required></textarea> </md-input-container> <md-input-container flex="50" flex-sm="100" flex-xs="100"> <label>{{\'message.targetGroup\' | translate}}</label> <hois-classifier-select ng-model="targetGroup" model-value-attr="code" main-classifier-code="ROLL" show-only-values="targetGroups" required ng-change="tarGetGroupChanged()"></hois-classifier-select> </md-input-container> <!--hois-autocomplete is not used as query needs additional parameters (school, role)--> <md-autocomplete ng-show="targetGroup" name="receiverInput" md-selected-item="receiver" md-search-text="queryText" md-items="item in querySearch(queryText)" md-item-text="item.fullname" md-min-length="3" md-floating-label="{{\'message.receiver\' | translate}}" ng-model="queryText" md-no-cache class="small-margin" md-selected-item-change="addReceiver(receiver)"> <md-item-template> <span md-highlight-text="queryText" md-highlight-flags="^i">{{item.fullname}}</span> </md-item-template> <md-not-found> {{\'main.messages.error.notFound\' | translate}} </md-not-found> </md-autocomplete> <!--  view for school admin   --> <div ng-show="targetGroup && targetGroup === \'ROLL_T\' && auth.isAdmin()" layout="column"> <md-input-container flex="50" flex-sm="100" flex-xs="100"> <label>{{\'message.curriculumStudents\' | translate}}</label> <hois-select multiple ng-model="curriculum" type="curriculum"></hois-select> </md-input-container> <md-input-container flex="50" flex-sm="100" flex-xs="100"> <label>{{\'message.studyGroupStudents\' | translate}}</label> <hois-select multiple ng-model="studentGroup" values="studentGroups"></hois-select> </md-input-container> <md-input-container flex="50" flex-sm="100" flex-xs="100"> <label>{{\'message.studyFormStudents\' | translate}}</label> <hois-classifier-select multiple ng-model="studyForm" model-value-attr="code" main-classifier-code="OPPEVORM"></hois-classifier-select> </md-input-container> </div> <!--  view for teacher   --> <md-input-container flex="50" flex-sm="100" flex-xs="100" ng-show="targetGroup && auth.isTeacher()"> <label>{{\'message.searchType\' | translate}}</label> <hois-select ng-model="groupSearchType" values="groupSearchTypes" value-property="code" show-property="name" ng-change="searchTypeChanged()"></hois-select> </md-input-container> <md-input-container flex="50" flex-sm="100" flex-xs="100" ng-show="targetGroup && targetGroup === \'ROLL_T\' && groupSearchType === \'SEARCH_JOURNAL\' && auth.isTeacher()"> <label>{{\'message.journalStudent\' | translate}}</label> <hois-select multiple ng-model="journalStudent" values="journals"></hois-select> </md-input-container> <md-input-container flex="50" flex-sm="100" flex-xs="100" ng-show="targetGroup && targetGroup === \'ROLL_L\' && groupSearchType === \'SEARCH_JOURNAL\' && auth.isTeacher()"> <label>{{\'message.journalStudentParent\' | translate}}</label> <hois-select multiple ng-model="journalStudentParent" values="journals"></hois-select> </md-input-container> <md-input-container flex="50" flex-sm="100" flex-xs="100" ng-show="targetGroup && targetGroup === \'ROLL_T\' && groupSearchType === \'SEARCH_SUBJECTS\' && auth.isTeacher()"> <label>{{\'message.subjectStudent\' | translate}}</label> <hois-select multiple ng-model="subjectStudent" values="subjects"></hois-select> </md-input-container> <md-input-container flex="50" flex-sm="100" flex-xs="100" ng-show="targetGroup && targetGroup === \'ROLL_L\' && groupSearchType === \'SEARCH_SUBJECTS\' && auth.isTeacher()"> <label>{{\'message.subjectStudentParent\' | translate}}</label> <hois-select multiple ng-model="subjectStudentParent" values="subjects"></hois-select> </md-input-container> <md-input-container flex="50" flex-sm="100" flex-xs="100" ng-show="targetGroup && targetGroup === \'ROLL_T\' && groupSearchType === \'SEARCH_STUDENT_GROUP\' && auth.isTeacher()"> <label>{{\'message.studyGroupStudents\' | translate}}</label> <hois-select multiple ng-model="studentGroup" values="studentGroups"></hois-select> </md-input-container> <md-input-container flex="50" flex-sm="100" flex-xs="100" ng-show="targetGroup && targetGroup === \'ROLL_L\' && groupSearchType === \'SEARCH_STUDENT_GROUP\' && auth.isTeacher()"> <label>{{\'message.studyGroupStudentsParents\' | translate}}</label> <hois-select multiple ng-model="studyGroupStudentsParents" values="studentGroups"></hois-select> </md-input-container> <h2 ng-class="{invalid: messageNewForm.$submitted && receivers.length === 0}">{{\'message.messageReceiver\' | translate}} *</h2> <table md-table class="secondary-table"> <thead md-head> <tr md-row> <th md-column>{{\'message.receiver\' | translate}}</th> <th md-column ng-if="auth.isAdmin()">{{\'student.idcode\' | translate}}</th> <th md-column ng-if="auth.isAdmin() || auth.isTeacher()">{{\'message.targetGroup\' | translate}}</th> <th md-column ng-if="auth.isTeacher() && groupSearchType === \'SEARCH_STUDENT_GROUP\'">{{\'message.curriculum\' | translate}}</th> <th md-column ng-if="auth.isTeacher() && groupSearchType === \'SEARCH_STUDENT_GROUP\'">{{\'message.studentGroup\' | translate}}</th> <th md-column ng-if="auth.isTeacher() && groupSearchType === \'SEARCH_JOURNAL\'">{{\'message.journalLabel\' | translate}}</th> <th md-column ng-if="auth.isTeacher() && groupSearchType === \'SEARCH_SUBJECTS\'">{{\'message.subjectLabel\' | translate}}</th> <th md-column></th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="receiver in receivers" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell>{{receiver.fullname}}</td> <td md-cell ng-if="auth.isAdmin()"> <span ng-if="receiver.role.length === 1 && receiver.role[0] === \'ROLL_T\'">{{receiver.idcode}}</span> </td> <td md-cell ng-if="auth.isAdmin() || auth.isTeacher()"> <p ng-repeat="role in receiver.role"> <hois-classifier-value ng-model="role" main-classifier-code="ROLL"></hois-classifier-value> </p> </td> <td md-cell ng-if="auth.isTeacher() && groupSearchType === \'SEARCH_STUDENT_GROUP\'"> <span>{{currentLanguageNameField(receiver.curriculum)}}</span> </td> <td md-cell ng-if="auth.isTeacher() && groupSearchType === \'SEARCH_STUDENT_GROUP\'"> <span>{{currentLanguageNameField(receiver.studentGroup)}}</span> </td> <td md-cell ng-if="auth.isTeacher() && groupSearchType === \'SEARCH_JOURNAL\'"> <span>{{currentLanguageNameField(receiver.journal)}}</span> </td> <td md-cell ng-if="auth.isTeacher() && groupSearchType === \'SEARCH_SUBJECTS\'"> <span>{{currentLanguageNameField(receiver.subject)}}</span> </td> <td md-cell> <md-button ng-if="receiver.addedWithAutocomplete" ng-click="removeReceiver(receiver)" class="remove nomargin">&times;</md-button> </td> </tr> </tbody> </table> </div> <div layout="row"> <md-button class="md-raised md-primary" ng-click="send()">{{\'main.button.send\' | translate}}</md-button> <md-button class="md-raised" ng-click="back(\'#/messages/sent\', messageNewForm, \'message.confirmClose\')">{{\'main.button.back\' | translate}}</md-button> </div> </form> </div>'),
a.put("message/message.received.html",'<div id="scrolling_div" style="overflow: auto"> <md-nav-bar md-selected-nav-item="currentNavItem"> <md-nav-item md-nav-href="#/messages/received?_menu" name="message.received">{{\'message.received\' | translate}}</md-nav-item> <md-nav-item md-nav-href="#/messages/sent?_menu" name="message.sent">{{\'message.sent\' | translate}}</md-nav-item> <md-nav-item md-nav-href="#/messages/automatic/sent?_menu" name="message.automaticSent" ng-if="auth.isAdmin()">{{\'message.automaticSent\' | translate}}</md-nav-item> </md-nav-bar> </div> <div class="ois-form-layout-padding ois-form-layout" ng-cloak> <form name="searchForm" ng-submit="searchForm.$valid && loadData()" layout="column" novalidate> <div layout="row"> <md-input-container flex="50" flex-sm="100" flex-xs="100"> <label class="textInput">{{\'message.subject\' | translate}}</label> <input ng-model="criteria.subject" type="text" md-maxlength="255"> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="20" flex-sm="100" flex-xs="100"> <label>{{\'message.sentDatesRange\' | translate}}</label> <input style="visibility: hidden"> </md-input-container> <div flex="33"> <md-input-container flex> <label>{{\'main.from\' | translate}}</label> <md-datepicker ng-model="criteria.sentFrom" md-max-date="criteria.sentThru"></md-datepicker> </md-input-container> <md-input-container flex> <label>{{\'main.thru\' | translate}}</label> <md-datepicker ng-model="criteria.sentThru" md-min-date="criteria.sentFrom"></md-datepicker> </md-input-container> </div> </div> <div layout="row"> <md-input-container flex="50" flex-sm="100" flex-xs="100"> <label class="textInput">{{\'message.sender\' | translate}}</label> <input ng-model="criteria.sender" type="text" md-maxlength="255"> </md-input-container> </div> <div layout="row" layout-xs="column"> <md-button type="submit" class="md-raised md-primary">{{\'main.button.search\' | translate}}</md-button> <md-button class="md-raised" ng-click="clearCriteria()">{{\'main.button.clear\' | translate}}</md-button> <md-button class="md-raised" ng-if="formState.canSend" ng-href="/#/message/new">{{\'message.send\' | translate}}</md-button> </div> </form> </div> <div layout-padding> <div flex> <md-table-container> <table md-table md-progress="tabledata.$promise"> <thead md-head md-order="criteria.order" md-on-reorder="loadData"> <tr md-row> <th md-column md-order-by="subject">{{\'message.subject\' | translate}}</th> <th md-column md-order-by="inserted">{{\'message.dateSent\' | translate}}</th> <th md-column md-order-by="p.lastname,p.firstname">{{\'message.sender\' | translate}}</th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="row in tabledata.content" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell><a href="#/message/{{row.id}}/view?backUrl=received" ng-class="{bold: !row.isRead}">{{::row.subject}}</a></td> <td md-cell>{{row.dateSent | hoisDateTime}}</td> <td md-cell>{{::row.sender}}</td> </tr> </tbody> </table> </md-table-container> <md-table-pagination md-limit="criteria.size" md-limit-options="[10, 20, 50]" md-page="criteria.page" md-total="{{tabledata.totalElements}}" md-on-paginate="loadData" md-label="{page: \'{{\'main.page\' | translate}}:\', rowsPerPage: \'{{\'main.rowPerPage\' | translate}}:\', of: \'{{\'main.of\' | translate}}\'}" md-page-select></md-table-pagination> </div> </div>'),a.put("message/message.respond.html",'<div class="ois-form-layout-padding ois-form-layout" ng-cloak> <form layout="column" name="messageRespondForm" novalidate> <div layout="row"> <md-input-container flex="50" flex-sm="100" flex-xs="100"> <label class="textInput">{{\'message.subject\' | translate}}</label> <input ng-model="record.subject" type="text" md-maxlength="1000" required> </md-input-container> </div> <div layout="row"> <md-input-container flex="50" flex-sm="100" flex-xs="100"> <label class="textInput">{{\'message.content\' | translate}}</label> <textarea ng-model="record.content" max-rows="20" md-maxlength="2000" required id="content"></textarea> </md-input-container> </div> <div layout="row"> <md-button class="md-raised md-primary" ng-click="send()">{{\'main.button.send\' | translate}}</md-button> <md-button class="md-raised" ng-href="{{::formState.backUrl}}">{{\'main.button.back\' | translate}}</md-button> </div> </form> </div>'),a.put("message/message.sent.html",'<div id="scrolling_div" style="overflow: auto"> <md-nav-bar md-selected-nav-item="currentNavItem"> <md-nav-item md-nav-href="#/messages/received?_menu" name="message.received">{{\'message.received\' | translate}}</md-nav-item> <md-nav-item md-nav-href="#/messages/sent?_menu" name="message.sent">{{\'message.sent\' | translate}}</md-nav-item> <md-nav-item md-nav-href="#/messages/automatic/sent?_menu" name="message.automaticSent" ng-if="auth.isAdmin()">{{\'message.automaticSent\' | translate}}</md-nav-item> </md-nav-bar> </div> <div class="ois-form-layout-padding ois-form-layout" ng-cloak> <form name="searchForm" ng-submit="searchForm.$valid && loadData()" layout="column" novalidate> <div layout="row"> <md-input-container flex="50" flex-sm="100" flex-xs="100"> <label class="textInput">{{\'message.subject\' | translate}}</label> <input ng-model="criteria.subject" type="text" md-maxlength="255"> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="20" flex-sm="100" flex-xs="100"> <label>{{\'message.sentDatesRange\' | translate}}</label> <input style="visibility: hidden"> </md-input-container> <div flex="33"> <md-input-container flex> <label>{{\'main.from\' | translate}}</label> <md-datepicker ng-model="criteria.sentFrom" md-max-date="criteria.sentThru"></md-datepicker> </md-input-container> <md-input-container flex> <label>{{\'main.thru\' | translate}}</label> <md-datepicker ng-model="criteria.sentThru" md-min-date="criteria.sentFrom"></md-datepicker> </md-input-container> </div> </div> <div layout="row" layout-xs="column"> <md-button type="submit" class="md-raised md-primary">{{\'main.button.search\' | translate}}</md-button> <md-button class="md-raised" ng-click="clearCriteria()">{{\'main.button.clear\' | translate}}</md-button> <md-button class="md-raised" ng-if="formState.canSend" ng-href="/#/message/new">{{\'message.send\' | translate}}</md-button> </div> </form> </div> <div layout-padding> <div flex> <md-table-container> <table md-table md-progress="tabledata.$promise"> <thead md-head md-order="criteria.order" md-on-reorder="loadData"> <tr md-row> <th md-column md-order-by="subject">{{\'message.subject\' | translate}}</th> <th md-column md-order-by="inserted">{{\'message.dateSent\' | translate}}</th> <th md-column>{{\'message.receiver\' | translate}}</th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="row in tabledata.content" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell><a href="#/message/{{row.id}}/view">{{::row.subject}}</a></td> <td md-cell>{{row.dateSent | hoisDateTime}}</td> <td md-cell ng-click="row.clicked = !row.clicked"> <span ng-if="!row.clicked">{{showReceivers(row, false)}}</span> <span ng-if="row.clicked">{{showReceivers(row, true)}}</span> </td> </tr> </tbody> </table> </md-table-container> <md-table-pagination md-limit="criteria.size" md-limit-options="[10, 20, 50]" md-page="criteria.page" md-total="{{tabledata.totalElements}}" md-on-paginate="loadData" md-label="{page: \'{{\'main.page\' | translate}}:\', rowsPerPage: \'{{\'main.rowPerPage\' | translate}}:\', of: \'{{\'main.of\' | translate}}\'}" md-page-select></md-table-pagination> </div> </div>'),a.put("message/message.view.html",'<div layout-padding ng-cloak class="form-readonly"> <form layout="column" novalidate> <div layout="row"> <md-input-container flex> <label class="textInput">{{\'message.subject\' | translate}}</label> <hois-value value="record.subject"> </md-input-container> </div> <div layout="row"> <md-input-container flex> <label class="textInput">{{\'message.content\' | translate}}</label> <hois-value value="record.content"> </md-input-container> </div> <div layout="row" ng-show="!isSent"> <md-input-container flex> <label class="textInput">{{\'message.sender\' | translate}}</label> <hois-value value="record.sendersName"> </md-input-container> </div> <div layout="row" ng-show="isSent"> <md-input-container flex> <label class="textInput">{{\'message.receiver\' | translate}}</label> <hois-value value="record.receivers"> </md-input-container> </div> <div layout="row"> <md-input-container flex> <label>{{\'message.dateSent\' | translate}}</label> <hois-value value="record.inserted | hoisDate"> </md-input-container> </div> <div layout="row"> <md-button class="md-raised md-primary" ng-if="!isSent && record.sendersId !== -1" ng-href="/#/message/{{record.id}}/respond">{{\'message.respond\' | translate}}</md-button> <md-button class="md-raised" ng-click="back(\'#/messages/sent\')">{{\'main.button.back\' | translate}}</md-button> </div> </form> </div>'),a.put("messageTemplate/message.template.edit.html",'<div layout="column" layout-padding> <form name="messageTemplateForm"> <div layout="column"> <md-input-container ng-if="isValid"> <label>{{\'messageTemplate.type\' | translate}}</label> <hois-classifier-select ng-if="isValid" ng-model="record.type" model-value-attr="code" main-classifier-code="TEATE_LIIK" required filter-values="allowedTypes" ng-disabled="readOnly"></hois-classifier-select> </md-input-container> <md-input-container ng-if="!isValid"> <label>{{\'messageTemplate.type\' | translate}}</label> <hois-classifier-select ng-if="!isValid" ng-model="record.type" model-value-attr="code" main-classifier-code="TEATE_LIIK" required ng-disabled="readOnly"></hois-classifier-select> </md-input-container> <md-input-container> <label>{{\'generalmessage.title\' | translate}}</label> <textarea ng-model="record.headline" required md-maxlength="1000" max-rows="2" ng-readonly="readOnly"></textarea> </md-input-container> <md-input-container> <label>{{\'generalmessage.content\' | translate}}</label> <textarea ng-model="record.content" required md-maxlength="2000" max-rows="2" ng-readonly="readOnly"></textarea> </md-input-container> <div layout="row"> <md-input-container> <label>{{\'messageTemplate.validFrom\' | translate}}</label> <md-datepicker ng-model="record.validFrom" ng-change="getIsValid()" ng-disabled="readOnly"></md-datepicker> </md-input-container> <md-input-container flex-offset="5"> <label>{{\'messageTemplate.validThru\' | translate}}</label> <md-datepicker ng-model="record.validThru" md-min-date="record.validFrom" ng-change="getIsValid()" ng-disabled="readOnly"></md-datepicker> </md-input-container> </div> </div> <div layout="row"> <md-button class="md-raised md-primary" ng-href="#/messageTemplate/{{::record.id}}/edit" ng-if="readOnly && isAuthorized(\'ROLE_OIGUS_M_TEEMAOIGUS_AUTOTEADE\')">{{\'main.button.change\' | translate}}</md-button> <md-button class="md-raised md-primary" ng-click="save()" ng-if="!readOnly">{{\'main.button.save\' | translate}}</md-button> <md-button class="md-raised md-default" ng-click="delete()" ng-if="record.id && !readOnly">{{\'main.button.delete\' | translate}}</md-button> <md-button class="md-raised md-default" ng-if="!readOnly" ng-click="back(\'#/messageTemplate\', messageTemplateForm)">{{\'main.button.back\' | translate}}</md-button> <md-button class="md-raised md-default" ng-if="readOnly" ng-click="back(\'#/messageTemplate\')">{{\'main.button.back\' | translate}}</md-button> </div> </form> </div>'),a.put("messageTemplate/message.template.search.html",'<div class="ois-form-layout-padding ois-form-layout" ng-cloak> <fieldset> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'main.searchlabel\' | translate}}</legend> <form name="searchForm" ng-submit="searchForm.$valid && loadData()" layout="column" novalidate> <md-input-container> <label>{{\'messageTemplate.type\' | translate}}</label> <hois-classifier-select ng-model="criteria.type" model-value-attr="code" main-classifier-code="TEATE_LIIK" multiple></hois-classifier-select> </md-input-container> <md-input-container> <label class="textInput">{{\'generalmessage.title\' | translate}}</label> <input ng-model="criteria.headline" type="text" md-maxlength="255"> </md-input-container> <div layout="row" layout-sm="column" layout-xs="column"> <div flex="1//"> <md-input-container flex> <label>{{\'messageTemplate.validFrom\' | translate}}</label> <md-datepicker ng-model="criteria.validFrom" md-max-date="criteria.validThru"></md-datepicker> </md-input-container> <md-input-container flex flex-offset="5"> <label>{{\'messageTemplate.validThru\' | translate}}</label> <md-datepicker ng-model="criteria.validThru" md-min-date="criteria.validFrom"></md-datepicker> </md-input-container> </div> </div> <md-checkbox ng-model="criteria.valid" aria-label="{{\'main.valid\' | translate}}"> {{\'main.valid\' | translate}} </md-checkbox> <div layout="row"> <md-button type="submit" class="md-raised md-primary">{{\'main.button.search\' | translate}}</md-button> <md-button class="md-raised" ng-click="clearCriteria()">{{\'main.button.clear\' | translate}}</md-button> <md-button class="md-raised" ng-if="isAuthorized(\'ROLE_OIGUS_M_TEEMAOIGUS_AUTOTEADE\')" ng-href="#/messageTemplate/new">{{\'main.button.create\' | translate}}</md-button> </div> </form> </fieldset> </div> <div layout-padding> <div flex> <md-table-container> <table md-table md-progress="tabledata.$promise"> <thead md-head md-order="criteria.order" md-on-reorder="loadData"> <tr md-row> <th md-column md-order-by="type.{{currentLanguageNameField()}}">{{\'messageTemplate.type\' | translate}}</th> <th md-column md-order-by="headline">{{\'generalmessage.title\' | translate}}</th> <th md-column md-order-by="validFrom">{{\'messageTemplate.validFrom\' | translate}}</th> <th md-column md-order-by="validThru">{{\'messageTemplate.validThru\' | translate}}</th> <th md-column>{{\'main.status\' | translate}}</th> <th md-column></th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="row in tabledata.content" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell><a ng-href="#/messageTemplate/{{::row.id}}/view">{{currentLanguageNameField(row.type)}}</a></td> <td md-cell>{{::row.headline}}</td> <td md-cell>{{::row.validFrom | hoisDate}}</td> <td md-cell>{{::row.validThru | hoisDate}}</td> <td md-cell>{{row._isValid ? \'main.valid\' : \'main.invalid\' | translate}}</td> <td md-cell> <md-button md-no-ink class="md-primary change-button" ng-if="isAuthorized(\'ROLE_OIGUS_M_TEEMAOIGUS_AUTOTEADE\')" ng-href="#/messageTemplate/{{::row.id}}/edit">{{\'main.button.change\' | translate}}</md-button> </td> </tr> </tbody> </table> </md-table-container> <md-table-pagination md-limit="criteria.size" md-limit-options="[10, 20, 50]" md-page="criteria.page" md-total="{{tabledata.totalElements}}" md-on-paginate="loadData" md-label="{page: \'{{\'main.page\' | translate}}:\', rowsPerPage: \'{{\'main.rowPerPage\' | translate}}:\', of: \'{{\'main.of\' | translate}}\'}" md-page-select></md-table-pagination> </div> </div>'),a.put("midtermTask/midtermTask.copy.dialog.html",'<md-dialog aria-label="{{\'midtermTask.copy\' | translate}}" flex="50" flex-sm="70" flex-xs="100"> <form name="dialogForm" ng-cloak> <md-toolbar> <div class="md-toolbar-tools"> <h2>{{\'midtermTask.copy\' | translate}}</h2> <span flex></span> <md-button class="md-icon-button" ng-click="cancel()"> <md-icon md-font-set="material-icons">close</md-icon> </md-button> </div> </md-toolbar> <md-dialog-content> <span flex></span> <div class="ois-form-layout" layout="column" layout-margin ng-cloak> <div layout="column"> <!-- hois-value and disabled attribute have weird behaviour in IE browser --> <md-input-container ng-show="formState.auth.isTeacher()"> <label>{{formState.auth.higher ? (\'midtermTask.teacherHigher\' | translate) : (\'midtermTask.teacherVocational\' | translate)}}</label> <input type="text" ng-model="formState.auth.fullname" readonly> </md-input-container> <md-input-container> <label>{{\'midtermTask.studyPeriod\' | translate}}</label> <hois-select ng-model="criteria.studyPeriod" values="studyPeriods"></hois-select> </md-input-container> <hois-autocomplete ng-model="criteria.teacherObject" method="teachers" name="teacher" label="{{formState.auth.higher ? \'midtermTask.teacherHigher\' : \'midtermTask.teacherVocational\'}}" ng-show="formState.auth.isAdmin()"></hois-autocomplete> <hois-autocomplete ng-model="criteria.subjectObject" method="subjects" name="subject" label="midtermTask.subject"></hois-autocomplete> </div> </div> <div layout="row"> <md-button type="submit" ng-click="loadData()" class="md-raised md-primary">{{\'main.button.search\' | translate}}</md-button> <md-button class="md-raised" ng-click="clearCriteria()">{{\'main.button.clear\' | translate}}</md-button> </div> <md-table-container flex> <table md-table md-row-select="true" md-progress="tabledata.$promise" ng-model="subjectStudyPeriodSelected"> <thead md-head md-order="criteria.order" md-on-reorder="loadData"> <tr md-row> <th md-column md-order-by="subject.{{currentLanguageNameField()}}">{{\'midtermTask.subject\' | translate}}</th> <th md-column ng-show="formState.auth.isAdmin()"> {{formState.auth.higher ? (\'midtermTask.teacherHigher\' | translate) : (\'midtermTask.teacherVocational\' | translate)}} </th> <th md-column>{{\'midtermTask.midtermTasks\' | translate}}</th> </tr> </thead> <tbody md-body> <tr md-row md-select="row" md-select-id="row.id" ng-repeat="row in tabledata.content" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell>{{currentLanguageNameField(row.subject)}}</td> <td md-cell ng-show="formState.auth.isAdmin()"> <table> <tr ng-repeat="teacher in row.teachers | orderBy"> <td>{{teacher}}</td> </tr> </table> </td> <td md-cell> <table> <tr ng-repeat="midtermTask in row.midtermTasks | orderBy: currentLanguageNameField()"> <td>{{currentLanguageNameField(midtermTask)}}</td> </tr> </table> </td> </tr> </tbody> </table> </md-table-container> <md-table-pagination md-limit="criteria.size" md-limit-options="[10, 20, 50]" md-page="criteria.page" md-total="{{tabledata.totalElements}}" md-on-paginate="loadData" md-label="{page: \'{{\'main.page\' | translate}}:\', rowsPerPage: \'{{\'main.rowPerPage\' | translate}}:\', of: \'{{\'main.of\' | translate}}\' }" md-page-select></md-table-pagination> </md-dialog-content> <md-dialog-actions layout="row" layout-align="start center"> <md-button class="md-raised md-primary" ng-click="submit()" ng-disabled="subjectStudyPeriodSelected.length !== 1">{{"main.button.add" | translate}}</md-button> <md-button class="md-raised" ng-click="cancel()">{{"main.button.close" | translate}}</md-button> </md-dialog-actions> </form> </md-dialog>'),a.put("midtermTask/midtermTask.html",'<div class="ois-form-layout-padding ois-form-layout" ng-cloak> <form name="midtermTaskForm" layout="column" class="nomargin"> <md-table-container> <table md-table> <thead md-head> <tr md-row ng-if="!record.canBeEdited"> <th md-column>{{\'midtermTask.nr\' | translate}}</th> <th md-column ng-click="sortBy(\'nameEt\')"> {{\'midtermTask.nameEt\' | translate}} * <span class="sortorder" ng-show="propertyName === \'nameEt\'" ng-class="{reverse: reverse}"></span> </th> <th md-column ng-click="sortBy(\'nameEn\')"> {{\'midtermTask.nameEn\' | translate}} <span class="sortorder" ng-show="propertyName === \'nameEn\'" ng-class="{reverse: reverse}"></span> </th> <th md-column ng-click="sortBy(\'descriptionEt\')"> {{\'midtermTask.descriptionEt\' | translate}} * <span class="sortorder" ng-show="propertyName === \'descriptionEt\'" ng-class="{reverse: reverse}"></span> </th> <th md-column ng-click="sortBy(\'descriptionEn\')"> {{\'midtermTask.descriptionEn\' | translate}} <span class="sortorder" ng-show="propertyName === \'descriptionEn\'" ng-class="{reverse: reverse}"></span> </th> <th md-column ng-click="sortBy(\'maxPoints\')"> {{\'midtermTask.maxPoints\' | translate}} * <span class="sortorder" ng-show="propertyName === \'maxPoints\'" ng-class="{reverse: reverse}"></span> </th> <th md-column ng-click="sortBy(\'percentage\')"> {{\'midtermTask.percentage\' | translate}} * <span class="sortorder" ng-show="propertyName === \'percentage\'" ng-class="{reverse: reverse}"></span> </th> <th md-column ng-click="sortBy(\'taskDate\')"> {{\'midtermTask.taskDate\' | translate}} <span class="sortorder" ng-show="propertyName === \'taskDate\'" ng-class="{reverse: reverse}"></span> </th> <th md-column ng-click="sortBy(\'threshold\')"> {{\'midtermTask.threshold\' | translate}} <span class="sortorder" ng-show="propertyName === \'threshold\'" ng-class="{reverse: reverse}"></span> </th> <th md-column ng-click="sortBy(\'thresholdPercentage\')"> {{\'midtermTask.thresholdPercentage\' | translate}} <span class="sortorder" ng-show="propertyName === \'thresholdPercentage\'" ng-class="{reverse: reverse}"></span> </th> <th md-column></th> </tr> <tr md-row ng-if="record.canBeEdited"> <th md-column>{{\'midtermTask.nr\' | translate}}</th> <th md-column>{{\'midtermTask.nameEt\' | translate}} *</th> <th md-column>{{\'midtermTask.nameEn\' | translate}}</th> <th md-column>{{\'midtermTask.descriptionEt\' | translate}} *</th> <th md-column>{{\'midtermTask.descriptionEn\' | translate}}</th> <th md-column>{{\'midtermTask.maxPoints\' | translate}} *</th> <th md-column>{{\'midtermTask.percentage\' | translate}} *</th> <th md-column>{{\'midtermTask.taskDate\' | translate}}</th> <th md-column>{{\'midtermTask.threshold\' | translate}}</th> <th md-column>{{\'midtermTask.thresholdPercentage\' | translate}}</th> <th md-column></th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="row in record.midtermTasks" ng-class-odd="\'odd\'" ng-class-even="\'even\'" ng-if="record.canBeEdited"> <ng-form name="midtermTaskUnitForm"> <td md-cell> {{$index + 1}} <span ng-if="row.moodleGradeItemId"><md-icon md-font-set="material-icons">school</md-icon></span> </td> <td md-cell> <md-input-container> <input ng-model="row.nameEt" type="text" md-maxlength="255" required aria-label="{{\'midtermTask.nameEt\' | translate}}"> </md-input-container> </td> <td md-cell> <md-input-container> <input ng-model="row.nameEn" type="text" md-maxlength="255" aria-label="{{\'midtermTask.nameEn\' | translate}}"> </md-input-container> </td> <td md-cell> <md-input-container> <input ng-model="row.descriptionEt" type="text" md-maxlength="4000" aria-label="{{\'midtermTask.descriptionEt\' | translate}}" required> </md-input-container> </td> <td md-cell> <md-input-container> <input ng-model="row.descriptionEn" type="text" md-maxlength="4000" aria-label="{{\'midtermTask.descriptionEn\' | translate}}"> </md-input-container> </td> <td md-cell> <md-input-container> <input ng-model="row.maxPoints" type="number" min="0" max="999" required aria-label="{{\'midtermTask.maxPoints\' | translate}}" pattern="^\\d+(\\.\\d{1})?$" ng-disabled="row.moodleGradeItemId"> </md-input-container> </td> <td md-cell> <md-input-container> <input ng-model="row.percentage" type="number" min="0" max="100" required aria-label="{{\'midtermTask.percentage\' | translate}}" pattern="^\\d+$"> </md-input-container> </td> <td md-cell> <md-input-container> <md-datepicker ng-model="row.taskDate" md-open-on-focus aria-label="{{currentLanguageNameField(row)}} {{\'midtermTask.taskDate\' | translate}}"></md-datepicker> </md-input-container> </td> <td md-cell> <md-checkbox ng-model="row.threshold" ng-change="clearThresholdPercentage(row)" aria-label="{{currentLanguageNameField(row)}} {{\'midtermTask.threshold\' | translate}}" ng-disabled="row.moodleGradeItemId"> </md-checkbox> </td> <td md-cell> <md-input-container> <input ng-model="row.thresholdPercentage" type="number" min="0" max="100" ng-disabled="!row.threshold || row.moodleGradeItemId" ng-required="row.threshold" aria-label="{{\'midtermTask.thresholdPercentage\' | translate}}" pattern="^\\d+$"> </md-input-container> </td> <td md-cell><a class="remove nomargin" ng-click="removeRow(row)">&times;</a></td> </ng-form> </tr> <tr md-row ng-repeat="row in record.midtermTasks | orderBy:propertyName:reverse" ng-class-odd="\'odd\'" ng-class-even="\'even\'" ng-if="!record.canBeEdited"> <ng-form name="midtermTaskUnitForm"> <td md-cell>{{$index + 1}}</td> <td md-cell>{{row.nameEt}}</td> <td md-cell>{{row.nameEn}}</td> <td md-cell>{{row.descriptionEt}}</td> <td md-cell>{{row.descriptionEn}}</td> <td md-cell>{{row.maxPoints}}</td> <td md-cell>{{row.percentage}}</td> <td md-cell>{{row.taskDate | hoisDate}}</td> <td md-cell> <md-checkbox ng-model="row.threshold" aria-label="{{currentLanguageNameField(row)}} {{\'midtermTask.threshold\' | translate}}" disabled> </md-checkbox> </td> <td md-cell>{{row.thresholdPercentage}}</td> <td md-cell></td> </ng-form> </tr> <!-- colspan is not used because of the line under previous row on readOnly form --> <tr md-row> <td md-cell></td> <td md-cell></td> <td md-cell></td> <td md-cell></td> <td md-cell></td> <td md-cell></td> <td md-cell>{{\'midtermTask.percentageSum\' | translate}}: {{getPercentageSum()}}</td> <td md-cell></td> <td md-cell></td> <td md-cell></td> <td md-cell></td> </tr> </tbody> </table> </md-table-container> <div layout="row"> <md-button class="md-primary" ng-click="addRow()" ng-show="record.canBeEdited">{{\'main.button.addNewRow\' | translate}}</md-button> </div> <div layout="row"> <md-button class="md-raised md-primary" ng-click="save()" ng-show="record.canBeEdited">{{\'main.button.save\' | translate}}</md-button> <md-button class="md-raised" ng-click="openCopyDialog()" ng-show="record.canBeEdited">{{\'midtermTask.copy\' | translate}}</md-button> <md-button class="md-raised" ng-click="back(\'#/subjectStudyPeriods/\' + subjectStudyPeriodId + \'/midtermTasks/studentResults\', midtermTaskForm)">{{\'main.button.back\' | translate}}</md-button> </div> </form> </div> <style>.sortorder:after {\r\n    content: \'\\25b2\';\r\n  }\r\n  .sortorder.reverse:after {\r\n    content: \'\\25bc\';\r\n  }</style>'),a.put("midtermTask/midtermTask.studentResults.html",'<div class="ois-form-layout-padding form-readonly" ng-cloak> <form name="midtermTaskResultForm"> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="20" flex-sm="100" flex-xs="100"> <label class="textInput">{{\'midtermTask.subject\' | translate}}</label> <hois-value value="record.subjectStudyPeriod.subject.nameEt"></hois-value> </md-input-container> <md-input-container flex="20" flex-sm="100" flex-xs="100" flex-offset-xs="0" flex-offset-sm="0" flex-offset="5"> <label class="textInput">{{auth.higher ? (\'midtermTask.teacherHigher\' | translate) : (\'midtermTask.teacherVocational\' | translate)}}</label> <hois-value value="record.subjectStudyPeriod.teachers.join(\', \')"></hois-value> </md-input-container> <md-input-container flex="20" flex-sm="100" flex-xs="100" flex-offset-xs="0" flex-offset-sm="0" flex-offset="5"> <label class="textInput">{{\'midtermTask.studyPeriod\' | translate}}</label> <hois-value value="currentLanguageNameField(record.subjectStudyPeriod.studyPeriod)"></hois-value> </md-input-container> <md-input-container flex="20" flex-sm="100" flex-xs="100" flex-offset-xs="0" flex-offset-sm="0" flex-offset="5"> <label class="textInput">{{\'midtermTask.assessment\' | translate}}</label> <hois-value value="currentLanguageNameField(record.assessment)"></hois-value> </md-input-container> </div> <md-table-container> <table md-table> <thead md-head> <tr md-row> <th md-column>{{\'midtermTask.student\' | translate}}</th> <th md-column ng-repeat="midtermTask in record.midtermTasks"> {{getMidtermTaskHeader(midtermTask)}} <span ng-if="midtermTask.moodleGradeItemId"><md-icon md-font-set="material-icons">school</md-icon></span> </th> <th md-column>{{\'midtermTask.finalGrade\' | translate}}</th> <th md-column>{{\'midtermTask.protocols\' | translate}}</th> <th md-column class="one-row">{{\'midtermTask.notes\' | translate}}</th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="student in record.students | orderBy: \'name\'" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <ng-form name="midtermTaskUnitForm"> <td md-cell> {{student.name}} <span ng-if="student.isMoodleRegistered"><md-icon md-font-set="material-icons">school</md-icon></span> </td> <td md-cell ng-repeat="result in record.studentResults | filter: filterStudentResults(student)"> <md-input-container ng-if="result.isText"> <input ng-model="result.pointsTxt" type="text" md-maxlength="10" aria-label="{{\'midtermTask.pointsTxt\' | translate}}" ng-disabled="!student.studentResultCanBeChanged || moodleTasks[result.midtermTask]"> </md-input-container> <md-input-container ng-if="!result.isText"> <input ng-model="result.points" type="number" min="0" max="{{result.maxPoints}}" pattern="^\\d+(\\.\\d{1,2})?$" aria-label="{{\'midtermTask.points\' | translate}}" ng-disabled="!student.studentResultCanBeChanged || moodleTasks[result.midtermTask]"> </md-input-container> </td> <td md-cell> <table> <tr ng-repeat="protocol in record.protocols | orderBy: \'protocolNr\' | filter: filterProtocols(student)"> <td> <table> <tr ng-repeat="protocolStudent in protocol.protocolStudents | filter: filterStudentProtocols(student)"> <td>{{protocolStudent.gradeValue}}</td> </tr> </table> </td> </tr> </table> </td> <td md-cell colspan="2"> <table> <tr ng-repeat="protocol in record.protocols | orderBy: \'protocolNr\' | filter: filterProtocols(student)"> <td class="protocol"> <a ng-href="#/higherProtocols/{{::protocol.id}}/view"> <span>{{protocol.protocolNr}}</span> <hois-classifier-value class="inline" ng-model="protocol.protocolType" main-classifier-code="PROTOKOLLI_LIIK"> </hois-classifier-value> </a> </td> <td> <table> <tr ng-repeat="protocolStudent in protocol.protocolStudents | filter: filterStudentProtocols(student)"> <td>{{protocolStudent.addInfo}}</td> </tr> </table> </td> </tr> </table> </td> </ng-form> </tr> </tbody> </table> </md-table-container> </form> <div layout="row"> <md-button class="md-raised md-primary" ng-click="save()" ng-hide="record.subjectStudyPeriod.isPracticeSubject || record.students.length === 0">{{\'main.button.save\' | translate}}</md-button> <md-button class="md-raised" ng-click="back(\'#/subjectStudyPeriods\')">{{\'main.button.back\' | translate}}</md-button> <md-button class="md-raised" ng-href="#/subjectStudyPeriods/{{subjectStudyPeriodId}}/midtermTasks" ng-hide="record.subjectStudyPeriod.isPracticeSubject">{{\'midtermTask.add\' | translate}}</md-button> </div> <div layout="row" ng-if="moodleCourseId"> <md-button class="md-raised" ng-click="enrollStudents()">{{\'moodle.enrollStudents\' | translate}}</md-button> <md-button class="md-raised" ng-click="importGradeItems()">{{\'moodle.importGradeItems\' | translate}}</md-button> <md-button class="md-raised" ng-click="importAllGrades()">{{\'moodle.importAllGrades\' | translate}}</md-button> <md-button class="md-raised" ng-click="importMissingGrades()">{{\'moodle.importMissingGrades\' | translate}}</md-button> </div> </div> <style>.inline {\r\n    display: inline;\r\n  }\r\n\r\n  .protocol {\r\n    min-width: 150px;\r\n    padding-right: 50px;\r\n  }\r\n\r\n  table.md-table th.md-column {\r\n    white-space: unset;\r\n  }\r\n\r\n  table.md-table th.md-column:last-child {\r\n    padding-right: 90px;\r\n    padding-left: 100px;\r\n  }</style>'),a.put("occupationcertificate/import.html",'<div class="ois-form-layout-padding ois-form-layout" ng-cloak> <div flex> <form novalidate name="occupationCertificateForm"> <div layout="row"> <md-input-container flex> <label>{{\'occupationcertificate.curriculum\' | translate}}</label> <hois-select ng-model="criteria.curriculumVersion" criteria="{valid: true}" type="curriculumversion" multiple required></hois-select> </md-input-container> </div> <div layout="row"> <md-input-container flex> <label>{{\'occupationcertificate.studentGroup\' | translate}}</label> <hois-select ng-model="criteria.studentGroup" values="formState.studentGroups" multiple></hois-select> </md-input-container> </div> <div layout="row"> <div flex> <hois-autocomplete ng-model="criteria.student" method="students" additional-query-params="{active: true, curriculumVersion: criteria.curriculumVersion, studentGroup: criteria.studentGroup}" label="occupationcertificate.student"></hois-autocomplete> </div> </div> <div layout="row"> <md-input-container flex="20" flex-sm="100" flex-xs="100"> <label>{{\'occupationcertificate.dateRange\' | translate}}</label> <input type="hidden"> </md-input-container> <div flex="33"> <md-input-container flex> <label>{{\'main.from\' | translate}}</label> <md-datepicker ng-model="criteria.from" md-max-date="criteria.thru"></md-datepicker> </md-input-container> <md-input-container flex> <label>{{\'main.thru\' | translate}}</label> <md-datepicker ng-model="criteria.thru" md-min-date="criteria.from"></md-datepicker> </md-input-container> </div> </div> <div layout="row"> <md-button class="md-raised md-primary" ng-click="importFromKutseregister()">{{\'occupationcertificate.import\' | translate}}</md-button> </div> </form> </div> </div> <div ng-if="results"> <div layout-padding> <div flex> <md-table-container> <table md-table> <thead md-head> <tr md-row> <th md-column>{{\'occupationcertificate.certificateNr\' | translate}}</th> <th md-column>{{\'occupationcertificate.idcode\' | translate}}</th> <th md-column>{{\'occupationcertificate.firstname\' | translate}}</th> <th md-column>{{\'occupationcertificate.lastname\' | translate}}</th> <th md-column>{{\'occupationcertificate.typename\' | translate}}</th> <th md-column>{{\'occupationcertificate.occupation\' | translate}}</th> <th md-column>{{\'occupationcertificate.issuer\' | translate}}</th> <th md-column>{{\'occupationcertificate.issueDate\' | translate}}</th> <th md-column>{{\'occupationcertificate.validFrom\' | translate}}</th> <th md-column>{{\'occupationcertificate.validThru\' | translate}}</th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="row in results" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell>{{::row.certificateNr}}</td> <td md-cell>{{::row.idcode}}</td> <td md-cell>{{::row.firstname}}</td> <td md-cell>{{::row.lastname}}</td> <td md-cell>{{row.type | translate}}</td> <td md-cell>{{currentLanguageNameField(row.occupation)}}</td> <td md-cell>{{::row.issuer}}</td> <td md-cell>{{::row.issueDate | hoisDate}}</td> <td md-cell>{{::row.validFrom | hoisDate}}</td> <td md-cell>{{::row.validThru | hoisDate}}</td> </tr> </tbody> </table> </md-table-container> </div> </div> </div>'),
a.put("occupationstandard/occupationstandard.html",'<div layout-padding> <div flex> <form layout="column" name="kutseregisterSyncForm"> <div layout="row"> <div flex="33"> <md-input-container flex> <label>{{\'main.from\' | translate}}</label> <md-datepicker ng-model="criteria.from" md-max-date="criteria.thru" required></md-datepicker> </md-input-container> </div> </div> <div layout="row"> <md-button class="md-raised" ng-click="occupationStandards()">{{\'kutseregister.occupationStandards\' | translate}}</md-button> </div> </form> </div> </div>'),a.put("persons/persons.edit.html",'<div class="ois-form-layout-padding" layout="column" ng-cloak> <form name="personForm" class="nomargin"> <div layout="column" flex> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="45" flex-sm="100"> <label>{{\'person.idcode\' | translate}}</label> <hois-idcode-lookup ng-model="person.idcode" name="idcode" role="person" after-lookup="lookupPerson(response)" after-failed-lookup="lookupFailure()" no-lookup="cleanReadOnly()" required ng-disabled="idcodeReadonly"></hois-idcode-lookup> <ng-messages for="personForm.idcode.$error" role="alert"> <ng-message when="estonianIdcode">{{\'main.messages.error.estonianIdcode\' | translate}}</ng-message> </ng-messages> </md-input-container> <md-input-container flex="50" flex-sm="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'person.sex\' | translate}}</label> <hois-classifier-select ng-model="person.sex" main-classifier-code="SUGU" model-value-attr="code" required ng-disabled="idcodeReadonly"></hois-classifier-select> </md-input-container> </div> <div layout="row"> <md-input-container flex="20" flex-sm="100"> <label>{{\'teacher.person.birthdate\' | translate}}</label> <md-datepicker ng-model="person.birthdate" md-max-date="maxDate" required md-open-on-focus ng-disabled="idcodeReadonly"></md-datepicker> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="45" flex-sm="100"> <label>{{\'person.firstname\' | translate}}</label> <input ng-model="person.firstname" type="text" md-maxlength="100" required> </md-input-container> <md-input-container flex="50" flex-sm="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'person.lastname\' | translate}}</label> <input ng-model="person.lastname" type="text" md-maxlength="100" required> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="45" flex-sm="100"> <label>{{\'person.email\' | translate}}</label> <input ng-model="person.email" type="email" md-maxlength="100"> </md-input-container> <md-input-container flex="50" flex-sm="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'person.phone\' | translate}}</label> <input ng-model="person.phone" type="text" md-maxlength="100"> </md-input-container> </div> </div> <md-button ng-click="update()" class="md-raised md-primary">{{\'main.button.save\' | translate}}</md-button> <md-button ng-if="person.id" ng-click="delete(person)" class="md-raised">{{\'main.button.delete\' | translate}}</md-button> <md-button ng-click="personBack()" class="md-raised">{{\'main.button.back\' | translate}}</md-button> </form> <div ng-if="person.id"> <div>&nbsp;</div> <fieldset> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'user.role\' | translate}}</legend> <div layout="row" class="align-center"> <md-button class="md-raised" ng-if="person.id" ng-href="#/persons/{{::person.id}}/users/new">{{\'main.button.create\' | translate}}</md-button> </div> <div layout="row"> <div ng-include="\'persons/users.table.html\'" flex></div> </div> </fieldset> </div> </div>'),a.put("persons/persons.search.html",'<div class="ois-form-layout-padding"> <div flex> <fieldset> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'main.searchlabel\' | translate}}</legend> <form name="seachForm" ng-submit="seachForm.$valid && loadData()" class="ois-form-layout nomargin" layout="column"> <div layout="column" flex> <md-input-container ng-if="auth.isMainAdmin()" flex> <label>{{\'school.label\' | translate}}</label> <hois-select ng-if="auth.isMainAdmin()" ng-model="criteria.school" type="school"></hois-select> </md-input-container> <md-input-container flex> <label>{{\'person.name\' | translate}}</label> <input ng-model="criteria.name" type="text" md-maxlength="255"> </md-input-container> <md-input-container flex> <label>{{\'person.idcode\' | translate}}</label> <input ng-model="criteria.idcode" type="text" minlength="11" md-maxlength="11"> </md-input-container> <md-input-container flex> <label>{{\'user.role\' | translate}}</label> <hois-classifier-select ng-model="criteria.role" main-classifier-code="ROLL" model-value-attr="code"></hois-classifier-select> </md-input-container> </div> <div layout="row"> <md-button type="submit" class="md-raised md-primary">{{\'main.button.search\' | translate}}</md-button> <md-button class="md-raised" ng-click="clearCriteria()">{{\'main.button.clear\' | translate}}</md-button> <md-button class="md-raised" ng-if="isAuthorized(\'ROLE_OIGUS_M_TEEMAOIGUS_KASUTAJA\')" ng-href="#/persons/new">{{\'main.button.create\' | translate}}</md-button> </div> </form> </fieldset> </div> </div> <div layout-padding> <div flex> <md-table-container> <table md-table md-progress="tabledata.$promise"> <thead md-head md-order="criteria.order" md-on-reorder="loadData"> <tr md-row> <th md-column md-order-by="p.lastname,p.firstname">{{\'person.name\' | translate}}</th> <th md-column md-order-by="p.idcode">{{\'person.idcode\' | translate}}</th> <th md-column ng-if="auth.isMainAdmin()">{{\'school.label\' | translate}}</th> <th md-column>{{\'user.role\' | translate}}</th> <th md-column></th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="row in tabledata.content" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell><a href="#/persons/{{::row.id}}">{{::row.name}}</a></td> <td md-cell>{{::row.idcode}}</td> <td md-cell ng-if="auth.isMainAdmin()">{{currentLanguageNameField(row.school)}}</td> <td md-cell>{{currentLanguageNameField(row.role)}}</td> <td md-cell><md-button md-no-ink class="md-primary change-button" ng-if="isAuthorized(\'ROLE_OIGUS_M_TEEMAOIGUS_KASUTAJA\')" ng-href="#/persons/{{::row.id}}/edit">{{\'main.button.change\' | translate}}</md-button></td> </tr> </tbody> </table> <md-table-pagination md-limit="criteria.size" md-limit-options="[10, 20, 50]" md-page="criteria.page" md-total="{{tabledata.totalElements}}" md-on-paginate="loadData" md-label="{page: \'{{\'main.page\' | translate}}:\', rowsPerPage: \'{{\'main.rowPerPage\' | translate}}:\', of: \'{{\'main.of\' | translate}}\'}" md-page-select></md-table-pagination> </md-table-container> </div> </div>'),a.put("persons/persons.view.html",'<div class="ois-form-layout-padding form-readonly" ng-cloak> <form name="personForm" class="ois-form-layout"> <div layout="column" flex> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="45" flex-sm="100"> <label>{{\'person.idcode\' | translate}}</label> <hois-value value="person.idcode"></hois-value> </md-input-container> <md-input-container flex="50" flex-sm="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'person.sex\' | translate}}</label> <hois-classifier-value ng-model="person.sex" main-classifier-code="SUGU"></hois-classifier-value> </md-input-container> </div> <div layout="row"> <md-input-container flex="20" flex-sm="100"> <label>{{\'teacher.person.birthdate\' | translate}}</label> <hois-value value="person.birthdate | hoisDate"></hois-value> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="45" flex-sm="100"> <label>{{\'person.firstname\' | translate}}</label> <hois-value value="person.firstname"></hois-value> </md-input-container> <md-input-container flex="50" flex-sm="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'person.lastname\' | translate}}</label> <hois-value value="person.lastname"></hois-value> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="45" flex-sm="100"> <label>{{\'person.email\' | translate}}</label> <hois-value value="person.email"></hois-value> </md-input-container> <md-input-container flex="50" flex-sm="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'person.phone\' | translate}}</label> <hois-value value="person.phone"></hois-value> </md-input-container> </div> </div> <md-button ng-href="#/persons/{{::person.id}}/edit?_noback" ng-if="isAuthorized(\'ROLE_OIGUS_M_TEEMAOIGUS_KASUTAJA\')" class="md-raised md-primary">{{\'main.button.change\' | translate}}</md-button> <md-button ng-click="back(\'#/persons\')" class="md-raised">{{\'main.button.back\' | translate}}</md-button> </form> <div ng-if="person.id"> <div>&nbsp;</div> <fieldset> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'user.role\' | translate}}</legend> <div layout="row" class="align-center"> <md-button class="md-raised" ng-if="person.id && isAuthorized(\'ROLE_OIGUS_M_TEEMAOIGUS_KASUTAJA\')" ng-href="#/persons/{{::person.id}}/users/new">{{\'main.button.create\' | translate}}</md-button> </div> <div layout="row"> <div ng-include="\'persons/users.table.html\'" flex></div> </div> </fieldset> </div> </div>'),a.put("persons/users.edit.html",'<div class="ois-form-layout-padding" layout="column" ng-cloak> <form name="userForm"> <div layout="column" flex> <div layout="row" flex class="form-readonly"> <md-input-container flex="45"> <label>{{\'person.name\' | translate}}</label> <hois-value value="user.person.fullname"> </md-input-container> <md-input-container flex-offset="5" flex="50"> <label>{{\'person.idcode\' | translate}}</label> <hois-value value="user.person.idcode"> </md-input-container> </div> <md-input-container flex> <label>{{\'school.label\' | translate}}</label> <hois-select ng-disabled="noSchool.indexOf(user.role) !== -1 || !auth.isMainAdmin()" ng-model="user.school.id" ng-required="noSchool.indexOf(user.role) === -1" type="school"></hois-select> </md-input-container> <md-input-container flex> <label>{{\'user.role\' | translate}}</label> <hois-classifier-select ng-model="user.role" filter-values="filterValues" ng-change="roleChanged()" main-classifier-code="ROLL" model-value-attr="code" required></hois-classifier-select> </md-input-container> <div layout="row"> <md-input-container flex="15"> <label>{{\'user.validFrom\' | translate}}</label> <md-datepicker ng-model="user.validFrom" md-max-date="user.validThru" required md-open-on-focus></md-datepicker> </md-input-container> <md-input-container flex> <label>{{\'user.validThru\' | translate}}</label> <md-datepicker ng-model="user.validThru" md-min-date="user.validFrom" md-open-on-focus></md-datepicker> </md-input-container> </div> </div> <div> <div flex> <md-table-container> <table md-table ng-show="user.role"> <thead md-head> <tr md-row> <th md-column>{{\'user.rights.right\' | translate}}</th> <th md-column ng-repeat="perm in permissions"> <md-checkbox ng-model="multiSelects[perm.code]" ng-change="multiSelectPermission(perm.code, multiSelects[perm.code])" aria-label="{{currentLanguageNameField(perm)}}" flex>{{currentLanguageNameField(perm)}}</md-checkbox> </th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="object in objectsForRole | orderBy: currentLanguageNameField()" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell>{{currentLanguageNameField(object)}}</td> <td md-cell ng-repeat="perm in permissions"> <md-checkbox ng-if="showPermission(object.code, perm.code)" ng-model="(rights[object.code] || {})[perm.code]" aria-label="{{currentLanguageNameField(object)+\' \'+currentLanguageNameField(perm)}}" flex></md-checkbox> </td> </tr> </tbody> </table> </md-table-container> </div> </div> <md-button ng-click="update()" class="md-raised md-primary">{{\'main.button.save\' | translate}}</md-button> <md-button ng-if="user.id" ng-click="delete()" class="md-raised">{{\'main.button.delete\' | translate}}</md-button> <md-button ng-click="back(\'#/persons/{{user.person.id}}/edit\')" class="md-raised">{{\'main.button.back\' | translate}}</md-button> </form> </div>'),a.put("persons/users.table.html","<table md-table class=\"secondary-table\"> <thead md-head> <tr md-row> <th ng-if=\"auth.isMainAdmin()\" md-column>{{'school.label' | translate}}</th> <th md-column>{{'user.role' | translate}}</th> <th md-column>{{'main.status' | translate}}</th> <th md-column></th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat=\"user in users | orderBy: orderValue\" ng-class-odd=\"'odd'\" ng-class-even=\"'even'\"> <td ng-if=\"auth.isMainAdmin()\" md-cell>{{currentLanguageNameField(user.school)}}</td> <td md-cell><a ng-href=\"#/persons/{{::person.id}}/users/{{::user.id}}\">{{currentLanguageNameField(user.role)}}</a></td> <td md-cell>{{user.valid ? 'main.valid' : 'main.invalid' | translate }}</td> <td md-cell><md-button ng-if=\"user.role.code !== 'ROLL_T' && user.role.code !== 'ROLL_L' && isAuthorized('ROLE_OIGUS_M_TEEMAOIGUS_KASUTAJA')\" class=\"md-primary change-button\" ng-href=\"#/persons/{{::person.id}}/users/{{::user.id}}/edit\">{{'main.button.change' | translate}}</md-button></td> </tr> </tbody> </table>"),a.put("persons/users.view.html",'<div class="ois-form-layout-padding form-readonly" layout="column" ng-cloak> <form name="userForm" class="ois-form-layout"> <div layout="column" flex> <div layout="row" flex> <md-input-container flex> <label>{{\'person.name\' | translate}}</label> <hois-value value="user.person.fullname"></hois-value> </md-input-container> <md-input-container flex> <label>{{\'person.idcode\' | translate}}</label> <hois-value value="user.person.idcode"></hois-value> </md-input-container> </div> <md-input-container flex> <label>{{\'school.label\' | translate}}</label> <hois-value value="currentLanguageNameField(user.school)"></hois-value> </md-input-container> <md-input-container flex> <label>{{\'user.role\' | translate}}</label> <hois-classifier-value ng-model="user.role" main-classifier-code="ROLL"></hois-classifier-value> </md-input-container> <md-input-container flex> <label>{{\'user.validFrom\' | translate}}</label> <hois-value value="user.validFrom | hoisDate"></hois-value> </md-input-container> <md-input-container flex> <label>{{\'user.validThru\' | translate}}</label> <hois-value value="user.validThru | hoisDate"></hois-value> </md-input-container> </div> <div layout-padding> <div flex> <md-table-container> <table md-table ng-show="user.role" class="secondary-table"> <thead md-head> <tr md-row> <th md-column>{{\'user.rights.right\' | translate}}</th> <th md-column ng-repeat="perm in permissions">{{currentLanguageNameField(perm)}}</th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="object in objects | orderBy: currentLanguageNameField()" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell>{{currentLanguageNameField(object)}}</td> <td md-cell ng-repeat="perm in permissions">{{showPermission(object.code, perm.code) ? ((user.rights[object.code] || []).indexOf(perm.code) !== -1 ? \'main.yes\' : \'main.no\' | translate) : \'\'}}</td> </tr> </tbody> </table> </md-table-container> </div> </div> <md-button ng-if="user.role !== \'ROLL_T\' && user.role !== \'ROLL_L\' && isAuthorized(\'ROLE_OIGUS_M_TEEMAOIGUS_KASUTAJA\')" ng-href="#/persons/{{user.person.id}}/users/{{user.id}}/edit?_noback" class="md-raised md-primary">{{\'main.button.change\' | translate}}</md-button> <md-button ng-click="back(\'#/persons/\' + user.person.id)" class="md-raised">{{\'main.button.back\' | translate}}</md-button> </form> </div>'),a.put("practiceJournal/practice.journal.edit.html",'<div class="ois-form-layout-padding" ng-cloak> <div flex> <form name="practiceJournalForm" ng-submit="save()" novalidate layout="column"> <div flex> <hois-autocomplete ng-model="practiceJournal.student" method="students" additional-query-params="{active: true, higher: formState.isHigher}" name="student" label="student.label" required ng-disabled="practiceJournal.id"></hois-autocomplete> </div> <div ng-if="practiceJournal.student && formState.student" class="form-readonly" layout="column"> <div>&nbsp;</div> <div layout="row" flex> <md-input-container flex> <label>{{\'student.name\' | translate}}</label> <hois-value value="formState.student.person.firstname + \' \' + formState.student.person.lastname"></hois-value> </md-input-container> <md-input-container flex> <label>{{\'student.idcode\' | translate}}</label> <hois-value value="formState.student.person.idcode"></hois-value> </md-input-container> <md-input-container flex> <label>{{\'student.schoolEmail\' | translate}}</label> <hois-value value="formState.student.schoolEmail"></hois-value> </md-input-container> <md-input-container flex> <label>{{\'student.course\' | translate}}</label> <hois-value value="formState.student.course"></hois-value> </md-input-container> </div> <div layout="row" flex> <md-input-container flex> <label>{{\'student.curriculum\' | translate}}</label> <hois-value value="currentLanguageNameField(formState.student.curriculumVersion)"></hois-value> </md-input-container> <md-input-container flex> <label>{{\'student.studyForm\' | translate}}</label> <hois-value value="currentLanguageNameField(formState.student.studyForm)"></hois-value> </md-input-container> <md-input-container flex> <label>{{\'practiceJournal.status\' | translate}}</label> <hois-classifier-value ng-model="practiceJournal.status" main-classifier-code="PAEVIK_STAATUS"></hois-classifier-value> </md-input-container> </div> </div> <div ng-if="!formState.isHigher" layout="row" layout-sm="column" layout-xs="column" flex="50"> <md-input-container flex> <label class="textInput">{{\'module.practice\' | translate}}</label> <hois-select ng-model="practiceJournal.module" values="formState.modules" ng-change="moduleChanged(practiceJournal.module)" required></hois-select> </md-input-container> <md-input-container flex flex-offset-gt-md="5"> <label class="textInput">{{\'practiceJournal.theme\' | translate}}</label> <hois-select ng-model="practiceJournal.theme" values="formState.themes" ng-change="themeChanged(practiceJournal.theme)"></hois-select> </md-input-container> <md-input-container flex="10" flex-sm="100" flex-xs="100" flex-offset-gt-md="5"> <label class="textInput">{{\'practiceJournal.creditsEKAP\' | translate}}</label> <input type="number" name="credits" ng-model="practiceJournal.credits" min="0" max="999.9" ng-change="updateHours()" required> </md-input-container> <md-input-container flex="10" flex-sm="100" flex-xs="100"> <label class="textInput">{{\'practiceJournal.hours\' | translate}}</label> <input type="number" name="hours" ng-model="practiceJournal.hours" min="0" max="32767" ng-change="updateCredits()" required> </md-input-container> </div> <div ng-if="formState.isHigher" layout="row" layout-sm="column" layout-xs="column" flex="50"> <md-input-container flex> <label class="textInput">{{\'practiceJournal.subject\' | translate}}</label> <hois-select ng-model="practiceJournal.subject" values="formState.subjects" ng-change="subjectChanged(practiceJournal.subject)"></hois-select> </md-input-container> <md-input-container flex="10" flex-sm="100" flex-xs="100" flex-offset-gt-md="5"> <label class="textInput">{{\'practiceJournal.creditsEAP\' | translate}}</label> <input type="number" name="credits" ng-model="practiceJournal.credits" min="0" max="999.9" ng-change="updateHours()" required> </md-input-container> <md-input-container flex="10" flex-sm="100" flex-xs="100"> <label class="textInput">{{\'practiceJournal.hours\' | translate}}</label> <input type="number" name="hours" ng-model="practiceJournal.hours" min="0" max="32767" ng-change="updateCredits()" required> </md-input-container> </div> <div layout="row" flex> <md-input-container> <label>{{\'practiceJournal.startDate\' | translate}}</label> <md-datepicker ng-model="practiceJournal.startDate" md-max-date="practiceJournal.endDate" required></md-datepicker> </md-input-container> <md-input-container> <label>{{\'practiceJournal.endDate\' | translate}}</label> <md-datepicker ng-model="practiceJournal.endDate" md-min-date="practiceJournal.startDate" required></md-datepicker> </md-input-container> </div> <div layout="row" flex> <md-input-container flex> <label class="textInput">{{\'practiceJournal.practicePlace\' | translate}}</label> <input type="text" ng-model="practiceJournal.practicePlace" md-maxlength="255" required> </md-input-container> </div> <div layout="row" flex> <md-input-container flex> <label class="textInput">{{\'practiceJournal.schoolSupervisor\' | translate}}</label> <hois-select ng-model="practiceJournal.teacher" type="teacher" criteria="{valid: true}" required></hois-select> </md-input-container> </div> <div layout="row" flex> <md-input-container flex> <label class="textInput">{{\'practiceJournal.practicePlan\' | translate}}</label> <textarea ng-model="practiceJournal.practicePlan" required md-maxlength="20000" max-rows="2"></textarea> </md-input-container> </div> <div layout="row" layout-xs="column"> <md-button ng-if="!practiceJournal.id || (practiceJournal.status !== \'PAEVIK_STAATUS_K\' && practiceJournal.canEdit)" class="md-raised md-primary" type="submit">{{\'main.button.save\' | translate}}</md-button> <md-button ng-if="practiceJournal.canConfirm" class="md-raised md-primary" ng-click="confirm()">{{\'main.button.confirm\' | translate}}</md-button> <md-button ng-if="practiceJournal.id && practiceJournal.canDelete" class="md-raised md-default" ng-click="delete()">{{\'main.button.delete\' | translate}}</md-button> <md-button class="md-raised md-default" ng-click="back(\'#/practiceJournals/\', practiceJournalForm)">{{\'main.button.back\' | translate}}</md-button> </div> </form> </div> </div>'),a.put("practiceJournal/practice.journal.entry.add.file.dialog.html",'<md-dialog aria-label="file select dialog" flex="40" flex-xs="100"> <form name="dialogForm" ng-cloak> <md-toolbar> <div class="md-toolbar-tools"> <h2>{{"main.button.uploadFile" | translate}}</h2> <span flex></span> <md-button class="md-icon-button" ng-click="cancel()"> <md-icon md-font-set="material-icons">close</md-icon> </md-button> </div> </md-toolbar> <md-dialog-content> <span flex></span> <div class="ois-form-layout" layout="column" layout-margin ng-cloak> <div layout="column"> <md-input-container flex> <lf-ng-md-file-input name="file" lf-files="data.file" lf-browse-label="{{\'main.button.uploadFile\' | translate}}" lf-remove-label="{{\'main.button.delete\' | translate}}" lf-placeholder="" lf-filesize="5MB" disallow-same-file="addedFiles" lf-required> </lf-ng-md-file-input> </md-input-container> <div ng-messages="dialogForm.file.$error"> <div class="invalid" ng-message="required">{{\'main.messages.error.selectFile\' | translate}}</div> <div class="invalid" ng-message="filesize">{{\'main.messages.error.fileTooLarge\' | translate}} 5MB!</div> <div class="invalid" ng-message="samefile">{{\'main.messages.error.fileAlreadyExists\' | translate}}</div> </div> </div> </div> </md-dialog-content> <span flex></span> <md-dialog-actions layout="row" layout-align="start center"> <md-button class="md-raised md-primary" ng-click="submit()">{{"main.button.add" | translate}}</md-button> <md-button class="md-raised" ng-click="cancel()">{{"main.button.close" | translate}}</md-button> </md-dialog-actions> </form> </md-dialog>'),a.put("practiceJournal/practice.journal.entry.html",'<div class="ois-form-layout-padding" ng-cloak> <div flex> <form name="practiceJournalEntryForm" ng-submit="save()" novalidate layout="column"> <div class="form-readonly" layout="column"> <br> <div ng-if="!auth.isStudent()" layout="row" flex> <md-input-container class="label-only" flex> <label>{{\'student.label\' | translate}}</label> <hois-value value="practiceJournal.student.nameEt" href-value="\'#/students/\' + practiceJournal.student.id + \'/main\'"></hois-value> </md-input-container> <md-input-container flex> <label>{{\'student.curriculum\' | translate}}</label> <hois-value value="currentLanguageNameField(practiceJournal.studentCurriculumVersion)"></hois-value> </md-input-container> <md-input-container flex> <label>{{\'student.studyForm\' | translate}}</label> <hois-classifier-value ng-model="practiceJournal.studentStudyForm" main-classifier-code="OPPEVORM"></hois-classifier-value> </md-input-container> <br> </div> <div ng-if="!practiceJournal.isHigher" layout="row" layout-xs="column" flex> <md-input-container flex> <label>{{\'practiceJournal.module\' | translate}}</label> <hois-value value="currentLanguageNameField(practiceJournal.module)"></hois-value> </md-input-container> <md-input-container flex> <label>{{\'practiceJournal.theme\' | translate}}</label> <hois-value value="currentLanguageNameField(practiceJournal.theme)"></hois-value> </md-input-container> <md-input-container flex> <label>{{\'practiceJournal.creditsEKAP\' | translate}}</label> <hois-value value="practiceJournal.credits"></hois-value> </md-input-container> <md-input-container flex> <label>{{\'practiceJournal.hours\' | translate}}</label> <hois-value value="practiceJournal.hours"></hois-value> </md-input-container> </div> <div ng-if="practiceJournal.isHigher" layout="row" layout-xs="column" flex> <md-input-container flex> <label>{{\'practiceJournal.subject\' | translate}}</label> <hois-value value="currentLanguageNameField(practiceJournal.subject)"></hois-value> </md-input-container> <md-input-container flex> <label>{{\'practiceJournal.creditsEAP\' | translate}}</label> <hois-value value="practiceJournal.credits"></hois-value> </md-input-container> <md-input-container flex> <label>{{\'practiceJournal.hours\' | translate}}</label> <hois-value value="practiceJournal.hours"></hois-value> </md-input-container> </div> <div ng-if="practiceJournal.contract" layout="row" flex> <md-input-container flex> <label>{{\'enterprise.label\' | translate}}</label> <hois-value value="currentLanguageNameField(practiceJournal.contract.enterprise)"></hois-value> </md-input-container> <md-input-container flex> <label>{{\'enterprise.supervisor\' | translate}}</label> <hois-value value="practiceJournal.contract.supervisorName"></hois-value> </md-input-container> </div> <div layout="row" layout-xs="column" flex> <div layout="row" flex> <md-input-container flex> <label>{{\'practiceJournal.startDate\' | translate}}</label> <hois-value value="practiceJournal.startDate | hoisDate"></hois-value> </md-input-container> <md-input-container flex> <label>{{\'practiceJournal.endDate\' | translate}}</label> <hois-value value="practiceJournal.endDate | hoisDate"></hois-value> </md-input-container> </div> <div layout="row" flex> <md-input-container flex> <label>{{\'practiceJournal.practicePlace\' | translate}}</label> <hois-value value="practiceJournal.practicePlace"></hois-value> </md-input-container> <md-input-container flex> <label>{{\'practiceJournal.schoolSupervisor\' | translate}}</label> <hois-value value="currentLanguageNameField(practiceJournal.teacher)"></hois-value> </md-input-container> <md-input-container flex> <label>{{\'practiceJournal.status\' | translate}}</label> <hois-classifier-value ng-model="practiceJournal.status" main-classifier-code="PAEVIK_STAATUS"></hois-classifier-value> </md-input-container> </div> </div> </div> <div flex> <div layout="row" flex> <md-button class="md-primary" ng-click="addNewEntryRow()" ng-if="auth.isStudent()">{{\'main.button.addNewRow\' | translate}}</md-button> </div> <md-table-container> <table md-table md-progress="entries.$promise"> <thead md-head md-on-reorder="loadEntries"> <tr md-row flex> <th md-column class="padding-y-5" style="width: 10%; min-width: 50px">{{\'practiceJournal.practiceJournalEntry.practiceDate\' | translate}}</th> <th md-column style="padding: 0 300px 0 5px !important">{{\'practiceJournal.practiceJournalEntry.description\' | translate}}</th> <th md-column class="padding-y-5" style="width: 10%; min-width: 50px">{{\'practiceJournal.practiceJournalEntry.hours\' | translate}}</th> <th ng-if="practiceJournal.contract" md-column class="padding-y-5">{{\'practiceJournal.practiceJournalEntry.supervisorComment\' | translate}}</th> <th md-column class="padding-y-5">{{\'practiceJournal.practiceJournalEntry.teacherComment\' | translate}}</th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="row in practiceJournal.practiceJournalEntries | orderBy: \'practiceDate\'" ng-class-odd="\'odd\'" ng-class-even="\'even\'" md-colors="{background: getEntryColor(row)}" flex> <td md-cell class="padding-y-5"> <md-input-container ng-show="row.isStudentEntry && auth.isStudent()" style="width: 100%"> <md-datepicker ng-model="row.practiceDate" md-min-date="practiceJournal.startDate" md-max-date="practiceJournal.endDate" required aria-label="{{\'practiceJournal.practiceJournalEntry.practiceDate\' | translate}}"></md-datepicker> </md-input-container> <div ng-if="!(row.isStudentEntry && auth.isStudent())"> <hois-value value="row.practiceDate | hoisDate"></hois-value> </div> </td> <td md-cell class="padding-y-5" colspan="1.5"> <md-input-container ng-if="row.isStudentEntry && auth.isStudent()" class="padding-y-5" style="width: 100%"> <input ng-model="row.description" type="text" aria-label="{{\'practiceJournal.practiceJournalEntry.description\' | translate}}" md-maxlength="10000"> </md-input-container> <div ng-if="!(row.isStudentEntry && auth.isStudent())"> <hois-value value="row.description"></hois-value> </div> </td> <td md-cell class="padding-y-5"> <md-input-container ng-if="row.isStudentEntry && auth.isStudent()"> <input ng-model="row.hours" type="number" aria-label="{{\'practiceJournal.practiceJournalEntry.hours\' | translate}}" min="0" max="24" name="hours" step="1" pattern="^\\d+$"> <div ng-messages="practiceJournalEntryForm.hours.$error" ng-show="practiceJournalEntryForm.hours.$dirty"> <div ng-message="min"> {{\'practiceJournal.practiceJournalEntry.error.hoursNegative\' | translate}} </div> <div ng-message="max"> {{\'practiceJournal.practiceJournalEntry.error.hourTooLarge\' | translate}} </div> <div ng-message="pattern"> {{\'main.messages.error.integer\' | translate}} </div> </div> </md-input-container> <div ng-if="!(row.isStudentEntry && auth.isStudent())"> <hois-value value="row.hours"></hois-value> </div> </td> <td ng-if="practiceJournal.contract" md-cell> <hois-value value="row.supervisorComment"></hois-value> </td> <td md-cell> <md-input-container ng-if="auth.isTeacher()"> <input ng-model="row.teacherComment" type="text" aria-label="{{\'practiceJournal.practiceJournalEntry.teacherComment\' | translate}}" md-maxlength="10000"> </md-input-container> <div ng-if="!auth.isTeacher()"> <hois-value value="row.teacherComment"></hois-value> </div> </td> </tr> </tbody> </table> </md-table-container> </div> <div>&nbsp;</div> <div ng-if="auth.isStudent()" layout="row" flex> <md-input-container flex> <label>{{\'practiceJournal.myPracticeReport\' | translate}}</label> <textarea ng-model="practiceJournal.practiceReport" md-maxlength="10000" max-rows="5"></textarea> </md-input-container> </div> <div ng-if="!auth.isStudent()" class="form-readonly" layout="row"> <md-input-container flex> <label>{{\'practiceJournal.myPracticeReport\' | translate}}</label> <hois-value value="practiceJournal.practiceReport"></hois-value> </md-input-container> </div> <div ng-if="!auth.isStudent()" layout="row" flex> <md-input-container flex> <label>{{\'practiceJournal.teacherComment\' | translate}}</label> <textarea ng-model="practiceJournal.teacherComment" md-maxlength="10000" max-rows="5"></textarea> </md-input-container> </div> <div>&nbsp;</div> <div ng-if="practiceJournal.contract" class="form-readonly" layout="row"> <md-input-container flex> <label>{{\'practiceJournal.supervisorComment\' | translate}}</label> <hois-value value="practiceJournal.supervisorComment"></hois-value> </md-input-container> </div> <div layout="column" flex> <fieldset> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'practiceJournal.supervisorOpinionFile\' | translate}}</legend> <md-button ng-if="!auth.isStudent()" class="md-raised" href="" ng-click="openAddFileDialog()">{{\'main.button.uploadFile\' | translate}}</md-button> <md-table-container> <table md-table class="secondary-table"> <thead md-head> <tr md-row> <th md-column><span>{{\'file.nameAndFile\' | translate}}</span></th> <th md-column><span>{{\'file.additionDate\' | translate}}</span></th> <th md-column>{{\'file.addedBy\' | translate}}</th> <th md-column ng-if="!auth.isStudent()"></th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="file in practiceJournal.practiceJournalFiles | orderBy: \'id\'" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell> {{file.oisFile.fname}} <a ng-href="{{getUrl(file.oisFile, \'practicejournal\')}}" target="_blank" rel="noopener noreferrer"> <md-icon md-font-set="material-icons">file_download</md-icon> </a> </td> <td md-cell> {{file.inserted | hoisDateTime}} </td> <td md-cell> {{file.insertedBy}} </td> <td md-cell ng-if="!auth.isStudent()"> <md-button class="remove nomargin" ng-click="deleteFile(file)">&times;</md-button> </td> </tr> </tbody> </table> </md-table-container> </fieldset> </div> <div>&nbsp;</div> <div ng-if="auth.isStudent()" class="form-readonly" layout="row"> <md-input-container flex> <label>{{\'practiceJournal.teacherOpinion\' | translate}}</label> <hois-value value="practiceJournal.teacherOpinion"></hois-value> </md-input-container> </div> <div ng-if="!auth.isStudent()" layout="row"> <md-input-container flex> <label>{{\'practiceJournal.teacherOpinion\' | translate}}</label> <input ng-model="practiceJournal.teacherOpinion" type="text" md-maxlength="10000"> </md-input-container> </div> <div>&nbsp;</div> <div ng-if="practiceJournal.contract" class="form-readonly" layout="row"> <md-input-container flex> <label>{{\'practiceJournal.supervisorOpinion\' | translate}}</label> <hois-value value="practiceJournal.supervisorOpinion"></hois-value> </md-input-container> </div> <div ng-if="!auth.isStudent()" layout="row"> <md-input-container> <label class="textInput">{{\'practiceJournal.grade\' | translate}}</label> <hois-select ng-model="practiceJournal.grade" values="grades" value-property="code" show-property="{{practiceJournal.isHigher && auth.school.letterGrades ? \'value2\' : \'value\'}}"></hois-select> </md-input-container> </div> <div>&nbsp;</div> <div layout="row"> <md-button class="md-raised md-primary" type="submit">{{\'main.button.save\' | translate}}</md-button> <md-button class="md-raised md-default" ng-click="back(\'#/practiceJournals/\', practiceJournalEntryForm)">{{\'main.button.back\' | translate}}</md-button> </div> </form> <div>&nbsp;</div> <div flex> <hois-collapsable label="(\'contract.practicePlan\' | translate)" expanded="false"> <div> {{practiceJournal.contract.practicePlan}} </div> </hois-collapsable> </div> </div> </div>'),
a.put("practiceJournal/practice.journal.list.html",'<div class="ois-form-layout-padding ois-form-layout" ng-cloak> <div flex> <fieldset> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'main.searchlabel\' | translate}}</legend> <form ng-if="auth.isStudent() || auth.isParent()" name="searchForm" ng-submit="load()" novalidate class="nomargin"> <div layout="row" layout-sm="column" layout-xs="column"> <div flex="100" flex-sm="100" flex-xs="100"> <div layout="column" flex> <md-input-container> <label class="textInput">{{\'studyYear.label\' | translate}}</label> <hois-select ng-model="criteria.studyYear" type="studyyear" select-current-study-year required autofocus></hois-select> </md-input-container> </div> </div> </div> <div layout="row"> <md-button type="submit" class="md-raised md-primary">{{\'main.button.search\' | translate}}</md-button> </div> <div flex-xs="0" flex-gt-xs="0" flex-gt-sm="50"></div> </form> <form ng-if="!auth.isStudent() && !auth.isParent()" name="searchForm" ng-submit="load()" novalidate class="nomargin"> <div layout="row" layout-sm="column" layout-xs="column"> <div flex="45" flex-sm="100" flex-xs="100"> <div layout="column" flex> <md-input-container> <label class="textInput">{{\'studyYear.label\' | translate}}</label> <hois-select ng-model="criteria.studyYear" type="studyyear" select-current-study-year required autofocus></hois-select> </md-input-container> </div> </div> <div flex="45" flex-sm="100" flex-xs="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <div layout="column" flex> <md-input-container> <label class="textInput">{{\'studentGroup.label\' | translate}}</label> <hois-select ng-model="criteria.studentGroup" type="studentgroup" criteria="{valid: true}"></hois-select> </md-input-container> </div> </div> </div> <div layout="row" layout-sm="column" layout-xs="column" ng-if="!auth.isStudent()"> <div layout="column" flex="95" flex-sm="100" flex-xs="100"> <div layout="column" flex> <md-input-container> <label class="textInput">{{\'student.label\' | translate}}</label> <input ng-model="criteria.studentName" type="text" md-maxlength="255"> </md-input-container> </div> </div> </div> <div layout="row" layout-sm="column" layout-xs="column"> <div flex="45" flex-sm="100" flex-xs="100"> <div layout="column" flex> <md-input-container> <label class="textInput">{{\'contract.curriculumVersion\' | translate}}</label> <hois-select ng-model="criteria.curriculumVersion" type="curriculumversion"></hois-select> </md-input-container> </div> </div> <div ng-if="!auth.isTeacher()" flex="45" flex-sm="100" flex-xs="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <div layout="column" flex> <md-input-container> <label class="textInput">{{\'contract.schoolSupervisor\' | translate}}</label> <hois-select ng-model="criteria.teacher" type="teacher"></hois-select> </md-input-container> </div> </div> </div> <div layout="row" layout-xs="column"> <md-button type="submit" class="md-raised md-primary">{{\'main.button.search\' | translate}}</md-button> <md-button class="md-raised" ng-click="clearCriteria()">{{\'main.button.clear\' | translate}}</md-button> <md-button ng-if="formState.canCreate && isAuthorized(\'ROLE_OIGUS_M_TEEMAOIGUS_PRAKTIKAPAEVIK\')" class="md-raised" ng-click="newPracticeJournal()">{{\'practiceJournal.button.createWithoutContract\' | translate}}</md-button> </div> <div flex-xs="0" flex-gt-xs="0" flex-gt-sm="50"></div> </form> </fieldset> </div> </div> <div layout-padding> <div flex> <md-table-container> <table md-table md-progress="tabledata.$promise"> <thead md-head md-order="criteria.order" md-on-reorder="loadData"> <tr md-row> <th md-column ng-if="auth.isAdmin() || auth.isTeacher()" md-order-by="student_person.lastname,student_person.firstname">{{\'student.label\' | translate}}</th> <th md-column ng-if="auth.isAdmin() || auth.isTeacher()">{{\'studentGroup.label\' | translate}}</th> <th md-column ng-if="auth.school.vocational">{{\'practiceJournal.moduleAndTheme\' | translate}}</th> <th md-column ng-if="auth.school.higher">{{\'practiceJournal.subject\' | translate}}</th> <th md-column>{{\'practiceJournal.practiceStartAndEnd\' | translate}}</th> <th md-column>{{\'enterprise.label\' | translate}}</th> <th md-column>{{\'enterprise.supervisor\' | translate}}</th> <th md-column>{{\'practiceJournal.practicePlace\' | translate}}</th> <th md-column ng-if="auth.isAdmin()">{{\'practiceJournal.schoolSupervisor\' | translate}}</th> <th md-column>{{\'practiceJournal.studentLastEntryDate\' | translate}}</th> <th md-column>{{\'practiceJournal.status\' | translate}}</th> <th md-column></th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="row in tabledata.content" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell ng-if="auth.isAdmin() || auth.isTeacher()"><a ng-href="/#/practiceJournals/{{::row.id}}/view">{{currentLanguageNameField(row.student)}}</a></td> <td md-cell ng-if="auth.isAdmin() || auth.isTeacher()">{{row.studentGroup}}</td> <td md-cell ng-if="auth.school.vocational">{{(row.module || row.theme) ? (currentLanguageNameField(row.module) + \' \' + currentLanguageNameField(row.theme)) : \'-\'}}</td> <td md-cell ng-if="auth.school.higher">{{row.subject ? currentLanguageNameField(row.subject) : \'-\'}}</td> <td md-cell>{{row.startDate | hoisDate}} - {{row.endDate | hoisDate}}</td> <td md-cell>{{row.enterpriseName}}</td> <td md-cell>{{row.enterpriseContactPersonName}}</td> <td md-cell>{{row.practicePlace}}</td> <td md-cell ng-if="auth.isAdmin()">{{currentLanguageNameField(row.teacher)}}</td> <td md-cell>{{row.studentLastEntryDate | hoisDate}}</td> <td md-cell>{{currentLanguageNameField(row.status)}}</td> <td md-cell> <div layout="column"> <md-button ng-if="!(auth.isAdmin() || auth.isTeacher())" md-no-ink class="md-primary change-button" ng-href="#/practiceJournals/{{::row.id}}/view">{{\'main.button.view\' | translate}}</md-button> <md-button ng-if="row.canAddEntries" md-no-ink class="md-primary change-button" ng-href="#/practiceJournals/{{::row.id}}/entries/edit">{{\'practiceJournal.button.fill\' | translate}}</md-button> <md-button ng-if="!auth.isStudent() && ((row.canEdit && row.status !== \'PAEVIK_STAATUS_K\') || (row.canConfirm && row.status === \'PAEVIK_STAATUS_K\'))" md-no-ink class="md-primary change-button" ng-href="#/practiceJournals/{{::row.id}}/edit">{{\'main.button.change\' | translate}}</md-button> </div> </td> </tr> </tbody> </table> </md-table-container> <md-table-pagination md-limit="criteria.size" md-limit-options="[10, 20, 50]" md-page="criteria.page" md-total="{{tabledata.totalElements}}" md-on-paginate="loadData" md-label="{page: \'{{\'main.page\' | translate}}:\', rowsPerPage: \'{{\'main.rowPerPage\' | translate}}:\', of: \'{{\'main.of\' | translate}}\'}" md-page-select></md-table-pagination> </div> </div>'),a.put("practiceJournal/practice.journal.student.list.html","<div layout-padding> <div flex> <md-table-container> <table md-table md-progress=\"tabledata.$promise\"> <thead md-head md-order=\"criteria.order\" md-on-reorder=\"loadData\"> <tr md-row> <th md-column>{{'student.label' | translate}}</th> <th md-column>{{'studentGroup.label' | translate}}</th> <th md-column ng-if=\"auth.school.vocational\">{{'practiceJournal.moduleAndTheme' | translate}}</th> <th md-column ng-if=\"auth.school.higher\">{{'practiceJournal.subject' | translate}}</th> <th md-column>{{'practiceJournal.practiceStartAndEnd' | translate}}</th> <th md-column>{{'enterprise.label' | translate}}</th> <th md-column>{{'enterprise.supervisor' | translate}}</th> <th md-column>{{'practiceJournal.practicePlace' | translate}}</th> <th md-column>{{'practiceJournal.schoolSupervisor' | translate}}</th> <th md-column>{{'practiceJournal.studentLastEntryDate' | translate}}</th> <th md-column></th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat=\"row in tabledata.content\" ng-class-odd=\"'odd'\" ng-class-even=\"'even'\"> <td md-cell><a ng-href=\"/#/practiceJournals/{{::row.id}}/view\">{{currentLanguageNameField(row.student)}}</a></td> <td md-cell>{{row.studentGroup}}</td> <td md-cell ng-if=\"auth.school.vocational\">{{(row.module || row.theme) ? (currentLanguageNameField(row.module) + ' ' + currentLanguageNameField(row.theme)) : '-'}}</td> <td md-cell ng-if=\"auth.school.higher\">{{row.subject ? currentLanguageNameField(row.subject) : '-'}}</td> <td md-cell>{{row.startDate | hoisDate}} - {{row.endDate | hoisDate}}</td> <td md-cell>{{row.enterpriseName}}</td> <td md-cell>{{row.enterpriseContactPersonName}}</td> <td md-cell>{{row.practicePlace}}</td> <td md-cell>{{currentLanguageNameField(row.teacher)}}</td> <td md-cell>{{row.studentLastEntryDate | hoisDate}}</td> <td md-cell> <md-button ng-if=\"(auth.isStudent() && row.canStudentAddEntries) || (auth.isTeacher() && row.canTeacherAddEntries)\" md-no-ink class=\"md-primary change-button\" ng-href=\"#/practiceJournals/{{::row.id}}/entries/edit\">{{'practiceJournal.button.fill' | translate}}</md-button> </td> </tr> </tbody> </table> </md-table-container> <md-table-pagination md-limit=\"criteria.size\" md-limit-options=\"[10, 20, 50]\" md-page=\"criteria.page\" md-total=\"{{tabledata.totalElements}}\" md-on-paginate=\"loadData\" md-label=\"{page: '{{'main.page' | translate}}:', rowsPerPage: '{{'main.rowPerPage' | translate}}:', of: '{{'main.of' | translate}}'}\" md-page-select></md-table-pagination> </div> </div>"),a.put("practiceJournal/practice.journal.supervisor.entry.html",'<div class="ois-form-layout-padding" ng-cloak> <div flex> <form name="practiceJournalEntryForm" ng-submit="practiceJournalEntryForm.$valid && save()" novalidate layout="column"> <div class="form-readonly" layout="column"> <br> <div layout="row" flex> <md-input-container class="label-only" flex> <label>{{\'student.label\' | translate}}</label> <hois-value value="practiceJournal.student.nameEt"></hois-value> </md-input-container> <md-input-container flex> <label>{{\'practiceJournal.school\' | translate}}</label> <hois-value value="currentLanguageNameField(practiceJournal.school)"></hois-value> </md-input-container> <md-input-container flex> <label>{{\'student.curriculum\' | translate}}</label> <hois-value value="currentLanguageNameField(practiceJournal.studentCurriculumVersion)"></hois-value> </md-input-container> <md-input-container flex> <label>{{\'student.studyForm\' | translate}}</label> <hois-classifier-value ng-model="practiceJournal.studentStudyForm" main-classifier-code="OPPEVORM"></hois-classifier-value> </md-input-container> <br> </div> <div ng-if="!practiceJournal.isHigher" layout="row" flex> <md-input-container flex> <label>{{\'practiceJournal.module\' | translate}}</label> <hois-value value="currentLanguageNameField(practiceJournal.module)"></hois-value> </md-input-container> <md-input-container flex> <label>{{\'practiceJournal.theme\' | translate}}</label> <hois-value value="currentLanguageNameField(practiceJournal.theme)"></hois-value> </md-input-container> <md-input-container flex> <label>{{\'practiceJournal.creditsEKAP\' | translate}}</label> <hois-value value="practiceJournal.credits"></hois-value> </md-input-container> <md-input-container flex> <label>{{\'practiceJournal.hours\' | translate}}</label> <hois-value value="practiceJournal.hours"></hois-value> </md-input-container> </div> <div ng-if="practiceJournal.isHigher" layout="row" flex> <md-input-container flex="50"> <label>{{\'practiceJournal.subject\' | translate}}</label> <hois-value value="currentLanguageNameField(practiceJournal.subject)"></hois-value> </md-input-container> <md-input-container flex> <label>{{\'practiceJournal.creditsEAP\' | translate}}</label> <hois-value value="practiceJournal.credits"></hois-value> </md-input-container> <md-input-container flex> <label>{{\'practiceJournal.hours\' | translate}}</label> <hois-value value="practiceJournal.hours"></hois-value> </md-input-container> <md-input-container flex> <label>{{\'practiceJournal.status\' | translate}}</label> <hois-classifier-value ng-model="practiceJournal.status" main-classifier-code="PAEVIK_STAATUS"></hois-classifier-value> </md-input-container> </div> <div layout="row" flex> <md-input-container flex> <label>{{\'enterprise.label\' | translate}}</label> <hois-value value="currentLanguageNameField(practiceJournal.contract.enterprise)"></hois-value> </md-input-container> <md-input-container flex> <label>{{\'enterprise.supervisor\' | translate}}</label> <hois-value value="practiceJournal.contract.supervisorName"></hois-value> </md-input-container> </div> <div layout="row" flex> <md-input-container flex="25"> <label>{{\'practiceJournal.startDate\' | translate}}</label> <hois-value value="practiceJournal.startDate | hoisDate"></hois-value> </md-input-container> <md-input-container flex="25"> <label>{{\'practiceJournal.endDate\' | translate}}</label> <hois-value value="practiceJournal.endDate | hoisDate"></hois-value> </md-input-container> <md-input-container flex="25"> <label>{{\'practiceJournal.schoolSupervisor\' | translate}}</label> <hois-value value="currentLanguageNameField(practiceJournal.teacher)"></hois-value> </md-input-container> <md-input-container flex="25"> <label>{{\'practiceJournal.status\' | translate}}</label> <hois-classifier-value ng-model="practiceJournal.status" main-classifier-code="PAEVIK_STAATUS"></hois-classifier-value> </md-input-container> </div> </div> <div flex> <md-table-container> <table md-table md-progress="entries.$promise"> <thead md-head md-on-reorder="loadEntries"> <tr md-row flex> <th md-column>{{\'practiceJournal.practiceJournalEntry.practiceDate\' | translate}}</th> <th md-column>{{\'practiceJournal.practiceJournalEntry.description\' | translate}}</th> <th md-column>{{\'practiceJournal.practiceJournalEntry.hours\' | translate}}</th> <th md-column>{{\'practiceJournal.practiceJournalEntry.supervisorComment\' | translate}}</th> <th md-column>{{\'practiceJournal.practiceJournalEntry.teacherComment\' | translate}}</th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="row in practiceJournal.practiceJournalEntries | orderBy: \'practiceDate\'" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell> <div> <hois-value value="row.practiceDate | hoisDate"></hois-value> </div> </td> <td md-cell> <div> <hois-value value="row.description"></hois-value> </div> </td> <td md-cell> <div> <hois-value value="row.hours"></hois-value> </div> </td> <td md-cell> <md-input-container> <input ng-model="row.supervisorComment" type="text" aria-label="{{\'practiceJournal.practiceJournalEntry.supervisorComment\' | translate}}" md-maxlength="10000"> </md-input-container> </td> <td md-cell> <div> <hois-value value="row.teacherComment"></hois-value> </div> </td> </tr> </tbody> </table> </md-table-container> </div> <br><br> <div class="form-readonly" layout="row"> <md-input-container flex> <label>{{\'practiceJournal.myPracticeReport\' | translate}}</label> <hois-value value="practiceJournal.practiceReport"></hois-value> </md-input-container> </div> <div class="form-readonly" layout="row" flex> <md-input-container flex> <label>{{\'practiceJournal.teacherComment\' | translate}}</label> <hois-value value="practiceJournal.teacherComment"></hois-value> </md-input-container> </div> <div class="form-readonly" layout="row" flex> <md-input-container flex> <label>{{\'practiceJournal.supervisorComment\' | translate}}</label> <textarea ng-model="practiceJournal.supervisorComment" md-maxlength="10000" max-rows="5"></textarea> </md-input-container> </div> <div layout="column" flex> <fieldset> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'practiceJournal.supervisorOpinionFile\' | translate}}</legend> <md-button ng-if="!auth.isStudent()" class="md-raised" href="" ng-click="openAddFileDialog()">{{\'main.button.uploadFile\' | translate}}</md-button> <table md-table class="secondary-table"> <thead md-head> <tr md-row> <th md-column><span>{{\'file.nameAndFile\' | translate}}</span></th> <th md-column><span>{{\'file.additionDate\' | translate}}</span></th> <th md-column>{{\'file.addedBy\' | translate}}</th> <th md-column></th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="file in practiceJournal.practiceJournalFiles | orderBy: \'id\'" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell> {{file.oisFile.fname}} <a ng-href="{{getUrl(file.oisFile, \'practicejournal\')}}" target="_blank" rel="noopener noreferrer"> <md-icon md-font-set="material-icons">file_download</md-icon> </a> </td> <td md-cell> {{file.inserted | hoisDateTime}} </td> <td md-cell> {{file.insertedBy}} </td> <td md-cell> <md-button class="remove nomargin" ng-click="removeFromArray(practiceJournal.practiceJournalFiles, file)">&times;</md-button> </td> </tr> </tbody> </table> </fieldset> </div> <br> <div class="form-readonly" layout="row"> <md-input-container flex> <label>{{\'practiceJournal.teacherOpinion\' | translate}}</label> <hois-value value="practiceJournal.teacherOpinion"></hois-value> </md-input-container> </div> <div layout="row"> <md-input-container flex> <label>{{\'practiceJournal.supervisorOpinion\' | translate}}</label> <input ng-model="practiceJournal.supervisorOpinion" type="text" md-maxlength="10000"> </md-input-container> </div> <div layout="row"> <md-button class="md-raised md-primary" type="submit">{{\'main.button.save\' | translate}}</md-button> </div> </form> <br> <div flex> <hois-collapsable label="(\'contract.practicePlan\' | translate)" expanded="false"> <div> {{practiceJournal.contract.practicePlan}} </div> </hois-collapsable> </div> </div> </div>'),a.put("practiceJournal/practice.journal.view.html",'<div class="ois-form-layout-padding" ng-cloak> <div flex> <form name="practiceJournalEntryForm" ng-submit="practiceJournalEntryForm.$valid && save()" novalidate layout="column"> <div class="form-readonly" layout="column"> <div>&nbsp;</div> <div ng-if="!auth.isStudent()" layout="row" flex> <md-input-container class="label-only" flex> <label>{{\'student.label\' | translate}}</label> <hois-value value="practiceJournal.student.nameEt" href-value="\'#/students/\' + practiceJournal.student.id + \'/main\'"></hois-value> </md-input-container> <md-input-container flex> <label>{{\'student.curriculum\' | translate}}</label> <hois-value value="currentLanguageNameField(practiceJournal.studentCurriculumVersion)"></hois-value> </md-input-container> <md-input-container flex> <label>{{\'student.studyForm\' | translate}}</label> <hois-classifier-value ng-model="practiceJournal.studentStudyForm" main-classifier-code="OPPEVORM"></hois-classifier-value> </md-input-container> <div>&nbsp;</div> </div> <div ng-if="!practiceJournal.isHigher" layout="row" layout-xs="column" flex> <md-input-container flex> <label>{{\'practiceJournal.module\' | translate}}</label> <hois-value value="currentLanguageNameField(practiceJournal.module)"></hois-value> </md-input-container> <md-input-container flex> <label>{{\'practiceJournal.theme\' | translate}}</label> <hois-value value="currentLanguageNameField(practiceJournal.theme)"></hois-value> </md-input-container> <md-input-container flex> <label>{{\'practiceJournal.creditsEKAP\' | translate}}</label> <hois-value value="practiceJournal.credits"></hois-value> </md-input-container> <md-input-container flex> <label>{{\'practiceJournal.hours\' | translate}}</label> <hois-value value="practiceJournal.hours"></hois-value> </md-input-container> </div> <div ng-if="practiceJournal.isHigher" layout="row" flex> <md-input-container flex> <label>{{\'practiceJournal.subject\' | translate}}</label> <hois-value value="currentLanguageNameField(practiceJournal.subject)"></hois-value> </md-input-container> <md-input-container flex> <label>{{\'practiceJournal.creditsEAP\' | translate}}</label> <hois-value value="practiceJournal.credits"></hois-value> </md-input-container> <md-input-container flex> <label>{{\'practiceJournal.hours\' | translate}}</label> <hois-value value="practiceJournal.hours"></hois-value> </md-input-container> </div> <div ng-if="practiceJournal.contract" layout="row" flex> <md-input-container flex> <label>{{\'enterprise.label\' | translate}}</label> <hois-value value="currentLanguageNameField(practiceJournal.contract.enterprise)"></hois-value> </md-input-container> <md-input-container flex> <label>{{\'enterprise.supervisor\' | translate}}</label> <hois-value value="practiceJournal.contract.supervisorName"></hois-value> </md-input-container> </div> <div layout="row" layout-xs="column" flex> <div layout="row" flex> <md-input-container flex> <label>{{\'practiceJournal.startDate\' | translate}}</label> <hois-value value="practiceJournal.startDate | hoisDate"></hois-value> </md-input-container> <md-input-container flex> <label>{{\'practiceJournal.endDate\' | translate}}</label> <hois-value value="practiceJournal.endDate | hoisDate"></hois-value> </md-input-container> </div> <div layout="row" flex> <md-input-container flex> <label>{{\'practiceJournal.practicePlace\' | translate}}</label> <hois-value value="practiceJournal.practicePlace"></hois-value> </md-input-container> <md-input-container flex> <label>{{\'practiceJournal.schoolSupervisor\' | translate}}</label> <hois-value value="currentLanguageNameField(practiceJournal.teacher)"></hois-value> </md-input-container> <md-input-container flex> <label>{{\'practiceJournal.status\' | translate}}</label> <hois-classifier-value ng-model="practiceJournal.status" main-classifier-code="PAEVIK_STAATUS"></hois-classifier-value> </md-input-container> </div> </div> </div> <div flex> <md-table-container> <table md-table md-progress="entries.$promise"> <thead md-head md-on-reorder="loadEntries"> <tr md-row flex> <th md-column>{{\'practiceJournal.practiceJournalEntry.practiceDate\' | translate}}</th> <th md-column style="padding: 0 300px 0 5px !important">{{\'practiceJournal.practiceJournalEntry.description\' | translate}}</th> <th md-column>{{\'practiceJournal.practiceJournalEntry.hours\' | translate}}</th> <th ng-if="practiceJournal.contract" md-column>{{\'practiceJournal.practiceJournalEntry.supervisorComment\' | translate}}</th> <th md-column>{{\'practiceJournal.practiceJournalEntry.teacherComment\' | translate}}</th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="row in practiceJournal.practiceJournalEntries | orderBy: \'practiceDate\'" ng-class-odd="\'odd\'" ng-class-even="\'even\'" md-colors="{background: getEntryColor(row)}"> <td md-cell> <hois-value value="row.practiceDate | hoisDate"></hois-value> </td> <td md-cell colspan="1.5"> <hois-value value="row.description"></hois-value> </td> <td md-cell> <hois-value value="row.hours"></hois-value> </td> <td ng-if="practiceJournal.contract" md-cell> <hois-value value="row.supervisorComment"></hois-value> </td> <td md-cell> <hois-value value="row.teacherComment"></hois-value> </td> </tr> </tbody> </table> </md-table-container> </div> <div>&nbsp;</div> <div class="form-readonly" layout="row"> <md-input-container flex> <label>{{\'practiceJournal.myPracticeReport\' | translate}}</label> <hois-value value="practiceJournal.practiceReport"></hois-value> </md-input-container> </div> <div class="form-readonly" layout="row" flex> <md-input-container flex> <label>{{\'practiceJournal.teacherComment\' | translate}}</label> <hois-value value="practiceJournal.teacherComment"></hois-value> </md-input-container> </div> <div ng-if="practiceJournal.contract" class="form-readonly" layout="row"> <md-input-container flex> <label>{{\'practiceJournal.supervisorComment\' | translate}}</label> <hois-value value="practiceJournal.supervisorComment"></hois-value> </md-input-container> </div> <div>&nbsp;</div> <div layout="row"> <md-button class="md-raised md-default" ng-click="back(\'#/practiceJournals/\')">{{\'main.button.back\' | translate}}</md-button> </div> <div>&nbsp;</div> </form> <div layout="column" flex> <fieldset> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'practiceJournal.supervisorOpinionFile\' | translate}}</legend> <md-table-container> <table md-table class="secondary-table"> <thead md-head> <tr md-row> <th md-column> <span>{{\'file.nameAndFile\' | translate}}</span> </th> <th md-column> <span>{{\'file.additionDate\' | translate}}</span> </th> <th md-column>{{\'file.addedBy\' | translate}}</th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="file in practiceJournal.practiceJournalFiles | orderBy: \'id\'" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell> {{file.oisFile.fname}} <a ng-href="{{getUrl(file.oisFile, \'practicejournal\')}}" target="_blank" rel="noopener noreferrer"> <md-icon md-font-set="material-icons">file_download</md-icon> </a> </td> <td md-cell> {{file.inserted | hoisDateTime}} </td> <td md-cell> {{file.insertedBy}} </td> </tr> </tbody> </table> </md-table-container> </fieldset> </div> <div>&nbsp;</div> <div class="form-readonly" layout="row"> <md-input-container flex> <label>{{\'practiceJournal.teacherOpinion\' | translate}}</label> <hois-value value="practiceJournal.teacherOpinion"></hois-value> </md-input-container> </div> <div ng-if="practiceJournal.contract" class="form-readonly" layout="row"> <md-input-container flex> <label>{{\'practiceJournal.supervisorOpinion\' | translate}}</label> <hois-value value="practiceJournal.supervisorOpinion"></hois-value> </md-input-container> </div> <div class="form-readonly" layout="row"> <md-input-container flex> <label class="textInput">{{\'practiceJournal.grade\' | translate}}</label> <hois-value value="practiceJournal.isHigher && auth.school.letterGrades ? getGrade(practiceJournal.grade).value2 : getGrade(practiceJournal.grade).value"></hois-value> </md-input-container> </div> <div flex> <hois-collapsable label="(\'contract.practicePlan\' | translate)" expanded="false"> <p class="practice-plan">{{practiceJournal.practicePlan}}</p> </hois-collapsable> </div> </div> </div>'),a.put("practiceJournal/vocational.higher.select.dialog.html",'<md-dialog aria-label="vaocational higher select dialog"> <form name="dialogForm" ng-submit="dialogForm.$valid && submit()" novalidate ng-cloak> <md-toolbar> <div class="md-toolbar-tools"> <h2 flex>{{"practiceJournal.vocationalOrHigherSelect" | translate}}</h2> <md-button class="md-icon-button" ng-click="cancel()"> <md-icon md-font-set="material-icons">close</md-icon> </md-button> </div> </md-toolbar> <md-dialog-content> <div class="md-dialog-content"> {{"practiceJournal.vocationalOrHigherPracticeJournal" | translate}} </div> </md-dialog-content> <md-dialog-actions layout="row" layout-align="start start"> <md-button class="md-raised" type="submit">{{\'practiceJournal.button.vocational\' | translate}}</md-button> <md-button class="md-raised" type="submit" ng-click="higher=true">{{"practiceJournal.button.higher" | translate}}</md-button> </md-dialog-actions> </form> </md-dialog>'),a.put("protocol/module.protocol.addStudent.dialog.html",'<md-dialog aria-label="add student dialog" flex="60" flex-sm="100" flex-xs="100"> <form name="dialogForm" ng-submit="loadData()" novalidate ng-cloak> <md-toolbar> <div class="md-toolbar-tools"> <h2>{{\'moduleProtocol.addStudents\' | translate}}</h2> <span flex></span> <md-button class="md-icon-button" ng-click="cancel()"> <md-icon md-font-set="material-icons">close</md-icon> </md-button> </div> </md-toolbar> <md-dialog-content> <div class="md-dialog-content"> <div flex> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex> <label>{{\'student.name\' | translate}}</label> <input type="text" ng-model="criteria.studentName" md-autofocus> </md-input-container> </div> <div layout="row"> <md-button type="submit" class="md-raised md-primary">{{\'main.button.search\' | translate}}</md-button> <md-button class="md-raised" ng-click="clearCriteria()">{{\'main.button.clear\' | translate}}</md-button> </div> </div> <div layout-padding> <div flex> <md-table-container> <table md-table md-progress="tabledata.$promise" md-row-select multiple ng-model="selectedStudents"> <thead md-head md-order="criteria.order" md-on-reorder="loadData"> <tr md-row flex> <th md-column><span>{{\'student.label\' | translate}}</span></th> <th md-column><span>{{\'student.idcode\' | translate}}</span></th> <th md-column><span>{{\'journal.studentGroup\' | translate}}</span></th> <th md-column><span>{{\'curriculum.code\' | translate}}</span></th> </tr> </thead> <tbody md-body> <tr md-row md-select="row.studentId" ng-repeat="row in tabledata.content | orderBy: \'fullname\'" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell>{{row.fullname}}</td> <td md-cell>{{row.idcode}}</td> <td md-cell>{{row.studentGroup}}</td> <td md-cell>{{currentLanguageNameField(row.curriculum)}}</td> </tr> </tbody> </table> </md-table-container> <md-table-pagination md-limit="criteria.size" md-limit-options="[10, 20, 50]" md-page="criteria.page" md-total="{{tabledata.totalElements}}" md-on-paginate="loadData" md-label="{page: \'{{\'main.page\' | translate}}:\', rowsPerPage: \'{{\'main.rowPerPage\' | translate}}:\', of: \'{{\'main.of\' | translate}}\'}" md-page-select></md-table-pagination> </div> </div> </div> </md-dialog-content> <span flex></span> <md-dialog-actions layout="row" layout-align="start center"> <md-button class="md-raised md-primary" ng-click="submit()" ng-disabled="selectedStudents.length === 0">{{\'moduleProtocol.addStudents\' | translate}}</md-button> <md-button class="md-raised" ng-click="cancel()">{{"main.button.close" | translate}}</md-button> </md-dialog-actions> </form> </md-dialog>'),a.put("protocol/module.protocol.edit.html",'<div class="ois-form-layout-padding" ng-cloak> <div flex> <form ng-submit="save()" novalidate layout="column" name="moduleProtocolForm"> <div ng-include="\'protocol/templates/module.protocol.header.tmpl.html\'"></div> <div> <div flex> <md-table-container> <table md-table md-progress="protocol.$promise" md-row-select="formState.canAddDeleteStudents" multiple ng-model="calculateGrades.protocolStudents"> <thead md-head> <tr md-row> <th md-column>{{\'student.label\' | translate}}</th> <th md-column>{{\'student.idcode\' | translate}}</th> <th md-column ng-if="protocol.protocolVdata.isPractice">{{\'moduleProtocol.practiceResult\' | translate}}</th> <th md-column ng-repeat="journal in journals | orderBy: \'nameEt\'"> <div> <a md-colors="{color: \'grey-50\'}" ng-href="/#/journal/{{::journal.id}}/view">{{\'P\' + ($index + 1)}}</a> <md-tooltip> {{journal.nameEt}} - {{\'moduleProtocol.journalCapacity\' | translate:journal}} </md-tooltip> </div> </th> <th md-column ng-if="formState.outcomesAsEntries" ng-repeat="outcome in outcomes | orderBy: \'orderNr\'"> <div> {{\'moduleProtocol.outcome\' | translate}}{{outcome.orderNr + 1}} <md-tooltip>{{outcome.nameEt}}</md-tooltip> </div> </th> <th md-column>{{\'moduleProtocol.moduleGrade\' | translate}}</th> <th md-column ng-if="formState.canChangeConfirmedProtocolGrade">{{\'moduleProtocol.changeReason\' | translate}}</th> <th md-column></th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="row in protocol.protocolStudents | orderBy: \'fullname\'" ng-class-odd="\'odd\'" ng-class-even="\'even\'" md-select="row.id" md-select-id="row.id"> <td md-cell>{{row.fullname}}</td> <td md-cell>{{row.idcode}}</td> <td md-cell ng-if="protocol.protocolVdata.isPractice"> <span ng-repeat="journalResult in row.practiceJournalResults | orderBy: \'inserted\'"> <span> <span>{{gradeValue(journalResult.grade)}}</span> <md-tooltip>{{journalResult.theme ? currentLanguageNameField(journalResult.theme) : currentLanguageNameField(protocol.protocolVdata.curriculumVersionOccupationModule)}}</md-tooltip> <span ng-if="!$last">/</span> </span> </span> </td> <td md-cell ng-repeat="journal in journals | orderBy: \'nameEt\'"> <span ng-if="protocolStudentJournalResults[row.id] && protocolStudentJournalResults[row.id][journal.id]" ng-repeat="grade in protocolStudentJournalResults[row.id][journal.id]"> <span ng-class="{badResult: !gradeUtil.isPositive(grade.code)}">{{grade.value}}</span> <span ng-if="!$last">/</span> </span> </td> <td md-cell ng-if="formState.outcomesAsEntries" ng-repeat="outcome in outcomes | orderBy: \'orderNr\'"> <span ng-if="protocolStudentOutcomeResults[row.id] && protocolStudentOutcomeResults[row.id][outcome.id]"> <span ng-class="{badResult: !gradeUtil.isPositive(protocolStudentOutcomeResults[row.id][outcome.id].code)}">{{protocolStudentOutcomeResults[row.id][outcome.id].value}}</span> </span> </td> <td md-cell> <hois-select style="margin:0px;width:2em" ng-model="row.grade" values="grades" show-property="value" value-property="code" aria-label="grade" ng-change="gradeChanged(row)" ng-disabled="!formState.canEditProtocol"></hois-select> </td> <td md-cell ng-if="formState.canChangeConfirmedProtocolGrade"> <md-input-container ng-if="row.gradeHasChanged"> <input ng-model="row.addInfo" aria-label="addInfo" type="text" md-maxlength="255" ng-change="addInfoChanged(row);" required> </md-input-container> <span ng-if="row.addInfo && !row.gradeHasChanged"> {{row.addInfo}} </span> </td> <td md-cell> <a ng-if="row.canBeDeleted && formState.canAddDeleteStudents" ng-click="deleteProtocolStudent(row)" class="remove">&times;</a> </td> </tr> </tbody> </table> </md-table-container> </div> </div> <br> <div layout="row"> <md-button ng-if="formState.canEditProtocol" class="md-raised" ng-click="calculate()" ng-disabled="calculateGrades.protocolStudents.length === 0">{{\'higherProtocol.calculate\' | translate}}</md-button> </div> <br> <div> <md-button ng-if="formState.canEditProtocol && protocol.status.code !== \'PROTOKOLL_STAATUS_K\'" class="md-raised md-primary" type="submit">{{\'main.button.save\' | translate}}</md-button> <md-button ng-if="formState.canAddDeleteStudents" class="md-raised" ng-click="addProtocolStudents()">{{\'moduleProtocol.addStudents\' | translate}}</md-button> <md-button ng-if="formState.canConfirm===true" class="md-primary md-raised" ng-click="confirm()">{{\'main.button.confirm\' | translate}}</md-button> <md-button ng-if="protocol.canBeDeleted" class="md-raised" ng-click="delete()">{{\'main.button.delete\' | translate}}</md-button> <a ng-show="formState.protocolPdfUrl" ng-href="{{formState.protocolPdfUrl}}" target="_blank" class="md-button md-raised">{{\'main.button.print\' | translate}}</a> <a ng-show="protocol.oisFile" ng-href="{{getUrl(protocol.oisFile, \'protocol\')}}" target="_blank" rel="noopener noreferrer" class="md-button md-raised">{{\'moduleProtocol.downloadSigned\' | translate}}</a> <md-button class="md-raised" ng-click="back(\'#/moduleProtocols/\', moduleProtocolForm)">{{\'main.button.back\' | translate}}</md-button> </div> </form> </div> <br> <div flex> <fieldset> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'moduleProtocol.studyOutcomes\' | translate}}</legend> <div ng-repeat="outcome in protocol.protocolVdata.outcomes | orderBy: \'orderNr\'" flex> <div>{{currentLanguageNameField(outcome)}}</div> </div> </fieldset> </div> </div>'),
a.put("protocol/module.protocol.list.html",'<div class="ois-form-layout-padding ois-form-layout" ng-cloak> <div flex> <fieldset> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'main.searchlabel\' | translate}}</legend> <form name="searchForm" ng-submit="load()" novalidate class="nomargin"> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="50" flex-sm="100" flex-xs="100"> <label class="textInput">{{\'moduleProtocol.studyYear\' | translate}}</label> <hois-select ng-model="criteria.studyYear" type="studyyear" select-current-study-year required autofocus></hois-select> </md-input-container> <md-input-container flex="50" flex-sm="100" flex-xs="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label class="textInput">{{\'moduleProtocol.studentGroup\' | translate}}</label> <hois-select ng-model="criteria.studentGroup" type="studentgroup" criteria="{valid: true}"></hois-select> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="50" flex-sm="100" flex-xs="100"> <label class="textInput">{{\'moduleProtocol.curriculumVersion\' | translate}}</label> <hois-select ng-model="criteria.curriculumVersion" type="curriculumversion" criteria="{higher: false}"></hois-select> </md-input-container> <div flex="50" flex-sm="100" flex-xs="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <hois-autocomplete label="module.label" ng-model="criteria.moduleObject" method="vocationalmodules"></hois-autocomplete> </div> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="50" flex-sm="100" flex-xs="100"> <label class="textInput">{{\'moduleProtocol.status\' | translate}}</label> <hois-classifier-select ng-model="criteria.status" main-classifier-code="PROTOKOLL_STAATUS" model-value-attr="code"></hois-classifier-select> </md-input-container> <md-input-container flex="50" flex-sm="100" flex-xs="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label class="textInput">{{\'moduleProtocol.protocolNumber\' | translate}}</label> <input type="text" ng-model="criteria.protocolNr" md-maxlength="255"> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <div flex="50" flex-sm="100" flex-xs="100"> <div layout="column" flex> <div layout="row" layout-xs="column" flex> <md-input-container> <label>{{\'moduleProtocol.insertedFrom\' | translate}}</label> <md-datepicker ng-model="criteria.insertedFrom"></md-datepicker> </md-input-container> <md-input-container flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'moduleProtocol.insertedThru\' | translate}}</label> <md-datepicker ng-model="criteria.insertedThru" md-min-date="criteria.insertedFrom"></md-datepicker> </md-input-container> </div> </div> </div> <div flex="50" flex-sm="100" flex-xs="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <div layout="column" flex> <div layout="row" layout-xs="column" flex> <md-input-container> <label>{{\'moduleProtocol.confirmedFrom\' | translate}}</label> <md-datepicker ng-model="criteria.confirmDateFrom"></md-datepicker> </md-input-container> <md-input-container flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'moduleProtocol.confirmedThru\' | translate}}</label> <md-datepicker ng-model="criteria.confirmDateThru" md-min-date="criteria.confirmDateFrom"></md-datepicker> </md-input-container> </div> </div> </div> </div> <div layout="row" layout-xs="column"> <md-button type="submit" class="md-raised md-primary">{{\'main.button.search\' | translate}}</md-button> <md-button class="md-raised" ng-click="clearSearch()">{{\'main.button.clear\' | translate}}</md-button> <md-button class="md-raised" ng-href="#/moduleProtocols/new" ng-if="formState.canCreateProtocol">{{\'main.button.create\' | translate}}</md-button> </div> <div flex-xs="0" flex-gt-xs="0" flex-gt-sm="50"></div> </form> </fieldset> </div> </div> <div layout-padding> <div flex> <md-table-container> <table md-table md-progress="tabledata.$promise"> <thead md-head md-order="criteria.order" md-on-reorder="loadData"> <tr md-row> <th md-column>{{\'moduleProtocol.protocolNr\' | translate}}</th> <th md-column>{{\'moduleProtocol.studentGroup\' | translate}}</th> <th md-column>{{\'moduleProtocol.curriculumVersionModule\' | translate}}</th> <th md-column>{{\'main.status\' | translate}}</th> <th md-column>{{\'moduleProtocol.insertedDate\' | translate}}</th> <th md-column>{{\'moduleProtocol.confirmDate\' | translate}}</th> <th md-column>{{\'moduleProtocol.confirmer\' | translate}}</th> <th md-column></th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="row in tabledata.content" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell><a ng-href="#/moduleProtocols/{{::row.id}}/view">{{::row.protocolNr}}</a></td> <td md-cell>{{row.studentGroups.join(\', \')}}</td> <td md-cell>{{curriculumVersionModule(row)}}</td> <td md-cell>{{currentLanguageNameField(row.status)}}</td> <td md-cell>{{row.inserted | hoisDate}}</td> <td md-cell>{{row.confirmDate | hoisDate}}</td> <td md-cell>{{::row.confirmer}}</td> <td md-cell> <md-button ng-if="row.canEdit && row.status.code !== \'PROTOKOLL_STAATUS_K\'" md-no-ink class="md-primary change-button" ng-href="#/moduleProtocols/{{::row.id}}/edit">{{\'main.button.change\' | translate}}</md-button> </td> </tr> </tbody> </table> </md-table-container> <md-table-pagination md-limit="criteria.size" md-limit-options="[10, 20, 50]" md-page="criteria.page" md-total="{{tabledata.totalElements}}" md-on-paginate="loadData" md-label="{page: \'{{\'main.page\' | translate}}:\', rowsPerPage: \'{{\'main.rowPerPage\' | translate}}:\', of: \'{{\'main.of\' | translate}}\'}" md-page-select></md-table-pagination> </div> </div>'),a.put("protocol/module.protocol.mobileSign.dialog.html",'<md-dialog> <form> <md-dialog-content> <div class="md-dialog-content" layout="column" layout-align="center center"> <p>{{ \'moduleProtocol.mobileSign.instructions\' | translate }}</p> <h1>{{challengeID}}</h1> </div> </md-dialog-content> </form> </md-dialog>'),a.put("protocol/module.protocol.new.html",'<div class="ois-form-layout-padding" ng-cloak> <div flex> <form ng-submit="submit()" novalidate layout="column" name="moduleProtocolNewForm"> <div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="50" flex-sm="100" flex-xs="100"> <label class="textInput">{{\'moduleProtocol.studyYear\' | translate}}</label> <hois-select ng-model="formState.studyYear" type="studyyear" select-current-study-year required autofocus></hois-select> </md-input-container> <md-input-container flex="50" flex-sm="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label class="textInput">{{\'teacher.labelVocational\' | translate}}</label> <hois-select ng-model="formState.teacher" values="formState.teachers" required ng-disabled="auth.isTeacher()"></hois-select> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex flex-sm="100"> <label class="textInput">{{\'moduleProtocol.curriculumVersion\' | translate}}</label> <hois-select ng-model="formState.curriculumVersion" type="curriculumversion" criteria="{higher: false, closed: false}" ng-change="curriculumVersionChange()" required></hois-select> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex flex-sm="100"> <label class="textInput">{{\'module.label\' | translate}}</label> <hois-select ng-model="formState.curriculumVersionOccupationModule" values="formState.curriculumVersionOccupationModules" ng-change="curriculumVersionOccupationModuleChange()" required></hois-select> </md-input-container> </div> <br> <div flex> <md-table-container> <table md-table md-progress="tabledata.$promise" md-row-select multiple ng-model="formState.selectedStudents"> <thead md-head> <tr md-row flex> <th md-column><span>{{\'student.label\' | translate}}</span></th> <th md-column><span>{{\'student.idcode\' | translate}}</span></th> <th md-column><span>{{\'main.status\' | translate}}</span></th> <th md-column><span>{{\'moduleProtocol.journalResults\' | translate}}</span></th> </tr> </thead> <tbody md-body> <tr md-row md-select="row.studentId" ng-repeat="row in tabledata.content | orderBy: \'fullname\'" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell>{{row.fullname}}</td> <td md-cell>{{row.idcode}}</td> <td md-cell>{{currentLanguageNameField(row.status)}}</td> <td md-cell>{{journalResultsView(row.journalResults)}}</td> </tr> </tbody> </table> </md-table-container> </div> <br> <div layout="row"> <md-button class="md-raised md-primary" type="submit">{{\'moduleProtocol.create\' | translate}}</md-button> <md-button class="md-raised" ng-click="back(\'#/moduleProtocols/\')">{{\'main.button.back\' | translate}}</md-button> </div> </div> </form> </div> </div>'),a.put("protocol/module.protocol.view.html",'<div class="ois-form-layout-padding" ng-cloak> <div flex> <div> <form layout="column" name="moduleProtocolForm"> <div ng-include="\'protocol/templates/module.protocol.header.tmpl.html\'"></div> <div flex> <md-table-container> <table md-table md-progress="protocol.$promise"> <thead md-head> <tr md-row> <th md-column>{{\'student.label\' | translate}}</th> <th md-column>{{\'student.idcode\' | translate}}</th> <th md-column ng-if="protocol.protocolVdata.isPractice">{{\'moduleProtocol.practiceResult\' | translate}}</th> <th md-column ng-repeat="journal in journals | orderBy: \'nameEt\'"> <div> <a md-colors="{color: \'grey-50\'}" ng-href="/#/journal/{{::journal.id}}/view">{{\'P\' + ($index + 1)}}</a> <md-tooltip> {{journal.nameEt}} - {{\'moduleProtocol.journalCapacity\' | translate:journal}} </md-tooltip> </div> </th> <th md-column ng-if="formState.outcomesAsEntries" ng-repeat="outcome in outcomes | orderBy: \'orderNr\'"> <div> {{\'moduleProtocol.outcome\' | translate}}{{outcome.orderNr + 1}} <md-tooltip>{{outcome.nameEt}}</md-tooltip> </div> </th> <th md-column>{{\'moduleProtocol.moduleGrade\' | translate}}</th> <th md-column>{{\'moduleProtocol.changeReason\' | translate}}</th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="row in protocol.protocolStudents | orderBy: \'fullname\'" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell>{{row.fullname}}</td> <td md-cell>{{row.idcode}}</td> <td md-cell ng-if="protocol.protocolVdata.isPractice"> <span ng-repeat="journalResult in row.practiceJournalResults | orderBy: \'inserted\'"> <span> <span>{{gradeValue(journalResult.grade)}}</span> <md-tooltip>{{journalResult.theme ? currentLanguageNameField(journalResult.theme) : currentLanguageNameField(protocol.protocolVdata.curriculumVersionOccupationModule)}}</md-tooltip> <span ng-if="!$last">/</span> </span> </span> </td> <td md-cell ng-repeat="journal in journals | orderBy: \'nameEt\'"> <span ng-if="protocolStudentJournalResults[row.id] && protocolStudentJournalResults[row.id][journal.id]" ng-repeat="grade in protocolStudentJournalResults[row.id][journal.id]"> <span ng-class="{badResult: !gradeUtil.isPositive(grade.code)}">{{grade.value}}</span> <span ng-if="!$last">/</span> </span> </td> <td md-cell ng-if="formState.outcomesAsEntries" ng-repeat="outcome in outcomes | orderBy: \'orderNr\'"> <span ng-if="protocolStudentOutcomeResults[row.id] && protocolStudentOutcomeResults[row.id][outcome.id]"> <span ng-class="{badResult: !gradeUtil.isPositive(protocolStudentOutcomeResults[row.id][outcome.id].code)}">{{protocolStudentOutcomeResults[row.id][outcome.id].value}}</span> </span> </td> <td md-cell> <span ng-class="{badResult: !gradeUtil.isPositive(row.grade)}">{{gradeValue(row.grade)}}</span> </td> <td md-cell>{{row.addInfo}}</td> </tr> </tbody> </table> </md-table-container> </div> <br> <div> <md-button ng-if="formState.canEditProtocol" class="md-primary md-raised" ng-href="#/moduleProtocols/{{::protocol.id}}/edit">{{\'main.button.change\' | translate}}</md-button> <a ng-show="formState.protocolPdfUrl" ng-href="{{formState.protocolPdfUrl}}" target="_blank" class="md-button md-raised">{{\'main.button.print\' | translate}}</a> <a ng-show="protocol.oisFile" ng-href="{{getUrl(protocol.oisFile, \'protocol\')}}" target="_blank" rel="noopener noreferrer" class="md-button md-raised">{{\'moduleProtocol.downloadSigned\' | translate}}</a> <md-button class="md-raised" ng-click="back(\'#/moduleProtocols\')">{{\'main.button.back\' | translate}}</md-button> </div> </form> </div> </div> </div>'),a.put("reception/reception.saisAdmission.archive.confirm.html",'<md-dialog aria-label="archive confirmation" flex="40" flex-sm="100" flex-xs="100"> <md-dialog-content> <div class="md-dialog-content" layout="row"> <label>{{\'reception.archive.archiveConfirm\' | translate}}{{archive}}?</label> </div> </md-dialog-content> <md-dialog-actions layout="row" layout-align="start center"> <md-button ng-click="submit()" class="md-raised md-primary">{{\'main.yes\' | translate}}</md-button> <md-button ng-click="cancel()" class="md-raised">{{\'main.no\' | translate}}</md-button> </md-dialog-actions> </md-dialog>'),a.put("reception/reception.saisAdmission.archive.html",'<div class="ois-form-layout-padding" ng-cloak> <div flex> <form name="archiveForm" ng-submit="save()" novalidate layout="column"> <div layout="row" flex> <label>{{\'reception.archive.archiveDateTo\' | translate}}</label> <md-input-container flex="100"> <label>{{\'academicCalendar.date\' | translate}}</label> <md-datepicker ng-model="archive.endDate" required flex="100"></md-datepicker> </md-input-container> </div> <div layout="row" flex> <md-button class="md-raised" type="submit">{{\'main.button.archive\' | translate}}</md-button> <md-button class="md-raised" ng-click="back(\'#/saisAdmission/search\')">{{\'main.button.back\' | translate}}</md-button> </div> </form> </div> </div>'),a.put("reception/reception.saisAdmission.import.html",'<div layout-padding> <div flex> <form ng-submit="importAdmissions()" layout="column" name="admissionImportForm"> <div flex> <div flex-xs="100" flex-gt-xs="100" layout="column"> <div layout="row"> <md-input-container flex="25" flex-md="100" flex-sm="100" flex-xs="100"> <label>{{\'reception.admission.saisImportRange\' | translate}}</label> <input type="hidden"> </md-input-container> <md-input-container flex="15" flex-md="100" flex-sm="100" flex-xs="100"> <label>{{\'main.from\' | translate}}</label> <md-datepicker required ng-model="criteria.createDateFrom" md-max-date="criteria.createDateTo"></md-datepicker> </md-input-container> <md-input-container flex="15" flex-md="100" flex-sm="100" flex-xs="100"> <label>{{\'main.thru\' | translate}}</label> <md-datepicker required ng-model="criteria.createDateTo" md-min-date="criteria.createDateFrom"></md-datepicker> </md-input-container> </div> <div layout="row"> <md-button type="submit" class="md-raised md-primary">{{\'reception.admission.saisImportAdmissions\' | translate}}</md-button> </div> </div> </div> </form> </div> </div> <div layout-padding ng-hide="failEmpty"> <div flex> {{\'reception.admission.failedImport\' | translate}} </div> </div> <div layout-padding ng-hide="failEmpty"> <div flex> <md-table-container> <table md-table md-progress="fail"> <thead md-head> <tr md-row> <th md-column>{{\'reception.admission.code\' | translate}}</th> <th md-column>{{\'reception.admission.error\' | translate}}</th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="row in fail" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell>{{::row.code}}</td> <td md-cell>{{row.error | translate}}</td> </tr> </tbody> </table> </md-table-container> </div> </div> <div layout-padding ng-hide="successEmpty"> <div flex> {{\'reception.admission.successfullyImported\' | translate}} </div> </div> <div layout-padding ng-hide="successEmpty"> <div flex> <md-table-container> <table md-table> <thead md-head> <tr md-row> <th md-column>{{\'reception.admission.code\' | translate}}</th> <th md-column>{{\'reception.admission.curriculumVersion\' | translate}}</th> <th md-column>{{\'reception.admission.places\' | translate}}</th> <th md-column>{{\'reception.admission.language\' | translate}}</th> <th md-column>{{\'reception.admission.startDate\' | translate}}</th> <th md-column>{{\'reception.admission.endDate\' | translate}}</th> <th md-column>{{\'reception.admission.studyForm\' | translate}}</th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="row in success" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell>{{::row.code}}</td> <td md-cell>{{::row.curriculumVersion.nameEt}}</td> <td md-cell>{{::row.places}}</td> <td md-cell>{{currentLanguageNameField(row.language)}}</td> <td md-cell>{{row.periodStart | hoisDate}}</td> <td md-cell>{{row.periodEnd | hoisDate}}</td> <td md-cell>{{currentLanguageNameField(row.studyForm)}}</td> </tr> </tbody> </table> </md-table-container> </div> </div>'),a.put("reception/reception.saisAdmission.list.html",'<div class="ois-form-layout-padding ois-form-layout" ng-cloak> <div flex> <fieldset> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'main.searchlabel\' | translate}}</legend> <form ng-submit="loadData()" layout="column"> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="100"> <label>{{\'reception.admission.code\' | translate}}</label> <hois-select ng-model="criteria.code" type="saisadmissioncode" value-property="nameEt"></hois-select> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="100"> <label>{{\'student.curriculum\' | translate}}</label> <hois-select ng-model="criteria.curriculumVersion" type="curriculumversion" criteria="{sais: true}"></hois-select> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="100"> <label>{{\'student.studyForm\' | translate}}</label> <hois-classifier-select ng-model="criteria.studyForm" model-value-attr="code" main-classifier-code="OPPEVORM"></hois-classifier-select> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="100"> <label>{{\'student.fin\' | translate}}</label> <hois-classifier-select ng-model="criteria.fin" model-value-attr="code" main-classifier-code="FINALLIKAS"></hois-classifier-select> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column" class="top-margin"> <md-input-container> <md-checkbox ng-model="criteria.archived" aria-label="{{\'reception.archive.displayArchived\' | translate}}"> {{\'reception.archive.displayArchived\' | translate}} </md-checkbox> </md-input-container> </div> <div layout="row"> <md-button type="submit" class="md-raised md-primary">{{\'main.button.search\' | translate}}</md-button> <md-button class="md-raised" ng-click="clearCriteria()">{{\'main.button.clear\' | translate}}</md-button> <md-button class="md-raised" ng-href="#/reception/saisAdmission/archive" ng-if="archiveButton">{{\'main.button.archive\' | translate}}</md-button> </div> <div flex-xs="0" flex-gt-xs="0" flex-gt-sm="50"></div> </form> </fieldset> </div> </div> <div layout-padding> <div flex> <md-table-container> <table md-table md-progress="tabledata.$promise"> <thead md-head md-order="criteria.order" md-on-reorder="loadData"> <tr md-row> <th md-column md-order-by="code">{{\'reception.admission.code\' | translate}}</th> <th md-column md-order-by="curriculumVersion.curriculum.{{currentLanguageNameField()}}">{{\'student.curriculum\' | translate}}</th> <th md-column md-order-by="places">{{\'reception.admission.places\' | translate}}</th> <th md-column md-order-by="language.{{currentLanguageNameField()}}">{{\'reception.admission.language\' | translate}}</th> <th md-column md-order-by="periodStart">{{\'studyYear.startDate\' | translate}}</th> <th md-column md-order-by="periodEnd">{{\'studyYear.endDate\' | translate}}</th> <th md-column md-order-by="studyForm.{{currentLanguageNameField()}}">{{\'student.studyForm\' | translate}}</th> <th md-column md-order-by="is_archived">{{\'reception.archive.archived\' | translate}}</th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="row in tabledata.content" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell><a ng-href="#/reception/saisAdmission/{{::row.id}}/view">{{::row.code}}</a></td> <td md-cell>{{currentLanguageNameField(row.curriculumVersion)}}</td> <td md-cell>{{::row.places}}</td> <td md-cell>{{currentLanguageNameField(row.language)}}</td> <td md-cell>{{row.periodStart | hoisDate}}</td> <td md-cell>{{row.periodEnd | hoisDate}}</td> <td md-cell>{{currentLanguageNameField(row.studyForm)}}</td> <td md-cell>{{row.archived ? (\'main.yes\' | translate) : (\'main.no\' | translate)}}</td> </tr> </tbody> </table> </md-table-container> <md-table-pagination md-limit="criteria.size" md-limit-options="[10, 20, 50]" md-page="criteria.page" md-total="{{tabledata.totalElements}}" md-on-paginate="loadData" md-label="{page: \'{{\'main.page\' | translate}}:\', rowsPerPage: \'{{\'main.rowPerPage\' | translate}}:\', of: \'{{\'main.of\' | translate}}\'}" md-page-select></md-table-pagination> </div> </div>'),a.put("reception/reception.saisAdmission.view.html",'<div class="ois-form-layout-padding form-readonly" ng-cloak> <div flex> <form layout="column"> <div style="padding-top: 1em"> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container class="label-only" flex="30" flex-sm="100" flex-xs="100"> <label>{{\'reception.admission.code\' | translate}}</label> <hois-value value="saisAdmission.code"></hois-value> </md-input-container> <md-input-container flex="30" flex-sm="100" flex-xs="100"> <label>{{\'student.curriculum\' | translate}}</label> <hois-value value="currentLanguageNameField(saisAdmission.curriculumVersion)"></hois-value> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="30" flex-sm="100" flex-xs="100"> <label>{{\'student.fin\' | translate}}</label> <hois-classifier-value ng-model="saisAdmission.fin" main-classifier-code="FINALLIKAS"></hois-classifier-value> </md-input-container> <md-input-container flex="30" flex-sm="100" flex-xs="100"> <label>{{\'reception.admission.language\' | translate}}</label> <hois-classifier-value ng-model="saisAdmission.language" main-classifier-code="OPPEKEEL"></hois-classifier-value> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="30" flex-sm="100" flex-xs="100"> <label>{{\'reception.admission.places\' | translate}}</label> <hois-value value="saisAdmission.places"></hois-value> </md-input-container> <md-input-container flex="30" flex-sm="100" flex-xs="100"> <label>{{\'student.studyForm\' | translate}}</label> <hois-classifier-value ng-model="saisAdmission.studyForm" main-classifier-code="OPPEVORM"></hois-classifier-value> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="30" flex-sm="100" flex-xs="100"> <label>{{\'student.studyLoad\' | translate}}</label> <hois-classifier-value ng-model="saisAdmission.studyLoad" main-classifier-code="OPPEKOORMUS"></hois-classifier-value> </md-input-container> <md-input-container flex="30" flex-sm="100" flex-xs="100"> <label>{{\'student.studyLevel\' | translate}}</label> <hois-classifier-value ng-model="saisAdmission.studyLevel" main-classifier-code="OPPEASTE"></hois-classifier-value> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container class="label-only" flex="30" flex-sm="100" flex-xs="100"> <label>{{\'studyYear.startDate\' | translate}}</label> <hois-value value="saisAdmission.periodStart | hoisDate"></hois-value> </md-input-container> <md-input-container flex="30" flex-sm="100" flex-xs="100"> <label>{{\'studyYear.endDate\' | translate}}</label> <hois-value value="saisAdmission.periodEnd | hoisDate"></hois-value> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container class="label-only" flex="30" flex-sm="100" flex-xs="100"> <md-checkbox ng-model="saisAdmission.archived" disabled>{{\'reception.archive.archived\' | translate}}</md-checkbox> </md-input-container> </div> <br> <div layout="row"> <md-button ng-href="#/reception/saisAdmission/search" class="md-raised">{{\'main.button.back\' | translate}}</md-button> <md-button ng-click="revertArchived()" ng-if="auth.isAdmin() && saisAdmission.archived" class="md-raised">{{\'reception.archive.revertArchived\' | translate}}</md-button> </div> </div> </form> </div> </div>'),a.put("reception/reception.saisApplication.import.csv.file.dialog.html",'<md-dialog aria-label="import csv dialog"> <form name="dialogForm" ng-cloak> <md-toolbar> <div class="md-toolbar-tools"> <h2>{{"main.button.loadCsvFile" | translate}}</h2> <span flex></span> <md-button class="md-icon-button" ng-click="cancel()"> <md-icon md-font-set="material-icons">close</md-icon> </md-button> </div> </md-toolbar> <md-dialog-content> <span flex></span> <div class="ois-form-layout" layout="column" layout-margin ng-cloak> <div layout="column"> <md-input-container flex> <lf-ng-md-file-input name="file" lf-files="data.file" lf-browse-label="{{\'main.addFile\' | translate}}" lf-remove-label="{{\'main.button.delete\' | translate}}" lf-placeholder="" lf-mimetype="application/vnd.ms-excel|text/csv" accept=".csv" lf-required> </lf-ng-md-file-input> </md-input-container> <div ng-messages="dialogForm.file.$error"> <div class="invalid" ng-message="required">{{\'main.messages.error.selectFile\' | translate}}</div> <div class="invalid" ng-message="mimetype">{{\'main.messages.error.wrongExtension\' | translate}} .csv</div> </div> </div> </div> </md-dialog-content> <span flex></span> <md-dialog-actions layout="row" layout-align="start center"> <md-button class="md-raised md-primary" ng-click="submit()">{{"main.button.add" | translate}}</md-button> <md-button class="md-raised" ng-click="cancel()">{{"main.button.close" | translate}}</md-button> </md-dialog-actions> </form> </md-dialog>'),a.put("reception/reception.saisApplication.import.html",'<div layout-padding> <div flex> <form ng-submit="importApplications()" layout="column" name="applicationImportForm" novalidate> <div flex> <div flex-xs="100" flex-gt-xs="100" layout="column"> <!--div class="indentForToast"></div--> <div layout="row"> <md-input-container flex="35" flex-md="100" flex-sm="100" flex-xs="100"> <label>{{\'reception.application.saisImportRange\' | translate}}</label> <input type="hidden"> </md-input-container> <md-input-container flex="15" flex-md="100" flex-sm="100" flex-xs="100"> <label>{{\'main.from\' | translate}}</label> <md-datepicker ng-required="!((criteria.applicationDateFrom && criteria.applicationDateTo)|| criteria.idCode.length || criteria.admissionCode.length)" ng-model="criteria.applicationDateFrom" md-max-date="criteria.applicationDateTo"></md-datepicker> </md-input-container> <md-input-container flex="15" flex-md="100" flex-sm="100" flex-xs="100"> <label>{{\'main.thru\' | translate}}</label> <md-datepicker ng-required="!((criteria.applicationDateFrom && criteria.applicationDateTo)|| criteria.idCode.length || criteria.admissionCode.length)" ng-model="criteria.applicationDateTo" md-min-date="criteria.applicationDateFrom"></md-datepicker> </md-input-container> </div> <div> <md-list flex-xs="100" flex-gt-xs="100" flex="60"> <md-list-item ng-repeat="status in statusList"> <span> <md-checkbox ng-model="status._selected"> {{currentLanguageNameField(status)}} </md-checkbox> </span> </md-list-item> </md-list> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="60" flex-sm="100" flex-xs="100"> <label class="textInput">{{\'reception.application.candidateIdCode\' | translate}}</label> <input ng-model="criteria.idCode" type="text" ng-required="!((criteria.applicationDateFrom && criteria.applicationDateTo)|| criteria.idCode.length || criteria.admissionCode.length)"> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="60" flex-sm="100" flex-xs="100"> <label class="textInput">{{\'reception.admission.code\' | translate}}</label> <hois-select ng-model="criteria.admissionCode" type="saisadmissioncodearchived" value-property="nameEt" ng-required="!((criteria.applicationDateFrom && criteria.applicationDateTo)|| criteria.idCode.length || criteria.admissionCode.length)"></hois-select> </md-input-container> </div> <div layout="row"> <md-button type="submit" class="md-raised md-primary">{{\'reception.application.saisImportApplications\' | translate}}</md-button> </div> </div> </div> </form> </div> </div> <div ng-if="failed.length > 0"> <div layout-padding> <div flex> {{\'reception.admission.failedImport\' | translate}} </div> </div> <div layout-padding> <div flex> <md-table-container> <table md-table md-progress="fail"> <thead md-head> <tr md-row> <th md-column>{{\'reception.application.date\' | translate}}</th> <th md-column>{{\'reception.application.message\' | translate}}</th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="row in failed" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell>{{row.applicationDate | hoisDate}}</td> <td md-cell>{{row.message | translate}}</td> </tr> </tbody> </table> </md-table-container> </div> </div> </div> <div ng-if="successful.length > 0"> <div layout-padding> <div flex> {{\'reception.application.successfullyImported\' | translate}} </div> </div> <div layout-padding> <div flex> <md-table-container> <table md-table> <thead md-head> <tr md-row> <th md-column>{{\'reception.application.nr\' | translate}}</th> <th md-column>{{\'reception.application.idCode\' | translate}}</th> <th md-column>{{\'reception.application.firstName\' | translate}}</th> <th md-column>{{\'reception.application.lastName\' | translate}}</th> <th md-column>{{\'reception.application.admissionCode\' | translate}}</th> <th md-column>{{\'reception.application.status\' | translate}}</th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="row in successful" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell>{{::row.applicationNr}}</td> <td md-cell>{{::row.idCode}}</td> <td md-cell>{{::row.firstName}}</td> <td md-cell>{{::row.lastName}}</td> <td md-cell>{{::row.admissionCode}}</td> <td md-cell>{{currentLanguageNameField(row.applicationStatus)}}</td> </tr> </tbody> </table> </md-table-container> </div> </div> </div>'),a.put("reception/reception.saisApplication.import.result.dialog.html",'<md-dialog aria-label="import csv result dialog"> <form name="dialogForm" ng-cloak> <md-toolbar> <div class="md-toolbar-tools"> <h2>{{"reception.application.importFromCsvFile" | translate}}</h2> </div> </md-toolbar> <md-dialog-content> <span flex></span> <div class="ois-form-layout" layout="column" layout-margin ng-cloak> <div ng-show="!result"> <p>{{"main.proccessingFile" | translate}}</p> <div layout="row" layout-align="space-around"> <md-progress-circular md-mode="indeterminate"></md-progress-circular> </div> </div> <div ng-show="result"> <h2>{{\'reception.application.added\' | translate}}</h2> <md-table-container> <table md-table> <thead md-head> <tr md-row> <th md-column>{{\'reception.application.csvFileRowNr\' | translate}}</th> <th md-column>{{\'reception.application.nr\' | translate}}</th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="row in result.successful" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell>{{::row.rowNr}}</td> <td md-cell>{{::row.message}}</td> </tr> </tbody> </table> </md-table-container> <span flex></span> <h2>{{\'reception.application.failed\' | translate}}</h2> <md-table-container> <table md-table> <thead md-head> <tr md-row> <th md-column>{{\'reception.application.csvFileRowNr\' | translate}}</th> <th md-column>{{\'message.label\' | translate}}</th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="row in result.failed" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell>{{::row.rowNr}}</td> <td md-cell>{{::row.message}}</td> </tr> </tbody> </table> </md-table-container> </div> </div> </md-dialog-content> <span flex></span> <md-dialog-actions layout="row" layout-align="start center"> <md-button ng-if="result" class="md-raised md-primary" ng-click="cancel()">{{"main.button.close" | translate}}</md-button> </md-dialog-actions> </form> </md-dialog>'),
a.put("reception/reception.saisApplication.list.html",'<div class="ois-form-layout-padding ois-form-layout" ng-cloak> <div flex> <fieldset> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'main.searchlabel\' | translate}}</legend> <form name="searchForm" ng-submit="searchForm.$valid && loadData()" layout="column"> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="100"> <label>{{\'reception.admission.code\' | translate}}</label> <hois-select ng-model="criteria.code" type="saisadmissioncode" value-property="nameEt" multiple></hois-select> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="100"> <label>{{\'reception.application.status\' | translate}}</label> <hois-classifier-select ng-model="criteria.status" model-value-attr="code" main-classifier-code="SAIS_AVALDUSESTAATUS" multiple></hois-classifier-select> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="100"> <label class="textInput">{{\'reception.application.candidateName\' | translate}}</label> <input ng-model="criteria.name" type="text" md-maxlength="255"> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="100"> <label class="textInput">{{\'reception.application.candidateIdCode\' | translate}}</label> <input ng-model="criteria.idcode" type="text" minlength="11" md-maxlength="11"> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="30" flex-sm="100" flex-xs="100"> <md-checkbox ng-model="criteria.showRevoked" aria-label="show revoked"> {{\'reception.application.showRevoked\' | translate}} </md-checkbox> </md-input-container> <md-input-container flex="30" flex-sm="100" flex-xs="100"> <md-checkbox ng-model="criteria.addedToDirective" aria-label="added to directive"> {{\'reception.application.showAddedToDirective\' | translate}} </md-checkbox> </md-input-container> <md-input-container flex="30" flex-sm="100" flex-xs="100"> <md-checkbox ng-model="criteria.archived" aria-label="archived"> {{\'reception.archive.displayArchived\' | translate}} </md-checkbox> </md-input-container> </div> <div layout="row"> <md-button type="submit" class="md-raised md-primary">{{\'main.button.search\' | translate}}</md-button> <md-button class="md-raised" ng-click="clearCriteria()">{{\'main.button.clear\' | translate}}</md-button> <md-button class="md-raised" ng-if="canEdit" ng-click="importFromCsvFile()">{{\'main.button.importFromCsvFile\' | translate}}</md-button> <a ng-href="{{classifiersFileUrl}}" class="md-button md-raised">{{\'main.button.classifiersFile\' | translate}}</a> <a ng-href="{{csvSampleFileUrl}}" class="md-button md-raised">{{\'main.button.csvSampleFile\' | translate}}</a> </div> <div flex-xs="0" flex-gt-xs="0" flex-gt-sm="50"></div> </form> </fieldset> </div> </div> <div layout-padding> <div flex> <md-table-container> <table md-table md-progress="tabledata.$promise"> <thead md-head md-order="criteria.order" md-on-reorder="loadData"> <tr md-row> <th md-column md-order-by="applicationNr">{{\'reception.application.nr\' | translate}}</th> <th md-column md-order-by="idcode">{{\'student.idcode\' | translate}}</th> <th md-column md-order-by="firstname">{{\'student.firstname\' | translate}}</th> <th md-column md-order-by="lastname">{{\'student.lastname\' | translate}}</th> <th md-column md-order-by="saisAdmissionCode">{{\'reception.admission.code\' | translate}}</th> <th md-column md-order-by="statusCode">{{\'reception.application.status\' | translate}}</th> <th md-column md-order-by="addedToDirective">{{\'reception.application.addedToDirective\' | translate}}</th> <th md-column md-order-by="is_archived">{{\'reception.archive.archived\' | translate}}</th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="row in tabledata.content" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell><a ng-href="/#/reception/saisApplication/{{::row.id}}/view">{{::row.applicationNr}}</a></td> <td md-cell>{{::row.idcode}}</td> <td md-cell>{{::row.firstname}}</td> <td md-cell>{{::row.lastname}}</td> <td md-cell>{{::row.saisAdmissionCode}}</td> <td md-cell>{{currentLanguageNameField(row.status)}}</td> <td md-cell>{{(row.addedToDirective ? \'main.yes\' : \'main.no\') | translate}}</td> <td md-cell>{{row.archived ? (\'main.yes\' | translate) : (\'main.no\' | translate)}}</td> </tr> </tbody> </table> </md-table-container> <md-table-pagination md-limit="criteria.size" md-limit-options="[10, 20, 50]" md-page="criteria.page" md-total="{{tabledata.totalElements}}" md-on-paginate="loadData" md-label="{page: \'{{\'main.page\' | translate}}:\', rowsPerPage: \'{{\'main.rowPerPage\' | translate}}:\', of: \'{{\'main.of\' | translate}}\'}" md-page-select></md-table-pagination> </div> </div>'),a.put("reception/reception.saisApplication.view.html",'<div class="ois-form-layout-padding form-readonly" ng-cloak> <div> <form> <div style="padding-top: 1em"> <div layout="column"> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex> <label>{{\'reception.application.nr\' | translate}}</label> <hois-value value="saisApplication.applicationNr"></hois-value> </md-input-container> <md-input-container flex> <label>{{\'person.idcode\' | translate}}</label> <hois-value value="saisApplication.idcode"></hois-value> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex> <label>{{\'person.firstname\' | translate}}</label> <hois-value value="saisApplication.firstname"></hois-value> </md-input-container> <md-input-container flex> <label>{{\'person.lastname\' | translate}}</label> <hois-value value="saisApplication.lastname"></hois-value> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex> <label>{{\'person.sex\' | translate}}</label> <hois-classifier-value ng-model="saisApplication.sex" main-classifier-code="SUGU"></hois-classifier-value> </md-input-container> <md-input-container flex> <label>{{\'student.residenceCountry\' | translate}}</label> <hois-classifier-value ng-model="saisApplication.residenceCountry" main-classifier-code="RIIK"></hois-classifier-value> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex> <label>{{\'student.citizenship\' | translate}}</label> <hois-classifier-value ng-model="saisApplication.citizenship" main-classifier-code="RIIK"></hois-classifier-value> </md-input-container> <md-input-container flex> <label>{{\'student.studyLanguage\' | translate}}</label> <hois-classifier-value ng-model="saisApplication.language" main-classifier-code="OPPEKEEL"></hois-classifier-value> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex> <label>{{\'reception.application.email\' | translate}}</label> <hois-value value="saisApplication.email"></hois-value> </md-input-container> <md-input-container flex> <label>{{\'reception.application.address\' | translate}}</label> <hois-value value="saisApplication.address"></hois-value> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex> <label>{{\'student.phone\' | translate}}</label> <hois-value value="saisApplication.phone"></hois-value> </md-input-container> <md-input-container flex> <label>{{\'reception.application.status\' | translate}}</label> <hois-classifier-value ng-model="saisApplication.status" main-classifier-code="SAIS_AVALDUSESTAATUS"></hois-classifier-value> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex> <label>{{\'student.studyForm\' | translate}}</label> <hois-classifier-value ng-model="saisApplication.studyForm" main-classifier-code="OPPEVORM"></hois-classifier-value> </md-input-container> <md-input-container ng-if="saisApplication.isHigher" flex> <label>{{\'student.studyLoad\' | translate}}</label> <hois-classifier-value ng-model="saisApplication.studyLoad" main-classifier-code="OPPEKOORMUS"></hois-classifier-value> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex> <label>{{\'reception.application.submissionDate\' | translate}}</label> <hois-value value="saisApplication.submitted | hoisDate"></hois-value> </md-input-container> <md-input-container flex> <label>{{\'reception.application.changeDate\' | translate}}</label> <hois-value value="saisApplication.saisChanged | hoisDate"></hois-value> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex> <label>{{\'reception.admission.code\' | translate}}</label> <hois-value value="saisApplication.saisAdmissionCode"></hois-value> </md-input-container> </div> </div> <div layout="column"> <div layout="row" class="top-margin"> <h2>{{\'reception.application.graduationHistory\' | translate}} </h2> </div> <table md-table> <thead md-head> <tr md-row> <th md-column>{{\'school.label\' | translate}}</th> <th md-column>{{\'student.studyStart\' | translate}}</th> <th md-column>{{\'student.studyEnd\' | translate}}</th> </tr> </thead> <tbody md-body> <tr md-row flex ng-repeat="graduatedSchool in saisApplication.graduatedSchools | orderBy: \'id\'" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell>{{graduatedSchool.name}}</td> <td md-cell>{{graduatedSchool.startDate | hoisDate}}</td> <td md-cell>{{graduatedSchool.endDate | hoisDate}}</td> </tr> </tbody> </table> </div> <div layout="column"> <div layout="row" class="top-margin"> <h2>{{\'reception.application.gradesResults\' | translate}} </h2> </div> <table md-table> <thead md-head> <tr md-row> <th md-column>{{\'subject.name\' | translate}}</th> <th md-column>{{\'subject.type\' | translate}}</th> <th md-column>{{\'main.result\' | translate}}</th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="grade in saisApplication.grades | orderBy: \'id\'" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell>{{grade.subjectName}}</td> <td md-cell>{{grade.subjectType}}</td> <td md-cell>{{grade.grade}}</td> </tr> </tbody> </table> </div> <div layout="column"> <div layout="row" class="top-margin"> <h2>{{\'reception.application.otherData\' | translate}} </h2> </div> <table md-table> <thead md-head> <tr md-row> <th md-column>{{\'main.name\' | translate}}</th> <th md-column>{{\'main.value\' | translate}}</th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="otherData in saisApplication.otherData | orderBy: \'id\'" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell>{{otherData.otherDataName}}</td> <td md-cell>{{otherData.otherDataValue}}</td> </tr> </tbody> </table> </div> <br> <div layout="row"> <md-button ng-href="#/reception/saisApplication/search" class="md-raised">{{\'main.button.back\' | translate}}</md-button> <md-button ng-click="confirm()" ng-if="auth.isAdmin() && !saisApplication.relatedToDirective" class="md-raised">{{\'main.button.delete\' | translate}}</md-button> </div> </div> </form> </div> </div>'),a.put("report/curriculums.completion.html",'<div class="ois-form-layout-padding ois-form-layout" ng-cloak> <div flex> <fieldset> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'main.searchlabel\' | translate}}</legend> <form name="searchForm" ng-submit="searchForm.$valid && loadData()" novalidate> <div layout="row"> <md-input-container flex="45" flex-sm="100" flex-xs="100"> <label class="textInput">{{\'report.curriculumscompletion.name\' | translate}}</label> <input ng-model="criteria.name" name="name" type="text" md-maxlength="255" autofocus> </md-input-container> <div flex="50" flex-offset="5"> <hois-autocomplete ng-model="criteria.curriculumVersion" method="curriculumversions" label="report.curriculumscompletion.curriculum"></hois-autocomplete> </div> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="45"> <label>{{\'report.curriculumscompletion.studentgroup\' | translate}}</label> <hois-select ng-model="criteria.studentGroup" type="studentgroup"></hois-select> </md-input-container> <md-input-container flex="45" flex-offset="5" flex-sm="100" flex-xs="100"> <label>{{\'report.curriculumscompletion.studyForm\' | translate}}</label> <hois-classifier-select ng-model="criteria.studyForm" model-value-attr="code" main-classifier-code="OPPEVORM"></hois-classifier-select> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="45" ng-if="auth.higher"> <label>{{\'report.curriculumscompletion.studyLoad\' | translate}}</label> <hois-classifier-select ng-model="criteria.studyLoad" model-value-attr="code" main-classifier-code="OPPEKOORMUS"></hois-classifier-select> </md-input-container> </div> <div layout="row"> <md-button type="submit" class="md-raised md-primary">{{\'main.button.search\' | translate}}</md-button> <md-button class="md-raised" ng-click="clearCriteria()">{{\'main.button.clear\' | translate}}</md-button> <a ng-href="{{excel(formState.xlsUrl, criteria)}}" target="_blank" class="md-button md-raised">{{\'report.excel\' | translate}}</a> </div> <div flex-xs="0" flex-gt-xs="0" flex-gt-sm="50"></div> </form> </fieldset> </div> </div> <div layout-padding> <div flex> <md-table-container> <table md-table md-progress="tabledata.$promise"> <thead md-head md-order="criteria.order" md-on-reorder="loadData"> <tr md-row> <th md-column md-order-by="p.lastname,p.firstname">{{\'report.curriculumscompletion.name\' | translate}}</th> <th md-column md-order-by="cv.code">{{\'report.curriculumscompletion.curriculum\' | translate}}</th> <th md-column md-order-by="sg.code">{{\'report.curriculumscompletion.studentgroup\' | translate}}</th> <th md-column>{{\'report.curriculumscompletion.studyPeriodCount\' | translate}}</th> <th md-column>{{\'report.curriculumscompletion.studyYearCount\' | translate}}</th> <th md-column><span translate="report.curriculumscompletion.creditsLastStudyPeriod"></span></th> <th md-column><span translate="report.curriculumscompletion.credits"></span></th> <th md-column><span translate="report.curriculumscompletion.curriculumCompletion"></span></th> <th md-column ng-if="auth.higher">{{\'report.curriculumscompletion.studyLoad\' | translate}}</th> <th md-column>{{\'report.curriculumscompletion.studyForm\' | translate}}</th> <th md-column>{{\'report.curriculumscompletion.status\' | translate}}</th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="row in tabledata.content" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell> <a md-no-ink class="md-primary" ng-href="#/students/{{::row.id}}/main">{{::row.fullName}}</a> </td> <td md-cell>{{currentLanguageNameField(row.curriculumVersion)}}</td> <td md-cell>{{::row.studentGroup}}</td> <td md-cell>{{::row.studyPeriodCount}}</td> <td md-cell>{{::row.studyYearCount}}</td> <td md-cell>{{::row.creditsLastStudyPeriod}}</td> <td md-cell>{{::row.credits}}</td> <td md-cell>{{::row.curriculumCompletion}}</td> <td md-cell ng-if="auth.higher">{{currentLanguageNameField(row.studyLoad)}}</td> <td md-cell>{{currentLanguageNameField(row.studyForm)}}</td> <td md-cell>{{currentLanguageNameField(row.status)}}</td> </tr> </tbody> </table> </md-table-container> <md-table-pagination md-limit="criteria.size" md-limit-options="[10, 20, 50]" md-page="criteria.page" md-total="{{tabledata.totalElements}}" md-on-paginate="loadData" md-label="{page: \'{{\'main.page\' | translate}}:\', rowsPerPage: \'{{\'main.rowPerPage\' | translate}}:\', of: \'{{\'main.of\' | translate}}\'}" md-page-select></md-table-pagination> </div> </div>'),a.put("report/student.html",'<div class="ois-form-layout-padding ois-form-layout" ng-cloak> <div flex> <fieldset> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'main.searchlabel\' | translate}}</legend> <form name="searchForm" ng-submit="searchForm.$valid && loadData()"> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="45" flex-sm="100" flex-xs="100"> <label class="textInput">{{\'report.student.name\' | translate}}</label> <input ng-model="criteria.name" name="name" type="text" md-maxlength="255" autofocus> </md-input-container> <md-input-container flex="50" flex-sm="100" flex-xs="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label class="textInput">{{\'report.student.idcode\' | translate}}</label> <input ng-model="criteria.idcode" name="idcode" type="text" minlength="11" md-maxlength="11"> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <div layout="row" flex="45"> <md-input-container> <label>{{\'report.student.birthdate_from\' | translate}}</label> <md-datepicker ng-model="criteria.birthdateFrom" md-max-date="criteria.birthdateThru"></md-datepicker> </md-input-container> <md-input-container flex-offset="5"> <label>{{\'report.student.birthdate_thru\' | translate}}</label> <md-datepicker ng-model="criteria.birthdateThru" md-min-date="criteria.birthdateFrom"></md-datepicker> </md-input-container> </div> <div layout="row" flex="50" flex-sm="100" flex-xs="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <md-input-container> <label>{{\'report.student.studyStart_from\' | translate}}</label> <md-datepicker ng-model="criteria.studyStartFrom" md-max-date="criteria.studyStartThru"></md-datepicker> </md-input-container> <md-input-container flex-offset="5"> <label>{{\'report.student.studyStart_thru\' | translate}}</label> <md-datepicker ng-model="criteria.studyStartThru" md-min-date="criteria.studyStartFrom"></md-datepicker> </md-input-container> </div> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="45" flex-sm="100" flex-xs="100"> <label>{{\'report.student.studyLevel\' | translate}}</label> <hois-classifier-select ng-model="criteria.studyLevel" model-value-attr="code" main-classifier-code="OPPEASTE"></hois-classifier-select> </md-input-container> <div flex="45" flex-offset="5"> <hois-autocomplete ng-model="criteria.curriculumVersion" method="curriculumversions" label="report.student.curriculum" md-selected-item-change="curriculumVersionChanged"></hois-autocomplete> </div> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="45"> <label class="textInput">{{\'report.student.studentGroup\' | translate}}</label> <hois-select ng-model="criteria.studentGroup" values="formState.studentGroups" filter-values="formState.filterStudentGroups"></hois-select> </md-input-container> <md-input-container flex="45" flex-offset="5" flex-sm="100" flex-xs="100" ng-if="auth.higher"> <label>{{\'report.student.studyLoad\' | translate}}</label> <hois-classifier-select ng-model="criteria.studyLoad" model-value-attr="code" main-classifier-code="OPPEKOORMUS"></hois-classifier-select> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="45"> <label class="textInput">{{\'report.student.studyForm\' | translate}}</label> <hois-classifier-select ng-model="criteria.studyForm" model-value-attr="code" main-classifier-code="OPPEVORM"></hois-classifier-select> </md-input-container> <md-input-container flex="45" flex-offset="5" flex-sm="100" flex-xs="100"> <label>{{\'report.student.status\' | translate}}</label> <hois-classifier-select ng-model="criteria.status" model-value-attr="code" main-classifier-code="OPPURSTAATUS"></hois-classifier-select> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="45"> <label class="textInput">{{\'report.student.fin\' | translate}}</label> <hois-classifier-select ng-model="criteria.fin" model-value-attr="code" main-classifier-code="FINALLIKAS"></hois-classifier-select> </md-input-container> <md-input-container flex="45" flex-offset="5" flex-sm="100" flex-xs="100"> <label>{{\'report.student.language\' | translate}}</label> <hois-classifier-select ng-model="criteria.language" model-value-attr="code" main-classifier-code="OPPEKEEL"></hois-classifier-select> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="45"> <label class="textInput">{{\'report.student.finSpecific\' | translate}}</label> <hois-classifier-select ng-model="criteria.finSpecific" model-value-attr="code" main-classifier-code="FINTAPSUSTUS"></hois-classifier-select> </md-input-container> </div> <div layout="row"> <md-button type="submit" class="md-raised md-primary">{{\'main.button.search\' | translate}}</md-button> <md-button class="md-raised" ng-click="clearCriteria()">{{\'main.button.clear\' | translate}}</md-button> <a ng-href="{{excel(formState.xlsUrl, criteria)}}" target="_blank" class="md-button md-raised">{{\'report.excel\' | translate}}</a> </div> <div flex-xs="0" flex-gt-xs="0" flex-gt-sm="50"></div> </form> </fieldset> </div> </div> <div layout-padding> <div flex> <md-table-container> <table md-table md-progress="tabledata.$promise"> <thead md-head md-order="criteria.order" md-on-reorder="loadData"> <tr md-row> <th md-column md-order-by="p.lastname,p.firstname">{{\'report.student.name\' | translate}}</th> <th md-column md-order-by="p.idcode">{{\'report.student.idcode\' | translate}}</th> <th md-column md-order-by="s.email">{{\'report.student.email\' | translate}}</th> <th md-column md-order-by="s.studyStart">{{\'report.student.studyStart\' | translate}}</th> <th md-column>{{\'report.student.studyLevel\' | translate}}</th> <th md-column md-order-by="cv.code">{{\'report.student.curriculum\' | translate}}</th> <th md-column md-order-by="c.merCode">{{\'report.student.merCode\' | translate}}</th> <th md-column md-order-by="sg.code">{{\'report.student.studentGroup\' | translate}}</th> <th md-column ng-if="auth.higher">{{\'report.student.studyLoad\' | translate}}</th> <th md-column>{{\'report.student.studyForm\' | translate}}</th> <th md-column>{{\'report.student.status\' | translate}}</th> <th md-column>{{\'report.student.fin\' | translate}}</th> <th md-column>{{\'report.student.finSpecific\' | translate}}</th> <th md-column>{{\'report.student.language\' | translate}}</th> <th md-column>{{\'report.student.credits\' | translate}}</th> <th md-column>{{\'report.student.occupationcertificate\' | translate}}</th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="row in tabledata.content" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell> <a md-no-ink class="md-primary" ng-href="#/students/{{::row.id}}/main">{{::row.fullName}}</a> </td> <td md-cell>{{::row.idcode}}</td> <td md-cell>{{::row.email}}</td> <td md-cell>{{row.studyStart | hoisDate}}</td> <td md-cell>{{currentLanguageNameField(row.studyLevel)}}</td> <td md-cell>{{currentLanguageNameField(row.curriculumVersion)}}</td> <td md-cell>{{::row.merCode}}</td> <td md-cell>{{::row.studentGroup}}</td> <td md-cell ng-if="auth.higher">{{currentLanguageNameField(row.studyLoad)}}</td> <td md-cell>{{currentLanguageNameField(row.studyForm)}}</td> <td md-cell>{{currentLanguageNameField(row.status)}}</td> <td md-cell>{{currentLanguageNameField(row.fin)}}</td> <td md-cell>{{currentLanguageNameField(row.finSpecific)}}</td> <td md-cell>{{currentLanguageNameField(row.language)}}</td> <td md-cell>{{::row.credits}}</td> <td md-cell> <div ng-repeat="cert in row.occupationCertificates"> <hr ng-if="!$first"> {{::cert.certificateNr}}&nbsp;{{currentLanguageNameField(cert.occupation)}} </div> </td> </tr> </tbody> </table> </md-table-container> <md-table-pagination md-limit="criteria.size" md-limit-options="[10, 20, 50]" md-page="criteria.page" md-total="{{tabledata.totalElements}}" md-on-paginate="loadData" md-label="{page: \'{{\'main.page\' | translate}}:\', rowsPerPage: \'{{\'main.rowPerPage\' | translate}}:\', of: \'{{\'main.of\' | translate}}\'}" md-page-select></md-table-pagination> </div> </div>'),a.put("report/student.statistics.byperiod.html",'<div class="ois-form-layout-padding ois-form-layout" ng-cloak> <div flex> <fieldset> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'main.searchlabel\' | translate}}</legend> <form ng-submit="loadData()" novalidate> <div layout="row"> <div layout="row" flex="45"> <md-input-container> <label>{{\'main.from\' | translate}}</label> <md-datepicker ng-model="criteria.from"></md-datepicker> </md-input-container> <md-input-container flex-offset="5"> <label>{{\'main.thru\' | translate}}</label> <md-datepicker ng-model="criteria.thru" md-min-date="criteria.from"></md-datepicker> </md-input-container> </div> </div> <div layout="row"> <div flex="45"> <hois-autocomplete ng-model="criteria.curriculum" method="curriculums" label="report.studentstatisticsbyperiod.curriculum" multiple></hois-autocomplete> </div> <md-input-container flex="50" flex-offset="5"> <label>{{\'report.studentstatisticsbyperiod.result\' | translate}}</label> <md-select ng-model="criteria.result"> <md-option md-option-empty></md-option> <md-option value="OPPURSTAATUS_A">{{\'report.studentstatisticsbyperiod.OPPURSTAATUS_A\' | translate}}</md-option> <md-option value="OPPURSTAATUS_K">{{\'report.studentstatisticsbyperiod.OPPURSTAATUS_K\' | translate}}</md-option> <md-option value="OPPURSTAATUS_L">{{\'report.studentstatisticsbyperiod.OPPURSTAATUS_L\' | translate}}</md-option> </md-select> </md-input-container> </div> <div layout="row"> <md-button type="submit" class="md-raised md-primary">{{\'main.button.search\' | translate}}</md-button> <md-button class="md-raised" ng-click="clearCriteria()">{{\'main.button.clear\' | translate}}</md-button> <a ng-href="{{excel(formState.xlsUrl, criteria)}}" target="_blank" class="md-button md-raised">{{\'report.excel\' | translate}}</a> </div> <div flex-xs="0" flex-gt-xs="0" flex-gt-sm="50"></div> </form> </fieldset> </div> </div> <div layout-padding> <div flex> <md-table-container> <table md-table md-progress="tabledata.$promise"> <thead md-head md-order="criteria.order" md-on-reorder="loadData"> <tr md-row> <th md-column md-order-by="curriculumVersion.code">{{\'report.studentstatisticsbyperiod.curriculum\' | translate}}</th> <th md-column md-numeric ng-if="formState.resultType !== \'OPPURSTAATUS_L\'" ng-repeat="cl in formState.resultDef">{{currentLanguageNameField(cl)}}</th> <th md-column md-numeric>{{formState.resultType === \'OPPURSTAATUS_L\' ? \'report.studentstatisticsbyperiod.finished\' : \'report.studentstatisticsbyperiod.total\' | translate}}</th> <th md-column md-numeric ng-if="formState.resultType === \'OPPURSTAATUS_L\'">{{auth.higher ? \'report.studentstatisticsbyperiod.isCumLaude\' : \'report.studentstatisticsbyperiod.isCumLaudeVoc\' | translate}}</th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="row in tabledata.content" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell>{{currentLanguageNameField(row)}}</td> <td md-cell ng-if="formState.resultType !== \'OPPURSTAATUS_L\'" ng-repeat="cl in formState.resultDef">{{::row.result[cl.code] || 0}}</td> <td md-cell>{{::row.total}}</td> <td md-cell ng-if="formState.resultType === \'OPPURSTAATUS_L\'">{{::row.result[\'true\'] || 0}}</td> </tr> </tbody> </table> </md-table-container> <md-table-pagination md-limit="criteria.size" md-limit-options="[10, 20, 50]" md-page="criteria.page" md-total="{{tabledata.totalElements}}" md-on-paginate="loadData" md-label="{page: \'{{\'main.page\' | translate}}:\', rowsPerPage: \'{{\'main.rowPerPage\' | translate}}:\', of: \'{{\'main.of\' | translate}}\'}" md-page-select></md-table-pagination> </div> </div>'),a.put("report/student.statistics.html",'<div class="ois-form-layout-padding ois-form-layout" ng-cloak> <div flex> <fieldset> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'main.searchlabel\' | translate}}</legend> <form name="searchForm" ng-submit="load()" novalidate> <div layout="row"> <div layout="row" flex="45"> <md-input-container> <label>{{\'main.date\' | translate}}</label> <md-datepicker ng-model="criteria.date" required></md-datepicker> </md-input-container> </div> </div> <div layout="row"> <div flex="45"> <hois-autocomplete ng-model="criteria.curriculum" method="curriculums" label="report.studentstatistics.curriculum" multiple></hois-autocomplete> </div> <md-input-container flex="50" flex-offset="5"> <label>{{\'report.studentstatistics.result\' | translate}}</label> <md-select ng-model="criteria.result"> <md-option md-option-empty></md-option> <md-option value="FINALLIKAS">{{\'report.studentstatistics.FINALLIKAS\' | translate}}</md-option> <md-option value="OPPEVORM">{{\'report.studentstatistics.OPPEVORM\' | translate}}</md-option> <md-option value="OPPURSTAATUS">{{\'report.studentstatistics.OPPURSTAATUS\' | translate}}</md-option> </md-select> </md-input-container> </div> <div layout="row"> <md-button type="submit" class="md-raised md-primary">{{\'main.button.search\' | translate}}</md-button> <md-button class="md-raised" ng-click="clearCriteria()">{{\'main.button.clear\' | translate}}</md-button> <a ng-href="{{excel(formState.xlsUrl, savedCriteria)}}" target="_blank" class="md-button md-raised">{{\'report.excel\' | translate}}</a> </div> <div flex-xs="0" flex-gt-xs="0" flex-gt-sm="50"></div> </form> </fieldset> </div> </div> <div layout-padding> <div flex> <md-table-container> <table md-table md-progress="tabledata.$promise"> <thead md-head md-order="criteria.order" md-on-reorder="loadData"> <tr md-row> <th md-column md-order-by="curriculumVersion.code">{{\'report.studentstatistics.curriculum\' | translate}}</th> <th md-column md-numeric ng-repeat="cl in formState.resultDef">{{currentLanguageNameField(cl)}}</th> <th md-column md-numeric>{{\'report.studentstatistics.total\' | translate}}</th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="row in tabledata.content" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell>{{currentLanguageNameField(row)}}</td> <td md-cell ng-repeat="cl in formState.resultDef">{{::row.result[cl.code] || 0}}</td> <td md-cell>{{::row.total}}</td> </tr> </tbody> </table> </md-table-container> <md-table-pagination md-limit="criteria.size" md-limit-options="[10, 20, 50]" md-page="criteria.page" md-total="{{tabledata.totalElements}}" md-on-paginate="loadData" md-label="{page: \'{{\'main.page\' | translate}}:\', rowsPerPage: \'{{\'main.rowPerPage\' | translate}}:\', of: \'{{\'main.of\' | translate}}\'}" md-page-select></md-table-pagination> </div> </div>'),a.put("report/studentgroup.teacher.addinfo.html",'<md-dialog aria-label="comment edit dialog" flex="50" flex-sm="50" flex-xs="100"> <md-toolbar> <div class="md-toolbar-tools"> <h2>{{"report.studentGroupTeacher.addInfo" | translate}}</h2> <span flex></span> <md-button class="md-icon-button" ng-click="cancel()"> <md-icon md-font-set="material-icons">close</md-icon> </md-button> </div> </md-toolbar> <md-dialog-content> <div layout-padding> <md-table-container> <table md-table> <thead md-head> <tr md-row> <th md-column>{{"report.studentGroupTeacher.studentName" | translate}}</th> <th md-column>{{"report.studentGroupTeacher.journal" | translate}}</th> <th md-column>{{"report.studentGroupTeacher.date" | translate}}</th> <th md-column> {{auth.higher ? ("report.studentGroupTeacher.teacherHigher" | translate) : ("report.studentGroupTeacher.teacherVocational" | translate)}} </th> <th md-column>{{"report.studentGroupTeacher.entry" | translate}}</th> <th md-column>{{"report.studentGroupTeacher.addInfo" | translate}}</th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="row in entriesWithAddInfo | orderBy: [\'!entryDate\', \'-entryDate\']" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell>{{student.fullname}}</td> <td md-cell>{{currentLanguageNameField(row.journal)}}</td> <td md-cell>{{row.entryDate | hoisDate}}</td> <td md-cell>{{row.changedBy}}</td> <td md-cell> <span ng-if="row.absence"> <span>{{row.absence.value}}</span> <md-tooltip> <span>{{row.absenceInserted ? (row.absenceInserted | hoisDate) : \'-\'}}</span> </md-tooltip> </span> <span ng-repeat="lessonAbsences in row.lessonAbsences"> <span>{{lessonAbsences.absence.value}}({{lessonAbsences.lessonNr}})</span> <md-tooltip> <span>{{lessonAbsences.absenceInserted ? (lessonAbsences.absenceInserted | hoisDate) : \'-\'}}</span> </md-tooltip> </span> <span ng-if="(row.absence && row.grade) || (row.lessonAbsences.length > 0 && row.grade)">/</span> <span ng-if="row.grade"> <span>{{row.grade.value}}</span> <md-tooltip> <span>{{row.gradeInserted ? (row.gradeInserted | hoisDate) : \'-\'}},</span> <span>{{row.gradeInsertedBy}},</span> <span>{{currentLanguageNameField(row.entryType)}}</span> </md-tooltip> </span> </td> <td md-cell>{{row.addInfo}}</td> </tr> </tbody> </table> </md-table-container> </div> </md-dialog-content> <span flex></span> <md-dialog-actions layout="row" layout-align="start center"> <md-button class="md-raised" ng-click="cancel()">{{"main.button.close" | translate}}</md-button> </md-dialog-actions> </md-dialog>'),
a.put("report/studentgroup.teacher.html",'<div class="ois-form-layout-padding ois-form-layout" ng-cloak> <div flex> <fieldset> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'main.searchlabel\' | translate}}</legend> <form name="studentGroupTeacherReportForm" novalidate> <div layout="row"> <md-input-container flex="30" flex-sm="100" flex-xs="100"> <label class="textInput">{{\'report.studentGroupTeacher.studyYear\' | translate}}</label> <hois-select ng-model="criteria.studyYear" values="formState.studyYears"></hois-select> </md-input-container> <md-input-container flex="30" flex-offset="5" flex-sm="100" flex-xs="100"> <label class="textInput">{{\'report.studentGroupTeacher.studyPeriod\' | translate}}</label> <md-select ng-model="formState.studyPeriod" ng-change="studyPeriodChanged()" ng-model-options="{trackBy: \'$value.id\'}"> <md-option md-option-empty></md-option> <md-option ng-value="period" ng-repeat="period in criteria.studyYear ? formState.studyPeriods[criteria.studyYear] : formState.allStudyPeriods | orderBy: currentLanguageNameField()"> {{currentLanguageNameField(period)}} </md-option> </md-select> </md-input-container> <md-input-container flex="30" flex-offset="5" flex-sm="100" flex-xs="100"> <label class="textInput">{{\'report.studentGroupTeacher.studentGroup\' | translate}}</label> <md-select ng-model="formState.studentGroup" ng-change="studentGroupChanged()" ng-model-options="{trackBy: \'$value.id\'}" required> <md-option ng-value="studentGroup" ng-repeat="studentGroup in formState.studentGroups | orderBy: currentLanguageNameField()"> {{currentLanguageNameField(studentGroup)}} </md-option> </md-select> </md-input-container> </div> <div layout="row"> <md-input-container> <label>{{\'report.studentGroupTeacher.entriesFrom\' | translate}}</label> <md-datepicker ng-model="criteria.from"></md-datepicker> </md-input-container> <md-input-container flex-offset="5"> <label>{{\'report.studentGroupTeacher.entriesThru\' | translate}}</label> <md-datepicker ng-model="criteria.thru" md-min-date="criteria.from"></md-datepicker> </md-input-container> </div> <div layout="row" layout-md="column" layout-sm="column" layout-xs="column"> <md-checkbox ng-repeat="entryType in entryTypes | orderBy: getEntryTypeOrderNr" ng-model="criteria.entryType[entryType.code]" aria-label="{{\'directive.student.foreign\' | translate}}"> <span ng-if="getEntryColor(entryType.code)" md-colors="{color: getEntryColor(entryType.code)}">{{currentLanguageNameField(entryType)}}</span> <span ng-if="!getEntryColor(entryType.code)">{{currentLanguageNameField(entryType)}}</span> </md-checkbox> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-checkbox ng-model="criteria.moduleGrade" aria-label="{{\'report.studentGroupTeacher.moduleGrade\' | translate}}"> {{\'report.studentGroupTeacher.moduleGrade\' | translate}} </md-checkbox> <md-checkbox ng-model="criteria.absencesPerJournals" aria-label="{{\'report.studentGroupTeacher.absencesPerJournals\' | translate}}"> {{\'report.studentGroupTeacher.absencesPerJournals\' | translate}} </md-checkbox> <md-checkbox ng-model="criteria.journalsWithEntries" aria-label="{{\'report.studentGroupTeacher.journalsWithEntries\' | translate}}"> {{\'report.studentGroupTeacher.journalsWithEntries\' | translate}} </md-checkbox> </div> <div layout="row"> <md-button class="md-raised md-primary" ng-click="search()">{{\'main.button.search\' | translate}}</md-button> <md-button class="md-raised" ng-click="clearCriteria()">{{\'main.button.clear\' | translate}}</md-button> <md-button ng-href="{{pdf(formState.pdfUrl, criteria)}}" class="md-button md-raised" ng-disabled="!criteria.studentGroup || (!criteria.studyYear && !criteria.from)">{{\'report.studentGroupTeacher.printPdf\' | translate}}</md-button> <md-button ng-href="{{excel(formState.xlsUrl, criteria)}}" class="md-button md-raised" ng-disabled="!criteria.studentGroup || (!criteria.studyYear && !criteria.from)">{{\'report.studentGroupTeacher.printXls\' | translate}}</md-button> </div> <div flex-xs="0" flex-gt-xs="0" flex-gt-sm="50"></div> </form> </fieldset> </div> </div> <div layout-padding ng-if="record"> <div flex class="student-group-teacher-container"> <div class="container" fixed-column-table fixed-columns="1" ng-style="{height: (record.students.length > 15) ? 15*32 + 210 + \'px\' : record.students.length * 32 + 210 + \'px\'}"> <table ng-if="record.moduleTypes.length > 0" class="student-group-teacher-table"> <thead> <tr> <th></th> <th ng-repeat="type in record.moduleTypes" colspan="{{type.colspan}}"> <hois-classifier-value ng-model="type.code" main-classifier-code="KUTSEMOODUL"></hois-classifier-value> </th> <th colspan="4"></th> </tr> <tr> <th></th> <th ng-repeat="module in record.modules" colspan="{{module.colspan}}">{{currentLanguageNameField(module)}}</th> <th colspan="4"></th> </tr> <tr> <th>{{\'report.studentGroupTeacher.studentName\' | translate}}</th> <th ng-repeat="column in record.resultColumns"> <a ng-if="column.journal" ng-href="#/journal/{{column.journal.id}}/view" class="md-primary change-button">{{currentLanguageNameField(column.journal)}}</a> <span ng-if="column.module">M</span> <span ng-if="column.practiceModuleTheme">{{currentLanguageNameField(column.practiceModuleTheme)}}</span> <span ng-if="column.fullPracticeModule">{{\'report.studentGroupTeacher.wholePracticeModule\' | translate}}</span> </th> <th>{{\'report.studentGroupTeacher.totalAbsences\' | translate}}</th> <th>{{\'report.studentGroupTeacher.withoutReasonAbsences\' | translate}}</th> <th>{{\'report.studentGroupTeacher.withReasonAbsences\' | translate}}</th> <th>{{\'report.studentGroupTeacher.beingLate\' | translate}}</th> </tr> </thead> <tbody> <tr ng-repeat="row in record.students" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td> <div> <span>{{row.fullname}}</span> <a ng-click="openAddInfoDialog(row)"> <md-icon ng-if="row.hasAddInfo" class="md-icon-button">message</md-icon> </a> </div> </td> <td ng-repeat="resultColumn in row.resultColumns"> <div ng-if="resultColumn.journalResult" layout="row"> <div ng-repeat="entry in resultColumn.journalResult.entries" ng-if="entry.grade"> <span ng-if="!gradeUtil.isPositive(entry.grade.code)" class="badResult">{{entry.grade.value}}</span> <span ng-if="gradeUtil.isPositive(entry.grade.code) && entryTypeColors[entry.entryType.code]" md-colors="{color: getEntryColor(entry.entryType.code)}">{{entry.grade.value}}</span> <span ng-if="gradeUtil.isPositive(entry.grade.code) && !entryTypeColors[entry.entryType.code]">{{entry.grade.value}}</span> <md-tooltip> <span>{{entry.gradeInserted ? (entry.gradeInserted | hoisDate) : \'-\'}},</span> <span>{{entry.gradeInsertedBy}},</span> <span>{{currentLanguageNameField(entry.entryType)}}</span> </md-tooltip> </div> <div></div> <div ng-if="resultColumn.journalResult.absences[\'PUUDUMINE_H\']">H: {{resultColumn.journalResult.absences[\'PUUDUMINE_H\']}}</div> <div ng-if="resultColumn.journalResult.absences[\'PUUDUMINE_P\']">P: {{resultColumn.journalResult.absences[\'PUUDUMINE_P\']}}</div> <div ng-if="resultColumn.journalResult.absences[\'PUUDUMINE_V\']">V: {{resultColumn.journalResult.absences[\'PUUDUMINE_V\']}}</div> <div ng-if="resultColumn.journalResult.absences[\'PUUDUMINE_PR\']">PR: {{resultColumn.journalResult.absences[\'PUUDUMINE_PR\']}}</div> </div> <div ng-if="resultColumn.practiceModuleThemeResult"> <div ng-class="{badResult: !gradeUtil.isPositive(resultColumn.practiceModuleThemeResult.grade.code)}">{{resultColumn.practiceModuleThemeResult.grade.value}}</div> <md-tooltip> <span>{{resultColumn.practiceModuleThemeResult.gradeInserted ? (resultColumn.practiceModuleThemeResult.gradeInserted | hoisDate) : \'-\'}}</span> </md-tooltip> </div> <div ng-if="resultColumn.practiceModuleResult"> <div ng-class="{badResult: !gradeUtil.isPositive(resultColumn.practiceModuleResult.grade.code)}">{{resultColumn.practiceModuleResult.grade.value}}</div> <md-tooltip> <span>{{resultColumn.practiceModuleResult.gradeInserted ? (resultColumn.practiceModuleResult.gradeInserted | hoisDate) : \'-\'}}</span> </md-tooltip> </div> <div ng-if="resultColumn.moduleResult"> <div ng-class="{badResult: !gradeUtil.isPositive(resultColumn.moduleResult.grade.code)}">{{resultColumn.moduleResult.grade.value}}</div> <md-tooltip> <span>{{resultColumn.moduleGrade.gradeInserted ? (resultColumn.moduleGrade.gradeInserted | hoisDate) : \'-\'}}</span> </md-tooltip> </div> </td> <td>{{row.absences[\'PUUDUMINE_P\'] + row.absences[\'PUUDUMINE_V\'] + row.absences[\'PUUDUMINE_PR\']}}</td> <td>{{row.absences[\'PUUDUMINE_P\']}}</td> <td>{{row.absences[\'PUUDUMINE_V\'] + row.absences[\'PUUDUMINE_PR\']}}</td> <td>{{row.absences[\'PUUDUMINE_H\']}}</td> </tr> </tbody> </table> </div> </div> </div>'),a.put("report/teachers.load.higher.html",'<div class="ois-form-layout-padding ois-form-layout" ng-cloak> <div flex> <fieldset> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'main.searchlabel\' | translate}}</legend> <form name="teacherLoadReportForm" ng-submit="loadData()" novalidate> <div layout="row"> <md-input-container flex="45" flex-sm="100" flex-xs="100"> <label class="textInput">{{\'report.teachersload.studyYear\' | translate}}</label> <hois-select ng-model="criteria.studyYear" values="formState.studyYears" required autofocus></hois-select> </md-input-container> <md-input-container flex="50" flex-offset="5" flex-sm="100" flex-xs="100"> <label class="textInput">{{\'report.teachersload.studyPeriod\' | translate}}</label> <hois-select ng-model="criteria.studyPeriod" values="criteria.studyYear ? formState.studyPeriods[criteria.studyYear] : formState.allStudyPeriods"></hois-select> </md-input-container> </div> <div layout="row"> <div flex="45" flex-sm="100" flex-xs="100"> <hois-autocomplete ng-model="criteria.subject" method="subjects" label="{{\'report.teachersload.subject\' | translate}}"></hois-autocomplete> </div> <div flex="50" flex-offset="5"> <hois-autocomplete ng-model="criteria.teacher" method="teachers" label="{{auth.higher ? (\'report.teachersload.teacherHigher\' | translate) : (\'report.teachersload.teacherVocational\' | translate)}}"></hois-autocomplete> </div> </div> <div layout="row"> <md-button type="submit" class="md-raised md-primary">{{\'main.button.search\' | translate}}</md-button> <md-button class="md-raised" ng-click="clearCriteria()">{{\'main.button.clear\' | translate}}</md-button> <a ng-href="{{excel(formState.xlsUrl, criteria)}}" target="_blank" class="md-button md-raised">{{\'report.excel\' | translate}}</a> </div> <div flex-xs="0" flex-gt-xs="0" flex-gt-sm="50"></div> </form> </fieldset> </div> </div> <div layout-padding> <div flex> <md-table-container> <table md-table md-progress="tabledata.$promise"> <thead md-head md-order="criteria.order" md-on-reorder="loadData"> <tr md-row> <th md-column>{{\'report.teachersload.studyYear\' | translate}}</th> <th md-column>{{\'report.teachersload.studyPeriod\' | translate}}</th> <th md-column>{{\'report.teachersload.subject\' | translate}}</th> <th md-column>{{\'report.teachersload.subjectcode\' | translate}}</th> <th md-column>{{auth.higher ? (\'report.teachersload.teacherHigher\' | translate) : (\'report.teachersload.teacherVocational\' | translate)}}</th> <th md-column>{{auth.higher ? (\'report.teachersload.plannedHoursHigher\' | translate) : (\'report.teachersload.plannedHoursVocational\' | translate)}}</th> <th md-column>{{auth.higher ? (\'report.teachersload.actualHoursHigher\' | translate) : (\'report.teachersload.actualHoursVocational\' | translate)}}</th> <th md-column>{{auth.higher ? (\'report.teachersload.coefficientHoursHigher\' | translate) : (\'report.teachersload.coefficientHoursVocational\' | translate)}}</th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="row in tabledata.content" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell>{{currentLanguageNameField(row.studyYear)}}</td> <td md-cell>{{currentLanguageNameField(row.studyPeriod)}}</td> <td md-cell> <div ng-repeat="subject in row.subjects"> <hr ng-if="!$first"> {{currentLanguageNameField(subject.subject)}} </div> </td> <td md-cell> <div ng-repeat="subject in row.subjects"> <hr ng-if="!$first"> {{::subject.code}} </div> </td> <td md-cell>{{::row.teacher}}</td> <td md-cell>{{::row.plannedHours}}</td> <td md-cell>{{::row.actualHours}}</td> <td md-cell>{{::row.coefficientHours}}</td> </tr> </tbody> </table> </md-table-container> <md-table-pagination md-limit="criteria.size" md-limit-options="[10, 20, 50]" md-page="criteria.page" md-total="{{tabledata.totalElements}}" md-on-paginate="loadData" md-label="{page: \'{{\'main.page\' | translate}}:\', rowsPerPage: \'{{\'main.rowPerPage\' | translate}}:\', of: \'{{\'main.of\' | translate}}\'}" md-page-select></md-table-pagination> </div> </div>'),a.put("report/teachers.load.vocational.html",'<div class="ois-form-layout-padding ois-form-layout" ng-cloak> <div flex> <fieldset> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'main.searchlabel\' | translate}}</legend> <form name="teacherLoadReportForm" ng-submit="loadData()" novalidate> <div layout="row"> <md-input-container flex="45" flex-sm="100" flex-xs="100"> <label class="textInput">{{\'report.teachersload.studyYear\' | translate}}</label> <hois-select ng-model="criteria.studyYear" values="formState.studyYears" required autofocus></hois-select> </md-input-container> <md-input-container flex="50" flex-offset="5" flex-sm="100" flex-xs="100" flex-offset-xs="0" flex-offset-sm="0"> <label class="textInput">{{\'report.teachersload.studyPeriod\' | translate}}</label> <hois-select ng-model="criteria.studyPeriod" values="criteria.studyYear ? formState.studyPeriods[criteria.studyYear] : formState.allStudyPeriods"></hois-select> </md-input-container> </div> <div layout="row"> <div flex="45"> <hois-autocomplete ng-model="criteria.module" method="vocationalmodules" label="{{\'report.teachersload.module\' | translate}}"></hois-autocomplete> </div> <div flex="50" flex-offset="5" flex-sm="100" flex-offset-xs="0" flex-offset-sm="0"> <hois-autocomplete ng-model="criteria.teacher" method="teachers" label="{{auth.higher ? (\'report.teachersload.teacherHigher\' | translate) : (\'report.teachersload.teacherVocational\' | translate)}}"></hois-autocomplete> </div> </div> <div layout="row"> <md-button type="submit" class="md-raised md-primary">{{\'main.button.search\' | translate}}</md-button> <md-button class="md-raised" ng-click="clearCriteria()">{{\'main.button.clear\' | translate}}</md-button> <a ng-href="{{excel(formState.xlsUrl, criteria)}}" target="_blank" class="md-button md-raised">{{\'report.excel\' | translate}}</a> </div> <div flex-xs="0" flex-gt-xs="0" flex-gt-sm="50"></div> </form> </fieldset> </div> </div> <div layout-padding> <div flex> <md-table-container> <table md-table md-progress="tabledata.$promise"> <thead md-head md-order="criteria.order" md-on-reorder="loadData"> <tr md-row> <th md-column>{{\'report.teachersload.studyYear\' | translate}}</th> <th md-column>{{\'report.teachersload.studyPeriod\' | translate}}</th> <th md-column>{{auth.higher ? (\'report.teachersload.teacherHigher\' | translate) : (\'report.teachersload.teacherVocational\' | translate)}}</th> <th md-column>{{\'report.teachersload.module\' | translate}}</th> <th md-column>{{auth.higher ? (\'report.teachersload.plannedHoursHigher\' | translate) : (\'report.teachersload.plannedHoursVocational\' | translate)}}</th> <th md-column>{{auth.higher ? (\'report.teachersload.actualHoursHigher\' | translate) : (\'report.teachersload.actualHoursVocational\' | translate)}}</th> <th md-column>{{auth.higher ? (\'report.teachersload.coefficientHoursHigher\' | translate) : (\'report.teachersload.coefficientHoursVocational\' | translate)}}</th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="row in tabledata.content" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell>{{currentLanguageNameField(row.studyYear)}}</td> <td md-cell>{{currentLanguageNameField(row.studyPeriod)}}</td> <td md-cell>{{::row.teacher}}</td> <td md-cell> <div ng-repeat="module in row.modules"> <hr ng-if="!$first"> {{currentLanguageNameField(module.module)}} </div> </td> <td md-cell>{{::row.plannedHours}}</td> <td md-cell>{{::row.actualHours}}</td> <td md-cell>{{::row.coefficientHours}}</td> </tr> </tbody> </table> </md-table-container> <md-table-pagination md-limit="criteria.size" md-limit-options="[10, 20, 50]" md-page="criteria.page" md-total="{{tabledata.totalElements}}" md-on-paginate="loadData" md-label="{page: \'{{\'main.page\' | translate}}:\', rowsPerPage: \'{{\'main.rowPerPage\' | translate}}:\', of: \'{{\'main.of\' | translate}}\'}" md-page-select></md-table-pagination> </div> </div>'),a.put("report/vota.html",'<div class="ois-form-layout-padding ois-form-layout" ng-cloak> <div flex> <fieldset> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'main.searchlabel\' | translate}}</legend> <form name="votaReportForm" ng-submit="loadData()" novalidate> <div layout="row"> <md-input-container flex="45" flex-sm="100" flex-xs="100"> <label class="textInput">{{\'report.teachersload.studyYear\' | translate}}</label> <hois-select ng-model="criteria.studyYear" values="formState.studyYears" required autofocus></hois-select> </md-input-container> <md-input-container flex="50" flex-offset="5" flex-sm="100" flex-xs="100"> <label class="textInput">{{\'report.teachersload.studyPeriod\' | translate}}</label> <hois-select ng-model="criteria.studyPeriod" values="criteria.studyYear ? formState.studyPeriods[criteria.studyYear] : formState.allStudyPeriods"></hois-select> </md-input-container> </div> <div layout="row"> <md-button type="submit" class="md-raised md-primary">{{\'main.button.search\' | translate}}</md-button> <md-button class="md-raised" ng-click="clearCriteria()">{{\'main.button.clear\' | translate}}</md-button> </div> <div flex-xs="0" flex-gt-xs="0" flex-gt-sm="50"></div> </form> </fieldset> </div> </div> <div layout-padding> <div flex> <md-table-container> <table md-table md-progress="tabledata.$promise"> <thead md-head md-order="criteria.order" md-on-reorder="loadData"> <tr md-row> <th md-column></th> <th md-column>{{\'report.vota.studyYear\' | translate}}</th> <th md-column>{{\'report.vota.studyPeriod\' | translate}}</th> <th md-column>{{\'report.vota.curriculum\' | translate}}</th> <th md-column><span translate="report.vota.applicationCount"></span></th> <th md-column><span translate="report.vota.totalCredits"></span></th> <th md-column><span translate="report.vota.acceptedCredits"></span></th> <th md-column><span translate="report.vota.totalLocalCredits"></span></th> <th md-column><span translate="report.vota.acceptedLocalCredits"></span></th> <th md-column><span translate="report.vota.totalAbroadCredits"></span></th> <th md-column><span translate="report.vota.acceptedAbroadCredits"></span></th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="row in tabledata.content"> <td md-cell style="border-top:none"></td> <td md-cell rowspan="{{tabledata.content.length}}" ng-if="$first">{{currentLanguageNameField(row.studyYear)}}</td> <td md-cell rowspan="{{studyPeriodRows($index)}}" ng-if="studyPeriodVisible($index)">{{currentLanguageNameField(row.studyPeriod)}}</td> <td md-cell ng-class-odd="\'odd\'" ng-class-even="\'even\'">{{currentLanguageNameField(row.curriculum)}}</td> <td md-cell ng-class-odd="\'odd\'" ng-class-even="\'even\'">{{row.applicationCount}}</td> <td md-cell ng-class-odd="\'odd\'" ng-class-even="\'even\'">{{row.totalCredits}}</td> <td md-cell ng-class-odd="\'odd\'" ng-class-even="\'even\'">{{row.acceptedCredits}}</td> <td md-cell ng-class-odd="\'odd\'" ng-class-even="\'even\'">{{row.totalLocalCredits}}</td> <td md-cell ng-class-odd="\'odd\'" ng-class-even="\'even\'">{{row.acceptedLocalCredits}}</td> <td md-cell ng-class-odd="\'odd\'" ng-class-even="\'even\'">{{row.totalAbroadCredits}}</td> <td md-cell ng-class-odd="\'odd\'" ng-class-even="\'even\'">{{row.acceptedAbroadCredits}}</td> </tr> </tbody> </table> </md-table-container> <md-table-pagination md-limit="criteria.size" md-limit-options="[10, 20, 50]" md-page="criteria.page" md-total="{{tabledata.totalElements}}" md-on-paginate="loadData" md-label="{page: \'{{\'main.page\' | translate}}:\', rowsPerPage: \'{{\'main.rowPerPage\' | translate}}:\', of: \'{{\'main.of\' | translate}}\'}" md-page-select></md-table-pagination> </div> </div>'),a.put("room/room.edit.html",'<div class="ois-form-layout-padding ois-form-layout" ng-cloak> <div flex> <form name="roomForm"> <div layout="column"> <md-input-container class="md-block"> <label>{{\'room.building\' | translate}}</label> <hois-select ng-model="record.building" name="building" ng-change="buildingChanged()" type="building" required></hois-select> </md-input-container> <div layout="row" flex> <md-input-container class="md-block" flex="20"> <label class="textInput">{{\'room.code\' | translate}}</label> <input ng-model="record.code" name="code" type="text" md-maxlength="20" ng-model-options="{debounce: 250}" unique="formState.roomUniqueQuery" required> <div ng-messages="roomForm.code.$error"> <div ng-message="md-maxlength"> {{\'main.messages.error.maxlength\' | translate}} </div> <div ng-message="notUnique"> {{\'room.alreadyexist\' | translate}} </div> </div> </md-input-container> <md-input-container class="md-block" flex-offset="5" flex> <label>{{\'room.name\' | translate}}</label> <input ng-model="record.name" name="name" type="text" md-maxlength="100"> <div ng-messages="roomForm.name.$error"> <div ng-message="md-maxlength"> {{\'main.messages.error.maxlength\' | translate}} </div> </div> </md-input-container> </div> <div layout="row" flex> <md-input-container class="md-block" flex="20"> <label class="textInput">{{\'room.seats\' | translate}}</label> <input ng-model="record.seats" name="seats" type="number" min="0" max="100000000"> <div ng-messages="roomForm.seats.$error"> <div ng-message="max"> {{\'main.messages.error.max\' | translate: {max: 100000000} }} </div> <div ng-message="min"> {{\'main.messages.error.min\' | translate: {min: 0} }} </div> </div> </md-input-container> <div flex="50" layout-align="start center" layout="row" flex-offset="5"> <md-checkbox ng-model="record.isStudy" name="isStudy"> {{\'room.isStudy\' | translate}} </md-checkbox> </div> </div> <div layout="row"> <md-input-container flex> <label>{{\'room.equipment\' | translate}}</label> <hois-classifier-select ng-model="formState.newEquipment" main-classifier-code="SEADMED"></hois-classifier-select> </md-input-container> <md-input-container flex> <md-button ng-show="formState.newEquipment" ng-click="addEquipment()" class="md-primary"> <md-icon ng-class="\'md-primary md-hue-2\'" md-font-set="material-icons">add</md-icon></md-button> </md-input-container> </div> <md-list> <md-list-item ng-repeat="equipment in formState.roomEquipment"> <md-input-container flex="10"> <label class="textInput">{{currentLanguageNameField(equipment.equipment)}}</label> <input ng-model="equipment.equipmentCount" name="equipment[{{$index}}].equipmentCount" type="number" min="0" max="100000000"> <div ng-messages="roomForm[\'equipment[\'+$index+\'].equipmentCount\'].$error"> <div ng-message="max"> {{\'main.messages.error.max\' | translate: {max: 100000000} }} </div> <div ng-message="min"> {{\'main.messages.error.min\' | translate: {min: 0} }} </div> </div> </md-input-container> <md-input-container flex> &nbsp;<a ng-click="deleteEquipment(equipment.equipment.code)" class="remove">&times;</a> </md-input-container> </md-list-item> </md-list> </div> </form> <md-button ng-click="update()" class="md-raised md-primary">{{\'main.button.save\' | translate}}</md-button> <md-button ng-click="delete()" ng-show="record.id" class="md-raised">{{\'main.button.delete\' | translate}}</md-button> <md-button ng-click="back(\'#/rooms/search\', roomForm)" class="md-raised">{{\'main.button.back\' | translate}}</md-button> </div> </div>'),a.put("room/room.search.html",'<div class="ois-form-layout-padding"> <div flex> <form name="searchForm" ng-submit="searchForm.$valid && loadData()" novalidate layout="column" class="nomargin"> <fieldset tabindex="1"> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'main.searchlabel\' | translate}}</legend> <div layout="row" layout-sm="column" layout-xs="column"> <!--div class="indentForToast"></div--> <md-input-container flex="45" flex-sm="100" flex-xs="100"> <label class="textInput">{{\'building.name\' | translate}}</label> <input ng-model="criteria.buildingName" name="buildingName" type="text" md-maxlength="255"> </md-input-container> <md-input-container flex="50" flex-sm="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label class="textInput">{{\'building.code\' | translate}}</label> <input ng-model="criteria.buildingCode" name="buildingCode" type="text" md-maxlength="20" autofocus> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="45" flex-sm="100" flex-xs="100"> <label class="textInput">{{\'room.name\' | translate}}</label> <input ng-model="criteria.name" name="name" type="text" md-maxlength="100"> </md-input-container> <md-input-container flex="50" flex-sm="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label class="textInput">{{\'room.code\' | translate}}</label> <input ng-model="criteria.code" name="code" type="text" md-maxlength="20"> </md-input-container> </div> </fieldset> <div layout="row"> <md-button type="submit" class="md-raised md-primary">{{\'main.button.search\' | translate}}</md-button> <md-button class="md-raised" ng-click="clearCriteria()">{{\'main.button.clear\' | translate}}</md-button> <md-button class="md-raised" ng-if="isAuthorized(\'ROLE_OIGUS_M_TEEMAOIGUS_HOONERUUM\')" ng-href="#/rooms/new">{{\'room.add\' | translate}}</md-button> <md-button class="md-raised" ng-if="isAuthorized(\'ROLE_OIGUS_M_TEEMAOIGUS_HOONERUUM\')" ng-href="#/buildings/new">{{\'building.add\' | translate}}</md-button> </div> <div flex-xs="0" flex-gt-xs="0" flex-gt-sm="50"></div> </form> </div> </div> <div layout-padding> <div flex> <md-table-container> <table md-table md-progress="tabledata.$promise"> <thead md-head md-order="criteria.order" md-on-reorder="loadData"> <tr md-row> <th md-column md-order-by="b.name">{{\'building.name\' | translate}}</th> <th md-column md-order-by="b.code">{{\'building.code\' | translate}}</th> <th md-column md-order-by="b.address">{{\'building.address\' | translate}}</th> <th md-column md-order-by="r.name">{{\'room.name\' | translate}}</th> <th md-column md-order-by="r.code">{{\'room.code\' | translate}}</th> <th md-column md-numeric md-order-by="r.seats">{{\'room.seats\' | translate}}</th> <th md-column>{{\'room.isStudyInTable\' | translate}}</th> <th md-column>{{\'room.equipment\' | translate}}</th> <th md-column></th> <th md-column></th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="row in tabledata.content" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell>{{::row.buildingName}}</td> <td md-cell>{{::row.buildingCode}}</td> <td md-cell>{{::row.buildingAddress}}</td> <td md-cell>{{::row.name}}</td> <td md-cell>{{::row.code}}</td> <td md-cell>{{::row.seats}}</td> <td md-cell>{{row.isStudy ? \'main.yes\' : \'main.no\' | translate}}</td> <td md-cell> <table> <tr ng-repeat="device in row.equipment"> <td>{{currentLanguageNameField(device.equipment)}}</td> <td>{{::device.equipmentCount}}</td> </tr> </table> </td> <td md-cell> <md-button md-no-ink class="md-primary change-button" ng-if="row.id && isAuthorized(\'ROLE_OIGUS_M_TEEMAOIGUS_HOONERUUM\')" ng-href="#/rooms/{{::row.id}}/edit">{{\'room.change\' | translate}}</md-button> </td> <td md-cell> <md-button md-no-ink class="md-primary change-button" ng-if="isAuthorized(\'ROLE_OIGUS_M_TEEMAOIGUS_HOONERUUM\')" ng-href="#/buildings/{{::row.building}}/edit">{{\'building.change\' | translate}}</md-button> </td> </tr> </tbody> </table> </md-table-container> <md-table-pagination md-limit="criteria.size" md-limit-options="[10, 20, 50]" md-page="criteria.page" md-total="{{tabledata.totalElements}}" md-on-paginate="loadData" md-label="{page: \'{{\'main.page\' | translate}}:\', rowsPerPage: \'{{\'main.rowPerPage\' | translate}}:\', of: \'{{\'main.of\' | translate}}\'}" md-page-select></md-table-pagination> </div> </div>'),a.put("rtip/rtip.sync.html",'<div layout-padding> <div flex> <form layout="column" name="rtipSyncForm"> <div layout="row"> <md-input-container flex="20" flex-sm="100" flex-xs="100"> <label>{{\'rtip.dateRange\' | translate}}</label> <input type="hidden"> </md-input-container> <div flex="33"> <md-input-container flex> <label>{{\'main.from\' | translate}}</label> <md-datepicker ng-model="criteria.from" md-max-date="criteria.thru" required></md-datepicker> </md-input-container> <md-input-container flex> <label>{{\'main.thru\' | translate}}</label> <md-datepicker ng-model="criteria.thru" md-min-date="criteria.from" required></md-datepicker> </md-input-container> </div> </div> <div layout="row"> <md-button class="md-raised" ng-click="rtipSync()">{{\'rtip.contract\' | translate}}</md-button> <md-button class="md-raised" ng-click="rtipZemploees()">{{\'rtip.sync\' | translate}}</md-button> </div> </form> </div> </div>'),a.put("saisClassifier/saisClassifier.content.list.html",'<div layout-padding> <form ng-submit="loadData()" novalidate> <div flex> <div layout="row"> <div flex-xs="100" flex-gt-xs="100" flex-gt-sm="50" layout="column"> <!--div class="indentForToast"></div--> <h3>{{currentLanguageNameField(mainClass)}}</h3> <md-input-container> <label class="textInput">{{\'saisClassifier.value\' | translate}}</label> <input ng-model="criteria.value" type="text" autofocus> </md-input-container> <md-input-container> <label class="textInput">{{\'saisClassifier.name\' | translate}}</label> <input ng-model="criteria.name" type="text"> </md-input-container> <div layout="row"> <md-button type="submit" class="md-raised md-primary">{{\'main.button.search\' | translate}}</md-button> <md-button class="md-raised" ng-click="clearCriteria()">{{\'main.button.clear\' | translate}}</md-button> <md-button class="md-raised" ng-href="#/saisClassifier">{{\'main.button.back\' | translate}}</md-button> </div> </div> <div flex-xs="0" flex-gt-xs="0" flex-gt-sm="50"></div> </div> </div> </form> </div> <div layout-padding> <div flex> <md-table-container> <table md-table md-progress="tabledata.$promise"> <thead md-head md-order="criteria.order" md-on-reorder="loadData"> <tr md-row> <th md-column md-order-by="value">{{\'saisClassifier.value\' | translate}}</th> <th md-column md-order-by="nameEt">{{\'saisClassifier.nameEt\' | translate}}</th> <th md-column md-order-by="nameEn">{{\'saisClassifier.nameEn\' | translate}}</th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="row in tabledata.content" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell>{{::row.value}}</td> <td md-cell>{{::row.nameEt}}</td> <td md-cell>{{::row.nameEn}}</td> </tr> </tbody> </table> </md-table-container> <md-table-pagination md-limit="criteria.size" md-limit-options="[10, 20, 50]" md-page="criteria.page" md-total="{{tabledata.totalElements}}" md-on-paginate="loadData" md-label="{page: \'{{\'main.page\' | translate}}:\', rowsPerPage: \'{{\'main.rowPerPage\' | translate}}:\', of: \'{{\'main.of\' | translate}}\' }" md-page-select></md-table-pagination> </div> </div>'),a.put("saisClassifier/saisClassifier.list.html",'<div layout-padding> <div flex> <fieldset> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'main.searchlabel\' | translate}}</legend> <form ng-submit="loadData()"> <div flex> <div layout="row"> <div flex-xs="100" flex-gt-xs="100" flex-gt-sm="50" layout="column"> <!--div class="indentForToast"></div--> <md-input-container> <label class="textInput">{{\'saisClassifier.name\' | translate}}</label> <input ng-model="criteria.name" type="text" autofocus> </md-input-container> <div layout="row"> <md-button type="submit" class="md-raised md-primary">{{\'main.button.search\' | translate}}</md-button> <md-button class="md-raised" ng-click="clearCriteria()">{{\'main.button.clear\' | translate}}</md-button> <md-button class="md-raised" ng-click="saisImport()">{{\'saisClassifier.saisImport\' | translate}}</md-button> </div> </div> <div flex-xs="0" flex-gt-xs="0" flex-gt-sm="50"></div> </div> </div> </form> </fieldset> </div> </div> <div layout-padding> <div flex> <md-table-container> <table md-table md-progress="tabledata.$promise"> <thead md-head md-order="criteria.order" md-on-reorder="loadData"> <tr md-row> <th md-column md-order-by="nameEt">{{\'saisClassifier.klassifikaator\' | translate}}</th> <th md-column md-order-by="count">{{\'saisClassifier.count\' | translate}}</th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="row in tabledata.content" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell><a ng-href="#/saisClassifier/{{::row.code}}?_menu">{{::row.nameEt}}</a></td> <td md-cell>{{::row.count}}</td> </tr> </tbody> </table> </md-table-container> <md-table-pagination md-limit="criteria.size" md-limit-options="[10, 20, 50]" md-page="criteria.page" md-total="{{tabledata.totalElements}}" md-on-paginate="loadData" md-label="{page: \'{{\'main.page\' | translate}}:\', rowsPerPage: \'{{\'main.rowPerPage\' | translate}}:\', of: \'{{\'main.of\' | translate}}\' }" md-page-select></md-table-pagination> </div> </div>'),
a.put("scholarship/scholarship.application.annul.edit.html",'<div class="ois-form-layout-padding ois-form-layout" ng-cloak> <div layout="column"> <div layout="row" flex="100" flex-sm="100" flex-xs="100"> {{scholarshipType === \'scholarships\' ? \'stipend.annul.stipendStudentList\' : \'stipend.annul.grantStudentList\' | translate}} </div> </div> <table md-table class="secondary-table"> <thead md-head> <tr md-row> <th md-column>{{\'stipend.fullName\' | translate}}</th> <th md-column>{{\'stipend.student.idCode\' | translate}}</th> <th md-column>{{\'stipend.rejectComment\' | translate}}</th> <th md-column>&nbsp;</th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="rejection in rejections" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell>{{rejection.fullName}}</td> <td md-cell>{{rejection.idCode}}</td> <td md-cell> <div flex><input flex type="text" ng-model="rejection.rejectComment" style="width: 100%" autofocus maxlength="100"></div> </td> <td md-cell> <md-button class="remove nomargin" ng-click="removeFromArray(rejections, rejection)">&times;</md-button> </td> </tr> </tbody> </table> <div layout="row" ng-if="rejections.length > 0"> <md-button class="md-raised md-primary" ng-click="annul()">{{\'main.button.annul\' | translate}}</md-button> <md-button class="md-raised" ng-click="back(\'#/scholarships/applications/\' + scholarshipType)">{{\'main.button.back\' | translate}}</md-button> </div> </div>'),a.put("scholarship/scholarship.application.list.drGrants.html",'<div class="ois-form-layout-padding ois-form-layout" ng-cloak> <div layout="column"> <fieldset> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'main.searchlabel\' | translate}}</legend> <form ng-submit="reloadTable()" name="applicationSearchForm"> <div layout="row" flex> <md-input-container flex="20"> <label class="textInput">{{\'stipend.grantType\' | translate}}</label> <hois-classifier-select required ng-model="criteria.type" name="type" model-value-attr="code" main-classifier-code="STIPTOETUS" show-only-values="formState.allowedStipendTypes" ng-change="resetCurriculum()"></hois-classifier-select> </md-input-container> <div layout="row" flex="20" flex-offset="5"> <md-input-container flex> <label class="textInput">{{\'stipend.curriculums\' | translate}}</label> <hois-select flex ng-model="criteria.curriculum" type="curriculum" label="stipend.curriculum" multiple></hois-select> </md-input-container> </div> <md-input-container flex="20" flex-offset="5"> <label class="textInput">{{\'stipend.courses\' | translate}}</label> <hois-classifier-select ng-model="criteria.courses" name="type" model-value-attr="code" main-classifier-code="KURSUS" multiple></hois-classifier-select> </md-input-container> <div layout="row" flex="20" flex-offset="5"> <md-input-container flex> <label class="textInput">{{\'stipend.applicant\' | translate}}</label> <input type="text" ng-model="criteria.studentName" name="nameEt" md-maxlength="500"> </md-input-container> </div> </div> <div layout="row" flex> <md-input-container flex="20"> <label class="textInput">{{\'stipend.grantName\' | translate}}</label> <input type="text" ng-model="criteria.nameEt" name="nameEt" md-maxlength="500"> </md-input-container> <md-input-container flex="20" flex-offset="5"> <label class="textInput">{{\'stipend.studyPeriod\' | translate}}</label> <hois-select ng-model="criteria.studyPeriod" values="studyPeriods"></hois-select> </md-input-container> <md-input-container flex="20" flex-offset="5"> <label class="textInput">{{\'stipend.status\' | translate}}</label> <hois-classifier-select ng-model="criteria.status" name="type" model-value-attr="code" main-classifier-code="STIPTOETUS_STAATUS"></hois-classifier-select> </md-input-container> </div> <div layout="row"> <md-button ng-click="reloadTable()" class="md-raised md-primary">{{\'main.button.search\' | translate}}</md-button> <md-button class="md-raised" ng-click="clearCriteria()">{{\'main.button.clear\' | translate}}</md-button> </div> </form> </fieldset> <br> <div ng-include="\'scholarship/templates/scholarship.applications.drGrants.html\'"></div> <div layout="row" ng-if="applications.length > 0"> <md-button class="md-raised md-primary" ng-click="accept()" ng-if="auth.isAdmin() && canManage">{{\'main.button.accept\' | translate}}</md-button> <md-button class="md-raised" ng-click="annul()" ng-if="auth.isAdmin() && canManage">{{\'main.button.annul\' | translate}}</md-button> <md-button class="md-raised" ng-click="reject()" ng-if="auth.isAdmin() && canManage">{{\'main.button.reject\' | translate}}</md-button> <md-button class="md-raised" ng-click="checkComplies()" ng-if="auth.isAdmin()">{{\'main.button.checkComplies\' | translate}}</md-button> <md-button class="md-raised" ng-click="committeeDecision()" ng-if="auth.isAdmin() && canManage">{{\'main.button.committeeDecision\' | translate}}</md-button> </div> </div> </div>'),a.put("scholarship/scholarship.application.list.grants.html",'<div class="ois-form-layout-padding ois-form-layout" ng-cloak> <div layout="column"> <fieldset> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'main.searchlabel\' | translate}}</legend> <form ng-submit="reloadTable()" name="applicationSearchForm"> <div layout="row" layout-xs="column" flex> <md-input-container flex="20" flex-xs="100"> <label class="textInput">{{\'stipend.grantType\' | translate}}</label> <hois-classifier-select required ng-model="criteria.type" name="type" model-value-attr="code" main-classifier-code="STIPTOETUS" show-only-values="formState.allowedStipendTypes" ng-change="resetCurriculum()"></hois-classifier-select> </md-input-container> <div layout="row" flex="20" flex-xs="100" flex-offset-xs="0" flex-offset="5"> <md-input-container flex ng-if="criteria.type !== \'STIPTOETUS_POHI\'"> <label class="textInput">{{\'stipend.curriculums\' | translate}}</label> <hois-select flex ng-model="criteria.curriculum" type="curriculum" label="stipend.curriculum" multiple></hois-select> </md-input-container> <md-input-container flex ng-if="criteria.type === \'STIPTOETUS_POHI\'"> <label class="textInput">{{\'stipend.curriculum\' | translate}}</label> <hois-select flex ng-model="criteria.curriculum" type="curriculum" label="stipend.curriculum" required></hois-select> </md-input-container> </div> <md-input-container flex="20" flex-xs="100" flex-offset-xs="0" flex-offset="5"> <label class="textInput">{{\'stipend.courses\' | translate}}</label> <hois-classifier-select ng-model="criteria.courses" name="type" model-value-attr="code" main-classifier-code="KURSUS" multiple></hois-classifier-select> </md-input-container> <div layout="row" flex="20" flex-xs="100" flex-offset-xs="0" flex-offset="5"> <md-input-container flex> <label class="textInput">{{\'stipend.applicant\' | translate}}</label> <input type="text" ng-model="criteria.studentName" name="nameEt" md-maxlength="500"> </md-input-container> </div> </div> <div layout="row" layout-xs="column" flex> <md-input-container flex="20" flex-xs="100"> <label class="textInput">{{\'stipend.grantName\' | translate}}</label> <input type="text" ng-model="criteria.nameEt" name="nameEt" md-maxlength="500"> </md-input-container> <md-input-container flex="20" flex-xs="100" flex-offset-xs="0" flex-offset="5"> <label class="textInput">{{\'stipend.studyPeriod\' | translate}}</label> <hois-select ng-model="criteria.studyPeriod" values="studyPeriods"></hois-select> </md-input-container> <md-input-container flex="20" flex-xs="100" flex-offset-xs="0" flex-offset="5"> <label class="textInput">{{\'stipend.status\' | translate}}</label> <hois-classifier-select ng-model="criteria.status" name="type" model-value-attr="code" main-classifier-code="STIPTOETUS_STAATUS"></hois-classifier-select> </md-input-container> </div> <div layout="row"> <md-button ng-click="reloadTable()" class="md-raised md-primary">{{\'main.button.search\' | translate}}</md-button> <md-button class="md-raised" ng-click="clearCriteria()">{{\'main.button.clear\' | translate}}</md-button> </div> </form> </fieldset> <br> <div ng-include="\'scholarship/templates/scholarship.applications.grants.html\'"></div> <div layout="row" layout-xs="column" ng-if="applications.length > 0"> <md-button class="md-raised md-primary" ng-click="accept()" ng-if="auth.isAdmin() && canManage">{{\'main.button.accept\' | translate}}</md-button> <md-button class="md-raised" ng-click="annul()" ng-if="auth.isAdmin() && canManage">{{\'main.button.annul\' | translate}}</md-button> <md-button class="md-raised" ng-click="reject()" ng-if="auth.isAdmin() && canManage">{{\'main.button.reject\' | translate}}</md-button> <md-button class="md-raised" ng-click="refreshResults()" ng-if="auth.isAdmin() && canManage">{{\'main.button.refreshResults\' | translate}}</md-button> <md-button class="md-raised" ng-click="checkComplies()" ng-if="auth.isAdmin()">{{\'main.button.checkComplies\' | translate}}</md-button> <md-button class="md-raised" ng-click="committeeDecision()" ng-if="auth.isAdmin() && canManage">{{\'main.button.committeeDecision\' | translate}}</md-button> <md-button class="md-raised md-primary" ng-click="teacherConfirm(\'yes\')" ng-if="isStudentGroupTeacher">{{\'main.button.confirm\' | translate}}</md-button> <md-button class="md-raised" ng-click="teacherConfirm(\'annul\')" ng-if="isStudentGroupTeacher">{{\'main.button.annul\' | translate}}</md-button> <md-button class="md-raised" ng-click="teacherConfirm(\'no\')" ng-if="isStudentGroupTeacher">{{\'main.button.noConfirm\' | translate}}</md-button> </div> </div> </div>'),a.put("scholarship/scholarship.application.list.scho.html",'<div class="ois-form-layout-padding ois-form-layout" ng-cloak> <div layout="column"> <fieldset> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'main.searchlabel\' | translate}}</legend> <form ng-submit="reloadTable()" name="applicationSearchForm"> <div layout="row" flex> <md-input-container flex="20"> <label class="textInput">{{\'stipend.scholarshipType\' | translate}}</label> <hois-classifier-select required ng-model="criteria.type" name="type" model-value-attr="code" main-classifier-code="STIPTOETUS" show-only-values="formState.allowedStipendTypes" ng-change="resetCurriculum()"></hois-classifier-select> </md-input-container> <div layout="row" flex="20" flex-offset="5"> <md-input-container flex ng-if="criteria.type !== \'STIPTOETUS_ERIALA\'"> <label class="textInput">{{\'stipend.curriculums\' | translate}}</label> <hois-select flex ng-model="criteria.curriculum" type="curriculum" label="stipend.curriculum" multiple></hois-select> </md-input-container> <md-input-container flex ng-if="criteria.type === \'STIPTOETUS_ERIALA\'"> <label class="textInput">{{\'stipend.curriculum\' | translate}}</label> <hois-select flex ng-model="criteria.curriculum" type="curriculum" label="stipend.curriculum" multiple required></hois-select> </md-input-container> </div> <md-input-container flex="20" flex-offset="5"> <label class="textInput">{{\'stipend.courses\' | translate}}</label> <hois-classifier-select ng-model="criteria.courses" name="type" model-value-attr="code" main-classifier-code="KURSUS" multiple></hois-classifier-select> </md-input-container> <div layout="row" flex="20" flex-offset="5"> <md-input-container flex> <label class="textInput">{{\'stipend.applicant\' | translate}}</label> <input type="text" ng-model="criteria.studentName" name="nameEt" md-maxlength="500"> </md-input-container> </div> </div> <div layout="row" flex> <md-input-container flex="20"> <label class="textInput">{{\'stipend.scholarshipName\' | translate}}</label> <input type="text" ng-model="criteria.nameEt" name="nameEt" md-maxlength="500"> </md-input-container> <md-input-container flex="20" flex-offset="5"> <label class="textInput">{{\'stipend.studyPeriod\' | translate}}</label> <hois-select ng-model="criteria.studyPeriod" values="studyPeriods"></hois-select> </md-input-container> <md-input-container flex="20" flex-offset="5"> <label class="textInput">{{\'stipend.status\' | translate}}</label> <hois-classifier-select ng-model="criteria.status" name="type" model-value-attr="code" main-classifier-code="STIPTOETUS_STAATUS"></hois-classifier-select> </md-input-container> </div> <div layout="row"> <md-button ng-click="reloadTable()" class="md-raised md-primary">{{\'main.button.search\' | translate}}</md-button> <md-button class="md-raised" ng-click="clearCriteria()">{{\'main.button.clear\' | translate}}</md-button> </div> </form> </fieldset> <br> <div ng-include="\'scholarship/templates/scholarship.applications.scholarships.html\'"></div> <div layout="row" ng-if="applications.length > 0"> <md-button ng-click="accept()" class="md-raised md-primary" ng-if="auth.isAdmin() && canManage">{{\'main.button.accept\' | translate}}</md-button> <md-button class="md-raised" ng-click="annul()" ng-if="auth.isAdmin() && canManage">{{\'main.button.annul\' | translate}}</md-button> <md-button class="md-raised" ng-click="reject()" ng-if="auth.isAdmin() && canManage">{{\'main.button.reject\' | translate}}</md-button> <md-button class="md-raised" ng-click="refreshResults()" ng-if="auth.isAdmin() && canManage">{{\'main.button.refreshResults\' | translate}}</md-button> <md-button class="md-raised" ng-click="checkComplies()" ng-if="auth.isAdmin()">{{\'main.button.checkComplies\' | translate}}</md-button> <md-button class="md-raised" ng-click="committeeDecision()" ng-if="auth.isAdmin() && canManage">{{\'main.button.committeeDecision\' | translate}}</md-button> </div> </div> </div>'),a.put("scholarship/scholarship.application.reject.edit.html",'<div class="ois-form-layout-padding ois-form-layout" ng-cloak> <div layout="column"> <div layout="row" flex="100" flex-sm="100" flex-xs="100"> {{scholarshipType === \'scholarships\' ? \'stipend.reject.stipendStudentList\' : \'stipend.reject.grantStudentList\' | translate}} </div> </div> <table md-table class="secondary-table"> <thead md-head> <tr md-row> <th md-column>{{\'stipend.fullName\' | translate}}</th> <th md-column>{{\'stipend.student.idCode\' | translate}}</th> <th md-column>{{\'stipend.rejectComment\' | translate}}</th> <th md-column>&nbsp;</th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="rejection in rejections" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell>{{rejection.fullName}}</td> <td md-cell>{{rejection.idCode}}</td> <td md-cell> <div flex><input flex type="text" ng-model="rejection.rejectComment" style="width: 100%" autofocus maxlength="100"></div> </td> <td md-cell> <md-button class="remove nomargin" ng-click="removeFromArray(rejections, rejection)">&times;</md-button> </td> </tr> </tbody> </table> <div layout="row" ng-if="rejections.length > 0"> <md-button class="md-raised md-primary" ng-click="reject()">{{\'main.button.reject\' | translate}}</md-button> <md-button class="md-raised" ng-click="back(\'#/scholarships/applications/\' + scholarshipType)">{{\'main.button.back\' | translate}}</md-button> </div> </div>'),a.put("scholarship/scholarship.decision.edit.html",'<div class="ois-form-layout-padding ois-form-layout" ng-cloak> <form name="decisionForm"> <div layout="row"> <md-input-container flex> <label>{{\'stipend.decision.protocolNr\' | translate}}</label> <input type="text" ng-model="decision.protocolNr" md-maxlength="50"> </md-input-container> </div> <div layout="row"> <md-input-container flex> <label>{{\'stipend.decision.decided\' | translate}}</label> <md-datepicker ng-model="decision.decided" required></md-datepicker> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex> <label>{{\'stipend.decision.addInfo\' | translate}}</label> <textarea ng-model="decision.addInfo" md-maxlength="4000" max-rows="10"></textarea> </md-input-container> </div> <fieldset> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'stipend.committee\' | translate}}</legend> <div flex="30" flex-sm="100" flex-xs="100"> <md-input-container> <label>{{\'stipend.committee\' | translate}}</label> <hois-select ng-model="formState.committee" values="formState.committees" ng-change="selectedCommitteeChanged()" required></hois-select> </md-input-container> </div> <md-table-container ng-if="formState.committeeMembers"> <table md-table class="secondary-table"> <thead md-head> <tr md-row> <th md-column>{{\'stipend.decision.name\' | translate}}</th> <th md-column>{{\'stipend.decision.role\' | translate}}</th> <th md-column>{{\'stipend.decision.present\' | translate}}</th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="row in formState.committeeMembers | orderBy: \'memberName\'" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell>{{row.memberName}}</td> <td md-cell ng-if="row.isChairman">{{\'stipend.decision.chairman\' | translate}}</td> <td md-cell ng-if="!row.isChairman">{{\'stipend.decision.member\' | translate}}</td> <td md-cell> <md-checkbox aria-label="module" ng-model="row.isPresent"></md-checkbox> </td> </tr> </tbody> </table> </md-table-container> </fieldset> </form> <div ng-include="\'scholarship/templates/scholarship.applications.\'+scholarshipType+\'.html\'"></div> <div layout="row"> <md-button class="md-raised md-primary" ng-click="decide()">{{\'main.button.decide\' | translate}}</md-button> <md-button class="md-raised" ng-click="back(\'#/scholarships/applications/\' + scholarshipType, decisionForm)">{{\'main.button.back\' | translate}}</md-button> </div> </div>'),a.put("scholarship/scholarship.decision.view.html",'<div class="ois-form-layout-padding ois-form-layout form-readonly" ng-cloak> <form name="decisionForm"> <div layout="row"> <md-input-container flex> <label>{{\'stipend.decision.protocolNr\' | translate}}</label> <hois-value value="decision.protocolNr"></hois-value> </md-input-container> </div> <div layout="row"> <md-input-container flex> <label>{{\'stipend.decision.decided\' | translate}}</label> <hois-value value="decision.decided | hoisDate"></hois-value> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex> <label>{{\'stipend.decision.addInfo\' | translate}}</label> <hois-value value="decision.addInfo"></hois-value> </md-input-container> </div> <fieldset> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'stipend.committee\' | translate}}</legend> <br> <div layout="row"> <md-input-container flex> <label>{{\'stipend.decision.name\' | translate}}</label> <hois-value value="decision.committeeName"></hois-value> </md-input-container> </div> <md-table-container ng-if="decision.committeeMembers"> <table md-table class="secondary-table"> <thead md-head> <tr md-row> <th md-column>{{\'stipend.decision.name\' | translate}}</th> <th md-column>{{\'stipend.decision.role\' | translate}}</th> <th md-column>{{\'stipend.decision.present\' | translate}}</th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="row in decision.committeeMembers | orderBy: \'memberName\'" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell>{{row.memberName}}</td> <td md-cell ng-if="row.isChairman">{{\'stipend.decision.chairman\' | translate}}</td> <td md-cell ng-if="!row.isChairman">{{\'stipend.decision.member\' | translate}}</td> <td md-cell> <md-checkbox aria-label="module" ng-model="row.isPresent" disabled></md-checkbox> </td> </tr> </tbody> </table> </md-table-container> </fieldset> </form> <div ng-include="\'scholarship/templates/scholarship.applications.\'+scholarshipType+\'.html\'"></div> <div layout="row"> <md-button class="md-raised" ng-if="auth.isAdmin()" ng-click="delete()">{{\'main.button.delete\' | translate}}</md-button> <md-button class="md-raised" ng-click="back(\'#/scholarships/applications/\' + scholarshipType)">{{\'main.button.back\' | translate}}</md-button> </div> </div>'),a.put("scholarship/scholarship.edit.html",'<div class="ois-form-layout-padding ois-form-layout" ng-cloak> <div flex> <form name="stipendForm"> <div layout="row" flex> <md-input-container flex> <label class="textInput">{{formState.typeIsScholarship ? \'stipend.scholarshipType\' : \'stipend.grantType\' | translate}}</label> <hois-classifier-select ng-model="stipend.type" name="type" ng-change="stipendTypeChanged()" model-value-attr="code" main-classifier-code="STIPTOETUS" ng-disabled="stipend.type" required show-only-values="formState.allowedStipendTypes"></hois-classifier-select> </md-input-container> </div> <div ng-include="templateName"></div> </form> </div> <div layout="row" ng-if="!stipend.type"> <md-button class="md-raised" ng-click="back(\'#/scholarships/\' + formState.typeIsScholarship ? \'scholarships\' : \'grants\', stipendForm)">{{\'main.button.back\' | translate}}</md-button> </div> </div>'),a.put("scholarship/scholarship.relatedFiles.edit.html",'<legend ng-if="editable || application.files.length > 0" md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'main.relatedFiles\' | translate}}</legend> <md-button ng-if="editable" class="md-raised" ng-click="openAddFileDialog()">{{\'main.button.uploadFile\' | translate}}</md-button> <br> <md-table-container> <table md-table class="secondary-table" ng-if="application.files.length > 0"> <thead md-head> <tr md-row> <th md-column> <span>{{\'file.nameAndFile\' | translate}}</span> </th> <th md-column ng-if="editable"></th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="file in application.files | orderBy: \'id\'" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell> <div layout="row" flex> <div flex="80"> {{file.oisFile.fname ? file.oisFile.fname : file.fname}} </div> <div flex> <a ng-href="{{getUrl(file.oisFile, \'scholarshipapplication\')}}" download target="_blank" rel="noopener noreferrer"> <md-icon md-font-set="material-icons">file_download</md-icon> </a> </div> </div> </td> <td md-cell ng-if="editable"> <md-button class="remove nomargin" ng-click="removeFile(application.files, file)">&times;</md-button> </td> </tr> </tbody> </table> </md-table-container>'),a.put("scholarship/scholarship.search.html",'<div class="ois-form-layout-padding ois-form-layout" ng-cloak> <div layout="column"> <fieldset> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'main.searchlabel\' | translate}}</legend> <form ng-submit="loadData()" novalidate> <div layout="row" flex> <md-input-container flex> <label class="textInput">{{formState.typeIsScholarship ? \'stipend.scholarshipType\' : \'stipend.grantType\' | translate}}</label> <hois-classifier-select ng-model="criteria.type" name="type" model-value-attr="code" main-classifier-code="STIPTOETUS" show-only-values="allowedStipendTypes"></hois-classifier-select> </md-input-container> </div> <div layout="row" flex> <md-input-container flex> <label class="textInput">{{\'stipend.studyPeriod\' | translate}}</label> <hois-select ng-model="criteria.studyPeriod" type="studyperiodyear" preselect-current></hois-select> </md-input-container> </div> <div layout="row" flex> <md-input-container flex> <label class="textInput">{{formState.typeIsScholarship ? \'stipend.scholarshipName\' : \'stipend.grantName\' | translate}}</label> <input type="text" ng-model="criteria.nameEt" name="nameEt" md-maxlength="500"> </md-input-container> </div> <div layout="row" flex> <md-input-container flex> <label class="textInput">{{\'stipend.status\' | translate}}</label> <hois-select ng-model="criteria.isOpen" model-value-attr="code" values="statuses"></hois-select> </md-input-container> </div> <div layout="row"> <md-button type="submit" class="md-raised md-primary">{{\'main.button.search\' | translate}}</md-button> <md-button class="md-raised" ng-click="clearCriteria()">{{\'main.button.clear\' | translate}}</md-button> <md-button class="md-raised" ng-if="canEdit" ng-href="#/scholarships/{{scholarshipType}}/new">{{\'main.button.create\' | translate}}</md-button> </div> </form> </fieldset> <br> <md-table-container ng-cloak layout-padding> <table md-table md-progress="tabledata.$promise"> <thead md-head md-order="criteria.order" md-on-reorder="loadData"> <tr md-row> <th md-column md-order-by="st.type_code">{{\'stipend.type\' | translate}}</th> <th md-column md-order-by="st.nameEt">{{\'stipend.name\' | translate}}</th> <th md-column md-order-by="st.applicationStart">{{\'stipend.applicationPeriod\' | translate}}</th> <th md-column md-order-by="st.places">{{\'stipend.places\' | translate}}</th> <th md-column md-order-by="st.isOpen">{{\'stipend.status\' | translate}}</th> <th md-column></th> <th></th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="row in tabledata.content" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell class="one-row">{{currentLanguageNameField(row.type)}}</td> <td md-cell> <a ng-href="#/scholarships/{{row.id}}/view">{{::row.nameEt}}</a> </td> <td md-cell>{{::row.applicationStart | hoisDate}} - {{::row.applicationEnd | hoisDate}}</td> <td md-cell>{{::row.places}}</td> <td md-cell>{{::row.isOpen ? \'stipend.published\' : \'stipend.underRevision\' | translate}}</td> <td md-cell> <md-button md-no-ink class="md-primary change-button" ng-if="canEdit" ng-click="changeStipend(row)"> {{\'main.button.change\' | translate}} </md-button> </td> </tr> </tbody> </table> </md-table-container> <md-table-pagination md-limit="criteria.size" md-limit-options="[10, 20, 50]" md-page="criteria.page" md-total="{{tabledata.totalElements}}" md-on-paginate="loadData" md-label="{page: \'{{\'main.page\' | translate}}:\', rowsPerPage: \'{{\'main.rowPerPage\' | translate}}:\', of: \'{{\'main.of\' | translate}}\' }" md-page-select></md-table-pagination> </div> </div>'),a.put("scholarship/scholarship.view.html",'<div ng-include="templateName"></div>'),a.put("school/final.doc.signer.edit.html",'<div layout="column" layout-padding> <div> <form name="finalDocSignerForm"> <md-input-container class="md-block"> <label>{{\'finalDocSigner.name\' | translate}}</label> <input ng-model="record.name" name="name" type="text" required md-maxlength="100"> </md-input-container> <md-input-container class="md-block"> <label>{{\'finalDocSigner.position\' | translate}}</label> <input ng-model="record.position" name="position" type="text" required md-maxlength="255"> </md-input-container> <md-input-container class="md-block" ng-if="auth.higher"> <label>{{\'finalDocSigner.positionEn\' | translate}}</label> <input ng-model="record.positionEn" name="positionEn" type="text" required md-maxlength="255"> </md-input-container> <div layout="column"> <md-checkbox ng-model="record.isFirst" aria-label="{{\'finalDocSigner.isFirst\' | translate}}"> {{\'finalDocSigner.isFirst\' | translate}} </md-checkbox> <md-checkbox ng-model="record.isValid" aria-label="{{\'finalDocSigner.isValid\' | translate}}"> {{\'finalDocSigner.isValid\' | translate}} </md-checkbox> </div> </form> <md-button ng-click="update()" class="md-raised md-primary">{{\'main.button.save\' | translate}}</md-button> <md-button ng-click="delete()" ng-if="record.id" class="md-raised">{{\'main.button.delete\' | translate}}</md-button> <md-button ng-href="#/school/finaldocsigners" class="md-raised">{{\'main.button.back\' | translate}}</md-button> </div> </div>'),a.put("school/final.doc.signer.search.html",'<div layout-padding> <div flex> <md-table-container> <table md-table md-progress="tabledata.$promise"> <thead md-head md-order="criteria.order" md-on-reorder="loadData"> <tr md-row> <th md-column md-order-by="name">{{\'finalDocSigner.name\' | translate}}</th> <th md-column md-order-by="position">{{\'finalDocSigner.position\' | translate}}</th> <th md-column md-order-by="positionEn" ng-if="auth.higher">{{\'finalDocSigner.positionEn\' | translate}}</th> <th md-column md-order-by="isFirst">{{\'finalDocSigner.isFirst\' | translate}}</th> <th md-column md-order-by="isValid">{{\'finalDocSigner.isValid\' | translate}}</th> <th md-column></th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="row in tabledata.content" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell>{{::row.name}}</td> <td md-cell>{{::row.position}}</td> <td md-cell ng-if="auth.higher">{{::row.positionEn}}</td> <td md-cell>{{::row.isFirst ? \'main.yes\' : \'main.no\' | translate}}</td> <td md-cell>{{::row.isValid ? \'main.yes\' : \'main.no\' | translate}}</td> <td md-cell> <md-button md-no-ink class="md-primary change-button" ng-if="isAuthorized(\'ROLE_OIGUS_M_TEEMAOIGUS_LOPDOKALLKIRI\')" ng-href="#/school/finaldocsigners/{{::row.id}}/edit">{{\'main.button.change\' | translate}}</md-button> </td> </tr> </tbody> </table> </md-table-container> <md-table-pagination md-limit="criteria.size" md-limit-options="[10, 20, 50]" md-page="criteria.page" md-total="{{tabledata.totalElements}}" md-on-paginate="loadData" md-label="{page: \'{{\'main.page\' | translate}}:\', rowsPerPage: \'{{\'main.rowPerPage\' | translate}}:\', of: \'{{\'main.of\' | translate}}\'}" md-page-select></md-table-pagination> </div> <div layout="row"> <md-button class="md-raised" ng-if="isAuthorized(\'ROLE_OIGUS_M_TEEMAOIGUS_LOPDOKALLKIRI\')" ng-href="#/school/finaldocsigners/new">{{\'main.button.create\' | translate}}</md-button> </div> </div>'),a.put("school/school.capacity.type.html",'<div ng-cloak ng-if="auth.higher && auth.vocational"> <div ng-include="\'school/school.capacity.type.navbar.html\'"></div> </div> <div layout="column" layout-padding> <div> <form name="schoolStudyLevelsForm"> <md-tablecontainer> <table md-table class="secondary-table"> <thead md-head> <tr md-row> <th md-column> <md-checkbox ng-model="selectAll" ng-change="updateAllCheckBoxes(selectAll)"> </md-checkbox> </th> <th md-column>{{\'schoolCapacityType.type\' | translate}}</th> <th md-column>{{\'schoolCapacityType.isTimetable\' | translate}}</th> <th md-column>{{auth.higher ? (\'schoolCapacityType.teacherLoadPercentageHigher\' | translate) : (\'schoolCapacityType.teacherLoadPercentageVocational\' | translate)}}</th> <th md-column>&nbsp;</th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="capacityType in capacityTypes" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell> <md-checkbox ng-model="capacityType.isUsable" ng-change="isUsableChanged(capacityType)"> </md-checkbox> </td> <td md-cell>{{currentLanguageNameField(capacityMap[capacityType.typeCode])}}</td> <td md-cell> <md-checkbox ng-model="capacityType.isTimetable" ng-disabled="!capacityType.isUsable"> </md-checkbox> </td> <td md-cell> <div ng-repeat="load in capacityType.loads"> {{load.loadPercentage}} ({{currentLanguageNameField(studyYearMap[load.studyYearId])}}) </div> </td> <td md-cell> <md-button md-no-ink class="md-primary change-button" ng-if="canEdit && capacityType.id && capacityType.isUsable" ng-click="changeLoads(capacityType)">{{\'main.button.change\' | translate}}</md-button> </td> </tr> </tbody> </table> </md-tablecontainer> </form> <md-button ng-if="canEdit" ng-click="update()" class="md-raised md-primary">{{\'main.button.save\' | translate}}</md-button> </div> </div>'),a.put("school/school.capacity.type.load.dialog.html",'<md-dialog aria-label="capacity type load dialog" flex="50" flex-xs="100"> <form name="dialogForm" ng-cloak> <md-toolbar> <div class="md-toolbar-tools"> <h2>{{currentLanguageNameField(capacityType)}}</h2> <span flex></span> <md-button class="md-icon-button" ng-click="cancel()"> <md-icon md-font-set="material-icons">close</md-icon> </md-button> </div> </md-toolbar> <md-dialog-content> <span flex></span> <div class="ois-form-layout md-dialog-content" layout="column" flex ng-cloak> <md-table-container> <table md-table> <thead md-head> <tr md-row> <th md-column>{{\'schoolCapacityType.studyYear\' | translate}}</th> <th md-column>{{\'schoolCapacityType.loadPercentage\' | translate}}</th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="row in studyYears" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell>{{currentLanguageNameField(studyYearMap[row.studyYearId])}}</td> <td md-cell> <md-input-container class="md-block"> <input ng-model="row.loadPercentage" name="loadPercentage" type="number" min="0" max="100"> </md-input-container> </td> </tr> </tbody> </table> </md-table-container> </div> </md-dialog-content> <md-dialog-actions layout="row" layout-align="start center"> <md-button class="md-raised md-primary" ng-click="submit()">{{"main.button.save" | translate}}</md-button> <md-button class="md-raised" ng-click="cancel()">{{"main.button.close" | translate}}</md-button> </md-dialog-actions> </form> </md-dialog>'),
a.put("school/school.capacity.type.navbar.html",'<md-nav-bar md-selected-nav-item="currentNavItem" nav-bar-aria-label="main selection"> <md-nav-item md-nav-click="switchHigher(false)" name="school.capacityType.vocational">{{\'main.vocational\' | translate}}</md-nav-item> <md-nav-item md-nav-click="switchHigher(true)" name="school.capacityType.higher">{{\'main.higher\' | translate}}</md-nav-item> </md-nav-bar>'),a.put("school/school.department.edit.html",'<div layout="column" layout-padding> <div> <form name="schoolDepartmentForm"> <md-input-container class="md-block"> <label>{{\'school.department.code\' | translate}}</label> <input ng-model="schoolDepartment.code" name="code" type="text" required md-maxlength="50"> </md-input-container> <md-input-container class="md-block"> <label class="textInput">{{\'school.department.nameEt\' | translate}}</label> <input ng-model="schoolDepartment.nameEt" name="nameEt" type="text" required md-maxlength="255"> </md-input-container> <md-input-container class="md-block"> <label class="textInput">{{\'school.department.nameEn\' | translate}}</label> <input ng-model="schoolDepartment.nameEn" name="nameEn" type="text" md-maxlength="255"> </md-input-container> <md-input-container class="md-block"> <label>{{\'school.department.parent\' | translate}}</label> <hois-school-department-select ng-model="schoolDepartment.parentSchoolDepartment" name="parentSchoolDepartment" excluded-id="schoolDepartment.id"></hois-school-department-select> </md-input-container> <div layout="row"> <div flex="100"> <md-input-container flex> <label>{{\'school.department.validFrom\' | translate}}</label> <md-datepicker ng-model="schoolDepartment.validFrom" md-max-date="schoolDepartment.validThru" required></md-datepicker> </md-input-container> <md-input-container flex> <label>{{\'school.department.validThru\' | translate}}</label> <md-datepicker ng-model="schoolDepartment.validThru" md-min-date="schoolDepartment.validFrom"></md-datepicker> </md-input-container> </div> </div> </form> <md-button ng-click="update()" class="md-raised md-primary">{{\'main.button.save\' | translate}}</md-button> <md-button ng-click="delete()" ng-if="schoolDepartment.id" class="md-raised">{{\'main.button.delete\' | translate}}</md-button> <md-button ng-click="back(\'#/school/departments\', schoolDepartmentForm)" class="md-raised">{{\'main.button.back\' | translate}}</md-button> </div> </div>'),a.put("school/school.department.list.html",'<div class="ois-form-layout-padding"> <div flex> <fieldset> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'main.searchlabel\' | translate}}</legend> <form name="searchForm" ng-submit="searchForm.$valid && loadData()" novalidate class="nomargin" layout="column"> <div layout="row" layout-sm="column" layout-xs="column"> <!--div class="indentForToast"></div--> <md-input-container flex="45" flex-sm="100" flex-xs="100"> <label class="textInput">{{\'school.department.code\' | translate}}</label> <input ng-model="criteria.code" name="code" type="text" md-maxlength="50" autofocus> </md-input-container> <md-input-container flex="50" flex-sm="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label class="textInput">{{\'school.department.name\' | translate}}</label> <input ng-model="criteria.name" name="name" type="text" md-maxlength="255"> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container> <md-checkbox ng-model="criteria.valid" name="valid"> {{\'school.department.validTrue\' | translate}} </md-checkbox> </md-input-container> </div> <div layout="row"> <md-button type="submit" class="md-raised md-primary">{{\'main.button.search\' | translate}}</md-button> <md-button class="md-raised" ng-click="clearCriteria()">{{\'main.button.clear\' | translate}}</md-button> <md-button class="md-raised" ng-if="isAuthorized(\'ROLE_OIGUS_M_TEEMAOIGUS_STRUKTUUR\')" ng-href="#/school/departments/new">{{\'main.button.create\' | translate}}</md-button> </div> <div flex-xs="0" flex-gt-xs="0" flex-gt-sm="50"></div> </form> </fieldset> </div> </div> <div layout-padding> <div flex> <md-table-container> <table md-table md-progress="tabledata.$promise"> <thead md-head md-order="criteria.order" md-on-reorder="loadData"> <tr md-row> <th md-column md-order-by="code">{{\'school.department.code\' | translate}}</th> <th md-column md-order-by="{{currentLanguage()===\'en\' ? \'nameEn\' : \'nameEt\'}}">{{\'school.department.name\' | translate}}</th> <th md-column>{{\'school.department.status\' | translate}}</th> <th md-column md-order-by="validFrom">{{\'school.department.validFrom\' | translate}}</th> <th md-column md-order-by="validThru">{{\'school.department.validThru\' | translate}}</th> <th md-column></th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="row in tabledata.content" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell>{{::row.code}}</td> <td md-cell style="padding-left:{{15*row.indent}}px"> <a md-no-ink class="md-primary change-button" ng-href="#/school/departments/{{::row.id}}/view">{{currentLanguageNameField(row)}}</a> </td> <td md-cell>{{row.isValid ? \'school.department.validTrue\' : \'school.department.validFalse\' | translate}}</td> <td md-cell>{{::row.validFrom | hoisDate}}</td> <td md-cell>{{::row.validThru | hoisDate}}</td> <td md-cell> <md-button md-no-ink class="md-primary change-button" ng-if="isAuthorized(\'ROLE_OIGUS_M_TEEMAOIGUS_STRUKTUUR\')" ng-href="#/school/departments/{{::row.id}}/edit">{{\'main.button.change\' | translate}}</md-button> </td> </tr> </tbody> </table> </md-table-container> <md-table-pagination md-limit="criteria.size" md-limit-options="[10, 20, 50]" md-page="criteria.page" md-total="{{tabledata.totalElements}}" md-on-paginate="loadData" md-label="{page: \'{{\'main.page\' | translate}}:\', rowsPerPage: \'{{\'main.rowPerPage\' | translate}}:\', of: \'{{\'main.of\' | translate}}\'}" md-page-select></md-table-pagination> </div> </div>'),a.put("school/school.department.view.html",'<div class="form-readonly" layout="column" layout-padding> <div> <form name="schoolDepartmentForm"> <md-input-container class="md-block"> <label>{{\'school.department.code\' | translate}}</label> <hois-value value="schoolDepartment.code"></hois-value> </md-input-container> <md-input-container class="md-block"> <label class="textInput">{{\'school.department.nameEt\' | translate}}</label> <hois-value value="schoolDepartment.nameEt"></hois-value> </md-input-container> <md-input-container class="md-block"> <label class="textInput">{{\'school.department.nameEn\' | translate}}</label> <hois-value value="schoolDepartment.nameEn"></hois-value> </md-input-container> <md-input-container class="md-block"> <label>{{\'school.department.parent\' | translate}}</label> <hois-value value="schoolDepartment.parentSchoolDepartment"></hois-value> </md-input-container> <div layout="row" flex="100"> <md-input-container flex="20"> <label>{{\'school.department.validFrom\' | translate}}</label> <hois-value value="schoolDepartment.validFrom | hoisDate"></hois-value> </md-input-container> <md-input-container flex="20" flex-offset="5"> <label>{{\'school.department.validThru\' | translate}}</label> <hois-value value="schoolDepartment.validThru | hoisDate"></hois-value> </md-input-container> </div> <md-button ng-if="isAuthorized(\'ROLE_OIGUS_M_TEEMAOIGUS_STRUKTUUR\')" ng-href="#/school/departments/{{::schoolDepartment.id}}/edit" class="md-raised md-primary">{{\'main.button.edit\' | translate}}</md-button> <md-button ng-href="#/school/departments" class="md-raised">{{\'main.button.back\' | translate}}</md-button> </form> </div> </div>'),a.put("school/school.edit.html",'<div class="ois-form-layout-padding ois-form-layout" ng-cloak> <form name="schoolForm"> <!--p class="textInput">{{\'school.name\' | translate}}&nbsp;*</p--> <md-autocomplete md-floating-label="{{\'school.name\' | translate}}" required md-selected-item="school._ehisSchool" md-search-text="queryText" md-items="item in querySearch(queryText)" md-item-text="currentLanguage()===\'en\' ? (item.nameEn || item.nameEt) : item.nameEt" md-min-length="0" md-no-cache md-selected-item-change="setEhisSchool()"> <md-item-template> <span md-highlight-text="queryText" md-highlight-flags="^i">{{currentLanguage()===\'en\' ?(item.nameEn || item.nameEt) : item.nameEt}}</span> </md-item-template> <md-not-found> {{\'main.messages.error.notFound\' | translate}} </md-not-found> </md-autocomplete> <md-input-container class="md-block"> <label class="textInput">{{\'school.nameGenitiveEt\' | translate}}</label> <input ng-model="school.nameGenitiveEt" name="nameGenitiveEt" type="text" md-maxlength="255"> </md-input-container> <md-input-container class="md-block"> <label class="textInput">{{\'school.code\' | translate}}</label> <input ng-model="school.code" name="code" type="text" required md-maxlength="10"> </md-input-container> <md-input-container class="md-block"> <label class="textInput">{{\'school.regNr\' | translate}}</label> <input ng-model="school.regNr" type="text" readonly> </md-input-container> <md-input-container class="md-block"> <label class="textInput">{{\'school.ehisId\' | translate}}</label> <input ng-model="school.ehisId" type="text" readonly> </md-input-container> <md-input-container class="md-block"> <label class="textInput">{{\'school.nameEn\' | translate}}</label> <input ng-model="school.nameEn" name="nameEn" type="text" required md-maxlength="255"> </md-input-container> <md-input-container class="md-block"> <label class="textInput">{{\'school.email\' | translate}}</label> <input ng-model="school.email" name="email" type="email" required md-maxlength="255"> </md-input-container> <md-input-container class="md-block"> <label class="textInput">{{\'school.phone\' | translate}}</label> <input ng-model="school.phone" name="phone" type="text" md-maxlength="100"> </md-input-container> <div class="md-block"> <hois-ads-adapter class="md-text" ng-model="school.addressAds" ads-oid-model="school.addressAdsOid" address-model="school.address"></hois-ads-adapter> </div> <md-input-container class="md-block"> <md-checkbox ng-model="school.generateUserEmail" name="generateUserEmail"> {{\'school.generateUserEmail\' | translate}} </md-checkbox> </md-input-container> <md-input-container class="md-block"> <label class="textInput">{{\'school.emailDomain\' | translate}}</label> <input ng-model="school.emailDomain" name="emailDomain" type="text" md-maxlength="255"> </md-input-container> <md-input-container class="md-block"> <label class="textInput">{{\'school.rtipSchoolCode\' | translate}}</label> <input ng-model="school.rtipSchoolCode" name="rtipSchoolCode" type="text" md-maxlength="10"> </md-input-container> <md-input-container class="md-block"> <md-checkbox ng-model="school.isMinorStudentAbsence" name="isMinorStudentAbsence"> {{\'school.isMinorStudentAbsence\' | translate}} </md-checkbox> </md-input-container> <md-input-container ng-if="school.type.higher" class="md-block"> <md-checkbox ng-model="school.isLetterGrade" name="isLetterGrade"> {{\'school.isLetterGrade\' | translate}} </md-checkbox> </md-input-container> <md-input-container class="md-block"> <label class="textInput">{{\'school.adUrl\' | translate}}</label> <input ng-model="school.adUrl" name="adUrl" type="text" md-maxlength="255"> </md-input-container> <md-input-container class="md-block"> <label class="textInput">{{\'school.adPort\' | translate}}</label> <input ng-model="school.adPort" name="adPort" type="number" min="0" max="32767"> </md-input-container> <md-input-container class="md-block"> <label class="textInput">{{\'school.adDomain\' | translate}}</label> <input ng-model="school.adDomain" name="adDomain" type="text" md-maxlength="255"> </md-input-container> <md-input-container class="md-block"> <label class="textInput">{{\'school.adBase\' | translate}}</label> <input ng-model="school.adBase" name="adBase" type="text" md-maxlength="255"> </md-input-container> <md-input-container class="md-block"> <label class="textInput">{{\'school.adIdcodeField\' | translate}}</label> <input ng-model="school.adIdcodeField" name="adIdcodeField" type="text" md-maxlength="50"> </md-input-container> <md-input-container class="md-block"> <label class="textInput">{{\'school.finalSchoolType\' | translate}}</label> <input ng-model="school.finalSchoolType" name="finalSchoolType" type="text" md-maxlength="100"> </md-input-container> <md-input-container class="md-block"> <label class="textInput">{{\'school.final62\' | translate}}</label> <textarea ng-model="school.final62" name="final62" md-maxlength="500" max-rows="10"></textarea> </md-input-container> <md-input-container class="md-block"> <label class="textInput">{{\'school.finalSchoolTypeEn\' | translate}}</label> <input ng-model="school.finalSchoolTypeEn" name="finalSchoolType" type="text" md-maxlength="100"> </md-input-container> <md-input-container class="md-block"> <label class="textInput">{{\'school.finalEn62\' | translate}}</label> <textarea ng-model="school.finalEn62" name="finalEn62" md-maxlength="500" max-rows="10"></textarea> </md-input-container> <lf-ng-md-file-input name="logoFiles" lf-files="logoFiles" lf-api="logoFileApi" lf-filesize="100KB" accept=".png, .jpg, .jpeg" lf-mimetype="image/*" preview lf-placeholder="{{\'school.logo.notSelected\' | translate}}" lf-browse-label="{{\'school.logo.selectLogo\' | translate}}" lf-remove-label="{{\'main.button.clear\' | translate}}"></lf-ng-md-file-input> <div ng-messages="schoolForm.logoFiles.$error" style="color:red"> <div ng-message="filesize">{{\'main.messages.error.fileTooLarge\' | translate}} 100KB!</div> <div ng-message="mimetype">{{\'main.messages.error.wrongExtension\' | translate}} png, jpg, jpeg</div> </div> </form> <h3 ng-if="school.logo">{{\'school.logo.currentLogo\' | translate}}</h3> <img ng-if="school.logo" ng-src="{{school.imageUrl}}" id="currentLogoView"> <br> <md-checkbox ng-model="school.deleteCurrentLogo" ng-if="school.id && school.logo && !logoFiles[0]"> {{\'school.logo.delete\' | translate}} </md-checkbox> <br> <md-button ng-click="update()" class="md-raised md-primary">{{\'main.button.save\' | translate}}</md-button> <md-button ng-click="delete()" ng-if="school.id" class="md-raised">{{\'main.button.delete\' | translate}}</md-button> <md-button ng-click="back(\'#/school\', schoolForm)" class="md-raised">{{\'main.button.back\' | translate}}</md-button> </div>'),a.put("school/school.list.html",'<div layout-padding> <div flex> <fieldset> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'main.searchlabel\' | translate}}</legend> <form ng-submit="loadData()" novalidate> <div layout="row"> <div flex-xs="100" flex-gt-xs="100" flex-gt-sm="50" layout="column"> <!--div class="indentForToast"></div--> <md-input-container> <label class="textInput">{{\'school.name\' | translate}}</label> <input ng-model="criteria.name" name="name" type="text" autofocus> </md-input-container> <div layout="row"> <md-button type="submit" class="md-raised md-primary">{{\'main.button.search\' | translate}}</md-button> <md-button class="md-raised" ng-click="clearCriteria()">{{\'main.button.clear\' | translate}}</md-button> <md-button class="md-raised" ng-href="#/school/new">{{\'main.button.create\' | translate}}</md-button> </div> </div> <div flex-xs="0" flex-gt-xs="0" flex-gt-sm="50"></div> </div> </form> </fieldset> </div> </div> <div layout-padding> <div flex> <md-table-container> <table md-table md-progress="tabledata.$promise"> <thead md-head md-order="criteria.order" md-on-reorder="loadData"> <tr md-row> <th md-column md-order-by="code">{{\'school.code\' | translate}}</th> <th md-column md-order-by="{{currentLanguage()===\'en\' ? \'nameEn\' : \'nameEt\'}}">{{\'school.name\' | translate}}</th> <th md-column md-order-by="email">{{\'school.email\' | translate}}</th> <th md-column></th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="row in tabledata.content" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell> <a md-no-ink class="md-primary" ng-href="#/school/{{::row.id}}/view">{{::row.code}}</a> </td> <td md-cell>{{currentLanguageNameField(row)}}</td> <td md-cell>{{::row.email}}</td> <td md-cell> <md-button md-no-ink class="md-primary change-button" ng-href="#/school/{{::row.id}}/edit">{{\'main.button.change\' | translate}}</md-button> </td> </tr> </tbody> </table> </md-table-container> <md-table-pagination md-limit="criteria.size" md-limit-options="[10, 20, 50]" md-page="criteria.page" md-total="{{tabledata.totalElements}}" md-on-paginate="loadData" md-label="{page: \'{{\'main.page\' | translate}}:\', rowsPerPage: \'{{\'main.rowPerPage\' | translate}}:\', of: \'{{\'main.of\' | translate}}\' }" md-page-select></md-table-pagination> </div> </div>'),a.put("school/school.study.levels.html",'<div layout="column" layout-padding> <div> <form name="schoolStudyLevelsForm"> <!--div class="indentForToast"></div--> <!--h3>{{currentLanguageNameField(studyLevels)}}</h3--> <md-list> <md-list-item ng-repeat="studyLevel in studyLevelDefs"> <span> <md-checkbox ng-model="studyLevel._selected" ng-disabled="!canEdit"> {{currentLanguageNameField(studyLevel)}} </md-checkbox> </span> </md-list-item> </md-list> </form> <md-button ng-if="canEdit" ng-click="update()" class="md-raised md-primary">{{\'main.button.save\' | translate}}</md-button> </div> </div>'),a.put("school/school.view.html",'<div class="ois-form-layout-padding ois-form-layout form-readonly" ng-cloak> <form name="schoolForm"> <md-input-container class="md-block"> <label class="textInput">{{\'school.name\' | translate}}</label> <hois-value value="school.nameEt"></hois-value> </md-input-container> <md-input-container class="md-block"> <label class="textInput">{{\'school.nameGenitiveEt\' | translate}}</label> <hois-value value="school.nameGenitiveEt"></hois-value> </md-input-container> <md-input-container class="md-block"> <label class="textInput">{{\'school.code\' | translate}}</label> <hois-value value="school.code"></hois-value> </md-input-container> <md-input-container class="md-block"> <label class="textInput">{{\'school.regNr\' | translate}}</label> <hois-value value="school.regNr"></hois-value> </md-input-container> <md-input-container class="md-block"> <label class="textInput">{{\'school.ehisId\' | translate}}</label> <hois-value value="school.ehisId"></hois-value> </md-input-container> <md-input-container class="md-block"> <label class="textInput">{{\'school.nameEn\' | translate}}</label> <hois-value value="school.nameEn"></hois-value> </md-input-container> <md-input-container class="md-block"> <label class="textInput">{{\'school.email\' | translate}}</label> <hois-value value="school.email"></hois-value> </md-input-container> <md-input-container class="md-block"> <label class="textInput">{{\'school.phone\' | translate}}</label> <hois-value value="school.phone"></hois-value> </md-input-container> <md-input-container class="md-block"> <label class="textInput">{{\'school.address\' | translate}}</label> <hois-value value="school.address"></hois-value> </md-input-container> <md-input-container class="md-block"> <label class="textInput">{{\'school.generateUserEmail\' | translate}}</label> <hois-value value="school.generateUserEmail ? \'main.yes\' : \'main.no\' | translate"></hois-value> </md-input-container> <md-input-container class="md-block"> <label class="textInput">{{\'school.emailDomain\' | translate}}</label> <hois-value value="school.emailDomain"></hois-value> </md-input-container> <md-input-container class="md-block"> <label class="textInput">{{\'school.rtipSchoolCode\' | translate}}</label> <hois-value value="school.rtipSchoolCode"></hois-value> </md-input-container> <md-input-container class="md-block"> <label class="textInput">{{\'school.isMinorStudentAbsence\' | translate}}</label> <hois-value value="school.isMinorStudentAbsence ? \'main.yes\' : \'main.no\' | translate"></hois-value> </md-input-container> <md-input-container ng-if="school.type.higher" class="md-block"> <label class="textInput">{{\'school.isLetterGrade\' | translate}}</label> <hois-value value="school.isLetterGrade ? \'main.yes\' : \'main.no\' | translate"></hois-value> </md-input-container> <md-input-container class="md-block"> <label class="textInput">{{\'school.adUrl\' | translate}}</label> <hois-value value="school.adUrl"></hois-value> </md-input-container> <md-input-container class="md-block"> <label class="textInput">{{\'school.adPort\' | translate}}</label> <hois-value value="school.adPort"></hois-value> </md-input-container> <md-input-container class="md-block"> <label class="textInput">{{\'school.adDomain\' | translate}}</label> <hois-value value="school.adDomain"></hois-value> </md-input-container> <md-input-container class="md-block"> <label class="textInput">{{\'school.adBase\' | translate}}</label> <hois-value value="school.adBase"></hois-value> </md-input-container> <md-input-container class="md-block"> <label class="textInput">{{\'school.adIdcodeField\' | translate}}</label> <hois-value value="school.adIdcodeField"></hois-value> </md-input-container> <md-input-container class="md-block"> <label class="textInput">{{\'school.finalSchoolType\' | translate}}</label> <hois-value value="school.finalSchoolType"></hois-value> </md-input-container> <md-input-container class="md-block"> <label class="textInput">{{\'school.final62\' | translate}}</label> <hois-value value="school.final62"></hois-value> </md-input-container> <md-input-container class="md-block"> <label class="textInput">{{\'school.finalSchoolTypeEn\' | translate}}</label> <hois-value value="school.finalSchoolTypeEn"></hois-value> </md-input-container> <md-input-container class="md-block"> <label class="textInput">{{\'school.finalEn62\' | translate}}</label> <hois-value value="school.finalEn62"></hois-value> </md-input-container> </form> <h3 ng-if="school.logo">{{\'school.logo.currentLogo\' | translate}}</h3> <div> <img ng-if="school.logo" ng-src="{{school.imageUrl}}"> </div> <br> <md-button ng-href="#/school/{{school.id}}/edit" class="md-raised md-primary">{{\'main.button.change\' | translate}}</md-button> <md-button ng-href="#/school" class="md-raised">{{\'main.button.back\' | translate}}</md-button> </div>'),a.put("stateCurriculum/state.curriculum.html",'<div class="ois-form-layout-padding"> <div flex> <form name="stateCurriculumForm" layout="column" class="nomargin"> <fieldset tabindex="1" flex> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'curriculum.mainData\' | translate}}</legend> <div layout="column"> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="50" flex-sm="100" flex-xs="100"> <label>{{\'stateCurriculum.enter.nameEt\' | translate}}</label> <input ng-model="stateCurriculum.nameEt" type="text" required md-maxlength="255" name="nameEt" ng-model-options="{ debounce: 250 }" unique="nameEtUniqueQuery"> <div ng-messages="stateCurriculumForm.nameEt.$error" ng-show="stateCurriculumForm.nameEt.$dirty"> <div ng-message="notUnique"> {{\'stateCurriculum.error.unique.name\' | translate}} </div> </div> </md-input-container> <md-input-container flex="45" flex-sm="100" flex-xs="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'stateCurriculum.enter.nameEn\' | translate}}</label> <input ng-model="stateCurriculum.nameEn" type="text" required md-maxlength="255" name="nameEn" ng-model-options="{ debounce: 250 }" unique="nameEnUniqueQuery"> <div ng-messages="stateCurriculumForm.nameEn.$error" ng-show="true"> <div ng-message="notUnique"> {{\'stateCurriculum.error.unique.name\' | translate}} </div> </div> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="25" flex-sm="100" flex-xs="100"> <label>{{\'curriculum.areaOfStudy\' | translate}}</label> <hois-classifier-select ng-model="iscedVald" main-classifier-code="ISCED_VALD" criteria="{vocational: true}" required model-value-attr="code"></hois-classifier-select> </md-input-container> <md-input-container flex="20" flex-sm="100" flex-xs="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'curriculum.fieldOfStudy\' | translate}}</label> <hois-classifier-select ng-model="iscedSuun" main-classifier-code="ISCED_SUUN" criteria="{vocational: true}" watch-model="iscedVald" model-value-attr="code" filter-values search-from-connect connect-main-classifier-code="ISCED_VALD" required></hois-classifier-select> </md-input-container> <md-input-container flex="45" flex-sm="100" flex-xs="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'curriculum.group\' | translate}}</label> <hois-classifier-select ng-model="stateCurriculum.iscedClass" main-classifier-code="ISCED_RYHM" criteria="{vocational: true}" watch-model="iscedSuun" model-value-attr="code" filter-values search-from-connect connect-main-classifier-code="ISCED_SUUN" required></hois-classifier-select> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column" class="top-margin"> <md-input-container flex="25" flex-sm="100" flex-xs="100"> <label>{{\'stateCurriculum.enter.credits.credits\' | translate}}</label> <input ng-model="stateCurriculum.credits" type="number" pattern="^\\d+$" required min="0" max="999" name="credits"> <div ng-messages="stateCurriculumForm.credits.$error" ng-show="stateCurriculumForm.credits.$dirty"> <div ng-message="min"> {{\'stateCurriculum.enter.credits.positive\' | translate}} </div> <div ng-message="max"> {{\'stateCurriculum.enter.credits.max\' | translate}} </div> <div ng-message="pattern"> {{\'stateCurriculum.enter.credits.integer\' | translate}} </div> </div> </md-input-container> <md-input-container flex="20" flex-sm="100" flex-xs="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'stateCurriculum.enter.ROKclassifier\' | translate}}</label> <hois-classifier-select ng-model="stateCurriculum.stateCurrClass" main-classifier-code="EHIS_ROK" criteria="{vocational: true}" required model-value-attr="code"></hois-classifier-select> </md-input-container> </div> </div> </fieldset> <div>&nbsp;</div> <fieldset tabindex="2"> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'curriculum.commonData\' | translate}}</legend> <div layout="column"> <md-input-container flex> <label>{{\'stateCurriculum.enter.objectivesEt\' | translate}}{{getStar()}}</label> <textarea ng-model="stateCurriculum.objectivesEt" ng-required="strictValidation()" md-maxlength="20000" max-rows="10"></textarea> </md-input-container> <md-input-container flex> <label>{{\'stateCurriculum.enter.objectivesEn\' | translate}}</label> <textarea ng-model="stateCurriculum.objectivesEn" md-maxlength="20000" max-rows="10"></textarea> </md-input-container> <md-input-container flex> <label>{{\'stateCurriculum.enter.outcome.outcomeLabelEt\' | translate}}{{getStar()}}</label> <textarea ng-model="stateCurriculum.outcomesEt" ng-required="strictValidation()" md-maxlength="20000" max-rows="10"></textarea> </md-input-container> <md-input-container flex> <label>{{\'stateCurriculum.enter.outcome.outcomeLabelEn\' | translate}}</label> <textarea ng-model="stateCurriculum.outcomesEn" md-maxlength="20000" max-rows="10"></textarea> </md-input-container> <md-input-container flex> <label>{{\'stateCurriculum.enter.admission.requirementsEt\' | translate}}{{getStar()}}</label> <textarea ng-model="stateCurriculum.admissionRequirementsEt" ng-required="strictValidation()" md-maxlength="20000" max-rows="10"></textarea> </md-input-container> <md-input-container flex> <label>{{\'stateCurriculum.enter.admission.requirementsEn\' | translate}}</label> <textarea ng-model="stateCurriculum.admissionRequirementsEn" md-maxlength="20000" max-rows="10"></textarea> </md-input-container> <md-input-container flex> <label>{{\'stateCurriculum.enter.graduation.requirementsEt\' | translate}}{{getStar()}}</label> <textarea ng-model="stateCurriculum.graduationRequirementsEt" ng-required="strictValidation()" md-maxlength="20000" max-rows="10"></textarea> </md-input-container> <md-input-container flex> <label>{{\'stateCurriculum.enter.graduation.requirementsEn\' | translate}}</label> <textarea ng-model="stateCurriculum.graduationRequirementsEn" md-maxlength="20000" max-rows="10"></textarea> </md-input-container> </div> </fieldset> <div>&nbsp;</div> <fieldset tabindex="3" flex> <legend md-colors="{color: \'primary-800\'}" class="md-title-small" ng-class="{invalid: stateCurriculumForm.$submitted && stateCurriculum.occupations.length === 0 && strictValidation()}">{{\'stateCurriculum.enter.occupation.acquiredMany\' | translate}}&nbsp;*</legend> <md-autocomplete name="occupationInput" md-selected-item="occupation" md-search-text="queryText" md-items="item in querySearch(queryText, connection.code)" md-item-text="currentLanguageNameField(item)" md-min-length="0" placeholder="{{\'stateCurriculum.enter.occupation.add\' | translate}}" ng-model="queryText" md-no-cache class="small-margin" md-selected-item-change="addOcupation(occupation)"> <md-item-template> <span md-highlight-text="queryText" md-highlight-flags="^i">{{currentLanguageNameField(item)}}</span> </md-item-template> <md-not-found> {{\'main.messages.error.notFound\' | translate}} </md-not-found> </md-autocomplete> <div> <table md-table class="secondary-table"> <thead md-head> <tr md-row> <th md-column>Jrk</th> <th md-column>Kutse</th> <th md-column>Osakutsed</th> <th md-column>Spetsialiseerumised</th> <th md-column></th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="occupation in stateCurriculum.occupations | orderBy" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell>{{$index + 1}}</td> <td md-cell> <hois-classifier-value ng-model="occupation" main-classifier-code="KUTSE"></hois-classifier-value> </td> <td md-cell><span ng-repeat="subOccupation in subOccupations[occupation] | filter:{ mainClassCode: \'OSAKUTSE\'}"><span ng-if="$index > 0">; </span>{{currentLanguageNameField(subOccupation)}} </span> </td> <td md-cell><span ng-repeat="subOccupation in subOccupations[occupation] | filter:{ mainClassCode: \'SPETSKUTSE\'}"><span ng-if="$index > 0">; </span>{{currentLanguageNameField(subOccupation)}} </span> </td> <td md-cell><a class="remove" ng-click="removeOcupation(occupation)">&times;</a></td> </tr> </tbody> </table> </div> </fieldset> <div>&nbsp;</div> <fieldset tabindex="3" flex> <legend md-colors="{color: \'primary-800\'}" class="md-title-small" ng-class="{invalid: stateCurriculumForm.$submitted && !modulesValid()}">{{\'stateCurriculum.enter.module.modules\' | translate}}&nbsp;*</legend> <div layout="row" ng-if="stateCurriculum.occupations.length > 0"> <md-button class="md-raised" ng-click="openAddModuleDialog()">{{\'stateCurriculum.enter.module.add\' | translate}}</md-button> </div> <!--KUTSETE MOODULID--> <div ng-repeat="occupation in stateCurriculum.occupations | orderBy" layout="column"> <div class="occupation-header align-center"><span ng-class="{invalid: stateCurriculumForm.$submitted && !isOccutationValid(occupation) && strictValidation()}">{{\'stateCurriculum.enter.occupation.occupation\' | translate}} {{$index + 1}}:&nbsp;</span> <hois-classifier-value ng-model="occupation" main-classifier-code="KUTSE" ng-class="{invalid: stateCurriculumForm.$submitted && !isOccutationValid(occupation)  && strictValidation()}"></hois-classifier-value> </div> <div layout="column"> <div layout="row" flex="100" class="occupation-row align-center border-bottom odd"> <div flex="5">&nbsp;</div> <div flex="20">{{\'stateCurriculum.enter.module.modules1\' | translate}}</div> <div layout="column" flex="75"> <div flex="100" ng-repeat="module in stateCurriculum.modules | filter: filterModules(occupation, MODULE_TYPE.GENERAL) | orderBy: \'nameEt\'" layout="row" class="align-center"> <a flex="30" ng-click="openAddModuleDialog(module)" href="">{{currentLanguageNameField(module)}}</a> <span flex="10">{{module.credits}}&nbsp; EKAP</span> </div> </div> </div> <div layout="row" flex="100" class="occupation-row align-center even"> <div flex="5">&nbsp;</div> <div ng-class="{invalid: stateCurriculumForm.$submitted && hasNoPmodule(occupation) && strictValidation()}" flex="20">{{\'stateCurriculum.enter.module.modules2\' | translate}}&nbsp;*</div> <div layout="column" flex="75"> <div flex="100" ng-repeat="module in stateCurriculum.modules | filter: filterModules(occupation, MODULE_TYPE.BASIC) | orderBy: \'nameEt\'" layout="row" class="align-center"> <a flex="30" ng-click="openAddModuleDialog(module)" href="">{{currentLanguageNameField(module)}}</a> <span flex="10">{{module.credits}}&nbsp; EKAP</span> </div> </div> </div> </div> <!--OSAKUTSETE MOODULID--> <div ng-repeat="suboccupation in subOccupationsList | filter: filterSubOccupations(occupation, \'OSAKUTSE\') | orderBy: \'nameEt\'" layout="column"> <div class="occupation-header2 align-center">{{\'stateCurriculum.enter.occupation.partial\' | translate}} {{$index + 1}}: {{currentLanguageNameField(suboccupation)}}</div> <div layout="column"> <div layout="row" flex="100" class="occupation-row align-center border-bottom odd"> <div flex="5">&nbsp;</div> <div flex="20">{{\'stateCurriculum.enter.module.modules1\' | translate}}</div> <div layout="column" flex="75"> <div flex="100" ng-repeat="module in stateCurriculum.modules | filter: filterModules(suboccupation.code, MODULE_TYPE.GENERAL) | orderBy: \'nameEt\'" layout="row" class="align-center"> <a flex="30" ng-click="openAddModuleDialog(module)" href="">{{currentLanguageNameField(module)}}</a> <span flex="10">{{module.credits}}&nbsp; EKAP</span> </div> </div> </div> <div layout="row" flex="100" class="occupation-row align-center even"> <div flex="5">&nbsp;</div> <div ng-class="{invalid: stateCurriculumForm.$submitted && hasNoPmodule(suboccupation.code) && strictValidation()}" flex="20">{{\'stateCurriculum.enter.module.modules2\' | translate}}&nbsp;*</div> <div layout="column" flex="75"> <div flex="100" ng-repeat="module in stateCurriculum.modules | filter: filterModules(suboccupation.code, MODULE_TYPE.BASIC) | orderBy: \'nameEt\'" layout="row" class="align-center"> <a flex="30" ng-click="openAddModuleDialog(module)" href="">{{currentLanguageNameField(module)}}</a> <span flex="10">{{module.credits}}&nbsp; EKAP</span> </div> </div> </div> </div> </div> <!--SPETSKUTSETE MOODULID--> <div ng-repeat="suboccupation in subOccupationsList | filter: filterSubOccupations(occupation, \'SPETSKUTSE\') | orderBy: \'nameEt\'" layout="column"> <div class="occupation-header2 align-center"><span ng-class="{invalid: stateCurriculumForm.$submitted && !isSpetsOccupationValid(suboccupation.code, occupation) && strictValidation()}">{{\'stateCurriculum.enter.occupation.specialty\' | translate}} {{$index + 1}}: {{currentLanguageNameField(suboccupation)}}</span></div> <div layout="column"> <div layout="row" flex="100" class="occupation-row align-center border-bottom odd"> <div flex="5">&nbsp;</div> <div flex="20">{{\'stateCurriculum.enter.module.modules1\' | translate}}</div> <div layout="column" flex="75"> <div flex="100" ng-repeat="module in stateCurriculum.modules | filter: filterModules(suboccupation.code, MODULE_TYPE.GENERAL) | orderBy: \'nameEt\'" layout="row" class="align-center"> <a flex="30" ng-click="openAddModuleDialog(module)" href="">{{currentLanguageNameField(module)}}</a> <span flex="10">{{module.credits}}&nbsp; EKAP</span> </div> </div> </div> <div layout="row" flex="100" class="occupation-row align-center even"> <div flex="5">&nbsp;</div> <div ng-class="{invalid: stateCurriculumForm.$submitted && hasNoPmodule(suboccupation.code) && strictValidation()}" flex="20">{{\'stateCurriculum.enter.module.modules2\' | translate}}&nbsp;*</div> <div layout="column" flex="75"> <div flex="100" ng-repeat="module in stateCurriculum.modules | filter: filterModules(suboccupation.code, MODULE_TYPE.BASIC) | orderBy: \'nameEt\'" layout="row" class="align-center"> <a flex="30" ng-click="openAddModuleDialog(module)" href="">{{currentLanguageNameField(module)}}</a> <span flex="10">{{module.credits}}&nbsp; EKAP</span> </div> </div> </div> </div> </div> </div> </fieldset> <div>&nbsp;</div> <fieldset tabindex="5"> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'curriculum.additionalInfo\' | translate}}</legend> <div layout="column"> <div layout="row"> <md-input-container> <label>{{\'stateCurriculum.enter.module.modules3\' | translate}}{{getStar()}}</label> <input type="number" name="optionalCredits" ng-model="stateCurriculum.optionalStudyCredits" pattern="^\\d+(\\.\\d{1})?$" ng-required="strictValidation()" aria-label="optional credits" min="0" max="999"> <div ng-messages="stateCurriculumForm.optionalCredits.$error" ng-show="stateCurriculumForm.optionalCredits.$dirty"> <div ng-message="min"> {{\'stateCurriculum.enter.credits.positive\' | translate}} </div> <div ng-message="max"> {{\'stateCurriculum.enter.credits.max\' | translate}} </div> <div ng-message="pattern"> {{\'stateCurriculum.error.decimalPresision\' | translate}} </div> </div> </md-input-container> </div> <md-input-container flex> <label>{{\'stateCurriculum.enter.practice\' | translate}}</label> <textarea ng-model="stateCurriculum.practiceDescription" md-maxlength="20000" max-rows="10"></textarea> </md-input-container> <md-input-container flex> <label>{{\'stateCurriculum.enter.finalExam\' | translate}}</label> <textarea ng-model="stateCurriculum.finalExamDescription" md-maxlength="4000" max-rows="10"></textarea> </md-input-container> <md-input-container flex> <label>{{\'stateCurriculum.enter.comment\' | translate}}</label> <textarea ng-model="stateCurriculum.description" md-maxlength="20000" max-rows="10"></textarea> </md-input-container> <md-input-container flex> <label>{{\'stateCurriculum.enter.riigiteataja\' | translate}}</label> <input ng-model="stateCurriculum.riigiteatajaUrl" type="text" md-maxlength="4000"> </md-input-container> </div> </fieldset> <div>&nbsp;</div> <fieldset tabindex="6"> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'curriculum.statuses\' | translate}}</legend> <div layout="column"> <div layout="row" flex> <md-input-container> <label>{{\'stateCurriculum.enter.validFrom\' | translate}}{{getStar()}}</label> <md-datepicker ng-model="stateCurriculum.validFrom" ng-required="strictValidation()" md-open-on-focus md-max-date="stateCurriculum.validThru"> </md-datepicker> </md-input-container> <md-input-container flex-offset="5"> <label>{{\'stateCurriculum.enter.validThru\' | translate}}</label> <md-datepicker ng-model="stateCurriculum.validThru" md-min-date="stateCurriculum.validFrom" md-open-on-focus md-min-date="stateCurriculum.validFrom"> </md-datepicker> </md-input-container> </div> <div class="form-readonly top-margin" flex layout="row"> <md-input-container flex="100"> <label class="label">{{\'main.status\' | translate}}</label> <hois-classifier-value ng-model="stateCurriculum.status" main-classifier-code="OPPEKAVA_STAATUS"></hois-classifier-value> </md-input-container> </div> </div> </fieldset> <div>&nbsp;</div> <fieldset tabindex="11" ng-show="stateCurriculum.curricula && stateCurriculum.curricula.length > 0"> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'stateCurriculum.curricula\' | translate}}</legend> <table md-table class="secondary-table"> <thead md-head> <tr md-row> <th md-column>{{\'school.label\' | translate}}</th> <th md-column>{{\'curriculum.name\' | translate}}</th> <th md-column>{{\'curriculum.studyLevel\' | translate}}</th> <th md-column>{{\'stateCurriculum.creditsEkap\' | translate}}</th> <th md-column>{{\'stateCurriculum.validFrom\' | translate}}</th> <th md-column>{{\'stateCurriculum.validThru\' | translate}}</th> <th md-column>{{\'stateCurriculum.status\' | translate}}</th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="curriculum in stateCurriculum.curricula | orderBy: currentLanguageNameField()" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell>{{currentLanguageNameField(curriculum.school)}}</td> <td md-cell>{{currentLanguageNameField(curriculum)}}</td> <td md-cell> <hois-classifier-value ng-model="curriculum.origStudyLevel" main-classifier-codes="OPPEASTE,EKR"></hois-classifier-value> </td> <td md-cell>{{curriculum.credits}}</td> <td md-cell>{{curriculum.validFrom | hoisDate}}</td> <td md-cell>{{curriculum.validThru | hoisDate}}</td> <td md-cell> <hois-classifier-value ng-model="curriculum.status" main-classifier-code="OPPEKAVA_STAATUS"></hois-classifier-value> </td> </tr> </tbody> </table> </fieldset> <hois-created-modified object="stateCurriculum"></hois-created-modified> </form> <div layout="row"> <div ng-show="stateCurriculum.status === STATUS.ENTERING"> <div ng-show="!stateCurriculum.id"> <md-button class="md-raised md-primary" ng-click="save()">{{\'main.button.save\' | translate}}</md-button> </div> <div ng-show="stateCurriculum.id"> <md-button class="md-raised md-primary" ng-click="save()" ng-if="stateCurriculum.canChange">{{\'main.button.save\' | translate}}</md-button> <md-button class="md-raised md-default" ng-click="confirmAndSave()" ng-if="stateCurriculum.canChange && stateCurriculum.canConfirm"> {{\'stateCurriculum.statusButton.confirm\' | translate}} </md-button> <md-button class="md-raised md-default" ng-click="close()" ng-if="stateCurriculum.canClose && stateCurriculum.canChange"> {{\'stateCurriculum.statusButton.close\' | translate}} </md-button> <md-button ng-click="delete()" class="md-raised" ng-if="stateCurriculum.canDelete">{{\'main.button.delete\' | translate}}</md-button> </div> </div> <div ng-show="stateCurriculum.status === STATUS.VERIFIED"> <div> <md-button class="md-raised md-primary" ng-click="save()" ng-if="stateCurriculum.canChange">{{\'main.button.save\' | translate}}</md-button> </div> </div> <md-button ng-click="back(\'#/stateCurriculum\', stateCurriculumForm)" class="md-raised">{{\'main.button.back\' | translate}}</md-button> </div> </div> </div>'),
a.put("stateCurriculum/state.curriculum.list.html",'<div class="ois-form-layout-padding"> <div flex> <form ng-submit="loadData()" layout="column" class="nomargin"> <fieldset tabindex="1"> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'main.searchlabel\' | translate}}</legend> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="65" flex-sm="100" flex-xs="100"> <label>{{\'curriculum.name\' | translate}}</label> <input ng-model="criteria.name" type="text"> </md-input-container> <md-input-container flex="30" flex-sm="100" flex-xs="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'stateCurriculum.EKR\' | translate}}</label> <hois-classifier-select ng-model="criteria.ekrLevel" model-value-attr="code" main-classifier-code="EKR" criteria="{vocational: true}" multiple></hois-classifier-select> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="30" flex-sm="100" flex-xs="100"> <label>{{\'curriculum.areaOfStudy\' | translate}}</label> <hois-classifier-select ng-model="criteria.iscedVald" model-value-attr="code" main-classifier-code="ISCED_VALD" criteria="{vocational: true}"></hois-classifier-select> </md-input-container> <md-input-container flex="30" flex-sm="100" flex-xs="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'curriculum.fieldOfStudy\' | translate}}</label> <hois-classifier-select ng-model="criteria.iscedSuun" model-value-attr="code" main-classifier-code="ISCED_SUUN" criteria="{vocational: true}" watch-model="criteria.iscedVald" filter-values search-from-connect connect-main-classifier-code="ISCED_VALD" multiple></hois-classifier-select> </md-input-container> <md-input-container flex="30" flex-sm="100" flex-xs="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'curriculum.group\' | translate}}</label> <hois-classifier-select ng-model="criteria.iscedClass" model-value-attr="code" main-classifier-code="ISCED_RYHM" criteria="{vocational: true}" watch-model="criteria.iscedSuun" filter-values search-from-connect connect-main-classifier-code="ISCED_SUUN" multiple></hois-classifier-select> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column" class="top-margin" ng-if="formState.canView"> <md-input-container flex="30" flex-sm="100" flex-xs="100" flex-offset-sm="0" class="top-margin"> <label>{{\'stateCurriculum.status\' | translate}}</label> <hois-classifier-select ng-model="criteria.status" model-value-attr="code" main-classifier-code="OPPEKAVA_STAATUS" multiple filter-values="filteredOutStatuses"></hois-classifier-select> </md-input-container> <md-input-container flex-offset="5" flex-offset-xs="0" flex-offset-sm="0" flex-sm="100" flex-xs="100"> <label>{{\'stateCurriculum.enter.validFrom\' | translate}}</label> <md-datepicker ng-model="criteria.validFrom" md-max-date="criteria.validThru" md-open-on-focus> </md-datepicker> </md-input-container> <md-input-container flex-sm="100" flex-xs="100" flex-offset="2" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'stateCurriculum.enter.validThru\' | translate}}</label> <md-datepicker ng-model="criteria.validThru" md-min-date="criteria.validFrom" md-open-on-focus> </md-datepicker> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column" class="top-margin" ng-if="!formState.canView"> <md-input-container flex-sm="100" flex-xs="100"> <label>{{\'stateCurriculum.enter.validFrom\' | translate}}</label> <md-datepicker ng-model="criteria.validFrom" md-max-date="criteria.validThru" md-open-on-focus> </md-datepicker> </md-input-container> <md-input-container flex-sm="100" flex-xs="100" flex-offset="2" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'stateCurriculum.enter.validThru\' | translate}}</label> <md-datepicker ng-model="criteria.validThru" md-min-date="criteria.validFrom" md-open-on-focus> </md-datepicker> </md-input-container> </div> <div layout="row"> <md-button type="submit" class="md-raised md-primary">{{\'main.button.search\' | translate}}</md-button> <md-button class="md-raised" ng-click="clearCriteria()">{{\'main.button.clear\' | translate}}</md-button> <md-button class="md-raised" ng-href="#/stateCurriculum/new" ng-if="formState.canCreate">{{\'main.button.create\' | translate}}</md-button> </div> </fieldset> </form> </div> </div> <md-table-container flex ng-cloak layout-padding> <table md-table md-progress="tabledata.$promise"> <thead md-head md-order="criteria.order" md-on-reorder="loadData"> <tr md-row> <th md-column md-order-by="{{currentLanguageNameField()}}">{{\'curriculum.name\' | translate}}</th> <th md-column md-order-by="ekrLevel">{{\'stateCurriculum.EKR\' | translate}}</th> <th md-column md-order-by="credits">{{\'stateCurriculum.creditsEkap\' | translate}}</th> <th md-column md-order-by="validFrom">{{\'stateCurriculum.validFrom\' | translate}}</th> <th md-column md-order-by="validThru">{{\'stateCurriculum.validThru\' | translate}}</th> <th md-column md-order-by="status.{{currentLanguageNameField()}}" ng-if="formState.canView">{{\'stateCurriculum.status\' | translate}}</th> <th></th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="row in tabledata.content" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell><a ng-href="#/stateCurriculum{{isPublic ? \'/public\' : \'\'}}/{{row.id}}/view">{{currentLanguageNameField(row)}}</a></td> <td md-cell>{{currentLanguageNameField(row.ekrLevel)}}</td> <td md-cell>{{row.credits}}</td> <td md-cell>{{row.validFrom | hoisDate}}</td> <td md-cell>{{row.validThru | hoisDate}}</td> <td md-cell="status" ng-if="formState.canView">{{currentLanguageNameField(row.status)}}</td> <td md-cell> <md-button md-no-ink class="md-primary change-button" ng-href="#/stateCurriculum/{{row.id}}/edit" ng-if="row.canChange">{{\'main.button.change\' | translate}}</md-button> </td> </tr> </tbody> </table> </md-table-container> <md-table-pagination md-limit="criteria.size" md-limit-options="[10, 20, 50]" md-page="criteria.page" md-total="{{tabledata.totalElements}}" md-on-paginate="loadData" md-label="{page: \'{{\'main.page\' | translate}}:\', rowsPerPage: \'{{\'main.rowPerPage\' | translate}}:\', of: \'{{\'main.of\' | translate}}\' }" md-page-select></md-table-pagination>'),a.put("stateCurriculum/state.curriculum.module.add.dialog.html",'<md-dialog aria-label="module add dialog" flex="70" flex-xs="100"> <form name="dialogForm" ng-cloak> <md-toolbar> <div class="md-toolbar-tools"> <h2>{{readOnly ? "module.viewToughtModule" : "module.addToughtModule" | translate}}</h2> <span flex></span> <md-button class="md-icon-button" ng-click="cancel()"> <md-icon md-font-set="material-icons">close</md-icon> </md-button> </div> </md-toolbar> <md-dialog-content> <span flex></span> <div class="ois-form-layout" layout="column" layout-margin ng-cloak> <div layout="column"> <div flex> <fieldset tabindex="1"> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'module.occupationPartOccupationSpecialize\' | translate}}</legend> <div layout="column"> <div ng-repeat="occupation in occupations | orderBy: \'code\'"> <md-checkbox ng-model="occupation.selected" ng-change="changeOccupation(occupation)" ng-disabled="readOnly"> <hois-classifier-value ng-model="occupation.code" main-classifier-codes="KUTSE" class="inline"></hois-classifier-value> </md-checkbox> <div layout="column"> <div ng-repeat="subOccupation in occupation.subOccupations | orderBy: \'code\'" layout="row"> <div flex="5">&nbsp;</div> <md-checkbox ng-model="subOccupation.selected" ng-change="changeOccupation(subOccupation)" ng-disabled="readOnly"> <hois-classifier-value ng-model="subOccupation" main-classifier-code="OSAKUTSE,SPETSKUTSE" class="inline"></hois-classifier-value> </md-checkbox> </div> </div> </div> </div> <input style="display:none" type="number" readonly name="occupationsLength" ng-model="data.moduleOccupations.length" min="1"> <div class="invalid" ng-if="dialogForm.$submitted" ng-messages="dialogForm.occupationsLength.$error"> <div ng-message="min">{{\'main.messages.error.atLeastOneShouldBeAdded\' | translate}}</div> </div> <p class="invalid" ng-show="dialogForm.$submitted && !occupationsValid"> {{\'stateCurriculum.error.specialtiesInvalid\' | translate}} </p> <md-input-container hide> <input ng-model="occupationsValid" type="text" required> </md-input-container> <p class="invalid" ng-show="dialogForm.$submitted && !suboccupationsValid"> {{\'stateCurriculum.error.partAndSpecOccupationsInvalid\' | translate}} </p> <md-input-container hide> <input ng-model="suboccupationsValid" type="text" required> </md-input-container> </fieldset> </div> <div>&nbsp;</div> <div layout="row" flex> <md-input-container flex="45"> <label>{{\'stateCurriculum.enter.module.type\' | translate}}</label> <hois-classifier-select ng-model="data.module" show-only-values="allowedModuleTypes" main-classifier-code="KUTSEMOODUL" required ng-disabled="readOnly" model-value-attr="code"></hois-classifier-select> </md-input-container> <md-input-container flex="20" flex-sm="50" flex-xs="50" flex-offset="5"> <label>{{\'stateCurriculum.enter.module.credits\' | translate}}</label> <input ng-model="data.credits" type="number" min="0" max="999" required name="credits" ng-readonly="readOnly" pattern="^\\d+(\\.\\d{1})?$"> <div ng-messages="dialogForm.credits.$error" ng-show="dialogForm.credits.$dirty"> <div ng-message="min"> {{\'stateCurriculum.enter.credits.positive\' | translate}} </div> <div ng-message="max"> {{\'stateCurriculum.enter.credits.max\' | translate}} </div> <div ng-message="pattern"> {{\'stateCurriculum.error.decimalPresision\' | translate}} </div> </div> </md-input-container> </div> <md-input-container flex> <label>{{\'stateCurriculum.enter.module.nameEt\' | translate}}</label> <input ng-model="data.nameEt" type="text" required md-maxlength="255" ng-readonly="readOnly"> </md-input-container> <md-input-container flex> <label>{{\'stateCurriculum.enter.module.nameEn\' | translate}}</label> <input ng-model="data.nameEn" type="text" md-maxlength="255" ng-readonly="readOnly"> </md-input-container> <md-input-container flex> <label>{{\'stateCurriculum.enter.module.objectiveEt\' | translate}}</label> <textarea ng-model="data.objectivesEt" required md-maxlength="10000" max-rows="10" ng-readonly="readOnly"></textarea> </md-input-container> <md-input-container flex> <label>{{\'stateCurriculum.enter.module.objectiveEn\' | translate}}</label> <textarea ng-model="data.objectivesEn" md-maxlength="10000" max-rows="10" ng-readonly="readOnly"></textarea> </md-input-container> <div flex> <fieldset tabindex="2"> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'module.studyOutcome\' | translate}} *</legend> <input style="display:none" type="number" readonly name="outcomesLength" ng-model="data.outcomes.length" min="1"> <div class="invalid" ng-if="dialogForm.$submitted" ng-messages="dialogForm.outcomesLength.$error"> <div ng-message="min">{{\'main.messages.error.atLeastOneShouldBeAdded\' | translate}}</div> </div> <div layout="row" flex ng-if="!readOnly"> <md-input-container flex="45"> <label>{{\'studyOutcome.nameEt\' | translate}} *</label> <textarea ng-model="data.outcomesEt" md-maxlength="1000" max-rows="10"></textarea> </md-input-container> <md-input-container flex="40" flex-offset="5"> <label>{{\'studyOutcome.nameEn\' | translate}}</label> <textarea ng-model="data.outcomesEn" md-maxlength="1000" max-rows="10"></textarea> </md-input-container> <md-button class="md-primary" ng-click="addOutcome()" ng-if="!isEditingOutcome">{{\'main.button.add\' | translate}}</md-button> <md-button class="md-primary" ng-click="saveOutcome()" ng-if="isEditingOutcome">{{\'main.button.change\' | translate}}</md-button> </div> <div layout="column"> <div ng-repeat="item in data.outcomes | orderBy: \'id\' track by $index" class="occupation-row align-center" layout="row" flex> <div flex="45"> <a ng-click="editOutcome(item)" ng-if="!readOnly"> <p class="scrollable">{{item.outcomesEt}}</p> </a> <p class="scrollable" ng-if="readOnly">{{item.outcomesEt}}</p> </div> <div flex="40" flex-offset="5"> <a ng-click="editOutcome(item)" ng-if="!readOnly"> <p class="scrollable">{{item.outcomesEn}}</p> </a> <p class="scrollable" ng-if="readOnly">{{item.outcomesEn}}</p> </div> <div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</div> <div> <a class="remove" ng-click="removeFromArray(data.outcomes, item)" ng-if="!readOnly">&times;&nbsp;&nbsp;</a> </div> </div> </div> </fieldset> </div> <div>&nbsp;</div> <md-input-container flex> <label>{{\'stateCurriculum.enter.module.criteriaEt\' | translate}}</label> <textarea ng-model="data.assessmentsEt" required md-maxlength="20000" max-rows="10" ng-readonly="readOnly"></textarea> </md-input-container> <md-input-container flex> <label>{{\'stateCurriculum.enter.module.criteriaEn\' | translate}}</label> <textarea ng-model="data.assessmentsEn" md-maxlength="20000" max-rows="10" ng-readonly="readOnly"></textarea> </md-input-container> <br> <md-checkbox ng-model="data.isAdditional" aria-label="{{\'stateCurriculum.enter.module.isAdditional\' | translate}}" ng-disabled="readOnly"> {{\'stateCurriculum.enter.module.isAdditional\' | translate}} </md-checkbox> </div> </div> </md-dialog-content> <md-dialog-actions layout="row" layout-align="start center"> <md-button class="md-raised md-primary" ng-click="submit()" ng-if="!readOnly">{{"main.button.save" | translate}}</md-button> <md-button ng-click="delete()" ng-if="editing && !readOnly" class="md-raised"> {{\'main.button.delete\' | translate}}</md-button> <md-button class="md-raised" ng-click="cancel()">{{"main.button.close" | translate}}</md-button> </md-dialog-actions> </form> </md-dialog>'),a.put("stateCurriculum/state.curriculum.module.view.dialog.html",'<md-dialog aria-label="module add dialog" flex="70" flex-xs="100"> <form name="dialogForm" ng-cloak> <md-toolbar> <div class="md-toolbar-tools"> <h2>{{"module.viewToughtModule" | translate}}</h2> <span flex></span> <md-button class="md-icon-button" ng-click="cancel()"> <md-icon md-font-set="material-icons">close</md-icon> </md-button> </div> </md-toolbar> <md-dialog-content> <span flex></span> <div class="ois-form-layout" layout="column" layout-margin ng-cloak> <div layout="column"> <div flex> <fieldset tabindex="1"> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'module.occupationPartOccupationSpecialize\' | translate}}</legend> <div layout="column"> <div ng-repeat="occupation in occupations | orderBy: \'code\'"> <md-checkbox ng-model="occupation.selected" disabled> <hois-classifier-value ng-model="occupation.code" main-classifier-codes="KUTSE" class="inline"></hois-classifier-value> </md-checkbox> <div layout="column"> <div ng-repeat="subOccupation in occupation.subOccupations | orderBy: \'code\'" layout="row"> <div flex="5">&nbsp;</div> <md-checkbox ng-model="subOccupation.selected" disabled> <hois-classifier-value ng-model="subOccupation" main-classifier-code="OSAKUTSE,SPETSKUTSE" class="inline"></hois-classifier-value> </md-checkbox> </div> </div> </div> </div> </fieldset> </div> <div>&nbsp;</div> <div layout="row" flex> <md-input-container flex="45"> <label>{{\'stateCurriculum.enter.module.type\' | translate}}</label> <hois-classifier-select ng-model="data.module" main-classifier-code="KUTSEMOODUL" disabled model-value-attr="code"></hois-classifier-select> </md-input-container> <md-input-container flex="20" flex-sm="50" flex-xs="50" flex-offset="5"> <label>{{\'stateCurriculum.enter.module.credits\' | translate}}</label> <input ng-model="data.credits" type="number" name="credits" readonly> </md-input-container> </div> <md-input-container flex> <label>{{\'stateCurriculum.enter.module.nameEt\' | translate}}</label> <input ng-model="data.nameEt" type="text" readonly> </md-input-container> <md-input-container flex> <label>{{\'stateCurriculum.enter.module.nameEn\' | translate}}</label> <input ng-model="data.nameEn" type="text" readonly> </md-input-container> <md-input-container flex> <label>{{\'stateCurriculum.enter.module.objectiveEt\' | translate}}</label> <textarea ng-model="data.objectivesEt" max-rows="10" readonly></textarea> </md-input-container> <md-input-container flex> <label>{{\'stateCurriculum.enter.module.objectiveEn\' | translate}}</label> <textarea ng-model="data.objectivesEn" max-rows="10" readonly></textarea> </md-input-container> <div flex> <fieldset tabindex="2"> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'module.studyOutcome\' | translate}}</legend> <div layout="column"> <div ng-repeat="item in data.outcomes | orderBy: \'id\' track by $index" class="occupation-row align-center" layout="row" flex> <div flex="45"> <p class="scrollable">{{item.outcomesEt}}</p> </div> <div flex="40" flex-offset="5"> <p class="scrollable">{{item.outcomesEn}}</p> </div> <div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</div> <div></div> </div> </div> </fieldset> </div> <div>&nbsp;</div> <md-input-container flex> <label>{{\'stateCurriculum.enter.module.criteriaEt\' | translate}}</label> <textarea ng-model="data.assessmentsEt" max-rows="10" readonly></textarea> </md-input-container> <md-input-container flex> <label>{{\'stateCurriculum.enter.module.criteriaEn\' | translate}}</label> <textarea ng-model="data.assessmentsEn" max-rows="10" readonly></textarea> </md-input-container> <br> <md-checkbox ng-model="data.isAdditional" aria-label="{{\'stateCurriculum.enter.module.isAdditional\' | translate}}" disabled> {{\'stateCurriculum.enter.module.isAdditional\' | translate}} </md-checkbox> </div> </div> </md-dialog-content> <md-dialog-actions layout="row" layout-align="start center"> <md-button class="md-raised" ng-click="cancel()">{{"main.button.close" | translate}}</md-button> </md-dialog-actions> </form> </md-dialog>'),a.put("stateCurriculum/state.curriculum.view.html",'<div class="ois-form-layout-padding"> <div flex> <form name="stateCurriculumForm" layout="column" class="nomargin"> <fieldset tabindex="1" flex> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'curriculum.mainData\' | translate}}</legend> <div layout="column"> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="50" flex-sm="100" flex-xs="100"> <label>{{\'stateCurriculum.enter.nameEt\' | translate}}</label> <input ng-model="stateCurriculum.nameEt" type="text" name="nameEt" readonly> </md-input-container> <md-input-container flex="45" flex-sm="100" flex-xs="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'stateCurriculum.enter.nameEn\' | translate}}</label> <input ng-model="stateCurriculum.nameEn" type="text" name="nameEn" readonly> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="25" flex-sm="100" flex-xs="100"> <label>{{\'curriculum.areaOfStudy\' | translate}}</label> <hois-classifier-select ng-model="iscedVald" main-classifier-code="ISCED_VALD" criteria="{vocational: true}" model-value-attr="code" disabled></hois-classifier-select> </md-input-container> <md-input-container flex="20" flex-sm="100" flex-xs="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'curriculum.fieldOfStudy\' | translate}}</label> <hois-classifier-select ng-model="iscedSuun" main-classifier-code="ISCED_SUUN" criteria="{vocational: true}" watch-model="iscedVald" model-value-attr="code" filter-values search-from-connect connect-main-classifier-code="ISCED_VALD" disabled> </hois-classifier-select> </md-input-container> <md-input-container flex="45" flex-sm="100" flex-xs="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'curriculum.group\' | translate}}</label> <hois-classifier-select ng-model="stateCurriculum.iscedClass" main-classifier-code="ISCED_RYHM" criteria="{vocational: true}" watch-model="iscedSuun" model-value-attr="code" filter-values search-from-connect connect-main-classifier-code="ISCED_SUUN" disabled></hois-classifier-select> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column" class="top-margin"> <md-input-container flex="25" flex-sm="100" flex-xs="100"> <label>{{\'stateCurriculum.enter.credits.credits\' | translate}}</label> <input ng-model="stateCurriculum.credits" type="number" name="credits" readonly> </md-input-container> <md-input-container flex="20" flex-sm="100" flex-xs="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'stateCurriculum.enter.ROKclassifier\' | translate}}</label> <hois-classifier-select ng-model="stateCurriculum.stateCurrClass" main-classifier-code="EHIS_ROK" criteria="{vocational: true}" model-value-attr="code" disabled></hois-classifier-select> </md-input-container> </div> </div> </fieldset> <div>&nbsp;</div> <fieldset tabindex="2"> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'curriculum.commonData\' | translate}}</legend> <div layout="column"> <md-input-container flex> <label>{{\'stateCurriculum.enter.objectivesEt\' | translate}}</label> <textarea ng-model="stateCurriculum.objectivesEt" max-rows="10" readonly></textarea> </md-input-container> <md-input-container flex> <label>{{\'stateCurriculum.enter.objectivesEn\' | translate}}</label> <textarea ng-model="stateCurriculum.objectivesEn" max-rows="10" readonly></textarea> </md-input-container> <md-input-container flex> <label>{{\'stateCurriculum.enter.outcome.outcomeLabelEt\' | translate}}</label> <textarea ng-model="stateCurriculum.outcomesEt" max-rows="10" readonly></textarea> </md-input-container> <md-input-container flex> <label>{{\'stateCurriculum.enter.outcome.outcomeLabelEn\' | translate}}</label> <textarea ng-model="stateCurriculum.outcomesEn" max-rows="10" readonly></textarea> </md-input-container> <md-input-container flex> <label>{{\'stateCurriculum.enter.admission.requirementsEt\' | translate}}</label> <textarea ng-model="stateCurriculum.admissionRequirementsEt" max-rows="10" readonly></textarea> </md-input-container> <md-input-container flex> <label>{{\'stateCurriculum.enter.admission.requirementsEn\' | translate}}</label> <textarea ng-model="stateCurriculum.admissionRequirementsEn" max-rows="10" readonly></textarea> </md-input-container> <md-input-container flex> <label>{{\'stateCurriculum.enter.graduation.requirementsEt\' | translate}}</label> <textarea ng-model="stateCurriculum.graduationRequirementsEt" max-rows="10" readonly></textarea> </md-input-container> <md-input-container flex> <label>{{\'stateCurriculum.enter.graduation.requirementsEn\' | translate}}</label> <textarea ng-model="stateCurriculum.graduationRequirementsEn" max-rows="10" readonly></textarea> </md-input-container> </div> </fieldset> <div>&nbsp;</div> <fieldset tabindex="3" flex> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'stateCurriculum.enter.occupation.acquiredMany\' | translate}}&nbsp;</legend> <div> <table md-table class="secondary-table"> <thead md-head> <tr md-row> <th md-column>Jrk</th> <th md-column>Kutse</th> <th md-column>Osakutsed</th> <th md-column>Spetsialiseerumised</th> <th md-column></th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="occupation in stateCurriculum.occupations | orderBy" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell>{{$index + 1}}</td> <td md-cell> <hois-classifier-value ng-model="occupation" main-classifier-code="KUTSE"></hois-classifier-value> </td> <td md-cell><span ng-repeat="subOccupation in subOccupations[occupation] | filter:{ mainClassCode: \'OSAKUTSE\'}"><span ng-if="$index > 0">; </span>{{currentLanguageNameField(subOccupation)}} </span> </td> <td md-cell><span ng-repeat="subOccupation in subOccupations[occupation] | filter:{ mainClassCode: \'SPETSKUTSE\'}"><span ng-if="$index > 0">; </span>{{currentLanguageNameField(subOccupation)}} </span> </td> <td md-cell></td> </tr> </tbody> </table> </div> </fieldset> <div>&nbsp;</div> <fieldset tabindex="3" flex> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'stateCurriculum.enter.module.modules\' | translate}}&nbsp;</legend> <div layout="row" ng-if="stateCurriculum.occupations.length > 0"> </div> <!--KUTSETE MOODULID--> <div ng-repeat="occupation in stateCurriculum.occupations | orderBy" layout="column"> <div class="occupation-header align-center"><span>{{\'stateCurriculum.enter.occupation.occupation\' | translate}} {{$index + 1}}:&nbsp;</span> <hois-classifier-value ng-model="occupation" main-classifier-code="KUTSE"></hois-classifier-value> </div> <div layout="column"> <div layout="row" flex="100" class="occupation-row align-center border-bottom odd"> <div flex="5">&nbsp;</div> <div flex="20">{{\'stateCurriculum.enter.module.modules1\' | translate}}</div> <div layout="column" flex="75"> <div flex="100" ng-repeat="module in stateCurriculum.modules | filter: filterModules(occupation, MODULE_TYPE.GENERAL) | orderBy: \'nameEt\'" layout="row" class="align-center"> <a flex="30" ng-click="openViewModuleDialog(module)" href="">{{currentLanguageNameField(module)}}</a> <span flex="10">{{module.credits}}&nbsp; EKAP</span> </div> </div> </div> <div layout="row" flex="100" class="occupation-row align-center even"> <div flex="5">&nbsp;</div> <div flex="20">{{\'stateCurriculum.enter.module.modules2\' | translate}}&nbsp;</div> <div layout="column" flex="75"> <div flex="100" ng-repeat="module in stateCurriculum.modules | filter: filterModules(occupation, MODULE_TYPE.BASIC) | orderBy: \'nameEt\'" layout="row" class="align-center"> <a flex="30" ng-click="openViewModuleDialog(module)" href="">{{currentLanguageNameField(module)}}</a> <span flex="10">{{module.credits}}&nbsp; EKAP</span> </div> </div> </div> </div> <!--OSAKUTSETE MOODULID--> <div ng-repeat="suboccupation in subOccupationsList | filter: filterSubOccupations(occupation, \'OSAKUTSE\') | orderBy: \'nameEt\'" layout="column"> <div class="occupation-header2 align-center">{{\'stateCurriculum.enter.occupation.partial\' | translate}} {{$index + 1}}: {{currentLanguageNameField(suboccupation)}}</div> <div layout="column"> <div layout="row" flex="100" class="occupation-row align-center border-bottom odd"> <div flex="5">&nbsp;</div> <div flex="20">{{\'stateCurriculum.enter.module.modules1\' | translate}}</div> <div layout="column" flex="75"> <div flex="100" ng-repeat="module in stateCurriculum.modules | filter: filterModules(suboccupation.code, MODULE_TYPE.GENERAL) | orderBy: \'nameEt\'" layout="row" class="align-center"> <a flex="30" ng-click="openViewModuleDialog(module)" href="">{{currentLanguageNameField(module)}}</a> <span flex="10">{{module.credits}}&nbsp; EKAP</span> </div> </div> </div> <div layout="row" flex="100" class="occupation-row align-center even"> <div flex="5">&nbsp;</div> <div flex="20">{{\'stateCurriculum.enter.module.modules2\' | translate}}&nbsp;</div> <div layout="column" flex="75"> <div flex="100" ng-repeat="module in stateCurriculum.modules | filter: filterModules(suboccupation.code, MODULE_TYPE.BASIC) | orderBy: \'nameEt\'" layout="row" class="align-center"> <a flex="30" ng-click="openViewModuleDialog(module)" href="">{{currentLanguageNameField(module)}}</a> <span flex="10">{{module.credits}}&nbsp; EKAP</span> </div> </div> </div> </div> </div> <!--SPETSKUTSETE MOODULID--> <div ng-repeat="suboccupation in subOccupationsList | filter: filterSubOccupations(occupation, \'SPETSKUTSE\') | orderBy: \'nameEt\'" layout="column"> <div class="occupation-header2 align-center"><span>{{\'stateCurriculum.enter.occupation.specialty\' | translate}} {{$index + 1}}: {{currentLanguageNameField(suboccupation)}}</span></div> <div layout="column"> <div layout="row" flex="100" class="occupation-row align-center border-bottom odd"> <div flex="5">&nbsp;</div> <div flex="20">{{\'stateCurriculum.enter.module.modules1\' | translate}}</div> <div layout="column" flex="75"> <div flex="100" ng-repeat="module in stateCurriculum.modules | filter: filterModules(suboccupation.code, MODULE_TYPE.GENERAL) | orderBy: \'nameEt\'" layout="row" class="align-center"> <a flex="30" ng-click="openViewModuleDialog(module)" href="">{{currentLanguageNameField(module)}}</a> <span flex="10">{{module.credits}}&nbsp; EKAP</span> </div> </div> </div> <div layout="row" flex="100" class="occupation-row align-center even"> <div flex="5">&nbsp;</div> <div flex="20">{{\'stateCurriculum.enter.module.modules2\' | translate}}&nbsp;</div> <div layout="column" flex="75"> <div flex="100" ng-repeat="module in stateCurriculum.modules | filter: filterModules(suboccupation.code, MODULE_TYPE.BASIC) | orderBy: \'nameEt\'" layout="row" class="align-center"> <a flex="30" ng-click="openViewModuleDialog(module)" href="">{{currentLanguageNameField(module)}}</a> <span flex="10">{{module.credits}}&nbsp; EKAP</span> </div> </div> </div> </div> </div> </div> </fieldset> <div>&nbsp;</div> <fieldset tabindex="5"> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'curriculum.additionalInfo\' | translate}}</legend> <div layout="column"> <div layout="row"> <md-input-container> <label>{{\'stateCurriculum.enter.module.modules3\' | translate}}</label> <input type="number" name="optionalCredits" ng-model="stateCurriculum.optionalStudyCredits" aria-label="optional credits" readonly> </md-input-container> </div> <md-input-container flex> <label>{{\'stateCurriculum.enter.practice\' | translate}}</label> <textarea ng-model="stateCurriculum.practiceDescription" max-rows="10" readonly></textarea> </md-input-container> <md-input-container flex> <label>{{\'stateCurriculum.enter.finalExam\' | translate}}</label> <textarea ng-model="stateCurriculum.finalExamDescription" max-rows="10" readonly></textarea> </md-input-container> <md-input-container flex> <label>{{\'stateCurriculum.enter.comment\' | translate}}</label> <textarea ng-model="stateCurriculum.description" max-rows="10" readonly></textarea> </md-input-container> <div>&nbsp;</div> <div class="form-readonly" layout="column" ng-if="stateCurriculum.riigiteatajaUrl"> <br> <md-input-container flex> <label>{{\'stateCurriculum.enter.riigiteataja\' | translate}}</label> <a href="{{stateCurriculum.riigiteatajaUrl | hoisUrl}}" target="_blank">{{stateCurriculum.riigiteatajaUrl}}</a> </md-input-container> </div> </div> </fieldset> <div>&nbsp;</div> <fieldset tabindex="6"> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'curriculum.statuses\' | translate}}</legend> <div layout="column"> <div layout="row" flex> <md-input-container> <label>{{\'stateCurriculum.enter.validFrom\' | translate}}</label> <md-datepicker ng-model="stateCurriculum.validFrom" md-open-on-focus disabled> </md-datepicker> </md-input-container> <md-input-container flex-offset="5"> <label>{{\'stateCurriculum.enter.validThru\' | translate}}</label> <md-datepicker ng-model="stateCurriculum.validThru" md-min-date="stateCurriculum.validFrom" md-open-on-focus disabled> </md-datepicker> </md-input-container> </div> <div class="form-readonly top-margin" flex layout="row"> <md-input-container flex="100"> <label class="label">{{\'main.status\' | translate}}</label> <hois-classifier-value ng-model="stateCurriculum.status" main-classifier-code="OPPEKAVA_STAATUS"></hois-classifier-value> </md-input-container> </div> </div> </fieldset> <div>&nbsp;</div> <fieldset tabindex="11" ng-show="stateCurriculum.curricula && stateCurriculum.curricula.length > 0"> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'stateCurriculum.curricula\' | translate}}</legend> <table md-table class="secondary-table"> <thead md-head> <tr md-row> <th md-column>{{\'school.label\' | translate}}</th> <th md-column>{{\'curriculum.name\' | translate}}</th> <th md-column>{{\'curriculum.studyLevel\' | translate}}</th> <th md-column>{{\'stateCurriculum.creditsEkap\' | translate}}</th> <th md-column>{{\'stateCurriculum.validFrom\' | translate}}</th> <th md-column>{{\'stateCurriculum.validThru\' | translate}}</th> <th md-column>{{\'stateCurriculum.status\' | translate}}</th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="curriculum in stateCurriculum.curricula | orderBy: currentLanguageNameField()" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell>{{currentLanguageNameField(curriculum.school)}}</td> <td md-cell><a class="md-primary" ng-href="{{getCurriculumViewUrl(curriculum.id)}}">{{currentLanguageNameField(curriculum)}}</a></td> <td md-cell> <hois-classifier-value ng-model="curriculum.origStudyLevel" main-classifier-codes="OPPEASTE,EKR"></hois-classifier-value> </td> <td md-cell>{{curriculum.credits}}</td> <td md-cell>{{curriculum.validFrom | hoisDate}}</td> <td md-cell>{{curriculum.validThru | hoisDate}}</td> <td md-cell> <hois-classifier-value ng-model="curriculum.status" main-classifier-code="OPPEKAVA_STAATUS"></hois-classifier-value> </td> </tr> </tbody> </table> </fieldset> <hois-created-modified object="stateCurriculum"></hois-created-modified> </form> <div layout="row"> <div ng-show="stateCurriculum.status === STATUS.ENTERING"> <md-button ng-href="#/stateCurriculum/{{stateCurriculum.id}}/edit?_noback" class="md-raised md-primary" ng-if="stateCurriculum.canChange">{{\'main.button.change\' | translate}} </md-button> </div> <div ng-show="stateCurriculum.status === STATUS.VERIFIED"> <md-button ng-click="goToEditForm()" class="md-raised md-primary" ng-if="stateCurriculum.canChange">{{\'main.button.change\' | translate}} </md-button> <md-button class="md-raised md-default" ng-click="close()" ng-if="stateCurriculum.canClose"> {{\'stateCurriculum.statusButton.close\' | translate}} </md-button> </div> <a href="{{formState.stateCurriculumPdfUrl}}" target="_blank" class="md-button md-raised" ng-if="stateCurriculum.id && !isPublic">{{\'main.button.print\' | translate}}</a> <md-button ng-click="back(\'#/stateCurriculum\')" class="md-raised">{{\'main.button.back\' | translate}}</md-button> </div> </div> </div>'),
a.put("student/absence.edit.dialog.html",'<md-dialog aria-label="grade add dialog" flex="30" flex-xs="100"> <form name="studentAbsenceForm" novalidate ng-cloak> <md-toolbar> <div class="md-toolbar-tools"> <h2 flex>{{\'absence.label\' | translate}}</h2> <span flex></span> <md-button class="md-icon-button" ng-click="cancel()"> <md-icon md-font-set="material-icons">close</md-icon> </md-button> </div> </md-toolbar> <md-dialog-content> <div class="md-dialog-content"> <div layout="row" class="form-readonly"> <md-input-container flex> <label>{{\'student.name\' | translate}}</label> <hois-value value="record.studentName"></hois-value> </md-input-container> <md-input-container flex> <label>{{\'student.studentGroup\' | translate}}</label> <hois-value value="record.studentGroup"></hois-value> </md-input-container> </div> <div layout="row"> <md-input-container flex> <label>{{\'student.absence.validFrom\' | translate}}</label> <md-datepicker ng-model="record.validFrom" name="validFrom" md-max-date="record.validThru" required></md-datepicker> </md-input-container> <md-input-container flex> <label>{{\'student.absence.validThru\' | translate}}</label> <md-datepicker ng-model="record.validThru" name="validThru" md-min-date="record.validFrom"></md-datepicker> </md-input-container> </div> <md-input-container class="md-block"> <label>{{\'student.absence.cause\' | translate}}</label> <textarea ng-model="record.cause" name="cause" required md-maxlength="1000"></textarea> </md-input-container> </div> </md-dialog-content> <md-dialog-actions layout="row" layout-align="start center"> <md-button ng-click="update()" class="md-raised md-primary">{{\'main.button.save\' | translate}}</md-button> <md-button ng-click="delete()" ng-if="record.id" class="md-raised">{{\'main.button.delete\' | translate}}</md-button> <md-button ng-click="cancel()" class="md-raised">{{\'main.button.close\' | translate}}</md-button> </md-dialog-actions> </form> </md-dialog>'),a.put("student/edit.main.html",'<div layout="column" layout-padding> <div> <div layout="row" class="form-readonly"> <md-input-container flex> <label>{{\'student.label\' | translate}}</label> <hois-value value="student.person.fullname"></hois-value> </md-input-container> </div> <form name="studentEditForm" novalidate> <hois-collapsable label="(\'student.contact\' | translate)"> <md-input-container class="md-block"> <label>{{\'student.email\' | translate}}</label> <input ng-model="student.person.email" name="email" type="text" required md-maxlength="255"> </md-input-container> <md-input-container class="md-block"> <label class="textInput">{{\'student.phone\' | translate}}</label> <input ng-model="student.person.phone" name="phone" type="text" required md-maxlength="100"> </md-input-container> <md-input-container class="md-block"> <label>{{\'student.residenceCountry\' | translate}}</label> <hois-classifier-select ng-model="student.person.residenceCountry" name="residenceCountry" main-classifier-code="RIIK" required model-value-attr="code"></hois-classifier-select> </md-input-container> <div class="md-block" ng-if="student.person.residenceCountry === \'RIIK_EST\'"> <hois-ads-adapter class="md-text" ng-model="student.person.addressAds" ads-oid-model="student.person.addressAdsOid" address-model="student.person.address" required></hois-ads-adapter> </div> <md-input-container class="md-block" ng-if="student.person.residenceCountry !== \'RIIK_EST\'"> <label class="textInput">{{\'student.address\' | translate}}</label> <input ng-model="student.person.address" name="address" type="text" required md-maxlength="255"> </md-input-container> <md-input-container class="md-block"> <label class="textInput">{{\'student.postcode\' | translate}}</label> <input ng-model="student.person.postcode" name="postcode" type="text" required md-maxlength="10"> </md-input-container> <md-input-container class="md-block" ng-if="student.userIsSchoolAdmin || student.userIsStudentGroupTeacher"> <label>{{\'student.citizenship\' | translate}}</label> <hois-classifier-select ng-model="student.person.citizenship" name="citizenship" main-classifier-code="RIIK" model-value-attr="code"></hois-classifier-select> </md-input-container> <md-input-container class="md-block" ng-if="student.userIsSchoolAdmin || student.userIsStudentGroupTeacher"> <label>{{\'student.language\' | translate}}</label> <hois-classifier-select ng-model="student.person.language" name="language" main-classifier-code="OPPEKEEL" model-value-attr="code"></hois-classifier-select> </md-input-container> <md-input-container class="md-block"> <label class="textInput">{{\'student.bankaccount\' | translate}}</label> <input ng-model="student.person.bankaccount" name="bankaccount" type="text" md-maxlength="50"> </md-input-container> </hois-collapsable> <hois-collapsable label="(\'student.study\' | translate)" ng-if="student.userIsSchoolAdmin || student.userIsStudentGroupTeacher"> <md-input-container class="md-block" ng-if="student.userIsSchoolAdmin"> <label>{{\'student.studyLanguage\' | translate}}</label> <hois-classifier-select ng-model="student.studyLanguage" name="studyLanguage" main-classifier-code="OPPEKEEL" model-value-attr="code"></hois-classifier-select> </md-input-container> <md-input-container class="md-block" ng-if="student.userIsSchoolAdmin"> <label>{{\'student.nominalStudyEnd\' | translate}}</label> <md-datepicker class="wider-datepicker" name="nominalStudyEnd" ng-model="student.nominalStudyEnd" md-min-date="student.studyStart"></md-datepicker> <div ng-messages="studentEditForm.nominalStudyEnd.$error"> <div ng-message="mindate"> {{\'student.error.cannotBeBeforeStudyStart\' | translate:errorParams}} </div> </div> </md-input-container> <md-input-container class="md-block" ng-if="student.userIsSchoolAdmin"> <label>{{\'student.finSpecific\' | translate}}</label> <hois-classifier-select ng-model="student.finSpecific" name="finSpecific" main-classifier-code="FINTAPSUSTUS" model-value-attr="code"></hois-classifier-select> </md-input-container> <md-input-container class="md-block"> <label>{{\'student.studentCard\' | translate}}</label> <input ng-model="student.studentCard" name="studentCard" type="text" md-maxlength="100"> </md-input-container> <md-input-container class="md-block"> <label>{{\'student.schoolEmail\' | translate}}</label> <input ng-model="student.schoolEmail" name="schoolEmail" type="text" md-maxlength="255"> </md-input-container> <md-input-container class="md-block"> <label>{{\'student.previousStudyLevel\' | translate}}</label> <hois-classifier-select ng-model="student.previousStudyLevel" name="previousStudyLevel" main-classifier-code="OPPEASTE" required model-value-attr="code"></hois-classifier-select> </md-input-container> <md-input-container ng-if="student.isVocational" class="md-block"> <label>{{\'student.studyCompany\' | translate}}</label> <input ng-model="student.studyCompany" name="studyCompany" type="text" md-maxlength="1000"> </md-input-container> <md-input-container ng-if="student.isVocational" class="md-block"> <label>{{\'student.boardingSchool\' | translate}}</label> <input ng-model="student.boardingSchool" name="boardingSchool" type="text" md-maxlength="1000"> </md-input-container> <md-input-container class="md-block"> <label>{{\'student.previousSchoolName\' | translate}}</label> <input ng-model="student.previousSchoolName" name="previousSchoolName" type="text" md-maxlength="255"> </md-input-container> <md-input-container class="md-block"> <label>{{\'student.previousSchoolEndDate\' | translate}}</label> <md-datepicker class="wider-datepicker" ng-model="student.previousSchoolEndDate"></md-datepicker> </md-input-container> </hois-collapsable> <hois-collapsable label="(\'student.specialNeeds\' | translate)" ng-if="student.userIsSchoolAdmin || student.userIsStudentGroupTeacher"> <md-checkbox ng-model="student.isSpecialNeed" name="isSpecialNeed"> {{\'student.isSpecialNeed\' | translate}} </md-checkbox> <md-input-container class="md-block"> <label>{{\'student.specialNeed\' | translate}}</label> <hois-classifier-select ng-model="student.specialNeed" name="specialNeed" main-classifier-code="ERIVAJADUS" model-value-attr="code"></hois-classifier-select> </md-input-container> <md-checkbox ng-model="student.isRepresentativeMandatory" name="isRepresentativeMandatory"> {{\'student.isRepresentativeMandatory\' | translate}} </md-checkbox> </hois-collapsable> <hois-collapsable label="(\'student.photo.label\' | translate)" ng-if="student.userIsSchoolAdmin || student.userIsStudentGroupTeacher"> <lf-ng-md-file-input name="photoFiles" lf-files="photoFiles" lf-filesize="3MB" accept=".png, .jpg, .jpeg" lf-mimetype="image/*" preview lf-placeholder="{{!student.photo ? (\'student.photo.notSelected\' | translate) :  (\'student.photo.selectNewPhoto\' | translate)}}" lf-browse-label="{{\'student.photo.selectPhoto\' | translate}}" lf-remove-label="{{\'main.button.clear\' | translate}}"></lf-ng-md-file-input> <div ng-messages="studentEditForm.photoFiles.$error" style="color:red"> <div ng-message="filesize">{{\'main.messages.error.fileTooLarge\' | translate}} 3MB!</div> <div ng-message="mimetype">{{\'main.messages.error.wrongExtension\' | translate}} png, jpg, jpeg</div> </div> <h3 ng-if="student.photo">{{\'student.photo.currentPhoto\' | translate}}</h3> <div flex="30" flex-sm="100" flex-xs="100"> <img ng-if="student.photo" flex="100" ng-src="{{student.imageUrl}}" id="currentPhotoView"> </div> <br> <md-checkbox ng-model="student.deleteCurrentPhoto" name="deleteCurrentPhoto" ng-if="student.photo && !photoFiles[0]"> {{\'student.photo.delete\' | translate}} </md-checkbox> </hois-collapsable> </form> <md-button ng-click="update()" class="md-raised md-primary">{{\'main.button.save\' | translate}}</md-button> <md-button ng-click="back(\'#/students/\' + student.id + \'/main\', studentEditForm)" class="md-raised">{{\'main.button.back\' | translate}}</md-button> </div> </div>'),a.put("student/list.html",'<div class="ois-form-layout-padding ois-form-layout" ng-cloak> <div flex> <fieldset> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'main.searchlabel\' | translate}}</legend> <form name="searchForm" ng-submit="searchForm.$valid && loadData()" novalidate> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="45" flex-sm="100" flex-xs="100"> <label class="textInput">{{\'student.name\' | translate}}</label> <input ng-model="criteria.name" name="name" type="text" md-maxlength="255" autofocus> </md-input-container> <md-input-container ng-if="!auth.isStudent()" flex="50" flex-sm="100" flex-xs="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label class="textInput">{{\'student.idcode\' | translate}}</label> <input ng-model="criteria.idcode" name="idcode" type="text" minlength="11" md-maxlength="11"> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="45" flex-sm="100" flex-xs="100"> <label>{{\'student.curriculum\' | translate}}</label> <hois-select ng-model="criteria.curriculumVersion" name="curriculumVersion" type="curriculumversion" multiple></hois-select> </md-input-container> <md-input-container flex="50" flex-sm="100" flex-xs="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'student.studentGroup\' | translate}}</label> <input ng-model="criteria.studentGroup" name="studentGroup" md-maxlength="255" type="text"> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="45" flex-sm="100" flex-xs="100"> <label>{{\'student.studyForm\' | translate}}</label> <hois-classifier-select ng-model="criteria.studyForm" criteria="{higher: auth.school.higher ? true : undefined, vocational: auth.school.vocational ? true : undefined}" name="studyForm" model-value-attr="code" main-classifier-code="OPPEVORM" multiple></hois-classifier-select> </md-input-container> <md-input-container flex="50" flex-sm="100" flex-xs="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'student.status\' | translate}}</label> <hois-classifier-select ng-if="auth.isAdmin() || auth.isTeacher()" criteria="{higher: auth.school.higher ? true : undefined, vocational: auth.school.vocational ? true : undefined}" ng-model="criteria.status" name="status" model-value-attr="code" main-classifier-code="OPPURSTAATUS" multiple></hois-classifier-select> <hois-classifier-select ng-if="auth.isStudent()" criteria="{higher: auth.school.higher ? true : undefined, vocational: auth.school.vocational ? true : undefined}" ng-model="criteria.status" name="status" model-value-attr="code" main-classifier-code="OPPURSTAATUS" filter-values="[\'OPPURSTAATUS_K\', \'OPPURSTAATUS_L\']" multiple></hois-classifier-select> </md-input-container> </div> <div layout="row"> <md-button type="submit" class="md-raised md-primary">{{\'main.button.search\' | translate}}</md-button> <md-button class="md-raised" ng-click="clearCriteria()">{{\'main.button.clear\' | translate}}</md-button> </div> <div flex-xs="0" flex-gt-xs="0" flex-gt-sm="50"></div> </form> </fieldset> </div> </div> <div layout-padding> <div flex> <md-table-container> <table md-table md-progress="tabledata.$promise"> <thead md-head md-order="criteria.order" md-on-reorder="loadData"> <tr md-row> <th md-column md-order-by="person.lastname,person.firstname">{{\'student.name\' | translate}}</th> <th ng-if="auth.isAdmin() || auth.isTeacher()" md-column md-order-by="person.idcode">{{\'student.idcode\' | translate}}</th> <th md-column md-order-by="curriculumVersion.code">{{\'student.curriculum\' | translate}}</th> <th md-column md-order-by="studentGroup.code">{{\'student.studentGroup\' | translate}}</th> <th md-column md-order-by="{{currentLanguage()===\'en\' ? \'studyForm.nameEn\' : \'studyForm.nameEt\'}}">{{\'student.studyForm\' | translate}}</th> <th md-column md-order-by="{{currentLanguage()===\'en\' ? \'status.nameEn\' : \'status.nameEt\'}}">{{\'student.status\' | translate}}</th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="row in tabledata.content" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell> <a ng-if="auth.isAdmin() || auth.isTeacher()" md-no-ink class="md-primary" ng-href="#/students/{{::row.id}}/main">{{::row.fullname}}</a> <span ng-if="auth.isStudent()">{{::row.fullname}}</span> </td> <td ng-if="auth.isAdmin() || auth.isTeacher()" md-cell>{{::row.idcode}}</td> <td md-cell>{{currentLanguageNameField(row.curriculumVersion)}}</td> <td md-cell>{{currentLanguageNameField(row.studentGroup)}}</td> <td md-cell>{{currentLanguageNameField(row.studyForm)}}</td> <td md-cell>{{currentLanguageNameField(row.status)}}</td> </tr> </tbody> </table> </md-table-container> <md-table-pagination md-limit="criteria.size" md-limit-options="[10, 20, 50]" md-page="criteria.page" md-total="{{tabledata.totalElements}}" md-on-paginate="loadData" md-label="{page: \'{{\'main.page\' | translate}}:\', rowsPerPage: \'{{\'main.rowPerPage\' | translate}}:\', of: \'{{\'main.of\' | translate}}\'}" md-page-select></md-table-pagination> </div> </div>'),a.put("student/student.journal.dialog.html",'<md-dialog aria-label="student journal dialog" flex="60" flex-xs="100"> <form name="dialogForm" ng-cloak> <md-toolbar> <div class="md-toolbar-tools"> <h2> <hois-classifier-value ng-model="journal.yearCode" main-classifier-code="OPPEAASTA" style="display:inline-block"></hois-classifier-value> <span>{{\'student.journal.studyYear\' | translate}}</span> <span>{{$parent.currentLanguageNameField(journal)}}</span> </h2> </div> </md-toolbar> <md-dialog-content> <div class="md-dialog-content"> <div flex> <div layout="row" layout-sm="column" layout-xs="column" class="form-readonly"> <md-input-container flex="50" flex-sm="100" flex-xs="100"> <label>{{\'student.journal.modules\' | translate}}</label> <hois-value value="$parent.currentLanguageNameField(journal.modules)"></hois-value> </md-input-container> <md-input-container flex="50" flex-sm="100" flex-xs="100"> <label>{{auth.higher ? (\'student.journal.teachersHigher\' | translate) : (\'student.journal.teachersVocational\' | translate)}}</label> <hois-value value="journal.teachers"></hois-value> </md-input-container> </div> <md-table-container> <table md-table md-progress="journal.$promise"> <thead md-head> <tr md-row> <th md-column>{{\'student.journal.entry.date\' | translate}}</th> <th md-column>{{\'student.journal.entry.content\' | translate}}</th> <th md-column>{{\'student.journal.entry.grade\' | translate}}</th> <th md-column>{{\'student.journal.entry.gradeAddInfo\' | translate}}</th> <th md-column>{{\'student.journal.entry.homework\' | translate}}</th> <th md-column>{{\'student.journal.entry.homeworkDuedate\' | translate}}</th> <th md-column>{{\'student.journal.entry.absence\' | translate}}</th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="row in journal.journalEntries " ng-class-odd="\'odd\'" ng-class-even="\'even\'" md-colors="{background: getEntryColor(row.entryType.code)}"> <td md-cell>{{row.entryDate ? (row.entryDate | hoisDate) : \'-\'}}</td> <td md-cell>{{row.content ? row.content : \'-\'}}</td> <td md-cell> <span ng-repeat="previousGrade in row.previousResults | orderBy: \'gradeInserted\'"> <span> <span>{{previousGrade.gradeValue}}</span> <md-tooltip md-direction="bottom" style="height: auto"> <div>{{previousGrade.gradeInserted | hoisDate}}, &nbsp; {{previousGrade.gradeInsertedBy}}</div> </md-tooltip> </span> <span>* / </span> </span> <span> <span>{{row.gradeValue ? row.gradeValue : \'-\'}}</span> <md-tooltip md-direction="bottom" style="height: auto"> <div>{{row.gradeInserted | hoisDate}}, &nbsp; {{row.gradeInsertedBy}}</div> </md-tooltip> </span> </td> <td md-cell>{{row.addInfo ? row.addInfo : \'-\'}}</td> <td md-cell>{{row.homework ? row.homework : \'-\'}}</td> <td md-cell>{{row.homeworkDueDate ? (row.homeworkDueDate | hoisDate) : \'-\' }}</td> <td md-cell> <span ng-if="row.absence"> <hois-classifier-value ng-model="row.absence" main-classifier-code="PUUDUMINE"></hois-classifier-value> </span> <span ng-if="row.lessonAbsences"> <div ng-repeat="lessonAbsence in row.lessonAbsences | orderBy: \'lessonNr\'" layout="row"> <hois-classifier-value ng-model="lessonAbsence.absence" main-classifier-code="PUUDUMINE"></hois-classifier-value> <span>&nbsp; ({{lessonAbsence.lessonNr}})</span> </div> </span> <span ng-if="!row.absence && !row.lessonAbsences">-</span> </td> </tr> </tbody> </table> </md-table-container> <br> <div layout="row"> <div layout="row" layout-align="end" layout-sm="column" layout-xs="column" flex="100"> <span class="capacity-type-legend" flex-offset="5" md-colors="{background: getEntryColor(\'SISSEKANNE_T\')}">{{$parent.currentLanguageNameField(journalEntryTypes[\'SISSEKANNE_T\'])}}</span> <span class="capacity-type-legend" flex-offset="5" md-colors="{background: getEntryColor(\'SISSEKANNE_E\')}">{{$parent.currentLanguageNameField(journalEntryTypes[\'SISSEKANNE_E\'])}}</span> <span class="capacity-type-legend" flex-offset="5" md-colors="{background: getEntryColor(\'SISSEKANNE_I\')}">{{$parent.currentLanguageNameField(journalEntryTypes[\'SISSEKANNE_I\'])}}</span> <span class="capacity-type-legend" flex-offset="5" md-colors="{background: getEntryColor(\'SISSEKANNE_H\')}">{{$parent.currentLanguageNameField(journalEntryTypes[\'SISSEKANNE_H\'])}}</span> <span class="capacity-type-legend" flex-offset="5" md-colors="{background: getEntryColor(\'SISSEKANNE_P\')}">{{$parent.currentLanguageNameField(journalEntryTypes[\'SISSEKANNE_P\'])}}</span> <span class="capacity-type-legend" flex-offset="5" md-colors="{background: getEntryColor(\'SISSEKANNE_R\')}">{{$parent.currentLanguageNameField(journalEntryTypes[\'SISSEKANNE_R\'])}}</span> <span ng-show="journal.moduleOutcomesAsEntries" class="capacity-type-legend" flex-offset="5" md-colors="{background: getEntryColor(\'SISSEKANNE_O\')}">{{$parent.currentLanguageNameField(journalEntryTypes[\'SISSEKANNE_O\'])}}</span> <span class="capacity-type-legend" flex-offset="5" md-colors="{background: getEntryColor(\'SISSEKANNE_L\')}">{{$parent.currentLanguageNameField(journalEntryTypes[\'SISSEKANNE_L\'])}}</span> </div> </div> </div> </div> </md-dialog-content> <span flex></span> <md-dialog-actions layout="row" layout-align="start center"> <md-button ng-click="close()" class="md-raised">{{\'main.button.close\' | translate}}</md-button> </md-dialog-actions> </form> </md-dialog>'),a.put("student/student.journal.list.html",'<md-nav-bar md-selected-nav-item="currentNavItem" aria-label="{{\'subjectStudyPeriod.label.options\' | translate}}"> <md-nav-item md-nav-href="#/students/journals" name="journals">{{\'student.journal.journals\' | translate}}</md-nav-item> <md-nav-item md-nav-href="#/students/study" name="study">{{\'student.journal.study.label\' | translate}}</md-nav-item> <md-nav-item md-nav-href="#/students/tasks" name="tasks">{{\'student.journal.tasks.label\' | translate}}</md-nav-item> </md-nav-bar> <div layout-padding> <div flex> <hois-collapsable ng-repeat="year in journalsByYears track by $index" ng-click="getStudyYearJournals(year.yearId, year.yearCode)" expanded="year.collapsableOpen"> <hois-collapsable-header> <span> <hois-classifier-value style="display: inline-block" ng-model="year.yearCode" main-classifier-code="OPPEAASTA"></hois-classifier-value> <span>{{\'student.journal.studyYear\' | translate}}</span> </span> <!-- <button ng-click="getStudyYearJournals(year.yearId, year.yearCode)"></button> --> </hois-collapsable-header> <md-table-container> <table md-table class="secondary-table"> <thead md-head> <tr md-row> <th md-column>{{\'student.journal.journalName\' | translate}}</th> <th md-column>{{\'student.journal.grades\' | translate}}</th> <th md-column>{{\'student.journal.modules\' | translate}}</th> <th md-column>{{auth.higher ? (\'student.journal.teachersHigher\' | translate) : (\'student.journal.teachersVocational\' | translate)}}</th> <th md-column>{{\'student.journal.absencesIncudlingWithoutReason\' | translate}}</th> <th md-column>{{\'student.journal.lateForClass\' | translate}}</th> <th md-column></th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="journal in year.journals | orderBy: \'nameEt\'" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell width="20%"><a ng-click="showJournal(journal)">{{journal.nameEt}}</a></td> <td md-cell> <span ng-repeat="result in journal.journalEntries | filter : {gradeValue: \'\'} | orderBy: [\'!entryDate\', \'-entryDate\']" ng-class="{good: result.entryType.code === \'SISSEKANNE_L\' && resultIsPostive(result.gradeValue), \r\n                                bad: result.entryType.code === \'SISSEKANNE_L\' && !resultIsPostive(result.gradeValue),\r\n                                bold: isTestButNotFinal(result.entryType.code)}"> {{result.gradeValue}} &nbsp <md-tooltip ng-if="result.gradeValue"> {{result.gradeInserted | hoisDate}} <span ng-if="result.entryType.code">,&nbsp;</span> {{currentLanguageNameField(result.entryType)}} <span ng-if="result.addInfo">,&nbsp;</span> {{result.addInfo}} </md-tooltip> </span> </td> <td md-cell>{{currentLanguageNameField(journal.modules)}}</td> <td md-cell>{{journal.teachers}}</td> <td md-cell width="20%"> <span>{{journal.absences[\'PUUDUMINE_P\'] + journal.absences[\'PUUDUMINE_V\'] + journal.absences[\'PUUDUMINE_PR\']}} /</span> <span ng-class="{bad: journal.absences[\'PUUDUMINE_P\'] > 0}">{{journal.absences[\'PUUDUMINE_P\']}}</span> </td> <td md-cell>{{journal.absences[\'PUUDUMINE_H\']}}</td> <td md-cell><a ng-href="/#/studyMaterial/vocational/{{journal.id}}/view">{{\'studyMaterial.label\' | translate}}</a></td> </tr> </tbody> </table> </md-table-container> </hois-collapsable> </div> </div> <style>.good {\r\n    color: rgb(13,71,161);\r\n    font-weight: 500;\r\n    font-size: 18px;\r\n}\r\n    \r\n.bad {\r\n    color: red;\r\n    font-weight: 500;\r\n    font-size: 18px;\r\n}\r\n\r\n.bold {\r\n    font-weight: 500;\r\n}</style>'),a.put("student/student.journal.study.html",'<md-nav-bar md-selected-nav-item="currentNavItem" aria-label="{{\'subjectStudyPeriod.label.options\' | translate}}"> <md-nav-item md-nav-href="#/students/journals" name="journals">{{\'student.journal.journals\' | translate}}</md-nav-item> <md-nav-item md-nav-href="#/students/study" name="study">{{\'student.journal.study.label\' | translate}}</md-nav-item> <md-nav-item md-nav-href="#/students/tasks" name="tasks">{{\'student.journal.tasks.label\' | translate}}</md-nav-item> </md-nav-bar> <div layout-padding> <div layout-row style="text-align: center"> <md-button ng-if="previousWeekIndex !== null" ng-click="changeWeek(previousWeekIndex)" class="md-icon-button md-primary"> <md-icon>arrow_back</md-icon> </md-button> <h2 style="display:inline-block">{{shownWeek.start | hoisDayMonth}} - {{shownWeek.end | hoisDayMonth}}</h2> <md-button ng-if="nextWeekIndex !== null" ng-click="changeWeek(nextWeekIndex)" class="md-icon-button md-primary"> <md-icon>arrow_forward</md-icon> </md-button> </div> <md-table-container ng-if="shownWeek.entries.length > 0"> <table md-table md-progress="endpoint.$promise"> <thead md-head> <tr md-row> <th md-column width="10%">{{\'student.journal.study.date\' | translate}}</th> <th md-column width="20%">{{\'student.journal.study.journal\' | translate}}</th> <th md-column width="70%">{{\'student.journal.study.content\' | translate}}</th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="entry in shownWeek.entries" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell>{{entry.date | hoisDate}}</td> <td md-cell>{{entry.journalName}}</td> <td md-cell>{{entry.content}}</td> </tr> </tbody> </table> </md-table-container> <div layout-row ng-if="shownWeek.entries.length === 0" style="text-align: center">{{\'student.journal.study.noEntries\' | translate}}</div> </div>'),a.put("student/student.journal.tasks.html",'<md-nav-bar md-selected-nav-item="currentNavItem" aria-label="{{\'subjectStudyPeriod.label.options\' | translate}}"> <md-nav-item md-nav-href="#/students/journals" name="journals">{{\'student.journal.journals\' | translate}}</md-nav-item> <md-nav-item md-nav-href="#/students/study" name="study">{{\'student.journal.study.label\' | translate}}</md-nav-item> <md-nav-item md-nav-href="#/students/tasks" name="tasks">{{\'student.journal.tasks.label\' | translate}}</md-nav-item> </md-nav-bar> <div layout-padding> <div layout-row style="text-align: center"> <md-button ng-if="previousWeekIndex !== null" ng-click="changeWeek(previousWeekIndex)" class="md-icon-button md-primary"> <md-icon>arrow_back</md-icon> </md-button> <h2 style="display:inline-block">{{shownWeek.start | hoisDayMonth}} - {{shownWeek.end | hoisDayMonth}}</h2> <md-button ng-if="nextWeekIndex !== null" ng-click="changeWeek(nextWeekIndex)" class="md-icon-button md-primary"> <md-icon>arrow_forward</md-icon> </md-button> </div> <md-table-container ng-if="shownWeek.entries.length > 0"> <table md-table md-progress="endpoint.$promise"> <thead md-head> <tr md-row> <th md-column width="10%">{{\'student.journal.tasks.date\' | translate}}</th> <th md-column width="20%">{{\'student.journal.tasks.journal\' | translate}}</th> <th md-column width="70%">{{\'student.journal.tasks.content\' | translate}}</th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="task in shownWeek.entries" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell>{{task.date | hoisDate}}</td> <td md-cell>{{task.journalName}}</td> <td md-cell>{{task.taskContent}}</td> </tr> </tbody> </table> </md-table-container> <div layout-row ng-if="shownWeek.entries.length === 0" style="text-align: center">{{\'student.journal.tasks.noTasks\' | translate}}</div> </div>'),a.put("student/view.absences.html",'<div ng-cloak> <div ng-include="\'student/templates/view.navbar.vocational.tmpl.html\'"></div> </div> <div layout-padding ng-cloak> <div flex> <md-table-container> <table md-table md-progress="tabledata.$promise" class="secondary-table"> <thead md-head md-order="absencesCriteria.order" md-on-reorder="loadAbsences"> <tr md-row> <th md-column md-order-by="validFrom">{{\'student.absence.validFrom\' | translate}}</th> <th md-column md-order-by="validThru">{{\'student.absence.validThru\' | translate}}</th> <th md-column md-order-by="cause">{{\'student.absence.cause\' | translate}}</th> <th md-column md-order-by="isAccepted, isRejected">{{\'student.absence.status\' | translate}}</th> <th></th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="row in tabledata.content" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell>{{::row.validFrom | hoisDate}}</td> <td md-cell>{{::row.validThru | hoisDate}}</td> <td md-cell>{{::row.cause}}</td> <td md-cell> <span ng-if="row.isAccepted">{{\'student.absence.isAccepted\' | translate}}</span> <span ng-if="row.isRejected">{{\'student.absence.isRejected\' | translate}}</span> <span ng-if="!row.isAccepted && !row.isRejected">{{\'student.absence.isNotAccepted\' | translate}}</span> </td> <td md-cell> <md-button md-no-ink ng-click="editAbsence(row)" class="md-primary change-button" ng-if="row.userCanEdit">{{\'main.button.change\' | translate}}</md-button> </td> </tr> </tbody> </table> </md-table-container> <md-table-pagination md-limit="absencesCriteria.size" md-limit-options="[10, 20, 50]" md-page="absencesCriteria.page" md-total="{{tabledata.totalElements}}" md-on-paginate="loadAbsences" md-label="{page: \'{{\'main.page\' | translate}}:\', rowsPerPage: \'{{\'main.rowPerPage\' | translate}}:\', of: \'{{\'main.of\' | translate}}\'}" md-page-select></md-table-pagination> <md-button ng-click="editAbsence({})" class="md-primary md-raised" ng-if="tabledata.canAddAbsence">{{\'main.button.create\' | translate}}</md-button> <md-button ng-if="!auth.isStudent()" ng-click="back(\'#/students\')" class="md-raised">{{\'main.button.back\' | translate}}</md-button> </div> </div>'),a.put("student/view.documents.html",'<div ng-cloak> <div ng-if="student && student.isVocational===true" ng-include="\'student/templates/view.navbar.vocational.tmpl.html\'"></div> <div ng-if="!student || student.isVocational===false" ng-include="\'student/templates/view.navbar.higher.tmpl.html\'"></div> </div> <div layout-padding ng-cloak> <div flex> <hois-collapsable label="(\'student.application.label\' | translate)"> <md-table-container> <table md-table md-progress="applications.$promise" class="secondary-table"> <thead md-head md-order="applicationsCriteria.order" md-on-reorder="loadApplications"> <tr md-row> <th md-column md-order-by="{{currentLanguage()===\'en\' ? \'type.nameEn\' : \'type.nameEt\'}}">{{\'student.application.type\' | translate}}</th> <th md-column md-order-by="submitted">{{\'student.application.created\' | translate}}</th> <th md-column md-order-by="{{currentLanguage()===\'en\' ? \'status.nameEn\' : \'status.nameEt\'}}">{{\'student.application.status\' | translate}}</th> <th md-column md-order-by="5">{{\'student.application.confirmDate\' | translate}}</th> <th md-column></th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="row in applications.content" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell> <a ng-href="#/applications/{{::row.id}}/view">{{currentLanguageNameField(row.type)}}</a> </td> <td md-cell>{{::row.submitted | hoisDate}}</td> <td md-cell>{{currentLanguageNameField(row.status)}}</td> <td md-cell>{{::row.confirmDate | hoisDate}}</td> <td md-cell> <a ng-if="(row.status.code === \'AVALDUS_STAATUS_KOOST\') || (row.status.code === \'AVALDUS_STAATUS_YLEVAAT\' && auth.isAdmin())" md-no-ink class="md-button md-primary change-button" ng-href="#/applications/{{::row.id}}/edit">{{\'main.button.change\' | translate}}</a> </td> </tr> </tbody> </table> </md-table-container> <md-table-pagination ng-if="applications.totalElements > applicationsCriteria.size" md-limit="applicationsCriteria.size" md-limit-options="[5, 10, 20, 50]" md-page="applicationsCriteria.page" md-total="{{applications.totalElements}}" md-on-paginate="loadApplications" md-label="{page: \'{{\'main.page\' | translate}}:\', rowsPerPage: \'{{\'main.rowPerPage\' | translate}}:\', of: \'{{\'main.of\' | translate}}\'}" md-page-select></md-table-pagination> <br ng-if="auth.isStudent()"> <md-table-container ng-if="auth.isStudent()"> <table md-table md-progress="applicationTypes.$promise" class="secondary-table"> <thead md-head> <tr md-row> <th md-column>{{\'application.type\' | translate}}</th> <th md-column></th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="row in applicationTypes" ng-class-odd="\'odd\'" ng-class-even="\'even\'" ng-if="applicationTypesApplicable[row.code]"> <td md-cell>{{currentLanguageNameField(row)}}</td> <td md-cell> <div ng-if="applicationTypesApplicable[row.code].isAllowed === true" layout="row" layout-align="end end"> <a class="md-button md-primary" ng-href="#/applications/new?student={{studentId}}&type={{row.code}}">{{\'main.button.apply\' | translate}}</a> </div> </td> </tr> </tbody> </table> </md-table-container> </hois-collapsable> <br> <hois-collapsable ng-if="!auth.isTeacher()" label="(\'certificate.certificates\' | translate)"> <md-table-container ng-if="!auth.isTeacher()"> <table md-table md-progress="certificates.$promise" class="secondary-table"> <thead md-head md-order="certificatesCriteria.order" md-on-reorder="loadCertificates"> <tr md-row> <th md-column md-order-by="c.certificateNr">{{\'certificate.nr\' | translate}}</th> <th md-column md-order-by="type.{{currentLanguageNameField()}}">{{\'certificate.type\' | translate}}</th> <th md-column md-order-by="status.{{currentLanguageNameField()}}">{{\'certificate.status\' | translate}}</th> <th md-column md-order-by="c.headline">{{\'certificate.headline\' | translate}}</th> <th md-column md-order-by="c.inserted">{{\'certificate.inserted\' | translate}}</th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="row in certificates.content" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell>{{::row.certificateNr}}</td> <td md-cell> <a ng-href="#/certificate/{{::row.id}}/view">{{currentLanguageNameField(row.type)}}</a> </td> <td md-cell>{{currentLanguageNameField(row.status)}}</td> <td md-cell>{{::row.headline}}</td> <td md-cell>{{row.inserted | hoisDate}}</td> </tr> </tbody> </table> </md-table-container> <md-table-pagination ng-if="!auth.isTeacher() && certificates.totalElements > certificatesCriteria.size" md-limit="certificatesCriteria.size" md-limit-options="[5, 10, 15]" md-page="certificatesCriteria.page" md-total="{{certificates.totalElements}}" md-on-paginate="loadCertificates" md-label="{page: \'{{\'main.page\' | translate}}:\', rowsPerPage: \'{{\'main.rowPerPage\' | translate}}:\', of: \'{{\'main.of\' | translate}}\'}" md-page-select></md-table-pagination> <br ng-if="auth.isStudent()"> <md-table-container> <table md-table ng-if="auth.isStudent()" class="secondary-table"> <thead md-head> <tr md-row> <th md-column>{{\'certificate.type\' | translate}}</th> <th md-column></th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="type in certificateTypes" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell>{{currentLanguageNameField(type)}}</td> <td md-cell> <md-button md-no-ink class="md-primary change-button" ng-href="#/certificate/{{::type.code}}/new"> {{\'certificate.order\' | translate}} </md-button> </td> </tr> </tbody> </table> </md-table-container> </hois-collapsable> <br> <hois-collapsable label="(\'student.directive.label\' | translate)"> <md-table-container> <table md-table md-progress="directives.$promise" class="secondary-table"> <thead md-head md-order="directivesCriteria.order" md-on-reorder="loadDirectives"> <tr md-row> <th md-column md-order-by="headline">{{\'student.directive.headline\' | translate}}</th> <th md-column md-order-by="{{currentLanguage()===\'en\' ? \'type.nameEn\' : \'type.nameEt\'}}">{{\'student.directive.type\' | translate}}</th> <th md-column md-order-by="directiveNr">{{\'student.directive.directiveNr\' | translate}}</th> <th md-column md-order-by="confirmDate">{{\'student.directive.confirmDate\' | translate}}</th> <th md-column md-order-by="insertedBy">{{\'student.directive.createdBy\' | translate}}</th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="row in directives.content" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell> <a ng-href="#/directives/{{::row.id}}/view">{{::row.headline}}</a> </td> <td md-cell>{{currentLanguageNameField(row.type)}}</td> <td md-cell>{{::row.directiveNr}}</td> <td md-cell>{{::row.confirmDate | hoisDate}}</td> <td md-cell>{{::row.insertedBy}}</td> </tr> </tbody> </table> </md-table-container> <md-table-pagination ng-if="directives.totalElements > directivesCriteria.size" md-limit="directivesCriteria.size" md-limit-options="[5, 10, 15]" md-page="directivesCriteria.page" md-total="{{directives.totalElements}}" md-on-paginate="loadDirectives" md-label="{page: \'{{\'main.page\' | translate}}:\', rowsPerPage: \'{{\'main.rowPerPage\' | translate}}:\', of: \'{{\'main.of\' | translate}}\'}" md-page-select></md-table-pagination> </hois-collapsable> <hois-collapsable label="(\'student.practiceContracts.label\' | translate)"> <md-table-container> <table md-table md-progress="practiceContracts.$promise" class="secondary-table"> <thead md-head md-order="practiceContractsCriteria.order" md-on-reorder="loadPracticeContracts"> <tr md-row> <!--todo order byd--> <th md-column md-order-by="contractNr">{{\'student.practiceContracts.contractNumber\' | translate}}</th> <th md-column md-order-by="startDate, endDate">{{\'student.practiceContracts.validity\' | translate}}</th> <th md-column md-order-by="e.name">{{\'student.practiceContracts.enterprise\' | translate}}</th> <th md-column md-order-by="e.contactPersonName">{{\'student.practiceContracts.supervisor\' | translate}}</th> <th md-column md-order-by="p.firstname, p.lastname">{{\'student.practiceContracts.schoolSupervisor\' | translate}}</th> <th md-column md-order-by="confirmDate">{{\'student.practiceContracts.contractDate\' | translate}}</th> <th md-column md-order-by="status.{{currentLanguageNameField()}}">{{\'student.practiceContracts.status\' | translate}}</th> <th md-column></th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="row in practiceContracts.content" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell>{{::row.contractNr}}</td> <td md-cell>{{::row.startDate | hoisDate}} - {{::row.endDate | hoisDate}}</td> <td md-cell>{{::row.enterprise}}</td> <td md-cell>{{::row.supervisor}}</td> <td md-cell>{{::row.schoolSupervisor}}</td> <td md-cell>{{::row.contractDate | hoisDate}}</td> <td md-cell>{{currentLanguageNameField(row.status)}}</td> <td md-cell> <md-button ng-if="auth.isAdmin() && row.status.code === \'LEPING_STAATUS_S\'" md-no-ink class="md-primary change-button" ng-href="#/contracts/{{::row.id}}/edit">{{\'main.button.edit\' | translate}}</md-button> <md-button ng-if="!auth.isAdmin() || (auth.isAdmin() && row.status.code !== \'LEPING_STAATUS_S\')" md-no-ink class="md-primary change-button" ng-href="#/contracts/{{::row.id}}/view">{{\'main.button.view\' | translate}}</md-button> </td> </tr> </tbody> </table> </md-table-container> <!-- todo lehe suuruse valik katki?--> <md-table-pagination ng-if="practiceContracts.totalElements > practiceContractsCriteria.size" md-limit="practiceContractsCriteria.size" md-limit-options="[5, 10, 15]" md-page="practiceContractsCriteria.page" md-total="{{practiceContracts.totalElements}}" md-on-paginate="loadPracticeContracts" md-label="{page: \'{{\'main.page\' | translate}}:\', rowsPerPage: \'{{\'main.rowPerPage\' | translate}}:\', of: \'{{\'main.of\' | translate}}\'}" md-page-select></md-table-pagination> </hois-collapsable> <md-button ng-if="!auth.isStudent()" ng-click="back(\'#/students\')" class="md-raised">{{\'main.button.back\' | translate}}</md-button> </div> </div>'),
a.put("student/view.main.html",'<div ng-cloak> <div ng-if="student && student.isVocational===true" ng-include="\'student/templates/view.navbar.vocational.tmpl.html\'"></div> <div ng-if="!student || student.isVocational===false" ng-include="\'student/templates/view.navbar.higher.tmpl.html\'"></div> </div> <div layout-padding ng-cloak class="form-readonly"> <div flex> <div layout="row" layout-xs="column" flex> <div flex="70"> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="35" flex-sm="100" flex-xs="100"> <label>{{\'student.firstname\' | translate}}</label> <hois-value value="student.person.firstname"></hois-value> </md-input-container> <md-input-container flex="60" flex-sm="100" flex-xs="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'student.lastname\' | translate}}</label> <hois-value value="student.person.lastname"></hois-value> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="35" flex-sm="100" flex-xs="100"> <label>{{\'student.idcode\' | translate}}</label> <hois-value value="student.person.idcode"></hois-value> </md-input-container> <md-input-container flex="60" flex-sm="100" flex-xs="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'student.sex\' | translate}}</label> <hois-classifier-value ng-model="student.person.sex" main-classifier-code="SUGU"></hois-classifier-value> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="35" flex-sm="100" flex-xs="100"> <label>{{\'student.citizenship\' | translate}}</label> <hois-classifier-value ng-model="student.person.citizenship" main-classifier-code="RIIK"></hois-classifier-value> </md-input-container> <md-input-container flex="30" flex-sm="100" flex-xs="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'student.language\' | translate}}</label> <hois-classifier-value ng-model="student.person.language" main-classifier-code="OPPEKEEL"></hois-classifier-value> </md-input-container> <md-input-container flex="25" flex-sm="100" flex-xs="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'student.bankaccount\' | translate}}</label> <hois-value value="student.person.bankaccount"></hois-value> </md-input-container> </div> </div> <div flex="30"> <img ng-if="student.photo" flex="60" style="display: block; margin-left: auto; margin-right: auto" ng-src="{{student.imageUrl}}"> </div> </div> <div layout="column"> <hois-collapsable label="(\'student.study\' | translate) + \' (\' + currentLanguageNameField(student.school) + \')\'"> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="20" flex-sm="100" flex-xs="100"> <label>{{\'student.status\' | translate}}</label> <hois-classifier-value ng-model="student.status" main-classifier-code="OPPURSTAATUS"></hois-classifier-value> </md-input-container> <md-input-container flex="20" flex-sm="100" flex-xs="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{student.isVocational ? \'student.implementationPlan\' : \'student.curriculumVersion\' | translate}}</label> <hois-value value="currentLanguageNameField(student.curriculumVersion)" href-value="student.isVocational ? \'#/vocationalCurriculum/\' + student.curriculum + \'/moduleImplementationPlan/\' + student.curriculumVersion.id + \'/view\' : \'#/higherCurriculum/\' + student.curriculum + \'/version/\' + student.curriculumVersion.id + \'/view\'"></hois-value> </md-input-container> <md-input-container flex="20" flex-sm="100" flex-xs="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'student.studyLanguage\' | translate}}</label> <hois-classifier-value ng-model="student.studyLanguage" main-classifier-code="OPPEKEEL"></hois-classifier-value> </md-input-container> <md-input-container flex="20" flex-sm="100" flex-xs="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0" ng-if="!student.isVocational"> <label>{{\'student.curriculumSpeciality\' | translate}}</label> <hois-value value="currentLanguageNameField(student.curriculumSpeciality)"></hois-value> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="20" flex-sm="100" flex-xs="100"> <label>{{\'student.studentGroup\' | translate}}</label> <hois-value value="currentLanguageNameField(student.studentGroup)" href-value="!auth.isTeacher() ? (\'#/studentgroups/\' + student.studentGroup.id + \'/view\') : undefined"></hois-value> </md-input-container> <md-input-container flex="20" flex-sm="100" flex-xs="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'student.course\' | translate}}</label> <hois-value value="student.course"></hois-value> </md-input-container> <md-input-container flex="20" flex-sm="100" flex-xs="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'student.studyStart\' | translate}}</label> <hois-value value="student.studyStart | hoisDate"></hois-value> </md-input-container> <md-input-container flex="20" flex-sm="100" flex-xs="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{student.studyEnd ? \'student.studyEnd\' : \'student.nominalStudyEnd\' | translate}}</label> <hois-value value="student.studyEnd ? student.studyEnd : student.nominalStudyEnd | hoisDate"></hois-value> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="20" flex-sm="100" flex-xs="100"> <label>{{\'student.studyForm\' | translate}}</label> <hois-classifier-value ng-model="student.studyForm" main-classifier-code="OPPEVORM"></hois-classifier-value> </md-input-container> <md-input-container flex="20" flex-sm="100" flex-xs="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0" ng-if="!student.isVocational"> <label>{{\'student.studyLoad\' | translate}}</label> <hois-classifier-value ng-model="student.studyLoad" main-classifier-code="OPPEKOORMUS"></hois-classifier-value> </md-input-container> <md-input-container flex="20" flex-sm="100" flex-xs="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'student.fin\' | translate}}</label> <hois-classifier-value ng-model="student.fin" main-classifier-code="FINALLIKAS"></hois-classifier-value> </md-input-container> <md-input-container flex="20" flex-sm="100" flex-xs="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'student.finSpecific\' | translate}}</label> <hois-classifier-value ng-model="student.finSpecific" main-classifier-code="FINTAPSUSTUS"></hois-classifier-value> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="20" flex-sm="100" flex-xs="100"> <label>{{\'student.studentCard\' | translate}}</label> <hois-value value="student.studentCard"></hois-value> </md-input-container> <md-input-container flex="20" flex-sm="100" flex-xs="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'student.previousStudyLevel\' | translate}}</label> <hois-classifier-value ng-model="student.previousStudyLevel" main-classifier-code="OPPEASTE"></hois-classifier-value> </md-input-container> <md-input-container ng-if="student.isVocational" flex="20" flex-sm="100" flex-xs="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'student.studyCompany\' | translate}}</label> <hois-value value="student.studyCompany"></hois-value> </md-input-container> <md-input-container ng-if="student.isVocational" flex="20" flex-sm="100" flex-xs="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'student.boardingSchool\' | translate}}</label> <hois-value value="student.boardingSchool"></hois-value> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="20" flex-sm="100" flex-xs="100"> <label>{{\'student.previousSchoolName\' | translate}}</label> <hois-value value="student.previousSchoolName"></hois-value> </md-input-container> <md-input-container flex="20" flex-sm="100" flex-xs="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'student.previousSchoolEndDate\' | translate}}</label> <hois-value value="student.previousSchoolEndDate | hoisYear"></hois-value> </md-input-container> </div> </hois-collapsable> </div> <div ng-if="student.occupationCertificates && student.occupationCertificates.length > 0"> <hois-collapsable label="(\'student.occupationcertificate.label\' | translate)"> <div ng-repeat="row in student.occupationCertificates"> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="20" flex-sm="100" flex-xs="100"> <label>{{\'student.occupationcertificate.certificateNr\' | translate}}</label> <hois-value value="row.certificateNr"></hois-value> </md-input-container> <md-input-container ng-if="!student.isVocational" flex="45" flex-sm="100" flex-xs="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'student.occupationcertificate.occupation\' | translate}}</label> <hois-classifier-value ng-model="row.occupationCode" main-classifier-code="KUTSE"></hois-classifier-value> </md-input-container> <md-input-container ng-if="student.isVocational" flex="20" flex-sm="100" flex-xs="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'student.occupationcertificate.occupation\' | translate}}</label> <hois-classifier-value ng-model="row.occupationCode" main-classifier-code="KUTSE"></hois-classifier-value> </md-input-container> <md-input-container ng-if="student.isVocational" flex="20" flex-sm="100" flex-xs="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'student.occupationcertificate.partOccupation\' | translate}}</label> <hois-classifier-value ng-model="row.partOccupationSpecialityCode" main-classifier-codes="OSAKUTSE,SPETSKUTSE"></hois-classifier-value> </md-input-container> <md-input-container flex="20" flex-sm="100" flex-xs="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'student.occupationcertificate.language\' | translate}}</label> <hois-value value="row.language"></hois-value> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="20" flex-sm="100" flex-xs="100"> <label>{{\'student.occupationcertificate.issuer\' | translate}}</label> <hois-value value="row.issuer"></hois-value> </md-input-container> <md-input-container flex="20" flex-sm="100" flex-xs="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'student.occupationcertificate.issueDate\' | translate}}</label> <hois-value value="row.issueDate | hoisDate"></hois-value> </md-input-container> <md-input-container flex="20" flex-sm="100" flex-xs="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'student.occupationcertificate.validFrom\' | translate}}</label> <hois-value value="row.validFrom | hoisDate"></hois-value> </md-input-container> <md-input-container flex="20" flex-sm="100" flex-xs="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'student.occupationcertificate.validThru\' | translate}}</label> <hois-value value="row.validThru | hoisDate"></hois-value> </md-input-container> </div> </div> </hois-collapsable> </div> <div> <hois-collapsable label="(\'student.contact\' | translate)"> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="35" flex-sm="100" flex-xs="100"> <label>{{\'student.schoolEmail\' | translate}}</label> <hois-value value="student.schoolEmail"></hois-value> </md-input-container> <md-input-container flex="55" flex-sm="100" flex-xs="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'student.phone\' | translate}}</label> <hois-value value="student.person.phone"></hois-value> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="35" flex-sm="100" flex-xs="100"> <label>{{\'student.residenceCountry\' | translate}}</label> <hois-classifier-value ng-model="student.person.residenceCountry" main-classifier-code="RIIK"></hois-classifier-value> </md-input-container> <md-input-container flex="30" flex-sm="100" flex-xs="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'student.address\' | translate}}</label> <hois-value value="student.person.address"></hois-value> </md-input-container> <md-input-container flex="20" flex-sm="100" flex-xs="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'student.postcode\' | translate}}</label> <hois-value value="student.person.postcode"></hois-value> </md-input-container> </div> </hois-collapsable> </div> <div> <hois-collapsable label="(\'student.representatives\' | translate)"> <md-button ng-if="student.userCanAddRepresentative" ng-click="editRepresentative()" class="md-raised"> {{\'student.representative.add\' | translate}} </md-button> <br> <br> <md-table-container> <table md-table md-progress="representatives.$promise" class="secondary-table"> <thead md-head md-order="representativesCriteria.order" md-on-reorder="loadRepresentatives"> <tr md-row> <th md-column md-order-by="person.lastname">{{\'student.representative.name\' | translate}}</th> <th md-column md-order-by="person.idcode">{{\'student.representative.idcode\' | translate}}</th> <th md-column md-order-by="relation.nameEt">{{\'student.representative.relation\' | translate}}</th> <th md-column md-order-by="person.phone">{{\'student.representative.phone\' | translate}}</th> <th md-column md-order-by="person.email">{{\'student.representative.email\' | translate}}</th> <th md-column>{{\'student.representative.studentVisible\' | translate}}</th> <th md-column></th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="row in representatives.content" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell>{{::row.person.fullname}}</td> <td md-cell>{{::row.person.idcode}}</td> <td md-cell>{{currentLanguageNameField(row.relation)}}</td> <td md-cell>{{::row.person.phone}}</td> <td md-cell>{{::row.person.email}}</td> <td md-cell>{{row.isStudentVisible ? \'main.yes\' : \'main.no\' | translate}}</td> <td md-cell> <md-button md-no-ink ng-if="row.userCanEdit" ng-click="editRepresentative(row.id)" class="md-primary change-button">{{\'main.button.change\' | translate}}</md-button> </td> </tr> </tbody> </table> </md-table-container> <md-table-pagination ng-if="representatives.totalElements > representativesCriteria.size" md-limit="representativesCriteria.size" md-limit-options="[10, 20, 50]" md-page="representativesCriteria.page" md-total="{{representatives.totalElements}}" md-on-paginate="loadRepresentatives" md-label="{page: \'{{\'main.page\' | translate}}:\', rowsPerPage: \'{{\'main.rowPerPage\' | translate}}:\', of: \'{{\'main.of\' | translate}}\'}" md-page-select></md-table-pagination> </hois-collapsable> </div> <div class="top-margin"> <hois-collapsable label="(\'student.specialNeeds\' | translate)" ng-if="student.userIsSchoolAdmin || student.userIsStudentGroupTeacher"> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="35" flex-sm="100" flex-xs="100"> <label>{{\'student.isSpecialNeed\' | translate}}</label> <hois-value value="student.isSpecialNeed ? \'main.yes\' : \'main.no\' | translate"></hois-value> </md-input-container> <md-input-container flex="30" flex-sm="100" flex-xs="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'student.specialNeed\' | translate}}</label> <hois-classifier-value ng-model="student.specialNeed" main-classifier-code="ERIVAJADUS"></hois-classifier-value> </md-input-container> <md-input-container flex="20" flex-sm="100" flex-xs="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'student.isRepresentativeMandatory\' | translate}}</label> <hois-value value="student.isRepresentativeMandatory ? \'main.yes\' : \'main.no\' | translate"></hois-value> </md-input-container> </div> </hois-collapsable> </div> <div ng-if="student.isVocational===false"> <hois-collapsable label="(\'student.foreignStudy\' | translate)"> <md-table-container> <table md-table md-progress="foreignstudies.$promise" class="secondary-table"> <thead md-head md-order="foreignstudiesCriteria.order" md-on-reorder="loadForeignstudies"> <tr md-row> <th md-column md-order-by="1">{{\'student.foreignstudy.school\' | translate}}</th> <th md-column md-order-by="country.{{currentLanguageNameField()}}">{{\'student.foreignstudy.country\' | translate}}</th> <th md-column md-order-by="3">{{\'student.foreignstudy.startDate\' | translate}}</th> <th md-column md-order-by="4">{{\'student.foreignstudy.endDate\' | translate}}</th> <th md-column md-order-by="purpose.{{currentLanguageNameField()}}">{{\'student.foreignstudy.purpose\' | translate}}</th> <th md-column md-order-by="programme.{{currentLanguageNameField()}}">{{\'student.foreignstudy.programme\' | translate}}</th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="row in foreignstudies.content" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell>{{::row.school}}</td> <td md-cell> <hois-classifier-value ng-model="row.country" main-classifier-code="RIIK"></hois-classifier-value> </td> <td md-cell>{{::row.startDate | hoisDate}}</td> <td md-cell>{{::row.endDate | hoisDate}}</td> <td md-cell> <hois-classifier-value ng-model="row.abroadPurpose" main-classifier-code="VALISOPE_EESMARK"></hois-classifier-value> </td> <td md-cell> <hois-classifier-value ng-model="row.abroadProgramme" main-classifier-code="VALISKOOL_PROGRAMM"></hois-classifier-value> </td> </tr> </tbody> </table> </md-table-container> <md-table-pagination ng-if="foreignstudies.totalElements > foreignstudiesCriteria.size" md-limit="foreignstudiesCriteria.size" md-limit-options="[10, 20, 50]" md-page="foreignstudiesCriteria.page" md-total="{{foreignstudies.totalElements}}" md-on-paginate="loadForeignstudies" md-label="{page: \'{{\'main.page\' | translate}}:\', rowsPerPage: \'{{\'main.rowPerPage\' | translate}}:\', of: \'{{\'main.of\' | translate}}\'}" md-page-select></md-table-pagination> </hois-collapsable> </div> <md-button ng-href="#/students/{{student.id}}/edit" ng-if="student.userCanEditStudent" class="md-primary md-raised">{{\'main.button.change\' | translate}}</md-button> <md-button ng-if="!auth.isStudent()" ng-click="back(\'#/students\')" class="md-raised">{{\'main.button.back\' | translate}}</md-button> </div> </div>'),a.put("student/view.results.html",'<div ng-cloak> <div> <div ng-if="student && student.isVocational===true" ng-include="\'student/templates/view.navbar.vocational.tmpl.html\'"></div> <div ng-if="student && student.isVocational===false" ng-include="\'student/templates/view.navbar.higher.tmpl.html\'"></div> </div> <div> <div ng-if="student && student.isVocational===true" ng-include="\'student/templates/view.results.vocational.tmpl.html\'"></div> <div ng-if="student && student.isVocational===false" ng-include="\'student/templates/view.results.higher.tmpl.html\'"></div> </div> <div layout="row" layout-margin> <md-button ng-if="!auth.isStudent() && !auth.isParent() && resultsCurrentNavItem !== \'student.changeModules\'" ng-click="back(\'#/students\')" class="md-raised">{{\'main.button.back\' | translate}}</md-button> </div> </div>'),a.put("student/view.timetable.html",'<div ng-cloak> <div ng-if="student && student.isVocational===true" ng-include="\'student/templates/view.navbar.vocational.tmpl.html\'"></div> <div ng-if="student && student.isVocational===false" ng-include="\'student/templates/view.navbar.higher.tmpl.html\'"></div> </div> <div layout-padding ng-cloak> <div flex> <div ng-controller="StudentTimetableViewController"> <div ng-include="\'timetable/timetable.week.view.html\'"></div> </div> <md-button ng-if="!auth.isStudent()" ng-click="back(\'#/students\')" class="md-raised">{{\'main.button.back\' | translate}}</md-button> </div> </div>'),a.put("studentAbsence/absence.accept.by.lessons.dialog.html",'<md-dialog aria-label="absence accept by lessons dialog" flex="50" flex-xs="100"> <form name="dialogForm" ng-cloak> <md-toolbar> <div class="md-toolbar-tools"> <h2>{{currentLanguageNameField(absence.student)}}, {{absence.studentGroup}}</h2> <span flex></span> <md-button class="md-icon-button" ng-click="cancel()"> <md-icon md-font-set="material-icons">close</md-icon> </md-button> </div> </md-toolbar> <md-dialog-content> <div class="md-dialog-content"> <div layout="column" class="form-readonly"> <md-input-container class="label-only" flex> <label>{{\'absence.cause\' | translate}}</label> <hois-value value="absence.cause"></hois-value> </md-input-container> <md-input-container class="label-only" flex> <label>{{\'absence.period\' | translate}}</label> <hois-value ng-if="!absence.validThru" value="(absence.validFrom | hoisDate)"></hois-value> <hois-value ng-if="absence.validThru" value="(absence.validFrom | hoisDate) + \'-\' + (absence.validThru | hoisDate)"></hois-value> </md-input-container> </div> <div layout="column" ng-show="canEdit"> <md-input-container flex> <label>{{\'absence.maxLessonNr\' | translate}}</label> <hois-select ng-model="maxLessonNr" values="lessons" required></hois-select> </md-input-container> <md-input-container> <md-checkbox ng-model="showWeekends" aria-label="{{\'absence.showWeekends\' | translate}}" ng-change="showWeekendsChanged()"> {{\'absence.showWeekends\' | translate}} </md-checkbox> </md-input-container> </div> <md-table-container> <table md-table class="secondary-table"> <thead md-head> <tr md-row> <th md-column></th> <th md-column ng-repeat="lesson in [].constructor(maxLessonNr) track by $index">{{$index + 1}}</th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="date in dates | orderBy" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell>{{date | hoisDate}}</td> <td md-cell ng-repeat="lesson in [].constructor(maxLessonNr) track by $index"> <md-input-container> <md-checkbox ng-model="lessonsByDate[date][$index + 1]" aria-label="lesson" ng-change="lessonByDate()" ng-disabled="!canEdit"></md-checkbox> </md-input-container> </td> </tr> </tbody> </table> </md-table-container> </div> </md-dialog-content> <span flex></span> <md-dialog-actions layout="row" layout-sm="column" layout-xs="column" layout-align="start center"> <md-button ng-if="canEdit" class="md-raised md-primary" ng-disabled="!lessonsToAccept" ng-click="submit()">{{\'absence.acceptLessons\' | translate}}</md-button> <md-button class="md-raised" ng-click="cancel()">{{\'main.button.close\' | translate}}</md-button> </md-dialog-actions> </form> </md-dialog>'),a.put("studentAbsence/absence.group.html",'<div class="ois-form-layout-padding ois-form-layout" ng-cloak> <div flex> <fieldset> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'main.searchlabel\' | translate}}</legend> <form name="studentGroupAbsenceForm" novalidate> <div layout="row"> <md-input-container flex="45" flex-sm="100" flex-xs="100"> <label class="textInput">{{\'groupAbsence.studyYear\' | translate}}</label> <hois-select ng-model="criteria.studyYear" values="formState.studyYears" ng-change="studyYearChanged(true)" required></hois-select> </md-input-container> <div ng-if="auth.isAdmin()" flex="50" flex-offset="5" flex-sm="100" flex-xs="100"> <hois-autocomplete flex ng-model="criteria.studentGroupObject" method="studentgroups" name="studentGroup" label="groupAbsence.studentGroup" additional-query-params="{higher: false}" required></hois-autocomplete> </div> <md-input-container ng-if="auth.isTeacher()" flex="50" flex-offset="5" flex-sm="100" flex-xs="100"> <label class="textInput">{{\'groupAbsence.studentGroup\' | translate}}</label> <md-select ng-model="criteria.studentGroup" required> <md-option ng-value="studentGroup.id" ng-repeat="studentGroup in formState.studentGroups | orderBy: currentLanguageNameField()"> {{currentLanguageNameField(studentGroup)}} </md-option> </md-select> </md-input-container> </div> <div layout="row"> <md-input-container flex="45" flex-sm="100" flex-xs="100"> <label class="textInput">{{\'groupAbsence.studyWeek\' | translate}}</label> <md-select ng-model="criteria.studyWeek" ng-change="studyWeekChanged()" required> <md-option ng-value="week" ng-repeat="week in formState.studyWeeks | orderBy: \'nr\'"> {{week.start | hoisDate}}-{{week.end | hoisDate}} </md-option> </md-select> </md-input-container> </div> <div layout="row"> <md-button class="md-raised md-primary" ng-click="search()">{{\'main.button.search\' | translate}}</md-button> <md-button class="md-raised" ng-click="clearCriteria()">{{\'main.button.clear\' | translate}}</md-button> </div> <div flex-xs="0" flex-gt-xs="0" flex-gt-sm="50"></div> </form> </fieldset> </div> <span ng-if="content.students.length > 0"> <div>&nbsp;</div> <div flex="100" layout="row" layout-align="end start" class="common-label" md-colors="{color: \'background-400\'}"> <span ng-repeat="a in formState.absenceOptions"> <span ng-if="!$first">|</span> {{::a.value.toUpperCase()}} - {{currentLanguageNameField(a)}} </span> </div> </span> <div flex ng-if="content.students.length > 0"> <md-table-container> <table class="student-group-absence-table"> <thead> <tr> <th width="15%"></th> <th ng-if="journalsByDateCount(date) > 0" ng-repeat="date in content.dates" colspan="{{journalsByDateCount(date)}}">{{date | hoisDate}}</th> </tr> <tr> <th>{{\'groupAbsence.student\' | translate}}</th> <th ng-repeat="journal in journals"> <a ng-if="journal.id" ng-href="#/journal/{{journal.id}}/view" class="md-primary change-button">{{currentLanguageNameField(journal)}}</a> </th> </tr> </thead> <tbody> <tr ng-repeat="student in content.students" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td>{{student.nameEt}}</td> <td ng-repeat="journal in journals"> <div layout="row" layout-sm="column" layout-xs="column" layout-align="center center"> <div ng-repeat="absence in studentAbsences[student.id][journal.id][journal.date]" style="margin-right: 10px"> <div ng-if="absence.length === 1 && !absence[0].lessonNr"> <md-input-container> <hois-select ng-model="absence[0].absence" values="formState.absenceOptions" aria-label="absence" model-value-attr="code" show-property="value" value-property="code" ng-change="absenceChanged(absence[0])" required></hois-select> </md-input-container> </div> <div ng-if="absence.length > 1 || absence[0].lessonNr"> <div layout="column" ng-repeat="lessonAbsence in absence | orderBy: \'lessonNr\'"> <div layout="row"> <div style="line-height: 48px">{{lessonAbsence.lessonNr}}</div> <md-input-container> <hois-select ng-model="lessonAbsence.absence" values="formState.absenceOptions" aria-label="absence" model-value-attr="code" show-property="value" value-property="code" ng-change="lessonAbsenceChanged(lessonAbsence)" required></hois-select> </md-input-container> </div> </div> </div> </div> </div> </td> </tr> </tbody> </table> </md-table-container> </div> </div>'),a.put("studentAbsence/absence.search.html",'<div class="ois-form-layout-padding ois-form-layout" ng-cloak> <div layout="column"> <fieldset> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'main.searchlabel\' | translate}}</legend> <form name="absencesSearchForm" ng-submit="loadData()" novalidate class="nomargin"> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="45" flex-sm="100" flex-xs="100"> <label>{{\'absence.studyYear\' | translate}}</label> <hois-select ng-model="criteria.studyYear" ng-change="studyYearChanged()" values="studyYears" required></hois-select> </md-input-container> <md-input-container flex flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'absence.studyPeriod\' | translate}}</label> <md-select ng-model="criteria.studyPeriod"> <md-option ng-value="null"></md-option> <md-option ng-repeat="studyPeriod in studyPeriods | filter: filterByStudyYear(criteria.studyYear)" ng-value="studyPeriod.id"> {{ currentLanguageNameField(studyPeriod) }} </md-option> </md-select> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="45" flex-sm="100" flex-xs="100"> <label>{{\'absence.curriculumVersion\' | translate}}</label> <hois-select ng-model="criteria.curriculumVersions" type="curriculumversion" multiple></hois-select> </md-input-container> <md-input-container flex flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'absence.studentGroup\' | translate}}</label> <input ng-model="criteria.studentGroupCode" type="text" md-maxlength="255"> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="45" flex-sm="100" flex-xs="100"> <label>{{\'absence.student\' | translate}}</label> <input ng-model="criteria.studentName" type="text" md-maxlength="255"> </md-input-container> <md-input-container flex flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'absence.status\' | translate}}</label> <md-select ng-model="criteria.status" ng-change="statusChanged()"> <md-option ng-value="null"></md-option> <md-option ng-value="\'accepted\'">{{ \'absence.isAccepted\' | translate }}</md-option> <md-option ng-value="\'isNotAccepted\'">{{ \'absence.isNotAccepted\' | translate }}</md-option> <md-option ng-value="\'rejected\'">{{ \'absence.isRejected\' | translate }}</md-option> </md-select> </md-input-container> </div> <div layout="row" layout-sm="row" layout-xs="column"> <md-button type="submit" class="md-raised md-primary">{{\'main.button.search\' | translate}}</md-button> <md-button class="md-raised" ng-click="clearCriteria()">{{\'main.button.clear\' | translate}}</md-button> </div> </form> </fieldset> <md-table-container ng-cloak layout-padding> <table md-table md-progress="tabledata.$promise"> <thead md-head md-order="criteria.order" md-on-reorder="loadData"> <tr md-row> <th md-column md-order-by="p.lastname,p.firstname">{{\'absence.student\' | translate}}</th> <th md-column md-order-by="sa.valid_from">{{\'absence.absenceFrom\' | translate}}</th> <th md-column md-order-by="sa.valid_thru">{{\'absence.absenceThru\' | translate}}</th> <th md-column md-order-by="sa.cause">{{\'absence.absenceCause\' | translate}}</th> <th md-column md-order-by="sa.inserted_by">{{\'absence.applicant\' | translate}}</th> <th md-column md-order-by="sa.is_accepted, sa.is_rejected">{{\'absence.status\' | translate}}</th> <th md-column>{{\'absence.absenceAcceptor\' | translate}}</th> <th md-column></th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="row in tabledata.content" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell class="one-row"> <a ng-href="#/students/{{row.student.id}}/main">{{currentLanguageNameField(row.student)}}</a> </td> <td md-cell>{{row.validFrom | hoisDate}}</td> <td md-cell>{{row.validThru | hoisDate}}</td> <td md-cell>{{::row.cause}}</td> <td md-cell>{{::row.applicant}}</td> <td md-cell> <span ng-if="row.isAccepted">{{\'absence.isAccepted\' | translate}}</span> <span ng-if="row.isRejected">{{\'absence.isRejected\' | translate}}</span> <span ng-if="!row.isAccepted && !row.isRejected">{{\'absence.isNotAccepted\' | translate}}</span> </td> <td md-cell>{{row.acceptor}}</td> <td md-cell> <md-button ng-if="row.canAccept" md-no-ink class="md-primary change-button" ng-click="accept(row)">{{\'absence.accept\' | translate}}</md-button> <md-button ng-if="row.canAccept" md-no-ink class="md-primary change-button" ng-click="acceptByLessons(row)">{{\'absence.acceptByLessons\' | translate}}</md-button> <md-button ng-if="row.isAccepted && row.isLessonAbsence" md-no-ink class="md-primary change-button" ng-click="viewAcceptedLessons(row)">{{\'absence.viewAcceptedLessons\' | translate}}</md-button> <md-button ng-if="row.canReject" md-no-ink class="md-primary change-button" ng-click="reject(row)">{{\'absence.reject\' | translate}}</md-button> </td> </tr> </tbody> </table> </md-table-container> <md-table-pagination md-limit="criteria.size" md-limit-options="[10, 20, 50]" md-page="criteria.page" md-total="{{tabledata.totalElements}}" md-on-paginate="loadData" md-label="{page: \'{{\'main.page\' | translate}}:\', rowsPerPage: \'{{\'main.rowPerPage\' | translate}}:\', of: \'{{\'main.of\' | translate}}\' }" md-page-select></md-table-pagination> </div> </div>'),
a.put("studentGroup/student.group.edit.html",'<div layout="column" class="ois-form-layout-padding"> <div> <form name="studentGroupForm"> <div layout="column"> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="45" flex-sm="100" flex-xs="100"> <label>{{\'studentGroup.code\' | translate}}</label> <input ng-model="record.code" name="code" type="text" required md-maxlength="100"> </md-input-container> <md-input-container flex="25" flex-sm="100" flex-xs="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label class="textInput">{{\'studentGroup.course\' | translate}}</label> <input ng-model="record.course" name="course" type="number" required min="1" ng-max="formState.studyPeriodInYears"> </md-input-container> <md-input-container flex="20" flex-sm="100" flex-xs="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label class="textInput">{{\'studentGroup.places\' | translate}}</label> <input ng-model="record.places" name="places" ng-readonly="formState.readonly" type="number" min="0"> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <div flex="45" flex-sm="100" flex-xs="100" ng-if="!formState.readonly"> <hois-autocomplete ng-model="record.curriculum" method="curriculums" name="curriculum" label="studentGroup.curriculumRequired" md-selected-item-change="curriculumChanged()" required></hois-autocomplete> </div> <md-input-container ng-if="formState.readonly" flex="45" flex-sm="100" flex-xs="100" class="readonly top-margin"> <label ng-if="record.id" class="textInput">{{\'studentGroup.curriculumRequired\' | translate}}</label> <hois-value value="currentLanguageNameField(record.curriculum)"></hois-value> </md-input-container> <md-input-container flex="50" flex-sm="100" flex-xs="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label class="textInput">{{formState.curriculumVersionLabel | translate}}</label> <hois-select ng-model="record.curriculumVersion" name="curriculumVersion" ng-disabled="formState.readonly" values="formState.curriculumVersions" ng-change="curriculumVersionChanged()" ng-required="formState.onlyvocational || formState.isVocational"></hois-select> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="45" flex-sm="100" flex-xs="100"> <label class="textInput">{{\'studentGroup.studyForm\' | translate}}</label> <hois-classifier-select ng-model="record.studyForm" name="studyForm" ng-disabled="formState.readonly" main-classifier-code="OPPEVORM" show-only-values="formState.studyForms" model-value-attr="code" required></hois-classifier-select> </md-input-container> <md-input-container flex="25" flex-sm="100" flex-xs="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label class="textInput">{{\'studentGroup.language\' | translate}}</label> <hois-classifier-select ng-model="record.language" name="language" ng-disabled="formState.readonly" main-classifier-code="OPPEKEEL" show-only-values="formState.languages" model-value-attr="code" required></hois-classifier-select> </md-input-container> <md-input-container flex="20" flex-sm="100" flex-xs="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0" class="readonly top-margin"> <label>{{\'student.studyLevel\' | translate}}</label> <hois-classifier-value ng-model="formState.origStudyLevel" main-classifier-code="OPPEASTE"></hois-classifier-value> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column" ng-if="formState.onlyvocational || formState.isVocational"> <div flex="45" flex-sm="100" flex-xs="100"> <hois-autocomplete ng-model="record.teacher" method="teachers" name="teacher" label="studentGroup.teacher"></hois-autocomplete> </div> <md-input-container flex="50" flex-sm="100" flex-xs="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label class="textInput">{{\'studentGroup.speciality\' | translate}}</label> <hois-classifier-select ng-model="record.speciality" name="speciality" ng-disabled="formState.readonly" main-classifier-code="SPETSKUTSE" show-only-values="formState.specialities" model-value-attr="code"></hois-classifier-select> </md-input-container> </div> <div layout="row"> <div flex="33"> <md-input-container flex> <label>{{\'main.validFrom\' | translate}}</label> <md-datepicker ng-model="record.validFrom"></md-datepicker> </md-input-container> <md-input-container flex> <label>{{\'main.validThru\' | translate}}</label> <md-datepicker ng-model="record.validThru" ng-change="validThruChanged()" md-min-date="record.validFrom"></md-datepicker> </md-input-container> </div> </div> </div> </form> <div>&nbsp;</div> <md-table-container ng-if="formState.students"> <table md-table md-row-select="!record.id" multiple ng-model="formState.selectedStudents"> <thead md-head md-order="formState.order"> <tr md-row> <th md-column>{{\'main.rowno\' | translate}}</th> <th md-column md-order-by="rowno">{{\'studentGroup.studentname\' | translate}}</th> <th md-column md-order-by="idcode">{{\'studentGroup.idcode\' | translate}}</th> <th md-column md-order-by="curriculumVersion.{{currentLanguageNameField()}}">{{formState.curriculumVersionLabel | translate}}</th> <th md-column md-order-by="status.{{currentLanguageNameField()}}">{{\'studentGroup.studentstatus\' | translate}}</th> <th></th> </tr> </thead> <tbody md-body> <tr md-row md-select="row" md-select-id="id" md-auto-select ng-repeat="row in formState.students | orderBy: formState.order" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell>{{::row.rowno}}</td> <td md-cell> <a ng-disabled="!record.id" class="md-primary" ng-href="#/students/{{::row.id}}/main">{{::row.fullname}}</a> </td> <td md-cell>{{::row.idcode}}</td> <td md-cell>{{currentLanguageNameField(row.curriculumVersion)}}</td> <td md-cell>{{currentLanguageNameField(row.status)}}</td> <td md-cell> <a ng-if="record.id" md-no-ink class="remove" ng-click="removeStudent(row.id)">&times;</a> </td> </tr> </tbody> </table> </md-table-container> <md-button ng-click="update()" class="md-raised md-primary">{{\'main.button.save\' | translate}}</md-button> <md-button ng-click="delete()" ng-if="record.id && !(formState.students && formState.students.length > 0)" class="md-raised">{{\'main.button.delete\' | translate}}</md-button> <md-button ng-href="#/studentgroups" class="md-raised">{{\'main.button.back\' | translate}}</md-button> <md-button ng-click="addStudents()" ng-if="record.id && formState.canAddStudents" class="md-raised">{{\'studentGroup.addStudents\' | translate}}</md-button> </div> </div>'),a.put("studentGroup/student.group.list.html",'<div class="ois-form-layout-padding ois-form-layout" ng-cloak> <div flex> <form ng-submit="loadData()" novalidate> <fieldset tabindex="1"> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'main.searchlabel\' | translate}}</legend> <div flex layout="column"> <md-input-container flex> <label class="textInput">{{\'studentGroup.code\' | translate}}</label> <input ng-model="criteria.code" name="code" type="text" autofocus> </md-input-container> <div layout="row" flex> <div flex="45"> <hois-autocomplete ng-model="criteria.curriculum" method="curriculums" name="curriculum" label="studentGroup.curriculum"></hois-autocomplete> </div> <md-input-container flex="50" flex-offset="5"> <label>{{formState.curriculumVersionLabel | translate}}</label> <hois-select ng-model="criteria.curriculumVersion" values="formState.curriculumVersions" name="curriculumVersion" ng-change="curriculumVersionChanged()" multiple></hois-select> </md-input-container> </div> <div layout="row" flex> <md-input-container flex="45"> <label>{{\'studentGroup.studyForm\' | translate}}</label> <hois-select ng-model="criteria.studyForm" name="studyForm" value-property="code" values="formState.allStudyForms" filter-values="formState.hiddenStudyForms" multiple></hois-select> </md-input-container> <hois-autocomplete label="studentGroup.teacher" ng-if="!formState.onlyhigher" ng-model="criteria.teacher" method="teachers" flex="50" flex-offset="5"></hois-autocomplete> </div> <div layout="row" flex="45"> <md-input-container> <label>{{\'main.validFrom\' | translate}}</label> <md-datepicker ng-model="criteria.validFrom"></md-datepicker> </md-input-container> <md-input-container flex-offset="5"> <label>{{\'main.validThru\' | translate}}</label> <md-datepicker ng-model="criteria.validThru" md-min-date="criteria.validFrom"></md-datepicker> </md-input-container> </div> <div layout="row" flex> <md-input-container class="md-block"> <md-checkbox ng-model="criteria.isValid" name="isValid">{{\'studentGroup.isValid\' | translate}}</md-checkbox> </md-input-container> </div> <div layout="row"> <md-button type="submit" class="md-raised md-primary">{{\'main.button.search\' | translate}}</md-button> <md-button class="md-raised" ng-click="clearCriteria()">{{\'main.button.clear\' | translate}}</md-button> <md-button class="md-raised" ng-if="isAuthorized(\'ROLE_OIGUS_M_TEEMAOIGUS_OPPERYHM\')" ng-href="#/studentgroups/new">{{\'main.button.create\' | translate}}</md-button> </div> </div> </fieldset> </form> </div> </div> <div layout-padding> <div flex> <md-table-container> <table md-table md-progress="tabledata.$promise"> <thead md-head md-order="criteria.order" md-on-reorder="loadData"> <tr md-row> <th md-column md-order-by="code">{{\'studentGroup.code\' | translate}}</th> <th md-column md-order-by="{{currentLanguage()===\'en\' ? \'curriculum.nameEn\' : \'curriculum.nameEt\'}}">{{\'studentGroup.curriculum\' | translate}}</th> <th md-column md-order-by="{{currentLanguage()===\'en\' ? \'studyForm.nameEn\' : \'studyForm.nameEt\'}}">{{\'studentGroup.studyForm\' | translate}}</th> <th md-column md-order-by="12" ng-if="!formState.onlyhigher">{{\'studentGroup.teacher\' | translate}}</th> <th md-column md-numeric md-order-by="course">{{\'studentGroup.course\' | translate}}</th> <th md-column md-numeric>{{\'studentGroup.studentCount\' | translate}}</th> <th md-column md-order-by="validFrom">{{\'main.validFrom\' | translate}}</th> <th md-column md-order-by="validThru">{{\'main.validThru\' | translate}}</th> <th></th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="row in tabledata.content" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell><a ng-href="#/studentgroups/{{::row.id}}/view">{{::row.code}}</a></td> <td md-cell>{{currentLanguageNameField(row.curriculum)}}</td> <td md-cell>{{currentLanguageNameField(row.studyForm)}}</td> <td md-cell ng-if="!formState.onlyhigher">{{row.teacher}}</td> <td md-cell>{{::row.course}}</td> <td md-cell>{{::row.studentCount}}</td> <td md-cell>{{::row.validFrom | hoisDate}}</td> <td md-cell>{{::row.validThru | hoisDate}}</td> <td md-cell> <md-button md-no-ink class="md-primary change-button" ng-if="isAuthorized(\'ROLE_OIGUS_M_TEEMAOIGUS_OPPERYHM\')" ng-href="#/studentgroups/{{::row.id}}/edit">{{\'main.button.change\' | translate}}</md-button> </td> </tr> </tbody> </table> </md-table-container> <md-table-pagination md-limit="criteria.size" md-limit-options="[10, 20, 50]" md-page="criteria.page" md-total="{{tabledata.totalElements}}" md-on-paginate="loadData" md-label="{page: \'{{\'main.page\' | translate}}:\', rowsPerPage: \'{{\'main.rowPerPage\' | translate}}:\', of: \'{{\'main.of\' | translate}}\'}" md-page-select></md-table-pagination> </div> </div>'),a.put("studentGroup/student.group.view.html",'<div layout="column" class="ois-form-layout-padding form-readonly"> <div> <div layout="column"> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="45" flex-sm="100" flex-xs="100"> <label>{{\'studentGroup.code\' | translate}}</label> <hois-value value="record.code"></hois-value> </md-input-container> <md-input-container flex="25" flex-sm="100" flex-xs="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label class="textInput">{{\'studentGroup.course\' | translate}}</label> <hois-value value="record.course.toString()"></hois-value> </md-input-container> <md-input-container flex="20" flex-sm="100" flex-xs="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label class="textInput">{{\'studentGroup.places\' | translate}}</label> <hois-value value="record.places.toString()"></hois-value> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="45" flex-sm="100" flex-xs="100"> <label class="textInput">{{\'studentGroup.curriculum\' | translate}}</label> <hois-value value="currentLanguageNameField(record.curriculum)"></hois-value> </md-input-container> <md-input-container flex="50" flex-sm="100" flex-xs="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label class="textInput">{{formState.curriculumVersionLabel | translate}}</label> <hois-value value="currentLanguageNameField(formState.curriculumVersion)"></hois-value> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="45" flex-sm="100" flex-xs="100"> <label class="textInput">{{\'studentGroup.studyForm\' | translate}}</label> <hois-classifier-value ng-model="record.studyForm" main-classifier-code="OPPEVORM"></hois-classifier-value> </md-input-container> <md-input-container flex="25" flex-sm="100" flex-xs="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label class="textInput">{{\'studentGroup.language\' | translate}}</label> <hois-classifier-value ng-model="record.language" main-classifier-code="OPPEKEEL"></hois-classifier-value> </md-input-container> <md-input-container flex="20" flex-sm="100" flex-xs="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'student.studyLevel\' | translate}}</label> <hois-classifier-value ng-model="formState.origStudyLevel" main-classifier-code="OPPEASTE"></hois-classifier-value> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column" ng-if="formState.onlyvocational || formState.isVocational"> <md-input-container flex="45" flex-sm="100" flex-xs="100"> <label class="textInput">{{\'studentGroup.teacher\' | translate}}</label> <hois-value value="record.teacher.nameEt"></hois-value> </md-input-container> <md-input-container flex="50" flex-sm="100" flex-xs="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label class="textInput">{{\'studentGroup.speciality\' | translate}}</label> <hois-classifier-value ng-model="record.speciality" main-classifier-code="SPETSKUTSE"></hois-classifier-value> </md-input-container> </div> <div layout="row"> <div layout="column" flex="45"> <br> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex flex-sm="100" flex-xs="100"> <label>{{\'main.validFrom\' | translate}}</label> <hois-value value="record.validFrom | hoisDate"></hois-value> </md-input-container> <md-input-container flex flex-sm="100" flex-xs="100" flex-offset-xs="0" flex-offset-sm="0" flex-offset="5"> <label>{{\'main.validThru\' | translate}}</label> <hois-value value="record.validThru | hoisDate"></hois-value> </md-input-container> </div> </div> </div> </div> <div>&nbsp;</div> <md-table-container ng-if="record.members && record.members.length > 0"> <table md-table> <thead md-head md-order="formState.order"> <tr md-row> <th md-column>{{\'main.rowno\' | translate}}</th> <th md-column md-order-by="rowno">{{\'studentGroup.studentname\' | translate}}</th> <th md-column ng-if="showPersonalData" md-order-by="idcode">{{\'studentGroup.idcode\' | translate}}</th> <th md-column md-order-by="curriculumVersion.{{currentLanguageNameField()}}">{{formState.curriculumVersionLabel | translate}}</th> <th md-column md-order-by="status.{{currentLanguageNameField()}}">{{\'studentGroup.studentstatus\' | translate}}</th> </tr> </thead> <tbody md-body> <tr md-row md-select="row" ng-repeat="row in record.members | orderBy: formState.order" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell>{{::row.rowno}}</td> <td md-cell> <a class="md-primary" ng-if="showPersonalData" ng-href="#/students/{{::row.id}}/main">{{::row.fullname}}</a> <span ng-if="!showPersonalData">{{::row.fullname}}</span> </td> <td md-cell ng-if="showPersonalData">{{::row.idcode}}</td> <td md-cell>{{currentLanguageNameField(row.curriculumVersion)}}</td> <td md-cell>{{currentLanguageNameField(row.status)}}</td> </tr> </tbody> </table> </md-table-container> <md-button ng-href="#/studentgroups/{{record.id}}/edit" class="md-raised md-primary" ng-if="canEdit">{{\'main.button.change\' | translate}}</md-button> <md-button ng-click="back(\'#/studentgroups\')" class="md-raised">{{\'main.button.back\' | translate}}</md-button> </div> </div>'),a.put("studentGroup/student.select.dialog.html",'<md-dialog aria-label="grade add dialog" flex="60" flex-sm="100" flex-xs="100"> <form name="studentGroupStudentForm" novalidate ng-cloak> <md-dialog-content> <div class="md-dialog-content"> <md-table-container> <table md-table md-row-select multiple ng-model="formState.selectedStudents"> <thead md-head md-order="formState.order"> <tr md-row> <th md-column md-order-by="rowno">{{\'studentGroup.studentname\' | translate}}</th> <th md-column md-order-by="idcode">{{\'studentGroup.idcode\' | translate}}</th> <th md-column md-order-by="curriculumVersion.{{$root.currentLanguageNameField()}}">{{formState.curriculumVersionLabel | translate}}</th> <th md-column md-order-by="status.{{$root.currentLanguageNameField()}}">{{\'studentGroup.studentstatus\' | translate}}</th> </tr> </thead> <tbody md-body> <tr md-row md-select="row" md-select-id="id" md-auto-select ng-repeat="row in formState.students | orderBy: formState.order" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell>{{::row.fullname}}</td> <td md-cell>{{::row.idcode}}</td> <td md-cell>{{$root.currentLanguageNameField(row.curriculumVersion)}}</td> <td md-cell>{{$root.currentLanguageNameField(row.status)}}</td> </tr> </tbody> </table> </md-table-container> </div> </md-dialog-content> <md-dialog-actions layout="row" layout-align="start center"> <md-button ng-click="select()" class="md-raised md-primary">{{\'main.button.add\' | translate}}</md-button> <md-button ng-click="cancel()" class="md-raised">{{\'main.button.close\' | translate}}</md-button> </md-dialog-actions> </form> </md-dialog>'),a.put("studentGroupYearTransfer/student.group.year.transfer.html",'<div class="ois-form-layout-padding ois-form-layout" ng-cloak> <div flex> <div layout="row"> <md-input-container flex="20" flex-sm="100" flex-xs="100"> <label>{{\'studentGroupYearTransfer.studyYear\' | translate}}</label> <hois-select ng-model="studyYear" ng-change="studyYearChanged()" values="studyYears" required></hois-select> </md-input-container> </div> <div ng-show="studyYear"> <form name="transferForm"> <div class="label-with-vertical-margin"> {{\'studentGroupYearTransfer.conditionsDescription\' | translate}}: </div> <div> <md-checkbox ng-model="academicLeave" ng-disabled="calculated" aria-label="{{\'studentGroupYearTransfer.academicLeave\' | translate}}"> {{\'studentGroupYearTransfer.academicLeave\' | translate}} </md-checkbox> </div> <div layout="row"> <md-input-container flex="33" flex-sm="100" flex-xs="100"> <label>{{\'studentGroupYearTransfer.academicLeaveDays\' | translate}}</label> <input type="number" ng-model="academicLeaveDays" min="0" ng-disabled="calculated"> </md-input-container> </div> <div> <md-checkbox ng-model="abroadStudies" ng-disabled="calculated" aria-label="{{\'studentGroupYearTransfer.abroadStudies\' | translate}}"> {{\'studentGroupYearTransfer.abroadStudies\' | translate}} </md-checkbox> </div> <div layout="row"> <md-input-container flex="33" flex-sm="100" flex-xs="100"> <label>{{\'studentGroupYearTransfer.abroadStudiesDays\' | translate}}</label> <input type="number" ng-model="abroadStudiesDays" min="0" ng-disabled="calculated"> </md-input-container> </div> <div class="label-with-vertical-margin" ng-show="checkGroupValidThru"> {{\'studentGroupYearTransfer.checkGroupValidThru\' | translate}}: {{checkGroupValidThru}} </div> <div layout="row"> <md-table-container flex="100"> <table md-table> <thead md-head> <tr md-row> <th md-column> <md-checkbox ng-model="multiSelect" ng-change="multiSelectChanged()" aria-label="multiSelect"></md-checkbox> </th> <th md-column>{{\'studentGroupYearTransfer.studentGroup\' | translate}}</th> <th md-column>{{\'studentGroupYearTransfer.course\' | translate}}</th> <th md-column>{{\'studentGroupYearTransfer.newCode\' | translate}}</th> <th md-column>{{\'studentGroupYearTransfer.newCourse\' | translate}}</th> <th md-column>{{\'studentGroupYearTransfer.curriculum\' | translate}}</th> <th md-column>{{\'studentGroupYearTransfer.allStudents\' | translate}}</th> <th md-column>{{\'studentGroupYearTransfer.suitableStudents\' | translate}}</th> <th md-column>{{\'studentGroupYearTransfer.unsuitableStudents\' | translate}}</th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="row in studentGroups" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell> <md-checkbox ng-model="row.selected" ng-if="!row.transfered" ng-change="selectChanged()" aria-label="selected"></md-checkbox> </td> <td md-cell>{{::row.oldCode}}</td> <td md-cell>{{::row.oldCourse}}</td> <td md-cell> <md-input-container ng-if="!row.transfered"> <input type="text" ng-model="row.newCode" ng-required="row.selected" aria-label="newCode"> </md-input-container> <span ng-if="row.transfered">{{row.newCode}}</span> </td> <td md-cell>{{::row.newCourse}}</td> <td md-cell>{{::row.curriculumName}}</td> <td md-cell>{{row.relatedStudents}}</td> <td md-cell> <a ng-click="viewMatchingStudents(row)">{{row.suitableStudents}}</a> </td> <td md-cell> <a ng-click="viewMismatchingStudents(row)">{{row.unsuitableStudents}}</a> </td> </tr> </tbody> </table> </md-table-container> </div> <div layout="row"> <md-button class="md-raised" ng-if="isAuthorized(\'ROLE_OIGUS_M_TEEMAOIGUS_UUDE_AASTASSE\')" ng-show="canTransfer" ng-class="{\'md-primary\': !calculated}" ng-click="calculate()"> {{\'main.button.calculate\' | translate}} </md-button> </div> <div ng-show="calculated"> <div layout="row"> <fieldset flex="100"> <legend>{{\'studentGroupYearTransfer.mismatchingStudents\' | translate}}</legend> <table md-table class="secondary-table"> <thead md-head> <tr md-row> <th md-column>{{\'student.name\' | translate}}</th> <th md-column>{{\'studentGroupYearTransfer.curriculum\' | translate}}</th> <th md-column>{{\'studentGroupYearTransfer.reason\' | translate}}</th> <th md-column>{{\'studentGroupYearTransfer.course\' | translate}}</th> <th md-column>{{\'studentGroupYearTransfer.studentGroup\' | translate}}</th> <th md-column>{{\'studentGroupYearTransfer.newGroup\' | translate}}</th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="row in mismatchingStudents" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell>{{::row.name}}</td> <td md-cell>{{::row.group.curriculumName}}</td> <td md-cell>{{currentLanguageNameField(row.mismatchCode)}}</td> <td md-cell>{{::row.group.oldCourse}}</td> <td md-cell>{{::row.group.oldCode}}</td> <td md-cell> <md-input-container> <hois-select ng-model="row.newGroup" values="studentGroups" show-property="oldCode" required aria-label="newGroup"></hois-select> </md-input-container> </td> </tr> </tbody> </table> </fieldset> </div> <div layout="row"> <md-button class="md-raised md-primary" ng-click="transfer()">{{\'studentGroupYearTransfer.button.transfer\' | translate}}</md-button> </div> </div> </form> </div> </div> </div>'),a.put("studentGroupYearTransfer/students.match.dialog.html",'<md-dialog aria-label="students dialog" flex="50"> <md-toolbar> <div class="md-toolbar-tools"> <h2 flex>{{"studentGroupYearTransfer.suitableStudents" | translate}}</h2> <md-button class="md-icon-button" ng-click="cancel()"> <md-icon md-font-set="material-icons">close</md-icon> </md-button> </div> </md-toolbar> <md-dialog-content> <div class="md-dialog-content"> <div layout="column" flex> <md-table-container> <table md-table> <thead md-head> <tr md-row> <th md-column>{{\'student.name\' | translate}}</th> <th md-column>{{\'studentGroupYearTransfer.studentGroup\' | translate}}</th> <th md-column>{{\'studentGroupYearTransfer.curriculum\' | translate}}</th> <th md-column>{{\'studentGroupYearTransfer.course\' | translate}}</th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="row in students" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell>{{::row}}</td> <td md-cell>{{::studentGroup.oldCode}}</td> <td md-cell>{{::studentGroup.curriculumName}}</td> <td md-cell>{{::studentGroup.oldCourse}}</td> </tr> </tbody> </table> </md-table-container> </div> </div> </md-dialog-content> <md-dialog-actions layout="row" layout-align="start start"> <md-button class="md-raised" ng-click="cancel()">{{"main.button.close" | translate}}</md-button> </md-dialog-actions> </md-dialog>'),a.put("studentGroupYearTransfer/students.mismatch.dialog.html",'<md-dialog aria-label="students dialog" flex="50"> <md-toolbar> <div class="md-toolbar-tools"> <h2 flex>{{"studentGroupYearTransfer.unsuitableStudents" | translate}}</h2> <md-button class="md-icon-button" ng-click="cancel()"> <md-icon md-font-set="material-icons">close</md-icon> </md-button> </div> </md-toolbar> <md-dialog-content> <div class="md-dialog-content"> <div layout="column" flex> <md-table-container> <table md-table> <thead md-head> <tr md-row> <th md-column>{{\'studentGroupYearTransfer.studentGroup\' | translate}}</th> <th md-column>{{\'studentGroupYearTransfer.curriculum\' | translate}}</th> <th md-column>{{\'studentGroupYearTransfer.course\' | translate}}</th> <th md-column>{{\'student.name\' | translate}}</th> <th md-column>{{\'studentGroupYearTransfer.reason\' | translate}}</th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="row in students" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell>{{::studentGroup.oldCode}}</td> <td md-cell>{{::studentGroup.curriculumName}}</td> <td md-cell>{{::studentGroup.oldCourse}}</td> <td md-cell>{{::row.name}}</td> <td md-cell>{{currentLanguageNameField(row.mismatchCode)}}</td> </tr> </tbody> </table> </md-table-container> </div> </div> </md-dialog-content> <md-dialog-actions layout="row" layout-align="start start"> <md-button class="md-raised" ng-click="cancel()">{{"main.button.close" | translate}}</md-button> </md-dialog-actions> </md-dialog>'),a.put("studentRepresentative/representative.application.create.html",'<div layout="column" class="ois-form-layout-padding ois-form-layout" ng-cloak> <div> <form name="studentRepresentativeApplicationCreateForm" novalidate> <md-input-container class="md-block"> <label>{{\'student.representative.studentIdcode\' | translate}}</label> <hois-idcode-lookup ng-model="record.studentIdcode" name="idcode" role="activestudent" after-lookup="lookupPerson(response)" after-failed-lookup="lookupFailure(response)" required></hois-idcode-lookup> </md-input-container> <md-input-container class="md-block"> <label>{{\'student.representative.firstname\' | translate}}</label> <input ng-model="record.firstname" name="firstname" type="text" readonly> </md-input-container> <md-input-container class="md-block"> <label>{{\'student.representative.lastname\' | translate}}</label> <input ng-model="record.lastname" name="lastname" type="text" readonly> </md-input-container> <md-input-container class="md-block"> <label>{{\'student.representative.relation\' | translate}}</label> <hois-classifier-select ng-model="record.relation" name="relation" main-classifier-code="OPPURESINDAJA" required model-value-attr="code"></hois-classifier-select> </md-input-container> <md-input-container class="md-block"> <label>{{\'student.representative.phone\' | translate}}</label> <input ng-model="record.phone" name="phone" type="text" required md-maxlength="100"> </md-input-container> <md-input-container class="md-block"> <label>{{\'student.representative.email\' | translate}}</label> <input ng-model="record.email" name="email" type="text" required md-maxlength="255"> </md-input-container> </form> <md-button ng-click="apply()" class="md-raised md-primary">{{\'student.representative.application.apply\' | translate}}</md-button> <md-button ng-click="back(\'#/\')" class="md-raised">{{\'main.button.back\' | translate}}</md-button> </div> </div>'),a.put("studentRepresentative/representative.application.decline.dialog.html",'<md-dialog aria-label="grade add dialog" flex="30" flex-xs="100"> <form name="studentRepresentativeApplicationDeclineForm" novalidate ng-cloak> <md-dialog-content> <div class="md-dialog-content"> <md-input-container class="md-block"> <label>{{\'student.representative.application.rejectReason\' | translate}}</label> <textarea ng-model="record.rejectReason" name="rejectReason" required md-maxlength="4000" md-autofocus></textarea> </md-input-container> </div> </md-dialog-content> <md-dialog-actions layout="row" layout-align="start center"> <md-button ng-click="decline()" class="md-raised md-primary">{{\'main.button.decline\' | translate}}</md-button> <md-button ng-click="cancel()" class="md-raised">{{\'main.button.close\' | translate}}</md-button> </md-dialog-actions> </form> </md-dialog>'),a.put("studentRepresentative/representative.application.list.html",'<div class="ois-form-layout-padding ois-form-layout" ng-cloak> <div flex> <fieldset> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'main.searchlabel\' | translate}}</legend> <form name="searchForm" ng-submit="searchForm.$valid && loadData()" novalidate class="nomargin"> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="45" flex-sm="100" flex-xs="100"> <label class="textInput">{{\'student.representative.application.applicantname\' | translate}}</label> <input ng-model="criteria.name" name="name" type="text" md-maxlength="255" autofocus> </md-input-container> <md-input-container flex="50" flex-sm="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label class="textInput">{{\'student.representative.application.applicantidcode\' | translate}}</label> <input ng-model="criteria.idcode" name="idcode" type="text" minlength="11" md-maxlength="11"> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="45" flex-sm="100" flex-xs="100"> <label>{{\'student.representative.application.status\' | translate}}</label> <hois-classifier-select ng-model="criteria.status" name="status" model-value-attr="code" main-classifier-code="AVALDUS_ESINDAJA_STAATUS"></hois-classifier-select> </md-input-container> </div> <div layout="row"> <md-button type="submit" class="md-raised md-primary">{{\'main.button.search\' | translate}}</md-button> <md-button class="md-raised" ng-click="clearCriteria()">{{\'main.button.clear\' | translate}}</md-button> </div> <div flex-xs="0" flex-gt-xs="0" flex-gt-sm="50"></div> </form> </fieldset> </div> </div> <div layout-padding> <div flex> <md-table-container> <table md-table md-progress="tabledata.$promise"> <thead md-head md-order="criteria.order" md-on-reorder="loadData"> <tr md-row> <th md-column md-order-by="person.lastname,person.firstname">{{\'student.representative.application.applicantname\' | translate}}</th> <th md-column md-order-by="person.idcode">{{\'student.representative.idcode\' | translate}}</th> <th md-column md-order-by="{{currentLanguage()===\'en\' ? \'relation.nameEn\' : \'relation.nameEt\'}}">{{\'student.representative.relation\' | translate}}</th> <th md-column md-order-by="person.phone">{{\'student.representative.phone\' | translate}}</th> <th md-column md-order-by="person.email">{{\'student.representative.email\' | translate}}</th> <th md-column md-order-by="inserted">{{\'student.representative.application.applied\' | translate}}</th> <th md-column md-order-by="{{currentLanguage()===\'en\' ? \'status.nameEn\' : \'status.nameEt\'}}">{{\'student.representative.application.status\' | translate}}</th> <th md-column ng-if="formState.status !== \'AVALDUS_ESINDAJA_STAATUS_E\'" md-order-by="changed">{{(formState.status === \'AVALDUS_ESINDAJA_STAATUS_K\' ? \'student.representative.application.confirmDate\' : (formState.status === \'AVALDUS_ESINDAJA_STAATUS_T\' ? \'student.representative.application.declineDate\' : \'student.representative.application.confirmDeclineDate\')) | translate}}</th> <th md-column md-order-by="student.person.lastname,student.person.firstname">{{\'student.name\' | translate}}</th> <th md-column md-order-by="student.person.idcode">{{\'student.idcode\' | translate}}</th> <th></th> <th></th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="row in tabledata.content" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell>{{::row.fullname}}</td> <td md-cell>{{::row.idcode}}</td> <td md-cell>{{currentLanguageNameField(row.relation)}}</td> <td md-cell>{{::row.phone}}</td> <td md-cell>{{::row.email}}</td> <td md-cell>{{::row.inserted | hoisDate}}</td> <td md-cell> <md-tooltip ng-if="row.status.code === \'AVALDUS_ESINDAJA_STAATUS_T\'">{{::row.rejectReason}}</md-tooltip> {{currentLanguageNameField(row.status)}} </td> <td md-cell ng-if="formState.status !== \'AVALDUS_ESINDAJA_STAATUS_E\'">{{(row.confirmDate || row.declineDate) | hoisDate}}</td> <td md-cell><a md-no-ink class="md-primary" ng-href="#/students/{{::row.studentId}}/main">{{::row.studentFullname}}</a></td> <td md-cell>{{::row.studentIdcode}}</td> <td md-cell> <md-button ng-if="row.status.code === \'AVALDUS_ESINDAJA_STAATUS_E\' && isAuthorized(\'ROLE_OIGUS_M_TEEMAOIGUS_ESINDAVALDUS\')" md-no-ink class="md-primary change-button" ng-click="accept(row)">{{\'main.button.confirm\' | translate}}</md-button> </td> <td md-cell> <md-button ng-if="row.status.code === \'AVALDUS_ESINDAJA_STAATUS_E\' && isAuthorized(\'ROLE_OIGUS_M_TEEMAOIGUS_ESINDAVALDUS\')" md-no-ink class="md-primary change-button" ng-click="decline(row)">{{\'main.button.decline\' | translate}}</md-button> </td> </tr> </tbody> </table> </md-table-container> <md-table-pagination md-limit="criteria.size" md-limit-options="[10, 20, 50]" md-page="criteria.page" md-total="{{tabledata.totalElements}}" md-on-paginate="loadData" md-label="{page: \'{{\'main.page\' | translate}}:\', rowsPerPage: \'{{\'main.rowPerPage\' | translate}}:\', of: \'{{\'main.of\' | translate}}\'}" md-page-select></md-table-pagination> </div> </div>'),
a.put("studentRepresentative/representative.edit.dialog.html",'<md-dialog aria-label="grade add dialog" flex="30" flex-xs="100"> <form name="studentRepresentativeEditForm" novalidate ng-cloak> <md-dialog-content> <div class="md-dialog-content"> <fieldset tabindex="1" ng-if="!record.id" class="form-readonly"> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'student.representative.student\' | translate}}</legend> <md-input-container class="md-block"> <label>{{\'student.representative.studentIdcode\' | translate}}</label> <hois-value value="formState.student.person.idcode"></hois-value> </md-input-container> <md-input-container class="md-block"> <label>{{\'student.name\' | translate}}</label> <hois-value value="formState.student.person.fullname"></hois-value> </md-input-container> </fieldset> <fieldset tabindex="2"> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'student.representative.data\' | translate}}</legend> <md-input-container class="md-block"> <label>{{\'student.representative.idcode\' | translate}}</label> <input type="text" name="idcode" ng-model="record.person.idcode" ng-blur="lookupPerson()" md-minlength="11" md-maxlength="11" ng-readonly="record.id" required md-autofocus="!record.id"> <div class="invalid" ng-show="studentRepresentativeEditForm.idcode.$error.notUnique"> {{\'student.representative.samewithstudent\' | translate}} </div> <div class="invalid" ng-show="studentRepresentativeEditForm.idcode.$error.estonianIdcode"> {{\'main.messages.error.estonianIdcode\' | translate}} </div> </md-input-container> <md-input-container class="md-block"> <label>{{\'student.representative.firstname\' | translate}}</label> <input ng-model="record.person.firstname" name="firstname" type="text" ng-readonly="record.id || formState.idcode" required md-maxlength="255"> </md-input-container> <md-input-container class="md-block"> <label>{{\'student.representative.lastname\' | translate}}</label> <input ng-model="record.person.lastname" name="lastname" type="text" ng-readonly="record.id || formState.idcode" required md-maxlength="255"> </md-input-container> <md-input-container class="md-block"> <label>{{\'student.representative.relation\' | translate}}</label> <hois-classifier-select ng-model="record.relation" name="relation" ng-disabled="record.id" main-classifier-code="OPPURESINDAJA" required model-value-attr="code"></hois-classifier-select> </md-input-container> <md-input-container class="md-block"> <label>{{\'student.representative.phone\' | translate}}</label> <input ng-model="record.person.phone" name="phone" type="text" required md-maxlength="100" md-autofocus="!record.id"> </md-input-container> <md-input-container class="md-block"> <label>{{\'student.representative.email\' | translate}}</label> <input ng-model="record.person.email" name="email" type="text" required md-maxlength="100"> </md-input-container> <md-checkbox ng-model="record.isStudentVisible" name="isStudentVisible" ng-disabled="isParent" ng-if="record.id"> {{\'student.representative.studentVisible\' | translate}} </md-checkbox> </fieldset> </div> </md-dialog-content> <md-dialog-actions layout="row" layout-align="start center"> <md-button ng-click="update()" class="md-raised md-primary">{{\'main.button.save\' | translate}}</md-button> <md-button ng-click="delete()" ng-if="record.id && record.userCanDelete" class="md-raised">{{\'main.button.delete\' | translate}}</md-button> <md-button ng-click="cancel()" class="md-raised">{{\'main.button.close\' | translate}}</md-button> </md-dialog-actions> </form> </md-dialog>'),a.put("studyMaterial/study.material.higher.edit.html",'<div class="ois-form-layout-padding ois-form-layout" ng-cloak> <div flex class="form-readonly"> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="25" flex-sm="100" flex-xs="100"> <label class="textInput">{{\'subjectStudyPeriod.studyPeriod\' | translate}}</label> <hois-value value="currentLanguageNameField(subjectStudyPeriod.studyPeriod)"></hois-value> </md-input-container> <md-input-container flex="30" flex-sm="100" flex-xs="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label class="textInput">{{\'subjectStudyPeriod.subject\' | translate}}</label> <hois-value value="currentLanguageNameField(subjectStudyPeriod.subject)"></hois-value> </md-input-container> </div> </div> <div flex> <form name="studyMaterialForm" ng-submit="save()" novalidate> <div layout="row"> <hois-autocomplete ng-if="auth.isAdmin()" flex ng-model="$parent.teacher" method="teachers" name="teacher" label="teacher.labelHigher" required></hois-autocomplete> </div> <md-input-container layout="row"> <label class="textInput">{{\'studyMaterial.type\' | translate}}</label> <hois-classifier-select ng-model="material.typeCode" main-classifier-code="OPPEMATERJAL" model-value-attr="code" ng-disabled="material.id" ng-change="typeCodeChanged(material.typeCode)" required></hois-classifier-select> </md-input-container> <span ng-if="!material.id && material.typeCode === \'OPPEMATERJAL_F\'"> <md-input-container flex> <lf-ng-md-file-input name="file" lf-files="$parent.files" lf-browse-label="{{\'main.addFile\' | translate}}" lf-remove-label="{{\'main.button.delete\' | translate}}" lf-placeholder="" lf-filesize="5MB" disallow-same-file="addedFiles" lf-required> </lf-ng-md-file-input> </md-input-container> <div ng-messages="studyMaterialForm.file.$error"> <div class="invalid" ng-message="required">{{\'main.messages.error.selectFile\' | translate}}</div> <div class="invalid" ng-message="filesize">{{\'main.messages.error.fileTooLarge\' | translate}} 5MB!</div> <div class="invalid" ng-message="samefile">{{\'main.messages.error.fileAlreadyExists\' | translate}}</div> </div> </span> <md-input-container layout="row" ng-if="material.typeCode === \'OPPEMATERJAL_L\'"> <label>{{\'studyMaterial.link\' | translate}}</label> <input ng-model="material.url" type="text" required> </md-input-container> <md-input-container layout="row"> <label>{{\'studyMaterial.name\' | translate}}</label> <input ng-model="material.nameEt" type="text" required> </md-input-container> <md-input-container layout="row"> <label>{{auth.higher ? (\'studyMaterial.descriptionHigher\' | translate) : (\'studyMaterial.descriptionVocational\' | translate)}}</label> <input ng-model="material.descriptionEt" type="text"> </md-input-container> <md-input-container> <md-checkbox ng-model="material.isVisibleToStudents" ng-disabled="material.isPublic === true" aria-label="isVisibleToStudents"> {{\'studyMaterial.isVisibleToStudents\' | translate}} </md-checkbox> </md-input-container> <md-input-container> <md-checkbox ng-model="material.isPublic" aria-label="isPublic"> {{\'studyMaterial.isPublic\' | translate}} </md-checkbox> </md-input-container> <div layout="row"> <md-button class="md-raised md-primary" type="submit">{{\'main.button.save\' | translate}}</md-button> <md-button class="md-raised md-default" ng-click="back(backPath)">{{\'main.button.back\' | translate}}</md-button> </div> </form> </div> </div>'),a.put("studyMaterial/study.material.higher.list.html",'<div class="ois-form-layout-padding ois-form-layout" ng-cloak> <div flex> <fieldset> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'main.searchlabel\' | translate}}</legend> <form name="searchForm" ng-submit="loadData()" novalidate> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="45" flex-sm="100" flex-xs="100"> <label>{{\'subjectStudyPeriod.studyPeriod\' | translate}}</label> <hois-select ng-model="criteria.studyPeriod" values="studyPeriods" ng-required="auth.isAdmin()"></hois-select> </md-input-container> <md-input-container flex="50" flex-sm="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'subjectStudyPeriod.subject\' | translate}}</label> <hois-select ng-model="criteria.subject" type="subject"></hois-select> </md-input-container> </div> <div ng-if="auth.isAdmin()" layout="row" layout-sm="column" layout-xs="column"> <div flex="45" flex-sm="100" flex-xs="100"> <hois-autocomplete flex ng-model="$parent.teacher" method="teachers" name="teacher" label="{{auth.higher ? \'teacher.labelHigher\' : \'teacher.labelVocational\'}}"></hois-autocomplete> </div> </div> <div layout="row"> <md-button type="submit" class="md-raised md-primary">{{\'main.button.search\' | translate}}</md-button> <md-button class="md-raised" ng-click="clearCriteria()">{{\'main.button.clear\' | translate}}</md-button> </div> </form> </fieldset> </div> </div> <div layout-padding> <div flex> <md-table-container> <table md-table md-progress="tabledata.$promise"> <thead md-head md-order="criteria.order" md-on-reorder="loadData"> <tr md-row> <th md-column>{{\'subjectStudyPeriod.subject\' | translate}}</th> <th md-column>{{\'subjectStudyPeriod.studyPeriod\' | translate}}</th> <th md-column>{{\'studyMaterial.count\' | translate}}</th> <th md-column></th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="row in tabledata.content" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell>{{currentLanguageNameField(row.subject)}}</td> <td md-cell>{{currentLanguageNameField(row.studyPeriod)}}</td> <td md-cell>{{row.materialCount}}</td> <td md-cell> <div ng-if="canEdit"> <md-button md-no-ink class="md-primary change-button" ng-href="#/studyMaterial/higher/{{::row.id}}/edit">{{\'main.button.change\' | translate}}</md-button> </div> </td> </tr> </tbody> </table> </md-table-container> <md-table-pagination md-limit="criteria.size" md-limit-options="[10, 20, 50]" md-page="criteria.page" md-total="{{tabledata.totalElements}}" md-on-paginate="loadData" md-label="{page: \'{{\'main.page\' | translate}}:\', rowsPerPage: \'{{\'main.rowPerPage\' | translate}}:\', of: \'{{\'main.of\' | translate}}\'}" md-page-select></md-table-pagination> </div> </div>'),a.put("studyMaterial/study.material.journal.edit.html",'<div class="ois-form-layout-padding ois-form-layout" ng-cloak> <div flex class="form-readonly"> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="25" flex-sm="100" flex-xs="100"> <label class="textInput">{{\'journal.studyYear\' | translate}}</label> <hois-value value="currentLanguageNameField(journal.studyYear)"></hois-value> </md-input-container> <md-input-container flex="30" flex-sm="100" flex-xs="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label class="textInput">{{\'journal.label\' | translate}}</label> <hois-value value="journal.nameEt"></hois-value> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="25" flex-sm="100" flex-xs="100"> <label class="textInput">{{auth.higher ? (\'journal.teachersHigher\' | translate) : (\'journal.teachersVocational\' | translate)}}</label> <hois-value value="teachers"></hois-value> </md-input-container> </div> </div> <div flex> <div ng-include="\'studyMaterial/templates/journal.material.edit.tmpl.html\'"></div> <div layout="row"> <md-button class="md-raised md-default" href="/#/studyMaterial/vocational/">{{\'main.button.back\' | translate}}</md-button> </div> </div> </div>'),a.put("studyMaterial/study.material.journal.view.html",'<div class="ois-form-layout-padding ois-form-layout" ng-cloak> <div flex class="form-readonly"> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="25" flex-sm="100" flex-xs="100"> <label class="textInput">{{\'journal.studyYear\' | translate}}</label> <hois-value value="currentLanguageNameField(journal.studyYear)"></hois-value> </md-input-container> <md-input-container flex="30" flex-sm="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label class="textInput">{{\'journal.label\' | translate}}</label> <hois-value value="journal.nameEt"></hois-value> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="25" flex-sm="100" flex-xs="100"> <label class="textInput">{{auth.higher ? (\'journal.teachersHigher\' | translate) : (\'journal.teachersVocational\' | translate)}}</label> <hois-value value="teachers"></hois-value> </md-input-container> </div> </div> <div flex> <div ng-include="\'studyMaterial/templates/journal.material.view.tmpl.html\'"></div> <br> <div layout="row"> <md-button ng-if="auth && !auth.isExternalExpert() && !auth.isMainAdmin()" class="md-raised md-default" ng-click="back(\'/#/students/journals\')">{{\'main.button.back\' | translate}}</md-button> <md-button ng-if="!auth || auth.isExternalExpert() || auth.isMainAdmin()" class="md-raised md-default" ng-click="back(\'/#/timetables\')">{{\'main.button.back\' | translate}}</md-button> </div> </div> </div>'),a.put("studyMaterial/study.material.subjectStudyPeriod.edit.html",'<div class="ois-form-layout-padding ois-form-layout" ng-cloak> <div flex class="form-readonly"> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="25" flex-sm="100" flex-xs="100"> <label class="textInput">{{\'subjectStudyPeriod.studyPeriod\' | translate}}</label> <hois-value value="currentLanguageNameField(subjectStudyPeriod.studyPeriod)"></hois-value> </md-input-container> <md-input-container flex-sm="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label class="textInput">{{\'subjectStudyPeriod.subject\' | translate}}</label> <hois-value value="currentLanguageNameField(subjectStudyPeriod.subject)"></hois-value> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="25" flex-sm="100" flex-xs="100"> <label class="textInput">{{\'subjectStudyPeriod.teacher\' | translate}}</label> <hois-value value="teachers"></hois-value> </md-input-container> </div> </div> <div flex> <div ng-include="\'studyMaterial/templates/subjectStudyPeriod.material.edit.tmpl.html\'"></div> <div layout="row"> <md-button class="md-raised md-default" href="/#/studyMaterial/higher/">{{\'main.button.back\' | translate}}</md-button> </div> </div> </div>'),a.put("studyMaterial/study.material.subjectStudyPeriod.view.html",'<div class="ois-form-layout-padding ois-form-layout" ng-cloak> <div flex class="form-readonly"> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="25" flex-sm="100" flex-xs="100"> <label class="textInput">{{\'subjectStudyPeriod.studyPeriod\' | translate}}</label> <hois-value value="currentLanguageNameField(subjectStudyPeriod.studyPeriod)"></hois-value> </md-input-container> <md-input-container flex="30" flex-sm="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label class="textInput">{{\'subjectStudyPeriod.subject\' | translate}}</label> <hois-value value="currentLanguageNameField(subjectStudyPeriod.subject)"></hois-value> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="25" flex-sm="100" flex-xs="100"> <label class="textInput">{{\'subjectStudyPeriod.teacher\' | translate}}</label> <hois-value value="teachers"></hois-value> </md-input-container> </div> </div> <div flex> <div ng-include="\'studyMaterial/templates/subjectStudyPeriod.material.view.tmpl.html\'"></div> <br> <div layout="row"> <md-button class="md-raised md-default" ng-click="back(\'/#/declaration/current/view\')">{{\'main.button.back\' | translate}}</md-button> </div> </div> </div>'),a.put("studyMaterial/study.material.vocational.edit.html",'<div class="ois-form-layout-padding ois-form-layout" ng-cloak> <div flex class="form-readonly"> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="25" flex-sm="100" flex-xs="100"> <label class="textInput">{{\'studyYear.label\' | translate}}</label> <hois-value value="currentLanguageNameField(journal.studyYear)"></hois-value> </md-input-container> <md-input-container flex="30" flex-sm="100" flex-xs="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label class="textInput">{{\'journal.label\' | translate}}</label> <hois-value value="journal.nameEt"></hois-value> </md-input-container> </div> </div> <div flex> <form name="studyMaterialForm" ng-submit="save()" novalidate> <div layout="row"> <hois-autocomplete ng-if="auth.isAdmin()" flex ng-model="$parent.teacher" method="teachers" name="teacher" label="teacher.labelVocational" required></hois-autocomplete> </div> <md-input-container layout="row"> <label class="textInput">{{\'studyMaterial.type\' | translate}}</label> <hois-classifier-select ng-model="material.typeCode" main-classifier-code="OPPEMATERJAL" model-value-attr="code" ng-disabled="material.id" ng-change="typeCodeChanged(material.typeCode)" required></hois-classifier-select> </md-input-container> <span ng-if="!material.id && material.typeCode === \'OPPEMATERJAL_F\'"> <md-input-container flex> <lf-ng-md-file-input name="file" lf-files="$parent.files" lf-browse-label="{{\'main.addFile\' | translate}}" lf-remove-label="{{\'main.button.delete\' | translate}}" lf-placeholder="" lf-filesize="5MB" disallow-same-file="addedFiles" lf-required> </lf-ng-md-file-input> </md-input-container> <div ng-messages="studyMaterialForm.file.$error"> <div class="invalid" ng-message="required">{{\'main.messages.error.selectFile\' | translate}}</div> <div class="invalid" ng-message="filesize">{{\'main.messages.error.fileTooLarge\' | translate}} 5MB!</div> <div class="invalid" ng-message="samefile">{{\'main.messages.error.fileAlreadyExists\' | translate}}</div> </div> </span> <md-input-container layout="row" ng-if="material.typeCode === \'OPPEMATERJAL_L\'"> <label>{{\'studyMaterial.link\' | translate}}</label> <input ng-model="material.url" type="text" required> </md-input-container> <md-input-container layout="row"> <label>{{\'studyMaterial.name\' | translate}}</label> <input ng-model="material.nameEt" type="text" required> </md-input-container> <md-input-container layout="row"> <label>{{auth.higher ? (\'studyMaterial.descriptionHigher\' | translate) : (\'studyMaterial.descriptionVocational\' | translate)}}</label> <input ng-model="material.descriptionEt" type="text"> </md-input-container> <md-input-container> <md-checkbox ng-model="material.isVisibleToStudents" ng-disabled="material.isPublic === true" aria-label="isVisibleToStudents"> {{\'studyMaterial.isVisibleToStudents\' | translate}} </md-checkbox> </md-input-container> <md-input-container> <md-checkbox ng-model="material.isPublic" aria-label="isPublic"> {{\'studyMaterial.isPublic\' | translate}} </md-checkbox> </md-input-container> <div layout="row"> <md-button class="md-raised md-primary" type="submit">{{\'main.button.save\' | translate}}</md-button> <md-button class="md-raised md-default" ng-click="back(backPath)">{{\'main.button.back\' | translate}}</md-button> </div> </form> </div> </div>'),a.put("studyMaterial/study.material.vocational.list.html",'<div class="ois-form-layout-padding ois-form-layout" ng-cloak> <div flex> <fieldset> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'main.searchlabel\' | translate}}</legend> <form name="searchForm" ng-submit="loadData()" novalidate> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="45" flex-sm="100" flex-xs="100"> <label>{{\'studyYear.label\' | translate}}</label> <hois-select ng-model="criteria.studyYear" values="studyYears" ng-required="auth.isAdmin()"></hois-select> </md-input-container> <div flex="50" flex-sm="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <hois-autocomplete label="journal.label" ng-model="criteria.journalObject" method="journals" additional-query-params="{studyYear: criteria.studyYear}"></hois-autocomplete> </div> </div> <div ng-if="auth.isAdmin()" layout="row" layout-sm="column" layout-xs="column"> <div flex="45" flex-sm="100" flex-xs="100"> <hois-autocomplete flex ng-model="$parent.teacher" method="teachers" name="teacher" label="{{auth.higher ? \'teacher.labelHigher\' : \'teacher.labelVocational\'}}"></hois-autocomplete> </div> </div> <div layout="row"> <md-button type="submit" class="md-raised md-primary">{{\'main.button.search\' | translate}}</md-button> <md-button class="md-raised" ng-click="clearCriteria()">{{\'main.button.clear\' | translate}}</md-button> </div> </form> </fieldset> </div> </div> <div layout-padding> <div flex> <md-table-container> <table md-table md-progress="tabledata.$promise"> <thead md-head md-order="criteria.order" md-on-reorder="loadData"> <tr md-row> <th md-column>{{\'journal.label\' | translate}}</th> <th md-column>{{\'studyYear.label\' | translate}}</th> <th md-column>{{\'studyMaterial.count\' | translate}}</th> <th md-column></th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="row in tabledata.content" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell>{{currentLanguageNameField(row)}}</td> <td md-cell>{{currentLanguageNameField(row.studyYear)}}</td> <td md-cell>{{row.materialCount}}</td> <td md-cell> <div ng-if="canEdit"> <md-button md-no-ink class="md-primary change-button" ng-href="#/studyMaterial/vocational/{{::row.id}}/edit">{{\'main.button.change\' | translate}}</md-button> </div> </td> </tr> </tbody> </table> </md-table-container> <md-table-pagination md-limit="criteria.size" md-limit-options="[10, 20, 50]" md-page="criteria.page" md-total="{{tabledata.totalElements}}" md-on-paginate="loadData" md-label="{page: \'{{\'main.page\' | translate}}:\', rowsPerPage: \'{{\'main.rowPerPage\' | translate}}:\', of: \'{{\'main.of\' | translate}}\'}" md-page-select></md-table-pagination> </div> </div>'),a.put("studyYear/study.period.dialog.html",'<md-dialog aria-label="grade add dialog" flex="70" flex-xs="100"> <form name="dialogForm" ng-cloak> <md-toolbar> <div class="md-toolbar-tools"> <h2>{{"studyYear.studyPeriod.heading" | translate}}</h2> <span flex></span> <md-button class="md-icon-button" ng-click="cancel()"> <md-icon md-font-set="material-icons">close</md-icon> </md-button> </div> </md-toolbar> <md-dialog-content> <span flex></span> <div class="ois-form-layout md-dialog-content" layout="column" flex ng-cloak> <div layout="column" flex> <div layout="row" flex layout-align="center center"> <md-input-container flex="45" class="readonly"> <label class="label">{{\'studyYear.studyPeriod.year\' | translate}}</label> <hois-classifier-value ng-model="studyPeriod.year" model-value-attr="code" main-classifier-code="OPPEAASTA"></hois-classifier-value> </md-input-container> <md-input-container flex="50" flex-offset="5"> <label class="textInput">{{\'studyYear.studyPeriod.type\' | translate}}</label> <hois-classifier-select ng-model="studyPeriod.type" model-value-attr="code" ng-change="typeChange()" required main-classifier-code="OPPEPERIOOD"></hois-classifier-select> </md-input-container> </div> <div layout="column" layout-xs="row"> <md-input-container flex> <label>{{\'studyYear.studyPeriod.nameEt\' | translate}}</label> <input ng-model="studyPeriod.nameEt" type="text" md-maxlength="100" required> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="20" flex-sm="100" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'studyYear.studyPeriod.startDate\' | translate}}</label> <md-datepicker ng-model="studyPeriod.startDate" name="startDate" md-max-date="studyPeriod.endDate" md-min-date="studyYear.startDate" required md-open-on-focus></md-datepicker> </md-input-container> <md-input-container flex="20" flex-sm="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'studyYear.studyPeriod.endDate\' | translate}}</label> <md-datepicker ng-model="studyPeriod.endDate" name="endDate" md-min-date="studyPeriod.startDate" md-max-date="studyYear.endDate" required md-open-on-focus></md-datepicker> </md-input-container> </div> </div> </div> </md-dialog-content> <md-dialog-actions layout="row" layout-align="start center"> <md-button class="md-raised md-primary" ng-click="submit()">{{"main.button.save" | translate}}</md-button> <md-button class="md-raised" ng-click="cancel()">{{"main.button.close" | translate}}</md-button> <md-button class="md-raised" ng-click="delete()" ng-if="studyPeriod.id">{{"main.button.delete" | translate}}</md-button> </md-dialog-actions> </form> </md-dialog>'),a.put("studyYear/study.period.event.dialog.html",'<md-dialog aria-label="grade add dialog" flex="70" flex-xs="100"> <form name="dialogForm" ng-cloak> <md-toolbar> <div class="md-toolbar-tools"> <h2>{{"studyYear.studyPeriodEvent.heading" | translate}}</h2> <span flex></span> <md-button class="md-icon-button" ng-click="cancel()"> <md-icon md-font-set="material-icons">close</md-icon> </md-button> </div> </md-toolbar> <md-dialog-content> <span flex></span> <div class="ois-form-layout" layout="column" ng-cloak layout-padding> <div class="ois-form-layout md-dialog-content" layout="column" flex ng-cloak> <div layout="column" flex> <div layout="row" flex> <md-input-container flex="45"> <label class="label">{{\'studyYear.studyPeriodEvent.period\' | translate}}</label> <md-select ng-model="studyPeriodEvent.studyPeriod" ng-required="uniqueInStudyPeriod"> <md-option md-option-empty ng-value="null" ng-if="!uniqueInStudyPeriod"></md-option> <md-option ng-repeat="option in studyPeriods" ng-value="option" aria-label="{{$root.currentLanguageNameField(option)}}">{{$root.currentLanguageNameField(option)}}</md-option> </md-select> </md-input-container> <md-input-container flex="50" flex-offset="5"> <label class="textInput">{{\'studyYear.studyPeriodEvent.eventType\' | translate}}</label> <hois-classifier-select ng-model="studyPeriodEvent.eventType" model-value-attr="code" main-classifier-code="SYNDMUS" required></hois-classifier-select> </md-input-container> </div> </div> <div layout="column" layout-xs="row"> <md-input-container flex> <label>{{\'studyYear.studyPeriodEvent.descriptionEt\' | translate}}</label> <input ng-model="studyPeriodEvent.descriptionEt" type="text" md-maxlength="100" required> </md-input-container> <!--<md-input-container flex>\r\n              <label>{{\'studyYear.studyPeriodEvent.nameEn\' | translate}}</label>\r\n              <input ng-model="studyPeriodEvent.nameEn" type="text" md-maxlength="100">\r\n            </md-input-container>--> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="30" flex-sm="100" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'studyYear.studyPeriodEvent.startDate\' | translate}}</label> <md-datepicker ng-model="studyPeriodEvent.start" md-max-date="studyPeriodEvent.end" required md-open-on-focus></md-datepicker> </md-input-container> <md-input-container flex="30" flex-sm="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'studyYear.studyPeriodEvent.startTime\' | translate}}</label> <hois-time ng-model="studyPeriodEvent.start" name="startTime" placeholder="{{\'main.timePlaceholder\' | translate}}"></hois-time> <div ng-messages="dialogForm.startTime.$error"> <div ng-message="time"> {{\'main.messages.error.time\' | translate}} </div> </div> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="30" flex-sm="100" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'studyYear.studyPeriodEvent.endDate\' | translate}}</label> <md-datepicker ng-model="studyPeriodEvent.end" md-min-date="studyPeriodEvent.start" ng-model-options="{ getterSetter: true }" md-open-on-focus></md-datepicker> </md-input-container> <md-input-container flex="30" flex-sm="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'studyYear.studyPeriodEvent.endTime\' | translate}}</label> <hois-time ng-model="studyPeriodEvent.end" name="endTime" placeholder="{{\'main.timePlaceholder\' | translate}}"></hois-time> <div ng-messages="dialogForm.endTime.$error"> <div ng-message="time"> {{\'main.messages.error.time\' | translate}} </div> </div> </md-input-container> </div> </div> </div> </md-dialog-content> <md-dialog-actions layout="row" layout-align="start center"> <md-button class="md-raised md-primary" ng-click="submit()">{{"main.button.save" | translate}}</md-button> <md-button class="md-raised" ng-click="cancel()">{{"main.button.close" | translate}}</md-button> <md-button class="md-raised" ng-click="delete()" ng-if="studyPeriodEvent.id">{{"main.button.delete" | translate}}</md-button> </md-dialog-actions> </form> </md-dialog>'),a.put("studyYear/study.year.edit.html",'<!--FIXME: IE does not show this form correctly--> <div class="ois-form-layout" layout="column" layout-margin ng-cloak> <form name="schoolYearForm" layout="column"> <div layout="column" flex> <div layout="row" layout-sm="column" layout-xs="column" class="form-readonly"> <md-input-container flex> <label class="label">{{\'studyYear.year\' | translate}}</label> <hois-classifier-value ng-model="studyYear.year" main-classifier-code="OPPEAASTA"></hois-classifier-value> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container> <label>{{\'studyYear.startDate\' | translate}}</label> <md-datepicker ng-model="studyYear.startDate" md-max-date="studyYear.endDate" ng-disabled="!canEdit" required md-open-on-focus></md-datepicker> </md-input-container> <md-input-container> <label>{{\'studyYear.endDate\' | translate}}</label> <md-datepicker ng-model="studyYear.endDate" md-min-date="studyYear.startDate" ng-disabled="!canEdit" required md-open-on-focus></md-datepicker> </md-input-container> <div> <md-button ng-click="update()" ng-if="canEdit" class="md-raised md-primary">{{\'main.button.save\' | translate}}</md-button> </div> </div> </div> <div ng-if="studyYear.id" layout="column" flex> <div>&nbsp;</div> <fieldset tabindex="1"> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'studyYear.studyPeriods\' | translate}}</legend> <md-button class="md-raised" ng-if="canEdit" ng-click="openStudyPeriodDialog()">{{\'main.button.create\' | translate}}</md-button> <div layout="row"> <table md-table class="secondary-table"> <thead md-head> <tr md-row> <th md-column>{{\'studyYear.studyPeriod.type\' | translate}}</th> <th md-column>{{\'studyYear.studyPeriod.name\' | translate}}</th> <th md-column>{{\'studyYear.studyPeriod.startDate\' | translate}}</th> <th md-column>{{\'studyYear.studyPeriod.endDate\' | translate}}</th> <th md-column></th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="item in studyPeriods | orderBy: [\'startDate\', \'endDate\', \'id\']" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell>{{currentLanguageNameField(item.type)}}</td> <td md-cell>{{currentLanguageNameField(item)}}</td> <td md-cell>{{item.startDate | hoisDate}}</td> <td md-cell>{{item.endDate | hoisDate}}</td> <td md-cell><md-button ng-if="canEdit" ng-click="openStudyPeriodDialog(item)" class="md-primary change-button">{{\'main.button.change\' | translate}}</md-button></td> </tr> </tbody> </table> </div> </fieldset> <div>&nbsp;</div> <fieldset> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'studyYear.studyPeriodEvents\' | translate}}</legend> <md-button class="md-raised" ng-if="canEdit" ng-click="openStudyPeriodEventDialog()">{{\'main.button.create\' | translate}}</md-button> <div layout="row"> <table md-table class="secondary-table"> <thead md-head> <tr md-row> <th md-column>{{\'studyYear.studyPeriodEvent.period\' | translate}}</th> <th md-column>{{\'studyYear.studyPeriodEvent.eventType\' | translate}}</th> <th md-column>{{\'studyYear.studyPeriodEvent.description\' | translate}}</th> <th md-column>{{\'studyYear.studyPeriodEvent.start\' | translate}}</th> <th md-column>{{\'studyYear.studyPeriodEvent.end\' | translate}}</th> <th md-column></th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="item in studyPeriodEvents | orderBy: [\'start\', \'end\', \'id\']" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell>{{currentLanguageNameField(item.studyPeriod)}}</td> <td md-cell>{{currentLanguageNameField(eventTypes[item.eventType])}}</td> <td md-cell>{{currentLanguage()===\'en\' ?(item.descriptionEn || item.descriptionEt) : item.descriptionEt}}</td> <td md-cell>{{item.start | hoisDateTimeMin}}</td> <td md-cell>{{item.end | hoisDateTimeMin}}</td> <td md-cell><md-button ng-if="canEdit" ng-click="openStudyPeriodEventDialog(item)" class="md-primary change-button">{{\'main.button.change\' | translate}}</md-button></td> </tr> </tbody> </table> </div> </fieldset> </div> <div layout="row"> <md-button ng-href="#/school/studyYears" class="md-raised">{{\'main.button.back\' | translate}}</md-button> </div> </form> </div>'),
a.put("studyYear/study.year.list.html",'<div layout-padding> <div flex> <md-table-container> <table md-table md-progress="endpoint.$promise"> <thead md-head> <tr md-row> <th md-column>{{\'studyYear.year\' | translate}}</th> <th md-column>{{\'studyYear.startDate\' | translate}}</th> <th md-column>{{\'studyYear.endDate\' | translate}}</th> <th md-column>{{\'studyYear.periods\' | translate}}</th> <th md-column></th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="row in tabledata" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell> <span ng-if="!row.id">{{currentLanguageNameField(row)}}</span> <a md-no-ink ng-if="row.id" class="md-primary change-button" ng-href="#/school/studyYears/{{::row.id}}/view">{{currentLanguageNameField(row)}}</a> </td> <td md-cell>{{row.startDate | hoisDate}}</td> <td md-cell>{{row.endDate | hoisDate}}</td> <td md-cell>{{::row.count}}</td> <td md-cell> <md-button md-no-ink class="md-primary change-button" ng-if="!row.id && canEdit" ng-href="#/school/studyYears/{{::row.code}}/new">{{\'main.button.change\' | translate}}</md-button> <md-button md-no-ink class="md-primary change-button" ng-if="row.id && canEdit" ng-href="#/school/studyYears/{{::row.id}}/edit">{{\'main.button.change\' | translate}}</md-button> <md-button md-no-ink class="md-primary change-button" ng-if="row.id && !canEdit" ng-href="#/school/studyYears/{{::row.id}}/view">{{\'main.button.view\' | translate}}</md-button> </td> </tr> </tbody> </table> </md-table-container> </div> </div>'),a.put("studyYear/study.year.view.html",'<!--FIXME: IE does not show this form correctly--> <div class="ois-form-layout form-readonly" layout="column" layout-margin ng-cloak> <form name="schoolYearForm" layout="column"> <div layout="column" flex> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex> <label class="label">{{\'studyYear.year\' | translate}}</label> <hois-classifier-value ng-model="studyYear.year" main-classifier-code="OPPEAASTA"></hois-classifier-value> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column" flex> <md-input-container flex="20"> <label>{{\'studyYear.startDate\' | translate}}</label> <hois-value value="studyYear.startDate | hoisDate"></hois-value> </md-input-container> <md-input-container flex="20" flex-offset="5"> <label>{{\'studyYear.endDate\' | translate}}</label> <hois-value value="studyYear.endDate | hoisDate"></hois-value> </md-input-container> </div> </div> <div ng-if="studyYear.id" layout="column" flex> <div>&nbsp;</div> <fieldset tabindex="1"> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'studyYear.studyPeriods\' | translate}}</legend> <div layout="row"> <table md-table class="secondary-table"> <thead md-head> <tr md-row> <th md-column>{{\'studyYear.studyPeriod.type\' | translate}}</th> <th md-column>{{\'studyYear.studyPeriod.name\' | translate}}</th> <th md-column>{{\'studyYear.studyPeriod.startDate\' | translate}}</th> <th md-column>{{\'studyYear.studyPeriod.endDate\' | translate}}</th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="item in studyPeriods | orderBy: [\'startDate\', \'endDate\', \'id\']" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell>{{currentLanguageNameField(item.type)}}</td> <td md-cell>{{currentLanguageNameField(item)}}</td> <td md-cell>{{item.startDate | hoisDate}}</td> <td md-cell>{{item.endDate | hoisDate}}</td> </tr> </tbody> </table> </div> </fieldset> <div>&nbsp;</div> <fieldset> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'studyYear.studyPeriodEvents\' | translate}}</legend> <div layout="row"> <table md-table class="secondary-table"> <thead md-head> <tr md-row> <th md-column>{{\'studyYear.studyPeriodEvent.period\' | translate}}</th> <th md-column>{{\'studyYear.studyPeriodEvent.eventType\' | translate}}</th> <th md-column>{{\'studyYear.studyPeriodEvent.description\' | translate}}</th> <th md-column>{{\'studyYear.studyPeriodEvent.start\' | translate}}</th> <th md-column>{{\'studyYear.studyPeriodEvent.end\' | translate}}</th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="item in studyPeriodEvents | orderBy: [\'start\', \'end\', \'id\']" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell>{{currentLanguageNameField(item.studyPeriod)}}</td> <td md-cell>{{currentLanguageNameField(eventTypes[item.eventType])}}</td> <td md-cell>{{currentLanguage()===\'en\' ?(item.descriptionEn || item.descriptionEt) : item.descriptionEt}}</td> <td md-cell>{{item.start | hoisDateTimeMin}}</td> <td md-cell>{{item.end | hoisDateTimeMin}}</td> </tr> </tbody> </table> </div> </fieldset> </div> <div layout="row"> <md-button ng-if="canEdit" ng-href="#/school/studyYears/{{::studyYear.id}}/edit" class="md-raised md-primary">{{\'main.button.edit\' | translate}}</md-button> <md-button ng-href="#/school/studyYears" class="md-raised">{{\'main.button.back\' | translate}}</md-button> </div> </form> </div>'),a.put("studyYearSchedule/study.year.schedule.add.dialog.html",'<md-dialog aria-label="module add dialog" flex="40" flex-sm="80" flex-xs="100"> <form name="dialogForm" ng-cloak> <md-toolbar> <div class="md-toolbar-tools"> <h2>{{"studyYearSchedule.studentGroup" | translate}} {{studentGroup.code}}</h2> <span flex></span> <md-button class="md-icon-button" ng-click="cancel()"> <md-icon md-font-set="material-icons">close</md-icon> </md-button> </div> </md-toolbar> <md-dialog-content> <span flex></span> <div class="ois-form-layout" layout="column" layout-margin ng-cloak> <span flex></span> <h2>{{week.weekNr}}. {{"studyYearSchedule.week" | translate}}: {{week.start | hoisDate}} - {{week.end | hoisDate}}</h2> <br> <md-input-container> <md-radio-group ng-model="data.legend"> <span class="label">{{\'studyYearSchedule.studyType\' | translate}}</span> <md-input-container> <md-input-container> <md-radio-button ng-value="null" aria-label="{{ \'select color\' }}"> <div class="colorCell" style="background: \'white\'"></div> </md-radio-button> </md-input-container> <md-input-container ng-repeat="legend in legends"> <md-radio-button ng-value="legend.id" aria-label="{{ \'select color\' }}"> <div class="colorCell" ng-style="{ background: true ? legend.color : \'white\' }"> <span>&nbsp;{{ legend.code }}</span> </div> </md-radio-button> </md-input-container> </md-input-container> </md-radio-group> </md-input-container> <br> <div layout="row"> <md-input-container flex="35" flex-sm="50" flex-xs="50"> <label>{{\'studyYearSchedule.durationInWeeks\' | translate}}</label> <input type="number" ng-model="data.weeks" min="1" max="{{translationData.weeks}}" required name="weeks" step="1" pattern="^\\d+$"> <div ng-messages="dialogForm.weeks.$error" ng-show="dialogForm.weeks.$dirty"> <div ng-message="min"> {{\'studyYearSchedule.error.minWeeks\' | translate}} </div> <div ng-message="max"> {{\'studyYearSchedule.error.maxWeeks\' | translate:translationData}} </div> <div ng-message="pattern"> {{\'main.messages.error.integer\' | translate}} </div> </div> </md-input-container> </div> <div layout="column" flex> <md-input-container flex> <label>{{\'studyYearSchedule.addInfo\' | translate}}</label> <textarea ng-model="data.addInfo" md-maxlength="4000" md-autofocus></textarea> </md-input-container> </div> <span flex></span> </div> </md-dialog-content> <md-dialog-actions layout="row" layout-align="start center"> <md-button class="md-raised md-primary" ng-click="submit()">{{hasValue ? "main.button.change" : "main.button.add" | translate}}</md-button> <md-button class="md-raised" ng-click="cancel()">{{"main.button.close" | translate}}</md-button> </md-dialog-actions> </form> </md-dialog> <style>.colorCell {\r\n    width: 20px;\r\n    height: 20px;\r\n    border: 1px solid black;\r\n  }\r\n\r\n  md-radio-button {\r\n    padding-right: 20px;\r\n  }</style>'),a.put("studyYearSchedule/study.year.schedule.html",'<!--FIXME: type color is not supported in IE 11--> <md-table-container> <table md-table class="secondary-table" ng-if="legends.length > 0"> <thead md-head> <tr md-row> <th md-column>{{\'studyYearScheduleLegend.code\' | translate}}</th> <th md-column>{{\'studyYearScheduleLegend.nameEt\' | translate}}</th> <th md-column>{{\'studyYearScheduleLegend.nameEn\' | translate}}</th> <th md-column>{{\'studyYearScheduleLegend.color\' | translate}}</th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="item in legends" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell>{{item.code}}</td> <td md-cell>{{item.nameEt}}</td> <td md-cell>{{item.nameEn}}</td> <td md-cell> <color-picker ng-model="item.color" options="colorOptions"></color-picker> </td> </tr> </tbody> </table> </md-table-container> <!--FIXME: this form is slow in IE--> <div layout="column" layout-padding> <form name="studyYearScheduleForm"> <div layout="column"> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="50" flex-sm="100" flex-xs="100"> <label>{{\'studyYearSchedule.studyYear\' | translate}}</label> <md-select ng-model="criteria.studyYear" md-on-close="yearSelectionTrigger()"> <md-option ng-value="option" ng-repeat="option in studyYears"> <hois-classifier-value ng-model="option.year" main-classifier-code="OPPEAASTA"></hois-classifier-value> </md-option> </md-select> </md-input-container> <md-input-container flex="45" flex-sm="100" flex-xs="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'studyYearSchedule.schoolDepartment\' | translate}}</label> <md-select ng-model="criteria.schoolDepartments" ng-disabled="criteria.showMine" ng-change="schoolDepartmentsChanged()" aria-label="{{\'certificate.signatory\' | translate}}" multiple> <md-option ng-value="department.id" ng-repeat="department in schoolDepartments | orderBy: \'!valid\'">{{currentLanguageNameField(department)}}</md-option> </md-select> </md-input-container> </div> <br> <div layout="row" layout-sm="column" layout-xs="column" ng-if="useMyFilter"> <div flex="50" flex-sm="100" flex-xs="100"> <md-checkbox ng-model="criteria.showMine" ng-change="showMineChanged()" aria-label="{{\'studyYearSchedule.showMine\' | translate}}"> {{\'studyYearSchedule.showMine\' | translate}} </md-checkbox> </div> <br> </div> <md-table-container style="overflow: auto" ng-cloak class="container" fixed-column-table fixed-columns="3"> <table ng-cloak class="lessonplan"> <thead> <tr class="schedule"> <th class="studentGroup schedule" colspan="3"></th> <th class="schedule hois-collapse-header" ng-repeat="studyPeriod in criteria.studyYear.studyPeriods" colspan="{{studyPeriod.weeks}}"> {{currentLanguageNameField(studyPeriod)}} </th> </tr> <tr> <th class="schedule studentGroup" colspan="3"></th> <th class="schedule weekCell weekNr" ng-repeat="week in weeks"> {{$index + 1}} <md-tooltip> {{week.start | hoisDate}} - {{week.end | hoisDate}} </md-tooltip> </th> </tr> </thead> <tbody ng-repeat="department in schoolDepartments | filter: filterSchoolDepartments"> <tr> <td colspan="3" colspan="{{weeks.length + 1}}" class="hois-collapse-header fixed-cell dividerBorder">{{currentLanguageNameField(department)}}</td> <td colspan="53" class="dividerBorder" style="border-right: 1px solid #ccc !important"></td> </tr> <tr class="dividerBorder" ng-repeat="sg in studentGroups | filter: filterStudentGroups(department)" ng-init="refreshHeight()"> <td colspan="3" class="schedule fixed-cell dividerBorder">{{sg.code}}</td> <!--\r\n                                style="background: { getLegendById(getSchedule(sg.id, week.weekNr).studyYearScheduleLegend).color}"\r\n                                Was not used insted of ng-style as VS code marked curly braces as error(css property expected),\r\n                                though it did not cause an error on "grunt build" on local machine\r\n\r\n                                ng-if="!isPastStudyYear" was used, because in case of past study year, it should not become bold when clicked\r\n                            --> <td ng-if="!isPastStudyYear" style="color:white" ng-repeat="week in weeks" ng-click="openAddScheduleDialog(sg, week, getSchedule(sg.id, week.weekNr))" ng-style="{ background: true ? getLegendById(getSchedule(sg.id, week.weekNr).studyYearScheduleLegend).color : \'white\' }" title="{{getSchedule(sg.id, week.weekNr).addInfo}}"> {{getLegendById(getSchedule(sg.id, week.weekNr).studyYearScheduleLegend).code}} </td> <td ng-if="isPastStudyYear" ng-repeat="week in weeks" ng-style="{ background: true ? getLegendById(getSchedule(sg.id, week.weekNr).studyYearScheduleLegend).color : \'white\' }" title="{{getSchedule(sg.id, week.weekNr).addInfo}}"> {{getLegendById(getSchedule(sg.id, week.weekNr).studyYearScheduleLegend).code}} </td> </tr> </tbody> </table> </md-table-container> <div layout="row"> <md-button class="md-raised md-primary" ng-if="canEdit" ng-click="save()" ng-show="!isPastStudyYear">{{\'main.button.save\' | translate}}</md-button> <a ng-href="{{exportUrl(formState.pdfUrl)}}" target="_blank" class="md-button md-raised"> {{\'main.button.printPdf\' | translate}} </a> <a ng-href="{{exportUrl(formState.xlsUrl)}}" target="_blank" class="md-button md-raised"> {{\'main.button.printXls\' | translate}} </a> </div> </div> </form> </div> <style>table.schedule,\r\n  \r\n  th.schedule,\r\n  td.schedule {\r\n    border-collapse: collapse;\r\n  }\r\n\r\n\r\n  .studentGroup {\r\n    width: 100px;\r\n  }\r\n\r\n  .weekCell {\r\n    width: 30px;\r\n  }\r\n\r\n  .schoolDepartment {\r\n    font-weight: bold;\r\n  }\r\n\r\n  .weekNr {\r\n    font-weight: normal;\r\n  }</style>'),a.put("studyYearSchedule/study.year.schedule.legend.html",'<!--FIXME: type color is not supported in IE 11--> <div class="ois-form-layout-padding" layout="row" flex="100" flex-sm="100" flex-xs="100" ng-if="defaultLegends"> <span class="common-label">{{\'studyYearScheduleLegend.defaultLegend\' | translate}}</span> </div> <md-table-container> <table md-table class="secondary-table"> <thead md-head> <tr md-row> <th md-column style="width:10%">{{\'studyYearScheduleLegend.code\' | translate}}</th> <th md-column style="width:30%">{{\'studyYearScheduleLegend.nameEt\' | translate}}</th> <th md-column style="width:30%">{{\'studyYearScheduleLegend.nameEn\' | translate}}</th> <th md-column style="width:20%">{{\'studyYearScheduleLegend.color\' | translate}}</th> <th md-column style="width:10%"></th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="item in legends" ng-class-odd="\'odd\'" ng-class-even="\'even\'" ng-click="changeEditable(item)"> <td md-cell> <span ng-class="{invalid: formSubmitted && !codeIsValid(item)}" ng-if="!item.edited">{{item.code}}</span> <md-input-container ng-if="item.edited"> <input ng-model="item.code" class="small-input" type="text" max="2" md-max-length="2"> </md-input-container> </td> <td md-cell> <span ng-class="{invalid: formSubmitted && !nameEtIsValid(item)}" ng-if="!item.edited">{{item.nameEt}}</span> <md-input-container ng-if="item.edited"> <input ng-model="item.nameEt" class="small-input" type="text"> </md-input-container> </td> <td md-cell> <span ng-class="{invalid: formSubmitted && !nameEnIsValid(item)}" ng-if="!item.edited">{{item.nameEn}}</span> <md-input-container ng-if="item.edited"> <input ng-model="item.nameEn" class="small-input" type="text"> </md-input-container> </td> <td md-cell> <div class="color-container"> <color-picker ng-model="item.colorPicker" options="options" ng-model-options="{ getterSetter: true }"></color-picker> </div> </td> <td md-cell> <md-button class="remove nomargin" ng-if="canEdit" ng-click="remove(item)">&times;</md-button> </td> </tr> <tr md-row class="odd"> <td md-cell colspan="5" style="padding-bottom: 100px"> <!-- "Fixes" problem with table cell absolute position and table overflow hidden --> <md-button class="md-primary" ng-if="canEdit" ng-click="addRow()">{{\'main.button.addNewRow\' | translate}}</md-button> <br><br> <md-button class="md-raised md-primary" ng-if="canEdit" ng-click="checkErrorsAndSave()">{{\'main.button.save\' | translate}}</md-button> </td> </tr> </tbody> </table> </md-table-container> <style>.color-container {\r\n        display: inline-block;\r\n    }\r\n    md-table-container .md-button {\r\n        text-transform: none;\r\n    }</style>'),a.put("subject/subject.edit.html",'<div class="ois-form-layout" layout="column" layout-margin ng-cloak> <form name="subjectForm" layout="column"> <md-input-container flex> <label>{{\'subject.code\' | translate}}</label> <input ng-model="subject.code" name="code" type="text" md-maxlength="20" ng-required="true" ng-model-options="{ debounce: 250 }" unique="subjectCodeUniqueQuery"> <div ng-messages="subjectForm.code.$error"> <div ng-message="notUnique"> {{\'subject.alreadyexist\' | translate}} </div> </div> </md-input-container> <md-input-container flex> <label>{{\'subject.nameEt\' | translate}}</label> <input ng-model="subject.nameEt" type="text" md-maxlength="255" ng-required="true"> </md-input-container> <md-input-container flex> <label>{{\'subject.nameEn\' | translate}}</label> <input ng-model="subject.nameEn" type="text" md-maxlength="255" ng-required="true"> </md-input-container> <md-input-container flex> <label>{{\'subject.credits\' | translate}}</label> <input ng-model="subject.credits" type="number" ng-required="true" step="0.1"> </md-input-container> <md-input-container flex> <label>{{\'subject.assessment\' | translate}}</label> <hois-classifier-select ng-model="subject.assessment" model-value-attr="code" main-classifier-code="HINDAMISVIIS" ng-required="true"></hois-classifier-select> </md-input-container> <md-input-container flex> <label>{{\'subject.assessmentDescription\' | translate}}</label> <textarea ng-model="subject.assessmentDescription" md-maxlength="10000" max-rows="2"></textarea> </md-input-container> <md-input-container flex> <label>{{\'subject.language\' | translate}}</label> <hois-classifier-select ng-model="subject.languages" model-value-attr="code" main-classifier-code="OPPEKEEL" criteria="{higher: true}" multiple></hois-classifier-select> </md-input-container> <md-input-container flex> <label>{{\'subject.objectivesEt\' | translate}}</label> <textarea ng-model="subject.objectivesEt" md-maxlength="10000" max-rows="2" ng-required="true"></textarea> </md-input-container> <md-input-container flex> <label>{{\'subject.objectivesEn\' | translate}}</label> <textarea ng-model="subject.objectivesEn" md-maxlength="10000" max-rows="2" ng-required="true"></textarea> </md-input-container> <md-input-container flex> <label>{{\'subject.outcomesEt\' | translate}}</label> <textarea ng-model="subject.outcomesEt" md-maxlength="10000" max-rows="2" ng-required="true"></textarea> </md-input-container> <md-input-container flex> <label>{{\'subject.outcomesEn\' | translate}}</label> <textarea ng-model="subject.outcomesEn" md-maxlength="10000" max-rows="2" ng-required="true"></textarea> </md-input-container> <md-input-container flex> <label>{{\'subject.descriptionEt\' | translate}}</label> <textarea ng-model="subject.descriptionEt" md-maxlength="4000" max-rows="2"></textarea> </md-input-container> <md-input-container flex> <label>{{\'subject.descriptionEn\' | translate}}</label> <textarea ng-model="subject.descriptionEn" md-maxlength="4000" max-rows="2"></textarea> </md-input-container> <md-input-container flex> <label>{{\'subject.independentStudyEt\' | translate}}</label> <textarea ng-model="subject.independentStudyEt" md-maxlength="4000" max-rows="2"></textarea> </md-input-container> <md-input-container flex> <label>{{\'subject.independentStudyEn\' | translate}}</label> <textarea ng-model="subject.independentStudyEn" md-maxlength="4000" max-rows="2"></textarea> </md-input-container> <md-input-container flex> <label>{{\'subject.studyLiterature\' | translate}}</label> <textarea ng-model="subject.studyLiterature" md-maxlength="4000" max-rows="2"></textarea> </md-input-container> <md-input-container flex> <label>{{\'subject.evaluationEt\' | translate}}</label> <textarea ng-model="subject.evaluationEt" md-maxlength="10000" max-rows="2"></textarea> </md-input-container> <md-input-container flex> <label>{{\'subject.evaluationEn\' | translate}}</label> <textarea ng-model="subject.evaluationEn" md-maxlength="10000" max-rows="2"></textarea> </md-input-container> <md-input-container flex> <label>{{\'subject.additionalInfo\' | translate}}</label> <textarea ng-model="subject.additionalInfo" md-maxlength="4000" max-rows="2"></textarea> </md-input-container> <hois-autocomplete ng-model="subject.mandatoryPrerequisiteSubjects" label="subject.mandatoryPrerequisiteSubjects" method="subjects" multiple></hois-autocomplete> <hois-autocomplete ng-model="subject.recommendedPrerequisiteSubjects" label="subject.recommendedPrerequisiteSubjects" method="subjects" multiple></hois-autocomplete> <hois-autocomplete ng-model="subject.substituteSubjects" label="subject.substituteSubjects" method="subjects" multiple></hois-autocomplete> <md-input-container flex> <label>{{\'subject.linkDepartment\' | translate}}</label> <hois-select ng-model="subject.schoolDepartment.id" values="departments"></hois-select> </md-input-container> <br> <md-input-container flex> <md-checkbox ng-model="subject.isPractice"> {{\'subject.isPractice\' | translate}} </md-checkbox> </md-input-container> <md-input-container class="top-margin readonly"> <label>{{\'subject.status\' | translate}}</label> <hois-classifier-value ng-model="subject.status" main-classifier-code="AINESTAATUS"></hois-classifier-value> </md-input-container> <!-- info tund --> <h3>{{\'subject.subjectIsPrerequisite\' | translate}}</h3> <div ng-repeat="row in subject.primarySubjects | orderBy: currentLanguageNameField()"> <a ng-href="#/subject/{{row.id}}/edit">{{currentLanguageNameField(row)}}</a> </div> <h3>{{\'subject.belongsCurriculum\' | translate}}</h3> <div ng-repeat="row in subject.curriculumVersions | orderBy: currentLanguageNameField()"> <span>{{currentLanguageNameField(row) }}</span> </div> <hois-created-modified object="subject"></hois-created-modified> <div layout="row" layout-xs="column"> <md-button ng-click="update()" class="md-raised md-primary">{{\'main.button.save\' | translate}}</md-button> <md-button ng-if="subject.canSetActive" ng-click="saveAndConfirm()" class="md-raised">{{\'subject.activate\' | translate}}</md-button> <md-button ng-if="subject.canSetPassive" ng-click="saveAndUnconfirm()" class="md-raised">{{\'subject.passive\' | translate}}</md-button> <md-button ng-if="subject.canDelete" ng-click="delete()" class="md-raised">{{\'main.button.delete\' | translate}}</md-button> <md-button ng-click="back(formState.backUrl, subjectForm)" class="md-raised">{{\'main.button.back\' | translate}}</md-button> </div> </form> </div>'),a.put("subject/subject.list.html",'<div flex-xs="100" flex-gt-xs="100" flex-gt-sm="100" class="ois-form-layout-padding ois-form-layout" ng-cloak> <!--<div class="ois-form-layout" layout="column" layout-margin ng-cloak>--> <fieldset> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'main.searchlabel\' | translate}}</legend> <form ng-submit="loadData()" novalidate> <div layout="column"> <div layout="row" ng-if="isPublic"> <md-input-container flex> <label>{{\'school.label\' | translate}}</label> <hois-select ng-model="criteria.schoolId" type="school"></hois-select> </md-input-container> </div> <div layout="row"> <md-input-container flex> <label class="textInput">{{\'subject.name\' | translate}}</label> <input ng-model="criteria.name" type="text" autofocus> </md-input-container> </div> <div layout="row"> <md-input-container flex> <label class="textInput">{{\'subject.code\' | translate}}</label> <input ng-model="criteria.code" type="text"> </md-input-container> <div flex-xs="0" flex-gt-sm="10"></div> <md-input-container flex> <label>{{\'subject.assessment\' | translate}}</label> <hois-classifier-select ng-model="criteria.assessments" model-value-attr="code" main-classifier-code="HINDAMISVIIS" multiple></hois-classifier-select> </md-input-container> </div> <div layout="row"> <md-input-container flex> <label>{{\'subject.curriculum\' | translate}}</label> <md-select ng-model="criteria.curriculaVersion" multiple> <md-option ng-repeat="it in curricula" value="{{it.id}}" style="font-size: medium"> {{currentLanguageNameField(it)}} </md-option> </md-select> </md-input-container> </div> <div layout="column"> <label class="common-label" style="padding-bottom:12px"> {{\'subject.credits\' | translate}}</label> <div layout="row" flex> <div layout="column" flex> <div layout-gt-xs="row" flex="45" flex-xs="100"> <md-input-container flex> <label>{{\'main.from\' | translate}}</label> <input type="number" ng-model="criteria.from" min="0" step="0.1"> </md-input-container> <md-input-container flex> <label>{{\'main.thru\' | translate}}</label> <input type="number" ng-model="criteria.thru" min="0" step="0.1"> </md-input-container> </div> </div> <div flex-xs="0" flex-gt-sm="10"></div> <div layout="column" flex> <md-input-container flex> <label>{{\'school.department.department\' | translate}}</label> <md-select ng-model="criteria.departments" multiple> <md-option ng-repeat="department in departments" ng-value="department.id"> {{currentLanguageNameField(department)}} </md-option> </md-select> </md-input-container> </div> </div> <div layout="row" flex> <div layout="column" flex> <md-input-container ng-show="formState.canViewAll"> <label>{{\'subject.status\' | translate}}</label> <hois-classifier-select ng-model="criteria.status" model-value-attr="code" main-classifier-code="AINESTAATUS" multiple></hois-classifier-select> </md-input-container> </div> <div flex-xs="0" flex-gt-sm="10"></div> <div layout="column" flex> <md-input-container> <label>{{\'subject.language\' | translate}}</label> <hois-classifier-select ng-model="criteria.languages" model-value-attr="code" main-classifier-code="OPPEKEEL" criteria="{higher: true}" multiple></hois-classifier-select> </md-input-container> </div> </div> </div> <div layout="row" layout-xs="column"> <md-button type="submit" class="md-raised md-primary">{{\'main.button.search\' | translate}}</md-button> <md-button class="md-raised" ng-click="clearCriteria()">{{\'main.button.clear\' | translate}}</md-button> <md-button class="md-raised" ng-href="#/subject/new" ng-if="formState.canCreate">{{\'main.button.create\' | translate}}</md-button> </div> </div> </form> </fieldset> </div> <div layout-padding> <div flex> <md-table-container> <table md-table md-progress="tabledata.$promise"> <thead md-head md-order="criteria.order" md-on-reorder="loadData"> <tr md-row> <th md-column md-order-by="{{\'school.\'+currentLanguageNameField()}}" ng-if="isPublic"><span>{{\'school.label\' | translate}}</span></th> <th md-column md-order-by="{{currentLanguageNameField()}}"><span>{{\'subject.name\' | translate}}</span></th> <th md-column md-order-by="code"><span>{{\'subject.code\' | translate}}</span></th> <th md-column md-order-by="credits"><span>{{\'subject.creditsEap\' | translate}}</span></th> <th md-column md-order-by="{{currentLanguage(\'assessment\')===\'en\' ? \'assessment.nameEn\' : \'assessment.nameEt\'}}">{{\'subject.assessment\' | translate}}</th> <th md-column>{{\'subject.language\' | translate}}</th> <th md-column md-order-by="{{currentLanguage()===\'en\' ? \'status.nameEn\' : \'status.nameEt\'}}" ng-if="formState.canViewAll">{{\'subject.status\' | translate}}</th> <th md-column md-order-by="{{currentLanguage()===\'en\' ? \'schoolDepartment.nameEn\' : \'schoolDepartment.nameEt\'}}">{{\'school.department.department\' | translate}}</th> <th md-column></th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="row in tabledata.content" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell ng-if="isPublic">{{currentLanguageNameField(row.school)}}</td> <td md-cell><a ng-href="#/subject{{isPublic ? \'/public\' : \'\'}}/{{::row.id}}">{{currentLanguageNameField(row)}}</a></td> <td md-cell>{{::row.code}}</td> <td md-cell>{{::row.credits}}</td> <td md-cell>{{currentLanguageNameField(row.assessment)}}</td> <td md-cell>{{subjectLanguages(row.languages)}}</td> <td md-cell ng-if="formState.canViewAll">{{currentLanguageNameField(row.status)}}</td> <td md-cell>{{currentLanguageNameField(row.schoolDepartment)}}</td> <td md-cell><md-button ng-if="row.canEdit" md-no-ink class="md-primary change-button" ng-href="#/subject/{{::row.id}}/edit">{{\'main.button.change\' | translate}}</md-button></td> </tr> </tbody> </table> </md-table-container> <md-table-pagination md-limit="criteria.size" md-limit-options="[10, 20, 50]" md-page="criteria.page" md-total="{{tabledata.totalElements}}" md-on-paginate="loadData" md-label="{page: \'{{\'main.page\' | translate}}:\', rowsPerPage: \'{{\'main.rowPerPage\' | translate}}:\', of: \'{{\'main.of\' | translate}}\' }" md-page-select></md-table-pagination> </div> </div>'),a.put("subject/subject.view.html",'<div class="ois-form-layout-padding form-readonly" ng-cloak> <div> <form name="subjectForm" layout="column"> <md-input-container flex> <label>{{\'subject.code\' | translate}}</label> <hois-value value="subject.code"></hois-value> </md-input-container> <md-input-container flex> <label>{{\'subject.nameEt\' | translate}}</label> <hois-value value="subject.nameEt"></hois-value> </md-input-container> <md-input-container flex> <label>{{\'subject.nameEn\' | translate}}</label> <hois-value value="subject.nameEn"></hois-value> </md-input-container> <md-input-container flex> <label>{{\'subject.credits\' | translate}}</label> <hois-value value="subject.credits"></hois-value> </md-input-container> <md-input-container flex> <label>{{\'subject.assessment\' | translate}}</label> <hois-classifier-value ng-model="subject.assessment" main-classifier-code="HINDAMISVIIS"></hois-classifier-value> </md-input-container> <md-input-container flex> <label>{{\'subject.assessmentDescription\' | translate}}</label> <hois-value value="subject.assessmentDescription"></hois-value> </md-input-container> <md-input-container flex> <label>{{\'subject.language\' | translate}}</label> <hois-classifier-value ng-model="subject.languages" main-classifier-code="OPPEKEEL"></hois-classifier-value> </md-input-container> <md-input-container flex> <label>{{\'subject.objectivesEt\' | translate}}</label> <hois-value value="subject.objectivesEt"></hois-value> </md-input-container> <md-input-container flex> <label>{{\'subject.objectivesEn\' | translate}}</label> <hois-value value="subject.objectivesEn"></hois-value> </md-input-container> <md-input-container flex> <label>{{\'subject.outcomesEt\' | translate}}</label> <hois-value value="subject.outcomesEt"></hois-value> </md-input-container> <md-input-container flex> <label>{{\'subject.outcomesEn\' | translate}}</label> <hois-value value="subject.outcomesEn"></hois-value> </md-input-container> <md-input-container flex> <label>{{\'subject.descriptionEt\' | translate}}</label> <hois-value value="subject.descriptionEt"></hois-value> </md-input-container> <md-input-container flex> <label>{{\'subject.descriptionEn\' | translate}}</label> <hois-value value="subject.descriptionEn"></hois-value> </md-input-container> <md-input-container flex> <label>{{\'subject.independentStudyEt\' | translate}}</label> <hois-value value="subject.independentStudyEt"></hois-value> </md-input-container> <md-input-container flex> <label>{{\'subject.independentStudyEn\' | translate}}</label> <hois-value value="subject.independentStudyEn"></hois-value> </md-input-container> <md-input-container flex> <label>{{\'subject.studyLiterature\' | translate}}</label> <hois-value value="subject.studyLiterature"></hois-value> </md-input-container> <md-input-container flex> <label>{{\'subject.evaluationEt\' | translate}}</label> <hois-value value="subject.evaluationEt"></hois-value> </md-input-container> <md-input-container flex> <label>{{\'subject.evaluationEn\' | translate}}</label> <hois-value value="subject.evaluationEn"></hois-value> </md-input-container> <md-input-container flex> <label>{{\'subject.additionalInfo\' | translate}}</label> <hois-value value="subject.additionalInfo"></hois-value> </md-input-container> <md-input-container> <label>{{\'subject.mandatoryPrerequisiteSubjects\' | translate}}</label> <hois-value ng-repeat="it in subject.mandatoryPrerequisiteSubjects" value="currentLanguageNameField(it)" href-value="\'#/subject/\'+(isPublic ? \'public/\' : \'\')+it.id"></hois-value> </md-input-container> <md-input-container> <label>{{\'subject.recommendedPrerequisiteSubjects\' | translate}}</label> <hois-value ng-repeat="it in subject.recommendedPrerequisiteSubjects" value="currentLanguageNameField(it)" href-value="\'#/subject/\'+(isPublic ? \'public/\' : \'\')+it.id"></hois-value> </md-input-container> <md-input-container> <label>{{\'subject.substituteSubjects\' | translate}}</label> <hois-value ng-repeat="it in subject.substituteSubjects" value="currentLanguageNameField(it)" href-value="\'#/subject/\'+(isPublic ? \'public/\' : \'\')+it.id"></hois-value> </md-input-container> <br> <md-input-container flex> <label>{{\'subject.linkDepartment\' | translate}}</label> <hois-value value="currentLanguageNameField(subject.schoolDepartment)"></hois-value> </md-input-container> <md-input-container flex> <label>{{\'subject.isPractice\' | translate}}</label> <hois-value value="subject.isPractice ? \'main.yes\' : \'main.no\' | translate"></hois-value> </md-input-container> <md-input-container> <label>{{\'subject.status\' | translate}}</label> <hois-classifier-value ng-model="subject.status" main-classifier-code="AINESTAATUS"></hois-classifier-value> </md-input-container> <md-input-container ng-if="subject.status === \'AINESTAATUS_K\'"> <label>{{\'public.url\' | translate}}</label> <input ng-model="publicUrl" type="text" readonly> </md-input-container> <h3>{{\'subject.subjectIsPrerequisite\' | translate}}</h3> <div ng-repeat="row in subject.primarySubjects | orderBy: currentLanguageNameField()"> <a ng-href="#/subject{{isPublic ? \'/public\' : \'\'}}/{{row.id}}">{{currentLanguageNameField(row)}}</a> </div> <h3>{{\'subject.belongsCurriculum\' | translate}}</h3> <div ng-repeat="row in subject.curriculumVersions | orderBy: currentLanguageNameField()"> <span>{{currentLanguageNameField(row)}}</span> </div> <hois-created-modified object="subject"></hois-created-modified> <div layout="row"> <md-button ng-if="subject.canEdit" ng-href="#/subject/{{subject.id}}/edit" class="md-raised md-primary">{{\'main.button.change\' | translate}}</md-button> <md-button ng-href="{{::formState.backUrl}}" class="md-raised">{{\'main.button.back\' | translate}}</md-button> </div> </form> </div> </div>'),
a.put("subjectProgram/subject.program.edit.html",'<div class="ois-form-layout-padding nomargin"> <form ng-cloak name="subjectProgramForm"> <div layout="column" ng-cloak> <div flex class="form-readonly"> <div flex layout="column" ng-if="subjectProgram.rejectInfo"> <md-input-container flex="100" flex-gt-xs="60" class="md-input-invalid"> <label class="textInput">{{\'subjectProgram.rejectInfo\' | translate}}</label> <hois-value value="subjectProgram.rejectInfo"></hois-value> </md-input-container> </div> <div flex layout="column" layout-gt-xs="row"> <md-input-container flex="100" flex-gt-xs="60"> <label class="textInput">{{\'subjectProgram.subjectName\' | translate}}</label> <hois-value value="currentLanguageNameField(subject)"></hois-value> </md-input-container> <md-input-container flex="100" flex-gt-xs="20"> <label class="textInput">{{\'subject.code\' | translate}}</label> <hois-value value="subject.code"></hois-value> </md-input-container> <md-input-container flex="100" flex-gt-xs="20"> <label class="textInput">{{\'subject.credits\' | translate}}</label> <hois-value value="subject.credits"></hois-value> </md-input-container> </div> <hois-collapsable class="hois-collapse2" expanded="false"> <hois-collapsable-header> <span>{{\'subjectProgram.syllabus\' | translate}}</span> </hois-collapsable-header> <div flex layout="column"> <md-input-container flex style="margin-top: 0 !important"> <label class="textInput">{{\'subject.assessment\' | translate}}</label> <hois-classifier-value ng-model="subject.assessment" main-classifier-code="HINDAMISVIIS"></hois-classifier-value> </md-input-container> <md-input-container flex> <label class="textInput">{{\'subject.assessmentDescription\' | translate}}</label> <hois-value value="subject.assessmentDescription"></hois-value> </md-input-container> <md-input-container flex> <label class="textInput">{{\'subject.language\' | translate}}</label> <hois-classifier-value ng-model="subject.languages" main-classifier-code="OPPEKEEL"></hois-classifier-value> </md-input-container> <md-input-container flex> <label>{{\'subject.objectivesEt\' | translate}}</label> <hois-value value="subject.objectivesEt"></hois-value> </md-input-container> <md-input-container flex> <label>{{\'subject.objectivesEn\' | translate}}</label> <hois-value value="subject.objectivesEn"></hois-value> </md-input-container> <md-input-container flex> <label>{{\'subject.outcomesEt\' | translate}}</label> <hois-value value="subject.outcomesEt"></hois-value> </md-input-container> <md-input-container flex> <label>{{\'subject.outcomesEn\' | translate}}</label> <hois-value value="subject.outcomesEn"></hois-value> </md-input-container> <md-input-container flex> <label>{{\'subject.descriptionEt\' | translate}}</label> <hois-value value="subject.descriptionEt"></hois-value> </md-input-container> <md-input-container flex> <label>{{\'subject.descriptionEn\' | translate}}</label> <hois-value value="subject.descriptionEn"></hois-value> </md-input-container> <md-input-container flex> <label>{{\'subject.independentStudyEt\' | translate}}</label> <hois-value value="subject.independentStudyEt"></hois-value> </md-input-container> <md-input-container flex> <label>{{\'subject.independentStudyEn\' | translate}}</label> <hois-value value="subject.independentStudyEn"></hois-value> </md-input-container> <md-input-container flex> <label>{{\'subject.studyLiterature\' | translate}}</label> <hois-value value="subject.studyLiterature"></hois-value> </md-input-container> <md-input-container flex> <label>{{\'subject.evaluationEt\' | translate}}</label> <hois-value value="subject.evaluationEt"></hois-value> </md-input-container> <md-input-container flex> <label>{{\'subject.evaluationEn\' | translate}}</label> <hois-value value="subject.evaluationEn"></hois-value> </md-input-container> <md-input-container flex> <label>{{\'subject.additionalInfo\' | translate}}</label> <hois-value value="subject.additionalInfo"></hois-value> </md-input-container> <md-input-container ng-if="subject.mandatoryPrerequisiteSubjects.length > 0"> <label>{{\'subject.mandatoryPrerequisiteSubjects\' | translate}}</label> <hois-value ng-repeat="it in subject.mandatoryPrerequisiteSubjects" value="currentLanguageNameField(it)" href-value="\'#/subject/\'+it.id"></hois-value> </md-input-container> <md-input-container ng-if="subject.recommendedPrerequisiteSubjects.length > 0"> <label>{{\'subject.recommendedPrerequisiteSubjects\' | translate}}</label> <hois-value ng-repeat="it in subject.recommendedPrerequisiteSubjects" value="currentLanguageNameField(it)" href-value="\'#/subject/\'+it.id"></hois-value> </md-input-container> <md-input-container ng-if="subject.substituteSubjects.length > 0"> <label>{{\'subject.substituteSubjects\' | translate}}</label> <hois-value ng-repeat="it in subject.substituteSubjects" value="currentLanguageNameField(it)" href-value="\'#/subject/\'+it.id"></hois-value> </md-input-container> <br> <md-input-container flex> <label>{{\'subject.linkDepartment\' | translate}}</label> <hois-value value="currentLanguageNameField(subject.schoolDepartment)"></hois-value> </md-input-container> <md-input-container flex> <label>{{\'subject.isPractice\' | translate}}</label> <hois-value value="subject.isPractice ? \'main.yes\' : \'main.no\' | translate"></hois-value> </md-input-container> <md-input-container> <label>{{\'subject.status\' | translate}}</label> <hois-classifier-value ng-model="subject.status" main-classifier-code="AINESTAATUS"></hois-classifier-value> </md-input-container> <div layout="column" ng-if="subject.primarySubjects.length > 0"> <h3>{{\'subject.subjectIsPrerequisite\' | translate}}</h3> <div ng-repeat="row in subject.primarySubjects | orderBy: currentLanguageNameField()"> <a class="md-body-1" ng-href="#/subject/{{row.id}}">{{currentLanguageNameField(row)}}</a> </div> </div> </div> </hois-collapsable> </div> <div layout="column" ng-if="!subjectProgram.id && subjectPrograms.length > 0"> <md-input-container flex> <label>{{\'subjectProgram.copySubjectProgram\' | translate}}</label> <md-select ng-model="selectedSubjectProgram" ng-change="getSubjectProgramData(selectedSubjectProgram)"> <md-option ng-value="program" ng-repeat="program in subjectPrograms">{{currentLanguageNameField(program)}}</md-option> </md-select> </md-input-container> <div>&nbsp;</div> </div> <md-input-container flex> <label>{{\'subjectProgram.independentStudy\' | translate}}</label> <textarea ng-model="subjectProgram.independentStudy" name="independentStudy" md-maxlength="20000" max-rows="10"></textarea> </md-input-container> <md-input-container flex> <label>{{\'subjectProgram.assessmentDescription\' | translate}}</label> <textarea ng-model="subjectProgram.assessmentDescription" name="assessmentDescription" md-maxlength="20000" max-rows="10"></textarea> </md-input-container> <md-input-container flex> <label>{{\'subjectProgram.studyLiterature\' | translate}}</label> <textarea ng-model="subjectProgram.studyLiterature" name="studyLiterature" md-maxlength="20000" max-rows="10"></textarea> </md-input-container> <br> <div flex class="study-content"> <fieldset tabindex="1"> <legend md-colors="{color: \'default-primary-800\'}" class="md-title-small">{{\'subjectProgram.studyContent\' | translate}}</legend> <div flex layout="row"> <span flex="30" class="common-label"></span> <hois-classifier-radio layout="row" ng-model="subjectProgram.studyContentType" name="studyContentType" model-value-attr="code" main-classifier-code="OPPETOOSISU" required class="md-primary"></hois-classifier-radio> </div> <div>&nbsp;</div> <div ng-show="subjectProgram.studyContentType === \'OPPETOOSISU_K\'" layout="column"> <md-table-container> <div layout="row" ng-repeat="sc in studyContentDt"> <md-input-container> <label>{{\'subjectProgram.date\' | translate}}</label> <md-datepicker ng-model="sc.studyDt" ng-required="subjectProgram.studyContentType === \'OPPETOOSISU_K\'"></md-datepicker> </md-input-container> <md-input-container flex="100"> <label>{{\'subjectProgram.description\' | translate}}</label> <textarea ng-model="sc.studyInfo" md-maxlength="4000" max-rows="10" ng-required="subjectProgram.studyContentType === \'OPPETOOSISU_K\'"></textarea> </md-input-container> <div layout="row" layout-align="center center" style="margin-left: 10px"> <a class="remove" ng-click="removeFromArray(studyContentDt, sc)">&times;</a> </div> </div> <div layout="row"> <md-button class="md-raised" ng-click="addStudyContentDt()" style="text-transform: none">{{\'main.button.addRow\' | translate}}</md-button> </div> </md-table-container> </div> <div ng-show="subjectProgram.studyContentType === \'OPPETOOSISU_N\'" layout="column"> <md-table-container> <div layout="row" ng-repeat="sc in studyContentWk"> <md-input-container flex="10"> <label>{{\'subjectProgram.week\' | translate}}</label> <input type="number" ng-model="sc.weekNr" min="0" max="999" pattern="^\\d+(\\.\\d{1})?$" ng-required="subjectProgram.studyContentType === \'OPPETOOSISU_N\'"> </md-input-container> <md-input-container flex> <label>{{\'subjectProgram.description\' | translate}}</label> <textarea ng-model="sc.studyInfo" md-maxlength="4000" max-rows="10" ng-required="subjectProgram.studyContentType === \'OPPETOOSISU_N\'"></textarea> </md-input-container> <div layout="row" layout-align="center center" style="margin-left: 10px"> <a class="remove" ng-click="removeFromArray(studyContentWk, sc)">&times;</a> </div> </div> <div layout="row"> <md-button class="md-raised" ng-click="addStudyContentWk()" style="text-transform: none">{{\'main.button.addRow\' | translate}}</md-button> </div> </md-table-container> </div> <div ng-show="subjectProgram.studyContentType === \'OPPETOOSISU_T\'" layout="column" flex> <md-input-container flex> <label>{{\'subjectProgram.description\' | translate}}</label> <textarea ng-model="subjectProgram.studyDescription" name="studyDescription" md-maxlength="20000" max-rows="10" ng-required="subjectProgram.studyContentType === \'OPPETOOSISU_T\'"></textarea> </md-input-container> </div> </fieldset> </div> <br> <div flex> <fieldset tabindex="2"> <legend md-colors="{color: \'default-primary-800\'}" class="md-title-small">{{\'subjectProgram.assessmentCriteria\' | translate}}</legend> <div>&nbsp;</div> <div ng-show="subject.assessment === \'HINDAMISVIIS_A\'" layout="column"> <md-input-container flex> <label>{{\'subjectProgram.passDescription\' | translate}}</label> <textarea ng-model="subjectProgram.passDescription" name="passDescription" md-maxlength="20000" max-rows="10" ng-required="subject.assessment === \'HINDAMISVIIS_A\'"></textarea> </md-input-container> <md-input-container flex> <label>{{\'subjectProgram.npassDescription\' | translate}}</label> <textarea ng-model="subjectProgram.npassDescription" name="npassDescription" md-maxlength="20000" max-rows="10" ng-required="subject.assessment === \'HINDAMISVIIS_A\'"></textarea> </md-input-container> </div> <div ng-show="subject.assessment === \'HINDAMISVIIS_E\'" layout="column" flex> <md-input-container flex> <label>{{\'subjectProgram.grade0Description\' | translate}}</label> <textarea ng-model="subjectProgram.grade0Description" name="grade0Description" md-maxlength="20000" max-rows="10" ng-required="subject.assessment === \'HINDAMISVIIS_E\'"></textarea> </md-input-container> <md-input-container flex> <label>{{\'subjectProgram.grade1Description\' | translate}}</label> <textarea ng-model="subjectProgram.grade1Description" name="grade1Description" md-maxlength="20000" max-rows="10" ng-required="subject.assessment === \'HINDAMISVIIS_E\'"></textarea> </md-input-container> <md-input-container flex> <label>{{\'subjectProgram.grade2Description\' | translate}}</label> <textarea ng-model="subjectProgram.grade2Description" name="grade2Description" md-maxlength="20000" max-rows="10" ng-required="subject.assessment === \'HINDAMISVIIS_E\'"></textarea> </md-input-container> <md-input-container flex> <label>{{\'subjectProgram.grade3Description\' | translate}}</label> <textarea ng-model="subjectProgram.grade3Description" name="grade3Description" md-maxlength="20000" max-rows="10" ng-required="subject.assessment === \'HINDAMISVIIS_E\'"></textarea> </md-input-container> <md-input-container flex> <label>{{\'subjectProgram.grade4Description\' | translate}}</label> <textarea ng-model="subjectProgram.grade4Description" name="grade4Description" md-maxlength="20000" max-rows="10" ng-required="subject.assessment === \'HINDAMISVIIS_E\'"></textarea> </md-input-container> <md-input-container flex> <label>{{\'subjectProgram.grade5Description\' | translate}}</label> <textarea ng-model="subjectProgram.grade5Description" name="grade5Description" md-maxlength="20000" max-rows="10" ng-required="subject.assessment === \'HINDAMISVIIS_E\'"></textarea> </md-input-container> </div> <div ng-show="subject.assessment === \'HINDAMISVIIS_H\'" layout="column" flex> <md-input-container flex> <label>{{\'subjectProgram.grade3Description\' | translate}}</label> <textarea ng-model="subjectProgram.grade3Description" name="grade3Description" md-maxlength="20000" max-rows="10" ng-required="subject.assessment === \'HINDAMISVIIS_H\'"></textarea> </md-input-container> <md-input-container flex> <label>{{\'subjectProgram.grade4Description\' | translate}}</label> <textarea ng-model="subjectProgram.grade4Description" name="grade4Description" md-maxlength="20000" max-rows="10" ng-required="subject.assessment === \'HINDAMISVIIS_H\'"></textarea> </md-input-container> <md-input-container flex> <label>{{\'subjectProgram.grade5Description\' | translate}}</label> <textarea ng-model="subjectProgram.grade5Description" name="grade5Description" md-maxlength="20000" max-rows="10" ng-required="subject.assessment === \'HINDAMISVIIS_H\'"></textarea> </md-input-container> </div> </fieldset> </div> <br> <div flex> <fieldset tabindex="3"> <legend md-colors="{color: \'default-primary-800\'}" class="md-title-small">{{\'subjectProgram.publicLevel\' | translate}}</legend> <div>&nbsp;</div> <div layout="column"> <md-checkbox ng-model="subjectProgram.publicAll" aria-label="{{\'subjectProgram.publicAll\' | translate}}"> {{\'subjectProgram.publicAll\' | translate}} </md-checkbox> <md-checkbox ng-model="subjectProgram.publicHois" aria-label="{{\'subjectProgram.publicHois\' | translate}}"> {{\'subjectProgram.publicHois\' | translate}} </md-checkbox> <md-checkbox ng-model="subjectProgram.publicStudent" aria-label="{{\'subjectProgram.publicStudent\' | translate}}"> {{\'subjectProgram.publicStudent\' | translate}} </md-checkbox> </div> </fieldset> </div> <br> <div flex class="form-readonly" layout="column"> <md-input-container flex> <label class="textInput">{{\'subjectProgram.status\' | translate}}</label> <hois-classifier-value ng-model="subjectProgram.status" main-classifier-code="AINEPROGRAMM_STAATUS"> </hois-classifier-value></md-input-container> <md-input-container flex ng-if="subjectProgram.status === \'AINEPROGRAMM_STAATUS_K\'"> <label>{{\'subjectProgram.confirmedDate\' | translate}}</label> <hois-value value="subjectProgram.confirmed | hoisDateTime"></hois-value> </md-input-container> <md-input-container flex ng-if="subjectProgram.status === \'AINEPROGRAMM_STAATUS_K\'"> <label>{{\'subjectProgram.confirmedBy\' | translate}}</label> <hois-value value="subjectProgram.confirmedBy"></hois-value> </md-input-container> </div> <br> </div> <md-button class="md-raised md-primary" ng-click="save()">{{"main.button.save" | translate}}</md-button> <md-button class="md-raised" ng-if="subjectProgram.status === \'AINEPROGRAMM_STAATUS_I\'" ng-click="completeProgram()">{{"subjectProgram.operation.complete.label" | translate}}</md-button> <md-button class="md-raised" ng-if="subjectProgram.id" ng-href="{{pdfUrl()}}" target="_blank">{{"main.button.print" | translate}}</md-button> <md-button class="md-raised" ng-if="subjectProgram.id" ng-click="delete()">{{\'main.button.delete\' | translate}}</md-button> <md-button class="md-raised" ng-click="back(getDefaultBack(), subjectProgramForm)">{{"main.button.back" | translate}}</md-button> </form> </div> <style>.link-no-underline {\r\n    text-decoration: none;\r\n  }\r\n  .link-disabled {\r\n    color: #d7dde5;\r\n  }\r\n  .nomargin .form-readonly .md-input-has-value {\r\n    margin-top: 18px !important;\r\n  }\r\n  .study-content .md-input.md-datepicker-input {\r\n    height: 47px !important;\r\n  }\r\n  .study-content input[type="number"] {\r\n    height: 47px !important;\r\n  }</style>'),a.put("subjectProgram/subject.program.list.html",'<div class="ois-form-layout-padding"> <div flex> <fieldset> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'main.searchlabel\' | translate}}</legend> <form name="searchForm" ng-submit="load()" class="nomargin" layout="column"> <div layout-gt-sm="row" layout="column"> <md-input-container flex-gt-sm="45" flex="100"> <label class="textInput">{{\'subjectProgram.search.subject\' | translate}}</label> <md-select ng-model="criteria.subject"> <md-option value=""></md-option> <md-option ng-value="subject.id" ng-repeat="subject in subjects | orderBy: currentLanguageNameField()">{{currentLanguageNameField(subject)}}</md-option> </md-select> </md-input-container> <md-input-container flex-gt-sm="50" flex="100" flex-offset-gt-sm="5"> <label class="textInput">{{\'subjectProgram.search.studyPeriod\' | translate}}</label> <md-select ng-model="criteria.studyPeriod"> <md-option ng-value="period.id" ng-repeat="period in studyPeriods | orderBy: currentLanguageNameField()">{{currentLanguageNameField(period)}}</md-option> </md-select> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-autocomplete name="teacher" md-selected-item="criteria.teacher" md-search-text="teacherName" md-items="teacher in searchTeacher(teacherName)" md-item-text="currentLanguageNameField(teacher)" md-min-length="1" md-floating-label="{{\'subjectProgram.search.teacher\' | translate}}" md-no-cache class="small-margin" flex-gt-sm="45" flex="100"> <md-item-template> <span md-highlight-text="teacherName" md-highlight-flags="^i">{{currentLanguageNameField(teacher)}}</span> </md-item-template> <md-not-found> {{\'main.messages.error.notFound\' | translate}} </md-not-found> </md-autocomplete> <md-input-container flex-gt-sm="50" flex="100" flex-offset-gt-sm="5"> <label>{{\'subjectProgram.search.status\' | translate}}</label> <md-select ng-model="criteria.status"> <md-option ng-value=""></md-option> <md-option ng-value="status.code" ng-repeat="status in statusOptions" ng-if="status.code !== \'AINEPROGRAMM_STAATUS_L\'">{{currentLanguageNameField(status)}}</md-option> </md-select> </md-input-container> </div> <div layout="row"> <md-button type="submit" class="md-raised md-primary">{{\'main.button.search\' | translate}}</md-button> <md-button class="md-raised" ng-click="clearCriteriaBefore()">{{\'main.button.clear\' | translate}}</md-button> </div> </form> </fieldset> </div> </div> <div layout-padding> <div flex> <md-table-container> <table md-table md-progress="tabledata.$promise"> <thead md-head md-order="criteria.order" md-on-reorder="loadData"> <tr md-row> <th md-column style="width:40%">{{\'subjectProgram.search.subject\' | translate}}</th> <th md-column style="width:25%">{{\'subjectProgram.search.studyPeriod\' | translate}}</th> <th md-column style="width:20%">{{\'subjectProgram.search.teacher\' | translate}}</th> <th md-column style="width:10%">{{\'subjectProgram.search.status\' | translate}}</th> <th md-column style="width:5%"></th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="row in tabledata.content" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell>{{currentLanguageNameField(row.subject)}}</td> <td md-cell>{{getStudyPeriodName(row.studyPeriod)}}</td> <td md-cell>{{currentLanguageNameField(row.teacher)}}</td> <td md-cell> <hois-classifier-value ng-model="row.status" main-classifier-code="AINEPROGRAMM_STAATUS"></hois-classifier-value> </td> <td md-cell> <md-button md-no-ink class="md-primary change-button" ng-href="#/subjectProgram/{{::row.subject.id}}/{{::row.subjectStudyPeriod}}/programs/{{::row.id}}/view">{{\'main.button.view\' | translate}}</md-button> </td> </tr> </tbody> </table> </md-table-container> <md-table-pagination md-limit="criteria.size" md-limit-options="[10, 20, 50]" md-page="criteria.page" md-total="{{tabledata.totalElements}}" md-on-paginate="loadData" md-label="{page: \'{{\'main.page\' | translate}}:\', rowsPerPage: \'{{\'main.rowPerPage\' | translate}}:\', of: \'{{\'main.of\' | translate}}\'}" md-page-select></md-table-pagination> </div> </div>'),a.put("subjectProgram/subject.program.view.html",'<div class="ois-form-layout-padding nomargin"> <form ng-cloak name="subjectProgramForm"> <div layout="column" ng-cloak class="form-readonly"> <div flex> <div flex layout="column" ng-if="subjectProgram.rejectInfo"> <md-input-container flex="100" flex-gt-xs="60" class="md-input-invalid"> <label class="textInput">{{\'subjectProgram.rejectInfo\' | translate}}</label> <hois-value value="subjectProgram.rejectInfo"></hois-value> </md-input-container> </div> <div flex layout="column" layout-gt-xs="row"> <md-input-container flex="100" flex-gt-xs="60"> <label class="textInput">{{\'subjectProgram.subjectName\' | translate}}</label> <hois-value value="currentLanguageNameField(subject)"></hois-value> </md-input-container> <md-input-container flex="100" flex-gt-xs="20"> <label class="textInput">{{\'subject.code\' | translate}}</label> <hois-value value="subject.code"></hois-value> </md-input-container> <md-input-container flex="100" flex-gt-xs="20"> <label class="textInput">{{\'subject.credits\' | translate}}</label> <hois-value value="subject.credits"></hois-value> </md-input-container> </div> <hois-collapsable class="hois-collapse2" expanded="false"> <hois-collapsable-header> <span>{{\'subjectProgram.syllabus\' | translate}}</span> </hois-collapsable-header> <div flex layout="column"> <md-input-container flex style="margin-top: 0 !important"> <label class="textInput">{{\'subject.assessment\' | translate}}</label> <hois-classifier-value ng-model="subject.assessment" main-classifier-code="HINDAMISVIIS"></hois-classifier-value> </md-input-container> <md-input-container flex> <label class="textInput">{{\'subject.assessmentDescription\' | translate}}</label> <hois-value value="subject.assessmentDescription"></hois-value> </md-input-container> <md-input-container flex> <label class="textInput">{{\'subject.language\' | translate}}</label> <hois-classifier-value ng-model="subject.languages" main-classifier-code="OPPEKEEL"></hois-classifier-value> </md-input-container> <md-input-container flex> <label>{{\'subject.objectivesEt\' | translate}}</label> <hois-value value="subject.objectivesEt"></hois-value> </md-input-container> <md-input-container flex> <label>{{\'subject.objectivesEn\' | translate}}</label> <hois-value value="subject.objectivesEn"></hois-value> </md-input-container> <md-input-container flex> <label>{{\'subject.outcomesEt\' | translate}}</label> <hois-value value="subject.outcomesEt"></hois-value> </md-input-container> <md-input-container flex> <label>{{\'subject.outcomesEn\' | translate}}</label> <hois-value value="subject.outcomesEn"></hois-value> </md-input-container> <md-input-container flex> <label>{{\'subject.descriptionEt\' | translate}}</label> <hois-value value="subject.descriptionEt"></hois-value> </md-input-container> <md-input-container flex> <label>{{\'subject.descriptionEn\' | translate}}</label> <hois-value value="subject.descriptionEn"></hois-value> </md-input-container> <md-input-container flex> <label>{{\'subject.independentStudyEt\' | translate}}</label> <hois-value value="subject.independentStudyEt"></hois-value> </md-input-container> <md-input-container flex> <label>{{\'subject.independentStudyEn\' | translate}}</label> <hois-value value="subject.independentStudyEn"></hois-value> </md-input-container> <md-input-container flex> <label>{{\'subject.studyLiterature\' | translate}}</label> <hois-value value="subject.studyLiterature"></hois-value> </md-input-container> <md-input-container flex> <label>{{\'subject.evaluationEt\' | translate}}</label> <hois-value value="subject.evaluationEt"></hois-value> </md-input-container> <md-input-container flex> <label>{{\'subject.evaluationEn\' | translate}}</label> <hois-value value="subject.evaluationEn"></hois-value> </md-input-container> <md-input-container flex> <label>{{\'subject.additionalInfo\' | translate}}</label> <hois-value value="subject.additionalInfo"></hois-value> </md-input-container> <md-input-container ng-if="subject.mandatoryPrerequisiteSubjects.length > 0"> <label>{{\'subject.mandatoryPrerequisiteSubjects\' | translate}}</label> <hois-value ng-repeat="it in subject.mandatoryPrerequisiteSubjects" value="currentLanguageNameField(it)" href-value="\'#/subject/\'+it.id"></hois-value> </md-input-container> <md-input-container ng-if="subject.recommendedPrerequisiteSubjects.length > 0"> <label>{{\'subject.recommendedPrerequisiteSubjects\' | translate}}</label> <hois-value ng-repeat="it in subject.recommendedPrerequisiteSubjects" value="currentLanguageNameField(it)" href-value="\'#/subject/\'+it.id"></hois-value> </md-input-container> <md-input-container ng-if="subject.substituteSubjects.length > 0"> <label>{{\'subject.substituteSubjects\' | translate}}</label> <hois-value ng-repeat="it in subject.substituteSubjects" value="currentLanguageNameField(it)" href-value="\'#/subject/\'+it.id"></hois-value> </md-input-container> <br> <md-input-container flex> <label>{{\'subject.linkDepartment\' | translate}}</label> <hois-value value="currentLanguageNameField(subject.schoolDepartment)"></hois-value> </md-input-container> <md-input-container flex> <label>{{\'subject.isPractice\' | translate}}</label> <hois-value value="subject.isPractice ? \'main.yes\' : \'main.no\' | translate"></hois-value> </md-input-container> <md-input-container> <label>{{\'subject.status\' | translate}}</label> <hois-classifier-value ng-model="subject.status" main-classifier-code="AINESTAATUS"></hois-classifier-value> </md-input-container> <div layout="column" ng-if="subject.primarySubjects.length > 0"> <h3>{{\'subject.subjectIsPrerequisite\' | translate}}</h3> <div ng-repeat="row in subject.primarySubjects | orderBy: currentLanguageNameField()"> <a class="md-body-1" ng-href="#/subject/{{row.id}}">{{currentLanguageNameField(row)}}</a> </div> </div> </div> </hois-collapsable> </div> <md-input-container flex> <label>{{\'subjectProgram.independentStudy\' | translate}}</label> <hois-value value="subjectProgram.independentStudy"></hois-value> </md-input-container> <md-input-container flex> <label>{{\'subjectProgram.assessmentDescription\' | translate}}</label> <hois-value value="subjectProgram.assessmentDescription"></hois-value> </md-input-container> <md-input-container flex> <label>{{\'subjectProgram.studyLiterature\' | translate}}</label> <hois-value value="subjectProgram.studyLiterature"></hois-value> </md-input-container> <br> <div flex class="study-content"> <fieldset tabindex="1"> <legend md-colors="{color: \'default-primary-800\'}" class="md-title-small">{{\'subjectProgram.studyContent\' | translate}}</legend> <div flex layout="row"> <span flex="30" class="common-label"></span> <hois-classifier-radio layout="row" ng-model="subjectProgram.studyContentType" name="studyContentType" model-value-attr="code" main-classifier-code="OPPETOOSISU" disabled class="md-primary"></hois-classifier-radio> </div> <div ng-show="subjectProgram.studyContentType === \'OPPETOOSISU_K\'" layout="column"> <md-table-container> <div layout="row" ng-repeat="sc in studyContentDt"> <md-input-container> <label>{{\'subjectProgram.date\' | translate}}</label> <hois-value value="sc.studyDt | hoisDate"> </hois-value></md-input-container> <md-input-container flex="100"> <label>{{\'subjectProgram.description\' | translate}}</label> <hois-value value="sc.studyInfo"></hois-value> </md-input-container> </div> </md-table-container> </div> <div ng-show="subjectProgram.studyContentType === \'OPPETOOSISU_N\'" layout="column"> <div layout="row" ng-repeat="sc in studyContentWk"> <md-input-container flex="10"> <label>{{\'subjectProgram.week\' | translate}}</label> <hois-value value="sc.weekNr"></hois-value> </md-input-container> <md-input-container flex> <label>{{\'subjectProgram.description\' | translate}}</label> <hois-value value="sc.studyInfo"></hois-value> </md-input-container> </div> </div> <div ng-show="subjectProgram.studyContentType === \'OPPETOOSISU_T\'" layout="column" flex> <md-input-container flex> <label>{{\'subjectProgram.description\' | translate}}</label> <hois-value value="subjectProgram.studyDescription"></hois-value> </md-input-container> </div> </fieldset> </div> <br> <div flex> <fieldset tabindex="2"> <legend md-colors="{color: \'default-primary-800\'}" class="md-title-small">{{\'subjectProgram.assessmentCriteria\' | translate}}</legend> <div>&nbsp;</div> <div ng-show="subject.assessment === \'HINDAMISVIIS_A\'" layout="column"> <md-input-container flex> <label>{{\'subjectProgram.passDescription\' | translate}}</label> <hois-value value="subjectProgram.passDescription"></hois-value> </md-input-container> <md-input-container flex> <label>{{\'subjectProgram.npassDescription\' | translate}}</label> <hois-value value="subjectProgram.npassDescription"></hois-value> </md-input-container> </div> <div ng-show="subject.assessment === \'HINDAMISVIIS_E\'" layout="column" flex> <md-input-container flex> <label>{{\'subjectProgram.grade0Description\' | translate}}</label> <hois-value value="subjectProgram.grade0Description"></hois-value> </md-input-container> <md-input-container flex> <label>{{\'subjectProgram.grade1Description\' | translate}}</label> <hois-value value="subjectProgram.grade1Description"></hois-value> </md-input-container> <md-input-container flex> <label>{{\'subjectProgram.grade2Description\' | translate}}</label> <hois-value value="subjectProgram.grade2Description"></hois-value> </md-input-container> <md-input-container flex> <label>{{\'subjectProgram.grade3Description\' | translate}}</label> <hois-value value="subjectProgram.grade3Description"></hois-value> </md-input-container> <md-input-container flex> <label>{{\'subjectProgram.grade4Description\' | translate}}</label> <hois-value value="subjectProgram.grade4Description"></hois-value> </md-input-container> <md-input-container flex> <label>{{\'subjectProgram.grade5Description\' | translate}}</label> <hois-value value="subjectProgram.grade5Description"></hois-value> </md-input-container> </div> <div ng-show="subject.assessment === \'HINDAMISVIIS_H\'" layout="column" flex> <md-input-container flex> <label>{{\'subjectProgram.grade3Description\' | translate}}</label> <hois-value value="subjectProgram.grade3Description"></hois-value> </md-input-container> <md-input-container flex> <label>{{\'subjectProgram.grade4Description\' | translate}}</label> <hois-value value="subjectProgram.grade4Description"></hois-value> </md-input-container> <md-input-container flex> <label>{{\'subjectProgram.grade5Description\' | translate}}</label> <hois-value value="subjectProgram.grade5Description"></hois-value> </md-input-container> </div> </fieldset> </div> <br> <div flex> <fieldset tabindex="3"> <legend md-colors="{color: \'default-primary-800\'}" class="md-title-small">{{\'subjectProgram.publicLevel\' | translate}}</legend> <div>&nbsp;</div> <div layout="column"> <md-checkbox disabled ng-model="subjectProgram.publicAll" aria-label="{{\'subjectProgram.publicAll\' | translate}}"> {{\'subjectProgram.publicAll\' | translate}} </md-checkbox> <md-checkbox disabled ng-model="subjectProgram.publicHois" aria-label="{{\'subjectProgram.publicHois\' | translate}}"> {{\'subjectProgram.publicHois\' | translate}} </md-checkbox> <md-checkbox disabled ng-model="subjectProgram.publicStudent" aria-label="{{\'subjectProgram.publicStudent\' | translate}}"> {{\'subjectProgram.publicStudent\' | translate}} </md-checkbox> </div> </fieldset> </div> <br> <div flex class="form-readonly" layout="column"> <md-input-container flex> <label class="textInput">{{\'subjectProgram.status\' | translate}}</label> <hois-classifier-value ng-model="subjectProgram.status" main-classifier-code="AINEPROGRAMM_STAATUS"> </hois-classifier-value></md-input-container> <md-input-container flex ng-if="subjectProgram.status === \'AINEPROGRAMM_STAATUS_K\'"> <label>{{\'subjectProgram.confirmedDate\' | translate}}</label> <hois-value value="subjectProgram.confirmed | hoisDateTime"></hois-value> </md-input-container> <md-input-container flex ng-if="subjectProgram.status === \'AINEPROGRAMM_STAATUS_K\'"> <label>{{\'subjectProgram.confirmedBy\' | translate}}</label> <hois-value value="subjectProgram.confirmedBy"></hois-value> </md-input-container> </div> <br> </div> <md-button class="md-raised md-primary" ng-if="subjectProgram.id && subjectProgram.subjectStudyPeriodTeacher.teacherId === userTeacherId" ng-click="edit()">{{"main.button.change" | translate}}</md-button> <md-button class="md-raised" ng-if="subjectProgram.id && isSupervisor && subjectProgram.status === \'AINEPROGRAMM_STAATUS_V\'" ng-click="confirm()">{{"main.button.confirm" | translate}}</md-button> <md-button class="md-raised" ng-if="subjectProgram.id && isSupervisor && subjectProgram.status !== \'AINEPROGRAMM_STAATUS_I\'" ng-click="openRejectDialog()">{{"subjectProgram.operation.reject.label" | translate}}</md-button> <md-button class="md-raised" ng-if="subjectProgram.id" ng-href="{{pdfUrl()}}" target="_blank">{{"main.button.print" | translate}}</md-button> <md-button class="md-raised" ng-click="back(getDefaultBack())">{{"main.button.back" | translate}}</md-button> </form> </div> <style>.link-no-underline {\r\n    text-decoration: none;\r\n  }\r\n\r\n  .link-disabled {\r\n    color: #d7dde5;\r\n  }\r\n  .nomargin .form-readonly .md-input-has-value {\r\n    margin-top: 18px !important;\r\n  }</style>'),
a.put("subjectStudyPeriod/subject.study.period.edit.html",'<div layout="column" layout-padding> <form name="subjectStudyPeriodEditForm"> <div layout="column"> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="45" flex-sm="100" flex-xs="100"> <label>{{\'subjectStudyPeriod.studyPeriod\' | translate}}</label> <hois-select ng-model="record.studyPeriod" values="studyPeriods" disabled required></hois-select> </md-input-container> <md-input-container flex="50" flex-sm="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'subjectStudyPeriod.nameCode\' | translate}}</label> <hois-select ng-model="record.subject" values="subjects" ng-disabled="disableSubject" required></hois-select> </md-input-container> </div> <!--\r\n                hois-autocomplete is not suitable for this case as it has md-require-match attribute.\r\n                This autocomplete is supposed to be cleared after selecting an item as multiple teachers can be added\r\n            --> <md-autocomplete name="teacherInput" md-selected-item="teacher" md-search-text="queryText" md-items="item in querySearch(queryText)" md-item-text="item.nameEt" md-min-length="3" md-floating-label="{{\'subjectStudyPeriodTeacher.teacher\' | translate}} *" ng-model="queryText" md-no-cache class="small-margin" md-selected-item-change="addTeacher(teacher)"> <md-item-template> <span md-highlight-text="queryText" md-highlight-flags="^i">{{item.nameEt}}</span> </md-item-template> <md-not-found> {{\'main.messages.error.notFound\' | translate}} </md-not-found> </md-autocomplete> <table md-table class="secondary-table"> <tbody md-body> <tr md-row ng-repeat="teacher in record.teachers" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell>{{teacher.name}}</td> <td md-cell ng-hide="record.teachers.length === 1"> <md-checkbox ng-model="teacher.isSignatory" aria-label="{{\'subjectStudyPeriodTeacher.isSignatory\' | translate}}"> {{\'subjectStudyPeriodTeacher.isSignatory\' | translate}} </md-checkbox> </td> <td md-cell> <md-button class="remove nomargin" ng-click="removeTeacher(teacher)" ng-show="obligatoryTeacher !== teacher.teacherId">&times;</md-button> </td> </tr> </tbody> </table> <div>&nbsp;</div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="45" flex-sm="100" flex-xs="100" ng-if="!hasObligatoryStudentGroup"> <label>{{\'subjectStudyPeriod.studentGroups\' | translate}}</label> <hois-select ng-model="record.studentGroups" values="studentGroups" multiple ng-required="record.declarationType === \'DEKLARATSIOON_KOIK\'"></hois-select> </md-input-container> <md-input-container flex="10" flex-sm="100" flex-xs="100" ng-if="hasObligatoryStudentGroup"> <label>{{\'subjectStudyPeriod.studentGroupPreselected\' | translate}}</label> <input type="text" ng-model="studentGroup.code" readonly> </md-input-container> <md-input-container flex="30" flex-sm="100" flex-xs="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0" ng-if="hasObligatoryStudentGroup"> <label>{{\'subjectStudyPeriod.otherStudentGroups\' | translate}}</label> <hois-select ng-model="record.studentGroups" values="studentGroups" multiple></hois-select> </md-input-container> <md-input-container flex="50" flex-sm="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'subjectStudyPeriod.proportion\' | translate}}</label> <hois-classifier-select ng-model="record.groupProportion" model-value-attr="code" main-classifier-code="PAEVIK_GRUPI_JAOTUS" required></hois-classifier-select> </md-input-container> </div> <md-input-container> <label>{{\'subjectStudyPeriod.addInfo\' | translate}}</label> <textarea ng-model="record.addInfo" md-maxlength="20000" max-rows="2"></textarea> </md-input-container> <md-input-container> <label>{{\'subjectStudyPeriod.declaration\' | translate}}</label> <hois-classifier-select ng-model="record.declarationType" model-value-attr="code" main-classifier-code="DEKLARATSIOON"></hois-classifier-select> </md-input-container> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="45" flex-sm="100" flex-xs="100" ng-if="record.id"> <label>{{\'moodle.courseId\' | translate}}</label> <input type="number" ng-model="record.moodleCourseId"> </md-input-container> </div> </div> <div layout="row"> <md-button class="md-raised md-primary" ng-click="save()">{{\'main.button.save\' | translate}}</md-button> <md-button class="md-raised" ng-click="back(\'#/subjectStudyPeriods\', subjectStudyPeriodEditForm)">{{\'main.button.back\' | translate}}</md-button> <md-button class="md-raised md-default" ng-click="delete()" ng-if="record.id">{{\'main.button.delete\' | translate}}</md-button> </div> </form> </div>'),a.put("subjectStudyPeriod/subject.study.period.search.html",'<div class="ois-form-layout-padding ois-form-layout" ng-cloak> <fieldset> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'main.searchlabel\' | translate}}</legend> <form name="searchForm" ng-submit="load()" layout="column" novalidate> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="45" flex-sm="100" flex-xs="100"> <label class="textInput">{{\'subjectStudyPeriod.nameCode\' | translate}}</label> <input ng-model="criteria.subjectNameAndCode" type="text" md-maxlength="255"> </md-input-container> <md-input-container flex="50" flex-sm="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0" ng-if="auth.isAdmin()"> <label class="textInput">{{\'subjectStudyPeriod.teachersFullname\' | translate}}</label> <input ng-model="criteria.teachersFullname" type="text" md-maxlength="255"> </md-input-container> <div flex="50" flex-sm="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0" ng-if="auth.isTeacher()"> <hois-autocomplete ng-model="criteria.studentObject" method="students" name="student" label="student.label"></hois-autocomplete> </div> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="45" flex-sm="100" flex-xs="100"> <label>{{\'subjectStudyPeriod.studyPeriod\' | translate}}</label> <hois-select ng-model="criteria.studyPeriods" values="studyPeriods" required></hois-select> </md-input-container> <div flex="50" flex-sm="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0" ng-if="auth.isAdmin()"> <hois-autocomplete ng-model="criteria.studentObject" method="students" name="student" label="student.label"></hois-autocomplete> </div> <md-input-container flex-gt-sm="50" flex="100" flex-offset-gt-sm="5" ng-if="auth.isTeacher()"> <label>{{\'subjectStudyPeriod.programStatus\' | translate}}</label> <md-select ng-model="criteria.programStatus"> <md-option ng-value=""></md-option> <md-option ng-value="status.code" ng-repeat="status in statusOptions">{{currentLanguageNameField(status)}}</md-option> </md-select> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column" ng-if="auth.isAdmin()"> <md-input-container flex-gt-sm="45" flex="100"> <label>{{\'subjectStudyPeriod.programStatus\' | translate}}</label> <md-select ng-model="criteria.programStatus"> <md-option ng-value=""></md-option> <md-option ng-value="status.code" ng-repeat="status in statusOptions">{{currentLanguageNameField(status)}}</md-option> </md-select> </md-input-container> </div> <div layout="row"> <md-button type="submit" class="md-raised md-primary">{{\'main.button.search\' | translate}}</md-button> <md-button class="md-raised" ng-click="clearCriteria()">{{\'main.button.clear\' | translate}}</md-button> </div> </form> </fieldset> </div> <div layout-padding> <div flex> <md-table-container> <table md-table md-progress="tabledata.$promise"> <thead md-head md-order="criteria.order" md-on-reorder="loadData"> <tr md-row> <th md-column md-order-by="s.{{currentLanguageNameField()}},s.code">{{\'subjectStudyPeriod.nameCode\' | translate}}</th> <th md-column>{{\'subjectStudyPeriod.teachersFullname\' | translate}}</th> <th md-column md-order-by="sp.{{currentLanguageNameField()}}">{{\'subjectStudyPeriod.studyPeriod\' | translate}}</th> <th md-column md-order-by="declared_students">{{\'subjectStudyPeriod.declaredStudentsNumber\' | translate}}</th> <th md-column>{{\'subjectProgram.label\' | translate}}</th> <th md-column></th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="row in tabledata.content" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell><a href="#/subjectStudyPeriod/{{::row.id}}/view">{{currentLanguageNameField(row.subject)}}</a></td> <td md-cell> <table> <tr ng-repeat="teacher in row.teachers | orderBy"> <td><a href="#/subjectStudyPeriod/{{::row.id}}/view">{{teacher}}</a></td> </tr> </table> </td> <td md-cell>{{currentLanguageNameField(row.studyPeriod)}}</td> <td md-cell><a href="#/subjectStudyPeriods/{{::row.id}}/midtermTasks/studentResults">{{::row.studentsNumber}}</a></td> <td md-cell> <p class="nomargin"> <hois-classifier-value ng-model="row.subjectProgramStatus" main-classifier-code="AINEPROGRAMM_STAATUS"></hois-classifier-value> </p> <div ng-if="auth.isTeacher()"> <md-button md-no-ink class="md-primary change-button" ng-if="row.subjectProgramStatus === \'AINEPROGRAMM_STAATUS_L\'" style="padding:0 !important; margin: 0 !important; min-width: 0 !important" ng-href="#/subjectProgram/{{::row.subject.id}}/{{::row.id}}/periods/new">{{\'main.button.create\' | translate}}</md-button> <md-button md-no-ink class="md-primary change-button" ng-if="row.subjectProgramStatus === \'AINEPROGRAMM_STAATUS_I\'" style="padding:0 !important; margin: 0 !important; min-width: 0 !important" ng-href="#/subjectProgram/{{::row.subject.id}}/{{::row.id}}/periods/{{::row.subjectProgramId}}/edit">{{\'main.button.change\' | translate}}</md-button> <md-button md-no-ink class="md-primary change-button" ng-if="row.subjectProgramStatus === \'AINEPROGRAMM_STAATUS_V\' || row.subjectProgramStatus === \'AINEPROGRAMM_STAATUS_K\'" style="padding:0 !important; margin: 0 !important; min-width: 0 !important" ng-href="#/subjectProgram/{{::row.subject.id}}/{{::row.id}}/periods/{{::row.subjectProgramId}}/view">{{\'main.button.view\' | translate}}</md-button> </div> </td> <td md-cell> <md-button md-no-ink class="md-primary change-button" ng-if="isAuthorized([\'ROLE_OIGUS_M_TEEMAOIGUS_AINEOPPETAJA\', \'ROLE_OIGUS_M_TEEMAOIGUS_PAEVIK\'])" ng-href="#/subjectStudyPeriod/{{::row.id}}/edit">{{\'main.button.change\' | translate}}</md-button> </td> </tr> </tbody> </table> </md-table-container> <md-table-pagination md-limit="criteria.size" md-limit-options="[10, 20, 50]" md-page="criteria.page" md-total="{{tabledata.totalElements}}" md-on-paginate="loadData" md-label="{page: \'{{\'main.page\' | translate}}:\', rowsPerPage: \'{{\'main.rowPerPage\' | translate}}:\', of: \'{{\'main.of\' | translate}}\'}" md-page-select></md-table-pagination> </div> </div>'),a.put("subjectStudyPeriod/subject.study.period.view.html",'<div layout="column" layout-padding> <form name="subjectStudyPeriodEditForm"> <div layout="column" class="form-readonly"> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="45" flex-sm="100" flex-xs="100"> <label>{{\'subjectStudyPeriod.studyPeriod\' | translate}}</label> <hois-select ng-model="record.studyPeriod" values="studyPeriods" disabled required></hois-select> </md-input-container> <md-input-container flex="50" flex-sm="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'subjectStudyPeriod.nameCode\' | translate}}</label> <hois-select ng-model="record.subject" values="subjects" disabled required></hois-select> </md-input-container> </div> <h2 ng-show="record.teachers.length > 0">{{\'subjectStudyPeriod.teacher\' | translate}}</h2> <table md-table class="secondary-table"> <tbody md-body> <tr md-row ng-repeat="teacher in record.teachers" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell>{{teacher.name}}</td> <td md-cell ng-hide="record.teachers.length === 1"> <md-checkbox ng-model="teacher.isSignatory" disabled aria-label="{{\'subjectStudyPeriodTeacher.isSignatory\' | translate}}"> {{\'subjectStudyPeriodTeacher.isSignatory\' | translate}} </md-checkbox> </td> </tr> </tbody> </table> <div>&nbsp;</div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="45" flex-sm="100" flex-xs="100"> <label>{{\'subjectStudyPeriod.studentGroups\' | translate}}</label> <hois-select ng-model="record.studentGroups" values="studentGroups" multiple disabled></hois-select> </md-input-container> <md-input-container flex="50" flex-sm="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'subjectStudyPeriod.proportion\' | translate}}</label> <hois-classifier-select ng-model="record.groupProportion" model-value-attr="code" main-classifier-code="PAEVIK_GRUPI_JAOTUS" required disabled></hois-classifier-select> <!--<hois-classifier-value ng-model="record.groupProportion" main-classifier-code="PAEVIK_GRUPI_JAOTUS"></hois-classifier-value>--> </md-input-container> </div> <md-input-container> <label>{{\'subjectStudyPeriod.addInfo\' | translate}}</label> <hois-value value="record.addInfo"></hois-value> </md-input-container> <md-input-container> <label>{{\'subjectStudyPeriod.declaration\' | translate}}</label> <hois-classifier-value ng-model="record.declarationType" main-classifier-code="DEKLARATSIOON"></hois-classifier-value> </md-input-container> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="45" flex-sm="100" flex-xs="100"> <label>{{\'moodle.courseId\' | translate}}</label> <hois-value value="record.moodleCourseId"></hois-value> </md-input-container> </div> </div> <div layout="row"> <md-button class="md-primary md-raised" ng-if="isAuthorized([\'ROLE_OIGUS_M_TEEMAOIGUS_AINEOPPETAJA\', \'ROLE_OIGUS_M_TEEMAOIGUS_PAEVIK\'])" ng-href="#/subjectStudyPeriod/{{::record.id}}/edit">{{\'main.button.change\' | translate}}</md-button> <md-button class="md-raised" ng-click="back(\'#/subjectStudyPeriods\')">{{\'main.button.back\' | translate}}</md-button> </div> </form> </div>'),a.put("subjectStudyPeriodPlan/subject.study.period.plan.edit.html",'<div layout="column" layout-padding> <form name="subjectStudyPeriodPlanEditForm"> <div layout="column"> <div layout="row" layout-sm="column" layout-xs="column" class="form-readonly"> <md-input-container flex="45" flex-sm="100" flex-xs="100"> <label>{{\'subjectStudyPeriodPlan.studyPeriod\' | translate}}</label> <hois-value value="currentLanguageNameField(studyPeriod)"></hois-value> </md-input-container> <md-input-container flex="45" flex-sm="100" flex-xs="100"> <label>{{\'subjectStudyPeriodPlan.subject\' | translate}}</label> <hois-value value="currentLanguageNameField(subject)"></hois-value> </md-input-container> </div> <h2>{{\'subjectStudyPeriodPlan.volumes\' | translate}}</h2> <table md-table class="secondary-table"> <thead md-head> <tr md-row> <th md-column></th> <th md-column>{{\'subjectStudyPeriodPlan.volume\' | translate}}</th> <th md-column>{{\'subjectStudyPeriodPlan.isContact\' | translate}}</th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="capacity in record.capacities | orderBy: \'capacityType\'" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell> <hois-classifier-value ng-model="capacity.capacityType" main-classifier-code="MAHT"></hois-classifier-value> </td> <td md-cell> <md-input-container> <input ng-model="capacity.hours" type="number" min="0" max="1000" pattern="^\\d+$" ng-readonly="readOnly" aria-label="{{\'subjectStudyPeriodPlan.volume\' | translate}}"> </md-input-container> </td> <td md-cell> <md-checkbox ng-model="capacity.isContact" aria-label="{{\'subjectStudyPeriodPlan.isContact\' | translate}}" ng-disabled="readOnly"></md-checkbox> </td> </tr> </tbody> </table> <h2>{{\'subjectStudyPeriodPlan.volumeTotal\' | translate}}: {{getTotalCapacity()}}</h2> <br> <h2>{{\'subjectStudyPeriodPlan.validInCurriculums\' | translate}}</h2> <div layout="row"> <md-checkbox ng-repeat="curriculum in curriculums" ng-model="curriculum.selected" aria-label="{{\'subjectStudyPeriodPlan.validInCurriculums\' | translate}}" ng-disabled="readOnly"> {{currentLanguageNameField(curriculum)}} </md-checkbox> </div> <h2>{{\'subjectStudyPeriodPlan.validInStudyForms\' | translate}}</h2> <div layout="row"> <md-checkbox ng-repeat="studyForm in studyForms" ng-model="studyForm.selected" aria-label="{{\'subjectStudyPeriodPlan.validInCurriculums\' | translate}}" ng-disabled="readOnly"> {{currentLanguageNameField(studyForm)}} </md-checkbox> </div> </div> <div layout="row"> <md-button ng-if="!readOnly" class="md-raised md-primary" ng-click="save()">{{\'main.button.save\' | translate}}</md-button> <md-button ng-if="!readOnly && record.id" class="md-raised md-default" ng-click="delete()">{{\'main.button.delete\' | translate}}</md-button> <md-button class="md-raised" ng-click="back(\'/#/subjectStudyPeriodPlans\', subjectStudyPeriodPlanEditForm)">{{\'main.button.back\' | translate}}</md-button> </div> </form> </div>'),a.put("subjectStudyPeriodPlan/subject.study.period.plan.search.html",'<div class="ois-form-layout-padding ois-form-layout" ng-cloak> <p class="md-body-1"> <span ng-repeat="capacity in capacityTypes"> <span ng-if="$index !== 0">|</span> {{capacity.value.toUpperCase()}} - {{currentLanguageNameField(capacity)}} </span> </p> <br> <fieldset> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'main.searchlabel\' | translate}}</legend> <form name="searchForm" ng-submit="load()" layout="column" novalidate> <md-input-container> <label class="textInput">{{\'subjectStudyPeriodPlan.studyPeriod\' | translate}}</label> <hois-select ng-model="criteria.studyPeriod" values="studyPeriods" required></hois-select> </md-input-container> <md-input-container> <label class="textInput">{{\'subjectStudyPeriodPlan.curriculum\' | translate}}</label> <hois-select ng-model="criteria.curriculum" values="curriculums"></hois-select> </md-input-container> <hois-autocomplete ng-model="criteria.subjectObject" url="/subjectStudyPeriodPlans/subjects" name="subject" label="subjectStudyPeriodPlan.subject" additional-query-params="subjectQueryParams"></hois-autocomplete> <div layout="row"> <md-button type="submit" class="md-raised md-primary" ng-click="checkIfStudyPeriodIsPast()">{{\'main.button.search\' | translate}}</md-button> <md-button class="md-raised" ng-click="clearCriteria()">{{\'main.button.clear\' | translate}}</md-button> </div> </form> </fieldset> </div> <div layout-padding> <div flex> <md-table-container> <table md-table md-progress="tabledata.$promise"> <thead md-head md-order="criteria.order" md-on-reorder="loadData"> <tr md-row> <th md-column md-order-by="{{currentLanguageNameField()}}">{{\'subjectStudyPeriodPlan.subject\' | translate}} / {{\'subjectStudyPeriodPlan.curriculum\' | translate}}</th> <th md-column>{{\'subjectStudyPeriodPlan.studyForm\' | translate}}</th> <th md-column class="center" ng-repeat="capacityType in capacityTypes"> {{capacityType.value.toUpperCase()}} </th> <th md-column></th> </tr> </thead> <tbody md-body ng-repeat="row in tabledata.content"> <tr md-row ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell>{{currentLanguageNameField(row.subject)}}</td> <td md-cell colspan="{{capacityTypes.length + 1}}"></td> <td md-cell> <md-button md-no-ink class="md-primary change-button" ng-if="canEdit" ng-href="#/subjectStudyPeriodPlans/{{::row.subject.id}}/{{criteria.studyPeriod}}/new" ng-disabled="pastStudyPeriodSelected">{{\'subjectStudyPeriodPlan.add\' | translate}} </md-button> </td> </tr> <tr md-row ng-repeat="plan in row.plans | orderBy: \'id\'"> <td md-cell class="cell"> <span ng-repeat="curriculum in plan.curriculums | orderBy: \'id\'"> <span ng-if="$index > 0">, </span> {{currentLanguageNameField(curriculum)}} </span> </td> <td md-cell class="cell"> <span ng-repeat="studyForm in plan.studyForms | orderBy: currentLanguageNameField()"> <span ng-if="$index > 0">, </span> {{currentLanguageNameField(studyForm)}} </span> </td> <td md-cell class="cell center" ng-repeat="capacityType in capacityTypes"> {{getCapacitiesHours(capacityType.code, plan)}} </td> <td md-cell class="cell"> <md-button md-no-ink class="md-primary change-button" ng-if="canEdit" ng-href="#/subjectStudyPeriodPlans/{{::plan.id}}/edit" ng-disabled="pastStudyPeriodSelected">{{\'main.button.change\' | translate}} </md-button> </td> </tr> </tbody> </table> </md-table-container> <md-table-pagination md-limit="criteria.size" md-limit-options="[10, 20, 50]" md-page="criteria.page" md-total="{{tabledata.totalElements}}" md-on-paginate="loadData" md-label="{page: \'{{\'main.page\' | translate}}:\', rowsPerPage: \'{{\'main.rowPerPage\' | translate}}:\', of: \'{{\'main.of\' | translate}}\'}" md-page-select></md-table-pagination> </div> </div> <style>.cell {\r\n        border: 1px solid #e8ebef;\r\n    }\r\n    .center {\r\n        text-align: center !important;\r\n    }</style>'),a.put("teacher/teacher.continuing.education.edit.html",'<md-nav-bar md-selected-nav-item="currentNavItem" nav-bar-aria-label="main selection" ng-cloak> <md-nav-item ng-if="auth.isAdmin()" md-nav-href="#/teachers/{{::teacher.id}}/edit?_noback" name="teacher.data"> {{\'teacher.data\' | translate}}</md-nav-item> <md-nav-item ng-if="auth.isTeacher()" md-nav-href="#/teachers/{{::teacher.id}}/editmydata?_noback" name="teacher.data"> {{\'teacher.data\' | translate}}</md-nav-item> <md-nav-item ng-if="(auth.isAdmin() && teacher.id && teacher.isVocational) || (auth.isTeacher() && !teacher.isHigher)" md-nav-href="#/teachers/{{::teacher.id}}/continuingEducation?_noback" name="teacher.continuingEducation"> {{\'teacher.continuingEducation.label\' | translate}}</md-nav-item> <md-nav-item ng-if="(auth.isAdmin() && teacher.id) || (teacher.teacherQualifications.length > 0 && auth.isTeacher())" md-nav-href="#/teachers/{{::teacher.id}}/qualification?_noback" name="teacher.qualification"> {{\'teacher.qualification.qualification\' | translate}}</md-nav-item> <md-nav-item ng-if="(auth.isAdmin() && teacher.id && teacher.isHigher && isHigher) || (auth.isTeacher() && teacher.teacherMobility.length > 0)" md-nav-href="#/teachers/{{::teacher.id}}/mobility?_noback" name="teacher.mobility"> {{\'teacher.mobility.mobility\' | translate}}</md-nav-item> <md-nav-item ng-if="(auth.isAdmin() && teacher.id) || auth.isTeacher()" md-nav-href="#/teachers/{{::teacher.id}}/rtipAbsence?_noback" name="teacher.rtipAbsence"> {{\'teacher.rtipAbsence.label\' | translate}}</md-nav-item> </md-nav-bar> <md-content class="md-padding"> <form name="continuingEducationsForm" class="nomargin" novalidate> <md-button ng-click="newTeacherContinuingEducation()" class="md-raised">{{\'teacher.continuingEducation.add\' | translate}}</md-button> <div ng-repeat="continuingEducation in teacherContinuingEducations.continuingEducations | orderBy: \'-id\'"> <hois-collapsable label="(\'teacher.continuingEducation.continuingEducation\' | translate)"> <div layout="column" flex> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="25" flex-sm="100" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'teacher.continuingEducation.school\' | translate}}</label> <hois-classifier-select ng-model="continuingEducation.school" main-classifier-code="EHIS_TAIEND_OPPEAS" model-value-attr="code" ng-required="!continuingEducation.otherSchool" ng-disabled="continuingEducation.otherSchool" show-empty></hois-classifier-select> </md-input-container> <md-input-container flex="25" flex-sm="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'teacher.continuingEducation.otherSchool\' | translate}}</label> <textarea ng-model="continuingEducation.otherSchool" name="continuingEducation[{{$index}}].otherSchool" md-maxlength="1000" max-rows="2" ng-required="!continuingEducation.school" ng-disabled="continuingEducation.school"></textarea> <div ng-messages="continuingEducationsForm[\'continuingEducation[\'+$index+\'].otherSchool\'].$error"> <div ng-message="md-maxlength"> {{\'main.messages.error.maxlength\' | translate}} </div> </div> </md-input-container> <md-input-container flex="25" flex-sm="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'teacher.continuingEducation.field\' | translate}}</label> <hois-classifier-select ng-model="continuingEducation.field" main-classifier-code="EHIS_TAIEND_VALDKOND" model-value-attr="code" required></hois-classifier-select> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="25" flex-sm="100" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'teacher.continuingEducation.name\' | translate}}</label> <textarea ng-model="continuingEducation.nameEt" name="continuingEducation[{{$index}}].nameEt" md-maxlength="1000" required></textarea> <div ng-messages="continuingEducationsForm[\'continuingEducation[\'+$index+\'].nameEt\'].$error"> <div ng-message="md-maxlength"> {{\'main.messages.error.maxlength\' | translate}} </div> </div> </md-input-container> <md-input-container flex="25" flex-sm="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'teacher.continuingEducation.capacity\' | translate}}</label> <input ng-model="continuingEducation.capacity" name="continuingEducation[{{$index}}].capacity" type="number" min="0" max="9999" required> <div ng-messages="continuingEducationsForm[\'continuingEducation[\'+$index+\'].capacity\'].$error"> <div ng-message="max"> {{\'main.messages.error.max\' | translate: {max: 9999} }} </div> <div ng-message="min"> {{\'main.messages.error.min\' | translate: {min: 0} }} </div> </div> </md-input-container> <md-input-container flex="25" flex-sm="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'teacher.continuingEducation.diplomaCode\' | translate}}</label> <hois-classifier-select ng-model="continuingEducation.diploma" main-classifier-code="EHIS_TAIEND_DOK" model-value-attr="code" required></hois-classifier-select> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="25" flex-sm="100" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'teacher.continuingEducation.diplomaDate\' | translate}}</label> <md-datepicker ng-model="continuingEducation.diplomaDate" required md-open-on-focus></md-datepicker> </md-input-container> <md-input-container flex="25" flex-sm="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'teacher.continuingEducation.diplomaNr\' | translate}}</label> <input ng-model="continuingEducation.diplomaNr" name="continuingEducation[{{$index}}].diplomaNr" md-maxlength="100" type="text"> <div ng-messages="continuingEducationsForm[\'continuingEducation[\'+$index+\'].diplomaNr\'].$error"> <div ng-message="md-maxlength"> {{\'main.messages.error.maxlength\' | translate}} </div> </div> </md-input-container> <md-input-container flex="25" flex-sm="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <md-checkbox ng-model="continuingEducation.isAbroad">{{\'teacher.continuingEducation.isAbroad\' | translate}}</md-checkbox> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="25" flex-sm="100" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'teacher.continuingEducation.abroadDescription\' | translate}}</label> <textarea ng-model="continuingEducation.abroadDesc" name="continuingEducation[{{$index}}].abroadDesc" md-maxlength="4000" max-rows="5" ng-disabled="!continuingEducation.isAbroad"></textarea> <div ng-messages="continuingEducationsForm[\'continuingEducation[\'+$index+\'].abroadDesc\'].$error"> <div ng-message="md-maxlength"> {{\'main.messages.error.maxlength\' | translate}} </div> </div> </md-input-container> </div> </div> <md-button ng-click="deleteContinuingEducation(continuingEducation)" class="md-raised">{{\'main.button.delete\' | translate}}</md-button> </hois-collapsable> </div> <md-button ng-click="updateContinuingEducations()" class="md-raised md-primary" ng-if="teacherContinuingEducations.continuingEducations.length > 0"> {{\'main.button.save\' | translate}} </md-button> <md-button ng-if="auth.isTeacher()" ng-click="back(\'#/teachers/myData\')" class="md-raised">{{\'main.button.back\' | translate}}</md-button> <md-button ng-if="auth.isAdmin()" ng-click="back(\'#/teachers\', continuingEducationsForm)" class="md-raised">{{\'main.button.back\' | translate}}</md-button> </form> </md-content>'),a.put("teacher/teacher.continuing.education.view.html",'<div class="ois-form-layout form-readonly"> <div flex> <div ng-repeat="continuingEducation in teacher.teacherContinuingEducations"> <hois-collapsable label="(\'teacher.continuingEducation.continuingEducation\' | translate)"> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="25" flex-sm="100" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'teacher.continuingEducation.school\' | translate}}</label> <hois-classifier-value ng-model="continuingEducation.school" main-classifier-code="EHIS_TAIEND_OPPEAS"></hois-classifier-value> </md-input-container> <md-input-container flex="25" flex-sm="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'teacher.continuingEducation.otherSchool\' | translate}}</label> <hois-value value="continuingEducation.otherSchool"></hois-value> </md-input-container> <md-input-container flex="25" flex-sm="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'teacher.continuingEducation.field\' | translate}}</label> <hois-classifier-value ng-model="continuingEducation.field" main-classifier-code="EHIS_TAIEND_VALDKOND"></hois-classifier-value> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="25" flex-sm="100" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'teacher.continuingEducation.name\' | translate}}</label> <hois-value value="continuingEducation.nameEt"></hois-value> </md-input-container> <md-input-container flex="25" flex-sm="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'teacher.continuingEducation.capacity\' | translate}}</label> <hois-value value="continuingEducation.capacity"></hois-value> </md-input-container> <md-input-container flex="25" flex-sm="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'teacher.continuingEducation.diplomaCode\' | translate}}</label> <hois-classifier-value ng-model="continuingEducation.diploma" main-classifier-code="EHIS_TAIEND_DOK"></hois-classifier-value> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="25" flex-sm="100" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'teacher.continuingEducation.diplomaDate\' | translate}}</label> <hois-value value="continuingEducation.diplomaDate | hoisDate"></hois-value> </md-input-container> <md-input-container flex="25" flex-sm="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'teacher.continuingEducation.diplomaNr\' | translate}}</label> <hois-value value="continuingEducation.diplomaNr"></hois-value> </md-input-container> <md-input-container flex="25" flex-sm="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <md-checkbox ng-model="continuingEducation.isAbroad" disabled>{{\'teacher.continuingEducation.isAbroad\' | translate}}</md-checkbox> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="25" flex-sm="100" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'teacher.continuingEducation.abroadDescription\' | translate}}</label> <hois-value value="continuingEducation.abroadDesc"></hois-value> </md-input-container> </div> </hois-collapsable> </div> </div> </div>'),a.put("teacher/teacher.edit.html",'<md-nav-bar md-selected-nav-item="currentNavItem" nav-bar-aria-label="main selection" ng-cloak> <md-nav-item ng-if="auth.isAdmin()" md-nav-href="#/teachers/{{::teacher.id}}/edit?_noback" name="teacher.data"> {{\'teacher.data\' | translate}}</md-nav-item> <md-nav-item ng-if="auth.isTeacher()" md-nav-href="#/teachers/{{::teacher.id}}/editmydata?_noback" name="teacher.data"> {{\'teacher.data\' | translate}}</md-nav-item> <md-nav-item ng-if="(auth.isAdmin() && teacher.id && teacher.isVocational) || (auth.isTeacher() && !teacher.isHigher)" md-nav-href="#/teachers/{{::teacher.id}}/continuingEducation?_noback" name="teacher.continuingEducation"> {{\'teacher.continuingEducation.label\' | translate}}</md-nav-item> <md-nav-item ng-if="(auth.isAdmin() && teacher.id) || (teacher.teacherQualifications.length > 0 && auth.isTeacher())" md-nav-href="#/teachers/{{::teacher.id}}/qualification?_noback" name="teacher.qualification"> {{\'teacher.qualification.qualification\' | translate}}</md-nav-item> <md-nav-item ng-if="(auth.isAdmin() && teacher.id && teacher.isHigher && isHigher) || (auth.isTeacher() && teacher.teacherMobility.length > 0)" md-nav-href="#/teachers/{{::teacher.id}}/mobility?_noback" name="teacher.mobility"> {{\'teacher.mobility.mobility\' | translate}}</md-nav-item> <md-nav-item ng-if="(auth.isAdmin() && teacher.id) || auth.isTeacher()" md-nav-href="#/teachers/{{::teacher.id}}/rtipAbsence?_noback" name="teacher.rtipAbsence"> {{\'teacher.rtipAbsence.label\' | translate}}</md-nav-item> </md-nav-bar> <div class="ois-form-layout-padding" layout="column" ng-cloak> <form name="teacherForm" role="form" class="nomargin" novalidate> <hois-collapsable label="(\'teacher.data\' | translate)"> <div layout="column" flex> <div layout="row" layout-sm="column" layout-xs="column"> <!--\r\n            different elements are used for entering and displaying as in other case\r\n            teacher\'s unique check will be trigered even with disabled autocomplete\r\n            which can prevent form from saving.\r\n\r\n            hois-value is not used as id did not match whole page design\r\n          --> <md-input-container flex="25" flex-sm="100" flex-xs="100" ng-if="!teacher.id"> <label>{{auth.higher ? (\'teacher.person.idcodeHigher\' | translate) : (\'teacher.person.idcodeVocational\' | translate)}}</label> <hois-idcode-lookup ng-model="teacher.person.idcode" name="idcode" role="forteacher" after-lookup="lookupPerson(response)" after-failed-lookup="lookupFailure()" no-lookup="cleanReadOnly()" ng-required="teacher.person.citizenship === \'RIIK_EST\'"></hois-idcode-lookup> <div ng-messages="teacherForm.idcode.$error" ng-show="teacherForm.idcode.$dirty"> <div ng-message="teacherIdCode"> {{auth.higher ? (\'teacher.person.alreadyExistHigher\' | translate) : (\'teacher.person.alreadyExistVocational\' | translate)}} </div> </div> </md-input-container> <md-input-container flex-sm="100" flex-xs="100" flex="25" ng-if="teacher.id"> <label>{{auth.higher ? (\'teacher.person.idcodeHigher\' | translate) : (\'teacher.person.idcodeVocational\' | translate)}}</label> <input type="text" ng-model="teacher.person.idcode" readonly> </md-input-container> <md-input-container flex="20" flex-sm="100" flex-xs="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'teacher.person.birthdate\' | translate}}</label> <md-datepicker ng-model="teacher.person.birthdate" md-max-date="maxDate" ng-disabled="teacher.person.idcode" required md-open-on-focus></md-datepicker> </md-input-container> <md-input-container flex="10" flex-sm="100" flex-xs="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'teacher.person.sex\' | translate}}</label> <hois-classifier-select ng-model="teacher.person.sex" main-classifier-code="SUGU" model-value-attr="code" ng-disabled="teacher.person.idcode" required></hois-classifier-select> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="25" flex-sm="100" flex-xs="100"> <label>{{auth.higher ? (\'teacher.person.firstnameHigher\' | translate) : (\'teacher.person.firstnameVocational\' | translate)}}</label> <input ng-model="teacher.person.firstname" name="firstname" type="text" ng-blur="generateEmail()" required md-maxlength="100"> <div ng-messages="teacherForm.firstname.$error"> <div ng-message="md-maxlength"> {{\'main.messages.error.maxlength\' | translate}} </div> </div> </md-input-container> <md-input-container flex="20" flex-sm="100" flex-xs="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{auth.higher ? (\'teacher.person.lastnameHigher\' | translate) : (\'teacher.person.lastnameVocational\' | translate)}}</label> <input ng-model="teacher.person.lastname" name="lastname" type="text" ng-blur="generateEmail()" required md-maxlength="100"> <div ng-messages="teacherForm.lastname.$error"> <div ng-message="md-maxlength"> {{\'main.messages.error.maxlength\' | translate}} </div> </div> </md-input-container> <md-input-container flex="45" flex-sm="100" flex-xs="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'teacher.person.nativeLanguage\' | translate}}</label> <hois-classifier-select ng-model="teacher.nativeLanguage" main-classifier-code="EHIS_EMAKEEL" model-value-attr="code" required></hois-classifier-select> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="25" flex-sm="100" flex-xs="100"> <label>{{\'teacher.person.citizenship\' | translate}}</label> <hois-classifier-select ng-model="teacher.person.citizenship" main-classifier-code="RIIK" model-value-attr="code" required></hois-classifier-select> </md-input-container> <md-input-container flex="20" flex-sm="100" flex-xs="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'teacher.person.phone\' | translate}}</label> <input ng-model="teacher.person.phone" name="personphone" type="text" md-maxlength="100"> <div ng-messages="teacherForm.personphone.$error"> <div ng-message="md-maxlength"> {{\'main.messages.error.maxlength\' | translate}} </div> </div> </md-input-container> <md-input-container flex="45" flex-sm="100" flex-xs="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'teacher.person.email\' | translate}}</label> <input ng-model="teacher.person.email" name="personemail" type="email" md-maxlength="100"> <div ng-messages="teacherForm.personemail.$error"> <div ng-message="md-maxlength"> {{\'main.messages.error.maxlength\' | translate}} </div> </div> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container class="md-block" flex="25" flex-sm="100" flex-xs="100"> <label>{{\'teacher.occupation.label\' | translate}}</label> <md-select ng-model="teacher.teacherOccupation.id" required> <md-option></md-option> <md-option ng-repeat="occupation in occupations" ng-value="occupation.id"> {{currentLanguage()===\'en\' ? (occupation.occupationEn || occupation.occupationEt) : occupation.occupationEt}} </md-option> </md-select> </md-input-container> <md-input-container flex="20" flex-sm="100" flex-xs="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'teacher.phone\' | translate}}</label> <input ng-model="teacher.phone" name="phone" type="text" md-maxlength="100"> <div ng-messages="teacherForm.phone.$error"> <div ng-message="md-maxlength"> {{\'main.messages.error.maxlength\' | translate}} </div> </div> </md-input-container> <md-input-container flex="45" flex-sm="100" flex-xs="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'teacher.email\' | translate}}</label> <input ng-model="teacher.email" name="email" type="email" required md-maxlength="100"> <div ng-messages="teacherForm.email.$error"> <div ng-message="md-maxlength"> {{\'main.messages.error.maxlength\' | translate}} </div> </div> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="25" flex-sm="100" flex-xs="100" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'teacher.scheduleLoad\' | translate}}</label> <input ng-model="teacher.scheduleLoad" name="scheduleLoad" type="number" required min="0" max="9999"> <div ng-messages="teacherForm.scheduleLoad.$error"> <div ng-message="min"> {{\'main.messages.error.min\' | translate: {min: 0} }} </div> <div ng-message="max"> {{\'main.messages.error.max\' | translate: {max: 9999} }} </div> </div> </md-input-container> <!-- todo: alert or check for need for alert --> <div layout="row" flex="70" flex-sm="100" flex-xs="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0" layout-sm="column" layout-xs="column"> <md-radio-group ng-model="teacher.isStudyPeriodScheduleLoad" required class="align-center"> <md-radio-button ng-value="true"> {{\'teacher.studyPeriodLoad\' | translate}}&nbsp;&nbsp;&nbsp; </md-radio-button> <md-radio-button ng-value="false"> {{\'teacher.studyYearLoad\' | translate}} </md-radio-button> </md-radio-group> <div flex-offset="5" flex-offset-xs="0" flex-offset-sm="0" md-colors="{color: \'warn-A400\'}" ng-if="teacherForm.$submitted && teacher.isStudyPeriodScheduleLoad !== true && teacher.isStudyPeriodScheduleLoad !== false" class="md-title-very-small" style="margin-top:12px"> <div>{{\'main.messages.error.inputFieldIsRequired\' | translate}}</div> </div> </div> </div> <!----> <div layout="row" flex layout-align="none center"> <md-checkbox ng-model="teacher.isVocational" ng-required="!teacher.isVocational && !teacher.isHigher"> {{\'teacher.isVocational\' | translate}} </md-checkbox> <md-checkbox ng-model="teacher.isHigher" ng-required="!teacher.isVocational && !teacher.isHigher"> {{\'teacher.isHigher\' | translate}} </md-checkbox> </div> <div md-colors="{color: \'warn-A400\'}" ng-if="teacherForm.$submitted && !teacher.isVocational && !teacher.isHigher" class="md-title-very-small" style="margin-top:-12px"> <div>{{\'main.messages.error.inputFieldIsRequired\' | translate}}</div> </div> <div layout="row" layout-sm="column" layout-xs="column" flex> <div flex="25" flex-sm="100" flex-xs="100" layout-align="none center" layout="row"> <md-checkbox ng-model="teacher.isActive"> {{\'teacher.isActive\' | translate}} </md-checkbox> </div> <md-input-container flex="20" flex-sm="100" flex-xs="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'teacher.rtipNr\' | translate}}</label> <input ng-model="teacher.rtipNr" name="rtipNr" type="text" md-maxlength="20"> <div ng-messages="teacherForm.rtipNr.$error"> <div ng-message="md-maxlength"> {{\'main.messages.error.maxlength\' | translate}} </div> </div> </md-input-container> <md-input-container flex="20" flex-sm="100" flex-xs="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'teacher.untis\' | translate}}</label> <input ng-model="teacher.untisCode" name="untisCode" type="text" md-maxlength="20"> <div ng-messages="teacherForm.untisCode.$error"> <div ng-message="md-maxlength"> {{\'main.messages.error.maxlength\' | translate}} </div> </div> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column" flex> <md-input-container flex> <label>{{\'teacher.addInfo\' | translate}}</label> <textarea ng-model="teacher.addInfo" name="addInfo" md-maxlength="1000" max-rows="10" dfs></textarea> <div ng-messages="teacherForm.addInfo.$error"> <div ng-message="md-maxlength"> {{\'main.messages.error.maxlength\' | translate}} </div> </div> </md-input-container> </div> </div> </hois-collapsable> <div ng-repeat="teacherPositionEhis in teacher.teacherPositionEhis | orderBy: \'id\'"> <hois-collapsable label="(\'teacher.teacherPositionEhis.label\' | translate)"> <div layout="column" flex> <div layout="row" layout-sm="column" layout-xs="column"> <!--md-button ng-click="remove(teacherPositionEhis)" class="md-raised md-warn">{{\'main.button.delete\' | translate}}</md-button--> <md-radio-group ng-model="teacherPositionEhis.isVocational" required layout="row" layout-sm="column" layout-xs="column" flex="50" flex-sm="100" flex-xs="100" class="align-center"> <md-radio-button ng-value="true" flex="20" flex-sm="100" flex-xs="100"> {{\'teacher.isVocational\' | translate}} </md-radio-button> <md-radio-button ng-value="false" flex="45" flex-sm="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0">{{\'teacher.isHigher\' | translate}} </md-radio-button> </md-radio-group> </div> <!-- TODO: it would be better bo make filterByCriteria attribute, wich works like criteria but filters in front end --> <div layout="row" layout-sm="column" layout-xs="column" class="top-margin"> <md-input-container flex="25" flex-sm="100" flex-xs="100" ng-if="teacherPositionEhis.isVocational"> <label>{{\'teacher.teacherPositionEhis.position\' | translate}}</label> <hois-classifier-select ng-model="teacherPositionEhis.position" main-classifier-code="EHIS_AMETIKOHT" model-value-attr="code" required criteria="{vocational: true}"></hois-classifier-select> </md-input-container> <md-input-container flex="25" flex-sm="100" flex-xs="100" ng-if="!teacherPositionEhis.isVocational"> <label>{{\'teacher.teacherPositionEhis.position\' | translate}}</label> <hois-classifier-select ng-model="teacherPositionEhis.position" main-classifier-code="EHIS_AMETIKOHT" model-value-attr="code" required criteria="{higher: true}"></hois-classifier-select> </md-input-container> <md-input-container flex="20" flex-sm="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'teacher.teacherPositionEhis.positionSpecificationEt\' | translate}}</label> <input ng-model="teacherPositionEhis.positionSpecificationEt" name="teacherPositionEhis[{{$index}}].positionSpecificationEt" type="text" md-maxlength="255"> <div ng-messages="teacherForm[\'teacherPositionEhis[\'+$index+\'].positionSpecificationEt\'].$error"> <div ng-message="md-maxlength"> {{\'main.messages.error.maxlength\' | translate}} </div> </div> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="25" flex-sm="100" flex-xs="100" ng-if="teacherPositionEhis.isVocational"> <label>{{\'teacher.teacherPositionEhis.contractType\' | translate}}</label> <hois-classifier-select ng-model="teacherPositionEhis.contractType" name="teacherPositionEhis[{{$index}}].contractType" main-classifier-code="EHIS_LEPING" model-value-attr="code" required criteria="{vocational: true}"></hois-classifier-select> </md-input-container> <md-input-container flex="25" flex-sm="100" flex-xs="100" ng-if="!teacherPositionEhis.isVocational"> <label>{{\'teacher.teacherPositionEhis.contractType\' | translate}}</label> <hois-classifier-select ng-model="teacherPositionEhis.contractType" name="teacherPositionEhis[{{$index}}].contractType" main-classifier-code="EHIS_LEPING" model-value-attr="code" required criteria="{higher: true}"></hois-classifier-select> </md-input-container> <md-input-container flex="20" flex-sm="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'teacher.teacherPositionEhis.contractStart\' | translate}}</label> <md-datepicker ng-model="teacherPositionEhis.contractStart" md-max-date="teacherPositionEhis.contractEnd" required md-open-on-focus></md-datepicker> </md-input-container> <md-input-container flex="20" flex-sm="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'teacher.teacherPositionEhis.contractEnd\' | translate}}</label> <md-datepicker ng-model="teacherPositionEhis.contractEnd" md-min-date="teacherPositionEhis.contractStart" md-open-on-focus></md-datepicker> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="25" flex-sm="100" flex-xs="100"> <label>{{\'teacher.teacherPositionEhis.load\' | translate}}</label> <input ng-model="teacherPositionEhis.load" name="teacherPositionEhis[{{$index}}].load" type="number" required max="5" ng-min="{{teacherForm[\'teacherPositionEhis[\'+$index+\'].contractType\'].$viewValue === \'EHIS_LEPING_TL\' ? 0.1 : 0}}" step="0.1"> <div ng-messages="teacherForm[\'teacherPositionEhis[\'+$index+\'].load\'].$error"> <div ng-message="max"> {{\'main.messages.error.max\' | translate: {max: 5} }} </div> <div ng-message="min"> {{\'main.messages.error.min\' | translate: teacherForm[\'teacherPositionEhis[\'+$index+\'].contractType\'].$viewValue === \'EHIS_LEPING_TL\' ? {min:0.1} : {min:0} }} </div> </div> </md-input-container> <md-input-container flex="20" flex-sm="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <md-checkbox ng-model="teacherPositionEhis.isContractEnded"> {{\'teacher.teacherPositionEhis.isContractEnded\' | translate}} </md-checkbox> </md-input-container> <md-input-container ng-if="teacherPositionEhis.isVocational === false" flex="45" flex-sm="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <md-checkbox ng-model="teacherPositionEhis.isTeacher"> {{\'teacher.teacherPositionEhis.isTeacher\' | translate}} </md-checkbox> </md-input-container> </div> <div ng-if="teacherPositionEhis.isVocational === true" layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="25" flex-sm="100" flex-xs="100"> <label>{{\'teacher.teacherPositionEhis.language\' | translate}}</label> <hois-classifier-select ng-model="teacherPositionEhis.language" main-classifier-code="EHIS_OPETAJA_KEEL" model-value-attr="code" required></hois-classifier-select> </md-input-container> </div> <div ng-if="teacherPositionEhis.isVocational === true" layout="row" layout-sm="column" layout-xs="column" class="top-margin"> <md-input-container flex="25" flex-sm="100" flex-offset-xs="0" flex-offset-sm="0"> <md-checkbox ng-model="teacherPositionEhis.meetsQualification"> {{\'teacher.teacherPositionEhis.meetsQualification\' | translate}} </md-checkbox> </md-input-container> <md-input-container flex="20" flex-sm="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <md-checkbox ng-model="teacherPositionEhis.isChildCare"> {{\'teacher.teacherPositionEhis.workHalted\' | translate}} </md-checkbox> </md-input-container> <md-input-container flex="25" flex-offset="5" flex-sm="100" flex-offset-xs="0" flex-offset-sm="0"> <md-checkbox ng-model="teacherPositionEhis.isClassTeacher"> {{\'teacher.teacherPositionEhis.isClassTeacher\' | translate}} </md-checkbox> </md-input-container> <md-button ng-click="deleteEhisPosition(teacherPositionEhis)" class="md-raised" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0">{{\'main.button.delete\' | translate}} </md-button> </div> <div ng-if="teacherPositionEhis.isVocational === false" layout="row"> <md-input-container flex="25" flex-sm="100" flex-xs="100"> <label>{{\'teacher.teacherPositionEhis.employmentType\' | translate}}</label> <hois-classifier-select ng-model="teacherPositionEhis.employmentType" main-classifier-code="EHIS_TOOSUHE" model-value-attr="code" required></hois-classifier-select> </md-input-container> <md-input-container flex="20" flex-sm="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'teacher.teacherPositionEhis.employmentTypeSpecification\' | translate}}</label> <input ng-model="teacherPositionEhis.employmentTypeSpecification" name="teacherPositionEhis[{{$index}}].employmentTypeSpecification" type="text" md-maxlength="255"> <div ng-messages="teacherForm[\'teacherPositionEhis[\'+$index+\'].employmentTypeSpecification\'].$error"> <div ng-message="md-maxlength"> {{\'main.messages.error.maxlength\' | translate}} </div> </div> </md-input-container> <md-input-container flex="10" flex-sm="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'teacher.teacherPositionEhis.employmentCode\' | translate}}</label> <input ng-model="teacherPositionEhis.employmentCode" name="teacherPositionEhis[{{$index}}].employmentCode" type="text" md-maxlength="100"> <div ng-messages="teacherForm[\'teacherPositionEhis[\'+$index+\'].employmentCode\'].$error"> <div ng-message="md-maxlength"> {{\'main.messages.error.maxlength\' | translate}} </div> </div> </md-input-container> </div> <div ng-if="teacherPositionEhis.isVocational === false" layout="row"> <md-input-container class="md-block" flex="25" flex-sm="100" flex-xs="100"> <label>{{\'school.department.department\' | translate}}</label> <hois-school-department-select ng-model="teacherPositionEhis.schoolDepartment"></hois-school-department-select> </md-input-container> <md-input-container flex="20" flex-sm="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'teacher.teacherPositionEhis.positionSpecificationEn\' | translate}}</label> <input ng-model="teacherPositionEhis.positionSpecificationEn" name="teacherPositionEhis[{{$index}}].positionSpecificationEn" type="text" md-maxlength="255"> <div ng-messages="teacherForm[\'teacherPositionEhis[\'+$index+\'].positionSpecificationEn\'].$error"> <div ng-message="md-maxlength"> {{\'main.messages.error.maxlength\' | translate}} </div> </div> </md-input-container> <md-button ng-click="deleteEhisPosition(teacherPositionEhis)" class="md-raised" flex-offset="35" flex-offset-xs="0" flex-offset-sm="0">{{\'main.button.delete\' | translate}} </md-button> </div> </div> </hois-collapsable> </div> <div> <md-button ng-click="newTeacherPositionEhis()" class="md-raised">{{\'teacher.teacherPositionEhis.add\' | translate}} </md-button> </div> <md-button ng-click="update()" class="md-raised md-primary">{{\'main.button.save\' | translate}}</md-button> <md-button ng-if="auth.isAdmin()" ng-click="back(\'#/teachers\', teacherForm)" class="md-raised">{{\'main.button.back\' | translate}}</md-button> <md-button ng-if="auth.isTeacher()" ng-click="back(\'#/teachers/myData\')" class="md-raised">{{\'main.button.back\' | translate}}</md-button> <md-button ng-if="teacher.id" ng-click="delete()" class="md-raised">{{\'main.button.delete\' | translate}}</md-button> <md-button ng-if="teacher.id && teacher.teacherPositionEhis && teacher.teacherPositionEhis.length" ng-click="sendToEhis()" class="md-raised">{{\'main.button.sendToEhis\' | translate}}</md-button> <span ng-if="teacher.ehisLastSuccessfulDate && teacher.teacherPositionEhis.length > 0" style="font-size: 13px">{{\'teacher.ehisSendOperation.success\' | translate: {day: (teacher.ehisLastSuccessfulDate | hoisDateTime)} }}</span> <span ng-if="!teacher.ehisLastSuccessfulDate && teacher.teacherPositionEhis.length > 0" style="font-size: 13px">{{\'teacher.ehisSendOperation.fail\' | translate}}</span> </form> </div>'),
a.put("teacher/teacher.edit.mydata.html",'<md-nav-bar md-selected-nav-item="currentNavItem" nav-bar-aria-label="main selection" ng-cloak> <md-nav-item ng-if="auth.isAdmin()" md-nav-href="#/teachers/{{::teacher.id}}/edit?_noback" name="teacher.data"> {{\'teacher.data\' | translate}}</md-nav-item> <md-nav-item ng-if="auth.isTeacher()" md-nav-href="#/teachers/{{::teacher.id}}/editmydata?_noback" name="teacher.data"> {{\'teacher.data\' | translate}}</md-nav-item> <md-nav-item ng-if="(auth.isAdmin() && teacher.id && teacher.isVocational) || (auth.isTeacher() && !teacher.isHigher)" md-nav-href="#/teachers/{{::teacher.id}}/continuingEducation?_noback" name="teacher.continuingEducation"> {{\'teacher.continuingEducation.label\' | translate}}</md-nav-item> <md-nav-item ng-if="(auth.isAdmin() && teacher.id) || (teacher.teacherQualifications.length > 0 && auth.isTeacher())" md-nav-href="#/teachers/{{::teacher.id}}/qualification?_noback" name="teacher.qualification"> {{\'teacher.qualification.qualification\' | translate}}</md-nav-item> <md-nav-item ng-if="(auth.isAdmin() && teacher.id && teacher.isHigher && isHigher) || (auth.isTeacher() && teacher.teacherMobility.length > 0)" md-nav-href="#/teachers/{{::teacher.id}}/mobility?_noback" name="teacher.mobility"> {{\'teacher.mobility.mobility\' | translate}}</md-nav-item> <md-nav-item ng-if="(auth.isAdmin() && teacher.id) || auth.isTeacher()" md-nav-href="#/teachers/{{::teacher.id}}/rtipAbsence?_noback" name="teacher.rtipAbsence"> {{\'teacher.rtipAbsence.label\' | translate}}</md-nav-item> </md-nav-bar> <md-content class="md-padding"> <form name="teacherForm" role="form" class="form-readonly" novalidate> <div style="padding-top: 1em"> <div layout="column"> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="30" flex-sm="100" flex-xs="100"> <label>{{auth.higher ? (\'teacher.person.idcodeHigher\' | translate) : (\'teacher.person.idcodeVocational\' | translate)}}</label> <hois-value value="teacher.person.idcode"></hois-value> </md-input-container> <md-input-container flex="30" flex-sm="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'teacher.person.birthdate\' | translate}}</label> <hois-value value="teacher.person.birthdate | hoisDate"></hois-value> </md-input-container> <md-input-container flex="30" flex-sm="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'teacher.person.sex\' | translate}}</label> <hois-classifier-value ng-model="teacher.person.sex" main-classifier-code="SUGU"></hois-classifier-value> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="30" flex-sm="100" flex-xs="100"> <label>{{auth.higher ? (\'teacher.person.nameHigher\' | translate) : (\'teacher.person.nameVocational\' | translate)}}</label> <hois-value value="teacher.person.firstname + \' \' + teacher.person.lastname"></hois-value> </md-input-container> <md-input-container flex="30" flex-sm="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'teacher.person.nativeLanguage\' | translate}}</label> <hois-classifier-value ng-model="teacher.nativeLanguage" main-classifier-code="EHIS_EMAKEEL"></hois-classifier-value> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column" flex> <md-input-container flex="30" flex-sm="100" flex-xs="100"> <label>{{\'teacher.person.citizenship\' | translate}}</label> <hois-classifier-value ng-model="teacher.person.citizenship" main-classifier-code="RIIK"></hois-classifier-value> </md-input-container> <div flex="30" flex-sm="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0" class="active"> <md-input-container flex="100"> <label>{{\'teacher.person.phone\' | translate}}</label> <input ng-model="teacher.person.phone" name="personphone" type="text" md-maxlength="100"> <div ng-messages="teacherForm.personphone.$error"> <div ng-message="md-maxlength"> {{\'main.messages.error.maxlength\' | translate}} </div> </div> </md-input-container> </div> <div flex="30" flex-sm="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0" class="active"> <md-input-container> <label>{{\'teacher.person.email\' | translate}}</label> <input ng-model="teacher.person.email" name="personemail" type="email" md-maxlength="100"> <div ng-messages="teacherForm.personemail.$error"> <div ng-message="md-maxlength"> {{\'main.messages.error.maxlength\' | translate}} </div> </div> </md-input-container> </div> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex> <label>{{\'teacher.occupation.label\' | translate}}</label> <hois-value value="currentLanguageNameField(teacher.teacherOccupation)"></hois-value> </md-input-container> <md-input-container flex="30" flex-sm="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'teacher.phone\' | translate}}</label> <hois-value value="teacher.phone"></hois-value> </md-input-container> <md-input-container flex="30" flex-sm="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'teacher.email\' | translate}}</label> <hois-value value="teacher.email"></hois-value> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="30" flex-sm="100" flex-xs="100"> <label>{{\'teacher.scheduleLoad\' | translate}}</label> <hois-value value="teacher.scheduleLoad"></hois-value> </md-input-container> <md-radio-group ng-model="teacher.isStudyPeriodScheduleLoad" layout="row" layout-sm="column" layout-xs="column" flex="30" flex-sm="100" flex-xs="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0" class="align-center" disabled style="margin-top: -18px"> <md-radio-button ng-value="true"> {{\'teacher.studyPeriodLoad\' | translate}} </md-radio-button> <md-radio-button ng-value="false"> {{\'teacher.studyYearLoad\' | translate}} </md-radio-button> </md-radio-group> <md-input-container flex="30" flex-sm="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'teacher.isActive\' | translate}}</label> <hois-value value="teacher.isActive ? \'main.yes\' : \'main.no\' | translate"></hois-value> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="30" flex-sm="100" flex-xs="100"> <label>{{\'teacher.isVocationalOrIsHigher\' | translate}}</label> <hois-value value="vocationalHigher"></hois-value> </md-input-container> <md-input-container flex="30" flex-offset="5" flex-sm="100" flex-xs="100"> <label>{{\'teacher.rtipNr\' | translate}}</label> <hois-value value="teacher.rtipNr"></hois-value> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column" flex> <md-input-container flex> <label>{{\'teacher.addInfo\' | translate}}</label> <hois-value value="teacher.addInfo"></hois-value> </md-input-container> </div> </div> </div> <div ng-repeat="teacherPositionEhis in teacher.teacherPositionEhis | orderBy: \'id\'"> <hois-collapsable label="(\'teacher.teacherPositionEhis.label\' | translate)"> <div layout="column"> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="30" flex-sm="100" flex-xs="100"> <label>{{\'teacher.teacherPositionEhis.teachingLevel\' | translate}}</label> <hois-value value="teacherPositionEhis.isVocational === true ? \'teacher.isVocational\' : \'teacher.isHigher\' | translate"></hois-value> </md-input-container> <md-input-container flex="30" flex-sm="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'teacher.teacherPositionEhis.position\' | translate}}</label> <hois-classifier-value ng-model="teacherPositionEhis.position" main-classifier-code="EHIS_AMETIKOHT"></hois-classifier-value> </md-input-container> <md-input-container flex="30" flex-sm="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'teacher.teacherPositionEhis.positionSpecificationEt\' | translate}}</label> <hois-value value="teacherPositionEhis.positionSpecificationEt"></hois-value> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="30" flex-sm="100" flex-xs="100"> <label>{{\'teacher.teacherPositionEhis.contractType\' | translate}}</label> <hois-classifier-value ng-model="teacherPositionEhis.contractType" main-classifier-code="EHIS_LEPING"></hois-classifier-value> </md-input-container> <md-input-container flex="30" flex-sm="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'teacher.teacherPositionEhis.contractStart\' | translate}}</label> <hois-value value="teacherPositionEhis.contractStart | hoisDate"></hois-value> </md-input-container> <md-input-container flex="30" flex-sm="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'teacher.teacherPositionEhis.contractEnd\' | translate}}</label> <hois-value value="teacherPositionEhis.contractEnd | hoisDate"></hois-value> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="30" flex-sm="100" flex-xs="100"> <label>{{\'teacher.teacherPositionEhis.isContractEnded\' | translate}}</label> <hois-value value="teacherPositionEhis.isContractEnded === true ? \'main.yes\' : \'main.no\' | translate"></hois-value> </md-input-container> <md-input-container flex="30" flex-sm="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'teacher.teacherPositionEhis.load\' | translate}}</label> <hois-value value="teacherPositionEhis.load"></hois-value> </md-input-container> <md-input-container ng-if="teacherPositionEhis.isVocational === true" flex="30" flex-sm="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'teacher.teacherPositionEhis.language\' | translate}}</label> <hois-classifier-value ng-model="teacherPositionEhis.language" main-classifier-code="EHIS_OPETAJA_KEEL"></hois-classifier-value> </md-input-container> <md-input-container ng-if="!teacherPositionEhis.isVocational" flex="30" flex-sm="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'teacher.teacherPositionEhis.isTeacher\' | translate}}</label> <hois-value value="teacherPositionEhis.isTeacher === true ? \'main.yes\' : \'main.no\' | translate"></hois-value> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container ng-if="teacherPositionEhis.isVocational === true" flex="30" flex-sm="100" flex-xs="100"> <label>{{\'teacher.teacherPositionEhis.meetsQualification\' | translate}}</label> <hois-value value="teacherPositionEhis.meetsQualification === true ? \'main.yes\' : \'main.no\' | translate"></hois-value> </md-input-container> <md-input-container ng-if="teacherPositionEhis.isVocational === true" flex="30" flex-sm="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'teacher.teacherPositionEhis.workHalted\' | translate}}</label> <hois-value value="teacherPositionEhis.isChildCare === true ? \'main.yes\' : \'main.no\' | translate"></hois-value> </md-input-container> <md-input-container ng-if="teacherPositionEhis.isVocational === true" flex="30" flex-sm="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'teacher.teacherPositionEhis.isClassTeacher\' | translate}}</label> <hois-value value="teacherPositionEhis.isClassTeacher === true ? \'main.yes\' : \'main.no\' | translate"></hois-value> </md-input-container> </div> <div ng-if="!teacherPositionEhis.isVocational" layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="30" flex-sm="100" flex-xs="100"> <label>{{\'teacher.teacherPositionEhis.employmentType\' | translate}}</label> <hois-classifier-value ng-model="teacherPositionEhis.employmentType" main-classifier-code="EHIS_TOOSUHE"></hois-classifier-value> </md-input-container> <md-input-container flex="30" flex-sm="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'teacher.teacherPositionEhis.employmentTypeSpecification\' | translate}}</label> <hois-value value="teacherPositionEhis.employmentTypeSpecification"></hois-value> </md-input-container> <md-input-container flex="30" flex-sm="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'teacher.teacherPositionEhis.employmentCode\' | translate}}</label> <hois-value value="teacherPositionEhis.employmentCode"></hois-value> </md-input-container> </div> <div ng-if="!teacherPositionEhis.isVocational" layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="30" flex-sm="100" flex-xs="100"> <label>{{\'teacher.teacherPositionEhis.schoolDepartment\' | translate}}</label> <hois-value value="currentLanguageNameField(schoolDepartmentsById[teacherPositionEhis.schoolDepartment])"></hois-value> </md-input-container> <md-input-container flex="30" flex-sm="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'teacher.teacherPositionEhis.positionSpecificationEn\' | translate}}</label> <hois-value value="teacherPositionEhis.positionSpecificationEn"></hois-value> </md-input-container> </div> </div> </hois-collapsable> </div> <md-button ng-click="update()" class="md-raised md-primary">{{\'main.button.save\' | translate}}</md-button> </form> </md-content> <div layout="row" layout-margin> <md-button ng-click="back(\'#/teachers/myData\', teacherForm)" class="md-raised">{{\'main.button.back\' | translate}}</md-button> </div>'),a.put("teacher/teacher.list.html",'<div class="ois-form-layout-padding"> <div flex> <fieldset> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'main.searchlabel\' | translate}}</legend> <form name="searchForm" ng-submit="searchForm.$valid && loadData()" class="nomargin" layout="column"> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="45" flex-sm="100" flex-xs="100"> <label class="textInput">{{auth.higher ? (\'teacher.person.nameHigher\' | translate) : (\'teacher.person.nameVocational\' | translate)}}</label> <input ng-model="criteria.name" type="text" md-maxlength="255" autofocus> </md-input-container> <md-input-container flex="50" flex-sm="100" flex-xs="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label class="textInput">{{auth.higher ? (\'teacher.person.idcodeHigher\' | translate) : (\'teacher.person.idcodeVocational\' | translate)}}</label> <input ng-model="criteria.idcode" type="text" minlength="11" md-maxlength="11"> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column" ng-if="!showSchool"> <md-input-container flex="45" flex-sm="100" flex-xs="100"> <label>{{\'teacher.occupation.label\' | translate}}</label> <hois-select ng-model="criteria.teacherOccupation" values="teacherOccupations"></hois-select> </md-input-container> <md-input-container flex="50" flex-sm="100" flex-xs="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0" ng-show="schoolHigher"> <label>{{\'teacher.occupation.department\' | translate}}</label> <hois-school-department-select ng-model="criteria.schoolDepartment"></hois-school-department-select> </md-input-container> </div> <div layout="row"> <md-input-container flex="45" flex-sm="100" flex-xs="100" ng-if="showSchool"> <label>{{\'school.label\' | translate}}</label> <hois-select ng-model="criteria.school" type="school"></hois-select> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column" class="top-margin" ng-if="!showSchool"> <md-checkbox ng-model="criteria.isActive" aria-label="{{\'teacher.isActive\' | translate}}"> {{\'teacher.isActive\' | translate}} </md-checkbox> </div> <div layout="row"> <md-button type="submit" class="md-raised md-primary">{{\'main.button.search\' | translate}}</md-button> <md-button class="md-raised" ng-click="clearCriteria()">{{\'main.button.clear\' | translate}}</md-button> <md-button ng-href="#/teachers/new" ng-if="formState.canCreate" class="md-raised">{{\'main.button.create\' | translate}}</md-button> </div> <div flex-xs="0" flex-gt-xs="0" flex-gt-sm="50"></div> </form> </fieldset> </div> </div> <div layout-padding> <div flex> <md-table-container> <table md-table md-progress="tabledata.$promise"> <thead md-head md-order="criteria.order" md-on-reorder="loadData"> <tr md-row> <th md-column md-order-by="s.{{currentLanguageNameField()}}" ng-if="showSchool">{{\'school.label\' | translate}}</th> <th md-column md-order-by="p.lastname,p.firstname">{{auth.higher ? (\'teacher.person.nameHigher\' | translate) : (\'teacher.person.nameVocational\' | translate)}}</th> <th md-column md-order-by="p.idcode">{{auth.higher ? (\'teacher.person.idcodeHigher\' | translate) : (\'teacher.person.idcodeVocational\' | translate)}}</th> <th md-column md-order-by="t.email">{{\'teacher.email\' | translate}}</th> <th md-column md-order-by="t.phone">{{\'teacher.phone\' | translate}}</th> <th md-column md-order-by="tot.{{currentLanguage() === \'en\' ? \'occupationEn\' : \'occupationEt\'}}" ng-if="!showSchool">{{\'teacher.occupation.label\' | translate}}</th> <th md-column ng-if="schoolHigher && !showSchool">{{\'teacher.occupation.departments\' | translate}}</th> <th md-column ng-if="!showSchool" md-order-by="t.isActive">{{\'teacher.isActive\' | translate}}</th> <th md-column></th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="row in tabledata.content" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell ng-if="showSchool">{{currentLanguageNameField(row.school)}}</td> <td md-cell> <a ng-href="#/teachers/{{::row.id}}" ng-if="auth.school">{{::row.name}}</a> <span ng-if="!auth.school">{{::row.name}}</span> </td> <td md-cell>{{::row.idcode}}</td> <td md-cell>{{::row.email}}</td> <td md-cell>{{::row.phone}}</td> <td md-cell ng-if="!showSchool">{{currentLanguageNameField(row.teacherOccupation)}}</td> <td md-cell ng-if="schoolHigher && !showSchool"> <table> <tr ng-repeat="department in row.schoolDepartments | orderBy: \'nameEt\'"> <td>{{currentLanguageNameField(department)}}</td> </tr> </table> </td> <td md-cell ng-if="!showSchool">{{::row.isActive ? \'main.yes\' : \'main.no\' | translate}}</td> <td md-cell> <md-button md-no-ink class="md-primary change-button" ng-href="#/teachers/{{::row.id}}/edit" ng-if="row.canEdit"> {{\'main.button.change\' | translate}} </md-button> </td> </tr> </tbody> </table> </md-table-container> <md-table-pagination md-limit="criteria.size" md-limit-options="[10, 20, 50]" md-page="criteria.page" md-total="{{tabledata.totalElements}}" md-on-paginate="loadData" md-label="{page: \'{{\'main.page\' | translate}}:\', rowsPerPage: \'{{\'main.rowPerPage\' | translate}}:\', of: \'{{\'main.of\' | translate}}\'}" md-page-select></md-table-pagination> </div> </div>'),a.put("teacher/teacher.mobility.edit.html",'<md-nav-bar md-selected-nav-item="currentNavItem" nav-bar-aria-label="main selection" ng-cloak> <md-nav-item ng-if="auth.isAdmin()" md-nav-href="#/teachers/{{::teacher.id}}/edit?_noback" name="teacher.data"> {{\'teacher.data\' | translate}}</md-nav-item> <md-nav-item ng-if="auth.isTeacher()" md-nav-href="#/teachers/{{::teacher.id}}/editmydata?_noback" name="teacher.data"> {{\'teacher.data\' | translate}}</md-nav-item> <md-nav-item ng-if="(auth.isAdmin() && teacher.id && teacher.isVocational) || (auth.isTeacher() && !teacher.isHigher)" md-nav-href="#/teachers/{{::teacher.id}}/continuingEducation?_noback" name="teacher.continuingEducation"> {{\'teacher.continuingEducation.label\' | translate}}</md-nav-item> <md-nav-item ng-if="(auth.isAdmin() && teacher.id) || (teacher.teacherQualifications.length > 0 && auth.isTeacher())" md-nav-href="#/teachers/{{::teacher.id}}/qualification?_noback" name="teacher.qualification"> {{\'teacher.qualification.qualification\' | translate}}</md-nav-item> <md-nav-item ng-if="(auth.isAdmin() && teacher.id && teacher.isHigher && isHigher) || (auth.isTeacher() && teacher.teacherMobility.length > 0)" md-nav-href="#/teachers/{{::teacher.id}}/mobility?_noback" name="teacher.mobility"> {{\'teacher.mobility.mobility\' | translate}}</md-nav-item> <md-nav-item ng-if="(auth.isAdmin() && teacher.id) || auth.isTeacher()" md-nav-href="#/teachers/{{::teacher.id}}/rtipAbsence?_noback" name="teacher.rtipAbsence"> {{\'teacher.rtipAbsence.label\' | translate}}</md-nav-item> </md-nav-bar> <md-content class="md-padding"> <form name="mobilityForm" class="nomargin" novalidate> <md-button ng-click="newTeacherMobility()" class="md-raised">{{\'teacher.mobility.add\' | translate}}</md-button> <div ng-repeat="mobility in teacherMobility.mobilities  | orderBy: \'-id\'"> <hois-collapsable label="(\'teacher.mobility.mobility\' | translate)"> <div layout="column" flex> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="25" flex-sm="100" flex-offset-sm="0"> <label>{{\'teacher.mobility.start\' | translate}}</label> <md-datepicker ng-model="mobility.start" md-max-date="mobility.end" required md-open-on-focus></md-datepicker> </md-input-container> <md-input-container flex="20" flex-sm="100" flex-offset="5" flex-offset-sm="0"> <label>{{\'teacher.mobility.end\' | translate}}</label> <md-datepicker ng-model="mobility.end" md-min-date="mobility.start" required md-open-on-focus></md-datepicker> </md-input-container> <md-input-container flex="45" flex-sm="100" flex-offset="5" flex-offset-sm="0"> <label>{{\'teacher.mobility.state\' | translate}}</label> <hois-classifier-select ng-model="mobility.state" main-classifier-code="RIIK" required model-value-attr="code"></hois-classifier-select> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="25" flex-sm="100" flex-offset-sm="0"> <label>{{\'teacher.mobility.target\' | translate}}</label> <hois-classifier-select ng-model="mobility.target" main-classifier-code="EHIS_MOBIILSUS" required model-value-attr="code"></hois-classifier-select> </md-input-container> <md-input-container flex="50" flex-sm="100" flex-offset="5" flex-offset-sm="0"> <label>{{\'teacher.mobility.school\' | translate}}</label> <input ng-model="mobility.school" name="mobility[{{$index}}].school" md-maxlength="255" type="text" required> <div ng-messages="mobilityForm[\'mobility[\'+$index+\'].school\'].$error"> <div ng-message="md-maxlength"> {{\'main.messages.error.maxlength\' | translate}} </div> </div> </md-input-container> </div> </div> <md-button ng-click="deleteMobility(mobility)" class="md-raised">{{\'main.button.delete\' | translate}}</md-button> </hois-collapsable> </div> <md-button ng-click="updateTeacherMobility()" class="md-raised md-primary" ng-if="teacherMobility.mobilities.length > 0"> {{\'main.button.save\' | translate}} </md-button> <md-button ng-if="auth.isTeacher()" ng-click="back(\'#/teachers/myData\')" class="md-raised">{{\'main.button.back\' | translate}}</md-button> <md-button ng-if="auth.isAdmin()" ng-click="back(\'#/teachers\', mobilityForm)" class="md-raised">{{\'main.button.back\' | translate}}</md-button> </form> </md-content>'),a.put("teacher/teacher.mobility.view.html",'<!--<div ng-include="\'teacher/teacher.menu.view.html\'"></div>--> <div class="ois-form-layout form-readonly"> <div flex> <div ng-repeat="mobility in teacher.teacherMobility"> <hois-collapsable label="(\'teacher.mobility.mobility\' | translate)"> <div layout="column"> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="25" flex-sm="100" flex-offset-sm="0"> <label>{{\'teacher.mobility.start\' | translate}}</label> <hois-value value="mobility.start | hoisDate"></hois-value> </md-input-container> <md-input-container flex="20" flex-sm="100" flex-offset="5" flex-offset-sm="0"> <label>{{\'teacher.mobility.end\' | translate}}</label> <hois-value value="mobility.end | hoisDate"></hois-value> </md-input-container> <md-input-container flex="45" flex-sm="100" flex-offset="5" flex-offset-sm="0"> <label>{{\'teacher.mobility.state\' | translate}}</label> <hois-classifier-value ng-model="mobility.state" main-classifier-code="RIIK"></hois-classifier-value> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="25" flex-sm="100" flex-offset-sm="0"> <label>{{\'teacher.mobility.target\' | translate}}</label> <hois-classifier-value ng-model="mobility.target" main-classifier-code="EHIS_MOBIILSUS"></hois-classifier-value> </md-input-container> <md-input-container flex="50" flex-sm="100" flex-offset="5" flex-offset-sm="0"> <label>{{\'teacher.mobility.school\' | translate}}</label> <hois-value value="mobility.school"></hois-value> </md-input-container> </div> </div> </hois-collapsable> </div> </div> </div>'),a.put("teacher/teacher.occupation.edit.html",'<div layout="column" layout-padding> <div> <form name="teacherOccupationForm"> <md-input-container class="md-block"> <label>{{\'teacher.occupation.occupationEt\' | translate}}</label> <input ng-model="teacherOccupation.occupationEt" name="occupationEt" type="text" required md-maxlength="100"> </md-input-container> <md-input-container class="md-block"> <label class="textInput">{{\'teacher.occupation.occupationEn\' | translate}}</label> <input ng-model="teacherOccupation.occupationEn" name="occupationEn" type="text" md-maxlength="100"> </md-input-container> <md-checkbox ng-model="teacherOccupation.isValid" name="isValid"> {{\'teacher.occupation.isValid\' | translate}} </md-checkbox> </form> <md-button ng-click="update()" class="md-raised md-primary">{{\'main.button.save\' | translate}}</md-button> <md-button ng-click="delete()" ng-if="teacherOccupation.id" class="md-raised">{{\'main.button.delete\' | translate}}</md-button> <md-button ng-click="back(\'#/school/teacheroccupations\', teacherOccupationForm)" class="md-raised">{{\'main.button.back\' | translate}}</md-button> </div> </div>'),a.put("teacher/teacher.occupation.list.html",'<div class="ois-form-layout-padding"> <div flex> <fieldset> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'main.searchlabel\' | translate}}</legend> <form name="searchForm" ng-submit="searchForm.$valid && loadData()" novalidate class="nomargin" layout="column"> <div layout="row" layout-sm="column" layout-xs="column"> <!--div class="indentForToast"></div--> <md-input-container flex="45" flex-sm="100" flex-xs="100"> <label class="textInput">{{\'teacher.occupation.occupationEt\' | translate}}</label> <input ng-model="criteria.occupationEt" name="occupationEt" type="text" md-maxlength="100" autofocus> </md-input-container> <md-input-container flex="50" flex-sm="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label class="textInput">{{\'teacher.occupation.occupationEn\' | translate}}</label> <input ng-model="criteria.occupationEn" name="occupationEn" type="text" md-maxlength="100"> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container> <md-checkbox ng-model="criteria.isValid" name="isValid"> {{\'teacher.occupation.isValid\' | translate}} </md-checkbox> </md-input-container> </div> <div layout="row"> <md-button type="submit" class="md-raised md-primary">{{\'main.button.search\' | translate}}</md-button> <md-button class="md-raised" ng-click="clearCriteria()">{{\'main.button.clear\' | translate}}</md-button> <md-button class="md-raised" ng-if="isAuthorized(\'ROLE_OIGUS_M_TEEMAOIGUS_OPETAJAAMET\')" ng-href="#/school/teacheroccupations/new">{{\'main.button.create\' | translate}}</md-button> </div> <div flex-xs="0" flex-gt-xs="0" flex-gt-sm="50"></div> </form> </fieldset> </div> </div> <div layout-padding> <div flex> <md-table-container> <table md-table md-progress="tabledata.$promise"> <thead md-head md-order="criteria.order" md-on-reorder="loadData"> <tr md-row> <th md-column md-order-by="occupationEt">{{\'teacher.occupation.occupationEt\' | translate}}</th> <th md-column md-order-by="occupationEn">{{\'teacher.occupation.occupationEn\' | translate}}</th> <th md-column md-order-by="isValid">{{\'teacher.occupation.status\' | translate}}</th> <th md-column></th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="row in tabledata.content" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell>{{::row.occupationEt}}</td> <td md-cell>{{::row.occupationEn}}</td> <td md-cell>{{row.isValid ? \'teacher.occupation.validTrue\' : \'teacher.occupation.validFalse\' | translate}}</td> <td md-cell> <md-button md-no-ink class="md-primary change-button" ng-if="isAuthorized(\'ROLE_OIGUS_M_TEEMAOIGUS_OPETAJAAMET\')" ng-href="#/school/teacheroccupations/{{::row.id}}/edit">{{\'main.button.change\' | translate}}</md-button> </td> </tr> </tbody> </table> </md-table-container> <md-table-pagination md-limit="criteria.size" md-limit-options="[10, 20, 50]" md-page="criteria.page" md-total="{{tabledata.totalElements}}" md-on-paginate="loadData" md-label="{page: \'{{\'main.page\' | translate}}:\', rowsPerPage: \'{{\'main.rowPerPage\' | translate}}:\', of: \'{{\'main.of\' | translate}}\'}" md-page-select></md-table-pagination> </div> </div>'),a.put("teacher/teacher.qualification.edit.html",'<md-nav-bar md-selected-nav-item="currentNavItem" nav-bar-aria-label="main selection" ng-cloak> <md-nav-item ng-if="auth.isAdmin()" md-nav-href="#/teachers/{{::teacher.id}}/edit?_noback" name="teacher.data"> {{\'teacher.data\' | translate}}</md-nav-item> <md-nav-item ng-if="auth.isTeacher()" md-nav-href="#/teachers/{{::teacher.id}}/editmydata?_noback" name="teacher.data"> {{\'teacher.data\' | translate}}</md-nav-item> <md-nav-item ng-if="(auth.isAdmin() && teacher.id && teacher.isVocational) || (auth.isTeacher() && !teacher.isHigher)" md-nav-href="#/teachers/{{::teacher.id}}/continuingEducation?_noback" name="teacher.continuingEducation"> {{\'teacher.continuingEducation.label\' | translate}}</md-nav-item> <md-nav-item ng-if="(auth.isAdmin() && teacher.id) || (teacher.teacherQualifications.length > 0 && auth.isTeacher())" md-nav-href="#/teachers/{{::teacher.id}}/qualification?_noback" name="teacher.qualification"> {{\'teacher.qualification.qualification\' | translate}}</md-nav-item> <md-nav-item ng-if="(auth.isAdmin() && teacher.id && teacher.isHigher && isHigher) || (auth.isTeacher() && teacher.teacherMobility.length > 0)" md-nav-href="#/teachers/{{::teacher.id}}/mobility?_noback" name="teacher.mobility"> {{\'teacher.mobility.mobility\' | translate}}</md-nav-item> <md-nav-item ng-if="(auth.isAdmin() && teacher.id) || auth.isTeacher()" md-nav-href="#/teachers/{{::teacher.id}}/rtipAbsence?_noback" name="teacher.rtipAbsence"> {{\'teacher.rtipAbsence.label\' | translate}}</md-nav-item> </md-nav-bar> <md-content class="md-padding"> <form name="qualificationsForm" class="nomargin" novalidate> <md-button ng-click="newTeacherQualification()" class="md-raised">{{\'teacher.qualification.add\' | translate}} </md-button> <div ng-repeat="qualification in teacherQualifications.qualifications | orderBy: \'-id\'"> <hois-collapsable label="(\'teacher.qualification.qualification\' | translate)"> <div layout="column" flex> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="50" flex-sm="100"> <label>{{\'teacher.qualification.qualification\' | translate}}</label> <hois-classifier-select ng-model="qualification.qualification" main-classifier-code="EHIS_KVALIFIKATSIOON" model-value-attr="code" required></hois-classifier-select> </md-input-container> <md-input-container flex="45" flex-sm="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'teacher.qualification.qualificationName\' | translate}}</label> <hois-classifier-select ng-model="qualification.qualificationName" main-classifier-code="EHIS_KVALIFIKATSIOON_NIMI" model-value-attr="code" required></hois-classifier-select> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column" class="top-margin"> <md-input-container flex="25" flex-sm="100"> <label>{{\'teacher.qualification.state\' | translate}}</label> <hois-classifier-select ng-model="qualification.state" main-classifier-code="RIIK" model-value-attr="code" ng-change="(qualification.state === \'RIIK_EST\') && (qualification.schoolOther = \'\')" required></hois-classifier-select> </md-input-container> <md-input-container flex="20" flex-offset="5" flex-sm="100" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'teacher.qualification.endDate\' | translate}}</label> <md-datepicker ng-model="qualification.endDate" md-open-on-focus required></md-datepicker> </md-input-container> <md-input-container flex="45" flex-sm="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'teacher.qualification.qualificationOther\' | translate}}</label> <input ng-model="qualification.qualificationOther" name="qualification[{{$index}}].qualificationOther" md-maxlength="255" type="text"> <div ng-messages="qualificationsForm[\'qualification[\'+$index+\'].qualificationOther\'].$error"> <div ng-message="md-maxlength"> {{\'main.messages.error.maxlength\' | translate}} </div> </div> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="25" flex-sm="100" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'teacher.qualification.school\' | translate}}</label> <hois-classifier-select ng-model="qualification.school" main-classifier-code="EHIS_EESTI_OPPEASUTUS" model-value-attr="code" ng-required="qualification.state === \'RIIK_EST\'"></hois-classifier-select> </md-input-container> <md-input-container flex="20" flex-sm="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'teacher.qualification.exSchool\' | translate}}</label> <hois-classifier-select ng-model="qualification.exSchool" main-classifier-code="EHIS_EESTI_OPPEASUTUS_ENDINE" model-value-attr="code"></hois-classifier-select> </md-input-container> <md-input-container flex="25" flex-sm="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'teacher.qualification.schoolOther\' | translate}}</label> <input ng-model="qualification.schoolOther" name="qualification[{{$index}}].schoolOther" md-maxlength="255" type="text" ng-disabled="qualification.state === \'RIIK_EST\'"> <div ng-messages="qualificationsForm[\'qualification[\'+$index+\'].schoolOther\'].$error"> <div ng-message="md-maxlength"> {{\'main.messages.error.maxlength\' | translate}} </div> </div> </md-input-container> </div> <span ng-if="teacher.isVocational"> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="25" flex-sm="100" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'teacher.qualification.diplomaNr\' | translate}}</label> <input ng-model="qualification.diplomaNr" name="qualification[{{$index}}].diplomaNr" md-maxlength="100" type="text"> <div ng-messages="qualificationsForm[\'qualification[\'+$index+\'].diplomaNr\'].$error"> <div ng-message="md-maxlength"> {{\'main.messages.error.maxlength\' | translate}} </div> </div> </md-input-container> <md-input-container flex="20" flex-sm="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'teacher.qualification.studyLevel\' | translate}}</label> <hois-classifier-select ng-model="qualification.studyLevel" main-classifier-code="EHIS_EDUCATION_LEVEL" model-value-attr="code"></hois-classifier-select> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="25" flex-sm="100" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'teacher.qualification.specialty\' | translate}}</label> <input ng-model="qualification.specialty" name="qualification[{{$index}}].specialty" md-maxlength="255" type="text"> <div ng-messages="qualificationsForm[\'qualification[\'+$index+\'].specialty\'].$error"> <div ng-message="md-maxlength"> {{\'main.messages.error.maxlength\' | translate}} </div> </div> </md-input-container> <md-input-container flex="20" flex-sm="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'teacher.qualification.language\' | translate}}</label> <hois-classifier-select ng-model="qualification.language" main-classifier-code="EHIS_OPETAJA_KEEL" model-value-attr="code"></hois-classifier-select> </md-input-container> <md-input-container flex="20" flex-sm="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'teacher.qualification.addInfo\' | translate}}</label> <textarea ng-model="qualification.addInfo" name="qualification[{{$index}}].addInfo" md-maxlength="4000" max-rows="2"></textarea> <div ng-messages="qualificationsForm[\'qualification[\'+$index+\'].addInfo\'].$error"> <div ng-message="md-maxlength"> {{\'main.messages.error.maxlength\' | translate}} </div> </div> </md-input-container> </div> </span> </div> <md-button ng-click="deleteQualification(qualification)" class="md-raised">{{\'main.button.delete\' | translate}}</md-button> </hois-collapsable> </div> <md-button ng-click="updateQualifications()" class="md-raised md-primary" ng-if="teacherQualifications.qualifications.length > 0"> {{\'main.button.save\' | translate}} </md-button> <md-button ng-if="auth.isTeacher()" ng-click="back(\'#/teachers/myData\')" class="md-raised">{{\'main.button.back\' | translate}}</md-button> <md-button ng-if="auth.isAdmin()" ng-click="back(\'#/teachers\', qualificationsForm)" class="md-raised">{{\'main.button.back\' | translate}}</md-button> </form> </md-content>'),
a.put("teacher/teacher.qualification.view.html",'<!--<div ng-include="\'teacher/teacher.menu.view.html\'"></div>--> <div class="ois-form-layout form-readonly"> <div flex> <div ng-repeat="qualification in teacher.teacherQualifications | orderBy: \'id\'"> <hois-collapsable label="(\'teacher.qualification.qualification\' | translate)"> <div layout="column" flex> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="50" flex-sm="100"> <label>{{\'teacher.qualification.qualification\' | translate}}</label> <hois-classifier-value ng-model="qualification.qualification" main-classifier-code="EHIS_KVALIFIKATSIOON"></hois-classifier-value> </md-input-container> <md-input-container flex="45" flex-sm="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'teacher.qualification.qualificationName\' | translate}}</label> <hois-classifier-value ng-model="qualification.qualificationName" main-classifier-code="EHIS_KVALIFIKATSIOON_NIMI"></hois-classifier-value> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column" class="top-margin"> <md-input-container flex="25" flex-sm="100"> <label>{{\'teacher.qualification.state\' | translate}}</label> <hois-classifier-value ng-model="qualification.state" main-classifier-code="RIIK"></hois-classifier-value> </md-input-container> <md-input-container flex="20" flex-offset="5" flex-sm="100" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'teacher.qualification.endDate\' | translate}}</label> <hois-value value="qualification.endDate | hoisDate"></hois-value> </md-input-container> <md-input-container flex="45" flex-sm="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'teacher.qualification.qualificationOther\' | translate}}</label> <hois-value value="qualification.qualificationOther"></hois-value> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="25" flex-sm="100" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'teacher.qualification.school\' | translate}}</label> <hois-classifier-value ng-model="qualification.school" main-classifier-code="EHIS_EESTI_OPPEASUTUS"></hois-classifier-value> </md-input-container> <md-input-container flex="20" flex-sm="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'teacher.qualification.exSchool\' | translate}}</label> <hois-classifier-value ng-model="qualification.exSchool" main-classifier-code="EHIS_EESTI_OPPEASUTUS_ENDINE"></hois-classifier-value> </md-input-container> <md-input-container flex="25" flex-sm="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'teacher.qualification.schoolOther\' | translate}}</label> <hois-value value="qualification.schoolOther"></hois-value> </md-input-container> </div> <span ng-if="teacher.isVocational"> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="25" flex-sm="100" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'teacher.qualification.diplomaNr\' | translate}}</label> <hois-value value="qualification.diplomaNr"></hois-value> </md-input-container> <md-input-container flex="20" flex-sm="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'teacher.qualification.studyLevel\' | translate}}</label> <hois-classifier-value ng-model="qualification.studyLevel" main-classifier-code="EHIS_EDUCATION_LEVEL"></hois-classifier-value> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="25" flex-sm="100" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'teacher.qualification.specialty\' | translate}}</label> <hois-value value="qualification.specialty"></hois-value> </md-input-container> <md-input-container flex="20" flex-sm="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'teacher.qualification.language\' | translate}}</label> <hois-classifier-value ng-model="qualification.language" main-classifier-code="EHIS_OPETAJA_KEEL"></hois-classifier-value> </md-input-container> <md-input-container flex="20" flex-sm="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'teacher.qualification.addInfo\' | translate}}</label> <hois-value value="qualification.addInfo"></hois-value> </md-input-container> </div> </span> </div> </hois-collapsable> </div> </div> </div>'),a.put("teacher/teacher.rtip.absence.view.html",'<md-nav-bar ng-if="rtipPage" md-selected-nav-item="currentNavItem" nav-bar-aria-label="main selection" ng-cloak> <md-nav-item ng-if="auth.isAdmin()" md-nav-href="#/teachers/{{::teacher.id}}/edit?_noback" name="teacher.data"> {{\'teacher.data\' | translate}}</md-nav-item> <md-nav-item ng-if="auth.isTeacher()" md-nav-href="#/teachers/{{::teacher.id}}/editmydata?_noback" name="teacher.data"> {{\'teacher.data\' | translate}}</md-nav-item> <md-nav-item ng-if="(auth.isAdmin() && teacher.id && teacher.isVocational) || (auth.isTeacher() && !teacher.isHigher)" md-nav-href="#/teachers/{{::teacher.id}}/continuingEducation?_noback" name="teacher.continuingEducation"> {{\'teacher.continuingEducation.label\' | translate}}</md-nav-item> <md-nav-item ng-if="(auth.isAdmin() && teacher.id) || (teacher.teacherQualifications.length > 0 && auth.isTeacher())" md-nav-href="#/teachers/{{::teacher.id}}/qualification?_noback" name="teacher.qualification"> {{\'teacher.qualification.qualification\' | translate}}</md-nav-item> <md-nav-item ng-if="(auth.isAdmin() && teacher.id && teacher.isHigher && isHigher) || (auth.isTeacher() && teacher.teacherMobility.length > 0)" md-nav-href="#/teachers/{{::teacher.id}}/mobility?_noback" name="teacher.mobility"> {{\'teacher.mobility.mobility\' | translate}}</md-nav-item> <md-nav-item ng-if="(auth.isAdmin() && teacher.id) || auth.isTeacher()" md-nav-href="#/teachers/{{::teacher.id}}/rtipAbsence?_noback" name="teacher.rtipAbsence"> {{\'teacher.rtipAbsence.label\' | translate}}</md-nav-item> </md-nav-bar> <div layout-padding> <md-table-container> <table md-table md-progress="tabledata.$promise" class="secondary-table"> <thead md-head md-order="criteria.order" md-on-reorder="loadData"> <tr md-row> <th md-column md-order-by="startDate">{{\'teacher.rtipAbsence.absenceFrom\' | translate}}</th> <th md-column md-order-by="endDate">{{\'teacher.rtipAbsence.absenceThru\' | translate}}</th> <th md-column md-order-by="reason">{{\'teacher.rtipAbsence.absenceReason\' | translate}}</th> <th md-column md-order-by="changed">{{\'teacher.rtipAbsence.changed\' | translate}}</th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="row in tabledata.content" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell>{{row.startDate | hoisDate}}</td> <td md-cell>{{row.endDate | hoisDate}}</td> <td md-cell>{{row.reason}}</td> <td md-cell>{{row.changed | hoisDate}}</td> </tr> </tbody> </table> </md-table-container> <md-table-pagination md-limit="criteria.size" md-limit-options="[10, 20, 50]" md-page="criteria.page" md-total="{{tabledata.totalElements}}" md-on-paginate="loadData" md-label="{page: \'{{\'main.page\' | translate}}:\', rowsPerPage: \'{{\'main.rowPerPage\' | translate}}:\', of: \'{{\'main.of\' | translate}}\'}" md-page-select></md-table-pagination> <div layout="row"> <md-button ng-if="!auth.isTeacher() && rtipPage && teacher.canEdit && teacher.rtipNr" ng-click="updateData()" class="md-raised md-primary">{{\'teacher.rtipAbsence.updateData\' | translate}}</md-button> <md-button ng-if="auth.isAdmin() && rtipPage" ng-click="back(\'#/teachers\')" class="md-raised">{{\'main.button.back\' | translate}}</md-button> <md-button ng-if="auth.isTeacher() && rtipPage" ng-click="back(\'#/teachers/myData\')" class="md-raised">{{\'main.button.back\' | translate}}</md-button> </div> </div>'),a.put("teacher/teacher.view.html",'<md-tabs md-dynamic-height md-border-bottom> <md-tab label="{{\'teacher.data\' | translate}}"> <md-content class="md-padding form-readonly"> <div style="padding-top: 1em"> <div layout="column"> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="30" flex-sm="100" flex-xs="100"> <label>{{auth.higher ? (\'teacher.person.idcodeHigher\' | translate) : (\'teacher.person.idcodeVocational\' | translate)}}</label> <hois-value value="teacher.person.idcode"></hois-value> </md-input-container> <md-input-container flex="30" flex-sm="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'teacher.person.birthdate\' | translate}}</label> <hois-value value="teacher.person.birthdate | hoisDate"></hois-value> </md-input-container> <md-input-container flex="30" flex-sm="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'teacher.person.sex\' | translate}}</label> <hois-classifier-value ng-model="teacher.person.sex" main-classifier-code="SUGU"></hois-classifier-value> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="30" flex-sm="100" flex-xs="100"> <label>{{auth.higher ? (\'teacher.person.nameHigher\' | translate) : (\'teacher.person.nameVocational\' | translate)}}</label> <hois-value value="teacher.person.firstname + \' \' + teacher.person.lastname"></hois-value> </md-input-container> <md-input-container flex="30" flex-sm="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'teacher.person.nativeLanguage\' | translate}}</label> <hois-classifier-value ng-model="teacher.nativeLanguage" main-classifier-code="EHIS_EMAKEEL"></hois-classifier-value> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="30" flex-sm="100" flex-xs="100"> <label>{{\'teacher.person.citizenship\' | translate}}</label> <hois-classifier-value ng-model="teacher.person.citizenship" main-classifier-code="RIIK"></hois-classifier-value> </md-input-container> <md-input-container flex="30" flex-sm="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'teacher.person.phone\' | translate}}</label> <hois-value value="teacher.person.phone"></hois-value> </md-input-container> <md-input-container flex="30" flex-sm="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'teacher.person.email\' | translate}}</label> <hois-value value="teacher.person.email"></hois-value> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex> <label>{{\'teacher.occupation.label\' | translate}}</label> <hois-value value="currentLanguageNameField(teacher.teacherOccupation)"></hois-value> </md-input-container> <md-input-container flex="30" flex-sm="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'teacher.phone\' | translate}}</label> <hois-value value="teacher.phone"></hois-value> </md-input-container> <md-input-container flex="30" flex-sm="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'teacher.email\' | translate}}</label> <hois-value value="teacher.email"></hois-value> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="30" flex-sm="100" flex-xs="100"> <label>{{\'teacher.scheduleLoad\' | translate}}</label> <hois-value value="teacher.scheduleLoad"></hois-value> </md-input-container> <md-radio-group ng-model="teacher.isStudyPeriodScheduleLoad" layout="row" layout-sm="column" layout-xs="column" flex="30" flex-sm="100" flex-xs="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0" class="align-center" disabled style="margin-top: -18px"> <md-radio-button ng-value="true"> {{\'teacher.studyPeriodLoad\' | translate}} </md-radio-button> <md-radio-button ng-value="false"> {{\'teacher.studyYearLoad\' | translate}} </md-radio-button> </md-radio-group> <md-input-container flex="30" flex-sm="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'teacher.isActive\' | translate}}</label> <hois-value value="teacher.isActive ? \'main.yes\' : \'main.no\' | translate"></hois-value> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="30" flex-sm="100" flex-xs="100"> <label>{{\'teacher.isVocationalOrIsHigher\' | translate}}</label> <hois-value value="vocationalHigher"></hois-value> </md-input-container> <md-input-container flex="30" flex-offset="5" flex-sm="100" flex-xs="100"> <label>{{\'teacher.rtipNr\' | translate}}</label> <hois-value value="teacher.rtipNr"></hois-value> </md-input-container> <md-input-container flex="30" flex-offset="5" flex-sm="100" flex-xs="100"> <label>{{\'teacher.untis\' | translate}}</label> <hois-value value="teacher.untisCode"></hois-value> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column" flex> <md-input-container flex> <label>{{\'teacher.addInfo\' | translate}}</label> <hois-value value="teacher.addInfo"></hois-value> </md-input-container> </div> </div> </div> <div ng-repeat="teacherPositionEhis in teacher.teacherPositionEhis | orderBy: \'id\'"> <hois-collapsable label="(\'teacher.teacherPositionEhis.label\' | translate)"> <div layout="column"> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="30" flex-sm="100" flex-xs="100"> <label>{{\'teacher.teacherPositionEhis.teachingLevel\' | translate}}</label> <hois-value value="teacherPositionEhis.isVocational === true ? \'teacher.isVocational\' : \'teacher.isHigher\' | translate"></hois-value> </md-input-container> <md-input-container flex="30" flex-sm="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'teacher.teacherPositionEhis.position\' | translate}}</label> <hois-classifier-value ng-model="teacherPositionEhis.position" main-classifier-code="EHIS_AMETIKOHT"></hois-classifier-value> </md-input-container> <md-input-container flex="30" flex-sm="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'teacher.teacherPositionEhis.positionSpecificationEt\' | translate}}</label> <hois-value value="teacherPositionEhis.positionSpecificationEt"></hois-value> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="30" flex-sm="100" flex-xs="100"> <label>{{\'teacher.teacherPositionEhis.contractType\' | translate}}</label> <hois-classifier-value ng-model="teacherPositionEhis.contractType" main-classifier-code="EHIS_LEPING"></hois-classifier-value> </md-input-container> <md-input-container flex="30" flex-sm="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'teacher.teacherPositionEhis.contractStart\' | translate}}</label> <hois-value value="teacherPositionEhis.contractStart | hoisDate"></hois-value> </md-input-container> <md-input-container flex="30" flex-sm="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'teacher.teacherPositionEhis.contractEnd\' | translate}}</label> <hois-value value="teacherPositionEhis.contractEnd | hoisDate"></hois-value> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="30" flex-sm="100" flex-xs="100"> <label>{{\'teacher.teacherPositionEhis.isContractEnded\' | translate}}</label> <hois-value value="teacherPositionEhis.isContractEnded === true ? \'main.yes\' : \'main.no\' | translate"></hois-value> </md-input-container> <md-input-container flex="30" flex-sm="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'teacher.teacherPositionEhis.load\' | translate}}</label> <hois-value value="teacherPositionEhis.load"></hois-value> </md-input-container> <md-input-container ng-if="teacherPositionEhis.isVocational === true" flex="30" flex-sm="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'teacher.teacherPositionEhis.language\' | translate}}</label> <hois-classifier-value ng-model="teacherPositionEhis.language" main-classifier-code="EHIS_OPETAJA_KEEL"></hois-classifier-value> </md-input-container> <md-input-container ng-if="!teacherPositionEhis.isVocational" flex="30" flex-sm="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'teacher.teacherPositionEhis.isTeacher\' | translate}}</label> <hois-value value="teacherPositionEhis.isTeacher === true ? \'main.yes\' : \'main.no\' | translate"></hois-value> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container ng-if="teacherPositionEhis.isVocational === true" flex="30" flex-sm="100" flex-xs="100"> <label>{{\'teacher.teacherPositionEhis.meetsQualification\' | translate}}</label> <hois-value value="teacherPositionEhis.meetsQualification === true ? \'main.yes\' : \'main.no\' | translate"></hois-value> </md-input-container> <md-input-container ng-if="teacherPositionEhis.isVocational === true" flex="30" flex-sm="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'teacher.teacherPositionEhis.workHalted\' | translate}}</label> <hois-value value="teacherPositionEhis.isChildCare === true ? \'main.yes\' : \'main.no\' | translate"></hois-value> </md-input-container> <md-input-container ng-if="teacherPositionEhis.isVocational === true" flex="30" flex-sm="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'teacher.teacherPositionEhis.isClassTeacher\' | translate}}</label> <hois-value value="teacherPositionEhis.isClassTeacher === true ? \'main.yes\' : \'main.no\' | translate"></hois-value> </md-input-container> </div> <div ng-if="!teacherPositionEhis.isVocational" layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="30" flex-sm="100" flex-xs="100"> <label>{{\'teacher.teacherPositionEhis.employmentType\' | translate}}</label> <hois-classifier-value ng-model="teacherPositionEhis.employmentType" main-classifier-code="EHIS_TOOSUHE"></hois-classifier-value> </md-input-container> <md-input-container flex="30" flex-sm="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'teacher.teacherPositionEhis.employmentTypeSpecification\' | translate}}</label> <hois-value value="teacherPositionEhis.employmentTypeSpecification"></hois-value> </md-input-container> <md-input-container flex="30" flex-sm="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'teacher.teacherPositionEhis.employmentCode\' | translate}}</label> <hois-value value="teacherPositionEhis.employmentCode"></hois-value> </md-input-container> </div> <div ng-if="!teacherPositionEhis.isVocational" layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="30" flex-sm="100" flex-xs="100"> <label>{{\'teacher.teacherPositionEhis.schoolDepartment\' | translate}}</label> <hois-value value="currentLanguageNameField(schoolDepartmentsById[teacherPositionEhis.schoolDepartment])"></hois-value> </md-input-container> <md-input-container flex="30" flex-sm="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'teacher.teacherPositionEhis.positionSpecificationEn\' | translate}}</label> <hois-value value="teacherPositionEhis.positionSpecificationEn"></hois-value> </md-input-container> </div> </div> </hois-collapsable> </div> <md-button ng-if="teacher.canEdit && auth.isTeacher()" ng-href="#/teachers/{{teacher.id}}/editmydata" class="md-raised md-primary">{{\'main.button.change\' | translate}}</md-button> </md-content> </md-tab> <md-tab label="{{\'teacher.continuingEducation.continuingEducation\' | translate}}" ng-if="teacher.teacherContinuingEducations.length > 0 && teacher.isVocational"> <md-content class="md-padding"> <div ng-include="\'teacher/teacher.continuing.education.view.html\'"></div> </md-content> </md-tab> <md-tab label="{{\'teacher.qualification.qualification\' | translate}}" ng-if="teacher.teacherQualifications.length > 0"> <md-content class="md-padding"> <div ng-include="\'teacher/teacher.qualification.view.html\'"></div> </md-content> </md-tab> <md-tab label="{{\'teacher.mobility.mobility\' | translate}}" ng-if="teacher.teacherMobility.length > 0"> <md-content class="md-padding"> <div ng-include="\'teacher/teacher.mobility.view.html\'"></div> </md-content> </md-tab> <md-tab md-on-select="changeIsShowingRtipTab()" md-on-deselect="changeIsShowingRtipTab()" label="{{\'teacher.rtipAbsence.label\' | translate}}"> <md-content class="md-padding"> <div ng-include="\'teacher/teacher.rtip.absence.view.html\'"></div> </md-content> </md-tab> </md-tabs> <div layout="row" ng-if="!auth.isTeacher()" class="md-padding"> <md-button ng-if="!isShowingRtipTab && teacher.canEdit" ng-href="#/teachers/{{teacher.id}}/edit?_noback" class="md-raised md-primary">{{\'main.button.change\' | translate}}</md-button> <md-button ng-if="isShowingRtipTab && teacher.canEdit && teacher.rtipNr" ng-click="updateData()" class="md-raised md-primary">{{\'teacher.rtipAbsence.updateData\' | translate}}</md-button> <md-button ng-click="back(\'#/teachers\')" class="md-raised">{{\'main.button.back\' | translate}}</md-button> </div>'),a.put("timetable/timetable.createHigherPlan.html",'<div class="ois-form-layout-padding" layout="column" ng-cloak> <div layout-padding id="groupSelection"> <div layout="row" class="form-readonly"> <md-input-container flex> <label class="textInput">{{\'timetable.timetablePlan.timetablePeriod\' | translate}}</label> <hois-value value="(plan.startDate | hoisDate) + \'-\'+(plan.endDate | hoisDate)"> </md-input-container> <div flex layout="row" layout-align="end start" class="common-label" md-colors="{color: \'background-400\'}"> <span ng-repeat="c in capacityTypes | orderBy: currentLanguageNameField()"> <span ng-if="!$first">|</span> {{::c.value.toUpperCase()}} - {{currentLanguageNameField(c)}} </span> </div> </div> <hois-collapsable expanded="false" label="(\'timetable.timetablePlan.showGroups\' | translate)"> <fieldset tabindex="1"> <div layout="column"> <md-checkbox ng-model="plan.selectAll" flex-offset="5"> {{\'timetable.timetablePlan.selectAll\' | translate}} </md-checkbox> <md-grid-list ng-app="app" md-cols="5" md-cols-md="3" md-cols-sm="2" md-cols-xs="1" md-row-height="5:1"> <md-grid-tile ng-repeat="group in plan.studentGroups"> <md-checkbox ng-model="group._selected" ng-change="updateGroups()"> {{group.code}} </md-checkbox> </md-grid-tile> <md-grid-tile ng-repeat="pair in plan.subjectTeacherPairs"> <md-checkbox ng-model="pair._selected" ng-change="updatePairs()"> {{pair.code}}</md-checkbox> </md-grid-tile> </md-grid-list> </div> </fieldset> </hois-collapsable> <div layout="column" flex layout-gt-md="row"> <div flex="50" layout="column" layout-gt-sm="row"> <md-input-container flex="100" flex-gt-sm="60"> <label>{{\'timetable.timetablePlan.planGroupLessonsSubject\' | translate}}</label> <hois-select ng-model="plan.selectedGroup" values="plan.currentStudentGroups" show-property="code" value-property="dropdownValue"></hois-select> </md-input-container> <hois-autocomplete flex="100" flex-gt-sm="35" flex-offset-gt-sm="5" ng-model="plan.eventRoom" method="rooms" label="lessonplan.event.room"></hois-autocomplete> </div> <div flex="45" layout="column" layout-gt-sm="row" flex-offset-gt-md="5"> <md-input-container flex="100" flex-gt-sm="35"> <label>{{\'timetable.timetablePlan.lessonAmount\' | translate}}</label> <input ng-model="plan.lessonAmount" type="number" autofocus aria-label="lessonamount"> </md-input-container> <md-input-container flex="100" flex-gt-sm="60" flex-offset-gt-sm="5"> <label>{{\'timetable.timetablePlan.repetition\' | translate}}</label> <hois-classifier-select ng-model="plan.repeatCode" model-value-attr="code" aria-label="repeatcode" main-classifier-code="TUNNIPLAAN_SYNDMUS_KORDUS"> </hois-classifier-select> </md-input-container> </div> </div> <div ng-if="plan.selectedGroup && plan.repeatCode && plan.lessonAmount"> <fieldset tabindex="1"> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'timetable.timetablePlan.plannedLessons\' | translate}}<span ng-if="plan.selectedGroup"> {{\'timetable.timetablePlan.group\' | translate}} {{plan.selectedStudentGroupObject.code}}</span></legend> <md-table-container> <table md-table class="secondary-table"> <thead md-head> <tr md-row> <th md-column ng-repeat="capacity in plan.currentCapacitiesGrouped track by $index" title="{{capacity[0].subjectName}}"> {{capacity[0].subjectCode}} ( <span ng-repeat="current in capacity" ng-style="{\'color\': isUnderAllocatedLessons(current) ? \'rgba(0,0,0,0.87)\' : \'red\'}"> {{getCapacityTypeValue(current.capacityType)}}: {{current.totalPlannedLessons}}/{{current.totalAllocatedLessons ? current.totalAllocatedLessons : 0}}{{$last ? \'\' : \', \'}}</span>) </th> </tr> </thead> <tbody md-body> <tr md-row ng-class-odd="\'odd\'" ng-class-even="\'even\'" id="timetable-planned"> <td md-cell ng-repeat="capacity in plan.currentCapacitiesGrouped track by $index" id="timetable-planned-column"> <div ng-repeat="current in capacity" style="background-color: {{getColorBySubjectStudyPeriod(current.subjectStudyPeriod)}}" id="{{current.subjectStudyPeriod}}-{{current.capacityType}}" journal-id="{{current.subjectStudyPeriod}}" ois-drag="true" capacity-type="{{current.capacityType}}" class="timetable-drag timetable-planned-capacity"> <span>{{current.subjectCode}}/{{getCapacityTypeValue(current.capacityType)}}</span> </div> </td> </tr> </tbody> </table> </md-table-container> </fieldset> </div> <div layout="row"> <md-input-container flex="30" flex-sm="100" flex-xs="100"> <label>{{\'timetable.timetablePlan.week\' | translate}}</label> <md-select ng-model="plan.selectedWeek" placeholder="{{\'timetable.timetablePlan.week\' | translate}}"> <md-option ng-value="week.start" ng-repeat="week in plan.weeks">{{ week.start | hoisDate }}-{{ week.end | hoisDate }}</md-option> </md-select> </md-input-container> </div> <div flex="20" flex-sm="100" flex-xs="100" flex-offset="3"> <md-input-container layout-align="start center"> <md-checkbox ng-model="plan.showLessonTimes" flex-offset="5"> {{\'timetable.timetablePlan.showLessonTimes\' | translate}} </md-checkbox> </md-input-container> </div> <div ng-if="plan.showLessonTimes"> <md-radio-group ng-model="plan.lessonTimeBuilding" layout="row" aria-label="absence" ng-change="lessonTimeBuildingChanged(building)"> <md-radio-button ng-repeat="building in plan.buildings" value="{{building.id}}">{{currentLanguageNameField(building)}}</md-radio-button> </md-radio-group> </div> <div>&nbsp;</div> </div> <div id="timetableCreation" ng-if="plan.currentStudentGroups.length > 0"> <md-table-container> <table md-table class="higher"> <thead md-head> <tr md-row> <th md-column></th> <th md-column ng-if="lessonsInDay[date] > 0" ng-repeat="date in plan.datesForTimetable" colspan="{{lessonsInDay[date]}}"> {{\'timetable.timetablePlan.\' + weekday[date.getDay()] | translate}} </th> </tr> </thead> <tbody md-body> <tr md-row ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td rowspan="2" class="dividerBorder"></td> <td ng-if="$even" ng-repeat="lessonTime in currentLessonTimes track by $index" colspan="2" ng-class="{dividerBorder: currentLessonTimes[$index + 1].endOfDay}"> <span> {{lessonTime.time | hoisTimeMin}} </span> </td> </tr> <tr> <td ng-repeat="lessonTime in currentLessonTimes track by $index" colspan="1" ng-class="{dividerBorder: lessonTime.endOfDay}"> <span>&nbsp;</span> </td> </tr> <tr md-row ng-class="\'even\'" ng-if="plan.showLessonTimes"> <td class="dividerBorder">{{\'timetable.timetablePlan.lessonTimes\' | translate}}</td> <td ng-repeat="lessonTime in lessonTimeLegend" colspan="{{lessonTime.colspan}}" class="higher-timetable-lesson-time" ng-class="{dividerBorder: lessonTime.endOfDay}"> <div layout="center">{{lessonTime.lessonNr}}</div> </td> </tr> <tr md-row ng-repeat="group in plan.currentStudentGroups | orderBy: orderBySelectedGroup" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td class="dividerBorder">{{group.code}}</td> <td ng-if="lessonsInDay[date] > 0" ng-repeat="date in plan.datesForTimetable" colspan="{{lessonsInDay[date]}}" class="dividerBorder"> <div ng-repeat="lessonTime in group.currentLessons[date.getDate() + date.getMonth() + date.getFullYear()]" old-event-id="{{lessonTime.id}}" ng-class="{\'timetable-higher-drop\' : (plan.selectedGroup === group.dropdownValue && plan.repeatCode && plan.lessonAmount), \'timetable-higher-drag\' : lessonTime.id ? true : false, \'timetable-higher\' : true}" drop-fn="saveEventAfterClashCheck(data)" ng-click="changeEvent(lessonTime)" ng-attr-ois-higher-drop="{{plan.selectedGroup === group.dropdownValue}}" ng-attr-ois-drag="{{(plan.selectedGroup === group.dropdownValue) && lessonTime.id !== undefined}}" id="{{lessonTime.id}}-{{group.id}}" ng-style="lessonTimeStyle(lessonTime)" title="{{lessonTime.subjectName}}/{{currentLanguageNameField(getCapacityType(lessonTime.capacityType))}}&#10;{{lessonTime.teacherNames.join(\', \')}}" journal-id="{{lessonTime.subjectStudyPeriod}}" capacity-type="{{lessonTime.capacityType}}"> <span ng-if="lessonTime.id"> {{lessonTime.subjectCode}}/{{getCapacityTypeValue(lessonTime.capacityType)}} </span> <br> <span ng-if="lessonTime.id && lessonTime.rooms && lessonTime.rooms.length > 0">{{getRoomCodes(lessonTime.rooms)}}</span> <span ng-if="lessonTime.id && (!lessonTime.rooms || lessonTime.rooms.length === 0)" ng-style="boldAndRed(lessonTime.rooms)">?</span> <span ng-if="!lessonTime.id">&nbsp;</span> </div> </td> </tr> </tbody> </table> </md-table-container> <md-button ng-href="#/timetable/{{timetableId}}/view" class="md-raised">{{\'main.button.back\' | translate}}</md-button> </div> </div>'),a.put("timetable/timetable.createVocationalPlan.html",'<div class="ois-form-layout-padding" layout="column" ng-cloak> <div layout-padding id="groupSelection"> <div layout="row" class="form-readonly"> <md-input-container flex> <label class="textInput">{{\'timetable.timetablePlan.timetablePeriod\' | translate}}</label> <hois-value value="(plan.startDate | hoisDate) + \'-\'+(plan.endDate | hoisDate)"> </md-input-container> <div flex layout="row" layout-align="end start" class="common-label" md-colors="{color: \'background-400\'}"> <span ng-repeat="c in capacityTypes | orderBy: currentLanguageNameField()"> <span ng-if="!$first">|</span> {{::c.value.toUpperCase()}} - {{currentLanguageNameField(c)}} </span> </div> </div> <hois-collapsable expanded="false" label="(\'timetable.timetablePlan.showGroups\' | translate)"> <fieldset tabindex="1"> <div layout="column"> <md-checkbox ng-model="plan.selectAll" flex-offset="5" ng-change="selectAllChanged()"> {{\'timetable.timetablePlan.selectAll\' | translate}} </md-checkbox> <md-grid-list ng-app="app" md-cols="5" md-cols-md="3" md-cols-sm="2" md-cols-xs="1" md-row-height="6:1"> <md-grid-tile ng-repeat="group in plan.studentGroups"> <md-checkbox ng-model="group._selected" ng-change="updateGroups()"> {{group.code}} </md-checkbox> </md-grid-tile> </md-grid-list> </div> </fieldset> </hois-collapsable> <div layout="row"> <md-checkbox ng-model="plan.displayPeriodLessons" flex="10" ng-change="displayPeriodLessonsChanged()"> {{\'timetable.timetablePlan.displayPeriodLessons\' | translate}} </md-checkbox> <md-checkbox ng-model="plan.displayLeftOverLessons" flex="10" ng-change="displayLeftOverLessonsChanged()"> {{\'timetable.timetablePlan.displayLeftOverLessons\' | translate}} </md-checkbox> <md-input-container flex="85" flex-sm="100" flex-xs="100" flex-offset="5"> <label>{{\'timetable.timetablePlan.planGroupLessons\' | translate}}</label> <hois-select ng-model="plan.selectedGroup" values="plan.studentGroups" show-property="code" value-property="id"></hois-select> </md-input-container> </div> <div> <fieldset tabindex="1"> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'timetable.timetablePlan.plannedLessons\' | translate}}<span ng-if="plan.selectedGroup"> {{\'timetable.timetablePlan.group\' | translate}} {{plan.selectedStudentGroupObject.code}}</span></legend> <md-table-container> <table md-table class="secondary-table"> <thead md-head> <tr md-row> <th title="{{journal.name}}" md-column ng-repeat="journal in plan.currentJournals" ng-if="showJournalPlannedLessons(journal)"> <span> <span>{{journal.name.substring(0, 4)}}</span> <br> <span ng-style="{\'color\': isUnderAllocatedWeekLessons(journal) ? \'rgba(0,0,0,0.87)\' : \'red\'}"> {{getTotalsByJournal(journal, \'thisPlannedLessons\')}}/{{getTotalsByJournal(journal, \'thisPlannedLessons\') - getTotalsByJournal(journal, \'lessonsLeft\')}} </span> <span ng-if="plan.displayPeriodLessons"> <span ng-style="{\'color\': isUnderAllocatedTotalLessons(journal) ? \'rgba(0,0,0,0.87)\' : \'red\'}"> ({{getTotalsByJournal(journal, \'totalPlannedLessons\')}}/{{getTotalsByJournal(journal,\'totalAllocatedLessons\')}}) </span> </span> <span ng-if="plan.displayLeftOverLessons"> <span ng-style="{\'color\': isUnderLeftOverTotalLessons(journal) ? \'rgba(0,0,0,0.87)\' : \'red\'}"> ({{getTotalsByJournal(journal, \'totalPlannedLessons\') + getTotalsByJournal(journal, \'leftOverLessons\')}}/{{getTotalsByJournal(journal,\'totalAllocatedLessons\')}}) </span> </span> </span> </th> </tr> </thead> <tbody md-body> <tr md-row ng-class-odd="\'odd\'" ng-class-even="\'even\'" id="timetable-planned"> <td md-cell ng-repeat="capacity in plan.currentCapacitiesGrouped track by $index" ng-if="showCurrentCapacitiesGrouped(capacity)" id="timetable-planned-column"> <div ng-repeat="current in capacity" class="timetable-planned-capacity"> <div ng-if="!plan.displayPeriodLessons && !plan.displayLeftOverLessons && current.lessonsLeft > 0" title="{{getByCapacity(current, \'name\')}}/{{currentLanguageNameField(getCapacityType(current.capacityType))}}" style="background-color: {{getByCapacity(current, \'color\')}}" id="{{current.journal}}-{{count}}" ois-drag="true" journal-id="{{current.journal}}" capacity-type="{{current.capacityType}}" class="timetable-drag"> <span>{{getByCapacity(current, \'name\').substring(0, 4)}}/{{getCapacityTypeValue(current.capacityType)}}</span> </div> <div ng-if="plan.displayPeriodLessons && current.totalLessonsLeft > 0" title="{{getByCapacity(current, \'name\')}}/{{currentLanguageNameField(getCapacityType(current.capacityType))}}" style="background-color: {{getByCapacity(current, \'color\')}}" id="{{current.journal}}-{{count}}" ois-drag="true" journal-id="{{current.journal}}" capacity-type="{{current.capacityType}}" class="timetable-drag"> <span>{{getByCapacity(current, \'name\').substring(0, 4)}}/{{getCapacityTypeValue(current.capacityType)}}</span> </div> <div ng-if="plan.displayLeftOverLessons && current.totalPlannedLessons + current.leftOverLessons > current.totalAllocatedLessons" title="{{getByCapacity(current, \'name\')}}/{{currentLanguageNameField(getCapacityType(current.capacityType))}}" style="background-color: {{getByCapacity(current, \'color\')}}" id="{{current.journal}}-{{count}}" ois-drag="true" journal-id="{{current.journal}}" capacity-type="{{current.capacityType}}" class="timetable-drag"> <span>{{getByCapacity(current, \'name\').substring(0, 4)}}/{{getCapacityTypeValue(current.capacityType)}}</span> </div> </div> </td> </tr> </tbody> </table> </md-table-container> </fieldset> </div> </div> <div id="timetableCreation"> <md-table-container> <table md-table class="timetableVocationalPlan"> <thead md-head> <tr md-row> <th md-column></th> <th md-column ng-repeat="date in plan.datesForTimetable" colspan="{{lessonsInDay[weekday[date.getDay()]].length}}">{{\'timetable.timetablePlan.\' + weekday[date.getDay()] | translate}} </th> </tr> </thead> <tbody md-body> <tr md-row ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td class="dividerBorder"></td> <td style="text-align: center" ng-repeat="lessonTime in currentLessonTimes track by $index" ng-class="{dividerBorder: lessonTime.endOfDay}"> <span>{{lessonTime.lessonNr}}</span> </td> </tr> <tr md-row ng-repeat="group in plan.currentStudentGroups | orderBy: orderBySelectedGroup" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td class="dividerBorder">{{group.code}}</td> <td ng-repeat="lessonTime in currentLessonTimes track by $index" ng-class="{noLessonTime: lessonTime.noLessons, dividerBorder: lessonTime.endOfDay}"> <span ng-if="!lessonTime.noLessons"> <div index-value="{{$parent.$index}}" drop-fn="saveEvent(data)" ng-attr-ois-drop="{{plan.selectedGroup === group.id}}" ng-repeat="currentEvent in t = angular.equals(t.id, getEventsForLesson($index, lessonTime, group).id) ? t : getEventsForLesson($index, lessonTime, group)" ng-click="changeEvent(currentEvent)" ng-attr-ois-drag="{{plan.selectedGroup === group.id}}" id="{{currentEvent.journalObject.id + \'-\' + $index + group.id}}" journal-id="{{currentEvent.journal}}" class="timetable-drag" style="background-color:{{currentEvent.journalObject.color}}" old-event-id="{{currentEvent.id}}" title="{{currentEvent.journalObject.name}}/{{currentLanguageNameField(getCapacityType(currentEvent.capacityType))}}&#10;{{currentEvent.currentTeachers.join(\', \')}}"> <span>{{currentEvent.journalObject.name.substr(0, 4)}}/{{getCapacityTypeValue(currentEvent.capacityType)}}</span> <br> <span style=";{{currentEvent.rooms.length !== 0 ? \'\' : \'color:red;font-weight: bold;\'}}">{{currentEvent.rooms.length !== 0 ? getRoomCodes(currentEvent.rooms) : "?"}}</span> </div> <div ng-if="!getEventsForLesson($index, lessonTime, group)" ng-attr-ois-drop="{{plan.selectedGroup === group.id}}" index-value="{{$index}}" drop-fn="saveEvent(data)" id="{{group.id + \'-\' + $index}}" class="timetable-drop"> </div> </span> </td> </tr> </tbody> </table> </md-table-container> <md-button ng-href="#/timetable/{{timetableId}}/view" class="md-raised">{{\'main.button.back\' | translate}}</md-button> </div> </div>'),
a.put("timetable/timetable.edit.html",'<div class="ois-form-layout-padding ois-form-layout" ng-cloak> <div> <form name="timetableForm" novalidate class="nomargin"> <md-input-container layout="row" flex="50" flex-sm="100" flex-xs="100"> <label>{{\'timetable.management.studyYear\' | translate}}</label> <hois-select required ng-model="timetable.studyYear" values="formState.studyYears" ng-change="studyYearChanged()" ng-disabled="timetable.code === \'TUNNIPLAAN_LIIK_V\'"></hois-select> </md-input-container> <md-input-container layout="row" flex="50" flex-sm="100" flex-xs="100"> <label>{{\'timetable.management.studyPeriod\' | translate}}</label> <hois-select required ng-model="timetable.studyPeriod" values="formState.studyPeriods" ng-disabled="timetable.code === \'TUNNIPLAAN_LIIK_V\'"></hois-select> </md-input-container> <div layout="row"> <md-input-container flex="25" flex-md="100" flex-sm="100" flex-xs="100"> <label>{{\'main.from\' | translate}}</label> <md-datepicker required ng-model="timetable.startDate" md-min-date="studyPeriodStartDate" md-max-date="studyPeriodEndDate" md-date-filter="blockedFromDatesPredicate" ng-disabled="timetable.code === \'TUNNIPLAAN_LIIK_V\' || !timetable.studyPeriod"></md-datepicker> </md-input-container> <md-input-container flex="25" flex-md="100" flex-sm="100" flex-xs="100"> <label>{{\'main.thru\' | translate}}</label> <md-datepicker required ng-model="timetable.endDate" md-min-date="endDateMinDate" md-max-date="studyPeriodEndDate" md-date-filter="blockedThruDatesPredicate" ng-disabled="timetable.code === \'TUNNIPLAAN_LIIK_V\' || !timetable.studyPeriod"></md-datepicker> </md-input-container> </div> <md-input-container layout="row" flex="50" flex-sm="100" flex-xs="100"> <label>{{\'timetable.management.type\' | translate}}</label> <hois-classifier-select ng-model="timetable.code" model-value-attr="code" main-classifier-code="TUNNIPLAAN_LIIK" disabled></hois-classifier-select> </md-input-container> </form> <md-button ng-click="save()" class="md-raised md-primary">{{\'main.button.save\' | translate}}</md-button> <md-button ng-href="#/timetable/timetableManagement" class="md-raised">{{\'main.button.back\' | translate}} </md-button> </div> </div>'),a.put("timetable/timetable.event.change.dialog.html",'<md-dialog aria-label="add enterprise dialog" flex="30"> <form name="dialogForm" ng-submit="dialogForm.$valid && saveEvent()" novalidate ng-cloak> <md-toolbar> <div class="md-toolbar-tools"> <h2 flex>{{lessonHeader}}, {{currentLanguageNameField(lessonCapacityName)}}</h2> <md-button class="md-icon-button" ng-click="cancel()"> <md-icon md-font-set="material-icons">close</md-icon> </md-button> </div> </md-toolbar> <md-dialog-content> <span flex></span> <div class="ois-form-layout" layout="column" layout-margin ng-cloak> <div layout="column"> <div flex="100" flex-offset="2" flex-offset-xs="0" flex-offset-sm="0"> <div layout="row" flex="70"> <hois-autocomplete flex ng-model="lesson.eventRoom" method="rooms" label="lessonplan.event.room" warning-param="isOccupied" additional-query-params="{buildingIds: lesson.buildingIds, isStudy: true, occupied: true, date: lesson.start, \r\n                    timetable: timetableId, startTime: lesson.startTime, endTime: lesson.endTime}"></hois-autocomplete> </div> <div layout="column" class="common-label" flex="70" ng-repeat="room in lesson.eventRooms"> <div layout="row" flex layout-align="start center"> <div flex="10">&nbsp;</div> <div flex="60">{{room.nameEt}}</div> <div flex="25" class="occupied-warning"> <span ng-if="isRoomOccupied(room.id)"> <md-icon md-colors="{color: \'default-warn\'}" md-font-set="material-icons">warning</md-icon> <span md-colors="{color: \'default-warn\'}">{{\'timetable.timetableEvent.occupied\' | translate}}</span> </span> </div> <div><a ng-click="removeFromArray(lesson.eventRooms, room)" class="remove">&times;</a></div> </div> </div> </div> <div layout="row" flex="100"> <md-input-container flex="30" flex-sm="100" flex-offset="2" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'main.start\' | translate}}</label> <hois-time ng-model="lesson.startTime" placeholder="{{\'main.timePlaceholder\' | translate}}"></hois-time> </md-input-container> <md-input-container flex="30" flex-sm="100" flex-offset="10" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'main.end\' | translate}}</label> <hois-time ng-model="lesson.endTime" placeholder="{{\'main.timePlaceholder\' | translate}}"></hois-time> </md-input-container> </div> <div flex="100"> <div ng-repeat="teacher in teachers" layout="row" flex="70" class="common-label"> <div flex="10"> <md-checkbox layout="row" ng-model="teacher.isTeaching"></md-checkbox> </div> <div flex="60">{{teacher.nameEt}}</div> <div flex="25" class="occupied-warning"> <span ng-if="isTeacherOccupied(teacher.id)"> <md-icon md-colors="{color: \'default-warn\'}" md-font-set="material-icons">warning</md-icon> <span md-colors="{color: \'default-warn\'}">{{\'timetable.timetableEvent.occupied\' | translate}}</span> </span> </div> </div> </div> </div> </div> </md-dialog-content> <md-dialog-actions layout="row" layout-align="start start"> <md-button class="md-raised md-primary" type="submit">{{\'main.button.save\' | translate}}</md-button> <md-button class="md-raised" ng-click="cancel()">{{"main.button.close" | translate}}</md-button> <md-button class="md-raised" ng-click="deleteEvent(lesson.id)">{{"main.button.delete" | translate}}</md-button> </md-dialog-actions> </form> </md-dialog>'),a.put("timetable/timetable.lessonTime.html",'<div class="ois-form-layout-padding ois-form-layout" ng-cloak> <div flex> <form layout="column" name="lessonTimeForm" novalidate class="nomargin"> <div layout="column" flex> <div> <div layout="row" layout-sm="column" layout-xs="column" flex-sm="100" flex-xs="100"> <md-input-container> <label>{{\'timetable.lessonTime.validFrom\' | translate}}</label> <md-datepicker ng-model="validFrom" md-min-date="minValidFrom" required></md-datepicker> </md-input-container> </div> <div layout-padding ng-repeat="block in blocks | orderBy: \'id\'"> <div layout="row" layout-sm="column" layout-xs="column" flex> <md-input-container flex="10" flex-xs="100"> <label>{{\'timetable.buildings\' | translate}}</label> </md-input-container> <md-input-container layout="row" layout-align="start center"> <md-checkbox ng-model="block.selectedBuildings[building.id]" ng-disabled="isBuildingDisabled(building, block)" ng-change="buildingChanged(building, block)" ng-repeat="building in buildings | orderBy: currentLanguageNameField()">{{ currentLanguageNameField(building) }}</md-checkbox> </md-input-container> </div> <input style="display:none" type="number" readonly name="{{\'buildingsLength\'+$index}}" ng-model="selectedBuildingsLength(block)" ng-model-options="{ getterSetter: true }" min="1"> <div md-colors="{color: \'warn-A400\'}" ng-messages="lessonTimeForm[\'buildingsLength\'+$index].$error"> <div ng-if="lessonTimeForm.$submitted" ng-message="min">{{\'main.messages.error.atLeastOneShouldBeAdded\' | translate}}</div> </div> <md-table-container> <table md-table md-progress="tabledata.$promise"> <thead md-head md-order="criteria.order" md-on-reorder="loadData"> <tr md-row> <th md-column>{{\'main.nr\' | translate}}</th> <th md-column>{{\'main.start\' | translate}}</th> <th md-column>{{\'main.end\' | translate}}</th> <th md-column>{{\'timetable.academicHours\' | translate}}</th> <th md-column>{{\'main.mondayShort\' | translate}}</th> <th md-column>{{\'main.tuesdayShort\' | translate}}</th> <th md-column>{{\'main.wednesdayShort\' | translate}}</th> <th md-column>{{\'main.thursdayShort\' | translate}}</th> <th md-column>{{\'main.fridayShort\' | translate}}</th> <th md-column>{{\'main.saturdayShort\' | translate}}</th> <th md-column>{{\'main.sundayShort\' | translate}}</th> <th md-column></th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="lessonTime in block.lessonTimes | orderBy: \'lessonNr\'" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell> <md-input-container> <input style="width:4em" ng-model="lessonTime.lessonNr" ng-model-options="{ updateOn: \'mousedown blur\' }" aria-label="{{\'main.nr\' | translate}}" type="number" ng-required="isLessonTimeRowFilled(lessonTime)"> </md-input-container> </td> <td md-cell> <md-input-container> <label></label> <hois-time placeholder="{{\'main.timePlaceholder\' | translate}}" ng-model="lessonTime.startTime" ng-max="lessonTime.endTime" aria-label="{{\'main.start\' | translate}}" ng-required="isLessonTimeRowFilled(lessonTime)"></hois-time> </md-input-container> </td> <td md-cell> <md-input-container> <label></label> <hois-time placeholder="{{\'main.timePlaceholder\' | translate}}" ng-model="lessonTime.endTime" ng-min="lessonTime.startTime" aria-label="{{\'main.end\' | translate}}" ng-required="isLessonTimeRowFilled(lessonTime)"></hois-time> </md-input-container> </td> <td md-cell> <md-input-container flex="25"> <input ng-model="lessonTime.academicHours" ng-value="calculateAcademicHours(lessonTime.startTime, lessonTime.endTime)" aria-label="{{\'timetable.academicHours\' | translate}}" type="text" readonly> </md-input-container> </td> <td md-cell> <md-input-container> <md-checkbox ng-model="lessonTime.dayMon" aria-label="{{\'main.mondayShort\' | translate}}"></md-checkbox> </md-input-container> </td> <td md-cell> <md-input-container> <md-checkbox ng-model="lessonTime.dayTue" aria-label="{{\'main.tuesdayShort\' | translate}}"></md-checkbox> </md-input-container> </td> <td md-cell> <md-input-container> <md-checkbox ng-model="lessonTime.dayWed" aria-label="{{\'main.wednesdayShort\' | translate}}"></md-checkbox> </md-input-container> </td> <td md-cell> <md-input-container> <md-checkbox ng-model="lessonTime.dayThu" aria-label="{{\'main.thursdayShort\' | translate}}"></md-checkbox> </md-input-container> </td> <td md-cell> <md-input-container> <md-checkbox ng-model="lessonTime.dayFri" aria-label="{{\'main.fridayShort\' | translate}}"></md-checkbox> </md-input-container> </td> <td md-cell> <md-input-container> <md-checkbox ng-model="lessonTime.daySat" aria-label="{{\'main.saturdayShort\' | translate}}"></md-checkbox> </md-input-container> </td> <td md-cell> <md-input-container> <md-checkbox ng-model="lessonTime.daySun" aria-label="{{\'main.sundayShort\' | translate}}"></md-checkbox> </md-input-container> </td> <td md-cell> <div ng-show="isLessonTimeRowFilled(lessonTime)" class="remove nomargin" ng-click="deleteRow(block.lessonTimes, lessonTime)">&times;</div> </td> </tr> </tbody> </table> </md-table-container> <div layout="row" layout-sm="column" layout-xs="column" flex> <md-button class="md-primary" ng-click="addNewRow(block)">{{\'main.button.addNewRow\' | translate}}</md-button> <md-button class="md-primary" ng-click="deleteBlock(block)">{{\'timetable.lessonTime.deleteBlock\' | translate}}</md-button> </div> </div> <div layout="row" layout-sm="column" layout-xs="column" flex> <md-button class="md-primary" ng-click="addNewBlock()">{{\'timetable.lessonTime.addNewBlock\' | translate}}</md-button> </div> </div> <div> <md-button class="md-raised md-primary" ng-click="save()">{{\'main.button.save\' | translate}}</md-button> <md-button ng-click="back(\'#/timetable/lessonTime/search\', lessonTimeForm)" class="md-raised">{{\'main.button.back\' | translate}}</md-button> </div> </div> </form> </div> </div>'),a.put("timetable/timetable.lessonTime.list.html",'<div class="ois-form-layout-padding ois-form-layout" ng-cloak> <div flex> <fieldset> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'main.searchlabel\' | translate}}</legend> <form name="searchForm" ng-submit="searchForm.$valid && loadData()" novalidate class="nomargin"> <div layout="row" layout-sm="column" layout-xs="column" flex> <div layout="row" layout-sm="column" layout-xs="column" flex="25" flex-sm="100" flex-xs="100"> <md-input-container> <label>{{\'main.from\' | translate}}</label> <md-datepicker ng-model="criteria.from"></md-datepicker> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column" flex="25" flex-sm="100" flex-xs="100"> <md-input-container> <label>{{\'main.thru\' | translate}}</label> <md-datepicker ng-model="criteria.thru" md-min-date="criteria.from"></md-datepicker> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column" flex="20" flex-sm="100" flex-xs="100"> <md-input-container flex> <label>{{\'timetable.weekday\' | translate}}</label> <md-select ng-model="criteria.day" multiple> <md-option ng-repeat="option in days" ng-value="option.code" aria-label="{{currentLanguageNameField(option)}}">{{currentLanguageNameField(option)}}</md-option> </md-select> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column" flex="20" flex-offset="5" flex-sm="100" flex-offset-sm="0" flex-xs="100" flex-offset-xs="0"> <md-input-container flex> <label>{{\'building.label\' | translate}}</label> <hois-select ng-model="criteria.building" type="building" multiple></hois-select> </md-input-container> </div> </div> <div layout="row" flex> <md-button type="submit" class="md-raised md-primary">{{\'main.button.search\' | translate}}</md-button> <md-button class="md-raised" ng-click="clearCriteria()">{{\'main.button.clear\' | translate}}</md-button> <a class="md-button md-raised" ng-if="canEdit" ng-href="#/timetable/lessonTime">{{\'main.button.create\' | translate}}</a> </div> <div flex-xs="0" flex-gt-xs="0" flex-gt-sm="50"></div> </form> </fieldset> </div> </div> <div layout-padding> <div flex> <md-table-container> <table md-table md-progress="tabledata.$promise"> <thead md-head md-order="criteria.order" md-on-reorder="loadData"> <tr md-row> <th md-column md-order-by="lessonNr">{{\'main.nr\' | translate}}</th> <th md-column md-order-by="startTime">{{\'main.start\' | translate}}</th> <th md-column md-order-by="endTime">{{\'main.end\' | translate}}</th> <th md-column>{{\'timetable.weekdays\' | translate}}</th> <th md-column>{{\'timetable.buildings\' | translate}}</th> <th md-column>{{\'main.validFrom\' | translate}}</th> <th md-column>{{\'main.validThru\' | translate}}</th> <th md-column></th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="row in tabledata.content" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell>{{row.lessonNr}}</td> <td md-cell>{{row.startTime}}</td> <td md-cell>{{row.endTime}}</td> <td md-cell>{{displayWeekdays(row)}}</td> <td md-cell>{{displayBuildings(row.buildings)}}</td> <td md-cell>{{row.validFrom | hoisDate}}</td> <td md-cell>{{row.validThru | hoisDate}}</td> <td md-cell> <a class="md-button md-primary" ng-href="/#/timetable/lessonTime/{{::row.id}}/{{!canEditLessonTime(row) ? \'view\' : \'edit\'}}"> {{\'main.button.\' + (!canEditLessonTime(row) ? \'view\' : \'edit\') | translate}}</a> </td> </tr> </tbody> </table> </md-table-container> <md-table-pagination md-limit="criteria.size" md-limit-options="[10, 20, 50]" md-page="criteria.page" md-total="{{tabledata.totalElements}}" md-on-paginate="loadData" md-label="{page: \'{{\'main.page\' | translate}}:\', rowsPerPage: \'{{\'main.rowPerPage\' | translate}}:\', of: \'{{\'main.of\' | translate}}\'}" md-page-select></md-table-pagination> </div> </div>'),a.put("timetable/timetable.lessonTime.view.html",'<div class="ois-form-layout-padding ois-form-layout" ng-cloak> <div flex> <form layout="column"> <div layout="column" layout-sm="column" layout-xs="column" flex> <div layout="row" layout-sm="column" layout-xs="column" flex-sm="100" flex-xs="100"> <md-input-container flex> <label>{{\'timetable.lessonTime.validFrom\' | translate}}</label> <hois-value value="validFrom | hoisDate"></hois-value> </md-input-container> </div> <div layout-padding ng-repeat="block in blocks | orderBy: $index"> <div layout="row" layout-sm="column" layout-xs="column" flex> <md-input-container flex="10" flex-xs="100"> <label>{{\'timetable.buildings\' | translate}}</label> </md-input-container> <md-input-container layout="row" layout-align="start center"> <md-checkbox ng-model="block.selectedBuildings[building.id]" ng-repeat="building in buildings | orderBy: currentLanguageNameField()" disabled>{{ currentLanguageNameField(building) }}</md-checkbox> </md-input-container> </div> <md-table-container> <table md-table md-progress="tabledata.$promise"> <thead md-head md-order="criteria.order" md-on-reorder="loadData"> <tr md-row> <th md-column>{{\'main.nr\' | translate}}</th> <th md-column>{{\'main.start\' | translate}}</th> <th md-column>{{\'main.end\' | translate}}</th> <th md-column>{{\'timetable.academicHours\' | translate}}</th> <th md-column>{{\'main.mondayShort\' | translate}}</th> <th md-column>{{\'main.tuesdayShort\' | translate}}</th> <th md-column>{{\'main.wednesdayShort\' | translate}}</th> <th md-column>{{\'main.thursdayShort\' | translate}}</th> <th md-column>{{\'main.fridayShort\' | translate}}</th> <th md-column>{{\'main.saturdayShort\' | translate}}</th> <th md-column>{{\'main.sundayShort\' | translate}}</th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="lessonTime in block.lessonTimes | orderBy: \'lessonNr\'" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell> <span>{{::lessonTime.lessonNr}}</span> </td> <td md-cell> <span>{{lessonTime.startTime | hoisTime}}</span> </td> <td md-cell> <span>{{lessonTime.endTime | hoisTime}}</span> </td> <td md-cell> <span>{{calculateAcademicHours(lessonTime.startTime, lessonTime.endTime)}}</span> </td> <td md-cell> <md-input-container> <md-checkbox ng-model="lessonTime.dayMon" aria-label="{{\'main.mondayShort\' | translate}}" disabled></md-checkbox> </md-input-container> </td> <td md-cell> <md-input-container> <md-checkbox ng-model="lessonTime.dayTue" aria-label="{{\'main.tuesdayShort\' | translate}}" disabled></md-checkbox> </md-input-container> </td> <td md-cell> <md-input-container> <md-checkbox ng-model="lessonTime.dayWed" aria-label="{{\'main.wednesdayShort\' | translate}}" disabled></md-checkbox> </md-input-container> </td> <td md-cell> <md-input-container> <md-checkbox ng-model="lessonTime.dayThu" aria-label="{{\'main.thursdayShort\' | translate}}" disabled></md-checkbox> </md-input-container> </td> <td md-cell> <md-input-container> <md-checkbox ng-model="lessonTime.dayFri" aria-label="{{\'main.fridayShort\' | translate}}" disabled></md-checkbox> </md-input-container> </td> <td md-cell> <md-input-container> <md-checkbox ng-model="lessonTime.daySat" aria-label="{{\'main.saturdayShort\' | translate}}" disabled></md-checkbox> </md-input-container> </td> <td md-cell> <md-input-container> <md-checkbox ng-model="lessonTime.daySun" aria-label="{{\'main.sundayShort\' | translate}}" disabled></md-checkbox> </md-input-container> </td> </tr> </tbody> </table> </md-table-container> </div> </div> <br> <div layout="row"> <md-button ng-href="#/timetable/lessonTime/search" class="md-raised">{{\'main.button.back\' | translate}}</md-button> </div> </form> </div> </div>'),a.put("timetable/timetable.timetableEvent.edit.html",'<div class="ois-form-layout-padding" ng-cloak> <div flex> <form name="eventForm" ng-submit="eventForm.$valid && loadData()" novalidate layout="column"> <div layout="row" flex="100"> <md-input-container flex="50" flex-sm="100"> <label>{{\'main.date\' | translate}}</label> <md-datepicker required ng-model="timetableEvent.date"></md-datepicker> </md-input-container> <md-input-container flex flex-sm="100" flex-offset="2" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'main.start\' | translate}}</label> <hois-time required ng-model="timetableEvent.startTime" placeholder="{{\'main.timePlaceholder\' | translate}}"></hois-time> </md-input-container> <md-input-container flex flex-sm="100" flex-offset="2" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'main.end\' | translate}}</label> <hois-time required ng-model="timetableEvent.endTime" placeholder="{{\'main.timePlaceholder\' | translate}}"></hois-time> </md-input-container> </div> <md-input-container flex> <label class="textInput">{{\'timetable.timetableEvent.name\' | translate}}</label> <input type="text" ng-model="timetableEvent.name" required md-maxlength="255"> </md-input-container> <div ng-if="!timetableEvent.id" layout="row" flex="100"> <md-input-container flex="20" flex-sm="100" flex-xs="100"> <md-checkbox ng-model="timetableEvent.repeat" aria-label="Is repeat event"> {{\'timetable.timetableEvent.isRepeat\' | translate}} </md-checkbox> </md-input-container> <div ng-if="timetableEvent.repeat" flex="80"> <md-input-container flex="50"> <label>{{\'timetable.timetableEvent.weekAmount\' | translate}}</label> <input flex="100" ng-model="timetableEvent.weekAmount" type="number" autofocus aria-label="weekamount" required> </md-input-container> <md-input-container flex="50" flex-offset="5"> <label>{{\'timetable.timetableEvent.repetition\' | translate}}</label> <hois-classifier-select flex="100" ng-model="timetableEvent.repeatCode" model-value-attr="code" aria-label="repeatcode" filter-values="[\'TUNNIPLAAN_SYNDMUS_KORDUS_EI\']" main-classifier-code="TUNNIPLAAN_SYNDMUS_KORDUS" required> </hois-classifier-select> </md-input-container> </div> </div> <div layout="row" flex="60" flex-sm="100" flex-xs="100"> <hois-autocomplete label="{{auth.higher ? \'timetable.timetableEvent.teacherHigher\' : \'timetable.timetableEvent.teacherVocational\'}}" ng-model="timetableEvent.teacher" ng-disabled="auth.isTeacher()" method="teachers" warning-param="isOccupied" additional-query-params="{valid: true, occupied: true, date: timetableEvent.date, startTime: timetableEvent.startTime, endTime: timetableEvent.endTime, \r\n            repeatCode: timetableEvent.repeatCode, weekAmount: timetableEvent.weekAmount}" flex></hois-autocomplete> </div> <md-table-container ng-if="timetableEvent.teachers.length > 0" layout="row" layout="row" flex="60" flex-sm="100" flex-xs="100"> <table md-table class="secondary-table"> <thead md-head> <tr md-row> <th md-column ng-style="{\'width\': !timetableEvent.isSingleEvent ? 70 + \'%\' : 90 + \'%\' }">{{\'timetable.timetableEvent.teacherName\' | translate}}</th> <th md-column ng-if="!timetableEvent.isSingleEvent" width="20%">{{\'timetable.timetableEvent.substitute\' | translate}}</th> <th md-column width="10%"></th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="teacher in timetableEvent.teachers | orderBy: sortTeachers" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell>{{currentLanguageNameField(teacher.teacher)}}</td> <td md-cell ng-if="!timetableEvent.isSingleEvent"> <md-checkbox ng-model="teacher.isSubstitute" aria-label="{{\'timetable.timetableEvent.substitute\' | translate}}" ng-disabled="!auth.isAdmin()"></md-checkbox> </td> <td md-cell> <a ng-if="auth.isAdmin()" ng-click="deleteTeacher(teacher)" class="remove">&times;</a> </td> </tr> </tbody> </table> </md-table-container> <div layout="row" flex="60" flex-sm="100" flex-xs="100"> <hois-autocomplete label="timetable.timetableEvent.room" ng-model="timetableEvent.room" method="rooms" warning-param="isOccupied" additional-query-params="{isStudy: true, occupied: true, date: timetableEvent.date, startTime: timetableEvent.startTime, endTime: timetableEvent.endTime, \r\n            repeatCode: timetableEvent.repeatCode, weekAmount: timetableEvent.weekAmount}" flex></hois-autocomplete> </div> <md-table-container ng-if="timetableEvent.rooms.length > 0" layout="row" flex="60" flex-sm="100" flex-xs="100"> <table md-table class="secondary-table"> <thead md-head> <tr md-row> <th md-column width="90%">{{\'timetable.timetableEvent.code\' | translate}}</th> <th md-column width="10%"></th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="room in timetableEvent.rooms | orderBy: currentLanguageNameField()" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell>{{room.nameEt}}</td> <td md-cell> <a ng-click="deleteRoom(room)" class="remove">&times;</a> </td> </tr> </tbody> </table> </md-table-container> <div layout="row" flex="60" flex-sm="100" flex-xs="100"> <hois-autocomplete label="timetable.timetableEvent.studentGroup" ng-model="timetableEvent.studentGroup" method="studentgroups" warning-param="isOccupied" additional-query-params="{valid: true, occupied: true, date: timetableEvent.date, startTime: timetableEvent.startTime, endTime: timetableEvent.endTime, \r\n            repeatCode: timetableEvent.repeatCode, weekAmount: timetableEvent.weekAmount, studentGroupTeacherId: auth.isTeacher() ? auth.teacher : undefined}" flex></hois-autocomplete> </div> <md-table-container ng-if="timetableEvent.studentGroups.length > 0" layout="row" flex="60" flex-sm="100" flex-xs="100"> <table md-table class="secondary-table"> <thead md-head> <tr md-row> <th md-column width="90%">{{\'timetable.timetableEvent.code\' | translate}}</th> <th md-column width="10%"></th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="studentGroup in timetableEvent.studentGroups" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell>{{studentGroup.nameEt}}</td> <td md-cell> <a ng-click="deleteStudentGroup(studentGroup)" class="remove">&times;</a> </td> </tr> </tbody> </table> </md-table-container> <md-input-container flex> <label class="textInput"> {{auth.higher ? (\'timetable.timetableEvent.otherTeacherHigher\' | translate) : (\'timetable.timetableEvent.otherTeacherVocational\' | translate)}} </label> <input type="text" ng-model="timetableEvent.otherTeacher" md-maxlength="1000"> </md-input-container> <md-input-container flex> <label class="textInput">{{\'timetable.timetableEvent.otherRoom\' | translate}}</label> <input type="text" ng-model="timetableEvent.otherRoom" md-maxlength="1000"> </md-input-container> <div layout="row" flex> <md-button class="md-raised md-primary" ng-click="save()">{{\'main.button.save\' | translate}}</md-button> <md-button ng-if="timetableEvent.id" ng-click="delete()" class="md-raised">{{\'main.button.delete\' | translate}}</md-button> <md-button ng-click="back(\'#/lessonplans/events\', eventForm)" class="md-raised">{{\'main.button.back\' | translate}}</md-button> </div> </form> </div> </div>'),a.put("timetable/timetable.timetableEvent.view.html",'<div class="ois-form-layout-padding form-readonly" ng-cloak> <div flex> <br> <form name="eventForm"> <div layout="row" layout-xs="column" flex="100"> <md-input-container flex="20" flex-md="100" flex-sm="100" flex-xs="100"> <label>{{\'main.date\' | translate}}</label> <hois-value value="timetableEvent.date | hoisDate"></hois-value> </md-input-container> <md-input-container flex="20" flex-sm="100" flex-xs="100" flex-offset="2" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'main.start\' | translate}}</label> <hois-value value="timetableEvent.startTime | hoisTime"></hois-value> </md-input-container> <md-input-container flex="20" flex-sm="100" flex-xs="100" flex-offset="2" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'main.end\' | translate}}</label> <hois-value value="timetableEvent.endTime | hoisTime"></hois-value> </md-input-container> </div> <div layout="row" flex="100"> <md-input-container flex="60" flex-sm="100" flex-xs="100"> <label class="textInput">{{\'timetable.timetableEvent.name\' | translate}}</label> <hois-value value="timetableEvent.name"></hois-value> </md-input-container> </div> <fieldset flex="60" flex-sm="100" flex-xs="100" ng-if="timetableEvent.teachers.length > 0"> <legend md-colors="{color: \'primary-800\'}" class="md-title-small"> {{auth.higher ? (\'timetable.timetableEvent.teacherHigher\' | translate) : (\'timetable.timetableEvent.teachersVocational\' | translate)}} </legend> <md-table-container> <table md-table class="secondary-table"> <thead md-head> <tr md-row> <th md-column>{{\'timetable.timetableEvent.teacherName\' | translate}}</th> <th md-column>{{\'timetable.timetableEvent.substitute\' | translate}}</th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="teacher in timetableEvent.teachers | orderBy: sortTeachers" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell>{{currentLanguageNameField(teacher.teacher)}}</td> <td md-cell>{{teacher.isSubstitute ? (\'main.yes\' | translate) : (\'main.no\' | translate)}}</td> </tr> <tr md-row ng-if="timetableEvent.otherTeacher"> <td md-cell>{{timetableEvent.otherTeacher}}</td> <td md-cell>{{\'main.no\' | translate}}</td> </tr> </tbody> </table> </md-table-container> </fieldset> <br> <fieldset flex="60" flex-sm="100" flex-xs="100" ng-if="timetableEvent.rooms.length > 0"> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'timetable.timetableEvent.rooms\' | translate}}</legend> <md-table-container> <table md-table class="secondary-table"> <thead md-head> <tr md-row> <th md-column>{{\'timetable.timetableEvent.code\' | translate}}</th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="room in timetableEvent.rooms | orderBy: currentLanguageNameField()" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell>{{room.nameEt}}</td> </tr> <tr md-row ng-if="timetableEvent.otherRoom"> <td md-cell>{{timetableEvent.otherRoom}}</td> </tr> </tbody> </table> </md-table-container> </fieldset> <br> <fieldset flex="60" flex-sm="100" flex-xs="100" ng-if="timetableEvent.studentGroups.length > 0"> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'timetable.timetableEvent.studentGroups\' | translate}}</legend> <md-table-container> <table md-table class="secondary-table"> <thead md-head> <tr md-row> <th md-column>{{\'timetable.timetableEvent.code\' | translate}}</th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="studentGroup in timetableEvent.studentGroups | orderBy: currentLanguageNameField()" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell>{{studentGroup.nameEt}}</td> </tr> </tbody> </table> </md-table-container> </fieldset> <div layout="row" flex="100"> <md-button ng-href="#/lessonplans/events" class="md-raised">{{\'main.button.back\' | translate}}</md-button> </div> </form> </div> </div>'),a.put("timetable/timetable.timetableManagement.copyTimetable.html",'<md-dialog aria-label="add enterprise dialog" flex="30"> <form name="dialogForm" ng-submit="dialogForm.$valid && submit()" novalidate ng-cloak> <md-toolbar> <div class="md-toolbar-tools"> <h2 flex>{{\'timetable.management.selectCopyTarget\' | translate}}</h2> <md-button class="md-icon-button" ng-click="cancel()"> <md-icon md-font-set="material-icons">close</md-icon> </md-button> </div> </md-toolbar> <md-dialog-content> <span flex></span> <div class="ois-form-layout" layout="column" layout-margin ng-cloak> <div layout="column"> <div flex="100" flex-offset="2" flex-offset-xs="0" flex-offset-sm="0"> <div layout="row" flex="70"> <md-input-container flex="100" flex-sm="100" flex-xs="100"> <md-select ng-model="copyTarget" placeholder="{{\'timetable.management.period\' | translate}}"> <md-option ng-value="target" ng-repeat="target in copyTargets">{{ target.start | hoisDate }}-{{ target.end | hoisDate }}</md-option> </md-select> </md-input-container> </div> </div> </div> </div> </md-dialog-content> <md-dialog-actions layout="row" layout-align="start start"> <md-button class="md-raised md-primary" type="submit">{{\'main.button.save\' | translate}}</md-button> <md-button class="md-raised" ng-click="cancel()">{{"main.button.close" | translate}}</md-button> </md-dialog-actions> </form> </md-dialog>'),a.put("timetable/timetable.timetableManagement.html",'<div class="ois-form-layout-padding ois-form-layout" ng-cloak> <div flex> <fieldset> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'main.searchlabel\' | translate}}</legend> <form name="timetableSearchForm" ng-submit="loadData()" novalidate class="nomargin"> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="25" flex-sm="100" flex-xs="100"> <label>{{\'timetable.management.studyYear\' | translate}}</label> <hois-select ng-model="criteria.studyYear" values="formState.studyYears" required></hois-select> </md-input-container> <md-input-container flex="20" flex-sm="100" flex-xs="100" flex-offset="5"> <label>{{\'timetable.management.studyPeriod\' | translate}}</label> <hois-select ng-model="criteria.studyPeriod" values="formState.studyPeriods" required></hois-select> </md-input-container> <md-input-container required ng-show="higher && vocational" flex="45" flex-sm="100" flex-xs="100" flex-offset="5"> <label>{{\'timetable.management.type\' | translate}}</label> <hois-classifier-select ng-model="criteria.type" model-value-attr="code" default-value="TUNNIPLAAN_LIIK_V" filter-values show-only-values="true" watch-model connect-main-classifier-code="TUNNIPLAAN_LIIK" main-classifier-code="TUNNIPLAAN_LIIK"></hois-classifier-select> </md-input-container> </div> <div layout="row"> <md-button type="submit" class="md-raised md-primary">{{\'main.button.search\' | translate}}</md-button> <md-button ng-if="criteria.type === \'TUNNIPLAAN_LIIK_H\'" class="md-raised" ng-href="#/timetable/new?type={{criteria.type}}">{{\'main.button.create\' | translate}} </md-button> </div> <div flex-xs="0" flex-gt-xs="0" flex-gt-sm="50"></div> </form> </fieldset> </div> </div> <div layout-padding> <div flex> <md-table-container> <table md-table md-progress="tabledata.$promise"> <thead md-head md-order="criteria.order" md-on-reorder="loadData"> <tr md-row> <th md-column md-order-by="3, 4">{{\'timetable.management.period\' | translate}}</th> <th md-column md-order-by="2">{{\'timetable.management.status\' | translate}}</th> <th md-column></th> <th></th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="row in tabledata.content" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell ng-if="row.id"><a ng-href="#/timetable/{{::row.id}}/view">{{row.start | hoisDate}} - {{row.end | hoisDate}}</a></td> <td md-cell ng-if="!row.id">{{row.start | hoisDate}} - {{row.end | hoisDate}}</td> <td md-cell>{{currentLanguageNameField(row.status)}}</td> <td md-cell> <md-button ng-if="!row.id && canEdit" md-no-ink class="md-primary change-button" ng-click="createEvent(row)"> {{\'main.button.create\' | translate}} </md-button> <!--md-button ng-if="row.id && row.isHigher" md-no-ink class="md-primary change-button"\r\n                       ng-href="#/timetable/{{::row.id}}/edit">{{\'main.button.change\' | translate}}\r\n            </md-button--> <md-button ng-if="row.id && !row.isHigher" md-no-ink class="md-primary change-button" ng-href="#/timetable/{{::row.id}}/view">{{\'main.button.change\' | translate}} </md-button> <md-button ng-if="row.id && !row.isHigher" md-no-ink class="md-primary change-button" ng-click="copyTimetable(row.id)">{{\'main.button.copy\' | translate}} </md-button> <md-button ng-if="row.id && !row.isHigher" ng-href="{{excel(formState.xlsDiffUrl, {id: row.id})}}" target="_blank" class="md-primary change-button">{{\'timetable.management.difference\' | translate}} </md-button> <md-button ng-if="row.id && !row.isHigher" ng-href="{{excel(formState.xlsPlanUrl, {id: row.id})}}" target="_blank" class="md-primary change-button">{{\'timetable.management.plan\' | translate}} </md-button> <md-button ng-if="row.start" ng-click="exportTimetable(\'timetables/exportTimetable\',{startDate: row.start, endDate: row.end, studyPeriod: row.studyPeriod})" target="_blank" class="md-primary change-button">{{\'timetable.management.xmlExport\' | translate}} </md-button> <md-button ng-if="row.start" ng-click="openAddFileDialog(row.studyPeriod,{startDate: row.start, endDate: row.end, isHigher: row.isHigher})" target="_blank" class="md-primary change-button">{{\'timetable.management.xmlImport\' | translate}} </md-button> </td> </tr> </tbody> </table> </md-table-container> <md-table-pagination md-limit="criteria.size" md-limit-options="[10, 20, 50]" md-page="criteria.page" md-total="{{tabledata.totalElements}}" md-on-paginate="loadData" md-label="{page: \'{{\'main.page\' | translate}}:\', rowsPerPage: \'{{\'main.rowPerPage\' | translate}}:\', of: \'{{\'main.of\' | translate}}\'}" md-page-select></md-table-pagination> </div> </div>'),
a.put("timetable/timetable.view.html",'<div class="ois-form-layout-padding ois-form-layout" ng-cloak> <div> <form name="timetableForm" novalidate class="nomargin form-readonly" layout="column"> <div layout="row" class="form-readonly"> <md-input-container flex="30"> <label class="textInput">{{\'timetable.timetablePlan.timetablePeriod\' | translate}}</label> <hois-value value="(timetable.startDate | hoisDate) + \'-\'+(timetable.endDate | hoisDate)"> </md-input-container> </div> <div flex-xs="0" flex-gt-xs="0" flex-gt-sm="50"></div> <div id="tt" ng-repeat="curriculum in timetable.curriculums | orderBy: currentLanguageNameField()" layout="column" flex> <div class="hois-collapse-header even">{{currentLanguageNameField(curriculum)}}{{curriculum.curriculumCode}}, {{currentLanguageNameField(curriculum.curriculumStudyLevelCode)}}</div> <div flex> <md-grid-list ng-app="app" md-cols-xs="1" md-cols-sm="2" md-cols-md="4" md-cols-lg="8" md-cols-gt-lg="8" md-gutter="1em" md-row-height="40px" flex> <md-grid-tile ng-repeat="group in curriculum.groups | orderBy: code" style="text-align: left"> <!--md-button class="md-button" md-colors="{background: \'background-200\'}" ng-click="showTeacherWeek(row.teacherId)">\r\n                    {{row.lastname}}, {{row.firstname}}\r\n                  </md-button--> <a ng-if="!timetable.higher" href="#/timetable/{{timetable.id}}/createVocationalPlan/{{group.id}}">{{group.code}}</a> <a ng-if="timetable.higher" href="#/timetable/{{timetable.id}}/createHigherPlan/group/{{group.id}}">{{group.code}}</a> </md-grid-tile> </md-grid-list> </div> </div> <div ng-if="timetable.pairs"> <table md-table> <thead md-head> <tr md-row> <th md-column><label>{{\'timetable.subjectTeacherPairs\' | translate}}</label> </th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="pair in timetable.pairs | orderBy: [\'code\', currentLanguageNameField()]" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell><a href="#/timetable/{{timetable.id}}/createHigherPlan/pair/{{pair.id}}">{{pair.code}} {{currentLanguageNameField(pair)}} / {{pair.teacherNames}}</a></td> </tr> </tbody> </table> </div> </form> <md-button ng-if="timetable.editable && timetable.higher" md-no-ink class="md-primary change-button" ng-href="#/timetable/{{::timetable.id}}/edit">{{\'main.button.change\' | translate}} </md-button> <md-button ng-if="timetable.status === \'TUNNIPLAAN_STAATUS_S\'" ng-click="confirm()" class="md-raised">{{\'main.button.confirm\' | translate}} </md-button> <md-button ng-if="timetable.status === \'TUNNIPLAAN_STAATUS_K\'" ng-click="publicize()" class="md-raised">{{\'timetable.view.publicize\' | translate}} </md-button> <md-button ng-href="#/timetable/timetableManagement" class="md-raised">{{\'main.button.back\' | translate}} </md-button> </div> </div>'),a.put("timetable/timetable.week.view.html",'<div layout-padding ng-if="shownWeek && (typeId || searchResultEvents)"> <div layout="row" flex> <div layout="row" layout-align="end end" layout-sm="column" layout-xs="column" flex="90" style="margin-left: auto; margin-right: auto"> <div ng-repeat="c in capacityTypes" flex-offset="5" class="capacity-type-legend" md-colors="{background: c.color}"> <span>{{currentLanguageNameField(c)}}</span> </div> <div flex-offset="5" class="capacity-type-legend" md-colors="{background: \'primary-100-0.8\'}"> <span>{{\'timetable.timetableEvent.singleEvent\' | translate}}</span> </div> <div flex-offset="5" class="capacity-type-legend" md-colors="{background: \'accent-100-0.8\'}"> <span>{{\'timetable.timetableEvent.occupied\' | translate}}</span> </div> </div> </div> </div> <div layout-padding ng-if="shownWeek && (typeId || searchResultEvents)"> <div layout="row" layout-align="center" style="padding: 0px"> <a ng-if="shownTimetableCurriculum || shownTeacher || shownRoom" ng-href="#/timetable/{{timetableType}}/{{::schoolId}}/{{typeId}}/{{weekIndex}}"> <span ng-if="shownTimetableCurriculum">{{shownTimetableCurriculum.studentGroupCode}}, {{currentLanguageNameField(shownTimetableCurriculum)}}</span> <span ng-if="shownTeacher">{{shownTeacher.lastname}}, {{shownTeacher.firstname}}</span> <span ng-if="shownRoom">{{shownRoom.buildingCode}}, {{shownRoom.roomCode}}</span> </a> </div> <div layout="row" layout-align="center" style="padding: 0px"> <md-button ng-if="previousWeekIndex !== undefined && directRoute" class="md-icon-button md-primary" ng-href="#/timetable/{{timetableType}}/{{::schoolId}}/{{typeId}}/{{previousWeekIndex}}"> <md-icon>arrow_back</md-icon> </md-button> <md-button ng-if="previousWeekIndex !== undefined && !directRoute" class="md-icon-button md-primary" ng-click="previousWeek(typeId, previousWeekIndex)"> <md-icon>arrow_back</md-icon> </md-button> <h2 ng-if="shownStudyPeriods" style="display:inline-block">{{shownStudyPeriods}}. {{shownWeek.start | hoisDate}} - {{shownWeek.end | hoisDate}}</h2> <h2 ng-if="!shownStudyPeriods" style="display:inline-block">{{shownWeek.start | hoisDate}} - {{shownWeek.end | hoisDate}}</h2> <md-button ng-if="nextWeekIndex && directRoute" class="md-icon-button md-primary" ng-href="#/timetable/{{timetableType}}/{{::schoolId}}/{{typeId}}/{{nextWeekIndex}}"> <md-icon>arrow_forward</md-icon> </md-button> <md-button ng-if="nextWeekIndex && !directRoute" class="md-icon-button md-primary" ng-click="nextWeek(typeId, nextWeekIndex)"> <md-icon>arrow_forward</md-icon> </md-button> </div> <div ng-if="!timetableSearch" layout="column" layout-align="center center"> <span ng-if="timetableEvents && !(timetableEvents.length > 0)">{{\'timetable.error.noWeekTimetable\' | translate}}</span> <span ng-if="shownStudent.isHigher && shownWeek.connectedSubjects === false">{{\'timetable.error.noDeclaredSubjects\' | translate}}</span> <span ng-if="!shownStudent.isHigher && shownWeek.connectedSubjects === false">{{\'timetable.error.noConnectedModules\' | translate}}</span> </div> <div ng-if="timetableSearch && (timetableEvents && !(timetableEvents.length > 0))" layout="row" layout-align="center">{{\'timetable.error.noSearchResults\' | translate}}</div> <div hide-xs ng-if="timetableEvents && timetableEvents.length > 0" layout="column" flex="90" style="border: 1px solid #ccc; margin-left: auto; margin-right: auto" id="vTimetable"> <div layout="row" style="position:relative"> <div layout="column" flex style="position:absolute;width:100%"> <div style="height:20px;text-align:center">&nbsp;</div> <div ng-repeat="time in timeColumn track by $index" style="height:15px;border-bottom:1px dotted #ccc;border-collapse: collapse" ng-show="$index > 0">&nbsp;</div> </div> <div flex="10" layout="column"> <div style="height:20px;text-align:center">&nbsp;</div> <div ng-repeat="time in timeColumn" style="height:16px"> <span ng-show="($index % 2 != 0)">{{time}}</span> </div> </div> <div ng-repeat="day in weekColumns" flex="20" layout="column" style="position:relative; border-left: 1px solid #ccc;border-collapse: collapse"> <div style="height:32px;text-align:center" md-colors="day.today ?  {background: \'accent-400\'}:{}">{{\'timetable.timetablePlan.\' + day.name | translate}}<br>{{day.date | hoisDate}}</div> <div layout="row"> <div flex ng-repeat="event in day.events track by $index" ng-style="{\'height\': event.rowHeight + \'px\', \'top\': event.top + \'px\', \'z-index\': $index, \'left\': event.left+\'%\',\'width\': \'calc(\'+event.width +\'% - 2px)\'}" md-colors="event.public ? {background: getEventColor(event.capacityType)} : {background: \'accent-100-0.8\'}" style="padding: 0; border: 1px solid; position:absolute; overflow: hidden; border-color: rgba(0,0,0, 0.3)" class="timetableEvent"> <md-tooltip md-direction="bottom" style="margin: -18px; height: auto"> <div ng-if="event.public">{{event.timeStart}}-{{event.timeEnd}} {{currentLanguageNameField(event)}}</div> <div ng-if="!event.public">{{event.timeStart}}-{{event.timeEnd}} {{\'timetable.timetableEvent.occupied\' | translate}}</div> <div ng-repeat="room in event.rooms track by $index"> <span ng-if="room.buildingCode">{{room.buildingCode}}-{{room.roomCode}}</span> <span ng-if="!room.buildingCode">{{room.roomCode}}</span> </div> <div ng-repeat="teacher in event.teachers track by $index">{{teacher.name}}</div> <div ng-repeat="studentGroup in event.studentGroups track by $index">{{studentGroup.code}}</div> <div>{{event.studentGroup}}</div> </md-tooltip> <div> <div> <span>{{event.timeStart}}-{{event.timeEnd}}</span> <span ng-if="event.public">{{currentLanguageNameField(event)}}</span> <span ng-if="!event.public">{{\'timetable.timetableEvent.occupied\' | translate}}</span> </div> <md-button ng-if="auth != null && event.showStudyMaterials && event.public && event.journalId" ng-href="/#/studyMaterial/vocational/{{event.journalId}}/view" class="studyMaterialsIcon md-icon-button" aria-label="materials"> <md-icon md-font-set="material-icons">folder</md-icon> </md-button> <md-button ng-if="auth != null && event.showStudyMaterials && event.public && event.subjectStudyPeriodId" ng-href="/#/studyMaterial/higher/{{event.subjectStudyPeriodId}}/view" class="studyMaterialsIcon md-icon-button" aria-label="materials"> <md-icon md-font-set="material-icons">folder</md-icon> </md-button> <md-button ng-if="auth == null && event.showStudyMaterials && event.public && event.journalId" ng-href="/#/studyMaterial/{{::schoolId}}/vocational/{{event.journalId}}/view" class="studyMaterialsIcon md-icon-button" aria-label="materials"> <md-icon md-font-set="material-icons">folder</md-icon> </md-button> <md-button ng-if="auth == null && event.showStudyMaterials && event.public && event.subjectStudyPeriodId" ng-href="/#/studyMaterial/{{::schoolId}}/higher/{{event.subjectStudyPeriodId}}/view" class="studyMaterialsIcon md-icon-button" aria-label="materials"> <md-icon md-font-set="material-icons">folder</md-icon> </md-button> </div> <div> <span ng-repeat="teacher in event.teachers track by $index"> <a ng-if="teacher.id" ng-href="/#/timetable/teacher/{{::schoolId}}/{{teacher.id}}/{{weekIndex}}">{{teacher.name}}</a> <span ng-if="!teacher.id">{{teacher.name}}</span> {{$last ? \'\' : \', \'}} </span> </div> <div> <span ng-repeat="room in event.rooms track by $index"> <a ng-if="room.id" ng-href="/#/timetable/room/{{::schoolId}}/{{room.id}}/{{weekIndex}}">{{room.buildingCode}}-{{room.roomCode}}</a> <span ng-if="!room.id">{{room.roomCode}}</span> {{$last ? \'\' : \', \'}} </span> </div> <div> <span ng-repeat="studentGroup in event.studentGroups track by $index"> <a ng-href="/#/timetable/group/{{::schoolId}}/{{studentGroup.id}}/{{weekIndex}}">{{studentGroup.code}}</a> {{$last ? \'\' : \', \'}} </span> </div> </div> </div> </div> </div> </div> <div hide-gt-xs ng-if="timetableEvents && timetableEvents.length > 0"> <span> <hois-collapsable ng-repeat="day in weekColumns" expanded="day.today" header-background-color="day.today ? \'rgb(236, 64, 122)\' : none"> <hois-collapsable-header> <span ng-style="{color: day.today ? \'white\' : none}">{{\'timetable.timetablePlan.\' + day.name | translate}} {{day.date | hoisDate}}</span> </hois-collapsable-header> <div layout="column"> <div flex ng-repeat="event in day.events track by $index"> <div md-colors="event.public ? {background: getEventColor(event.capacityType)} : {background: \'accent-100-0.8\'}" style="border: 1px solid rgba(0,0,0, 0.3); min-height: 80px"> <div> <span style="font-weight: bold">{{event.timeStart}}-{{event.timeEnd}}</span> <span ng-if="!event.public">{{currentLanguageNameField(event)}}</span> <span ng-if="!event.public">{{\'timetable.timetableEvent.occupied\' | translate}}</span> </div> <div> {{event.teachers.length > 0 ? (auth.higher ? (\'student.result.teacherHigher\' | translate) : (\'student.result.teacherVocational\' | translate)) : ""}} <span ng-repeat="teacher in event.teachers track by $index"> <a ng-if="teacher.id" ng-href="/#/timetable/teacher/{{::schoolId}}/{{teacher.id}}">{{teacher.name}}</a> <span ng-if="!teacher.id">{{teacher.name}}</span> {{$last ? \'\' : \', \'}} </span> </div> <div> {{event.rooms.length > 0 ? (\'lessonplan.event.room\' | translate) : ""}} <span ng-repeat="room in event.rooms track by $index"> <a ng-if="room.id" ng-href="/#/timetable/room/{{::schoolId}}/{{room.id}}">{{room.buildingCode}}-{{room.roomCode}}</a> <span ng-if="!room.id">{{room.roomCode}}</span> {{$last ? \'\' : \', \'}} </span> </div> <div> {{event.studentGroups.length > 0 ? (\'directive.student.studentGroup\' | translate) : ""}} <span ng-repeat="studentGroup in event.studentGroups track by $index"> <a ng-href="/#/timetable/group/{{::schoolId}}/{{studentGroup.id}}">{{studentGroup.code}}</a> {{$last ? \'\' : \', \'}} </span> </div> </div> </div> </div> </hois-collapsable> </span> </div> <div> <md-button class="md-icon-button timetableIconButton" ng-click="generateCalendar()"> <md-tooltip md-direction="bottom">{{\'timetable.saveToCalendar\' | translate}}</md-tooltip> <md-icon md-font-set="material-icons md-primary md-48">event</md-icon> </md-button> <md-button ng-if="directRoute && auth != null" ng-click="back(\'#/timetable/generalTimetableByGroup\'); emptyParentVariable()" class="md-raised">{{\'main.button.back\' | translate}}</md-button> <md-button ng-if="directRoute && auth == null" ng-click="back(\'#/timetable/generalTimetableByGroup/\' + schoolId)" class="md-raised">{{\'main.button.back\' | translate}}</md-button> </div> </div> <style>.hois-collapse {\r\n        margin-bottom: 1px;\r\n    }</style>'),a.put("vocationalCurriculum/vocational.curriculum.html",'<div class="ois-form-layout-padding ois-form-layout" ng-cloak> <form name="vocationalCurriculumForm" layout="column"> <div layout="row" layout-sm="column" layout-xs="column"> <div layout="column" flex="30" flex-sm="100" flex-xs="100"> <fieldset tabindex="1"> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'curriculum.draft\' | translate}} *</legend> <md-input-container flex="70" flex-sm="100" flex-xs="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <md-radio-group ng-model="curriculum.draft" name="draft" ng-change="draftSelected()" required class="md-primary" ng-disabled="curriculum.id || (curriculum.draft && (curriculum.draft === \'OPPEKAVA_LOOMISE_VIIS_RIIKLIK\' || curriculum.draft === \'OPPEKAVA_LOOMISE_VIIS_KOOL\') || curriculum.nameEt)"> <md-radio-button value="OPPEKAVA_LOOMISE_VIIS_KUTSE" aria-label="OPPEKAVA LOOMISE VIIS KUTSE">{{draftOptions["OPPEKAVA_LOOMISE_VIIS_KUTSE"][$root.currentLanguageNameField()]}}</md-radio-button> <md-radio-button value="OPPEKAVA_LOOMISE_VIIS_TOOANDJA" aria-label="OPPEKAVA LOOMISE VIIS TOOANDJA">{{draftOptions["OPPEKAVA_LOOMISE_VIIS_TOOANDJA"][$root.currentLanguageNameField()]}}</md-radio-button> <md-radio-button value="OPPEKAVA_LOOMISE_VIIS_KOOL" aria-label="OPPEKAVA LOOMISE VIIS KOOL">{{draftOptions["OPPEKAVA_LOOMISE_VIIS_KOOL"][$root.currentLanguageNameField()]}}</md-radio-button> <md-radio-button value="OPPEKAVA_LOOMISE_VIIS_RIIKLIK" aria-label="OPPEKAVA LOOMISE VIIS RIIKLIK">{{draftOptions["OPPEKAVA_LOOMISE_VIIS_RIIKLIK"][$root.currentLanguageNameField()]}}</md-radio-button> </md-radio-group> <p class="invalid" ng-if="vocationalCurriculumForm.$submitted && !curriculum.draft">{{\'main.messages.error.inputFieldIsRequired\' | translate}}</p> </md-input-container> </fieldset> <div>&nbsp;</div> <fieldset tabindex="2" layout="column"> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'curriculum.nameTitle\' | translate}}</legend> <md-input-container flex="100"> <label>{{\'curriculum.nameEt\' | translate}}</label> <input name="nameEt" ng-model="curriculum.nameEt" type="text" required ng-readonly="formState.notEditableBasicData" md-maxlength="255"> </md-input-container> <md-input-container flex="100"> <label>{{\'curriculum.nameEn\' | translate}}</label> <input ng-model="curriculum.nameEn" type="text" required ng-readonly="formState.notEditableBasicData" md-maxlength="255"> </md-input-container> <md-input-container flex="100"> <label>{{\'curriculum.nameRu\' | translate}}</label> <input ng-model="curriculum.nameRu" type="text" ng-readonly="formState.notEditableBasicData" md-maxlength="255"> </md-input-container> </fieldset> </div> <fieldset tabindex="3" flex="66" flex-offset="4" flex-sm="100" flex-xs="100" flex-offset-xs="0" flex-offset-sm="0"> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'curriculum.mainData\' | translate}}</legend> <div layout="row" flex> <md-input-container layout="row" flex="45"> <hois-classifier-radio layout="row" name="consecution" ng-model="curriculum.consecution" model-value-attr="code" main-classifier-code="OPPEKAVA_TYPE" filter-values watch-model="curriculum.origStudyLevel" connect-main-classifier-code="OPPEASTE" search-from-connect select-first-value default-value="OPPEKAVA_TYPE_E" required disabled></hois-classifier-radio> </md-input-container> <div md-colors="{color: \'warn-A400\'}" ng-if="vocationalCurriculumForm.$submitted" ng-messages="vocationalCurriculumForm.consecution.$error"> <div ng-message="required">{{\'main.messages.error.inputFieldIsRequired\' | translate}}</div> </div> <md-input-container flex="50" flex-offset="5"> <label>{{\'curriculum.code\' | translate}}</label> <input ng-model="curriculum.code" name="code" type="text" required ng-readonly="formState.notEditableBasicData" md-maxlength="25" unique="codeUniqueQuery" ng-model-options="{ debounce: 250 }"> <div ng-messages="vocationalCurriculumForm.code.$error" ng-show="vocationalCurriculumForm.code.$dirty"> <div ng-message="notUnique"> {{\'main.messages.error.mustBeUnique\' | translate}} </div> </div> </md-input-container> </div> <div layout="row" flex> <div flex="45"> <md-checkbox ng-model="curriculum.joint" aria-label="Is vocational" class="md-primary" ng-disabled="formState.notEditableBasicData"> {{\'curriculum.isJoint\' | translate}} </md-checkbox> </div> <md-input-container flex="50" flex-offset="5"> <label>{{\'curriculum.merCode\' | translate}}</label> <input ng-model="curriculum.merCode" name="merCode" type="text" ng-model-options="{ debounce: 250 }" unique="merCodeUniqueQuery" ng-readonly="formState.notEditableBasicData" md-maxlength="10"> <div ng-messages="vocationalCurriculumForm.merCode.$error" ng-show="vocationalCurriculumForm.merCode.$dirty"> <div ng-message="notUnique"> {{\'main.messages.error.mustBeUnique\' | translate}} </div> </div> </md-input-container> </div> <!-- uus --> <div layout="row" flex> <div flex="45"> <md-checkbox ng-model="curriculum.occupation" ng-click="isOccupationChanged()" aria-label="Is vocational" ng-hide="isDraftEmployerSupportLetter" ng-disabled="formState.notEditableBasicData || !occupationCanBeChanged() || curriculum.curriculumOccupations.length > 0" name="isOccupation"> {{\'curriculum.occupationIsAcquired\' | translate}} </md-checkbox> </div> <md-input-container flex="50" flex-offset="5"> <label>{{\'curriculum.credits\' | translate}}</label> <input ng-model="curriculum.credits" name="credits" type="number" min="0" max="999" pattern="^\\d+(\\.\\d{1})?$" required ng-readonly="formState.notEditableBasicData"> <div ng-messages="vocationalCurriculumForm.credits.$error" ng-show="vocationalCurriculumForm.credits.$dirty"> <div ng-message="min"> {{\'main.messages.error.positive\' | translate}} </div> <div ng-message="max"> {{\'curriculum.error.max999\' | translate}} </div> <div ng-message="pattern"> {{\'stateCurriculum.error.decimalPresision\' | translate}} </div> </div> </md-input-container> </div> <div layout="row" flex> <md-input-container flex="45"> <label>{{\'curriculum.studyLevel\' | translate}}</label> <hois-classifier-select ng-model="curriculum.origStudyLevel" model-value-attr="code" main-classifier-code="OPPEASTE" show-only-values="schoolOrigStudyLevel" required ng-disabled="formState.notEditableBasicData"></hois-classifier-select> </md-input-container> <div layout="row" flex="50" flex-offset="5"> <md-input-container flex="50"> <input ng-model="curriculum.studyPeriodYears" name="studyPeriodYears" type="number" placeholder="{{\'curriculum.studyPeriod\' | translate}} {{\'main.years\' | translate}}" required min="0" max="{{maxStydyYears.max}}" pattern="^\\d+$" ng-readonly="formState.notEditableBasicData"> <div ng-messages="vocationalCurriculumForm.studyPeriodYears.$error" ng-show="vocationalCurriculumForm.studyPeriodYears.$dirty"> <div ng-message="min"> {{\'main.messages.error.positive\' | translate}} </div> <div ng-message="max"> {{\'curriculum.error.max\' | translate:maxStydyYears }} </div> <div ng-message="pattern"> {{\'stateCurriculum.enter.credits.integer\' | translate}} </div> </div> </md-input-container> <md-input-container flex="45" flex-offset="5"> <input ng-model="curriculum.studyPeriodMonths" name="studyPeriodMonths" type="number" placeholder="{{\'main.months\' | translate}}" min="0" max="11" pattern="^\\d+$" ng-readonly="formState.notEditableBasicData"> <div ng-messages="vocationalCurriculumForm.studyPeriodMonths.$error" ng-show="vocationalCurriculumForm.studyPeriodMonths.$dirty"> <div ng-message="min"> {{\'main.messages.error.positive\' | translate}} </div> <div ng-message="max"> {{\'curriculum.error.monthsMax11\' | translate}} </div> <div ng-message="pattern"> {{\'stateCurriculum.enter.credits.integer\' | translate}} </div> </div> </md-input-container> </div> </div> <div layout="row" flex> <md-input-container flex="45"> <label>{{\'curriculum.ekrLevel\' | translate}}</label> <hois-classifier-select ng-model="curriculum.ekrLevel" main-classifier-code="EKR" watch-model="curriculum.origStudyLevel" filter-values connect-main-classifier-code="EKR" select-first-value disabled></hois-classifier-select> </md-input-container> <md-input-container flex="50" flex-offset="5"> <label>{{\'curriculum.studyForm\' | translate}}</label> <hois-classifier-select multiple ng-model="curriculum.studyForms" model-value-attr="code" main-classifier-code="OPPEVORM" criteria="{vocational: true}" required ng-disabled="formState.notEditableBasicData"></hois-classifier-select> </md-input-container> </div> <div layout="row" flex> <md-input-container flex="45"> <label>{{\'curriculum.educationLevel\' | translate}}</label> <hois-classifier-select ng-model="curriculum.educationLevel" main-classifier-code="HARIDUSTASE" watch-model="curriculum.origStudyLevel" filter-values connect-main-classifier-code="HARIDUSTASE" select-first-value disabled></hois-classifier-select> </md-input-container> <md-input-container flex="50" flex-offset="5"> <label>{{\'curriculum.studyLanguage\' | translate}}</label> <hois-classifier-select multiple ng-model="curriculum.studyLanguages" model-value-attr="code" main-classifier-code="OPPEKEEL" criteria="{vocational: true}" required ng-disabled="formState.notEditableBasicData"></hois-classifier-select> </md-input-container> </div> <div layout="row" flex> <md-input-container flex="45"> <label>{{\'curriculum.areaOfStudy\' | translate}}</label> <hois-classifier-select ng-model="curriculum.areaOfStudy" model-value-attr="code" main-classifier-code="ISCED_VALD" criteria="{vocational: true}" required ng-disabled="formState.notEditableBasicData"></hois-classifier-select> </md-input-container> <!-- hois-school-department-select was not used here as it set form $dirty after page load.\r\n          In addition, extra logic in providing options required --> <md-input-container flex="50" flex-offset="5"> <label> {{\'curriculum.structuralUnitResponsible\' | translate}} </label> <hois-select ng-model="curriculum.schoolDepartments" multiple values="schoolDepartments" required></hois-select> </md-input-container> </div> <div layout="row" flex> <md-input-container flex="45"> <label>{{\'curriculum.fieldOfStudy\' | translate}}</label> <hois-classifier-select ng-model="curriculum.fieldOfStudy" model-value-attr="code" main-classifier-code="ISCED_SUUN" criteria="{vocational: true}" watch-model="curriculum.areaOfStudy" filter-values search-from-connect connect-main-classifier-code="ISCED_VALD" required ng-disabled="formState.notEditableBasicData"></hois-classifier-select> </md-input-container> <md-input-container flex="50" flex-offset="5" ng-show="curriculum.draft === \'OPPEKAVA_LOOMISE_VIIS_RIIKLIK\'"> <label>{{\'curriculum.ehisRokClassifier\' | translate}}</label> <hois-classifier-select ng-model="curriculum.stateCurrClass" model-value-attr="code" main-classifier-code="EHIS_ROK" disabled></hois-classifier-select> </md-input-container> </div> <div layout="row" flex> <md-input-container flex="45"> <label>{{\'curriculum.group\' | translate}}</label> <hois-classifier-select ng-model="curriculum.iscedClass" model-value-attr="code" main-classifier-code="ISCED_RYHM" criteria="{vocational: true}" watch-model="curriculum.fieldOfStudy" filter-values search-from-connect connect-main-classifier-code="ISCED_SUUN" required ng-disabled="formState.notEditableBasicData"></hois-classifier-select> </md-input-container> </div> </fieldset> </div> <div>&nbsp;</div> <fieldset tabindex="4"> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'curriculum.commonData\' | translate}}</legend> <div layout="column"> <md-input-container flex> <label>{{\'curriculum.studyOutcomesEt\' | translate}}{{getStar()}}</label> <textarea ng-model="curriculum.outcomesEt" md-maxlength="20000" max-rows="10" dfs ng-required="strictValidation()"></textarea> </md-input-container> <md-input-container flex> <label>{{\'curriculum.studyOutcomesEn\' | translate}}</label> <textarea ng-model="curriculum.outcomesEn" md-maxlength="20000" max-rows="10"></textarea> </md-input-container> <md-input-container flex> <label>{{\'curriculum.structure\' | translate}}{{getStar()}}</label> <textarea ng-model="curriculum.structure" md-maxlength="20000" max-rows="10" ng-required="strictValidation()"></textarea> </md-input-container> <md-input-container flex> <label>{{\'curriculum.admissionRequirementsEt\' | translate}}{{getStar()}}</label> <textarea ng-model="curriculum.admissionRequirementsEt" md-maxlength="20000" max-rows="10" ng-required="strictValidation()"></textarea> </md-input-container> <md-input-container flex> <label>{{\'curriculum.admissionRequirementsEn\' | translate}}</label> <textarea ng-model="curriculum.admissionRequirementsEn" md-maxlength="20000" max-rows="10"></textarea> </md-input-container> <md-input-container flex> <label>{{\'curriculum.graduationRequirementsEt\' | translate}}{{getStar()}}</label> <textarea ng-model="curriculum.graduationRequirementsEt" md-maxlength="20000" max-rows="10" ng-required="strictValidation()"></textarea> </md-input-container> <md-input-container flex> <label>{{\'curriculum.graduationRequirementsEn\' | translate}}</label> <textarea ng-model="curriculum.graduationRequirementsEn" md-maxlength="20000" max-rows="10"></textarea> </md-input-container> <md-input-container flex> <label>{{\'curriculum.basesOfDraft\' | translate}}</label> <textarea ng-model="curriculum.draftText" md-maxlength="4000" max-rows="10"></textarea> </md-input-container> <md-input-container flex> <label>{{\'curriculum.specialityOpportunities\' | translate}}</label> <textarea ng-model="curriculum.specialization" md-maxlength="4000" max-rows="10"></textarea> </md-input-container> <md-autocomplete name="teacher" md-selected-item="curriculum.teacher" md-search-text="teacherName" md-items="teacher in searchTeacher(teacherName)" md-item-text="currentLanguageNameField(teacher)" md-min-length="1" md-floating-label="{{\'curriculum.supervisor\' | translate}}" md-no-cache class="small-margin" md-require-match flex> <md-item-template> <span md-highlight-text="teacherName" md-highlight-flags="^i">{{currentLanguageNameField(teacher)}}</span> </md-item-template> <md-not-found> {{\'main.messages.error.notFound\' | translate}} </md-not-found> </md-autocomplete> </div> </fieldset> <div>&nbsp;</div> <fieldset tabindex="5" ng-hide="isDraftEmployerSupportLetter"> <legend md-colors="{color: \'primary-800\'}" class="md-title-small" ng-class="{invalid: vocationalCurriculumForm.$submitted && occupationRequired() && strictValidation() && curriculum.curriculumOccupations.length === 0}">{{curriculum.occupation ? \'curriculum.occupationsAcquired\' : \'curriculum.partOccupationsAcquired\' | translate}}</legend> <md-button class="md-raised" ng-click="curriculum.occupation ? openOccupationDialog() : openPartOccupationsDialog()" ng-if="curriculum.id && !formState.notEditableBasicData && occupationCanBeChanged()">{{curriculum.occupation ? \'curriculum.addOccupation\' : \'curriculum.addPartOccupation\' | translate}}</md-button> <div layout="column"> <div ng-if="vocationalCurriculumForm.$submitted && occupationRequired() && strictValidation()"> <input style="display:none" type="number" readonly name="occupationsLength" ng-model="validation.occupationsLength" min="1"> <div md-colors="{color: \'warn-A400\'}" ng-messages="vocationalCurriculumForm.occupationsLength.$error"> <div ng-message="min">{{\'main.messages.error.atLeastOneShouldBeAdded\' | translate}}</div> </div> </div> </div> <table md-table class="secondary-table"> <thead md-head> <tr md-row> <th md-column>{{\'curriculum.occupationTable.order\' | translate}}</th> <th md-column ng-show="curriculum.occupation">{{\'curriculum.occupationTable.occupation\' | translate}}</th> <th md-column ng-show="!curriculum.occupation">{{\'curriculum.occupationTable.partOccupation\' | translate}}</th> <th md-column ng-show="curriculum.occupation">{{\'curriculum.occupationTable.partOccupations\' | translate}}</th> <th md-column ng-show="curriculum.occupation">{{\'curriculum.occupationTable.speciality\' | translate}}</th> <th md-column ng-show="curriculum.occupation">{{\'occupation.hasOccupationGrant\' | translate}}</th> <th md-column></th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="item in curriculum.curriculumOccupations | orderBy: \'occupation.nameEt\'" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell>{{$index + 1}}</td> <td md-cell> <a href="" ng-click="curriculum.occupation ? openOccupationDialog(item) : openPartOccupationsDialog(item)">{{currentLanguageNameField(item.occupation)}}</a></td> <td md-cell><span ng-hide="!curriculum.occupation" ng-repeat="partOccupation in item.partOccupations">{{currentLanguageNameField(partOccupation)}}{{$last ? \'\' : \', \'}}</span></td> <td md-cell><span ng-hide="!curriculum.occupation || !item.specialities || item.specialities.length == 0" ng-repeat="speciality in item.specialities track by $index"> {{currentLanguageNameField(speciality)}}{{$last ? \'\' : \', \'}}</span></td> <td md-cell><span ng-hide="!curriculum.occupation"> <md-checkbox ng-model="item.occupationGrant" disabled></md-checkbox> </span></td> <td md-cell><a class="remove" ng-click="removeOccupation(item)" ng-if="!formState.notEditableBasicData && occupationCanBeChanged()">&times;</a></td> </tr> </tbody> </table> </fieldset> <div>&nbsp;</div> <fieldset tabindex="6"> <legend md-colors="{color: \'primary-800\'}" class="md-title-small" ng-class="{invalid: vocationalCurriculumForm.$submitted && strictValidation() && !modulesValid()}">{{\'curriculum.modulesTought\' | translate}}</legend> <md-button class="md-raised" ng-click="openAddModuleDialog()" ng-if="curriculum.id">{{\'curriculum.addModule\' | translate}}</md-button> <!--MODULES WITHOUT OCCUPATIONS--> <div class="occupation-header align-center"> <span ng-class="{invalid: notAllModulesHaveOccupation()}">{{\'module.modulesWithoutPartOccupationOccuaptionSpecialization\' | translate}}</span> </div> <div layout="column" ng-repeat="type in moduleTypes | filter: filterTypesWithoutEmptyModules" class="lowerBorder"> <div layout="row" flex="100" class="occupation-row align-center border-bottom odd"> <div flex="5">&nbsp;</div> <div flex="20" flex-xs="35" style="word-wrap: break-word">{{currentLanguageNameField(type)}} ({{getTotalCredits(curriculum.modules | filter: filterEmptyModulesByType(type.code))}} EKAP)</div> <div layout="column" flex="75" flex-xs="60"> <div flex="100" ng-repeat="module in curriculum.modules | filter: filterEmptyModulesByType(type.code) | orderBy: \'nameEt\' track by $index" layout="row" class="align-center"> <a flex="30" flex-xs="70" style="word-wrap: break-word" ng-click="openAddModuleDialog(module)" href="">{{module.baseModule ? \'* \' : \'\'}}{{currentLanguageNameField(module)}}</a> <span flex="10" flex-xs="30">{{module.credits}}&nbsp; EKAP</span> </div> </div> </div> </div> <!--KUTSETE/OSAKUTSETE MOODULID--> <div ng-repeat="occupation in curriculum.curriculumOccupations | orderBy: \'occupation.nameEt\'" layout="column"> <div class="occupation-header align-center"> <span ng-show="curriculum.occupation" ng-class="{invalid: vocationalCurriculumForm.$submitted && strictValidation() && (!occupationHasPModule(occupation.occupation.code) || !isOccutationsCreditsValid(occupation))}">{{\'stateCurriculum.enter.occupation.occupation\' | translate}} {{$index + 1}}:&nbsp; {{currentLanguageNameField(occupation.occupation)}}</span> <span ng-show="!curriculum.occupation" ng-class="{invalid: vocationalCurriculumForm.$submitted && strictValidation() && (!occupationHasPModule(occupation.occupation.code) || !isOccutationsCreditsValid(occupation))}">{{\'stateCurriculum.enter.occupation.partial\' | translate}} {{$index + 1}}:&nbsp; {{currentLanguageNameField(occupation.occupation)}}</span> </div> <div layout="column" ng-repeat="type in moduleTypes | filter: filterTypesWithoutModules(occupation.occupation.code, curriculum.modules)" class="lowerBorder"> <div layout="row" flex="100" class="occupation-row align-center border-bottom odd"> <div flex="5">&nbsp;</div> <div flex="20">{{currentLanguageNameField(type)}} ({{getTotalCredits(curriculum.modules | filter: filterModulesByType(type.code, occupation.occupation.code))}} EKAP)</div> <div layout="column" flex="75"> <div flex="100" ng-repeat="module in curriculum.modules | filter: filterModulesByType(type.code, occupation.occupation.code) | orderBy: \'nameEt\' track by $index" layout="row" class="align-center"> <a flex="30" ng-click="openAddModuleDialog(module)" href="">{{module.baseModule ? \'* \' : \'\'}}{{currentLanguageNameField(module)}}</a> <span flex="10">{{module.credits}}&nbsp; EKAP</span> </div> </div> </div> </div> <!--OSAKUTSETE MOODULID--> <div ng-repeat="partOccupation in occupation.partOccupations | orderBy: \'nameEt\'" layout="column"> <div class="occupation-header2 align-center"> <span ng-class="{invalid: vocationalCurriculumForm.$submitted && strictValidation() && !occupationHasPModule(partOccupation.code)}">{{\'stateCurriculum.enter.occupation.partial\' | translate}} {{$index + 1}}: {{currentLanguageNameField(partOccupation)}}</span></div> <div layout="column" ng-repeat="type in moduleTypes | filter: filterTypesWithoutModules(partOccupation.code, curriculum.modules)" class="lowerBorder"> <div layout="row" flex="100" class="occupation-row align-center border-bottom odd"> <div flex="5">&nbsp;</div> <div flex="20">{{currentLanguageNameField(type)}} ({{getTotalCredits(curriculum.modules | filter: filterModulesByType(type.code, partOccupation.code))}} EKAP)</div> <div layout="column" flex="75"> <div flex="100" ng-repeat="module in curriculum.modules | filter: filterModulesByType(type.code, partOccupation.code) | orderBy: \'nameEt\' track by $index" layout="row" class="align-center"> <a flex="30" ng-click="openAddModuleDialog(module)" href="">{{module.baseModule ? \'* \' : \'\'}}{{currentLanguageNameField(module)}}</a> <span flex="10">{{module.credits}}&nbsp; EKAP</span> </div> </div> </div> </div> </div> <!--SPETSKUTSETE MOODULID--> <div ng-repeat="speciality in occupation.specialities | orderBy: \'nameEt\'" layout="column"> <div class="occupation-header2 align-center"><span ng-class="{invalid: vocationalCurriculumForm.$submitted && strictValidation() && (!occupationHasPModule(speciality.code) || !isSpetsOccupationValid(speciality, occupation))}">{{\'stateCurriculum.enter.occupation.specialty\' | translate}} {{$index + 1}}: {{currentLanguageNameField(speciality)}}</span></div> <div layout="column" ng-repeat="type in moduleTypes | filter: filterTypesWithoutModules(speciality.code, curriculum.modules)" class="lowerBorder"> <div layout="row" flex="100" class="occupation-row align-center border-bottom odd"> <div flex="5">&nbsp;</div> <div flex="20">{{currentLanguageNameField(type)}} ({{getTotalCredits(curriculum.modules | filter: filterModulesByType(type.code, speciality.code))}} EKAP)</div> <div layout="column" flex="75"> <div flex="100" ng-repeat="module in curriculum.modules | filter: filterModulesByType(type.code, speciality.code) | orderBy: \'nameEt\' track by $index" layout="row" class="align-center"> <a flex="30" ng-click="openAddModuleDialog(module)" href="">{{module.baseModule ? \'* \' : \'\'}}{{currentLanguageNameField(module)}}</a> <span flex="10">{{module.credits}}&nbsp; EKAP</span> </div> </div> </div> </div> </div> </div> </fieldset> <div>&nbsp;</div> <fieldset tabindex="7"> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'curriculum.additionalInfo\' | translate}}</legend> <md-input-container> <label>{{\'curriculum.optionalStudyCredits\' | translate}}{{getStar()}}</label> <input name="vocationalCredits" type="number" ng-model="curriculum.optionalStudyCredits" ng-required="strictValidation()" aria-label="optional credits" min="0" max="999" pattern="^\\d+(\\.\\d{1})?$" ng-readonly="formState.notEditableBasicData"> <div ng-messages="vocationalCurriculumForm.vocationalCredits.$error" ng-show="vocationalCurriculumForm.vocationalCredits.$dirty"> <div ng-message="min"> {{\'main.messages.error.positive\' | translate}} </div> <div ng-message="max"> {{\'curriculum.error.max999\' | translate}} </div> <div ng-message="pattern"> {{\'stateCurriculum.error.decimalPresision\' | translate}} </div> </div> </md-input-container> <div layout="column"> <md-input-container flex> <label>{{\'curriculum.practiceDescription\' | translate}}</label> <textarea ng-model="curriculum.practiceDescription" md-maxlength="20000" max-rows="2"></textarea> </md-input-container> <md-input-container flex> <label>{{\'curriculum.finalExamShortDescription\' | translate}}</label> <textarea ng-model="curriculum.finalExamDescription" md-maxlength="4000" max-rows="2"></textarea> </md-input-container> <md-input-container flex> <label>{{\'curriculum.optionalStudyOpportunities\' | translate}}</label> <textarea ng-model="curriculum.optionalStudyDescription" md-maxlength="4000" max-rows="2"></textarea> </md-input-container> <md-input-container flex> <label>{{\'curriculum.contactPerson\' | translate}}</label> <input ng-model="curriculum.contactPerson" type="text" md-maxlength="1000"> </md-input-container> <md-input-container flex> <label>{{\'main.notes\' | translate}}</label> <textarea ng-model="curriculum.description" md-maxlength="20000" max-rows="2"></textarea> </md-input-container> </div> </fieldset> <div ng-show="curriculum.joint">&nbsp;</div> <fieldset tabindex="8" ng-show="curriculum.joint"> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'curriculum.jointInfo\' | translate}}</legend> <div layout="column"> <div layout="row" layout-align="start start" ng-show="curriculum.joint"> <label class="md-required common-label" flex="30">{{\'curriculum.jointSchool\' | translate}}</label> <md-radio-group ng-model="curriculum.abroad" flex="50" layout="row" class="align-center" ng-change="clearJointPartnersFields()" flex-offset-xs="0" flex-offset-sm="0" flex-offset="4" ng-disabled="formState.notEditableBasicData"> <md-radio-button ng-value="false" aria-label="{{ \'curriculum.estonianEducationalInstitute\' | translate }}"> {{ \'curriculum.estonianEducationalInstitute\' | translate }} </md-radio-button> <md-radio-button ng-value="true" aria-label="{{ \'curriculum.jointPartnerAbroadSchool\' | translate }}"> {{ \'curriculum.foreignEducationalInstitute\' | translate }} </md-radio-button> </md-radio-group> </div> <div layout="row" flex="100" ng-show="curriculum.joint"> <md-input-container flex="64" ng-hide="curriculum.abroad"> <label>{{\'curriculum.estonianEducationalInstitute\' | translate}}&nbsp;*</label> <hois-classifier-select ng-model="curriculum.jointPartnerEhisSchool" main-classifier-code="EHIS_KOOL" filter-values="curriculum.jointPartners" by-property="ehisSchool" model-value-attr="code" ng-disabled="formState.notEditableBasicData"></hois-classifier-select> </md-input-container> <md-input-container ng-hide="!curriculum.abroad" flex="30"> <label>{{\'school.name\' | translate}}&nbsp;*</label> <input ng-model="curriculum.jointPartnerForeignNameEt" type="text" md-maxlength="100"> </md-input-container> <md-input-container ng-hide="!curriculum.abroad" flex="30" flex-offset-xs="0" flex-offset-sm="0" flex-offset="4"> <label>{{\'school.nameEn\' | translate}}&nbsp;*</label> <input ng-model="curriculum.jointPartnerForeignNameEn" type="text" md-maxlength="100"> </md-input-container> <md-button class="md-raised" ng-click="addJointPartner()" ng-disabled="(!curriculum.jointPartnerForeignNameEt || !curriculum.jointPartnerForeignNameEn) && !curriculum.jointPartnerEhisSchool">{{\'main.button.add\' | translate}}</md-button> </div> <input ng-if="curriculum.joint && strictValidation()" style="display:none" type="number" readonly name="jointPartnersLength" ng-model="validation.jointPartnersLength" min="1"> <div md-colors="{color: \'warn-A400\'}" ng-messages="vocationalCurriculumForm.jointPartnersLength.$error"> <div ng-if="vocationalCurriculumForm.$submitted" ng-message="min">{{\'main.messages.error.atLeastOneShouldBeAdded\' | translate}}</div> </div> <div layout="column" flex ng-show="curriculum.joint" class="common-label"> <div layout="row" ng-repeat="item in curriculum.jointPartners | filter: filterEmptyJointPartners | orderBy: [\'ehisSchool\', \'nameEt\']" class="align-center"> <div flex="5">&nbsp;</div> <div ng-if="item.abroad">{{currentLanguageNameField(item)}}</div> <div ng-if="!item.abroad"> <hois-classifier-value ng-model="item.ehisSchool" main-classifier-code="EHIS_KOOL"></hois-classifier-value></div> <div flex="5">&nbsp;</div> <div flex="5"><a class="remove nomargin" ng-click="removejointPartner(item)" ng-if="!formState.notEditableBasicData">&times;</a></div> </div> </div> <div layout="row" layout-sm="column" layout-xs="column" ng-show="curriculum.joint"> <md-input-container flex="30" ng-if="curriculum.joint"> <label>{{\'curriculum.jointMentor\' | translate}}{{getStar()}}</label> <hois-classifier-select ng-model="curriculum.jointMentor" main-classifier-code="EHIS_KOOL" model-value-attr="code" show-only-values="selectedJointPartners" ng-required="strictValidation()" ng-disabled="formState.notEditableBasicData"></hois-classifier-select> </md-input-container> <md-input-container flex="66" flex-offset="4"> <label>{{\'curriculum.jointResponsible\' | translate}}</label> <input ng-model="curriculum.supervisor" type="text" md-maxlength="100" ng-readonly="formState.notEditableBasicData"> </md-input-container> </div> <md-input-container flex="100"> <label>{{\'curriculum.jointAgreementInfoEt\' | translate}}{{getStar()}}</label> <textarea ng-model="curriculum.contractEt" md-maxlength="1000" max-rows="10" ng-required="curriculum.joint && strictValidation()" ng-readonly="formState.notEditableBasicData"></textarea> </md-input-container> <md-input-container flex="100"> <label>{{\'curriculum.jointAgreementInfoEn\' | translate}}{{getStar()}}</label> <textarea ng-model="curriculum.contractEn" md-maxlength="1000" max-rows="10" ng-required="curriculum.joint && strictValidation()" ng-readonly="formState.notEditableBasicData"></textarea> </md-input-container> </div> </fieldset> <div>&nbsp;</div> <fieldset tabindex="9"> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'curriculum.address\' | translate}}</legend> <div layout="column"> <div layout="row"> <div flex> <hois-ads-adapter class="md-text" ng-model="formState.address.addressAds" ads-oid-model="formState.address.addressOid" address-model="formState.address.address" ov-model="formState.address.addressOv"></hois-ads-adapter> </div> <md-button class="md-raised" ng-click="addAddress()" ng-disabled="!formState.address.addressOv">{{\'main.button.add\' | translate}}</md-button> </div> <input ng-if="strictValidation()" style="display:none" type="number" readonly name="addressesLength" ng-model="validation.addressesLength" min="1"> <div md-colors="{color: \'warn-A400\'}" ng-messages="vocationalCurriculumForm.addressesLength.$error"> <div ng-if="vocationalCurriculumForm.$submitted" ng-message="min">{{\'main.messages.error.atLeastOneShouldBeAdded\' | translate}}</div> </div> <div layout="column" flex class="common-label"> <div layout="row" ng-repeat="item in curriculum.addresses | orderBy: \'address\'" class="align-center"> <div flex="5">&nbsp;</div> <div>{{::item.address}}</div> <div flex="5">&nbsp;</div> <div flex="5"><a class="remove nomargin" ng-click="removeAddress(item)">&times;</a></div> </div> </div> </div> </fieldset> <div>&nbsp;</div> <fieldset tabindex="10"> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'curriculum.approvalInfo\' | translate}}</legend> <div layout="row" flex="100"> <md-input-container flex="30" flex-sm="100" flex-xs="100"> <label>{{\'curriculum.approvalDocumentNr\' | translate}}{{getStar()}}</label> <input ng-model="curriculum.approvalDokNr" type="text" md-maxlength="50" ng-required="strictValidation()"> </md-input-container> <md-input-container flex="20" flex-sm="100" flex-xs="100" flex-offset-xs="0" flex-offset-sm="0" flex-offset="4"> <label>{{\'curriculum.approvalDate\' | translate}}{{getStar()}}</label> <md-datepicker ng-model="curriculum.approval" md-open-on-focus ng-required="strictValidation()"></md-datepicker> </md-input-container> </div> </fieldset> <div>&nbsp;</div> <fieldset tabindex="11"> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'curriculum.statuses\' | translate}}</legend> <div layout="row" flex="100"> <md-input-container flex="30" flex-sm="100" flex-xs="100"> <label>{{\'main.validFrom\' | translate}}{{getStar()}}</label> <md-datepicker ng-model="curriculum.validFrom" md-open-on-focus ng-required="strictValidation()"></md-datepicker> </md-input-container> <md-input-container flex="20" flex-sm="100" flex-xs="100" flex-offset-xs="0" flex-offset-sm="0" flex-offset="4"> <label>{{\'main.validTo\' | translate}}</label> <md-datepicker ng-model="curriculum.validThru" md-min-date="curriculum.validFrom" md-open-on-focus></md-datepicker> </md-input-container> </div> <div layout="row" flex="100" class="top-margin form-readonly"> <md-input-container flex="30" flex-sm="100" flex-xs="100" class="readonly"> <label class="label">{{\'main.status\' | translate}}</label> <hois-classifier-value ng-model="curriculum.status" main-classifier-code="OPPEKAVA_STAATUS"></hois-classifier-value> </md-input-container> <md-input-container flex="20" flex-sm="100" flex-xs="100" flex-offset-xs="0" flex-offset-sm="0" flex-offset="4"> <label>{{\'curriculum.statusInEhis\' | translate}}</label> <hois-classifier-value ng-model="curriculum.ehisStatus" main-classifier-code="OPPEKAVA_EHIS_STAATUS"></hois-classifier-value> </md-input-container> <md-input-container flex="40" flex-sm="100" flex-xs="100" flex-offset-xs="0" flex-offset-sm="0" flex-offset="5"> <label>{{\'curriculum.statusChangedDateInEhis\' | translate}}</label> <hois-value value="curriculum.ehisChanged | hoisDate"></hois-value> </md-input-container> </div> <div layout="row" flex="100" class="md-body-1 hois-value"> <a ng-show="!!curriculum.stateCurriculum" ng-href="/#/stateCurriculum/{{curriculum.stateCurriculum.id}}/view" class="md-primary" translate="curriculum.referenceToStateCurriculum" translate-values="{{curriculum.stateCurriculum}}"></a> </div> </fieldset> <div ng-if="curriculum.id">&nbsp;</div> <fieldset tabindex="12" ng-if="curriculum.id"> <legend md-colors="{color: \'primary-800\'}" class="md-title-small" ng-class="{invalid: vocationalCurriculumForm.$submitted && strictValidation() && !hasRequiredFiles()}">{{\'main.relatedFiles\' | translate}}</legend> <md-button class="md-raised" ng-click="openAddFileDialog()">{{\'main.button.uploadFile\' | translate}}</md-button> <table md-table class="secondary-table"> <thead md-head> <tr md-row> <th md-column><span>{{\'file.nameAndFile\' | translate}}</span></th> <th md-column><span>{{\'file.creationLocation\' | translate}}</span></th> <th md-column>{{\'file.type\' | translate}}</th> <th md-column>{{\'curriculum.sendToEhis\' | translate}}</th> <th md-column></th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="file in curriculum.files | orderBy: \'oisFile.fname\'" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell> {{file.oisFile.fname}} <a ng-href="{{getUrl(file, \'curriculum\')}}" download><md-icon md-font-set="material-icons">file_download</md-icon></a> </td> <td md-cell> {{file.ehis ? \'EHIS\' : \'ÕIS\'}} </td> <td md-cell> <hois-classifier-value ng-model="file.ehisFile" main-classifier-code="EHIS_FAIL"></hois-classifier-value> </td> <td md-cell> <md-checkbox ng-model="file.sendEhis" aria-label="send to ehis"></md-checkbox> </td> <td md-cell> <a class="remove nomargin" ng-click="deleteFile(file)">&times;</a> </td> </tr> </tbody> </table> </fieldset> <div>&nbsp;</div> <fieldset tabindex="13" ng-if="curriculum.id > 0"> <legend md-colors="{color: \'primary-800\'}" class="md-title-small" ng-class="{invalid: vocationalCurriculumForm.$submitted && strictValidation() && !hasVerifiedVersions()}">{{\'curriculum.moduleImplementationPlans\' | translate}}</legend> <md-button class="md-raised" ng-click="goToVersionNewForm()" ng-show="versionCanBeAdded()">{{\'main.button.create\' | translate}}</md-button> <md-table-container> <table md-table md-progress="promise" class="secondary-table"> <thead md-head md-order="query.order"> <tr md-row> <th md-column>{{\'module.implementationPlan.code\' | translate}}</th> <th md-column>{{\'main.status\' | translate}}</th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="moduleImplementationPlan in curriculum.versions | orderBy: \'code\'"> <td md-cell> <a href="" class="md-primary" ng-click="goToImplementationPlanForm(moduleImplementationPlan)">{{moduleImplementationPlan.code}}</a> </td> <td md-cell><hois-classifier-value ng-model="moduleImplementationPlan.status" main-classifier-code="OPPEKAVA_VERSIOON_STAATUS"></hois-classifier-value></td> </tr> </tbody> </table> </md-table-container> </fieldset> <hois-created-modified object="curriculum"></hois-created-modified> <div> </div> </form> <div layout="row"> <div flex layout-xs="column"> <span ng-show="curriculum.status === STATUS.ENTERING" layout-xs="column"> <span ng-show="!curriculum.id" layout-xs="column"> <md-button class="md-raised md-primary" ng-click="save()">{{\'main.button.save\' | translate}}</md-button> </span> <span ng-show="curriculum.id" layout-xs="column"> <md-button class="md-raised md-primary" ng-click="save()" ng-if="curriculum.canChange">{{\'main.button.save\' | translate}}</md-button> <md-button class="md-raised" ng-click="saveAndProceed()" ng-if="curriculum.canChange && curriculum.canConfirm">{{\'main.button.status.approving\' | translate}}</md-button> <md-button class="md-raised" ng-click="setStatusClosed()" ng-if="curriculum.canChange && curriculum.canClose">{{\'main.button.status.close\' | translate}}</md-button> <md-button class="md-raised md-default" ng-click="delete()" ng-if="curriculum.canDelete">{{\'main.button.delete\' | translate}}</md-button> </span> </span> <span ng-show="curriculum.status === STATUS.PROCEEDING && !formState.sentToEhis" layout-xs="column"> <md-button class="md-raised md-primary" ng-click="save()" ng-if="curriculum.canChange">{{\'main.button.save\' | translate}}</md-button> <md-button class="md-raised md-default" ng-click="delete()" ng-if="curriculum.canDelete">{{\'main.button.delete\' | translate}}</md-button> </span> <span ng-show="curriculum.status === STATUS.PROCEEDING && formState.sentToEhis" layout-xs="column"> <md-button class="md-raised md-default" ng-click="updateFromEhis(true)" ng-if="curriculum.canConfirm">{{\'curriculum.button.updateFromEhisTest\' | translate}}</md-button> <md-button class="md-raised md-default" ng-click="updateFromEhis(false)" ng-if="curriculum.canConfirm">{{\'curriculum.button.updateFromEhis\' | translate}}</md-button> </span> <span ng-show="curriculum.status === STATUS.VERIFIED" layout-xs="column"> <md-button class="md-raised md-primary" ng-click="save()" ng-if="curriculum.canChange">{{\'main.button.save\' | translate}}</md-button> </span> <a href="{{curriculumPdfUrl}}" target="_blank" class="md-button md-raised" ng-if="showPrintButton()">{{\'main.button.printGeneral\' | translate}}</a> <a href="{{curriculumModulesPdfUrl}}" target="_blank" class="md-button md-raised" ng-if="showPrintButton()">{{\'main.button.printModules\' | translate}}</a> <a href="{{curriculumCompetencesPdfUrl}}" target="_blank" class="md-button md-raised" ng-if="showPrintButton()">{{\'main.button.printCompetences\' | translate}}</a> <md-button class="md-raised md-default" ng-click="back(\'#/curriculum\', vocationalCurriculumForm)">{{\'main.button.back\' | translate}}</md-button> </div> </div> </div> <style>.lowerBorder {\r\n    border-bottom: solid 1px #E0E0E0;\r\n  }</style>'),
a.put("vocationalCurriculum/vocational.curriculum.view.html",'<div class="ois-form-layout-padding ois-form-layout" ng-cloak> <form name="vocationalCurriculumForm" layout="column"> <div layout="row" layout-sm="column" layout-xs="column"> <div layout="column" flex="30" flex-sm="100" flex-xs="100"> <fieldset tabindex="1"> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'curriculum.draft\' | translate}}</legend> <md-input-container flex="70" flex-sm="100" flex-xs="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <md-radio-group ng-model="curriculum.draft" name="draft" class="md-primary" ng-disabled="curriculum.id || (curriculum.draft && (curriculum.draft === \'OPPEKAVA_LOOMISE_VIIS_RIIKLIK\' || curriculum.draft === \'OPPEKAVA_LOOMISE_VIIS_KOOL\') || curriculum.nameEt)"> <md-radio-button value="OPPEKAVA_LOOMISE_VIIS_KUTSE" aria-label="OPPEKAVA LOOMISE VIIS KUTSE">{{draftOptions["OPPEKAVA_LOOMISE_VIIS_KUTSE"][$root.currentLanguageNameField()]}}</md-radio-button> <md-radio-button value="OPPEKAVA_LOOMISE_VIIS_TOOANDJA" aria-label="OPPEKAVA LOOMISE VIIS TOOANDJA">{{draftOptions["OPPEKAVA_LOOMISE_VIIS_TOOANDJA"][$root.currentLanguageNameField()]}}</md-radio-button> <md-radio-button value="OPPEKAVA_LOOMISE_VIIS_KOOL" aria-label="OPPEKAVA LOOMISE VIIS KOOL">{{draftOptions["OPPEKAVA_LOOMISE_VIIS_KOOL"][$root.currentLanguageNameField()]}}</md-radio-button> <md-radio-button value="OPPEKAVA_LOOMISE_VIIS_RIIKLIK" aria-label="OPPEKAVA LOOMISE VIIS RIIKLIK">{{draftOptions["OPPEKAVA_LOOMISE_VIIS_RIIKLIK"][$root.currentLanguageNameField()]}}</md-radio-button> </md-radio-group> <p class="invalid" ng-if="vocationalCurriculumForm.$submitted && !curriculum.draft">{{\'main.messages.error.inputFieldIsRequired\' | translate}}</p> </md-input-container> </fieldset> <div>&nbsp;</div> <fieldset tabindex="2" layout="column"> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'curriculum.nameTitle\' | translate}}</legend> <md-input-container flex="100"> <label>{{\'curriculum.nameEt\' | translate}}</label> <input name="nameEt" ng-model="curriculum.nameEt" type="text" readonly> </md-input-container> <md-input-container flex="100"> <label>{{\'curriculum.nameEn\' | translate}}</label> <input ng-model="curriculum.nameEn" type="text" readonly> </md-input-container> <md-input-container flex="100"> <label>{{\'curriculum.nameRu\' | translate}}</label> <input ng-model="curriculum.nameRu" type="text" readonly> </md-input-container> </fieldset> </div> <fieldset tabindex="3" flex="66" flex-offset="4" flex-sm="100" flex-xs="100" flex-offset-sm="0" flex-offset-xs="0"> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'curriculum.mainData\' | translate}}</legend> <div layout="row" flex layout-xs="column"> <md-input-container layout="row" flex="45"> <hois-classifier-radio layout="row" name="consecution" ng-model="curriculum.consecution" model-value-attr="code" main-classifier-code="OPPEKAVA_TYPE" filter-values watch-model="curriculum.origStudyLevel" connect-main-classifier-code="OPPEASTE" search-from-connect select-first-value default-value="OPPEKAVA_TYPE_E" disabled></hois-classifier-radio> </md-input-container> <md-input-container flex="50" flex-offset="5" flex-xs="100" flex-offset-xs="0"> <label>{{\'curriculum.code\' | translate}}</label> <input ng-model="curriculum.code" name="code" type="text" readonly> </md-input-container> </div> <div layout="row" flex> <div flex="45"> <md-checkbox ng-model="curriculum.joint" aria-label="Is vocational" class="md-primary" disabled> {{\'curriculum.isJoint\' | translate}} </md-checkbox> </div> <md-input-container flex="50" flex-offset="5"> <label>{{\'curriculum.merCode\' | translate}}</label> <input ng-model="curriculum.merCode" name="merCode" type="text" readonly> </md-input-container> </div> <!-- uus --> <div layout="row" flex> <div flex="45"> <md-checkbox ng-model="curriculum.occupation" ng-click="isOccupationChanged()" aria-label="Is vocational" ng-hide="isDraftEmployerSupportLetter" disabled> {{\'curriculum.occupationIsAcquired\' | translate}} </md-checkbox> </div> <md-input-container flex="50" flex-offset="5"> <label>{{\'curriculum.credits\' | translate}}</label> <input ng-model="curriculum.credits" name="credits" type="number" readonly> </md-input-container> </div> <div layout="row" layout-xs="column" flex> <md-input-container flex="45" flex-xs="100"> <label>{{\'curriculum.studyLevel\' | translate}}</label> <hois-classifier-select ng-model="curriculum.origStudyLevel" model-value-attr="code" main-classifier-code="OPPEASTE" disabled></hois-classifier-select> </md-input-container> <div layout="row" flex="50" flex-xs="100" flex-offset="5" flex-offset-xs="0"> <md-input-container flex="50" flex-xs="50"> <input ng-model="curriculum.studyPeriodYears" name="studyPeriodYears" type="number" placeholder="{{\'curriculum.studyPeriod\' | translate}} {{\'main.years\' | translate}}" readonly> </md-input-container> <md-input-container flex="45" flex-offset="5" flex-xs="50" flex-offset-xs="0"> <input ng-model="curriculum.studyPeriodMonths" name="studyPeriodMonths" type="number" placeholder="{{\'main.months\' | translate}}" readonly> </md-input-container> </div> </div> <div layout="row" layout-xs="column" flex> <md-input-container flex="45" flex-xs="100"> <label>{{\'curriculum.ekrLevel\' | translate}}</label> <hois-classifier-select ng-model="curriculum.ekrLevel" main-classifier-code="EKR" watch-model="curriculum.origStudyLevel" filter-values connect-main-classifier-code="EKR" select-first-value disabled></hois-classifier-select> </md-input-container> <md-input-container flex="50" flex-xs="100" flex-offset="5" flex-offset-xs="0"> <label>{{\'curriculum.studyForm\' | translate}}</label> <hois-classifier-select multiple ng-model="curriculum.studyForms" model-value-attr="code" main-classifier-code="OPPEVORM" criteria="{vocational: true}" disabled></hois-classifier-select> </md-input-container> </div> <div layout="row" layout-xs="column" flex> <md-input-container flex="45" flex-xs="100"> <label>{{\'curriculum.educationLevel\' | translate}}</label> <hois-classifier-select ng-model="curriculum.educationLevel" main-classifier-code="HARIDUSTASE" watch-model="curriculum.origStudyLevel" filter-values connect-main-classifier-code="HARIDUSTASE" select-first-value disabled></hois-classifier-select> </md-input-container> <md-input-container flex="50" flex-xs="100" flex-offset="5" flex-offset-xs="0"> <label>{{\'curriculum.studyLanguage\' | translate}}</label> <hois-classifier-select multiple ng-model="curriculum.studyLanguages" model-value-attr="code" main-classifier-code="OPPEKEEL" criteria="{vocational: true}" disabled></hois-classifier-select> </md-input-container> </div> <div layout="row" layout-xs="column" flex> <md-input-container flex="45" flex-xs="100"> <label>{{\'curriculum.areaOfStudy\' | translate}}</label> <hois-classifier-select ng-model="curriculum.areaOfStudy" model-value-attr="code" main-classifier-code="ISCED_VALD" criteria="{vocational: true}" disabled></hois-classifier-select> </md-input-container> <!-- hois-school-department-select was not used here as it set form $dirty after page load.\r\n          In addition, extra logic in providing options --> <md-input-container flex="50" flex-offset="5" flex-xs="100" flex-offset-xs="0"> <label> {{\'curriculum.structuralUnitResponsible\' | translate}} </label> <hois-select ng-model="curriculum.schoolDepartments" multiple values="schoolDepartments" disabled></hois-select> </md-input-container> </div> <div layout="row" layout-xs="column" flex> <md-input-container flex="45" flex-xs="100"> <label>{{\'curriculum.fieldOfStudy\' | translate}}</label> <hois-classifier-select ng-model="curriculum.fieldOfStudy" model-value-attr="code" main-classifier-code="ISCED_SUUN" criteria="{vocational: true}" watch-model="curriculum.areaOfStudy" filter-values search-from-connect connect-main-classifier-code="ISCED_VALD" disabled></hois-classifier-select> </md-input-container> <md-input-container flex="50" flex-xs="100" flex-offset="5" flex-offset-xs="0" ng-show="curriculum.draft === \'OPPEKAVA_LOOMISE_VIIS_RIIKLIK\'"> <label>{{\'curriculum.ehisRokClassifier\' | translate}}</label> <hois-classifier-select ng-model="curriculum.stateCurrClass" model-value-attr="code" main-classifier-code="EHIS_ROK" disabled></hois-classifier-select> </md-input-container> </div> <div layout="row" flex> <md-input-container flex="45" flex-xs="100"> <label>{{\'curriculum.group\' | translate}}</label> <hois-classifier-select ng-model="curriculum.iscedClass" model-value-attr="code" main-classifier-code="ISCED_RYHM" criteria="{vocational: true}" watch-model="curriculum.fieldOfStudy" filter-values search-from-connect connect-main-classifier-code="ISCED_SUUN" disabled></hois-classifier-select> </md-input-container> </div> </fieldset> </div> <div>&nbsp;</div> <fieldset tabindex="4"> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'curriculum.commonData\' | translate}}</legend> <div layout="column"> <md-input-container flex> <label>{{\'curriculum.studyOutcomesEt\' | translate}}</label> <textarea ng-model="curriculum.outcomesEt" max-rows="10" readonly></textarea> </md-input-container> <md-input-container flex> <label>{{\'curriculum.studyOutcomesEn\' | translate}}</label> <textarea ng-model="curriculum.outcomesEn" max-rows="10" readonly></textarea> </md-input-container> <md-input-container flex> <label>{{\'curriculum.structure\' | translate}}</label> <textarea ng-model="curriculum.structure" max-rows="10" readonly></textarea> </md-input-container> <md-input-container flex> <label>{{\'curriculum.admissionRequirementsEt\' | translate}}</label> <textarea ng-model="curriculum.admissionRequirementsEt" max-rows="10" readonly></textarea> </md-input-container> <md-input-container flex> <label>{{\'curriculum.admissionRequirementsEn\' | translate}}</label> <textarea ng-model="curriculum.admissionRequirementsEn" max-rows="10" readonly></textarea> </md-input-container> <md-input-container flex> <label>{{\'curriculum.graduationRequirementsEt\' | translate}}</label> <textarea ng-model="curriculum.graduationRequirementsEt" max-rows="10" readonly></textarea> </md-input-container> <md-input-container flex> <label>{{\'curriculum.graduationRequirementsEn\' | translate}}</label> <textarea ng-model="curriculum.graduationRequirementsEn" max-rows="10" readonly></textarea> </md-input-container> <md-input-container flex> <label>{{\'curriculum.basesOfDraft\' | translate}}</label> <textarea ng-model="curriculum.draftText" max-rows="10" readonly></textarea> </md-input-container> <md-input-container flex> <label>{{\'curriculum.specialityOpportunities\' | translate}}</label> <textarea ng-model="curriculum.specialization" max-rows="10" readonly></textarea> </md-input-container> <md-input-container flex> <label>{{\'curriculum.supervisor\' | translate}}</label> <input ng-value="currentLanguageNameField(curriculum.teacher)" readonly> </md-input-container> </div> </fieldset> <div>&nbsp;</div> <fieldset tabindex="5" ng-hide="isDraftEmployerSupportLetter"> <legend md-colors="{color: \'primary-800\'}" class="md-title-small"> {{curriculum.occupation ? \'curriculum.occupationsAcquired\' : \'curriculum.partOccupationsAcquired\' | translate}} </legend> <div layout="column"> <div ng-if="vocationalCurriculumForm.$submitted && occupationRequired() && strictValidation()"> <input style="display:none" type="number" readonly name="occupationsLength" ng-model="validation.occupationsLength" min="1"> <div md-colors="{color: \'warn-A400\'}" ng-messages="vocationalCurriculumForm.occupationsLength.$error"> <div ng-message="min">{{\'main.messages.error.atLeastOneShouldBeAdded\' | translate}}</div> </div> </div> </div> <md-table-container> <table md-table class="secondary-table"> <thead md-head> <tr md-row> <th md-column>{{\'curriculum.occupationTable.order\' | translate}}</th> <th md-column ng-show="curriculum.occupation">{{\'curriculum.occupationTable.occupation\' | translate}}</th> <th md-column ng-show="!curriculum.occupation">{{\'curriculum.occupationTable.partOccupation\' | translate}}</th> <th md-column ng-show="curriculum.occupation">{{\'curriculum.occupationTable.partOccupations\' | translate}}</th> <th md-column ng-show="curriculum.occupation">{{\'curriculum.occupationTable.speciality\' | translate}}</th> <th md-column ng-show="curriculum.occupation">{{\'occupation.hasOccupationGrant\' | translate}}</th> <th md-column></th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="item in curriculum.curriculumOccupations | orderBy: \'occupation.nameEt\'" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell>{{$index + 1}}</td> <td md-cell> <a href="" ng-click="curriculum.occupation ? openOccupationDialog(item) : openPartOccupationsDialog(item)">{{currentLanguageNameField(item.occupation)}}</a></td> <td md-cell><span ng-hide="!curriculum.occupation" ng-repeat="partOccupation in item.partOccupations">{{currentLanguageNameField(partOccupation)}}{{$last ? \'\' : \', \'}}</span></td> <td md-cell><span ng-hide="!curriculum.occupation || !item.specialities || item.specialities.length == 0" ng-repeat="speciality in item.specialities track by $index"> {{currentLanguageNameField(speciality)}}{{$last ? \'\' : \', \'}}</span></td> <td md-cell> <span ng-hide="!curriculum.occupation"> <md-checkbox ng-model="item.occupationGrant" disabled></md-checkbox> </span></td> <td md-cell></td> </tr> </tbody> </table> </md-table-container> </fieldset> <div>&nbsp;</div> <fieldset tabindex="6"> <legend md-colors="{color: \'primary-800\'}" class="md-title-small" ng-class="{invalid: vocationalCurriculumForm.$submitted && strictValidation() && !modulesValid()}">{{\'curriculum.modulesTought\' | translate}}</legend> <!--MODULES WITHOUT OCCUPATIONS--> <div class="occupation-header align-center"> <span ng-class="{invalid: notAllModulesHaveOccupation()}">{{\'module.modulesWithoutPartOccupationOccuaptionSpecialization\' | translate}}</span> </div> <div layout="column" ng-repeat="type in moduleTypes | filter: filterTypesWithoutEmptyModules" class="lowerBorder"> <div layout="row" flex="100" class="occupation-row align-center border-bottom odd"> <div flex="5">&nbsp;</div> <div flex="20" flex-xs="35" style="word-wrap: break-word">{{currentLanguageNameField(type)}} ({{getTotalCredits(curriculum.modules | filter: filterEmptyModulesByType(type.code))}} EKAP)</div> <div layout="column" flex="75" flex-xs="60"> <div flex="100" ng-repeat="module in curriculum.modules | filter: filterEmptyModulesByType(type.code) | orderBy: \'nameEt\' track by $index" layout="row" class="align-center"> <a flex="30" flex-xs="70" style="word-wrap: break-word" ng-click="openAddModuleDialog(module)" href="">{{module.baseModule ? \'* \' : \'\'}}{{currentLanguageNameField(module)}}</a> <span flex="10" flex-xs="30">{{module.credits}}&nbsp; EKAP</span> </div> </div> </div> </div> <!--KUTSETE/OSAKUTSETE MOODULID--> <div ng-repeat="occupation in curriculum.curriculumOccupations | orderBy: \'occupation.nameEt\'" layout="column"> <div class="occupation-header align-center"> <span ng-show="curriculum.occupation" ng-class="{invalid: vocationalCurriculumForm.$submitted && strictValidation() && (!occupationHasPModule(occupation.occupation.code) || !isOccutationsCreditsValid(occupation))}">{{\'stateCurriculum.enter.occupation.occupation\' | translate}} {{$index + 1}}:&nbsp; {{currentLanguageNameField(occupation.occupation)}}</span> <span ng-show="!curriculum.occupation" ng-class="{invalid: vocationalCurriculumForm.$submitted && strictValidation() && (!occupationHasPModule(occupation.occupation.code) || !isOccutationsCreditsValid(occupation))}">{{\'stateCurriculum.enter.occupation.partial\' | translate}} {{$index + 1}}:&nbsp; {{currentLanguageNameField(occupation.occupation)}}</span> </div> <div layout="column" ng-repeat="type in moduleTypes | filter: filterTypesWithoutModules(occupation.occupation.code, curriculum.modules)" class="lowerBorder"> <div layout="row" flex="100" class="occupation-row align-center border-bottom odd"> <div flex="5" flex-xs="0">&nbsp;</div> <div flex="20" flex-xs="30">{{currentLanguageNameField(type)}} ({{getTotalCredits(curriculum.modules | filter: filterModulesByType(type.code, occupation.occupation.code))}} EKAP)</div> <div layout="column" flex="75" flex-xs="70"> <div flex="100" ng-repeat="module in curriculum.modules | filter: filterModulesByType(type.code, occupation.occupation.code) | orderBy: \'nameEt\' track by $index" layout="row" class="align-center"> <a flex="30" flex-xs="80" style="word-wrap: break-word" ng-click="openAddModuleDialog(module)" href="">{{module.baseModule ? \'* \' : \'\'}}{{currentLanguageNameField(module)}}</a> <span flex="10">{{module.credits}}&nbsp; EKAP</span> </div> </div> </div> </div> <!--OSAKUTSETE MOODULID--> <div ng-repeat="partOccupation in occupation.partOccupations | orderBy: \'nameEt\'" layout="column"> <div class="occupation-header2 align-center"> <span ng-class="{invalid: vocationalCurriculumForm.$submitted && strictValidation() && !occupationHasPModule(partOccupation.code)}">{{\'stateCurriculum.enter.occupation.partial\' | translate}} {{$index + 1}}: {{currentLanguageNameField(partOccupation)}}</span></div> <div layout="column" ng-repeat="type in moduleTypes | filter: filterTypesWithoutModules(partOccupation.code, curriculum.modules)" class="lowerBorder"> <div layout="row" flex="100" class="occupation-row align-center border-bottom odd"> <div flex="5" flex-xs="0">&nbsp;</div> <div flex="20" flex-xs="30">{{currentLanguageNameField(type)}} ({{getTotalCredits(curriculum.modules | filter: filterModulesByType(type.code, partOccupation.code))}} EKAP)</div> <div layout="column" flex="75" flex-xs="70"> <div flex="100" ng-repeat="module in curriculum.modules | filter: filterModulesByType(type.code, partOccupation.code) | orderBy: \'nameEt\' track by $index" layout="row" class="align-center"> <a flex="30" flex-xs="80" ng-click="openAddModuleDialog(module)" style="word-wrap: break-word" href="">{{module.baseModule ? \'* \' : \'\'}}{{currentLanguageNameField(module)}}</a> <span flex="10">{{module.credits}}&nbsp; EKAP</span> </div> </div> </div> </div> </div> <!--SPETSKUTSETE MOODULID--> <div ng-repeat="speciality in occupation.specialities | orderBy: \'nameEt\'" layout="column"> <div class="occupation-header2 align-center"><span ng-class="{invalid: vocationalCurriculumForm.$submitted && strictValidation() && (!occupationHasPModule(speciality.code) || !isSpetsOccupationValid(speciality, occupation))}">{{\'stateCurriculum.enter.occupation.specialty\' | translate}} {{$index + 1}}: {{currentLanguageNameField(speciality)}}</span></div> <div layout="column" ng-repeat="type in moduleTypes | filter: filterTypesWithoutModules(speciality.code, curriculum.modules)" class="lowerBorder"> <div layout="row" flex="100" class="occupation-row align-center border-bottom odd"> <div flex="5" flex-xs="0">&nbsp;</div> <div flex="20" flex-xs="30">{{currentLanguageNameField(type)}} ({{getTotalCredits(curriculum.modules | filter: filterModulesByType(type.code, speciality.code))}} EKAP)</div> <div layout="column" flex="75" flex-xs="70"> <div flex="100" ng-repeat="module in curriculum.modules | filter: filterModulesByType(type.code, speciality.code) | orderBy: \'nameEt\' track by $index" layout="row" class="align-center"> <a flex="30" flex-xs="80" ng-click="openAddModuleDialog(module)" style="word-wrap: break-word" href="">{{module.baseModule ? \'* \' : \'\'}}{{currentLanguageNameField(module)}}</a> <span flex="10">{{module.credits}}&nbsp; EKAP</span> </div> </div> </div> </div> </div> </div> </fieldset> <div>&nbsp;</div> <fieldset tabindex="7"> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'curriculum.additionalInfo\' | translate}}</legend> <md-input-container> <label>{{\'curriculum.optionalStudyCredits\' | translate}}</label> <input name="vocationalCredits" type="number" ng-model="curriculum.optionalStudyCredits" aria-label="optional credits" min="0" max="999" pattern="^\\d+(\\.\\d{1})?$" readonly> <div ng-messages="vocationalCurriculumForm.vocationalCredits.$error" ng-show="vocationalCurriculumForm.vocationalCredits.$dirty"> <div ng-message="min"> {{\'main.messages.error.positive\' | translate}} </div> <div ng-message="max"> {{\'curriculum.error.max999\' | translate}} </div> <div ng-message="pattern"> {{\'stateCurriculum.error.decimalPresision\' | translate}} </div> </div> </md-input-container> <div layout="column"> <md-input-container flex> <label>{{\'curriculum.practiceDescription\' | translate}}</label> <textarea ng-model="curriculum.practiceDescription" max-rows="2" readonly></textarea> </md-input-container> <md-input-container flex> <label>{{\'curriculum.finalExamShortDescription\' | translate}}</label> <textarea ng-model="curriculum.finalExamDescription" max-rows="2" readonly></textarea> </md-input-container> <md-input-container flex> <label>{{\'curriculum.optionalStudyOpportunities\' | translate}}</label> <textarea ng-model="curriculum.optionalStudyDescription" max-rows="2" readonly></textarea> </md-input-container> <md-input-container flex> <label>{{\'curriculum.contactPerson\' | translate}}</label> <input ng-model="curriculum.contactPerson" type="text" readonly> </md-input-container> <md-input-container flex> <label>{{\'main.notes\' | translate}}</label> <textarea ng-model="curriculum.description" max-rows="2" readonly></textarea> </md-input-container> <md-input-container flex ng-if="curriculum.status === STATUS.VERIFIED"> <label>{{\'public.url\' | translate}}</label> <input ng-model="publicUrl" type="text" readonly> </md-input-container> </div> </fieldset> <div ng-show="curriculum.joint">&nbsp;</div> <fieldset tabindex="8" ng-show="curriculum.joint"> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'curriculum.jointInfo\' | translate}}</legend> <div layout="column"> <div layout="row" layout-align="start start" ng-show="curriculum.joint"> <label class="md-required common-label" flex="30">{{\'curriculum.jointSchool\' | translate}}</label> </div> <div>&nbsp;</div> <div layout="column" flex ng-show="curriculum.joint" class="common-label"> <div layout="row" ng-repeat="item in curriculum.jointPartners | filter: filterEmptyJointPartners | orderBy: [\'ehisSchool\', \'nameEt\']" class="align-center"> <div flex="5">&nbsp;</div> <div ng-if="item.abroad">{{currentLanguageNameField(item)}}</div> <div ng-if="!item.abroad"> <hois-classifier-value ng-model="item.ehisSchool" main-classifier-code="EHIS_KOOL"></hois-classifier-value></div> <div flex="5">&nbsp;</div> <div flex="5"></div> </div> </div> <div layout="row" layout-sm="column" layout-xs="column" ng-show="curriculum.joint"> <md-input-container flex="30" ng-if="curriculum.joint"> <label>{{\'curriculum.jointMentor\' | translate}}</label> <hois-classifier-select ng-model="curriculum.jointMentor" main-classifier-code="EHIS_KOOL" model-value-attr="code" disabled></hois-classifier-select> </md-input-container> <md-input-container flex="66" flex-offset="4"> <label>{{\'curriculum.jointResponsible\' | translate}}</label> <input ng-model="curriculum.supervisor" type="text" readonly> </md-input-container> </div> <md-input-container flex="100"> <label>{{\'curriculum.jointAgreementInfoEt\' | translate}}</label> <textarea ng-model="curriculum.contractEt" max-rows="10" readonly></textarea> </md-input-container> <md-input-container flex="100"> <label>{{\'curriculum.jointAgreementInfoEn\' | translate}}</label> <textarea ng-model="curriculum.contractEn" max-rows="10" readonly></textarea> </md-input-container> </div> </fieldset> <div>&nbsp;</div> <fieldset tabindex="9"> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'curriculum.address\' | translate}}</legend> <div layout="column" flex class="common-label"> <div layout="row" ng-repeat="item in curriculum.addresses | orderBy: \'address\'" class="align-center"> <div>{{::item.address}}</div> </div> </div> </fieldset> <div>&nbsp;</div> <fieldset tabindex="10"> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'curriculum.approvalInfo\' | translate}}</legend> <div layout="row" flex="100"> <md-input-container flex="30" flex-sm="100" flex-xs="100"> <label>{{\'curriculum.approvalDocumentNr\' | translate}}</label> <input ng-model="curriculum.approvalDokNr" type="text" readonly> </md-input-container> <md-input-container flex="20" flex-sm="100" flex-xs="100" flex-offset-xs="0" flex-offset-sm="0" flex-offset="4"> <label>{{\'curriculum.approvalDate\' | translate}}</label> <md-datepicker ng-model="curriculum.approval" md-open-on-focus disabled></md-datepicker> </md-input-container> </div> </fieldset> <div>&nbsp;</div> <fieldset tabindex="11"> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'curriculum.statuses\' | translate}}</legend> <div style="overflow: auto"> <div layout="row" flex="100"> <md-input-container flex="30" flex-sm="100" flex-xs="100"> <label>{{\'main.validFrom\' | translate}}</label> <md-datepicker ng-model="curriculum.validFrom" md-open-on-focus disabled></md-datepicker> </md-input-container> <md-input-container flex="20" flex-sm="100" flex-xs="100" flex-offset-xs="0" flex-offset-sm="0" flex-offset="4"> <label>{{\'main.validTo\' | translate}}</label> <md-datepicker ng-model="curriculum.validThru" md-min-date="curriculum.validFrom" md-open-on-focus disabled></md-datepicker> </md-input-container> </div> <div layout="row" flex="100" class="top-margin form-readonly"> <md-input-container flex="30" flex-sm="100" flex-xs="100" class="readonly"> <label class="label">{{\'main.status\' | translate}}</label> <hois-classifier-value ng-model="curriculum.status" main-classifier-code="OPPEKAVA_STAATUS"></hois-classifier-value> </md-input-container> <md-input-container flex="20" flex-sm="100" flex-xs="100" flex-offset-xs="0" flex-offset-sm="0" flex-offset="4"> <label>{{\'curriculum.statusInEhis\' | translate}}</label> <hois-classifier-value ng-model="curriculum.ehisStatus" main-classifier-code="OPPEKAVA_EHIS_STAATUS"></hois-classifier-value> </md-input-container> <md-input-container flex="40" flex-sm="100" flex-xs="100" flex-offset-xs="0" flex-offset-sm="0" flex-offset="5"> <label>{{\'curriculum.statusChangedDateInEhis\' | translate}}</label> <hois-value value="curriculum.ehisChanged | hoisDate"></hois-value> </md-input-container> </div> <div layout="row" flex="100" class="md-body-1 hois-value"> <a ng-show="!!curriculum.stateCurriculum" ng-href="/#/stateCurriculum/{{curriculum.stateCurriculum.id}}/view" class="md-primary" translate="curriculum.referenceToStateCurriculum" translate-values="{{curriculum.stateCurriculum}}"></a> </div> </div> </fieldset> <div>&nbsp;</div> <fieldset tabindex="12"> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'main.relatedFiles\' | translate}}</legend> <md-table-container> <table md-table class="secondary-table"> <thead md-head> <tr md-row> <th md-column><span>{{\'file.nameAndFile\' | translate}}</span></th> <th md-column><span>{{\'file.creationLocation\' | translate}}</span></th> <th md-column>{{\'file.type\' | translate}}</th> <th md-column>{{\'curriculum.sendToEhis\' | translate}}</th> <th md-column></th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="file in curriculum.files | orderBy: \'oisFile.fname\'" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell> {{file.oisFile.fname}} <a ng-href="{{getUrl(file, \'curriculum\')}}" download><md-icon md-font-set="material-icons">file_download</md-icon></a> </td> <td md-cell> {{file.ehis ? \'EHIS\' : \'ÕIS\'}} </td> <td md-cell> <hois-classifier-value ng-model="file.ehisFile" main-classifier-code="EHIS_FAIL"></hois-classifier-value> </td> <td md-cell> <md-checkbox ng-model="file.sendEhis" aria-label="send to ehis" disabled></md-checkbox> </td> <td md-cell> </td> </tr> </tbody> </table> </md-table-container> </fieldset> <div>&nbsp;</div> <fieldset tabindex="13"> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'curriculum.moduleImplementationPlans\' | translate}}</legend> <md-table-container> <table md-table class="secondary-table"> <thead md-head> <tr md-row> <th md-column>{{\'module.implementationPlan.code\' | translate}}</th> <th md-column>{{\'main.status\' | translate}}</th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="moduleImplementationPlan in curriculum.versions | orderBy: \'code\'"> <td md-cell> <a href="" class="md-primary" ng-click="goToImplementationPlanForm(moduleImplementationPlan)">{{moduleImplementationPlan.code}}</a> </td> <td md-cell><hois-classifier-value ng-model="moduleImplementationPlan.status" main-classifier-code="OPPEKAVA_VERSIOON_STAATUS"></hois-classifier-value></td> </tr> </tbody> </table> </md-table-container> </fieldset> <hois-created-modified object="curriculum"></hois-created-modified> <div> </div> </form> <div layout="row"> <div flex layout-xs="column"> <span ng-show="curriculum.status === STATUS.ENTERING" layout-xs="column"> <md-button class="md-raised md-primary" ng-click="goToEditForm()" ng-if="curriculum.canChange">{{\'main.button.change\' | translate}}</md-button> </span> <span ng-show="curriculum.status === STATUS.PROCEEDING && !formState.sentToEhis" layout-xs="column"> <md-button class="md-raised md-primary" ng-click="goToEditForm()" ng-if="curriculum.canChange">{{\'main.button.change\' | translate}}</md-button> <md-button class="md-raised md-default" ng-click="sendToEhis(true)" ng-if="curriculum.canConfirm">{{\'curriculum.button.sendToEhisTest\' | translate}}</md-button> <md-button class="md-raised md-default" ng-click="sendToEhis(false)" ng-if="curriculum.canConfirm">{{\'curriculum.button.sendToEhis\' | translate}}</md-button> <md-button class="md-raised" ng-click="setStatusClosed()" ng-if="curriculum.canClose">{{\'main.button.status.close\' | translate}}</md-button> </span> <span ng-show="curriculum.status === STATUS.PROCEEDING && formState.sentToEhis" layout-xs="column"> <md-button class="md-raised md-default" ng-click="updateFromEhis(true)" ng-if="curriculum.canConfirm">{{\'curriculum.button.updateFromEhisTest\' | translate}}</md-button> <md-button class="md-raised md-default" ng-click="updateFromEhis(false)" ng-if="curriculum.canConfirm">{{\'curriculum.button.updateFromEhis\' | translate}}</md-button> </span> <span ng-show="curriculum.status === STATUS.VERIFIED" layout-xs="column"> <md-button class="md-raised md-primary" ng-click="goToEditForm()" ng-if="curriculum.canChange">{{\'main.button.change\' | translate}}</md-button> <md-button class="md-raised" ng-click="setStatusClosed()" ng-if="curriculum.canClose">{{\'main.button.status.close\' | translate}}</md-button> </span> <a href="{{curriculumPdfUrl}}" target="_blank" class="md-button md-raised" ng-if="showPrintButton()">{{\'main.button.printGeneral\' | translate}}</a> <a href="{{curriculumModulesPdfUrl}}" target="_blank" class="md-button md-raised" ng-if="showPrintButton()">{{\'main.button.printModules\' | translate}}</a> <a href="{{curriculumCompetencesPdfUrl}}" target="_blank" class="md-button md-raised" ng-if="showPrintButton()">{{\'main.button.printCompetences\' | translate}}</a> <md-button class="md-raised md-default" ng-click="back(\'#/curriculum\')">{{\'main.button.back\' | translate}}</md-button> </div> </div> </div> <style>.lowerBorder {\r\n     border-bottom: solid 1px #E0E0E0;\r\n   }</style>'),a.put("apelApplication/templates/apel.application.formal.learning.higher.list.html",'<md-table-container ng-if="application.records.length > 0"> <table md-table md-progress="tabledata.$promise" class="secondary-table"> <thead md-head md-on-reorder="loadData"> <tr md-row> <th md-column ng-if="!(application.status === \'VOTA_STAATUS_K\')" colspan="1">{{\'apel.formalLearnings.transfer\' | translate}}</th> <th md-column>{{\'apel.formalLearnings.school\' | translate}}</th> <th md-column>{{\'apel.formalLearnings.subject\' | translate}} ({{\'apel.formalLearnings.code\' | translate}})</th> <th md-column>{{\'apel.formalLearnings.creditsEAP\' | translate}}</th> <th md-column>{{\'apel.formalLearnings.assessment\' | translate}}</th> <th md-column>{{\'apel.formalLearnings.result\' | translate}}</th> <th md-column>{{\'apel.formalLearnings.resultDate\' | translate}}</th> <th md-column>{{auth.higher ? (\'apel.formalLearnings.teacherHigher\' | translate) : (\'apel.formalLearnings.teacherVocational\' | translate)}}</th> <th md-column>{{\'apel.formalLearnings.module\' | translate}} ({{\'apel.formalLearnings.required\' | translate}})</th> <th md-column>{{\'apel.formalLearnings.substitutableSubjects\' | translate}}</th> <th md-column ng-if="editing"></th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="row in application.records | filter:{isFormalLearning: true}" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell ng-if="!(application.status === \'VOTA_STAATUS_K\')"> <md-checkbox ng-if="(row.data[0].transfer === false || row.data[0].transfer === true) && canChangeTransferStatus" ng-model="row.data[0].transfer" ng-click="changeFormalTransferStatus(row.data[0])" aria-label="{{\'apel.formalLearnings.transfer\' | translate}}"></md-checkbox> <md-checkbox ng-if="(row.data[0].transfer === false || row.data[0].transfer === true) && !canChangeTransferStatus" ng-model="row.data[0].transfer" ng-click="changeFormalTransferStatus(row.data[0])" aria-label="{{\'apel.formalLearnings.transfer\' | translate}}" ng-disabled="true"></md-checkbox> </td> <td md-cell>{{currentLanguageNameField(row.data[0].school)}}</td> <td md-cell>{{currentLanguageNameField(row.data[0].subject)}} ({{row.data[0].code}})</td> <td md-cell>{{row.data[0].credits}}</td> <td md-cell>{{row.data[0].assessment.value}}</td> <td md-cell>{{auth.school.letterGrades ? row.data[0].grade.value2 : row.data[0].grade.value}}</td> <td md-cell>{{row.data[0].gradeDate | hoisDate}}</td> <td md-cell>{{row.data[0].teachers}}</td> <td md-cell> <span ng-if="row.data[0].isOptional === false">{{currentLanguageNameField(row.data[0].module)}} ({{\'main.yes\' | translate}})</span> <span ng-if="row.data[0].isOptional === true">{{currentLanguageNameField(row.data[0].module)}} ({{\'main.no\' | translate}})</span> </td> <td md-cell> <p ng-repeat="replacedSubjectOrModule in row.data[0].formalReplacedSubjectsOrModules">{{currentLanguageNameField(replacedSubjectOrModule.subject)}} ({{replacedSubjectOrModule.subject.code}})</p> </td> <td md-cell ng-if="editing"> <md-button md-no-ink class="md-primary change-button" ng-click="editFormalLearning(row.data[0].recordId)">{{\'main.button.change\' | translate}}</md-button> </td> </tr> </tbody> </table> </md-table-container>'),
a.put("apelApplication/templates/apel.application.formal.learning.vocational.list.html",'<md-table-container> <table md-table md-progress="tabledata.$promise" class="secondary-table"> <thead md-head md-on-reorder="loadData"> <tr md-row style="background: #E0E0E0 !important"> <th md-column ng-if="editing" colspan="1"> <a ng-click="editFormalLearning(record.id)">{{\'main.button.change\' | translate}}</a> </th> <th md-column ng-if="editing && application.status === \'VOTA_STAATUS_K\'" colspan="5" style="text-align: center">{{\'apel.formalLearnings.transferableModules\' | translate}}</th> <th md-column ng-if="!editing && application.status === \'VOTA_STAATUS_K\'" colspan="6" style="text-align: center">{{\'apel.formalLearnings.transferableModules\' | translate}}</th> <th md-column ng-if="!(application.status === \'VOTA_STAATUS_K\') && editing" colspan="6" style="text-align: center">{{\'apel.formalLearnings.transferableModules\' | translate}}</th> <th md-column ng-if="!(application.status === \'VOTA_STAATUS_K\') && !editing" colspan="7" style="text-align: center">{{\'apel.formalLearnings.transferableModules\' | translate}}</th> <th md-column style="border-left: 1px rgba(0, 0, 0, 0.12) solid"></th> <th md-column colspan="2" style="text-align: center">{{\'apel.formalLearnings.substitutableModules\' | translate}}</th> </tr> <tr md-row> <th md-column ng-if="!(application.status === \'VOTA_STAATUS_K\')">{{\'apel.formalLearnings.transfer\' | translate}}</th> <th md-column>{{\'apel.formalLearnings.school\' | translate}}</th> <th md-column>{{\'apel.formalLearnings.module\' | translate}}</th> <th md-column>{{\'apel.formalLearnings.creditsEKAP\' | translate}}</th> <th md-column>{{\'apel.formalLearnings.result\' | translate}}</th> <th md-column>{{\'apel.formalLearnings.resultDate\' | translate}}</th> <th md-column>{{auth.higher ? (\'apel.formalLearnings.teacherHigher\' | translate) : (\'apel.formalLearnings.teacherVocational\' | translate)}}</th> <th md-column style="border-left: 1px rgba(0, 0, 0, 0.12) solid"></th> <th md-column>{{\'apel.formalLearnings.module\' | translate}}</th> <th md-column>{{\'apel.formalLearnings.creditsEKAP\' | translate}}</th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="row in record.data | orderBy:\'moduleId\'" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell ng-if="!(application.status === \'VOTA_STAATUS_K\')"> <md-checkbox ng-if="(row.transfer === false || row.transfer === true) && canChangeTransferStatus" ng-model="row.transfer" ng-click="changeFormalTransferStatus(row)" aria-label="{{\'apel.formalLearnings.transfer\' | translate}}"></md-checkbox> <md-checkbox ng-if="(row.transfer === false || row.transfer === true) && !canChangeTransferStatus" ng-model="row.transfer" ng-click="changeFormalTransferStatus(row)" aria-label="{{\'apel.formalLearnings.transfer\' | translate}}" ng-disabled="true"></md-checkbox> </td> <td md-cell>{{currentLanguageNameField(row.school)}}</td> <td md-cell>{{currentLanguageNameField(row.module)}}</td> <td md-cell>{{row.credits}}</td> <td md-cell>{{row.grade.value}}</td> <td md-cell>{{row.gradeDate | hoisDate}}</td> <td md-cell>{{row.teachers}}</td> <td md-cell style="border-left: 1px rgba(0, 0, 0, 0.12) solid"></td> <td md-cell>{{currentLanguageNameField(row.replacedModule)}}</td> <td md-cell>{{row.replacedCredits}}</td> </tr> </tbody> </table> </md-table-container>'),a.put("apelApplication/templates/apel.application.informal.learning.higher.list.html",'<md-table-container flex="100"> <table md-table md-progress="tabledata.$promise" class="secondary-table"> <thead md-head md-on-reorder="loadData"> <tr md-row style="background: #E0E0E0 !important"> <th md-column ng-if="editing" colspan="1"> <a ng-click="editInformalLearning(record.id)">{{\'main.button.change\' | translate}}</a> </th> <th md-column ng-if="editing && application.status === \'VOTA_STAATUS_K\'" colspan="4" style="text-align: center">{{\'apel.informalLearnings.schoolResults\' | translate}}</th> <th md-column ng-if="!editing && application.status === \'VOTA_STAATUS_K\'" colspan="5" style="text-align: center">{{\'apel.informalLearnings.schoolResults\' | translate}}</th> <th md-column ng-if="!(application.status === \'VOTA_STAATUS_K\') && editing" colspan="5" style="text-align: center">{{\'apel.informalLearnings.schoolResults\' | translate}}</th> <th md-column ng-if="!(application.status === \'VOTA_STAATUS_K\') && !editing" colspan="6" style="text-align: center">{{\'apel.informalLearnings.schoolResults\' | translate}}</th> <th md-column style="border-left: 1px rgba(0, 0, 0, 0.12) solid"></th> <th md-column colspan="5" style="text-align: center">{{\'apel.informalLearnings.otherInformalLearnings\' | translate}}</th> </tr> <tr md-row> <th md-column ng-if="!(application.status === \'VOTA_STAATUS_K\')" colspan="1">{{\'apel.informalLearnings.transfer\' | translate}}</th> <th md-column>{{\'apel.informalLearnings.subject\' | translate}} ({{\'apel.informalLearnings.code\' | translate}})</th> <th md-column>{{\'apel.informalLearnings.creditsEAP\' | translate}}</th> <th md-column>{{\'apel.informalLearnings.result\' | translate}}</th> <th md-column>{{\'apel.informalLearnings.module\' | translate}} ({{\'apel.informalLearnings.required\' | translate}})</th> <th md-column>{{\'apel.informalLearnings.acquiredSkills\' | translate}}</th> <th md-column style="border-left: 1px rgba(0, 0, 0, 0.12) solid"></th> <th md-column>{{\'apel.informalLearnings.name\' | translate}}</th> <th md-column>{{\'apel.informalLearnings.placeTime\' | translate}}</th> <th md-column>{{\'apel.informalLearnings.hours\' | translate}}</th> <th md-column>{{\'apel.informalLearnings.documents\' | translate}}</th> <th md-column>{{\'apel.informalLearnings.type\' | translate}}</th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="row in record.data | orderBy:\'subjectId\'" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell ng-if="!(application.status === \'VOTA_STAATUS_K\')"> <md-checkbox ng-if="(row.transfer === false || row.transfer === true) && canChangeTransferStatus" ng-model="row.transfer" ng-click="changeInformalTransferStatus(row)" aria-label="{{\'apel.informalLearnings.transfer\' | translate}}"></md-checkbox> <md-checkbox ng-if="(row.transfer === false || row.transfer === true) && !canChangeTransferStatus" ng-model="row.transfer" ng-click="changeInformalTransferStatus(row)" aria-label="{{\'apel.informalLearnings.transfer\' | translate}}" ng-disabled="true"></md-checkbox> </td> <td md-cell> <span ng-if="row.subject">{{currentLanguageNameField(row.subject)}} ({{row.code}})</span> </td> <td md-cell>{{row.credits}}</td> <td md-cell>{{auth.school.letterGrades ? row.grade.value2 : row.grade.value}}</td> <td md-cell> <span ng-if="row.isOptional === false">{{currentLanguageNameField(row.module)}} ({{\'main.yes\' | translate}})</span> <span ng-if="row.isOptional === true">{{currentLanguageNameField(row.module)}} ({{\'main.no\' | translate}})</span> </td> <td md-cell>{{row.skills}}</td> <td md-cell style="border-left: 1px rgba(0, 0, 0, 0.12) solid"></td> <td md-cell>{{row.nameEt}}</td> <td md-cell>{{row.placeTime}}</td> <td md-cell>{{row.hours}}</td> <td md-cell>{{row.documents}}</td> <td md-cell> <hois-classifier-value ng-model="row.type" main-classifier-code="VOTA_INFORMAAL_LIIK"></hois-classifier-value> </td> </tr> </tbody> </table> </md-table-container>'),a.put("apelApplication/templates/apel.application.informal.learning.vocational.list.html",'<md-table-container flex="100"> <table md-table md-progress="tabledata.$promise" class="secondary-table"> <thead md-head md-on-reorder="loadData"> <tr md-row style="background: #E0E0E0 !important"> <th md-column ng-if="editing" colspan="1"> <a ng-click="editInformalLearning(record.id)">{{\'main.button.change\' | translate}}</a> </th> <th md-column ng-if="editing && application.status === \'VOTA_STAATUS_K\'" colspan="5" style="text-align: center">{{\'apel.informalLearnings.transferableModules\' | translate}}</th> <th md-column ng-if="!editing && application.status === \'VOTA_STAATUS_K\'" colspan="6" style="text-align: center">{{\'apel.informalLearnings.transferableModules\' | translate}}</th> <th md-column ng-if="!(application.status === \'VOTA_STAATUS_K\') && editing" colspan="6" style="text-align: center">{{\'apel.informalLearnings.transferableModules\' | translate}}</th> <th md-column ng-if="!(application.status === \'VOTA_STAATUS_K\') && !editing" colspan="7" style="text-align: center">{{\'apel.informalLearnings.transferableModules\' | translate}}</th> <th md-column style="border-left: 1px rgba(0, 0, 0, 0.12) solid"></th> <th md-column colspan="5" style="text-align: center">{{\'apel.informalLearnings.otherInformalLearnings\' | translate}}</th> </tr> <tr md-row> <th md-column ng-if="!(application.status === \'VOTA_STAATUS_K\')">{{\'apel.informalLearnings.transfer\' | translate}}</th> <th md-column>{{\'apel.informalLearnings.module\' | translate}}/{{\'apel.informalLearnings.theme\' | translate}}</th> <th md-column>{{\'apel.informalLearnings.isModule\' | translate}}</th> <th md-column>{{\'apel.informalLearnings.hours\' | translate}}/{{\'apel.informalLearnings.ekap\' | translate}}</th> <th md-column>{{\'apel.informalLearnings.result\' | translate}}</th> <th md-column>{{\'apel.informalLearnings.outcomes\' | translate}}</th> <th md-column>{{\'apel.informalLearnings.acquiredSkills\' | translate}}</th> <th md-column style="border-left: 1px rgba(0, 0, 0, 0.12) solid"></th> <th md-column>{{\'apel.informalLearnings.name\' | translate}}</th> <th md-column>{{\'apel.informalLearnings.placeTime\' | translate}}</th> <th md-column>{{\'apel.informalLearnings.hours\' | translate}}</th> <th md-column>{{\'apel.informalLearnings.documents\' | translate}}</th> <th md-column>{{\'apel.informalLearnings.type\' | translate}}</th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="row in record.data | orderBy:\'moduleId\'" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell ng-if="!(application.status === \'VOTA_STAATUS_K\')"> <md-checkbox ng-if="(row.transfer === false || row.transfer === true) && canChangeTransferStatus" ng-model="row.transfer" ng-click="changeInformalTransferStatus(row)" aria-label="{{\'apel.informalLearnings.transfer\' | translate}}"></md-checkbox> <md-checkbox ng-if="(row.transfer === false || row.transfer === true) && !canChangeTransferStatus" ng-model="row.transfer" ng-click="changeInformalTransferStatus(row)" aria-label="{{\'apel.informalLearnings.transfer\' | translate}}" ng-disabled="true"></md-checkbox> </td> <td md-cell> <span ng-if="row.module && row.isModule">{{currentLanguageNameField(row.module)}}</span> <span ng-if="row.module && !row.isModule">{{currentLanguageNameField(row.module)}}/{{currentLanguageNameField(row.theme)}}</span> </td> <td md-cell> <md-checkbox ng-if="row.isModule === true || row.isModule === false" ng-model="row.isModule" aria-label="{{\'apel.informalLearnings.isModule\' | translate}}" ng-disabled="true"></md-checkbox> </td> <td ng-if="row.ekap" md-cell>{{row.schoolResultHours}}/{{row.ekap}}</td> <td ng-if="!row.ekap" md-cell>{{row.schoolResultHours}}</td> <td md-cell>{{row.grade.value}}</td> <td md-cell> <ul ng-repeat="outcome in row.outcomes | orderBy: [\'curriculumModuleOutcomes.orderNr\', \'curriculumModuleOutcomes.\' + currentLanguage() === \'en\' ? outcomeEn : outcomeEt]" style="padding-left: 15px"> <li>{{currentLanguage() === \'en\' ? outcome.curriculumModuleOutcomes.outcomeEn : outcome.curriculumModuleOutcomes.outcomeEt}}</li> </ul> </td> <td md-cell>{{row.skills}}</td> <td md-cell style="border-left: 1px rgba(0, 0, 0, 0.12) solid"></td> <td md-cell>{{row.nameEt}}</td> <td md-cell>{{row.placeTime}}</td> <td md-cell>{{row.hours}}</td> <td md-cell>{{row.documents}}</td> <td md-cell> <hois-classifier-value ng-model="row.type" main-classifier-code="VOTA_INFORMAAL_LIIK"></hois-classifier-value> </td> </tr> </tbody> </table> </md-table-container>'),a.put("apelApplication/templates/apel.application.information.html",'<div class="form-readonly"> <div flex> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="45" flex-sm="100" flex-xs="100"> <label>{{\'apel.student\' | translate}}</label> <hois-value value="application.person.firstname + \' \' + application.person.lastname"></hois-value> </md-input-container> <md-input-container flex="45" flex-sm="100" flex-xs="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label ng-if="application.isVocational">{{\'apel.curriculumVersionVocational\' | translate}}</label> <label ng-if="!application.isVocational">{{\'apel.curriculumVersionHigher\' | translate}}</label> <hois-value value="currentLanguageNameField(application.curriculumVersion)"></hois-value> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="20" flex-sm="100" flex-xs="100"> <label>{{\'apel.insertedDate\' | translate}}</label> <hois-value value="application.inserted | hoisDate"></hois-value> </md-input-container> <md-input-container flex="20" flex-sm="100" flex-xs="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'apel.inserter\' | translate}}</label> <hois-value value="application.insertedBy"></hois-value> </md-input-container> <md-input-container flex="20" flex-sm="100" flex-xs="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'apel.confirmedDate\' | translate}}</label> <hois-value value="application.confirmed | hoisDate"></hois-value> </md-input-container> <md-input-container flex="20" flex-sm="100" flex-xs="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'apel.confirmer\' | translate}}</label> <hois-value value="application.confirmedBy"></hois-value> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="45" flex-sm="100" flex-xs="100"> <label>{{\'apel.status\' | translate}}</label> <hois-classifier-value ng-model="application.status" main-classifier-code="VOTA_STAATUS"></hois-classifier-value> </md-input-container> </div> </div> </div>'),a.put("apelApplication/templates/comment.edit.dialog.html",'<md-dialog aria-label="comment edit dialog" flex="50" flex-sm="50" flex-xs="100"> <form name="dialogForm" novalidate ng-cloak> <md-toolbar> <div class="md-toolbar-tools"> <h2>{{"apel.addInfo.add" | translate}}</h2> <span flex></span> <md-button class="md-icon-button" ng-click="cancel()"> <md-icon md-font-set="material-icons">close</md-icon> </md-button> </div> </md-toolbar> <md-dialog-content> <span flex></span> <div class="ois-form-layout" layout="column" layout-margin ng-cloak> <div layout="column" flex> <md-input-container flex> <label>{{\'apel.addInfo.label\' | translate}}</label> <textarea ng-model="comment.addInfo" md-maxlength="4000" max-rows="5" required md-autofocus></textarea> </md-input-container> </div> </div> </md-dialog-content> <span flex></span> <md-dialog-actions layout="row" layout-align="start center"> <md-button class="md-raised" ng-click="submit()">{{"main.button.save" | translate}}</md-button> <md-button class="md-raised" ng-click="cancel()">{{"main.button.close" | translate}}</md-button> </md-dialog-actions> </form> </md-dialog>'),a.put("apelApplication/templates/formal.learning.higher.edit.dialog.html",'<md-dialog aria-label="formal learning edit dialog" flex="60" flex-sm="80" flex-xs="100"> <form name="dialogForm" ng-submit="dialogForm.$valid && submitHigherFormalLearning()" novalidate ng-cloak> <md-toolbar> <div class="md-toolbar-tools"> <h2>{{"apel.formalLearnings.add" | translate}}</h2> <span flex></span> <md-button class="md-icon-button" ng-click="cancel()"> <md-icon md-font-set="material-icons">close</md-icon> </md-button> </div> </md-toolbar> <md-dialog-content> <div layout-padding> <fieldset> <legend class="md-title-small">{{\'apel.formalLearnings.transferableSubjectEt\' | translate}}</legend> <div layout="row" layout-xs="column" flex> <div flex="100"> <div class="form-readonly" layout="row" layout-sm="column" layout-xs="column"> <md-input-container> <md-radio-group layout-gt-sm="row" ng-model="formState.isMySchool"> <md-radio-button ng-value="true" aria-label="iternalTransfer"> {{\'apel.formalLearnings.iternalTransfer\' | translate}} </md-radio-button> <md-radio-button ng-value="false" aria-label="externalTransfer"> {{\'apel.formalLearnings.externalTransfer\' | translate}} </md-radio-button> </md-radio-group> </md-input-container> </div> <div ng-if="formState.isMySchool" layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="45" flex-sm="100" flex-xs="100"> <label>{{\'apel.formalLearnings.schoolNameEt\' | translate}}</label> <input type="text" ng-model="record.school.nameEt" disabled required> </md-input-container> <md-input-container flex="45" flex-sm="100" flex-xs="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'apel.formalLearnings.schoolNameEn\' | translate}}</label> <input type="text" ng-model="record.school.nameEn" disabled> </md-input-container> </div> <div ng-if="!formState.isMySchool && !formState.isNewSchool" layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="45" flex-sm="100" flex-xs="100"> <label>{{\'apel.formalLearnings.schoolNameEt\' | translate}}</label> <md-select ng-model="record.newTransferableSubjectOrModule.apelSchool" aria-label="apelSchool" ng-change="apelSchoolChanged(record.newTransferableSubjectOrModule.apelSchool)" ng-model-options="{trackBy: \'$value.id\'}" required> <md-option ng-repeat="val in apelSchools" ng-value="val">{{currentLanguageNameField(val)}}</md-option> </md-select> </md-input-container> <md-input-container flex="45" flex-sm="100" flex-xs="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'apel.formalLearnings.schoolCountry\' | translate}}</label> <input type="text" value="{{currentLanguageNameField(record.newTransferableSubjectOrModule.country)}}" disabled required> </md-input-container> </div> <div ng-if="!formState.isMySchool"> <md-input-container ng-if="!formState.isNewSchool"> <md-button ng-click="addNewSchool()" class="md-raised">{{\'apel.formalLearnings.addNewSchool\' | translate}}</md-button> </md-input-container> <fieldset ng-if="formState.isNewSchool"> <legend class="md-title-small">{{\'apel.formalLearnings.newSchool\' | translate}}</legend> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="45" flex-sm="100" flex-xs="100"> <label>{{\'apel.formalLearnings.schoolCountry\' | translate}}</label> <hois-classifier-select ng-model="record.newTransferableSubjectOrModule.newApelSchool.country" aria-label="country" model-value-attr="code" main-classifier-code="RIIK" ng-change="newSchoolCountryChanged(record.newTransferableSubjectOrModule.newApelSchool.country)" required></hois-classifier-select> </md-input-container> <md-input-container ng-if="newSchoolEst" flex="45" flex-sm="100" flex-xs="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'apel.formalLearnings.schoolEHIS\' | translate}}</label> <hois-classifier-select ng-model="record.newTransferableSubjectOrModule.newApelSchool.ehisSchool" aria-label="EHIS" model-value-attr="code" main-classifier-code="EHIS_KOOL" ng-change="ehisSchoolChanged(record.newTransferableSubjectOrModule.newApelSchool.ehisSchool)" required></hois-classifier-select> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container ng-if="record.newTransferableSubjectOrModule.newApelSchool.country" flex="45" flex-sm="100" flex-xs="100"> <label>{{\'apel.formalLearnings.schoolNameEt\' | translate}}</label> <input type="text" ng-model="record.newTransferableSubjectOrModule.newApelSchool.nameEt" ng-disabled="formState.isMySchool" md-maxlength="100" required> </md-input-container> <md-input-container ng-if="record.newTransferableSubjectOrModule.newApelSchool.country" flex="45" flex-sm="100" flex-xs="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'apel.formalLearnings.schoolNameEn\' | translate}}</label> <input type="text" ng-model="record.newTransferableSubjectOrModule.newApelSchool.nameEn" ng-disabled="formState.isMySchool" md-maxlength="100"> </md-input-container> </div> </fieldset> </div> <div ng-if="formState.isMySchool" layout="row" layout-sm="column" layout-xs="column"> <md-input-container> <md-radio-group layout-gt-sm="row" ng-model="record.newTransferableSubjectOrModule.type" ng-change="typeChanged(record.newTransferableSubjectOrModule.type)" required> <md-radio-button value="VOTA_AINE_LIIK_V" aria-label="passedSubject"> {{\'apel.formalLearnings.passedSubject\' | translate}} </md-radio-button> <md-radio-button value="VOTA_AINE_LIIK_O" aria-label="curriculumSubject"> {{\'apel.formalLearnings.curriculumSubject\' | translate}} </md-radio-button> <md-radio-button value="VOTA_AINE_LIIK_M" aria-label="otherSubject"> {{\'apel.formalLearnings.otherSubject\' | translate}} </md-radio-button> </md-radio-group> </md-input-container> </div> <div ng-if="formState.isMySchool" layout="row" layout-sm="column" layout-xs="column"> <md-input-container ng-if="record.newTransferableSubjectOrModule.type !== \'VOTA_AINE_LIIK_M\'" flex="45" flex-sm="100" flex-xs="100"> <label>{{\'apel.formalLearnings.transferableSubjectEt\' | translate}}</label> <md-select ng-model="record.subject" aria-label="subject" ng-change="subjectChanged(record.subject)" ng-model-options="{trackBy: \'$value.id\'}" required> <md-option ng-repeat="val in transferableSubjects" ng-value="val">{{currentLanguageNameField(val)}}</md-option> </md-select> </md-input-container> <hois-autocomplete ng-if="record.newTransferableSubjectOrModule.type === \'VOTA_AINE_LIIK_M\'" flex="45" flex-sm="100" flex-xs="100" ng-model="record.subject" method="subjects" name="subject" label="apel.formalLearnings.transferableSubjectEt" additional-query-params="{student: student.id, curriculumSubjects: false, curriculumVersion: curriculumVersionId, withCredits: false}" md-selected-item-change="subjectChanged(record.subject)" ng-model-options="{ debounce: 500 }" required> </hois-autocomplete> <md-input-container flex="45" flex-sm="100" flex-xs="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'apel.formalLearnings.transferableSubjectEn\' | translate}}</label> <input type="text" value="{{record.newTransferableSubjectOrModule.subject.nameEn}}" disabled required> </md-input-container> </div> <div ng-if="!formState.isMySchool" layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="45" flex-sm="100" flex-xs="100"> <label>{{\'apel.formalLearnings.transferableSubjectEt\' | translate}}</label> <input type="text" ng-model="record.newTransferableSubjectOrModule.nameEt" md-maxlength="255" required> </md-input-container> <md-input-container flex="45" flex-sm="100" flex-xs="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'apel.formalLearnings.transferableSubjectEn\' | translate}}</label> <input type="text" ng-model="record.newTransferableSubjectOrModule.nameEn" md-maxlength="255" required> </md-input-container> </div> <div ng-if="formState.isMySchool" layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="45" flex-sm="100" flex-xs="100"> <label>{{\'apel.formalLearnings.subjectCode\' | translate}}</label> <input type="text" value="{{record.newTransferableSubjectOrModule.subjectCode}}" disabled> </md-input-container> <md-input-container flex="45" flex-sm="100" flex-xs="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'apel.formalLearnings.subjectCredits\' | translate}} ({{\'apel.formalLearnings.EAP\' | translate}})</label> <input type="text" value="{{record.newTransferableSubjectOrModule.credits}}" disabled required> </md-input-container> </div> <div ng-if="!formState.isMySchool" layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="45" flex-sm="100" flex-xs="100"> <label>{{\'apel.formalLearnings.subjectCode\' | translate}}</label> <input type="text" ng-model="record.newTransferableSubjectOrModule.subjectCode" md-maxlength="20"> </md-input-container> <md-input-container flex="45" flex-sm="100" flex-xs="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'apel.formalLearnings.subjectCredits\' | translate}} ({{\'apel.formalLearnings.EAP\' | translate}})</label> <input type="number" ng-model="record.newTransferableSubjectOrModule.credits" ng-min="0" ng-max="999.9" required> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container ng-if="formState.isMySchool" flex="45" flex-sm="100" flex-xs="100"> <label>{{\'apel.formalLearnings.assessmentType\' | translate}}</label> <input ng-if="formState.isMySchool" value="{{currentLanguageNameField(record.assessment)}}" disabled> </md-input-container> <md-input-container ng-if="!formState.isMySchool" flex="45" flex-sm="100" flex-xs="100"> <label>{{\'apel.formalLearnings.assessmentType\' | translate}}</label> <hois-classifier-select ng-model="record.newTransferableSubjectOrModule.assessment" aria-label="assessment" model-value-attr="code" main-classifier-code="HINDAMISVIIS" ng-change="assessmentTypeChanged(record.newTransferableSubjectOrModule.assessment)" required></hois-classifier-select> </md-input-container> <md-input-container ng-if="record.newTransferableSubjectOrModule.type !== \'VOTA_AINE_LIIK_V\'" flex="45" flex-sm="100" flex-xs="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'apel.formalLearnings.result\' | translate}}</label> <hois-select ng-model="record.newTransferableSubjectOrModule.grade" values="grades" value-property="code" show-property="{{auth.school.letterGrades ? \'value2\' : \'value\'}}" aria-label="grade" required></hois-select> </md-input-container> <md-input-container ng-if="record.newTransferableSubjectOrModule.type === \'VOTA_AINE_LIIK_V\'" flex="45" flex-sm="100" flex-xs="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'apel.formalLearnings.result\' | translate}}</label> <input value="{{gradeValue(record.newTransferableSubjectOrModule.grade)}}" disabled> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container ng-if="record.newTransferableSubjectOrModule.type !== \'VOTA_AINE_LIIK_V\'" flex="45" flex-sm="100" flex-xs="100"> <label>{{\'apel.formalLearnings.resultDate\' | translate}}</label> <md-datepicker ng-model="record.newTransferableSubjectOrModule.gradeDate" md-max-date="currentDate" md-open-on-focus></md-datepicker> </md-input-container> <md-input-container ng-if="record.newTransferableSubjectOrModule.type === \'VOTA_AINE_LIIK_V\'" flex="45" flex-sm="100" flex-xs="100"> <label>{{\'apel.formalLearnings.resultDate\' | translate}}</label> <input value="{{record.newTransferableSubjectOrModule.gradeDate | hoisDate}}" disabled> </md-input-container> <md-input-container ng-if="record.newTransferableSubjectOrModule.type === \'VOTA_AINE_LIIK_V\'" flex="45" flex-sm="100" flex-xs="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{auth.higher ? (\'apel.formalLearnings.teachersHigher\' | translate) : (\'apel.formalLearnings.teachersVocational\' | translate)}}</label> <input type="text" value="{{record.newTransferableSubjectOrModule.teachers}}" disabled> </md-input-container> <md-input-container ng-if="record.newTransferableSubjectOrModule.type !== \'VOTA_AINE_LIIK_V\'" flex="45" flex-sm="100" flex-xs="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{auth.higher ? (\'apel.formalLearnings.teachersHigher\' | translate) : (\'apel.formalLearnings.teachersVocational\' | translate)}}</label> <input type="text" ng-model="record.newTransferableSubjectOrModule.teachers" md-maxlength="255"> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="45" flex-sm="100" flex-xs="100"> <label>{{\'apel.formalLearnings.module\' | translate}}</label> <md-select ng-model="record.newTransferableSubjectOrModule.curriculumVersionHmodule" aria-label="module" ng-model-options="{trackBy: \'$value.id\'}" required> <md-option ng-repeat="val in curriculumModules" ng-value="val">{{currentLanguageNameField(val)}}</md-option> </md-select> </md-input-container> <md-input-container flex="45" flex-sm="100" flex-xs="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <md-checkbox ng-model="record.newTransferableSubjectOrModule.isOptional" ng-true-value="false" ng-false-value="true" aria-label="required"> {{\'apel.formalLearnings.required\' | translate}} </md-checkbox> </md-input-container> </div> </div> </div> </fieldset> <br> <fieldset> <legend ng-class="{invalid: dialogForm.$submitted && (!record.formalReplacedSubjectsOrModules || record.formalReplacedSubjectsOrModules.length === 0)}" class="md-title-small">{{\'apel.formalLearnings.substitutableSubjects\' | translate}}</legend> <div flex="50"> <md-input-container style="width: 100%"> <label>{{\'apel.formalLearnings.substitutableSubject\' | translate}}</label> <md-select ng-model="selectedSubject" aria-label="substitutableSubjects" ng-change="addSelectedSubject()"> <md-option ng-repeat="val in subjects" ng-value="val">{{currentLanguageNameField(val)}}</md-option> </md-select> </md-input-container> <md-table-container> <table md-table class="secondary-table"> <tbody md-body> <tr md-row ng-repeat="replacedSubjectOrModule in record.formalReplacedSubjectsOrModules" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell ng-if="!replacedSubjectOrModule.subject.code">{{currentLanguageNameField(replacedSubjectOrModule.subject)}}</td> <td md-cell ng-if="replacedSubjectOrModule.subject.code">{{currentLanguageNameField(replacedSubjectOrModule.subject)}} ({{replacedSubjectOrModule.subject.code}})</td> <td md-cell> <a class="remove nomargin" ng-click="removeSubtitutableSubject(replacedSubjectOrModule)">&times;</a> </td> </tr> </tbody> </table> </md-table-container> </div> </fieldset> </div> </md-dialog-content> <md-dialog-actions layout="row" layout-align="start center"> <md-button type="submit" class="md-raised md-primary">{{\'main.button.save\' | translate}}</md-button> <md-button ng-if="record.id" ng-click="delete()" class="md-raised">{{\'main.button.delete\' | translate}}</md-button> <md-button ng-click="cancel()" class="md-raised">{{\'main.button.close\' | translate}}</md-button> </md-dialog-actions> </form> </md-dialog>'),a.put("apelApplication/templates/formal.learning.vocational.edit.dialog.html",'<md-dialog aria-label="formal learning edit dialog" flex="80" flex-sm="80" flex-xs="100"> <form name="dialogForm" ng-submit="dialogForm.$valid && submitVocationalFormalLearning()" novalidate ng-cloak> <md-toolbar> <div class="md-toolbar-tools"> <h2>{{"apel.formalLearnings.add" | translate}}</h2> <span flex></span> <md-button class="md-icon-button" ng-click="cancel()"> <md-icon md-font-set="material-icons">close</md-icon> </md-button> </div> </md-toolbar> <md-dialog-content> <div layout-padding> <fieldset> <legend ng-class="{invalid: dialogForm.$submitted && (!record.formalSubjectsOrModules || record.formalSubjectsOrModules.length === 0)}" class="md-title-small">{{\'apel.formalLearnings.transferableModules\' | translate}}</legend> <md-input-container> <md-button ng-click="addNewTransferableModule()" class="md-raised">{{\'main.button.addNewRow\' | translate}}</md-button> </md-input-container> <div ng-if="record.newTransferableSubjectOrModule"> <div layout="row" layout-xs="column" flex> <div flex="100"> <div class="form-readonly" layout="row" layout-sm="column" layout-xs="column"> <md-input-container> <md-radio-group layout-gt-sm="row" ng-model="formState.isMySchool"> <md-radio-button ng-value="true" aria-label="iternalTransfer"> {{\'apel.formalLearnings.iternalTransfer\' | translate}} </md-radio-button> <md-radio-button ng-value="false" aria-label="externalTransfer"> {{\'apel.formalLearnings.externalTransfer\' | translate}} </md-radio-button> </md-radio-group> </md-input-container> </div> <div ng-if="formState.isMySchool" layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="30" flex-sm="100" flex-xs="100"> <label>{{\'apel.formalLearnings.schoolNameEt\' | translate}}</label> <input type="text" ng-model="record.school.nameEt" disabled required> </md-input-container> <md-input-container flex="30" flex-sm="100" flex-xs="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'apel.formalLearnings.schoolNameEn\' | translate}}</label> <input type="text" ng-model="record.school.nameEn" disabled> </md-input-container> </div> <div ng-if="!formState.isMySchool && !formState.isNewSchool" layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="30" flex-sm="100" flex-xs="100"> <label>{{\'apel.formalLearnings.schoolNameEt\' | translate}}</label> <md-select ng-model="record.newTransferableSubjectOrModule.apelSchool" aria-label="apelSchool" ng-change="apelSchoolChanged(record.newTransferableSubjectOrModule.apelSchool)" ng-model-options="{trackBy: \'$value.id\'}" required> <md-option ng-repeat="val in apelSchools" ng-value="val">{{currentLanguageNameField(val)}}</md-option> </md-select> </md-input-container> <md-input-container flex="30" flex-sm="100" flex-xs="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'apel.formalLearnings.schoolCountry\' | translate}}</label> <input type="text" value="{{currentLanguageNameField(record.newTransferableSubjectOrModule.country)}}" disabled required> </md-input-container> </div> <div ng-if="!formState.isMySchool"> <md-input-container ng-if="!formState.isNewSchool"> <md-button ng-click="addNewSchool()" class="md-raised">{{\'apel.formalLearnings.addNewSchool\' | translate}}</md-button> </md-input-container> <fieldset ng-if="formState.isNewSchool"> <legend class="md-title-small">{{\'apel.formalLearnings.newSchool\' | translate}}</legend> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="30" flex-sm="100" flex-xs="100"> <label>{{\'apel.formalLearnings.schoolCountry\' | translate}}</label> <hois-classifier-select ng-model="record.newTransferableSubjectOrModule.newApelSchool.country" aria-label="country" model-value-attr="code" main-classifier-code="RIIK" ng-change="newSchoolCountryChanged(record.newTransferableSubjectOrModule.newApelSchool.country)" required></hois-classifier-select> </md-input-container> <md-input-container ng-if="newSchoolEst" flex="30" flex-sm="100" flex-xs="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'apel.formalLearnings.schoolEHIS\' | translate}}</label> <hois-classifier-select ng-model="record.newTransferableSubjectOrModule.newApelSchool.ehisSchool" aria-label="EHIS" model-value-attr="code" main-classifier-code="EHIS_KOOL" ng-change="ehisSchoolChanged(record.newTransferableSubjectOrModule.newApelSchool.ehisSchool)" required></hois-classifier-select> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container ng-if="record.newTransferableSubjectOrModule.newApelSchool.country" flex="30" flex-sm="100" flex-xs="100"> <label>{{\'apel.formalLearnings.schoolNameEt\' | translate}}</label> <input type="text" ng-model="record.newTransferableSubjectOrModule.newApelSchool.nameEt" ng-disabled="formState.isMySchool" md-maxlength="100" required> </md-input-container> <md-input-container ng-if="record.newTransferableSubjectOrModule.newApelSchool.country" flex="30" flex-sm="100" flex-xs="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'apel.formalLearnings.schoolNameEn\' | translate}}</label> <input type="text" ng-model="record.newTransferableSubjectOrModule.newApelSchool.nameEn" ng-disabled="formState.isMySchool" md-maxlength="100"> </md-input-container> </div> </fieldset> </div> <div ng-if="formState.isMySchool" layout="row" layout-sm="column" layout-xs="column"> <md-input-container> <md-radio-group layout-gt-sm="row" ng-model="record.newTransferableSubjectOrModule.type" ng-change="typeChanged(record.newTransferableSubjectOrModule.type)" required> <md-radio-button value="VOTA_AINE_LIIK_V" aria-label="passedModule"> {{\'apel.formalLearnings.passedModule\' | translate}} </md-radio-button> <md-radio-button value="VOTA_AINE_LIIK_O" aria-label="curriculumModule"> {{\'apel.formalLearnings.curriculumModule\' | translate}} </md-radio-button> <md-radio-button value="VOTA_AINE_LIIK_M" aria-label="otherModule"> {{\'apel.formalLearnings.otherModule\' | translate}} </md-radio-button> </md-radio-group> </md-input-container> </div> <div ng-if="formState.isMySchool" layout="row" layout-sm="column" layout-xs="column"> <md-input-container ng-if="record.newTransferableSubjectOrModule.type !== \'VOTA_AINE_LIIK_M\'" flex="30" flex-sm="100" flex-xs="100"> <label>{{\'apel.formalLearnings.transferableModuleEt\' | translate}}</label> <md-select ng-model="record.newTransferableSubjectOrModule.curriculumVersionOmodule" aria-label="module" ng-change="moduleChanged(record.newTransferableSubjectOrModule.curriculumVersionOmodule)" ng-model-options="{trackBy: \'$value.id\'}" required> <md-option ng-repeat="val in transferableModules" ng-value="val">{{currentLanguageNameField(val)}}</md-option> </md-select> </md-input-container> <hois-autocomplete ng-if="record.newTransferableSubjectOrModule.type === \'VOTA_AINE_LIIK_M\'" flex ng-model="record.newTransferableSubjectOrModule.curriculumVersionOmodule" method="curriculumversionomodulesandthemes" name="module" label="apel.formalLearnings.transferableModuleEt" md-selected-item-change="moduleChanged(record.newTransferableSubjectOrModule.curriculumVersionOmodule)" additional-query-params="{student: student.id, curriculumModules: false, curriculumVersion: curriculumVersionId, school: auth.school.id}" ng-model-options="{ debounce: 500 }" required> </hois-autocomplete> <md-input-container flex="30" flex-sm="100" flex-xs="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'apel.formalLearnings.transferableModuleEn\' | translate}}</label> <input type="text" value="{{record.newTransferableSubjectOrModule.curriculumVersionOmodule.nameEn}}" disabled required> </md-input-container> <md-input-container flex="30" flex-sm="100" flex-xs="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'apel.formalLearnings.moduleCredits\' | translate}} ({{\'apel.formalLearnings.EKAP\' | translate}})</label> <input type="text" value="{{record.newTransferableSubjectOrModule.credits}}" disabled required> </md-input-container> </div> <div ng-if="!formState.isMySchool" layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="30" flex-sm="100" flex-xs="100"> <label>{{\'apel.formalLearnings.transferableModuleEt\' | translate}}</label> <input type="text" ng-model="record.newTransferableSubjectOrModule.nameEt" md-maxlength="255" required> </md-input-container> <md-input-container flex="30" flex-sm="100" flex-xs="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'apel.formalLearnings.transferableModuleEn\' | translate}}</label> <input type="text" ng-model="record.newTransferableSubjectOrModule.nameEn" md-maxlength="255"> </md-input-container> <md-input-container flex="30" flex-sm="100" flex-xs="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'apel.formalLearnings.subjectCredits\' | translate}} ({{\'apel.formalLearnings.EKAP\' | translate}})</label> <input type="number" ng-model="record.newTransferableSubjectOrModule.credits" ng-min="0" ng-max="999.9" required> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container ng-if="formState.isMySchool" flex="30" flex-sm="100" flex-xs="100"> <label>{{\'apel.formalLearnings.assessmentType\' | translate}}</label> <input value="{{currentLanguageNameField(record.assessment)}}" disabled> </md-input-container> <md-input-container ng-if="!formState.isMySchool" flex="30" flex-sm="100" flex-xs="100"> <label>{{\'apel.formalLearnings.assessmentType\' | translate}}</label> <hois-classifier-select ng-model="record.newTransferableSubjectOrModule.assessment" aria-label="assessment" model-value-attr="code" main-classifier-code="KUTSEHINDAMISVIIS" ng-change="assessmentTypeChanged(record.newTransferableSubjectOrModule.assessment)" required></hois-classifier-select> </md-input-container> <md-input-container ng-if="record.newTransferableSubjectOrModule.type !== \'VOTA_AINE_LIIK_V\'" flex="30" flex-sm="100" flex-xs="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'apel.formalLearnings.result\' | translate}}</label> <hois-select ng-model="record.newTransferableSubjectOrModule.grade" values="grades" show-property="value" value-property="code" aria-label="grade" required></hois-select> </md-input-container> <md-input-container ng-if="record.newTransferableSubjectOrModule.type === \'VOTA_AINE_LIIK_V\'" flex="30" flex-sm="100" flex-xs="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'apel.formalLearnings.result\' | translate}}</label> <input value="{{gradeValue(record.newTransferableSubjectOrModule.grade)}}" disabled> </md-input-container> <md-input-container ng-if="record.newTransferableSubjectOrModule.type !== \'VOTA_AINE_LIIK_V\'" flex="30" flex-sm="100" flex-xs="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'apel.formalLearnings.resultDate\' | translate}}</label> <md-datepicker ng-model="record.newTransferableSubjectOrModule.gradeDate" md-max-date="currentDate" md-open-on-focus></md-datepicker> </md-input-container> <md-input-container ng-if="record.newTransferableSubjectOrModule.type === \'VOTA_AINE_LIIK_V\'" flex="30" flex-sm="100" flex-xs="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'apel.formalLearnings.resultDate\' | translate}}</label> <input value="{{record.newTransferableSubjectOrModule.gradeDate | hoisDate}}" disabled> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container ng-if="record.newTransferableSubjectOrModule.type === \'VOTA_AINE_LIIK_V\'" flex="30" flex-sm="100" flex-xs="100"> <label>{{auth.higher ? (\'apel.formalLearnings.teachersHigher\' | translate) : (\'apel.formalLearnings.teachersVocational\' | translate)}}</label> <input type="text" value="{{record.newTransferableSubjectOrModule.teachers}}" disabled> </md-input-container> <md-input-container ng-if="record.newTransferableSubjectOrModule.type !== \'VOTA_AINE_LIIK_V\'" flex="30" flex-sm="100" flex-xs="100"> <label>{{auth.higher ? (\'apel.formalLearnings.teachersHigher\' | translate) : (\'apel.formalLearnings.teachersVocational\' | translate)}}</label> <input type="text" ng-model="record.newTransferableSubjectOrModule.teachers" md-maxlength="255"> </md-input-container> </div> </div> </div> <md-button ng-if="record.newTransferableSubjectOrModule.isNew" class="md-raised" ng-click="addTransferableModule(record.newTransferableSubjectOrModule)">{{\'main.button.add\' | translate}}</md-button> <md-button ng-if="!record.newTransferableSubjectOrModule.isNew" class="md-raised" ng-click="changeTransferableModule(record.newTransferableSubjectOrModule)">{{\'main.button.edit\' | translate}}</md-button> <md-button class="md-raised" ng-click="deleteTransferableModule(record.newTransferableSubjectOrModule)">{{\'apel.formalLearnings.remove\' | translate}}</md-button> </div> <md-table-container> <table md-table md-progress="tabledata.$promise" class="secondary-table"> <thead md-head> <tr md-row> <th md-column>{{\'apel.formalLearnings.school\' | translate}}</th> <th md-column>{{\'apel.formalLearnings.module\' | translate}}/{{\'apel.formalLearnings.moduleEn\' | translate}}</th> <th md-column>{{\'apel.formalLearnings.creditsEKAP\' | translate}}</th> <th md-column>{{\'apel.formalLearnings.result\' | translate}}</th> <th md-column>{{\'apel.formalLearnings.resultDate\' | translate}}</th> <th md-column>{{auth.higher ? (\'apel.formalLearnings.teachersHigher\' | translate) : (\'apel.formalLearnings.teachersVocational\' | translate)}}</th> <th md-column></th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="row in record.formalSubjectsOrModules track by $index" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell ng-if="row.apelSchool">{{currentLanguageNameField(row.apelSchool)}}</td> <td md-cell ng-if="!row.apelSchool && !row.newApelSchool">{{currentLanguageNameField(record.school)}}</td> <td md-cell ng-if="row.newApelSchool">{{currentLanguageNameField(row.newApelSchool)}}</td> <td md-cell ng-if="row.module && !row.module.nameEn">{{row.module.nameEt}}</td> <td md-cell ng-if="row.module && row.module.nameEn">{{row.module.nameEt}}/{{row.module.nameEn}}</td> <td md-cell ng-if="!row.module && !row.nameEn">{{row.nameEt}}</td> <td md-cell ng-if="!row.module && row.nameEn">{{row.nameEt}}/{{row.nameEn}}</td> <td md-cell>{{row.credits}}</td> <td md-cell>{{row.grade.value}}</td> <td md-cell>{{row.gradeDate | hoisDate}}</td> <td md-cell>{{row.teachers}}</td> <td md-cell> <md-button md-no-ink class="md-primary change-button" ng-click="editTransferableModule($index)">{{\'main.button.change\' | translate}}</md-button> </td> </tr> </tbody> </table> </md-table-container> </fieldset> <br> <fieldset> <legend ng-class="{invalid: dialogForm.$submitted && (!record.formalReplacedSubjectsOrModules || record.formalReplacedSubjectsOrModules.length === 0)}" class="md-title-small">{{\'apel.formalLearnings.substitutableModules\' | translate}}</legend> <div layout-padding> <div class="substitutableModuleSelect" ng-repeat="module in curriculumModules track by $index"> <md-input-container> <md-checkbox aria-label="module" ng-model="module.substitutable" ng-change="substitutableModuleChanged(module)"> {{currentLanguageNameField(module)}} ({{module.credits}} {{\'apel.formalLearnings.ekap\' | translate}}) </md-checkbox> </md-input-container> </div> </div> </fieldset> </div> </md-dialog-content> <md-dialog-actions layout="row" layout-align="start center"> <md-button type="submit" class="md-raised md-primary">{{\'main.button.save\' | translate}}</md-button> <md-button ng-if="record.id" ng-click="delete()" class="md-raised">{{\'main.button.delete\' | translate}}</md-button> <md-button ng-click="cancel()" class="md-raised">{{\'main.button.close\' | translate}}</md-button> </md-dialog-actions> </form> </md-dialog>'),
a.put("apelApplication/templates/informal.learning.higher.edit.dialog.html",'<md-dialog aria-label="informal learning edit dialog" flex="80" flex-sm="80" flex-xs="100"> <form name="dialogForm" ng-submit="dialogForm.$valid && submitInformalLearning()" novalidate ng-cloak> <md-toolbar> <div class="md-toolbar-tools"> <h2>{{"apel.informalLearnings.add" | translate}}</h2> <span flex></span> <md-button class="md-icon-button" ng-click="cancel()"> <md-icon md-font-set="material-icons">close</md-icon> </md-button> </div> </md-toolbar> <md-dialog-content> <div layout-padding> <fieldset> <legend ng-class="{invalid: dialogForm.$submitted && (!record.informalExperiences || record.informalExperiences.length === 0)}" class="md-title-small">{{\'apel.informalLearnings.otherInformalLearnings\' | translate}}</legend> <md-button class="md-raised" ng-click="addNewInformalExperienceRow()">{{\'main.button.addNewRow\' | translate}}</md-button> <md-table-container> <table md-table md-progress="tabledata.$promise" class="secondary-table"> <thead md-head> <tr md-row> <th md-column width="20%">{{\'apel.informalLearnings.name\' | translate}}</th> <th md-column width="20%">{{\'apel.informalLearnings.placeTime\' | translate}}</th> <th md-column width="10%">{{\'apel.informalLearnings.hours\' | translate}}</th> <th md-column width="20%">{{\'apel.informalLearnings.documents\' | translate}}</th> <th md-column width="25%">{{\'apel.informalLearnings.type\' | translate}}</th> <th md-column width="5%"></th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="experience in record.informalExperiences" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell> <md-input-container> <input ng-model="experience.nameEt" aria-label="nameEt" type="text" md-maxlength="255" required> </md-input-container> </td> <td md-cell> <md-input-container> <input ng-model="experience.placeTime" aria-label="place and time" type="text" md-maxlength="255" required> </md-input-container> </td> <td md-cell> <md-input-container> <input ng-model="experience.hours" aria-label="hours" type="number" ng-min="0" ng-max="9999" required> </md-input-container> </td> <td md-cell> <md-input-container> <textarea ng-model="experience.documents" required md-maxlength="255" max-rows="2" aria-label="documents"></textarea> </md-input-container> </td> <td md-cell> <md-input-container> <hois-classifier-select ng-model="experience.type" aria-label="type" model-value-attr="code" main-classifier-code="VOTA_INFORMAAL_LIIK" md-no-asterisk required></hois-classifier-select> </md-input-container> </td> <td md-cell> <a class="remove nomargin" ng-click="removeInformalExperienceRow(experience)">&times;</a> </td> </tr> </tbody> </table> </md-table-container> </fieldset> <br> <fieldset> <legend ng-class="{invalid: dialogForm.$submitted && (!record.informalSubjectsOrModules || record.informalSubjectsOrModules.length === 0)}" class="md-title-small">{{\'apel.informalLearnings.substitutableSubjects\' | translate}}</legend> <div flex="50"> <md-input-container style="width: 100%"> <label>{{\'apel.informalLearnings.subject\' | translate}}</label> <md-select ng-model="selectedSubject" aria-label="{{\'apel.informalLearnings.substitutableSubjects\' | translate}}" ng-change="addSelectedSubject()"> <md-option ng-repeat="val in subjects" ng-value="val">{{currentLanguageNameField(val)}}</md-option> </md-select> </md-input-container> </div> <md-table-container> <table md-table md-progress="tabledata.$promise" class="secondary-table"> <thead md-head> <tr md-row> <th md-column>{{\'apel.informalLearnings.subject\' | translate}}</th> <th md-column>{{\'apel.informalLearnings.module\' | translate}}</th> <th md-column>{{\'apel.informalLearnings.required\' | translate}}</th> <th md-column>{{\'apel.informalLearnings.creditsEAP\' | translate}}</th> <th md-column>{{\'apel.informalLearnings.acquiredSkills\' | translate}}</th> <th md-column></th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="subjectOrModule in record.informalSubjectsOrModules" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <ng-form name="subjectOrModuleForm"> <td md-cell> <md-input-container> <hois-value ng-if="subjectOrModule.subject" value="currentLanguageNameField(subjectOrModule.subject)"></hois-value> </md-input-container> </td> <td md-cell> <md-input-container> <hois-value ng-if="subjectOrModule.curriculumVersionHmodule" value="currentLanguageNameField(subjectOrModule.curriculumVersionHmodule)"></hois-value> </md-input-container> </td> <td md-cell> <md-input-container> <span ng-if="!subjectOrModule.isOptional">{{\'main.yes\' | translate}}</span> <span ng-if="subjectOrModule.isOptional">{{\'main.no\' | translate}}</span> </md-input-container> </td> <td md-cell> <md-input-container> <hois-value ng-if="subjectOrModule.credits" value="subjectOrModule.credits"></hois-value> </md-input-container> </td> <td md-cell> <md-input-container style="width: 100%"> <textarea ng-model="subjectOrModule.skills" required md-maxlength="4000" max-rows="3" aria-label="{{\'apel.informalLearnings.acquiredSkills\' | translate}}"></textarea> </md-input-container> </td> <td md-cell> <a class="remove nomargin" ng-click="removeSubtitutableModuleTheme(subjectOrModule)">&times;</a> </td> </ng-form> </tr> </tbody> </table> </md-table-container> </fieldset> </div> </md-dialog-content> <md-dialog-actions layout="row" layout-align="start center"> <md-button type="submit" class="md-raised md-primary">{{\'main.button.save\' | translate}}</md-button> <md-button ng-if="record.id" ng-click="delete()" class="md-raised">{{\'main.button.delete\' | translate}}</md-button> <md-button ng-click="cancel()" class="md-raised">{{\'main.button.close\' | translate}}</md-button> </md-dialog-actions> </form> </md-dialog>'),a.put("apelApplication/templates/informal.learning.vocational.edit.dialog.html",'<md-dialog aria-label="informal learning edit dialog" flex="80" flex-sm="80" flex-xs="100"> <form name="dialogForm" ng-submit="dialogForm.$valid && submitInformalLearning()" novalidate ng-cloak> <md-toolbar> <div class="md-toolbar-tools"> <h2>{{"apel.informalLearnings.add" | translate}}</h2> <span flex></span> <md-button class="md-icon-button" ng-click="cancel()"> <md-icon md-font-set="material-icons">close</md-icon> </md-button> </div> </md-toolbar> <md-dialog-content> <div layout-padding> <fieldset> <legend ng-class="{invalid: dialogForm.$submitted && (!record.informalExperiences || record.informalExperiences.length === 0)}" class="md-title-small">{{\'apel.informalLearnings.otherInformalLearnings\' | translate}}</legend> <md-button class="md-raised" ng-click="addNewInformalExperienceRow()">{{\'main.button.addNewRow\' | translate}}</md-button> <md-table-container> <table md-table md-progress="tabledata.$promise" class="secondary-table"> <thead md-head> <tr md-row> <th md-column width="20%">{{\'apel.informalLearnings.name\' | translate}}</th> <th md-column width="20%">{{\'apel.informalLearnings.placeTime\' | translate}}</th> <th md-column width="10%">{{\'apel.informalLearnings.hours\' | translate}}</th> <th md-column width="20%">{{\'apel.informalLearnings.documents\' | translate}}</th> <th md-column width="25%">{{\'apel.informalLearnings.type\' | translate}}</th> <th md-column width="5%"></th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="experience in record.informalExperiences" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell> <md-input-container> <input ng-model="experience.nameEt" aria-label="nameEt" type="text" md-maxlength="255" required> </md-input-container> </td> <td md-cell> <md-input-container> <input ng-model="experience.placeTime" aria-label="place and time" type="text" md-maxlength="255" required> </md-input-container> </td> <td md-cell> <md-input-container> <input ng-model="experience.hours" aria-label="hours" type="number" ng-min="0" ng-max="9999" required> </md-input-container> </td> <td md-cell> <md-input-container> <textarea ng-model="experience.documents" required md-maxlength="255" max-rows="2" aria-label="documents"></textarea> </md-input-container> </td> <td md-cell> <md-input-container> <hois-classifier-select ng-model="experience.type" aria-label="type" model-value-attr="code" main-classifier-code="VOTA_INFORMAAL_LIIK" md-no-asterisk required></hois-classifier-select> </md-input-container> </td> <td md-cell> <a class="remove nomargin" ng-click="removeInformalExperienceRow(experience)">&times;</a> </td> </tr> </tbody> </table> </md-table-container> </fieldset> <br> <fieldset> <legend ng-class="{invalid: dialogForm.$submitted && (!record.informalSubjectsOrModules || record.informalSubjectsOrModules.length === 0)}" class="md-title-small">{{\'apel.informalLearnings.substitutableModulesThemes\' | translate}}</legend> <div flex="50"> <md-input-container style="width: 100%"> <label>{{\'apel.informalLearnings.module\' | translate}}/{{\'apel.informalLearnings.theme\' | translate}}</label> <md-select ng-model="selectedModuleOrTheme" aria-label="substitutable modules/themes" ng-change="selectedModuleOrThemeChanged()"> <md-option ng-repeat="val in modulesAndThemes" ng-value="val"> <span ng-style="{\'font-weight\': val.isModule ? 600 : 400}">{{currentLanguageNameField(val)}}</span> </md-option> </md-select> </md-input-container> </div> <md-table-container> <table md-table md-progress="tabledata.$promise" class="secondary-table"> <thead md-head> <tr md-row> <th md-column>{{\'apel.informalLearnings.module\' | translate}}/{{\'apel.informalLearnings.theme\' | translate}}</th> <th md-column>{{\'apel.informalLearnings.isModule\' | translate}}</th> <th md-column>{{\'apel.informalLearnings.hours\' | translate}}/{{\'apel.informalLearnings.ekap\' | translate}}</th> <th md-column>{{\'apel.informalLearnings.result\' | translate}}</th> <th md-column>{{\'apel.informalLearnings.outcomes\' | translate}}</th> <th md-column>{{\'apel.informalLearnings.acquiredSkills\' | translate}}</th> <th md-column></th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="subjectOrModule in record.informalSubjectsOrModules" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <ng-form name="subjectOrModuleForm"> <td md-cell> <md-input-container> <hois-value ng-if="subjectOrModule.isModule" value="currentLanguageNameField(subjectOrModule.module)"></hois-value> <hois-value ng-if="!subjectOrModule.isModule" value="currentLanguageNameField(subjectOrModule.module) + \'/\' + currentLanguageNameField(subjectOrModule.curriculumVersionOmoduleTheme)"> </hois-value> </md-input-container> </td> <td md-cell> <md-input-container> <md-checkbox ng-model="subjectOrModule.isModule" aria-label="{{\'apel.informalLearnings.isModule\' | translate}}" ng-disabled="true"> </md-checkbox> </md-input-container> </td> <td md-cell> <md-input-container> <hois-value ng-if="subjectOrModule.EKAP" value="subjectOrModule.hours.toString() + \'/\' + subjectOrModule.EKAP.toString()"></hois-value> <hois-value ng-if="!subjectOrModule.EKAP" value="subjectOrModule.hours"></hois-value> </md-input-container> </td> <td md-cell> <md-input-container> <hois-value value="subjectOrModule.grade.value"></hois-value> </md-input-container> </td> <td md-cell> <md-input-container ng-repeat="outcome in subjectOrModule.outcomes | orderBy: [\'curriculumModuleOutcomes.orderNr\', \'curriculumModuleOutcomes.\' + currentLanguage() === \'en\' ? outcomeEn : outcomeEt]" layout="row"> <md-checkbox ng-model="outcome.acquired" aria-label="{{\'apel.informalLearnings.outcomes\' | translate}}"></md-checkbox> {{currentLanguage() === \'en\' ? outcome.curriculumModuleOutcomes.outcomeEn : outcome.curriculumModuleOutcomes.outcomeEt}} </md-input-container> </td> <td md-cell style="width: 40%; min-width: 400px"> <md-input-container style="width: 100%"> <textarea ng-model="subjectOrModule.skills" required md-maxlength="4000" max-rows="3" aria-label="{{\'apel.informalLearnings.acquiredSkills\' | translate}}"></textarea> </md-input-container> </td> <td md-cell> <a class="remove nomargin" ng-click="removeSubtitutableModuleTheme(subjectOrModule)">&times;</a> </td> </ng-form> </tr> </tbody> </table> </md-table-container> </fieldset> </div> </md-dialog-content> <md-dialog-actions layout="row" layout-align="start center"> <md-button type="submit" class="md-raised md-primary">{{\'main.button.save\' | translate}}</md-button> <md-button ng-if="record.id" ng-click="delete()" class="md-raised">{{\'main.button.delete\' | translate}}</md-button> <md-button ng-click="cancel()" class="md-raised">{{\'main.button.close\' | translate}}</md-button> </md-dialog-actions> </form> </md-dialog>'),a.put("apelApplication/templates/reason.dialog.html",'<md-dialog aria-label="reason dialog" flex="50" flex-sm="50" flex-xs="100"> <form name="dialogForm" novalidate ng-cloak> <md-toolbar> <div class="md-toolbar-tools"> <h2 ng-if="rejection">{{\'apel.rejection\' | translate}}</h2> <h2 ng-if="sendToConfirm">{{\'apel.sendingToConfirm\' | translate}}</h2> <h2 ng-if="sendBackToCreation">{{\'apel.sendingToCreation\' | translate}}</h2> <span flex></span> <md-button class="md-icon-button" ng-click="cancel()"> <md-icon md-font-set="material-icons">close</md-icon> </md-button> </div> </md-toolbar> <md-dialog-content> <span flex></span> <div class="ois-form-layout" layout="column" layout-margin ng-cloak> <md-whiteframe ng-if="rejection" class="md-whiteframe-1dp attention-whiteframe" flex="100" layout layout-align="left center"> <div md-colors="{color: \'default-warn\'}"> <md-icon md-colors="{color: \'default-warn\'}" md-font-set="material-icons">info_outline</md-icon> <span>{{\'apel.rejectionWarning\' | translate}}</span> </div> </md-whiteframe> <div layout="column" flex> <md-input-container flex> <label>{{committee ? (\'apel.decision\' | translate) : (\'apel.justification\' | translate)}}</label> <textarea ng-model="reason" md-maxlength="4000" max-rows="5" required md-autofocus></textarea> </md-input-container> </div> </div> </md-dialog-content> <span flex></span> <md-dialog-actions layout="row" layout-align="start center"> <md-button class="md-raised" ng-click="submit()"> <span ng-if="rejection">{{\'main.button.reject\' | translate}}</span> <span ng-if="sendToConfirm">{{\'apel.sendToConfirm\' | translate}}</span> <span ng-if="sendBackToCreation">{{\'apel.sendBackToCreation\' | translate}}</span> </md-button> <md-button class="md-raised" ng-click="cancel()">{{\'main.button.close\' | translate}}</md-button> </md-dialog-actions> </form> </md-dialog>'),a.put("application/student/application.student.list.html",'<div layout-padding> <div flex> <md-table-container> <table md-table md-progress="tabledata.$promise"> <thead md-head md-order="criteria.order" md-on-reorder="loadData"> <tr md-row> <th md-column md-order-by="{{currentLanguage()===\'en\' ? \'type.nameEn\' : \'type.nameEt\'}}">{{\'application.type\' | translate}}</th> <th md-column md-order-by="submitted">{{\'application.submissionDate\' | translate}}</th> <th md-column md-order-by="{{currentLanguage()===\'en\' ? \'status.nameEn\' : \'status.nameEt\'}}">{{\'main.status\' | translate}}</th> <th md-column md-order-by="5">{{\'student.application.confirmDate\' | translate}}</th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="row in tabledata.content" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell><a ng-href="#/applications/{{::row.id}}/view">{{currentLanguageNameField(row.type)}}</a></td> <td md-cell>{{row.submitted | hoisDate}}</td> <td md-cell> {{currentLanguageNameField(row.status)}} <md-tooltip ng-if="row.status.code === \'AVALDUS_STAATUS_TAGASI\' && row.rejectReason">{{row.rejectReason}}</md-tooltip> </td> <td md-cell>{{row.confirmDate | hoisDate}}</td> </tr> </tbody> </table> </md-table-container> <md-table-pagination md-limit="criteria.size" md-limit-options="[10, 20, 50]" md-page="criteria.page" md-total="{{tabledata.totalElements}}" md-on-paginate="loadData" md-label="{page: \'{{\'main.page\' | translate}}:\', rowsPerPage: \'{{\'main.rowPerPage\' | translate}}:\', of: \'{{\'main.of\' | translate}}\'}" md-page-select></md-table-pagination> </div> </div> <div layout-padding ng-if="!auth.isParent()"> <div flex> <md-table-container> <table md-table class="secondary-table" md-progress="applicationTypes.$promise"> <thead md-head> <tr md-row> <th md-column>{{\'application.type\' | translate}}</th> <th md-column></th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="row in applicationTypes" ng-class-odd="\'odd\'" ng-class-even="\'even\'" ng-if="applicationTypesApplicable[row.code]"> <td md-cell>{{currentLanguageNameField(row)}}</td> <td md-cell> <md-button md-no-ink ng-if="applicationTypesApplicable[row.code].isAllowed === true && auth.isStudent()" class="md-primary change-button" ng-href="#/applications/student/new/{{row.code}}"> {{\'main.button.apply\' | translate}} </md-button> </td> </tr> </tbody> </table> </md-table-container> </div> </div>'),a.put("application/student/application.student.new.html",'<div class="ois-form-layout-padding" ng-cloak> <div flex> <form ng-submit="loadData()" layout="column" name="applicationForm" ng-controller="ApplicationController as mainCtrl"> <br> <div ng-include="\'application/templates/application.html\'" ng-init="application=studentApplication"></div> <br> <div layout="row"> <md-button ng-if="application.id" class="md-raised md-primary" ng-click="submit()">{{\'main.button.submit\' | translate}}</md-button> <md-button class="md-raised" ng-click="save()">{{\'main.button.save\' | translate}}</md-button> <md-button ng-href="#/applications/student" class="md-raised">{{\'main.button.back\' | translate}}</md-button> </div> </form> </div> </div>'),a.put("application/templates/action.buttons.html",'<div ng-if="isStudentRepresentative()" layout-xs="column"> <md-button ng-if="application.id > 0 && application.status === \'AVALDUS_STAATUS_KOOST\' && application.needsRepresentativeConfirm === true" ng-click="submit()" class="md-raised md-primary">{{\'main.button.allowSubmit\' | translate}}</md-button> <md-button ng-if="application.id > 0 && application.status === \'AVALDUS_STAATUS_KOOST\' && application.needsRepresentativeConfirm === true" class="md-raised" ng-click="reject()">{{\'main.button.reject\' | translate}}</md-button> </div> <div ng-if="!isStudentRepresentative()" layout-xs="column"> <md-button ng-if="application.id > 0 && application.status === \'AVALDUS_STAATUS_KOOST\' && \r\n    ((!auth.isAdmin() && application.needsRepresentativeConfirm === false) || (auth.isAdmin() && isAuthorized(\'ROLE_OIGUS_M_TEEMAOIGUS_AVALDUS\')))" ng-click="submit()" class="md-raised md-primary">{{\'main.button.submit\' | translate}}</md-button> <md-button ng-if="application.id > 0 && application.type === \'AVALDUS_LIIK_MUU\' &&\r\n'+"    (application.status === 'AVALDUS_STAATUS_ESIT' || application.status === 'AVALDUS_STAATUS_YLEVAAT') && \r\n    (auth.isAdmin() && isAuthorized('ROLE_OIGUS_K_TEEMAOIGUS_AVALDUS'))\" ng-click=\"confirm()\" class=\"md-raised md-primary\">{{'main.button.confirm' | translate}}</md-button> <md-button ng-if=\"application.id > 0 && (application.status === 'AVALDUS_STAATUS_YLEVAAT' \r\n    || (application.status === 'AVALDUS_STAATUS_KOOST' && application.needsRepresentativeConfirm)) \r\n    && (auth.isAdmin() && isAuthorized('ROLE_OIGUS_M_TEEMAOIGUS_AVALDUS'))\" class=\"md-raised\" ng-click=\"reject()\">{{'main.button.reject' | translate}}</md-button> <md-button ng-if=\"application.id > 0 && application.status === 'AVALDUS_STAATUS_KOOST'\r\n    && !(auth.isAdmin() && !isAuthorized('ROLE_OIGUS_M_TEEMAOIGUS_AVALDUS'))\" ng-click=\"delete()\" class=\"md-raised\">{{'main.button.delete' | translate}}</md-button> </div>"),a.put("application/templates/application.html",'<div ng-if="isCreate" layout="row" layout-sm="column" layout-xs="column" class="form-readonly"> <md-input-container class="label-only" flex="60" flex-sm="100" flex-xs="100"> <label>{{\'application.type\' | translate}}</label> <hois-classifier-value ng-model="application.type" main-classifier-code="AVALDUS_LIIK"></hois-classifier-value> </md-input-container> </div> <div ng-if="!isCreate" ng-include="\'application/templates/application.information.html\'" class="form-readonly"></div> <div ng-if="isCreate && !auth.isStudent()" layout="row" layout-sm="column" layout-xs="column" class="form-readonly"> <md-input-container class="label-only" flex="60" flex-sm="100" flex-xs="100"> <label>{{\'student.label\' | translate}}</label> <hois-value value="application.student.nameEt" href-value="\'#/students/\' + application.student.id + \'/main\'"></hois-value> </md-input-container> </div> <div ng-include="templateUrlByType"></div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="100" flex-sm="100" flex-xs="100"> <label class="textInput">{{\'application.additionalInfo\' | translate}}</label> <textarea ng-model="application.addInfo" md-maxlength="4000" max-rows="10"></textarea> </md-input-container> </div> <div layout="column" flex> <fieldset> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'main.relatedFiles\' | translate}}</legend> <md-button ng-if="(auth.isStudent() && application.status === \'AVALDUS_STAATUS_KOOST\') || (auth.isAdmin() && [\'AVALDUS_STAATUS_KOOST\', \'AVALDUS_STAATUS_ESIT\', \'AVALDUS_STAATUS_YLEVAAT\'].indexOf(application.status) !== -1)" class="md-raised" href="" ng-click="openAddFileDialog()">{{\'main.button.uploadFile\' | translate}}</md-button> <md-table-container> <table md-table class="secondary-table"> <thead md-head> <tr md-row> <th md-column><span>{{\'file.nameAndFile\' | translate}}</span></th> <th md-column><span>{{\'file.additionDate\' | translate}}</span></th> <th md-column>{{\'file.addedBy\' | translate}}</th> <th md-column></th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="file in application.files | orderBy: \'id\'" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell> <div layout="row" flex> <div flex="60"> {{file.oisFile.fname}} </div> <div flex> <a ng-href="{{getUrl(file.oisFile, \'application\')}}" download target="_blank" rel="noopener noreferrer"> <md-icon md-font-set="material-icons">file_download</md-icon> </a> </div> </div> </td> <td md-cell> {{file.inserted | hoisDateTime}} </td> <td md-cell> {{file.insertedBy}} </td> <td md-cell> <md-button class="remove nomargin" ng-click="removeFromArray(application.files, file)">&times;</md-button> </td> </tr> </tbody> </table> </md-table-container> </fieldset> </div>'),a.put("application/templates/application.information.html",'<div layout="row" layout-sm="column" layout-xs="column"> <md-input-container class="label-only" flex="60" flex-sm="100" flex-xs="100"> <label>{{\'application.type\' | translate}}</label> <hois-classifier-value ng-model="application.type" main-classifier-code="AVALDUS_LIIK"></hois-classifier-value> </md-input-container> </div> <div ng-if="!auth.isStudent()" layout="row" layout-sm="column" layout-xs="column"> <md-input-container class="label-only" flex="60" flex-sm="100" flex-xs="100"> <label>{{\'student.label\' | translate}}</label> <hois-value value="application.student.nameEt" href-value="\'#/students/\' + application.student.id + \'/main\'"></hois-value> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container class="label-only" flex="60" flex-sm="100" flex-xs="100"> <label>{{\'main.status\' | translate}}</label> <hois-classifier-value ng-model="application.status" main-classifier-code="AVALDUS_STAATUS"></hois-classifier-value> </md-input-container> </div> <div ng-if="!application.isAdult" layout="row" layout-sm="column" layout-xs="column"> <md-input-container class="label-only" flex="60" flex-sm="100" flex-xs="100"> <label>{{\'application.confirmedByRepresentative\' | translate}}</label> <hois-value value="application.needsRepresentativeConfirm === true || application.status === \'AVALDUS_STAATUS_KOOST\' ? \'main.no\' : \'main.yes\' | translate"></hois-value> </md-input-container> </div> <div ng-if="application.status === \'AVALDUS_STAATUS_TAGASI\'" layout="row" layout-sm="column" layout-xs="column"> <md-input-container class="label-only" flex="60" flex-sm="100" flex-xs="100"> <label>{{\'application.rejectReason\' | translate}}</label> <hois-value value="application.rejectReason"></hois-value> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container class="label-only" flex="60" flex-sm="100" flex-xs="100"> <label>{{\'main.createdBy\' | translate}}</label> <hois-value value="application.insertedBy"></hois-value> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container class="label-only" flex="60" flex-sm="100" flex-xs="100"> <label>{{\'application.confirmationDate\' | translate}}</label> <hois-value value="application.status === \'AVALDUS_STAATUS_KINNITATUD\' ? (application.changed | hoisDate) : \'\'"></hois-value> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container class="label-only" flex="60" flex-sm="100" flex-xs="100"> <label>{{\'application.submissionDate\' | translate}}</label> <hois-value value="application.submitted | hoisDate"></hois-value> </md-input-container> </div>'),a.put("application/templates/application.type.akad.edit.html",'<div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="60" flex-sm="100" flex-xs="100"> <label>{{\'application.reason\' | translate}}</label> <hois-classifier-select ng-model="application.reason" model-value-attr="code" required main-classifier-code="AKADPUHKUS_POHJUS" criteria="{higher: !curriculumVersion.isVocational ? true : undefined, vocational: curriculumVersion.isVocational ? true : undefined}"></hois-classifier-select> </md-input-container> </div> <div ng-include="\'application/templates/period.html\'" ng-init="labelStart=\'application.academicLeaveStart\';labelEnd=\'application.academicLeaveEnd\'"> </div>'),a.put("application/templates/application.type.akad.view.html",'<div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="60" flex-sm="100" flex-xs="100"> <label>{{\'application.reason\' | translate}}</label> <hois-classifier-value ng-model="application.reason" main-classifier-code="AKADPUHKUS_POHJUS"></hois-classifier-value> </md-input-container> </div> <div ng-include="\'application/templates/period.view.html\'" ng-init="labelStart=\'application.academicLeaveStart\';labelEnd=\'application.academicLeaveEnd\'"> </div>'),a.put("application/templates/application.type.akadk.edit.html",'<div> <div class="form-readonly"> <md-input-container flex="60" flex-sm="100" flex-xs="100"> <label>{{\'application.reason\' | translate}}</label> <hois-classifier-value ng-model="application.validAcademicLeave.reason" main-classifier-code="AKADPUHKUS_POHJUS"></hois-classifier-value> </md-input-container> </div> <div ng-show="!application.validAcademicLeave.isPeriod" layout="row" layout-xs="column" class="form-readonly"> <md-input-container flex="20" flex-sm="100" flex-xs="100"> <label>{{\'application.academicLeaveStart\' | translate}}</label> <hois-value value="application.validAcademicLeave.startDate | hoisDate"></hois-value> </md-input-container> <md-input-container style="margin-left: 0px" flex="20" flex-sm="100" flex-xs="100" flex-offset-xs="0" flex-offset-sm="0" flex-offset="5"> <label>{{\'application.academicLeaveEnd\' | translate}}</label> <hois-value value="application.validAcademicLeave.endDate | hoisDate"></hois-value> </md-input-container> </div> <div ng-show="application.validAcademicLeave.isPeriod" layout="row" layout-xs="column"> <md-input-container flex="20" flex-sm="100" flex-xs="100"> <label>{{\'application.academicLeaveStart\' | translate}}</label> <hois-select ng-model="application.validAcademicLeave.studyPeriodStart" values="studyPeriods" disabled></hois-select> </md-input-container> <md-input-container flex="20" flex-sm="100" flex-xs="100"> <label>{{\'application.academicLeaveEnd\' | translate}}</label> <hois-select ng-model="application.validAcademicLeave.studyPeriodEnd" values="studyPeriods" disabled></hois-select> </md-input-container> </div> <md-input-container flex="20" flex-sm="100" flex-xs="100"> <label>{{\'application.academicLeaveRevocationDate\' | translate}}</label> <md-datepicker ng-model="application.startDate" md-open-on-focus md-min-date="application.validAcademicLeave.startDate" md-max-date="application.validAcademicLeave.endDate" required></md-datepicker> </md-input-container> </div>'),a.put("application/templates/application.type.akadk.view.html",'<div> <md-input-container flex="60" flex-sm="100" flex-xs="100"> <label>{{\'application.reason\' | translate}}</label> <hois-classifier-value ng-model="application.validAcademicLeave.reason" main-classifier-code="AKADPUHKUS_POHJUS"></hois-classifier-value> </md-input-container> <div ng-show="!application.validAcademicLeave.isPeriod" layout="row" layout-xs="column"> <md-input-container flex="20" flex-sm="100" flex-xs="100"> <label>{{\'application.academicLeaveStart\' | translate}}</label> <hois-value value="application.validAcademicLeave.startDate | hoisDate"></hois-value> </md-input-container> <md-input-container style="margin-left: 0px" flex="20" flex-sm="100" flex-xs="100" flex-offset-xs="0" flex-offset-sm="0" flex-offset="5"> <label>{{\'application.academicLeaveEnd\' | translate}}</label> <hois-value value="application.validAcademicLeave.endDate | hoisDate"></hois-value> </md-input-container> </div> <div ng-show="application.validAcademicLeave.isPeriod" layout="row" layout-xs="column"> <md-input-container flex="20" flex-sm="100" flex-xs="100"> <label>{{\'application.academicLeaveStart\' | translate}}</label> <hois-select ng-model="application.validAcademicLeave.studyPeriodStart" values="studyPeriods" disabled></hois-select> </md-input-container> <md-input-container flex="20" flex-sm="100" flex-xs="100"> <label>{{\'application.academicLeaveEnd\' | translate}}</label> <hois-select ng-model="application.validAcademicLeave.studyPeriodEnd" values="studyPeriods" disabled></hois-select> </md-input-container> </div> <div layout="row" layout-xs="column"> <md-input-container flex="20" flex-sm="100" flex-xs="100"> <label>{{\'application.academicLeaveRevocationDate\' | translate}}</label> <hois-value value="application.startDate | hoisDate"></hois-value> </md-input-container> </div> </div>'),a.put("application/templates/application.type.eksmat.edit.html",'<div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="60" flex-sm="100" flex-xs="100"> <label>{{\'application.reason\' | translate}}</label> <hois-classifier-select ng-model="application.reason" model-value-attr="code" required main-classifier-code="EKSMAT_POHJUS"></hois-classifier-select> </md-input-container> </div>'),a.put("application/templates/application.type.eksmat.view.html",'<div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="60" flex-sm="100" flex-xs="100"> <label>{{\'application.reason\' | translate}}</label> <hois-classifier-value ng-model="application.reason" main-classifier-code="EKSMAT_POHJUS"></hois-classifier-value> </md-input-container> </div>'),a.put("application/templates/application.type.finm.edit.html",'<div> <div layout="row" layout-sm="column" layout-xs="column" class="form-readonly"> <md-input-container class="label-only" flex="60" flex-sm="100" flex-xs="100"> <label>{{\'application.validFinancialSource\' | translate}}</label> <hois-classifier-value ng-model="application.oldFin" model-value-attr="code" main-classifier-code="FINALLIKAS"></hois-classifier-value> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column" class="form-readonly"> <md-input-container class="label-only" flex="60" flex-sm="100" flex-xs="100"> <label>{{\'application.validFinancialSourceSpecification\' | translate}}</label> <hois-classifier-value ng-model="application.oldFinSpecific" model-value-attr="code" main-classifier-code="FINTAPSUSTUS"></hois-classifier-value> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column" class="form-readonly"> <md-input-container class="label-only" flex="60" flex-sm="100" flex-xs="100"> <label>{{\'application.newFinancialSource\' | translate}}</label> <hois-classifier-value ng-model="application.newFin" model-value-attr="code" main-classifier-code="FINALLIKAS"></hois-classifier-value> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column" flex> <md-input-container flex="60" flex-sm="100" flex-xs="100"> <label>{{\'application.newFinancialSourceSpecification\' | translate}}</label> <hois-classifier-select ng-model="application.newFinSpecific" model-value-attr="code" main-classifier-code="FINTAPSUSTUS" filter-values="[application.oldFinSpecific]" required></hois-classifier-select> </md-input-container> </div> </div>'),
a.put("application/templates/application.type.finm.view.html",'<div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container class="label-only" flex="60" flex-sm="100" flex-xs="100"> <label>{{\'application.validFinancialSource\' | translate}}</label> <hois-classifier-value ng-model="application.oldFin" main-classifier-code="FINALLIKAS"></hois-classifier-value> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container class="label-only" flex="60" flex-sm="100" flex-xs="100"> <label>{{\'application.validFinancialSourceSpecification\' | translate}}</label> <hois-classifier-value ng-model="application.oldFinSpecific" main-classifier-code="FINTAPSUSTUS"></hois-classifier-value> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container class="label-only" flex="60" flex-sm="100" flex-xs="100"> <label>{{\'application.newFinancialSource\' | translate}}</label> <hois-classifier-value ng-model="application.newFin" main-classifier-code="FINALLIKAS"></hois-classifier-value> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="60" flex-sm="100" flex-xs="100"> <label>{{\'application.newFinancialSourceSpecification\' | translate}}</label> <hois-classifier-value ng-model="application.newFinSpecific" main-classifier-code="FINTAPSUSTUS"></hois-classifier-value> </md-input-container> </div> </div>'),a.put("application/templates/application.type.muu.edit.html",'<div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="100" flex-sm="100" flex-xs="100"> <label>{{\'application.otherText\' | translate}}</label> <textarea ng-model="application.otherText" max-rows="10" required></textarea> </md-input-container> </div>'),a.put("application/templates/application.type.muu.view.html",'<div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="100" flex-sm="100" flex-xs="100"> <label>{{\'application.otherText\' | translate}}</label> <hois-value value="application.otherText"></hois-value> </md-input-container> </div>'),a.put("application/templates/application.type.okava.edit.html",'<div> <div layout="row" layout-sm="column" layout-xs="column" class="form-readonly"> <md-input-container class="label-only" flex="60" flex-sm="100" flex-xs="100"> <label>{{\'application.validCurriculumVersion\' | translate}}</label> <hois-value value="currentLanguageNameField(application.oldCurriculumVersion)"></hois-value> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column" class="form-readonly"> <md-input-container class="label-only" flex="60" flex-sm="100" flex-xs="100"> <label>{{\'application.validStudyForm\' | translate}}</label> <hois-classifier-value ng-model="application.oldStudyForm" model-value-attr="code" main-classifier-code="OPPEVORM"></hois-classifier-value> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="60" flex-sm="100" flex-xs="100"> <label>{{\'application.newCurriculumVersion\' | translate}}</label> <hois-select ng-model="application.newCurriculumVersion.id" ng-change="newCurriculumVersionSelected()" values="curriculumVersions" ng-required="application.type === \'AVALDUS_LIIK_OKAVA\'"></hois-select> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="60" flex-sm="100" flex-xs="100"> <label>{{\'application.newStudyForm\' | translate}}</label> <hois-classifier-select ng-model="application.newStudyForm" main-classifier-code="OPPEVORM" show-only-values="allowedStudyForms" model-value-attr="code" required></hois-classifier-select> </md-input-container> </div> </div>'),a.put("application/templates/application.type.okava.view.html",'<div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container class="label-only" flex="60" flex-sm="100" flex-xs="100"> <label>{{\'application.validCurriculumVersion\' | translate}}</label> <hois-value value="currentLanguageNameField(application.oldCurriculumVersion)"></hois-value> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container class="label-only" flex="60" flex-sm="100" flex-xs="100"> <label>{{\'application.validStudyForm\' | translate}}</label> <hois-classifier-value ng-model="application.oldStudyForm" main-classifier-code="OPPEVORM"></hois-classifier-value> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="60" flex-sm="100" flex-xs="100"> <label>{{\'application.newCurriculumVersion\' | translate}}</label> <hois-value value="currentLanguageNameField(application.newCurriculumVersion)"></hois-value> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="60" flex-sm="100" flex-xs="100"> <label>{{\'application.newStudyForm\' | translate}}</label> <hois-classifier-value ng-model="application.newStudyForm" main-classifier-code="OPPEVORM"></hois-classifier-value> </md-input-container> </div> </div>'),a.put("application/templates/application.type.ovorm.edit.html",'<div> <div layout="row" layout-sm="column" layout-xs="column" class="form-readonly"> <md-input-container class="label-only" flex="60" flex-sm="100" flex-xs="100"> <label>{{\'application.validStudyForm\' | translate}}</label> <hois-classifier-value ng-model="application.oldStudyForm" model-value-attr="code" main-classifier-code="OPPEVORM"></hois-classifier-value> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="60" flex-sm="100" flex-xs="100"> <label>{{\'application.newStudyForm\' | translate}}</label> <hois-classifier-select ng-model="application.newStudyForm" model-value-attr="code" main-classifier-code="OPPEVORM" criteria="{higher: true}" filter-values="[application.oldStudyForm]" required></hois-classifier-select> </md-input-container> </div> </div>'),a.put("application/templates/application.type.ovorm.view.html",'<div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container class="label-only" flex="60" flex-sm="100" flex-xs="100"> <label>{{\'application.validStudyForm\' | translate}}</label> <hois-classifier-value ng-model="application.oldStudyForm" main-classifier-code="OPPEVORM"></hois-classifier-value> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="60" flex-sm="100" flex-xs="100"> <label>{{\'application.newStudyForm\' | translate}}</label> <hois-classifier-value ng-model="application.newStudyForm" main-classifier-code="OPPEVORM"></hois-classifier-value> </md-input-container> </div> </div>'),a.put("application/templates/application.type.valis.edit.html",'<div> <div flex> <fieldset tabindex="1"> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'main.abroadStudies\' | translate}} *</legend> <div layout="column"> <md-input-container layout="row" layout-align="start center" flex="60"> <md-radio-group name="isAbroad" ng-model="application.isAbroad" ng-change="isAbroadChanged()" required layout="row"> <md-radio-button ng-value="false" aria-label="estonian educational institution">{{ \'application.inEstonianEducationalInstitution\' | translate }}</md-radio-button> <md-radio-button ng-value="true" aria-label="abroad educational institution">{{ \'application.inAbroadEducationalInstitution\' | translate }}</md-radio-button> </md-radio-group> </md-input-container> <div layout="row" flex="20" md-colors="{color: \'warn-A400\'}" ng-if="applicationForm.$submitted" ng-messages="applicationForm.isAbroad.$error"> <div ng-message="required">{{\'main.messages.error.inputFieldIsRequired\' | translate}}</div> </div> <div layout="row" layout-sm="column" layout-xs="column" ng-hide="application.isAbroad"> <md-input-container flex="60" flex-sm="100" flex-xs="100"> <label>{{\'main.educationInstitution\' | translate}}</label> <hois-classifier-select ng-model="application.ehisSchool" main-classifier-code="EHIS_KOOL" filter-values="[studentEhisSchool]" by-property="ehisSchool" model-value-attr="code" ng-required="!application.isAbroad"></hois-classifier-select> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column" ng-hide="!application.isAbroad"> <md-input-container flex="60" flex-sm="100" flex-xs="100"> <label class="textInput">{{\'main.educationInstitution\' | translate}}</label> <input type="text" ng-model="application.abroadSchool" ng-required="application.isAbroad"> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column" ng-hide="!application.isAbroad"> <md-input-container flex="60" flex-sm="100" flex-xs="100"> <label>{{\'main.country\' | translate}}</label> <hois-classifier-select ng-model="application.country" main-classifier-code="RIIK" filter-values="[\'RIIK_EST\']" model-value-attr="code" ng-required="application.isAbroad"></hois-classifier-select> </md-input-container> </div> <div ng-include="\'application/templates/period.html\'" ng-init="labelStart=\'application.abroadStudiesStart\';labelEnd=\'application.abroadStudiesEnd\'"> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="60" flex-sm="100" flex-xs="100"> <label>{{\'main.purposeOfStudies\' | translate}}</label> <hois-classifier-select ng-model="application.abroadPurpose" main-classifier-code="VALISOPE_EESMARK" model-value-attr="code" required></hois-classifier-select> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="60" flex-sm="100" flex-xs="100"> <label>{{\'main.programmeOfStudies\' | translate}}</label> <hois-classifier-select ng-model="application.abroadProgramme" main-classifier-code="VALISKOOL_PROGRAMM" model-value-attr="code" required></hois-classifier-select> </md-input-container> </div> </div> </fieldset> </div> <div>&nbsp;<div> <div layout="column" flex> <fieldset tabindex="1"> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'main.subjects\' | translate}}</legend> <md-button class="md-raised" href="" ng-click="addPlannedSubjectRow()">{{\'main.button.addRow\' | translate}}</md-button> <div layout="row" class="top-margin"> <input style="display:none" type="number" readonly name="plannedSubjectLength" ng-model="plannedSubjectLength" ng-model-options="{ getterSetter: true }" min="1"> <div md-colors="{color: \'warn-A400\'}" ng-messages="applicationForm.plannedSubjectLength.$error"> <div ng-if="applicationForm.$submitted" ng-message="min">{{\'main.messages.error.atLeastOneShouldBeAdded\' | translate}}</div> </div> </div> <md-table-container> <table md-table class="secondary-table"> <thead md-head> <tr md-row> <th md-column><span>{{\'application.plannedSubject\' | translate}} *</span></th> <th md-column><span>{{\'application.substitutableSubject\' | translate}} *</span></th> <th md-column></th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="plannedSubject in application.plannedSubjects | orderBy: \'id\'" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell> <md-input-container> <input type="text" ng-model="plannedSubject.name" aria-label="planned subject name" required> </md-input-container> </td> <td md-cell> <md-input-container> <hois-select multiple ng-model="plannedSubject.subjectsSelected" ng-change="subjectsSelected(plannedSubject)" aria-label="planned subject equivalent subject" values="studentSubjects" required></hois-select> </md-input-container> </td> <td md-cell> <md-button class="remove nomargin" ng-click="removeFromArray(application.plannedSubjects, plannedSubject)">&times;</md-button> </td> </tr> </tbody> </table> </md-table-container> </fieldset> </div> </div> <div>&nbsp;<div></div></div></div></div>'),a.put("application/templates/application.type.valis.view.html",'<div> <div layout="row"> <md-input-container flex="20" flex-xs="100"> <label>{{\'main.abroadStudies\' | translate}}</label> <hois-value value="application.isAbroad ? (\'main.yes\' | translate) : (\'main.no\' | translate)"></hois-value> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column" ng-hide="application.isAbroad"> <md-input-container flex="60" flex-sm="100" flex-xs="100"> <label>{{\'main.educationInstitution\' | translate}}</label> <hois-classifier-value ng-model="application.ehisSchool" main-classifier-code="EHIS_KOOL"></hois-classifier-value> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column" ng-hide="!application.isAbroad"> <md-input-container flex="60" flex-sm="100" flex-xs="100"> <label class="textInput">{{\'main.educationInstitution\' | translate}}</label> <hois-value value="application.abroadSchool"></hois-value> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column" ng-hide="!application.isAbroad"> <md-input-container flex="60" flex-sm="100" flex-xs="100"> <label>{{\'main.country\' | translate}}</label> <hois-classifier-value ng-model="application.country" main-classifier-code="RIIK"></hois-classifier-value> </md-input-container> </div> <div ng-include="\'application/templates/period.view.html\'" ng-init="labelStart=\'application.abroadStudiesStart\';labelEnd=\'application.abroadStudiesEnd\'"> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="60" flex-sm="100" flex-xs="100"> <label>{{\'main.purposeOfStudies\' | translate}}</label> <hois-classifier-value ng-model="application.abroadPurpose" main-classifier-code="VALISOPE_EESMARK"></hois-classifier-value> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="60" flex-sm="100" flex-xs="100"> <label>{{\'main.programmeOfStudies\' | translate}}</label> <hois-classifier-value ng-model="application.abroadProgramme" main-classifier-code="VALISKOOL_PROGRAMM"></hois-classifier-value> </md-input-container> </div> </div> <div> <div layout="column" flex> <div layout="row" class="top-margin"> <h2>{{\'main.subjects\' | translate}} </h2> </div> <table md-table class="secondary-table"> <thead md-head> <tr md-row> <th md-column><span>{{\'application.plannedSubject\' | translate}} *</span></th> <th md-column><span>{{\'application.substitutableSubject\' | translate}} *</span></th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="plannedSubject in application.plannedSubjects | orderBy: \'id\'" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell> {{plannedSubject.name}} </td> <td md-cell> {{subjectsListView(plannedSubject)}} </td> </tr> </tbody> </table> </div> </div> <div>&nbsp;<div></div></div>'),a.put("application/templates/period.html",'<div layout="row" class="horizontal-radio-group"> <div flex> <label class="common-label">{{\'application.periodType\' | translate}}&nbsp;*</label> <md-input-container> <md-radio-group name="isPeriod" ng-model="application.isPeriod" required ng-change="periodTypeChanged()" layout="row"> <md-radio-button ng-value="true" aria-label="period">{{ \'main.period\' | translate }}</md-radio-button> <md-radio-button ng-value="false" aria-label="date">{{ \'main.date\' | translate }}</md-radio-button> </md-radio-group> <div ng-if="applicationForm.$submitted" ng-messages="applicationForm.isPeriod.$error"> <div ng-message="required">{{\'main.messages.error.inputFieldIsRequired\' | translate}}</div> </div> </md-input-container> </div> </div> <div ng-show="!application.isPeriod" layout="row" layout-sm="column" layout-xs="column"> <div flex> <md-input-container> <label>{{labelStart | translate}}</label> <md-datepicker ng-model="application.startDate" md-min-date="now" md-open-on-focus ng-required="!application.isPeriod"></md-datepicker> </md-input-container> <md-input-container style="margin-left: 0px" flex-offset-xs="0" flex-offset-sm="0" flex-offset="5"> <label>{{labelEnd | translate}}</label> <md-datepicker ng-model="application.endDate" md-min-date="application.startDate" md-open-on-focus ng-required="!application.isPeriod"></md-datepicker> </md-input-container> </div> </div> <div ng-show="application.isPeriod" layout="row" layout-sm="column" layout-xs="column"> <div flex> <md-input-container> <label>{{labelStart | translate}}</label> <hois-select ng-model="application.studyPeriodStart" values="studyPeriods" show-property="display" ng-required="application.isPeriod"></hois-select> </md-input-container> <md-input-container style="margin-left: 0px" flex-offset-xs="0" flex-offset-sm="0" flex-offset="5"> <label>{{labelEnd | translate}}</label> <hois-select ng-model="application.studyPeriodEnd" values="studyPeriods" show-property="display" ng-required="application.isPeriod"></hois-select> </md-input-container> </div> </div>'),a.put("application/templates/period.view.html",'<div layout="row" layout-sm="column" layout-xs="column"> <md-input-container class="label-only" flex="60" flex-sm="100" flex-xs="100"> <label>{{\'application.periodType\' | translate}}</label> <hois-value value="application.isPeriod ? (\'main.period\' | translate) : (\'main.date\' | translate)"></hois-value> </md-input-container> </div> <div ng-show="!application.isPeriod" layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex> <label>{{labelStart | translate}}</label> <hois-value value="application.startDate | hoisDate"></hois-value> </md-input-container> <md-input-container style="margin-left: 0px" flex flex-offset-xs="0" flex-offset-sm="0" flex-offset="5"> <label>{{labelEnd | translate}}</label> <hois-value value="application.endDate | hoisDate"></hois-value> </md-input-container> </div> <div ng-show="application.isPeriod" layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex> <label>{{labelStart | translate}}</label> <hois-value value="studyPeriodView(application.studyPeriodStart)"></hois-value> </md-input-container> <md-input-container flex> <label>{{labelEnd | translate}}</label> <hois-value value="studyPeriodView(application.studyPeriodEnd)"></hois-value> </md-input-container> </div>'),a.put("baseModule/theme/basemodule.theme.edit.html",'<div aria-label="vocational curriculum implementation plan module theme add dialog" flex> <form name="themeForm" ng-cloak> <div class="ois-form-layout-padding nomargin" layout="column" ng-cloak> <md-input-container flex> <label>{{\'theme.name\' | translate}}</label> <input ng-model="theme.nameEt" type="text" required md-maxlength="255"> </md-input-container> <div layout="row"> <md-input-container> <label>{{\'theme.capacity\' | translate}} ({{\'basemodule.ekap\' | translate}})</label> <input ng-model="theme.credits" name="credits" type="number" min="0" max="999" pattern="^\\d+(\\.\\d{1})?$" ng-change="setDefaultHours()" required> <div ng-messages="themeForm.credits.$error" ng-show="themeForm.credits.$dirty"> <div ng-message="min"> {{\'main.messages.error.positive\' | translate}} </div> <div ng-message="max"> {{\'curriculum.error.max999\' | translate}} </div> <div ng-message="pattern"> {{\'stateCurriculum.error.decimalPresision\' | translate}} </div> </div> </md-input-container> <md-input-container> <label>{{\'theme.unit\' | translate}} ({{\'main.hour\' | translate}})</label> <input ng-model="theme.hours" name="hours" type="number" min="0" max="9999" pattern="^\\d+$" required ng-change="setDefaultCredits()"> <div ng-messages="themeForm.hours.$error" ng-show="theme.hours.$dirty"> <div ng-message="min"> {{\'main.messages.error.positive\' | translate}} </div> <div ng-message="max"> {{\'curriculum.error.max9999\' | translate}} </div> <div ng-message="pattern"> {{\'stateCurriculum.enter.credits.integer\' | translate}} </div> </div> </md-input-container> </div> <div flex> <fieldset tabindex="1"> <legend md-colors="{color: \'default-primary-800\'}" class="md-title-small">{{\'theme.capacityDistribution\' | translate}}</legend> <div layout="row" style="padding-bottom:1em" flex class="secondary-table-header"> <div flex="30">&nbsp;</div> <div flex="30">{{\'basemodule.capacity\' | translate}}</div> <div flex="40" layout="row">{{\'basemodule.contactStudy\' | translate}}</div> </div> <div ng-repeat="item in theme.capacities | orderBy: \'nameEt\' track by item.capacityType" layout="row" class="secondary-table-row"> <div flex="30" class="occupation-module-capacity">{{currentLanguageNameField(item)}}</div> <div flex="30"> <md-input-container flex> <input ng-model="item.hours" type="number" min="0" max="9999" pattern="^\\d+$" aria-label="capacity hours" class="small-input" ng-required="item.contact"> </md-input-container> </div> <div flex="40" layout="row"> <md-checkbox ng-model="item.contact" aria-label="capacity contact" class="occupation-module-capacity-contact"></md-checkbox> </div> </div> </fieldset> </div> <div>&nbsp;</div> <md-input-container flex> <label>{{\'basemodule.subthemes\' | translate}}</label> <textarea ng-model="theme.subthemes" md-maxlength="10000" max-rows="10"></textarea> </md-input-container> <md-input-container flex> <label>{{\'theme.connectionToStudyOutcome\' | translate}}</label> <md-select ng-model="theme.outcomes" md-option="out as (currentLanguageNameField(out.outcomeEt)) for out in theme.outcomes" multiple ng-model-options="{trackBy: \'$value.id\'}"> <md-option ng-repeat="outcome in theme.baseModule.outcomes" ng-value="outcome" aria-label="{{currentLanguage() === \'en\' ? outcome.outcomeEn : outcome.outcomeEt}}">{{currentLanguage() === \'en\' ? outcome.outcomeEn : outcome.outcomeEt}}</md-option> </md-select> </md-input-container> <div>&nbsp;</div> <div flex> <fieldset tabindex="2"> <legend md-colors="{color: \'default-primary-800\'}" class="md-title-small">{{\'basemodule.theme.gradeFormation\' | translate}}</legend> <div layout="column"> <div flex layout="row"> <span flex="30" class="common-label">{{\'theme.assessmentType\' | translate}}</span> <md-radio-group ng-model="theme.assessment" layout="row"> <md-radio-button ng-repeat="option in assessments | orderBy: \'nameEt\' track by option.code" ng-value="option.code" aria-label="{{ currentLanguageNameField(option) }}"> {{ currentLanguageNameField(option) }} </md-radio-button> <md-radio-button ng-value="null" aria-label="{{\'basemodule.theme.noAssessment\' | translate}}"> {{\'basemodule.theme.noAssessment\' | translate}} </md-radio-button> </md-radio-group> </div> <div>&nbsp;</div> <md-input-container flex ng-show="theme.assessment"> <label>{{\'basemodule.totalGradeDescription\' | translate}}</label> <textarea ng-model="theme.totalGradeDescription" md-maxlength="10000" max-rows="10" ng-required="theme.assessment"></textarea> </md-input-container> <div ng-show="theme.assessment === \'KUTSEHINDAMISVIIS_E\'" layout="column" flex> <md-input-container flex> <label>{{\'basemodule.grade3Description\' | translate}}</label> <textarea ng-model="theme.grade3Description" md-maxlength="10000" max-rows="10" ng-required="theme.assessment === \'KUTSEHINDAMISVIIS_E\'"></textarea> </md-input-container> <md-input-container flex> <label>{{\'basemodule.grade4Description\' | translate}}</label> <textarea ng-model="theme.grade4Description" md-maxlength="10000" max-rows="10" ng-required="theme.assessment === \'KUTSEHINDAMISVIIS_E\'"></textarea> </md-input-container> <md-input-container flex> <label>{{\'basemodule.grade5Description\' | translate}}</label> <textarea ng-model="theme.grade5Description" md-maxlength="10000" max-rows="10" ng-required="theme.assessment === \'KUTSEHINDAMISVIIS_E\'"></textarea> </md-input-container> </div> <div ng-show="theme.assessment === \'KUTSEHINDAMISVIIS_M\'" layout="column" flex> <md-input-container flex> <label>{{\'basemodule.gradeADescription\' | translate}}</label> <textarea ng-model="theme.passDescription" md-maxlength="10000" max-rows="2" ng-required="theme.assessment === \'KUTSEHINDAMISVIIS_M\'"></textarea> </md-input-container> </div> </div> </fieldset> </div> <div>&nbsp;</div> </div> <div style="padding-left: 14px"> <md-button class="md-raised md-primary" ng-click="save()">{{"main.button.save" | translate}}</md-button> <md-button class="md-raised" ng-if="theme.id" ng-click="delete()">{{"main.button.delete" | translate}}</md-button> <md-button class="md-raised" ng-click="back(getDefaultUrl(), themeForm)">{{"main.button.back" | translate}}</md-button> </div> </form> </div> <style>.md-select-menu-container {\r\n    max-width: -moz-calc(100vw - 1em);\r\n    max-width: -webkit-calc(100vw - 1em);\r\n    max-width: calc(100vw - 1em);\r\n  }</style>'),a.put("baseModule/theme/basemodule.theme.view.html",'<div aria-label="vocational curriculum implementation plan module theme add dialog" flex> <form name="themeForm" ng-cloak> <div class="ois-form-layout-padding nomargin" layout="column" ng-cloak> <md-input-container> <label>{{\'theme.name\' | translate}}</label> <input ng-model="theme.nameEt" type="text" disabled> </md-input-container> <div layout="row"> <md-input-container> <label>{{\'theme.capacity\' | translate}} ({{\'basemodule.ekap\' | translate}})</label> <input ng-model="theme.credits" name="credits" type="number" disabled> </md-input-container> <md-input-container> <label>{{\'theme.unit\' | translate}} ({{\'main.hour\' | translate}})</label> <input ng-model="theme.hours" name="hours" type="number" disabled> </md-input-container> </div> <div flex> <fieldset tabindex="1"> <legend md-colors="{color: \'default-primary-800\'}" class="md-title-small">{{\'theme.capacityDistribution\' | translate}}</legend> <div layout="row" style="padding-bottom:1em" flex class="secondary-table-header"> <div flex="30">&nbsp;</div> <div flex="30">{{\'basemodule.capacity\' | translate}}</div> <div flex="40" layout="row">{{\'basemodule.contactStudy\' | translate}}</div> </div> <div ng-repeat="item in theme.capacities | orderBy: \'nameEt\' track by item.capacityType" layout="row" class="secondary-table-row"> <div flex="30" class="occupation-module-capacity">{{currentLanguageNameField(item)}}</div> <div flex="30"> <md-input-container flex> <input ng-model="item.hours" type="number" min="0" max="9999" pattern="^\\d+$" aria-label="capacity hours" class="small-input" disabled> </md-input-container> </div> <div flex="40" layout="row"> <md-checkbox ng-model="item.contact" aria-label="capacity contact" class="occupation-module-capacity-contact" disabled></md-checkbox> </div> </div> </fieldset> </div> <div>&nbsp;</div> <md-input-container flex> <label>{{\'basemodule.subthemes\' | translate}}</label> <textarea ng-model="theme.subthemes" max-rows="10" disabled></textarea> </md-input-container> <md-input-container flex> <label>{{\'theme.connectionToStudyOutcome\' | translate}}</label> <md-select ng-model="theme.outcomes" multiple disabled md-option="out as (currentLanguageNameField(out.outcomeEt)) for out in theme.outcomes" multiple ng-model-options="{trackBy: \'$value.id\'}"> <md-option ng-repeat="outcome in theme.baseModule.outcomes" ng-value="outcome" aria-label="{{currentLanguage() === \'en\' ? outcome.outcomeEn : outcome.outcomeEt}}">{{currentLanguage() === \'en\' ? outcome.outcomeEn : outcome.outcomeEt}}</md-option> </md-select> </md-input-container> <div>&nbsp;</div> <div flex> <fieldset tabindex="2"> <legend md-colors="{color: \'default-primary-800\'}" class="md-title-small">{{\'basemodule.theme.gradeFormation\' | translate}}</legend> <div layout="column"> <div flex layout="row"> <span flex="30" class="common-label">{{\'theme.assessmentType\' | translate}}</span> <md-radio-group ng-model="theme.assessment" layout="row" disabled> <md-radio-button ng-repeat="option in assessments | orderBy: \'nameEt\' track by option.code" ng-value="option.code" aria-label="{{ currentLanguageNameField(option) }}"> {{ currentLanguageNameField(option) }} </md-radio-button> <md-radio-button ng-value="null" aria-label="{{\'basemodule.theme.noAssessment\' | translate}}"> {{\'basemodule.theme.noAssessment\' | translate}} </md-radio-button> </md-radio-group> </div> <div>&nbsp;</div> <md-input-container flex ng-show="theme.assessment"> <label>{{\'basemodule.totalGradeDescription\' | translate}}</label> <textarea ng-model="theme.totalGradeDescription" max-rows="10" disabled></textarea> </md-input-container> <div ng-show="theme.assessment === \'KUTSEHINDAMISVIIS_E\'" layout="column" flex> <md-input-container flex> <label>{{\'basemodule.grade3Description\' | translate}}</label> <textarea ng-model="theme.grade3Description" max-rows="10" disabled></textarea> </md-input-container> <md-input-container flex> <label>{{\'basemodule.grade4Description\' | translate}}</label> <textarea ng-model="theme.grade4Description" max-rows="10" disabled></textarea> </md-input-container> <md-input-container flex> <label>{{\'basemodule.grade5Description\' | translate}}</label> <textarea ng-model="theme.grade5Description" max-rows="10" disabled></textarea> </md-input-container> </div> <div ng-show="theme.assessment === \'KUTSEHINDAMISVIIS_M\'" layout="column" flex> <md-input-container flex> <label>{{\'basemodule.gradeADescription\' | translate}}</label> <textarea ng-model="theme.passDescription" max-rows="2" disabled></textarea> </md-input-container> </div> </div> </fieldset> </div> <div>&nbsp;</div> </div> <div style="padding-left: 14px"> <md-button class="md-raised md-primary" ng-click="edit()">{{"main.button.edit" | translate}}</md-button> <md-button class="md-raised" ng-click="back(getDefaultUrl())">{{"main.button.back" | translate}}</md-button> </div> </form> </div>'),a.put("curriculum/dialog/file.add.dialog.html",'<md-dialog aria-label="file add dialog" flex="40" flex-xs="100"> <form name="dialogForm" ng-cloak> <md-toolbar> <div class="md-toolbar-tools"> <h2>{{"main.addFile" | translate}}</h2> <span flex></span> <md-button class="md-icon-button" ng-click="cancel()"> <md-icon md-font-set="material-icons">close</md-icon> </md-button> </div> </md-toolbar> <md-dialog-content> <span flex></span> <div class="ois-form-layout" layout="column" layout-margin ng-cloak> <div layout="column"> <md-input-container flex> <label>{{\'ehis.fileType\' | translate}}</label> <hois-classifier-select ng-model="data.ehisFile" main-classifier-code="EHIS_FAIL" required model-value-attr="code" criteria="fileTypeCriteria"></hois-classifier-select> </md-input-container> <md-input-container flex> <lf-ng-md-file-input name="file" lf-files="data.file" lf-browse-label="{{\'main.addFile\' | translate}}" lf-remove-label="{{\'main.button.delete\' | translate}}" lf-placeholder="" lf-required lf-filesize="10MB"> </lf-ng-md-file-input> </md-input-container> <div ng-messages="dialogForm.file.$error"> <div class="invalid" ng-message="required">{{\'main.messages.error.selectFile\' | translate}}</div> <div ng-message="filesize" class="invalid">{{\'curriculum.error.fileSize\' | translate}}</div> </div> </div> </div> </md-dialog-content> <span flex></span> <md-dialog-actions layout="row" layout-align="start center"> <md-button class="md-raised md-primary" ng-click="submit()">{{"main.button.save" | translate}}</md-button> <md-button class="md-raised" ng-click="cancel()">{{"main.button.close" | translate}}</md-button> </md-dialog-actions> </form> </md-dialog>'),a.put("document/templates/diploma.confirm.dialog.html",'<md-dialog aria-label="grade add dialog" flex="30" flex-xs="100" ng-cloak> <md-dialog-content> <div class="md-dialog-content"> <div>{{\'document.confirm.check\' | translate}}</div> <form name="dialogForm"> <div layout="row" ng-repeat="form in forms"> <md-input-container flex="100" flex-sm="100" flex-xs="100"> <label>{{form.fullCode}} - {{form.fullname}}</label> <input type="number" ng-model="form.numeral" min="0" required> </md-input-container> </div> </form> <div>{{\'document.confirm.correct\' | translate}}</div> </div> </md-dialog-content> <md-dialog-actions layout="row" layout-align="start center"> <md-button ng-click="submit()" class="md-raised md-primary">{{\'document.confirm.yes\' | translate}}</md-button> <md-button ng-click="cancel()" class="md-raised">{{\'document.confirm.no\' | translate}}</md-button> </md-dialog-actions> </md-dialog>'),
a.put("document/templates/navbar.tmpl.html",'<md-nav-bar md-selected-nav-item="currentNavItem" nav-bar-aria-label="main selection"> <md-nav-item ng-if="isHigher" md-nav-href="#/documents/diplomas?_menu" name="document.diplomas">{{\'document.diplomas\' | translate}}</md-nav-item> <md-nav-item ng-if="isHigher" md-nav-href="#/documents/supplements?_menu" name="document.supplements">{{\'document.supplements\' | translate}}</md-nav-item> <md-nav-item ng-if="!isHigher" md-nav-href="#/documents/diplomas/vocational?_menu" name="document.diplomas.vocational">{{\'document.diplomasVocational\' | translate}}</md-nav-item> <md-nav-item ng-if="!isHigher" md-nav-href="#/documents/supplements/vocational?_menu" name="document.supplements.vocational">{{\'document.supplementsVocational\' | translate}}</md-nav-item> </md-nav-bar>'),a.put("finalProtocol/higher/final.higher.protocol.edit.html",'<div class="ois-form-layout-padding" ng-cloak> <div flex> <form ng-submit="save()" novalidate layout="column" name="finalProtocolForm"> <div ng-include="\'finalProtocol/templates/final.higher.protocol.header.tmpl.html\'"></div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="10" flex-lg="20" flex-md="20" flex-sm="100" flex-xs="100"> <label ng-if="protocol.isFinalThesis" class="required">{{\'finalProtocol.finalDateThesis\' | translate}}</label> <label ng-if="!protocol.isFinalThesis" class="required">{{\'finalProtocol.finalDateExam\' | translate}}</label> <md-datepicker ng-model="protocol.finalDate" ng-change="selectedFinalDateChanged()" ng-disabled="!formState.canEditProtocol" required></md-datepicker> </md-input-container> </div> <fieldset> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'finalProtocol.committee\' | translate}}</legend> <div flex="30" flex-sm="100" flex-xs="100"> <md-input-container style="width: 100%"> <label>{{\'stipend.committee\' | translate}}</label> <hois-select ng-model="protocol.committee" values="committees" ng-change="selectedCommitteeChanged()" ng-disabled="!formState.canEditProtocol"></hois-select> </md-input-container> </div> <md-table-container ng-if="committeeMembers"> <table md-table md-progress="protocol.$promise" class="secondary-table"> <thead md-head> <tr md-row> <th md-column>{{\'finalProtocol.name\' | translate}}</th> <th md-column>{{\'finalProtocol.role\' | translate}}</th> <th md-column>{{\'finalProtocol.present\' | translate}}</th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="row in committeeMembers | orderBy: \'memberName\'" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell>{{row.memberName}}</td> <td md-cell ng-if="row.isChairman">{{\'finalProtocol.chairman\' | translate}}</td> <td md-cell ng-if="!row.isChairman">{{\'finalProtocol.member\' | translate}}</td> <td md-cell> <md-checkbox aria-label="module" ng-model="row.isPresent" ng-disabled="!formState.canEditProtocol"></md-checkbox> </td> </tr> </tbody> </table> </md-table-container> </fieldset> <div>&nbsp;</div> <div> <div flex> <md-table-container> <table md-table md-progress="protocol.$promise" multiple> <thead md-head> <tr md-row> <th md-column>{{\'finalProtocol.id\' | translate}}</th> <th md-column>{{\'student.label\' | translate}}</th> <th md-column>{{\'student.idcode\' | translate}}</th> <th md-column>{{\'finalProtocol.studentGroup\' | translate}}</th> <th md-column>{{\'finalProtocol.grade\' | translate}}</th> <th md-column ng-if="formState.canChangeConfirmedProtocolGrade">{{\'finalProtocol.changeReason\' | translate}}</th> <th md-column ng-repeat="grade in protocol.curriculumGrades">{{currentLanguageNameField(grade)}}</th> <th md-column ng-repeat="occupation in protocol.occupations">{{currentLanguageNameField(occupation)}}</th> <th md-column></th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="row in protocol.protocolStudents | orderBy: \'fullname\' track by $index" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell>{{$index + 1}}</td> <td md-cell>{{row.fullname}}</td> <td md-cell>{{row.idcode}}</td> <td md-cell>{{row.studentGroup}}</td> <td md-cell> <hois-select style="margin:0px;width:2em" ng-model="row.grade" values="grades" show-property="{{auth.school.letterGrades ? \'value2\' : \'value\'}}" value-property="code" aria-label="grade" ng-change="gradeChanged(row)" ng-disabled="!formState.canEditProtocol"></hois-select> </td> <td md-cell ng-if="formState.canChangeConfirmedProtocolGrade"> <md-input-container ng-if="row.gradeHasChanged"> <input ng-model="row.addInfo" aria-label="addInfo" type="text" md-maxlength="255" ng-change="addInfoChanged(row);" required> </md-input-container> <span ng-if="row.addInfo && !row.gradeHasChanged"> {{row.addInfo}} </span> </td> <td md-cell ng-repeat="grade in protocol.curriculumGrades"> <md-checkbox ng-click="setCurriculumGrade(row, grade.id)" ng-checked="grade.id === row.curriculumGrade.id" ng-disabled="!formState.canEditProtocol" aria-label="{{currentLanguageNameField(grade)}}"></md-checkbox> </td> <td md-cell ng-repeat="occupation in protocol.occupations"> <md-checkbox ng-model="row.occupations[occupation.code].granted" aria-label="{{occupation.code}}" ng-disabled="!formState.canEditProtocol || !row.canGrantOccupation" ng-change="setOccupation(row, occupation.code)"></md-checkbox> {{row.occupations[occupation.code].certificateNr}} </td> <td md-cell> <a ng-if="row.canBeDeleted && formState.canAddDeleteStudents" ng-click="deleteProtocolStudent(row)" class="remove">&times;</a> </td> </tr> </tbody> </table> </md-table-container> </div> </div> <div>&nbsp;</div> <div layout="row"> <md-button ng-if="formState.canEditProtocol && protocol.status.code !== \'PROTOKOLL_STAATUS_K\'" class="md-raised md-primary" type="submit">{{\'main.button.save\' | translate}}</md-button> <md-button ng-if="formState.canConfirm" class="md-raised md-primary" ng-click="confirm()">{{\'main.button.confirm\' | translate}}</md-button> <md-button ng-if="protocol.canBeDeleted" class="md-raised" ng-click="delete()">{{\'main.button.delete\' | translate}}</md-button> <a ng-show="formState.protocolPdfUrl" ng-href="{{formState.protocolPdfUrl}}" target="_blank" class="md-button md-raised">{{\'main.button.print\' | translate}}</a> <a ng-show="protocol.oisFile" ng-href="{{getUrl(protocol.oisFile, \'protocol\')}}" target="_blank" rel="noopener noreferrer" class="md-button md-raised">{{\'finalProtocol.downloadSigned\' | translate}}</a> <md-button class="md-raised" ng-click="back(\'#/finalHigherProtocols/\', finalProtocolForm)">{{\'main.button.back\' | translate}}</md-button> </div> </form> </div> </div>'),a.put("finalProtocol/higher/final.higher.protocol.list.html",'<div class="ois-form-layout-padding ois-form-layout" ng-cloak> <div flex> <fieldset> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'main.searchlabel\' | translate}}</legend> <form name="searchForm" ng-submit="searchForm.$valid && loadData()" novalidate class="nomargin"> <div ng-if="auth.isAdmin()" layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="50" flex-sm="100" flex-xs="100"> <label>{{\'finalThesis.student\' | translate}}</label> <input ng-model="criteria.studentName" type="text" md-maxlength="255"> </md-input-container> <md-input-container flex="50" flex-sm="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> </md-input-container> </div> <div ng-if="auth.isAdmin()" layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="50" flex-sm="100" flex-xs="100"> <label>{{\'finalProtocol.protocolType\' | translate}}</label> <md-select ng-model="criteria.isFinalThesis" aria-label="{{\'finalProtocol.protocolType\' | translate}}"> <md-option md-option-empty></md-option> <md-option ng-value="true">{{\'finalProtocol.finalThesis\' | translate}}</md-option> <md-option ng-value="false">{{\'finalProtocol.finalExam\' | translate}}</md-option> </md-select> </md-input-container> <md-input-container flex="50" flex-sm="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label class="textInput">{{\'finalProtocol.protocolStatus\' | translate}}</label> <hois-classifier-select ng-model="criteria.status" main-classifier-code="PROTOKOLL_STAATUS" model-value-attr="code"></hois-classifier-select> </md-input-container> </div> <div ng-if="auth.isTeacher()" layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="50" flex-sm="100" flex-xs="100"> <label>{{\'finalThesis.student\' | translate}}</label> <input ng-model="criteria.studentName" type="text" md-maxlength="255"> </md-input-container> <md-input-container flex="50" flex-sm="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label class="textInput">{{\'finalProtocol.protocolStatus\' | translate}}</label> <hois-classifier-select ng-model="criteria.status" main-classifier-code="PROTOKOLL_STAATUS" model-value-attr="code"></hois-classifier-select> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="50" flex-sm="100" flex-xs="100"> <label class="textInput">{{\'finalProtocol.protocolNr\' | translate}}</label> <input type="text" ng-model="criteria.protocolNr" md-maxlength="255"> </md-input-container> <md-input-container flex="50" flex-sm="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label class="textInput">{{\'higherProtocol.subject\' | translate}}</label> <input type="text" ng-model="criteria.subject" md-maxlength="255"> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <div flex="50" flex-sm="100" flex-xs="100"> <div layout="column" flex> <div layout="row" flex> <md-input-container> <label>{{\'finalProtocol.insertedFrom\' | translate}}</label> <md-datepicker ng-model="criteria.insertedFrom" md-max-date="criteria.insertedThru"></md-datepicker> </md-input-container> <md-input-container flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'finalProtocol.insertedThru\' | translate}}</label> <md-datepicker ng-model="criteria.insertedThru" md-min-date="criteria.insertedFrom"></md-datepicker> </md-input-container> </div> </div> </div> <div flex="50" flex-sm="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <div layout="column" flex> <div layout="row" flex> <md-input-container> <label>{{\'finalProtocol.confirmedFrom\' | translate}}</label> <md-datepicker ng-model="criteria.confirmDateFrom" md-max-date="criteria.confirmDateThru"></md-datepicker> </md-input-container> <md-input-container flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'finalProtocol.confirmedThru\' | translate}}</label> <md-datepicker ng-model="criteria.confirmDateThru" md-min-date="criteria.confirmDateFrom"></md-datepicker> </md-input-container> </div> </div> </div> </div> <div layout="row"> <md-button type="submit" class="md-raised md-primary">{{\'main.button.search\' | translate}}</md-button> <md-button class="md-raised" ng-click="clearCriteria()">{{\'main.button.clear\' | translate}}</md-button> <md-button class="md-raised" ng-href="#/finalHigherProtocols/exam/new" ng-if="formState.canCreateProtocol">{{\'finalProtocol.addFinalExamProtocol\' | translate}}</md-button> <md-button class="md-raised" ng-href="#/finalHigherProtocols/thesis/new" ng-if="formState.canCreateProtocol && auth.isAdmin()">{{\'finalProtocol.addFinalThesisProtocol\' | translate}}</md-button> </div> <div flex-xs="0" flex-gt-xs="0" flex-gt-sm="50"></div> </form> </fieldset> </div> </div> <div layout-padding> <div flex> <md-table-container> <table md-table md-progress="tabledata.$promise"> <thead md-head md-order="criteria.order" md-on-reorder="loadData"> <tr md-row> <th md-column md-order-by="2">{{\'finalProtocol.protocolNr\' | translate}}</th> <th md-column ng-if="auth.isAdmin()" md-order-by="3">{{\'finalProtocol.protocolType\' | translate}}</th> <th md-column md-order-by="4">{{\'finalProtocol.status\' | translate}}</th> <th md-column md-order-by="{{currentLanguage()===\'en\' ? \'6, 8, 9\' : \'6, 7, 9\'}}">{{\'finalProtocol.subject\' | translate}}</th> <th md-column md-order-by="11, 12, 13">{{\'finalProtocol.committeeChairman\' | translate}}</th> <th md-column md-order-by="14">{{\'finalProtocol.insertedDate\' | translate}}</th> <th md-column md-order-by="15">{{\'finalProtocol.confirmedDate\' | translate}}</th> <th md-column md-order-by="16">{{\'finalProtocol.confirmer\' | translate}}</th> <th md-column></th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="row in tabledata.content" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell> <a ng-href="#/finalHigherProtocols/{{::row.id}}/view">{{::row.protocolNr}}</a> </td> <td md-cell ng-if="auth.isAdmin()"> <span ng-if="row.isFinalThesis">{{\'finalProtocol.finalThesis\' | translate}}</span> <span ng-if="!row.isFinalThesis">{{\'finalProtocol.finalExam\' | translate}}</span> </td> <td md-cell>{{currentLanguageNameField(row.status)}}</td> <td md-cell>{{currentLanguageNameField(row.subject)}}</td> <td md-cell>{{row.committeeChairman}}</td> <td md-cell>{{row.inserted | hoisDate}}</td> <td md-cell>{{row.confirmDate | hoisDate}}</td> <td md-cell>{{::row.confirmer}}</td> <td md-cell> <md-button ng-if="row.canChange && row.status.code !== \'PROTOKOLL_STAATUS_K\'" md-no-ink class="md-primary change-button" ng-href="#/finalHigherProtocols/{{::row.id}}/edit">{{\'main.button.change\' | translate}}</md-button> </td> </tr> </tbody> </table> </md-table-container> <md-table-pagination md-limit="criteria.size" md-limit-options="[10, 20, 50]" md-page="criteria.page" md-total="{{tabledata.totalElements}}" md-on-paginate="loadData" md-label="{page: \'{{\'main.page\' | translate}}:\', rowsPerPage: \'{{\'main.rowPerPage\' | translate}}:\', of: \'{{\'main.of\' | translate}}\'}" md-page-select></md-table-pagination> </div> </div>'),a.put("finalProtocol/higher/final.higher.protocol.new.html",'<div class="ois-form-layout-padding" ng-cloak> <div flex> <form ng-submit="submit()" novalidate layout="column" name="finalProtocolNewForm"> <div> <div ng-if="!formState.isFinalThesis" layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="100" flex-sm="100" flex-xs="100"> <label class="textInput">{{\'finalProtocol.studyPeriod\' | translate}}</label> <hois-select ng-model="formState.studyPeriod" values="studyPeriods" ng-change="studyPeriodChanged()" required autofocus></hois-select> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex flex-sm="100"> <label class="textInput">{{\'finalProtocol.curriculum\' | translate}}</label> <md-select ng-model="formState.curriculum" ng-change="curriculumChanged()" required> <md-option ng-repeat="curriculum in curriculums | orderBy: currentLanguageNameField()" ng-value="curriculum.id">{{currentLanguageNameField(curriculum)}}</md-option> </md-select> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex flex-sm="100"> <label class="textInput">{{\'finalProtocol.subject\' | translate}}</label> <md-select ng-model="formState.subject" ng-change="subjectChanged()" required> <md-option ng-repeat="subject in formState.subjects | orderBy: currentLanguageNameField()" ng-value="subject">{{currentLanguageNameField(subject)}}</md-option> </md-select> </md-input-container> </div> <br> <div flex> <md-table-container> <table md-table md-progress="tabledata.$promise" md-row-select multiple ng-model="formState.selectedStudents"> <thead md-head> <tr md-row flex> <th md-column> <span>{{\'student.label\' | translate}}</span> </th> <th md-column> <span>{{\'student.idcode\' | translate}}</span> </th> </tr> </thead> <tbody md-body> <tr md-row md-select="row.studentId" ng-repeat="row in tabledata.content | orderBy: \'fullname\'" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell>{{row.fullname}}</td> <td md-cell>{{row.idcode}}</td> </tr> </tbody> </table> </md-table-container> </div> <br> <div layout="row"> <md-button class="md-raised md-primary" type="submit">{{\'finalProtocol.create\' | translate}}</md-button> <md-button class="md-raised" ng-click="back(\'#/finalHigherProtocols/\')">{{\'main.button.back\' | translate}}</md-button> </div> </div> </form> </div> </div>'),a.put("finalProtocol/higher/final.higher.protocol.view.html",'<div class="ois-form-layout-padding" ng-cloak> <div flex> <form layout="column" name="finalProtocolForm"> <div ng-include="\'finalProtocol/templates/final.higher.protocol.header.tmpl.html\'"></div> <div class="form-readonly"> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="20" flex-sm="100" flex-xs="100"> <label ng-if="protocol.isFinalThesis">{{\'finalProtocol.finalDateThesis\' | translate}}</label> <label ng-if="!protocol.isFinalThesis">{{\'finalProtocol.finalDateExam\' | translate}}</label> <hois-value value="protocol.finalDate | hoisDate"></hois-value> </md-input-container> </div> </div> <fieldset ng-if="committeeMembers"> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'finalProtocol.committee\' | translate}}</legend> <md-table-container> <table md-table md-progress="protocol.$promise" class="secondary-table"> <thead md-head> <tr md-row> <th md-column>{{\'finalProtocol.name\' | translate}}</th> <th md-column>{{\'finalProtocol.role\' | translate}}</th> <th md-column>{{\'finalProtocol.present\' | translate}}</th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="row in committeeMembers | orderBy: \'memberName\'" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell>{{row.memberName}}</td> <td md-cell ng-if="row.isChairman">{{\'finalProtocol.chairman\' | translate}}</td> <td md-cell ng-if="!row.isChairman">{{\'finalProtocol.member\' | translate}}</td> <td md-cell> <md-checkbox aria-label="module" ng-model="row.isPresent" disabled></md-checkbox> </td> </tr> </tbody> </table> </md-table-container> </fieldset> <div>&nbsp;</div> <div> <div flex> <md-table-container> <table md-table md-progress="protocol.$promise" multiple> <thead md-head> <tr md-row> <th md-column>{{\'finalProtocol.id\' | translate}}</th> <th md-column>{{\'student.label\' | translate}}</th> <th md-column>{{\'student.idcode\' | translate}}</th> <th md-column>{{\'finalProtocol.studentGroup\' | translate}}</th> <th md-column>{{\'finalProtocol.grade\' | translate}}</th> <th md-column ng-if="protocol.status.code === \'PROTOKOLL_STAATUS_K\'">{{\'finalProtocol.changeReason\' | translate}}</th> <th md-column>{{\'finalProtocol.givenCurriculumGrade\' | translate}}</th> <th md-column>{{\'finalProtocol.givenOccupation\' | translate}}</th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="row in protocol.protocolStudents | orderBy: \'fullname\' track by $index" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell>{{$index + 1}}</td> <td md-cell>{{row.fullname}}</td> <td md-cell>{{row.idcode}}</td> <td md-cell>{{row.studentGroup}}</td> <td md-cell> <span ng-class="{badResult: !gradeUtil.isPositive(row.grade, auth.school.letterGrades)}">{{gradeValue(row.grade)}}</span> </td> <td md-cell ng-if="protocol.status.code === \'PROTOKOLL_STAATUS_K\'">{{row.addInfo}}</td> <td md-cell>{{currentLanguageNameField(row.curriculumGrade)}}</td> <td md-cell> <span ng-repeat="occupation in protocol.occupations track by $index"> <span ng-if="row.occupations[occupation.code].granted"> <span>{{currentLanguageNameField(occupation)}}</span> <span ng-if="row.occupations[occupation.code].certificateNr">({{row.occupations[occupation.code].certificateNr}})</span> &nbsp; </span> </span> </td> </tr> </tbody> </table> </md-table-container> </div> </div> <div>&nbsp;</div> <div layout="row"> <md-button ng-if="formState.canEditProtocol" class="md-primary md-raised" ng-href="#/finalHigherProtocols/{{::protocol.id}}/edit">{{\'main.button.change\' | translate}}</md-button> <a ng-show="formState.protocolPdfUrl" ng-href="{{formState.protocolPdfUrl}}" target="_blank" class="md-button md-raised">{{\'main.button.print\' | translate}}</a> <a ng-show="protocol.oisFile" ng-href="{{getUrl(protocol.oisFile, \'protocol\')}}" target="_blank" rel="noopener noreferrer" class="md-button md-raised">{{\'finalProtocol.downloadSigned\' | translate}}</a> <md-button class="md-raised" ng-click="back(\'#/finalHigherProtocols/\')">{{\'main.button.back\' | translate}}</md-button> </div> </form> </div> </div>'),a.put("finalProtocol/templates/final.higher.protocol.header.tmpl.html",'<div class="form-readonly"> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex flex-sm="100" flex-xs="100"> <label>{{\'finalProtocol.protocolNr\' | translate}}</label> <hois-value value="protocol.protocolNr"></hois-value> </md-input-container> <md-input-container flex flex-sm="100" flex-xs="100"> <label>{{\'finalProtocol.status\' | translate}}</label> <hois-value value="currentLanguageNameField(protocol.status)"></hois-value> </md-input-container> <md-input-container ng-if="!protocol.isFinalThesis" flex flex-sm="100" flex-xs="100"> <label>{{\'finalProtocol.studyPeriod\' | translate}}</label> <hois-value value="currentLanguageNameField(protocol.studyPeriod)"></hois-value> </md-input-container> <md-input-container flex flex-sm="100" flex-xs="100"> <label>{{\'finalProtocol.inserted\' | translate}} / {{\'moduleProtocol.confirmDate\' | translate}}</label> <hois-value ng-if="protocol.confirmDate" value="(protocol.inserted | hoisDate).concat(\' / \').concat(protocol.confirmDate | hoisDate)"></hois-value> <hois-value ng-if="!protocol.confirmDate" value="protocol.inserted | hoisDate"></hois-value> </md-input-container> <md-input-container flex flex-sm="100" flex-xs="100"> <label>{{\'finalProtocol.confirmer\' | translate}}</label> <hois-value value="protocol.confirmedBy"></hois-value> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex flex-sm="100" flex-xs="100"> <label>{{\'finalProtocol.subject\' | translate}}</label> <hois-value value="currentLanguageNameField(protocol.subject)"></hois-value> </md-input-container> <md-input-container flex flex-sm="100" flex-xs="100"> <label>{{\'finalProtocol.studyLevel\' | translate}}</label> <hois-value value="currentLanguageNameField(protocol.studyLevel)"></hois-value> </md-input-container> <md-input-container flex flex-sm="100" flex-xs="100"> <label>{{\'finalProtocol.credits\' | translate}}</label> <hois-value value="protocol.subject.credits + \' \' + (\'finalProtocol.higherCreditsUnit\' | translate)"></hois-value> </md-input-container> <md-input-container flex flex-sm="100" flex-xs="100"> <label>{{\'finalProtocol.assessment\' | translate}}</label> <hois-classifier-value ng-model="protocol.subject.assessment" main-classifier-code="HINDAMISVIIS"></hois-classifier-value> </md-input-container> <md-input-container ng-if="!protocol.isFinalThesis" flex flex-sm="100" flex-xs="100"> <label>{{auth.higher ? (\'finalProtocol.teacherHigher\' | translate) : (\'finalProtocol.teacherVocational\' | translate)}}</label> <hois-value value="protocol.teachers.join(\', \')"></hois-value> </md-input-container> </div> <br> </div>'),a.put("finalProtocol/templates/final.protocol.add.student.dialog.html",'<md-dialog aria-label="add student dialog"> <form name="dialogForm" ng-submit="loadData()" novalidate ng-cloak> <md-toolbar> <div class="md-toolbar-tools"> <h2>{{\'finalProtocol.addStudents\' | translate}}</h2> <span flex></span> <md-button class="md-icon-button" ng-click="cancel()"> <md-icon md-font-set="material-icons">close</md-icon> </md-button> </div> </md-toolbar> <md-dialog-content> <div class="md-dialog-content"> <div layout-padding> <div flex> <md-table-container> <table md-table md-progress="tabledata.$promise" md-row-select multiple ng-model="selectedStudents"> <thead md-head md-order="criteria.order" md-on-reorder="loadData"> <tr md-row flex> <th md-column> <span>{{\'student.label\' | translate}}</span> </th> <th md-column> <span>{{\'student.idcode\' | translate}}</span> </th> <th md-column> <span>{{\'main.status\' | translate}}</span> </th> </tr> </thead> <tbody md-body> <tr md-row md-select="row.studentId" ng-repeat="row in tabledata.content | orderBy: \'fullname\'" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell>{{row.fullname}}</td> <td md-cell>{{row.idcode}}</td> <td md-cell>{{currentLanguageNameField(row.status)}}</td> </tr> </tbody> </table> </md-table-container> </div> </div> </div> </md-dialog-content> <span flex></span> <md-dialog-actions layout="row" layout-align="start center"> <md-button class="md-raised md-primary" ng-click="submit()">{{\'finalProtocol.addStudents\' | translate}}</md-button> <md-button class="md-raised" ng-click="cancel()">{{"main.button.close" | translate}}</md-button> </md-dialog-actions> </form> </md-dialog>'),a.put("finalProtocol/templates/final.protocol.mobile.sign.dialog.html",'<md-dialog> <form> <md-dialog-content> <div class="md-dialog-content" layout="column" layout-align="center center"> <p>{{ \'finalProtocol.mobileSign.instructions\' | translate }}</p> <h1>{{challengeID}}</h1> </div> </md-dialog-content> </form> </md-dialog>'),a.put("finalProtocol/templates/final.vocational.protocol.header.tmpl.html",'<div class="form-readonly"> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex flex-sm="100" flex-xs="100"> <label>{{\'finalProtocol.protocolNr\' | translate}}</label> <hois-value value="protocol.protocolNr"></hois-value> </md-input-container> <md-input-container flex flex-sm="100" flex-xs="100"> <label>{{\'finalProtocol.status\' | translate}}</label> <hois-value value="currentLanguageNameField(protocol.status)"></hois-value> </md-input-container> <md-input-container flex flex-sm="100" flex-xs="100"> <label>{{\'finalProtocol.studyPeriod\' | translate}}</label> <hois-value value="currentLanguageNameField(protocol.protocolVdata.studyYear)"></hois-value> </md-input-container> <md-input-container flex flex-sm="100" flex-xs="100"> <label>{{\'finalProtocol.inserted\' | translate}} / {{\'moduleProtocol.confirmDate\' | translate}}</label> <hois-value ng-if="protocol.confirmDate" value="(protocol.inserted | hoisDate).concat(\' / \').concat(protocol.confirmDate | hoisDate)"></hois-value> <hois-value ng-if="!protocol.confirmDate" value="protocol.inserted | hoisDate"></hois-value> </md-input-container> <md-input-container flex flex-sm="100" flex-xs="100"> <label>{{\'finalProtocol.confirmer\' | translate}}</label> <hois-value value="protocol.confirmer"></hois-value> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex flex-sm="100" flex-xs="100"> <label>{{\'finalProtocol.implementationPlan\' | translate}}</label> <hois-value value="currentLanguageNameField(protocol.protocolVdata.curriculumVersion)"></hois-value> </md-input-container> <md-input-container flex flex-sm="100" flex-xs="100"> <label>{{\'finalProtocol.module\' | translate}}</label> <hois-value value="currentLanguageNameField(protocol.protocolVdata.curriculumVersionOccupationModule)" href-value="\'#/occupationModule/\' + protocol.protocolVdata.curriculum + \'/\' + protocol.protocolVdata.curriculumVersion.id + \'/\' + protocol.protocolVdata.curriculumModule + \'/\' + protocol.protocolVdata.curriculumVersionOccupationModule.id + \'/view\'"></hois-value> </md-input-container> <md-input-container flex flex-sm="100" flex-xs="100"> <label>{{\'finalProtocol.credits\' | translate}}</label> <hois-value value="protocol.protocolVdata.moduleCredits + \' \' + (\'finalProtocol.vocationalCreditsUnit\' | translate)"></hois-value> </md-input-container> <md-input-container flex flex-sm="100" flex-xs="100"> <label>{{\'finalProtocol.assessment\' | translate}}</label> <hois-classifier-value ng-model="protocol.protocolVdata.assessment" main-classifier-code="KUTSEHINDAMISVIIS"></hois-classifier-value> </md-input-container> <md-input-container flex flex-sm="100" flex-xs="100"> <label>{{auth.higher ? (\'finalProtocol.teacherHigher\' | translate) : (\'finalProtocol.teacherVocational\' | translate)}}</label> <hois-value value="currentLanguageNameField(protocol.protocolVdata.teacher)"></hois-value> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="20" flex-sm="100" flex-xs="100"> <label>{{\'finalProtocol.studyLevel\' | translate}}</label> <hois-value value="currentLanguageNameField(protocol.studyLevel)"></hois-value> </md-input-container> </div> <br> </div>'),a.put("finalProtocol/vocational/final.vocational.protocol.edit.html",'<div class="ois-form-layout-padding" ng-cloak> <div flex> <form ng-submit="save()" novalidate layout="column" name="finalProtocolForm"> <div ng-include="\'finalProtocol/templates/final.vocational.protocol.header.tmpl.html\'"></div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="10" flex-lg="20" flex-md="20" flex-sm="100" flex-xs="100"> <label ng-if="protocol.isFinalThesis" class="required">{{\'finalProtocol.finalDateThesis\' | translate}}</label> <label ng-if="!protocol.isFinalThesis" class="required">{{\'finalProtocol.finalDateExam\' | translate}}</label> <md-datepicker ng-model="protocol.finalDate" ng-change="selectedFinalDateChanged()" ng-disabled="!formState.canEditProtocol" required></md-datepicker> </md-input-container> </div> <fieldset> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'finalProtocol.committee\' | translate}}</legend> <div flex="30" flex-sm="100" flex-xs="100"> <md-input-container style="width: 100%"> <label>{{\'stipend.committee\' | translate}}</label> <hois-select ng-model="protocol.committee" values="committees" ng-change="selectedCommitteeChanged()" ng-disabled="!formState.canEditProtocol"></hois-select> </md-input-container> </div> <md-table-container ng-if="committeeMembers"> <table md-table md-progress="protocol.$promise" class="secondary-table"> <thead md-head> <tr md-row> <th md-column>{{\'finalProtocol.name\' | translate}}</th> <th md-column>{{\'finalProtocol.role\' | translate}}</th> <th md-column>{{\'finalProtocol.present\' | translate}}</th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="row in committeeMembers | orderBy: \'memberName\'" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell>{{row.memberName}}</td> <td md-cell ng-if="row.isChairman">{{\'finalProtocol.chairman\' | translate}}</td> <td md-cell ng-if="!row.isChairman">{{\'finalProtocol.member\' | translate}}</td> <td md-cell> <md-checkbox aria-label="module" ng-model="row.isPresent" ng-disabled="!formState.canEditProtocol"></md-checkbox> </td> </tr> </tbody> </table> </md-table-container> </fieldset> <div>&nbsp;</div> <div> <div flex> <md-table-container> <table md-table md-progress="protocol.$promise" multiple> <thead md-head> <tr md-row> <th md-column>{{\'finalProtocol.id\' | translate}}</th> <th md-column>{{\'student.label\' | translate}}</th> <th md-column ng-if="protocol.isFinalThesis">{{\'finalProtocol.theme\' | translate}}</th> <th md-column>{{\'finalProtocol.grade\' | translate}}</th> <th md-column ng-if="formState.canChangeConfirmedProtocolGrade">{{\'finalProtocol.changeReason\' | translate}}</th> <th md-column ng-repeat="occupation in protocol.occupations">{{currentLanguageNameField(occupation)}}</th> <th md-column></th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="row in protocol.protocolStudents | orderBy: \'fullname\' track by $index" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell>{{$index + 1}}</td> <td md-cell>{{row.fullname}}</td> <td md-cell ng-if="protocol.isFinalThesis">{{row.theme.nameEt}}</td> <td md-cell> <hois-select style="margin:0px;width:2em" ng-model="row.grade" values="grades" show-property="value" value-property="code" aria-label="grade" ng-change="gradeChanged(row)" ng-disabled="!formState.canEditProtocol"></hois-select> </td> <td md-cell ng-if="formState.canChangeConfirmedProtocolGrade"> <md-input-container ng-if="row.gradeHasChanged"> <input ng-model="row.addInfo" aria-label="addInfo" type="text" md-maxlength="255" ng-change="addInfoChanged(row);" required> </md-input-container> <span ng-if="row.addInfo && !row.gradeHasChanged"> {{row.addInfo}} </span> </td> <td md-cell ng-repeat="occupation in protocol.occupations"> <md-checkbox ng-model="row.occupations[occupation.code].granted" aria-label="{{occupation.code}}" ng-disabled="!formState.canEditProtocol || !occupation.isOccupationGrant || (occupation.isOccupationGrant && (row.occupations[occupation.code].ceritificateId != null))"></md-checkbox> {{row.occupations[occupation.code].certificateNr}} </td> <td md-cell> <a ng-if="row.canBeDeleted && formState.canAddDeleteStudents" ng-click="deleteProtocolStudent(row)" class="remove">&times;</a> </td> </tr> </tbody> </table> </md-table-container> </div> </div> <div>&nbsp;</div> <div layout="row"> <md-button ng-if="formState.canEditProtocol && protocol.status.code !== \'PROTOKOLL_STAATUS_K\'" class="md-raised md-primary" type="submit">{{\'main.button.save\' | translate}}</md-button> <md-button ng-if="formState.canAddDeleteStudents" class="md-raised" ng-click="addProtocolStudents()">{{\'finalProtocol.addStudents\' | translate}}</md-button> <md-button ng-if="formState.canConfirm" class="md-raised md-primary" ng-click="confirm()">{{\'main.button.confirm\' | translate}}</md-button> <md-button ng-if="protocol.canBeDeleted" class="md-raised" ng-click="delete()">{{\'main.button.delete\' | translate}}</md-button> <a ng-show="formState.protocolPdfUrl" ng-href="{{formState.protocolPdfUrl}}" target="_blank" class="md-button md-raised">{{\'main.button.print\' | translate}}</a> <a ng-show="protocol.oisFile" ng-href="{{getUrl(protocol.oisFile, \'protocol\')}}" target="_blank" rel="noopener noreferrer" class="md-button md-raised">{{\'finalProtocol.downloadSigned\' | translate}}</a> <md-button class="md-raised" ng-click="back(\'#/finalVocationalProtocols/\', finalProtocolForm)">{{\'main.button.back\' | translate}}</md-button> </div> </form> </div> </div>'),
a.put("finalProtocol/vocational/final.vocational.protocol.list.html",'<div class="ois-form-layout-padding ois-form-layout" ng-cloak> <div flex> <fieldset> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'main.searchlabel\' | translate}}</legend> <form name="searchForm" ng-submit="load()" novalidate class="nomargin"> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="50" flex-sm="100" flex-xs="100"> <label class="textInput">{{\'finalProtocol.studyYear\' | translate}}</label> <hois-select ng-model="criteria.studyYear" type="studyyear" select-current-study-year required autofocus></hois-select> </md-input-container> <md-input-container flex="50" flex-sm="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'finalThesis.student\' | translate}}</label> <input ng-model="criteria.studentName" type="text" md-maxlength="255"> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="50" flex-sm="100" flex-xs="100"> <label>{{\'finalProtocol.protocolType\' | translate}}</label> <md-select ng-model="criteria.isFinalThesis" aria-label="{{\'finalProtocol.protocolType\' | translate}}"> <md-option md-option-empty></md-option> <md-option ng-value="true">{{\'finalProtocol.finalThesis\' | translate}}</md-option> <md-option ng-value="false">{{\'finalProtocol.finalExam\' | translate}}</md-option> </md-select> </md-input-container> <md-input-container flex="50" flex-sm="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label class="textInput">{{\'finalProtocol.protocolStatus\' | translate}}</label> <hois-classifier-select ng-model="criteria.status" main-classifier-code="PROTOKOLL_STAATUS" model-value-attr="code"></hois-classifier-select> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="50" flex-sm="100" flex-xs="100"> <label class="textInput">{{\'finalProtocol.protocolNr\' | translate}}</label> <input type="text" ng-model="criteria.protocolNr" md-maxlength="255"> </md-input-container> <div flex="50" flex-sm="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <hois-autocomplete label="finalProtocol.module" ng-model="criteria.moduleObject" method="vocationalmodules"></hois-autocomplete> </div> </div> <div layout="row" layout-sm="column" layout-xs="column"> <div flex="50" flex-sm="100" flex-xs="100"> <div layout="column" flex> <div layout="row" flex> <md-input-container> <label>{{\'finalProtocol.insertedFrom\' | translate}}</label> <md-datepicker ng-model="criteria.insertedFrom" md-max-date="criteria.insertedThru"></md-datepicker> </md-input-container> <md-input-container flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'finalProtocol.insertedThru\' | translate}}</label> <md-datepicker ng-model="criteria.insertedThru" md-min-date="criteria.insertedFrom"></md-datepicker> </md-input-container> </div> </div> </div> <div flex="50" flex-sm="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <div layout="column" flex> <div layout="row" flex> <md-input-container> <label>{{\'finalProtocol.confirmedFrom\' | translate}}</label> <md-datepicker ng-model="criteria.confirmDateFrom" md-max-date="criteria.confirmDateThru"></md-datepicker> </md-input-container> <md-input-container flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'finalProtocol.confirmedThru\' | translate}}</label> <md-datepicker ng-model="criteria.confirmDateThru" md-min-date="criteria.confirmDateFrom"></md-datepicker> </md-input-container> </div> </div> </div> </div> <div layout="row"> <md-button type="submit" class="md-raised md-primary">{{\'main.button.search\' | translate}}</md-button> <md-button class="md-raised" ng-click="clearCriteria()">{{\'main.button.clear\' | translate}}</md-button> <md-button class="md-raised" ng-href="#/finalVocationalProtocols/exam/new" ng-if="formState.canCreateProtocol">{{\'finalProtocol.addFinalExamProtocol\' | translate}}</md-button> <md-button ng-if="auth.isAdmin()" class="md-raised" ng-href="#/finalVocationalProtocols/thesis/new" ng-if="formState.canCreateProtocol">{{\'finalProtocol.addFinalThesisProtocol\' | translate}}</md-button> </div> <div flex-xs="0" flex-gt-xs="0" flex-gt-sm="50"></div> </form> </fieldset> </div> </div> <div layout-padding> <div flex> <md-table-container> <table md-table md-progress="tabledata.$promise"> <thead md-head md-order="criteria.order" md-on-reorder="loadData"> <tr md-row> <th md-column md-order-by="2">{{\'finalProtocol.protocolNr\' | translate}}</th> <th md-column md-order-by="3">{{\'finalProtocol.protocolType\' | translate}}</th> <th md-column md-order-by="4">{{\'finalProtocol.status\' | translate}}</th> <th md-column md-order-by="5">{{\'finalProtocol.studyYear\' | translate}}</th> <th md-column md-order-by="{{currentLanguage()===\'en\' ? \'8, 9\' : \'7, 9\'}}">{{\'finalProtocol.module\' | translate}}</th> <th md-column md-order-by="11, 12, 13">{{\'finalProtocol.committeeChairman\' | translate}}</th> <th md-column md-order-by="14">{{\'finalProtocol.insertedDate\' | translate}}</th> <th md-column md-order-by="15">{{\'finalProtocol.confirmedDate\' | translate}}</th> <th md-column md-order-by="16">{{\'finalProtocol.confirmer\' | translate}}</th> <th md-column></th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="row in tabledata.content" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell> <a ng-href="#/finalVocationalProtocols/{{::row.id}}/view">{{::row.protocolNr}}</a> </td> <td md-cell> <span ng-if="row.isFinalThesis">{{\'finalProtocol.finalThesis\' | translate}}</span> <span ng-if="!row.isFinalThesis">{{\'finalProtocol.finalExam\' | translate}}</span> </td> <td md-cell>{{currentLanguageNameField(row.status)}}</td> <td md-cell> <hois-classifier-value ng-model="row.studyYear" main-classifier-code="OPPEAASTA"></hois-classifier-value> </td> <td md-cell>{{currentLanguageNameField(row.curriculumVersionOccupationModules)}}</td> <td md-cell>{{row.committeeChairman}}</td> <td md-cell>{{row.inserted | hoisDate}}</td> <td md-cell>{{row.confirmDate | hoisDate}}</td> <td md-cell>{{::row.confirmer}}</td> <td md-cell> <md-button ng-if="row.canEdit && row.status.code !== \'PROTOKOLL_STAATUS_K\'" md-no-ink class="md-primary change-button" ng-href="#/finalVocationalProtocols/{{::row.id}}/edit">{{\'main.button.change\' | translate}}</md-button> </td> </tr> </tbody> </table> </md-table-container> <md-table-pagination md-limit="criteria.size" md-limit-options="[10, 20, 50]" md-page="criteria.page" md-total="{{tabledata.totalElements}}" md-on-paginate="loadData" md-label="{page: \'{{\'main.page\' | translate}}:\', rowsPerPage: \'{{\'main.rowPerPage\' | translate}}:\', of: \'{{\'main.of\' | translate}}\'}" md-page-select></md-table-pagination> </div> </div>'),a.put("finalProtocol/vocational/final.vocational.protocol.new.html",'<div class="ois-form-layout-padding" ng-cloak> <div flex> <form ng-submit="submit()" novalidate layout="column" name="finalProtocolNewForm"> <div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="50" flex-sm="100" flex-xs="100"> <label class="textInput">{{\'finalProtocol.studyYear\' | translate}}</label> <hois-select ng-model="formState.studyYear" type="studyyear" select-current-study-year required autofocus></hois-select> </md-input-container> <md-input-container flex="50" flex-sm="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label class="textInput">{{auth.higher ? (\'finalProtocol.teacherHigher\' | translate) : (\'finalProtocol.teacherVocational\' | translate)}}</label> <hois-select ng-model="formState.teacher" type="teacher" required ng-disabled="auth.isTeacher()"></hois-select> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex flex-sm="100"> <label class="textInput">{{\'finalProtocol.implementationPlan\' | translate}}</label> <hois-select ng-model="formState.curriculumVersion" values="formState.curriculumVersions" ng-change="curriculumVersionChange()" required></hois-select> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex flex-sm="100"> <label class="textInput">{{\'finalProtocol.module\' | translate}}</label> <hois-select ng-model="formState.curriculumVersionOccupationModule" values="formState.curriculumVersionOccupationModules" ng-change="curriculumVersionOccupationModuleChange()" required></hois-select> </md-input-container> </div> <br> <div flex> <md-table-container> <table md-table md-progress="tabledata.$promise" md-row-select multiple ng-model="formState.selectedStudents"> <thead md-head> <tr md-row flex> <th md-column> <span>{{\'student.label\' | translate}}</span> </th> <th md-column> <span>{{\'student.idcode\' | translate}}</span> </th> <th md-column> <span>{{\'finalProtocol.studentGroup\' | translate}}</span> </th> </tr> </thead> <tbody md-body> <tr md-row md-select="row.studentId" ng-repeat="row in tabledata.content | orderBy: \'fullname\'" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell>{{row.fullname}}</td> <td md-cell>{{row.idcode}}</td> <td md-cell>{{row.studentGroup}}</td> </tr> </tbody> </table> </md-table-container> </div> <br> <div layout="row"> <md-button class="md-raised md-primary" type="submit">{{\'finalProtocol.create\' | translate}}</md-button> <md-button class="md-raised" ng-click="back(\'#/finalVocationalProtocols/\')">{{\'main.button.back\' | translate}}</md-button> </div> </div> </form> </div> </div>'),a.put("finalProtocol/vocational/final.vocational.protocol.view.html",'<div class="ois-form-layout-padding" ng-cloak> <div flex> <form layout="column" name="finalProtocolForm"> <div ng-include="\'finalProtocol/templates/final.vocational.protocol.header.tmpl.html\'"></div> <div class="form-readonly"> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="20" flex-sm="100" flex-xs="100"> <label ng-if="protocol.isFinalThesis">{{\'finalProtocol.finalDateThesis\' | translate}}</label> <label ng-if="!protocol.isFinalThesis">{{\'finalProtocol.finalDateExam\' | translate}}</label> <hois-value value="protocol.finalDate | hoisDate"></hois-value> </md-input-container> </div> </div> <fieldset ng-if="committeeMembers"> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'finalProtocol.committee\' | translate}}</legend> <md-table-container> <table md-table md-progress="protocol.$promise" class="secondary-table"> <thead md-head> <tr md-row> <th md-column>{{\'finalProtocol.name\' | translate}}</th> <th md-column>{{\'finalProtocol.role\' | translate}}</th> <th md-column>{{\'finalProtocol.present\' | translate}}</th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="row in committeeMembers | orderBy: \'memberName\'" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell>{{row.memberName}}</td> <td md-cell ng-if="row.isChairman">{{\'finalProtocol.chairman\' | translate}}</td> <td md-cell ng-if="!row.isChairman">{{\'finalProtocol.member\' | translate}}</td> <td md-cell> <md-checkbox aria-label="module" ng-model="row.isPresent" disabled></md-checkbox> </td> </tr> </tbody> </table> </md-table-container> </fieldset> <div>&nbsp;</div> <div> <div flex> <md-table-container> <table md-table md-progress="protocol.$promise" multiple> <thead md-head> <tr md-row> <th md-column>{{\'finalProtocol.id\' | translate}}</th> <th md-column>{{\'student.label\' | translate}}</th> <th md-column ng-if="protocol.isFinalThesis">{{\'finalProtocol.theme\' | translate}}</th> <th md-column>{{\'finalProtocol.grade\' | translate}}</th> <th md-column ng-if="protocol.status.code === \'PROTOKOLL_STAATUS_K\'">{{\'finalProtocol.changeReason\' | translate}}</th> <th md-column>{{\'finalProtocol.occupationAndCertificateNr\' | translate}}</th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="row in protocol.protocolStudents | orderBy: \'fullname\' track by $index" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell>{{$index + 1}}</td> <td md-cell>{{row.fullname}}</td> <td md-cell ng-if="protocol.isFinalThesis">{{row.theme.nameEt}}</td> <td md-cell> <span ng-class="{badResult: !gradeUtil.isPositive(row.grade)}">{{gradeValue(row.grade)}}</span> </td> <td md-cell ng-if="protocol.status.code === \'PROTOKOLL_STAATUS_K\'">{{row.addInfo}}</td> <td md-cell> <span ng-repeat="occupation in protocol.occupations"> <span ng-if="row.occupations[occupation.code].granted"> <span>{{currentLanguageNameField(occupation)}}</span> <span ng-if="row.occupations[occupation.code].certificateNr">({{row.occupations[occupation.code].certificateNr}})</span> &nbsp; </span> </span> </td> </tr> </tbody> </table> </md-table-container> </div> </div> <div>&nbsp;</div> <div layout="row"> <md-button ng-if="formState.canEditProtocol" class="md-primary md-raised" ng-href="#/finalVocationalProtocols/{{::protocol.id}}/edit">{{\'main.button.change\' | translate}}</md-button> <a ng-show="formState.protocolPdfUrl" ng-href="{{formState.protocolPdfUrl}}" target="_blank" class="md-button md-raised">{{\'main.button.print\' | translate}}</a> <a ng-show="protocol.oisFile" ng-href="{{getUrl(protocol.oisFile, \'protocol\')}}" target="_blank" rel="noopener noreferrer" class="md-button md-raised">{{\'finalProtocol.downloadSigned\' | translate}}</a> <md-button class="md-raised" ng-click="back(\'#/finalVocationalProtocols/\')">{{\'main.button.back\' | translate}}</md-button> </div> </form> </div> </div>'),a.put("higherCurriculum/version/higher.module.edit.html",'<div class="ois-form-layout-padding"> <form name="higherModuleForm" ng-cloak> <div> <h2>{{"module.addToughtModule" | translate}}</h2> <span flex></span> </div> <span flex></span> <div class="ois-form-layout" layout="column" layout-margin ng-cloak> <div layout="column"> <div layout="row"> <md-input-container flex> <label>{{\'curriculum.specialty.specialty\' | translate}}</label> <md-select multiple ng-model="data.specialitiesReferenceNumbers" required ng-change="getSubjects()"> <md-option ng-repeat="speciality in specialities | orderBy: \'nameEt\'" ng-value="speciality.id"> {{currentLanguageNameField(speciality)}} </md-option> </md-select> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex> <label>{{\'module.type\' | translate}}</label> <md-select ng-model="data.typeObject" required> <md-option ng-repeat="type in moduleTypes | filter: {\'code\': \'KORGMOODUL_M\'}" ng-value="type"> {{currentLanguageNameField(type)}} </md-option> <md-option ng-repeat="type in moduleTypes | filter: {\'code\': \'!KORGMOODUL_M\'} | orderBy: \'nameEt\'" ng-value="type"> {{currentLanguageNameField(type)}} </md-option> </md-select> </md-input-container> </div> <div ng-if="data.typeObject.code === \'KORGMOODUL_M\'" layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex> <label>{{\'module.typeNameEt\' | translate}}</label> <input ng-model="data.typeNameEt" type="text" required md-maxlength="255"> </md-input-container> <md-input-container flex> <label>{{\'module.typeNameEn\' | translate}}</label> <input ng-model="data.typeNameEn" type="text" required md-maxlength="255"> </md-input-container> </div> <md-input-container flex> <label>{{\'module.nameEt\' | translate}}</label> <input ng-model="data.nameEt" type="text" required md-maxlength="255"> </md-input-container> <md-input-container flex> <label>{{\'module.nameEn\' | translate}}</label> <input ng-model="data.nameEn" type="text" required md-maxlength="255"> </md-input-container> <md-input-container> <label>{{\'module.objectivesEt\' | translate}}</label> <textarea ng-model="data.objectivesEt" md-maxlength="20000" max-rows="10"></textarea> </md-input-container> <md-input-container> <label>{{\'module.objectivesEn\' | translate}}</label> <textarea ng-model="data.objectivesEn" md-maxlength="20000" max-rows="10"></textarea> </md-input-container> <md-input-container> <label>{{\'module.studyOutcomesEt\' | translate}}</label> <textarea ng-model="data.outcomesEt" md-maxlength="20000" max-rows="10"></textarea> </md-input-container> <md-input-container> <label>{{\'module.studyOutcomesEn\' | translate}}</label> <textarea ng-model="data.outcomesEn" md-maxlength="20000" max-rows="10"></textarea> </md-input-container> <div flex> <fieldset ng-show="formState.moduleMustHaveSubjects"> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'module.optionals\' | translate}}</legend> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="45" flex-sm="100" flex-xs="100"> <label>{{\'module.optionalNameEt\' | translate}}</label> <input ng-model="optionalNameEt" type="text" md-maxlength="255"> </md-input-container> <md-input-container flex="45" flex-sm="100" flex-xs="100"> <label>{{\'module.optionalNameEn\' | translate}}</label> <input ng-model="optionalNameEn" type="text" md-maxlength="255"> </md-input-container> <md-button class="md-icon-button" ng-click="addElectiveModule()" ng-if="!editingElectiveModule" ng-disabled="!optionalNameEt || !optionalNameEn"> <md-icon ng-class="\'md-primary md-hue-2\'" md-font-set="material-icons">add</md-icon> </md-button> <md-button class="md-icon-button" ng-click="finishEditElectiveModule()" ng-if="editingElectiveModule" ng-disabled="!optionalNameEt || !optionalNameEn"> <md-icon ng-class="\'md-primary md-hue-2\'" md-font-set="material-icons">done</md-icon> </md-button> </div> <div ng-repeat="electiveModule in data.electiveModules | orderBy: \'nameEt\'" class="secondary-table-row" flex layout="row"> <div flex="45" class="elective-module"> <a href="" ng-click="editElectiveModule(electiveModule)">{{electiveModule.nameEt}}</a> </div> <div flex="45" class="elective-module"> <a href="" ng-click="editElectiveModule(electiveModule)">{{electiveModule.nameEn}}</a> </div> <div> <a class="remove nomargin" ng-click="deleteElectiveModule(electiveModule)">&times;</a> </div> </div> </fieldset> </div> <div>&nbsp;</div> <md-input-container flex ng-show="formState.moduleMustHaveSubjects"> <label>{{\'module.optionalModulesNumber\' | translate}}</label> <input name="electiveModulesNumber" ng-model="data.electiveModulesNumber" pattern="^\\d+$" type="number" required min="0" max="999"> <div ng-messages="higherModuleForm.electiveModulesNumber.$error" ng-show="higherModuleForm.electiveModulesNumber.$dirty"> <div ng-message="min"> {{\'main.messages.error.positive\' | translate}} </div> <div ng-message="min"> {{\'stateCurriculum.enter.credits.positive\' | translate}} </div> <div ng-message="max"> {{\'curriculum.error.max999\' | translate}} </div> <div ng-message="pattern"> {{\'stateCurriculum.enter.credits.integer\' | translate}} </div> </div> </md-input-container> <div flex> <fieldset ng-show="formState.moduleMustHaveSubjects"> <legend md-colors="{color: \'primary-800\'}" ng-class="{invalid: higherModuleForm.$submitted && !subjectsValid()}" class="md-title-small">{{\'curriculum.version.subjects\' | translate}}&nbsp;*</legend> <div layout="row"> <md-input-container flex> <label>{{\'curriculum.version.subjectsName\' | translate}}</label> <md-select ng-model="data.selectedSubject" ng-change="addSubject()" ng-disabled="!data.specialitiesReferenceNumbers ||\r\n                data.specialitiesReferenceNumbers.length === 0"> <md-option ng-repeat="option in subjects | filter: subjectNotAdded | orderBy: \'code\'" ng-value="option"> {{option.code}} - {{currentLanguageNameField(option)}} </md-option> </md-select> </md-input-container> </div> <table md-table class="secondary-table" ng-show="data.subjects.length > 0"> <thead md-head> <tr md-row> <th md-column>{{\'curriculum.version.subjectsName\' | translate}}</th> <th md-column>EAP</th> <th md-column>{{\'module.optionalSubject\' | translate}}</th> <th md-column>{{\'module.linkOptional\' | translate}}</th> <th md-column></th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="subject in data.subjects | orderBy: \'code\'"> <td md-cell>{{subject.code}} - {{currentLanguageNameField(subject)}}</td> <td md-cell>{{subject.credits}}</td> <td md-cell> <md-checkbox ng-model="subject.optional" aria-label="subject is mandatory" ng-change="setCompulsoryStudyCredits(subject)"></md-checkbox> </td> <td md-cell> <div ng-if="subject.optional && data.electiveModules.length > 0" layout="row" flex> <md-input-container flex class="elective-module-subject"> <label>{{\'module.optional\' | translate}}</label> <md-select ng-model="subject.electiveModule"> <md-option ng-value="null"> </md-option> <md-option ng-repeat="option in data.electiveModules | orderBy: \'nameEt\'" ng-value="option.referenceNumber"> {{currentLanguageNameField(option)}} </md-option> </md-select> </md-input-container> </div> </td> <td md-cell> <md-button flex="20" class="remove nomargin" ng-click="removeSubject(subject)">&times;</md-button> </td> </tr> </tbody> </table> </fieldset> </div> <div>&nbsp;</div> <md-input-container flex> <label>{{\'module.optionalEap\' | translate}}</label> <input name="optionalStudyCredits" ng-model="data.optionalStudyCredits" type="number" required ng-change="data.totalCredits = data.optionalStudyCredits + data.compulsoryStudyCredits" min="0" max="999" pattern="^\\d+(\\.\\d{1})?$"> <div ng-messages="higherModuleForm.optionalStudyCredits.$error" ng-show="higherModuleForm.optionalStudyCredits.$dirty"> <div ng-message="min"> {{\'main.messages.error.positive\' | translate}} </div> <div ng-message="max"> {{\'curriculum.error.max999\' | translate}} </div> <div ng-message="pattern"> {{\'stateCurriculum.error.decimalPresision\' | translate}} </div> </div> </md-input-container> <md-input-container flex ng-show="formState.moduleMustHaveSubjects"> <label>{{\'module.mandatoryEap\' | translate}}</label> <input ng-model="data.compulsoryStudyCredits" type="number" readonly> </md-input-container> <md-input-container flex ng-show="formState.moduleMustHaveSubjects"> <label>{{\'module.overallEap\' | translate}}</label> <input name="totalCredits" ng-model="data.totalCredits" type="number" readonly max="999"> <div ng-messages="higherModuleForm.totalCredits.$error" ng-show="higherModuleForm.totalCredits.$error"> <div ng-message="max"> {{\'curriculum.error.max999\' | translate}} </div> </div> </md-input-container> <span flex></span> </div> </div> <md-button class="md-raised md-primary" ng-click="save()">{{"main.button.save" | translate}}</md-button> <md-button ng-click="delete()" ng-if="data.id" class="md-raised">{{"main.button.delete" | translate}}</md-button> <md-button class="md-raised" ng-click="back(backToEditForm, higherModuleForm)">{{"main.button.back" | translate}}</md-button> </form> </div>'),a.put("higherCurriculum/version/higher.module.view.html",'<div class="ois-form-layout-padding"> <div> <h2>{{"module.viewToughtModule" | translate}}</h2> <span flex></span> </div> <span flex></span> <div class="ois-form-layout" layout="column" layout-margin ng-cloak> <div layout="column"> <div layout="row"> <md-input-container flex> <label>{{\'curriculum.specialty.specialty\' | translate}}</label> <md-select multiple ng-model="data.specialitiesReferenceNumbers" disabled> <md-option ng-repeat="speciality in specialities | orderBy: \'nameEt\'" ng-value="speciality.id"> {{currentLanguageNameField(speciality)}} </md-option> </md-select> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex> <label>{{\'module.type\' | translate}}</label> <md-select ng-model="data.typeObject" disabled> <md-option ng-repeat="type in moduleTypes | filter: {\'code\': \'KORGMOODUL_M\'}" ng-value="type"> {{currentLanguageNameField(type)}} </md-option> <md-option ng-repeat="type in moduleTypes | filter: {\'code\': \'!KORGMOODUL_M\'} | orderBy: \'nameEt\'" ng-value="type"> {{currentLanguageNameField(type)}} </md-option> </md-select> </md-input-container> </div> <div ng-if="data.typeObject.code === \'KORGMOODUL_M\'" layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex> <label>{{\'module.typeNameEt\' | translate}}</label> <input ng-model="data.typeNameEt" type="text" readonly> </md-input-container> <md-input-container flex> <label>{{\'module.typeNameEn\' | translate}}</label> <input ng-model="data.typeNameEn" type="text" readonly> </md-input-container> </div> <md-input-container flex> <label>{{\'module.nameEt\' | translate}}</label> <input ng-model="data.nameEt" type="text" readonly> </md-input-container> <md-input-container flex> <label>{{\'module.nameEn\' | translate}}</label> <input ng-model="data.nameEn" type="text" readonly> </md-input-container> <md-input-container flex> <label>{{\'module.objectivesEt\' | translate}}</label> <textarea ng-model="data.objectivesEt" readonly></textarea> </md-input-container> <md-input-container flex> <label>{{\'module.objectivesEn\' | translate}}</label> <textarea ng-model="data.objectivesEn" readonly></textarea> </md-input-container> <md-input-container flex> <label>{{\'module.studyOutcomesEt\' | translate}}</label> <textarea ng-model="data.outcomesEt" readonly></textarea> </md-input-container> <md-input-container flex> <label>{{\'module.studyOutcomesEn\' | translate}}</label> <textarea ng-model="data.outcomesEn" readonly></textarea> </md-input-container> <div ng-show="formState.moduleMustHaveSubjects">&nbsp;</div> <div> <fieldset ng-show="formState.moduleMustHaveSubjects" flex> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'module.optionals\' | translate}}</legend> <div ng-repeat="electiveModule in data.electiveModules | orderBy: \'nameEt\'" class="secondary-table-row" flex layout="row"> <div flex> <p class="elective-module">{{currentLanguageNameField(electiveModule)}}</p> </div> </div> </fieldset> </div> <div ng-show="formState.moduleMustHaveSubjects">&nbsp;</div> <md-input-container flex ng-show="formState.moduleMustHaveSubjects"> <label>{{\'module.optionalModulesNumber\' | translate}}</label> <input name="electiveModulesNumber" ng-model="data.electiveModulesNumber" type="number" readonly> </md-input-container> <div ng-show="formState.moduleMustHaveSubjects">&nbsp;</div> <div> <fieldset ng-show="formState.moduleMustHaveSubjects"> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'curriculum.version.subjects\' | translate}}&nbsp;</legend> <table md-table class="secondary-table" ng-show="data.subjects.length > 0"> <thead md-head> <tr md-row> <th md-column>{{\'curriculum.version.subjectsName\' | translate}}</th> <th md-column>EAP</th> <th md-column>{{\'module.optionalSubject\' | translate}}</th> <th md-column>{{\'module.linkOptional\' | translate}}</th> <th md-column></th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="subject in data.subjects | orderBy: \'code\'"> <td md-cell>{{subject.code}} - {{currentLanguageNameField(subject)}}</td> <td md-cell>{{subject.credits}}</td> <td md-cell> <md-checkbox ng-model="subject.optional" aria-label="subject is mandatory" disabled></md-checkbox> </td> <td md-cell> <div ng-if="subject.optional && data.electiveModules.length > 0" layout="row" flex> <md-input-container flex class="elective-module-subject"> <label>{{\'module.optional\' | translate}}</label> <md-select ng-model="subject.electiveModule" disabled> <md-option ng-value="null"> </md-option> <md-option ng-repeat="option in data.electiveModules | orderBy: \'nameEt\'" ng-value="option.referenceNumber"> {{currentLanguageNameField(option)}} </md-option> </md-select> </md-input-container> </div> </td> <td md-cell></td> </tr> </tbody> </table> </fieldset> </div> <div>&nbsp;</div> <div>&nbsp;</div> <md-input-container flex> <label>{{\'module.optionalEap\' | translate}}</label> <input name="optionalStudyCredits" ng-model="data.optionalStudyCredits" readonly> </md-input-container> <md-input-container flex ng-show="formState.moduleMustHaveSubjects"> <label>{{\'module.mandatoryEap\' | translate}}</label> <input ng-model="data.compulsoryStudyCredits" type="number" readonly> </md-input-container> <md-input-container flex ng-show="formState.moduleMustHaveSubjects"> <label>{{\'module.overallEap\' | translate}}</label> <input name="totalCredits" ng-model="data.totalCredits" type="number" readonly> </md-input-container> <span flex></span> </div> </div> <md-button class="md-raised" ng-click="back(backToViewForm)">{{"main.button.back" | translate}}</md-button> </div>'),a.put("higherCurriculum/version/minor.speciality.edit.html",'<div class="ois-form-layout-padding"> <form name="minorSpecialityForm" ng-cloak> <span flex></span> <div class="ois-form-layout" layout="column" layout-margin ng-cloak> <div layout="column"> <md-input-container flex> <label>{{\'curriculum.minorSpecialty.nameEt\' | translate}}</label> <input ng-model="data.nameEt" type="text" required md-maxlength="255"> </md-input-container> <md-input-container flex> <label>{{\'curriculum.minorSpecialty.nameEn\' | translate}}</label> <input ng-model="data.nameEn" type="text" required md-maxlength="255"> </md-input-container> <md-input-container> <label>{{\'curriculum.minorSpecialty.objectivesEt\' | translate}}</label> <textarea ng-model="data.objectivesEt" md-maxlength="20000" max-rows="10"></textarea> </md-input-container> <md-input-container> <label>{{\'curriculum.minorSpecialty.objectivesEn\' | translate}}</label> <textarea ng-model="data.objectivesEn" md-maxlength="20000" max-rows="10"></textarea> </md-input-container> <md-input-container> <label>{{\'curriculum.minorSpecialty.outcomesEt\' | translate}}</label> <textarea ng-model="data.outcomesEt" md-maxlength="20000" max-rows="10"></textarea> </md-input-container> <md-input-container> <label>{{\'curriculum.minorSpecialty.outcomesEn\' | translate}}</label> <textarea ng-model="data.outcomesEn" md-maxlength="20000" max-rows="10"></textarea> </md-input-container> <div flex> <fieldset> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'module.optionals\' | translate}}</legend> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="45" flex-sm="100" flex-xs="100"> <label>{{\'module.optionalNameEt\' | translate}}</label> <input ng-model="optionalNameEt" type="text" md-maxlength="255"> </md-input-container> <md-input-container flex="45" flex-sm="100" flex-xs="100"> <label>{{\'module.optionalNameEn\' | translate}}</label> <input ng-model="optionalNameEn" type="text" md-maxlength="255"> </md-input-container> <md-button class="md-icon-button" ng-click="addElectiveModule()" ng-if="!editingElectiveModule" ng-disabled="!optionalNameEt || !optionalNameEn"> <md-icon ng-class="\'md-primary md-hue-2\'" md-font-set="material-icons">add</md-icon> </md-button> <md-button class="md-icon-button" ng-click="finishEditElectiveModule()" ng-if="editingElectiveModule" ng-disabled="!optionalNameEt || !optionalNameEn"> <md-icon ng-class="\'md-primary md-hue-2\'" md-font-set="material-icons">done</md-icon> </md-button> </div> <div ng-repeat="electiveModule in data.electiveModules | orderBy: currentLanguageNameField()" class="secondary-table-row" flex layout="row"> <div flex="45" class="elective-module"> <a href="" ng-click="editElectiveModule(electiveModule)">{{electiveModule.nameEt}}</a> </div> <div flex="45" class="elective-module"> <a href="" ng-click="editElectiveModule(electiveModule)">{{electiveModule.nameEn}}</a> </div> <div> <a flex="5" class="remove nomargin" ng-click="deleteElectiveModule(electiveModule)">&times;</a> </div> </div> </fieldset> </div> <div>&nbsp;</div> <md-input-container> <label>{{\'module.optionalModulesNumber\' | translate}}</label> <input name="electiveModulesNumber" ng-model="data.electiveModulesNumber" type="number" required min="0" max="999" pattern="^\\d+$"> <div ng-messages="minorSpecialityForm.electiveModulesNumber.$error" ng-show="minorSpecialityForm.electiveModulesNumber.$dirty"> <div ng-message="min"> {{\'main.messages.error.positive\' | translate}} </div> <div ng-message="max"> {{\'curriculum.error.max999\' | translate}} </div> <div ng-message="pattern"> {{\'stateCurriculum.enter.credits.integer\' | translate}} </div> </div> </md-input-container> <div> <fieldset> <legend md-colors="{color: \'primary-800\'}" ng-class="{invalid: minorSpecialityForm.$submitted && data.subjects.length == 0}" class="md-title-small">{{\'curriculum.version.subjects\' | translate}}&nbsp;*</legend> <div layout="row"> <md-input-container flex> <label>{{\'curriculum.version.subjectsName\' | translate}}</label> <md-select ng-model="data.selectedSubject" ng-change="addSubject()"> <md-option ng-repeat="option in subjects | filter: subjectNotAdded | orderBy: \'code\'" ng-value="option"> {{option.code}} - {{currentLanguageNameField(option)}} </md-option> </md-select> </md-input-container> </div> <table md-table class="secondary-table" ng-show="data.subjects.length > 0"> <thead md-head> <tr md-row> <th md-column>{{\'curriculum.version.subjectsName\' | translate}}</th> <th md-column>EAP</th> <th md-column>{{\'module.optionalSubject\' | translate}}</th> <th md-column>{{\'module.linkOptional\' | translate}}</th> <th md-column></th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="subject in data.subjects | orderBy: \'code\'"> <td md-cell>{{subject.code}} - {{currentLanguageNameField(subject)}}</td> <td md-cell>{{subject.credits}}</td> <td md-cell> <md-checkbox ng-model="subject.optional" aria-label="subject is mandatory" ng-change="setCompulsoryStudyCredits(subject)"></md-checkbox> </td> <td md-cell> <div ng-if="subject.optional && data.electiveModules.length > 0" layout="row"> <md-input-container flex class="elective-module-subject"> <label>{{\'module.optional\' | translate}}</label> <md-select ng-model="subject.electiveModule"> <md-option ng-value="null"> </md-option> <md-option ng-repeat="option in data.electiveModules | orderBy: \'nameEt\'" ng-value="option.referenceNumber"> {{currentLanguageNameField(option)}} </md-option> </md-select> </md-input-container> </div> </td> <td md-cell> <md-button flex="20" class="remove nomargin" ng-click="removeSubject(subject)">&times;</md-button> </td> </tr> </tbody> </table> </fieldset> </div> <div>&nbsp;</div> <md-input-container flex> <label>{{\'module.optionalEap\' | translate}}</label> <input name="optionalStudyCredits" ng-model="data.optionalStudyCredits" type="number" required ng-change="data.totalCredits = data.optionalStudyCredits + data.compulsoryStudyCredits" min="0" max="999" pattern="^\\d+(\\.\\d{1})?$"> <div ng-messages="minorSpecialityForm.optionalStudyCredits.$error" ng-show="minorSpecialityForm.optionalStudyCredits.$dirty"> <div ng-message="min"> {{\'main.messages.error.positive\' | translate}} </div> <div ng-message="max"> {{\'curriculum.error.max999\' | translate}} </div> <div ng-message="pattern"> {{\'stateCurriculum.error.decimalPresision\' | translate}} </div> </div> </md-input-container> <md-input-container flex> <label>{{\'module.mandatoryEap\' | translate}}</label> <input ng-model="data.compulsoryStudyCredits" type="number" readonly> </md-input-container> <md-input-container flex> <label>{{\'module.overallEap\' | translate}}</label> <input ng-model="data.totalCredits" type="number" readonly> </md-input-container> <span flex></span> </div> </div> <md-button class="md-raised md-primary" ng-click="save()">{{"main.button.save" | translate}}</md-button> <md-button ng-click="delete()" ng-if="data.id" class="md-raised">{{"main.button.delete" | translate}}</md-button> <md-button class="md-raised" ng-click="back(backToEditForm, minorSpecialityForm)">{{"main.button.back" | translate}}</md-button> </form> </div>'),
a.put("higherCurriculum/version/minor.speciality.view.html",'<div class="ois-form-layout-padding"> <span flex></span> <div class="ois-form-layout" layout="column" layout-margin ng-cloak> <div layout="column"> <md-input-container flex> <label>{{\'curriculum.minorSpecialty.nameEt\' | translate}}</label> <input ng-model="data.nameEt" type="text" readonly> </md-input-container> <md-input-container flex> <label>{{\'curriculum.minorSpecialty.nameEn\' | translate}}</label> <input ng-model="data.nameEn" type="text" readonly> </md-input-container> <md-input-container> <label>{{\'curriculum.minorSpecialty.objectivesEt\' | translate}}</label> <textarea ng-model="data.objectivesEt" readonly></textarea> </md-input-container> <md-input-container> <label>{{\'curriculum.minorSpecialty.objectivesEn\' | translate}}</label> <textarea ng-model="data.objectivesEn" readonly></textarea> </md-input-container> <md-input-container> <label>{{\'curriculum.minorSpecialty.outcomesEt\' | translate}}</label> <textarea ng-model="data.outcomesEt" readonly></textarea> </md-input-container> <md-input-container> <label>{{\'curriculum.minorSpecialty.outcomesEn\' | translate}}</label> <textarea ng-model="data.outcomesEn" readonly></textarea> </md-input-container> <div flex> <fieldset> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'module.optionals\' | translate}}</legend> <div ng-repeat="electiveModule in data.electiveModules | orderBy: currentLanguageNameField()" class="secondary-table-row" flex layout="row"> <div flex> <p class="elective-module">{{currentLanguageNameField(electiveModule)}}</p> </div> </div> </fieldset> </div> <div>&nbsp;</div> <md-input-container> <label>{{\'module.optionalModulesNumber\' | translate}}</label> <input name="electiveModulesNumber" ng-model="data.electiveModulesNumber" type="number" readonly> </md-input-container> <div> <fieldset> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'curriculum.version.subjects\' | translate}}&nbsp;</legend> <table md-table class="secondary-table" ng-show="data.subjects.length > 0"> <thead md-head> <tr md-row> <th md-column>{{\'curriculum.version.subjectsName\' | translate}}</th> <th md-column>EAP</th> <th md-column>{{\'module.optionalSubject\' | translate}}</th> <th md-column>{{\'module.linkOptional\' | translate}}</th> <th md-column></th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="subject in data.subjects | orderBy: \'code\'"> <td md-cell>{{subject.code}} - {{currentLanguageNameField(subject)}}</td> <td md-cell>{{subject.credits}}</td> <td md-cell> <md-checkbox ng-model="subject.optional" aria-label="subject is mandatory" disabled></md-checkbox> </td> <td md-cell> <div ng-if="subject.optional && data.electiveModules.length > 0" layout="row"> <md-input-container flex class="elective-module-subject"> <label>{{\'module.optional\' | translate}}</label> <md-select ng-model="subject.electiveModule" disabled> <md-option ng-value="null"> </md-option> <md-option ng-repeat="option in data.electiveModules | orderBy: \'nameEt\'" ng-value="option.referenceNumber"> {{currentLanguageNameField(option)}} </md-option> </md-select> </md-input-container> </div> </td> <td md-cell></td> </tr> </tbody> </table> </fieldset> </div> <div>&nbsp;</div> <md-input-container flex> <label>{{\'module.optionalEap\' | translate}}</label> <input name="optionalStudyCredits" ng-model="data.optionalStudyCredits" type="number" readonly> </md-input-container> <md-input-container flex> <label>{{\'module.mandatoryEap\' | translate}}</label> <input ng-model="data.compulsoryStudyCredits" type="number" readonly> </md-input-container> <md-input-container flex> <label>{{\'module.overallEap\' | translate}}</label> <input ng-model="data.totalCredits" type="number" readonly> </md-input-container> <span flex></span> </div> </div> <md-button class="md-raised" ng-click="back(backToViewForm)">{{"main.button.back" | translate}}</md-button> </div>'),a.put("protocol/templates/module.protocol.header.tmpl.html",'<div class="form-readonly"> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex flex-sm="100" flex-xs="100"> <label>{{\'moduleProtocol.protocolNumber\' | translate}}</label> <hois-value value="protocol.protocolNr"></hois-value> </md-input-container> <md-input-container flex flex-sm="100" flex-xs="100"> <label>{{\'main.status\' | translate}}</label> <hois-value value="currentLanguageNameField(protocol.status)"></hois-value> </md-input-container> <md-input-container flex flex-sm="100" flex-xs="100"> <label>{{\'moduleProtocol.studyYear\' | translate}}</label> <hois-value value="currentLanguageNameField(protocol.protocolVdata.studyYear)"></hois-value> </md-input-container> <md-input-container flex flex-sm="100" flex-xs="100"> <label>{{\'moduleProtocol.insertedDate\' | translate}} / {{\'moduleProtocol.confirmDate\' | translate}}</label> <hois-value value="(protocol.inserted ? (protocol.inserted | hoisDate) : \'-\')  + \' / \' + (protocol.confirmDate ? (protocol.confirmDate | hoisDate) : \'-\')"></hois-value> </md-input-container> <md-input-container flex flex-sm="100" flex-xs="100"> <label>{{\'moduleProtocol.confirmer\' | translate}}</label> <hois-value value="protocol.confirmer ? protocol.confirmer : \'-\' "></hois-value> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex flex-sm="100" flex-xs="100"> <label>{{\'moduleProtocol.curriculumVersion\' | translate}}</label> <hois-value value="currentLanguageNameField(protocol.protocolVdata.curriculumVersion)"></hois-value> </md-input-container> <md-input-container flex flex-sm="100" flex-xs="100"> <label>{{\'moduleProtocol.module\' | translate}}</label> <hois-value value="currentLanguageNameField(protocol.protocolVdata.curriculumVersionOccupationModule)" href-value="\'#/occupationModule/\' + protocol.protocolVdata.curriculum + \'/\' + protocol.protocolVdata.curriculumVersion.id + \'/\' + protocol.protocolVdata.curriculumModule + \'/\' + protocol.protocolVdata.curriculumVersionOccupationModule.id + \'/view\'"></hois-value> </md-input-container> <md-input-container flex flex-sm="100" flex-xs="100"> <label>{{\'moduleProtocol.moduleCredits\' | translate}}</label> <hois-value value="protocol.protocolVdata.moduleCredits + \' \' + (\'moduleProtocol.creditsUnit\' | translate)"></hois-value> </md-input-container> <md-input-container flex flex-sm="100" flex-xs="100"> <label>{{\'moduleProtocol.moduleGrading\' | translate}}</label> <hois-classifier-value ng-model="protocol.protocolVdata.assessment" main-classifier-code="KUTSEHINDAMISVIIS"></hois-classifier-value> </md-input-container> <md-input-container flex flex-sm="100" flex-xs="100"> <label>{{auth.higher ? (\'teacher.labelHigher\' | translate) : (\'teacher.labelVocational\' | translate)}}</label> <hois-value value="currentLanguageNameField(protocol.protocolVdata.teacher)"></hois-value> </md-input-container> </div> </div>'),a.put("scholarship/student/scholarship.application.doktor.edit.html",'<div class="ois-form-layout-padding" ng-cloak> <fieldset tabindex="1"> <div class="form-readonly ois-form-layout-padding"> <div layout="row" flex> <md-input-container flex="45"> <label class="textInput">{{\'stipend.grantType\' | translate}}</label> <hois-classifier-value ng-model="stipend.type" main-classifier-code="STIPTOETUS"></hois-classifier-value> </md-input-container> <md-input-container flex="50" flex-offset="5"> <label>{{\'stipend.places\' | translate}}</label> <hois-value value="stipend.places"></hois-value> </md-input-container> </div> <div layout="row" flex> <md-input-container flex="45"> <label class="textInput">{{\'stipend.studyPeriod\' | translate}}</label> <hois-value value="currentLanguageNameField(stipend.studyPeriod)"></hois-value> </md-input-container> <md-input-container flex="50" flex-offset="5"> <label>{{\'stipend.amountPaid\' | translate}}</label> <hois-value value="stipend.amountPaid"></hois-value> </md-input-container> </div> <div layout="row" flex> <md-input-container flex="45"> <label class="textInput">{{\'stipend.studyLoad\' | translate}}</label> <hois-classifier-value ng-model="stipend.studyLoads" main-classifier-code="OPPEKOORMUS" multiple></hois-classifier-value> </md-input-container> </div> <div layout="row" flex> <md-input-container flex="45"> <label class="textInput">{{\'stipend.studyPeriodDates\' | translate}}</label> <hois-value value="stipend.matriculationRange"></hois-value> </md-input-container> </div> </div> </fieldset> <br> <fieldset tabindex="1"> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'stipend.student.myData\' | translate}}</legend> <div class="ois-form-layout-padding ois-form-layout" ng-cloak> <div flex> <form name="applicationForm"> <div layout="column" flex> <div layout="row" flex> <md-input-container flex="45"> <label>{{\'stipend.student.bankAccount\' | translate}}</label> <input type="text" ng-model="application.bankAccount" name="bankAccount" required md-maxlength="50"> </md-input-container> </div> <div layout="row" flex> <md-input-container flex="100" flex-md="100" flex-sm="100" flex-xs="100"> <label>{{\'stipend.student.grantReason\' | translate}}</label> <textarea ng-model="application.addInfo" name="addInfo" md-maxlength="4000"></textarea> </md-input-container> </div> <br> <div layout="row"> <md-button class="md-raised md-primary" ng-if="application.canApply" ng-click="update(applicationForm)">{{\'main.button.save\' | translate}}</md-button> <md-button class="md-raised" ng-if="application.canApply" ng-click="apply(applicationForm)">{{\'stipend.student.apply\' | translate}}</md-button> <md-button class="md-raised" ng-click="back(\'#/scholarships/myData/grants\', applicationForm)">{{\'main.button.back\' | translate}}</md-button> </div> </div> </form> </div> </div> </fieldset> </div>'),a.put("scholarship/student/scholarship.application.doktor.view.html",'<div class="ois-form-layout-padding" ng-cloak> <fieldset tabindex="1"> <div class="form-readonly ois-form-layout-padding"> <div layout="row" flex> <md-input-container flex="45"> <label class="textInput">{{\'stipend.grantType\' | translate}}</label> <hois-classifier-value ng-model="stipend.type" main-classifier-code="STIPTOETUS"></hois-classifier-value> </md-input-container> <md-input-container flex="50" flex-offset="5"> <label>{{\'stipend.places\' | translate}}</label> <hois-value value="stipend.places"></hois-value> </md-input-container> </div> <div layout="row" flex> <md-input-container flex="45"> <label class="textInput">{{\'stipend.studyPeriod\' | translate}}</label> <hois-value value="currentLanguageNameField(stipend.studyPeriod)"></hois-value> </md-input-container> <md-input-container flex="50" flex-offset="5"> <label>{{\'stipend.amountPaid\' | translate}}</label> <hois-value value="stipend.amountPaid"></hois-value> </md-input-container> </div> <div layout="row" flex> <md-input-container flex="45"> <label class="textInput">{{\'stipend.studyLoad\' | translate}}</label> <hois-classifier-value ng-model="stipend.studyLoads" main-classifier-code="OPPEKOORMUS" multiple></hois-classifier-value> </md-input-container> </div> <div layout="row" flex> <md-input-container flex="45"> <label class="textInput">{{\'stipend.studyPeriodDates\' | translate}}</label> <hois-value value="stipend.matriculationRange"></hois-value> </md-input-container> </div> </div> </fieldset> <br> <fieldset tabindex="1"> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{isStudent ? \'stipend.student.myData\' : \'stipend.student.studentData\' | translate}}</legend> <div class="form-readonly ois-form-layout-padding"> <div flex> <div layout="column" flex> <div layout="row" flex> <md-input-container flex="45"> <label>{{\'stipend.student.bankAccount\' | translate}}</label> <hois-value value="application.bankAccount"></hois-value> </md-input-container> </div> <div layout="row" flex> <md-input-container flex="100" flex-md="100" flex-sm="100" flex-xs="100"> <label>{{\'stipend.student.grantReason\' | translate}}</label> <hois-value value="application.addInfo"></hois-value> </md-input-container> </div> <br> <div layout="row"> <md-button class="md-raised md-primary" ng-if="canManage" ng-click="accept()">{{\'main.button.accept\' | translate}}</md-button> <md-button class="md-raised" ng-click="back(isStudent() ? \'#/scholarships/myData/drGrants\' : \'#/scholarships/applications/grants\')">{{\'main.button.back\' | translate}}</md-button> </div> </div> </div> </div> </fieldset> </div>'),a.put("scholarship/student/scholarship.application.edit.html",'<div ng-include="templateName"></div>'),a.put("scholarship/student/scholarship.application.eri.edit.html",'<div class="ois-form-layout-padding" ng-cloak> <fieldset tabindex="1"> <div class="form-readonly ois-form-layout-padding"> <div layout="row" flex> <md-input-container flex="45"> <label class="textInput">{{\'stipend.grantType\' | translate}}</label> <hois-classifier-value ng-model="stipend.type" main-classifier-code="STIPTOETUS"></hois-classifier-value> </md-input-container> <md-input-container flex="50" flex-offset="5"> <label>{{\'stipend.places\' | translate}}</label> <hois-value value="stipend.places"></hois-value> </md-input-container> </div> <div layout="row" flex> <md-input-container flex="45"> <label class="textInput">{{\'stipend.studyPeriod\' | translate}}</label> <hois-value value="currentLanguageNameField(stipend.studyPeriod)"></hois-value> </md-input-container> <md-input-container flex="50" flex-offset="5"> <label>{{\'stipend.amountPaid\' | translate}}</label> <hois-value value="stipend.amountPaid"></hois-value> </md-input-container> </div> <div layout="row" flex> <md-input-container flex="45"> <label class="textInput">{{\'stipend.studyForm\' | translate}}</label> <hois-classifier-value ng-model="stipend.studyForms" main-classifier-code="OPPEVORM" multiple></hois-classifier-value> </md-input-container> <md-input-container flex="50" flex-offset="5"> <label class="textInput">{{\'stipend.averageMark\' | translate}}</label> <hois-value value="stipend.averageMark"></hois-value> </md-input-container> </div> <div layout="row" flex> <md-input-container flex="45"> <label class="textInput">{{\'stipend.curriculumCompletion\' | translate}}</label> <hois-value value="stipend.curriculumCompletion"></hois-value> </md-input-container> <md-input-container flex="50" flex-offset="5"> <label class="textInput">{{\'stipend.lastPeriodMark\' | translate}}</label> <hois-value value="stipend.lastPeriodMark"></hois-value> </md-input-container> </div> <div layout="row" flex> <md-input-container flex="45"> <label class="textInput">{{\'stipend.maxAbsences\' | translate}}</label> <hois-value value="stipend.maxAbsences"></hois-value> </md-input-container> <div flex="50" flex-offset="5"> <md-checkbox ng-model="stipend.isTeacherConfirm" disabled aria-label="Is teacher confirm"> {{\'stipend.isTeacherConfirm\' | translate}} </md-checkbox> </div> </div> <div layout="row" flex> <md-input-container flex="45"> <label class="textInput">{{\'stipend.studyPeriodDates\' | translate}}</label> <hois-value value="stipend.matriculationRange"></hois-value> </md-input-container> </div> </div> </fieldset> <br> <fieldset tabindex="1"> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'stipend.student.myData\' | translate}}</legend> <div class="form-readonly ois-form-layout-padding"> <div layout="row" flex> <md-input-container flex="45"> <label class="textInput">{{\'stipend.averageMark\' | translate}}</label> <hois-value value="application.averageMark"></hois-value> </md-input-container> <md-input-container flex="50" flex-offset="5"> <label>{{\'stipend.lastPeriodMark\' | translate}}</label> <hois-value value="application.lastPeriodMark"></hois-value> </md-input-container> </div> <div layout="row" flex> <md-input-container flex="45"> <label class="textInput">{{\'stipend.curriculumCompletion\' | translate}}</label> <hois-value value="application.curriculumCompletion"></hois-value> </md-input-container> <md-input-container flex="50" flex-offset="5"> <label>{{\'stipend.maxAbsences\' | translate}}</label> <hois-value value="application.absences"></hois-value> </md-input-container> </div> <div layout="row" flex> <md-input-container flex="45"> <label class="textInput">{{\'stipend.student.studentGroup\' | translate}}</label> <hois-value value="application.studentGroupCode"></hois-value> </md-input-container> <md-input-container flex="50" flex-offset="5"> <label class="textInput">{{\'main.contactNumber\' | translate}}</label> <input ng-model="application.phone" type="text" md-maxlength="100"> </md-input-container> </div> <div layout="row" flex> <md-input-container flex="45"> <label class="textInput">{{\'stipend.student.address\' | translate}}</label> <hois-value value="application.address"></hois-value> </md-input-container> <md-input-container flex="50" flex-offset="5"> <label class="textInput">{{\'main.email\' | translate}}</label> <input ng-model="application.email" type="email" md-maxlength="100"> </md-input-container> </div> </div> <div class="ois-form-layout-padding ois-form-layout" ng-cloak> <div flex> <ng-form name="applicationForm"> <div layout="row" flex> <md-input-container flex="45" flex-md="100" flex-sm="100" flex-xs="100"> <label>{{\'stipend.student.bankAccount\' | translate}}</label> <input type="text" ng-model="application.bankAccount" name="bankAccount" required md-maxlength="50"> </md-input-container> <md-input-container flex="50" flex-md="100" flex-sm="100" flex-xs="100" flex-offset="5"> <label>{{\'stipend.student.bankAccountOwnerName\' | translate}}</label> <input type="text" ng-model="application.bankAccountOwnerName" name="bankAccount" required md-maxlength="100"> </md-input-container> </div> <div layout="row" flex> <md-input-container flex="45" flex-md="100" flex-sm="100" flex-xs="100"> <label>{{\'stipend.student.bankAccountOwnerIdcode\' | translate}}</label> <input type="text" ng-model="application.bankAccountOwnerIdcode" name="bankAccount" required md-maxlength="20"> </md-input-container> </div> <div layout="row" layout-xs="column"> <md-input-container flex="20" flex-md="100" flex-sm="100" flex-xs="100"> <label>{{\'stipend.student.stipToetusEriPeriod\' | translate}}</label> <input style="visibility:hidden"> </md-input-container> <md-input-container flex="35" flex-md="100" flex-sm="100" flex-xs="100" flex-offset="5" flex-offset-xs="0"> <md-datepicker ng-model="application.scholarshipFrom" md-max-date="application.scholarshipThru" md-placeholder="{{\'main.from\' | translate}}"></md-datepicker> </md-input-container> <md-input-container flex="35" flex-md="100" flex-sm="100" flex-xs="100" flex-offset="5" flex-offset-xs="0"> <md-datepicker ng-model="application.scholarshipThru" md-min-date="application.scholarshipFrom" md-placeholder="{{\'main.thru\' | translate}}"></md-datepicker> </md-input-container> </div> <div layout="row" flex> <md-input-container flex="100" flex-md="100" flex-sm="100" flex-xs="100"> <label>{{\'stipend.student.grantReason\' | translate}}</label> <textarea ng-model="application.addInfo" name="addInfo" md-maxlength="4000"></textarea> </md-input-container> </div> <br> <div ng-include="\'scholarship/student/scholarship.family.table.edit.html\'"></div> <br> <div ng-include="\'scholarship/scholarship.relatedFiles.edit.html\'"></div> <div layout="row" layout-xs="column"> <md-button class="md-raised md-primary" ng-if="application.canApply" ng-click="update(applicationForm)">{{\'main.button.save\' | translate}}</md-button> <md-button class="md-raised" ng-if="application.canApply" ng-click="apply(applicationForm)">{{\'stipend.student.apply\' | translate}}</md-button> <md-button class="md-raised" ng-click="back(\'#/scholarships/myData/grants\', applicationForm)">{{\'main.button.back\' | translate}}</md-button> </div> </ng-form> </div> </div> </fieldset> </div>'),a.put("scholarship/student/scholarship.application.eri.view.html",'<div class="ois-form-layout-padding" ng-cloak> <fieldset tabindex="1"> <div class="form-readonly ois-form-layout-padding"> <div layout="row" flex> <md-input-container flex="45"> <label class="textInput">{{\'stipend.grantType\' | translate}}</label> <hois-classifier-value ng-model="stipend.type" main-classifier-code="STIPTOETUS"></hois-classifier-value> </md-input-container> <md-input-container flex="50" flex-offset="5"> <label>{{\'stipend.places\' | translate}}</label> <hois-value value="stipend.places"></hois-value> </md-input-container> </div> <div layout="row" flex> <md-input-container flex="45"> <label class="textInput">{{\'stipend.studyPeriod\' | translate}}</label> <hois-value value="currentLanguageNameField(stipend.studyPeriod)"></hois-value> </md-input-container> <md-input-container flex="50" flex-offset="5"> <label>{{\'stipend.amountPaid\' | translate}}</label> <hois-value value="stipend.amountPaid"></hois-value> </md-input-container> </div> <div layout="row" layout-xs="column" flex> <md-input-container flex="45" flex-xs="100"> <label class="textInput">{{\'stipend.studyForm\' | translate}}</label> <hois-classifier-value ng-model="stipend.studyForms" main-classifier-code="OPPEVORM" multiple></hois-classifier-value> </md-input-container> <md-input-container flex="50" flex-xs="100" flex-offset-xs="0" flex-offset="5"> <label class="textInput">{{\'stipend.averageMark\' | translate}}</label> <hois-value value="stipend.averageMark"></hois-value> </md-input-container> </div> <div layout="row" layout-xs="column" flex> <md-input-container flex="45" flex-xs="100"> <label class="textInput">{{\'stipend.curriculumCompletion\' | translate}}</label> <hois-value value="stipend.curriculumCompletion"></hois-value> </md-input-container> <md-input-container flex="50" flex-xs="100" flex-offset-xs="0" flex-offset="5"> <label class="textInput">{{\'stipend.lastPeriodMark\' | translate}}</label> <hois-value value="stipend.lastPeriodMark"></hois-value> </md-input-container> </div> <div layout="row" flex> <md-input-container flex="45"> <label class="textInput">{{\'stipend.maxAbsences\' | translate}}</label> <hois-value value="stipend.maxAbsences"></hois-value> </md-input-container> <div flex="50" flex-offset="5"> <md-checkbox ng-model="stipend.isTeacherConfirm" disabled aria-label="Is teacher confirm"> {{\'stipend.isTeacherConfirm\' | translate}} </md-checkbox> </div> </div> <div layout="row" flex> <md-input-container flex="45" flex-xs="100"> <label class="textInput">{{\'stipend.studyPeriodDates\' | translate}}</label> <hois-value value="stipend.matriculationRange"></hois-value> </md-input-container> </div> </div> </fieldset> <br> <fieldset tabindex="1"> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{isStudent() ? \'stipend.student.myData\' : \'stipend.student.studentData\' | translate}}</legend> <div class="form-readonly ois-form-layout-padding"> <div layout="row" layout-xs="column" flex> <md-input-container flex="45" flex-xs="100"> <label class="textInput">{{\'stipend.averageMark\' | translate}}</label> <hois-value value="application.averageMark"></hois-value> </md-input-container> <md-input-container flex="50" flex-xs="100" flex-offset-xs="0" flex-offset="5"> <label>{{\'stipend.lastPeriodMark\' | translate}}</label> <hois-value value="application.lastPeriodMark"></hois-value> </md-input-container> </div> <div layout="row" layout-xs="column" flex> <md-input-container flex="45" flex-xs="100"> <label class="textInput">{{\'stipend.curriculumCompletion\' | translate}}</label> <hois-value value="application.curriculumCompletion"></hois-value> </md-input-container> <md-input-container flex="50" flex-xs="100" flex-offset-xs="0" flex-offset="5"> <label>{{\'stipend.maxAbsences\' | translate}}</label> <hois-value value="application.absences"></hois-value> </md-input-container> </div> <div layout="row" layout-xs="column" flex> <md-input-container flex="45" flex-xs="100"> <label class="textInput">{{\'stipend.student.studentGroup\' | translate}}</label> <hois-value value="application.studentGroupCode"></hois-value> </md-input-container> <md-input-container flex="50" flex-xs="100" flex-offset-xs="0" flex-offset="5"> <label class="textInput">{{\'main.contactNumber\' | translate}}</label> <hois-value value="application.phone"></hois-value> </md-input-container> </div> <div layout="row" layout-xs="column" flex> <md-input-container flex="45" flex-xs="100"> <label class="textInput">{{\'stipend.student.address\' | translate}}</label> <hois-value value="application.address"></hois-value> </md-input-container> <md-input-container flex="50" flex-xs="100" flex-offset-xs="0" flex-offset="5"> <label class="textInput">{{\'main.email\' | translate}}</label> <hois-value value="application.email"></hois-value> </md-input-container> </div> </div> <div class="form-readonly ois-form-layout-padding" ng-cloak> <div flex> <div layout="row" layout-xs="column" flex> <md-input-container flex="45" flex-md="100" flex-sm="100" flex-xs="100"> <label>{{\'stipend.student.bankAccount\' | translate}}</label> <hois-value value="application.bankAccount"></hois-value> </md-input-container> <md-input-container flex="50" flex-md="100" flex-sm="100" flex-xs="100" flex-offset-xs="0" flex-offset="5"> <label>{{\'stipend.student.bankAccountOwnerName\' | translate}}</label> <hois-value value="application.bankAccountOwnerName"></hois-value> </md-input-container> </div> <div layout="row" flex> <md-input-container flex="45" flex-md="100" flex-sm="100" flex-xs="100"> <label>{{\'stipend.student.bankAccountOwnerIdcode\' | translate}}</label> <hois-value value="application.bankAccountOwnerIdcode"></hois-value> </md-input-container> </div> <div layout="row" layout-xs="column"> <md-input-container flex="20" flex-md="100" flex-sm="100" flex-xs="100"> <label>{{\'stipend.student.stipToetusEriPeriod\' | translate}}</label> <input type="hidden"> </md-input-container> <md-input-container flex="35" flex-md="100" flex-sm="100" flex-xs="100" flex-offset="5"> <label>{{\'main.from\' | translate}}</label> <hois-value value="application.scholarshipFrom | hoisDate"></hois-value> </md-input-container> <md-input-container flex="35" flex-md="100" flex-sm="100" flex-xs="100" flex-offset="5"> <label>{{\'main.thru\' | translate}}</label> <hois-value value="application.scholarshipThru | hoisDate"></hois-value> </md-input-container> </div> <div layout="row" flex> <md-input-container flex="100" flex-md="100" flex-sm="100" flex-xs="100"> <label>{{\'stipend.student.grantReason\' | translate}}</label> <hois-value value="application.addInfo"></hois-value> </md-input-container> </div> <div ng-include="\'scholarship/student/scholarship.family.table.view.html\'"></div> <br> <div ng-include="\'scholarship/scholarship.relatedFiles.edit.html\'"></div> <div layout="row"> <md-button class="md-raised md-primary" ng-if="canManage" ng-click="accept()">{{\'main.button.accept\' | translate}}</md-button> <md-button class="md-raised" ng-click="back(isStudent() ? \'#/scholarships/myData/grants\' : \'#/scholarships/applications/grants\')">{{\'main.button.back\' | translate}}</md-button> </div> </div> </div> </fieldset> </div>'),a.put("scholarship/student/scholarship.application.pohi.edit.html",'<div class="ois-form-layout-padding" ng-cloak> <fieldset tabindex="1"> <div class="form-readonly ois-form-layout-padding"> <div layout="row" flex> <md-input-container flex="45"> <label class="textInput">{{\'stipend.grantType\' | translate}}</label> <hois-classifier-value ng-model="stipend.type" main-classifier-code="STIPTOETUS"></hois-classifier-value> </md-input-container> <md-input-container flex="50" flex-offset="5"> <label>{{\'stipend.places\' | translate}}</label> <hois-value value="stipend.places"></hois-value> </md-input-container> </div> <div layout="row" flex> <md-input-container flex="45"> <label class="textInput">{{\'stipend.studyPeriod\' | translate}}</label> <hois-value value="currentLanguageNameField(stipend.studyPeriod)"></hois-value> </md-input-container> <md-input-container flex="50" flex-offset="5"> <label>{{\'stipend.amountPaid\' | translate}}</label> <hois-value value="stipend.amountPaid"></hois-value> </md-input-container> </div> <div layout="row" flex> <md-input-container flex="45"> <label class="textInput">{{\'stipend.studyForm\' | translate}}</label> <hois-classifier-value ng-model="stipend.studyForms" main-classifier-code="OPPEVORM" multiple></hois-classifier-value> </md-input-container> <md-input-container flex="50" flex-offset="5"> <label class="textInput">{{\'stipend.averageMark\' | translate}}</label> <hois-value value="stipend.averageMark"></hois-value> </md-input-container> </div> <div layout="row" flex> <md-input-container flex="45"> <label class="textInput">{{\'stipend.curriculumCompletion\' | translate}}</label> <hois-value value="stipend.curriculumCompletion"></hois-value> </md-input-container> <md-input-container flex="50" flex-offset="5"> <label class="textInput">{{\'stipend.lastPeriodMark\' | translate}}</label> <hois-value value="stipend.lastPeriodMark"></hois-value> </md-input-container> </div> <div layout="row" flex> <md-input-container flex="45"> <label class="textInput">{{\'stipend.maxAbsences\' | translate}}</label> <hois-value value="stipend.maxAbsences"></hois-value> </md-input-container> <div flex="50" flex-offset="5"> <md-checkbox ng-model="stipend.isTeacherConfirm" disabled aria-label="Is teacher confirm"> {{\'stipend.isTeacherConfirm\' | translate}} </md-checkbox> </div> </div> <div layout="row" flex> <md-input-container flex="45"> <label class="textInput">{{\'stipend.studyPeriodDates\' | translate}}</label> <hois-value value="stipend.matriculationRange"></hois-value> </md-input-container> </div> </div> </fieldset> <br> <fieldset tabindex="1"> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'stipend.student.myData\' | translate}}</legend> <div class="form-readonly ois-form-layout-padding"> <div layout="row" flex> <md-input-container flex="45"> <label class="textInput">{{\'stipend.averageMark\' | translate}}</label> <hois-value value="application.averageMark"></hois-value> </md-input-container> <md-input-container flex="50" flex-offset="5"> <label>{{\'stipend.lastPeriodMark\' | translate}}</label> <hois-value value="application.lastPeriodMark"></hois-value> </md-input-container> </div> <div layout="row" flex> <md-input-container flex="45"> <label class="textInput">{{\'stipend.curriculumCompletion\' | translate}}</label> <hois-value value="application.curriculumCompletion"></hois-value> </md-input-container> <md-input-container flex="50" flex-offset="5"> <label>{{\'stipend.maxAbsences\' | translate}}</label> <hois-value value="application.absences"></hois-value> </md-input-container> </div> <div layout="row" flex> <md-input-container flex="45"> <label class="textInput">{{\'stipend.student.studentGroup\' | translate}}</label> <hois-value value="application.studentGroupCode"></hois-value> </md-input-container> <md-input-container flex="50" flex-offset="5"> <label class="textInput">{{\'main.contactNumber\' | translate}}</label> <input ng-model="application.phone" type="text" md-maxlength="100"> </md-input-container> </div> <div layout="row" flex> <md-input-container flex="45"> <label class="textInput">{{\'stipend.student.address\' | translate}}</label> <hois-value value="application.address"></hois-value> </md-input-container> <md-input-container flex="50" flex-offset="5"> <label class="textInput">{{\'main.email\' | translate}}</label> <input ng-model="application.email" type="email" md-maxlength="100"> </md-input-container> </div> </div> <div class="ois-form-layout-padding ois-form-layout" ng-cloak> <div flex> <form name="applicationForm"> <div layout="row" flex> <md-input-container flex="45" flex-md="100" flex-sm="100" flex-xs="100"> <label>{{\'stipend.student.bankAccount\' | translate}}</label> <input type="text" ng-model="application.bankAccount" name="bankAccount" required md-maxlength="50"> </md-input-container> </div> <div layout="row" flex> <md-input-container flex="100" flex-md="100" flex-sm="100" flex-xs="100"> <label>{{\'stipend.student.grantReason\' | translate}}</label> <textarea ng-model="application.addInfo" name="addInfo" md-maxlength="4000"></textarea> </md-input-container> </div> <div ng-include="\'scholarship/scholarship.relatedFiles.edit.html\'"></div> <br> <div layout="row" layout-xs="column"> <md-button class="md-raised md-primary" ng-if="application.canApply" ng-click="update(applicationForm)">{{\'main.button.save\' | translate}}</md-button> <md-button class="md-raised" ng-if="application.canApply" ng-click="apply(applicationForm)">{{\'stipend.student.apply\' | translate}}</md-button> <md-button class="md-raised" ng-click="back(\'#/scholarships/myData/grants\', applicationForm)">{{\'main.button.back\' | translate}}</md-button> </div> </form> </div> </div> </fieldset> </div>'),
a.put("scholarship/student/scholarship.application.pohi.view.html",'<div class="ois-form-layout-padding" ng-cloak> <fieldset tabindex="1"> <div class="form-readonly ois-form-layout-padding"> <div layout="row" flex> <md-input-container flex="45"> <label class="textInput">{{\'stipend.grantType\' | translate}}</label> <hois-classifier-value ng-model="stipend.type" main-classifier-code="STIPTOETUS"></hois-classifier-value> </md-input-container> <md-input-container flex="50" flex-offset="5"> <label>{{\'stipend.places\' | translate}}</label> <hois-value value="stipend.places"></hois-value> </md-input-container> </div> <div layout="row" flex> <md-input-container flex="45"> <label class="textInput">{{\'stipend.studyPeriod\' | translate}}</label> <hois-value value="currentLanguageNameField(stipend.studyPeriod)"></hois-value> </md-input-container> <md-input-container flex="50" flex-offset="5"> <label>{{\'stipend.amountPaid\' | translate}}</label> <hois-value value="stipend.amountPaid"></hois-value> </md-input-container> </div> <div layout="row" layout-xs="column" flex> <md-input-container flex="45" flex-xs="100"> <label class="textInput">{{\'stipend.studyForm\' | translate}}</label> <hois-classifier-value ng-model="stipend.studyForms" main-classifier-code="OPPEVORM" multiple></hois-classifier-value> </md-input-container> <md-input-container flex="50" flex-xs="100" flex-offset-xs="0" flex-offset="5"> <label class="textInput">{{\'stipend.averageMark\' | translate}}</label> <hois-value value="stipend.averageMark"></hois-value> </md-input-container> </div> <div layout="row" layout-xs="column" flex> <md-input-container flex="45" flex-xs="100"> <label class="textInput">{{\'stipend.curriculumCompletion\' | translate}}</label> <hois-value value="stipend.curriculumCompletion"></hois-value> </md-input-container> <md-input-container flex="50" flex-xs="100" flex-offset-xs="0" flex-offset="5"> <label class="textInput">{{\'stipend.lastPeriodMark\' | translate}}</label> <hois-value value="stipend.lastPeriodMark"></hois-value> </md-input-container> </div> <div layout="row" flex> <md-input-container flex="45"> <label class="textInput">{{\'stipend.maxAbsences\' | translate}}</label> <hois-value value="stipend.maxAbsences"></hois-value> </md-input-container> <div flex="50" flex-offset="5"> <md-checkbox ng-model="stipend.isTeacherConfirm" disabled aria-label="Is teacher confirm"> {{\'stipend.isTeacherConfirm\' | translate}} </md-checkbox> </div> </div> <div layout="row" flex> <md-input-container flex="45" flex-xs="100"> <label class="textInput">{{\'stipend.studyPeriodDates\' | translate}}</label> <hois-value value="stipend.matriculationRange"></hois-value> </md-input-container> </div> </div> </fieldset> <br> <fieldset tabindex="1"> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{isStudent() ? \'stipend.student.myData\' : \'stipend.student.studentData\' | translate}}</legend> <div class="form-readonly ois-form-layout-padding"> <div layout="row" layout-xs="column" flex> <md-input-container flex="45" flex-xs="100"> <label class="textInput">{{\'stipend.averageMark\' | translate}}</label> <hois-value value="application.averageMark"></hois-value> </md-input-container> <md-input-container flex="50" flex-xs="100" flex-offset-xs="0" flex-offset="5"> <label>{{\'stipend.lastPeriodMark\' | translate}}</label> <hois-value value="application.lastPeriodMark"></hois-value> </md-input-container> </div> <div layout="row" layout-xs="column" flex> <md-input-container flex="45" flex-xs="100"> <label class="textInput">{{\'stipend.curriculumCompletion\' | translate}}</label> <hois-value value="application.curriculumCompletion"></hois-value> </md-input-container> <md-input-container flex="50" flex-xs="100" flex-offset-xs="0" flex-offset="5"> <label>{{\'stipend.maxAbsences\' | translate}}</label> <hois-value value="application.absences"></hois-value> </md-input-container> </div> <div layout="row" layout-xs="column" flex> <md-input-container flex="45" flex-xs="100"> <label class="textInput">{{\'stipend.student.studentGroup\' | translate}}</label> <hois-value value="application.studentGroupCode"></hois-value> </md-input-container> <md-input-container flex="50" flex-xs="100" flex-offset-xs="0" flex-offset="5"> <label class="textInput">{{\'main.contactNumber\' | translate}}</label> <hois-value value="application.phone"></hois-value> </md-input-container> </div> <div layout="row" layout-xs="column" flex> <md-input-container flex="45" flex-xs="100"> <label class="textInput">{{\'stipend.student.address\' | translate}}</label> <hois-value value="application.address"></hois-value> </md-input-container> <md-input-container flex="50" flex-xs="100" flex-offset-xs="0" flex-offset="5"> <label class="textInput">{{\'main.email\' | translate}}</label> <hois-value value="application.email"></hois-value> </md-input-container> </div> </div> <div class="form-readonly ois-form-layout-padding"> <div flex> <div layout="row" flex> <md-input-container flex="45" flex-md="100" flex-sm="100" flex-xs="100"> <label>{{\'stipend.student.bankAccount\' | translate}}</label> <hois-value value="application.bankAccount"></hois-value> </md-input-container> </div> <div layout="row" flex> <md-input-container flex="100" flex-md="100" flex-sm="100" flex-xs="100"> <label>{{\'stipend.student.grantReason\' | translate}}</label> <hois-value value="application.addInfo"></hois-value> </md-input-container> </div> <div ng-include="\'scholarship/scholarship.relatedFiles.edit.html\'"></div> <br> <div layout="row"> <md-button class="md-raised md-primary" ng-if="canManage" ng-click="accept()">{{\'main.button.accept\' | translate}}</md-button> <md-button class="md-raised" ng-click="back(isStudent() ? \'#/scholarships/myData/grants\' : \'#/scholarships/applications/grants\')">{{\'main.button.back\' | translate}}</md-button> </div> </div> </div> </fieldset> </div>'),a.put("scholarship/student/scholarship.application.scho.edit.html",'<div class="ois-form-layout-padding" ng-cloak> <fieldset tabindex="1"> <div class="form-readonly ois-form-layout-padding"> <div layout="row" flex> <md-input-container flex="45"> <label class="textInput">{{\'stipend.scholarshipType\' | translate}}</label> <hois-classifier-value ng-model="stipend.type" main-classifier-code="STIPTOETUS"></hois-classifier-value> </md-input-container> <md-input-container flex="50" flex-offset="5"> <label>{{\'stipend.places\' | translate}}</label> <hois-value value="stipend.places"></hois-value> </md-input-container> </div> <div layout="row" flex> <md-input-container flex="45"> <label class="textInput">{{\'stipend.studyPeriod\' | translate}}</label> <hois-value value="currentLanguageNameField(stipend.studyPeriod)"></hois-value> </md-input-container> <md-input-container flex="50" flex-offset="5"> <label>{{\'stipend.amountPaid\' | translate}}</label> <hois-value value="stipend.amountPaid"></hois-value> </md-input-container> </div> <div layout="row" flex> <md-input-container flex="45"> <label class="textInput">{{\'stipend.studyLoad\' | translate}}</label> <hois-classifier-value ng-model="stipend.studyLoads" main-classifier-code="OPPEKOORMUS" multiple></hois-classifier-value> </md-input-container> <md-input-container flex="50" flex-offset="5"> <label class="textInput">{{\'stipend.averageMark\' | translate}}</label> <hois-value value="stipend.averageMark"></hois-value> </md-input-container> </div> <div layout="row" flex> <md-input-container flex="45"> <label class="textInput">{{\'stipend.curriculumCompletion\' | translate}}</label> <hois-value value="stipend.curriculumCompletion"></hois-value> </md-input-container> <md-input-container flex="50" flex-offset="5"> <label class="textInput">{{\'stipend.lastPeriodMark\' | translate}}</label> <hois-value value="stipend.lastPeriodMark"></hois-value> </md-input-container> </div> <div layout="row" flex> <md-input-container flex="45"> <label class="textInput">{{\'stipend.studyPeriodDates\' | translate}}</label> <hois-value value="stipend.matriculationRange"></hois-value> </md-input-container> <div flex="50" flex-offset="5"> <md-checkbox ng-model="stipend.isAcademicLeave" disabled aria-label="Is academic leave"> {{\'stipend.isAcademicLeave\' | translate}} </md-checkbox> </div> </div> </div> </fieldset> <br> <fieldset tabindex="1"> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'stipend.student.myData\' | translate}}</legend> <div class="form-readonly ois-form-layout-padding"> <div layout="row" flex> <md-input-container flex="45" ng-if="!application.useSaisPoints"> <label class="textInput">{{\'stipend.averageMark\' | translate}}</label> <hois-value value="application.averageMark"></hois-value> </md-input-container> <md-input-container flex="45" ng-if="application.useSaisPoints"> <label class="textInput">{{\'stipend.saisPoints\' | translate}}</label> <hois-value value="application.saisPoints"></hois-value> </md-input-container> <md-input-container flex="50" flex-offset="5"> <label>{{\'stipend.lastPeriodMark\' | translate}}</label> <hois-value value="application.lastPeriodMark"></hois-value> </md-input-container> </div> <div layout="row" flex> <md-input-container flex="45"> <label class="textInput">{{\'stipend.curriculumCompletion\' | translate}}</label> <hois-value value="application.curriculumCompletion"></hois-value> </md-input-container> <md-input-container flex="50" flex-offset="5"> <label class="textInput">{{\'stipend.credits\' | translate}}</label> <hois-value value="application.credits"></hois-value> </md-input-container> </div> </div> <ng-form name="applicationForm"> <div layout="row" flex> <md-input-container flex="45" flex-md="100" flex-sm="100" flex-xs="100"> <label>{{\'stipend.student.bankAccount\' | translate}}</label> <input type="text" ng-model="application.bankAccount" name="bankAccount" required md-maxlength="50"> </md-input-container> </div> <div layout="row" flex> <md-input-container flex="100" flex-md="100" flex-sm="100" flex-xs="100"> <label>{{\'stipend.student.professionalAchievements\' | translate}}</label> <textarea ng-model="application.addInfo" name="addInfo" md-maxlength="4000"></textarea> </md-input-container> </div> <br> <div ng-include="\'scholarship/scholarship.relatedFiles.edit.html\'"></div> <br> <div layout="row"> <md-button class="md-raised md-primary" ng-if="application.canApply" ng-click="update(applicationForm)">{{\'main.button.save\' | translate}}</md-button> <md-button class="md-raised" ng-if="application.canApply" ng-click="apply(applicationForm)">{{\'stipend.student.apply\' | translate}}</md-button> <md-button class="md-raised" ng-click="back(\'#/scholarships/myData/grants\', applicationForm)">{{\'main.button.back\' | translate}}</md-button> </div> </ng-form> </fieldset> </div>'),a.put("scholarship/student/scholarship.application.scho.view.html",'<div class="ois-form-layout-padding" ng-cloak> <fieldset tabindex="1"> <div class="form-readonly ois-form-layout-padding"> <div layout="row" flex> <md-input-container flex="45"> <label class="textInput">{{\'stipend.scholarshipType\' | translate}}</label> <hois-classifier-value ng-model="stipend.type" main-classifier-code="STIPTOETUS"></hois-classifier-value> </md-input-container> <md-input-container flex="50" flex-offset="5"> <label>{{\'stipend.places\' | translate}}</label> <hois-value value="stipend.places"></hois-value> </md-input-container> </div> <div layout="row" flex> <md-input-container flex="45"> <label class="textInput">{{\'stipend.studyPeriod\' | translate}}</label> <hois-value value="currentLanguageNameField(stipend.studyPeriod)"></hois-value> </md-input-container> <md-input-container flex="50" flex-offset="5"> <label>{{\'stipend.amountPaid\' | translate}}</label> <hois-value value="stipend.amountPaid"></hois-value> </md-input-container> </div> <div layout="row" flex> <md-input-container flex="45"> <label class="textInput">{{\'stipend.studyLoad\' | translate}}</label> <hois-classifier-value ng-model="stipend.studyLoads" main-classifier-code="OPPEKOORMUS" multiple></hois-classifier-value> </md-input-container> <md-input-container flex="50" flex-offset="5"> <label class="textInput">{{\'stipend.averageMark\' | translate}}</label> <hois-value value="stipend.averageMark"></hois-value> </md-input-container> </div> <div layout="row" flex> <md-input-container flex="45"> <label class="textInput">{{\'stipend.curriculumCompletion\' | translate}}</label> <hois-value value="stipend.curriculumCompletion"></hois-value> </md-input-container> <md-input-container flex="50" flex-offset="5"> <label class="textInput">{{\'stipend.lastPeriodMark\' | translate}}</label> <hois-value value="stipend.lastPeriodMark"></hois-value> </md-input-container> </div> <div layout="row" flex> <md-input-container flex="45"> <label class="textInput">{{\'stipend.studyPeriodDates\' | translate}}</label> <hois-value value="stipend.matriculationRange"></hois-value> </md-input-container> <div flex="50" flex-offset="5"> <md-checkbox ng-model="stipend.isAcademicLeave" disabled aria-label="Is academic leave"> {{\'stipend.isAcademicLeave\' | translate}} </md-checkbox> </div> </div> </div> </fieldset> <br> <fieldset tabindex="1"> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{isStudent() ? \'stipend.student.myData\' : \'stipend.student.studentData\' | translate}}</legend> <div class="form-readonly ois-form-layout-padding"> <div layout="row" flex> <md-input-container flex="45" ng-if="!application.useSaisPoints"> <label class="textInput">{{\'stipend.averageMark\' | translate}}</label> <hois-value value="application.averageMark"></hois-value> </md-input-container> <md-input-container flex="45" ng-if="application.useSaisPoints"> <label class="textInput">{{\'stipend.saisPoints\' | translate}}</label> <hois-value value="application.saisPoints"></hois-value> </md-input-container> <md-input-container flex="50" flex-offset="5"> <label>{{\'stipend.lastPeriodMark\' | translate}}</label> <hois-value value="application.lastPeriodMark"></hois-value> </md-input-container> </div> <div layout="row" flex> <md-input-container flex="45"> <label class="textInput">{{\'stipend.curriculumCompletion\' | translate}}</label> <hois-value value="application.curriculumCompletion"></hois-value> </md-input-container> <md-input-container flex="50" flex-offset="5"> <label class="textInput">{{\'stipend.credits\' | translate}}</label> <hois-value value="application.credits"></hois-value> </md-input-container> </div> </div> <div class="form-readonly ois-form-layout-padding"> <div layout="row" flex> <md-input-container flex="45" flex-md="100" flex-sm="100" flex-xs="100"> <label>{{\'stipend.student.bankAccount\' | translate}}</label> <hois-value value="application.bankAccount"></hois-value> </md-input-container> </div> <div layout="row" flex> <md-input-container flex="100" flex-md="100" flex-sm="100" flex-xs="100"> <label>{{\'stipend.student.professionalAchievements\' | translate}}</label> <hois-value value="application.addInfo"></hois-value> </md-input-container> </div> <br> <div ng-include="\'scholarship/scholarship.relatedFiles.edit.html\'"></div> <br> <div layout="row"> <md-button class="md-raised md-primary" ng-if="canManage" ng-click="accept()">{{\'main.button.accept\' | translate}}</md-button> <md-button class="md-raised" ng-click="back(isStudent() ? \'#/scholarships/myData/scholarships\' : \'#/scholarships/applications/grants\')">{{\'main.button.back\' | translate}}</md-button> </div> </div> </fieldset> </div>'),a.put("scholarship/student/scholarship.application.soidu.edit.html",'<div class="ois-form-layout-padding" ng-cloak> <fieldset tabindex="1"> <div class="form-readonly ois-form-layout-padding"> <div layout="row" flex> <md-input-container flex="45"> <label class="textInput">{{\'stipend.grantType\' | translate}}</label> <hois-classifier-value ng-model="stipend.type" main-classifier-code="STIPTOETUS"></hois-classifier-value> </md-input-container> </div> <div layout="row" flex> <md-input-container flex="45"> <label class="textInput">{{\'stipend.studyPeriod\' | translate}}</label> <hois-value value="currentLanguageNameField(stipend.studyPeriod)"></hois-value> </md-input-container> <md-input-container flex="50" flex-offset="5"> <label>{{\'stipend.amountPaid\' | translate}}</label> <hois-value value="stipend.amountPaid"></hois-value> </md-input-container> </div> <div layout="row" flex> <md-input-container flex="45"> <label class="textInput">{{\'stipend.studyForm\' | translate}}</label> <hois-classifier-value ng-model="stipend.studyForms" main-classifier-code="OPPEVORM" multiple></hois-classifier-value> </md-input-container> <div flex="50" flex-offset="5"> <md-checkbox ng-model="stipend.isTeacherConfirm" disabled aria-label="Is teacher confirm"> {{\'stipend.isTeacherConfirm\' | translate}} </md-checkbox> </div> </div> <div layout="row" flex> <md-input-container flex="45"> <label class="textInput">{{\'stipend.studyPeriodDates\' | translate}}</label> <hois-value value="stipend.matriculationRange"></hois-value> </md-input-container> </div> </div> </fieldset> <br> <fieldset tabindex="1"> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'stipend.student.myData\' | translate}}</legend> <div class="form-readonly ois-form-layout-padding"> <div layout="row" flex> <md-input-container flex="45"> <label class="textInput">{{\'stipend.student.studentGroup\' | translate}}</label> <hois-value value="application.studentGroupCode"></hois-value> </md-input-container> <md-input-container flex="50" flex-offset="5"> <label class="textInput">{{\'main.contactNumber\' | translate}}</label> <input ng-model="application.phone" type="text" md-maxlength="100"> </md-input-container> </div> <div layout="row" flex> <md-input-container flex="45"> <label class="textInput">{{\'stipend.student.address\' | translate}}</label> <hois-value value="application.address"></hois-value> </md-input-container> <md-input-container flex="50" flex-offset="5"> <label class="textInput">{{\'main.email\' | translate}}</label> <input ng-model="application.email" type="email" md-maxlength="100"> </md-input-container> </div> </div> <div class="ois-form-layout-padding ois-form-layout" ng-cloak> <div flex> <form name="applicationForm"> <div layout="row"> <div layout="column" flex="45"> <div layout="row" flex> <md-input-container flex> <label>{{\'stipend.student.bankAccount\' | translate}}</label> <input type="text" ng-model="application.bankAccount" name="bankAccount" required md-maxlength="50"> </md-input-container> </div> <div layout="row" flex> <md-input-container flex> <label class="textInput">{{\'stipend.compensationReason\' | translate}}</label> <hois-classifier-select required ng-model="application.compensationReason" name="type" model-value-attr="code" main-classifier-code="STIPTOETUS_HYVITAMINE_POHJUS"></hois-classifier-select> </md-input-container> </div> <div layout="row" ng-if="application.compensationReason === \'STIPTOETUS_HYVITAMINE_POHJUS_I\'"> <md-input-container flex> <label>{{\'stipend.routeKm\' | translate}}</label> <input ng-model="application.routeKm" type="number" aria-label="routeKm" min="0"> </md-input-container> </div> </div> <div layout="column" flex="50" flex-offset="5"> <fieldset flex="100" layout="column"> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'stipend.compensationFrequency\' | translate}}</legend> <md-input-container> <md-radio-group layout="column" ng-model="application.compensationFrequency" required> <md-radio-button flex layout="row" ng-repeat="frequency in compensationFrequencies" value="{{frequency.code}}" aria-label="passedSubject"> {{currentLanguageNameField(frequency)}} </md-radio-button> </md-radio-group> </md-input-container> </fieldset> </div> </div> <div layout="row" flex ng-if="application.compensationReason === \'STIPTOETUS_HYVITAMINE_POHJUS_M\'"> <md-input-container flex="100" flex-md="100" flex-sm="100" flex-xs="100"> <label>{{\'stipend.student.specificReason\' | translate}}</label> <textarea required ng-model="application.addInfo" name="addInfo" md-maxlength="4000"></textarea> </md-input-container> </div> <br> <div ng-include="\'scholarship/scholarship.relatedFiles.edit.html\'"></div> <br> <div layout="row"> <md-button class="md-raised md-primary" ng-if="application.canApply" ng-click="update(applicationForm)">{{\'main.button.save\' | translate}}</md-button> <md-button class="md-raised" ng-if="application.canApply" ng-click="apply(applicationForm)">{{\'stipend.student.apply\' | translate}}</md-button> <md-button class="md-raised" ng-click="back(\'#/scholarships/myData/grants\', applicationForm)">{{\'main.button.back\' | translate}}</md-button> </div> </form> </div> </div> </fieldset> </div>'),a.put("scholarship/student/scholarship.application.soidu.view.html",'<div class="ois-form-layout-padding" ng-cloak> <fieldset tabindex="1"> <div class="form-readonly ois-form-layout-padding"> <div layout="row" flex> <md-input-container flex="45"> <label class="textInput">{{\'stipend.grantType\' | translate}}</label> <hois-classifier-value ng-model="stipend.type" main-classifier-code="STIPTOETUS"></hois-classifier-value> </md-input-container> </div> <div layout="row" flex> <md-input-container flex="45"> <label class="textInput">{{\'stipend.studyPeriod\' | translate}}</label> <hois-value value="currentLanguageNameField(stipend.studyPeriod)"></hois-value> </md-input-container> <md-input-container flex="50" flex-offset="5"> <label>{{\'stipend.amountPaid\' | translate}}</label> <hois-value value="stipend.amountPaid"></hois-value> </md-input-container> </div> <div layout="row" layout-xs="column" flex> <md-input-container flex="45" flex-xs="100"> <label class="textInput">{{\'stipend.studyForm\' | translate}}</label> <hois-classifier-value ng-model="stipend.studyForms" main-classifier-code="OPPEVORM" multiple></hois-classifier-value> </md-input-container> <div flex="50" flex-xs="100" flex-offset-xs="0" flex-offset="5"> <md-checkbox ng-model="stipend.isTeacherConfirm" disabled aria-label="Is teacher confirm"> {{\'stipend.isTeacherConfirm\' | translate}} </md-checkbox> </div> </div> <div layout="row" flex> <md-input-container flex="45" flex-xs="100"> <label class="textInput">{{\'stipend.studyPeriodDates\' | translate}}</label> <hois-value value="stipend.matriculationRange"></hois-value> </md-input-container> </div> </div> </fieldset> <br> <fieldset tabindex="1"> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{isStudent() ? \'stipend.student.myData\' : \'stipend.student.studentData\' | translate}}</legend> <div class="form-readonly ois-form-layout-padding"> <div layout="row" flex> <md-input-container flex="45"> <label class="textInput">{{\'stipend.student.studentGroup\' | translate}}</label> <hois-value value="application.studentGroupCode"></hois-value> </md-input-container> <md-input-container flex="50" flex-offset="5"> <label class="textInput">{{\'main.contactNumber\' | translate}}</label> <hois-value value="application.phone"></hois-value> </md-input-container> </div> <div layout="row" layout-xs="column" flex> <md-input-container flex="45" flex-xs="100"> <label class="textInput">{{\'stipend.student.address\' | translate}}</label> <hois-value value="application.address"></hois-value> </md-input-container> <md-input-container flex="50" flex-xs="100" flex-offset-xs="0" flex-offset="5"> <label class="textInput">{{\'main.email\' | translate}}</label> <hois-value value="application.email"></hois-value> </md-input-container> </div> </div> <div class="form-readonly ois-form-layout-padding"> <div flex> <div layout="row" layout-xs="column"> <div layout="column" flex="45" flex-xs="100"> <div layout="row" flex> <md-input-container flex> <label>{{\'stipend.student.bankAccount\' | translate}}</label> <hois-value value="application.bankAccount"> </hois-value></md-input-container> </div> <div layout="row" flex> <md-input-container flex> <label class="textInput">{{\'stipend.compensationReason\' | translate}}</label> <hois-classifier-value ng-model="application.compensationReason" main-classifier-code="STIPTOETUS_HYVITAMINE_POHJUS"></hois-classifier-value> </md-input-container> </div> <div layout="row" ng-if="application.compensationReason === \'STIPTOETUS_HYVITAMINE_POHJUS_I\'"> <md-input-container flex> <label>{{\'stipend.routeKm\' | translate}}</label> <hois-value value="application.routeKm"></hois-value> </md-input-container> </div> </div> <div layout="column" layout-xs="row" flex-xs="100" flex-offset-xs="0" flex="50" flex-offset="5"> <fieldset flex="100" layout="column"> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'stipend.compensationFrequency\' | translate}}</legend> <div style="overflow:auto"> <md-input-container> <md-radio-group layout="column" ng-model="application.compensationFrequency" required> <md-radio-button flex layout="row" disabled ng-repeat="frequency in compensationFrequencies" value="{{frequency.code}}" aria-label="passedSubject"> {{currentLanguageNameField(frequency)}} </md-radio-button> </md-radio-group> </md-input-container> </div> </fieldset> </div> </div> <div layout="row" flex ng-if="application.compensationReason === \'STIPTOETUS_HYVITAMINE_POHJUS_M\'"> <md-input-container flex="100" flex-md="100" flex-sm="100" flex-xs="100"> <label>{{\'stipend.student.specificReason\' | translate}}</label> <hois-value value="application.addInfo"></hois-value> </md-input-container> </div> <br> <div ng-include="\'scholarship/scholarship.relatedFiles.edit.html\'"></div> <br> <div layout="row"> <md-button class="md-raised md-primary" ng-if="canManage" ng-click="accept()">{{\'main.button.accept\' | translate}}</md-button> <md-button class="md-raised" ng-click="back(isStudent() ? \'#/scholarships/myData/grants\' : \'#/scholarships/applications/grants\')">{{\'main.button.back\' | translate}}</md-button> </div> </div> </div> </fieldset> </div>'),a.put("scholarship/student/scholarship.drGrants.student.html","<div class=\"ois-form-layout-padding\" ng-cloak> <fieldset tabindex=\"1\"> <legend md-colors=\"{color: 'primary-800'}\" class=\"md-title-small\">{{'stipend.student.grants' | translate}}</legend> <table md-table class=\"secondary-table\"> <thead md-head> <tr md-row> <th md-column>{{'stipend.type' | translate}}</th> <th md-column>{{'stipend.applicationPeriod' | translate}}</th> <th md-column>{{'stipend.places' | translate}}</th> <th md-column>&nbsp;</th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat=\"stipend in possibleStipends\" ng-class-odd=\"'odd'\" ng-class-even=\"'even'\"> <td md-cell>{{currentLanguageNameField(stipend.type)}}</td> <td md-cell>{{stipend.applicationStart | hoisDate}}-{{stipend.applicationEnd | hoisDate}}</td> <td md-cell>{{stipend.places ? stipend.places : '-'}}</td> <td md-cell> <span ng-if=\"stipend.canApply\"> <a href=\"#/scholarships/{{stipend.id}}/application\">{{'stipend.student.apply' | translate}}</a> </span> </td> </tr> </tbody> </table> </fieldset> <br> <fieldset tabindex=\"1\"> <legend md-colors=\"{color: 'primary-800'}\" class=\"md-title-small\">{{'stipend.student.applications' | translate}}</legend> <table md-table class=\"secondary-table\"> <thead md-head> <tr md-row> <th md-column>{{'stipend.type' | translate}}</th> <th md-column>{{'stipend.student.status' | translate}}</th> <th md-column>{{'stipend.student.decisionDate' | translate}}</th> <th md-column>&nbsp;</th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat=\"stipend in studentStipends\" ng-class-odd=\"'odd'\" ng-class-even=\"'even'\"> <td md-cell> <a href=\"#/scholarships/applications/{{stipend.id}}\">{{currentLanguageNameField(stipend.type)}}</a> </td> <td md-cell>{{currentLanguageNameField(stipend.status)}} <md-tooltip ng-if=\"['STIPTOETUS_STAATUS_L', 'STIPTOETUS_STAATUS_T'].indexOf(stipend.status.code) !== -1  && stipend.rejectComment\">{{stipend.rejectComment}}</md-tooltip> </td> <td md-cell>{{stipend.decisionDate ? (stipend.decisionDate | hoisDate) : '-'}}</td> <td md-cell> <span ng-if=\"stipend.status.code === 'STIPTOETUS_STAATUS_K' || stipend.status.code === 'STIPTOETUS_STAATUS_T'\"> <a href=\"#/scholarships/{{stipend.termId}}/application\">{{'stipend.student.edit' | translate}}</a> </span> </td> </tr> </tbody> </table> </fieldset> </div>"),a.put("scholarship/student/scholarship.family.addMember.html",'<md-dialog aria-label="add enterprise dialog" flex="30"> <form name="dialogForm" ng-submit="dialogForm.$valid && submit()" novalidate ng-cloak> <md-toolbar> <div class="md-toolbar-tools"> <h2 flex>{{\'stipend.student.addFamilyMember\' | translate}}</h2> <md-button class="md-icon-button" ng-click="cancel()"> <md-icon md-font-set="material-icons">close</md-icon> </md-button> </div> </md-toolbar> <md-dialog-content> <span flex></span> <div class="ois-form-layout" layout="column" layout-margin ng-cloak> <div layout="row" flex> <md-input-container flex="80" flex-md="100" flex-sm="100" flex-xs="100"> <label>{{\'stipend.family.name\' | translate}}</label> <input type="text" ng-model="member.name" name="name" required md-maxlength="100"> </md-input-container> </div> <div layout="row"> <md-input-container flex="80"> <label>{{\'stipend.family.netSalary\' | translate}}</label> <input ng-model="member.netSalary" type="number" aria-label="places" min="0"> </md-input-container> </div> <div layout="row"> <md-input-container flex="80"> <label>{{\'stipend.family.pension\' | translate}}</label> <input ng-model="member.pension" type="number" aria-label="places" min="0"> </md-input-container> </div> <div layout="row"> <md-input-container flex="80"> <label>{{\'stipend.family.stateBenefit\' | translate}}</label> <input ng-model="member.stateBenefit" type="number" aria-label="places" min="0"> </md-input-container> </div> <div layout="row"> <md-input-container flex="80"> <label>{{\'stipend.family.otherIncome\' | translate}}</label> <input ng-model="member.otherIncome" type="number" aria-label="places" min="0"> </md-input-container> </div> <div layout="row"> <md-input-container flex="80"> <label>{{\'stipend.family.unemployedBenefit\' | translate}}</label> <input ng-model="member.unemployedBenefit" type="number" aria-label="places" min="0"> </md-input-container> </div> </div> </md-dialog-content> <md-dialog-actions layout="row" layout-align="start start"> <md-button class="md-raised md-primary" type="submit">{{\'main.button.add\' | translate}}</md-button> <md-button class="md-raised" ng-click="cancel()">{{"main.button.close" | translate}}</md-button> </md-dialog-actions> </form> </md-dialog>'),a.put("scholarship/student/scholarship.family.table.edit.html",'<fieldset> <legend md-colors="{color: \'primary-800\'}" class="md-title-small"> {{\'stipend.student.familyIncome\' | translate}}</legend> <div layout="row" flex> <md-input-container flex="45"> <label>{{\'stipend.student.familyMembers\' | translate}}</label> <input ng-model="application.familyMembers" type="number" autofocus aria-label="familyMembers" min="0"> </md-input-container> <md-input-container flex="50" flex-offset="5"> <label>{{\'stipend.student.familyMembersAdult\' | translate}}</label> <input ng-model="application.familyMembersAdult" type="number" autofocus aria-label="familyMembersAdult" min="0" max="{{application.familyMembers ? application.familyMembers : 0}}"> </md-input-container> </div> <md-button class="md-raised" ng-click="addFamilyMember()" ng-if="editable">{{\'stipend.student.addFamilyMember\' | translate}}</md-button> <md-table-container> <table md-table class="secondary-table"> <thead md-head> <tr md-row> <th md-column>{{\'stipend.family.name\' | translate}}</th> <th md-column>{{\'stipend.family.netSalary\' | translate}}</th> <th md-column>{{\'stipend.family.pension\' | translate}}</th> <th md-column>{{\'stipend.family.stateBenefit\' | translate}}</th> <th md-column>{{\'stipend.family.otherIncome\' | translate}}</th> <th md-column>{{\'stipend.family.unemployedBenefit\' | translate}}</th> <th md-column>{{\'main.sum\' | translate}}</th> <th md-column ng-if="editable"></th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="member in application.family" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell>{{member.name}}</td> <td md-cell>{{member.netSalary ? member.netSalary : \'-\'}}</td> <td md-cell>{{member.pension ? member.pension : \'-\'}}</td> <td md-cell>{{member.stateBenefit ? member.stateBenefit : \'-\'}}</td> <td md-cell>{{member.otherIncome ? member.otherIncome : \'-\'}}</td> <td md-cell>{{member.unemployedBenefit ? member.unemployedBenefit : \'-\'}}</td> <td md-cell>{{member.sum ? member.sum : \'-\'}}</td> <td md-cell ng-if="editable"> <md-button class="remove nomargin" ng-click="removeFromArray(application.family, member)">&times;</md-button> </td> </tr> </tbody> </table> </md-table-container> </fieldset>'),
a.put("scholarship/student/scholarship.family.table.view.html","<fieldset> <legend md-colors=\"{color: 'primary-800'}\" class=\"md-title-small\"> {{'stipend.student.familyIncome' | translate}}</legend> <div class=\"form-readonly ois-form-layout-padding\"> <div layout=\"row\" layout-xs=\"column\" flex> <md-input-container flex=\"45\" flex-xs=\"100\"> <label>{{'stipend.student.familyMembers' | translate}}</label> <hois-value value=\"application.familyMembers\"> </hois-value></md-input-container> <md-input-container flex=\"50\" flex-xs=\"100\" flex-offset-xs=\"0\" flex-offset=\"5\"> <label>{{'stipend.student.familyMembersAdult' | translate}}</label> <hois-value value=\"application.familyMembersAdult\"> </hois-value></md-input-container> </div> </div> <md-table-container> <table md-table class=\"secondary-table\"> <thead md-head> <tr md-row> <th md-column>{{'stipend.family.name' | translate}}</th> <th md-column>{{'stipend.family.netSalary' | translate}}</th> <th md-column>{{'stipend.family.pension' | translate}}</th> <th md-column>{{'stipend.family.stateBenefit' | translate}}</th> <th md-column>{{'stipend.family.otherIncome' | translate}}</th> <th md-column>{{'stipend.family.unemployedBenefit' | translate}}</th> <th md-column>{{'main.sum' | translate}}</th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat=\"member in application.family\" ng-class-odd=\"'odd'\" ng-class-even=\"'even'\"> <td md-cell>{{member.name}}</td> <td md-cell>{{member.netSalary ? member.netSalary : '-'}}</td> <td md-cell>{{member.pension ? member.pension : '-'}}</td> <td md-cell>{{member.stateBenefit ? member.stateBenefit : '-'}}</td> <td md-cell>{{member.otherIncome ? member.otherIncome : '-'}}</td> <td md-cell>{{member.unemployedBenefit ? member.unemployedBenefit : '-'}}</td> <td md-cell>{{member.sum ? member.sum : '-'}}</td> </tr> </tbody> </table> </md-table-container> </fieldset>"),a.put("scholarship/student/scholarship.grants.student.html","<div class=\"ois-form-layout-padding\" ng-cloak> <fieldset tabindex=\"1\"> <legend md-colors=\"{color: 'primary-800'}\" class=\"md-title-small\">{{'stipend.student.grants' | translate}}</legend> <md-table-container> <table md-table class=\"secondary-table\"> <thead md-head> <tr md-row> <th md-column>{{'stipend.type' | translate}}</th> <th md-column>{{'stipend.nameEt' | translate}}</th> <th md-column>{{'stipend.applicationPeriod' | translate}}</th> <th md-column>{{'stipend.places' | translate}}</th> <th md-column>{{'stipend.student.averageMark' | translate}}</th> <th md-column>{{'stipend.student.lastPeriodMark' | translate}}</th> <th md-column>{{'stipend.student.curriculumCompletion' | translate}}</th> <th md-column>{{'stipend.student.maxAbsences' | translate}}</th> <th md-column>{{'stipend.student.needsConfirm' | translate}}</th> <th md-column>&nbsp;</th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat=\"stipend in possibleStipends\" ng-class-odd=\"'odd'\" ng-class-even=\"'even'\"> <td md-cell>{{currentLanguageNameField(stipend.type)}}</td> <td md-cell>{{stipend.nameEt | translate}}</td> <td md-cell>{{stipend.applicationStart | hoisDate}}-{{stipend.applicationEnd | hoisDate}}</td> <td md-cell>{{stipend.places ? stipend.places : '-'}}</td> <td md-cell>{{stipend.averageMark ? stipend.averageMark : '-'}}</td> <td md-cell>{{stipend.lastPeriodMark ? stipend.lastPeriodMark : '-'}}</td> <td md-cell>{{stipend.curriculumCompletion ? stipend.curriculumCompletion : '-'}}</td> <td md-cell>{{stipend.maxAbsences ? stipend.maxAbsences : '-'}}</td> <td md-cell>{{stipend.isTeacherConfirm ? ('main.yes' | translate) : ('main.no' | translate)}}</td> <td md-cell> <span ng-if=\"stipend.canApply\"> <a href=\"#/scholarships/{{stipend.id}}/application\">{{'stipend.student.apply' | translate}}</a> </span> </td> </tr> </tbody> </table> </md-table-container> </fieldset> <br> <fieldset tabindex=\"1\"> <legend md-colors=\"{color: 'primary-800'}\" class=\"md-title-small\">{{'stipend.student.applications' | translate}}</legend> <md-table-container> <table md-table class=\"secondary-table\"> <thead md-head> <tr md-row> <th md-column>{{'stipend.type' | translate}}</th> <th md-column>{{'stipend.nameEt' | translate}}</th> <th md-column>{{'stipend.student.averageMark' | translate}}</th> <th md-column>{{'stipend.student.lastPeriodMark' | translate}}</th> <th md-column>{{'stipend.student.curriculumCompletion' | translate}}</th> <th md-column>{{'stipend.student.maxAbsences' | translate}}</th> <th md-column>{{'stipend.student.isTeacherConfirm' | translate}}</th> <th md-column>{{'stipend.student.status' | translate}}</th> <th md-column>{{'stipend.student.decisionDate' | translate}}</th> <th md-column>&nbsp;</th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat=\"stipend in studentStipends\" ng-class-odd=\"'odd'\" ng-class-even=\"'even'\"> <td md-cell> <a href=\"#/scholarships/applications/{{stipend.id}}\">{{currentLanguageNameField(stipend.type)}}</a> </td> <td md-cell>{{stipend.termName | translate}}</td> <td md-cell>{{stipend.averageMark ? stipend.averageMark : '-'}}</td> <td md-cell>{{stipend.lastPeriodMark ? stipend.lastPeriodMark : '-'}}</td> <td md-cell>{{stipend.curriculumCompletion ? stipend.curriculumCompletion : '-'}}</td> <td md-cell>{{stipend.absences ? stipend.absences : '-'}}</td> <td md-cell>{{stipend.isTeacherConfirm === null && stipend.needsConfirm ? ('stipend.needsConfirm' | translate) : stipend.isTeacherConfirm ? (\"main.confirm\" | translate) : stipend.needsConfirm ? (\"main.noConfirm\" | translate) : \"-\"}}</td> <td md-cell>{{currentLanguageNameField(stipend.status)}} <md-tooltip ng-if=\"['STIPTOETUS_STAATUS_L', 'STIPTOETUS_STAATUS_T'].indexOf(stipend.status.code) !== -1  && stipend.rejectComment\">{{stipend.rejectComment}}</md-tooltip> </td> <td md-cell>{{stipend.decisionDate ? (stipend.decisionDate | hoisDate) : '-'}}</td> <td md-cell> <span ng-if=\"stipend.status.code === 'STIPTOETUS_STAATUS_K' || stipend.status.code === 'STIPTOETUS_STAATUS_T'\"> <a href=\"#/scholarships/{{stipend.termId}}/application\">{{'stipend.student.edit' | translate}}</a> </span> </td> </tr> </tbody> </table> </md-table-container> </fieldset> </div>"),a.put("scholarship/student/scholarship.scholarship.student.html","<div class=\"ois-form-layout-padding\" ng-cloak> <fieldset tabindex=\"1\"> <legend md-colors=\"{color: 'primary-800'}\" class=\"md-title-small\">{{'stipend.student.scholarships' | translate}}</legend> <md-table-container> <table md-table class=\"secondary-table\"> <thead md-head> <tr md-row> <th md-column>{{'stipend.type' | translate}}</th> <th md-column>{{'stipend.applicationPeriod' | translate}}</th> <th md-column>{{'stipend.places' | translate}}</th> <th md-column>{{'stipend.student.averageMark' | translate}}</th> <th md-column>{{'stipend.student.lastPeriodMark' | translate}}</th> <th md-column>{{'stipend.student.curriculumCompletion' | translate}}</th> <th md-column>&nbsp;</th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat=\"stipend in possibleStipends\" ng-class-odd=\"'odd'\" ng-class-even=\"'even'\"> <td md-cell>{{currentLanguageNameField(stipend.type)}}</td> <td md-cell>{{stipend.applicationStart | hoisDate}}-{{stipend.applicationEnd | hoisDate}}</td> <td md-cell>{{stipend.places ? stipend.places : '-'}}</td> <td md-cell>{{stipend.averageMark ? stipend.averageMark : '-'}}</td> <td md-cell>{{stipend.lastPeriodMark ? stipend.lastPeriodMark : '-'}}</td> <td md-cell>{{stipend.curriculumCompletion ? stipend.curriculumCompletion : '-'}}</td> <td md-cell> <span ng-if=\"stipend.canApply\"> <a href=\"#/scholarships/{{stipend.id}}/application\">{{'stipend.student.apply' | translate}}</a> </span> </td> </tr> </tbody> </table> </md-table-container> </fieldset> <br> <fieldset tabindex=\"1\"> <legend md-colors=\"{color: 'primary-800'}\" class=\"md-title-small\">{{'stipend.student.applications' | translate}}</legend> <md-table-container> <table md-table class=\"secondary-table\"> <thead md-head> <tr md-row> <th md-column>{{'stipend.type' | translate}}</th> <th md-column>{{'stipend.student.averageMark' | translate}}</th> <th md-column>{{'stipend.student.lastPeriodMark' | translate}}</th> <th md-column>{{'stipend.student.curriculumCompletion' | translate}}</th> <th md-column>{{'stipend.student.status' | translate}}</th> <th md-column>{{'stipend.student.decisionDate' | translate}}</th> <th md-column>&nbsp;</th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat=\"stipend in studentStipends\" ng-class-odd=\"'odd'\" ng-class-even=\"'even'\"> <td md-cell> <a href=\"#/scholarships/applications/{{stipend.id}}\">{{currentLanguageNameField(stipend.type)}}</a> </td> <td md-cell>{{stipend.averageMark ? stipend.averageMark : '-'}}</td> <td md-cell>{{stipend.lastPeriodMark ? stipend.lastPeriodMark : '-'}}</td> <td md-cell>{{stipend.curriculumCompletion ? stipend.curriculumCompletion : '-'}}</td> <td md-cell>{{currentLanguageNameField(stipend.status)}} <md-tooltip ng-if=\"['STIPTOETUS_STAATUS_L', 'STIPTOETUS_STAATUS_T'].indexOf(stipend.status.code) !== -1  && stipend.rejectComment\">{{stipend.rejectComment}}</md-tooltip> </td> <td md-cell>{{stipend.decisionDate ? (stipend.decisionDate | hoisDate) : '-'}}</td> <td md-cell> <span ng-if=\"stipend.status.code === 'STIPTOETUS_STAATUS_K' || stipend.status.code === 'STIPTOETUS_STAATUS_T'\"> <a href=\"#/scholarships/{{stipend.termId}}/application\">{{'stipend.student.edit' | translate}}</a> </span> </td> </tr> </tbody> </table> </md-table-container> </fieldset> </div>"),a.put("scholarship/templates/scholarship.applications.drGrants.html","<md-table-container> <table md-table class=\"secondary-table\" ng-if=\"submittedType\"> <thead md-head> <tr md-row> <th md-column ng-if=\"applicationsTable.showSelect\"> <md-input-container> <md-checkbox ng-model=\"selectAllApplications\" aria-label=\"mySchool\" ng-change=\"updateAllApplicationCheckBoxes(selectAllApplications)\"> </md-checkbox> </md-input-container> </th> <th md-column>{{'stipend.nr' | translate}}</th> <th md-column>{{'stipend.type' | translate}}</th> <th md-column>{{'stipend.grantName' | translate}}</th> <th md-column>{{'stipend.curriculum' | translate}}</th> <th md-column>{{'stipend.applicant' | translate}}</th> <th md-column>{{'stipend.student.idCode' | translate}}</th> <th md-column>{{'stipend.hasDirective' | translate}}</th> <th md-column>{{'stipend.decision.label' | translate}}</th> <th md-column>{{'stipend.status' | translate}}</th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat=\"application in applications track by $index\" ng-class-odd=\"'odd'\" ng-class-even=\"'even'\" ng-class=\"{'scholarship-bottom-border': $index + 1 === allowedCount}\"> <td md-cell ng-if=\"applicationsTable.showSelect\"> <md-input-container> <md-checkbox ng-model=\"selected[application.id]\" aria-label=\"mySchool\"> </md-checkbox> </md-input-container> </td> <td md-cell>{{$index + 1}}</td> <td md-cell>{{currentLanguageNameField(application.type)}}</td> <td md-cell> <a href=\"#/scholarships/applications/{{application.id}}\">{{application.termNameEt}}</a> </td> <td md-cell>{{application.curriculumCode ? application.curriculumCode : '-'}}</td> <td md-cell> <a href=\"#/students/{{application.studentId}}/main\">{{application.studentName ? application.studentName : '-'}}</a> </td> <td md-cell>{{application.idcode ? application.idcode : '-'}}</td> <td md-cell>{{application.hasDirective ? ('main.yes' | translate) : ('main.no' | translate)}}</td> <td md-cell> <a ng-href=\"#/scholarships/decision/{{scholarshipType}}/{{application.decisionId}}\">{{application.decisionDecided | hoisDate}}</a> </td> <td md-cell>{{currentLanguageNameField(application.status)}} <md-tooltip ng-if=\"['STIPTOETUS_STAATUS_L', 'STIPTOETUS_STAATUS_T'].indexOf(application.status.code) !== -1  && application.rejectComment\">{{application.rejectComment}}</md-tooltip> </td> </tr> </tbody> </table> </md-table-container>"),a.put("scholarship/templates/scholarship.applications.grants.html","<md-table-container> <table md-table class=\"secondary-table\" ng-if=\"submittedType\"> <thead md-head> <tr md-row> <th md-column ng-if=\"applicationsTable.showSelect\"> <md-input-container> <md-checkbox ng-model=\"selectAllApplications\" aria-label=\"mySchool\" ng-change=\"updateAllApplicationCheckBoxes(selectAllApplications)\"> </md-checkbox> </md-input-container> </th> <th md-column>{{'stipend.nr' | translate}}</th> <th md-column>{{'stipend.type' | translate}}</th> <th md-column>{{'stipend.grantName' | translate}}</th> <th md-column>{{'stipend.curriculum' | translate}}</th> <th md-column>{{'stipend.applicant' | translate}}</th> <th md-column>{{'stipend.student.idCode' | translate}}</th> <!-- only for pohi and eri--> <th md-column ng-if=\"submittedType !== 'STIPTOETUS_SOIDU'\">{{'stipend.averageMarkShort' | translate}}</th> <th md-column ng-if=\"submittedType !== 'STIPTOETUS_SOIDU'\">{{'stipend.student.lastPeriodMark' | translate}}</th> <th md-column ng-if=\"submittedType !== 'STIPTOETUS_SOIDU'\">{{'stipend.student.curriculumCompletion' | translate}}</th> <!-- only for pohi--> <th md-column ng-if=\"submittedType === 'STIPTOETUS_POHI'\">{{'stipend.student.absences' | translate}}</th> <!-- only for soidu --> <th md-column ng-if=\"submittedType === 'STIPTOETUS_SOIDU'\">{{'stipend.compensationReason' | translate}}</th> <th md-column ng-if=\"submittedType === 'STIPTOETUS_SOIDU'\">{{'stipend.compensationFrequency' | translate}}</th> <th md-column>{{'stipend.student.isTeacherConfirm' | translate}}</th> <th md-column>{{'stipend.hasDirective' | translate}}</th> <th md-column>{{'stipend.decision.label' | translate}}</th> <th md-column>{{'stipend.status' | translate}}</th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat=\"application in applications track by $index\" ng-class-odd=\"'odd'\" ng-class-even=\"'even'\" ng-class=\"{'scholarship-bottom-border': $index + 1 === allowedCount}\"> <td md-cell ng-if=\"applicationsTable.showSelect\"> <md-input-container> <md-checkbox ng-model=\"selected[application.id]\" ng-hide=\"application.hasDirective\" ng-disabled=\"!application.needsConfirm && auth.isTeacher()\" aria-label=\"mySchool\"> </md-checkbox> </md-input-container> </td> <td md-cell>{{$index + 1}}</td> <td md-cell>{{currentLanguageNameField(application.type)}}</td> <td md-cell> <a href=\"#/scholarships/applications/{{application.id}}\">{{application.termNameEt}}</a> </td> <td md-cell>{{application.curriculumCode ? application.curriculumCode : '-'}}</td> <td md-cell> <a href=\"#/students/{{application.studentId}}/main\" ng-style=\"application.nonCompliant ? {color: 'red'} : {}\"> {{application.studentName ? application.studentName : '-'}} </a> </td> <td md-cell>{{application.idcode ? application.idcode : '-'}}</td> <!-- only for pohi and eri--> <td md-cell ng-if=\"submittedType !== 'STIPTOETUS_SOIDU'\">{{application.averageMark ? application.averageMark : '-'}}</td> <td md-cell ng-if=\"submittedType !== 'STIPTOETUS_SOIDU'\">{{application.lastPeriodMark ? application.lastPeriodMark : '-'}}</td> <td md-cell ng-if=\"submittedType !== 'STIPTOETUS_SOIDU'\">{{isNumber(application.curriculumCompletion) ? application.curriculumCompletion : '-'}}</td> <!-- only for pohi--> <td md-cell ng-if=\"submittedType === 'STIPTOETUS_POHI'\">{{isNumber(application.absences) ? application.absences : '-'}}</td> <!-- only for soidu --> <td md-cell ng-if=\"submittedType === 'STIPTOETUS_SOIDU'\">{{application.compensationReason ? currentLanguageNameField(application.compensationReason) : '-'}}</td> <td md-cell ng-if=\"submittedType === 'STIPTOETUS_SOIDU'\">{{application.compensationFrequency ? currentLanguageNameField(application.compensationFrequency) : '-'}}</td> <td md-cell>{{application.isTeacherConfirm === null && application.needsConfirm ? ('stipend.needsConfirm' | translate) : application.isTeacherConfirm ? (\"main.confirm\" | translate) : application.needsConfirm ? (\"main.noConfirm\" | translate) : \"-\"}}</td> <td md-cell>{{application.hasDirective ? ('main.yes' | translate) : ('main.no' | translate)}}</td> <td md-cell> <a ng-href=\"#/scholarships/decision/{{scholarshipType}}/{{application.decisionId}}\">{{application.decisionDecided | hoisDate}}</a> </td> <td md-cell>{{currentLanguageNameField(application.status)}} <md-tooltip ng-if=\"['STIPTOETUS_STAATUS_L', 'STIPTOETUS_STAATUS_T'].indexOf(application.status.code) !== -1  && application.rejectComment\">{{application.rejectComment}}</md-tooltip> </td> </tr> </tbody> </table> </md-table-container>"),a.put("scholarship/templates/scholarship.applications.scholarships.html","<md-table-container> <table md-table class=\"secondary-table\" ng-if=\"submittedType\"> <thead md-head> <tr md-row> <th md-column ng-if=\"applicationsTable.showSelect\"> <md-input-container> <md-checkbox ng-model=\"selectAllApplications\" aria-label=\"mySchool\" ng-change=\"updateAllApplicationCheckBoxes(selectAllApplications)\"> </md-checkbox> </md-input-container> </th> <th md-column>{{'stipend.nr' | translate}}</th> <th md-column>{{'stipend.type' | translate}}</th> <th md-column>{{'stipend.scholarshipName' | translate}}</th> <th md-column>{{'stipend.curriculum' | translate}}</th> <th md-column>{{'stipend.applicant' | translate}}</th> <th md-column>{{'stipend.student.idCode' | translate}}</th> <th md-column>{{'stipend.student.averageMark' | translate}}</th> <th md-column>{{'stipend.student.lastPeriodMark' | translate}}</th> <th md-column>{{'stipend.student.credits' | translate}}</th> <th md-column>{{'stipend.hasDirective' | translate}}</th> <th md-column>{{'stipend.decision.label' | translate}}</th> <th md-column>{{'stipend.student.status' | translate}}</th> <th md-column>&nbsp;</th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat=\"application in applications\" ng-class-odd=\"'odd'\" ng-class-even=\"'even'\" ng-class=\"{'scholarship-bottom-border': $index + 1 === allowedCount}\"> <td md-cell ng-if=\"applicationsTable.showSelect\"> <md-input-container> <md-checkbox ng-model=\"selected[application.id]\" aria-label=\"mySchool\"> </md-checkbox> </md-input-container> </td> <td md-cell>{{$index + 1}}</td> <td md-cell>{{currentLanguageNameField(application.type)}}</td> <td md-cell> <a href=\"#/scholarships/applications/{{application.id}}\">{{application.termNameEt}}</a> </td> <td md-cell>{{application.curriculumCode ? application.curriculumCode : '-'}}</td> <td md-cell> <a href=\"#/students/{{application.studentId}}/main\" ng-style=\"application.nonCompliant ? {color: 'red'} : {}\"> {{application.studentName ? application.studentName : '-'}} </a> </td> <td md-cell>{{application.idcode ? application.idcode : '-'}}</td> <td md-cell> {{isNumber(application.saisPoints) ? application.saisPoints : application.averageMark ? application.averageMark : '-'}} <span class=\"scholarship-sais\" ng-show=\"isNumber(application.saisPoints)\"> S</span> </td> <td md-cell>{{application.lastPeriodMark ? application.lastPeriodMark : '-'}}</td> <td md-cell>{{isNumber(application.credits) ? application.credits : '-'}}</td> <td md-cell>{{application.hasDirective ? ('main.yes' | translate) : ('main.no' | translate)}}</td> <td md-cell> <a ng-href=\"#/scholarships/decision/{{scholarshipType}}/{{application.decisionId}}\">{{application.decisionDecided | hoisDate}}</a> </td> <td md-cell>{{currentLanguageNameField(application.status)}} <md-tooltip ng-if=\"['STIPTOETUS_STAATUS_L', 'STIPTOETUS_STAATUS_T'].indexOf(application.status.code) !== -1  && application.rejectComment\">{{application.rejectComment}}</md-tooltip> </td> <td md-cell>&nbsp;</td> </tr> </tbody> </table> </md-table-container>"),a.put("scholarship/term/scholarship.doktor.edit.html",'<div layout="row" flex> <md-input-container flex> <label class="textInput">{{\'stipend.grantName\' | translate}}</label> <input type="text" ng-model="stipend.nameEt" name="nameEt" required md-maxlength="500"> </md-input-container> </div> <div layout="row" flex> <md-input-container flex> <label class="textInput">{{\'stipend.studyPeriod\' | translate}}</label> <hois-select required ng-model="stipend.studyPeriod" type="studyperiodyear" preselect-current></hois-select> </md-input-container> </div> <div layout="row"> <md-input-container flex="20" flex-md="100" flex-sm="100" flex-xs="100"> <label class="required">{{\'stipend.applicationPeriod\' | translate}}</label> <input type="hidden"> </md-input-container> <md-input-container flex="35" flex-md="100" flex-sm="100" flex-xs="100" flex-offset="5"> <md-datepicker required ng-model="stipend.applicationStart" md-max-date="stipend.applicationEnd" md-placeholder="{{\'main.from\' | translate}}"></md-datepicker> </md-input-container> <md-input-container flex="35" flex-md="100" flex-sm="100" flex-xs="100" flex-offset="5"> <md-datepicker required ng-model="stipend.applicationEnd" md-min-date="stipend.applicationStart" md-placeholder="{{\'main.thru\' | translate}}"></md-datepicker> </md-input-container> </div> <div layout="row"> <md-input-container flex="20" flex-md="100" flex-sm="100" flex-xs="100"> <label class="required">{{\'stipend.paymentPeriod\' | translate}}</label> <input type="hidden"> </md-input-container> <md-input-container flex="35" flex-md="100" flex-sm="100" flex-xs="100" flex-offset="5"> <md-datepicker required ng-model="stipend.paymentStart" md-max-date="stipend.paymentEnd" md-placeholder="{{\'main.from\' | translate}}"></md-datepicker> </md-input-container> <md-input-container flex="35" flex-md="100" flex-sm="100" flex-xs="100" flex-offset="5"> <md-datepicker required ng-model="stipend.paymentEnd" md-min-date="stipend.paymentStart" md-placeholder="{{\'main.thru\' | translate}}"></md-datepicker> </md-input-container> </div> <div layout="row" flex> <md-input-container flex="45"> <label>{{\'stipend.places\' | translate}}</label> <input ng-model="stipend.places" type="number" autofocus aria-label="places" min="0" max="99999"> </md-input-container> <md-input-container flex="50" flex-offset="5"> <label>{{\'stipend.amountPaid\' | translate}}</label> <input required ng-model="stipend.amountPaid" type="number" autofocus aria-label="amountPaid" min="0" max="9999"> </md-input-container> </div> <div> <div layout="row" flex="100"> <hois-autocomplete flex ng-model="formState.curriculum" method="curriculums" label="stipend.curriculums" ng-required="missingCurriculums" additional-query-params="{higher: true}"></hois-autocomplete> </div> <div layout="column" class="common-label" flex="95" ng-repeat="curriculum in stipend.curriculums"> <div layout="row" flex layout-align="start center"> <div flex="5">&nbsp;</div> <div flex="50">{{curriculum.nameEt}}</div> <div> <a ng-click="deleteCurriculum(curriculum)" class="remove">&times;</a> </div> </div> </div> <div layout="row" flex> <md-input-container flex="45"> <label class="textInput">{{\'stipend.studyLoad\' | translate}}</label> <hois-classifier-select required ng-model="stipend.studyLoads" name="type" model-value-attr="code" main-classifier-code="OPPEKOORMUS" criteria="{higher: true}" multiple></hois-classifier-select> </md-input-container> <md-input-container flex="50" flex-offset="5"> <label class="textInput">{{\'stipend.courses\' | translate}}</label> <hois-classifier-select required ng-model="stipend.courses" name="type" model-value-attr="code" main-classifier-code="KURSUS" multiple></hois-classifier-select> </md-input-container> </div> <div layout="row"> <md-input-container flex="20" flex-md="100" flex-sm="100" flex-xs="100"> <label>{{\'stipend.studyPeriodDates\' | translate}}</label> <input type="hidden"> </md-input-container> <md-input-container flex="35" flex-md="100" flex-sm="100" flex-xs="100" flex-offset="5"> <md-datepicker ng-model="stipend.studyStartPeriodStart" md-max-date="stipend.studyStartPeriodEnd" md-placeholder="{{\'main.from\' | translate}}"></md-datepicker> </md-input-container> <md-input-container flex="35" flex-md="100" flex-sm="100" flex-xs="100" flex-offset="5"> <md-datepicker ng-model="stipend.studyStartPeriodEnd" md-min-date="stipend.studyStartPeriodStart" md-placeholder="{{\'main.thru\' | translate}}"></md-datepicker> </md-input-container> </div> </div> <div layout="row" flex> <md-input-container flex="45"> <label class="textInput">{{\'stipend.committee\' | translate}}</label> <hois-select ng-model="stipend.committee" values="formState.committees"></hois-select> </md-input-container> </div> <div layout="row"> <md-button class="md-raised md-primary" ng-click="update()">{{\'main.button.save\' | translate}}</md-button> <md-button class="md-raised" ng-if="!stipend.isOpen && stipend.id" ng-click="publish()">{{\'main.button.publishtoStudents\' | translate}}</md-button> <md-button class="md-raised" ng-if="stipend.id && !stipend.isOpen" ng-click="delete()">{{\'main.button.delete\' | translate}}</md-button> <md-button class="md-raised" ng-click="back(\'#/scholarships/grants\', stipendForm)">{{\'main.button.back\' | translate}}</md-button> </div>'),a.put("scholarship/term/scholarship.doktor.view.html",'<div class="ois-form-layout-padding" ng-cloak> <div flex> <form name="stipendForm"> <div class="form-readonly"> <div layout="row" flex> <md-input-container flex> <label class="textInput">{{formState.typeIsScholarship ? \'stipend.scholarshipType\' : \'stipend.grantType\' | translate}}</label> <hois-classifier-value ng-model="stipend.type" main-classifier-code="STIPTOETUS"></hois-classifier-value> </md-input-container> </div> <div layout="row" flex> <md-input-container flex> <label class="textInput">{{formState.typeIsScholarship ? \'stipend.scholarshipName\' : \'stipend.grantName\' | translate}}</label> <hois-value value="stipend.nameEt"></hois-value> </md-input-container> </div> <div layout="row" flex> <md-input-container flex> <label class="textInput">{{\'stipend.studyPeriod\' | translate}}</label> <hois-value value="formState.readonlyStudyPeriod | hoisStudyPeriod"></hois-value> </md-input-container> </div> <div layout="row"> <md-input-container flex="20" flex-md="100" flex-sm="100" flex-xs="100"> <label>{{\'stipend.applicationPeriod\' | translate}}</label> <input type="hidden"> </md-input-container> <md-input-container flex="35" flex-md="100" flex-sm="100" flex-xs="100" flex-offset="5"> <label>{{\'main.from\' | translate}}</label> <hois-value value="stipend.applicationStart | hoisDate"></hois-value> </md-input-container> <md-input-container flex="35" flex-md="100" flex-sm="100" flex-xs="100" flex-offset="5"> <label>{{\'main.thru\' | translate}}</label> <hois-value value="stipend.applicationEnd | hoisDate"></hois-value> </md-input-container> </div> <div layout="row"> <md-input-container flex="20" flex-md="100" flex-sm="100" flex-xs="100"> <label>{{\'stipend.paymentPeriod\' | translate}}</label> <input type="hidden"> </md-input-container> <md-input-container flex="35" flex-md="100" flex-sm="100" flex-xs="100" flex-offset="5"> <label>{{\'main.from\' | translate}}</label> <hois-value value="stipend.paymentStart | hoisDate"></hois-value> </md-input-container> <md-input-container flex="35" flex-md="100" flex-sm="100" flex-xs="100" flex-offset="5"> <label>{{\'main.thru\' | translate}}</label> <hois-value value="stipend.paymentEnd | hoisDate"></hois-value> </md-input-container> </div> <div layout="row" flex> <md-input-container flex="45"> <label>{{\'stipend.places\' | translate}}</label> <hois-value value="stipend.places"></hois-value> </md-input-container> <md-input-container flex="50" flex-offset="5"> <label>{{\'stipend.amountPaid\' | translate}}</label> <hois-value value="stipend.amountPaid"></hois-value> </md-input-container> </div> <div> <div layout="row" flex> <md-input-container flex> <label>{{\'stipend.curriculums\' | translate}}</label> <hois-value value="curriculumsDisplay.join(\', \')"></hois-value> </md-input-container> </div> <div layout="row" flex> <md-input-container flex="45"> <label class="textInput">{{\'stipend.studyLoad\' | translate}}</label> <hois-classifier-value ng-model="stipend.studyLoads" main-classifier-code="OPPEKOORMUS" multiple></hois-classifier-value> </md-input-container> <md-input-container flex="50" flex-offset="5"> <label class="textInput">{{\'stipend.courses\' | translate}}</label> <hois-classifier-value ng-model="stipend.courses" main-classifier-code="KURSUS" multiple></hois-classifier-value> </md-input-container> </div> <div layout="row"> <md-input-container flex="20" flex-md="100" flex-sm="100" flex-xs="100"> <label>{{\'stipend.studyPeriodDates\' | translate}}</label> <input type="hidden"> </md-input-container> <md-input-container flex="35" flex-md="100" flex-sm="100" flex-xs="100" flex-offset="5"> <label>{{\'main.from\' | translate}}</label> <hois-value value="stipend.studyStartPeriodStart | hoisDate"></hois-value> </md-input-container> <md-input-container flex="35" flex-md="100" flex-sm="100" flex-xs="100" flex-offset="5"> <label>{{\'main.thru\' | translate}}</label> <hois-value value="stipend.studyStartPeriodEnd | hoisDate"></hois-value> </md-input-container> </div> <div layout="row" flex> <md-input-container flex="45"> <label>{{\'stipend.committee\' | translate}}</label> <hois-value value="currentLanguageNameField(formState.committee)"></hois-value> </md-input-container> </div> <div layout="row"> <div layout="row"> <md-button class="md-raised md-primary" ng-if="canEdit" ng-click="changeStipend(stipend)">{{\'main.button.edit\' | translate}}</md-button> <md-button class="md-raised" ng-if="!stipend.isOpen && stipend.id && canEdit" ng-click="publish()">{{\'main.button.publishtoStudents\' | translate}}</md-button> <md-button class="md-raised" ng-click="back(\'#/scholarships/\', stipendForm)">{{\'main.button.back\' | translate}}</md-button> </div> </div> </div> </div> </form> </div> </div>'),a.put("scholarship/term/scholarship.eri.edit.html",'<div layout="row" flex> <md-input-container flex> <label class="textInput">{{\'stipend.grantName\' | translate}}</label> <input type="text" ng-model="stipend.nameEt" name="nameEt" required md-maxlength="500"> </md-input-container> </div> <div layout="row" flex> <md-input-container flex> <label class="textInput">{{\'stipend.studyPeriod\' | translate}}</label> <hois-select required ng-model="stipend.studyPeriod" type="studyperiodyear" preselect-current></hois-select> </md-input-container> </div> <div layout="row"> <md-input-container flex="20" flex-md="100" flex-sm="100" flex-xs="100"> <label>{{\'stipend.applicationPeriod\' | translate}}</label> <input type="hidden"> </md-input-container> <md-input-container flex="35" flex-md="100" flex-sm="100" flex-xs="100" flex-offset="5"> <md-datepicker ng-model="stipend.applicationStart" md-max-date="stipend.applicationEnd" md-placeholder="{{\'main.from\' | translate}}"></md-datepicker> </md-input-container> <md-input-container flex="35" flex-md="100" flex-sm="100" flex-xs="100" flex-offset="5"> <md-datepicker ng-model="stipend.applicationEnd" md-min-date="stipend.applicationStart" md-placeholder="{{\'main.thru\' | translate}}"></md-datepicker> </md-input-container> </div> <div layout="row"> <md-input-container flex="20" flex-md="100" flex-sm="100" flex-xs="100"> <label>{{\'stipend.paymentPeriod\' | translate}}</label> <input type="hidden"> </md-input-container> <md-input-container flex="35" flex-md="100" flex-sm="100" flex-xs="100" flex-offset="5"> <md-datepicker ng-model="stipend.paymentStart" md-max-date="stipend.paymentEnd" md-placeholder="{{\'main.from\' | translate}}"></md-datepicker> </md-input-container> <md-input-container flex="35" flex-md="100" flex-sm="100" flex-xs="100" flex-offset="5"> <md-datepicker ng-model="stipend.paymentEnd" md-min-date="stipend.paymentStart" md-placeholder="{{\'main.thru\' | translate}}"></md-datepicker> </md-input-container> </div> <div layout="row" flex> <md-input-container flex="45"> <label>{{\'stipend.places\' | translate}}</label> <input ng-model="stipend.places" type="number" autofocus aria-label="places" min="0" max="99999"> </md-input-container> <md-input-container flex="50" flex-offset="5"> <label>{{\'stipend.amountPaid\' | translate}}</label> <input ng-model="stipend.amountPaid" type="number" autofocus aria-label="amountPaid" min="0" max="9999"> </md-input-container> </div> <div> <div layout="row" flex="100"> <hois-autocomplete flex ng-model="formState.curriculum" method="curriculums" label="stipend.curriculums" ng-required="missingCurriculums" additional-query-params="{higher: false}"></hois-autocomplete> </div> <div layout="column" class="common-label" flex="95" ng-repeat="curriculum in stipend.curriculums"> <div layout="row" flex layout-align="start center"> <div flex="5">&nbsp;</div> <div flex="50">{{curriculum.nameEt}}</div> <div> <a ng-click="deleteCurriculum(curriculum)" class="remove">&times;</a> </div> </div> </div> <div layout="row" flex> <md-input-container flex="45"> <label class="textInput">{{\'stipend.studyForm\' | translate}}</label> <hois-classifier-select ng-model="stipend.studyForms" name="type" model-value-attr="code" main-classifier-code="OPPEVORM" criteria="{vocational: true}" multiple></hois-classifier-select> </md-input-container> <md-input-container flex="50" flex-offset="5"> <label class="textInput">{{\'stipend.courses\' | translate}}</label> <hois-classifier-select required ng-model="stipend.courses" name="type" model-value-attr="code" main-classifier-code="KURSUS" multiple></hois-classifier-select> </md-input-container> </div> <div layout="row" flex> <md-input-container flex="45"> <label class="textInput">{{\'stipend.averageMark\' | translate}}</label> <input ng-model="stipend.averageMark" type="number" autofocus aria-label="averageMark" min="0" max="5"> </md-input-container> <md-input-container flex="50" flex-offset="5"> <label class="textInput">{{\'stipend.priority\' | translate}}</label> <hois-select ng-model="stipend.averageMarkPriority" values="formState.priorities | filter: averageMarkPriorityFilter" show-property="value" value-property="code"></hois-select> </md-input-container> </div> <div layout="row" flex> <md-input-container flex="45"> <label class="textInput">{{\'stipend.lastPeriodMark\' | translate}}</label> <input ng-model="stipend.lastPeriodMark" type="number" autofocus aria-label="averageMark" min="0" max="5"> </md-input-container> <md-input-container flex="50" flex-offset="5"> <label class="textInput">{{\'stipend.priority\' | translate}}</label> <hois-select ng-model="stipend.lastPeriodMarkPriority" values="formState.priorities | filter: lastPeriodMarkPriorityFilter" show-property="value" value-property="code"></hois-select> </md-input-container> </div> <div layout="row" flex> <md-input-container flex="45"> <label class="textInput">{{\'stipend.curriculumCompletion\' | translate}}</label> <input ng-model="stipend.curriculumCompletion" type="number" autofocus aria-label="curriculumCompletion" min="0"> </md-input-container> <md-input-container flex="50" flex-offset="5"> <label class="textInput">{{\'stipend.priority\' | translate}}</label> <hois-select ng-model="stipend.curriculumCompletionPriority" values="formState.priorities | filter: curriculumCompletionPriorityFilter" show-property="value" value-property="code"></hois-select> </md-input-container> </div> <div layout="row"> <md-input-container flex="20" flex-md="100" flex-sm="100" flex-xs="100"> <label>{{\'stipend.studyPeriodDates\' | translate}}</label> <input type="hidden"> </md-input-container> <md-input-container flex="35" flex-md="100" flex-sm="100" flex-xs="100" flex-offset="5"> <md-datepicker ng-model="stipend.studyStartPeriodStart" md-max-date="stipend.studyStartPeriodEnd" md-placeholder="{{\'main.from\' | translate}}"></md-datepicker> </md-input-container> <md-input-container flex="35" flex-md="100" flex-sm="100" flex-xs="100" flex-offset="5"> <md-datepicker ng-model="stipend.studyStartPeriodEnd" md-min-date="stipend.studyStartPeriodStart" md-placeholder="{{\'main.thru\' | translate}}"></md-datepicker> </md-input-container> </div> <div layout="row" flex> <md-checkbox ng-model="stipend.isStudyBacklog" aria-label="Is study backlog" flex="50"> {{\'stipend.isStudyBacklog\' | translate}} </md-checkbox> <md-checkbox ng-model="stipend.isTeacherConfirm" aria-label="Is teache confirm" flex="50"> {{\'stipend.isTeacherConfirm\' | translate}} </md-checkbox> </div> <div layout="row"> <md-checkbox ng-model="stipend.isFamilyIncomes" aria-label="Is family incomes" flex="50"> {{\'stipend.isFamilyIncomes\' | translate}} </md-checkbox> </div> <div layout="row" flex> <md-input-container flex="45"> <label class="textInput">{{\'stipend.committee\' | translate}}</label> <hois-select ng-model="stipend.committee" values="formState.committees"></hois-select> </md-input-container> </div> </div> <div layout="row"> <md-button class="md-raised md-primary" ng-click="update()">{{\'main.button.save\' | translate}}</md-button> <md-button class="md-raised" ng-if="!stipend.isOpen && stipend.id" ng-click="publish()">{{\'main.button.publishtoStudents\' | translate}}</md-button> <md-button class="md-raised" ng-if="stipend.id && !stipend.isOpen" ng-click="delete()">{{\'main.button.delete\' | translate}}</md-button> <md-button class="md-raised" ng-click="back(\'#/scholarships/grants\', stipendForm)">{{\'main.button.back\' | translate}}</md-button> </div>'),
a.put("scholarship/term/scholarship.eri.view.html",'<div class="ois-form-layout-padding" ng-cloak> <div flex> <form name="stipendForm"> <div class="form-readonly"> <div layout="row" flex> <md-input-container flex> <label class="textInput">{{formState.typeIsScholarship ? \'stipend.scholarshipType\' : \'stipend.grantType\' | translate}}</label> <hois-classifier-value ng-model="stipend.type" main-classifier-code="STIPTOETUS"></hois-classifier-value> </md-input-container> </div> <div layout="row" flex> <md-input-container flex> <label class="textInput">{{formState.typeIsScholarship ? \'stipend.scholarshipName\' : \'stipend.grantName\' | translate}}</label> <hois-value value="stipend.nameEt"></hois-value> </md-input-container> </div> <div layout="row" flex> <md-input-container flex> <label class="textInput">{{\'stipend.studyPeriod\' | translate}}</label> <hois-value value="formState.readonlyStudyPeriod | hoisStudyPeriod"></hois-value> </md-input-container> </div> <div layout="row"> <md-input-container flex="20" flex-md="100" flex-sm="100" flex-xs="100"> <label>{{\'stipend.applicationPeriod\' | translate}}</label> <input type="hidden"> </md-input-container> <md-input-container flex="35" flex-md="100" flex-sm="100" flex-xs="100" flex-offset="5"> <label>{{\'main.from\' | translate}}</label> <hois-value value="stipend.applicationStart | hoisDate"></hois-value> </md-input-container> <md-input-container flex="35" flex-md="100" flex-sm="100" flex-xs="100" flex-offset="5"> <label>{{\'main.thru\' | translate}}</label> <hois-value value="stipend.applicationEnd | hoisDate"></hois-value> </md-input-container> </div> <div layout="row"> <md-input-container flex="20" flex-md="100" flex-sm="100" flex-xs="100"> <label>{{\'stipend.paymentPeriod\' | translate}}</label> <input type="hidden"> </md-input-container> <md-input-container flex="35" flex-md="100" flex-sm="100" flex-xs="100" flex-offset="5"> <label>{{\'main.from\' | translate}}</label> <hois-value value="stipend.paymentStart | hoisDate"></hois-value> </md-input-container> <md-input-container flex="35" flex-md="100" flex-sm="100" flex-xs="100" flex-offset="5"> <label>{{\'main.thru\' | translate}}</label> <hois-value value="stipend.paymentEnd | hoisDate"></hois-value> </md-input-container> </div> <div layout="row" flex> <md-input-container flex="45"> <label>{{\'stipend.places\' | translate}}</label> <hois-value value="stipend.places"></hois-value> </md-input-container> <md-input-container flex="50" flex-offset="5"> <label>{{\'stipend.amountPaid\' | translate}}</label> <hois-value value="stipend.amountPaid"></hois-value> </md-input-container> </div> <div> <div layout="row" flex> <md-input-container flex> <label>{{\'stipend.curriculums\' | translate}}</label> <hois-value value="curriculumsDisplay.join(\', \')"></hois-value> </md-input-container> </div> <div layout="row" flex> <md-input-container flex="45"> <label class="textInput">{{\'stipend.studyForm\' | translate}}</label> <hois-classifier-value ng-model="stipend.studyForms" main-classifier-code="OPPEVORM" multiple></hois-classifier-value> </md-input-container> <md-input-container flex="50" flex-offset="5"> <label class="textInput">{{\'stipend.courses\' | translate}}</label> <hois-classifier-value ng-model="stipend.courses" main-classifier-code="KURSUS" multiple></hois-classifier-value> </md-input-container> </div> <div layout="row" flex> <md-input-container flex="45"> <label class="textInput">{{\'stipend.averageMark\' | translate}}</label> <hois-value value="stipend.averageMark"></hois-value> </md-input-container> <md-input-container flex="50" flex-offset="5"> <label class="textInput">{{\'stipend.priority\' | translate}}</label> <hois-classifier-value ng-model="stipend.averageMarkPriority" main-classifier-code="PRIORITEET"></hois-classifier-value> </md-input-container> </div> <div layout="row" flex> <md-input-container flex="45"> <label class="textInput">{{\'stipend.lastPeriodMark\' | translate}}</label> <hois-value value="stipend.lastPeriodMark"></hois-value> </md-input-container> <md-input-container flex="50" flex-offset="5"> <label class="textInput">{{\'stipend.priority\' | translate}}</label> <hois-classifier-value ng-model="stipend.lastPeriodMarkPriority" main-classifier-code="PRIORITEET"></hois-classifier-value> </md-input-container> </div> <div layout="row" flex> <md-input-container flex="45"> <label class="textInput">{{\'stipend.curriculumCompletion\' | translate}}</label> <hois-value value="stipend.curriculumCompletion"></hois-value> </md-input-container> <md-input-container flex="50" flex-offset="5"> <label class="textInput">{{\'stipend.priority\' | translate}}</label> <hois-classifier-value ng-model="stipend.curriculumCompletionPriority" main-classifier-code="PRIORITEET"></hois-classifier-value> </md-input-container> </div> <div layout="row"> <md-input-container flex="20" flex-md="100" flex-sm="100" flex-xs="100"> <label>{{\'stipend.studyPeriodDates\' | translate}}</label> <input type="hidden"> </md-input-container> <md-input-container flex="35" flex-md="100" flex-sm="100" flex-xs="100" flex-offset="5"> <label>{{\'main.from\' | translate}}</label> <hois-value value="stipend.studyStartPeriodStart | hoisDate"></hois-value> </md-input-container> <md-input-container flex="35" flex-md="100" flex-sm="100" flex-xs="100" flex-offset="5"> <label>{{\'main.thru\' | translate}}</label> <hois-value value="stipend.studyStartPeriodEnd | hoisDate"></hois-value> </md-input-container> </div> <div layout="row"> <md-checkbox ng-model="stipend.isTeacherConfirm" disabled aria-label="Is academic leave"> {{\'stipend.isTeacherConfirm\' | translate}} </md-checkbox> </div> <div layout="row"> <md-checkbox ng-model="stipend.isStudyBacklog" disabled aria-label="Is academic leave"> {{\'stipend.isStudyBacklog\' | translate}} </md-checkbox> </div> <div layout="row"> <md-checkbox ng-model="stipend.isFamilyIncomes" disabled aria-label="Is family incomes"> {{\'stipend.isFamilyIncomes\' | translate}} </md-checkbox> </div> <div layout="row" flex> <md-input-container flex="45"> <label>{{\'stipend.committee\' | translate}}</label> <hois-value value="currentLanguageNameField(formState.committee)"></hois-value> </md-input-container> </div> <div layout="row"> <div layout="row"> <md-button class="md-raised md-primary" ng-if="canEdit" ng-click="changeStipend(stipend)">{{\'main.button.edit\' | translate}}</md-button> <md-button class="md-raised" ng-if="!stipend.isOpen && stipend.id && canEdit" ng-click="publish()">{{\'main.button.publishtoStudents\' | translate}}</md-button> <md-button class="md-raised" ng-click="back(\'#/scholarships/\', stipendForm)">{{\'main.button.back\' | translate}}</md-button> </div> </div> </div> </div> </form> </div> </div>'),a.put("scholarship/term/scholarship.pohi.edit.html",'<div layout="row" flex> <md-input-container flex> <label class="textInput">{{\'stipend.grantName\' | translate}}</label> <input type="text" ng-model="stipend.nameEt" name="nameEt" required md-maxlength="255"> </md-input-container> </div> <div layout="row" flex> <md-input-container flex> <label class="textInput">{{\'stipend.studyPeriod\' | translate}}</label> <hois-select required ng-model="stipend.studyPeriod" type="studyperiodyear" preselect-current></hois-select> </md-input-container> </div> <div layout="row"> <md-input-container flex="20" flex-md="100" flex-sm="100" flex-xs="100"> <label class="required">{{\'stipend.applicationPeriod\' | translate}}</label> <input type="hidden"> </md-input-container> <md-input-container flex="35" flex-md="100" flex-sm="100" flex-xs="100" flex-offset="5"> <md-datepicker required ng-model="stipend.applicationStart" md-max-date="stipend.applicationEnd" md-placeholder="{{\'main.from\' | translate}}"></md-datepicker> </md-input-container> <md-input-container flex="35" flex-md="100" flex-sm="100" flex-xs="100" flex-offset="5"> <md-datepicker required ng-model="stipend.applicationEnd" md-min-date="stipend.applicationStart" md-placeholder="{{\'main.thru\' | translate}}"></md-datepicker> </md-input-container> </div> <div layout="row"> <md-input-container flex="20" flex-md="100" flex-sm="100" flex-xs="100"> <label class="required">{{\'stipend.paymentPeriod\' | translate}}</label> <input type="hidden"> </md-input-container> <md-input-container flex="35" flex-md="100" flex-sm="100" flex-xs="100" flex-offset="5"> <md-datepicker required ng-model="stipend.paymentStart" md-max-date="stipend.paymentEnd" md-placeholder="{{\'main.from\' | translate}}"></md-datepicker> </md-input-container> <md-input-container flex="35" flex-md="100" flex-sm="100" flex-xs="100" flex-offset="5"> <md-datepicker required ng-model="stipend.paymentEnd" md-min-date="stipend.paymentStart" md-placeholder="{{\'main.thru\' | translate}}"></md-datepicker> </md-input-container> </div> <div layout="row" flex> <md-input-container flex="45"> <label>{{\'stipend.places\' | translate}}</label> <input ng-model="stipend.places" type="number" autofocus aria-label="places" min="0" max="32767"> </md-input-container> <md-input-container flex="50" flex-offset="5"> <label>{{\'stipend.amountPaid\' | translate}}</label> <input required ng-model="stipend.amountPaid" type="number" autofocus aria-label="amountPaid" min="0" max="9999"> </md-input-container> </div> <div> <div layout="row" flex="100"> <hois-autocomplete flex ng-model="formState.curriculum" method="curriculums" label="stipend.curriculums" ng-required="missingCurriculums" additional-query-params="{higher: false}"></hois-autocomplete> </div> <div layout="column" class="common-label" flex="95" ng-repeat="curriculum in stipend.curriculums"> <div layout="row" flex layout-align="start center"> <div flex="5">&nbsp;</div> <div flex="50">{{curriculum.nameEt}}</div> <div> <a ng-click="deleteCurriculum(curriculum)" class="remove">&times;</a> </div> </div> </div> <div layout="row" flex> <md-input-container flex="45"> <label class="textInput">{{\'stipend.studyForm\' | translate}}</label> <hois-classifier-select required ng-model="stipend.studyForms" name="type" model-value-attr="code" main-classifier-code="OPPEVORM" multiple filter-values="filteredStudyForm" criteria="{vocational: true}"></hois-classifier-select> </md-input-container> <md-input-container flex="50" flex-offset="5"> <label class="textInput">{{\'stipend.courses\' | translate}}</label> <hois-classifier-select required ng-model="stipend.courses" name="type" model-value-attr="code" main-classifier-code="KURSUS" multiple></hois-classifier-select> </md-input-container> </div> <div layout="row" flex> <md-input-container flex="45"> <label class="textInput">{{\'stipend.averageMark\' | translate}}</label> <input ng-model="stipend.averageMark" type="number" autofocus aria-label="averageMark" min="0" max="5"> </md-input-container> <md-input-container flex="50" flex-offset="5"> <label class="textInput">{{\'stipend.priority\' | translate}}</label> <hois-select ng-model="stipend.averageMarkPriority" values="formState.priorities | filter: averageMarkPriorityFilter" show-property="value" value-property="code"></hois-select> </md-input-container> </div> <div layout="row" flex> <md-input-container flex="45"> <label class="textInput">{{\'stipend.lastPeriodMark\' | translate}}</label> <input ng-model="stipend.lastPeriodMark" type="number" autofocus aria-label="averageMark" min="0" max="5"> </md-input-container> <md-input-container flex="50" flex-offset="5"> <label class="textInput">{{\'stipend.priority\' | translate}}</label> <hois-select ng-model="stipend.lastPeriodMarkPriority" values="formState.priorities | filter: lastPeriodMarkPriorityFilter" model-value-attr="code" show-property="value" value-property="code"></hois-select> </md-input-container> </div> <div layout="row" flex> <md-input-container flex="45"> <label class="textInput">{{\'stipend.curriculumCompletion\' | translate}}</label> <input ng-model="stipend.curriculumCompletion" type="number" autofocus aria-label="curriculumCompletion" min="0" max="999"> </md-input-container> <md-input-container flex="50" flex-offset="5"> <label class="textInput">{{\'stipend.priority\' | translate}}</label> <hois-select ng-model="stipend.curriculumCompletionPriority" values="formState.priorities | filter: curriculumCompletionPriorityFilter" model-value-attr="code" show-property="value" value-property="code"></hois-select> </md-input-container> </div> <div layout="row" flex> <md-input-container flex="45"> <label class="textInput">{{\'stipend.maxAbsences\' | translate}}</label> <input ng-model="stipend.maxAbsences" type="number" autofocus aria-label="curriculumCompletion" min="0" max="9999"> </md-input-container> <md-input-container flex="50" flex-offset="5"> <label class="textInput">{{\'stipend.priority\' | translate}}</label> <hois-select ng-model="stipend.maxAbsencesPriority" values="formState.priorities | filter: maxAbsencesPriorityFilter" model-value-attr="code" show-property="value" value-property="code"></hois-select> </md-input-container> </div> <div layout="row"> <md-input-container flex="20" flex-md="100" flex-sm="100" flex-xs="100"> <label>{{\'stipend.studyPeriodDates\' | translate}}</label> <input type="hidden"> </md-input-container> <md-input-container flex="35" flex-md="100" flex-sm="100" flex-xs="100" flex-offset="5"> <md-datepicker ng-model="stipend.studyStartPeriodStart" md-max-date="stipend.studyStartPeriodEnd" md-placeholder="{{\'main.from\' | translate}}"></md-datepicker> </md-input-container> <md-input-container flex="35" flex-md="100" flex-sm="100" flex-xs="100" flex-offset="5"> <md-datepicker ng-model="stipend.studyStartPeriodEnd" md-min-date="stipend.studyStartPeriodStart" md-placeholder="{{\'main.thru\' | translate}}"></md-datepicker> </md-input-container> </div> <div layout="row" flex> <md-checkbox ng-model="stipend.isStudyBacklog" aria-label="Is study backlog" ng-disabled="display.isStudyBacklogRead" flex="50"> {{\'stipend.isStudyBacklog\' | translate}} </md-checkbox> <md-checkbox ng-model="stipend.isTeacherConfirm" aria-label="Is teache confir" ng-disabled="display.isTeacherConfirmRead" flex="50"> {{\'stipend.isTeacherConfirm\' | translate}} </md-checkbox> </div> </div> <div layout="row" flex> <md-input-container flex="45"> <label class="textInput">{{\'stipend.committee\' | translate}}</label> <hois-select ng-model="stipend.committee" values="formState.committees"></hois-select> </md-input-container> </div> <div layout="row"> <md-button class="md-raised md-primary" ng-click="update()">{{\'main.button.save\' | translate}}</md-button> <md-button class="md-raised" ng-if="!stipend.isOpen && stipend.id" ng-click="publish()">{{\'main.button.publishtoStudents\' | translate}}</md-button> <md-button class="md-raised" ng-if="stipend.id && !stipend.isOpen" ng-click="delete()">{{\'main.button.delete\' | translate}}</md-button> <md-button class="md-raised" ng-click="back(\'#/scholarships/grants\', stipendForm)">{{\'main.button.back\' | translate}}</md-button> </div>'),a.put("scholarship/term/scholarship.pohi.view.html",'<div class="ois-form-layout-padding" ng-cloak> <div flex> <form name="stipendForm"> <div class="form-readonly"> <div layout="row" flex> <md-input-container flex> <label class="textInput">{{formState.typeIsScholarship ? \'stipend.scholarshipType\' : \'stipend.grantType\' | translate}}</label> <hois-classifier-value ng-model="stipend.type" main-classifier-code="STIPTOETUS"></hois-classifier-value> </md-input-container> </div> <div layout="row" flex> <md-input-container flex> <label class="textInput">{{formState.typeIsScholarship ? \'stipend.scholarshipName\' : \'stipend.grantName\' | translate}}</label> <hois-value value="stipend.nameEt"></hois-value> </md-input-container> </div> <div layout="row" flex> <md-input-container flex> <label class="textInput">{{\'stipend.studyPeriod\' | translate}}</label> <hois-value value="formState.readonlyStudyPeriod | hoisStudyPeriod"></hois-value> </md-input-container> </div> <div layout="row"> <md-input-container flex="20" flex-md="100" flex-sm="100" flex-xs="100"> <label>{{\'stipend.applicationPeriod\' | translate}}</label> <input type="hidden"> </md-input-container> <md-input-container flex="35" flex-md="100" flex-sm="100" flex-xs="100" flex-offset="5"> <label>{{\'main.from\' | translate}}</label> <hois-value value="stipend.applicationStart | hoisDate"></hois-value> </md-input-container> <md-input-container flex="35" flex-md="100" flex-sm="100" flex-xs="100" flex-offset="5"> <label>{{\'main.thru\' | translate}}</label> <hois-value value="stipend.applicationEnd | hoisDate"></hois-value> </md-input-container> </div> <div layout="row"> <md-input-container flex="20" flex-md="100" flex-sm="100" flex-xs="100"> <label>{{\'stipend.paymentPeriod\' | translate}}</label> <input type="hidden"> </md-input-container> <md-input-container flex="35" flex-md="100" flex-sm="100" flex-xs="100" flex-offset="5"> <label>{{\'main.from\' | translate}}</label> <hois-value value="stipend.paymentStart | hoisDate"></hois-value> </md-input-container> <md-input-container flex="35" flex-md="100" flex-sm="100" flex-xs="100" flex-offset="5"> <label>{{\'main.thru\' | translate}}</label> <hois-value value="stipend.paymentEnd | hoisDate"></hois-value> </md-input-container> </div> <div layout="row" flex> <md-input-container flex="45"> <label>{{\'stipend.places\' | translate}}</label> <hois-value value="stipend.places"></hois-value> </md-input-container> <md-input-container flex="50" flex-offset="5"> <label>{{\'stipend.amountPaid\' | translate}}</label> <hois-value value="stipend.amountPaid"></hois-value> </md-input-container> </div> <div> <div layout="row" flex> <md-input-container flex> <label>{{\'stipend.curriculums\' | translate}}</label> <hois-value value="curriculumsDisplay.join(\', \')"></hois-value> </md-input-container> </div> <div layout="row" flex> <md-input-container flex="45"> <label class="textInput">{{\'stipend.studyForm\' | translate}}</label> <hois-classifier-value ng-model="stipend.studyForms" main-classifier-code="OPPEVORM" multiple></hois-classifier-value> </md-input-container> <md-input-container flex="50" flex-offset="5"> <label class="textInput">{{\'stipend.courses\' | translate}}</label> <hois-classifier-value ng-model="stipend.courses" main-classifier-code="KURSUS" multiple></hois-classifier-value> </md-input-container> </div> <div layout="row" flex> <md-input-container flex="45"> <label class="textInput">{{\'stipend.averageMark\' | translate}}</label> <hois-value value="stipend.averageMark"></hois-value> </md-input-container> <md-input-container flex="50" flex-offset="5"> <label class="textInput">{{\'stipend.priority\' | translate}}</label> <hois-classifier-value ng-model="stipend.averageMarkPriority" main-classifier-code="PRIORITEET"></hois-classifier-value> </md-input-container> </div> <div layout="row" flex> <md-input-container flex="45"> <label class="textInput">{{\'stipend.lastPeriodMark\' | translate}}</label> <hois-value value="stipend.lastPeriodMark"></hois-value> </md-input-container> <md-input-container flex="50" flex-offset="5"> <label class="textInput">{{\'stipend.priority\' | translate}}</label> <hois-classifier-value ng-model="stipend.lastPeriodMarkPriority" main-classifier-code="PRIORITEET"></hois-classifier-value> </md-input-container> </div> <div layout="row" flex> <md-input-container flex="45"> <label class="textInput">{{\'stipend.curriculumCompletion\' | translate}}</label> <hois-value value="stipend.curriculumCompletion"></hois-value> </md-input-container> <md-input-container flex="50" flex-offset="5"> <label class="textInput">{{\'stipend.priority\' | translate}}</label> <hois-classifier-value ng-model="stipend.curriculumCompletionPriority" main-classifier-code="PRIORITEET"></hois-classifier-value> </md-input-container> </div> <div layout="row" flex> <md-input-container flex="45"> <label class="textInput">{{\'stipend.maxAbsences\' | translate}}</label> <hois-value value="stipend.maxAbsences"></hois-value> </md-input-container> <md-input-container flex="50" flex-offset="5"> <label class="textInput">{{\'stipend.priority\' | translate}}</label> <hois-classifier-value ng-model="stipend.maxAbsencesPriority" main-classifier-code="PRIORITEET"></hois-classifier-value> </md-input-container> </div> <div layout="row"> <md-input-container flex="20" flex-md="100" flex-sm="100" flex-xs="100"> <label>{{\'stipend.studyPeriodDates\' | translate}}</label> <input type="hidden"> </md-input-container> <md-input-container flex="35" flex-md="100" flex-sm="100" flex-xs="100" flex-offset="5"> <label>{{\'main.from\' | translate}}</label> <hois-value value="stipend.studyStartPeriodStart | hoisDate"></hois-value> </md-input-container> <md-input-container flex="35" flex-md="100" flex-sm="100" flex-xs="100" flex-offset="5"> <label>{{\'main.thru\' | translate}}</label> <hois-value value="stipend.studyStartPeriodEnd | hoisDate"></hois-value> </md-input-container> </div> <div layout="row"> <md-checkbox ng-model="stipend.isTeacherConfirm" disabled aria-label="Is academic leave"> {{\'stipend.isTeacherConfirm\' | translate}} </md-checkbox> </div> <div layout="row"> <md-checkbox ng-model="stipend.isStudyBacklog" disabled aria-label="Is academic leave"> {{\'stipend.isStudyBacklog\' | translate}} </md-checkbox> </div> <div layout="row" flex> <md-input-container flex="45"> <label>{{\'stipend.committee\' | translate}}</label> <hois-value value="currentLanguageNameField(formState.committee)"></hois-value> </md-input-container> </div> <div layout="row"> <div layout="row"> <md-button class="md-raised md-primary" ng-if="canEdit" ng-click="changeStipend(stipend)">{{\'main.button.edit\' | translate}}</md-button> <md-button class="md-raised" ng-if="!stipend.isOpen && stipend.id && canEdit" ng-click="publish()">{{\'main.button.publishtoStudents\' | translate}}</md-button> <md-button class="md-raised" ng-click="back(\'#/scholarships/\', stipendForm)">{{\'main.button.back\' | translate}}</md-button> </div> </div> </div> </div> </form> </div> </div>'),a.put("scholarship/term/scholarship.scho.edit.html",'<div layout="row" flex> <md-input-container flex> <label class="textInput">{{\'stipend.scholarshipName\' | translate}}</label> <input type="text" ng-model="stipend.nameEt" name="nameEt" required md-maxlength="500"> </md-input-container> </div> <div layout="row" flex> <md-input-container flex> <label class="textInput">{{\'stipend.studyPeriod\' | translate}}</label> <hois-select required ng-model="stipend.studyPeriod" type="studyperiodyear" preselect-current></hois-select> </md-input-container> </div> <div layout="row"> <md-input-container flex="20" flex-md="100" flex-sm="100" flex-xs="100"> <label class="required">{{\'stipend.applicationPeriod\' | translate}}</label> <input type="hidden"> </md-input-container> <md-input-container flex="35" flex-md="100" flex-sm="100" flex-xs="100" flex-offset="5"> <md-datepicker required ng-model="stipend.applicationStart" md-max-date="stipend.applicationEnd" md-placeholder="{{\'main.from\' | translate}}"></md-datepicker> </md-input-container> <md-input-container flex="35" flex-md="100" flex-sm="100" flex-xs="100" flex-offset="5"> <md-datepicker required ng-model="stipend.applicationEnd" md-min-date="stipend.applicationStart" md-placeholder="{{\'main.thru\' | translate}}" ng-change="applicationEndChanged()"></md-datepicker> </md-input-container> </div> <div layout="row"> <md-input-container flex="20" flex-md="100" flex-sm="100" flex-xs="100"> <label class="required">{{\'stipend.paymentPeriod\' | translate}}</label> <input type="hidden"> </md-input-container> <md-input-container flex="35" flex-md="100" flex-sm="100" flex-xs="100" flex-offset="5"> <md-datepicker required ng-model="stipend.paymentStart" md-max-date="stipend.paymentEnd" md-placeholder="{{\'main.from\' | translate}}"></md-datepicker> </md-input-container> <md-input-container flex="35" flex-md="100" flex-sm="100" flex-xs="100" flex-offset="5"> <md-datepicker required ng-model="stipend.paymentEnd" md-min-date="stipend.paymentStart" md-placeholder="{{\'main.thru\' | translate}}"></md-datepicker> </md-input-container> </div> <div layout="row" flex> <md-input-container flex="45"> <label>{{\'stipend.places\' | translate}}</label> <input ng-model="stipend.places" type="number" autofocus aria-label="places" min="0" max="99999"> </md-input-container> <md-input-container flex="50" flex-offset="5"> <label>{{\'stipend.amountPaid\' | translate}}</label> <input required ng-model="stipend.amountPaid" type="number" autofocus aria-label="amountPaid" min="0" max="9999"> </md-input-container> </div> <div> <div layout="row" flex="100"> <hois-autocomplete flex ng-model="formState.curriculum" method="curriculums" label="stipend.curriculums" ng-required="missingCurriculums" additional-query-params="{higher: true}"></hois-autocomplete> </div> <div layout="column" class="common-label" flex="95" ng-repeat="curriculum in stipend.curriculums"> <div layout="row" flex layout-align="start center"> <div flex="5">&nbsp;</div> <div flex="50">{{curriculum.nameEt}}</div> <div> <a ng-click="deleteCurriculum(curriculum)" class="remove">&times;</a> </div> </div> </div> <div layout="row" flex> <md-input-container flex="45"> <label class="textInput">{{\'stipend.studyLoad\' | translate}}</label> <hois-classifier-select required ng-model="stipend.studyLoads" name="type" model-value-attr="code" main-classifier-code="OPPEKOORMUS" criteria="{higher: true}" multiple></hois-classifier-select> </md-input-container> <md-input-container flex="50" flex-offset="5"> <label class="textInput">{{\'stipend.courses\' | translate}}</label> <hois-classifier-select required ng-model="stipend.courses" name="type" model-value-attr="code" main-classifier-code="KURSUS" multiple></hois-classifier-select> </md-input-container> </div> <div layout="row" flex> <md-input-container flex="45"> <label class="textInput">{{\'stipend.averageMark\' | translate}}</label> <input ng-model="stipend.averageMark" type="number" autofocus aria-label="averageMark" min="0" max="5"> </md-input-container> <md-input-container flex="50" flex-offset="5"> <label class="textInput">{{\'stipend.priority\' | translate}}</label> <hois-select ng-model="stipend.averageMarkPriority" values="formState.priorities | filter: averageMarkPriorityFilter" show-property="value" value-property="code"></hois-select> </md-input-container> </div> <div layout="row" flex> <md-input-container flex="45"> <label class="textInput">{{\'stipend.lastPeriodMark\' | translate}}</label> <input ng-model="stipend.lastPeriodMark" type="number" autofocus aria-label="averageMark" min="0" max="5"> </md-input-container> <md-input-container flex="50" flex-offset="5"> <label class="textInput">{{\'stipend.priority\' | translate}}</label> <hois-select ng-model="stipend.lastPeriodMarkPriority" values="formState.priorities | filter: lastPeriodMarkPriorityFilter" show-property="value" value-property="code"></hois-select> </md-input-container> </div> <div layout="row" flex> <md-input-container flex="45"> <label class="textInput">{{\'stipend.curriculumCompletion\' | translate}}</label> <input ng-model="stipend.curriculumCompletion" type="number" autofocus aria-label="curriculumCompletion" min="0"> </md-input-container> <md-input-container flex="50" flex-offset="5"> <label class="textInput">{{\'stipend.priority\' | translate}}</label> <hois-select ng-model="stipend.curriculumCompletionPriority" values="formState.priorities | filter: curriculumCompletionPriorityFilter" show-property="value" value-property="code"></hois-select> </md-input-container> </div> <div layout="row"> <md-input-container flex="20" flex-md="100" flex-sm="100" flex-xs="100"> <label>{{\'stipend.studyPeriodDates\' | translate}}</label> <input type="hidden"> </md-input-container> <md-input-container flex="35" flex-md="100" flex-sm="100" flex-xs="100" flex-offset="5"> <md-datepicker ng-model="stipend.studyStartPeriodStart" md-max-date="stipend.studyStartPeriodEnd" md-placeholder="{{\'main.from\' | translate}}"></md-datepicker> </md-input-container> <md-input-container flex="35" flex-md="100" flex-sm="100" flex-xs="100" flex-offset="5"> <md-datepicker ng-model="stipend.studyStartPeriodEnd" md-min-date="stipend.studyStartPeriodStart" md-placeholder="{{\'main.thru\' | translate}}"></md-datepicker> </md-input-container> </div> <div layout="row" flex> <md-checkbox ng-model="stipend.isAcademicLeave" aria-label="Is academic leave" flex="50"> {{\'stipend.isAcademicLeave\' | translate}} </md-checkbox> </div> <div layout="row" flex> <md-input-container flex="45"> <label class="textInput">{{\'stipend.committee\' | translate}}</label> <hois-select ng-model="stipend.committee" values="formState.committees"></hois-select> </md-input-container> </div> </div> <div layout="row"> <md-button class="md-raised md-primary" ng-click="update()">{{\'main.button.save\' | translate}}</md-button> <md-button class="md-raised" ng-if="!stipend.isOpen && stipend.id" ng-click="publish()">{{\'main.button.publishtoStudents\' | translate}}</md-button> <md-button class="md-raised" ng-if="stipend.id && !stipend.isOpen" ng-click="delete()">{{\'main.button.delete\' | translate}}</md-button> <md-button class="md-raised" ng-click="back(\'#/scholarships/scholarships\', stipendForm)">{{\'main.button.back\' | translate}}</md-button> </div>'),a.put("scholarship/term/scholarship.scho.view.html",'<div class="ois-form-layout-padding" ng-cloak> <div flex> <form name="stipendForm"> <div class="form-readonly"> <div layout="row" flex> <md-input-container flex> <label class="textInput">{{formState.typeIsScholarship ? \'stipend.scholarshipType\' : \'stipend.grantType\' | translate}}</label> <hois-classifier-value ng-model="stipend.type" main-classifier-code="STIPTOETUS"></hois-classifier-value> </md-input-container> </div> <div layout="row" flex> <md-input-container flex> <label class="textInput">{{formState.typeIsScholarship ? \'stipend.scholarshipName\' : \'stipend.grantName\' | translate}}</label> <hois-value value="stipend.nameEt"></hois-value> </md-input-container> </div> <div layout="row" flex> <md-input-container flex> <label class="textInput">{{\'stipend.studyPeriod\' | translate}}</label> <hois-value value="formState.readonlyStudyPeriod | hoisStudyPeriod"></hois-value> </md-input-container> </div> <div layout="row"> <md-input-container flex="20" flex-md="100" flex-sm="100" flex-xs="100"> <label>{{\'stipend.applicationPeriod\' | translate}}</label> <input type="hidden"> </md-input-container> <md-input-container flex="35" flex-md="100" flex-sm="100" flex-xs="100" flex-offset="5"> <label>{{\'main.from\' | translate}}</label> <hois-value value="stipend.applicationStart | hoisDate"></hois-value> </md-input-container> <md-input-container flex="35" flex-md="100" flex-sm="100" flex-xs="100" flex-offset="5"> <label>{{\'main.thru\' | translate}}</label> <hois-value value="stipend.applicationEnd | hoisDate"></hois-value> </md-input-container> </div> <div layout="row"> <md-input-container flex="20" flex-md="100" flex-sm="100" flex-xs="100"> <label>{{\'stipend.paymentPeriod\' | translate}}</label> <input type="hidden"> </md-input-container> <md-input-container flex="35" flex-md="100" flex-sm="100" flex-xs="100" flex-offset="5"> <label>{{\'main.from\' | translate}}</label> <hois-value value="stipend.paymentStart | hoisDate"></hois-value> </md-input-container> <md-input-container flex="35" flex-md="100" flex-sm="100" flex-xs="100" flex-offset="5"> <label>{{\'main.thru\' | translate}}</label> <hois-value value="stipend.paymentEnd | hoisDate"></hois-value> </md-input-container> </div> <div layout="row" flex> <md-input-container flex="45"> <label>{{\'stipend.places\' | translate}}</label> <hois-value value="stipend.places"></hois-value> </md-input-container> <md-input-container flex="50" flex-offset="5"> <label>{{\'stipend.amountPaid\' | translate}}</label> <hois-value value="stipend.amountPaid"></hois-value> </md-input-container> </div> <div> <div layout="row" flex> <md-input-container flex> <label>{{\'stipend.curriculums\' | translate}}</label> <hois-value value="curriculumsDisplay.join(\', \')"></hois-value> </md-input-container> </div> <div layout="row" flex> <md-input-container flex="45"> <label class="textInput">{{\'stipend.studyLoad\' | translate}}</label> <hois-classifier-value ng-model="stipend.studyLoads" main-classifier-code="OPPEKOORMUS" multiple></hois-classifier-value> </md-input-container> <md-input-container flex="50" flex-offset="5"> <label class="textInput">{{\'stipend.courses\' | translate}}</label> <hois-classifier-value ng-model="stipend.courses" main-classifier-code="KURSUS" multiple></hois-classifier-value> </md-input-container> </div> <div layout="row" flex> <md-input-container flex="45"> <label class="textInput">{{\'stipend.averageMark\' | translate}}</label> <hois-value value="stipend.averageMark"></hois-value> </md-input-container> <md-input-container flex="50" flex-offset="5"> <label class="textInput">{{\'stipend.priority\' | translate}}</label> <hois-classifier-value ng-model="stipend.averageMarkPriority" main-classifier-code="PRIORITEET"></hois-classifier-value> </md-input-container> </div> <div layout="row" flex> <md-input-container flex="45"> <label class="textInput">{{\'stipend.lastPeriodMark\' | translate}}</label> <hois-value value="stipend.lastPeriodMark"></hois-value> </md-input-container> <md-input-container flex="50" flex-offset="5"> <label class="textInput">{{\'stipend.priority\' | translate}}</label> <hois-classifier-value ng-model="stipend.lastPeriodMarkPriority" main-classifier-code="PRIORITEET"></hois-classifier-value> </md-input-container> </div> <div layout="row" flex> <md-input-container flex="45"> <label class="textInput">{{\'stipend.curriculumCompletion\' | translate}}</label> <hois-value value="stipend.curriculumCompletion"></hois-value> </md-input-container> <md-input-container flex="50" flex-offset="5"> <label class="textInput">{{\'stipend.priority\' | translate}}</label> <hois-classifier-value ng-model="stipend.curriculumCompletionPriority" main-classifier-code="PRIORITEET"></hois-classifier-value> </md-input-container> </div> <div layout="row"> <md-input-container flex="20" flex-md="100" flex-sm="100" flex-xs="100"> <label>{{\'stipend.studyPeriodDates\' | translate}}</label> <input type="hidden"> </md-input-container> <md-input-container flex="35" flex-md="100" flex-sm="100" flex-xs="100" flex-offset="5"> <label>{{\'main.from\' | translate}}</label> <hois-value value="stipend.studyStartPeriodStart | hoisDate"></hois-value> </md-input-container> <md-input-container flex="35" flex-md="100" flex-sm="100" flex-xs="100" flex-offset="5"> <label>{{\'main.thru\' | translate}}</label> <hois-value value="stipend.studyStartPeriodEnd | hoisDate"></hois-value> </md-input-container> </div> <div layout="row" flex> <md-checkbox ng-model="stipend.isAcademicLeave" aria-label="Is academic leave" disabled flex="50"> {{\'stipend.isAcademicLeave\' | translate}} </md-checkbox> </div> <div layout="row" flex> <md-input-container flex="45"> <label>{{\'stipend.committee\' | translate}}</label> <hois-value value="currentLanguageNameField(formState.committee)"></hois-value> </md-input-container> </div> <div layout="row"> <div layout="row"> <md-button class="md-raised md-primary" ng-if="canEdit" ng-click="changeStipend(stipend)">{{\'main.button.edit\' | translate}}</md-button> <md-button class="md-raised" ng-if="!stipend.isOpen && stipend.id && canEdit" ng-click="publish()">{{\'main.button.publishtoStudents\' | translate}}</md-button> <md-button class="md-raised" ng-click="back(\'#/scholarships/\', stipendForm)">{{\'main.button.back\' | translate}}</md-button> </div> </div> </div> </div> </form> </div> </div>'),
a.put("scholarship/term/scholarship.soidu.edit.html",'<div layout="row" flex> <md-input-container flex> <label class="textInput">{{\'stipend.grantName\' | translate}}</label> <input type="text" ng-model="stipend.nameEt" name="nameEt" required md-maxlength="500"> </md-input-container> </div> <div layout="row" flex> <md-input-container flex> <label class="textInput">{{\'stipend.studyPeriod\' | translate}}</label> <hois-select required ng-model="stipend.studyPeriod" type="studyperiodyear" preselect-current></hois-select> </md-input-container> </div> <div layout="row"> <md-input-container flex="20" flex-md="100" flex-sm="100" flex-xs="100"> <label>{{\'stipend.applicationPeriod\' | translate}}</label> <input type="hidden"> </md-input-container> <md-input-container flex="35" flex-md="100" flex-sm="100" flex-xs="100" flex-offset="5"> <md-datepicker ng-model="stipend.applicationStart" md-max-date="stipend.applicationEnd" md-placeholder="{{\'main.from\' | translate}}"></md-datepicker> </md-input-container> <md-input-container flex="35" flex-md="100" flex-sm="100" flex-xs="100" flex-offset="5"> <md-datepicker ng-model="stipend.applicationEnd" md-min-date="stipend.applicationStart" md-placeholder="{{\'main.thru\' | translate}}"></md-datepicker> </md-input-container> </div> <div layout="row"> <md-input-container flex="20" flex-md="100" flex-sm="100" flex-xs="100"> <label>{{\'stipend.paymentPeriod\' | translate}}</label> <input type="hidden"> </md-input-container> <md-input-container flex="35" flex-md="100" flex-sm="100" flex-xs="100" flex-offset="5"> <md-datepicker ng-model="stipend.paymentStart" md-max-date="stipend.paymentEnd" md-placeholder="{{\'main.from\' | translate}}"></md-datepicker> </md-input-container> <md-input-container flex="35" flex-md="100" flex-sm="100" flex-xs="100" flex-offset="5"> <md-datepicker ng-model="stipend.paymentEnd" md-min-date="stipend.paymentStart" md-placeholder="{{\'main.thru\' | translate}}"></md-datepicker> </md-input-container> </div> <div layout="row" flex> <md-input-container flex="100"> <label>{{\'stipend.amountPaid\' | translate}}</label> <input ng-model="stipend.amountPaid" type="number" autofocus aria-label="amountPaid" min="0" max="9999"> </md-input-container> </div> <div> <div layout="row" flex="100"> <hois-autocomplete flex ng-model="formState.curriculum" method="curriculums" label="stipend.curriculums" ng-required="missingCurriculums" additional-query-params="{higher: false}"></hois-autocomplete> </div> <div layout="column" class="common-label" flex="95" ng-repeat="curriculum in stipend.curriculums"> <div layout="row" flex layout-align="start center"> <div flex="5">&nbsp;</div> <div flex="50">{{curriculum.nameEt}}</div> <div> <a ng-click="deleteCurriculum(curriculum)" class="remove">&times;</a> </div> </div> </div> <div layout="row" flex> <md-input-container flex="45"> <label class="textInput">{{\'stipend.studyForm\' | translate}}</label> <hois-classifier-select required ng-model="stipend.studyForms" name="type" model-value-attr="code" main-classifier-code="OPPEVORM" criteria="{vocational: true}" multiple filter-values="filteredStudyForm"></hois-classifier-select> </md-input-container> <md-input-container flex="50" flex-offset="5"> <label class="textInput">{{\'stipend.courses\' | translate}}</label> <hois-classifier-select required ng-model="stipend.courses" name="type" model-value-attr="code" main-classifier-code="KURSUS" multiple></hois-classifier-select> </md-input-container> </div> <div layout="row"> <md-input-container flex="20" flex-md="100" flex-sm="100" flex-xs="100"> <label>{{\'stipend.studyPeriodDates\' | translate}}</label> <input type="hidden"> </md-input-container> <md-input-container flex="35" flex-md="100" flex-sm="100" flex-xs="100" flex-offset="5"> <md-datepicker ng-model="stipend.studyStartPeriodStart" md-max-date="stipend.studyStartPeriodEnd" md-placeholder="{{\'main.from\' | translate}}"></md-datepicker> </md-input-container> <md-input-container flex="35" flex-md="100" flex-sm="100" flex-xs="100" flex-offset="5"> <md-datepicker ng-model="stipend.studyStartPeriodEnd" md-min-date="stipend.studyStartPeriodStart" md-placeholder="{{\'main.thru\' | translate}}"></md-datepicker> </md-input-container> </div> <div layout="row" flex> <md-checkbox ng-model="stipend.isStudyBacklog" aria-label="Is study backlog" ng-disabled="display.isStudyBacklogRead" flex="50"> {{\'stipend.isStudyBacklog\' | translate}} </md-checkbox> <md-checkbox ng-model="stipend.isTeacherConfirm" aria-label="Is teache confir" ng-disabled="display.isTeacherConfirmRead" flex="50"> {{\'stipend.isTeacherConfirm\' | translate}} </md-checkbox> </div> </div> <div layout="row" flex> <md-input-container flex="45"> <label class="textInput">{{\'stipend.committee\' | translate}}</label> <hois-select ng-model="stipend.committee" values="formState.committees"></hois-select> </md-input-container> </div> <div layout="row"> <md-button class="md-raised md-primary" ng-click="update()">{{\'main.button.save\' | translate}}</md-button> <md-button class="md-raised" ng-if="!stipend.isOpen && stipend.id" ng-click="publish()">{{\'main.button.publishtoStudents\' | translate}}</md-button> <md-button class="md-raised" ng-if="stipend.id && !stipend.isOpen" ng-click="delete()">{{\'main.button.delete\' | translate}}</md-button> <md-button class="md-raised" ng-click="back(\'#/scholarships?grants\', stipendForm)">{{\'main.button.back\' | translate}}</md-button> </div>'),a.put("scholarship/term/scholarship.soidu.view.html",'<div class="ois-form-layout-padding" ng-cloak> <div flex> <form name="stipendForm"> <div class="form-readonly"> <div layout="row" flex> <md-input-container flex> <label class="textInput">{{formState.typeIsScholarship ? \'stipend.scholarshipType\' : \'stipend.grantType\' | translate}}</label> <hois-classifier-value ng-model="stipend.type" main-classifier-code="STIPTOETUS"></hois-classifier-value> </md-input-container> </div> <div layout="row" flex> <md-input-container flex> <label class="textInput">{{formState.typeIsScholarship ? \'stipend.scholarshipName\' : \'stipend.grantName\' | translate}}</label> <hois-value value="stipend.nameEt"></hois-value> </md-input-container> </div> <div layout="row" flex> <md-input-container flex> <label class="textInput">{{\'stipend.studyPeriod\' | translate}}</label> <hois-value value="formState.readonlyStudyPeriod | hoisStudyPeriod"></hois-value> </md-input-container> </div> <div layout="row"> <md-input-container flex="20" flex-md="100" flex-sm="100" flex-xs="100"> <label>{{\'stipend.applicationPeriod\' | translate}}</label> <input type="hidden"> </md-input-container> <md-input-container flex="35" flex-md="100" flex-sm="100" flex-xs="100" flex-offset="5"> <label>{{\'main.from\' | translate}}</label> <hois-value value="stipend.applicationStart | hoisDate"></hois-value> </md-input-container> <md-input-container flex="35" flex-md="100" flex-sm="100" flex-xs="100" flex-offset="5"> <label>{{\'main.thru\' | translate}}</label> <hois-value value="stipend.applicationEnd | hoisDate"></hois-value> </md-input-container> </div> <div layout="row"> <md-input-container flex="20" flex-md="100" flex-sm="100" flex-xs="100"> <label>{{\'stipend.paymentPeriod\' | translate}}</label> <input type="hidden"> </md-input-container> <md-input-container flex="35" flex-md="100" flex-sm="100" flex-xs="100" flex-offset="5"> <label>{{\'main.from\' | translate}}</label> <hois-value value="stipend.paymentStart | hoisDate"></hois-value> </md-input-container> <md-input-container flex="35" flex-md="100" flex-sm="100" flex-xs="100" flex-offset="5"> <label>{{\'main.thru\' | translate}}</label> <hois-value value="stipend.paymentEnd | hoisDate"></hois-value> </md-input-container> </div> <div layout="row" flex> <md-input-container flex> <label>{{\'stipend.amountPaid\' | translate}}</label> <hois-value value="stipend.amountPaid"></hois-value> </md-input-container> </div> <div> <div layout="row" flex> <md-input-container flex> <label>{{\'stipend.curriculums\' | translate}}</label> <hois-value value="curriculumsDisplay.join(\', \')"></hois-value> </md-input-container> </div> <div layout="row" flex> <md-input-container flex="45"> <label class="textInput">{{\'stipend.studyForm\' | translate}}</label> <hois-classifier-value ng-model="stipend.studyForms" main-classifier-code="OPPEVORM" multiple></hois-classifier-value> </md-input-container> <md-input-container flex="50" flex-offset="5"> <label class="textInput">{{\'stipend.courses\' | translate}}</label> <hois-classifier-value ng-model="stipend.courses" main-classifier-code="KURSUS" multiple></hois-classifier-value> </md-input-container> </div> <div layout="row"> <md-input-container flex="20" flex-md="100" flex-sm="100" flex-xs="100"> <label>{{\'stipend.studyPeriodDates\' | translate}}</label> <input type="hidden"> </md-input-container> <md-input-container flex="35" flex-md="100" flex-sm="100" flex-xs="100" flex-offset="5"> <label>{{\'main.from\' | translate}}</label> <hois-value value="stipend.studyStartPeriodStart | hoisDate"></hois-value> </md-input-container> <md-input-container flex="35" flex-md="100" flex-sm="100" flex-xs="100" flex-offset="5"> <label>{{\'main.thru\' | translate}}</label> <hois-value value="stipend.studyStartPeriodEnd | hoisDate"></hois-value> </md-input-container> </div> <div layout="row"> <md-checkbox ng-model="stipend.isTeacherConfirm" disabled aria-label="Is academic leave"> {{\'stipend.isTeacherConfirm\' | translate}} </md-checkbox> </div> <div layout="row"> <md-checkbox ng-model="stipend.isStudyBacklog" disabled aria-label="Is academic leave"> {{\'stipend.isStudyBacklog\' | translate}} </md-checkbox> </div> <div layout="row" flex> <md-input-container flex="45"> <label>{{\'stipend.committee\' | translate}}</label> <hois-value value="currentLanguageNameField(formState.committee)"></hois-value> </md-input-container> </div> <div layout="row"> <div layout="row"> <md-button class="md-raised md-primary" ng-if="canEdit" ng-click="changeStipend(stipend)">{{\'main.button.edit\' | translate}}</md-button> <md-button class="md-raised" ng-if="!stipend.isOpen && stipend.id && canEdit" ng-click="publish()">{{\'main.button.publishtoStudents\' | translate}}</md-button> <md-button class="md-raised" ng-click="back(\'#/scholarships/\', stipendForm)">{{\'main.button.back\' | translate}}</md-button> </div> </div> </div> </div> </form> </div> </div>'),a.put("student/templates/change.modules.tmpl.html",'<md-table-container> <table md-table class="secondary-table"> <thead md-head> <tr md-row> <th md-column>{{\'student.result.module\' | translate}}</th> <th ng-if="student.curriculumVersion.isVocational" md-column>{{\'student.result.ekap\' | translate}}</th> <th ng-if="!student.curriculumVersion.isVocational" md-column>{{\'student.result.higher.credits\' | translate}}</th> <th md-column>{{\'student.result.grade\' | translate}}</th> <th md-column>{{\'student.result.date\' | translate}}</th> <th md-column>{{\'student.result.oldModule\' | translate}}</th> <th md-column>{{\'student.result.newModule\' | translate}}</th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="module in changeableModules | orderBy: currentLanguageNameField()" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell>{{currentLanguageNameField(module)}}</td> <td md-cell>{{module.credits}}</td> <td md-cell>{{module.grade}}</td> <td md-cell>{{module.gradeDate | hoisDate}}</td> <td md-cell>{{currentLanguageNameField(module.curriculumVersionModule)}}</td> <td md-cell> <md-select ng-model="module.curriculumVersionModuleId" aria-label="new module select" ng-change="ngchangetest(module)"> <md-option ng-if="student.curriculumVersion.isVocational" ng-repeat="val in vocationalCurriculumModules" ng-value="val.id">{{currentLanguageNameField(val)}}</md-option> <md-option ng-if="!student.curriculumVersion.isVocational" ng-repeat="val in higherCurriculumModules" ng-value="val.id">{{currentLanguageNameField(val)}}</md-option> </md-select> </td> </tr> </tbody> </table> </md-table-container> <br><br> <div layout="row" layout-margin> <md-button ng-if="changeableModules.length > 0" class="md-raised md-primary" ng-click="saveChangedModules()">{{\'main.button.save\' | translate}}</md-button> <md-button class="md-raised" ng-click="back(\'#/students\')">{{\'main.button.back\' | translate}}</md-button> </div>'),a.put("student/templates/journals.and.protocols.tmpl.html",'<md-table-container> <table md-table class="secondary-table"> <thead md-head> <tr md-row> <th md-column>{{\'student.result.name\' | translate}}</th> <th md-column>{{\'student.result.studyYear\' | translate}}</th> <th md-column>{{\'student.result.protocolNr\' | translate}}</th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="entity in studentConnectedEntities" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell> <a ng-if="entity.type === \'journal\'" ng-href="#/journal/{{entity.entityId}}/view">{{currentLanguageNameField(entity)}}</a> <a ng-if="entity.type === \'practice\'" ng-href="#/practiceJournals/{{entity.entityId}}/view">{{currentLanguageNameField(entity)}}</a> <a ng-if="entity.type === \'protocol\'" ng-href="#/moduleProtocols/{{entity.entityId}}/view"><b>{{currentLanguageNameField(entity)}}</b></a> <a ng-if="entity.type === \'apel\' && auth.isAdmin()" ng-href="#/apelApplication/{{entity.entityId}}/view">{{currentLanguageNameField(entity)}}</a> <span ng-if="entity.type === \'apel\' && auth.isTeacher()">{{currentLanguageNameField(entity)}}</span> </td> <td md-cell> <hois-classifier-value ng-if="entity.type !== \'apel\'" ng-model="entity.yearCode" main-classifier-code="OPPEAASTA"></hois-classifier-value> <span ng-if="entity.type === \'apel\'">{{entity.date | hoisDate}}</span> </td> <td md-cell>{{entity.protocolNr}}</td> </tr> </tbody> </table> </md-table-container>'),a.put("student/templates/view.navbar.higher.tmpl.html",'<md-nav-bar hide-xs md-selected-nav-item="currentNavItem" nav-bar-aria-label="main selection" ng-cloak> <md-nav-item md-nav-href="#/students/{{::studentId}}/main?_noback" name="student.main">{{\'student.main\' | translate}}</md-nav-item> <md-nav-item md-nav-href="#/students/{{::studentId}}/results?_noback" name="student.results">{{\'student.results\' | translate}}</md-nav-item> <md-nav-item md-nav-href="#/students/{{::studentId}}/documents?_noback" name="student.documents">{{\'student.documents\' | translate}}</md-nav-item> <md-nav-item ng-if="auth.isAdmin() && student.status && student.status !== \'OPPURSTAATUS_L\' && student.status !== \'OPPURSTAATUS_K\'" md-nav-href="#/students/{{::studentId}}/timetable?_noback" name="student.timetable">{{\'student.studentTimetable\' | translate}}</md-nav-item> </md-nav-bar> <div hide-gt-xs layout="column"> <md-button class="md-raised" flex ng-href="#/students/{{::studentId}}/main?_noback" name="student.main" ng-class="{\'md-accent\': currentNavItem === \'student.main\'}" name="student.main">{{\'student.main\' | translate}}</md-button> <md-button class="md-raised" ng-href="#/students/{{::studentId}}/results?_noback" ng-class="{\'md-accent\': currentNavItem === \'student.results\'}" name="student.results">{{\'student.results\' | translate}}</md-button> <md-button class="md-raised" ng-href="#/students/{{::studentId}}/documents?_noback" ng-class="{\'md-accent\': currentNavItem === \'student.documents\'}" name="student.documents">{{\'student.documents\' | translate}}</md-button> <md-button class="md-raised" ng-if="auth.isAdmin() && student.status !== \'OPPURSTAATUS_L\' && student.status !== \'OPPURSTAATUS_K\'" ng-class="{\'md-accent\': currentNavItem === \'student.timetable\'}" ng-href="#/students/{{::studentId}}/timetable?_noback" name="student.timetable">{{\'student.studentTimetable\' | translate}}</md-button> </div>'),a.put("student/templates/view.navbar.vocational.tmpl.html",'<md-nav-bar hide-xs md-selected-nav-item="currentNavItem" nav-bar-aria-label="main selection"> <md-nav-item md-nav-href="#/students/{{::studentId}}/main?_noback" name="student.main">{{\'student.main\' | translate}}</md-nav-item> <md-nav-item md-nav-href="#/students/{{::studentId}}/results?_noback" name="student.results">{{\'student.results\' | translate}}</md-nav-item> <md-nav-item md-nav-href="#/students/{{::studentId}}/absences?_noback" name="student.absences">{{\'student.absences\' | translate}}</md-nav-item> <md-nav-item md-nav-href="#/students/{{::studentId}}/documents?_noback" name="student.documents">{{\'student.documents\' | translate}}</md-nav-item> <md-nav-item ng-if="auth.isAdmin() && student.status && student.status !== \'OPPURSTAATUS_L\' && student.status !== \'OPPURSTAATUS_K\'" md-nav-href="#/students/{{::studentId}}/timetable?_noback" name="student.timetable">{{\'student.studentTimetable\' | translate}}</md-nav-item> </md-nav-bar> <div hide-gt-xs layout="column"> <md-button class="md-raised" flex ng-href="#/students/{{::studentId}}/main?_noback" ng-class="{\'md-accent\': currentNavItem === \'student.main\'}" name="student.main">{{\'student.main\' | translate}}</md-button> <md-button class="md-raised" ng-href="#/students/{{::studentId}}/results?_noback" ng-class="{\'md-accent\': currentNavItem === \'student.results\'}" name="student.results">{{\'student.results\' | translate}}</md-button> <md-button class="md-raised" ng-href="#/students/{{::studentId}}/absences?_noback" ng-class="{\'md-accent\': currentNavItem === \'student.absences\'}" name="student.absences">{{\'student.absences\' | translate}}</md-button> <md-button class="md-raised" ng-href="#/students/{{::studentId}}/documents?_noback" ng-class="{\'md-accent\': currentNavItem === \'student.documents\'}" name="student.documents">{{\'student.documents\' | translate}}</md-button> <md-button class="md-raised" ng-if="auth.isAdmin() && student.status !== \'OPPURSTAATUS_L\' && student.status !== \'OPPURSTAATUS_K\'" ng-class="{\'md-accent\': currentNavItem === \'student.timetable\'}" ng-href="#/students/{{::studentId}}/timetable?_noback" name="student.timetable">{{\'student.studentTimetable\' | translate}}</md-button> </div>'),a.put("student/templates/view.results.higher.curriculumfulfillment.tmpl.html",'<hois-collapsable ng-repeat="module in higherResults.modules" expanded="false"> <!-- if there is no extra curriculum subjects module(KORGMOODUL_V) then module.id is set to -1 --> <hois-collapsable-header ng-if="module.id > -1"> <div layout="row"> <div flex="30"> <span>{{\'curriculum.module\' | translate}} {{currentLanguageNameField(module)}} {{module.totalCredits}} EAP</span> <span ng-if="module.type !== \'KORGMOODUL_M\'">(<hois-classifier-value class="inline" ng-model="module.type" main-classifier-code="KORGMOODUL"></hois-classifier-value>)</span> <span ng-if="module.type === \'KORGMOODUL_M\'">({{currentLanguage()==\'et\' ? module.typeNameEt : module.typeNameEn}})</span> </div> <b ng-if="!module.isOk" flex-offset="10" md-colors="{color: \'accent\'}">&nbsp;{{ module.totalDifference }}</b> <i class="material-icons" flex-offset="10" md-colors="{color: \'green-600\'}" ng-if="module.isOk">done</i> </div> </hois-collapsable-header> <hois-collapsable-header ng-if="module.id === -1"> <div layout="row"> <div flex="30"> <hois-classifier-value class="inline" ng-model="module.type" main-classifier-code="KORGMOODUL"></hois-classifier-value> </div> <i class="material-icons" flex-offset="10" md-colors="{color: \'green-600\'}" ng-if="module.isOk">done</i> </div> </hois-collapsable-header> <md-table-container> <table md-table> <tbody md-body> <tr md-row ng-if="hasMandatorySubjects(module)"> <td colspan="7" class="sub-header1"> &nbsp;{{\'subject.mandatory\' | translate}} <i class="material-icons green" ng-if="module.mandatoryDifference >= 0">done</i> </td> </tr> <tr md-row class="secondary-table-header" ng-if="hasMandatorySubjects(module)"> <td md-cell>{{\'student.result.higher.subject\' | translate}}</td> <td md-cell>{{\'student.result.higher.subjectCode\' | translate}}</td> <td md-cell>{{\'student.result.higher.credits\' | translate}}</td> <td md-cell>{{\'student.result.higher.grade\' | translate}}</td> <td md-cell>{{\'student.result.higher.date\' | translate}}</td> <td md-cell>{{\'student.result.higher.teacher\' | translate}}</td> <td md-cell>{{\'student.result.isOk\' | translate}}</td> </tr> <tr md-row ng-repeat="subjectResult in higherResults.subjectResults | filter: filterSubjectResultsByModule(module) | filter: {isOptional: false} | orderBy: currentLanguageNameField()"> <td md-cell> <span ng-if="subjectResult.isApelTransfer" class="apelAsterisk">*</span> <span>{{currentLanguageNameField(subjectResult.subject)}}</span> <span ng-if="!subjectResult.isFormalLearning && subjectResult.isApelTransfer"> - {{\'student.result.informal\' | translate}}</span> </td> <td md-cell>{{subjectResult.subject.code}}</td> <td md-cell>{{subjectResult.subject.credits}}</td> <td md-cell> <table> <tr class="one-row"> <td ng-repeat="grade in subjectResult.grades | orderBy: \'gradeDate\'"> <span ng-if="$index !== 0">/</span> <span ng-class="{badResult: !gradeUtil.isPositive(grade.grade)}">{{grade.gradeValue}}</span> </td> </tr> </table> </td> <td md-cell>{{subjectResult.lastGrade.gradeDate | hoisDate}}</td> <td md-cell> <table> <tr ng-repeat="teacher in subjectResult.lastGrade.teachers | orderBy"> <td>{{teacher}}</td> </tr> </table> </td> <td md-cell>{{subjectResult.isOk ? \'main.yes\' : \'main.no\' | translate}}</td> </tr> <tr md-row class="secondary-table-header" ng-if="hasMandatorySubjects(module)"> <td colspan="2">{{\'student.result.totalRequired\' | translate}}: {{module.compulsoryStudyCredits}}</td> <td colspan="2">{{\'student.result.totalSubmitted\' | translate}}: {{module.mandatoryCreditsSubmitted}}</td> <td colspan="3"> {{\'student.result.difference\' | translate}}: <span ng-class="{\'red\': module.mandatoryDifference < 0}">{{module.mandatoryDifference}}</span> </td> </tr> <tr md-row ng-if="hasOptionalSubjects(module)"> <td colspan="7" class="sub-header1"> {{\'subject.optional\' | translate}} <i class="material-icons green" ng-if="module.optionalDifference >= 0">done</i> </td> </tr> <tr md-row class="secondary-table-header" ng-if="hasOptionalSubjects(module)"> <td md-cell>{{\'student.result.higher.subject\' | translate}}</td> <td md-cell>{{\'student.result.higher.subjectCode\' | translate}}</td> <td md-cell>{{\'student.result.higher.credits\' | translate}}</td> <td md-cell>{{\'student.result.higher.grade\' | translate}}</td> <td md-cell>{{\'student.result.higher.date\' | translate}}</td> <td md-cell>{{\'student.result.higher.teacher\' | translate}}</td> <td md-cell>{{\'student.result.isOk\' | translate}}</td> </tr> <tr md-row ng-repeat="subjectResult in higherResults.subjectResults\r\n          | filter: filterSubjectResultsByModule(module) | filter: {isOptional: true} | filter: {electiveModule: \'!\'}\r\n          | orderBy: currentLanguageNameField()"> <td md-cell> <span ng-if="subjectResult.isApelTransfer" class="apelAsterisk">*</span> <span>{{currentLanguageNameField(subjectResult.subject)}}</span> <span ng-if="!subjectResult.isFormalLearning && subjectResult.isApelTransfer"> - {{\'student.result.informal\' | translate}}</span> </td> <td md-cell>{{subjectResult.subject.code}}</td> <td md-cell>{{subjectResult.subject.credits}}</td> <td md-cell> <table> <tr> <td ng-repeat="grade in subjectResult.grades | orderBy: \'gradeDate\'"> <span ng-if="$index !== 0">/</span> <span ng-class="{badResult: !gradeUtil.isPositive(grade.grade)}">{{grade.gradeValue}}</span> </td> </tr> </table> </td> <td md-cell>{{subjectResult.lastGrade.gradeDate | hoisDate}}</td> <td md-cell> <table> <tr ng-repeat="teacher in subjectResult.lastGrade.teachers | orderBy"> <td>{{teacher}}</td> </tr> </table> </td> <td md-cell>{{subjectResult.isOk ? \'main.yes\' : \'main.no\' | translate}}</td> </tr> <tr md-row ng-if="module.electiveModulesResults.length > 0"> <td colspan="1" class="sub-header2"> {{\'student.result.higher.electiveModules\' | translate}} <i class="material-icons green" ng-if="module.electiveModulesNumber <= module.electiveModulesCompleted">done</i> </td> <td colspan="2" class="sub-header2">{{\'student.result.higher.electiveModulesRequired\' | translate}}: {{module.electiveModulesNumber}}</td> <td colspan="4" class="sub-header2">{{\'student.result.higher.electiveModulesCompleted\' | translate}}: {{module.electiveModulesCompleted}}</td> </tr> <tr md-row ng-repeat-start="electiveModule in module.electiveModulesResults | orderBy: currentLanguageNameField()"> <td md-cell colspan="7" class="sub-header2"> {{\'module.optional\' | translate}}: {{currentLanguageNameField(electiveModule)}} <i class="material-icons green" ng-if="electiveModule.isOk">done</i> </td> </tr> <tr md-row ng-repeat="subjectResult in higherResults.subjectResults | filter: filterSubjectResultsByModule(module) | filter: {isOptional: true} |\r\n                                filter: {electiveModule: electiveModule.referenceNumber} | orderBy: currentLanguageNameField()"> <td md-cell>{{currentLanguageNameField(subjectResult.subject)}}</td> <td md-cell>{{subjectResult.subject.code}}</td> <td md-cell>{{subjectResult.subject.credits}}</td> <td md-cell> <table> <tr> <td ng-repeat="grade in subjectResult.grades | orderBy: \'gradeDate\'"> <span ng-if="$index !== 0">/</span> <span ng-class="{badResult: !gradeUtil.isPositive(grade.grade)}">{{grade.gradeValue}}</span> </td> </tr> </table> </td> <td md-cell>{{subjectResult.lastGrade.gradeDate | hoisDate}}</td> <td md-cell> <table> <tr ng-repeat="teacher in subjectResult.lastGrade.teachers | orderBy"> <td>{{teacher}}</td> </tr> </table> </td> <td md-cell>{{subjectResult.isOk ? \'main.yes\' : \'main.no\' | translate}}</td> </tr> <tr ng-repeat-end></tr> <tr md-row class="secondary-table-header" ng-if="hasOptionalSubjects(module)"> <td colspan="2">{{\'student.result.totalRequired\' | translate}}: {{module.optionalStudyCredits}}</td> <td colspan="2">{{\'student.result.totalSubmitted\' | translate}}: {{module.optionalCreditsSubmitted}}</td> <td colspan="3"> {{\'student.result.difference\' | translate}}: <span ng-class="{\'red\': optionalDifference < 0}">{{module.optionalDifference}}</span> </td> </tr> </tbody> </table> </md-table-container> </hois-collapsable> <style>.inline {\r\n    display: inline;\r\n  }\r\n\r\n  .red {\r\n    color: red;\r\n  }</style>'),a.put("student/templates/view.results.higher.orderofpassing.tmpl.html","<md-table-container> <table md-table class=\"secondary-table\"> <thead md-head> <tr md-row> <th md-column>{{'student.result.higher.subject' | translate}}</th> <th md-column>{{'student.result.higher.subjectCode' | translate}}</th> <th md-column>{{'student.result.higher.module' | translate}}</th> <th md-column>{{'student.result.higher.required' | translate}}</th> <th md-column>{{'student.result.higher.credits' | translate}}</th> <th md-column>{{'student.result.higher.grade' | translate}}</th> <th md-column>{{'student.result.higher.date' | translate}}</th> <th md-column>{{'student.result.higher.teacher' | translate}}</th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat=\"subjectResult in higherResults.subjectResults | orderBy: 'lastGrade.gradeDate'\" ng-if=\"subjectResult.lastGrade !== null && subjectResult.lastGrade.gradeValue !== null\"> <td md-cell> <span ng-if=\"subjectResult.isApelTransfer\" class=\"apelAsterisk\">*</span> <span>{{currentLanguageNameField(subjectResult.subject)}}</span> <span ng-if=\"!subjectResult.isFormalLearning && subjectResult.isApelTransfer\"> - {{'student.result.informal' | translate}}</span> </td> <td md-cell>{{subjectResult.subject.code}}</td> <td md-cell>{{currentLanguageNameField(subjectResult.higherModule)}}</td> <td md-cell>{{subjectResult.isOptional ? 'main.no' : 'main.yes' | translate}}</td> <td md-cell>{{subjectResult.subject.credits}}</td> <td md-cell> <table> <tr class=\"one-row\"> <td ng-repeat=\"grade in subjectResult.grades | orderBy: 'gradeDate'\"> <span ng-if=\"$index !== 0\">/</span> <span ng-class=\"{badResult: !gradeUtil.isPositive(grade.grade)}\">{{grade.gradeValue}}</span> </td> </tr> </table> </td> <td md-cell>{{subjectResult.lastGrade.gradeDate | hoisDate}}</td> <td md-cell> <table> <tr ng-repeat=\"teacher in subjectResult.lastGrade.teachers | orderBy\"> <td>{{teacher}}</td> </tr> </table> </td> </tr> </tbody> </table> </md-table-container>"),a.put("student/templates/view.results.higher.orderofstudyperiod.tmpl.html","<div ng-repeat=\"studyPeriodResult in higherResults.studyPeriodResults | orderBy: 'studyPeriod.endDate'\"> <hois-collapsable label=\"currentLanguageNameField(studyPeriodResult.studyPeriod)\" expanded=\"false\"> <md-table-container> <table md-table> <tbody md-body> <tr md-row class=\"secondary-table-header hideable\"> <td md-cell>{{'student.result.higher.subject' | translate}}</td> <td md-cell>{{'student.result.higher.subjectCode' | translate}}</td> <td md-cell>{{'student.result.higher.module' | translate}}</td> <td md-cell>{{'student.result.higher.required' | translate}}</td> <td md-cell>{{'student.result.higher.credits' | translate}}</td> <td md-cell>{{'student.result.higher.grade' | translate}}</td> <td md-cell>{{'student.result.higher.date' | translate}}</td> <td md-cell>{{'student.result.higher.teacher' | translate}}</td> </tr> <tr md-row ng-repeat=\"subjectResult in higherResults.subjectResults | filter: filterSubjectResultsByStudyPeriod(studyPeriodResult.studyPeriod) | orderBy: 'lastGrade.gradeDate'\"> <td md-cell> <span ng-if=\"subjectResult.isApelTransfer\" class=\"apelAsterisk\">*</span> <span>{{currentLanguageNameField(subjectResult.subject)}}</span> <span ng-if=\"!subjectResult.isFormalLearning && subjectResult.isApelTransfer\"> - {{'student.result.informal' | translate}}</span> </td> <td md-cell>{{subjectResult.subject.code}}</td> <td md-cell>{{currentLanguageNameField(subjectResult.higherModule)}}</td> <td md-cell>{{subjectResult.isOptional ? 'main.no' : 'main.yes' | translate}}</td> <td md-cell>{{subjectResult.subject.credits}}</td> <td md-cell> <table> <tr class=\"one-row\"> <td ng-repeat=\"grade in subjectResult.grades | orderBy: 'gradeDate'\"> <span ng-if=\"$index !== 0\">/</span> <span ng-class=\"{badResult: !gradeUtil.isPositive(grade.grade)}\">{{grade.gradeValue}}</span> </td> </tr> </table> </td> <td md-cell>{{subjectResult.lastGrade.gradeDate | hoisDate}}</td> <td md-cell> <table> <tr ng-repeat=\"teacher in subjectResult.lastGrade.teachers | orderBy\"> <td>{{teacher}}</td> </tr> </table> </td> </tr> <tr md-row class=\"secondary-table-header\"> <td md-cell>{{'student.result.higher.overallCredits' | translate}}: {{studyPeriodResult.total}}</td> <td md-cell colspan=\"7\">{{'student.result.kkh' | translate}}: {{studyPeriodResult.averageGrade}}</td> </tr> </tbody> </table> </md-table-container> </hois-collapsable> </div> <div ng-if=\"higherResults.studyPeriodResults && higherResults.studyPeriodResults.length==0\"> <span>{{'student.result.missing' | translate}}</span> </div>"),a.put("student/templates/view.results.higher.tmpl.html",'<div layout-padding ng-cloak class="form-readonly"> <div flex> <div layout="row" layout-xs="column" flex> <div flex="90"> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="20" flex-sm="100" flex-xs="100"> <label>{{\'student.label\' | translate}}</label> <hois-value value="student.person.firstname + \' \' + student.person.lastname"></hois-value> </md-input-container> <md-input-container flex="15" flex-sm="100" flex-xs="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'student.idcode\' | translate}}</label> <hois-value value="student.person.idcode"></hois-value> </md-input-container> <md-input-container flex="15" flex-sm="100" flex-xs="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'student.studyForm\' | translate}}</label> <hois-classifier-value ng-model="student.studyForm" main-classifier-code="OPPEVORM"></hois-classifier-value> </md-input-container> <md-input-container flex="35" flex-sm="100" flex-xs="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'student.result.higher.consideredCredits\' | translate}}</label> <hois-value value="student.higherResults.creditsSubmitted.toString() + \' / \' + student.higherResults.creditsSubmittedConsidered.toString()"></hois-value> </md-input-container> </div> </div> </div> <div layout="row" layout-xs="column" flex> <div flex="90"> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="20" flex-sm="100" flex-xs="100"> <label>{{\'student.result.higher.curriculumVersion\' | translate}}</label> <hois-value value="currentLanguageNameField(student.curriculumVersion)"></hois-value> </md-input-container> <md-input-container flex="15" flex-sm="100" flex-xs="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'student.result.curriculumCredits\' | translate}}</label> <hois-value value="student.curriculumCredits != null ? student.curriculumCredits + \' EAP\' : \'\'"></hois-value> </md-input-container> <md-input-container flex="15" flex-sm="100" flex-xs="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'student.result.studyLoad\' | translate}}</label> <hois-classifier-value ng-model="student.studyLoad" main-classifier-code="OPPEKOORMUS"></hois-classifier-value> </md-input-container> <md-input-container flex="15" flex-sm="100" flex-xs="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'student.result.kkh\' | translate}}</label> <hois-value value="student.higherResults.averageGrade.toString()"></hois-value> </md-input-container> <md-input-container flex="15" flex-sm="100" flex-xs="100" flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'student.result.curriculumFulfilled\' | translate}}</label> <hois-value value="student.higherResults.isCurriculumFulfilled ? (\'student.result.fulfilled\' | translate) : (\'student.result.notFulfilled\' | translate)"></hois-value> </md-input-container> </div> </div> </div> <div ng-controller="StudentViewResultsHigherController as controller" flex="90" ng-cloak> <md-content> <md-nav-bar md-selected-nav-item="resultsCurrentNavItem" nav-bar-aria-label="results selection"> <md-nav-item md-nav-click="changeResultsCurrentNavItem(\'student.curriculumFulfillment\')" name="student.curriculumFulfillment"> {{\'student.result.curriculumFulfillment\' | translate}} </md-nav-item> <md-nav-item md-nav-click="changeResultsCurrentNavItem(\'student.inOrderOfStudyPeriod\')" name="student.inOrderOfStudyPeriod"> {{\'student.result.inOrderOfStudyPeriod\' | translate}} </md-nav-item> <md-nav-item md-nav-click="changeResultsCurrentNavItem(\'student.inOrderOfPassing\')" name="student.inOrderOfPassing"> {{\'student.result.inOrderOfPassing\' | translate}} </md-nav-item> <md-nav-item ng-if="canChangeStudentModules" md-nav-click="changeResultsCurrentNavItem(\'student.changeModules\')" name="student.changeModules"> {{\'student.result.changeModules\' | translate}} </md-nav-item> </md-nav-bar> <div layout-margin> <div ng-show="resultsCurrentNavItem === \'student.curriculumFulfillment\'"> <div ng-include="\'student/templates/view.results.higher.curriculumfulfillment.tmpl.html\'"></div> </div> <div ng-show="resultsCurrentNavItem === \'student.inOrderOfStudyPeriod\'"> <div ng-include="\'student/templates/view.results.higher.orderofstudyperiod.tmpl.html\'"></div> </div> <div ng-show="resultsCurrentNavItem === \'student.inOrderOfPassing\'"> <div ng-include="\'student/templates/view.results.higher.orderofpassing.tmpl.html\'"></div> </div> <div ng-if="canChangeStudentModules" ng-show="resultsCurrentNavItem === \'student.changeModules\'"> <div ng-include="\'student/templates/change.modules.tmpl.html\'"></div> </div> </div> </md-content> </div> </div> </div>'),
a.put("student/templates/view.results.vocational.curriculumfulfillment.list.tmpl.html",'<hois-collapsable expanded="false"> <hois-collapsable-header> <div layout="column" layout-gt-sm="row" class="curriculum-fulfillment-result"> <div> <span ng-if="moduleResultById[module.id].isApelTransfer" class="apelAsterisk">*</span> <span>{{currentLanguageNameField(module.curriculumModule) + \' (\' + currentLanguageNameField(module.curriculumModule.module) + \')\'}}</span> <span ng-if="moduleResultById[module.id].isApelTransfer && !moduleResultById[module.id].isFormalLearning"> - {{\'student.result.informal\' | translate}}</span> </div> <div flex-offset-gt-sm="5"> <div ng-if="moduleResultById[module.id] && moduleResultById[module.id].grade && positiveGrade(moduleResultById[module.id].grade.code)" class="bold" md-colors="{color: \'green-600\'}">{{moduleResultById[module.id].grade.value}} ({{moduleResultById[module.id].credits}} {{\'student.result.ekap\' | translate}})</div> <div ng-if="moduleResultById[module.id] && moduleResultById[module.id].grade && !positiveGrade(moduleResultById[module.id].grade.code)" class="bold" md-colors="{color: \'red-500\'}">{{moduleResultById[module.id].grade.value}} ({{moduleResultById[module.id].credits}} {{\'student.result.ekap\' | translate}})</div> <div ng-if="(!moduleResultById[module.id] || !moduleResultById[module.id].grade) && !allThemesHavePositiveGrade(module)" md-colors="{color: \'accent\'}">{{((moduleResultById[module.id] ? moduleResultById[module.id].totalSubmitted : 0) - module.curriculumModule.credits) | number: 1}} {{\'student.result.ekap\' | translate}}</div> <div ng-if="moduleResultById[module.id] && !moduleResultById[module.id].grade && allThemesHavePositiveGrade(module)" md-colors="{color: \'accent\'}">{{\'student.result.moduleNotGraded\' | translate}}</div> </div> </div> </hois-collapsable-header> <md-table-container> <table md-table class="secondary-table"> <thead md-head> <tr md-row> <th md-column>{{\'student.result.theme\' | translate}}</th> <th md-column>{{\'student.result.ekap\' | translate}}</th> <th md-column>{{\'student.result.grade\' | translate}}</th> <th md-column>{{\'student.result.date\' | translate}}</th> <th md-column>{{auth.higher ? (\'student.result.teacherHigher\' | translate) : (\'student.result.teacherVocational\' | translate)}}</th> <th md-column>{{\'student.result.isOk\' | translate}}</th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="row in module.themes" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell> <span ng-if="moduleResultById[module.id].themeResultById[row.id].isApelTransfer" class="apelAsterisk">* </span> <span>{{row.nameEt}}</span> <span ng-if="moduleResultById[module.id].themeResultById[row.id].isApelTransfer"> - {{\'student.result.informal\' | translate}}</span> </td> <td md-cell>{{row.credits}}</td> <td md-cell> <span ng-class="{badResult: !gradeUtil.isPositive(moduleResultById[module.id].themeResultById[row.id].grade.code)}"> {{moduleResultById[module.id].themeResultById[row.id].grade.value}} </span> </td> <td md-cell>{{moduleResultById[module.id].themeResultById[row.id].date | hoisDate}}</td> <td md-cell>{{displayTeachers(moduleResultById[module.id].themeResultById[row.id].teachers)}}</td> <td md-cell>{{positiveThemeResult(moduleResultById[module.id].themeResultById[row.id]) ? \'main.yes\' : \'main.no\' | translate}}</td> </tr> </tbody> </table> </md-table-container> <div class="md-body-2 bold" layout="row"> <div>{{\'student.result.totalRequired\' | translate}}: {{module.curriculumModule.credits}}</div> <div flex-offset="10">{{\'student.result.totalSubmitted\' | translate}}: {{moduleResultById[module.id] ? moduleResultById[module.id].totalSubmitted : 0}}</div> <div ng-if="!moduleResultById[module.id] || module.curriculumModule.credits > moduleResultById[module.id].totalSubmitted" flex-offset="10">{{\'student.result.difference\' | translate}}: <span md-colors="{color: \'warn-A400\'}">-{{(module.curriculumModule.credits - (moduleResultById[module.id] ? moduleResultById[module.id].totalSubmitted : 0)) | number: 1}}</span></div> <div ng-if="module.curriculumModule.credits <= moduleResultById[module.id].totalSubmitted" flex-offset="10">{{\'student.result.difference\' | translate}}: {{(moduleResultById[module.id] ? moduleResultById[module.id].totalSubmitted : 0) - module.curriculumModule.credits}}</div> </div> <br><br> </hois-collapsable>'),a.put("student/templates/view.results.vocational.curriculumfulfillment.tmpl.html",'<div ng-repeat="module in ::vocationalResultsCurriculum.vocationalResultsModules"> <div ng-include="\'student/templates/view.results.vocational.curriculumfulfillment.list.tmpl.html\'"></div> </div> <hois-collapsable expanded="false" ng-repeat="result in ::vocationalResultsCurriculum.otherSchoolExtraCurriculaModuleResults"> <hois-collapsable-header> <div layout="row"> <div flex="30"> <span class="apelAsterisk">*</span> <span>{{currentLanguageNameField(result.module)}}</span> </div> <div ng-if="positiveGrade(result.grade.code)" flex-offset="10" class="bold" md-colors="{color: \'green-600\'}">{{result.grade.value}} ({{result.credits}} {{\'student.result.ekap\' | translate}})</div> <div ng-if="!positiveGrade(result.grade.code)" flex-offset="10" class="bold" md-colors="{color: \'red-500\'}">{{result.grade.value}} ({{result.credits}} {{\'student.result.ekap\' | translate}})</div> </div> </hois-collapsable-header> </hois-collapsable> <div ng-if="vocationalResultsCurriculum.extraCurriculaVocationalResultsModules && vocationalResultsCurriculum.extraCurriculaVocationalResultsModules.length !== 0"> <h3>{{\'student.result.otherModuleResults\' | translate}}</h3> <div ng-repeat="module in ::vocationalResultsCurriculum.extraCurriculaVocationalResultsModules"> <div ng-include="\'student/templates/view.results.vocational.curriculumfulfillment.list.tmpl.html\'"></div> </div> </div> <div ng-if="vocationalResultsCurriculum.vocationalResultsModules && vocationalResultsCurriculum.vocationalResultsModules.length==0 && vocationalResultsCurriculum.extraCurriculaVocationalResultsModules && vocationalResultsCurriculum.extraCurriculaVocationalResultsModules.length === 0"> <span>{{\'student.result.missing\' | translate}}</span> </div>'),a.put("student/templates/view.results.vocational.orderofpassing.tmpl.html","<div ng-if=\"vocationalResultsPassing && vocationalResultsPassing.length!=0\"> <md-table-container> <table md-table class=\"secondary-table\"> <thead md-head> <tr md-row> <th md-column>{{'student.result.moduleTheme' | translate}}</th> <th md-column></th> <th md-column>{{'student.result.grade' | translate}}</th> <th md-column>{{'student.result.date' | translate}}</th> <th md-column>{{auth.higher ? ('student.result.teacherHigher' | translate) : ('student.result.teacherVocational' | translate)}}</th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat=\"row in vocationalResultsPassing | orderBy: '-date'\" ng-class-odd=\"'odd'\" ng-class-even=\"'even'\"> <td md-cell> <span ng-if=\"row.isApel\" class=\"apelAsterisk\">*</span> <span ng-class=\"row.isModule ? 'md-body-2 bold' : ''\"> <span ng-if=\"row.isModule\">M: </span> <span>{{currentLanguageNameField(row.name)}}</span> </span> <span ng-if=\"row.isInformal\"> - {{'student.result.informal' | translate}}</span> </td> <td md-cell> <span ng-if=\"row.entryType\">{{currentLanguageNameField(row.entryType)}}</span> <span ng-if=\"row.isPractice\">{{'student.result.practice' | translate}}</span> </td> <td md-cell> <span ng-class=\"row.isModule ? 'md-body-2 bold' : ''\"> <span ng-class=\"{badResult: !gradeUtil.isPositive(row.grade.code)}\">{{row.grade.value}}</span> </span> </td> <td md-cell>{{row.date | hoisDate}}</td> <td md-cell>{{row.teachers}}</td> </tr> </tbody> </table> </md-table-container> </div> <div ng-if=\"vocationalResultsPassing && vocationalResultsPassing.length==0\"> <span>{{'student.result.missing' | translate}}</span> </div>"),a.put("student/templates/view.results.vocational.orderofstudyyear.tmpl.html",'<div ng-repeat="studyYearResult in vocationalResultsStudyYear"> <hois-collapsable label="currentLanguageNameField(studyYearResult.studyYear) + \' \' + (\'studyYear.label\' | translate)" expanded="false"> <md-table-container> <table md-table class="secondary-table"> <thead md-head> <tr md-row> <th md-column>{{\'student.result.name\' | translate}}</th> <th md-column></th> <th md-column>{{\'student.result.grade\' | translate}}</th> <th md-column>{{\'student.result.date\' | translate}}</th> <th md-column>{{auth.higher ? (\'student.result.teacherHigher\' | translate) : (\'student.result.teacherVocational\' | translate)}}</th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="row in studyYearResult.results" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell> <span ng-if="row.isApel" class="apelAsterisk">*</span> <span ng-class="row.isModule ? \'md-body-2 bold\' : \'\'"> <span ng-if="row.isModule">M: </span> <span>{{currentLanguageNameField(row.name)}}</span> </span> <span ng-if="row.isInformal"> - {{\'student.result.informal\' | translate}}</span> </td> <td md-cell> <span ng-if="row.entryType">{{currentLanguageNameField(row.entryType)}}</span> <span ng-if="row.isPractice">{{\'student.result.practice\' | translate}}</span> </td> <td md-cell> <span ng-class="row.isModule ? \'md-body-2 bold\' : \'\'"> <span ng-class="{badResult: !gradeUtil.isPositive(row.grade.code)}">{{row.grade.value}}</span> </span> </td> <td md-cell>{{row.date | hoisDate}}</td> <td md-cell>{{row.teachers}}</td> </tr> </tbody> </table> </md-table-container> <!-- \r\n    <div class="md-body-2 bold" layout="row">\r\n      <div>{{\'student.result.totalCredits\' | translate}}: {{studyYearResult.credits}}</div>\r\n      <div>{{\'student.result.kkh\' | translate}}: {{studyYearResult.kkh.toFixed(2)}}</div>\r\n    </div>\r\n    --> <br><br> </hois-collapsable> </div> <div ng-if="vocationalResultsStudyYear && vocationalResultsStudyYear.length==0"> <span>{{\'student.result.missing\' | translate}}</span> </div>'),a.put("student/templates/view.results.vocational.tmpl.html",'<div layout-padding ng-cloak class="form-readonly"> <div> <div layout="row" layout-xs="column" flex> <div flex="90"> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex> <label>{{\'student.label\' | translate}}</label> <hois-value value="student.person.firstname + \' \' + student.person.lastname"></hois-value> </md-input-container> <md-input-container flex flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'student.idcode\' | translate}}</label> <hois-value value="student.person.idcode"></hois-value> </md-input-container> <md-input-container flex flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'student.studyForm\' | translate}}</label> <hois-classifier-value ng-model="student.studyForm" main-classifier-code="OPPEVORM"></hois-classifier-value> </md-input-container> </div> </div> </div> <div layout="row" layout-xs="column" flex> <div flex="90"> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex> <label>{{\'student.curriculum\' | translate}}</label> <hois-value value="currentLanguageNameField(student.curriculumVersion)"></hois-value> </md-input-container> <md-input-container flex flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'student.result.curriculumCredits\' | translate}}</label> <hois-value value="student.curriculumCredits != null ? student.curriculumCredits + \' EKAP\' : \'\'"></hois-value> </md-input-container> <md-input-container flex flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'student.result.totalCredits\' | translate}}</label> <hois-value value="student.credits != null ? student.credits + \' EKAP\' : \'\'"></hois-value> </md-input-container> <md-input-container flex flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'student.result.kkh\' | translate}}</label> <hois-value value="student.kkh"></hois-value> </md-input-container> <md-input-container flex flex-offset="5" flex-offset-xs="0" flex-offset-sm="0"> <label>{{\'student.result.curriculumFulfilled\' | translate}}</label> <hois-value value="isStudentCurriculumFulfilled(student) ? (\'student.result.fulfilled\' | translate) : (\'student.result.notFulfilled\' | translate)"></hois-value> </md-input-container> </div> </div> </div> <div ng-controller="StudentViewResultsVocationalController as controller" ng-cloak> <md-content style="overflow: visible"> <md-table-container> <md-nav-bar md-selected-nav-item="resultsCurrentNavItem" nav-bar-aria-label="results selection" layout-margin> <md-nav-item md-nav-click="changeResultsCurrentNavItem(\'student.curriculumFulfillment\')" name="student.curriculumFulfillment"> {{\'student.result.curriculumFulfillment\' | translate}} </md-nav-item> <md-nav-item md-nav-click="changeResultsCurrentNavItem(\'student.inOrderOfStudyYear\')" name="student.inOrderOfStudyYear"> {{\'student.result.inOrderOfStudyYear\' | translate}} </md-nav-item> <md-nav-item md-nav-click="changeResultsCurrentNavItem(\'student.inOrderOfPassing\')" name="student.inOrderOfPassing"> {{\'student.result.inOrderOfPassing\' | translate}} </md-nav-item> <md-nav-item ng-if="canWatchStudentConnectedEntities" md-nav-click="changeResultsCurrentNavItem(\'student.journalsAndProtocols\')" name="student.journalsAndProtocols"> {{\'student.result.journalsAndProtocols\' | translate}} </md-nav-item> <md-nav-item ng-if="canChangeStudentModules" md-nav-click="changeResultsCurrentNavItem(\'student.changeModules\')" name="student.changeModules"> {{\'student.result.changeModules\' | translate}} </md-nav-item> </md-nav-bar> </md-table-container> <div layout-margin> <div ng-show="resultsCurrentNavItem === \'student.curriculumFulfillment\'"> <div ng-include="\'student/templates/view.results.vocational.curriculumfulfillment.tmpl.html\'"></div> </div> <div ng-show="resultsCurrentNavItem === \'student.inOrderOfStudyYear\'"> <div ng-include="\'student/templates/view.results.vocational.orderofstudyyear.tmpl.html\'"></div> </div> <div ng-show="resultsCurrentNavItem === \'student.inOrderOfPassing\'"> <div ng-include="\'student/templates/view.results.vocational.orderofpassing.tmpl.html\'"></div> </div> <div ng-if="canWatchStudentConnectedEntities" ng-show="resultsCurrentNavItem === \'student.journalsAndProtocols\'"> <div ng-include="\'student/templates/journals.and.protocols.tmpl.html\'"></div> </div> <div ng-if="canChangeStudentModules" ng-show="resultsCurrentNavItem === \'student.changeModules\'"> <div ng-include="\'student/templates/change.modules.tmpl.html\'"></div> </div> </div> </md-content> </div> </div> </div>'),a.put("studyMaterial/templates/journal.material.edit.tmpl.html",'<fieldset> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'studyMaterial.label\' | translate}}</legend> <div layout="row" style="overflow: auto" layout-xs="column"> <md-button class="md-button md-raised" ng-href="/#/studyMaterial/vocational/{{journal.id}}/new">{{\'main.button.create\' | translate}}</md-button> <div class="middle-text">{{\'studyMaterial.orChooseExisting\' | translate}}</div> <hois-autocomplete flex ng-model="$parent.$parent.existingMaterial" method="studyMaterials" name="existingMaterial" label="studyMaterial.name" additional-query-params="{teacher: auth.teacher, journal: journal.id}" no-paging="true"></hois-autocomplete> <md-button class="md-button md-raised" ng-click="addExisting()" ng-disabled="!existingMaterial">{{\'main.button.add\' | translate}}</md-button> </div> <md-table-container> <table md-table class="secondary-table"> <thead md-head> <tr md-row> <th md-column>{{\'studyMaterial.type\' | translate}}</th> <th md-column>{{\'studyMaterial.name\' | translate}}</th> <th md-column>{{\'studyMaterial.fileorlink\' | translate}}</th> <th md-column>{{\'studyMaterial.isVisibleToStudents\' | translate}}</th> <th md-column>{{\'studyMaterial.isPublic\' | translate}}</th> <th md-column>{{\'studyMaterial.journalCount\' | translate}}</th> <th md-column></th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="material in materials | orderBy: \'id\'" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell>{{currentLanguageNameField(material.typeCode)}}</td> <td md-cell> <a ng-href="/#/studyMaterial/vocational/{{journal.id}}/edit/{{material.id}}">{{currentLanguageNameField(material)}}</a> </td> <td md-cell ng-if="material.typeCode.code === \'OPPEMATERJAL_F\'"> <div layout="row" flex> <div>{{material.oisFile.fname}}</div> <div flex> <a ng-href="{{getFileUrl(material.oisFile, \'studymaterial\')}}" target="_blank" rel="noopener noreferrer"> <md-icon md-font-set="material-icons">file_download</md-icon> </a> </div> </div> </td> <td md-cell ng-if="material.typeCode.code === \'OPPEMATERJAL_L\'"> <a ng-href="{{material.url | hoisUrl}}" target="_blank" rel="noopener noreferrer">{{material.url}}</a> </td> <td md-cell> <md-checkbox ng-model="material.isVisibleToStudents" aria-label="isVisibleToStudents" disabled></md-checkbox> </td> <td md-cell> <md-checkbox ng-model="material.isPublic" aria-label="isVisibleToStudents" disabled></md-checkbox> </td> <td md-cell>{{material.journalCount}}</td> <td md-cell> <a class="remove nomargin" ng-click="deleteConnection(material.connect, material.journalCount)">&times;</a> </td> </tr> </tbody> </table> </md-table-container> </fieldset>'),a.put("studyMaterial/templates/journal.material.view.tmpl.html",'<fieldset> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'studyMaterial.label\' | translate}}</legend> <md-table-container> <table md-table class="secondary-table"> <thead md-head> <tr md-row> <th md-column>{{\'studyMaterial.type\' | translate}}</th> <th md-column>{{\'studyMaterial.name\' | translate}}</th> <th md-column>{{\'studyMaterial.fileorlink\' | translate}}</th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="material in materials | orderBy: \'id\'" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell>{{currentLanguageNameField(material.typeCode)}}</td> <td md-cell>{{currentLanguageNameField(material)}}</td> <td md-cell ng-if="material.typeCode.code === \'OPPEMATERJAL_F\'"> <div layout="row" flex> <div>{{material.oisFile.fname}}</div> <div flex> <a ng-href="{{getFileUrl(material.oisFile, \'studymaterial\')}}" target="_blank" rel="noopener noreferrer"> <md-icon md-font-set="material-icons">file_download</md-icon> </a> </div> </div> </td> <td md-cell ng-if="material.typeCode.code === \'OPPEMATERJAL_L\'"> <a ng-href="{{material.url | hoisUrl}}" target="_blank" rel="noopener noreferrer">{{material.url}}</a> </td> </tr> </tbody> </table> </md-table-container> </fieldset>'),a.put("studyMaterial/templates/subjectStudyPeriod.material.edit.tmpl.html",'<fieldset> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'studyMaterial.label\' | translate}}</legend> <div layout="row"> <md-button class="md-button md-raised" ng-href="/#/studyMaterial/higher/{{subjectStudyPeriod.id}}/new">{{\'main.button.create\' | translate}}</md-button> <div class="middle-text">{{\'studyMaterial.orChooseExisting\' | translate}}</div> <hois-autocomplete flex ng-model="$parent.existingMaterial" method="studyMaterials" name="existingMaterial" label="studyMaterial.name" additional-query-params="{teacher: auth.teacher, subjectStudyPeriod: subjectStudyPeriod.id}" no-paging="true"></hois-autocomplete> <md-button class="md-button md-raised" ng-click="addExisting()" ng-disabled="!existingMaterial">{{\'main.button.add\' | translate}}</md-button> </div> <md-table-container> <table md-table class="secondary-table"> <thead md-head> <tr md-row> <th md-column>{{\'studyMaterial.type\' | translate}}</th> <th md-column>{{\'studyMaterial.name\' | translate}}</th> <th md-column>{{\'studyMaterial.fileorlink\' | translate}}</th> <th md-column>{{\'studyMaterial.isVisibleToStudents\' | translate}}</th> <th md-column>{{\'studyMaterial.isPublic\' | translate}}</th> <th md-column>{{\'studyMaterial.journalCount\' | translate}}</th> <th md-column></th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="material in materials | orderBy: \'id\'" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell>{{currentLanguageNameField(material.typeCode)}}</td> <td md-cell> <a ng-href="/#/studyMaterial/higher/{{subjectStudyPeriod.id}}/edit/{{material.id}}">{{currentLanguageNameField(material)}}</a> </td> <td md-cell ng-if="material.typeCode.code === \'OPPEMATERJAL_F\'"> <div layout="row" flex> <div>{{material.oisFile.fname}}</div> <div flex> <a ng-href="{{getFileUrl(material.oisFile, \'studymaterial\')}}" target="_blank" rel="noopener noreferrer"> <md-icon md-font-set="material-icons">file_download</md-icon> </a> </div> </div> </td> <td md-cell ng-if="material.typeCode.code === \'OPPEMATERJAL_L\'"> <a ng-href="{{material.url | hoisUrl}}" target="_blank" rel="noopener noreferrer">{{material.url}}</a> </td> <td md-cell> <md-checkbox ng-model="material.isVisibleToStudents" aria-label="isVisibleToStudents" disabled></md-checkbox> </td> <td md-cell> <md-checkbox ng-model="material.isPublic" aria-label="isVisibleToStudents" disabled></md-checkbox> </td> <td md-cell>{{material.journalCount}}</td> <td md-cell> <a class="remove nomargin" ng-click="deleteConnection(material.connect, material.journalCount)">&times;</a> </td> </tr> </tbody> </table> </md-table-container> </fieldset>'),a.put("studyMaterial/templates/subjectStudyPeriod.material.view.tmpl.html",'<fieldset> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'studyMaterial.label\' | translate}}</legend> <md-table-container> <table md-table class="secondary-table"> <thead md-head> <tr md-row> <th md-column>{{\'studyMaterial.type\' | translate}}</th> <th md-column>{{\'studyMaterial.name\' | translate}}</th> <th md-column>{{\'studyMaterial.fileorlink\' | translate}}</th> <th md-column></th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="material in materials | orderBy: \'id\'" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell>{{currentLanguageNameField(material.typeCode)}}</td> <td md-cell>{{currentLanguageNameField(material)}}</td> <td md-cell ng-if="material.typeCode.code === \'OPPEMATERJAL_F\'"> <div layout="row" flex> <div>{{material.oisFile.fname}}</div> <div flex> <a ng-href="{{getFileUrl(material.oisFile, \'studymaterial\')}}" target="_blank" rel="noopener noreferrer"> <md-icon md-font-set="material-icons">file_download</md-icon> </a> </div> </div> </td> <td md-cell ng-if="material.typeCode.code === \'OPPEMATERJAL_L\'"> <a ng-href="{{material.url | hoisUrl}}" target="_blank" rel="noopener noreferrer">{{material.url}}</a> </td> </tr> </tbody> </table> </md-table-container> </fieldset>'),a.put("subjectProgram/dialog/subject.program.reject.dialog.html",'<md-dialog aria-label="reject dialog" flex="60" flex-xs="100"> <form name="dialogForm" ng-cloak> <md-dialog-content> <div class="ois-form-layout-padding nomargin" layout="column" ng-cloak> <p class="md-body-1">{{\'subjectProgram.operation.reject.message\' | translate}}</p> <md-input-container flex> <label>{{\'subjectProgram.rejectInfo\' | translate}}</label> <textarea ng-model="rejectInfo" md-maxlength="4000" max-rows="10" required></textarea> </md-input-container> </div> </md-dialog-content> <span flex></span> <md-dialog-actions layout="row" layout-align="start center"> <md-button class="md-raised md-primary" ng-click="rejectProgram()">{{"subjectProgram.operation.reject.label" | translate}}</md-button> <md-button class="md-raised" ng-click="cancel()">{{"main.button.close" | translate}}</md-button> </md-dialog-actions> </form> </md-dialog>'),a.put("subjectStudyPeriod/studentGroup/subject.study.period.student.group.edit.html",'<div class="ois-form-layout-padding" ng-cloak> <form name="subjectStudyPeriodStudentGroupEditForm"> <div layout="column"> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container ng-if="!isEditing" flex="25" flex-sm="100" flex-xs="100" class="readonly top-margin"> <label>{{\'subjectStudyPeriod.studyPeriod\' | translate}}</label> <hois-value value="currentLanguageNameField(studyPeriod)"></hois-value> </md-input-container> <md-input-container ng-if="isEditing" flex="25" flex-sm="100" flex-xs="100"> <label>{{\'subjectStudyPeriod.studyPeriod\' | translate}}</label> <hois-select ng-model="record.studyPeriod" values="studyPeriods" required></hois-select> </md-input-container> <md-input-container ng-if="isEditing" flex="25" flex-sm="100" flex-xs="100" flex-offset-xs="0" flex-offset-sm="0" flex-offset="5"> <label>{{\'subjectStudyPeriod.studentGroup\' | translate}}</label> <md-select ng-model="record.studentGroup" required> <md-option ng-value="option.id" ng-repeat="option in studentGroups"> {{ option.code }} </md-option> </md-select> </md-input-container> <md-input-container ng-if="!isEditing" flex="25" flex-sm="100" flex-xs="100" flex-offset-xs="0" flex-offset-sm="0" flex-offset="5" class="readonly top-margin"> <label>{{\'subjectStudyPeriod.studentGroup\' | translate}}</label> <hois-value value="studentGroup.code"></hois-value> </md-input-container> <md-input-container class="readonly top-margin" flex="25" flex-sm="100" flex-xs="100" flex-offset-xs="0" flex-offset-sm="0" flex-offset="5"> <label>{{\'subjectStudyPeriod.course\' | translate}}</label> <hois-value value="course"></hois-value> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column" class="form-readonly"> <md-input-container flex="25" flex-sm="100" flex-xs="100"> <label>{{\'subjectStudyPeriod.curriculum\' | translate}}</label> <hois-value value="curriculum.code + \' - \' + currentLanguageNameField(curriculum)"></hois-value> </md-input-container> <md-input-container flex="25" flex-sm="100" flex-xs="100" flex-offset-xs="0" flex-offset-sm="0" flex-offset="5"> <label>{{\'subjectStudyPeriod.curriculumStudyPeriod.label\' | translate}}</label> <hois-value value="\'subjectStudyPeriod.curriculumStudyPeriod.value\' | translate:curriculumStudyPeriod"></hois-value> </md-input-container> </div> <div flex="70" layout="row" class="common-label" md-colors="{color: \'background-400\'}"> <span ng-repeat="capacity in capacityTypes"> <span ng-if="!$first">|</span> {{capacity.value.toUpperCase()}} - {{currentLanguageNameField(capacity)}} </span> </div> <div>&nbsp;</div> <md-table-container> <table class="subject-study-period"> <thead> <tr> <th> <span>{{\'subjectStudyPeriod.subjects\' | translate}}</span> <a ng-href="#/subjectStudyPeriod/new?studentGroupId={{record.studentGroup}}&studyPeriodId={{record.studyPeriod}}" ng-if="record.studentGroup">{{\'subjectStudyPeriod.addSubjects\' | translate}}</a> </th> <th ng-repeat="capacityType in capacityTypes">{{capacityType.value.toUpperCase()}}</th> <th>{{\'subjectStudyPeriod.overall\' | translate}}</th> </tr> </thead> <tbody ng-repeat="subject in record.subjects"> <tr> <td> <span class="bold">{{currentLanguageNameField(subject)}}</span> <a ng-href="#/subjectStudyPeriod/new?subjectId={{subject.id}}&studentGroupId={{record.studentGroup}}&studyPeriodId={{record.studyPeriod}}">{{\'subjectStudyPeriod.addTeachers\' | translate}}</a> </td> <td ng-repeat="type in capacityTypes">{{capacitiesUtil.getSubjectsCapacityByType(subject.id, type.code)}}</td> <td class="bold">{{capacitiesUtil.getSubjectsTotalCapacity(subject.id, capacityTypes)}}</td> </tr> <tr ng-repeat="ssp in record.subjectStudyPeriodDtos | filter:{ subject: subject.id }"> <td> <span ng-repeat="teacher in ssp.teachers" ng-class="{\'invalid\': !capacitiesUtil.teachersLoadOk(ssp)}"> <span ng-if="$index > 0">, </span> {{teacher.name}} </span> <span ng-if="ssp.groupProportion !== \'PAEVIK_GRUPI_JAOTUS_1\'"> <span class="subject-study-period-proportion">{{\'subjectStudyPeriod.proportion\' | translate | lowercase}}: <hois-classifier-value ng-model="ssp.groupProportion" main-classifier-code="PAEVIK_GRUPI_JAOTUS"></hois-classifier-value> </span> </span> <a ng-href="#/subjectStudyPeriod/{{ssp.id}}/edit?studentGroupId={{record.studentGroup}}">{{\'main.button.change\' | translate}}</a> </td> <td ng-repeat="type in capacityTypes"> <span ng-repeat="capacity in ssp.capacities | filter:{ capacityType: type.code } : true"> <input type="number" ng-model="capacity.hours" min="0" max="1000" aria-label="{{\'subjectStudyPeriod.changeLoad\' | translate}}" pattern="^\\d+$"> </span> </td> <td class="bold">{{capacitiesUtil.capacitiesSumBySsp(ssp)}}</td> </tr> <tr> <td>{{\'subjectStudyPeriod.overall\' | translate}}</td> <td ng-repeat="type in capacityTypes">{{capacitiesUtil.capacitiesSumBySubjectAndType(subject.id, type.code)}}</td> <td class="bold">{{capacitiesUtil.capacitiesSumBySubject(subject.id)}}</td> </tr> </tbody> <tr class="bold" md-colors="{background: \'background-200\'}"> <td>{{\'subjectStudyPeriod.overall\' | translate | uppercase}}</td> <td ng-repeat="type in capacityTypes">{{capacitiesUtil.capacitiesSumByType(type.code)}}</td> <td>{{capacitiesUtil.capacitiesSumOverall()}}</td> </tr> </table> </md-table-container> <br> </div> <div layout="row"> <md-button class="md-raised md-primary" ng-click="save()">{{\'main.button.save\' | translate}}</md-button> <a ng-if="!isEditing" ng-href="{{excel(formState.xlsUrl, container)}}" target="_blank" class="md-button md-raised">{{\'main.button.print\' | translate}}</a> <md-button class="md-raised" ng-click="back(\'#/subjectStudyPeriods/studentGroups\', subjectStudyPeriodStudentGroupEditForm)">{{\'main.button.back\' | translate}}</md-button> </div> </form> </div>'),a.put("subjectStudyPeriod/studentGroup/subject.study.period.student.group.search.html",'<md-nav-bar md-selected-nav-item="currentNavItem" aria-label="{{\'subjectStudyPeriod.label.options\' | translate}}"> <md-nav-item md-nav-href="#/subjectStudyPeriods/studentGroups?_menu" name="studentGroups">{{\'subjectStudyPeriod.label.studentGroups\' | translate}}</md-nav-item> <md-nav-item md-nav-href="#/subjectStudyPeriods/teachers?_menu" name="teachers">{{\'subjectStudyPeriod.label.teachers\' | translate}}</md-nav-item> <md-nav-item md-nav-href="#/subjectStudyPeriods/subjects?_menu" name="subjects">{{\'subjectStudyPeriod.label.subjects\' | translate}}</md-nav-item> </md-nav-bar> <div class="ois-form-layout-padding ois-form-layout" ng-cloak> <fieldset> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'main.searchlabel\' | translate}}</legend> <form name="searchForm" ng-submit="load()" layout="column" novalidate> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="50" flex-sm="100" flex-xs="100"> <label>{{\'subjectStudyPeriod.studyPeriod\' | translate}}</label> <hois-select ng-model="criteria.studyPeriod" values="studyPeriods" required></hois-select> </md-input-container> <md-input-container flex="50" flex-sm="100" flex-xs="100" flex-offset-xs="0" flex-offset-sm="0" flex-offset="5"> <label>{{\'subjectStudyPeriod.department\' | translate}}</label> <hois-school-department-select ng-model="criteria.department"></hois-school-department-select> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="50" flex-sm="100" flex-xs="100"> <label>{{\'subjectStudyPeriod.curriculum\' | translate}}</label> <md-select ng-model="criteria.curriculum"> <md-option ng-value="null"> </md-option> <md-option ng-value="option.id" ng-repeat="option in curricula | filter: filterCurriculums | orderBy: currentLanguageNameField()"> {{option.code}} - {{currentLanguageNameField(option)}} </md-option> </md-select> </md-input-container> <md-input-container flex="50" flex-sm="100" flex-xs="100" flex-offset-xs="0" flex-offset-sm="0" flex-offset="5"> <label>{{\'subjectStudyPeriod.studentGroup\' | translate}}</label> <md-select ng-model="criteria.studentGroup"> <md-option ng-value="null"> </md-option> <md-option ng-value="option.id" ng-repeat="option in studentGroups | filter: filterStudentGroups | orderBy: currentLanguageNameField()"> {{currentLanguageNameField(option)}} </md-option> </md-select> </md-input-container> </div> <div layout="row"> <md-button type="submit" class="md-raised md-primary">{{\'main.button.search\' | translate}}</md-button> <md-button class="md-raised" ng-click="clearCriteria()">{{\'main.button.clear\' | translate}}</md-button> <md-button class="md-raised" ng-if="canEdit" href="#/subjectStudyPeriods/studentGroups/new">{{\'main.button.create\' | translate}}</md-button> <a ng-href="{{excel(formState.xlsUrl, criteria)}}" target="_blank" class="md-button md-raised">{{\'main.button.print\' | translate}}</a> </div> </form> </fieldset> </div> <div layout-padding> <div flex> <md-table-container> <table md-table md-progress="tabledata.$promise"> <thead md-head md-order="criteria.order" md-on-reorder="loadData"> <tr md-row> <th md-column md-order-by="code">{{\'subjectStudyPeriod.studentGroupCode\' | translate}}</th> <th md-column md-order-by="curriculum.{{currentLanguageNameField()}}">{{\'subjectStudyPeriod.curriculum\' | translate}}</th> <th md-column>{{\'subjectStudyPeriod.hoursTotal\' | translate}}</th> <th md-column></th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="row in tabledata.content" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell><a ng-href="#/subjectStudyPeriods/studentGroups/{{row.id}}/{{criteria.studyPeriod}}/view">{{row.code}}</a></td> <td md-cell>{{currentLanguageNameField(row.curriculum)}}</td> <td md-cell>{{row.hours}}</td> <td md-cell> <md-button md-no-ink class="md-primary change-button" ng-if="canEdit" ng-href="#/subjectStudyPeriods/studentGroups/{{row.id}}/{{criteria.studyPeriod}}/edit">{{\'main.button.change\' | translate}} </md-button> </td> </tr> </tbody> </table> </md-table-container> <md-table-pagination md-limit="criteria.size" md-limit-options="[10, 20, 50]" md-page="criteria.page" md-total="{{tabledata.totalElements}}" md-on-paginate="loadData" md-label="{page: \'{{\'main.page\' | translate}}:\', rowsPerPage: \'{{\'main.rowPerPage\' | translate}}:\', of: \'{{\'main.of\' | translate}}\'}" md-page-select></md-table-pagination> </div> </div>'),
a.put("subjectStudyPeriod/studentGroup/subject.study.period.student.group.view.html",'<div layout="column" layout-padding> <form name="subjectStudyPeriodPlanStudentGroupEditForm"> <div layout="column" class="form-readonly"> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="25" flex-sm="100" flex-xs="100"> <label>{{\'subjectStudyPeriod.studyPeriod\' | translate}}</label> <hois-value value="currentLanguageNameField(studyPeriod)"></hois-value> </md-input-container> <md-input-container ng-if="isEditing" flex="25" flex-sm="100" flex-xs="100" flex-offset-xs="0" flex-offset-sm="0" flex-offset="5"> <label>{{\'subjectStudyPeriod.studentGroup\' | translate}}</label> <md-select ng-model="record.studentGroup" required ng-disabled="studentGroupDisabled"> <md-option ng-value="option.id" ng-repeat="option in studentGroups"> {{ option.code }} </md-option> </md-select> </md-input-container> <md-input-container ng-if="!isEditing" flex="25" flex-sm="100" flex-xs="100" flex-offset-xs="0" flex-offset-sm="0" flex-offset="5"> <label>{{\'subjectStudyPeriod.studentGroup\' | translate}}</label> <hois-value value="studentGroup.code"></hois-value> </md-input-container> <md-input-container flex="25" flex-sm="100" flex-xs="100" flex-offset-xs="0" flex-offset-sm="0" flex-offset="5"> <label>{{\'subjectStudyPeriod.course\' | translate}}</label> <hois-value value="course"></hois-value> </md-input-container> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="25" flex-sm="100" flex-xs="100"> <label>{{\'subjectStudyPeriod.curriculum\' | translate}}</label> <hois-value value="curriculum.code + \' - \' + currentLanguageNameField(curriculum)"></hois-value> </md-input-container> <md-input-container flex="25" flex-sm="100" flex-xs="100" flex-offset-xs="0" flex-offset-sm="0" flex-offset="5"> <label>{{\'subjectStudyPeriod.curriculumStudyPeriod.label\' | translate}}</label> <hois-value value="\'subjectStudyPeriod.curriculumStudyPeriod.value\' | translate:curriculumStudyPeriod"></hois-value> </md-input-container> </div> <div flex="70" layout="row" class="common-label" md-colors="{color: \'background-400\'}"> <span ng-repeat="capacity in capacityTypes"> <span ng-if="!$first">|</span> {{capacity.value.toUpperCase()}} - {{currentLanguageNameField(capacity)}} </span> </div> <div>&nbsp;</div> <md-table-container> <table class="subject-study-period"> <thead> <tr> <th> <span>{{\'subjectStudyPeriod.subjects\' | translate}}</span> </th> <th ng-repeat="capacityType in capacityTypes">{{capacityType.value.toUpperCase()}}</th> <th>{{\'subjectStudyPeriod.overall\' | translate}}</th> </tr> </thead> <tbody ng-repeat="subject in record.subjects"> <tr> <td class="bold"> <span>{{currentLanguageNameField(subject)}}</span> </td> <td ng-repeat="type in capacityTypes">{{capacitiesUtil.getSubjectsCapacityByType(subject.id, type.code)}}</td> <td>{{capacitiesUtil.getSubjectsTotalCapacity(subject.id, capacityTypes)}}</td> </tr> <tr ng-repeat="ssp in record.subjectStudyPeriodDtos | filter:{ subject: subject.id }"> <td> <span ng-repeat="teacher in ssp.teachers"> <span ng-if="$index > 0">, </span> {{teacher.name}} </span> <span ng-if="ssp.groupProportion !== \'PAEVIK_GRUPI_JAOTUS_1\'"> <span class="subject-study-period-proportion">{{\'subjectStudyPeriod.proportion\' | translate | lowercase}}: <hois-classifier-value ng-model="ssp.groupProportion" main-classifier-code="PAEVIK_GRUPI_JAOTUS"></hois-classifier-value> </span> </span> </td> <td ng-repeat="type in capacityTypes"> <span ng-repeat="capacity in ssp.capacities | filter:{ capacityType: type.code } : true"> <span>{{capacity.hours}}</span> </span> </td> <td>{{capacitiesUtil.capacitiesSumBySsp(ssp)}}</td> </tr> <tr> <td>{{\'subjectStudyPeriod.overall\' | translate}}</td> <td ng-repeat="type in capacityTypes">{{capacitiesUtil.capacitiesSumBySubjectAndType(subject.id, type.code)}}</td> <td>{{capacitiesUtil.capacitiesSumBySubject(subject.id)}}</td> </tr> </tbody> <tr class="bold" md-colors="{background: \'background-200\'}"> <td>{{\'subjectStudyPeriod.overall\' | translate | uppercase}}</td> <td ng-repeat="type in capacityTypes">{{capacitiesUtil.capacitiesSumByType(type.code)}}</td> <td>{{capacitiesUtil.capacitiesSumOverall()}}</td> </tr> </table> </md-table-container> <br> </div> <div layout="row"> <md-button ng-if="!readOnly" class="md-raised md-primary" ng-href="#/subjectStudyPeriods/studentGroups/{{record.studentGroup}}/{{studyPeriod.id}}/edit?_noback">{{\'main.button.change\' | translate}}</md-button> <a ng-if="auth.isAdmin() || auth.isTeacher()" ng-href="{{excel(formState.xlsUrl, container)}}" target="_blank" class="md-button md-raised">{{\'main.button.print\' | translate}}</a> <md-button class="md-raised" ng-click="back(\'#/subjectStudyPeriods/studentGroups\')">{{\'main.button.back\' | translate}}</md-button> </div> </form> </div>'),a.put("subjectStudyPeriod/subject/subject.study.period.subject.edit.html",'<div layout="column" layout-padding> <form name="subjectStudyPeriodSubjectEditForm"> <div layout="column" class="form-readonly"> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container ng-if="isNew" flex="25" flex-sm="100" flex-xs="100"> <label>{{\'subjectStudyPeriod.studyPeriod\' | translate}}</label> <hois-select ng-model="record.studyPeriod" values="studyPeriods" required></hois-select> </md-input-container> <md-input-container ng-if="!isNew" flex="25" flex-sm="100" flex-xs="100"> <label>{{\'subjectStudyPeriod.studyPeriod\' | translate}}</label> <hois-value value="currentLanguageNameField(studyPeriod)"></hois-value> </md-input-container> <md-input-container ng-if="isNew" flex="25" flex-sm="100" flex-xs="100" flex-offset-xs="0" flex-offset-sm="0" flex-offset="5"> <label>{{\'subjectStudyPeriod.subject\' | translate}}</label> <hois-select ng-model="record.subject" values="subjects" required></hois-select> </md-input-container> <md-input-container ng-if="!isNew" flex="25" flex-sm="100" flex-xs="100" flex-offset-xs="0" flex-offset-sm="0" flex-offset="5"> <label>{{\'subjectStudyPeriod.subject\' | translate}}</label> <hois-value value="subject.nameEt"></hois-value> </md-input-container> </div> <div flex="70" layout="row" class="common-label" md-colors="{color: \'background-400\'}"> <span ng-repeat="capacity in capacityTypes"> <span ng-if="!$first">|</span> {{capacity.value.toUpperCase()}} - {{currentLanguageNameField(capacity)}} </span> </div> <div>&nbsp;</div> <md-table-container> <table class="subject-study-period"> <thead> <tr> <th> <span>{{\'subjectStudyPeriod.teacher\' | translate}}</span> <a ng-href="#/subjectStudyPeriod/new?subjectId={{record.subject}}&studyPeriodId={{record.studyPeriod}}" ng-if="record.subject">{{\'subjectStudyPeriod.addTeachers\' | translate}}</a> </th> <th ng-repeat="capacityType in capacityTypes">{{capacityType.value.toUpperCase()}}</th> <th>{{\'subjectStudyPeriod.overall\' | translate}}</th> </tr> </thead> <tbody> <tr ng-repeat="ssp in record.subjectStudyPeriodDtos | filter:{ subject: subject.id }"> <td> <span ng-repeat="teacher in ssp.teachers" ng-class="{\'invalid\': !capacitiesUtil.teachersLoadOk(ssp)}"> <span ng-if="$index > 0">, </span> {{teacher.name}} </span> <span ng-show="ssp.studentGroupObjects && ssp.studentGroupObjects.length > 0"> ( <span ng-repeat="sg in ssp.studentGroupObjects"> <span ng-if="$index > 0">, </span> {{sg.nameEt}} </span> ) </span> <span ng-if="ssp.groupProportion !== \'PAEVIK_GRUPI_JAOTUS_1\'"> <span class="subject-study-period-proportion">{{\'subjectStudyPeriod.proportion\' | translate | lowercase}}: <hois-classifier-value ng-model="ssp.groupProportion" main-classifier-code="PAEVIK_GRUPI_JAOTUS"></hois-classifier-value> </span> </span> <a ng-href="#/subjectStudyPeriod/{{ssp.id}}/edit?subjectId={{record.subject}}">{{\'main.button.change\' | translate}}</a> </td> <td ng-repeat="type in capacityTypes"> <span ng-repeat="capacity in ssp.capacities | filter:{ capacityType: type.code } : true"> <input type="number" ng-model="capacity.hours" min="0" max="1000" aria-label="{{\'subjectStudyPeriod.changeLoad\' | translate}}" pattern="^\\d+$"> </span> </td> <td>{{capacitiesUtil.capacitiesSumBySsp(ssp)}}</td> </tr> </tbody> <tr class="bold" md-colors="{background: \'background-200\'}"> <td>{{\'subjectStudyPeriod.overall\' | translate | uppercase}}</td> <td ng-repeat="type in capacityTypes">{{capacitiesUtil.capacitiesSumByType(type.code)}}</td> <td>{{capacitiesUtil.capacitiesSumOverall()}}</td> </tr> </table> </md-table-container> <div>&nbsp;</div> </div> <div layout="row"> <md-button class="md-raised md-primary" ng-click="save()">{{\'main.button.save\' | translate}}</md-button> <a ng-if="!isNew" ng-href="{{excel(formState.xlsUrl, container)}}" target="_blank" class="md-button md-raised">{{\'main.button.print\' | translate}}</a> <md-button class="md-raised" ng-click="back(\'#/subjectStudyPeriods/subjects\', subjectStudyPeriodSubjectEditForm)">{{\'main.button.back\' | translate}}</md-button> </div> </form> </div>'),a.put("subjectStudyPeriod/subject/subject.study.period.subject.search.html",'<md-nav-bar md-selected-nav-item="currentNavItem" aria-label="{{\'subjectStudyPeriod.label.options\' | translate}}"> <md-nav-item md-nav-href="#/subjectStudyPeriods/studentGroups?_menu" name="studentGroups">{{\'subjectStudyPeriod.label.studentGroups\' | translate}}</md-nav-item> <md-nav-item md-nav-href="#/subjectStudyPeriods/teachers?_menu" name="teachers">{{\'subjectStudyPeriod.label.teachers\' | translate}}</md-nav-item> <md-nav-item md-nav-href="#/subjectStudyPeriods/subjects?_menu" name="subjects">{{\'subjectStudyPeriod.label.subjects\' | translate}}</md-nav-item> </md-nav-bar> <div class="ois-form-layout-padding ois-form-layout" ng-cloak> <fieldset> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'main.searchlabel\' | translate}}</legend> <form name="searchForm" ng-submit="load()" layout="column" novalidate> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="25" flex-sm="100" flex-xs="100"> <label>{{\'subjectStudyPeriod.studyPeriod\' | translate}}</label> <hois-select ng-model="criteria.studyPeriod" values="studyPeriods" required></hois-select> </md-input-container> <hois-autocomplete flex="25" flex-sm="100" flex-xs="100" flex-offset-xs="0" flex-offset-sm="0" flex-offset="5" ng-model="criteria.teacherObject" url="/subjectStudyPeriods/teachers/page" name="teacher" label="subjectStudyPeriod.teacher"></hois-autocomplete> <hois-autocomplete flex="25" flex-sm="100" flex-xs="100" flex-offset-xs="0" flex-offset-sm="0" flex-offset="5" ng-model="criteria.subjectObject" url="/autocomplete/subjects" name="subject" label="subjectStudyPeriod.subject"></hois-autocomplete> </div> <div layout="row"> <md-button type="submit" class="md-raised md-primary">{{\'main.button.search\' | translate}}</md-button> <md-button class="md-raised" ng-click="clearCriteria()">{{\'main.button.clear\' | translate}}</md-button> <md-button class="md-raised" ng-if="canEdit" href="#/subjectStudyPeriods/subjects/new">{{\'main.button.create\' | translate}}</md-button> <a ng-href="{{excel(formState.xlsUrl, criteria)}}" target="_blank" class="md-button md-raised">{{\'main.button.print\' | translate}}</a> </div> </form> </fieldset> </div> <div layout-padding> <div flex> <md-table-container> <table md-table md-progress="tabledata.$promise"> <thead md-head md-order="criteria.order" md-on-reorder="loadData"> <tr md-row> <th md-column md-order-by="code,{{currentLanguageNameField()}}">{{\'subjectStudyPeriod.nameCode\' | translate}}</th> <th md-column>{{\'subjectStudyPeriod.hoursTotal\' | translate}}</th> <th md-column>{{\'subjectStudyPeriod.teacher\' | translate}}</th> <th md-column></th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="row in tabledata.content" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell><a ng-href="#/subjectStudyPeriods/subjects/{{row.subject.id}}/{{criteria.studyPeriod}}/view">{{currentLanguageNameField(row.subject)}}</a></td> <td md-cell>{{row.hours}}</td> <td md-cell> <table> <tr ng-repeat="teacher in row.teachers | orderBy"> <td>{{teacher}}</td> </tr> </table> </td> <td md-cell> <md-button md-no-ink class="md-primary change-button" ng-if="canEdit" ng-href="#/subjectStudyPeriods/subjects/{{row.subject.id}}/{{criteria.studyPeriod}}/edit">{{\'main.button.change\' | translate}} </md-button> </td> </tr> </tbody> </table> </md-table-container> <md-table-pagination md-limit="criteria.size" md-limit-options="[10, 20, 50]" md-page="criteria.page" md-total="{{tabledata.totalElements}}" md-on-paginate="loadData" md-label="{page: \'{{\'main.page\' | translate}}:\', rowsPerPage: \'{{\'main.rowPerPage\' | translate}}:\', of: \'{{\'main.of\' | translate}}\'}" md-page-select></md-table-pagination> </div> </div>'),a.put("subjectStudyPeriod/subject/subject.study.period.subject.view.html",'<div layout="column" layout-padding> <form name="subjectStudyPeriodSubjectEditForm"> <div layout="column" class="form-readonly"> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="25" flex-sm="100" flex-xs="100"> <label>{{\'subjectStudyPeriod.studyPeriod\' | translate}}</label> <hois-value value="currentLanguageNameField(studyPeriod)"></hois-value> </md-input-container> <md-input-container flex="25" flex-sm="100" flex-xs="100" flex-offset-xs="0" flex-offset-sm="0" flex-offset="5"> <label>{{\'subjectStudyPeriod.subject\' | translate}}</label> <hois-value value="subject.nameEt"></hois-value> </md-input-container> </div> <div flex="70" layout="row" class="common-label" md-colors="{color: \'background-400\'}"> <span ng-repeat="capacity in capacityTypes"> <span ng-if="!$first">|</span> {{capacity.value.toUpperCase()}} - {{currentLanguageNameField(capacity)}} </span> </div> <div>&nbsp;</div> <md-table-container> <table class="subject-study-period"> <thead> <tr> <th> <span>{{\'subjectStudyPeriod.teacher\' | translate}}</span> </th> <th ng-repeat="capacityType in capacityTypes">{{capacityType.value.toUpperCase()}}</th> <th>{{\'subjectStudyPeriod.overall\' | translate}}</th> </tr> </thead> <tbody> <tr ng-repeat="ssp in record.subjectStudyPeriodDtos | filter:{ subject: subject.id }"> <td> <span ng-repeat="teacher in ssp.teachers" ng-class="{\'invalid\': !capacitiesUtil.teachersLoadOk(ssp)}"> <span ng-if="$index > 0">, </span> {{teacher.name}} </span> <span ng-show="ssp.studentGroupObjects && ssp.studentGroupObjects.length > 0"> ( <span ng-repeat="sg in ssp.studentGroupObjects"> <span ng-if="$index > 0">, </span> {{sg.nameEt}} </span> ) </span> <span ng-if="ssp.groupProportion !== \'PAEVIK_GRUPI_JAOTUS_1\'"> <span class="subject-study-period-proportion">{{\'subjectStudyPeriod.proportion\' | translate | lowercase}}: <hois-classifier-value ng-model="ssp.groupProportion" main-classifier-code="PAEVIK_GRUPI_JAOTUS"></hois-classifier-value> </span> </span> </td> <td ng-repeat="type in capacityTypes"> <span ng-repeat="capacity in ssp.capacities | filter:{ capacityType: type.code } : true"> <span>{{capacity.hours}}</span> </span> </td> <td>{{capacitiesUtil.capacitiesSumBySsp(ssp)}}</td> </tr> </tbody> <tr class="bold" md-colors="{background: \'background-200\'}"> <td>{{\'subjectStudyPeriod.overall\' | translate | uppercase}}</td> <td ng-repeat="type in capacityTypes">{{capacitiesUtil.capacitiesSumByType(type.code)}}</td> <td>{{capacitiesUtil.capacitiesSumOverall()}}</td> </tr> </table> </md-table-container> <div>&nbsp;</div> </div> <div layout="row"> <md-button ng-if="!readOnly" class="md-raised md-primary" ng-href="#/subjectStudyPeriods/subjects/{{subject.id}}/{{studyPeriod.id}}/edit?_noback">{{\'main.button.change\' | translate}}</md-button> <a ng-if="auth.isAdmin() || auth.isTeacher()" ng-href="{{excel(formState.xlsUrl, container)}}" target="_blank" class="md-button md-raised">{{\'main.button.print\' | translate}}</a> <md-button class="md-raised" ng-click="back(\'#/subjectStudyPeriods/subjects\')">{{\'main.button.back\' | translate}}</md-button> </div> </form> </div>'),a.put("subjectStudyPeriod/teacher/subject.study.period.teacher.edit.html",'<div layout="column" layout-padding> <form name="subjectStudyPeriodTeacherEditForm"> <div layout="column"> <div ng-if="isNew" layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="25" flex-sm="100" flex-xs="100"> <label>{{\'subjectStudyPeriod.studyPeriod\' | translate}}</label> <hois-select ng-model="record.studyPeriod" values="studyPeriods" required></hois-select> </md-input-container> <md-input-container flex="25" flex-sm="100" flex-xs="100" flex-offset-xs="0" flex-offset-sm="0" flex-offset="5"> <label>{{\'subjectStudyPeriod.teacher\' | translate}}</label> <hois-select ng-model="record.teacher" values="teachers" required></hois-select> </md-input-container> </div> <div ng-if="!isNew" layout="row" layout-sm="column" layout-xs="column" class="form-readonly"> <md-input-container flex="25" flex-sm="100" flex-xs="100"> <label>{{\'subjectStudyPeriod.studyPeriod\' | translate}}</label> <hois-value value="currentLanguageNameField(studyPeriod)"></hois-value> </md-input-container> <md-input-container flex="25" flex-sm="100" flex-xs="100" flex-offset-xs="0" flex-offset-sm="0" flex-offset="5"> <label>{{\'subjectStudyPeriod.teacher\' | translate}}</label> <hois-value value="teacher.nameEt"></hois-value> </md-input-container> </div> <div flex layout="row" layout-align="start start" class="common-label" md-colors="{color: \'background-400\'}"> <span ng-repeat="capacity in capacityTypes"> <span ng-if="$index !== 0">|</span> {{capacity.value.toUpperCase()}} - {{currentLanguageNameField(capacity)}} </span> </div> <div>&nbsp;</div> <md-table-container> <table class="subject-study-period"> <thead> <tr> <th> <span>{{\'subjectStudyPeriod.subjects\' | translate}}</span> <a ng-href="#/subjectStudyPeriod/new?teacherId={{record.teacher}}&studyPeriodId={{record.studyPeriod}}" ng-if="record.teacher">{{\'subjectStudyPeriod.addSubjects\' | translate}}</a> </th> <th ng-repeat="capacityType in capacityTypes">{{capacityType.value.toUpperCase()}}</th> <th>{{\'subjectStudyPeriod.overall\' | translate}}</th> </tr> </thead> <tbody ng-repeat="subject in record.subjects"> <tr> <td class="bold"> <span>{{currentLanguageNameField(subject)}}</span> </td> <td ng-repeat="type in capacityTypes">{{capacitiesUtil.getSubjectsCapacityByType(subject.id, type.code)}}</td> <td>{{capacitiesUtil.getSubjectsTotalCapacity(subject.id, capacityTypes)}}</td> </tr> <tr ng-repeat="ssp in record.subjectStudyPeriodDtos | filter:{ subject: subject.id }"> <td> <span ng-repeat="studentGroup in ssp.studentGroupObjects"> <span ng-if="$index > 0">, </span> {{studentGroup.nameEt}} </span> <span ng-if="ssp.groupProportion !== \'PAEVIK_GRUPI_JAOTUS_1\'"> <span class="subject-study-period-proportion">{{\'subjectStudyPeriod.proportion\' | translate | lowercase}}: <hois-classifier-value ng-model="ssp.groupProportion" main-classifier-code="PAEVIK_GRUPI_JAOTUS"></hois-classifier-value> </span> </span> <a ng-href="#/subjectStudyPeriod/{{ssp.id}}/edit?teacherId={{record.teacher}}">{{\'main.button.change\' | translate}}</a> </td> <td ng-repeat="type in capacityTypes"> <span ng-repeat="capacity in ssp.capacities | filter:{ capacityType: type.code } : true"> <input type="number" ng-model="capacity.hours" min="0" max="1000" aria-label="{{\'subjectStudyPeriod.changeLoad\' | translate}}" pattern="^\\d+$"> </span> </td> <td>{{capacitiesUtil.capacitiesSumBySsp(ssp)}}</td> </tr> <tr> <td>{{\'subjectStudyPeriod.overall\' | translate}}</td> <td ng-repeat="type in capacityTypes">{{capacitiesUtil.capacitiesSumBySubjectAndType(subject.id, type.code)}}</td> <td>{{capacitiesUtil.capacitiesSumBySubject(subject.id)}}</td> </tr> </tbody> <tr class="bold"> <td>{{\'subjectStudyPeriod.overall\' | translate | uppercase}}</td> <td ng-repeat="type in capacityTypes">{{capacitiesUtil.capacitiesSumByType(type.code)}}</td> <td>{{capacitiesUtil.capacitiesSumOverall()}}</td> </tr> </table> </md-table-container> <div>&nbsp;</div> </div> <div layout="row"> <md-button class="md-raised md-primary" ng-click="save()">{{\'main.button.save\' | translate}}</md-button> <a ng-if="!isNew" ng-href="{{excel(formState.xlsUrl, container)}}" target="_blank" class="md-button md-raised">{{\'main.button.print\' | translate}}</a> <md-button class="md-raised" ng-click="back(\'#/subjectStudyPeriods/teachers\', subjectStudyPeriodTeacherEditForm)">{{\'main.button.back\' | translate}}</md-button> </div> </form> </div>'),a.put("subjectStudyPeriod/teacher/subject.study.period.teacher.search.html",'<md-nav-bar md-selected-nav-item="currentNavItem" aria-label="{{\'subjectStudyPeriod.label.options\' | translate}}"> <md-nav-item md-nav-href="#/subjectStudyPeriods/studentGroups?_menu" name="studentGroups">{{\'subjectStudyPeriod.label.studentGroups\' | translate}}</md-nav-item> <md-nav-item md-nav-href="#/subjectStudyPeriods/teachers?_menu" name="teachers">{{\'subjectStudyPeriod.label.teachers\' | translate}}</md-nav-item> <md-nav-item md-nav-href="#/subjectStudyPeriods/subjects?_menu" name="subjects">{{\'subjectStudyPeriod.label.subjects\' | translate}}</md-nav-item> </md-nav-bar> <div class="ois-form-layout-padding ois-form-layout" ng-cloak> <fieldset> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'main.searchlabel\' | translate}}</legend> <form name="searchForm" ng-submit="load()" layout="column" novalidate> <div layout="row" layout-sm="column" layout-xs="column"> <md-input-container flex="50" flex-sm="100" flex-xs="100"> <label>{{\'subjectStudyPeriod.studyPeriod\' | translate}}</label> <hois-select ng-model="criteria.studyPeriod" values="studyPeriods" required></hois-select> </md-input-container> <hois-autocomplete flex="50" flex-sm="100" flex-xs="100" flex-offset-xs="0" flex-offset-sm="0" flex-offset="5" ng-model="criteria.teacherObject" url="/subjectStudyPeriods/teachers/page" name="teacher" label="subjectStudyPeriod.teacher"></hois-autocomplete> </div> <div layout="row"> <md-button type="submit" class="md-raised md-primary">{{\'main.button.search\' | translate}}</md-button> <md-button class="md-raised" ng-click="clearCriteria()">{{\'main.button.clear\' | translate}}</md-button> <md-button class="md-raised" ng-if="canEdit" href="#/subjectStudyPeriods/teachers/new">{{\'main.button.create\' | translate}}</md-button> <a ng-href="{{excel(formState.xlsUrl, criteria)}}" target="_blank" class="md-button md-raised">{{\'main.button.print\' | translate}}</a> </div> </form> </fieldset> </div> <div layout-padding> <div flex> <md-table-container> <table md-table md-progress="tabledata.$promise"> <thead md-head md-order="criteria.order" md-on-reorder="loadData"> <tr md-row> <th md-column md-order-by="person.lastname,person.firstname">{{\'subjectStudyPeriod.teacher\' | translate}}</th> <th md-column>{{\'subjectStudyPeriod.hoursTotal\' | translate}}</th> <th md-column></th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="row in tabledata.content" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell><a ng-href="#/subjectStudyPeriods/teachers/{{row.id}}/{{criteria.studyPeriod}}/view">{{row.name}}</a></td> <td md-cell>{{row.hours}}</td> <td md-cell> <md-button md-no-ink class="md-primary change-button" ng-if="canEdit" ng-href="#/subjectStudyPeriods/teachers/{{row.id}}/{{criteria.studyPeriod}}/edit"> {{\'main.button.change\' | translate}} </md-button> </td> </tr> </tbody> </table> </md-table-container> <md-table-pagination md-limit="criteria.size" md-limit-options="[10, 20, 50]" md-page="criteria.page" md-total="{{tabledata.totalElements}}" md-on-paginate="loadData" md-label="{page: \'{{\'main.page\' | translate}}:\', rowsPerPage: \'{{\'main.rowPerPage\' | translate}}:\', of: \'{{\'main.of\' | translate}}\'}" md-page-select></md-table-pagination> </div> </div>'),a.put("subjectStudyPeriod/teacher/subject.study.period.teacher.view.html",'<div layout="column" layout-padding> <form name="subjectStudyPeriodTeacherEditForm"> <div layout="column"> <div layout="row" layout-sm="column" layout-xs="column" class="form-readonly"> <md-input-container flex="25" flex-sm="100" flex-xs="100"> <label>{{\'subjectStudyPeriod.studyPeriod\' | translate}}</label> <hois-value value="currentLanguageNameField(studyPeriod)"></hois-value> </md-input-container> <md-input-container flex="25" flex-sm="100" flex-xs="100" flex-offset-xs="0" flex-offset-sm="0" flex-offset="5"> <label>{{\'subjectStudyPeriod.teacher\' | translate}}</label> <hois-value value="teacher.nameEt"></hois-value> </md-input-container> </div> <div flex="70" layout="row" class="common-label" md-colors="{color: \'background-400\'}"> <span ng-repeat="capacity in capacityTypes"> <span ng-if="!$first">|</span> {{capacity.value.toUpperCase()}} - {{currentLanguageNameField(capacity)}} </span> </div> <div>&nbsp;</div> <md-table-container> <table class="subject-study-period"> <thead> <tr> <th> <span>{{\'subjectStudyPeriod.subjects\' | translate}}</span> </th> <th ng-repeat="capacityType in capacityTypes">{{capacityType.value.toUpperCase()}}</th> <th>{{\'subjectStudyPeriod.overall\' | translate}}</th> </tr> </thead> <tbody ng-repeat="subject in record.subjects"> <tr> <td class="bold"> <span>{{currentLanguageNameField(subject)}}</span> </td> <td ng-repeat="type in capacityTypes">{{capacitiesUtil.getSubjectsCapacityByType(subject.id, type.code)}}</td> <td>{{capacitiesUtil.getSubjectsTotalCapacity(subject.id, capacityTypes)}}</td> </tr> <tr ng-repeat="ssp in record.subjectStudyPeriodDtos | filter:{ subject: subject.id }"> <td> <span ng-repeat="studentGroup in ssp.studentGroupObjects"> <span ng-if="$index > 0">, </span> {{studentGroup.nameEt}} </span> <span ng-if="ssp.groupProportion !== \'PAEVIK_GRUPI_JAOTUS_1\'"> <span class="subject-study-period-proportion">{{\'subjectStudyPeriod.proportion\' | translate | lowercase}}: <hois-classifier-value ng-model="ssp.groupProportion" main-classifier-code="PAEVIK_GRUPI_JAOTUS"></hois-classifier-value> </span> </span> </td> <td ng-repeat="type in capacityTypes"> <span ng-repeat="capacity in ssp.capacities | filter:{ capacityType: type.code } : true"> <span>{{capacity.hours}}</span> </span> </td> <td>{{capacitiesUtil.capacitiesSumBySsp(ssp)}}</td> </tr> <tr> <td>{{\'subjectStudyPeriod.overall\' | translate}}</td> <td ng-repeat="type in capacityTypes">{{capacitiesUtil.capacitiesSumBySubjectAndType(subject.id, type.code)}}</td> <td>{{capacitiesUtil.capacitiesSumBySubject(subject.id)}}</td> </tr> </tbody> <tr class="bold" md-colors="{background: \'background-200\'}"> <td>{{\'subjectStudyPeriod.overall\' | translate | uppercase}}</td> <td ng-repeat="type in capacityTypes">{{capacitiesUtil.capacitiesSumByType(type.code)}}</td> <td>{{capacitiesUtil.capacitiesSumOverall()}}</td> </tr> </table> </md-table-container> <div>&nbsp;</div> </div> <div layout="row"> <md-button class="md-raised md-primary" ng-href="#/subjectStudyPeriods/teachers/{{teacher.id}}/{{studyPeriod.id}}/edit?_noback">{{\'main.button.change\' | translate}}</md-button> <a ng-if="auth.isAdmin() || auth.isTeacher()" ng-href="{{excel(formState.xlsUrl, container)}}" target="_blank" class="md-button md-raised">{{\'main.button.print\' | translate}}</a> <md-button class="md-raised" ng-click="back(\'#/subjectStudyPeriods/teachers\')">{{\'main.button.back\' | translate}}</md-button> </div> </form> </div>'),a.put("timetable/dialog/file.import.dialog.html",'<md-dialog aria-label="file add dialog" flex="40" flex-xs="100"> <form name="dialogForm" ng-cloak> <md-toolbar> <div class="md-toolbar-tools"> <h2>{{\'timetable.management.importXml\' | translate}}</h2> <span flex></span> <md-button class="md-icon-button" ng-click="cancel()"> <md-icon md-font-set="material-icons">close</md-icon> </md-button> </div> </md-toolbar> <md-dialog-content> <span flex></span> <div class="ois-form-layout" layout="column" layout-margin ng-cloak> <div layout="column"> <md-input-container flex> <lf-ng-md-file-input name="file" lf-files="data.file" lf-browse-label="{{\'main.addFile\' | translate}}" lf-remove-label="{{\'main.button.delete\' | translate}}" lf-placeholder="" lf-required lf-filesize="10MB"> </lf-ng-md-file-input> </md-input-container> <div ng-messages="dialogForm.file.$error"> <div class="invalid" ng-message="required">{{\'main.messages.error.selectFile\' | translate}}</div> <div ng-message="filesize" class="invalid">{{\'curriculum.error.fileSize\' | translate}}</div> </div> </div> </div> </md-dialog-content> <span flex></span> <md-dialog-actions layout="row" layout-align="start center"> <md-button class="md-raised md-primary" ng-click="submit()">{{"main.button.save" | translate}}</md-button> <md-button class="md-raised" ng-click="cancel()">{{"main.button.close" | translate}}</md-button> </md-dialog-actions> </form> </md-dialog>'),a.put("timetable/generalTimetable/timetable.generalTimetable.byGroup.html",'<div ng-include="\'timetable/generalTimetable/timetable.generalTimetable.navbar.html\'"></div> <div> <div ng-if="groupTimetables"> <div layout="row" layout-sm="column" layout-xs="column" layout-margin> <md-autocomplete flex="45" flex-sm="100" flex-xs="100" md-search-text="searchText" md-min-length="1" md-items="item in getStudentGroups(searchText)" md-item-text="item.groupCode" md-selected-item-change="showGroupWeek(item.groupId)" md-floating-label="{{\'timetable.search.studentGroup\' | translate}}" md-require-match md-no-cache> <md-item-template> <span md-highlight-text="searchText">{{item.groupCode}}</span> </md-item-template> </md-autocomplete> </div> </div> <div ng-controller="GroupTimetableViewController"> <div ng-include="\'timetable/timetable.week.view.html\'"></div> </div> </div>'),a.put("timetable/generalTimetable/timetable.generalTimetable.byRoom.html",'<div ng-include="\'timetable/generalTimetable/timetable.generalTimetable.navbar.html\'"></div> <div> <div ng-if="timetablesByRooms"> <div layout="row" layout-sm="column" layout-xs="column" layout-margin> <md-autocomplete flex="45" flex-sm="100" flex-xs="100" md-search-text="searchText" md-min-length="1" md-items="item in getRooms(searchText)" md-item-text="item.code" md-selected-item-change="showRoomWeek(item.roomId)" md-floating-label="{{\'timetable.search.room\' | translate}}" md-require-match md-no-cache> <md-item-template> <span md-highlight-text="searchText">{{item.code}}</span> </md-item-template> </md-autocomplete> </div> </div> <div ng-controller="RoomTimetableViewController"> <div ng-include="\'timetable/timetable.week.view.html\'"></div> </div> </div>'),a.put("timetable/generalTimetable/timetable.generalTimetable.byTeacher.html",'<div ng-include="\'timetable/generalTimetable/timetable.generalTimetable.navbar.html\'"></div> <div> <div ng-if="timetablesByTeachers"> <div layout="row" layout-sm="column" layout-xs="column" layout-margin> <md-autocomplete flex="45" flex-sm="100" flex-xs="100" md-search-text="searchText" md-min-length="1" md-items="item in getTeachers(searchText)" md-item-text="item.firstname + \' \' + item.lastname" md-selected-item-change="showTeacherWeek(item.teacherId)" md-floating-label="{{auth.higher ? (\'timetable.search.teacherHigher\' | translate) : (\'timetable.search.teacherVocational\' | translate)}}" md-require-match md-no-cache> <md-item-template> <span md-highlight-text="searchText">{{item.firstname}} {{item.lastname}}</span> </md-item-template> </md-autocomplete> </div> </div> <div ng-controller="TeacherTimetableViewController"> <div ng-include="\'timetable/timetable.week.view.html\'"></div> </div> </div>'),a.put("timetable/generalTimetable/timetable.generalTimetable.navbar.html",'<md-nav-bar hide-xs md-selected-nav-item="currentNavItem" aria-label="{{auth.higher ? (\'timetable.optionsHigher\' | translate) : (\'timetable.optionsVocational\' | translate)}}"> <md-nav-item ng-if="auth && (auth.isStudent() || auth.isTeacher())" md-nav-href="#/timetable/personalGeneralTimetable?_menu" name="personal"> {{\'timetable.myTimetable\' | translate}}</md-nav-item> <md-nav-item ng-if="auth && auth.isParent()" md-nav-href="#/timetable/personalGeneralTimetable?_menu" name="personal"> {{\'timetable.parentTimetable\' | translate}}</md-nav-item> <md-nav-item md-nav-href="{{\'#/timetable/generalTimetableByGroup\' + (ending = auth && auth.schoolId ? \'?_menu\' : \'/\' + schoolId)}}" name="studentGroup">{{\'timetable.studentGroups\' | translate}}</md-nav-item> <md-nav-item md-nav-href="{{\'#/timetable/generalTimetableByTeacher\' + ending}}" name="teacher"> {{auth.higher ? (\'timetable.teachersHigher\' | translate) : (\'timetable.teachersVocational\' | translate)}} </md-nav-item> <md-nav-item md-nav-href="{{\'#/timetable/generalTimetableByRoom\' + ending}}" name="room">{{\'timetable.rooms\' | translate}}</md-nav-item> <md-nav-item md-nav-href="{{\'#/timetable/searchGeneralTimetable\' + ending}}" name="search"> <md-icon md-font-set="material-icons" ng-style="currentNavItem === \'search\' ? {\'color\': \'rgb(13,71,161)\'} : {\'color\': \'rgba(0,0,0,0.54)\'}">search</md-icon> </md-nav-item> </md-nav-bar> <div hide-gt-xs layout="column"> <md-button ng-if="auth && (auth.isStudent() || auth.isTeacher())" class="md-raised" flex ng-href="#/timetable/personalGeneralTimetable?_menu" ng-class="{\'md-accent\': currentNavItem === \'personal\'}" name="personal">{{\'timetable.myTimetable\' | translate}}</md-button> <md-button class="md-raised" ng-if="auth && auth.isParent()" ng-href="#/timetable/personalGeneralTimetable?_menu" ng-class="{\'md-accent\': currentNavItem === \'personal\'}" name="personal">{{\'timetable.parentTimetable\' | translate}}</md-button> <md-button class="md-raised" ng-href="{{\'#/timetable/generalTimetableByGroup\' + (ending = auth && auth.schoolId ? \'?_menu\' : \'/\' + schoolId)}}" ng-class="{\'md-accent\': currentNavItem === \'studentGroup\'}" name="studentGroup">{{\'timetable.studentGroups\' | translate}}</md-button> <md-button class="md-raised" ng-href="{{\'#/timetable/generalTimetableByTeacher\' + ending}}" ng-class="{\'md-accent\': currentNavItem === \'teacher\'}" name="teacher"> {{auth.higher ? (\'timetable.teachersHigher\' | translate) : (\'timetable.teachersVocational\' | translate)}} </md-button> <md-button class="md-raised" ng-href="{{\'#/timetable/generalTimetableByRoom\' + ending}}" ng-class="{\'md-accent\': currentNavItem === \'room\'}" name="room">{{\'timetable.rooms\' | translate}}</md-button> <md-button class="md-raised" ng-class="{\'md-accent\': currentNavItem === \'search\'}" ng-href="{{\'#/timetable/searchGeneralTimetable\' + ending}}" name="student.timetable"> <md-icon md-font-set="material-icons">search</md-icon> </md-button> </div>'),
a.put("timetable/generalTimetable/timetable.generalTimetable.personal.html",'<div ng-include="\'timetable/generalTimetable/timetable.generalTimetable.navbar.html\'"></div> <div ng-if="auth.isStudent() || auth.isParent()" ng-controller="StudentTimetableViewController"> <div ng-include="\'timetable/timetable.week.view.html\'"></div> </div> <div ng-if="auth.isTeacher()" ng-controller="TeacherTimetableViewController"> <div ng-include="\'timetable/timetable.week.view.html\'"></div> </div> <div layout-padding> <div flex> <div ng-repeat="row in timetables track by $index"> <a ng-class="{shownTimetable: $index === shownTimetableIndex}" ng-click="showTimetable(row.id, row.studyPeriodId, $index)"> {{currentLanguageNameField(row)}} {{row.startDate | hoisDate}}-{{row.endDate | hoisDate}}</a> </div> </div> </div>'),a.put("timetable/generalTimetable/timetable.generalTimetable.school.list.html",'<div layout-padding class="schoolList"> <md-grid-list md-cols="1" md-cols-sm="2" md-cols-md="3" md-cols-gt-md="6" md-row-height-gt-md="1:1" md-row-height="4:3" md-gutter="24px" md-gutter-gt-sm="24px"> <md-grid-tile ng-repeat="school in schools" md-colspan="1"> <button class="schoolTileButton" ng-click="openSchoolGeneralTimetable(school.id)"> <img class="schoolTileImage" ng-src="data:image/JPEG;base64,{{school.logo}}" on-error-src="images/HITSA_innov_logo_03.4e2f45c0.png"> <md-grid-tile-footer class="schoolTileFooter"> <span>{{currentLanguageNameField(school)}}</span> </md-grid-tile-footer> </button> </md-grid-tile> </md-grid-list> </div>'),a.put("timetable/generalTimetable/timetable.generalTimetable.search.html",'<div ng-include="\'timetable/generalTimetable/timetable.generalTimetable.navbar.html\'"></div> <div class="ois-form-layout-padding ois-form-layout" ng-cloak> <div flex> <fieldset> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'main.searchlabel\' | translate}}</legend> <form name="timetableSearchForm" ng-submit="loadData()" novalidate class="nomargin"> <div layout="row" layout-sm="column" layout-xs="column"> <md-autocomplete flex="45" flex-sm="100" flex-xs="100" md-search-text="teacherSearchText" md-selected-item="criteria.teacherObject" md-items="item in parameterSearch(teacherSearchText, formState.teachers)" md-item-text="currentLanguageNameField(item)" md-selected-item-change="selectedTeacherChanged(item)" md-min-length="1" md-floating-label="{{auth.higher ? (\'timetable.search.teacherHigher\' | translate) : (\'timetable.search.teacherVocational\' | translate)}}" md-require-match md-no-cache> <md-item-template> <span md-highlight-text="teacherSearchText">{{currentLanguageNameField(item)}}</span> </md-item-template> </md-autocomplete> <md-autocomplete flex="50" flex-sm="100" flex-xs="100" flex-offset="5" flex-offset-sm="0" flex-offset-xs="0" md-search-text="studentGroupSearchText" md-selected-item="criteria.studentGroupObject" md-items="item in parameterSearch(studentGroupSearchText, formState.studentGroups)" md-item-text="currentLanguageNameField(item)" md-selected-item-change="selectedStudentGroupChanged(item)" md-min-length="1" md-floating-label="{{\'timetable.search.studentGroup\' | translate}}" md-require-match md-no-cache> <md-item-template> <span md-highlight-text="studentGroupSearchText">{{currentLanguageNameField(item)}}</span> </md-item-template> </md-autocomplete> </div> <div layout="row" layout-sm="column" layout-xs="column"> <md-autocomplete flex="45" flex-sm="100" flex-xs="100" md-search-text="roomSearchText" md-selected-item="criteria.roomObject" md-items="item in parameterSearch(roomSearchText, formState.rooms)" md-item-text="currentLanguageNameField(item)" md-selected-item-change="selectedRoomChanged(item)" md-min-length="1" md-floating-label="{{\'timetable.search.room\' | translate}}" md-require-match md-no-cache> <md-item-template> <span md-highlight-text="roomSearchText">{{currentLanguageNameField(item)}}</span> </md-item-template> </md-autocomplete> <md-autocomplete flex="50" flex-sm="100" flex-xs="100" flex-offset="5" flex-offset-sm="0" flex-offset-xs="0" md-search-text="subjectSearchText" md-selected-item="criteria.subjectObject" md-items="item in parameterSearch(subjectSearchText, formState.subjects)" md-item-text="currentLanguageNameField(item)" md-selected-item-change="selectedSubjectChanged(item)" md-min-length="1" md-floating-label="{{\'timetable.search.subject\' | translate}}" md-require-match md-no-cache> <md-item-template> <span md-highlight-text="subjectSearchText">{{currentLanguageNameField(item)}}</span> </md-item-template> </md-autocomplete> </div> <div layout="row"> <md-button ng-click="search()" class="md-raised md-primary">{{\'main.button.search\' | translate}}</md-button> <md-button class="md-raised" ng-click="clearSearchParameters()">{{\'main.button.clear\' | translate}}</md-button> </div> </form> </fieldset> </div> <div ng-controller="SearchTimetableViewController"> <div ng-include="\'timetable/timetable.week.view.html\'"></div> </div> </div>'),a.put("vocationalCurriculum/dialog/occupation.add.dialog.html",'<md-dialog aria-label="occupation add dialog" flex="40" flex-xs="100"> <form name="dialogForm" ng-cloak> <md-toolbar> <div class="md-toolbar-tools"> <h2>{{formState.readOnly ? "occupation.viewAquiredOccupation" : "occupation.addAquiredOccupation" | translate}}</h2> <span flex></span> <md-button class="md-icon-button" ng-click="cancel()"> <md-icon md-font-set="material-icons">close</md-icon> </md-button> </div> </md-toolbar> <md-dialog-content> <span flex></span> <div class="ois-form-layout" layout="column" layout-margin ng-cloak> <div layout="row"> <md-input-container flex> <label>{{\'occupation.aquiredOccupation\' | translate}}</label> <hois-classifier-select ng-model="occupation" main-classifier-code="KUTSE" required ng-disabled="formState.readOnly || formState.limitedEditing" only-valid ignore-code-validation="occupation.code"></hois-classifier-select> </md-input-container> </div> <div class="occupation-header align-center">{{\'occupation.specialities\' | translate}}</div> <div ng-repeat="occupationSpeciality in specialities" flex layout="row" class="nomargin"> <div flex="5">&nbsp;</div> <md-checkbox ng-model="selectedSpecialities[occupationSpeciality.code]" aria-label="{{currentLanguageNameField(occupationSpeciality)}}" ng-disabled="formState.readOnly || !(!formState.limitedEditing || auth.isAdmin())"> {{currentLanguageNameField(occupationSpeciality)}} </md-checkbox> </div> <div class="occupation-header align-center">{{\'occupation.partOccupations\' | translate}}</div> <div ng-repeat="partOccupation in partOccupations" class="common-label" flex layout="row"> <div flex="5">&nbsp;</div> <div>{{currentLanguageNameField(partOccupation)}}</div> </div> <div>&nbsp;</div> <div layout="row"> <md-checkbox ng-model="occupationGrant" aria-label="occupationGrant" ng-disabled="formState.readOnly"> {{\'occupation.schoolHasOccupationGrant\' | translate}} </md-checkbox> </div> </div> </md-dialog-content> <span flex></span> <md-dialog-actions layout="row" layout-align="start center"> <md-button class="md-raised md-primary" ng-click="submit()" ng-if="!formState.readOnly">{{"main.button.save" | translate}}</md-button> <md-button class="md-raised" ng-click="cancel()">{{"main.button.close" | translate}}</md-button> </md-dialog-actions> </form> </md-dialog>'),a.put("vocationalCurriculum/dialog/partOccupation.add.dialog.html",'<md-dialog aria-label="occupation add dialog" flex="40" flex-xs="100"> <form name="dialogForm" ng-cloak> <md-toolbar> <div class="md-toolbar-tools"> <h2>{{formState.readOnly ? "occupation.viewAquiredPartOccupation" : "occupation.addAquiredPartOccupation" | translate}}</h2> <span flex></span> <md-button class="md-icon-button" ng-click="cancel()"> <md-icon md-font-set="material-icons">close</md-icon> </md-button> </div> </md-toolbar> <md-dialog-content> <span flex></span> <div class="ois-form-layout" layout="column" layout-margin ng-cloak> <div layout="column"> <md-input-container flex> <label>{{\'occupation.occupationStandard\' | translate}}</label> <!--<hois-classifier-select ng-model="occupation" main-classifier-code="KUTSE" required ng-disabled="formState.readOnly"></hois-classifier-select>--> <md-select ng-model="occupation" required ng-disabled="formState.readOnly"> <md-option ng-value="option" ng-repeat="option in occupations | orderBy: currentLanguageNameField()"> {{ option | hoisValidDates }} </md-option> </md-select> </md-input-container> <md-input-container flex> <label>{{\'occupation.aquiredPartOccupation\' | translate}}</label> <!--<hois-classifier-select ng-model="partOccupationAquired" main-classifier-code="OSAKUTSE" watch-model="occupation"\r\n                        connect-main-classifier-code="KUTSE" search-from-connect required ng-disabled="formState.readOnly"></hois-classifier-select>--> <md-select ng-model="partOccupationAquired" required ng-disabled="formState.readOnly"> <md-option ng-value="option" ng-repeat="option in partOccupations | filter: filterPartOccupations | orderBy: currentLanguageNameField()"> {{ option | hoisValidDates }} </md-option> </md-select> </md-input-container> </div> </div> </md-dialog-content> <span flex></span> <md-dialog-actions layout="row" layout-align="start center"> <md-button class="md-raised md-primary" ng-click="submit()" ng-if="!formState.readOnly">{{"main.button.save" | translate}}</md-button> <md-button class="md-raised" ng-click="cancel()">{{"main.button.close" | translate}}</md-button> </md-dialog-actions> </form> </md-dialog>'),a.put("vocationalCurriculum/dialog/school.curriculum.selection.dialog.html",'<md-dialog aria-label="state curriculum selection dialog"> <form name="dialogForm" ng-cloak> <md-toolbar> <div class="md-toolbar-tools"> <h2>{{"curriculum.selectSchoolCurriculum" | translate}}</h2> <span flex></span> <md-button class="md-icon-button" ng-click="cancel()"> <md-icon md-font-set="material-icons">close</md-icon> </md-button> </div> </md-toolbar> <md-dialog-content> <md-table-container flex> <table md-table md-row-select="true" ng-model="curriculumSelected" md-progress="tabledata.$promise"> <thead md-head md-order="criteria.order" md-on-reorder="loadData"> <tr md-row> <th md-column md-order-by="{{currentLanguageNameField()}}">{{\'curriculum.name\' | translate}}</th> <th md-column md-order-by="code">{{\'curriculum.code\' | translate}}</th> <th md-column md-order-by="merCode">{{\'curriculum.merCode\' | translate}}</th> <th md-column md-order-by="credits">{{\'stateCurriculum.credits\' | translate}}</th> </tr> </thead> <tbody md-body> <tr md-row md-select="curriculum" md-select-id="curriculum.id" ng-repeat="curriculum in tabledata.content" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> <td md-cell>{{currentLanguageNameField(curriculum)}}</td> <td md-cell>{{curriculum.code}}</td> <td md-cell>{{curriculum.merCode}}</td> <td md-cell>{{curriculum.credits}}</td> </tr> </tbody> </table> </md-table-container> <md-table-pagination md-limit="criteria.size" md-limit-options="[10, 20, 50]" md-page="criteria.page" md-total="{{tabledata.totalElements}}" md-on-paginate="loadData" md-label="{page: \'{{\'main.page\' | translate}}:\', rowsPerPage: \'{{\'main.rowPerPage\' | translate}}:\', of: \'{{\'main.of\' | translate}}\' }" md-page-select></md-table-pagination> </md-dialog-content> <md-dialog-actions layout="row" layout-align="start center"> <md-button class="md-primary md-raised" ng-disabled="curriculumSelected.length !== 1" ng-click="submit()">{{"main.button.choose" | translate}}</md-button> <md-button class="md-raised" ng-click="cancel()">{{"main.button.close" | translate}}</md-button> </md-dialog-actions> </form> </md-dialog>'),a.put("vocationalCurriculum/dialog/state.curriculum.selection.dialog.html",'<md-dialog aria-label="state curriculum selection dialog" flex="40" flex-xs="100"> <form name="dialogForm" ng-cloak> <md-toolbar> <div class="md-toolbar-tools"> <h2>{{"stateCurriculum.select" | translate}}</h2> <span flex></span> <md-button class="md-icon-button" ng-click="cancel()"> <md-icon md-font-set="material-icons">close</md-icon> </md-button> </div> </md-toolbar> <md-dialog-content> <span flex></span> <div class="ois-form-layout" layout="column" layout-margin ng-cloak> <md-input-container flex> <label>{{\'stateCurriculum.name\' | translate}}</label> <md-select ng-model="stateCurriculumSelect" aria-label="state curriculum selection" ng-change="stateCurriculumSelected(stateCurriculumSelect)" required> <md-option ng-repeat="option in stateCurriculums" ng-value="option.id"> {{option[$root.currentLanguageNameField()]}} </md-option> </md-select> </md-input-container> <div ng-show="stateCurriculumSelect"> <md-input-container> <input style="display:none" readonly ng-model="occupationsAndPartOccupationsCount" name="occupationsAndPartOccupationsCount" type="number" min="1"> <div ng-messages="dialogForm.occupationsAndPartOccupationsCount.$error"> <div ng-if="dialogForm.$submitted" ng-message="min">{{\'curriculum.error.occupationNotSelected\' | translate}}</div> </div> </md-input-container> </div> <div style="height: 100%"> <div layout="column"> <div ng-repeat="item in stateCurriculumOccupations"> <md-checkbox ng-model="selectedStateCurriculumOccupations[item.occupation.code]" ng-change="occupationSelected(item.occupation.code)" aria-label="{{currentLanguageNameField(item.occupation)}}" ng-disabled="occupationsCount === 0 && partOccupationsCount !== 0"> {{currentLanguageNameField(item.occupation)}} </md-checkbox> <div layout="column"> <!--span ng-show="item.partOccupations.length!=0">\r\n                    {{\'occupation.partOccupations\' | translate}}\r\n                  </span--> <div ng-show="item.partOccupations.length!=0" class="occupation-header align-center">{{\'occupation.partOccupations\' | translate}}</div> <md-input-container style="height: 100%"> <div layout="column"> <div ng-repeat="partOccupation in item.partOccupations" flex layout="row"> <div flex="5">&nbsp;</div> <md-checkbox ng-model="selectedStateCurriculumPartOccupations[partOccupation.code]" aria-label="{{currentLanguageNameField(partOccupation)}}" ng-disabled="selectedStateCurriculumOccupations[item.occupation.code] || occupationsCount !== 0" ng-change="countOccupationsAndPartOccupationsSelected()"> {{currentLanguageNameField(partOccupation)}} </md-checkbox> </div> </div> </md-input-container> </div> <div layout="column"> <div ng-show="item.specialities.length!=0" class="occupation-header align-center">{{\'occupation.specialities\' | translate}}</div> <div ng-show="item.specialities.length!=0"> <input style="display:none" type="number" readonly name="{{\'selectedSpecialitiesCount_\'+item.occupation.code}}" ng-model="selectedSpecialitiesCount[item.occupation.code]" min="1"> <div class="invalid" ng-messages="dialogForm[\'selectedSpecialitiesCount_\'+item.occupation.code].$error"> <div ng-if="dialogForm.$submitted" ng-message="min">{{\'main.messages.error.atLeastOneMustBeSelected\' | translate}}</div> </div> </div> <md-input-container style="height: 100%"> <div layout="column"> <div ng-repeat="speciality in item.specialities" flex layout="row"> <div flex="5">&nbsp;</div> <md-checkbox ng-model="selectedStateCurriculumSpecialities[speciality.code]" ng-change="specialitySelected(item.occupation.code, speciality.code)" aria-label="{{currentLanguageNameField(speciality)}}" ng-disabled="!selectedStateCurriculumOccupations[item.occupation.code]"> {{currentLanguageNameField(speciality)}} </md-checkbox> </div> </div> </md-input-container> </div> </div> </div> </div> <!--        <div ng-repeat="stateCurriculumOccupation in stateCurriculumOccupations" flex>\r\n          <md-checkbox ng-model="selectedStateCurriculumOccupation[stateCurriculumOccupation.occupation.code]"\r\n            aria-label="{{stateCurriculumOccupation.occupation[$root.currentLanguageNameField()]}}">\r\n            {{stateCurriculumOccupation.occupation[$root.currentLanguageNameField()]}}\r\n          </md-checkbox>\r\n        </div>--> </div> </md-dialog-content> <md-dialog-actions layout="row" layout-align="start center"> <md-button class="md-primary md-raised" ng-click="submit()">{{"main.button.choose" | translate}}</md-button> <md-button class="md-raised" ng-click="cancel()">{{"main.button.close" | translate}}</md-button> </md-dialog-actions> </form> </md-dialog>'),a.put("vocationalCurriculum/implementationPlan/implementation.plan.html",'<div class="ois-form-layout-padding ois-form-layout" ng-cloak> <form name="vocationalCurriculumModuleImplementationPlanForm" layout="column"> <fieldset tabindex="1"> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'module.implementationPlan.subTitle\' | translate}}</legend> <div layout="column"> <md-input-container flex> <label>{{\'module.implementationPlan.codeOrName\' | translate}}</label> <input ng-model="implementationPlan.code" name="code" type="text" md-maxlength="255" required ng-readonly="formState.readOnly" unique="curriculumVersionCodeUniqueQuery" ng-model-options="{ debounce: 250 }"> <div ng-messages="vocationalCurriculumModuleImplementationPlanForm.code.$error"> <div ng-message="notUnique"> {{\'main.messages.error.mustBeUnique\' | translate}} </div> </div> </md-input-container> <div layout="row"> <md-input-container flex="45" flex-xs="100"> <label>{{\'module.implementationPlan.studyForm\' | translate}}</label> <hois-classifier-select ng-model="implementationPlan.curriculumStudyForm" show-only-values="curriculumStudyForms" model-value-attr="code" main-classifier-code="OPPEVORM" required ng-disabled="formState.readOnly"></hois-classifier-select> </md-input-container> <md-input-container flex="20" flex-offset="5"> <label>{{\'module.implementationPlan.admissionYear\' | translate}}</label> <md-select ng-model="implementationPlan.admissionYear" ng-disabled="formState.readOnly"> <md-option ng-repeat="year in ::admissionYears" ng-value="year" aria-label="{{year}}">{{year}}</md-option> </md-select> </md-input-container> <md-input-container flex="25" flex-offset="5"> <label>{{\'module.implementationPlan.type\' | translate}}</label> <hois-classifier-select ng-model="implementationPlan.type" model-value-attr="code" main-classifier-code="OPPEKAVA_VERSIOON_LIIK" required ng-disabled="formState.readOnly"></hois-classifier-select> </md-input-container> </div> <md-input-container flex> <label>{{\'module.implementationPlan.targetGroup\' | translate}}</label> <input ng-model="implementationPlan.targetGroup" type="text" md-maxlength="1000" required ng-readonly="formState.readOnly"> </md-input-container> <md-input-container flex> <label>{{auth.higher ? (\'module.implementationPlan.teachersHigher\' | translate) : (\'module.implementationPlan.teachersVocational\' | translate)}}</label> <input ng-model="implementationPlan.teachers" type="text" md-maxlength="1000" required ng-readonly="formState.readOnly"> </md-input-container> <!-- Cannot use hois-school-department-select here as options may be not only from user\'s school,\r\n        but also must be limited to curriculum school departments --> <md-input-container flex> <label>{{\'module.implementationPlan.teachingDepartment\' | translate}}</label> <hois-select ng-model="implementationPlan.schoolDepartment" values="schoolDepartments" ng-disabled="formState.readOnly"></hois-select> </md-input-container> <md-input-container flex> <label>{{\'main.notes\' | translate}}</label> <textarea ng-model="implementationPlan.description" md-maxlength="20000" dfs max-rows="10" ng-readonly="formState.readOnly"></textarea> </md-input-container> <div layout="row" layout-xs="column"> <md-input-container flex-xs="100"> <div layout="row" layout-align="end" flex> <md-checkbox ng-model="implementationPlan.individual" aria-label="individual" ng-disabled="formState.readOnly">{{\'module.implementationPlan.individualCurriculum\' | translate}}</md-checkbox> </div> </md-input-container> </div> </div> </fieldset> <div>&nbsp;</div> <fieldset tabindex="2"> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'module.modules\' | translate}}</legend> <div layout="row" flex class="secondary-table-header"> <div flex="50"> {{\'module.implementationPlan.moduleName\' | translate}} </div> <div flex="30"> {{\'module.implementationPlan.moduleCapacity\' | translate}} </div> <div flex="15"> {{\'module.implementationPlan.moduleOK\' | translate}} </div> </div> <!--MODULES WITHOUT OCCUPATIONS--> <div class="occupation-header align-center">{{\'module.modulesWithoutPartOccupationOccuaptionSpecialization\' | translate}} </div> <div layout="column" ng-repeat="type in moduleTypes | filter: filterTypesWithoutEmptyModules" class="lowerBorder"> <div layout="row" flex="100" class="occupation-row align-center border-bottom odd"> <div flex="5">&nbsp;</div> <div flex="15" style="word-wrap: break-word">{{currentLanguageNameField(type)}} ({{getTotalCredits(modules | filter: filterEmptyModulesByType(type.code))}} EKAP)</div> <div layout="column" flex="75"> <div flex="100" ng-repeat="module in modules | filter: filterEmptyModulesByType(type.code) | orderBy: \'nameEt\'" layout="row" class="align-center"> <a flex="50" style="word-wrap: break-word" ng-click="openViewModuleDialog(module)" href="">{{occupationModuleHasBaseModule(module) ? \'* \' : \'\'}}{{currentLanguageNameField(module)}}</a> <span flex="15">{{module.credits}}&nbsp; EKAP</span> <div flex="30"> <a class="md-primary" style="word-wrap: break-word" ng-click="openAddModuleDataDialog(module)" ng-if="!formState.readOnly  && implementationPlan.id && implementationPlan.canChange"> {{isOccupationModuleDataSaved(module) ? \'module.implementationPlan.viewUpdateModuleData\' : \'module.implementationPlan.insertModuleData\' | translate}} </a> <a class="md-primary" style="word-wrap: break-word" ng-click="openAddModuleDataDialog(module)" ng-if="formState.readOnly && isOccupationModuleDataSaved(module) "> {{\'module.implementationPlan.viewModuleData\' | translate}} </a> </div> <div flex="15" ng-class="{invalid: !isModuleValid(module)}"> {{isOccupationModuleDataSaved(module) ? \'main.yes\' : \'main.no\' | translate}} </div> </div> </div> </div> </div> <!--KUTSETE/OSAKUTSETE MOODULID--> <div ng-repeat="occupation in occupations | orderBy: \'occupation.nameEt\'" layout="column"> <div class="occupation-header align-center"> <span ng-show="isOccupation">{{\'stateCurriculum.enter.occupation.occupation\' | translate}} {{$index + 1}}:&nbsp; {{currentLanguageNameField(occupation.occupation)}}</span> <span ng-show="!isOccupation">{{\'stateCurriculum.enter.occupation.partial\' | translate}} {{$index + 1}}:&nbsp; {{currentLanguageNameField(occupation.occupation)}}</span> </div> <div layout="column" ng-repeat="type in moduleTypes | filter: filterTypesWithoutModules(occupation.occupation.code, modules)" class="lowerBorder"> <div layout="row" flex="100" class="occupation-row align-center border-bottom odd"> <div flex="5">&nbsp;</div> <div flex="15">{{currentLanguageNameField(type)}} ({{getTotalCredits(modules | filter: filterModulesByType(type.code, occupation.occupation.code))}} EKAP)</div> <div layout="column" flex="75"> <div flex="100" ng-repeat="module in modules | filter: filterModulesByType(type.code, occupation.occupation.code) | orderBy: \'nameEt\'" layout="row" class="align-center"> <a flex="50" ng-click="openViewModuleDialog(module)" href="">{{occupationModuleHasBaseModule(module) ? \'* \' : \'\'}}{{currentLanguageNameField(module)}}</a> <span flex="15">{{module.credits}}&nbsp; EKAP</span> <div flex="30"> <a class="md-primary" ng-click="openAddModuleDataDialog(module)" ng-if="!formState.readOnly && implementationPlan.id && implementationPlan.canChange"> {{isOccupationModuleDataSaved(module) ? \'module.implementationPlan.viewUpdateModuleData\' : \'module.implementationPlan.insertModuleData\' | translate}} </a> <a class="md-primary" ng-click="openAddModuleDataDialog(module)" ng-if="formState.readOnly && isOccupationModuleDataSaved(module)"> {{\'module.implementationPlan.viewModuleData\' | translate}} </a> </div> <div flex="15" ng-class="{invalid: !isModuleValid(module)}"> {{isOccupationModuleDataSaved(module) ? \'main.yes\' : \'main.no\' | translate}} </div> </div> </div> </div> </div> <!--OSAKUTSETE MOODULID--> <div ng-repeat="partOccupation in occupation.partOccupations | orderBy" layout="column"> <div class="occupation-header2 align-center">{{\'stateCurriculum.enter.occupation.partial\' | translate}} {{$index + 1}}:&nbsp; <hois-classifier-value ng-model="partOccupation" main-classifier-code="OSAKUTSE"></hois-classifier-value> </div> <div layout="column" ng-repeat="type in moduleTypes | filter: filterTypesWithoutModules(partOccupation, modules)" class="lowerBorder"> <div layout="row" flex="100" class="occupation-row align-center border-bottom odd"> <div flex="5">&nbsp;</div> <div flex="15">{{currentLanguageNameField(type)}} ({{getTotalCredits(modules | filter: filterModulesByType(type.code, partOccupation))}} EKAP)</div> <div layout="column" flex="75"> <div flex="100" ng-repeat="module in modules | filter: filterModulesByType(type.code, partOccupation) | orderBy: \'nameEt\'" layout="row" class="align-center"> <a flex="50" ng-click="openViewModuleDialog(module)" href="">{{occupationModuleHasBaseModule(module) ? \'* \' : \'\'}}{{currentLanguageNameField(module)}}</a> <span flex="15">{{module.credits}}&nbsp; EKAP</span> <div flex="30"> <a class="md-primary" ng-click="openAddModuleDataDialog(module)" ng-if="!formState.readOnly && implementationPlan.id && implementationPlan.canChange"> {{isOccupationModuleDataSaved(module) ? \'module.implementationPlan.viewUpdateModuleData\' : \'module.implementationPlan.insertModuleData\' | translate}} </a> <a class="md-primary" ng-click="openAddModuleDataDialog(module)" ng-if="formState.readOnly && isOccupationModuleDataSaved(module) "> {{\'module.implementationPlan.viewModuleData\' | translate}} </a> </div> <div flex="15" ng-class="{invalid: !isModuleValid(module)}"> {{isOccupationModuleDataSaved(module) ? \'main.yes\' : \'main.no\' | translate}} </div> </div> </div> </div> </div> </div> <!--SPETSKUTSETE MOODULID--> <div ng-repeat="speciality in occupation.specialities | orderBy" layout="column"> <div class="occupation-header2 align-center">{{\'stateCurriculum.enter.occupation.specialty\' | translate}} {{$index + 1}}: &nbsp; <hois-classifier-value ng-model="speciality" main-classifier-code="SPETSKUTSE"></hois-classifier-value> </div> <div layout="column" ng-repeat="type in moduleTypes | filter: filterTypesWithoutModules(speciality, modules)" class="lowerBorder"> <div layout="row" flex="100" class="occupation-row align-center border-bottom odd"> <div flex="5">&nbsp;</div> <div flex="15">{{currentLanguageNameField(type)}} ({{getTotalCredits(modules | filter: filterModulesByType(type.code, speciality))}} EKAP)</div> <div layout="column" flex="75"> <div flex="100" ng-repeat="module in modules | filter: filterModulesByType(type.code, speciality) | orderBy: \'nameEt\'" layout="row" class="align-center"> <a flex="50" ng-click="openViewModuleDialog(module)" href="">{{occupationModuleHasBaseModule(module) ? \'* \' : \'\'}}{{currentLanguageNameField(module)}}</a> <span flex="15">{{module.credits}}&nbsp; EKAP</span> <div flex="30"> <a class="md-primary" ng-click="openAddModuleDataDialog(module)" ng-if="!formState.readOnly && implementationPlan.id && implementationPlan.canChange"> {{isOccupationModuleDataSaved(module) ? \'module.implementationPlan.viewUpdateModuleData\' : \'module.implementationPlan.insertModuleData\' | translate}} </a> <a class="md-primary" ng-click="openAddModuleDataDialog(module)" ng-if="formState.readOnly && isOccupationModuleDataSaved(module) "> {{\'module.implementationPlan.viewModuleData\' | translate}} </a> </div> <div flex="15" ng-class="{invalid: !isModuleValid(module)}"> {{isOccupationModuleDataSaved(module) ? \'main.yes\' : \'main.no\' | translate}} </div> </div> </div> </div> </div> </div> </div> </fieldset> <div>&nbsp;</div> <fieldset tabindex="10"> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'curriculum.yearCapacitiesTable\' | translate}}</legend> <md-table-container> <table md-table class="secondary-table"> <thead md-head> <tr md-row> <th md-column ng-repeat="yc in implementationPlan.yearCapacities track by $index">{{$index+1}}.&nbsp;{{\'module.studyYearLowercase\' | translate}}</th> </tr> </thead> <tbody md-body> <tr md-row> <td md-cell ng-repeat="yc in implementationPlan.yearCapacities track by $index">{{yc}}</td> </tr> </tbody> </table> </md-table-container> </fieldset> <div>&nbsp;</div> <fieldset tabindex="11"> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'curriculum.implementationPlanStatus\' | translate}}</legend> <div layout="row" flex="100"> <md-input-container flex="30" flex-sm="100" flex-xs="100"> <label>{{\'main.validFrom\' | translate}}</label> <md-datepicker ng-model="implementationPlan.validFrom" md-open-on-focus required ng-disabled="formState.readOnly"></md-datepicker> </md-input-container> <md-input-container flex="20" flex-sm="100" flex-xs="100" flex-offset-xs="0" flex-offset-sm="0" flex-offset="4"> <label>{{\'main.validTo\' | translate}}</label> <md-datepicker ng-model="implementationPlan.validThru" md-min-date="implementationPlan.validFrom" md-open-on-focus ng-disabled="formState.readOnly"></md-datepicker> </md-input-container> </div> <div layout="row" class="top-margin form-readonly"> <md-input-container flex="30" flex-sm="100"> <label>{{\'main.status\' | translate}}</label> <hois-classifier-value ng-model="implementationPlan.status" main-classifier-code="OPPEKAVA_VERSIOON_STAATUS"></hois-classifier-value> </md-input-container> </div> </fieldset> <hois-created-modified object="implementationPlan"></hois-created-modified> </form> <div layout="row" layout-xs="column"> <div ng-show="implementationPlan.status === VERSION_STATUS.S" layout-xs="column"> <div ng-show="!implementationPlan.id" layout-xs="column"> <md-button class="md-raised md-primary" ng-click="save()">{{\'main.button.save\' | translate}}</md-button> </div> <div ng-show="!formState.readOnly && implementationPlan.id" layout-xs="column"> <md-button class="md-raised md-primary" ng-click="save()" ng-if="implementationPlan.canChange">{{\'main.button.save\' | translate}}</md-button> <md-button ng-click="saveAndConfirm()" class="md-raised" ng-if="implementationPlan.canChange && implementationPlan.canConfirm">{{\'curriculum.statuschange.implementationPlan.button.verify\' | translate}}</md-button> <md-button ng-click="setStatusClosed()" class="md-raised" ng-if="implementationPlan.canChange && implementationPlan.canClose">{{\'curriculum.statuschange.implementationPlan.button.close\' | translate}}</md-button> <md-button class="md-raised md-default" ng-if="implementationPlan.canChange" ng-click="copy()">{{\'main.button.copy\' | translate}}</md-button> <md-button class="md-raised md-default" ng-click="delete()" ng-if="implementationPlan.canDelete">{{\'main.button.delete\' | translate}}</md-button> </div> <div ng-show="formState.readOnly" layout-xs="column"> <md-button class="md-raised md-primary" ng-click="goToEditForm()" ng-if="implementationPlan.canChange">{{\'main.button.change\' | translate}}</md-button> <md-button ng-click="confirm()" class="md-raised" ng-if="implementationPlan.canConfirm">{{\'curriculum.statuschange.implementationPlan.button.verify\' | translate}}</md-button> <md-button ng-click="setStatusClosed()" class="md-raised" ng-if="implementationPlan.canClose">{{\'curriculum.statuschange.implementationPlan.button.close\' | translate}}</md-button> <md-button class="md-raised md-default" ng-click="copy()" ng-if="implementationPlan.canChange">{{\'main.button.copy\' | translate}}</md-button> </div> </div> <div ng-show="implementationPlan.status === VERSION_STATUS.K" layout-xs="column"> <div ng-show="!formState.readOnly" layout-xs="column"> <md-button class="md-raised md-primary" ng-click="save()" ng-if="implementationPlan.canChange">{{\'main.button.save\' | translate}}</md-button> </div> <div ng-show="formState.readOnly" layout-xs="column"> <md-button class="md-raised md-primary" ng-click="goToEditForm()" ng-if="implementationPlan.canChange">{{\'main.button.change\' | translate}}</md-button> <md-button ng-click="setStatusClosed()" class="md-raised" ng-if="implementationPlan.canClose">{{\'curriculum.statuschange.implementationPlan.button.close\' | translate}}</md-button> <md-button class="md-raised md-default" ng-click="copy()" ng-if="implementationPlan.canChange">{{\'main.button.copy\' | translate}}</md-button> </div> </div> <div ng-show="implementationPlan.status === VERSION_STATUS.C" layout-xs="column"> <md-button class="md-raised md-default" ng-click="copy()" ng-if="implementationPlan.canChange">{{\'main.button.copy\' | translate}}</md-button> </div> <a href="{{curriculumVersionPdfUrl}}" target="_blank" class="md-button md-raised" ng-if="showPrintButton()">{{\'module.implementationPlan.print\' | translate}}</a> <a href="{{curriculumVersionModulesPdfUrl}}" target="_blank" class="md-button md-raised" ng-if="showPrintButton()">{{\'module.implementationPlan.printModules\' | translate}}</a> <md-button class="md-raised md-default" ng-click="back(\'#/vocationalCurriculum/\' + curriculumId + \'/view\', vocationalCurriculumModuleImplementationPlanForm)">{{\'main.button.back\' | translate}}</md-button> </div> </div> <style>.lowerBorder {\r\n    border-bottom: solid 1px #E0E0E0;\r\n  }</style>'),
a.put("vocationalCurriculum/implementationPlan/implementation.plan.view.html",'<div class="ois-form-layout-padding ois-form-layout" ng-cloak> <form name="vocationalCurriculumModuleImplementationPlanForm" layout="column"> <fieldset tabindex="1"> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'module.implementationPlan.subTitle\' | translate}}</legend> <div layout="column"> <md-input-container flex> <label>{{\'module.implementationPlan.codeOrName\' | translate}}</label> <input ng-model="implementationPlan.code" name="code" type="text" readonly> </md-input-container> <div layout="row" layout-xs="column"> <md-input-container flex="45" flex-xs="100"> <label>{{\'module.implementationPlan.studyForm\' | translate}}</label> <hois-classifier-select ng-model="implementationPlan.curriculumStudyForm" show-only-values="curriculumStudyForms" model-value-attr="code" main-classifier-code="OPPEVORM" disabled></hois-classifier-select> </md-input-container> <md-input-container flex="20" flex-offset="5" flex-offset-xs="0" flex-xs="100"> <label>{{\'module.implementationPlan.admissionYear\' | translate}}</label> <md-select ng-model="implementationPlan.admissionYear" disabled> <md-option ng-repeat="year in ::admissionYears" ng-value="year" aria-label="{{year}}">{{year}}</md-option> </md-select> </md-input-container> <md-input-container flex="25" flex-offset="5" flex-offset-xs="0" flex-xs="100"> <label>{{\'module.implementationPlan.type\' | translate}}</label> <hois-classifier-select ng-model="implementationPlan.type" model-value-attr="code" main-classifier-code="OPPEKAVA_VERSIOON_LIIK" disabled></hois-classifier-select> </md-input-container> </div> <md-input-container flex> <label>{{\'module.implementationPlan.targetGroup\' | translate}}</label> <input ng-model="implementationPlan.targetGroup" type="text" readonly> </md-input-container> <md-input-container flex> <label>{{auth.higher ? (\'module.implementationPlan.teachersHigher\' | translate) : (\'module.implementationPlan.teachersVocational\' | translate)}}</label> <input ng-model="implementationPlan.teachers" type="text" readonly> </md-input-container> <!-- Cannot use hois-school-department-select here as options may be not only from user\'s school,\r\n        but also must be limited to curriculum school departments --> <md-input-container flex> <label>{{\'module.implementationPlan.teachingDepartment\' | translate}}</label> <hois-select ng-model="implementationPlan.schoolDepartment" values="schoolDepartments" disabled></hois-select> </md-input-container> <md-input-container flex> <label>{{\'main.notes\' | translate}}</label> <textarea ng-model="implementationPlan.description" max-rows="10" readonly></textarea> </md-input-container> <md-input-container flex ng-if="implementationPlan.status === VERSION_STATUS.K"> <label>{{\'public.url\' | translate}}</label> <input ng-model="publicUrl" type="text" readonly> </md-input-container> <div layout="row"> <md-input-container> <div layout="row" layout-align="end" flex> <md-checkbox ng-model="implementationPlan.individual" aria-label="individual" disabled>{{\'module.implementationPlan.individualCurriculum\' | translate}}</md-checkbox> </div> </md-input-container> </div> </div> </fieldset> <div>&nbsp;</div> <fieldset tabindex="2"> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'module.modules\' | translate}}</legend> <div layout="row" flex class="secondary-table-header"> <div flex="50" flex-xs="45"> {{\'module.implementationPlan.moduleName\' | translate}} </div> <div flex="33"> &nbsp;&nbsp; {{\'module.implementationPlan.moduleCapacity\' | translate}} </div> <div flex="15"> {{\'module.implementationPlan.moduleOK\' | translate}} </div> </div> <!--MODULES WITHOUT OCCUPATIONS--> <div class="occupation-header align-center">{{\'module.modulesWithoutPartOccupationOccuaptionSpecialization\' | translate}} </div> <div layout="column" ng-repeat="type in moduleTypes | filter: filterTypesWithoutEmptyModules" class="lowerBorder"> <div layout="row" flex="100" class="occupation-row align-center border-bottom odd"> <div flex="5" flex-xs="0">&nbsp;</div> <div flex="15" style="word-wrap: break-word">{{currentLanguageNameField(type)}} ({{getTotalCredits(modules | filter: filterEmptyModulesByType(type.code))}} EKAP)</div> <div layout="column" flex="75"> <div flex="100" ng-repeat="module in modules | filter: filterEmptyModulesByType(type.code) | orderBy: \'nameEt\'" layout="row" class="align-center"> <a flex="50" flex-xs="45" style="word-wrap: break-word" ng-click="openViewModuleDialog(module)" href="">{{occupationModuleHasBaseModule(module) ? \'* \' : \'\'}}{{currentLanguageNameField(module)}}</a> <span flex="15" style="word-wrap: break-word">{{module.credits}}&nbsp; EKAP</span> <div flex="30"> <a class="md-primary" ng-click="openAddModuleDataDialog(module)" ng-if="isOccupationModuleDataSaved(module) "> {{\'module.implementationPlan.viewModuleData\' | translate}} </a> </div> <div flex="15" flex-xs="10"> {{isOccupationModuleDataSaved(module) ? \'main.yes\' : \'main.no\' | translate}} </div> </div> </div> </div> </div> <!--KUTSETE/OSAKUTSETE MOODULID--> <div ng-repeat="occupation in occupations | orderBy: \'occupation.nameEt\'" layout="column"> <div class="occupation-header align-center"> <span ng-show="isOccupation">{{\'stateCurriculum.enter.occupation.occupation\' | translate}} {{$index + 1}}:&nbsp; {{currentLanguageNameField(occupation.occupation)}}</span> <span ng-show="!isOccupation">{{\'stateCurriculum.enter.occupation.partial\' | translate}} {{$index + 1}}:&nbsp; {{currentLanguageNameField(occupation.occupation)}}</span> </div> <div layout="column" ng-repeat="type in moduleTypes | filter: filterTypesWithoutModules(occupation.occupation.code, modules)" class="lowerBorder"> <div layout="row" flex="100" class="occupation-row align-center border-bottom odd"> <div flex="5" flex-xs="0">&nbsp;</div> <div flex="15" style="word-wrap: break-word">{{currentLanguageNameField(type)}} ({{getTotalCredits(modules | filter: filterModulesByType(type.code, occupation.occupation.code))}} EKAP)</div> <div layout="column" flex="75"> <div flex="100" ng-repeat="module in modules | filter: filterModulesByType(type.code, occupation.occupation.code) | orderBy: \'nameEt\'" layout="row" class="align-center"> <a flex="40" flex-xs="45" style="word-wrap: break-word" ng-click="openViewModuleDialog(module)" href="">{{occupationModuleHasBaseModule(module) ? \'* \' : \'\'}}{{currentLanguageNameField(module)}}</a> <span flex="15" style="word-wrap: break-word">{{module.credits}}&nbsp; EKAP</span> <div flex="30"> <a class="md-primary" ng-click="openAddModuleDataDialog(module)" ng-if="isOccupationModuleDataSaved(module)"> {{\'module.implementationPlan.viewModuleData\' | translate}} </a> </div> <div flex="15" flex-xs="10"> {{isOccupationModuleDataSaved(module) ? \'main.yes\' : \'main.no\' | translate}} </div> </div> </div> </div> </div> <!--OSAKUTSETE MOODULID--> <div ng-repeat="partOccupation in occupation.partOccupations | orderBy" layout="column"> <div class="occupation-header2 align-center">{{\'stateCurriculum.enter.occupation.partial\' | translate}} {{$index + 1}}:&nbsp; <hois-classifier-value ng-model="partOccupation" main-classifier-code="OSAKUTSE"></hois-classifier-value> </div> <div layout="column" ng-repeat="type in moduleTypes | filter: filterTypesWithoutModules(partOccupation, modules)" class="lowerBorder"> <div layout="row" flex="100" class="occupation-row align-center border-bottom odd"> <div flex="5" flex-xs="0">&nbsp;</div> <div flex="15" style="word-wrap: break-word">{{currentLanguageNameField(type)}} ({{getTotalCredits(modules | filter: filterModulesByType(type.code, partOccupation))}} EKAP)</div> <div layout="column" flex="75"> <div flex="100" ng-repeat="module in modules | filter: filterModulesByType(type.code, partOccupation) | orderBy: \'nameEt\'" layout="row" class="align-center"> <a flex="50" flex-xs="45" style="word-wrap: break-word" ng-click="openViewModuleDialog(module)" href="">{{occupationModuleHasBaseModule(module) ? \'* \' : \'\'}}{{currentLanguageNameField(module)}}</a> <span flex="15" style="word-wrap: break-word">{{module.credits}}&nbsp; EKAP</span> <div flex="30"> <a class="md-primary" ng-click="openAddModuleDataDialog(module)" ng-if="isOccupationModuleDataSaved(module) "> {{\'module.implementationPlan.viewModuleData\' | translate}} </a> </div> <div flex="15" flex-xs="10"> {{isOccupationModuleDataSaved(module) ? \'main.yes\' : \'main.no\' | translate}} </div> </div> </div> </div> </div> </div> <!--SPETSKUTSETE MOODULID--> <div ng-repeat="speciality in occupation.specialities | orderBy" layout="column"> <div class="occupation-header2 align-center">{{\'stateCurriculum.enter.occupation.specialty\' | translate}} {{$index + 1}}: &nbsp; <hois-classifier-value ng-model="speciality" main-classifier-code="SPETSKUTSE"></hois-classifier-value> </div> <div layout="column" ng-repeat="type in moduleTypes | filter: filterTypesWithoutModules(speciality, modules)" class="lowerBorder"> <div layout="row" flex="100" class="occupation-row align-center border-bottom odd"> <div flex="5" flex-xs="0">&nbsp;</div> <div flex="15" style="word-wrap: break-word">{{currentLanguageNameField(type)}} ({{getTotalCredits(modules | filter: filterModulesByType(type.code, speciality))}} EKAP)</div> <div layout="column" flex="75"> <div flex="100" ng-repeat="module in modules | filter: filterModulesByType(type.code, speciality) | orderBy: \'nameEt\'" layout="row" class="align-center"> <a flex="50" flex-xs="45" style="word-wrap: break-word" ng-click="openViewModuleDialog(module)" href="">{{occupationModuleHasBaseModule(module) ? \'* \' : \'\'}}{{currentLanguageNameField(module)}}</a> <span flex="15">{{module.credits}}&nbsp; EKAP</span> <div flex="30"> <a class="md-primary" ng-click="openAddModuleDataDialog(module)" ng-if="isOccupationModuleDataSaved(module) "> {{\'module.implementationPlan.viewModuleData\' | translate}} </a> </div> <div flex="15" flex-xs="10"> {{isOccupationModuleDataSaved(module) ? \'main.yes\' : \'main.no\' | translate}} </div> </div> </div> </div> </div> </div> </div> </fieldset> <div>&nbsp;</div> <fieldset tabindex="10"> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'curriculum.yearCapacitiesTable\' | translate}}</legend> <md-table-container> <table md-table class="secondary-table"> <thead md-head> <tr md-row> <th md-column ng-repeat="yc in implementationPlan.yearCapacities track by $index">{{$index+1}}.&nbsp;{{\'module.studyYearLowercase\' | translate}}</th> </tr> </thead> <tbody md-body> <tr md-row> <td md-cell ng-repeat="yc in implementationPlan.yearCapacities track by $index">{{yc}}</td> </tr> </tbody> </table> </md-table-container> </fieldset> <div>&nbsp;</div> <fieldset tabindex="11"> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'curriculum.implementationPlanStatus\' | translate}}</legend> <div style="overflow: auto"> <div layout="row" flex="100"> <md-input-container flex="30" flex-sm="100" flex-xs="100"> <label>{{\'main.validFrom\' | translate}}</label> <md-datepicker ng-model="implementationPlan.validFrom" md-open-on-focus disabled></md-datepicker> </md-input-container> <md-input-container flex="20" flex-sm="100" flex-xs="100" flex-offset-xs="0" flex-offset-sm="0" flex-offset="4"> <label>{{\'main.validTo\' | translate}}</label> <md-datepicker ng-model="implementationPlan.validThru" md-min-date="implementationPlan.validFrom" md-open-on-focus disabled></md-datepicker> </md-input-container> </div> <div layout="row" class="top-margin form-readonly"> <md-input-container flex="30" flex-sm="100"> <label>{{\'main.status\' | translate}}</label> <hois-classifier-value ng-model="implementationPlan.status" main-classifier-code="OPPEKAVA_VERSIOON_STAATUS"></hois-classifier-value> </md-input-container> </div> </div> </fieldset> <hois-created-modified object="implementationPlan"></hois-created-modified> </form> <div layout="row" layout-xs="column"> <div ng-show="implementationPlan.status === VERSION_STATUS.S" layout-xs="column"> <md-button class="md-raised md-primary" ng-click="goToEditForm()" ng-if="implementationPlan.canChange">{{\'main.button.change\' | translate}}</md-button> <md-button ng-click="confirm()" class="md-raised" ng-if="implementationPlan.canConfirm">{{\'curriculum.statuschange.implementationPlan.button.verify\' | translate}}</md-button> <md-button ng-click="setStatusClosed()" class="md-raised" ng-if="implementationPlan.canClose">{{\'curriculum.statuschange.implementationPlan.button.close\' | translate}}</md-button> <md-button class="md-raised md-default" ng-click="copy()" ng-if="implementationPlan.canChange">{{\'main.button.copy\' | translate}}</md-button> </div> <div ng-show="implementationPlan.status === VERSION_STATUS.K" layout-xs="column"> <md-button class="md-raised md-primary" ng-click="goToEditForm()" ng-if="implementationPlan.canChange">{{\'main.button.change\' | translate}}</md-button> <md-button ng-click="setStatusClosed()" class="md-raised" ng-if="implementationPlan.canClose">{{\'curriculum.statuschange.implementationPlan.button.close\' | translate}}</md-button> <md-button class="md-raised md-default" ng-click="copy()" ng-if="implementationPlan.canChange">{{\'main.button.copy\' | translate}}</md-button> </div> <div ng-show="implementationPlan.status === VERSION_STATUS.C"> <md-button class="md-raised md-default" ng-click="copy()" ng-if="implementationPlan.canChange">{{\'main.button.copy\' | translate}}</md-button> </div> <!--\r\n    <a href="{{implementationPlanPdfUrl}}" target="_blank" class="md-button md-raised" ng-if="implementationPlan.id">{{\'main.button.print\' | translate}}</a>\r\n    --> <a href="{{curriculumVersionPdfUrl}}" target="_blank" class="md-button md-raised" ng-if="showPrintButton()">{{\'module.implementationPlan.print\' | translate}}</a> <a href="{{curriculumVersionModulesPdfUrl}}" target="_blank" class="md-button md-raised" ng-if="showPrintButton()">{{\'module.implementationPlan.printModules\' | translate}}</a> <md-button class="md-raised md-default" ng-click="back(\'#/vocationalCurriculum/\' + curriculumId + \'/view\')">{{\'main.button.back\' | translate}}</md-button> </div> </div> <style>.lowerBorder {\r\n    border-bottom: solid 1px #E0E0E0;\r\n  }</style>'),a.put("vocationalCurriculum/implementationPlan/module.view.dialog.html",'<md-dialog aria-label="module add dialog" flex="60" flex-xs="100" class="form-readonly"> <form ng-cloak name="dialogForm"> <md-toolbar> <div class="md-toolbar-tools"> <h2 flex>{{"module.viewToughtModule" | translate}}</h2> <md-button class="md-icon-button" ng-click="cancel()"> <md-icon md-font-set="material-icons">close</md-icon> </md-button> </div> </md-toolbar> <md-dialog-content> <span flex></span> <div class="ois-form-layout" layout="column" layout-margin ng-cloak> <fieldset tabindex="1" ng-if="module.canHaveOccupations"> <legend md-colors="{color: \'primary-800\'}" class="md-title-small"> {{module.occupation ? \'module.occupationPartOccupationSpecialize\' : \'module.partOccupation\' | translate}} </legend> <div layout="column"> <div ng-repeat="speciality in item.specialities" layout="row"> <div flex="5">&nbsp;</div> <md-checkbox ng-model="specialitiesSelected[speciality.code]" aria-label="{{currentLanguageNameField(speciality)}}" disabled> {{currentLanguageNameField(speciality)}} </md-checkbox> </div> </div> <div layout="column"> <div ng-repeat="item in module.curriculumOccupations | orderBy: \'occupation\'"> <md-checkbox ng-model="occupationsSelected[item.occupation]" disabled> <hois-classifier-value ng-model="item.occupation" main-classifier-codes="KUTSE,OSAKUTSE" class="inline"></hois-classifier-value> </md-checkbox> <div layout="column"> <div ng-repeat="partOccupation in item.partOccupations | orderBy" flex layout="row"> <div flex="5">&nbsp;</div> <md-checkbox ng-model="occupationsSelected[partOccupation]" disabled> <hois-classifier-value ng-model="partOccupation" main-classifier-code="OSAKUTSE" class="inline"></hois-classifier-value> </md-checkbox> </div> </div> <div layout="column"> <div ng-repeat="speciality in item.specialities | orderBy" layout="row"> <div flex="5">&nbsp;</div> <md-checkbox ng-model="specialitiesSelected[speciality]" disabled> <hois-classifier-value ng-model="speciality" main-classifier-code="SPETSKUTSE" class="inline"></hois-classifier-value> </md-checkbox> </div> </div> </div> </div> </fieldset> <div>&nbsp;</div> <div layout="row" flex> <md-input-container flex="45"> <label>{{\'module.type\' | translate}}</label> <hois-classifier-value name="module" ng-model="module.module" main-classifier-code="KUTSEMOODUL"></hois-classifier-value> </md-input-container> <md-input-container flex="10" flex-offset="5"> <label>{{\'module.credits\' | translate}}</label> <hois-value value="module.credits.toString()"></hois-value> </md-input-container> </div> <md-input-container flex> <label>{{\'module.nameEt\' | translate}}</label> <hois-value value="module.nameEt"></hois-value> </md-input-container> <md-input-container flex> <label>{{\'module.nameEn\' | translate}}</label> <hois-value value="module.nameEn"></hois-value> </md-input-container> <md-input-container flex> <label>{{\'module.objectivesEt\' | translate}}</label> <hois-value value="module.objectivesEt" class="scrollable"></hois-value> </md-input-container> <md-input-container flex> <label>{{\'module.objectivesEn\' | translate}}</label> <hois-value value="module.objectivesEt" class="scrollable"></hois-value> </md-input-container> <fieldset tabindex="1"> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'module.studyOutcome\' | translate}}</legend> <div layout="column"> <div ng-repeat="item in module.outcomes | orderBy: \'orderNr\'" class="occupation-row align-center" layout="row" flex> <div flex="45"> <p class="scrollable">{{item.outcomeEt}}</p> </div> <div flex="50" flex-offset="5"> <p class="scrollable">{{item.outcomeEn}}</p> </div> </div> </div> </fieldset> <div>&nbsp;</div> <md-input-container flex> <label>{{\'stateCurriculum.enter.module.criteriaEt\' | translate}}</label> <hois-value value="module.assessmentsEt" class="scrollable"></hois-value> </md-input-container> <md-input-container flex> <label>{{\'stateCurriculum.enter.module.criteriaEn\' | translate}}</label> <hois-value value="module.assessmentsEn" class="scrollable"></hois-value> </md-input-container> <md-input-container flex> <label>{{\'module.competencesAquired\' | translate}}</label> <hois-classifier-value ng-model="module.competences" main-classifier-code="KOMPETENTS"></hois-classifier-value> </md-input-container> <md-input-container flex> <md-checkbox ng-model="module.practice" disabled>{{\'module.practice\' | translate}}</md-checkbox> </md-input-container> <md-input-container> <md-checkbox ng-model="module.isAdditional" aria-label="{{\'stateCurriculum.enter.module.isAdditional\' | translate}}" disabled> {{\'stateCurriculum.enter.module.isAdditional\' | translate}} </md-checkbox> </md-input-container> </div> </md-dialog-content> <span flex></span> <md-dialog-actions layout="row" layout-align="start center"> <md-button class="md-raised" ng-click="cancel()">{{"main.button.close" | translate}}</md-button> </md-dialog-actions> </form> </md-dialog>'),a.put("vocationalCurriculum/implementationPlan/occupation.module.edit.html",'<div class="ois-form-layout-padding nomargin"> <div layout="column" flex ng-show="viewMode === viewModes.NEW"> <div> <h2 translate="module.occupationalModuleDataInsertion" translate-values="{{curriculumModule}}"></h2> </div> <div layout="column" flex layout-gt-sm="row"> <md-radio-group class="md-primary base-module-menu" ng-model="startMode" layout="row" layout-align-gt-sm="center center"> <md-radio-button ng-value="startModes.BASE_MODULE" aria-label="Baasmoodul"> {{\'basemodule.label\' | translate}} </md-radio-button> <md-radio-button ng-value="startModes.COPY_MODULE" aria-label="Kopeeri kõik andmed baasmodulist"> {{\'basemodule.copyModule\' | translate}} </md-radio-button> <md-radio-button ng-value="startModes.INDEPENDENT" aria-label="Sistestan ise"> {{\'basemodule.enterYourself\' | translate}} </md-radio-button> </md-radio-group> <div layout="row" flex> <md-button class="md-primary md-raised" ng-click="continue()">Jätka</md-button> </div> </div> </div> <md-button class="md-raised" ng-show="hasBaseModuleRight && occupationModule.id && curriculumModule.id && !curriculumModule.baseModule" ng-click="createBaseModule()">{{\'basemodule.operation.createNewBaseModule.label\' | translate}}</md-button> <div layout="column" flex layout-gt-sm="row" ng-show="occupationModule.id && !occupationModule.baseModule && curriculumModule.baseModule"> <div layout="row" flex ng-show="viewMode !== viewModes.REPLACE"> <md-button class="md-raised" ng-click="viewMode = viewModes.REPLACE" ng-disabled="!replaceForm.themes[occupationModule.id]">{{\'basemodule.operation.replace.label\' | translate}}</md-button> <p class="md-body-1" style="color: #dd2c00" ng-show="!replaceForm.themes[occupationModule.id]">{{\'basemodule.warning.tooManyThemes\' | translate}}</p> </div> <form name="replaceModuleForm" ng-cloak ng-show="viewMode === viewModes.REPLACE" layout="column" flex> <div class="form-readonly" layout="column"> <md-input-container flex> <label>{{\'basemodule.curriculumVersion\' | translate}}</label> <hois-value class="textInput" value="currentLanguageNameField(curriculumVersion)"></hois-value> </md-input-container> <md-input-container flex> <label>{{\'module.\' + currentLanguageNameVariable() | translate}}</label> <hois-value class="textInput" value="currentLanguageNameField(curriculumModule)"></hois-value> </md-input-container> <md-input-container flex> <label>{{\'module.credits\' | translate}}</label> <hois-value class="textInput" value="curriculumModule.credits"></hois-value> </md-input-container> </div> <md-input-container flex> <label>{{\'basemodule.label\' | translate}}</label> <input ng-value="currentLanguageNameField(replaceForm.baseModule)" type="text" disabled> </md-input-container> <div ng-show="replaceForm.themes[occupationModule.id].length > 0"> <fieldset tabindex="0"> <legend md-colors="{color: \'default-primary-800\'}" class="md-title-small">{{\'basemodule.themes\' | translate}}</legend> <p class="md-body-1" style="color: #dd2c00; margin: 3px" ng-if="replaceForm.showOneToOneThemeError">{{\'basemodule.warning.oneToOneTheme\' | translate}}</p> <div layout="column" ng-repeat="oModule in replaceForm.occupationModules"> <div flex> <div layout="row" ng-repeat="theme in replaceForm.themes[oModule.id] | orderBy: \'+id\'"> <p class="md-body-1" flex flex-offset="0" flex-offset-gt-sm="20">{{currentLanguageNameField(theme)}}</p> <md-input-container flex="50" flex-offset="10"> <label>{{\'basemodule.baseModuleTheme\' | translate}}</label> <md-select ng-model="replaceForm.connections[theme.id]" required ng-change="selectChange(oModule.id, theme.id, replaceForm.connections[theme.id])" ng-model-options="{trackBy: \'$value.id\'}"> <md-option ng-value="bTheme" ng-repeat="bTheme in replaceForm.baseModuleThemes | orderBy: \'+id\'">{{currentLanguageNameField(bTheme)}}</md-option> </md-select> </md-input-container> </div> </div> </div> </fieldset> </div> <br> <div layout="row" flex> <md-button class="md-primary md-raised" ng-click="replace()">{{\'main.button.replace\' | translate}}</md-button> <md-button class="md-raised" ng-click="viewMode = viewModes.MAIN">{{\'main.button.back\' | translate}}</md-button> </div> </form> </div> <div layout="row" flex ng-show="occupationModule.id && occupationModule.baseModule"> <md-button class="md-raised" ng-click="release()">{{\'basemodule.operation.release.label\' | translate}}</md-button> </div> <form name="occupationModuleForm" ng-cloak ng-show="viewMode === viewModes.MAIN"> <div> <h2 translate="module.occupationalModuleDataInsertion" translate-values="{{curriculumModule}}"></h2> </div> <div layout="column"> <fieldset tabindex="1"> <legend md-colors="{color: \'default-primary-800\'}" class="md-title-small">{{\'module.capacityDistribution\' | translate}}</legend> <div layout="row" style="padding-bottom:1em" flex class="secondary-table-header"> <div flex="30">&nbsp;</div> <div flex="30">{{\'module.capacity\' | translate}}</div> <div flex="40" layout="row">{{\'module.contactStudy\' | translate}}</div> </div> <div ng-repeat="item in occupationModule.capacities | orderBy: \'nameEt\' track by item.capacityType" layout="row" class="occupation-module-capacity-row"> <div flex="30" class="occupation-module-capacity">{{currentLanguageNameField(item)}}</div> <div flex="30"> <md-input-container flex> <input ng-model="item.hours" type="number" min="0" max="9999" pattern="^\\d+$" aria-label="capacity hours" class="small-input" ng-readonly="hasThemes()" ng-required="item.contact"> </md-input-container> </div> <div flex="40" layout="row"> <md-checkbox ng-model="item.contact" aria-label="capacity contact" ng-disabled="hasThemes()" class="occupation-module-capacity-contact"></md-checkbox> </div> </div> </fieldset> <div>&nbsp;</div> <md-input-container flex> <label>{{\'module.requirements\' | translate}}</label> <textarea ng-model="occupationModule.requirementsEt" md-maxlength="20000" max-rows="10" required ng-readonly="occupationModule.baseModule"></textarea> </md-input-container> <md-input-container flex> <label>{{\'module.assessments\' | translate}}</label> <textarea ng-model="occupationModule.assessmentsEt" md-maxlength="20000" max-rows="10" required ng-readonly="occupationModule.baseModule"></textarea> </md-input-container> <md-input-container flex> <label>{{\'module.learningMethods\' | translate}}</label> <textarea ng-model="occupationModule.learningMethodsEt" md-maxlength="20000" max-rows="10" ng-readonly="occupationModule.baseModule"></textarea> </md-input-container> <md-input-container flex> <label>{{\'module.assessmentMethodsAndTasks\' | translate}}</label> <textarea ng-model="occupationModule.assessmentMethodsEt" md-maxlength="20000" max-rows="10" ng-readonly="occupationModule.baseModule"></textarea> </md-input-container> <md-input-container flex> <label>{{\'module.independentStudyDescription\' | translate}}</label> <textarea ng-model="occupationModule.independentStudyEt" md-maxlength="20000" max-rows="2" ng-readonly="occupationModule.baseModule"></textarea> </md-input-container> <md-input-container flex> <label>{{\'module.studyMaterials\' | translate}}</label> <textarea ng-model="occupationModule.studyMaterials" md-maxlength="20000" max-rows="2" ng-readonly="occupationModule.baseModule"></textarea> </md-input-container> <div>&nbsp;</div> <fieldset tabindex="2" layout="column"> <legend md-colors="{color: \'default-primary-800\'}" class="md-title-small">{{\'module.gradeFormation\' | translate}}</legend> <div flex layout="row"> <span flex="30" class="common-label">{{\'module.assessmentType\' | translate}}</span> <hois-classifier-radio layout="row" ng-model="occupationModule.assessment" model-value-attr="code" main-classifier-code="KUTSEHINDAMISVIIS" required class="md-primary" ng-disabled="occupationModule.baseModule"></hois-classifier-radio> </div> <div>&nbsp;</div> <md-input-container flex> <label>{{\'module.totalGradeDescription\' | translate}}</label> <textarea ng-model="occupationModule.totalGradeDescription" md-maxlength="20000" max-rows="2" required ng-readonly="occupationModule.baseModule"></textarea> </md-input-container> <div>&nbsp;</div> <div ng-show="occupationModule.assessment === \'KUTSEHINDAMISVIIS_E\'" layout="column"> <md-input-container flex> <label>{{\'module.grade3Description\' | translate}}</label> <textarea ng-model="occupationModule.grade3Description" md-maxlength="20000" max-rows="2" ng-required="occupationModule.assessment === \'KUTSEHINDAMISVIIS_E\'" ng-readonly="occupationModule.baseModule"></textarea> </md-input-container> <md-input-container flex> <label>{{\'module.grade4Description\' | translate}}</label> <textarea ng-model="occupationModule.grade4Description" md-maxlength="20000" max-rows="2" ng-required="occupationModule.assessment === \'KUTSEHINDAMISVIIS_E\'" ng-readonly="occupationModule.baseModule"></textarea> </md-input-container> <md-input-container flex> <label>{{\'module.grade5Description\' | translate}}</label> <textarea ng-model="occupationModule.grade5Description" md-maxlength="20000" max-rows="2" ng-required="occupationModule.assessment === \'KUTSEHINDAMISVIIS_E\'" ng-readonly="occupationModule.baseModule"></textarea> </md-input-container> </div> <div ng-show="occupationModule.assessment === \'KUTSEHINDAMISVIIS_M\'" layout="column" flex> <md-input-container flex> <label>{{\'module.gradeADescription\' | translate}}</label> <textarea ng-model="occupationModule.passDescription" md-maxlength="20000" max-rows="10" ng-required="occupationModule.assessment === \'KUTSEHINDAMISVIIS_M\'" ng-readonly="occupationModule.baseModule"></textarea> </md-input-container> </div> </fieldset> <div>&nbsp;</div> <fieldset tabindex="3"> <legend md-colors="{color: \'default-primary-800\'}" class="md-title-small">{{\'module.themes\' | translate}}</legend> <div layout="column"> <div flex="10"> <md-button class="md-raised" ng-click="openAddThemeDialog()" ng-if="occupationModule.id && !occupationModule.baseModule">{{\'main.button.add\' | translate}}</md-button> </div> <div flex> <md-table-container> <table md-table class="secondary-table"> <thead md-head> <tr md-row> <th md-column>{{\'module.themeName\' | translate}}</th> <th md-column>{{\'module.capacityEkapPerHour\' | translate}}</th> <th md-column>{{\'module.subthemes\' | translate}}</th> <th md-column>{{\'module.studyYear\' | translate}}</th> <th md-column ng-if="!occupationModule.baseModule"></th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="theme in occupationModule.themes | orderBy: currentLanguageNameField()"> <td md-cell> <a class="md-primary one-row" ng-click="openAddThemeDialog(theme)">{{currentLanguageNameField(theme)}}</a> </td> <td md-cell> {{theme.credits}}/{{theme.hours}} </td> <td md-cell> <p class="scrollable">{{theme.subthemes}}</p> </td> <td md-cell> {{theme.studyYearNumber}} </td> <td md-cell ng-if="!occupationModule.baseModule"> <a class="remove" ng-click="deleteTheme(theme)"> &times; </a> </td> </tr> </tbody> </table> </md-table-container> </div> </div> </fieldset> <div flex>&nbsp;</div> <fieldset tabindex="4" layout="column"> <legend md-colors="{color: \'default-primary-800\'}" class="md-title-small">{{\'module.proportionPerStudyYear\' | translate}}</legend> <div layout="row"> <md-input-container flex ng-repeat="yc in studyYears track by $index"> <label>{{$index+1}}.&nbsp;{{\'module.studyYearLowercase\' | translate}}</label> <input ng-disabled="occupationModule.themes.length > 0" ng-model="occupationModule.yearCapacities[$index].credits" type="number" min="0" max="999" pattern="^\\d+(\\.\\d{1})?$" aria-label="year capacity credits" name="yearCapacities{{$index}}" required> <div ng-messages="dialogForm[\'yearCapacities\'+$index].$error" ng-show="dialogForm[\'yearCapacities\'+$index].$dirty"> <div ng-message="min"> {{\'main.messages.error.positive\' | translate}} </div> <div ng-message="max"> {{\'curriculum.error.max999\' | translate}} </div> <div ng-message="pattern"> {{\'stateCurriculum.error.decimalPresision\' | translate}} </div> </div> </md-input-container> </div> </fieldset> <div flex>&nbsp;</div> <md-autocomplete name="teacher" md-selected-item="occupationModule.teacher" md-search-text="occupationModule.supervisor" md-items="teacher in searchTeacher(occupationModule.supervisor)" md-item-text="currentLanguageNameField(teacher)" md-min-length="1" md-floating-label="{{\'module.supervisor\' | translate}}" md-no-cache class="small-margin" required md-require-match ng-disabled="occupationModule.baseModule" flex> <md-item-template> <span md-highlight-text="occupationModule.supervisor" md-highlight-flags="^i">{{currentLanguageNameField(teacher)}}</span> </md-item-template> <md-not-found> {{\'main.messages.error.notFound\' | translate}} </md-not-found> </md-autocomplete> </div> <span flex></span> <md-button class="md-raised md-primary" ng-click="save()">{{"main.button.save" | translate}}</md-button> <md-button ng-if="occupationModule.id" class="md-raised md-default" ng-click="delete()">{{\'main.button.delete\' | translate}}</md-button> <md-button class="md-raised" ng-click="back(backToEditForm, occupationModuleForm)">{{"main.button.back" | translate}}</md-button> </form> </div> <style>.base-module-menu {\r\n    padding-right: 20px;\r\n  }\r\n\r\n  @media screen and (max-width: 840px) {\r\n    .base-module-menu {\r\n      padding-right: 0;\r\n    }\r\n  }\r\n  \r\n  .form-readonly > md-input-container {\r\n    margin-bottom: 18px !important;\r\n  }\r\n\r\n  .md-select-menu-container {\r\n    max-width: -moz-calc(100vw - 1em);\r\n    max-width: -webkit-calc(100vw - 1em);\r\n    max-width: calc(100vw - 1em);\r\n  }</style>'),
a.put("vocationalCurriculum/implementationPlan/occupation.module.theme.edit.dialog.html",'<md-dialog aria-label="vocational curriculum implementation plan module theme add dialog" flex="60" flex-xs="100"> <form name="dialogForm" ng-cloak> <md-toolbar> <div class="md-toolbar-tools"> <h2>{{"module.addingTheme" | translate}}</h2> <span flex></span> <md-button class="md-icon-button" ng-click="cancel()"> <md-icon md-font-set="material-icons">close</md-icon> </md-button> </div> </md-toolbar> <md-dialog-content> <div class="ois-form-layout-padding nomargin" layout="column" ng-cloak> <md-input-container> <label>{{\'theme.name\' | translate}}</label> <input ng-model="occupationModuleTheme.nameEt" type="text" required md-maxlength="255" ng-readonly="hasBaseModule"> </md-input-container> <div layout="column" layout-gt-md="row"> <div layout="column" layout-gt-sm="row" flex-gt-md="50" flex="100"> <md-input-container flex-gt-sm="40" flex="100"> <label>{{\'theme.capacityAndUnit\' | translate}}</label> </md-input-container> <br><br> <div layout="row" flex-gt-sm="60" flex="100"> <md-input-container flex-gt-sm="50" flex="100"> <label>EKAP</label> <input ng-model="occupationModuleTheme.credits" name="credits" type="number" min="0" max="999" pattern="^\\d+(\\.\\d{1})?$" ng-change="setDefaultHours()" required ng-readonly="hasBaseModule"> <div ng-messages="dialogForm.credits.$error" ng-show="dialogForm.credits.$dirty"> <div ng-message="min"> {{\'main.messages.error.positive\' | translate}} </div> <div ng-message="max"> {{\'curriculum.error.max999\' | translate}} </div> <div ng-message="pattern"> {{\'stateCurriculum.error.decimalPresision\' | translate}} </div> </div> </md-input-container> <md-input-container flex-gt-sm="50" flex="100"> <label>{{\'main.hour\' | translate}}</label> <input ng-model="occupationModuleTheme.hours" name="hours" type="number" min="0" max="9999" pattern="^\\d+$" required ng-change="setDefaultCredits()" ng-readonly="hasBaseModule"> <div ng-messages="dialogForm.hours.$error" ng-show="dialogForm.hours.$dirty"> <div ng-message="min"> {{\'main.messages.error.positive\' | translate}} </div> <div ng-message="max"> {{\'curriculum.error.max9999\' | translate}} </div> <div ng-message="pattern"> {{\'stateCurriculum.enter.credits.integer\' | translate}} </div> </div> </md-input-container> </div> </div> <div layout="row" flex-gt-md="50" flex="100"> <md-input-container flex-gt-sm="50" flex="100"> <label>{{\'theme.proportionInModule\' | translate}}</label> <input ng-model="occupationModuleTheme.proportion" type="number" name="proportion" min="0" max="999" pattern="^\\d+(\\.\\d{1})?$"> <div ng-messages="dialogForm.proportion.$error" ng-show="dialogForm.proportion.$dirty"> <div ng-message="min"> {{\'main.messages.error.positive\' | translate}} </div> <div ng-message="max"> {{\'curriculum.error.max999\' | translate}} </div> <div ng-message="pattern"> {{\'stateCurriculum.error.decimalPresision\' | translate}} </div> </div> </md-input-container> <md-input-container flex-gt-sm="50" flex="100"> <label>{{\'module.studyYear\' | translate}}</label> <md-select ng-model="occupationModuleTheme.studyYearNumber"> <md-option ng-value="null"></md-option> <md-option ng-repeat="studyYearNumber in studyYears" ng-value="studyYearNumber" aria-label="{{studyYearNumber}}">{{studyYearNumber}}</md-option> </md-select> </md-input-container> </div> </div> <div flex> <fieldset tabindex="1"> <legend md-colors="{color: \'default-primary-800\'}" class="md-title-small">{{\'theme.capacityDistribution\' | translate}}</legend> <div layout="row" style="padding-bottom:1em" flex class="secondary-table-header"> <div flex="30">&nbsp;</div> <div flex="30">{{\'module.capacity\' | translate}}</div> <div flex="40" layout="row">{{\'module.contactStudy\' | translate}}</div> </div> <div ng-repeat="item in occupationModuleTheme.capacities | orderBy: \'nameEt\' track by item.capacityType" layout="row" class="secondary-table-row"> <div flex="30" class="occupation-module-capacity">{{currentLanguageNameField(item)}}</div> <div flex="30"> <md-input-container flex> <input ng-model="item.hours" type="number" min="0" max="9999" pattern="^\\d+$" aria-label="capacity hours" class="small-input" ng-required="item.contact"> </md-input-container> </div> <div flex="40" layout="row"> <md-checkbox ng-model="item.contact" aria-label="capacity contact" class="occupation-module-capacity-contact"></md-checkbox> </div> </div> </fieldset> </div> <div>&nbsp;</div> <md-input-container flex> <label>{{\'module.subthemes\' | translate}}</label> <textarea ng-model="occupationModuleTheme.subthemes" md-maxlength="10000" max-rows="10" ng-readonly="hasBaseModule"></textarea> </md-input-container> <md-input-container flex> <label>{{\'theme.connectionToStudyOutcome\' | translate}}</label> <md-select ng-model="occupationModuleTheme.outcomes" multiple ng-disabled="hasBaseModule"> <md-option ng-repeat="outcome in outcomes" ng-value="outcome.id" aria-label="{{currentLanguage() === \'en\' ? outcome.outcomeEn : outcome.outcomeEt}}">{{currentLanguage() === \'en\' ? outcome.outcomeEn : outcome.outcomeEt}}</md-option> </md-select> </md-input-container> <div>&nbsp;</div> <div flex> <fieldset tabindex="2"> <legend md-colors="{color: \'default-primary-800\'}" class="md-title-small">{{\'module.themeGradeFormation\' | translate}}</legend> <div layout="column"> <div flex layout="row"> <span flex="30" class="common-label">{{\'theme.assessmentType\' | translate}}</span> <md-radio-group ng-model="occupationModuleTheme.assessment" layout="row" ng-disabled="hasBaseModule"> <md-radio-button ng-repeat="option in assessments | orderBy: \'nameEt\' track by option.code" ng-value="option.code" aria-label="{{ currentLanguageNameField(option) }}"> {{ currentLanguageNameField(option) }} </md-radio-button> <md-radio-button ng-value="null" aria-label="{{\'module.noAssessment\' | translate}}"> {{\'module.noAssessment\' | translate}} </md-radio-button> </md-radio-group> </div> <div>&nbsp;</div> <md-input-container flex ng-show="occupationModuleTheme.assessment"> <label>{{\'module.totalGradeDescription\' | translate}}</label> <textarea ng-model="occupationModuleTheme.totalGradeDescription" md-maxlength="10000" max-rows="10" ng-required="occupationModuleTheme.assessment" ng-readonly="hasBaseModule"></textarea> </md-input-container> <div ng-show="occupationModuleTheme.assessment === \'KUTSEHINDAMISVIIS_E\'" layout="column" flex> <md-input-container flex> <label>{{\'module.grade3Description\' | translate}}</label> <textarea ng-model="occupationModuleTheme.grade3Description" md-maxlength="10000" max-rows="10" ng-required="occupationModuleTheme.assessment === \'KUTSEHINDAMISVIIS_E\'" ng-readonly="hasBaseModule"></textarea> </md-input-container> <md-input-container flex> <label>{{\'module.grade4Description\' | translate}}</label> <textarea ng-model="occupationModuleTheme.grade4Description" md-maxlength="10000" max-rows="10" ng-required="occupationModuleTheme.assessment === \'KUTSEHINDAMISVIIS_E\'" ng-readonly="hasBaseModule"></textarea> </md-input-container> <md-input-container flex> <label>{{\'module.grade5Description\' | translate}}</label> <textarea ng-model="occupationModuleTheme.grade5Description" md-maxlength="10000" max-rows="10" ng-required="occupationModuleTheme.assessment === \'KUTSEHINDAMISVIIS_E\'" ng-readonly="hasBaseModule"></textarea> </md-input-container> </div> <div ng-show="occupationModuleTheme.assessment === \'KUTSEHINDAMISVIIS_M\'" layout="column" flex> <md-input-container flex> <label>{{\'module.gradeADescription\' | translate}}</label> <textarea ng-model="occupationModuleTheme.passDescription" md-maxlength="10000" max-rows="2" ng-required="occupationModuleTheme.assessment === \'KUTSEHINDAMISVIIS_M\'" ng-readonly="hasBaseModule"></textarea> </md-input-container> </div> </div> </fieldset> </div> <div>&nbsp;</div> </div> </md-dialog-content> <span flex></span> <md-dialog-actions layout="row" layout-align="start center"> <md-button class="md-raised md-primary" ng-click="saveTheme()">{{"main.button.save" | translate}}</md-button> <md-button class="md-raised" ng-click="cancel()">{{"main.button.close" | translate}}</md-button> </md-dialog-actions> </form> </md-dialog>'),a.put("vocationalCurriculum/implementationPlan/occupation.module.theme.view.dialog.html",'<md-dialog aria-label="vocational curriculum implementation plan module theme add dialog" flex="60" flex-xs="100"> <form name="dialogForm" ng-cloak> <md-toolbar> <div class="md-toolbar-tools"> <h2>{{"module.viewingTheme" | translate}}</h2> <span flex></span> <md-button class="md-icon-button" ng-click="cancel()"> <md-icon md-font-set="material-icons">close</md-icon> </md-button> </div> </md-toolbar> <md-dialog-content> <div class="ois-form-layout-padding nomargin" layout="column" ng-cloak> <md-input-container> <label>{{\'theme.name\' | translate}}</label> <input ng-model="occupationModuleTheme.nameEt" type="text" readonly> </md-input-container> <div layout="column" layout-gt-md="row"> <div layout="column" layout-gt-sm="row" flex-gt-md="50" flex="100"> <md-input-container flex-gt-sm="40" flex="100"> <label>{{\'theme.capacityAndUnit\' | translate}}</label> </md-input-container> <br><br> <div layout="row" flex-gt-sm="60" flex="100"> <md-input-container flex-gt-sm="50" flex="100"> <label>EKAP</label> <input ng-model="occupationModuleTheme.credits" name="credits" type="number" readonly> </md-input-container> <md-input-container flex-gt-sm="50" flex="100"> <label>{{\'main.hour\' | translate}}</label> <input ng-model="occupationModuleTheme.hours" name="hours" type="number" readonly> </md-input-container> </div> </div> <div layout="row" flex-gt-md="50" flex="100"> <md-input-container flex-gt-sm="50" flex="100"> <label>{{\'theme.proportionInModule\' | translate}}</label> <input ng-model="occupationModuleTheme.proportion" type="number" name="proportion" readonly> </md-input-container> <md-input-container flex-gt-sm="50" flex="100"> <label>{{\'module.studyYear\' | translate}}</label> <input ng-model="occupationModuleTheme.studyYearNumber" readonly> </md-input-container> </div> </div> <div flex> <fieldset tabindex="1"> <legend md-colors="{color: \'default-primary-800\'}" class="md-title-small">{{\'theme.capacityDistribution\' | translate}}</legend> <table flex class="module-capacities"> <tr style="padding-bottom:1em" flex class="secondary-table-header"> <td> </td><td>{{\'module.capacity\' | translate}} </td><td>{{\'module.contactStudy\' | translate}} </td></tr> <tr ng-repeat="item in occupationModuleTheme.capacities | orderBy: \'nameEt\' track by item.capacityType" class="secondary-table-row"> <td>{{currentLanguageNameField(item)}}</td> <td>{{item.hours}}</td> <td>{{item.contact ? \'main.yes\' : \'main.no\' | translate}}</td> </tr> </table> </fieldset> </div> <div>&nbsp;</div> <md-input-container flex> <label>{{\'module.subthemes\' | translate}}</label> <textarea ng-model="occupationModuleTheme.subthemes" max-rows="10" readonly></textarea> </md-input-container> <md-input-container flex> <label>{{\'theme.connectionToStudyOutcome\' | translate}}</label> <md-select ng-model="occupationModuleTheme.outcomes" multiple disabled> <md-option ng-repeat="outcome in outcomes" ng-value="outcome.id" aria-label="{{currentLanguage() === \'en\' ? outcome.outcomeEn : outcome.outcomeEt}}">{{currentLanguage() === \'en\' ? outcome.outcomeEn : outcome.outcomeEt}}</md-option> </md-select> </md-input-container> <div>&nbsp;</div> <div flex> <fieldset tabindex="2"> <legend md-colors="{color: \'default-primary-800\'}" class="md-title-small">{{\'module.themeGradeFormation\' | translate}}</legend> <div layout="column" style="overflow: auto"> <div flex layout="row"> <span flex="30" class="common-label">{{\'theme.assessmentType\' | translate}}</span> <md-radio-group ng-model="occupationModuleTheme.assessment" layout="row" disabled> <md-radio-button ng-repeat="option in assessments | orderBy: \'nameEt\' track by option.code" ng-value="option.code" aria-label="{{ currentLanguageNameField(option) }}"> {{ currentLanguageNameField(option) }} </md-radio-button> <md-radio-button ng-value="null" aria-label="{{\'module.noAssessment\' | translate}}"> {{\'module.noAssessment\' | translate}} </md-radio-button> </md-radio-group> </div> <div>&nbsp;</div> <md-input-container flex ng-show="occupationModuleTheme.assessment"> <label>{{\'module.totalGradeDescription\' | translate}}</label> <textarea ng-model="occupationModuleTheme.totalGradeDescription" max-rows="10" readonly></textarea> </md-input-container> <div ng-show="occupationModuleTheme.assessment === \'KUTSEHINDAMISVIIS_E\'" layout="column" flex> <md-input-container flex> <label>{{\'module.grade3Description\' | translate}}</label> <textarea ng-model="occupationModuleTheme.grade3Description" max-rows="10" readonly></textarea> </md-input-container> <md-input-container flex> <label>{{\'module.grade4Description\' | translate}}</label> <textarea ng-model="occupationModuleTheme.grade4Description" max-rows="10" readonly></textarea> </md-input-container> <md-input-container flex> <label>{{\'module.grade5Description\' | translate}}</label> <textarea ng-model="occupationModuleTheme.grade5Description" max-rows="10" readonly></textarea> </md-input-container> </div> <div ng-show="occupationModuleTheme.assessment === \'KUTSEHINDAMISVIIS_M\'" layout="column" flex> <md-input-container flex> <label>{{\'module.gradeADescription\' | translate}}</label> <textarea ng-model="occupationModuleTheme.passDescription" max-rows="2" readonly></textarea> </md-input-container> </div> </div> </fieldset> </div> <div>&nbsp;</div> </div> </md-dialog-content> <span flex></span> <md-dialog-actions layout="row" layout-align="start center"> <md-button class="md-raised" ng-click="cancel()">{{"main.button.close" | translate}}</md-button> </md-dialog-actions> </form> </md-dialog>'),a.put("vocationalCurriculum/implementationPlan/occupation.module.view.html",'<div class="ois-form-layout-padding nomargin"> <form name="occupationModuleForm" ng-cloak> <div> <h2 translate="module.occupationalModuleDataView" translate-values="{{curriculumModule}}"></h2> </div> <div layout="column"> <fieldset tabindex="1"> <legend md-colors="{color: \'default-primary-800\'}" class="md-title-small">{{\'module.capacityDistribution\' | translate}}</legend> <div layout="row" style="padding-bottom:1em" flex class="secondary-table-header"> <div flex="30">&nbsp;</div> <div flex="30">{{\'module.capacity\' | translate}}</div> <div flex="40" layout="row">{{\'module.contactStudy\' | translate}}</div> </div> <div ng-repeat="item in occupationModule.capacities | orderBy: \'nameEt\' track by item.capacityType" layout="row" class="occupation-module-capacity-row"> <div flex="30" class="occupation-module-capacity">{{currentLanguageNameField(item)}}</div> <div flex="30"> <md-input-container flex> <input ng-model="item.hours" type="number" aria-label="capacity hours" class="small-input" readonly> </md-input-container> </div> <div flex="40" layout="row"> <md-checkbox ng-model="item.contact" aria-label="capacity contact" disabled class="occupation-module-capacity-contact"></md-checkbox> </div> </div> </fieldset> <div>&nbsp;</div> <md-input-container flex> <label>{{\'module.requirements\' | translate}}</label> <textarea ng-model="occupationModule.requirementsEt" max-rows="10" readonly></textarea> </md-input-container> <md-input-container flex> <label>{{\'module.assessments\' | translate}}</label> <textarea ng-model="occupationModule.assessmentsEt" max-rows="10" readonly></textarea> </md-input-container> <md-input-container flex> <label>{{\'module.learningMethods\' | translate}}</label> <textarea ng-model="occupationModule.learningMethodsEt" max-rows="10" readonly></textarea> </md-input-container> <md-input-container flex> <label>{{\'module.assessmentMethodsAndTasks\' | translate}}</label> <textarea ng-model="occupationModule.assessmentMethodsEt" max-rows="10" readonly></textarea> </md-input-container> <md-input-container flex> <label>{{\'module.independentStudyDescription\' | translate}}</label> <textarea ng-model="occupationModule.independentStudyEt" max-rows="2" readonly></textarea> </md-input-container> <md-input-container flex> <label>{{\'module.studyMaterials\' | translate}}</label> <textarea ng-model="occupationModule.studyMaterials" max-rows="2" readonly></textarea> </md-input-container> <div>&nbsp;</div> <fieldset tabindex="2" layout="column" style="overflow:auto"> <legend md-colors="{color: \'default-primary-800\'}" class="md-title-small">{{\'module.gradeFormation\' | translate}}</legend> <div flex layout="row"> <span flex="30" class="common-label">{{\'module.assessmentType\' | translate}}</span> <hois-classifier-radio layout="row" ng-model="occupationModule.assessment" model-value-attr="code" main-classifier-code="KUTSEHINDAMISVIIS" disabled class="md-primary"></hois-classifier-radio> </div> <div>&nbsp;</div> <md-input-container flex> <label>{{\'module.totalGradeDescription\' | translate}}</label> <textarea ng-model="occupationModule.totalGradeDescription" max-rows="2" readonly></textarea> </md-input-container> <div>&nbsp;</div> <div ng-show="occupationModule.assessment === \'KUTSEHINDAMISVIIS_E\'" layout="column"> <md-input-container flex> <label>{{\'module.grade3Description\' | translate}}</label> <textarea ng-model="occupationModule.grade3Description" max-rows="2" readonly></textarea> </md-input-container> <md-input-container flex> <label>{{\'module.grade4Description\' | translate}}</label> <textarea ng-model="occupationModule.grade4Description" max-rows="2" readonly></textarea> </md-input-container> <md-input-container flex> <label>{{\'module.grade5Description\' | translate}}</label> <textarea ng-model="occupationModule.grade5Description" max-rows="2" readonly></textarea> </md-input-container> </div> <div ng-show="occupationModule.assessment === \'KUTSEHINDAMISVIIS_M\'" layout="column" flex> <md-input-container flex> <label>{{\'module.gradeADescription\' | translate}}</label> <textarea ng-model="occupationModule.passDescription" max-rows="10" readonly></textarea> </md-input-container> </div> </fieldset> <div>&nbsp;</div> <fieldset tabindex="3"> <legend md-colors="{color: \'default-primary-800\'}" class="md-title-small">{{\'module.themes\' | translate}}</legend> <div layout="column"> <div flex="10"> </div> <div flex> <md-table-container> <table md-table class="secondary-table"> <thead md-head> <tr md-row> <th md-column>{{\'module.themeName\' | translate}}</th> <th md-column>{{\'module.capacityEkapPerHour\' | translate}}</th> <th md-column>{{\'module.subthemes\' | translate}}</th> <th md-column>{{\'module.studyYear\' | translate}}</th> <th md-column></th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="theme in occupationModule.themes | orderBy: currentLanguageNameField()"> <td md-cell> <a class="md-primary one-row" ng-click="openAddThemeDialog(theme)">{{currentLanguageNameField(theme)}}</a> </td> <td md-cell> {{theme.credits}}/{{theme.hours}} </td> <td md-cell> <p class="scrollable">{{theme.subthemes}}</p> </td> <td md-cell> {{theme.studyYearNumber}} </td> <td md-cell></td> </tr> </tbody> </table> </md-table-container> </div> </div> </fieldset> <div flex>&nbsp;</div> <fieldset tabindex="4" layout="column"> <legend md-colors="{color: \'default-primary-800\'}" class="md-title-small">{{\'module.proportionPerStudyYear\' | translate}}</legend> <div layout="row" style="overflow:auto"> <md-input-container flex ng-repeat="yc in occupationModule.yearCapacities track by $index"> <label>{{$index+1}}.&nbsp;{{\'module.studyYearLowercase\' | translate}}</label> <input disabled ng-model="yc.credits" type="number"> </md-input-container> </div> </fieldset> <div flex>&nbsp;</div> <md-input-container flex ng-if="occupationModule.teacher"> <label>{{\'module.supervisor\' | translate}}</label> <input ng-value="currentLanguageNameField(occupationModule.teacher)" type="text" readonly> </md-input-container> <md-input-container flex ng-if="!occupationModule.teacher"> <label>{{\'module.supervisor\' | translate}}</label> <input ng-model="occupationModule.supervisor" type="text" readonly> </md-input-container> </div> <span flex></span> <md-button class="md-raised" ng-click="back(backToViewForm)">{{"main.button.back" | translate}}</md-button> </form> </div>'),a.put("vocationalCurriculum/module/vocational.curriculum.module.edit.html",'<div class="ois-form-layout-padding nomargin"> <form name="replaceModuleForm" layout="column" ng-show="showReplaceMenu"> <div class="form-readonly" layout="column"> <md-input-container flex> <label>{{\'basemodule.curriculum\' | translate}}</label> <hois-value class="textInput" value="currentLanguageNameField(curriculum)"></hois-value> </md-input-container> <md-input-container flex> <label>{{\'module.\' + currentLanguageNameVariable() | translate}}</label> <hois-value class="textInput" value="currentLanguageNameField(module)"></hois-value> </md-input-container> <md-input-container flex> <label>{{\'module.credits\' | translate}}</label> <hois-value class="textInput" value="module.credits"></hois-value> </md-input-container> </div> <div flex> <md-autocomplete name="baseModuleTemplate" md-selected-item-change="getReplaceForm(bModule)" md-selected-item="baseModuleTemplate" md-search-text="baseModuleNameTemplate" md-items="bModule in searchBaseModule(baseModuleNameTemplate)" md-item-text="currentLanguageNameField(bModule)" md-min-length="1" md-floating-label="{{\'basemodule.label\' | translate}}" md-no-cache required md-require-match class="small-margin" flex> <md-item-template> <span md-highlight-text="bModule" md-highlight-flags="^i">{{currentLanguageNameField(bModule)}}</span> </md-item-template> <md-not-found> {{\'main.messages.error.notFound\' | translate}} </md-not-found> </md-autocomplete> </div> <p class="md-body-1" ng-show="replaceModuleForm.showNotEnoughOutcomesError" style="color: #dd2c00; margin: 3px">{{\'basemodule.warning.notEnoughOutcomes\' | translate}}</p> <div flex ng-show="replaceBaseModuleForm.outcomes"> <fieldset tabindex="0"> <legend md-colors="{color: \'default-primary-800\'}" class="md-title-small">{{\'basemodule.studyOutcome\' | translate}}</legend> <p class="md-body-1" ng-show="replaceModuleForm.showOneToOneOutcomeError" style="color: #dd2c00; margin: 3px">{{\'basemodule.warning.oneToOneOutcome\' | translate}}</p> <div layout="column"> <div layout="row" ng-repeat="outcome in replaceBaseModuleForm.outcomes | orderBy: \'+id\'"> <p class="md-body-1" flex style="text-align: end; overflow-wrap: break-word; word-wrap: break-word">{{currentLanguageNameField(outcome)}}</p> <md-input-container flex="50" flex-offset="10"> <label>{{\'basemodule.baseModuleOutcome\' | translate}}</label> <md-select ng-model="replaceBaseModuleForm.connectionsOutcome[outcome.id]" required ng-change="selectChangeOutcome(outcome.id, replaceBaseModuleForm.connectionsOutcome[outcome.id])" ng-model-options="{trackBy: \'$value.id\'}"> <md-option ng-value="bOutcome" ng-repeat="bOutcome in replaceBaseModuleForm.baseModuleOutcomes | orderBy: \'+id\'">{{currentLanguageNameField(bOutcome)}}</md-option> </md-select> </md-input-container> </div> </div> </fieldset> </div> <div flex ng-show="replaceBaseModuleForm.themes && replaceBaseModuleForm.outcomes"> <fieldset tabindex="1"> <legend md-colors="{color: \'default-primary-800\'}" class="md-title-small">{{\'basemodule.themes\' | translate}}</legend> <p class="md-body-1" ng-show="replaceModuleForm.showOneToOneThemeError" style="color: #dd2c00; margin: 3px">{{\'basemodule.warning.oneToOneTheme\' | translate}}</p> <div layout="column" ng-repeat="oModule in replaceBaseModuleForm.occupationModules | orderBy: \'+id\'"> <md-checkbox ng-model="oModule.enabled" aria-label="Enabled?" ng-disabled="!replaceBaseModuleForm.themes[oModule.id]">{{currentLanguageNameField(oModule)}}</md-checkbox> <p class="md-body-1" style="color: #dd2c00; margin-top: 0px" ng-if="!replaceBaseModuleForm.themes[oModule.id]">{{\'basemodule.warning.tooManyThemes\' | translate}}</p> <div ng-if="oModule.enabled" flex> <div layout="row" ng-repeat="theme in replaceBaseModuleForm.themes[oModule.id] | orderBy: \'+id\'"> <p class="md-body-1" flex style="text-align: end; overflow-wrap: break-word; word-wrap: break-word">{{currentLanguageNameField(theme)}}</p> <md-input-container flex="50" flex-offset="10"> <label>{{\'basemodule.baseModuleTheme\' | translate}}</label> <md-select ng-model="replaceBaseModuleForm.connections[theme.id]" required ng-change="selectChange(oModule.id, theme.id, replaceBaseModuleForm.connections[theme.id])" ng-model-options="{trackBy: \'$value.id\'}"> <md-option ng-value="bTheme" ng-repeat="bTheme in replaceBaseModuleForm.baseModuleThemes | orderBy: \'+id\'">{{currentLanguageNameField(bTheme)}}</md-option> </md-select> </md-input-container> </div> </div> </div> </fieldset> </div> <div layout="row" flex> <md-button class="md-primary md-raised" ng-click="replace()">{{\'main.button.replace\' | translate}}</md-button> <md-button class="md-raised" ng-click="switchView(false)">{{\'main.button.back\' | translate}}</md-button> </div> </form> <form ng-cloak name="vocationalCurriculumModuleForm" ng-show="!showReplaceMenu"> <div layout="column" ng-cloak> <div layout="column" flex layout-gt-sm="row"> <md-radio-group class="md-primary base-module-menu" ng-model="moduleType" ng-change="radioChange()" layout="row" layout-align-gt-sm="center center" ng-disabled="baseModuleUsed || module.id"> <md-radio-button ng-value="moduleTypes.NEW_MODULE" aria-label="Uus moodul"> {{\'basemodule.newModule\' | translate}} </md-radio-button> <md-radio-button ng-value="moduleTypes.BASE_MODULE" aria-label="Baasmoodul"> {{\'basemodule.label\' | translate}} </md-radio-button> </md-radio-group> <div layout="row" flex ng-show="moduleType === moduleTypes.NEW_MODULE"> <md-button class="md-raised" ng-show="module.id && !baseModuleUsed" ng-click="switchView(true)">{{\'basemodule.operation.replace.label\' | translate}}</md-button> </div> <div layout="row" flex ng-show="baseModuleUsed"> <md-button class="md-raised" ng-click="releaseModule()">{{\'basemodule.operation.release.label\' | translate}}</md-button> </div> </div> <div flex ng-show="moduleType === moduleTypes.BASE_MODULE"> <md-autocomplete name="baseModule" md-selected-item-change="getBaseModule(bModule)" md-selected-item="baseModule" md-search-text="baseModuleName" md-items="bModule in searchBaseModule(baseModuleName)" md-item-text="currentLanguageNameField(bModule)" md-min-length="3" md-floating-label="{{\'basemodule.label\' | translate}}" md-no-cache class="small-margin" ng-required="moduleType === moduleTypes.BASE_MODULE" md-require-match="moduleType === moduleTypes.BASE_MODULE" ng-disabled="baseModuleUsed" flex> <md-item-template> <span md-highlight-text="bModule" md-highlight-flags="^i">{{currentLanguageNameField(bModule)}}</span> </md-item-template> <md-not-found> {{\'main.messages.error.notFound\' | translate}} </md-not-found> </md-autocomplete> </div> <fieldset tabindex="1" ng-if="module.canHaveOccupations"> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{module.occupation ? \'module.occupationPartOccupationSpecialize\' : \'module.partOccupation\' | translate}}</legend> <div layout="column"> <div ng-repeat="item in module.curriculumOccupations | orderBy: \'occupation\'"> <md-checkbox ng-model="occupationsSelected[item.occupation]" ng-change="validateOccupations()"> <hois-classifier-value ng-model="item.occupation" main-classifier-codes="KUTSE,OSAKUTSE" class="inline"></hois-classifier-value> </md-checkbox> <div layout="column"> <div ng-repeat="partOccupation in item.partOccupations | orderBy" flex layout="row"> <div flex="5">&nbsp;</div> <md-checkbox ng-model="occupationsSelected[partOccupation]" ng-change="validateOccupations()"> <hois-classifier-value ng-model="partOccupation" main-classifier-code="OSAKUTSE" class="inline"></hois-classifier-value> </md-checkbox> </div> </div> <div layout="column"> <div ng-repeat="speciality in item.specialities | orderBy" layout="row"> <div flex="5">&nbsp;</div> <md-checkbox ng-model="specialitiesSelected[speciality]" ng-change="validateOccupations()"> <hois-classifier-value ng-model="speciality" main-classifier-code="SPETSKUTSE" class="inline"></hois-classifier-value> </md-checkbox> </div> </div> </div> </div> <md-input-container hide> <input ng-model="occupationsValid" type="text" required> </md-input-container> <p ng-show="vocationalCurriculumModuleForm.$submitted && !occupationsValid" class="invalid">{{\'curriculum.error.moduleOccupations\' | translate}}</p> </fieldset> <div>&nbsp;</div> <div layout="row" flex> <md-input-container flex="45"> <label>{{\'module.type\' | translate}}</label> <hois-classifier-select name="module" ng-model="module.module" show-only-values="possibleTypes" main-classifier-code="KUTSEMOODUL" required ng-disabled="module.id && !module.basicDataCanBeEdited" model-value-attr="code"></hois-classifier-select> </md-input-container> <md-input-container flex="10" flex-sm="50" flex-xs="50" flex-offset="5"> <label>{{\'module.credits\' | translate}}</label> <input ng-model="module.credits" type="number" name="credits" min="0" max="999" pattern="^\\d+(\\.\\d{1})?$" required ng-readonly="module.baseModule || moduleType === moduleTypes.BASE_MODULE"> <div ng-messages="vocationalCurriculumModuleForm.credits.$error" ng-show="vocationalCurriculumModuleForm.credits.$dirty"> <div ng-message="min"> {{\'main.messages.error.positive\' | translate}} </div> <div ng-message="max"> {{\'curriculum.error.max999\' | translate}} </div> <div ng-message="pattern"> {{\'stateCurriculum.error.decimalPresision\' | translate}} </div> </div> </md-input-container> </div> <md-input-container flex> <label>{{\'module.nameEt\' | translate}}</label> <input ng-model="module.nameEt" type="text" md-maxlength="255" required ng-readonly="module.baseModule || moduleType === moduleTypes.BASE_MODULE"> </md-input-container> <md-input-container flex> <label>{{\'module.nameEn\' | translate}}</label> <input ng-model="module.nameEn" type="text" md-maxlength="255" ng-readonly="module.baseModule || moduleType === moduleTypes.BASE_MODULE"> </md-input-container> <md-input-container flex> <label>{{\'module.objectivesEt\' | translate}}</label> <textarea ng-model="module.objectivesEt" md-maxlength="10000" max-rows="10" required ng-readonly="module.baseModule || moduleType === moduleTypes.BASE_MODULE"></textarea> </md-input-container> <md-input-container flex> <label>{{\'module.objectivesEn\' | translate}}</label> <textarea ng-model="module.objectivesEn" md-maxlength="10000" max-rows="10" ng-readonly="module.baseModule || moduleType === moduleTypes.BASE_MODULE"></textarea> </md-input-container> <fieldset tabindex="4"> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'module.studyOutcome\' | translate}} *</legend> <input style="display:none" type="number" readonly name="outcomesLength" ng-model="module.outcomes.length" min="1"> <div class="invalid" ng-if="vocationalCurriculumModuleForm.$submitted" ng-messages="vocationalCurriculumModuleForm.outcomesLength.$error"> <div ng-message="min">{{\'main.messages.error.atLeastOneShouldBeAdded\' | translate}}</div> </div> <div layout="row" flex ng-show="!(module.baseModule || moduleType === moduleTypes.BASE_MODULE)"> <md-input-container flex="45"> <label>{{\'studyOutcome.nameEt\' | translate}} *</label> <textarea ng-model="outcomeEt" md-maxlength="1000" max-rows="10"></textarea> </md-input-container> <md-input-container flex="40" flex-offset="5"> <label>{{\'studyOutcome.nameEn\' | translate}}</label> <textarea ng-model="outcomeEn" md-maxlength="1000" max-rows="10"></textarea> </md-input-container> <md-button class="md-primary" ng-click="addOutcome()" ng-if="!isEditingOutcome">{{\'main.button.add\' | translate}}</md-button> <md-button class="md-primary" ng-click="saveOutcome()" ng-if="isEditingOutcome">{{\'main.button.change\' | translate}}</md-button> </div> <div layout="column"> <div ng-repeat="item in module.outcomes track by $index" class="occupation-row align-center" layout="row" flex> <div flex="45"> <a ng-click="editOutcome(item)" ng-show="!(module.baseModule || moduleType === moduleTypes.BASE_MODULE)"> <p class="scrollable">{{item.outcomeEt}}</p> </a> <p class="scrollable" ng-show="module.baseModule || moduleType === moduleTypes.BASE_MODULE">{{item.outcomeEt}}</p> </div> <div flex="40" flex-offset="5"> <a ng-click="editOutcome(item)" ng-show="!(module.baseModule || moduleType === moduleTypes.BASE_MODULE)"> <p class="scrollable">{{item.outcomeEn}}</p> </a> <p class="scrollable" ng-show="module.baseModule || moduleType === moduleTypes.BASE_MODULE">{{item.outcomeEn}}</p> </div> <div ng-show="!(module.baseModule || moduleType === moduleTypes.BASE_MODULE)" layout="row" layout-align="center center"> <div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</div> <div> <a class="remove" ng-click="removeFromArray(module.outcomes, item)">&times;&nbsp;&nbsp;</a> </div> <div> <p ng-if="$first" class="link-disabled">&#9650;&nbsp;</p> <a ng-if="!$first" class="link-no-underline" ng-click="swap($index, $index - 1)">&#9650;&nbsp;</a> </div> <div> <p ng-if="$last" class="link-disabled">&#9660;&nbsp;</p> <a ng-if="!$last" class="link-no-underline" ng-click="swap($index, $index + 1)">&#9660;&nbsp;</a> </div> </div> </div> </div> </fieldset> <div>&nbsp;</div> <md-input-container flex> <label>{{\'stateCurriculum.enter.module.criteriaEt\' | translate}}</label> <textarea ng-model="module.assessmentsEt" required md-maxlength="20000" max-rows="10" ng-readonly="module.baseModule || moduleType === moduleTypes.BASE_MODULE"></textarea> </md-input-container> <md-input-container flex> <label>{{\'stateCurriculum.enter.module.criteriaEn\' | translate}}</label> <textarea ng-model="module.assessmentsEn" md-maxlength="20000" max-rows="10" ng-readonly="module.baseModule || moduleType === moduleTypes.BASE_MODULE"></textarea> </md-input-container> <md-input-container flex> <label>{{\'module.competencesAquired\' | translate}}</label> <md-select multiple ng-model="module.competences" ng-disabled="module.module !== \'KUTSEMOODUL_P\' || competences.length === 0"> <md-option ng-repeat="option in competences | orderBy: currentLanguageNameField() track by $index" ng-value="option.code" aria-label="{{currentLanguageNameField(option)}}"> {{currentLanguageNameField(option)}}</md-option> </md-select> </md-input-container> <!-- <md-input-container flex>\r\n        <label>{{\'module.competencesAquired\' | translate}}</label>\r\n        <hois-select ng-model="module.competences" values="studyPeriods"\r\n        ng-disabled="module.module !== \'KUTSEMOODUL_P\' || competences.length === 0"\r\n        valueProperty="code"></hois-select>\r\n      </md-input-container> --> <!-- <md-input-container flex>\r\n          <label>{{\'module.competencesAquired\' | translate}}</label>\r\n          <hois-classifier-select  ng-model="module.competences" show-only-values="competences" main-classifier-code="KOMPETENTS"\r\n          ng-disabled="module.module !== \'KUTSEMOODUL_P\' || competences.length === 0" model-value-attr="code"></hois-classifier-select>\r\n        </md-input-container> --> <br> <md-input-container flex> <md-checkbox ng-model="module.practice" ng-disabled="module.module === \'KUTSEMOODUL_L\'">{{\'module.practice\' | translate}}</md-checkbox> </md-input-container> <md-input-container> <md-checkbox ng-model="module.isAdditional" aria-label="{{\'stateCurriculum.enter.module.isAdditional\' | translate}}"> {{\'stateCurriculum.enter.module.isAdditional\' | translate}} </md-checkbox> </md-input-container> </div> <span flex></span> <md-button class="md-raised md-primary" ng-click="save()">{{"main.button.save" | translate}}</md-button> <md-button class="md-raised" ng-click="delete()" ng-if="module.id && !module.addedToImplementationPlan">{{"main.button.delete" | translate}}</md-button> <md-button class="md-raised" ng-click="back(\'#/vocationalCurriculum/\' + curriculumId + \'/edit\', vocationalCurriculumModuleForm)">{{"main.button.back" | translate}}</md-button> </form> </div> <style>.link-no-underline {\r\n    text-decoration: none;\r\n  }\r\n\r\n  .link-disabled {\r\n    color: #d7dde5;\r\n  }\r\n  .base-module-menu {\r\n    padding-right: 10px;\r\n    padding-bottom: 5px;\r\n    margin-top: 6px;\r\n    margin-bottom: 6px;\r\n  }\r\n  @media screen and (min-width: 960px) {\r\n    .base-module-menu {\r\n      height: 36px;\r\n    }\r\n  }\r\n  .form-readonly > md-input-container {\r\n    margin-bottom: 18px !important;\r\n  }\r\n  .md-select-menu-container {\r\n    max-width: -moz-calc(100vw - 1em);\r\n    max-width: -webkit-calc(100vw - 1em);\r\n    max-width: calc(100vw - 1em);\r\n  }</style>'),
a.put("vocationalCurriculum/module/vocational.curriculum.module.view.html",'<div class="ois-form-layout-padding nomargin"> <div layout="column" ng-cloak> <fieldset tabindex="1" ng-if="module.canHaveOccupations"> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{module.occupation ? \'module.occupationPartOccupationSpecialize\' : \'module.partOccupation\' | translate}}</legend> <div layout="column"> <div ng-repeat="item in module.curriculumOccupations | orderBy: \'occupation\'"> <md-checkbox ng-model="occupationsSelected[item.occupation]" disabled> <hois-classifier-value ng-model="item.occupation" main-classifier-codes="KUTSE,OSAKUTSE" class="inline"></hois-classifier-value> </md-checkbox> <div layout="column"> <div ng-repeat="partOccupation in item.partOccupations | orderBy" flex layout="row"> <div flex="5">&nbsp;</div> <md-checkbox ng-model="occupationsSelected[partOccupation]" disabled> <hois-classifier-value ng-model="partOccupation" main-classifier-code="OSAKUTSE" class="inline"></hois-classifier-value> </md-checkbox> </div> </div> <div layout="column"> <div ng-repeat="speciality in item.specialities | orderBy" layout="row"> <div flex="5">&nbsp;</div> <md-checkbox ng-model="specialitiesSelected[speciality]" disabled> <hois-classifier-value ng-model="speciality" main-classifier-code="SPETSKUTSE" class="inline"></hois-classifier-value> </md-checkbox> </div> </div> </div> </div> <md-input-container hide> <input ng-model="occupationsValid" readonly> </md-input-container> </fieldset> <div>&nbsp;</div> <div layout="row" flex> <md-input-container flex="45"> <label>{{\'module.type\' | translate}}</label> <hois-classifier-select name="module" ng-model="module.module" show-only-values="possibleTypes" main-classifier-code="KUTSEMOODUL" disabled model-value-attr="code"></hois-classifier-select> </md-input-container> <md-input-container flex="10" flex-sm="50" flex-xs="50" flex-offset="5"> <label>{{\'module.credits\' | translate}}</label> <input ng-model="module.credits" type="number" name="credits" readonly> </md-input-container> </div> <md-input-container flex> <label>{{\'module.nameEt\' | translate}}</label> <input ng-model="module.nameEt" type="text" readonly> </md-input-container> <md-input-container flex> <label>{{\'module.nameEn\' | translate}}</label> <input ng-model="module.nameEn" type="text" readonly> </md-input-container> <md-input-container flex> <label>{{\'module.objectivesEt\' | translate}}</label> <textarea ng-model="module.objectivesEt" max-rows="10" readonly></textarea> </md-input-container> <md-input-container flex> <label>{{\'module.objectivesEn\' | translate}}</label> <textarea ng-model="module.objectivesEn" max-rows="10" readonly></textarea> </md-input-container> <fieldset tabindex="4"> <legend md-colors="{color: \'primary-800\'}" class="md-title-small">{{\'module.studyOutcome\' | translate}}</legend> <div layout="column"> <div ng-repeat="item in module.outcomes track by $index" class="occupation-row align-center" layout="row" flex> <div flex="45"> <p class="scrollable">{{item.outcomeEt}}</p> </div> <div flex="40" flex-offset="5"> <p class="scrollable">{{item.outcomeEn}}</p> </div> </div> </div> </fieldset> <div>&nbsp;</div> <md-input-container flex> <label>{{\'stateCurriculum.enter.module.criteriaEt\' | translate}}</label> <textarea ng-model="module.assessmentsEt" readonly max-rows="10"></textarea> </md-input-container> <md-input-container flex> <label>{{\'stateCurriculum.enter.module.criteriaEn\' | translate}}</label> <textarea ng-model="module.assessmentsEn" readonly max-rows="10"></textarea> </md-input-container> <md-input-container flex> <label>{{\'module.competencesAquired\' | translate}}</label> <md-select multiple ng-model="module.competences" disabled> <md-option ng-repeat="option in competences | orderBy: currentLanguageNameField() track by $index" ng-value="option.code" aria-label="{{currentLanguageNameField(option)}}"> {{currentLanguageNameField(option)}}</md-option> </md-select> </md-input-container> <br> <md-input-container flex> <md-checkbox ng-model="module.practice" disabled>{{\'module.practice\' | translate}}</md-checkbox> </md-input-container> <md-input-container> <md-checkbox ng-model="module.isAdditional" aria-label="{{\'stateCurriculum.enter.module.isAdditional\' | translate}}" disabled> {{\'stateCurriculum.enter.module.isAdditional\' | translate}} </md-checkbox> </md-input-container> </div> <span flex></span> <div> <md-button class="md-raised" ng-click="back(\'#/vocationalCurriculum/\' + curriculumId + \'/view\')">{{"main.button.back" | translate}}</md-button> </div> </div> <style>.link-no-underline {\r\n      text-decoration: none;\r\n    }\r\n\r\n    .link-disabled {\r\n      color: #d7dde5;\r\n    }</style>')}]);