<md-nav-bar md-selected-nav-item="currentNavItem" aria-label="{{'subjectStudyPeriod.label.options' | translate}}">
    <md-nav-item md-nav-href="#/students/journals" name="journals">{{'student.journal.journals' | translate}}</md-nav-item>
    <md-nav-item md-nav-href="#/students/study" name="study">{{'student.journal.study.label' | translate}}</md-nav-item>
    <md-nav-item md-nav-href="#/students/tasks" name="tasks">{{'student.journal.tasks.label' | translate}}</md-nav-item>
</md-nav-bar>

<div layout-padding>
    <div flex>
        <hois-collapsable ng-repeat="year in journalsByYears track by $index" ng-click="getStudyYearJournals(year.yearId, year.yearCode)" expanded="year.collapsableOpen">
            <hois-collapsable-header>
                <span>
                    <hois-classifier-value style="display: inline-block" ng-model="year.yearCode" main-classifier-code="OPPEAASTA"></hois-classifier-value>
                    <span>{{'student.journal.studyYear' | translate}}</span>
                </span>
                <!-- <button ng-click="getStudyYearJournals(year.yearId, year.yearCode)"></button> --> 
            </hois-collapsable-header>
            <md-table-container>
                <table md-table class="secondary-table">
                    <thead md-head>
                        <tr md-row>
                            <th md-column>{{'student.journal.journalName' | translate}}</th>
                            <th md-column>{{'student.journal.grades' | translate}}</th>
                            <th md-column>{{'student.journal.modules' | translate}}</th>
                            <th md-column>{{'student.journal.teachers' | translate}}</th>
                            <th md-column>{{'student.journal.absencesIncudlingWithoutReason' | translate}}</th>
                            <th md-column>{{'student.journal.lateForClass' | translate}}</th>
                            <th md-column></th>
                        </tr>
                    </thead>
                    <tbody md-body>
                        <tr md-row ng-repeat="journal in year.journals | orderBy: 'nameEt'" ng-class-odd="'odd'" ng-class-even="'even'">
                            <td md-cell width="20%"><a ng-click="showJournal(journal)">{{journal.nameEt}}</a></td>
                            <td md-cell>
                                <span ng-repeat="result in journal.journalEntries | filter : {gradeValue: ''} | orderBy: ['!entryDate', '-entryDate']"
                                ng-class="{good: result.entryType.code === 'SISSEKANNE_L' && resultIsPostive(result.gradeValue), 
                                bad: result.entryType.code === 'SISSEKANNE_L' && !resultIsPostive(result.gradeValue),
                                bold: isTestButNotFinal(result.entryType.code)}">
                                {{result.gradeValue}} &nbsp
                                <md-tooltip ng-if="result.gradeValue">
                                    {{result.gradeInserted | hoisDate}}
                                    <span ng-if="result.entryType.code">,&nbsp;</span> {{currentLanguageNameField(result.entryType)}}
                                    <span ng-if="result.addInfo">,&nbsp;</span> {{result.addInfo}}
                                </md-tooltip>
                            </span>
                            </td>
                            <td md-cell>{{currentLanguageNameField(journal.modules)}}</td>
                            <td md-cell>{{journal.teachers}}</td>
                            <td md-cell width="20%">
                                <span>{{journal.absencePV}} /</span>
                                <span ng-class="{bad: journal.absenceP > 0}">{{journal.absenceP}}</span>
                            </td>
                            <td md-cell>{{journal.absenceH}}</td>
                            <td md-cell><a ng-href="/#/studyMaterial/vocational/{{journal.id}}/view">{{'studyMaterial.label' | translate}}</a></td>
                        </tr>
                    </tbody>
                </table>
            </md-table-container>
        </hois-collapsable>
    </div>
</div>

<style>
.good {
    color: rgb(13,71,161);
    font-weight: 500;
    font-size: 18px;
}
    
.bad {
    color: red;
    font-weight: 500;
    font-size: 18px;
}

.bold {
    font-weight: 500;
}

</style>