<div layout="column" layout-padding>
  <div>
    <form name="generalMessageForm">
      <md-input-container class="md-block">
        <label class="textInput">{{'generalmessage.title' | translate}}</label>
        <input ng-model="record.title" name="title" type="text" md-maxlength="1000" required autofocus>
      </md-input-container>

      <md-input-container class="md-block">
        <label class="textInput">{{'generalmessage.content' | translate}}</label>
        <textarea ng-model="record.content" name="content" md-maxlength="4000" required></textarea>
      </md-input-container>

      <div layout="row">
        <div flex="100">
          <md-input-container flex>
			<label>{{'generalmessage.validFrom' | translate}}</label>
            <md-datepicker ng-model="record.validFrom"></md-datepicker>
          </md-input-container>
          <md-input-container flex flex-offset="5">
			<label>{{'generalmessage.validThru' | translate}}</label>
            <md-datepicker ng-model="record.validThru" md-min-date="record.validFrom"></md-datepicker>
          </md-input-container>
        </div>
      </div>

      <div>&nbsp;</div>
	  <fieldset tabindex="1">
				<legend md-colors="{color: 'primary-800'}" class="md-title-small">{{'generalmessage.targets' | translate}} *</legend>
        <div layout="column" class="common-label" ng-repeat="role in roleDefs">
          <span>
            <md-checkbox ng-model="role._selected">
              {{currentLanguageNameField(role)}}
            </md-checkbox>
          </span>
		</div>  
	  </fieldset>
    </form>

    <md-button ng-click="update()" class="md-raised md-primary">{{'main.button.save' | translate}}</md-button>
    <md-button ng-click="delete()" ng-if="record.id" class="md-raised">{{'main.button.delete' | translate}}</md-button>
    <md-button ng-href="#/generalmessages" class="md-raised">{{'main.button.back' | translate}}</md-button>
  </div>
</div>
