<div layout="column" layout-padding>
    <form name="subjectStudyPeriodPlanEditForm">
        <div layout="column">
            <div layout="row" layout-sm="column" layout-xs="column"  ng-if="!auth.school">
                <md-input-container flex="45" flex-sm="100" flex-xs="100">
                    <label>{{'subjectStudyPeriodPlan.studyPeriod' | translate}}</label>
                    <hois-value value="currentLanguageNameField(studyPeriod)"></hois-value>
                </md-input-container>
                <md-input-container flex="45" flex-sm="100" flex-xs="100">
                    <label>{{'subjectStudyPeriodPlan.subject' | translate}}</label>
                    <hois-value value="currentLanguageNameField(subject)"></hois-value>
                </md-input-container>
            </div>
            <h2>{{'subjectStudyPeriodPlan.volumes' | translate}}</h2>

            <table md-table class="secondary-table">
                <thead md-head>
                    <tr md-row>
                        <th md-cell></th>
                        <th md-cell>{{'subjectStudyPeriodPlan.volume' | translate}}</th>
                        <th md-cell>{{'subjectStudyPeriodPlan.isContact' | translate}}</th>
                    </tr>
                </thead>
                <tbody md-body>
                    <tr md-row ng-repeat="capacity in record.capacities | orderBy" ng-class-odd="'odd'" ng-class-even="'even'">
                        <td md-cell>
                            <hois-classifier-value ng-model="capacity.capacityType" main-classifier-code="MAHT"></hois-classifier-value>
                        </td>
                        <td md-cell>
                            <md-input-container>
                                <input ng-model="capacity.hours" type="number" min="0" max="1000" required>
                            </md-input-container>
                        </td>
                         <td md-cell>
                            <md-checkbox ng-model="capacity.isContact" aria-label="{{'subjectStudyPeriodPlan.isContact' | translate}}">
                        </td>
                    </tr>
                </tbody>
            </table>
            <br>
            <h2>{{'subjectStudyPeriodPlan.volumeTotal' | translate}}: {{getTotalCapacity()}}</h2>



            <!--<h2>{{'subjectStudyPeriodPlan.validInCurriculums' | translate}}</h2>
            <md-checkbox ng-repeat="curriculum in curriculums" ng-model="smth" aria-label="{{'subjectStudyPeriodPlan.validInCurriculums' | translate}}">
                {{currentLanguageNameField(curriculum)}}
            </md-checkbox>
            <h2>{{'subjectStudyPeriodPlan.validInStudyForms' | translate}}</h2>
            <md-checkbox ng-repeat="studyForm in studyForms" ng-model="smth" aria-label="{{'subjectStudyPeriodPlan.validInCurriculums' | translate}}">
                {{currentLanguageNameField(studyForm)}}
            </md-checkbox>-->

              
            <md-input-container flex="60" flex-sm="100" flex-xs="100">
              <label>{{'subjectStudyPeriodPlan.validInCurriculums' | translate}}</label>
              <hois-select ng-model="record.curriculums" values="curriculums" multiple></hois-select>
            </md-input-container>
            <md-input-container flex="60" flex-sm="100" flex-xs="100">
              <label>{{'subjectStudyPeriodPlan.validInStudyForms' | translate}}</label>
              <hois-classifier-select ng-model="record.studyForms" model-value-attr="code" main-classifier-code="OPPEVORM" multiple></hois-classifier-select>
            </md-input-container>

        </div>
        <div layout="row">
            <md-button class="md-raised md-primary" ng-click="save()">{{'main.button.save' | translate}}</md-button>
            <md-button class="md-raised md-default" ng-click="delete()" ng-if="record.id">{{'main.button.delete' | translate}}</md-button>
            <md-button class="md-raised" ng-href="/#/subjectStudyPeriodPlans">{{'main.button.back' | translate}}</md-button>
        </div>
    </form>
</div>
